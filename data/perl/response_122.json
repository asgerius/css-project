[{"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 8, "last_activity_date": 1494458226, "last_edit_date": 1494458226, "creation_date": 1494451456, "answer_id": 43902948, "question_id": 43902898, "link": "https://stackoverflow.com/questions/43902898/what-does-the-caret-in-mean-in-the-string-form-of-a-perl-qr-regex/43902948#43902948", "title": "What does the caret ^ in (?^:\u2026) mean in the string form of a Perl qr// Regex?", "body": "<p>Basically it means the default flags apply (even if it gets interpolated into a regex that specifies differently).\nBefore it was introduced,  qr would produce something like <code>(?-ismx:</code> and a new flag being added to Perl would make that change, which m ade keeping tests up \nto date a pain.</p>\n\n<p><a href=\"http://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlre.html#Extended-Patterns</a>:</p>\n\n<p>Starting in Perl 5.14, a \"^\" (caret or circumflex accent) immediately after the \"?\" is a shorthand equivalent to d-imnsx . Flags (except \"d\" ) may follow the caret to override it. But a minus sign is not legal with it.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1494454072, "creation_date": 1494454072, "answer_id": 43903481, "question_id": 43902898, "link": "https://stackoverflow.com/questions/43902898/what-does-the-caret-in-mean-in-the-string-form-of-a-perl-qr-regex/43903481#43903481", "title": "What does the caret ^ in (?^:\u2026) mean in the string form of a Perl qr// Regex?", "body": "<p>It means \"set all flags (such as <code>i</code>, <code>s</code>) to their defaults\", so</p>\n\n<pre><code>$ perl -le'my $re = \"a\"; for (qw( a A )) { print \"$_: \", /$re/i ? \"match\" : \"no match\"; }'\na: match\nA: match\n\n$ perl -le'my $re = \"(?^:a)\"; for (qw( a A )) { print \"$_: \", /$re/i ? \"match\" : \"no match\"; }'\na: match\nA: no match\n</code></pre>\n\n<p>It's primarily used to represent patterns created by qr//.</p>\n\n<pre><code>$ perl -le'my $re = qr/a/; print $re; for (qw( a A )) { print \"$_: \", /$re/i ? \"match\" : \"no match\"; }'\n(?^:a)\na: match\nA: no match\n\n$ perl -le'my $re = qr/a/i; print $re; for (qw( a A )) { print \"$_: \", /$re/i ? \"match\" : \"no match\"; }'\n(?^i:a)\na: match\nA: match\n</code></pre>\n"}], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 43902948, "answer_count": 2, "score": 6, "last_activity_date": 1494458226, "creation_date": 1494451037, "question_id": 43902898, "link": "https://stackoverflow.com/questions/43902898/what-does-the-caret-in-mean-in-the-string-form-of-a-perl-qr-regex", "title": "What does the caret ^ in (?^:\u2026) mean in the string form of a Perl qr// Regex?", "body": "<p>Consider this script, which is based on an answer to\n<a href=\"https://stackoverflow.com/q/267399\">SO 267399</a> about parsing Roman\nnumbers, though the parsing of Roman numbers is incidental to this\nquestion.</p>\n\n<pre><code>#!/usr/bin/env perl\n#\n# Based on answer to SO 0026-7399\n\nuse warnings;\nuse strict;\n\nmy $qr1 = qr/(?i:M{1,3})/;\nmy $qr2 = qr/(?i:C[MD]|D?C{1,3})/;\nmy $qr3 = qr/(?i:X[CL]|L?X{1,3})/;\nmy $qr4 = qr/(?i:I[XV]|V?I{1,3})/;\n\nprint \"1000s: $qr1\\n\";\nprint \" 100s: $qr2\\n\";\nprint \"  10s: $qr3\\n\";\nprint \"   1s: $qr4\\n\";\n\n# This $qr is too simple \u2014 it matches the empty string\n#my $qr = qr/($qr1?$qr2?$qr3?$qr4?)/;\n\nmy $qr = qr/\\b((?:$qr1$qr2?$qr3?$qr4?)|(?:$qr2$qr3?$qr4?)|(?:$qr3$qr4?)|(?:$qr4))\\b/;\n\nprint \" Full: $qr\\n\";\n\nwhile (&lt;&gt;)\n{\n    chomp;\n    print \" Line: [$_]\\n\";\n    while ($_ =~ m/$qr/g)\n    {\n        print \"Match: [$1] found in [$_] using qr//\\n\";\n    }\n}\n</code></pre>\n\n<p>Given the data file below, the first three lines each contain a Roman number.</p>\n\n<pre><code>mix in here\nno mix in here\nmmmcmlxxxix\nminimum\n</code></pre>\n\n<p>When run with (home-built) Perl 5.22.0 on a Mac now running macOS Sierra\n10.12.4, I get output like this (but the version of Perl is not\ncritical):</p>\n\n<pre><code>1000s: (?^:(?i:M{1,3}))\n 100s: (?^:(?i:C[MD]|D?C{1,3}))\n  10s: (?^:(?i:X[CL]|L?X{1,3}))\n   1s: (?^:(?i:I[XV]|V?I{1,3}))\n Full: (?^:\\b((?:(?^:(?i:M{1,3}))(?^:(?i:C[MD]|D?C{1,3}))?(?^:(?i:X[CL]|L?X{1,3}))?(?^:(?i:I[XV]|V?I{1,3}))?)|(?:(?^:(?i:C[MD]|D?C{1,3}))(?^:(?i:X[CL]|L?X{1,3}))?(?^:(?i:I[XV]|V?I{1,3}))?)|(?:(?^:(?i:X[CL]|L?X{1,3}))(?^:(?i:I[XV]|V?I{1,3}))?)|(?:(?^:(?i:I[XV]|V?I{1,3}))))\\b)\n Line: [mix in here]\nMatch: [mix] found in [mix in here] using qr//\n Line: [no mix in here]\nMatch: [mix] found in [no mix in here] using qr//\n Line: [mmmcmlxxxix]\nMatch: [mmmcmlxxxix] found in [mmmcmlxxxix] using qr//\n Line: [minimum]\n</code></pre>\n\n<p>The only part of the output that I don't understand is the caret <code>^</code> in the\n<code>(?^:\u2026)</code> notation.</p>\n\n<p>I've looked at Perl documentation for\n<a href=\"http://perldoc.perl.org/perlre.html\" rel=\"noreferrer\"><code>perlre</code></a> and\n<a href=\"http://perldoc.perl.org/perlreref.html\" rel=\"noreferrer\"><code>perlref</code></a> and even the section of\n<a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"noreferrer\"><code>perlop</code></a>\non 'Regex quote-like operators' without seeing this exemplified or\nexplained.  (I also checked the resources suggested by SO when you ask a question about regexes.  The <code>(?^:</code> string is carefully designed to give search engines conniptions.)</p>\n\n<p>There are two parts to my question:</p>\n\n<ol>\n<li>What is the significance of the caret in <code>(?^:\u2026)</code> and what caused\nit to be added to the <code>qr//</code> regexes?</li>\n<li>If it matters, how do you stop it from being added to the <code>qr//</code> regexes?</li>\n</ol>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1494451959, "post_id": 43902890, "comment_id": 74840042, "body": "Read the line in a loop make a hash key of that word and give count (No of times word appeared) as value."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1494563901, "last_edit_date": 1495542370, "creation_date": 1494454073, "answer_id": 43903482, "question_id": 43902890, "link": "https://stackoverflow.com/questions/43902890/switch-on-length-of-line-in-perl-script/43903482#43903482", "title": "Switch on length of line in Perl script", "body": "<p>Please be careful with the <a href=\"http://perldoc.perl.org/perlsyn.html#Switch-Statements\" rel=\"nofollow noreferrer\">switch statement</a> which is <a href=\"http://perldoc.perl.org/perlsyn.html#Experimental-Details-on-given-and-when\" rel=\"nofollow noreferrer\">highly experimental</a></p>\n\n<blockquote>\n  <p>As previously mentioned, the \"switch\" feature is considered highly experimental; it is subject to change with little notice. In particular, <code>when</code> has tricky behaviours that are expected to change to become less tricky in the future. Do not rely upon its current (mis)implementation. Before Perl 5.18, <code>given</code> also had tricky behaviours that you should still beware of if your code must run on older versions of Perl.</p>\n</blockquote>\n\n<p>These <em>are</em> tricky and <em>will</em> change.</p>\n\n<p>Having said that, one way to count words in a string is to <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> it first</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'switch';\n\nmy $file = '...';\nopen my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n\nwhile (my $line = &lt;$fh&gt;)\n{\n    chomp $line;\n    my @words = split ' ', $line;\n    my $num_words = @words;\n\n    given ($num_words) {\n        when ($num_words &gt; 2) { \n            # ...\n        }\n    }\n}\nclose $fh;\n</code></pre>\n\n<p>what uses the fact that a scalar (<code>$num_words</code>) when assigned an array (<code>@words</code>) receives the number of elements of the array. See <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">Context in perldata</a></p>\n\n<blockquote>\n  <p>Assignment is a little bit special in that it uses its left argument to determine the context for the right argument. Assignment to a scalar evaluates the right-hand side in scalar context, [...]</p>\n</blockquote>\n\n<p>and an array evaluated in scalar context yields the number of its elements.</p>\n\n<hr>\n\n<p>In order to get the count without creating an array variable we need to assign a list to a scalar, which isn't possible to do directly. There are workarounds though, for example</p>\n\n<pre><code>my $num_words = () = $line =~ /\\w+/g;\n</code></pre>\n\n<p>where the <a href=\"http://search.cpan.org/dist/perlsecret/lib/perlsecret.pod#Goatse\" rel=\"nofollow noreferrer\">\"operator\"</a> <code>= () =</code> is a play on context, or</p>\n\n<pre><code>my $num_words = @{ [ $line =~ /\\w+/g ] };\n</code></pre>\n\n<p>where the <code>[]</code> takes a reference to the list inside and is then derefenced by <code>@{ }</code>, what may be assigned to a scalar. This method works with <code>split ' ', $line</code> as well.  </p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/21037846/why-does-the-goatse-operator-work\">this page</a> for a wealth of information about lists, arrays, and scalars.</p>\n\n<hr>\n\n<p>This can be written more compactly as</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    chomp;\n    my $num_words = @{ [ split ] };\n    # ...\n}\n</code></pre>\n\n<p>The default for <code>while</code>, <code>chomp</code>, and <code>split</code> is the <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\"><code>$_</code> variable</a>. The <code>split</code> also needs a pattern and the default is <code>' '</code>, so the above is the same as <code>split ' ', $_</code>. The pattern <code>' '</code> is special for <code>split</code> and matches any amount of any whitespace, also discarding leading and trailing space.</p>\n"}, {"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 2, "last_activity_date": 1494456093, "creation_date": 1494456093, "answer_id": 43903792, "question_id": 43902890, "link": "https://stackoverflow.com/questions/43902890/switch-on-length-of-line-in-perl-script/43903792#43903792", "title": "Switch on length of line in Perl script", "body": "<p>Counting the number of words on a line is a problem with many possible solutions.  Here's a very simple one:</p>\n\n<pre><code>sub count_words {\n    my($line) = @_;\n\n    my @words = split ' ', $line;\n    return scalar(@words);\n}\n\nmy $line = \" The  quick brown fox jumps over the  lazy dog \\n\";\n\nsay \"count_words(): \" . count_words($line);  # prints '9'\n</code></pre>\n\n<p>Normally Perl's <code>split</code> function treats the first argument as a regex, but if the argument is a string containing exactly one space then leading whitespace is discarded, and the regex <code>/\\s+/</code> is used.  This allows skipping over multiple consecutive whitespace characters and also causes trailing whitespace to be discarded.</p>\n\n<p>You didn't mention what type of 'words' you want to count.  Is it written language?  Will there be punctuation?  Is it ASCII text?  Depending on the answers to these questions, you might get better results using a regex to \"capture\" words:</p>\n\n<pre><code>sub count_words {\n    my($line) = @_;\n\n    my @words = $line =~ /(\\w+)/g;\n    return scalar(@words);\n}\n</code></pre>\n\n<p>This will cope with missing spaces around punctuation (e.g.: \"one,two,three\" will be seen as three words whereas split would see it as one).  But it won't work with apostrophes (e.g.: \"won't\" will be seen as two words) and it won't work with non-ASCII characters (e.g.: \"r\u00e9frig\u00e9rateur\" will be seen as three words).</p>\n\n<p>To include an apostrophe in the list of characters that make up a word, you could change the regex line to:</p>\n\n<pre><code>    my @words = $line =~ /([\\w']+)/g;\n</code></pre>\n\n<p>However if your text has had the ASCI apostrophes changed to \"smart quote\" characters then you might need something like:</p>\n\n<pre><code>    my @words = $line =~ /([\\w'\\x{2019}]+)/g;\n</code></pre>\n\n<p>To allow the <code>\\w</code> part of the regex to match accented characters, you can add this at the top of your script:</p>\n\n<pre><code>use utf8;\n</code></pre>\n\n<p>That seems to work regardless of whether a character like <code>\u00e9</code> is represented as the single codepoint <a href=\"http://www.mclean.net.nz/ucf/?c=U+00E9\" rel=\"nofollow noreferrer\">U+00E9</a> or as two codepoints with a plain letter and a combining character accent: <a href=\"http://www.mclean.net.nz/ucf/?c=U+0065\" rel=\"nofollow noreferrer\">U+0065</a> <a href=\"http://www.mclean.net.nz/ucf/?c=U+0301\" rel=\"nofollow noreferrer\">U+0301</a>.</p>\n\n<p>Another user's comment on your question suggested they thought you might be wanting to count unique words on a line (e.g.: \" one plus one\" would be seen as two unique words).  If so, you'll need to use a hash to reduce @words to a unique list.</p>\n"}], "owner": {"reputation": 41, "user_id": 7918059, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5181cf8c32823af74542be6f61d87cb?s=128&d=identicon&r=PG&f=1", "display_name": "nicha", "link": "https://stackoverflow.com/users/7918059/nicha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 43903482, "answer_count": 2, "score": 2, "last_activity_date": 1494563901, "creation_date": 1494451012, "last_edit_date": 1494453070, "question_id": 43902890, "link": "https://stackoverflow.com/questions/43902890/switch-on-length-of-line-in-perl-script", "title": "Switch on length of line in Perl script", "body": "<p>I want to use switch/case construct in Perl.\nI have a file that contains a sequence of words, I want to do different treatment for each line according to the number of words that the line contains.</p>\n\n<p>An example file:</p>\n\n<pre><code>w1 w2 w2\nw1 w3\n</code></pre>\n\n<p>So the script will look something like this, but how do I calculate the number of word in each line?</p>\n\n<pre><code>given ($number_of_word_in_line) {\n   when ($_ &gt; 2) {\n       ...\n   }\n   when ($_ &gt; 3) {\n       ...\n   }\n   default {\n       ...\n   }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1494431897, "post_id": 43896740, "comment_id": 74828864, "body": "You should always use <code>use strict; use warnings qw( all );</code>, and your recent revisions to your question won&#39;t compile under those circumstances."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1494432255, "post_id": 43896740, "comment_id": 74829054, "body": "If you are going to keep editing your question, at least make it valid Perl. If you cannot be bothered with that, at the very least, fix the assignments in conditionals."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1494435981, "post_id": 43896740, "comment_id": 74831266, "body": "Is this question assumed to be written in Perl, or is it pseudocode?"}, {"owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1494436695, "post_id": 43896740, "comment_id": 74831702, "body": "@Matt Jacob It is just a pseudocode"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494436920, "post_id": 43896740, "comment_id": 74831824, "body": "Did you learn anything from answers to your other question? <a href=\"https://stackoverflow.com/q/43766887/100754\">stackoverflow.com/q/43766887/100754</a>"}, {"owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "edited": false, "score": 0, "creation_date": 1494438045, "post_id": 43896740, "comment_id": 74832505, "body": "Can somebody out there upvote the question,I am not able to view the answers.You can downvote it later ,I will just copy the answers."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1494438998, "post_id": 43896740, "comment_id": 74833069, "body": "How does the negative score make the answers invisible to you?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1494439147, "post_id": 43896740, "comment_id": 74833134, "body": "Edit the answer to make it a good question. Mainly make a decent <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Then I and others will upvote without a need to downvote later."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494439723, "post_id": 43896740, "comment_id": 74833461, "body": "Never mind, @ikegami s answer is known to you and I deleted mine (which is practically identical)."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "edited": false, "score": 0, "creation_date": 1494431870, "post_id": 43896986, "comment_id": 74828850, "body": "Thanks for the feedback.I have edited the question.As per your 3rd point,I could nt shrink it since now it has a else condition"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "edited": false, "score": 0, "creation_date": 1494432146, "post_id": 43896986, "comment_id": 74828998, "body": "Updated my answer to reflect the changes to the OP."}, {"owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "edited": false, "score": 1, "creation_date": 1494433540, "post_id": 43896986, "comment_id": 74829789, "body": "Thanks a lot ikegami.You are doing God&#39;s work ,I hope you know that:)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1494437630, "last_edit_date": 1494437630, "creation_date": 1494430430, "answer_id": 43896986, "question_id": 43896740, "link": "https://stackoverflow.com/questions/43896740/nested-if-statements-in-perl/43896986#43896986", "title": "Nested if Statements in Perl", "body": "<ul>\n<li>You have many assignments (e.g. <code>$a=1</code>) that should be comparisons (<code>$a==1</code>). </li>\n<li>Don't explicitly compare against <code>0</code> or <code>1</code> if you have booleans. Just check them for truth.</li>\n<li><code>if (X) { if (Y) { ... } }</code> can be shrunk to <code>if (X &amp;&amp; Y) { ... }</code>.</li>\n<li>You have too many parens.</li>\n</ul>\n\n<p>In this case, you can use the following:</p>\n\n<pre><code>my $ok;\nif ($a &amp;&amp; $b) {\n   if ($cond1)\n      if ($cond2) {\n         ++$ok if $c &amp;&amp; $d;\n      } else {\n         ++$ok;\n      }\n   } else {\n      ++$ok if !$cond2 &amp;&amp; $c;\n   }\n}\n\nsay( $ok ? \"worked\" : \"didn't work\" );\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1494437630, "creation_date": 1494429813, "last_edit_date": 1494432083, "question_id": 43896740, "link": "https://stackoverflow.com/questions/43896740/nested-if-statements-in-perl", "title": "Nested if Statements in Perl", "body": "<p>I am trying to write a Perl program.The gist of the \nprogram is this:\nThere are two conditions.</p>\n\n<p>Case:1 ) If cond1 = true and cond2 == true\nthen I will check whether $a=1 ,$b=1,$c=1 and $d=1.\nIf so, something is printed</p>\n\n<pre><code>    if(($cond1 eq true) &amp;&amp; ($cond2 eq true))\n    {\n      if(($a=1) &amp;&amp; ($b=1) &amp;&amp; ($c=1) &amp;&amp; ($d=1))\n      {\n        print \" Hey,it worked\" ;\n      }\n      else\n     {\n       print \"Test case failed\" ;\n     }\n   }\n</code></pre>\n\n<p>Case:2 ) If cond1=true and cond2=false\n    then I have to check only for the variables a,b and c and not d.</p>\n\n<pre><code>if(($cond1 eq true) &amp;&amp; ($cond2 eq false))\n{\n  if(($a=1) &amp;&amp; ($b=1) &amp;&amp; ($c=1))\n  {\n    print \" Hey,it worked\" ;\n  }\n  else\n  {\n    print \"Test case failed\" ;\n  }\n}\n</code></pre>\n\n<p>Case:3 ) If cond1=false  then I have to check only for \n    the variables a and b.</p>\n\n<pre><code>    if(($cond1 eq false))\n    {\n      if(($a=1) &amp;&amp; ($b=1))\n      {\n        print \" Hey,it worked\" ;\n      }\n      else\n     {\n        print \"Test case failed\";\n     }\n   }\n</code></pre>\n\n<p>I have written it using nested if statements.But the program has become too lengthy.\nIs there any effecient way to write the program using special operators in perl such that the code length is reduced.Kindly help.</p>\n"}, {"tags": ["php", "perl", "cross-language"], "comments": [{"owner": {"reputation": 73667, "user_id": 1415724, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zErhj.jpg?s=128&g=1", "display_name": "Funk Forty Niner", "link": "https://stackoverflow.com/users/1415724/funk-forty-niner"}, "edited": false, "score": 0, "creation_date": 1494429220, "post_id": 43896437, "comment_id": 74827032, "body": "<a href=\"http://stackoverflow.com/questions/3438626/calling-perl-script-from-php-and-passing-in-variables-while-also-using-variabli\" title=\"calling perl script from php and passing in variables while also using variabli\">stackoverflow.com/questions/3438626/&hellip;</a> --- <a href=\"http://stackoverflow.com/questions/455369/can-you-include-php-in-a-perl-file\" title=\"can you include php in a perl file\">stackoverflow.com/questions/455369/&hellip;</a>"}, {"owner": {"reputation": 1225, "user_id": 3407434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MSLD3.jpg?s=128&g=1", "display_name": "Dimi", "link": "https://stackoverflow.com/users/3407434/dimi"}, "edited": false, "score": 0, "creation_date": 1494429245, "post_id": 43896437, "comment_id": 74827053, "body": "Well, there is no production worthy solution that I can think of. But if you just want to fiddle with it, then configure apache to process .pl scripts with perl, and run curl requests to and from your script."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1494431305, "post_id": 43896437, "comment_id": 74828490, "body": "Why don&#39;t you want to use any of those functions?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1494433064, "post_id": 43896437, "comment_id": 74829523, "body": "<a href=\"https://metacpan.org/pod/PHP\" rel=\"nofollow noreferrer\">When you&#39;re ready to do the opposite ...</a>"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1494434388, "post_id": 43896437, "comment_id": 74830346, "body": "@mob FWIW: That module doesn&#39;t work with any modern version of PHP."}, {"owner": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "reply_to_user": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1494439353, "post_id": 43896437, "comment_id": 74833263, "body": "@Barmar Actually I want to compute the similarity for a big number of word pairs, so if I used those functions there will be too much I/O traffic between php side and Perl side and that&#39;s taking too much time (13 seconds for 2000 pairs)"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1494440158, "post_id": 43896437, "comment_id": 74833715, "body": "Are you sure communication is the bottleneck? Maybe you&#39;re not doing it efficiently. Are you restarting the script for each pair? You could start the perl script as a coprocess, send word pairs to it through a pipe, and receive the responses through another pipe. Make sure you disable buffering to prevent deadlock."}], "owner": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1494429018, "creation_date": 1494429018, "question_id": 43896437, "link": "https://stackoverflow.com/questions/43896437/how-to-use-a-perl-code-inside-a-php-code", "title": "How to use a Perl code inside a php code", "body": "<p>I have this Perl script:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse WordNet::QueryData;\nuse WordNet::Similarity::random;\nuse WordNet::Similarity::path;\nuse WordNet::Similarity::wup;\nuse WordNet::Similarity::lch;\nuse WordNet::Similarity::jcn;\nuse WordNet::Similarity::res;\nuse WordNet::Similarity::lin;\nuse WordNet::Similarity::hso;\nuse WordNet::Similarity::lesk;\nuse WordNet::Similarity::vector; \nuse WordNet::Similarity::vector_pairs; \n\n#loading wordnet\nmy $wn = WordNet::QueryData-&gt;new;\nmy $path = WordNet::Similarity::path-&gt;new($wn, \"config-files/config-path.conf\");\nmy $value = $path-&gt;getRelatedness(\"eat#v#1\", \"play#v#1\");\nprint \"PATH Similarity = $value\\n\";\n</code></pre>\n\n<p>This script computes the path similarity between the two verbs (eat , play) using the Wordnet ontology.<br><br>\nI want to use this script inside my php code but I don't want to use exec(),system(),shell_exec() functions to call the perl script.<br><br>\nSo my question: is there any way to use this perl script inside my php code directly? </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1494423807, "post_id": 43894152, "comment_id": 74822626, "body": "You need to give an example of your input file and your CSV and text files. Are you saying that you must add XML tags to plain text?"}, {"owner": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494424025, "post_id": 43894152, "comment_id": 74822792, "body": "The XML tagging will be in a second step. Now I just need to find a way to fill <code>@times</code> with any entry of <code>@entites</code> followed by any entry of <code>tabtime</code>. The CSV and text files are lists of places and times wich I stocked in tables with one time / one place per cell."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "edited": false, "score": 0, "creation_date": 1494521058, "post_id": 43897075, "comment_id": 74875739, "body": "Thank you very much for your answer, I&#39;ll look at you with attention. Just a question before : I see you&#39;re using <code>say</code> instead of <code>print</code> like I do, so you&#39;re using Perl 6 whereas I&#39;m using Perl 5.  Are there any other specificities of Perl 6 which differ from Perl 5 I should take in consideration in your answer ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "edited": false, "score": 0, "creation_date": 1494522730, "post_id": 43897075, "comment_id": 74876674, "body": "@J-bFiancette: This is Perl 5. The <code>say</code> operator was introduced as a <i>feature</i> in version 5.10. Because it is a feature you must enable it with <code>use feature &#39;say&#39;</code> before you can use it. If you are using an extremely old version then you must use <code>print</code> instead, or you could define a subroutine <code>sub say { print @_, &quot;\\n&quot; }</code>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1494430654, "creation_date": 1494430654, "answer_id": 43897075, "question_id": 43894152, "link": "https://stackoverflow.com/questions/43894152/how-to-search-for-a-pair-of-words-taken-from-two-lists/43897075#43897075", "title": "How to search for a pair of words taken from two lists", "body": "<p></p>\n\n<p>I have my doubts that just finding anything in one array followed by anything in another is sufficient. Language isn't generally that well behaved, and usually requires a lot more work to match real phrases</p>\n\n<p>However, I can easily answer your question directly. It is simply a matter of building a regex pattern as a string and then compiling it</p>\n\n<p>I've used locations <code>A</code>, <code>B</code> and <code>C</code>, and moments <code>X</code>, <code>Y</code> and <code>Z</code>. With \n<code>sprintf</code> and <code>join</code> I've built a regex which represents a word boundary, then any of any of the first array, then some whitespace, then any of the second array, and another word boundary</p>\n\n<p>I hope this helps</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nchomp( my @data = &lt;DATA&gt; );\n\nmy @topo  = qw/ A B C /;\nmy @times = qw/ X Y Z /;\n\nmy $re = sprintf '\\b(%s)\\s+(%s)\\b',\n    join( '|', @topo ),\n    join( '|', @times );\n\nsay \"Regex: $re\\n\";  # Display the regex we've built\n\n$re = qr/$re/i;      # Compile the regex with case-independence\n\nsay 'All Data';\nsay for @data;\n\nsay '---';\n\nsay 'Matching Data';\nsay for grep /$re/, @data;\n\n__DATA__\nR P G X\nE U Q B\nK B V X\nR J Q X\nB Y H V\nR L E D\nA C Y T\nG B Z O\nP B Z X\nR C X J\nY P N I\nU L E O\nM C Z V\nI R T X\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Regex: \\b(A|B|C)\\s+(X|Y|Z)\\b\n\nAll Data\nR P G X\nE U Q B\nK B V X\nR J Q X\nB Y H V\nR L E D\nA C Y T\nG B Z O\nP B Z X\nR C X J\nY P N I\nU L E O\nM C Z V\nI R T X\n---\nMatching Data\nB Y H V\nA C Y T\nG B Z O\nP B Z X\nR C X J\nM C Z V\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7860780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10209902719497429/picture?type=large", "display_name": "JB670", "link": "https://stackoverflow.com/users/7860780/jb670"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494430802, "creation_date": 1494423498, "last_edit_date": 1494430802, "question_id": 43894152, "link": "https://stackoverflow.com/questions/43894152/how-to-search-for-a-pair-of-words-taken-from-two-lists", "title": "How to search for a pair of words taken from two lists", "body": "<p>I need to write a Perl script to find time and location entities in a French text at the beginning of sentences which XML tags. For instance <code>&lt;temps&gt; En \u00e9t\u00e9 &lt;/temps&gt;</code> ( \"in summer\" ).</p>\n\n<p>I have a list of location names in a CSV file and a list of moments (winter, summer, Monday, Tuesday etc.) in a text file. I read the lists in two arrays <code>@topo</code> and <code>@tabplace</code> with one cell per line of the original file.</p>\n\n<p>I want to detect entities by searching the sentences beginning with <em>En</em>, <em>\u00e0</em>, <em>le</em> etc. (in, at etc.) with the results stored in <code>@entites</code>. Then I need to separate time entities and place entities : places entities will be stored in <code>@places</code> and time entities will be stored in <code>@times</code>.</p>\n\n<p>My problem is about how to find any entry of <code>@entites</code> followed by any entry of <code>@topo</code>with all the results stocked in <code>@times</code></p>\n\n<p>I was thinking of something like this but I'm missing some steps: </p>\n\n<pre><code>foreach my $celtime ( @entite ) {\n    @times = ( grep(/\\b@entites.@tabtime/)\n}\n</code></pre>\n\n<p>For your information this is the full project code: </p>\n\n<pre><code>my @phrases  = ();\nmy @topo     = ();\nmy @entite   = ();\nmy @tabplace = ();\nmy @tabtime  = ();\nmy $fichiertexte;\nmy $celplace;\nmy $fichiertemps = 'entitemps.txt';\nmy $fichiertopo  = 'toponymes.csv';\nmy $lignedic;\nmy $lignetemps;\n\nprint \"Quel fichier voulez-vous segmentez ?\\n\";\n$fichierstexte = &lt;STDIN&gt;;\nchomp( $fichiertexte );\n\nopen( TEXT, \"&gt;&gt;:encoding(utf8)\", $fichiertexte )\n        or die( \"Impossible d'ouvrir le fichier : \", $!, \"\\n\" );\nmy @phrases = split( /\\./, $lignetexte );  # Chaque phrase sur une ligne\nwhile ( $lignetexte = &lt;FICH&gt; ) {\n    chomp( $lignetexte );\n    push( @phrases, $lignetexte );\n}\nclose( TEXT );\n\nopen( TEMPS, \"&gt;&gt;:encoding(utf8)\", $fichiertemps )\n        or die( \"Impossible d'ouvrir le fichier : \", $!, \"\\n\" );\nwhile ( $lignetemps = &lt;FICH&gt; ) {\n    chomp( $lignetemps );\n    push( @tabtime, $lignetemps );  # @tabtime = tableau des noms de temps\n}\nclose( TEMPS );\n\nopen( DICO, \"&lt;:encoding(utf8)\", $fichiertopo )\n        or die( \"Impossible d'ouvrir le fichier : \", $!, \"\\n\" );\nwhile ( $lignedic = &lt;FICH&gt; ) {\n    chomp( $lignedic );\n    push( @topo, $lignedic );  # @topo = tableau des noms de lieu\n}\nclose( DICO );\n\nforeach my $cellule ( @phrases ) {\n    if ( grep( /\\b(En|En|A|\u00c0|Au|Le|Ce|Du|Au).+/, $cellule ) ) { # Si la cellule commence par l'expression r\u00e9guli\u00e8re\n        push( @entite, $cellule );\n    }\n}\n\nforeach my $celplace ( @entite ) {\n\n    #$cellieu = $cellieu.@dico\n    @places = ( grep( /\\b$cellieu/ . @topo );    #places = tableau des entit\u00e9s de lieu\n}\n\nforeach my $celtime ( @entite ) {\n    @times = ( grep( /\\b@entite.@tabtime/ ) );     #times = tableau des entit\u00e9 de temps\n}\n\nforeach my $entitetemps ( @times ) {\n    $entitelieu = \"&lt;temps&gt;.$entitetemps.&lt;/temps&gt;\";\n}\n\nforeach my $entitelieu ( @places ) {\n    $entitelieu = \"&lt;lieu&gt;.$entitetemps.&lt;/lieu&gt;\";\n\nclose( TEXT );\n</code></pre>\n"}, {"tags": ["perl", "xslt"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1494400698, "post_id": 43885652, "comment_id": 74805953, "body": "element1 isn&#39;t emtpy, it contains element2."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1494400956, "post_id": 43885652, "comment_id": 74806124, "body": "@choroba: Accepted. When there is element2 is also empty then please consider the element 1 is empty."}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1494401822, "post_id": 43886089, "comment_id": 74806698, "body": "<code>my $xml = &#39;XML::LibXML&#39;-&gt;load_xml(location =&gt; &#39;1.xml&#39;);</code> how to load <code>xml content</code> instead of <code>xml file</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1494403169, "post_id": 43886089, "comment_id": 74807506, "body": "@ssr1012: Check the <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>&#39;s documentation: you can specify <code>location</code>, <code>IO</code>, or <code>string</code>."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1494403799, "post_id": 43886089, "comment_id": 74807871, "body": "I got it. Thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494412114, "post_id": 43886089, "comment_id": 74813512, "body": "That would delete empty <code>&lt;element2&gt;</code> elements anywhere, when it may be that they must be kept outside of <code>&lt;element1&gt;</code> elements."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1494401356, "creation_date": 1494401356, "answer_id": 43886089, "question_id": 43885652, "link": "https://stackoverflow.com/questions/43885652/how-to-delete-particular-elements-in-xml-from-perl/43886089#43886089", "title": "How to delete particular elements in XML from perl", "body": "<p>First remove all empty element2's, then remove empty element1's, as the ones that originally contained element2's should be now included.</p>\n\n<p>You can specify the emptiness in XPath directly:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $xml = 'XML::LibXML'-&gt;load_xml(location =&gt; '1.xml');\nfor my $element_name (qw( element2 element1 )) {\n    for my $element ($xml-&gt;findnodes(\"//$element_name\"\n                                     . '[not(text() | * | @*)]')\n    ) {\n        $element-&gt;parentNode-&gt;removeChild($element);\n    }\n}\n\nprint $xml-&gt;serialize(1);\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 43886089, "answer_count": 1, "score": 2, "last_activity_date": 1494401356, "creation_date": 1494400026, "last_edit_date": 1494400526, "question_id": 43885652, "link": "https://stackoverflow.com/questions/43885652/how-to-delete-particular-elements-in-xml-from-perl", "title": "How to delete particular elements in XML from perl", "body": "<p>As I need to delete the particular element <code>element1 and element 2</code> if the same as an empty contents.</p>\n\n<p>eg:</p>\n\n<pre><code> &lt;severaltags&gt;\n   ...\n   &lt;element1&gt;&lt;element2/&gt;&lt;/element1&gt;\n   ...\n &lt;severaltags&gt;\n</code></pre>\n\n<p>Here <code>element 1</code> is empty and also <code>element 2</code> hence I need to remove the particularly those two elements <code>element1</code> and <code>element2</code>.</p>\n\n<p>Can anyone could you please help on this one:</p>\n\n<p>And I have searched and tried from the below code but not success.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::LibXML;\n\nmy $xml = XML::LibXML-&gt;new-&gt;parse_fh(*DATA);\nfor ( $xml-&gt;findnodes(\"//*\") )\n{\n    $_-&gt;parentNode-&gt;removeChild($_)\n    unless $_-&gt;textContent() =~ /\\S/\n    or $_-&gt;hasAttributes();\n}\nprint $xml-&gt;serialize(1);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1494397011, "post_id": 43884590, "comment_id": 74804001, "body": "<code>{data1}</code> will never be equal to <code>data1</code>!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1494397057, "post_id": 43884590, "comment_id": 74804031, "body": "You are comparing the two strings for equality, and <code>&#39;data1&#39; eq &#39;{data1}&#39;</code> is <i>false</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7989792"}, "edited": false, "score": 0, "creation_date": 1494397499, "post_id": 43884590, "comment_id": 74804237, "body": "Here then how i can check string comparison.If it is string comparison the tutorial says eq.@MattJacob"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1494397882, "post_id": 43884590, "comment_id": 74804418, "body": "Maybe you want a regular expression instead?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1494414149, "post_id": 43884590, "comment_id": 74814983, "body": "<code>user entered - data1 output - {data1} data2 data3 {data4}   user entered - {data1} output - {data1} data2 data3 {data4}</code>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1494414179, "post_id": 43884590, "comment_id": 74815002, "body": "what is OP&#39;s expection"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1494431251, "post_id": 43884590, "comment_id": 74828461, "body": "@srv vani, Re &quot;<i>how i can check string comparison</i>&quot;, You <i>are</i> performing a string comparison. But that&#39;s obviously not what you want, since <code>data1</code> and <code>{data1}</code> are different strings. Do you perhaps want to check if <code>$input</code> is <i>contained in</i> <code>$_</code> instead?"}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 1, "creation_date": 1494431756, "post_id": 43884590, "comment_id": 74828762, "body": "They&#39;re called &quot;braces&quot; or &quot;curly brackets,&quot; not &quot;flower brackets.&quot;"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 3, "creation_date": 1494435830, "post_id": 43884590, "comment_id": 74831187, "body": "@jwodder The terminology is the least of the OP&#39;s problems."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1494426792, "post_id": 43889184, "comment_id": 74824946, "body": "more likely <code>&#47;\\Q$stdin&#47;</code>, unless <code>@files</code> is supposed to contain regexes"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1494426933, "last_edit_date": 1494426933, "creation_date": 1494410388, "answer_id": 43889184, "question_id": 43884590, "link": "https://stackoverflow.com/questions/43884590/why-my-standard-input-not-consider-the-flower-brackets-using-perl/43889184#43889184", "title": "Why my standard input not consider the flower brackets using perl?", "body": "<p>Looks like this question has been edited since I first looked at it a few hours ago. Originally, the crucial line looked like this:</p>\n\n<pre><code>if ( grep { $stdin eq $_ } @files ) {\n</code></pre>\n\n<p>That was never going to work because you are giving it \"data1\" as input and none of the lines matches that string using <code>eq</code>. You have a line that contains \"data1\", but as it is surrounded by \"{\" and \"}\", the strings are different - <code>'data1</code> eq <code>{data1}</code> is obviously false.</p>\n\n<p>You have now changed that line to:</p>\n\n<pre><code>if ( grep { $stdin &amp;&amp; $_ } @files ) {\n</code></pre>\n\n<p>And that's very strange. This check asks the question \"do both <code>$stdin</code> and <code>$_</code> contain true values?\". And that will almost certainly always be true. I'm really not sure what that change was supposed to achieve.</p>\n\n<p>Your question doesn't actually say what you're trying to do here. But I'm guessing that you want to match if any of the lines contains the string that is entered (but it's ok if it doesn't make up the entire line). In that case, you want a regex check and your line of code should be:</p>\n\n<pre><code>if ( grep { /\\Q$stdin/ } @files ) {\n</code></pre>\n\n<p><strong>Note:</strong> I've added the <code>\\Q</code> as suggested in the comments. This is a good idea as it prevents the strings in <code>@files</code> being interpreted as containing regex metacharacters.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7989792"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494431130, "creation_date": 1494395971, "last_edit_date": 1494431130, "question_id": 43884590, "link": "https://stackoverflow.com/questions/43884590/why-my-standard-input-not-consider-the-flower-brackets-using-perl", "title": "Why my standard input not consider the flower brackets using perl?", "body": "<p>Here I had tried to read the file using standard input. In my case standard input fails to print the flower bracket contents.</p>\n\n<p>My code:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse strict;\nuse warnings;\n\nmy $file = 'file.txt';\nopen my $fh, \"&lt;\", $file\n    or die \"Could not open '$file': $!\";\nchomp(my @files = &lt;$fh&gt;);\nclose $fh\n    or die \"Coould not close '$file' $!\";\nwhile (my $stdin = &lt;&gt;) {\n    chomp $stdin;\n    if ( grep { $stdin eq $_ } @files ) {\n        print \"@files\\n\";\n        last\n    }\n    else {\n        print \"There is no word in the $file\\n\";\n        last;\n    }\n}\n</code></pre>\n\n<p>File.txt:</p>\n\n<pre><code>{data1}\ndata2\ndata3\n{data4}\n</code></pre>\n\n<p>File Execution:</p>\n\n<pre><code>perl t.pl\ndata1\nThere is no word in the file.txt\n</code></pre>\n"}, {"tags": ["linux", "perl", "ssh", "execution"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494370364, "post_id": 43880949, "comment_id": 74797033, "body": "Did you test this on a server also with sourcing the profile first?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1494370444, "post_id": 43880949, "comment_id": 74797055, "body": "Lots of things that <i>could</i> be at issue, none of which you&#39;re provided enough info to debug. Maybe we need a <code>LD_LIBRARY_PATH</code> to find shared libraries used by the perl interpreter. Maybe the shebang starts with <code>#!&#47;usr&#47;bin&#47;env</code> and we thus care about <code>PATH</code>. Maybe there&#39;s SELinux instrumentation at play configured to only allow specific commands to be invoked without an interactive shell as parent. Maybe your script has DOS newlines, so it&#39;s trying to run a file named <code>&#47;path&#47;to&#47;myScript.pl$&#39;\\r&#39;</code> (which doesn&#39;t exist, for obvious reasons) remotely."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1494370561, "post_id": 43880949, "comment_id": 74797100, "body": "Actually, if that last one is it, <code>ssh user@server &#39;set -x; . &#47;etc&#47;profile; &#47;path&#47;to&#47;myScript.pl&#39;</code> may be informative, at least if you have a new enough bash (4.x should be fine) to print that unambiguously on the remote end."}, {"owner": {"reputation": 123, "user_id": 5164527, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10153040192953595/picture?type=large", "display_name": "driedupsharpie", "link": "https://stackoverflow.com/users/5164527/driedupsharpie"}, "edited": false, "score": 0, "creation_date": 1494370893, "post_id": 43880949, "comment_id": 74797205, "body": "thanks for the &#39;set -x&#39; tip I hadn&#39;t thought to use that, however it looks like the results are virtually identical (diff&#39;d the outputs and everything) for both  no DOS newlines I&#39;ve checked that also - BUT I can tell you that the shebang of the perl script does start with /usr/bin/env - what would this imply for me trying to run it remotely? PATH appears the same on both - does it briefly get changed for the script?"}], "owner": {"reputation": 123, "user_id": 5164527, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10153040192953595/picture?type=large", "display_name": "driedupsharpie", "link": "https://stackoverflow.com/users/5164527/driedupsharpie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1494371337, "creation_date": 1494369664, "last_edit_date": 1494371337, "question_id": 43880949, "link": "https://stackoverflow.com/questions/43880949/using-ssh-to-execute-a-command-path-is-fine-but-running-perl-scripts-fails", "title": "Using SSH to execute a command - $PATH is fine but running perl scripts fails?", "body": "<p><strong>Going from a Linux host to another Linux host</strong></p>\n\n<p>Say I run:</p>\n\n<p><code>ssh user@server ' . /etc/profile; /path/to/myScript.pl'</code></p>\n\n<p>I always get errors involving scripts within that perl script like...</p>\n\n<p><code>/path/to/otherscript.sh was not found No Such File or Directory</code></p>\n\n<p>-even though it's obviously there. Running this script locally on \"server\" works just fine. What's also confusing is that the output of....</p>\n\n<p><code>ssh user@server ' . /etc/profile; echo $PATH'</code></p>\n\n<p>...looks EXACTLY the same as <code>echo $PATH</code> when running on \"server\" locally.</p>\n\n<p>Any ideas as to why this is not working? I do not have permissions to modify the perl script to always* include the complete path to the files listed.</p>\n\n<p><strong>if it's useful</strong> this is running with a shebang of #!/usr/bin/env perl - reading up on it now, would this alter my path?**</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494411033, "post_id": 43881002, "comment_id": 74812779, "body": "Since <code>ymd</code> and family just do explicit calls to the accessors (or pull the value straight out of the hash) and use <code>sprintf</code> to build the result, I think there&#39;s a good case for checking <code>wantarray</code> and returning a list of values in scalar context. Of course, by now such a change would break some strange code that called <code>my @dmy = $date-&gt;dmy</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494434367, "post_id": 43881002, "comment_id": 74830335, "body": "@Borodin  I don&#39;t understand -- <code>ymd</code> isn&#39;t context sensitive? Do you mean to wrap this in a sub?  I don&#39;t see what you mean by &quot;<i>returning a list of values in scalar context</i>&quot;, can you explain? I have all  kinds of utility subs for <code>DateTime</code> in a certain project, always looking for ideas. (The question is too basic -- I wanted to show this since the asker or a visitor are likely unaware of it, and to provide a scoop of how one can use it.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494434638, "post_id": 43881002, "comment_id": 74830486, "body": "I&#39;m sorry if I wasn&#39;t clear. I was lamenting the way the module is written. As it stands, <code>ymd</code> returns a single <code>YYYY-MM-DD</code> string in any context, when it would have been so easy to make it return <code>(YYYY, MM, DD)</code> in list context, which would have solved the OP&#39;s problem instantly. Does that make sense?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494435312, "post_id": 43881002, "comment_id": 74830883, "body": "@Borodin  Ah, yes!  My sentiment exactly, not only on this one.  I had to write  a bunch of utility subs in any project that relies heavily on this module. I often needed to &quot;massage&quot; the provided methods to get what I need and that distracts from the program flow. I felt that other conviniences could have been provided as well and considered subclassing it.  It&#39;s a very useful piece of work of course, many thanks to authors.  (But I&#39;m still on the lookout for a much lighter basic one for simple uses, with a reasonable interface.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494439339, "post_id": 43881002, "comment_id": 74833254, "body": "I wouldn&#39;t hesitate to monkey-patch it. The code for <code>ymd</code> et al is only two or three lines. What bothers me is that a <code>DateTime</code> object weighs in at around a kilobyte, while a <code>Time::Piece</code> is about 150 bytes. Have you seen <a href=\"https://metacpan.org/pod/DateTime::Tiny\" rel=\"nofollow noreferrer\">DateTime::Tiny</a>? It may be what you want, and size-wise it&#39;s between the two at 500B."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494443107, "post_id": 43881002, "comment_id": 74835467, "body": "@Borodin Thank you! I think I&#39;ve seen it before and found it a bit too short on functionality.  (No even <code>ymd</code> for example. The CPAN page lists it, btw.) But when I look at it now -- it&#39;s a perfect starting point to add to, while before that didn&#39;t even occur to me. It is an interesting thing how smoothly perceptions can evolve, sometimes for very subtle reasons, to the point of getting turned around; it was &quot;no&quot; before and it is &quot;yes&quot; now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494443278, "post_id": 43881002, "comment_id": 74835561, "body": "@Borodin  Yes, <code>DateTime</code> is just too heavy for some uses.  I wrote some utility programs here that are used across various languagues and tools as command-line programs, tens (or hundreds) of thousand times per their run.  (It was required that it is Perl, I did beg for C or at least C++.)  I couldn&#39;t use <code>DateTime</code>.  Loading was just prohibitive. (It can&#39;t be made resident or anything such.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1494391213, "last_edit_date": 1494391213, "creation_date": 1494370012, "answer_id": 43881002, "question_id": 43880834, "link": "https://stackoverflow.com/questions/43880834/extract-month-day-and-year-from-datetime-date/43881002#43881002", "title": "Extract month, day, and year from DateTime date", "body": "<p>The <a href=\"http://search.cpan.org/~drolsky/DateTime-1.42/lib/DateTime.pm\" rel=\"nofollow noreferrer\">DateTime</a> has methods for these, <code>year</code> (yyyy), <code>month</code> (1-12), and <code>day</code> (1-31)</p>\n\n<pre><code>my ($year, $month, $day) = map { $nowDate-&gt;$_ } qw(year month day); \n</code></pre>\n\n<p>Note that you may get a single-digit month or day, such as <code>5</code> for May (not <code>05</code>). Then you may want <code>map { sprintf \"%02d\", $nowDate-&gt;$_ }</code> if your application relies on the two-digit format.</p>\n\n<p>Or you can pull them out of <code>$nowDate</code>, for example</p>\n\n<pre><code>my ($year, $month, $day) = split '-', $nowDate-&gt;ymd;            # 2017-05-09\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my ($year, $month, $day) = unpack \"A4A2A2\", $nowDate-&gt;ymd('');  # 20170509\n</code></pre>\n\n<p>The method <code>ymd</code> allows to specify the separator, the default being <code>-</code>. See documentation.</p>\n"}, {"tags": [], "owner": {"reputation": 202, "user_id": 1606164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6306a99514c0a21ba2e88e58b998505e?s=128&d=identicon&r=PG", "display_name": "Tigran Khachikyan", "link": "https://stackoverflow.com/users/1606164/tigran-khachikyan"}, "is_accepted": true, "score": 2, "last_activity_date": 1494370165, "creation_date": 1494370165, "answer_id": 43881027, "question_id": 43880834, "link": "https://stackoverflow.com/questions/43880834/extract-month-day-and-year-from-datetime-date/43881027#43881027", "title": "Extract month, day, and year from DateTime date", "body": "<p>The simplest way is to get them explicitly </p>\n\n<pre><code>my $nowDate = DateTime-&gt;now(time_zone =&gt; 'local');\n\nmy ($month, $day, $year) = ($nowDate-&gt;month, $nowDate-&gt;day, $nowDate-&gt;year);\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7915859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a826d530bc48eb8e509e3bcffdb3ee83?s=128&d=identicon&r=PG&f=1", "display_name": "CheezStix", "link": "https://stackoverflow.com/users/7915859/cheezstix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1641, "favorite_count": 0, "accepted_answer_id": 43881027, "answer_count": 2, "score": 0, "last_activity_date": 1494391213, "creation_date": 1494368931, "last_edit_date": 1494383399, "question_id": 43880834, "link": "https://stackoverflow.com/questions/43880834/extract-month-day-and-year-from-datetime-date", "title": "Extract month, day, and year from DateTime date", "body": "<p>I have a variable <code>$nowDate</code> holding the current date as a <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\"><code>DateTime</code></a> object.</p>\n\n<p>Now I need to pull the month, day and year from that variable and assign them to their own variables. How would I go about doing that?</p>\n\n<pre><code>my $nowDate = DateTime-&gt;now(time_zone =&gt; 'local');\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1494367178, "post_id": 43880487, "comment_id": 74796048, "body": "You&#39;re having problems if ie <code>Page location</code> occurs multiple times, is this right?"}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1494367570, "post_id": 43880487, "comment_id": 74796199, "body": "Yes. @Jan.. Page location and Comments"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1494367598, "post_id": 43880487, "comment_id": 74796207, "body": "Something like this: <a href=\"https://regex101.com/r/t15dD8/8\" rel=\"nofollow noreferrer\">regex101.com/r/t15dD8/8</a> ?"}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1494367824, "post_id": 43880487, "comment_id": 74796281, "body": "Exactly, but it is not matching if i add one more Page location and Comments in the test string?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1494369395, "post_id": 43880487, "comment_id": 74796731, "body": "Is all this in one string (or is it in separate lines) -- or, how do you get this data into the program? Is &quot;<i>Page location:</i>&quot; unique, so that you always need what follows it? How far after &quot;<i>Page location</i>&quot; do you need to capture -- to the frst newline?  This is all shown &quot;inside&quot; of one &quot;<i>Object</i>&quot; -- are there multiple such sections in your string/file?"}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494370127, "post_id": 43880487, "comment_id": 74796951, "body": "Thanks @zdim 1. Separated Lines 2. Yes &quot;Page location&quot; is unique. 3. how far? - until the end of line (highlighted in the question) 4. Yes, this all should show inside of one object."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494370568, "post_id": 43880487, "comment_id": 74797103, "body": "OK, thanks.  How do those lines come -- while reading a file (orare they  in an array)? Are there multiple such &quot;<i>Object</i>&quot; things and do you have to distinguish to which &quot;<i>Object</i>&quot; which &quot;<i>Page location</i>&quot;s belong?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494371412, "post_id": 43880487, "comment_id": 74797322, "body": "Also -- what do those <i>Group 1</i> (etc) mean -- do you want that in output?  I&#39;ve posted a basic take on this, let me know about the quesitons in the above two comments and I&#39;ll adjust the post if needed."}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494372894, "post_id": 43880487, "comment_id": 74797683, "body": "@zdim How do those lines come? - This test string is from a device (after executing a particular command). Are there multiple such &quot;Object&quot; things and do you have to distinguish to which &quot;Object&quot; which &quot;Page location&quot;s belong?  - Yes, you are right. :)  what do those Group 1,2... - It just captured string as in the regex101 tool. Thanks for your support."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1494386934, "post_id": 43880487, "comment_id": 74800799, "body": "At some point you gotta ask yourself whether writing a basic parser should be preferable to a complex regular expression."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1494387183, "post_id": 43880487, "comment_id": 74800857, "body": "@paddy Oh yeah, completely agree. I barely got to ask that (my hands went for the parser on their own)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494387298, "post_id": 43880487, "comment_id": 74800885, "body": "@Raja  Updated my answer."}], "answers": [{"comments": [{"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 1, "creation_date": 1494371878, "post_id": 43881173, "comment_id": 74797444, "body": "I&#39;m guessing here, but does OP need to restart his collection of data for each new object? In that case I&#39;d use an array of hashes; start with an empty hash, capture into it until a new &#39;Object:&#39; is seen, at which point a new empty anonymous hash is pushed onto the array and data is captured into that. Totally agree that a loop is a far better solution here than trying to compress the logic into a single regex!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 0, "creation_date": 1494372064, "post_id": 43881173, "comment_id": 74797491, "body": "@JoeMcMahon Yes, this needs to be adjusted if multiple <code>Object</code> sections exist and need be distinguished.  I asked a question, in comments and in the answer itself, and am waiting :).  The approach with one regex assumes that all data is available in a string, which isn&#39;t clear.  My question was answered that it&#39;s &quot;<i>separate lines</i>&quot; and then reading a file is common ... I am waiting on that clarification as well."}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 0, "creation_date": 1494451239, "post_id": 43881173, "comment_id": 74839718, "body": "@zdim Thanks Bro. Perfect answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 0, "creation_date": 1494524266, "post_id": 43881173, "comment_id": 74877524, "body": "@Raja  Glad it helps :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1494482577, "last_edit_date": 1494482577, "creation_date": 1494371332, "answer_id": 43881173, "question_id": 43880487, "link": "https://stackoverflow.com/questions/43880487/regex-match-multiple-pattern/43881173#43881173", "title": "Regex match multiple pattern", "body": "<p>(See comments below the question for the problem description.)</p>\n\n<p>The data is in a multi-line string, with multiple sections starting with <code>Object:</code>. Within each there are multiple lines starting with phrases <code>Page location:</code> and <code>Comments:</code>. The rest of the line for all these need be captured, and all organized by <code>Object</code>s.</p>\n\n<p>Instead of attempting a tortured multi-line \"single\" regex, break the string into lines and process section by section.  This way the problem becomes a very simple one.</p>\n\n<p>The results are stored in an array of hashrefs; each has for keys the shown phrases.  Since they can appear more than once per section their values are arrayrefs (with what follows them on the line). </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $input_string = '...'; \nmy @lines = split /\\n/, $input_string;\n\nmy $patt = qr/Object|Page location|Comments/;\n\nmy @sections;\nfor (@lines) \n{\n    next if not /^\\s*($patt):\\s*(.*)/;\n\n    push @sections, {}  if $1 eq 'Object';\n\n    push @{ $sections[-1]-&gt;{$1} }, $2;\n}\n\nforeach my $sec (@sections) {\n    foreach my $key (sort keys %$sec) {\n        say \"$key:\";\n        say \"\\t$_\" for @{$sec-&gt;{$key}};\n    }   \n}\n</code></pre>\n\n<p>With the input string copied (suppressed above for brevity), the output is</p>\n\n<pre>\nComments:\n        Lorem ipsum dolor sit amet,  [...] \n        Lorem ipsum dolor sit amet,  [...]\nPage location:\n        SDEWRSD3242SD-234/324/234 (1)\n        SDEWRSD3242SD-SDF/234/324 (5)\nObject:\n        TLE-234DSDSDS324-234SDF324ER\n</pre>\n\n<p>A few comments.</p>\n\n<p>Once the <code>Object</code> line is found we add a new hashref to <code>@sections</code>.  Then the match for a pattern is set as a key and the rest of its line added to its arrayref value. This is done for the current (so last) element of <code>@sections</code>.</p>\n\n<p>This adds an empty string if a pattern had nothing following. To disallow add <code>next if not $2;</code></p>\n\n<p>Note. An easy and common way to print complex data structures is via the core module <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a>.  But also see <a href=\"http://search.cpan.org/~gaas/Data-Dump-1.23/lib/Data/Dump.pm\" rel=\"nofollow noreferrer\">Data::Dump</a> for a much more compact printout.</p>\n"}], "owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 43881173, "answer_count": 1, "score": 1, "last_activity_date": 1494482577, "creation_date": 1494366813, "question_id": 43880487, "link": "https://stackoverflow.com/questions/43880487/regex-match-multiple-pattern", "title": "Regex match multiple pattern", "body": "<p>I am working nearly 3 hours but i couldn't able to find solution for it. So i came here for your help. </p>\n\n<p>Below is my test string:</p>\n\n<pre><code>Object: TLE-234DSDSDS324-234SDF324ER\n  Page location: SDEWRSD3242SD-234/324/234 (1)\n    org-chart           Lorem ipsum dolor    consectetur adipiscing          # Colorado\n    234DSDSDS324-32-4/2/7-page2 (2) loc log  Apr 18 21:42:49 2017           1\n      Page information: 3.32.232.212.23, Error: fatal, Technique: color\n        Comments: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. \n      Validation status: Lorem ipsums dolors sits amets, consectetur adipiscing elit\n       Positive control-export: Validated\n  Page location: SDEWRSD3242SD-SDF/234/324 (5)\n    org-chart           Lorem ipsum dolor    consectetur adipiscin          # Arizona\n    234DSDSDS324-23-11/1/0-page1 (1) loc log Apr 18 21:42:49 2017           1\n      Page information: 3.32.232.212.23, Error: log, Technique: color\n        Comments: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n      Validation status: Lorem ipsums dolors sits amets, consectetur adipiscing elit\n       Positive control-export: Validated\n</code></pre>\n\n<p>I need to capture strings after the \"Page location: \",  \"Object: \" and \"Comments: \"</p>\n\n<p>For example: </p>\n\n<p>Object: <strong>TLE-234DSDSDS324-234SDF324ER</strong> - Group 1</p>\n\n<p>Page location: <strong>SDEWRSD3242SD-234/324/234 (1)</strong> - Group 2</p>\n\n<p>Page location: <strong>SDEWRSD3242SD-SDF/234/324 (5)</strong> - Group 3</p>\n\n<p>Comments: <strong>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</strong> - Group 4</p>\n\n<p>Comments: <strong>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</strong> - Group 5</p>\n\n<p><strong>Here is my <a href=\"https://regex101.com/r/t15dD8/7/\" rel=\"nofollow noreferrer\">regex url</a></strong>, </p>\n\n<p>I could able to capture the strings but the regex wont capturing if any one of the string is repeated. </p>\n\n<p>Any help would be appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 1, "creation_date": 1494349064, "post_id": 43875657, "comment_id": 74786366, "body": "You could make the <code>;</code> optional with a <code>?</code> or you could make the <code>0</code> optional with a <code>?</code>. Alternatively you could pull all numbers after the <code>=</code>. e.g. <code>EUR_AF=[0-9]+(?:\\.[0-9]+)?</code>."}], "answers": [{"tags": [], "owner": {"reputation": 668, "user_id": 4322048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5pqyS.jpg?s=128&g=1", "display_name": "Sander W. van der Laan", "link": "https://stackoverflow.com/users/4322048/sander-w-van-der-laan"}, "is_accepted": false, "score": -3, "last_activity_date": 1494362753, "last_edit_date": 1494362753, "creation_date": 1494349211, "answer_id": 43875799, "question_id": 43875657, "link": "https://stackoverflow.com/questions/43875657/make-a-regular-expression-in-perl-to-grep-value-work-on-a-string-with-different/43875799#43875799", "title": "Make a regular expression in perl to grep value work on a string with different endings", "body": "<p>I have found the answer. The code: </p>\n\n<p><code>$INFO =~ m/(?:^|;)EUR_AF=([^;]*)/</code></p>\n\n<p>seems to handle the cases where <code>EUR_AF=0</code> and <code>EUR_AF=0.39</code>, ending <em>with</em> or <em>without</em> <code>;</code>. The resulting <code>$INFO</code> will be <code>0</code> or <code>0.39</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1494352651, "post_id": 43875941, "comment_id": 74788352, "body": "Must simpler: <code>EUR_AF=\\d+(\\.\\d+)?</code> That needless lookbehind just slows things down."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1494352917, "post_id": 43875941, "comment_id": 74788495, "body": "<code>(...)?</code> doesn&#39;t make any sense. I think you mean <code>(?:...)?</code>. Speaking of captures, the correct capture is missing. Finally <code>(?&lt;=;EUR_AF=)(\\d+(?:\\.\\d+)?)</code> can be simplified and sped up by simply removing the lookbehind: <code>;EUR_AF=(\\d+(?:\\.\\d+)?)</code>. Simplified even further: <code>;EUR_AF=([^;]*)</code>"}, {"owner": {"reputation": 668, "user_id": 4322048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5pqyS.jpg?s=128&g=1", "display_name": "Sander W. van der Laan", "link": "https://stackoverflow.com/users/4322048/sander-w-van-der-laan"}, "edited": false, "score": 0, "creation_date": 1494357836, "post_id": 43875941, "comment_id": 74791392, "body": "Actually <code>EUR_AF=\\d+(\\.\\d+)? </code> is not a solution because you&#39;d end up with <code>.039</code> or in the case of <code>EUR_AF=1.00</code> with <code>.00</code>."}, {"owner": {"reputation": 1268, "user_id": 2206218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f64a0423d5a70dc482b3818424a6ce59?s=128&d=identicon&r=PG", "display_name": "Xyzk", "link": "https://stackoverflow.com/users/2206218/xyzk"}, "reply_to_user": {"reputation": 668, "user_id": 4322048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5pqyS.jpg?s=128&g=1", "display_name": "Sander W. van der Laan", "link": "https://stackoverflow.com/users/4322048/sander-w-van-der-laan"}, "edited": false, "score": 0, "creation_date": 1494401740, "post_id": 43875941, "comment_id": 74806641, "body": "@SanderW.vanderLaan I was talking about the whole regex result, not only the first capturing group. And in those situations it returns proper results."}, {"owner": {"reputation": 1268, "user_id": 2206218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f64a0423d5a70dc482b3818424a6ce59?s=128&d=identicon&r=PG", "display_name": "Xyzk", "link": "https://stackoverflow.com/users/2206218/xyzk"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494401916, "post_id": 43875941, "comment_id": 74806755, "body": "@ikegami The <code>(..)?</code> is correct, as in the examples provided by the OP, there might be a case of 0.45 or 0 without any digits after coma"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494426701, "post_id": 43875941, "comment_id": 74824866, "body": "@Xyzk, You could also argue that <code>$x * do { $y + $z }</code> is correct, but it&#39;s really not. Just like <code>$x * ( $y + $z )</code> would be correct here, you should have used <code>(?: ... )?</code> instead of <code>( ... )?</code> as I previously mentioned. It will handle 0.45 and0 without any digits just as well."}, {"owner": {"reputation": 1268, "user_id": 2206218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f64a0423d5a70dc482b3818424a6ce59?s=128&d=identicon&r=PG", "display_name": "Xyzk", "link": "https://stackoverflow.com/users/2206218/xyzk"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494427170, "post_id": 43875941, "comment_id": 74825298, "body": "@Ikegami Sorry I misread your comment to be &quot;(...)? doesn&#39;t make any sense. I think you mean (?:...)&quot; , didn&#39;t notice the <code>?</code> at the end. You are right in general, I tried to avoid capture groups because I had some people on this website ask for non-capture group reliant regexes"}], "tags": [], "owner": {"reputation": 1268, "user_id": 2206218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f64a0423d5a70dc482b3818424a6ce59?s=128&d=identicon&r=PG", "display_name": "Xyzk", "link": "https://stackoverflow.com/users/2206218/xyzk"}, "is_accepted": false, "score": -1, "last_activity_date": 1494427293, "last_edit_date": 1494427293, "creation_date": 1494349706, "answer_id": 43875941, "question_id": 43875657, "link": "https://stackoverflow.com/questions/43875657/make-a-regular-expression-in-perl-to-grep-value-work-on-a-string-with-different/43875941#43875941", "title": "Make a regular expression in perl to grep value work on a string with different endings", "body": "<p>This regex should work for you: <code>(?&lt;=EUR_AF=)\\d+(\\.\\d+)?</code>\nIt means </p>\n\n<p><code>(?&lt;=EUR_AF=)</code> - look for a string preceeded by <code>EUR_AF=</code></p>\n\n<p><code>\\d+(\\.\\d+)?</code> - consist of a digit, optionally a decimal digit</p>\n\n<p>EDIT: I originally wanted the whole regex to return the correct result, not only the capture group. If you want the correct capture group edit it to <code>(?&lt;=EUR_AF=)(\\d+(?:\\.\\d+)?)</code></p>\n"}, {"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494355665, "post_id": 43876851, "comment_id": 74790158, "body": "I think you want <code>my %rec = split &#47;[=;]&#47;, $s;</code> --- i.e., without the limit."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1494355911, "post_id": 43876851, "comment_id": 74790310, "body": "@Sinan &#220;n&#252;r, Actually, I was going for <code>map { split(&#47;=&#47;, $_, 2) } split &#47;;&#47;, $s</code>, but the simpler solution I had orignally should be good enough."}, {"owner": {"reputation": 668, "user_id": 4322048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5pqyS.jpg?s=128&g=1", "display_name": "Sander W. van der Laan", "link": "https://stackoverflow.com/users/4322048/sander-w-van-der-laan"}, "edited": false, "score": 0, "creation_date": 1494357172, "post_id": 43876851, "comment_id": 74791057, "body": "The best solution is <code>&#47;(?:^|;)EUR_AF=([^;]*)&#47;</code> because it will handle also the case of <code>1.00</code> or <code>0.039</code> properly; and the answer will be than <code>1.00</code> or <code>0.039</code> and not <code>0</code> or <code>.039</code>. Thanks!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1494357464, "post_id": 43876851, "comment_id": 74791209, "body": "In other words, it gets the entire field, no matter what it is. I also agree that&#39;s the correct approach (perhaps obviously). If any validation is to be done, it should be done independently afterwards."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1494355864, "last_edit_date": 1494355864, "creation_date": 1494352815, "answer_id": 43876851, "question_id": 43875657, "link": "https://stackoverflow.com/questions/43875657/make-a-regular-expression-in-perl-to-grep-value-work-on-a-string-with-different/43876851#43876851", "title": "Make a regular expression in perl to grep value work on a string with different endings", "body": "<p>Extract one value:</p>\n\n<pre><code>my ($eur_af) = $s =~ /(?:^|;)EUR_AF=([^;]*)/;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my ($eur_af) = \";$s\" =~ /;EUR_AF=([^;]*)/;\n</code></pre>\n\n<p>Extract all values:</p>\n\n<pre><code>my %rec = split(/[=;]/, $s);\nmy $eur_af = $rec{EUR_AF};\n</code></pre>\n"}], "owner": {"reputation": 668, "user_id": 4322048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5pqyS.jpg?s=128&g=1", "display_name": "Sander W. van der Laan", "link": "https://stackoverflow.com/users/4322048/sander-w-van-der-laan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 43876851, "answer_count": 3, "score": -3, "last_activity_date": 1494427293, "creation_date": 1494348751, "last_edit_date": 1494355736, "question_id": 43875657, "link": "https://stackoverflow.com/questions/43875657/make-a-regular-expression-in-perl-to-grep-value-work-on-a-string-with-different", "title": "Make a regular expression in perl to grep value work on a string with different endings", "body": "<p>I have this code in perl where I want to extract the value of <code>'EUR_AF'</code>, in this case <code>'0.39'</code>.\nSometimes <code>'EUR_AF'</code> ends with <code>';'</code>, sometimes it doesn't.\nAlternatively, <code>'EUR_AF'</code> may end with <code>'=0'</code> instead of <code>'=0.39;'</code> or <code>'=0.39'</code>.</p>\n\n<p>How do I make the code handle that? Can't seem to find it online...I could of course wrap everything in an almost endless if-elsif-else statement, but that seems overkill.</p>\n\n<p>Example text:</p>\n\n<p><code>AVGPOST=0.9092;AN=2184;RSQ=0.5988;ERATE=0.0081;AC=144;VT=SNP;THETA=0.0045;AA=A;SNPSOURCE=LOWCOV;LDAF=0.0959;AF=0.07;ASN_AF=0.05;AMR_AF=0.10;AFR_AF=0.11;EUR_AF=0.039</code></p>\n\n<p>Code: <code>$INFO =~ m/\\;EUR\\_AF\\=(.*?)(;)/</code></p>\n\n<p>I did find that: <code>$INFO =~ m/\\;EUR\\_AF\\=(.*?0)/</code> handles the cases of <code>EUR_AF=0</code>, but how to handle alternative scenarios efficiently?</p>\n"}, {"tags": ["multithreading", "perl", "expect.pm"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494355863, "post_id": 43874794, "comment_id": 74790280, "body": "Can you clarify:  Why does this need to go via threads?  (What is the purpose -- are you going to do something with <code>$position</code> in another thread?)  What do you mean &quot;<i>not defined</i>&quot; -- in another thread?"}, {"owner": {"reputation": 1792, "user_id": 445663, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b84cd841840d10fb222cda401de23992?s=128&d=identicon&r=PG", "display_name": "comatose", "link": "https://stackoverflow.com/users/445663/comatose"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494361339, "post_id": 43874794, "comment_id": 74793342, "body": "@zdim The reason that this needs to go via threads or another separate process is because I want the main process to do some other work which includes taking input from user and doing some other stuff, so I need that to be always responsive to inputs. That forces me to use a separate thread/process to do this periodic work with Expect. By $position not defined what I mean is that Expect fails to match the Password. It is not used by any other thread (basically its a kinit renew loop that provides password via Expect very periodic interval)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494361467, "post_id": 43874794, "comment_id": 74793428, "body": "OK, thank you.  So then you can nicely <code>fork</code> and be done with it, but the question remains of why <code>Expect</code> doesn&#39;t do its thing in a thread."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1560405714, "last_edit_date": 1560405714, "creation_date": 1494362705, "answer_id": 43879540, "question_id": 43874794, "link": "https://stackoverflow.com/questions/43874794/spawn-expect-from-a-perl-thread/43879540#43879540", "title": "Spawn Expect from a perl thread", "body": "<p>Create the <code>Expect</code> object <a href=\"https://metacpan.org/pod/Expect#Is-it-possible-to-use-threads-with-Expect?\" rel=\"nofollow noreferrer\">beforehand</a> (not inside a thread) and pass it to a thread</p>\n\n<pre><code>my $exp = Expect-&gt;spawn( ... );\n$exp-&gt;raw_pty(1);\n$exp-&gt;log_stdout(0);\n\nmy ($thr) = threads-&gt;create(\\&amp;login, $exp);\nmy @res = $thr-&gt;join();    \n# ...\n\nsub login {\n    my $exp = shift;\n    my $position = $exp-&gt;expect( ... );\n    # ...\n}\n</code></pre>\n\n<p>I tested with multiple threads, where one uses <code>Expect</code> with a custom test script and returns the script's output to the main thread. Let me know if I should post these (short) programs.</p>\n\n<p>When the <code>Expect</code> object is created inside a thread it fails for me, too. My guess is that in that case it can't set up its pty the way it does that normally.  </p>\n\n<p>Given the clarification in a comment I'd use <code>fork</code> for the job though.</p>\n"}], "owner": {"reputation": 1792, "user_id": 445663, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b84cd841840d10fb222cda401de23992?s=128&d=identicon&r=PG", "display_name": "comatose", "link": "https://stackoverflow.com/users/445663/comatose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1560405714, "creation_date": 1494345980, "last_edit_date": 1504608627, "question_id": 43874794, "link": "https://stackoverflow.com/questions/43874794/spawn-expect-from-a-perl-thread", "title": "Spawn Expect from a perl thread", "body": "<p>I am working on a script which needs to spawn an Expect process periodically (every 5 mins) to do some work. Below is the code that I have that spawns an Expect process and does some work. The main process of the script is doing some other work at all times, for example it may wait for user input, because of that I am calling this function 'spawn_expect' in a thread that keeps calling it every 5 minutes, but the issue is that the Expect is not working as expected.</p>\n\n<p>If however I replace the thread with another process, that is if I fork and let one process take care of spawning Expect and the other process does the main work of the script (for example waiting at a prompt) then Expect works fine.</p>\n\n<p>My question is that is it possible to have a thread spawn Expect process ? do I have to resort to using a process to do this work ? Thanks !</p>\n\n<pre><code>sub spawn_expect {\n    my $expect = Expect-&gt;spawn($release_config{kinit_exec});\n    my $position = $expect-&gt;expect(10,\n                    [qr/Password.*: /, sub {my $fh = shift; print $fh \"password\\n\";}],\n                    [timeout =&gt; sub {print \"Timed out\";}]);\n    # if this function is run via a process, $position is defined, if it is run via a thread, it is not defined                         \n    ...\n }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1494346512, "post_id": 43874281, "comment_id": 74784838, "body": "See <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc perlreftut</a> and <a href=\"http://perldoc.perl.org/perldsc.htm\" rel=\"nofollow noreferrer\">perldoc perldsc</a> ... Perl comes with extensive and very useful documentation. Use it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1494347536, "post_id": 43874281, "comment_id": 74785495, "body": "It would make more sense to just make your <code>%temp_hash</code> lexical inside of the loop and then use a regular reference. You&#39;re making your life hard because you&#39;re using the short but hard to read syntax, but have to bend over backwards to get it to work. If the cols never change, just do <code>push @{$csv_data{$array[0]}}{...}, { dev_file =&gt; $array[3], test_file =&gt; $array[4] .. }</code>. That&#39;s way easier to read if indented nicely."}, {"owner": {"reputation": 990, "user_id": 1878947, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/68adee7288f257bb5a2b1696be17042c?s=128&d=identicon&r=PG", "display_name": "chidori", "link": "https://stackoverflow.com/users/1878947/chidori"}, "edited": false, "score": 0, "creation_date": 1494348205, "post_id": 43874281, "comment_id": 74785903, "body": "Sorry, but now I am again confused. making %temp_hash lexical inside the loop and using a regular reference does work but then how does the data lives though I keep on overwriting new values to %temp_hash through the loop."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 13, "last_activity_date": 1494345398, "last_edit_date": 1495542379, "creation_date": 1494344999, "answer_id": 43874438, "question_id": 43874281, "link": "https://stackoverflow.com/questions/43874281/what-is-the-difference-between-taking-reference-to-a-variable-using-and/43874438#43874438", "title": "what is the difference between taking reference to a variable using \\ and {},[] in perl?", "body": "<p>Both <code>\\%hash</code> and <code>{%hash}</code> create <em>references</em>, but they reference two different things.</p>\n\n<p><code>\\%hash</code> is a ref to <code>%hash</code>. If dereferenced, its values will change with the values in <code>%hash</code>.</p>\n\n<p><code>{%hash}</code> creates a new anonymous hash reference from the values in <code>%hash</code>. It creates a <strong>copy</strong>. It's the simplest way of creating a <a href=\"https://en.wikipedia.org/wiki/Object_copying#Shallow_copy\" rel=\"nofollow noreferrer\">shallow copy</a> of a data structure in Perl. If you alter <code>%hash</code>, this copy is not affected.</p>\n\n<hr>\n\n<p>How long a variable lives has nothing to do with what kind the variable is, or how it was created. Only the <a href=\"https://en.wikipedia.org/wiki/Scope_(computer_science)\" rel=\"nofollow noreferrer\"><em>scope</em></a> is relevant for that. References in Perl are a special case here, because there is an internal ref counter that keeps track of references to a value, so that it is kept alive if there are still references around somewhere even if it goes out of scope. That's why this works:</p>\n\n<pre><code>sub frobnicate {\n    my %hash = ( foo =&gt; 'bar' );\n    return \\%hash;\n}\n</code></pre>\n\n<p>If you want to disassociate the reference from the initial value, you need to turn it into a <a href=\"https://en.wikipedia.org/wiki/Weak_reference\" rel=\"nofollow noreferrer\"><em>weak reference</em></a> via <code>weaken</code> from <a href=\"http://perldoc.perl.org/Scalar/Util.html#weaken\" rel=\"nofollow noreferrer\">Scalar::Util</a>. That way, the ref count will not be influenced by it, but it will still be related to the value, while a copy would not be.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> for more information on references. <a href=\"https://stackoverflow.com/q/2276885/1331451\">This question</a> deals with how to see the ref count. A description for that is also available in the chapter <a href=\"http://perldoc.perl.org/perlguts.html#Reference-Counts-and-Mortality\" rel=\"nofollow noreferrer\"><em>Reference Counts and Mortality</em> in perlguts</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 990, "user_id": 1878947, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/68adee7288f257bb5a2b1696be17042c?s=128&d=identicon&r=PG", "display_name": "chidori", "link": "https://stackoverflow.com/users/1878947/chidori"}, "edited": false, "score": 0, "creation_date": 1494346407, "post_id": 43874796, "comment_id": 74784772, "body": "If I have to build a data structure as shown in post, I think the only possible way is to make a copy of %hash, right ? Please correct me if I am wrong."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 990, "user_id": 1878947, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/68adee7288f257bb5a2b1696be17042c?s=128&d=identicon&r=PG", "display_name": "chidori", "link": "https://stackoverflow.com/users/1878947/chidori"}, "edited": false, "score": 0, "creation_date": 1494346629, "post_id": 43874796, "comment_id": 74784905, "body": "No, there&#39;s no need for three hashes. You can easily do this with just two, as I&#39;ve shown in the newly-added section at the bottom of my answer."}, {"owner": {"reputation": 990, "user_id": 1878947, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/68adee7288f257bb5a2b1696be17042c?s=128&d=identicon&r=PG", "display_name": "chidori", "link": "https://stackoverflow.com/users/1878947/chidori"}, "edited": false, "score": 0, "creation_date": 1494347149, "post_id": 43874796, "comment_id": 74785251, "body": "I have updated my original post with additional code. Can you please let me know if my approach is the right one or is there a better way other than taking copy of reference."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 990, "user_id": 1878947, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/68adee7288f257bb5a2b1696be17042c?s=128&d=identicon&r=PG", "display_name": "chidori", "link": "https://stackoverflow.com/users/1878947/chidori"}, "edited": false, "score": 0, "creation_date": 1494348841, "post_id": 43874796, "comment_id": 74786243, "body": "Basically, declare variables as late as possible. Specifically, declare the hash inside the loop as I mentioned earlier. See addition to answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1494348805, "last_edit_date": 1494348805, "creation_date": 1494345982, "answer_id": 43874796, "question_id": 43874281, "link": "https://stackoverflow.com/questions/43874281/what-is-the-difference-between-taking-reference-to-a-variable-using-and/43874796#43874796", "title": "what is the difference between taking reference to a variable using \\ and {},[] in perl?", "body": "<p>You can't really compare <code>\\</code> to <code>{}</code> and <code>[]</code> since they don't do the same thing at all.</p>\n\n<p><code>{ LIST }</code> is short for <code>my %anon = LIST;  \\%anon</code></p>\n\n<p><code>[ LIST ]</code> is short for <code>my @anon = LIST;  \\@anon</code></p>\n\n<hr>\n\n<p>Maybe you meant to compare</p>\n\n<ol>\n<li><p>&#xA0;</p>\n\n<pre><code>my %hash = ...;\npush @a, \\%hash;\n</code></pre></li>\n<li><p>&#xA0;</p>\n\n<pre><code>push @a, { ... };\n</code></pre></li>\n<li><p>&#xA0;</p>\n\n<pre><code>my %hash = ...;\npush @a, { %hash };\n</code></pre></li>\n</ol>\n\n<p>The first snippet places a reference to <code>%hash</code> in <code>@a</code>. This is presumably found in a loop. As long as <code>my %hash</code> is found in the loop, a reference to a new hash will be placed in <code>@a</code> each time.</p>\n\n<p>The second snippet does the same, just using an anonymous hash.</p>\n\n<p>The third snippet makes a copy of <code>%hash</code>, and places a reference to that copy in <code>@a</code>. It gives the impression of wastefulness, so it's discouraged. (It's not actually not that wasteful because it allows <code>%hash</code> to be reused.)</p>\n\n<hr>\n\n<p>You could also write your code</p>\n\n<pre><code># In reality, the two blocks below are probably the body of one sub or one loop.\n\n{\n   my %hash = (\n      a =&gt; 1,\n      b =&gt; 2,\n      c =&gt; 3,\n   );\n\n   push @a, \\%hash;\n}\n\n{\n   my %hash = (\n      d =&gt; 3,\n      e =&gt; 1,\n      f =&gt; 2,\n   );\n\n   push @a, \\%hash;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>push @a, {\n   a =&gt; 1,\n   b =&gt; 2,\n   c =&gt; 3,\n};\n\npush @a, {\n   d =&gt; 3,\n   e =&gt; 1,\n   f =&gt; 2,\n};\n</code></pre>\n\n<hr>\n\n<pre><code>my @cols_of_interest = qw( dev_file test_file diff_file status );\n\nmy %csv_data;\nif (defined( my $row = &lt;DATA&gt; )) {\n    chomp $row;\n    my @cols = split(/,/, $row);\n\n    my %cols_of_interest = map { $_ =&gt; 1 } @cols_of_interest;\n    my @cols_to_delete = grep { !$cols_of_interest{$_} } @cols;\n\n    while ( my $row = &lt;DATA&gt; ) {\n        chomp $row;\n        my %row; @row{@cols} = split(/,/, $row);\n        delete @row{@cols_to_delete};\n        push @{ $csv_data{ $row{dev_file} }{ \"$row{test_file}:$row{diff_file}\" } }, \\%row;\n    }\n}\n</code></pre>\n\n<p>Better yet, let's use a proper CSV parser.</p>\n\n<pre><code>use Text::CSV_XS qw( );\n\nmy @cols_of_interest = qw( dev_file test_file diff_file status );\n\nmy $csv = Text::CSV_XS-&gt;new({\n    auto_diag =&gt; 2,\n    binary    =&gt; 1,\n});\n\nmy @cols = $csv-&gt;header(\\*DATA);\n\nmy %cols_of_interest = map { $_ =&gt; 1 } @cols_of_interest;\nmy @cols_to_delete = grep { !$cols_of_interest{$_} } @cols;\n\nmy %csv_data;\nwhile ( my $row = $csv-&gt;getline_hr(\\*DATA) ) {\n    delete @$row{@cols_to_delete};\n    push @{ $csv_data{ $row-&gt;{dev_file} }{ \"$row-&gt;{test_file}:$row-&gt;{diff_file}\" } }, $row;\n}\n</code></pre>\n"}], "owner": {"reputation": 990, "user_id": 1878947, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/68adee7288f257bb5a2b1696be17042c?s=128&d=identicon&r=PG", "display_name": "chidori", "link": "https://stackoverflow.com/users/1878947/chidori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 1, "accepted_answer_id": 43874438, "answer_count": 2, "score": 3, "last_activity_date": 1494348805, "creation_date": 1494344609, "last_edit_date": 1494347010, "question_id": 43874281, "link": "https://stackoverflow.com/questions/43874281/what-is-the-difference-between-taking-reference-to-a-variable-using-and", "title": "what is the difference between taking reference to a variable using \\ and {},[] in perl?", "body": "<p>below code works fine but if I replace <code>push @array,{%hash}</code> with <code>push @array,\\%hash</code> then it doesn't. Can someone please help me understand the difference. I believe <code>{%hash}</code> refers to an anonymous hash. Does it mean a anonymous hash lives longer than a reference to a named hash ( <code>\\%hash</code> ).</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nmy @array;\nmy %hash;\n%hash = ('a' =&gt; 1,\n         'b' =&gt; 2,\n         'c' =&gt; 3,);\n\npush @array,{%hash};\n\n%hash = ('e' =&gt; 1,\n         'f' =&gt; 2,\n         'd' =&gt; 3,);\n\npush @array,{%hash};\n\nprint Dumper \\@array;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>$VAR1 = [\n          {\n            'c' =&gt; 3,\n            'a' =&gt; 1,\n            'b' =&gt; 2\n          },\n          {\n            'e' =&gt; 1,\n            'd' =&gt; 3,\n            'f' =&gt; 2\n          }\n        ];\n</code></pre>\n\n<p><strong>UPDATE</strong>\nBelow is the actual code I am working on. I think in this case taking copy of the reference is the only possible solution I believe. Please correct me if I am wrong.</p>\n\n<pre><code>use Data::Dumper;\nuse strict;\nuse warnings;\n\nmy %csv_data;\nmy %temp_hash;\nmy @cols_of_interest = qw(dev_file test_file diff_file status);\n&lt;DATA&gt;; #Skipping the header\nwhile (my $row = &lt;DATA&gt;) {\n    chomp $row;\n    my @array = split /,/,$row;\n    @temp_hash{@cols_of_interest} = @array[3..$#array]; \n    push @{$csv_data{$array[0]}{$array[1] . ':' . $array[2]}},{%temp_hash};\n}\nprint Dumper \\%csv_data;\n\n__DATA__\ndom,type,id,dev_file,test_file,diff_file,status\nA,alpha,1234,dev_file_1234_1.txt,test_file_1234_1.txt,diff_file_1234_1.txt,pass\nA,alpha,1234,dev_file_1234_2.txt,test_file_1234_2.txt,diff_file_1234_2.txt,fail\nA,alpha,1234,dev_file_1234_3.txt,test_file_1234_3.txt,diff_file_1234_3.txt,pass\nB,beta,4567,dev_file_4567_1.txt,test_file_4567_1.txt,diff_file_4567_1.txt,pass\nB,beta,4567,dev_file_4567_2.txt,test_file_4567_2.txt,diff_file_4567_2.txt,fail\nC,gamma,3435,dev_file_3435_1.txt,test_file_3435_1.txt,diff_file_3435_1.txt,pass\nD,hexa,6768,dev_file_6768_1.txt,test_file_6768_1.txt,diff_file_6768_1.txt,fail\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 5, "creation_date": 1494339710, "post_id": 43872349, "comment_id": 74779970, "body": "Does the input file come from windows by any chance? It might be including a stray <code>\\r</code> that screws up printing."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 3, "creation_date": 1494339761, "post_id": 43872349, "comment_id": 74780022, "body": "<code>$apiFile[$i]</code> contains a CR(carrage return), so the Cursor will be set to the beginning of the line"}], "answers": [{"comments": [{"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 4, "creation_date": 1494340251, "post_id": 43872513, "comment_id": 74780368, "body": "Or if you don&#39;t feel like fixing the perl script, run <code>dos2unix</code> on the input files."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1494340939, "post_id": 43872513, "comment_id": 74780916, "body": "Or ,<code>s&#47;\\R+&#47;&#47;g</code>."}, {"owner": {"reputation": 143, "user_id": 3379943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd92c69005c554ee4fd9c37493032c4d?s=128&d=identicon&r=PG", "display_name": "guidotex", "link": "https://stackoverflow.com/users/3379943/guidotex"}, "edited": false, "score": 1, "creation_date": 1494341255, "post_id": 43872513, "comment_id": 74781145, "body": "This worked.  I had just started to think there was an unseen character that was affecting the printing.  It is a file in Linux, so I did not expect this.  However, the API header that I am parsing was written on a windows machine by a third party... so I checked it in vim via &quot;set ff?&quot;  Sure enough &quot;ff = dos&quot;, so there you go. :)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 8, "last_activity_date": 1494339966, "creation_date": 1494339966, "answer_id": 43872513, "question_id": 43872349, "link": "https://stackoverflow.com/questions/43872349/perl-will-not-print-multiple-variables-without-a-newline/43872513#43872513", "title": "Perl will not print multiple variables without a newline", "body": "<p>Best guess would be - the source file has come through Windows, and is including spurious carriage returns. </p>\n\n<p><code>chomp</code> doesn't handle this if it's on Linux.</p>\n\n<p>But you can use <code>s</code> to replace:</p>\n\n<p><code>s/[\\r\\n]+$//g;</code> will work in lieu of <code>chomp;</code></p>\n"}], "owner": {"reputation": 143, "user_id": 3379943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd92c69005c554ee4fd9c37493032c4d?s=128&d=identicon&r=PG", "display_name": "guidotex", "link": "https://stackoverflow.com/users/3379943/guidotex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 1, "accepted_answer_id": 43872513, "answer_count": 1, "score": 2, "last_activity_date": 1494339966, "creation_date": 1494339578, "last_edit_date": 1495541879, "question_id": 43872349, "link": "https://stackoverflow.com/questions/43872349/perl-will-not-print-multiple-variables-without-a-newline", "title": "Perl will not print multiple variables without a newline", "body": "<p>I am writing a perl script to parse a 'c' header file and extract enumeration types and their respective members.</p>\n\n<ul>\n<li>Ubuntu 12.04</li>\n<li>Perl 5.14.2</li>\n</ul>\n\n<p>The perl script seems to work, but in some circumstances some of the variables will not print.  I've stripped down the code to the following minimal duplication.  </p>\n\n<p>I'm pretty sure this has something to do with buffering... because if I add a newline between printing the first variable and the other variables it works.</p>\n\n<p>I did read through <a href=\"http://perl.plover.com/FAQs/Buffering.html\" rel=\"nofollow noreferrer\" title=\"Suffering from Buffering\">suffering from buffering</a> and <a href=\"https://stackoverflow.com/questions/6104811/perl-not-printing-properly\" title=\"Perl not printing properly\">Perl not printing properly</a>, without finding a solution to my own issue.</p>\n\n<p>Here's the header file:</p>\n\n<pre><code> #ifndef _ENUM_H_\n #define _ENUM_H_ 1\n\n /**\n  * Enum definition\n  */\n typedef enum\n {\n    eENUMVAL0 = 0,\n    eENUMVAL1,\n    eENUMVAL2,\n    eENUMVAL_LAST,\n } eMySuperEnum;\n\n #endif /* _ENUM_H_ */\n</code></pre>\n\n<p>And here's the script:</p>\n\n<pre><code> #! /usr/bin/perl\n use strict;\n use warnings;\n\n\n our  @apiFile = ();\n\n\n if (exists $ARGV[0])\n {\n     chomp( @apiFile = `cat $ARGV[0]`);\n }\n\n for my $i (0 .. $#apiFile)\n {\n     if ($apiFile[$i] =~ /^\\s*typedef\\s+enum/)\n     {\n         print \"$apiFile[$i] starts at $i\\n\"; \n     }\n }\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>starts at 6\n</code></pre>\n\n<p>But if I add a newline in the print after $apiFile[$i], then it prints the whole thing: </p>\n\n<pre><code>print \"$apiFile[$i]\\nstarts at $i\\n\";\n</code></pre>\n\n<p>Will print:</p>\n\n<pre><code>typedef enum\nstarts at 6\n</code></pre>\n\n<p>I have many times printed multiple variables on the same line.  What is happening under the hood such that perl is not printing these two variables on a single line?  </p>\n"}, {"tags": ["performance", "perl", "inline-c"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1494337222, "post_id": 43871336, "comment_id": 74778057, "body": "On my machine the C takes 5 and the Perl takes 4 seconds with Perl 5.20.1. This shows how meaningless a benchmark like that is. Especially if your development machine is not the production system."}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1494337533, "post_id": 43871336, "comment_id": 74778300, "body": "Which is why I develop on a clone of the production machine. :)"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 1, "creation_date": 1494337969, "post_id": 43871336, "comment_id": 74778660, "body": "There&#39;s probably a better solution. Can you show us the actual code? And how much faster are you looking for? &quot;As much as I can&quot; isn&#39;t really a target."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1494346191, "post_id": 43871336, "comment_id": 74784651, "body": "To @AndyLester&#39;s point. Let&#39;s say reading the input data takes 10 seconds, and substitutions take 2 seconds. If you cut the time it takes to do the substitutions to half a second, you have script that runs in 10.5 seconds instead of 12, representing a 12.5% improvement in overall execution time based on the 75% improvement in that one part of the script."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1494349796, "post_id": 43871336, "comment_id": 74786773, "body": "For starters, Perl subroutine calls are rather expensive."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494956620, "post_id": 43871336, "comment_id": 75044519, "body": "A reminder, have a look at <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 0, "creation_date": 1494338012, "post_id": 43871442, "comment_id": 74778695, "body": "I agree it&#39;s not a &quot;do nothing&quot; function. But it&#39;s what&#39;s needed were I to write a true find and replace function. So the true function is always going to be slower than this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1494349917, "post_id": 43871442, "comment_id": 74786835, "body": "Re &quot;<i>Perl&#39;s s/// is highly optimized</i>&quot;, Especially when the pattern doesn&#39;t match."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 6, "last_activity_date": 1494345915, "last_edit_date": 1494345915, "creation_date": 1494337165, "answer_id": 43871442, "question_id": 43871336, "link": "https://stackoverflow.com/questions/43871336/why-does-replacing-perls-s-with-a-dummy-function-using-inlinec-cause-a-sig/43871442#43871442", "title": "Why does replacing Perl&#39;s s/// with a dummy function using Inline::C cause a significant slow down?", "body": "<p>In the version using <code>Inline::C</code>, you kept everything that was in the original pure Perl script, and changed just one thing: Additionally, you've replaced Perl's highly optimized <code>s///</code> with a worse implementation. Invoking your dummy function actually involves work whereas none of the <code>s///</code> invocations do much in this case. It is <em>a priori</em> impossible for the <code>Inline::C</code> version to run faster.</p>\n\n<p>On the C side, the function</p>\n\n<pre><code>char *\nfindreplace( char *text, char *what, char *with ) {\n\n  return text;\n\n}\n</code></pre>\n\n<p>is not a \"do nothing\" function. Calling it involves unpacking arguments. The string pointed to by <code>text</code> has to be copied to the return value. There is some overhead which you are paying for each invocation.</p>\n\n<p>Given that <code>s///</code> does no replacements, there is no copying involved in that. In addition, Perl's <code>s///</code> is highly optimized. Are you sure you can write a better find &amp; replace that is faster to make up for the overhead of calling an external function?</p>\n\n<p>If you use the following implementation, you should get comparable speeds:</p>\n\n<pre><code>sub inline_c {\n  my $string = \"This is some string. It's only purpose is for testing.\";\n  for( my $i = 1; $i &lt; 1000000; $i++ ) {\n    findreplace( $string );\n    findreplace( $string );\n    findreplace( $string );\n    findreplace( $string );\n    findreplace( $string );\n  }\n}\n\n__END__\n__C__\n\nvoid findreplace( char *text ) {\n    return;\n\n}\n</code></pre>\n\n<pre>Benchmark: timing 5 iterations of Inline C, Pure Perl...\n  Inline C:  6 wallclock secs ( 5.69 usr +  0.00 sys =  5.69 CPU) @  0.88/s (n=5)\n Pure Perl:  6 wallclock secs ( 5.70 usr +  0.00 sys =  5.70 CPU) @  0.88/s (n=5)</pre>\n\n<p>The one possibility of gaining speed is to exploit any special structure involved in the search pattern and replacements and write something to implement that.</p>\n\n<p>On the Perl side, you should at least pre-compile the patterns.</p>\n\n<p>Also, since your problem is <a href=\"https://en.wikipedia.org/wiki/Embarrassingly_parallel\" rel=\"nofollow noreferrer\">embarrassingly parallel</a>, you are better off looking into chopping up the work into as many chunks as you have cores to work with.</p>\n\n<p>For example, take a look at the Perl entries in the <a href=\"https://benchmarksgame.alioth.debian.org/u64q/regexredux.html\" rel=\"nofollow noreferrer\">regex-redux</a> task in the <a href=\"http://benchmarksgame.alioth.debian.org/\" rel=\"nofollow noreferrer\">Benchmarks Game</a>:</p>\n\n<p><a href=\"https://benchmarksgame.alioth.debian.org/u64q/program.php?test=regexredux&amp;lang=perl&amp;id=4\" rel=\"nofollow noreferrer\">Perl #4 (fork only)</a>: 14.13 seconds</p>\n\n<p>and</p>\n\n<p><a href=\"https://benchmarksgame.alioth.debian.org/u64q/program.php?test=regexredux&amp;lang=perl&amp;id=3\" rel=\"nofollow noreferrer\">Perl #3 (fork &amp; threads)</a>: 14.47 seconds</p>\n\n<p>versus</p>\n\n<p><a href=\"https://benchmarksgame.alioth.debian.org/u64q/program.php?test=regexredux&amp;lang=perl&amp;id=1\" rel=\"nofollow noreferrer\">Perl #1</a>: 34.01 seconds</p>\n\n<p>That is, some primitive exploitation of parallelization possibilities results in a 60% speedup. That problem is not exactly comparable because the substitutions must be done sequentially, but still gives you an idea.</p>\n\n<p>If you have eight cores, dole out the work to eight cores.</p>\n\n<p>Also, consider the following script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nuse Data::Fake::Text;\nuse List::Util qw( sum );\nuse Time::HiRes qw( time );\n\nuse constant INPUT_SIZE =&gt; $ARGV[0] // 1_000_000;\n\nrun();\n\nsub run {\n    my @substitutions = (\n        sub { s/dolor/new1/ig   },\n        sub { s/fuga/new2/ig    },\n        sub { s/facilis/new3/ig },\n        sub { s/tempo/new4/ig   },\n        sub { s/magni/new5/ig   },\n    );\n\n    my @times;\n    for (1 .. 5) {\n        my $data = read_input();\n        my $t0 = time;\n        find_and_replace($data, \\@substitutions);\n        push @times, time - $t0;\n    }\n\n    printf \"%.4f\\n\", sum(@times)/@times;\n\n    return;\n}\n\nsub find_and_replace {\n    my $data = shift;\n    my $substitutions = shift;\n\n    for ( @$data ) {\n        for my $s ( @$substitutions ) {\n            $s-&gt;();\n        }\n    }\n    return;\n}\n\n{\n    my @input;\n    sub read_input {\n        @input\n            or @input = map fake_sentences(1)-&gt;(), 1 .. INPUT_SIZE;\n        return [ @input ];\n    }\n}\n</code></pre>\n\n<p>In this case, each invocation of <code>find_and_replace</code> takes about 2.3 seconds my laptop. The five replications run in about 30 seconds. The overhead is the combined cost of generating the 1,000,000 sentence data set and copying it four times.</p>\n"}], "owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1494345915, "creation_date": 1494336854, "last_edit_date": 1494339798, "question_id": 43871336, "link": "https://stackoverflow.com/questions/43871336/why-does-replacing-perls-s-with-a-dummy-function-using-inlinec-cause-a-sig", "title": "Why does replacing Perl&#39;s s/// with a dummy function using Inline::C cause a significant slow down?", "body": "<p>I have an array of strings of about 100,000 elements. I need to iterate through each element and replace some words with other words. This takes a few seconds in pure perl. I need to speed this up as much as I can. I'm testing using the following snippet:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\n\nmy $string = \"This is some string. Its only purpose is for testing.\";\nfor( my $i = 1; $i &lt; 100000; $i++ ) {\n  $string =~ s/old1/new1/ig;\n  $string =~ s/old2/new2/ig;\n  $string =~ s/old3/new3/ig;\n  $string =~ s/old4/new4/ig;\n  $string =~ s/old5/new5/ig;\n}\n</code></pre>\n\n<p>I know this doesn't actually replace anything in the test string, but it's for speed testing only.</p>\n\n<p>I had my hopes set on <a href=\"https://metacpan.org/pod/Inline::C\" rel=\"nofollow noreferrer\">Inline::C</a>. I've never worked with <code>Inline::C</code> before but after reading up on it a bit, I thought it was fairly simple to implement. But apparently, even calling a stub function that does nothing is <em>a lot</em> slower. Here's the snippet I tested with:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse Benchmark qw ( timethese );\n\nuse Inline 'C';\n\ntimethese(\n   5,\n   {\n      \"Pure Perl\"  =&gt; \\&amp;pure_perl,\n      \"Inline C\"   =&gt; \\&amp;inline_c\n   }\n);\n\nsub pure_perl {\n  my $string = \"This is some string. Its only purpose is for testing.\";\n  for( my $i = 1; $i &lt; 1000000; $i++ ) {\n    $string =~ s/old1/new1/ig;\n    $string =~ s/old2/new2/ig;\n    $string =~ s/old3/new3/ig;\n    $string =~ s/old4/new4/ig;\n    $string =~ s/old5/new5/ig;\n  }\n}\n\nsub inline_c {\n  my $string = \"This is some string. Its only purpose is for testing.\";\n  for( my $i = 1; $i &lt; 1000000; $i++ ) {\n    $string = findreplace( $string, \"old1\", \"new1\" );\n    $string = findreplace( $string, \"old2\", \"new2\" );\n    $string = findreplace( $string, \"old3\", \"new3\" );\n    $string = findreplace( $string, \"old4\", \"new4\" );\n    $string = findreplace( $string, \"old5\", \"new5\" );\n  }\n}\n\n__DATA__\n__C__\n\nchar *\nfindreplace( char *text, char *what, char *with ) {\n\n  return text;\n\n}\n</code></pre>\n\n<p>on my Linux box, the result is:</p>\n\n<pre><code>Benchmark: timing 5 iterations of Inline C, Pure Perl...\n  Inline C:  6 wallclock secs ( 5.51 usr +  0.02 sys =  5.53 CPU) @  0.90/s (n=5)\n  Pure Perl:  2 wallclock secs ( 2.51 usr +  0.00 sys =  2.51 CPU) @  1.99/s (n=5)\n</code></pre>\n\n<p>Pure Perl is twice as fast as calling an empty C function. Not at all what I expected! Again, I've never worked with Inline::C before so maybe I am missing something here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1494332972, "post_id": 43869791, "comment_id": 74774821, "body": "Do you mean <code>push eval&#39;@{$hash{$var}}&#39;, &quot;somedata&quot;</code>?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494333060, "post_id": 43869791, "comment_id": 74774883, "body": "@Borodin No. <code>$var</code> having the braces means <code>$var = &#39;{main}&#39;</code>."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 4, "creation_date": 1494333332, "post_id": 43869791, "comment_id": 74775055, "body": "Why do you want to use <code>eval</code> anyway?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 5, "creation_date": 1494334135, "post_id": 43869791, "comment_id": 74775650, "body": "I think you need to go back another level and tell us what you&#39;re really doing. If you ask about using <code>eval</code> then people will give you answers showing you how to use <code>eval</code> - which is almost certainly the wrong approach. If you tell us what you&#39;re really trying to do, then we can help you come up with a better approach"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1494334962, "post_id": 43869791, "comment_id": 74776280, "body": "@DaveCross Post edited."}, {"owner": {"reputation": 438, "user_id": 2621028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc166147e4ebd0cff2abe5bead15f383?s=128&d=identicon&r=PG", "display_name": "Soron", "link": "https://stackoverflow.com/users/2621028/soron"}, "edited": false, "score": 0, "creation_date": 1494335634, "post_id": 43869791, "comment_id": 74776786, "body": "An array strikes me as fundamentally the wrong data structure to use here. Nested hashes would make a lot more sense, in which case, you wouldn&#39;t be using <code>push</code> at all."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 438, "user_id": 2621028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc166147e4ebd0cff2abe5bead15f383?s=128&d=identicon&r=PG", "display_name": "Soron", "link": "https://stackoverflow.com/users/2621028/soron"}, "edited": false, "score": 0, "creation_date": 1494336263, "post_id": 43869791, "comment_id": 74777275, "body": "@EthanKaminski Not an array. It grows like hash of array of hashes like that."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1494335939, "last_edit_date": 1592644375, "creation_date": 1494334087, "answer_id": 43870275, "question_id": 43869791, "link": "https://stackoverflow.com/questions/43869791/how-to-push-data-to-an-array-containing-hash-with-eval-in-perl/43870275#43870275", "title": "How to push data to an array-containing hash with `eval` in perl?", "body": "<h3>Update</h3>\n<p>Instead of messing with <code>eval</code> you should use the <a href=\"https://metacpan.org/pod/Data::Diver\" rel=\"nofollow noreferrer\"><code>Data::Diver</code></a> module</p>\n<br/>\n<hr />\n<p>Because of the single quotes, you're trying to execute <code>@{$hash$var}</code> which isn't valid Perl.</p>\n<p>If you wrote it as</p>\n<pre><code>push eval &quot;\\@{\\$hash$var}&quot;, &quot;somedata&quot;\n</code></pre>\n<p>Then the <code>eval</code> would work, but it would evaluate to the contents of the array in hash element <code>main</code>, which is an empty list of values. That means your call would become</p>\n<pre><code>push( ( ), &quot;somedata&quot;)\n</code></pre>\n<p>or just</p>\n<pre><code>push &quot;somedata&quot;\n</code></pre>\n<p>which is meaningless</p>\n<p>This is a particularly unpleasant thing to want to do. Why do you think you need it?</p>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 43870275, "answer_count": 1, "score": -3, "last_activity_date": 1494335939, "creation_date": 1494332691, "last_edit_date": 1494334947, "question_id": 43869791, "link": "https://stackoverflow.com/questions/43869791/how-to-push-data-to-an-array-containing-hash-with-eval-in-perl", "title": "How to push data to an array-containing hash with `eval` in perl?", "body": "<p>I'm trying to mirror the website which having the files and folder to hash.</p>\n\n<p><a href=\"https://www.raymond.cc/blog/how-to-download-all-files-from-a-folder-on-a-website-or-ftp/\" rel=\"nofollow noreferrer\">This one having example</a> So I tried, the following</p>\n\n<pre><code>my $url = \"http://localhost/mainfolder/\";\nmy ($parent) = $url=~m/\\/(\\w+)\\/?$/;\nmy %tree=(mainfolder=&gt;[]);\n\n\nfolder_create($url);\n\nsub folder_create\n{\n    my $url = shift;\n\n    my $cont = get($url);\n\n    my ($child) = $url=~m/($parent.*)/;\n\n    $child=~s/\\/?(\\w+)\\/?/{$1}/g;\n\n    while($cont=~m/(&lt;tr.+?&lt;\\/tr&gt;)/g)\n    {\n        my $line = $1;\n        if($line=~m/\\[DIR\\].*?href=\"([^\"]*)\"[^&gt;]*&gt;(.+?)&lt;\\/a&gt;/)\n        {\n            my $sub =$1;\n            $sub=~s/\\///;\n            print \"$child\\n\\n\";\n            push ( eval'@{$tree $child}',$sub);\n        }\n\n\n    }\n\n}\nuse Data::Dumper;\nprint Dumper \\%tree,\"\\n\\n\\n\";\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 3, "creation_date": 1494328684, "post_id": 43868373, "comment_id": 74771762, "body": "use an HTML Parser instead of regex"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1494328833, "post_id": 43868373, "comment_id": 74771864, "body": "I think it would be better to add a query parameter <code>&#47;folder&#47;12280218&#47;160024536.images.jpg?mode=2</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1494338873, "post_id": 43869255, "comment_id": 74779331, "body": "if you have two <code>img</code> tags in a row your regexp is going to remove one."}, {"owner": {"reputation": 1091, "user_id": 7963408, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/086ccd4f08c6258f6f4cdb1f3b259999?s=128&d=identicon&r=PG&f=1", "display_name": "Gawil", "link": "https://stackoverflow.com/users/7963408/gawil"}, "reply_to_user": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1494339868, "post_id": 43869255, "comment_id": 74780104, "body": "In the demo, I actually have 3 img tags in a row"}], "tags": [], "owner": {"reputation": 1091, "user_id": 7963408, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/086ccd4f08c6258f6f4cdb1f3b259999?s=128&d=identicon&r=PG&f=1", "display_name": "Gawil", "link": "https://stackoverflow.com/users/7963408/gawil"}, "is_accepted": true, "score": 0, "last_activity_date": 1494333180, "last_edit_date": 1494333180, "creation_date": 1494331215, "answer_id": 43869255, "question_id": 43868373, "link": "https://stackoverflow.com/questions/43868373/how-to-add-an-extra-parameter-to-the-img-source-in-html-using-perl/43869255#43869255", "title": "How to add an extra parameter to the img source in HTML using perl", "body": "<p>Replace :<br />\n<code>(&lt;img.*src=\"[^\"]*)(\".*\\/&gt;)</code><br />\nby<br />\n<code>$1/1$2</code><br /></p>\n\n<p>Demo <a href=\"https://regex101.com/r/fAE2aK/2\" rel=\"nofollow noreferrer\">here</a><br /><br />\n<strong>Edit :</strong> Changed the regex to handle situations with other attributes (like the \"width\" part)</p>\n"}], "owner": {"reputation": 344, "user_id": 1254174, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2416cff2f4d8dd65a5bf52228d86208a?s=128&d=identicon&r=PG", "display_name": "Ash_and_Perl", "link": "https://stackoverflow.com/users/1254174/ash-and-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 43869255, "answer_count": 1, "score": -1, "last_activity_date": 1494333180, "creation_date": 1494328585, "question_id": 43868373, "link": "https://stackoverflow.com/questions/43868373/how-to-add-an-extra-parameter-to-the-img-source-in-html-using-perl", "title": "How to add an extra parameter to the img source in HTML using perl", "body": "<p>I have a situation where I need to differentiate two calls by the path in the source of a HTML. This is how the img tag looks like</p>\n\n<pre><code>&lt;img src=\"/folder/12280218/160024536.images.jpg\" /&gt;\n</code></pre>\n\n<p>I am planning to alter the source to </p>\n\n<pre><code>&lt;img src=\"/folder/12280218/160024536.images.jpg/1\" /&gt;\n</code></pre>\n\n<p><strong>observe the \"/1\" at the end of src</strong></p>\n\n<p>I need this so that I can change the flow in the controller when I am serving this image.</p>\n\n<p>This is what I have tried until now.</p>\n\n<pre><code>my $string = '&lt;p&gt;&lt;img src=\"/folder/12280218/160024536.images.jpg\" /&gt;&lt;/p&gt;';\n\n$string =~ s/&lt;img\\s+src\\=\\\"(.*)\"\\s+\\/&gt;&lt;\\/p&gt;/&lt;img src\\=\\\"$1\\/1\" \\&gt;&lt;\\/p&gt;/g;\n</code></pre>\n\n<p>This is working as long as the <code>$string</code> looks like this.\nIn our application, user has the ability to alter the HTML input using CKEditor. \nHe can alter the image tag by adding <code>width=\"800\"</code> before or after the src attribute. I want the regular expression to handle all these situations.</p>\n\n<p>Please let me know how to proceed. \nThanks in advance.</p>\n"}, {"tags": ["json", "perl", "boolean"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494331041, "post_id": 43867553, "comment_id": 74773375, "body": "See <a href=\"https://metacpan.org/pod/JSON#PERL-%3E-JSON\" rel=\"nofollow noreferrer\">metacpan.org/pod/JSON#PERL-%3E-JSON</a>"}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1494331145, "post_id": 43867848, "comment_id": 74773461, "body": "<code>use constant false</code> creates a subroutine that can be inlined where as <code>sub true</code> gets invoked each time. The equivalent would be <code>sub true () { \\1 }</code> so long as the prototype is seen before code that uses it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494331149, "post_id": 43867848, "comment_id": 74773464, "body": "Thank you. I didn&#39;t know that."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494331775, "post_id": 43867848, "comment_id": 74773923, "body": "@Borodin which part? What Sinan said, or what I said? I didn&#39;t know the inlining (is that a word?!) thing either. Trying it out now."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1494332258, "post_id": 43867848, "comment_id": 74774272, "body": "The thing about inlining is documented under <a href=\"https://perldoc.perl.org/perlsub.html#Constant-Functions\" rel=\"nofollow noreferrer\"><i>Constant Functions</i> in <code>perlsub</code></a> I meant about the references for JSON booleans. I have always used <code>JSON::true</code> and <code>JSON;;false</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494336925, "post_id": 43867848, "comment_id": 74777812, "body": "I&#39;ll second @Borodin in that <code>JSON::true</code> and <code>JSON::false</code> are more helpful to the future reader of the code than <code>\\0</code> and <code>\\1</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494337075, "post_id": 43867848, "comment_id": 74777943, "body": "@Sinan&#220;n&#252;r but they are less portable. If you switch to a different JSON implementation that might break. In any case, those should be better than using the constant."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494337290, "post_id": 43867848, "comment_id": 74778099, "body": "If I am not mistaken, <code>JSON-&gt;true</code> and <code>JSON-&gt;false</code> should work with all JSON modules. If inlining did matter, I would actually just do <code>use constant _JSON_true =&gt; JSON-&gt;true</code> and <code>use constant _JSON_false =&gt; JSON-&gt;false</code> in my code, instead of having bare <code>\\0</code> and <code>\\1</code>. In my experience, people tend to freak out a little when they see things like that."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 16, "last_activity_date": 1494331596, "last_edit_date": 1495541891, "creation_date": 1494327136, "answer_id": 43867848, "question_id": 43867553, "link": "https://stackoverflow.com/questions/43867553/how-to-send-boolean-value-from-perl-script-without-converting-them-into-string/43867848#43867848", "title": "How to send boolean value from perl script without converting them into string", "body": "<p>Using <code>true</code> and <code>false</code> directly in Perl is a syntax error under <code>use strict</code> because <em>barewords</em> are then not allowed.</p>\n\n<p>I guess you are using <a href=\"https://metacpan.org/pod/JSON\" rel=\"noreferrer\">JSON</a> or <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"noreferrer\">JSON::XS</a>. Those use <em>scalar references</em> to indicate <code>TRUE</code> and <code>FALSE</code>. Specifically, <code>\\1</code> and <code>\\0</code>.</p>\n\n<pre><code>$data = ( input1 =&gt; \\1 );\n</code></pre>\n\n<p>Here's the relevant <a href=\"https://metacpan.org/pod/JSON::XS#Types::Serialiser::true,-Types::Serialiser::false\" rel=\"noreferrer\">doc from JSON::XS</a>, which allows <a href=\"https://metacpan.org/pod/Types::Serialiser\" rel=\"noreferrer\">Types::Serializer::True</a> and Types::Serializer::False as well:</p>\n\n<blockquote>\n  <p>These special values from the Types::Serialiser module become JSON true and JSON false values, respectively. You can also use <code>\\1</code> and <code>\\0</code> directly if you want.</p>\n</blockquote>\n\n<p>And <a href=\"https://metacpan.org/pod/JSON#JSON::true,-JSON::false,-JSON::null\" rel=\"noreferrer\">the doc from JSON</a>, where <code>JSON::true</code> and <code>JSON::false</code> can also be used:</p>\n\n<blockquote>\n  <p>These special values become JSON true and JSON false values, respectively. You can also use <code>\\1</code> and <code>\\0</code> directly if you want.</p>\n</blockquote>\n\n<hr>\n\n<p>If you insist on using <code>true</code> without quotes as in <code>my $foo = true</code>, you could make subs or constants (which are really subs) that return <code>\\1</code> and <code>\\0</code>.</p>\n\n<pre><code>use constant false =&gt; \\0;\nsub true () { return \\1 } # note the empty prototype\n\n$data = ( input1 =&gt; true, input2 =&gt; false );\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/questions/43867553/how-to-send-boolean-value-from-perl-script-without-converting-them-into-string/43867848?noredirect=1#comment74773461_43867848\">Sinan points out in his comment</a>, it's faster to use a constant, unless you include an empty prototype (the <code>()</code> in the sub definition), because that way Perl can inline the call.</p>\n\n<p>But in my opinion that is less clear than simply using the references. Always think about the next guy working on this code.</p>\n"}], "owner": {"reputation": 516, "user_id": 2224218, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f7db38a8b0010381be6cde932b0f8b7b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/2224218/subhash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4460, "favorite_count": 1, "accepted_answer_id": 43867848, "answer_count": 1, "score": 8, "last_activity_date": 1494331596, "creation_date": 1494326270, "last_edit_date": 1494331258, "question_id": 43867553, "link": "https://stackoverflow.com/questions/43867553/how-to-send-boolean-value-from-perl-script-without-converting-them-into-string", "title": "How to send boolean value from perl script without converting them into string", "body": "<p>I pass a Perl data structure to <code>encode_json</code>, and use its returned value as a input to post to restful API.</p>\n\n<p>Example:</p>\n\n<pre><code>$data = (input1 =&gt; true);\n$json_data = encode_json($data);\nprint $json_data; // Prints: [\"input1\":\"true\"]\n\n$url= http://api.example.com/resources/getDataAPI\n$headers = {Accept =&gt; 'application/json', Authorization =&gt; 'Basic ' . encode_base64($username . ':' . $password)};\n\n$client = REST::Client-&gt;new();\n$client-&gt;POST($url,($json_data,$headers));\n</code></pre>\n\n<p>This was working all fine.</p>\n\n<p>Recently another developer made few input parameter validations checks, and REST strictly accepts Boolean value, without quotes.</p>\n\n<p>I need now to send my input as</p>\n\n<pre><code>$data = '[\"inout1\":true]'\n$client = REST::Client-&gt;new();\n$client-&gt;POST($url,($data,$headers));\n</code></pre>\n\n<p>All my scripts are failing as input data is encoded into JSON format using <code>encode_json</code> function.</p>\n\n<p>I can form a JSON data manually, but the input data would be sometimes very huge. Can not identify them and modify ever time.</p>\n\n<p>Is there any way I can achieve passing Boolean value without quotation marks?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 2, "creation_date": 1494324583, "post_id": 43866641, "comment_id": 74768968, "body": "So what exactly have you tried? whats not working in your code? whats the question here?"}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1494333552, "post_id": 43866641, "comment_id": 74775217, "body": "@ChrisDoyle: I have added my sample code and explained its limitations also. Kindly request you to suggest a solution."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1494333872, "post_id": 43866641, "comment_id": 74775450, "body": "Do you really want a list of all the bug numbers, followed by a list of all the descriptions?"}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1494338880, "post_id": 43866641, "comment_id": 74779335, "body": "yes, the EXPECTED_OUTPUT is the commit message with which i will finally commit the changes in repo. &quot;git commit -m $EXPECTED_OUTPUT&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1494393337, "post_id": 43871161, "comment_id": 74802599, "body": "Thanks for sharing the code. It works for me with some exceptions. The data set that you have used in your example is different from the data set that i gave in the problem statement above. With my data set there are some warnings and extra commas(,). Nevertheless, its a good starting point for me. I will share the final code when i fix the issues. Thanks again!!"}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1494397031, "post_id": 43871161, "comment_id": 74804013, "body": "Hi @simbabque, You mentioned that my <code>split</code> pattern is interesting although it gets the job done. I agree to this because I got it vial trial and error. Kindly request you to suggest a better way for <code>split</code> pattern."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1494408754, "post_id": 43871161, "comment_id": 74811213, "body": "@Yash I didn&#39;t realize that it was all one file. Sorry. You did the right thing to just check if the <code>^Details</code> are in the current line. By <i>interesting</i> I meant that the approach is unconventional. I would have probably written a pattern to capture the exact things I want, but your approach works, too. Just keep in mind that it breaks if the input changes."}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 1, "creation_date": 1494415740, "post_id": 43871161, "comment_id": 74816210, "body": "yes, i agree with you. Since i expect the input <code>textfile</code> to follow same pattern every time, the current <code>split</code> syntax works for me."}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1498628973, "post_id": 43871161, "comment_id": 76569542, "body": "Hi @simbabque, one question, say if i want to print the JIRA number after the first occurrence of <code>^Details</code> only and don&#39;t want the JIRA numbers after subsequent occurrence of <code>^Details</code>. In this case, what changes shall be done ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 0, "creation_date": 1498629196, "post_id": 43871161, "comment_id": 76569627, "body": "@Yash use a variable to keep track of if you have seen it already. Either a simple scalar for if you want it in general, or a hash if you want it per issue."}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "edited": false, "score": 1, "creation_date": 1498633201, "post_id": 43871161, "comment_id": 76571660, "body": "Thanks @simbabque, your approach worked.  The additional code is <code>use strict;  my $count = 0; open (IN, &quot;input.txt&quot;); while (&lt;IN&gt;) {     if (&#47;START&#47;) {     $count = 1;     }     elsif (&#47;END&#47;) {     $count = 0;     }     elsif ($count) {     print;     } } close IN;</code>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 0, "last_activity_date": 1494336355, "creation_date": 1494336355, "answer_id": 43871161, "question_id": 43866641, "link": "https://stackoverflow.com/questions/43866641/parse-an-html-log-file-and-get-a-text-file-in-a-specific-format/43871161#43871161", "title": "Parse an HTML log file and get a text file in a specific format", "body": "<p>You don't need a regular expression for that. Your <code>split</code> pattern is interesting, but it gets the job done. </p>\n\n<p>Just take the rest of the result as well. I've replaced your <code>$junk</code> variables with an array. Perl lets you take the last element from the right with the index <code>-1</code>, so it's trivial to get the text out, as it's after the last <code>&gt;</code>. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy ( @numbers, @text );\nwhile (my $line = &lt;DATA&gt;) {\n    chomp $line;\n    my @stuff = split /[:&lt;=\"\"&gt;]+/, $line;\n    push @numbers, $stuff[5];\n    push @text, $stuff[-1];\n}\n\nprint join ', ', @numbers;\nprint ' : ';\nprint join ', ', @text;\n\n__DATA__\nNEW_FEATURES: &lt;a href=\"http://jira.xyz.com/browse/JIRA-4208\"&gt;JIRA-4208&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;   &lt;/span&gt;Add New Config C support in code\nBUG_FIX: &lt;a href=\"http://jira.xyz.com/browse/BUGJIRA-31\"&gt;BUGJIRA-31&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;   &lt;/span&gt;Bugfix of some old bug\nNEW_FEATURES: &lt;a href=\"http://jira.xyz.com/browse/ZEERA-273\"&gt;ZEERA-273&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;   &lt;/span&gt;Add support for some other feature.\nBUG_FIX: &lt;a href=\"http://jira.xyz.com/browse/BUGJIRA-33\"&gt;BUGJIRA-33&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;   &lt;/span&gt;Bugfix of an issue\nNEW_FEATURES: &lt;a href=\"http://jira.xyz.com/browse/JIRA-4209\"&gt;JIRA-4209&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;   &lt;/span&gt;Add New Config D support in code\n</code></pre>\n\n<p>I also added strict and warnings, and made your variables lexical.</p>\n\n<p>Also remember that your code will break if the text contains a literal <code>&gt;</code> or <code>&lt;</code> or quotes or whatever. It's a weird format you're having there, and a HTML parser is not really going to help you.</p>\n"}, {"tags": [], "owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "is_accepted": false, "score": 0, "last_activity_date": 1494398558, "creation_date": 1494398558, "answer_id": 43885240, "question_id": 43866641, "link": "https://stackoverflow.com/questions/43866641/parse-an-html-log-file-and-get-a-text-file-in-a-specific-format/43885240#43885240", "title": "Parse an HTML log file and get a text file in a specific format", "body": "<p>The code for the problem statement mentioned above is as under:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen (FILE, 'perl_input_file1.txt') or die $!;\nmy ( @numbers, @text );\nwhile (my $line = &lt;FILE&gt;) {\n    chomp $line;\n    $line =~ /^Details/ and next;\n    my @stuff = split /[:&lt;=\"\"&gt;]+/, $line;\n    push @numbers, $stuff[5];\n    push @text, $stuff[-1];\n}\nclose FILE;\nprint join ', ', @numbers;\nprint ': ';\nprint join ', ', @text;\nprint \"\\n\";\n</code></pre>\n\n<p>The output of this code is:</p>\n\n<pre><code>JIRA-4208, BUGJIRA-31, ZEERA-273, BUGJIRA-33, JIRA-4209: Add New Config C support in code, Bugfix of some old bug, Add support for some other feature, Bugfix of an issue, Add New Config D support in code\n</code></pre>\n\n<p>This is same as my desired expected output as mentioned in the question.</p>\n\n<p>I would like to thank @simbabque once again for his guidance and approach.</p>\n\n<p>Regards,</p>\n"}], "owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 43871161, "answer_count": 2, "score": -1, "last_activity_date": 1494398558, "creation_date": 1494323679, "last_edit_date": 1494333415, "question_id": 43866641, "link": "https://stackoverflow.com/questions/43866641/parse-an-html-log-file-and-get-a-text-file-in-a-specific-format", "title": "Parse an HTML log file and get a text file in a specific format", "body": "<p>I want to parse a text file using Perl. This text file contains log of some HTML files as shown below:</p>\n\n<pre><code>Details from /projects/git/Changelog.html file:\nNEW_FEATURES: &lt;a href=\"http://jira.xyz.com/browse/JIRA-4208\"&gt;JIRA-4208&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;\u00a0\u00a0 &lt;/span&gt;Add New Config C support in code\nBUG_FIX: &lt;a href=\"http://jira.xyz.com/browse/BUGJIRA-31\"&gt;BUGJIRA-31&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;\u00a0\u00a0 &lt;/span&gt;Bugfix of some old bug\nNEW_FEATURES: &lt;a href=\"http://jira.xyz.com/browse/ZEERA-273\"&gt;ZEERA-273&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;\u00a0\u00a0 &lt;/span&gt;Add support for some other feature.\n\nDetails from /projects/git/Changelog2.html file:\nBUG_FIX: &lt;a href=\"http://jira.xyz.com/browse/BUGJIRA-33\"&gt;BUGJIRA-33&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;\u00a0\u00a0 &lt;/span&gt;Bugfix of an issue\nNEW_FEATURES: &lt;a href=\"http://jira.xyz.com/browse/JIRA-4209\"&gt;JIRA-4209&lt;/a&gt;&lt;span style='mso-spacerun:yes'&gt;\u00a0\u00a0 &lt;/span&gt;Add New Config D support in code\n</code></pre>\n\n<p>Each line contains a Bug Number and its Description.</p>\n\n<p>After parsing, the EXPECTED OUTPUT is as under:</p>\n\n<pre><code>JIRA-4208, BUGJIRA-31, ZEERA-273, BUGJIRA-33, JIRA-4209 : Add New Config C support in code, Bugfix of some old bug, Add support for some other feature, Bugfix of an issue, Add New Config D support in code\n</code></pre>\n\n<p>i.e. all bug numbers followed by their descriptions.</p>\n\n<p>If possible i would like to write the output in another file <code>output.txt</code></p>\n\n<p>EDIT-1:</p>\n\n<p>My code is as under:</p>\n\n<pre><code>#!/usr/bin/perl\nopen (FILE, 'input_file1.txt') or die \"Could not read from file, exit...\";\nwhile(&lt;FILE&gt;)\n{\n  chomp;\n  ($junk0,$junk1,$junk2,$junk3,$junk4,$BUG_NUMBR) = split /[:&lt;=\"\"&gt;]+/,$_;\n  print \"$BUG_NUMBR \\n\";\n}\nclose FILE;\nexit;\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>JIRA-4208 \nBUGJIRA-31 \nZEERA-273 \nBUGJIRA-33 \nJIRA-4209 \n</code></pre>\n\n<p>This is quite different from the expected output as shown above. I'm not able to define the appropriate regex for the second part of expected output which is a short description of the bug.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1494323432, "post_id": 43866495, "comment_id": 74768170, "body": "Yes. <code>Time::Piece</code> does time conversion. But it depends somewhat your data source."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 1, "creation_date": 1494334387, "post_id": 43866495, "comment_id": 74775831, "body": "I always find the &quot;see strptime man page&quot; statement in that module&#39;s document very unhelpful.  Especially as that subsequently says to see the strftime manpage, and there is no perldoc for it anywhere."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494334666, "post_id": 43866495, "comment_id": 74776063, "body": "@AdamMillerchip: I believe the problem is that <code>Time::Piece</code> uses <code>strptime</code> and <code>strftime</code> from your system&#39;s run time library, which vary widely from one machine to another"}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494373505, "post_id": 43866495, "comment_id": 74797845, "body": "@Borodin but an xs implementation seems to be included with the module, so its possible the documentation may not be correct in some cases, I think. See my comment to ikegami on Dave Cross&#39; answer."}], "answers": [{"comments": [{"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 1, "creation_date": 1494333754, "post_id": 43868665, "comment_id": 74775366, "body": "<code>hms</code> also works instead of the <code>strftime</code>: <code>say Time::Piece-&gt;strptime(&#39;10pm&#39;, &#39;%H%p&#39;)-&gt;hms;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494333919, "post_id": 43868665, "comment_id": 74775489, "body": "True, but I&#39;ve got into the habit of using <code>strftime()</code> for all formatting - it&#39;s more flexible."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494336504, "post_id": 43868665, "comment_id": 74777460, "body": "Is it possible that the <code>%p</code> would fail to recognise <code>am|pm</code> for certain locales?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494354249, "post_id": 43868665, "comment_id": 74789264, "body": "@Adam Millerchip, Looking at the code, it does a case-insensitive comparison against <code>AM</code> and <code>PM</code>."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494372180, "post_id": 43868665, "comment_id": 74797511, "body": "@ikegami but is it not possible that <code>Locale</code> could be <code>#define</code>d differently, so that strings other than <code>AM</code> and <code>PM</code> are used?"}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494373387, "post_id": 43868665, "comment_id": 74797807, "body": "I can&#39;t see how. But the <code>Time::Piece</code> doc says &quot;see manpage&quot; for <code>strptime</code> documentation. My <code>man strptime</code> says to see strftime documentation. And my <code>man strftime</code> says <code>%p is replaced by national representation of either &quot;ante meridiem&quot; (a.m.)  or &quot;post meridiem&quot; (p.m.)  as appropriate.</code>. This does not appear to be the case for the <code>strptime</code> in <code>Time::Piece</code>, hence the confusion."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494385746, "post_id": 43868665, "comment_id": 74800544, "body": "@Adam Millerchip, Yes, it&#39;s possible that you could change the module to do anything else :) But as it&#39;s written, it only supports <code>AM</code> and <code>PM</code> and case variants of those."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494385830, "post_id": 43868665, "comment_id": 74800562, "body": "@Adam Millerchip, Time::Piece does not use the C lib&#39;s <code>strptime</code> (since it&#39;s not always available) but its own."}, {"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494386358, "post_id": 43868665, "comment_id": 74800660, "body": "That&#39;s what I thought from looking at the source. So it should really document its own behaviour, rather than instructing people to look up the man page for a different version. Anyway, bordering on off-topic now. :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494386563, "post_id": 43868665, "comment_id": 74800714, "body": "@Adam Millerchip, If someone did want locale support, they could use DateTime::Format::Strptime. But both DateTime and Time::Piece are too heavy for this simple problem!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1494329501, "creation_date": 1494329501, "answer_id": 43868665, "question_id": 43866495, "link": "https://stackoverflow.com/questions/43866495/convert-12-hr-time-format-to-24-hr-format-in-perl/43868665#43868665", "title": "Convert 12 hr time format to 24 hr format in perl?", "body": "<p><a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> has been a standard part of Perl since Perl 5.10 in 2007.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Time::Piece;\n\nfor (qw[11am 10pm]) {\n  my $time = Time::Piece-&gt;strptime($_, '%H%p');\n  say $time-&gt;strftime('%H:%M:%S');\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 1, "creation_date": 1494386541, "post_id": 43877204, "comment_id": 74800708, "body": "In my experience, encouraging people to write their own date-time code leads to a mess of buggy and unmaintainable code in the future. Better to stick to a module that&#39;s widely-used and known to work correctly."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 0, "creation_date": 1494386647, "post_id": 43877204, "comment_id": 74800740, "body": "@Adam Millerchip, 1) I 100% agree. Definitely use a module for any date-time work. This question, otoh, has nothing to do with dates and time; it&#39;s just simple text manipulation. 2) Time::Piece is NOT one of the module you should be using when you do. It&#39;s a huge contributor to broken date-time code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "edited": false, "score": 1, "creation_date": 1494387260, "post_id": 43877204, "comment_id": 74800873, "body": "@Adam Millerchip, Forgot to mention that it doesn&#39;t make sense to pretend that some date 45 years ago is the same as today. Date-time problems are almost always due to assumptions of this kind, yet using Time::Piece for this problem makes exactly that kind of assumption! Don&#39;t use Time::Piece for durations, only date-times"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1494386222, "last_edit_date": 1494386222, "creation_date": 1494354062, "answer_id": 43877204, "question_id": 43866495, "link": "https://stackoverflow.com/questions/43866495/convert-12-hr-time-format-to-24-hr-format-in-perl/43877204#43877204", "title": "Convert 12 hr time format to 24 hr format in perl?", "body": "<p>Time::Piece's documentation claims that the definition of <code>%p</code> is based on your locale. So, according to the documentation, Time::Piece's <code>%p</code> can't reliably be used to handle <code>am</code> and <code>pm</code>, so you shouldn't use it.</p>\n\n<p>On the other hand, Time::Piece behaves differently than documented, and <code>%p</code> will reliably handle <code>am</code> and <code>pm</code>, so it could technically be used to solve your problem despite documentation to the contrary.</p>\n\n<p>I'd personally avoid that giant mess (and all of Time::Piece's other problems) and use the following lighter, simpler and clearer code:</p>\n\n<pre><code>my ($h, $ampm) = /^([0-9]+)(am|pm)\\z/;\n$h = 0 if $h == 12;\n$h += 12 if $ampm eq 'pm';\nmy $hms = sprintf(\"%d:00:00\", $h);   # or %02d if you want 00:00:00\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 2767618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd7ec3a031bfc8746a393b0fd4bd10b?s=128&d=identicon&r=PG&f=1", "display_name": "Kumkum Naz", "link": "https://stackoverflow.com/users/2767618/kumkum-naz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 1, "accepted_answer_id": 43868665, "answer_count": 2, "score": 2, "last_activity_date": 1494386222, "creation_date": 1494323214, "question_id": 43866495, "link": "https://stackoverflow.com/questions/43866495/convert-12-hr-time-format-to-24-hr-format-in-perl", "title": "Convert 12 hr time format to 24 hr format in perl?", "body": "<p>How do I convert \"11am\" and \"10pm\" into \"11:00:00\" and \"22:00:00\"? Is there a simple way in perl to convert this?</p>\n"}, {"tags": ["php", "perl", "system"], "comments": [{"owner": {"reputation": 51399, "user_id": 1553888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac05cf8db6f338aef3c2f65e348f5d?s=128&d=identicon&r=PG", "display_name": "u_mulder", "link": "https://stackoverflow.com/users/1553888/u-mulder"}, "edited": false, "score": 0, "creation_date": 1494321175, "post_id": 43865694, "comment_id": 74766583, "body": "Then why are you running <code>ls</code> then?"}, {"owner": {"reputation": 11, "user_id": 7327460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XDcWuXA2OMw/AAAAAAAAAAI/AAAAAAAAI1U/BtUtzDzdpWU/photo.jpg?sz=128", "display_name": "Niels van der Knaap", "link": "https://stackoverflow.com/users/7327460/niels-van-der-knaap"}, "reply_to_user": {"reputation": 51399, "user_id": 1553888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac05cf8db6f338aef3c2f65e348f5d?s=128&d=identicon&r=PG", "display_name": "u_mulder", "link": "https://stackoverflow.com/users/1553888/u-mulder"}, "edited": false, "score": 0, "creation_date": 1494321233, "post_id": 43865694, "comment_id": 74766625, "body": "just to see if I get any responds"}, {"owner": {"reputation": 51399, "user_id": 1553888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac05cf8db6f338aef3c2f65e348f5d?s=128&d=identicon&r=PG", "display_name": "u_mulder", "link": "https://stackoverflow.com/users/1553888/u-mulder"}, "edited": false, "score": 0, "creation_date": 1494321271, "post_id": 43865694, "comment_id": 74766646, "body": "So what do you expect then?"}, {"owner": {"reputation": 51399, "user_id": 1553888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac05cf8db6f338aef3c2f65e348f5d?s=128&d=identicon&r=PG", "display_name": "u_mulder", "link": "https://stackoverflow.com/users/1553888/u-mulder"}, "edited": false, "score": 0, "creation_date": 1494321304, "post_id": 43865694, "comment_id": 74766667, "body": "<code>system</code> gives you output of last executed command which is <code>ls</code>"}, {"owner": {"reputation": 11, "user_id": 7327460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XDcWuXA2OMw/AAAAAAAAAAI/AAAAAAAAI1U/BtUtzDzdpWU/photo.jpg?sz=128", "display_name": "Niels van der Knaap", "link": "https://stackoverflow.com/users/7327460/niels-van-der-knaap"}, "reply_to_user": {"reputation": 51399, "user_id": 1553888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac05cf8db6f338aef3c2f65e348f5d?s=128&d=identicon&r=PG", "display_name": "u_mulder", "link": "https://stackoverflow.com/users/1553888/u-mulder"}, "edited": false, "score": 0, "creation_date": 1494321417, "post_id": 43865694, "comment_id": 74766735, "body": "I want to get the responds of the command perl uniscan.pl -u <a href=\"https://domain.nl/\" rel=\"nofollow noreferrer\">domain.nl</a> -qweds;"}, {"owner": {"reputation": 51399, "user_id": 1553888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac05cf8db6f338aef3c2f65e348f5d?s=128&d=identicon&r=PG", "display_name": "u_mulder", "link": "https://stackoverflow.com/users/1553888/u-mulder"}, "edited": false, "score": 0, "creation_date": 1494321450, "post_id": 43865694, "comment_id": 74766768, "body": "So <b>remove</b> <code>ls</code> from <code>system</code> call, isn&#39;t it?"}, {"owner": {"reputation": 11, "user_id": 7327460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XDcWuXA2OMw/AAAAAAAAAAI/AAAAAAAAI1U/BtUtzDzdpWU/photo.jpg?sz=128", "display_name": "Niels van der Knaap", "link": "https://stackoverflow.com/users/7327460/niels-van-der-knaap"}, "reply_to_user": {"reputation": 51399, "user_id": 1553888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac05cf8db6f338aef3c2f65e348f5d?s=128&d=identicon&r=PG", "display_name": "u_mulder", "link": "https://stackoverflow.com/users/1553888/u-mulder"}, "edited": false, "score": 0, "creation_date": 1494321637, "post_id": 43865694, "comment_id": 74766906, "body": "Than I get no responds, and before the ls I am already running the command that I want"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1494322631, "post_id": 43865694, "comment_id": 74767591, "body": "@NielsvanderKnaap: Please do not post images if text output. Text should be included in your question as text. I don&#39;t understand why so many people think that images of text are useful."}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1494330336, "post_id": 43865694, "comment_id": 74772892, "body": "I&#39;m not familiar with <code>uniscan.pl</code>, but is it possible that it&#39;s sending its output to <i>stderr</i> instead of <i>stdout</i>? What happens if you run that perl command line from your shell, and redirect output somewhere? And what does your web server&#39;s error log say?"}], "answers": [{"comments": [{"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1494330533, "post_id": 43868716, "comment_id": 74773013, "body": "Good suggestions, though I&#39;d advise against recommending an absolute path for perl unless you know that it&#39;ll work in the OP&#39;s operating system. Perl isn&#39;t always located in <code>&#47;usr&#47;bin</code>."}, {"owner": {"reputation": 11, "user_id": 7327460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XDcWuXA2OMw/AAAAAAAAAAI/AAAAAAAAI1U/BtUtzDzdpWU/photo.jpg?sz=128", "display_name": "Niels van der Knaap", "link": "https://stackoverflow.com/users/7327460/niels-van-der-knaap"}, "edited": false, "score": 0, "creation_date": 1494331884, "post_id": 43868716, "comment_id": 74773993, "body": "Still not working :/  This is the he responds I get: Last line of the output: Return value: 13"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1494329629, "creation_date": 1494329629, "answer_id": 43868716, "question_id": 43865694, "link": "https://stackoverflow.com/questions/43865694/calling-a-perl-program-from-php-and-printing-the-output/43868716#43868716", "title": "Calling a Perl program from PHP and printing the output", "body": "<p>I think you have poorly copied the code from <a href=\"http://php.net/manual/en/function.system.php\" rel=\"nofollow noreferrer\">http://php.net/manual/en/function.system.php</a>.</p>\n\n<p>In addition to that your code has syntax errors. You passed <code>$ret</code> to system but tried to print <code>$retval</code>. Also the closing parenthesis is missing.</p>\n\n<p>Try this:</p>\n\n<pre><code>$last_line = system('/usr/bin/perl uniscan.pl -u https://domain.nl/ -qweds', $retval);\n</code></pre>\n\n<p>Note that I have provided absolute path of perl interpreter.</p>\n"}, {"comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1494586885, "post_id": 43898501, "comment_id": 74904245, "body": "Good. Consider accepting your answer so that question doesn&#39;t appear in <code>unanswered</code> list."}], "tags": [], "owner": {"reputation": 11, "user_id": 7327460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XDcWuXA2OMw/AAAAAAAAAAI/AAAAAAAAI1U/BtUtzDzdpWU/photo.jpg?sz=128", "display_name": "Niels van der Knaap", "link": "https://stackoverflow.com/users/7327460/niels-van-der-knaap"}, "is_accepted": true, "score": 0, "last_activity_date": 1494435074, "creation_date": 1494435074, "answer_id": 43898501, "question_id": 43865694, "link": "https://stackoverflow.com/questions/43865694/calling-a-perl-program-from-php-and-printing-the-output/43898501#43898501", "title": "Calling a Perl program from PHP and printing the output", "body": "<p>The problem was that the www-data user didn't had rights to run that script. </p>\n\n<p>So when I gave him right in the sudoers file like this:</p>\n\n<pre><code>www-data ALL = NOPASSWD: /var/www/html/Uniscan/uniscan.pl\n</code></pre>\n\n<p>everything works perfectly!</p>\n"}], "owner": {"reputation": 11, "user_id": 7327460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XDcWuXA2OMw/AAAAAAAAAAI/AAAAAAAAI1U/BtUtzDzdpWU/photo.jpg?sz=128", "display_name": "Niels van der Knaap", "link": "https://stackoverflow.com/users/7327460/niels-van-der-knaap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 43898501, "answer_count": 2, "score": 0, "last_activity_date": 1494435074, "creation_date": 1494321031, "last_edit_date": 1494329966, "question_id": 43865694, "link": "https://stackoverflow.com/questions/43865694/calling-a-perl-program-from-php-and-printing-the-output", "title": "Calling a Perl program from PHP and printing the output", "body": "<p>For a school project I want to try scanning websites for vulnerabilities, and show the responds on a page.</p>\n\n<p>For this I am trying to use Uniscan.</p>\n\n<p>I tried a lot of ways to get any responds but it isn't working out.</p>\n\n<p>This is what I have right now:</p>\n\n<pre><code>   &lt;?php\necho '&lt;pre&gt;';\n\n// Outputs all the result of shellcommand \"ls\", and returns\n// the last output line into $last_line. Stores the return value\n// of the shell command in $retval.\n$last_line = system('perl uniscan.pl -u https://domain.nl/ -qweds;ls', $ret$\n\n// Printing additional info\necho '&lt;/pre&gt;\n&lt;hr /&gt;Last line of the output: ' . $last_line . '\n&lt;hr /&gt;Return value: ' . $retval;\n?&gt;\n</code></pre>\n\n<p>This is the responds, the only thing you see is the responds of the 'ls' command.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vSS68.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vSS68.png\" alt=\"Responds\"></a></p>\n\n<p>I hope someone can help me.</p>\n"}, {"tags": ["perl", "asynchronous", "mojolicious"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494323635, "post_id": 43864856, "comment_id": 74768309, "body": "What is <code>$ua</code>? And what does <code>build_report</code> do?"}, {"owner": {"reputation": 108, "user_id": 874760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d7cd5b2b5a5f99139a3966f4e1e411?s=128&d=identicon&r=PG", "display_name": "Shura", "link": "https://stackoverflow.com/users/874760/shura"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494337506, "post_id": 43864856, "comment_id": 74778280, "body": "$ua is Mojo::UserAgent; build_report collects data from all requests in a summary report."}], "answers": [{"comments": [{"owner": {"reputation": 108, "user_id": 874760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d7cd5b2b5a5f99139a3966f4e1e411?s=128&d=identicon&r=PG", "display_name": "Shura", "link": "https://stackoverflow.com/users/874760/shura"}, "edited": false, "score": 0, "creation_date": 1494528040, "post_id": 43873594, "comment_id": 74879615, "body": "Thank you, it&#39;s exactly what I need!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1494342715, "creation_date": 1494342715, "answer_id": 43873594, "question_id": 43864856, "link": "https://stackoverflow.com/questions/43864856/sequentioal-requests-with-mojoioloopdelay/43873594#43873594", "title": "Sequentioal requests with Mojo::IOLoop::Delay", "body": "<p></p>\n\n<p>I have just started looking at <code>Mojo::IOLoop</code> myself for a project and I'm not au fait with it yet. But I think the simplest way is to build an array of closures and pass it to <code>$delay-&gt;steps</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Mojo;\n\nuse constant URL =&gt; 'http://stackoverflow.com/questions/tagged/perl';\n\nSTDOUT-&gt;autoflush;\n\nmy $ua = Mojo::UserAgent-&gt;new;\nmy $delay = Mojo::IOLoop::Delay-&gt;new;\n\nmy @urls = ( URL ) x 10;\n\nmy @steps =  map {\n\n    my $url = $_;\n\n    sub {\n\n        my $end = $delay-&gt;begin;\n\n        $ua-&gt;get( $url =&gt; sub {\n            my ( $ua, $txn ) = @_;\n\n            $end-&gt;();\n\n            if ( my $err = $txn-&gt;error ) {\n                say $err-&gt;message;\n            }\n            else {\n                my $res = $txn-&gt;success;\n                say \"@{$res}{qw/ code message /}\";\n            }\n        });\n    }\n\n} @urls;\n\n\n$delay-&gt;steps( @steps, sub { say 'Done' } );\n\nMojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>200 OK\n200 OK\n200 OK\n200 OK\n200 OK\n200 OK\n200 OK\n200 OK\n200 OK\nDone\n200 OK\n</code></pre>\n\n<p>Note that <code>Done</code> is printed before the status line of the final <code>get</code>, because I have called <code>$end-&gt;()</code> immediately the callback arrives, assuming that any handling of the response doesn't need to be synchronised</p>\n\n<p>If you don't want that then just move <code>$end-&gt;()</code> to the end of the callback. Then the delay will wait until the output has been generated before sending another request</p>\n"}, {"comments": [{"owner": {"reputation": 108, "user_id": 874760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d7cd5b2b5a5f99139a3966f4e1e411?s=128&d=identicon&r=PG", "display_name": "Shura", "link": "https://stackoverflow.com/users/874760/shura"}, "edited": false, "score": 0, "creation_date": 1494415098, "post_id": 43885873, "comment_id": 74815695, "body": "It&#39;s OK, but I do not know how many URLs will be in list. I have to add subs in delay() dynamically. I could not find how to do it."}, {"owner": {"reputation": 891, "user_id": 1936342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a294c91706727c611866ae6df25ba61?s=128&d=identicon&r=PG", "display_name": "Logioniz", "link": "https://stackoverflow.com/users/1936342/logioniz"}, "reply_to_user": {"reputation": 108, "user_id": 874760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d7cd5b2b5a5f99139a3966f4e1e411?s=128&d=identicon&r=PG", "display_name": "Shura", "link": "https://stackoverflow.com/users/874760/shura"}, "edited": false, "score": 0, "creation_date": 1494508182, "post_id": 43885873, "comment_id": 74865838, "body": "I update post to add example, but i think that code may looks more pretty if you will do closure without delay."}, {"owner": {"reputation": 108, "user_id": 874760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d7cd5b2b5a5f99139a3966f4e1e411?s=128&d=identicon&r=PG", "display_name": "Shura", "link": "https://stackoverflow.com/users/874760/shura"}, "edited": false, "score": 0, "creation_date": 1494523442, "post_id": 43885873, "comment_id": 74877059, "body": "I have to used delay because it&#39;s web server and it should return answer immediately. So, it should be asynchronous gets. Your example under link is the same as my code. I do not like it."}, {"owner": {"reputation": 891, "user_id": 1936342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a294c91706727c611866ae6df25ba61?s=128&d=identicon&r=PG", "display_name": "Logioniz", "link": "https://stackoverflow.com/users/1936342/logioniz"}, "reply_to_user": {"reputation": 108, "user_id": 874760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d7cd5b2b5a5f99139a3966f4e1e411?s=128&d=identicon&r=PG", "display_name": "Shura", "link": "https://stackoverflow.com/users/874760/shura"}, "edited": false, "score": 0, "creation_date": 1494576435, "post_id": 43885873, "comment_id": 74897495, "body": "Delay not allow you to perform requests immediately. Delay need to write code sequentially. So you need simply remove delay, because code without it look more clear. I update my gist to add 2 example: without delay and another with delay. Click on example again!"}, {"owner": {"reputation": 108, "user_id": 874760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d7cd5b2b5a5f99139a3966f4e1e411?s=128&d=identicon&r=PG", "display_name": "Shura", "link": "https://stackoverflow.com/users/874760/shura"}, "edited": false, "score": 0, "creation_date": 1494590583, "post_id": 43885873, "comment_id": 74906574, "body": "<b>callback.dynamic.sequential.pl</b> looks very pretty, but where should I place final function build_report()? It should summarize all requests to one order."}], "tags": [], "owner": {"reputation": 891, "user_id": 1936342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a294c91706727c611866ae6df25ba61?s=128&d=identicon&r=PG", "display_name": "Logioniz", "link": "https://stackoverflow.com/users/1936342/logioniz"}, "is_accepted": false, "score": 0, "last_activity_date": 1494507991, "last_edit_date": 1494507991, "creation_date": 1494400702, "answer_id": 43885873, "question_id": 43864856, "link": "https://stackoverflow.com/questions/43864856/sequentioal-requests-with-mojoioloopdelay/43885873#43885873", "title": "Sequentioal requests with Mojo::IOLoop::Delay", "body": "<p>Sequential requests very easy to implement.</p>\n\n<p><strong>Web server</strong>\n</p>\n\n<pre><code>#!/usr/bin/perl\nuse Mojo::Base -strict;\n\nuse Mojolicious::Lite;\n\nget '/' =&gt; sub {\n  my $c = shift-&gt;render_later;\n\n  $c-&gt;delay(sub {\n    my $delay = shift;\n    $c-&gt;ua-&gt;get('https://google.ru' =&gt; $delay-&gt;begin);\n  }, sub {\n    my ($delay, $tx) = @_;\n    $tx-&gt;res-&gt;body; # body of the google.ru\n    $c-&gt;ua-&gt;get('https://twitter.com' =&gt; $delay-&gt;begin);\n  }, sub {\n    my ($delay, $tx) = @_;\n    $tx-&gt;res-&gt;body; # body of the twitter.com\n    $c-&gt;render(text =&gt; 'Done');\n  });\n};\n\napp-&gt;start;\n</code></pre>\n\n<p><strong>Script</strong>\n</p>\n\n<pre><code>#!/usr/bin/perl\nuse Mojo::Base -strict;\n\nuse Mojo::IOLoop;\nuse Mojo::UserAgent;\n\nmy $ua = Mojo::UserAgent-&gt;new;\n\nMojo::IOLoop-&gt;delay(sub {\n  my $delay = shift;\n  $ua-&gt;get('https://www.google.ru' =&gt; $delay-&gt;begin);\n}, sub {\n  my ($delay, $tx) = @_;\n  $tx-&gt;res-&gt;body; # body of the google.ru\n  $ua-&gt;get('https://twitter.com' =&gt; $delay-&gt;begin);\n}, sub {\n  my ($delay, $tx) = @_;\n  $tx-&gt;res-&gt;body; # body of the twitter.com\n  warn 'DONE';\n})-&gt;wait;\n</code></pre>\n\n<p><strong>Script</strong> (dynamic requests)</p>\n\n<p><a href=\"https://gist.github.com/Logioniz/4c2ffcbb2e997814e63544387bec2ee2\" rel=\"nofollow noreferrer\">Example here</a></p>\n"}], "owner": {"reputation": 108, "user_id": 874760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d7cd5b2b5a5f99139a3966f4e1e411?s=128&d=identicon&r=PG", "display_name": "Shura", "link": "https://stackoverflow.com/users/874760/shura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 43873594, "answer_count": 2, "score": 2, "last_activity_date": 1494507991, "creation_date": 1494318646, "last_edit_date": 1494344097, "question_id": 43864856, "link": "https://stackoverflow.com/questions/43864856/sequentioal-requests-with-mojoioloopdelay", "title": "Sequentioal requests with Mojo::IOLoop::Delay", "body": "<p>I need to get list of URLs in non-blocking mode, but not in parallel. It should be sequential requests one by one. How can I realize that?</p>\n\n<p>I cannot find examples. Documentation and articles highlight only parallel execution.</p>\n\n<p>Now my code looks like the following (simplified):</p>\n\n<pre><code>my $delay = Mojo::IOLoop::Delay-&gt;new;\n\n$delay-&gt;steps(\n    sub {\n        build_report();\n        say \"done\";\n    }\n);\n\nsub parse_data {\n    ...;\n    my $url = shift @urls;\n    my $end = $delay-&gt;begin;\n    $ua-&gt;get( $url =&gt; \\&amp;parse_data );\n    $end-&gt;();\n}\n\nmy $end = $delay-&gt;begin;\n$ua-&gt;get( $url =&gt; \\&amp;parse_data );\n$end-&gt;();\n$delay-&gt;wait;\n</code></pre>\n\n<p>I want to avoid multiple closures by using <a href=\"https://metacpan.org/pod/Mojo::IOLoop::Delay\" rel=\"nofollow noreferrer\"><code>Mojo::IOLoop::Delay</code></a>.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "is_accepted": false, "score": 0, "last_activity_date": 1494321384, "creation_date": 1494321384, "answer_id": 43865836, "question_id": 43863124, "link": "https://stackoverflow.com/questions/43863124/perl-make-script-fast-to-use-big-file/43865836#43865836", "title": "perl: make script fast to use big file", "body": "<p>Instead of an array</p>\n\n<pre><code>my @seq;\n</code></pre>\n\n<p>define your words as a hash.</p>\n\n<pre><code>my %seq;\n</code></pre>\n\n<p>Instead of pushing the words</p>\n\n<pre><code>push @seq, $_;\n</code></pre>\n\n<p>store the words in the hash. Precalculate the replacement and move it out of the loop.</p>\n\n<pre><code>my $t = $_;\n$t =~ s/\\h+/bbb/g;\n$seq{$_} = $t;\n</code></pre>\n\n<p>Precalculate the words in front of the outer loop:</p>\n\n<pre><code>my @seq = keys %seq;\n</code></pre>\n\n<p>And use hash look-ups to find the replacement in the inner loop:</p>\n\n<pre><code>my $t = $seq{$r};\n</code></pre>\n\n<p>This might be a bit faster, but do not expect too much.</p>\n\n<p>In most cases it is better to reduce the problem by preparing the input in a way, which makes the solution easier. For example <code>grep -f</code> is much faster than your Perl loops. Use grep to find the lines, which need a replacement, and do the replacement with Perl or Sed.</p>\n\n<p>Another way is to parallel the job. You can divide your input in n parts and run n processes on n CPUs in parallel. See the <a href=\"https://www.gnu.org/software/parallel/parallel_tutorial.html\" rel=\"nofollow noreferrer\">GNU parallel tutorial</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 0, "last_activity_date": 1494334632, "creation_date": 1494334632, "answer_id": 43870467, "question_id": 43863124, "link": "https://stackoverflow.com/questions/43863124/perl-make-script-fast-to-use-big-file/43870467#43870467", "title": "perl: make script fast to use big file", "body": "<p>What about a regexp like this (beware that this approach can cause security concerns) ?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen (my $Newfile, '&gt;', 'newfile.txt') or die \"Cannot create Newfile.txt: $!\";\nmy ($f1, $f2) = qw(file1.txt file2.txt);\n\nopen (my $fh, $f1) or die \"Can't open $f1 for reading: $!\";\nmy @seq = map {split ' ', $_ } &lt;$fh&gt;;\nclose $fh;\n# an improvement would be to use an hash to avoid dupplicates\n\nmy $regexp = '(' . join('|', @seq) . ')';\n\nopen($fh, $f2) or die \"Can't open $f2 for reading: $!\";\nforeach my $line (&lt;$fh&gt; ) {\n    $line =~ s/$regexp/$1bbb/g;\n    print $Newfile $line;\n}\nclose $fh;\nclose $Newfile ;\nexit 0;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7918059, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5181cf8c32823af74542be6f61d87cb?s=128&d=identicon&r=PG&f=1", "display_name": "nicha", "link": "https://stackoverflow.com/users/7918059/nicha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1494334632, "creation_date": 1494313018, "last_edit_date": 1494319865, "question_id": 43863124, "link": "https://stackoverflow.com/questions/43863124/perl-make-script-fast-to-use-big-file", "title": "perl: make script fast to use big file", "body": "<p>My problem is how to make my script fast (I use big files)</p>\n\n<p>I have the script above it add \"bbb\" between words if the words exist in an other file that contain sequences of words \nfor exemple file2.txt : <code>i eat big pizza .my big pizza ...</code>\nfile1.txt (sequences):</p>\n\n<pre><code>                          eat big pizza\n                          big pizza\n</code></pre>\n\n<p>the result Newfile</p>\n\n<pre><code>i eatbbbbigbbbpizza.my bigbbbpizza ...\n</code></pre>\n\n<p>my script:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nopen Newfile ,\"&gt;./newfile.txt\" or die \"Cannot create Newfile.txt\";\n my %replacement;\nmy ($f1, $f2) = ('file1.txt', 'file2.txt');\n\nopen(my $fh, $f1);\nmy @seq;\nforeach (&lt;$fh&gt; )\n{\n  chomp;\n  s/^\\s+|\\s+$//g;\n  push @seq, $_;\n}\nclose $fh;\n\n@seq = sort bylen @seq;\n\nopen($fh, $f2);\nforeach (&lt;$fh&gt; ) {\n  foreach my $r (@seq) {\n\n    my $t = $r;\n    $t =~ s/\\h+/bbb/g;\n\n    s/$r/$t/g;\n  }\n  print Newfile ;\n}\nclose $fh;\nclose Newfile ;\nexit 0;\n\nsub bylen {\n   length($b) &lt;=&gt; length($a);\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "negative-lookbehind"], "answers": [{"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 5, "last_activity_date": 1494362184, "last_edit_date": 1494362184, "creation_date": 1494300615, "answer_id": 43860583, "question_id": 43860510, "link": "https://stackoverflow.com/questions/43860510/why-is-this-negative-lookbehind-being-considered-a-successful-regex-match/43860583#43860583", "title": "Why is this negative lookbehind being considered a successful regex match?", "body": "<p>You have the position of the negative lookback assertion backwards.</p>\n\n<p>It is zero width, so needs to be in front of the <code>y</code> as you have written it.</p>\n\n<p>Given:</p>\n\n<pre><code>$ echo $'xy\\nay\\nyx' \nxy\nay\nyx\n</code></pre>\n\n<p>The lookbehind <code>/y(?&lt;!x)/</code> matches lines with <code>x</code> in front or in back of <code>y</code> because <code>y</code> is behind the assertion (not <code>x</code>): </p>\n\n<pre><code>$ echo $'xy\\nay\\nyx' | perl -n -e 'print if /y(?&lt;!x)/'\nxy\nay\nyx\n</code></pre>\n\n<p>Note that <code>yx</code> also matches since the assertion comes prior to <code>x</code> and is looking at <code>y</code> so all three lines are matches.</p>\n\n<p><em>Vs</em> what you are looking for:</p>\n\n<pre><code>$ echo $'xy\\nay\\nyx' | perl -n -e 'print if /(?&lt;!x)y/'\nay\nyx\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/R9qXVP/1/\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p><a href=\"http://www.rexegg.com/regex-lookarounds.html\" rel=\"nofollow noreferrer\">Further explanation.</a></p>\n\n<p>Or, you need to account for width of the <code>y</code> (or whatever the match is) if looking backwards after the <code>y</code> by including the <code>y</code> in the assertion:</p>\n\n<pre><code>$ echo $'xy\\nay\\nyx' | perl -n -e 'print if /y(?&lt;!xy)/'\nay\nyx\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1494344503, "last_edit_date": 1494344503, "creation_date": 1494301174, "answer_id": 43860674, "question_id": 43860510, "link": "https://stackoverflow.com/questions/43860510/why-is-this-negative-lookbehind-being-considered-a-successful-regex-match/43860674#43860674", "title": "Why is this negative lookbehind being considered a successful regex match?", "body": "<p><code>ab</code> means <code>a</code> followed by <code>b</code>. As such, you are checking for a <code>y</code> at one position, and then you check that the next position isn't preceded by <code>x</code>.\nIt isn't preceded by <code>x</code> &mdash;it's preceded by <code>y</code>&mdash; so the pattern matches.</p>\n\n<p>You want</p>\n\n<pre><code>/(?&lt;!x)y/\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/(?:^|[^x])y/\n</code></pre>\n"}], "owner": {"reputation": 89955, "user_id": 130758, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/MbIFT.jpg?s=128&g=1", "display_name": "devoured elysium", "link": "https://stackoverflow.com/users/130758/devoured-elysium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 43860583, "answer_count": 2, "score": 4, "last_activity_date": 1494362184, "creation_date": 1494300140, "question_id": 43860510, "link": "https://stackoverflow.com/questions/43860510/why-is-this-negative-lookbehind-being-considered-a-successful-regex-match", "title": "Why is this negative lookbehind being considered a successful regex match?", "body": "<p>I would expect that this simple text string would not be considered a match:</p>\n\n<pre><code>xyz@xyz:~$ echo xy | perl -n -e 'print if /y(?&lt;!x)/'\nxy\n</code></pre>\n\n<p>But strangely enough it is. I've tried it also @ <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> and the result is the same. It seems like it will match the <code>y</code>, which confuses me. If my understanding is correct, the above regex should only match <code>y</code>s that are <em>not</em> preceded by a <code>x</code>.</p>\n\n<p>PS: I gave this a simplistic example. In general I would like to use negative lookbehinds to match against full strings and not necessarily single characters such as x.</p>\n\n<p>I'm using the Perl regex flavour.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "oop", "self"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494288236, "post_id": 43858869, "comment_id": 74753654, "body": "The intent seems to be to assign to data in <code>$self</code> the following: the return of <i>constructors</i> for (1) this class&#39;s parent (except it should be <code>$class-&gt;SUPER::new(...)</code>), and (2) for the class <code>bar</code>. Is this really what you mean?  Your <code>&#39;foo&#39;</code> and <code>&#39;bar&#39;</code> should then contain <i>objects</i>.  Next, you show neither the parent nor <code>bar</code> so it&#39;s hard to tell.  Can you clarify and add more code?"}, {"owner": {"reputation": 1, "user_id": 7967986, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TbB_4hEyB7U/AAAAAAAAAAI/AAAAAAAAAwM/9Q9_sWQJ3xI/photo.jpg?sz=128", "display_name": "Diego Rodriguez", "link": "https://stackoverflow.com/users/7967986/diego-rodriguez"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494289451, "post_id": 43858869, "comment_id": 74753926, "body": "okey , i add more code zdim. Thanks!"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1494290341, "post_id": 43858869, "comment_id": 74754113, "body": "You never declare a superclass, <code>$class-&gt;SUPER-&gt;new($args);</code> isn&#39;t going to work. Also, its bad form to use <code>package main</code> as a class."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494291875, "post_id": 43858869, "comment_id": 74754471, "body": "If this is a subclass of <code>arg</code> (class names should start with a capital letter) then you need to put &#39;arg&#39; into <code>@ISA</code> somehow. Also, if <i>&quot;<code>foo</code> is a class that [you] want to use certain methods [from]&quot;</i> then you need to <code>use foo</code> somewhere. Please rewrite your code so that it shows the symptoms you are talking about. We need to be able to run it ourselves."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494300293, "post_id": 43858869, "comment_id": 74756461, "body": "Re &quot;<i>Yes, arg is class&#39;s parent</i>&quot;, Not according to the code you showed"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494300317, "post_id": 43858869, "comment_id": 74756477, "body": "Re <i>&quot;foo is a class that i want to use certain methods.</i>&quot;, <code>foo</code> doesn&#39;t appear anywhere in your code!"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1494300407, "post_id": 43858869, "comment_id": 74756512, "body": "<code>$self-&gt;{&#39;foo&#39;} = $class-&gt;SUPER-&gt;new($args);</code> is crazy!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494300848, "post_id": 43858869, "comment_id": 74756637, "body": "In the future, please provide a minimal, runnable demonstration of the problem. It&#39;s hard to believe that&#39;s the you ran to get the output you got..."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1494300552, "last_edit_date": 1494300552, "creation_date": 1494300223, "answer_id": 43860523, "question_id": 43858869, "link": "https://stackoverflow.com/questions/43858869/declaring-multiple-objects-in-class-perl/43860523#43860523", "title": "Declaring multiple objects in class Perl", "body": "<p>You place the object in</p>\n\n<pre><code>$self-&gt;{bar}\n</code></pre>\n\n<p>then you call</p>\n\n<pre><code>$self-&gt;{__bar}-&gt;getBar1\n</code></pre>\n\n<p>Change that to</p>\n\n<pre><code>$self-&gt;{bar}-&gt;getBar1\n</code></pre>\n\n<hr>\n\n<p>You appear to have a number of other problems. From your description of your code, <code>Unnamed.pm</code> should contain something like the following: (Don't use <code>main</code>; that's already being used.)</p>\n\n<pre><code>package Unnamed;\n\nuse strict;\nuse warnings qw( all );\n\nuse foo qw( );\nuse bar qw( );\n\nuse parent 'arg';\n\nsub new {\n    my $class = shift;\n    my $args = shift;\n    my $self = $class-&gt;SUPER::new($args);\n    $self-&gt;{foo} = foo-&gt;new();\n    $self-&gt;{bar} = bar-&gt;new();\n    return $self;\n}\n\nsub get_foo {\n    my $self = shift;\n    return $self-&gt;{foo};\n}\n\nsub get_bar {\n    my $self = shift;\n    return $self-&gt;{bar};\n}\n\n1;\n</code></pre>\n\n<p>Then, you can do</p>\n\n<pre><code>my $o = Unnamed-&gt;new();\n$o-&gt;get_bar-&gt;bar_method();\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7967986, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TbB_4hEyB7U/AAAAAAAAAAI/AAAAAAAAAwM/9Q9_sWQJ3xI/photo.jpg?sz=128", "display_name": "Diego Rodriguez", "link": "https://stackoverflow.com/users/7967986/diego-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1494300552, "creation_date": 1494287134, "last_edit_date": 1494289298, "question_id": 43858869, "link": "https://stackoverflow.com/questions/43858869/declaring-multiple-objects-in-class-perl", "title": "Declaring multiple objects in class Perl", "body": "<p>I have a problem and that is when I want to initialize two objects using the $ self variable. The first object will be initialized but the second will not. Here is some code:</p>\n\n<pre><code>     ###Class main\n     use bar;\n     use arg; \n     sub new{\n          my $class = shift;\n          my $args = shift;\n\n          my $self = {};\n          $self-&gt;{'foo'} = $class-&gt;SUPER-&gt;new($args);\n          $self-&gt;{'bar'} = bar-&gt;new();\n          bless($self, $class);\n          return $self;\n     }\n\n   sub getFoo{\n        my $self = shift;\n        return $self-&gt;{'foo'};\n   }\n\n    sub getBar{\n         my $self = shift;\n        return $self-&gt;{'bar'};\n\n    }\n</code></pre>\n\n<p>For the function getFoo such it returns a value but for getBar the value returned is undef, why does this happen? Thanks</p>\n\n<p><strong>EDIT1</strong>\nYes, arg is class's parent and foo is a class that i want to use certain methods.</p>\n\n<pre><code>    ####class bar\n    package bar;\n    sub new{\n      my $class = shift;\n      my $self = {\n          _bar1 =&gt; shift // 0,\n          _bar2 =&gt; shift //0,\n       };\n      bless($self,$class);\n      return $self;\n    }\n\n     sub getBar1{\n        my $self = shift;\n        return $self-&gt;{_bar1};\n     }\n</code></pre>\n\n<p>But if I do this now in my class main</p>\n\n<pre><code>    $self-&gt;{__bar}-&gt;getBar1;\n</code></pre>\n\n<p>The message return is : can\u00b4t call method \"getBar1\" on an undefined value.</p>\n"}, {"tags": ["linux", "bash", "perl"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 3, "creation_date": 1494257133, "post_id": 43851419, "comment_id": 74738722, "body": "do you only want to <code>*</code> the IC lines or the entire block including the start and the end? Can you show the expected output?"}, {"owner": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1494257421, "post_id": 43851419, "comment_id": 74738921, "body": "Updated my question with desired output, thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1494258231, "post_id": 43851419, "comment_id": 74739490, "body": "There&#39;s no need to escape percentage signs <code>%</code> in a Perl regex pattern."}, {"owner": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "edited": false, "score": 0, "creation_date": 1494320252, "post_id": 43851419, "comment_id": 74765951, "body": "No more escaping percentage signs."}], "answers": [{"comments": [{"owner": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "edited": false, "score": 0, "creation_date": 1494319942, "post_id": 43851808, "comment_id": 74765723, "body": "&quot;It would have been much more appropriate if you had offered your own test file as we have to guess what your data contains&quot; - Thanks for the advise, I&#39;ve updated the question for future readers.  I was wondering if there could be a solution without using modules?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "edited": false, "score": 0, "creation_date": 1494320824, "post_id": 43851808, "comment_id": 74766348, "body": "@AshishKumar: Why do you want to avoid using modules?"}, {"owner": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "edited": false, "score": 0, "creation_date": 1494324503, "post_id": 43851808, "comment_id": 74768903, "body": "I&#39;ve noticed many times people coming here for one time solution (via Search engines) and sometimes they are unaware of the language, installation process or, worst of all, don&#39;t have access / rights to install the module altogether.  Therefore, I was looking for a solution which could benefit every user."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "edited": false, "score": 0, "creation_date": 1494325965, "post_id": 43851808, "comment_id": 74769847, "body": "@AshishKumar: There is an attitude creeping in that it is somehow &quot;better&quot; to avoid using modules in Perl code, and ideas like this only encourage it. <b>a)</b> Removing the phenomenal CPAN library from your toolkit drastically limits the possibilities <b>b)</b> It isn&#39;t hard to install a module in a personal directory, and it is much better to teach people how to do that than to imply that modules are &quot;bad&quot; <b>c)</b> <code>List::Util</code> is a core module that is available with every standard installation of Perl <b>d)</b> It is unfair to have such hidden agendas that are revealed only after you get an answer"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "edited": false, "score": 0, "creation_date": 1494326116, "post_id": 43851808, "comment_id": 74769961, "body": "@AshishKumar: <b>e)</b> It should be up to the author of the answer whether he wants to cater for people who don&#39;t like to install Perl modules. It is your job to precisely specify <b><i>your own</i></b> requirement."}, {"owner": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "edited": false, "score": 0, "creation_date": 1494327667, "post_id": 43851808, "comment_id": 74771051, "body": "Many thanks, your solutions works for me.   I will remember to provide complete information and requirements in future.  Cheers."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1494328223, "last_edit_date": 1494328223, "creation_date": 1494258016, "answer_id": 43851808, "question_id": 43851419, "link": "https://stackoverflow.com/questions/43851419/comment-specific-block-of-code-in-multiple-files/43851808#43851808", "title": "Comment specific block of code in multiple files", "body": "\n\n<h3>Update</h3>\n\n<p>For anyone wishing to avoid even the core module <code>List::Util</code>, you may remove the <code>use</code> statement from the code below and define the <code>any</code> operator like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sub any(&amp;@) {\n    my ($f) = @_;\n    $f-&gt;() and return 1 for @_;\n    return 0;\n}\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p>I've used this file to test my code. It would have been much more appropriate if you had offered your own test file as we have to guess what your data contains, and we're writing code for free here</p>\n\n<h3>data</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>  text\n  text\n  text\n\n  %put %str(NOTE: integrity constraints);\n  proc datasets library=TESTING nolist;\n     modify TESTING_UPDATES;\n        ic create not null (id);\n        ic create not null (prsn);\n        ic create not null (valid_from);\n        ic create not null (valid_to);\n        ic create not null (current_flag);\n        ic create not null (active_flag);\n        ic create not null (hist);\n  quit;\n\n  %rcSet(&amp;syserr);\n\n  %put %str(NOTE: integrity constraints);\n  proc datasets library=TESTING nolist;\n     modify TESTING_UPDATES;\n  quit;\n\n  %rcSet(&amp;syserr);\n</code></pre>\n\n<h3>Perl code</h3>\n\n<p>This program expects the path to the input file as a parameter on the command line. The output is sent to stdout</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'any';\n\nmy @block;\n\nwhile ( &lt;&gt; ) {\n    my $status = /^\\s*%put\\s+%str\\b/ .. /^\\s*%rcSet\\b/;\n\n    if ( $status ) {\n\n        push @block, $_;\n\n        if ( $status =~ /E/ ) {\n            if ( any { /\\bic create\\b/ } @block ) {\n                s/^ ?/*/ for @block;\n            }\n            print @block;\n            @block = ();\n        }\n    }\n    else {\n        print;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>      text\n      text\n      text\n\n*     %put %str(NOTE: integrity constraints);\n*     proc datasets library=TESTING nolist;\n*        modify TESTING_UPDATES;\n*           ic create not null (id);\n*           ic create not null (prsn);\n*           ic create not null (valid_from);\n*           ic create not null (valid_to);\n*           ic create not null (current_flag);\n*           ic create not null (active_flag);\n*           ic create not null (hist);\n*     quit;\n*\n*     %rcSet(&amp;syserr);\n\n      %put %str(NOTE: integrity constraints);\n      proc datasets library=TESTING nolist;\n         modify TESTING_UPDATES;\n      quit;\n\n      %rcSet(&amp;syserr);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1494258296, "creation_date": 1494258296, "answer_id": 43851912, "question_id": 43851419, "link": "https://stackoverflow.com/questions/43851419/comment-specific-block-of-code-in-multiple-files/43851912#43851912", "title": "Comment specific block of code in multiple files", "body": "<p>You're working line by line, and trying to 'know' if you've got an 'ic create' in a stanza.</p>\n\n<p>Therefore the way to tackle it would be:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $buffer;\n\nwhile (&lt;&gt;) {\n   if ( m/\\%put\\s\\%str/ .. /\\%rcSet/ ) {\n      $buffer .= $_;\n      next;\n   }\n   if ($buffer) {\n      if ( $buffer =~ m/ic create/ ) {\n         $buffer =~ s/^/*/gm;\n      }\n      print $buffer;\n      $buffer = \"\";\n   }\n   print;\n}\n\n\n#handle the case of buffer being the last line:\n\nif ($buffer) {\n   if ( $buffer =~ m/ic create/ ) {\n      $buffer =~ s/^/*/gm;\n   }\n   print $buffer;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1494328097, "post_id": 43866457, "comment_id": 74771338, "body": "<code>map</code> is for <i>mapping</i> one list to another according to a function and shouldn&#39;t be used for its side-effects. <code>map { s&#47;^&#47;* &#47; if $is_ic_create; print } @block</code> should be <code>for ( @block ) { s&#47;^&#47;* &#47; if $is_ic_create; print; }</code>"}], "tags": [], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "is_accepted": false, "score": 0, "last_activity_date": 1494323107, "creation_date": 1494323107, "answer_id": 43866457, "question_id": 43851419, "link": "https://stackoverflow.com/questions/43851419/comment-specific-block-of-code-in-multiple-files/43866457#43866457", "title": "Comment specific block of code in multiple files", "body": "<p>Most Perl programs use only one <code>while (&lt;&gt;)</code> loop, but it is possible to nest them, which makes it easy to have different loop semantics for inner and outer loops. And I think it makes the code a bit clearer. The outer loop searches for the begin marker and the inner loop searches for the end marker.</p>\n\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\n\n# Outer loop searching for begin marker.\nwhile (&lt;&gt;)\n{\n  if (/%put %str/)\n  {\n    my @block = ($_);\n    my $is_ic_create = 0;\n\n    # Inner loop searching for end marker.\n    while (&lt;&gt;)\n    {\n      push @block, $_;\n      if (/ic create/) {\n        $is_ic_create = 1;\n      }\n      elsif (/%rcSet/) {\n        map { s/^/* / if $is_ic_create; print } @block;\n        last;\n      }\n    }\n  }\n  else {\n    print;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 746, "user_id": 654129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799078b4fa5a823bc8e117669a64920?s=128&d=identicon&r=PG", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/654129/ashish-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1494328223, "creation_date": 1494256883, "last_edit_date": 1494320162, "question_id": 43851419, "link": "https://stackoverflow.com/questions/43851419/comment-specific-block-of-code-in-multiple-files", "title": "Comment specific block of code in multiple files", "body": "<p>I've got multiple files with certain blocks of code, multiple lines, that I need to comment out.  I'm interested in some special blocks which contain a specific keyword:</p>\n\n<blockquote>\n  <p>ic create</p>\n</blockquote>\n\n<p>These block always begins with </p>\n\n<blockquote>\n  <p>%put %str</p>\n</blockquote>\n\n<p>and ends at </p>\n\n<blockquote>\n  <p>%rcSet</p>\n</blockquote>\n\n<p><strong>Example block as follows:</strong></p>\n\n<pre><code>  text\n  text\n  text\n\n  %put %str(NOTE: integrity constraints);\n  proc datasets library=TESTING nolist;\n     modify TESTING_UPDATES;\n        ic create not null (id);\n        ic create not null (prsn);\n        ic create not null (valid_from);\n        ic create not null (valid_to);\n        ic create not null (current_flag);\n        ic create not null (active_flag);\n        ic create not null (hist);\n  quit;\n\n  %rcSet(&amp;syserr);\n\n  %put %str(NOTE: integrity constraints);\n  proc datasets library=TESTING nolist;\n     modify TESTING_UPDATES;\n  quit;\n\n  %rcSet(&amp;syserr);\n</code></pre>\n\n<p>There could be more blocks that start and end with specified keywords but do not have \"ic create\" keywords and needs to be ignored.</p>\n\n<p>I've written a code which finds and displays all such blocks but I can't figure </p>\n\n<ol>\n<li>How can I get these blocks which have desired pattern in middle, from start to end</li>\n<li>What's the best way to comment, add * at the beginning of line, them all from start to end</li>\n<li>The code should preferably be without any external modules, as not everyone reading this in future might have access to them</li>\n</ol>\n\n<p><strong>Desired output:</strong></p>\n\n<pre><code>      text\n      text\n      text\n\n*     %put %str(NOTE: integrity constraints);\n*     proc datasets library=TESTING nolist;\n*        modify TESTING_UPDATES;\n*           ic create not null (id);\n*           ic create not null (prsn);\n*           ic create not null (valid_from);\n*           ic create not null (valid_to);\n*           ic create not null (current_flag);\n*           ic create not null (active_flag);\n*           ic create not null (hist);\n*     quit;\n*\n*     %rcSet(&amp;syserr);\n\n      %put %str(NOTE: integrity constraints);\n      proc datasets library=TESTING nolist;\n         modify TESTING_UPDATES;\n      quit;\n\n      %rcSet(&amp;syserr);\n</code></pre>\n\n<p><strong>My Perl code:</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @files = glob (\"*.sas\");\n\nforeach my $file (@files) {\nopen my $fh, '&lt;', $file or die \"Cannot open file: $!\"; {\n        while ( &lt;$fh&gt; ) {\n                if ( /%put\\s%str/ ) {\n                print;\n                while ( &lt;$fh&gt; ) {\n                        print;\n                        last if /%rcSet/;\n                }\n                print \"-\" x 20, \"\\n\";\n        }\n}\n\n__END__\n</code></pre>\n\n<p>Any help is much appreciated.  Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1494256888, "post_id": 43851229, "comment_id": 74738545, "body": "<code>s&#47;\\Q{{&#39;TEXT&#39; | translate}}&#47;..&#47;</code>check perldoc -f quotemeta"}, {"owner": {"reputation": 1, "user_id": 6453098, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UPnQb0_0obw/AAAAAAAAAAI/AAAAAAAAAUk/WCjsA7T6aLU/photo.jpg?sz=128", "display_name": "GuNa V", "link": "https://stackoverflow.com/users/6453098/guna-v"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1494265277, "post_id": 43851229, "comment_id": 74743615, "body": "hai \u0421\u0443\u0445\u043e\u043927 , thanks  for the valuable comment . I tried perl -i -p -e &#39;s/\\Q{{&#39;TEXT&#39; | translate}}/{{&#39;TEXT.T.D&#39; | translate}}/g;&#39; *.config  ...However it doesn&#39;t replace the old value"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1494270849, "post_id": 43851229, "comment_id": 74746762, "body": "Your actual code and/or data differs from what you posted above. <code>=&gt;</code> <a href=\"https://eval.in/790023\" rel=\"nofollow noreferrer\">eval.in/790023</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1494257081, "creation_date": 1494257081, "answer_id": 43851496, "question_id": 43851229, "link": "https://stackoverflow.com/questions/43851229/find-and-replace-special-character-string-in-mulitiple-text-file-using-perl-scri/43851496#43851496", "title": "Find and replace special character string in mulitiple text file using perl script command", "body": "<p>The <code>|</code> symbol is a metacharacter in regular expressions (it means \"or\"). In order to use it to mean itself, you need to escape it with a backslash.</p>\n\n<pre><code>s/{{'TEXT' \\| translate}}/{{'TEXT.T.D' | translate}}/g\n</code></pre>\n\n<p>Another alternative (which will escape all potentially problematic characters in the regex) is to use the <code>\\Q</code> (\"quotemeta\") escape sequence.</p>\n\n<pre><code>s/\\Q{{'TEXT' | translate}}/{{'TEXT.T.D' | translate}}/g\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6453098, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UPnQb0_0obw/AAAAAAAAAAI/AAAAAAAAAUk/WCjsA7T6aLU/photo.jpg?sz=128", "display_name": "GuNa V", "link": "https://stackoverflow.com/users/6453098/guna-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494257081, "creation_date": 1494256389, "last_edit_date": 1494256930, "question_id": 43851229, "link": "https://stackoverflow.com/questions/43851229/find-and-replace-special-character-string-in-mulitiple-text-file-using-perl-scri", "title": "Find and replace special character string in mulitiple text file using perl script command", "body": "<p>I am using the below single line command for replacing words </p>\n\n<pre><code>perl -i -p -e 's/old/new/g;' *.config\n</code></pre>\n\n<p>which works fine for  normal string. However if i want to replace a string with special characters like below it doesn't work.</p>\n\n<pre><code>perl -i -p -e 's/{{'TEXT' | translate}}/{{'TEXT.T.D' | translate}}/g;' *.config\n</code></pre>\n\n<p>oldText will be like = <code>{{'TEXT' | translate}}</code></p>\n\n<p>New text will be like  = <code>{{'TEXT.T.D' | translate}}</code></p>\n"}, {"tags": ["json", "perl", "utf-8"], "comments": [{"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494251159, "post_id": 43849135, "comment_id": 74734619, "body": "i know i have used eq too but the same problem.Also this is the json i take from the messenger platfrom and i am taking the text field for comparison with the &quot;\u0393\u03b5\u03b9\u03b1&quot;: {&quot;object&quot;:&quot;page&quot;,&quot;entry&quot;:[{&quot;id&quot;:&quot;434218046923911&quot;,&quot;time&quot;:149&zwnj;&#8203;4249616799,&quot;messagin&zwnj;&#8203;g&quot;:[{&quot;sender&quot;:{&quot;id&quot;:&zwnj;&#8203;&quot;1184989524957707&quot;},&zwnj;&#8203;&quot;recipient&quot;:{&quot;id&quot;:&quot;4&zwnj;&#8203;34218046923911&quot;},&quot;ti&zwnj;&#8203;mestamp&quot;:14942496163&zwnj;&#8203;87,&quot;message&quot;:{&quot;mid&quot;:&zwnj;&#8203;&quot;mid.$cAAGK6wcXaFtiG&zwnj;&#8203;Xz8A1b6DJt38to5&quot;,&quot;se&zwnj;&#8203;q&quot;:667346,&quot;text&quot;:&quot;\\\\&zwnj;&#8203;u0393\\\\u03b5\\\\u03b9\\&zwnj;&#8203;\\u03b1&quot;}}]}]}"}, {"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494251771, "post_id": 43849135, "comment_id": 74735038, "body": "it seems not but when i warn the $message_text it gives me utf-8 symbols \\xce\\x93\\xce\\xb5\\xce\\xb9\\xce\\xb1"}, {"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494251821, "post_id": 43849135, "comment_id": 74735078, "body": "it&#39;s copy paste from the error log,the json is fine i have tested with english characters"}, {"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494252256, "post_id": 43849135, "comment_id": 74735368, "body": "what did you mean by input??i give you the json."}, {"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494252671, "post_id": 43849135, "comment_id": 74735657, "body": "i am reading data from the messenger platform callback that occurs when a text message is sent to my page. This is the link for the messenger platform documentation about the json text <a href=\"https://developers.facebook.com/docs/messenger-platform/webhook-reference/message\" rel=\"nofollow noreferrer\">developers.facebook.com/docs/messenger-platform/&hellip;</a>. Also i edit the post with the webhook.asp that reads the data"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1494252863, "post_id": 43849135, "comment_id": 74735778, "body": "The data you show isn&#39;t valid JSON and the <code>JSON</code> module will not parse it. Please dump <code>$json_text</code> from Perl using <code>use Data::Dumper; $Data::Dumper::Useqq = 1; $Data::Dumper::Terse = 1; print Dumper $json_text;</code> and show us the output from that."}, {"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494253365, "post_id": 43849135, "comment_id": 74736101, "body": "This is the output {\\\\&quot;object\\\\&quot;:\\\\&quot;page\\\\&quot;,\\\\&quot;entry\\\\&quot;:[{\\\\&quot;id\\\\&quot;:\\\\&quot;434218046&zwnj;&#8203;923911\\\\&quot;,\\\\&quot;time\\\\&quot;&zwnj;&#8203;:1494253318253,\\\\&quot;me&zwnj;&#8203;ssaging\\\\&quot;:[{\\\\&quot;send&zwnj;&#8203;er\\\\&quot;:{\\\\&quot;id\\\\&quot;:\\\\&quot;1&zwnj;&#8203;184989524957707\\\\&quot;},&zwnj;&#8203;\\\\&quot;recipient\\\\&quot;:{\\\\&quot;&zwnj;&#8203;id\\\\&quot;:\\\\&quot;43421804692&zwnj;&#8203;3911\\\\&quot;},\\\\&quot;timestam&zwnj;&#8203;p\\\\&quot;:1494253317826,\\&zwnj;&#8203;\\&quot;message\\\\&quot;:{\\\\&quot;mid&zwnj;&#8203;\\\\&quot;:\\\\&quot;mid.\\\\$cAAGK6&zwnj;&#8203;wcXaFtiGbV2wlb6GrnuF&zwnj;&#8203;JAh\\\\&quot;,\\\\&quot;seq\\\\&quot;:667&zwnj;&#8203;376,\\\\&quot;text\\\\&quot;:\\\\&quot;\\\\&zwnj;&#8203;\\\\u0393\\\\\\\\u03b5\\\\\\\\&zwnj;&#8203;u03b9\\\\\\\\u03b1\\\\&quot;}}]&zwnj;&#8203;}]}"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494253896, "post_id": 43849135, "comment_id": 74736448, "body": "Are you sure that&#39;s correct? Surely there are some quotes around it, and all those backslashes shouldn&#39;t be doubled up. Also, the <code>$</code> isn&#39;t escaped when it should be. How are you viewing the result of <code>print</code>?"}, {"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494254123, "post_id": 43849135, "comment_id": 74736619, "body": "i can&#39;t print it in a browser because this page is running as a callback when i am sending a text to the facebook page. So i am warning it out in the error_log"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494254567, "post_id": 43849135, "comment_id": 74736923, "body": "You can&#39;t do that. The logging is clearly adding a lot of junk that isn&#39;t in the original string. Can you open a file and write it to that instead, then dump the result|?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "edited": false, "score": 0, "creation_date": 1494252143, "post_id": 43849415, "comment_id": 74735289, "body": "I am using use utf8 and eq.The problem isn&#39;t the print but the comparison between a greek word like &quot;\u0393\u03b5\u03b9\u03b1&quot; and the text i take from the json."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1494255301, "last_edit_date": 1494255301, "creation_date": 1494251265, "answer_id": 43849415, "question_id": 43849135, "link": "https://stackoverflow.com/questions/43849135/perl-i-cant-decode-from-utf-8-to-greek-language/43849415#43849415", "title": "Perl i can&#39;t decode from utf-8 to greek language", "body": "<ul>\n<li><p>You need <code>use utf8</code> at the top of your file to say that its contents are UTF=8-encoded</p></li>\n<li><p>You need to compare the string with <code>eq</code>, not <code>=</code>, and you must add <code>use warnings 'all'</code> to warn you of errors like that</p></li>\n<li><p>To print UTF-8 data you should work with <em>characters</em> and set your output stream to use UTF-8 with <code>use open qw/ :std :encoding(utf8) /</code></p></li>\n<li><p>Perl's internal string encoding is based on UTF-8, so you won't see any difference between the output of UTF-encoded bytes and unencoded Perl characters</p></li>\n</ul>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>Here's a version of your code that provides the correct result. I have used what I think is the original data that the logging process has corrupted. If you can spot a difference between this and your own code then you have found the problem</p>\n\n<pre><code>use utf8;\nuse strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse JSON 'decode_json';\n\nmy $json_text = q&lt;{\"object\":\"page\",\"entry\":[{\"id\":\"434218046923911\",\"time\":1494253318253,\"messaging\":[{\"sender\":{\"id\":\"1184989524957707\"},\"recipient\":{\"id\":\"434218046923911\"},\"timestamp\":1494253317826,\"message\":{\"mid\":\"mid.$cAAGK6wcXaFtiGbV2wlb6GrnuFJAh\",\"seq\":667376,\"text\":\"\\u0393\\u03b5\\u03b9\\u03b1\"}}]}]}&gt;;\n\nmy $message_res = decode_json( $json_text );\n\nmy $message_text;\n\nfor ( $message_res-&gt;{entry}[0]{messaging}[0] ) {\n\n    $message_text = $_-&gt;{message}{text};\n}\n\nsay \"DONE-GREEK3\" if $message_text eq \"\u0393\u03b5\u03b9\u03b1\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>DONE-GREEK3\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7917848, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211609495649554/picture?type=large", "display_name": "Haris Tsantas", "link": "https://stackoverflow.com/users/7917848/haris-tsantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 43849415, "answer_count": 1, "score": -2, "last_activity_date": 1494257535, "creation_date": 1494250526, "last_edit_date": 1494252824, "question_id": 43849135, "link": "https://stackoverflow.com/questions/43849135/perl-i-cant-decode-from-utf-8-to-greek-language", "title": "Perl i can&#39;t decode from utf-8 to greek language", "body": "<p>I am taking a JSON document from the messenger platform and I want to compare the <code>$message_text</code> with Greek words. After I am decode it from UTF-8, the problem is that the decode isn't happening and <code>$message_text</code> has the same value (<code>\"\\xce\\x93\\xce\\xb5\\xce\\xb9\\xce\\xb1\"</code>) before and after the decode.This is my code now.</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse JSON;\nuse Data::Dumper;\nuse HTTP::Request::Common;\nuse LWP::UserAgent;\nuse CGI;\nuse HTTP::Daemon;\nuse HTTP::Status;\nuse Encode qw(decode encode);\nuse DBI;\nuse utf8;\nuse Encode;\n\n\nmy $message_payload;\nmy $message_sender_id;\n\n\nsub decode_json_reply{\n  #Decoding the message we recieved from the messenger\n  my $json_text = shift;\n\n  warn \"Callback_Messages_Testa1:\".$json_text;\n\n\n  my $message_res = JSON::decode_json($json_text);\n\n  my $message_text = $message_res-&gt;{entry}[0]-&gt;{messaging}[0]-&gt;{message}-&gt;{text};\n  $message_sender_id = $message_res-&gt;{entry}[0]-&gt;{messaging}[0]-&gt;{sender}-&gt;{id};\n  my $message_recipient_id = $message_res-&gt;{entry}[0]-&gt;{messaging}[0]-&gt;{recipient}-&gt;{id};\n  $message_payload = $message_res-&gt;{entry}[0]-&gt;{messaging}[0]-&gt;{postback}-&gt;{payload};\n  my $message_watermark = $message_res-&gt;{entry}[0]-&gt;{messaging}[0]-&gt;{delivery}-&gt;{watermark};\n\n\n  $message_text = Encode::decode_utf8($message_text);\n\n\n  if(\"\u0393\u03b5\u03b9\u03b1\" eq $message_text){\n    warn \"DONE-GREEK\";\n  }\n\n\n\n}\n</code></pre>\n\n<p>This the json i am getting back from messenger platform</p>\n\n<p><code>{\"object\":\"page\",\"entry\":[{\"id\":\"434218046923911\",\"time\":149\u200c\u200b4249616799,\"messagin\u200c\u200bg\":[{\"sender\":{\"id\":\u200c\u200b\"1184989524957707\"},\u200c\u200b\"recipient\":{\"id\":\"4\u200c\u200b34218046923911\"},\"ti\u200c\u200bmestamp\":14942496163\u200c\u200b87,\"message\":{\"mid\":\u200c\u200b\"mid.$cAAGK6wcXaFtiG\u200c\u200bXz8A1b6DJt38to5\",\"se\u200c\u200bq\":667346,\"text\":\"\\\\\u200c\u200bu0393\\\\u03b5\\\\u03b9\\\u200c\u200b\\u03b1\"}}]}]}</code> </p>\n\n<pre><code>&lt;%\n\nmy $query = $Request-&gt;BinaryRead();\n\n\ndecode_json_reply($query);\n\n\n%&gt;\n</code></pre>\n"}, {"tags": ["perl", "sftp"], "answers": [{"tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": false, "score": 3, "last_activity_date": 1615966239, "last_edit_date": 1615966239, "creation_date": 1494250735, "answer_id": 43849214, "question_id": 43848774, "link": "https://stackoverflow.com/questions/43848774/sftp-file-uploading-and-downloading-at-same-time/43849214#43849214", "title": "SFTP file uploading and downloading at same time", "body": "<p>It's not a question of the SFTP <em>client</em> you use, that's irrelevant. It's how the SFTP <em>server</em> handles the situation.</p>\n<p>Some SFTP servers may lock the file being uploaded, preventing you from accessing it, while it is still being uploaded. But most SFTP servers, particularly the common OpenSSH SFTP server, won't lock the file.</p>\n<p>There's no generic solution to this problem. Checking for timestamp or size changes may work for you, but it's hardly reliable.</p>\n<p>There are some common workarounds to the problem:</p>\n<ul>\n<li><p>Have the uploader upload &quot;done&quot; file once upload finishes. Make your program  wait for the &quot;done&quot; file to appear.</p>\n</li>\n<li><p>You can have dedicated &quot;upload&quot; folder and have the uploader (atomically) move the uploaded file to &quot;done&quot; folder. Make your program look to the &quot;done&quot; folder only.</p>\n</li>\n<li><p>Have a file naming convention for files being uploaded (&quot;.filepart&quot;) and have the uploader (atomically) rename the file after upload to its final name. Make your program ignore the &quot;.filepart&quot; files.</p>\n<p>See (my) article <a href=\"https://winscp.net/eng/docs/script_locking_files_while_uploading\" rel=\"nofollow noreferrer\">Locking files while uploading / Upload to temporary file name</a> for example of implementing this approach.</p>\n<p>Also, some FTP servers have this functionality built-in. For example ProFTPD with its <a href=\"http://www.proftpd.org/docs/directives/linked/config_ref_HiddenStores.html\" rel=\"nofollow noreferrer\"><code>HiddenStores</code> directive</a>.</p>\n</li>\n<li><p>A gross hack is to periodically check for file attributes (size and time) and consider the upload finished, if the attributes have not changed for some time interval.</p>\n</li>\n<li><p>You can also make use of the fact that some file formats have clear end-of-the-file marker (like XML or ZIP). So you know, when you download an incomplete file.</p>\n</li>\n</ul>\n<p>For details, see my answer to <a href=\"https://stackoverflow.com/q/26932341/850848\">SFTP file lock mechanism</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1494285581, "last_edit_date": 1494285581, "creation_date": 1494269994, "answer_id": 43855323, "question_id": 43848774, "link": "https://stackoverflow.com/questions/43848774/sftp-file-uploading-and-downloading-at-same-time/43855323#43855323", "title": "SFTP file uploading and downloading at same time", "body": "<p>You can check the size of the file.</p>\n\n<ol>\n<li>Connect to SFTP.</li>\n<li>Check file size.</li>\n<li>Sleep for 5/10 seconds.</li>\n<li>Check file size again.</li>\n<li>If size did not change, download the file, if the size changed do step 3.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 1, "last_activity_date": 1494314013, "last_edit_date": 1494314013, "creation_date": 1494312989, "answer_id": 43863109, "question_id": 43848774, "link": "https://stackoverflow.com/questions/43848774/sftp-file-uploading-and-downloading-at-same-time/43863109#43863109", "title": "SFTP file uploading and downloading at same time", "body": "<p>The easiest way to do that when the upload process is also under your control, is to upload files using temporal names (for instance, <code>foo-20170809.tgz.temp</code>) and once the upload finishes, rename then (<code>Net::SFTP::Foreign::put</code> method supports the <code>atomic</code> option which does just that). Then on the download side, filter out the files with names corresponding to temporal files.</p>\n\n<p>Anyway, <code>Net::SFTP::Foreign</code> <code>get</code> and <code>rget</code> methods can be instructed to resume a transfer passing the option <code>resume =&gt; 1</code>.</p>\n\n<p>Also, if you have full SSH access to the SFTP server, you could check if some other process is still writing to the file to be downloaded using <code>fuser</code> or some similar tool (though, note that even then, the file may be incomplete if for instance there is some network issue and the uploader needs to reconnect before resuming the transfer).</p>\n"}], "owner": {"reputation": 1263, "user_id": 696264, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c3fa04fd8c4245eac2d015a26674bc18?s=128&d=identicon&r=PG", "display_name": "Madhan", "link": "https://stackoverflow.com/users/696264/madhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1535, "favorite_count": 2, "answer_count": 3, "score": 3, "last_activity_date": 1615966239, "creation_date": 1494249522, "last_edit_date": 1494250594, "question_id": 43848774, "link": "https://stackoverflow.com/questions/43848774/sftp-file-uploading-and-downloading-at-same-time", "title": "SFTP file uploading and downloading at same time", "body": "<p>A cronjob runs every 3 hours to download a file using SFTP. The scheduled program is written in Perl and the module used is <code>Net::SFTP::Foreign</code>.</p>\n\n<p>Can the <code>Net::SFTP::Foreign</code> download files that are only partially uploaded using SFTP?</p>\n\n<p>If so, do we need to check the SFTP file modified date to check copy process completion?</p>\n\n<p>Suppose a new file is uploading by someone in SFTP and he file upload/copy is in progress. If a download is attempted at the same time, do I need to code for the possibility of fetching only part of a file?</p>\n"}, {"tags": ["bash", "perl", "shell"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 6, "creation_date": 1494246164, "post_id": 43847526, "comment_id": 74730882, "body": "Show us your code. What have you tried? What problems are you having?"}, {"owner": {"reputation": 2303, "user_id": 1716574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/dcxFb.jpg?s=128&g=1", "display_name": "Picard", "link": "https://stackoverflow.com/users/1716574/picard"}, "edited": false, "score": 1, "creation_date": 1494246853, "post_id": 43847526, "comment_id": 74731418, "body": "Welcome to StackOverflow. This is not a free coding service. Please take a <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494247096, "post_id": 43847526, "comment_id": 74731599, "body": "<i>&quot;I am pasting only one row from logfile&quot;</i> But you have posted four lines of text, so it is impossible to guess what the original data looks like."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 2303, "user_id": 1716574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/dcxFb.jpg?s=128&g=1", "display_name": "Picard", "link": "https://stackoverflow.com/users/1716574/picard"}, "edited": false, "score": 3, "creation_date": 1494247151, "post_id": 43847526, "comment_id": 74731635, "body": "@Picard Everyone says that, but as you can see by the multiple answers below, as long as people are desperate for points, it clearly is."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1494250258, "post_id": 43847526, "comment_id": 74733969, "body": "@123: OP continues the same thing without tried anything no answers will be posted. I am damn sure."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494268565, "post_id": 43847696, "comment_id": 74745517, "body": "<code>([^&lt;&gt;]*)</code> is preferable to <code>(.*)</code> in case there are two or more such elements in the XML."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 1, "last_activity_date": 1494305538, "last_edit_date": 1494305538, "creation_date": 1494246466, "answer_id": 43847696, "question_id": 43847526, "link": "https://stackoverflow.com/questions/43847526/i-have-a-log-file-with-different-columns-and-from-that-i-need-only-two-columns/43847696#43847696", "title": "I have a log file with different columns and from that i need only two columns", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $data = '[2017-05-02 13:02:25,986] [AJPRequestHandler-HTTPThreadGroup-10239] SID0003457|10.22.165.22|13|16|FAILED|500||&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;S:Envelope xmlns:S=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;S:Header&gt;&lt;ns1:SessionType xmlns:ns1=\"http://tough.example.com/webservices\"&gt;STATELESS&lt;/ns1:SessionType&gt;&lt;ns2:UsernameToken xmlns:ns2=\"http://tough.example.com/webservices\"&gt;ocore-intg_w\nw@example.com&lt;/ns2:UsernameToken&gt;&lt;ns3:PasswordText xmlns:ns3=\"http://tough.example.com/webservices\"&gt;UdontsoiuN&lt;/ns3:PasswordText&gt;&lt;/S:Header&gt;&lt;S:Body&gt;&lt;getExternalPortalUserElement xmlns=\"http://ws.web.\ntough1.tough.example.com/\"&gt;&lt;emailAddress&gt;park.phannon23@example.com&lt;/emailAddress&gt;&lt;/getExternalPortalUserElement&gt;&lt;/S:Body&gt;&lt;/S:Envelope&gt;|{http://ws.web.tough1.tough.example.com/}getExternalPortalUserElement|&lt;n\ns1:Header xmlns:ns1=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;ns1:SessionType xmlns:ns1=\"http://tough.example.com/webservices\"&gt;STATELESS&lt;/ns1:SessionType&gt;&lt;ns2:UsernameToken xmlns:ns2=\"http://tough.example.com/webservices\"&gt;ocore-intg_ww@example.com&lt;/ns2:UsernameToken&gt;&lt;ns3:PasswordText xmlns:ns3=\"http://tough.example.com/webservices\"&gt;UiojdfdoiNN&lt;/ns3:PasswordText&gt;&lt;/ns1:Header&gt;|0|620|null';\n\nif ( $data =~ m!^\\[(\\d{4}-\\d{2}-\\d{2})\\s+(\\d{2}:\\d{2}:\\d{2}).*&lt;emailAddress&gt;([^&lt;&gt;]*)&lt;\\/emailAddress&gt;!gs ){\n    print \"$1 $2 $3\";   \n}\n</code></pre>\n\n<p>Output: <code>2017-05-02 13:02:25 park.phannon23@example.com</code></p>\n\n<p><a href=\"http://ideone.com/x6i61q\" rel=\"nofollow noreferrer\">Working demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494247174, "post_id": 43847697, "comment_id": 74731652, "body": "How is that useful when the OP asked for <code>2017-05-02 13:02:25 park.phannon23@example.com</code>?"}, {"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494247463, "post_id": 43847697, "comment_id": 74731871, "body": "@Borodin The question has changed, I didn&#39;t just invent some input did I?  Have a think about it!!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494250135, "post_id": 43847697, "comment_id": 74733871, "body": "Version one of the question requires a result of <code>2017-05-02 13:02:25 park.phannon23@example.com</code>"}], "tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1494247318, "last_edit_date": 1494247318, "creation_date": 1494246472, "answer_id": 43847697, "question_id": 43847526, "link": "https://stackoverflow.com/questions/43847526/i-have-a-log-file-with-different-columns-and-from-that-i-need-only-two-columns/43847697#43847697", "title": "I have a log file with different columns and from that i need only two columns", "body": "<p>Use perl as follows</p>\n\n<pre><code>$ perl -ne '/\\[(.*?)\\].*\\s+(\\S+)\\|\\{/;print \"$1  $2\\n\";' file1\n2017-05-02 13:02:25,986  w@example.comUdontsoiuNpark.phannon23@example.com\n</code></pre>\n\n<p>Now with the edited example</p>\n\n<pre><code>perl -e 'undef $/;$content=&lt;ARGV&gt;;while($content=~/\\[(.*?)\\].*?&lt;emailAddress&gt;(.*)&lt;\\/emailAddress&gt;/sg){print \"$1  $2\\n\";}' file1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1494246971, "creation_date": 1494246971, "answer_id": 43847858, "question_id": 43847526, "link": "https://stackoverflow.com/questions/43847526/i-have-a-log-file-with-different-columns-and-from-that-i-need-only-two-columns/43847858#43847858", "title": "I have a log file with different columns and from that i need only two columns", "body": "<p>Yet another way to get the expected output:</p>\n\n<pre><code>my $date_email = \"\";\nwhile(&lt;DATA&gt;)\n{\n    my $line = $_;\n    $date_email .= \"date = $1\\t\" if($line=~m/^\\[([^\\[\\]]*)\\]/m);\n    $date_email .= \"email = $1\\n\" if($line=~m/&lt;emailAddress&gt;([^&lt;&gt;]*)&lt;\\/emailAddress&gt;/);\n\n}\n\nprint $date_email;\n\n__DATA__\n[2017-05-02 13:02:25,986] [AJPRequestHandler-HTTPThreadGroup-10239] SID0003457|10.22.165.22|13|16|FAILED|500||&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;S:Envelope xmlns:S=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;S:Header&gt;&lt;ns1:SessionType xmlns:ns1=\"http://tough.example.com/webservices\"&gt;STATELESS&lt;/ns1:SessionType&gt;&lt;ns2:UsernameToken xmlns:ns2=\"http://tough.example.com/webservices\"&gt;ocore-intg_ww@example.com&lt;/ns2:UsernameToken&gt;&lt;ns3:PasswordText xmlns:ns3=\"http://tough.example.com/webservices\"&gt;UdontsoiuN&lt;/ns3:PasswordText&gt;&lt;/S:Header&gt;&lt;S:Body&gt;&lt;getExternalPortalUserElement xmlns=\"http://ws.web.tough1.tough.example.com/\"&gt;&lt;emailAddress&gt;park.phannon23@example.com&lt;/emailAddress&gt;&lt;/getExternalPortalUserElement&gt;&lt;/S:Body&gt;&lt;/S:Envelope&gt;|{http://ws.web.tough1.tough.example.com/}getExternalPortalUserElement|&lt;ns1:Header xmlns:ns1=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;ns1:SessionType xmlns:ns1=\"http://tough.example.com/webservices\"&gt;STATELESS&lt;/ns1:SessionType&gt;&lt;ns2:UsernameToken xmlns:ns2=\"http://tough.example.com/webservices\"&gt;ocore-intg_ww@example.com&lt;/ns2:UsernameToken&gt;&lt;ns3:PasswordText xmlns:ns3=\"http://tough.example.com/webservices\"&gt;UiojdfdoiNN&lt;/ns3:PasswordText&gt;&lt;/ns1:Header&gt;|0|620|null\n</code></pre>\n\n<p>Output:</p>\n\n<p><code>date = 2017-05-02 13:02:25,986  email = park.phannon23@example.com</code></p>\n"}], "owner": {"reputation": 1, "user_id": 7980488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ade361dedb4e361460062da1ef6cc21?s=128&d=identicon&r=PG&f=1", "display_name": "auto", "link": "https://stackoverflow.com/users/7980488/auto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1494305538, "creation_date": 1494245971, "last_edit_date": 1494248366, "question_id": 43847526, "link": "https://stackoverflow.com/questions/43847526/i-have-a-log-file-with-different-columns-and-from-that-i-need-only-two-columns", "title": "I have a log file with different columns and from that i need only two columns", "body": "<p>I have a big log file from that I need only two columns. Below is a single line from the log file:</p>\n\n<p><code>[2017-05-02 13:02:25,986] [AJPRequestHandler-HTTPThreadGroup-10239] SID0003457|10.22.165.22|13|16|FAILED|500||&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;S:Envelope xmlns:S=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;S:Header&gt;&lt;ns1:SessionType xmlns:ns1=\"http://tough.example.com/webservices\"&gt;STATELESS&lt;/ns1:SessionType&gt;&lt;ns2:UsernameToken xmlns:ns2=\"http://tough.example.com/webservices\"&gt;ocore-intg_w\nw@example.com&lt;/ns2:UsernameToken&gt;&lt;ns3:PasswordText xmlns:ns3=\"http://tough.example.com/webservices\"&gt;UdontsoiuN&lt;/ns3:PasswordText&gt;&lt;/S:Header&gt;&lt;S:Body&gt;&lt;getExternalPortalUserElement xmlns=\"http://ws.web.\ntough1.tough.example.com/\"&gt;&lt;emailAddress&gt;park.phannon23@example.com&lt;/emailAddress&gt;&lt;/getExternalPortalUserElement&gt;&lt;/S:Body&gt;&lt;/S:Envelope&gt;|{http://ws.web.tough1.tough.example.com/}getExternalPortalUserElement|&lt;n\ns1:Header xmlns:ns1=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;ns1:SessionType xmlns:ns1=\"http://tough.example.com/webservices\"&gt;STATELESS&lt;/ns1:SessionType&gt;&lt;ns2:UsernameToken xmlns:ns2=\"http://tough.example.com/webservices\"&gt;ocore-intg_ww@example.com&lt;/ns2:UsernameToken&gt;&lt;ns3:PasswordText xmlns:ns3=\"http://tough.example.com/webservices\"&gt;UiojdfdoiNN&lt;/ns3:PasswordText&gt;&lt;/ns1:Header&gt;|0|620|null</code></p>\n\n<p>I just need the output in a separate file with date from the log file which is first column and email address, some thing like this</p>\n\n<p><code>2017-05-02 13:02:25 park.phannon23@example.com</code></p>\n\n<p>Can somebody help, I went through multiple sites but unable to format like above.</p>\n"}, {"tags": ["multithreading", "perl", "ping"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 4, "creation_date": 1494241957, "post_id": 43846086, "comment_id": 74727926, "body": "Of course some code would be usefull in this situation"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494248891, "post_id": 43846086, "comment_id": 74732866, "body": "As a first attempt, I would use <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a> with 64 children (since your programs is going to mostly twiddle its thumbs). Try half and double to see if there is improvement. I know starvation is possible, but see if just chopping work equally does OK."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494270900, "post_id": 43846086, "comment_id": 74746796, "body": "<i>&quot;I am not interested in installing more custom modules&quot;</i> It sounds like you&#39;re completely exhausted after installing <code>Net::Ping</code>. It seems strange to reject the idea of another Perl module, even if it would enable you to achieve your goal."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1494299873, "post_id": 43846086, "comment_id": 74756363, "body": "See <a href=\"https://nmap.org/book/man-performance.html\" rel=\"nofollow noreferrer\">nmap.org/book/man-performance.html</a> for suggestions on speeding up nmap (starting with making sure you have the latest version)"}, {"owner": {"reputation": 3, "user_id": 4138979, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_A1Qcw3-euM/AAAAAAAAAAI/AAAAAAAACpQ/LFo1zoIITwg/photo.jpg?sz=128", "display_name": "Kiran", "link": "https://stackoverflow.com/users/4138979/kiran"}, "edited": false, "score": 0, "creation_date": 1494483540, "post_id": 43846086, "comment_id": 74848887, "body": "Thanks a lot for the link and other suggestions. My issue with installing more perl modules is i am using the perl that comes packaged with &#39;Oracle&#39;. (This because as i need Oracle DBD and installing it separately seems a big pain)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4138979, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_A1Qcw3-euM/AAAAAAAAAAI/AAAAAAAACpQ/LFo1zoIITwg/photo.jpg?sz=128", "display_name": "Kiran", "link": "https://stackoverflow.com/users/4138979/kiran"}, "edited": false, "score": 0, "creation_date": 1494493435, "post_id": 43846703, "comment_id": 74855225, "body": "Thanks for the sample code. I got working code (as posted in Update1 in question) based on your sample."}, {"owner": {"reputation": 3, "user_id": 4138979, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_A1Qcw3-euM/AAAAAAAAAAI/AAAAAAAACpQ/LFo1zoIITwg/photo.jpg?sz=128", "display_name": "Kiran", "link": "https://stackoverflow.com/users/4138979/kiran"}, "edited": false, "score": 0, "creation_date": 1494493792, "post_id": 43846703, "comment_id": 74855485, "body": "For Oracle::DBD module, i used Perl packaged with Oracle &amp; it comes with 2.12 version of Thread::Queue.This version of Thread::Queue is not having &#39;end&#39; sub-routine. Therefore i queued &#39;undef&#39; and used it as a marker to end. Not sure if this is the correct way or not.                                                                         Anyhow as you mentioned, the performance is not matching that of &#39;nmap&#39;. So i will end up using &#39;nmap&#39; only, but in the process got a bit understanding of Perl Threads. Thanks"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 3, "user_id": 4138979, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_A1Qcw3-euM/AAAAAAAAAAI/AAAAAAAACpQ/LFo1zoIITwg/photo.jpg?sz=128", "display_name": "Kiran", "link": "https://stackoverflow.com/users/4138979/kiran"}, "edited": false, "score": 1, "creation_date": 1494494011, "post_id": 43846703, "comment_id": 74855640, "body": "If you queue undef, you need to queue at least one undef per thread. But probably should just update Thread::Queue instead."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1494243532, "last_edit_date": 1495535486, "creation_date": 1494243532, "answer_id": 43846703, "question_id": 43846086, "link": "https://stackoverflow.com/questions/43846086/perl-script-to-ping-lots-of-hosts/43846703#43846703", "title": "Perl Script to Ping lots of hosts", "body": "<p>You can indeed use multithreading to speed things up further. This is a perfect scenario for using a worker-queue:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse threads;\n\nuse Thread::Queue;\n\nmy $nthreads = 5;\n\nmy $process_q = Thread::Queue-&gt;new();\nmy $failed_q  = Thread::Queue-&gt;new();\n\n#this is a subroutine, but that runs 'as a thread'.\n#when it starts, it inherits the program state 'as is'. E.g.\n#the variable declarations above all apply - but changes to\n#values within the program are 'thread local' unless the\n#variable is defined as 'shared'.\n#Behind the scenes - Thread::Queue are 'shared' arrays.\n\nsub worker {\n    #NB - this will sit a loop indefinitely, until you close the queue.\n    #using $process_q -&gt; end\n    #we do this once we've queued all the things we want to process\n    #and the sub completes and exits neatly.\n    #however if you _don't_ end it, this will sit waiting forever.\n    while ( my $server = $process_q-&gt;dequeue() ) {\n        chomp($server);\n        print threads-&gt;self()-&gt;tid() . \": pinging $server\\n\";\n        my $result = `/bin/ping -c 1 $server`;\n        if ($?) { $failed_q-&gt;enqueue($server) }\n        print $result;\n    }\n}\n\n#insert tasks into thread queue.\nopen( my $input_fh, \"&lt;\", \"server_list\" ) or die $!;\n$process_q-&gt;enqueue(&lt;$input_fh&gt;);\nclose($input_fh);\n\n#we 'end' process_q  - when we do, no more items may be inserted,\n#and 'dequeue' returns 'undefined' when the queue is emptied.\n#this means our worker threads (in their 'while' loop) will then exit.\n$process_q-&gt;end();\n\n#start some threads\nfor ( 1 .. $nthreads ) {\n    threads-&gt;create( \\&amp;worker );\n}\n\n#Wait for threads to all finish processing.\nforeach my $thr ( threads-&gt;list() ) {\n    $thr-&gt;join();\n}\n\n#collate results. ('synchronise' operation)\nwhile ( my $server = $failed_q-&gt;dequeue_nb() ) {\n    print \"$server failed to ping\\n\";\n}\n</code></pre>\n\n<p>(note: My code, from another answer I gave: <a href=\"https://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons\">Perl daemonize with child daemons</a>)</p>\n\n<p>However - I don't think you'll find much that's faster than <code>nmap</code> as that already does parallelism in a way that's quite well well suited to network scanning scenarios. </p>\n"}], "owner": {"reputation": 3, "user_id": 4138979, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_A1Qcw3-euM/AAAAAAAAAAI/AAAAAAAACpQ/LFo1zoIITwg/photo.jpg?sz=128", "display_name": "Kiran", "link": "https://stackoverflow.com/users/4138979/kiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1174, "favorite_count": 0, "accepted_answer_id": 43846703, "answer_count": 1, "score": -2, "last_activity_date": 1494493369, "creation_date": 1494241647, "last_edit_date": 1494493369, "question_id": 43846086, "link": "https://stackoverflow.com/questions/43846086/perl-script-to-ping-lots-of-hosts", "title": "Perl Script to Ping lots of hosts", "body": "<p>I have lots of hosts (around 40000+) that i need to test for ping using a perl script. There's a requirement to complete this verification before 3-4 minutes and i need to write/dump the ping results/output to a flat file. Another integration will be reading this output (may be tail) and generate some alerts.</p>\n\n<p>I will be running this perl script on a machine with 16 CPU's (1 Socket, 8 Core's per Socket, and 2 Threads per Core). \nI have perl 5, version 14, subversion 1 (v5.14.1)\nI have used 'nmap' utility and i have timing like below:</p>\n\n<p>Nmap done: 50233 IP addresses (39313 hosts up) scanned in 356.54 seconds ~ 6 Minutes</p>\n\n<p>Nmap done: 79195 IP addresses (28178 hosts up) scanned in 641.93 seconds ~ 11 Minutes</p>\n\n<p>Can I use multithreaded <code>perl</code> to speed up further? I have the <a href=\"https://metacpan.org/pod/Net::Ping\" rel=\"nofollow noreferrer\">Net::Ping</a> module installed, but I am not interested in installing more custom modules.</p>\n\n<p>Update##1</p>\n\n<p>Based on 'Sobrique's' answer and sample code, I have the code like below that's working. Thanks a lot for sample as it helped me to know about Thread::Queue module in perl.</p>\n\n<pre><code>#!/usr/bin/perl\n\n# Run under Oracle Perl, for DBI.\n\n    BEGIN {\n        my $ORACLE_HOME = \"/opt/oracle/app/oracle/product/12.1.0/client_1\";\n        $ENV{ORACLE_HOME}=$ORACLE_HOME;\n\n        die \"ORACLE_HOME not set\\n\" unless $ENV{ORACLE_HOME};\n        unless ($ENV{OrAcLePeRl}) {\n        $ENV{OrAcLePeRl} = \"$ENV{ORACLE_HOME}/perl\";\n        $ENV{PERL5LIB} = \n       \"$ENV{PERL5LIB}:$ENV{OrAcLePeRl}/lib:$ENV{OrAcLePeRl}/lib/site_perl\";\n        $ENV{LD_LIBRARY_PATH} = \n      \"$ENV{LD_LIBRARY_PATH}:$ENV{ORACLE_HOME}/lib32:$ENV{ORACLE_HOME}/lib\";\n        exec \"$ENV{OrAcLePeRl}/bin/perl\", $0, @ARGV;\n    }\n  }\n\nuse strict;\nuse warnings;\nuse threads;\nuse Thread::Queue;\n\nmy $process_q = Thread::Queue-&gt;new();\n\n#insert tasks into thread queue.\nopen( my $input_fh, \"&lt;\", \"server_list\" ) or die $!;\n$process_q-&gt;enqueue(&lt;$input_fh&gt;);\nclose($input_fh);\n\nmy $OutputFile = \"PingOutput.mout\";\nopen (OUTPUT_FILEH, \"&gt;&gt;$OutputFile\") or die \"Can't Open $OutputFile : $!\";\n\n  # Worker threads\n  my $thread_limit = 25;\n\n  # send markers.\n  $process_q-&gt;enqueue(undef) for 1..$thread_limit;\n\n   my @thr = map {\n      threads-&gt;create(sub {\n        while (defined (my $server = $process_q-&gt;dequeue())) {\n                       chomp($server);\n                       print OUTPUT_FILEH threads-&gt;self()-&gt;tid() . \":pinging$server\\n\";\n                       my $result = `/usr/bin/ping -c 1 $server`;\n                       print OUTPUT_FILEH $result;\n        }\n    });\n} 1..$thread_limit;\n\n# terminate.\n$_-&gt;join() for @thr;\n</code></pre>\n"}, {"tags": ["perl", "terminal", "signals", "kill-process"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1494261142, "post_id": 43845000, "comment_id": 74741244, "body": "By the way, <code>kill INT =&gt; -$$</code> is a nicer way of writing <code>kill -2, $$</code>."}], "answers": [{"comments": [{"owner": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494246712, "post_id": 43847202, "comment_id": 74731302, "body": "Thank for answer, but this still doesn&#39;t explain difference between <code>kill -2, $$</code> and <code>qx&#47;kill -2 $$&#47;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1494252250, "post_id": 43847202, "comment_id": 74735365, "body": "pretty sure this&#39;ll be down to how <code>$$</code> is being expanded."}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 0, "creation_date": 1494252504, "post_id": 43847202, "comment_id": 74735538, "body": "<code>qx&#47;kill -2 $$&#47;</code> calls OS kill cmd, but <code>kill -2, $$</code> is pure perl code."}, {"owner": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494253945, "post_id": 43847202, "comment_id": 74736487, "body": "sure, but why killing process group by perl <code>kill</code> doesn&#39;t work as OS kill?"}], "tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": 0, "last_activity_date": 1494245052, "creation_date": 1494245052, "answer_id": 43847202, "question_id": 43845000, "link": "https://stackoverflow.com/questions/43845000/perl-fails-to-kill-self-pid-when-running-from-bash-script/43847202#43847202", "title": "Perl fails to kill self pid when running from bash script", "body": "<p>It works fine in this way:</p>\n\n<p><code>perl -E 'say \"kill \"INT\", $$; warn HERE, $/'</code></p>\n\n<p><code>perl -E 'say \"kill 2, $$; warn HERE, $/'</code></p>\n\n<p><a href=\"http://perldoc.perl.org/functions/kill.html\" rel=\"nofollow noreferrer\">kill</a> man page says:</p>\n\n<blockquote>\n  <p>A negative signal name is the same as a negative signal number,\n  killing process groups instead of processes. For example, kill\n  '-KILL', $pgrp and kill -9, $pgrp will send SIGKILL to the entire\n  process group specified. That means you usually want to use positive\n  not negative signals.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494780767, "post_id": 43852807, "comment_id": 74962947, "body": "I&#39;m disappointed you picked the &quot;answer&quot; that doesn&#39;t even answer your question (why the two shells behave differently)."}, {"owner": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494795263, "post_id": 43852807, "comment_id": 74967328, "body": "Sorry to hear you&#39;re disappointed, didn&#39;t mean to.. Both explanations look pretty equal for me, seriously. Am I wrong? Why do you think the picked one doesn&#39;t answer my question?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494796154, "post_id": 43852807, "comment_id": 74967551, "body": "Both explanations? I only see one. Both of our answers explain why how process group works, but that&#39;s not what you asked why the two shells behave differently, and they other answer doesn&#39;t explain that at all. Only mine answers that (the concept of applications). Did I miss something? /// In fact, the other answer claims the two shells could behave identically (by saying the process group creation by the non-interactive shell is only <i>likely</i>), but that&#39;s wrong!"}, {"owner": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494797329, "post_id": 43852807, "comment_id": 74967897, "body": "I think a <i>likely</i> word in another answer refers to <b>non-existent process group</b>, and doesn&#39;t mean <b>probably a new pr group is created</b>. IMHO the sentence just says perl sends <code>SIGTERM</code> to foreign (and probably non-existent) pr group.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494798752, "post_id": 43852807, "comment_id": 74968223, "body": "Likely does indeed refer to non-existent. If it&#39;s likely it&#39;s non-existent, that means it&#39;s likely it didn&#39;t get created, which means there&#39;s a possibility it could get created, but that&#39;s completely wrong. Non-interactive shells don&#39;t create the process group, and as I explained, the reason for that is because the shell sees <code>perl</code> as part of the same application."}, {"owner": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494799071, "post_id": 43852807, "comment_id": 74968297, "body": "<i>which means there&#39;s a possibility it could get created</i> - RIGHT, it could already exist as ANOTHER application, that&#39;s the meaning of a sentence."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494800421, "post_id": 43852807, "comment_id": 74968589, "body": "No, the process group <code>$$</code> can&#39;t possibly be created by a non-interactive shell. The process doesn&#39;t exist before the shell creates it, so the only way <code>$$</code> can be a process group is if the shell makes it one. It&#39;s not just likely that it&#39;s not a process group, it&#39;s guaranteed. The non-interactive shell will <i>always</i> behave differently than the interactive shell (for the reasons I explained); it&#39;s not just likely. (&quot;[The process group <code>$$</code>] could already exist as ANOTHER application&quot; makes no sense.)"}, {"owner": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "edited": false, "score": 0, "creation_date": 1494800737, "post_id": 43852807, "comment_id": 74968660, "body": "Oops, now I understand) Thanks for extra explanation. You probably should add that as comment to &#39;another&#39; answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1494800841, "last_edit_date": 1494800841, "creation_date": 1494261104, "answer_id": 43852807, "question_id": 43845000, "link": "https://stackoverflow.com/questions/43845000/perl-fails-to-kill-self-pid-when-running-from-bash-script/43852807#43852807", "title": "Perl fails to kill self pid when running from bash script", "body": "<p>First of all,</p>\n\n<pre><code> kill -2, $$\n</code></pre>\n\n<p>is better written as</p>\n\n<pre><code> kill 2, -$$\n</code></pre>\n\n<p>An even better alternative is</p>\n\n<pre><code> kill INT =&gt; -$$\n</code></pre>\n\n<p>These send <code>SIGINT</code> to the specified process group.</p>\n\n<hr>\n\n<p>Your main question appears to be why the two shells behave differently. This section explains that.</p>\n\n<p>The process group represents an application. </p>\n\n<p>When you launch a program from an interactive shell, it's not part of a larger application, so the shell creates a new process group for the program.</p>\n\n<p>However, processes created by a script (i.e. a non-interactive shell) are part of the same application as the script itself, so the shell doesn't create a new process group for them.</p>\n\n<p>You can visualize this using the following:</p>\n\n<ul>\n<li><p><code>sh -i &lt;&lt;&lt; 'perl -e '\\''system ps =&gt; -o =&gt; \"pid,ppid,pgrp,comm\"'\\'''</code> outputs the following:</p>\n\n<pre><code>$ perl -e 'system ps =&gt; -o =&gt; \"pid,ppid,pgrp,comm\"'\n  PID  PPID  PGRP COMMAND\n 8179  8171  8179 bash\n14654  8179 14654 sh\n14655 14654 14655 perl\n14656 14655 14655 ps\n\n$ exit\n</code></pre>\n\n<p>In interactive mode, <code>perl</code> is at the head of <code>perl</code> and <code>ps</code>'s program group.</p></li>\n<li><p><code>sh &lt;&lt;&lt; 'perl -e '\\''system ps =&gt; -o =&gt; \"pid,ppid,pgrp,comm\"'\\'''</code> outputs the following:</p>\n\n<pre><code>  PID  PPID  PGRP COMMAND\n 8179  8171  8179 bash\n14584  8179 14584 sh\n14585 14584 14584 perl\n14586 14585 14584 ps\n</code></pre>\n\n<p>In non-interactive mode, <code>sh</code> is at the head of <code>perl</code> and <code>ps</code>'s program group.</p></li>\n</ul>\n\n<hr>\n\n<p>Your failures are the result of not sending the signal to the head of the process group (i.e. the application). Had you checked, the error <code>kill</code> reported was <code>ESRCH</code> (\"No such process\").</p>\n\n<blockquote>\n  <p><code>ESRCH</code> The pid or process group does not exist. [...]</p>\n</blockquote>\n\n<p>To kill the current process's process group, replace the improper</p>\n\n<pre><code>kill INT =&gt; -$$           # XXX\n</code></pre>\n\n<p>with</p>\n\n<pre><code>kill INT =&gt; -getpgrp()    # Kill the application\n</code></pre>\n\n<hr>\n\n<p>You can make your <code>perl</code> the head of its own process group by simply calling the following:</p>\n\n<pre><code>setpgrp();\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ sh &lt;&lt;&lt; 'perl -e '\\''system ps =&gt; ( -o =&gt; \"pid,ppid,pgrp,comm\" )'\\'''\n  PID  PPID  PGRP COMMAND\n 8179  8171  8179 bash\n16325  8179 16325 sh\n16326 16325 16325 perl\n16327 16326 16325 ps\n\n$ sh &lt;&lt;&lt; 'perl -e '\\''setpgrp(); system ps =&gt; ( -o =&gt; \"pid,ppid,pgrp,comm\" )'\\'''\n  PID  PPID  PGRP COMMAND\n 8179  8171  8179 bash\n16349  8179 16349 sh\n16350 16349 16350 perl\n16351 16350 16350 ps\n</code></pre>\n\n<p>That's not something you normally want to do.</p>\n\n<hr>\n\n<p>Finally, the Perl code</p>\n\n<pre><code>kill INT =&gt; -$pgrp\n</code></pre>\n\n<p>is equivalent to the following call of the <code>kill</code> command-line utility:</p>\n\n<pre><code>kill -s INT -$pgrp\nkill -INT -$pgrp\nkill -2 -$pgrp\n</code></pre>\n\n<p>You were missing <code>-</code> in your <code>qx//</code> program, so it was sending SIGINT to the identified process rather than the identified program group.</p>\n"}, {"tags": [], "owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "is_accepted": false, "score": 4, "last_activity_date": 1494340482, "last_edit_date": 1494340482, "creation_date": 1494263845, "answer_id": 43853619, "question_id": 43845000, "link": "https://stackoverflow.com/questions/43845000/perl-fails-to-kill-self-pid-when-running-from-bash-script/43853619#43853619", "title": "Perl fails to kill self pid when running from bash script", "body": "<p>From your <strong>interactive terminal</strong>, the perl process kills the process group of which it is a part.  (The shell runs perl in its own process group.)  The shell reports this unusual termination in <code>$?</code>:</p>\n\n<pre>\nt0   interactive shell (pid=123, pgrp=123)\n       |\nt1     +------> perl -e (pid=456, pgrp=456, parent=123)\n       |          |\nt2   (wait)      kill(-2, 456) (in perl, same as kill pgrp 456 w/ SIGINT)\n       |          |\nt3   (wait)     *SIGINT*\n       |\nt4   report $?\n</pre>\n\n<p>From your <strong>shell script</strong>, the perl process kills a (likely) non-existent process group and then exits successfully.  Your interactive shell makes a new process group in which to run your shell script, and that script then runs perl as a child in the same process group.</p>\n\n<pre>\nt0   shell (pid=123, pgrp=123)\n       |\nt1     +-------> shell:1.sh (pid=456, pgrp=456, parent=123)\n       |          |\nt2   (wait)       +-------------> perl -e (pid=789, pgrp=456, parent=456)\n       |          |                |\nt3   (wait)     (wait)            kill pgrp 789 with SIGINT (error: no such pgrp)\n       |          |                |\nt4   (wait)     (wait)            exit success\n       |          |\nt5   (wait)     exit success\n       |\nt6   report $?\n</pre>\n\n<p>In your <strong>backticked (<code>qx//</code>) example</strong>, your interactive shell starts a shell process with a new process group.  (Not that it matters here, but that process runs perl in its same process group.)  Perl then runs as its own child the system <code>kill</code> command, <em>the semantics of which differ from that of the perl <code>kill</code></em>.  This grandchild command sends a SIGINT to the perl PID directly, rather than a SIGINT to a process group.  Perl terminates, and that exit code is conveyed as the script's exit code, since it was the last command in the script.</p>\n\n<p>This diagram is a little busier than the previous:</p>\n\n<pre>\nt0   shell (pid=123, pgrp=123)\n       |\nt1     +-------> shell:2.sh (pid=456, pgrp=456, parent=123)\n       |          |\nt2   (wait)       +----------> perl -e (pid=789, pgrp=456, parent=456)\n       |          |             |\nt3   (wait)     (wait)          +---------> /bin/kill SIGINT 789\n       |          |             |             |\nt4   (wait)     (wait)         *SIGINT*      exit success\n       |          |\nt5   (wait)     return $?\n       |\nt6   report $?\n</pre>\n"}], "owner": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 43852807, "answer_count": 3, "score": 4, "last_activity_date": 1494800841, "creation_date": 1494238346, "last_edit_date": 1494425956, "question_id": 43845000, "link": "https://stackoverflow.com/questions/43845000/perl-fails-to-kill-self-pid-when-running-from-bash-script", "title": "Perl fails to kill self pid when running from bash script", "body": "<p>Following code behaves as expected when running <strong>from terminal</strong>:</p>\n\n<pre><code>perl -e 'kill -2, $$; warn HERE, $/'\n</code></pre>\n\n<p>It sends itself <code>SIGINT</code> and dies before reaching \"HERE\":</p>\n\n<pre><code>~# perl -e 'kill -2, $$; warn HERE, $/'\n\n~# echo $?\n130\n~#\n</code></pre>\n\n<p>The problem: same code fails to kill self PID when running <strong>from shell script</strong>:</p>\n\n<pre><code>~# cat 1.sh\nperl -e 'kill -2, $$; warn HERE, $/'\n~#\n~# sh 1.sh\nHERE\n~#\n~# echo $?\n0\n~#\n</code></pre>\n\n<p>On the other hand, replacing perl's <code>kill</code> by a shell's one works OK:</p>\n\n<pre><code>~# cat 2.sh\nperl -e 'qx/kill -2 $$/; warn HERE, $/'\n~#\n~# sh 2.sh\n~#\n~# echo $?\n130\n~#\n</code></pre>\n\n<p>Not really understand what is happening here, please help..</p>\n"}, {"tags": ["regex", "perl", "split"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 5, "creation_date": 1494236390, "post_id": 43844337, "comment_id": 74724525, "body": "A bit more sample data might be helpful. OR a runnable snippet."}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1494239015, "post_id": 43844337, "comment_id": 74726203, "body": "I&#39;ve added a runnable snippet above. :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1494239919, "post_id": 43844337, "comment_id": 74726775, "body": "Contributed an example with some comparative tests. (e.g. using <code>Benchmark</code>)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494240220, "post_id": 43844337, "comment_id": 74726939, "body": "If you really need the extra speed, you may want to consider writing <a href=\"https://www.nu42.com/2013/02/splitting-long-lines-is-slow.html\" rel=\"nofollow noreferrer\">primitive purpose built split in XS</a>."}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1494241718, "post_id": 43844652, "comment_id": 74727797, "body": "&quot;<i>because your limiting factor is disk IO, not CPU.</i>&quot; Probably not. On my really old system with a slow SSD, it takes 0.7 seconds to read an chomp every line of a 100,000 line file with 50 such fields on each line."}, {"owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "edited": false, "score": 2, "creation_date": 1494256775, "post_id": 43844652, "comment_id": 74738474, "body": "compound() is actually the slowest of the bunch but comes out fastest in your example because it&#39;s run against an already altered $line (it&#39;s changed in re_replace_then_split() )."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1494256925, "post_id": 43844652, "comment_id": 74738574, "body": "Well spotted. I figured there was a reason that was so fast, but hadn&#39;t dug deeper. (Rerunning my test without including the replace-then-split gives more sensible numbers)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1494240494, "last_edit_date": 1494240494, "creation_date": 1494237261, "answer_id": 43844652, "question_id": 43844337, "link": "https://stackoverflow.com/questions/43844337/perl-trying-to-speed-up-parsing-a-delimited-file/43844652#43844652", "title": "Perl: Trying to speed up parsing a delimited file", "body": "<p>I can't easily answer your performance question, because I'd need a test case. But I'd <em>guess</em> that it's to do with how the regular expression is being processed. </p>\n\n<p>You can see what that's doing with <code>use re 'debug';</code>, and that'll print the regular expression steps. </p>\n\n<p>But for the broader question - I'd probably just tackle it with a global (assuming your data is as simple as the example):</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \nuse Data::Dumper;\n\nwhile ( &lt;DATA&gt; ) { \n   my %row = m/(\\w+)=(\\w+)/g;\n   print Dumper \\%row;\n}\n\n__DATA__\nvar1=value1|^|var2=value2|^|var3=value3|^|var4=value4\n</code></pre>\n\n<p>You can use lookahead/behind to match delimiters if you've got more complicated things in there, but because it's one regex per line, you're invoking the regex engine less often, and that'll <em>probably</em> be faster. (But I can't tell you for sure without a test case). </p>\n\n<p>If your data <em>is</em> more complicated, then perhaps:</p>\n\n<pre><code>my %row = s/\\Q|^|\\E/\\n/rg =~ m/(.*)=(.*)/g;\n</code></pre>\n\n<p>This will 'force' splitting the input into a new line, and then match 'anything' = 'anything'. But that's probably overkill unless your values include whitespace/pipes/metachars. </p>\n\n<p>With editing your test case to use <code>Benchmark</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Benchmark qw ( cmpthese );\n\nmy $line =\n  \"a=1|^|b=2|^|c=3|^|d=4|^|e=5|^|f=6|^|g=7|^|h=8|^|i=9|^|j=10|^|k=11|^|l=12|^|m=13|^|n=14|^|o=15|^|p=16|^|q=17|^|r=18|^|s=19|^|t=20|^|u=21|^|v=22|^|w=23|^|x=24|^|y=25|^|z=26|^|aa=27|^|ab=28|^|ac=29|^|ad=30|^|ae=31|^|af=32|^|ag=33|^|ah=34|^|ai=35|^|aj=36|^|ak=37|^|al=38|^|am=39|^|an=40|^|ao=41|^|ap=42|^|aq=43|^|ar=44|^|as=45|^|at=46|^|au=47|^|av=48|^|aw=49|^|ax=50\";\n\nsub double_split {\n   my %hash;\n   my @fields = split( /\\Q|^|\\E/, $line );\n   foreach my $field (@fields) {\n      my ( $name, $value ) = split( /=/, $field );\n      $hash{$name} = $value;\n   }\n}\n\nsub single_split {\n   my %hash = split( /\\Q|^|\\E|=/, $line );\n}\n\nsub re_replace_then_split {\n   $line =~ s/\\Q|^|\\E/=/g;\n   my %hash = split( /=/, $line );\n}\n\nsub single_regex {\n   my %hash = $line =~ m/(\\w+)=(\\w+)/g;\n}\n\nsub compound {\n   my %hash = $line =~ s/\\Q|^|\\E/\\n/rg =~ m/(.*)=(.*)/g;\n}\n\ncmpthese(\n   1_000_000,\n   {  \"Double Split\"                 =&gt; \\&amp;double_split,\n      \"single split with regex\"      =&gt; \\&amp;single_split,\n      \"Replace then split\"           =&gt; \\&amp;re_replace_then_split,\n      \"Single Regex\"                 =&gt; \\&amp;single_regex,\n      \"regex to linefeed them match\" =&gt; \\&amp;compound\n   }\n);\n</code></pre>\n\n<p>Looks like the results come out like:</p>\n\n<pre><code>                                 Rate Double Split single split with regex Single Regex Replace then split regex to linefeed them match\nDouble Split                  18325/s           --                     -4%         -34%               -56%                         -97%\nsingle split with regex       19050/s           4%                      --         -31%               -54%                         -97%\nSingle Regex                  27607/s          51%                     45%           --               -34%                         -96%\nReplace then split            41733/s         128%                    119%          51%                 --                         -93%\nregex to linefeed them match 641026/s        3398%                   3265%        2222%              1436%                           --\n</code></pre>\n\n<p>... I'm a bit suspicious of that last, because that's absurdly faster. There's probably caching of results happening there. </p>\n\n<p>But looking at it, what's slowing you down is the alternation in the regex:</p>\n\n<pre><code>sub single_split_with_alt {\n   my %hash = split( /\\Q|^|\\E|=/, $line );\n}\n\nsub single_split {\n      my %hash = split( /[\\|\\^\\=]+/, $line );\n}\n</code></pre>\n\n<p>(I know that latter <em>might</em> not be quite what you want, but it's for illustrative purposes)</p>\n\n<p>Gives:</p>\n\n<pre><code>                Rate  alternation single split\nalternation  19135/s           --         -37%\nsingle split 30239/s          58%           --\n</code></pre>\n\n<p>But there does come a point where this is moot, because your limiting factor is disk IO, not CPU. </p>\n"}], "owner": {"reputation": 525, "user_id": 3272110, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3a30dbd0c0785ff9369805ebafc853dc?s=128&d=identicon&r=PG&f=1", "display_name": "Zippy1970", "link": "https://stackoverflow.com/users/3272110/zippy1970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1494240494, "creation_date": 1494236249, "last_edit_date": 1494239193, "question_id": 43844337, "link": "https://stackoverflow.com/questions/43844337/perl-trying-to-speed-up-parsing-a-delimited-file", "title": "Perl: Trying to speed up parsing a delimited file", "body": "<p>I have a large flat text file with lines that hold name/value pairs (\"varname=value\"). These pairs are seperated by a multi-character delimiter. So a single line in this file might look like this:</p>\n\n<pre><code>var1=value1|^|var2=value2|^|var3=value3|^|var4=value4\n</code></pre>\n\n<p>Each line holds about 50 name/value pairs.</p>\n\n<p>I need to iterate through the lines of this file (there are about 100,000 lines) and store the name/value pairs in a hash so that</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$field{'var1'} = value1\n$field{'var2'} = value2\netc...\n</code></pre>\n\n<p>What I did was this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># $line holds a single line from the file\n\nmy @fields = split( /\\Q|^|\\E/, $line );\nforeach my $field (@fields) {\n  my ($name, $value) = split( /=/, $field );\n  $hash{$name} = $value;\n}\n</code></pre>\n\n<p>Doing this for each line of the entire file takes (on my PC) about 2 seconds. This doesn't seem like a long time, but I really want to speed this up by quite a bit.</p>\n\n<p>Of this 2 seconds, the first split takes about 0.6 seconds, while the foreach loop takes about 1.4 seconds. So I thought I'd get rid of the foreach loop and put it all in a single split:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>%hash = split( /\\Q|^|\\E|=/, $line );\n</code></pre>\n\n<p>Much to my surprise, parsing the entire file this way took a full second longer! My question isn't really why this takes longer (although it would be a nice bonus to understand why), but my question is if there are any other (faster) ways to get the job done.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>------ Edit below this line ------</strong></p>\n\n<p>I just found out that changing this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>%hash = split( /\\Q|^|\\E|=/, $line );\n</code></pre>\n\n<p>into this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$line =~ s/\\Q|^|\\E/=/g;\n%hash = split( /=/, $line );\n</code></pre>\n\n<p>makes it three times faster! Parsing the entire file this way now takes just over a second...</p>\n\n<p><strong>------ Snippet below this line ------</strong></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse Time::HiRes qw( time );\n\nmy $line = \"a=1|^|b=2|^|c=3|^|d=4|^|e=5|^|f=6|^|g=7|^|h=8|^|i=9|^|j=10|^|k=11|^|l=12|^|m=13|^|n=14|^|o=15|^|p=16|^|q=17|^|r=18|^|s=19|^|t=20|^|u=21|^|v=22|^|w=23|^|x=24|^|y=25|^|z=26|^|aa=27|^|ab=28|^|ac=29|^|ad=30|^|ae=31|^|af=32|^|ag=33|^|ah=34|^|ai=35|^|aj=36|^|ak=37|^|al=38|^|am=39|^|an=40|^|ao=41|^|ap=42|^|aq=43|^|ar=44|^|as=45|^|at=46|^|au=47|^|av=48|^|aw=49|^|ax=50\";\n\nResetTimer();\nmy %hash;\nfor( my $i = 1; $i &lt;= 100000; $i++ ) {\n  my @fields = split( /\\Q|^|\\E/, $line );\n  foreach my $field (@fields) {\n    my ($name, $value) = split( /=/, $field );\n    $hash{$name} = $value;\n  }\n}\nprint Elapsed() . \"\\n\";\n\nResetTimer();\n%hash = ();\nfor( my $i = 1; $i &lt;= 100000; $i++ ) {\n  %hash = split( /\\Q|^|\\E|=/, $line );\n}\nprint Elapsed() . \"\\n\";\n\nResetTimer();\n%hash = ();\nfor( my $i = 1; $i&lt;=100000; $i++ ) {\n  $line =~ s/\\Q|^|\\E/=/g;\n  %hash = split( /=/, $line );\n}\nprint Elapsed() . \"\\n\";\n\n################################################################################################################################\nBEGIN {\n  my $startTime;\n  sub ResetTimer {\n    $startTime = time();\n    return $startTime;\n  }\n  sub Elapsed {\n    return time() - $startTime;\n  }\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1592, "user_id": 2307345, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RMPBA.jpg?s=128&g=1", "display_name": "catzilla", "link": "https://stackoverflow.com/users/2307345/catzilla"}, "edited": false, "score": 0, "creation_date": 1494223465, "post_id": 43840769, "comment_id": 74717440, "body": "oh, sorry, I meant &#39;a&#39; =~ /b/. I will edit the question"}, {"owner": {"reputation": 1592, "user_id": 2307345, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RMPBA.jpg?s=128&g=1", "display_name": "catzilla", "link": "https://stackoverflow.com/users/2307345/catzilla"}, "edited": false, "score": 0, "creation_date": 1494225692, "post_id": 43840769, "comment_id": 74718475, "body": "<code>scalar &#39;a&#39; =~ &#47;b&#47;</code> seems clean and it worked for me. thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1494224019, "last_edit_date": 1494224019, "creation_date": 1494223339, "answer_id": 43840769, "question_id": 43840600, "link": "https://stackoverflow.com/questions/43840600/and-operator-makes-odd-hash-count-in-perl-when-passed-in-a-subroutine/43840769#43840769", "title": "&quot;=~&quot; and &quot;!~&quot; operator makes odd hash count in Perl when passed in a subroutine", "body": "<p>The match operator in list context returns an empty list on failure. You could use</p>\n\n<pre><code>scalar( 'a' =~ /b/ )\n</code></pre>\n\n<p>or</p>\n\n<pre><code>'a' =~ /b/ ? 1 : 0\n</code></pre>\n"}], "owner": {"reputation": 1592, "user_id": 2307345, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/RMPBA.jpg?s=128&g=1", "display_name": "catzilla", "link": "https://stackoverflow.com/users/2307345/catzilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 43840769, "answer_count": 1, "score": 3, "last_activity_date": 1494224019, "creation_date": 1494222595, "last_edit_date": 1494223516, "question_id": 43840600, "link": "https://stackoverflow.com/questions/43840600/and-operator-makes-odd-hash-count-in-perl-when-passed-in-a-subroutine", "title": "&quot;=~&quot; and &quot;!~&quot; operator makes odd hash count in Perl when passed in a subroutine", "body": "<p>I am making a subroutine that accepts an array of hashes that have the same keys with different values. As a requirement, there are values that have conditional operations.</p>\n\n<p>sample:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nsub test {\n  my @data = @_;\n  print Dumper(@data);\n}\n\ntest(\n  {\n    'value' =&gt; 1 == 2\n  },\n  {\n    'value2' =&gt; 4 == 4\n  }\n);\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>$VAR1 = {\n          'value' =&gt; ''\n        };\n$VAR2 = {\n          'value2' =&gt; 1\n        };\n</code></pre>\n\n<p>but when I use <code>=~</code> or <code>!~</code> operators, the interpreter outputs this error:</p>\n\n<p><code>Odd number of elements in anonymous hash at ...</code></p>\n\n<pre><code>test(\n  {\n    'value' =&gt; 1 == 2\n  },\n  {\n    'value2' =&gt; 'a' =~ /b/\n  }\n);\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>$VAR1 = {\n          'value' =&gt; ''\n        };\n$VAR2 = {\n          'value2' =&gt; undef\n        };\n</code></pre>\n\n<p>It seems that for false statements the hash value returns <code>undef</code> not <code>''</code>.\nI also tried putting undef directly on the hash value and it works ok.</p>\n\n<p>Question:</p>\n\n<ol>\n<li>Why does perl outputs this behavior?</li>\n<li>What is the best solution for this?</li>\n</ol>\n"}, {"tags": ["regex", "perl", "unix", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1494216495, "creation_date": 1494216495, "answer_id": 43839603, "question_id": 43838670, "link": "https://stackoverflow.com/questions/43838670/checking-the-user-input-in-perl-for-characters-and-length/43839603#43839603", "title": "Checking the user input in perl for characters and length", "body": "<pre><code>$s =~ /^[uagc]{3}\\z/\n   or die(\"usage\\n\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": true, "score": 1, "last_activity_date": 1494222725, "creation_date": 1494222725, "answer_id": 43840636, "question_id": 43838670, "link": "https://stackoverflow.com/questions/43838670/checking-the-user-input-in-perl-for-characters-and-length/43840636#43840636", "title": "Checking the user input in perl for characters and length", "body": "<pre><code>my $input = &lt;&gt;;\nif ($input =~ /^[uagc]{3}$/g){\n    # your codes\n} else {\n    #exit or die;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7800047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/73227326b3332b504ab7c6fdb28d3226?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/7800047/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 43840636, "answer_count": 2, "score": -2, "last_activity_date": 1494223335, "creation_date": 1494208630, "last_edit_date": 1494223335, "question_id": 43838670, "link": "https://stackoverflow.com/questions/43838670/checking-the-user-input-in-perl-for-characters-and-length", "title": "Checking the user input in perl for characters and length", "body": "<p>My question is basically as the title says. <br/>How can I check, in perl, whether a user inputted string </p>\n\n<ol>\n<li>is only certain characters long (for example, 3 characters long) </li>\n<li>contains only characters (for example, it should only contain the characters 'u', 'a', 'g', and 'c')</li>\n</ol>\n"}, {"tags": ["perl", "unix", "sed"], "comments": [{"owner": {"reputation": 1, "user_id": 7976483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9516a3f8173b8ebcea00e80cbaf3c397?s=128&d=identicon&r=PG", "display_name": "mithun", "link": "https://stackoverflow.com/users/7976483/mithun"}, "edited": false, "score": 0, "creation_date": 1494172945, "post_id": 43833544, "comment_id": 74703908, "body": "/usr/bin/expect &lt;&lt;EOF set timeout -1 spawn sftp -C -oPort=$port $sftp_username@$host_name expect &quot;password:&quot; send &quot;$password\\r&quot; expect &quot;sftp&gt;&quot; cd $remote_dir send &quot;mput *.txt\\r&quot; expect &quot;sftp&gt;&quot; send &quot;quit\\r&quot; EOF"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1494173314, "post_id": 43833544, "comment_id": 74704022, "body": "See: <a href=\"http://stackoverflow.com/q/6697753/3776858\">Difference between single and double quotes in bash</a>"}], "answers": [{"tags": [], "owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "is_accepted": false, "score": 1, "last_activity_date": 1494173247, "creation_date": 1494173247, "answer_id": 43833655, "question_id": 43833544, "link": "https://stackoverflow.com/questions/43833544/sftp-dollar-sign-issue-when-sending-password-in-unix/43833655#43833655", "title": "SFTP dollar sign issue when sending password in Unix", "body": "<p>I suggest to not escape and replace</p>\n\n<pre><code>\"Np4$g\"\n</code></pre>\n\n<p>by</p>\n\n<pre><code>'Np4$g'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1494185467, "last_edit_date": 1494185467, "creation_date": 1494174565, "answer_id": 43833887, "question_id": 43833544, "link": "https://stackoverflow.com/questions/43833544/sftp-dollar-sign-issue-when-sending-password-in-unix/43833887#43833887", "title": "SFTP dollar sign issue when sending password in Unix", "body": "<p>Your command</p>\n\n<pre><code>echo \"Np4$g\" | perl -pe 's/$/\\\\\\\\\\$/g'\n</code></pre>\n\n<p>is failing for two reasons</p>\n\n<ul>\n<li><p>In <code>\"Np4$g\"</code>, the shell is interpolating the variable <code>g</code> into the double-quoted string. It probably isn't defined so it is replaced with nothing, and you are passing just <code>Np4</code> to perl. You need to use single quotes to prevent the interpolation</p></li>\n<li><p>In the Perl substitution <code>s/$/\\\\\\\\\\$/g</code> the <code>$</code> in the pattern matches the end of the string, not a literal dollar. That means  <code>Np4</code> is changed to <code>Np4\\\\$</code>. You need to escape the dollar sign in the pattern to get it to match a literal <code>$</code></p></li>\n</ul>\n\n<p>This will work correctly</p>\n\n<pre><code>echo 'Np4$g' | perl -pe 's/\\$/\\\\\\$/g'\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Np4\\$g\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7976483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9516a3f8173b8ebcea00e80cbaf3c397?s=128&d=identicon&r=PG", "display_name": "mithun", "link": "https://stackoverflow.com/users/7976483/mithun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1494193742, "creation_date": 1494172526, "last_edit_date": 1494173870, "question_id": 43833544, "link": "https://stackoverflow.com/questions/43833544/sftp-dollar-sign-issue-when-sending-password-in-unix", "title": "SFTP dollar sign issue when sending password in Unix", "body": "<p>I need to SFTP a file to a server. The password has a dollar sign <code>$</code> and I need to escape it.</p>\n\n<p>I tried with Perl and sed commands I am able to replace but the string following <code>$</code> is not getting added.</p>\n\n<h3>Example:</h3>\n\n<pre><code>echo \"Np4$g\" | perl -pe 's/$/\\\\\\\\\\$/g'\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Np4\\\\$\n</code></pre>\n\n<p>It supposed to be <code>Np4\\\\$g</code>, but <code>g</code> is not getting appended.</p>\n\n<h3>Code:</h3>\n\n<pre><code>/usr/bin/expect &lt;&lt;EOF\nset timeout -1\nspawn sftp -C -oPort=$port $sftp_username@$host_name\nexpect \"password:\"\nsend \"$password\\r\"\nexpect \"sftp&gt;\"\ncd $remote_dir\nsend \"mput *.txt\\r\"\nexpect \"sftp&gt;\"\nsend\n</code></pre>\n"}, {"tags": ["perl", "nginx", "cgi", "mod-perl", "template-toolkit"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1494230158, "post_id": 43833802, "comment_id": 74720848, "body": "One could always write a directive to use the <code>tpage</code> tool that ships with Template <a href=\"http://www.template-toolkit.org/docs/tools/index.html\" rel=\"nofollow noreferrer\">described here</a>. But that&#39;s probably questionable."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 6, "last_activity_date": 1494174071, "creation_date": 1494174071, "answer_id": 43833802, "question_id": 43833166, "link": "https://stackoverflow.com/questions/43833166/how-to-generate-dynamic-content-via-mod-perl-handler-in-templatetoolkit/43833802#43833802", "title": "How to generate dynamic content via mod_perl handler in Template::Toolkit?", "body": "<p>mod_perl is an Apache module. It cannot be used with nginx.</p>\n\n<p>To use Template::Toolkit with nginx, you will need to implement a web application some other way. Probably the most straightforward way of doing this will be to write it as a <a href=\"https://metacpan.org/pod/Plack\" rel=\"noreferrer\">Plack</a> application; this will allow it to be run as a HTTP or FastCGI server that nginx can proxy requests to.</p>\n"}], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 43833802, "answer_count": 1, "score": 0, "last_activity_date": 1494174071, "creation_date": 1494170333, "question_id": 43833166, "link": "https://stackoverflow.com/questions/43833166/how-to-generate-dynamic-content-via-mod-perl-handler-in-templatetoolkit", "title": "How to generate dynamic content via mod_perl handler in Template::Toolkit?", "body": "<p>I was just trying to use <code>Template::Toolkit</code> perl module on my centos to generate dynamic web content. <a href=\"http://template-toolkit.org/docs/tutorial/Web.html#section_Dynamic_Content_Generation_Via_Apache_Mod_Perl_Handler\" rel=\"nofollow noreferrer\">This tutorial</a>, and the one given on cpan site, is made to bind mod_perl with Apache. I'm using nginx on my centos. i tried allot, but I'm less into server things, so failed each time. <br/><br/>Can anyone help me to integrate mod_perl with nginx? Or is there any alternative for this?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7896796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded963edd930c751533beaa332f192a0?s=128&d=identicon&r=PG&f=1", "display_name": "E.L", "link": "https://stackoverflow.com/users/7896796/e-l"}, "edited": false, "score": 0, "creation_date": 1494161876, "post_id": 43831528, "comment_id": 74700394, "body": "Thanks! That was very helpful (and makes a lot of sense)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1494176646, "post_id": 43831528, "comment_id": 74705188, "body": "<i>&#39;What is wrong with always quoting &quot;$vars&quot;&#39;</i> is about, well, putting double quotes around variables, not around numeric constants, which is a much lesser sin. And thank you for using the appropriate pre-increment operator instead of the ubiquitous post-increment"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1494162704, "last_edit_date": 1494162704, "creation_date": 1494160613, "answer_id": 43831528, "question_id": 43831485, "link": "https://stackoverflow.com/questions/43831485/in-perl-why-am-i-getting-uninitialized-value-in-pattern-match-m-when-i-tr/43831528#43831528", "title": "In Perl, why am I getting &quot;uninitialized value in pattern match (m//)&quot; when I try to check if a variable matches two patterns?", "body": "<p>The effect of</p>\n\n<pre><code> $line = (( ~/^ATG/) and (~/TAG$|TAA$|TGA$/))\n</code></pre>\n\n<p>is to assign the result of</p>\n\n<pre><code> (~($_ =~ /^ATG/) and ~($_ =~ /TAG$|TAA$|TGA$/))\n</code></pre>\n\n<p>to <code>$line</code>. </p>\n\n<p><code>=~</code> is a single operator. <code>=</code> and <code>~</code> on their own mean different things. <code>=~</code> cannot be split like that.</p>\n\n<p>What you need to write is:</p>\n\n<pre><code> ($line =~/^ATG/) and ($line =~ /TAG$|TAA$|TGA$/)\n</code></pre>\n\n<p>I actually recommend you keep the two simple regex matches corresponding to \"<code>$line</code> begins with <code>ATG</code> and ends with one of <code>TAG</code>, <code>TAA</code>, or <code>TGA</code>\", instead of trying to combine both conditions into a single pattern and making it less readable.</p>\n\n<p>Further advice:</p>\n\n<ul>\n<li><p>Don't write <code>my $count = \"0\";</code>. This is actually a FAQ: <a href=\"http://perldoc.perl.org/perlfaq4.html#What%27s-wrong-with-always-quoting-%22%24vars%22%3f\" rel=\"nofollow noreferrer\">What is wrong with always quoting \"$vars\"</a>: \"<em>The problem is that those double-quotes force stringification--coercing numbers and references into strings--even when you don't want them to be strings.</em>\" In this case, you should initialize it with <code>0</code>.</p></li>\n<li><p>Instead of <code>$count = $count +1</code>, use <code>++ $count</code>.</p></li>\n<li><p>Instead of having a global <code>$count</code>, return the count from the subroutine.</p></li>\n<li><p>Even though lexical filehandles are automatically closed when exiting the scope, it is still better to explicitly close them when they are no longer needed.</p></li>\n<li><p>Don't omit parentheses from subroutine invocations. That is, instead of <code>ORF $test</code>, always write <code>ORF($test)</code>, especially since all uppercase bareword names tend to be reserved for either package level file handles or constants.</p></li>\n</ul>\n\n<p>So, I would rewrite your code as (untested because I do not have the data):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nrun( @ARGV );\n\nsub run {\n    my $file = shift;\n    print ORF($file), \"\\n\";\n    return;\n}\n\nsub ORF {\n    my $file = shift;\n    open my $fh, '&lt;', $file\n        or die \"Can't open '$file': $!\";\n\n    my $count = 0;\n    while (my $line = &lt;$fh&gt;) {\n        if ( ($line =~ /^ATG/) and ($line ~= /(?:TAG|TAA|TGA)$/)) {\n            ++ $count;\n        }\n    }\n    close $fh\n        or die \"Failed to close '$file': $!\";\n\n    return $count;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": false, "score": 1, "last_activity_date": 1494160694, "last_edit_date": 1494160694, "creation_date": 1494160618, "answer_id": 43831529, "question_id": 43831485, "link": "https://stackoverflow.com/questions/43831485/in-perl-why-am-i-getting-uninitialized-value-in-pattern-match-m-when-i-tr/43831529#43831529", "title": "In Perl, why am I getting &quot;uninitialized value in pattern match (m//)&quot; when I try to check if a variable matches two patterns?", "body": "<p>You're misusing the <code>~</code> operator. It's bitwise negation and has nothing to do with regexes. The one you probably meant is <code>=~</code> but it can't be split. Therefore the conditional operator should look</p>\n\n<pre><code>if ($line =~ /^ATG/ and $line =~ /TAG$|TAA$|TGA$/)\n</code></pre>\n\n<p>But this can be described in a single regex:</p>\n\n<pre><code>if ($line =~ /^ATG.*(?:TAG|TAA|TGA)$/))\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7896796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded963edd930c751533beaa332f192a0?s=128&d=identicon&r=PG&f=1", "display_name": "E.L", "link": "https://stackoverflow.com/users/7896796/e-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1494176437, "creation_date": 1494160319, "last_edit_date": 1494176437, "question_id": 43831485, "link": "https://stackoverflow.com/questions/43831485/in-perl-why-am-i-getting-uninitialized-value-in-pattern-match-m-when-i-tr", "title": "In Perl, why am I getting &quot;uninitialized value in pattern match (m//)&quot; when I try to check if a variable matches two patterns?", "body": "<p>I am trying to get a sequence starting with ATG and stopping with TAG, TAA or TGA out of a text file.</p>\n\n<p>I get the error message</p>\n\n<blockquote>\n  <p>Use of uninitialized value $_ in pattern match (m//) at line 12</p>\n</blockquote>\n\n<p>and it counts every line not only the ones I want.</p>\n\n<p>I think there is something wrong with how I use the regular expressions but I don't know how.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $test  = \"Bin.txt\";\nmy $count = \"0\"; \n\nsub ORF {\n    my ($file) = @_; # reading file in \n\n    open ( my $FH, \"&lt;\", $file ) or die \"Can't open $file: $!\";\n\n    while ( my $line = &lt;$FH&gt; ) { #reading each line of file\n\n        if ( $line = ( ( ~/^ATG/ ) and ( ~/TAG$|TAA$|TGA$/ ) ) ) { # looking for sequence with ATG at the beginning and TAG,TAA,TGA at the end \n            $count = $count +1; # counting these sequences \n        }\n    }\n}\n\nORF $test; \nprint $count;\n</code></pre>\n"}, {"tags": ["mongodb", "perl"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1494173269, "creation_date": 1494173269, "answer_id": 43833659, "question_id": 43831281, "link": "https://stackoverflow.com/questions/43831281/how-to-use-mongo-authenticationdatabase-in-perl/43833659#43833659", "title": "How to use Mongo --authenticationDatabase in perl", "body": "<p>The <code>db_name</code> parameter sets the authentication database when you are connecting to the server, so you would want</p>\n\n<pre><code>db_name =&gt; 'admin'\n</code></pre>\n\n<p>to do the equivalent of your command line connection, although <code>admin</code> is the default here anyway so you can just omit it altogether</p>\n\n<p>If you want to access the <code>cust_projectdb</code> database then you need to use <code>get_database</code> on the <code>MongoDB::MongoClient</code> object you just created to do that</p>\n\n<pre><code>my $db = $client-&gt;get_database('cust_projectdb')\n</code></pre>\n"}], "owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 43833659, "answer_count": 1, "score": 1, "last_activity_date": 1494173269, "creation_date": 1494158846, "question_id": 43831281, "link": "https://stackoverflow.com/questions/43831281/how-to-use-mongo-authenticationdatabase-in-perl", "title": "How to use Mongo --authenticationDatabase in perl", "body": "<p>This is how I connect to mongoDB in perl</p>\n\n<pre><code>my $client = MongoDB::MongoClient-&gt;new(\n    host     =&gt; 'badhost',\n    port     =&gt; 37018,\n    username =&gt; 'abc_user',\n    password =&gt; 'abc_user',\n    db_name  =&gt; 'cust_projectdb'\n) or die \"unable to connect to mongo\\n\";\n</code></pre>\n\n<p>when the connection string from shell is\n<code>mongo  cust_projectdb --port 37018 -uabc_user -pabc_user --host badhost</code></p>\n\n<p>but how to connect when the connection string uses a different collection for authentication like this:</p>\n\n<p><code>mongo  cust_projectdb --port 37018 -uabc_user -pabc_user --host badhost --authenticationDatabase admin</code></p>\n"}, {"tags": ["perl", "printf"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 3, "creation_date": 1494107128, "post_id": 43825534, "comment_id": 74689350, "body": "<code>sprintf(&quot;%-6s&quot;, &quot;M&quot;) =~ tr| |-|r;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1494194721, "last_edit_date": 1494194721, "creation_date": 1494119707, "answer_id": 43826904, "question_id": 43825534, "link": "https://stackoverflow.com/questions/43825534/sprintf-pad-string-on-right-with-dash/43826904#43826904", "title": "sprintf pad string on right with dash", "body": "<p>It can't be done with <code>sprintf</code> alone. (<code>sprintf</code> will only pad with spaces or with zeroes.)</p>\n\n<pre><code>sprintf(\"%-6s\", $s) =~ tr/ /-/r\n</code></pre>\n\n<p>or</p>\n\n<pre><code>substr($s.(\"-\" x 6), 0, 6)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$s . (\"-\" x (6-length($s)))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 987, "user_id": 1104581, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e8be95b1d1cf7308d42a2025128ba398?s=128&d=identicon&r=PG", "display_name": "ipetrik", "link": "https://stackoverflow.com/users/1104581/ipetrik"}, "edited": false, "score": 0, "creation_date": 1494460935, "post_id": 43837558, "comment_id": 74842744, "body": "Bonus points for introducing me to the &#39;x&#39; operator. In 10 years of working with perl, I had never seen that and now I feel like a newb."}], "tags": [], "owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "is_accepted": false, "score": 2, "last_activity_date": 1494198038, "last_edit_date": 1494198038, "creation_date": 1494197677, "answer_id": 43837558, "question_id": 43825534, "link": "https://stackoverflow.com/questions/43825534/sprintf-pad-string-on-right-with-dash/43837558#43837558", "title": "sprintf pad string on right with dash", "body": "<p><code>sprintf</code> only supports padding with <code>0</code> and <code></code>, so no. You can pad with one of those then replace the padding, but the problem with that, is that you run the risk of replacing any padding characters in the original string. For example <code>sprintf('%-6s', '  M') =~ s/ /-/gr</code> produces <code>--M---</code>.</p>\n\n<p>From the <a href=\"https://perldoc.perl.org/perlfaq4.html#How-do-I-pad-a-string-with-blanks-or-pad-a-number-with-zeroes%3F\" rel=\"nofollow noreferrer\">FAQ</a>:</p>\n\n<blockquote>\n  <p>If you need to pad with a character other than blank or zero you can\n  use one of the following methods. They all generate a pad string with\n  the <code>x</code> operator and combine that with <code>$text</code>. These methods do not\n  truncate <code>$text</code>.</p>\n  \n  <p>Left and right padding with any character, creating a new string:</p>\n\n<pre><code>my $padded = $pad_char x ( $pad_len - length( $text ) ) . $text;\nmy $padded = $text . $pad_char x ( $pad_len - length( $text ) );\n</code></pre>\n  \n  <p>Left and right padding with any character, modifying <code>$text</code> directly:</p>\n\n<pre><code>substr( $text, 0, 0 ) = $pad_char x ( $pad_len - length( $text ) );\n$text .= $pad_char x ( $pad_len - length( $text ) );\n</code></pre>\n</blockquote>\n\n<p>If you do it often, you could wrap it in a subroutine.</p>\n\n<pre><code>sub pad {\n    my ($str, $padding, $length) = @_;\n\n    my $pad_length = $length - length $str;\n    $pad_length = 0 if $pad_length &lt; 0;\n    $padding x= $pad_length;\n    $str.$padding;\n}\n\nsay pad('M',       '-', 6);\nsay pad('MMMMMM',  '-', 6);\nsay pad('12345',   '-', 6);\nsay pad('1234567', '-', 6);\nsay pad('    ',    '-', 6);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>M-----\nMMMMMM\n12345-\n1234567\n    --\n</code></pre>\n"}], "owner": {"reputation": 987, "user_id": 1104581, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e8be95b1d1cf7308d42a2025128ba398?s=128&d=identicon&r=PG", "display_name": "ipetrik", "link": "https://stackoverflow.com/users/1104581/ipetrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5283, "favorite_count": 1, "accepted_answer_id": 43826904, "answer_count": 2, "score": 1, "last_activity_date": 1494198038, "creation_date": 1494105943, "question_id": 43825534, "link": "https://stackoverflow.com/questions/43825534/sprintf-pad-string-on-right-with-dash", "title": "sprintf pad string on right with dash", "body": "<p>I need to pad a string on the right with dashes ('-'). e.g. convert <code>'M'</code> to <code>'M-----'</code>.</p>\n\n<p><code>sprintf \"%-6s\", \"M\";</code> gives me <code>'M     '</code>. I tried <code>printf \"%-6-s\", \"M\";</code>, and <code>printf \"%--6s\", \"M\";</code>, but neither of those work...</p>\n\n<p>Can this be done with <code>sprinf</code> and if so, how?</p>\n"}, {"tags": ["perl", "ftp"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1494094609, "post_id": 43823693, "comment_id": 74685905, "body": "<i>that sends files in different directory within the same connection,</i> - with FTP each new file transfer is a new TCP connection. You probably mean the same FTP session or &quot;<i>initiated</i> from within the same control connection&quot;. But is not clear what you actual problem is - don&#39;t you know how to change folders within Perl? So please show what you actually tried to solve the problem and where your actual problem is."}, {"owner": {"reputation": 71, "user_id": 4667632, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1af5c82f28ec4213e75a32c79dc19d3?s=128&d=identicon&r=PG&f=1", "display_name": "User412387", "link": "https://stackoverflow.com/users/4667632/user412387"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1494094711, "post_id": 43823693, "comment_id": 74685927, "body": "I&#39;m trying from same FTP session"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494098139, "post_id": 43823693, "comment_id": 74686936, "body": "Okay, but you haven&#39;t explained what the problem is. Please give us some examples. (By the way, I&#39;ve removed the second question that you tacked on at the end because it&#39;s nothing to do with the rest of your post and needs to be asked separately.)"}, {"owner": {"reputation": 71, "user_id": 4667632, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1af5c82f28ec4213e75a32c79dc19d3?s=128&d=identicon&r=PG&f=1", "display_name": "User412387", "link": "https://stackoverflow.com/users/4667632/user412387"}, "edited": false, "score": 0, "creation_date": 1494098329, "post_id": 43823693, "comment_id": 74686995, "body": "I&#39;m trying to FTP files from two different directories.. I&#39;m not sure where to add the 2nd directory details in the script.."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494098364, "post_id": 43823693, "comment_id": 74687011, "body": "You don&#39;t need <code>$ftp-&gt;put(cwd . &quot;\\\\$_&quot;)</code> because the path is only necessary to help the method call to find the file. Since it&#39;s in the current working directory, just <code>$ftp-&gt;put($_)</code> is fine."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1494100186, "post_id": 43823693, "comment_id": 74687544, "body": "@RyanEdwards: You can change the remote directory with <code>$ftp-&gt;cwd</code>. You can change the local directory with <code>chdir</code>. Or you could use <code>$ftp-&gt;put($local_name,$remote_name)</code>.That should be all you need to do it yourself."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1494100710, "creation_date": 1494100710, "answer_id": 43824832, "question_id": 43823693, "link": "https://stackoverflow.com/questions/43823693/ftp-multiple-file-in-different-folders-by-perl/43824832#43824832", "title": "FTP multiple file in different folders by perl", "body": "<p>Well I'll write an answer, as this seems to be the only way to interpret your question, although it seems that you already know how to use <code>$ftp-&gt;cwd</code></p>\n\n<p>There are two ways.</p>\n\n<ul>\n<li><p>You can use <code>$ftp-&gt;cwd('someotherfolder')</code> before each transfer to change where the file is stored</p>\n\n<p>Remember that if you use a relative path each time then you will be diving ever deeper into the server's file structure. You may want to use <code>$ftp-&gt;cwd('../someotherfolder')</code> to go up a level and back down to a sister folder on the same level as the previous one, or you can just use an absolute path like <code>$ftp-&gt;cwd('/pub/someotherfolder')</code> which cannot be misinterpreted</p></li>\n<li><p>You can pass a second parameter to <code>$ftp-&gt;put</code>, which specifies the path and filename for the remote file that is created</p>\n\n<p>If you choose this option then no calls to <code>$ftp-&gt;cwd</code> are necessary</p></li>\n</ul>\n\n<p>If the directories where you want to store the files may not exist then you will need to use <code>$ftp-&gt;mkdir('newfolder')</code> before transferring there</p>\n\n<p>Since the method of changing the (remote) working directory is fairly straightforward, here's some code that demonstrates the second option. It supposes that you want to put each of your log files into a new folder, called <code>/pub/dir01</code>, <code>/pub/dir02</code> etc.</p>\n\n<pre><code>my $ftp = Net::FTP-&gt;new( $server, Debug =&gt; 1 ) or die $@;\n$ftp-&gt;login( $username, $pass ) or die $ftp-&gt;message;\n$ftp-&gt;binary();\n\nmy $dir = 'dir01';\n\nfor my $file ( glob 'Filename*.log' ) {\n\n    my $abs_dir = '/pub/' . $dir++;\n\n    $ftp-&gt;mkdir($abs_dir);\n\n    $ftp-&gt;put($file, \"$abs_dir/$file\") or die $ftp-&gt;message;\n} \n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4667632, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1af5c82f28ec4213e75a32c79dc19d3?s=128&d=identicon&r=PG&f=1", "display_name": "User412387", "link": "https://stackoverflow.com/users/4667632/user412387"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 43824832, "answer_count": 1, "score": -1, "last_activity_date": 1494100710, "creation_date": 1494093480, "last_edit_date": 1494097994, "question_id": 43823693, "link": "https://stackoverflow.com/questions/43823693/ftp-multiple-file-in-different-folders-by-perl", "title": "FTP multiple file in different folders by perl", "body": "<p>I'm trying for an ftp script, that sends files in different directory within the same connection, the below script is to FTP files from only one folder.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse Net::FTP;\nuse Cwd;\n\nmy $server    = \"HOST_NAME\"\nmy $username  = \"USERNAME\";\nmy $pass      = \"PASSWORD\";\nmy $ftp;\n\n$ftp = Net::FTP-&gt;new( $server, Debug =&gt; 1 ) or die $@;\n\n$ftp-&gt;login( $username, $pass ) or die $ftp-&gt;login failed;\n\nmy @transferFileList = glob \"Filename*.log\";\n\n$ftp-&gt;cwd('somefolder') or die $ftp-&gt;message;\n$ftp-&gt;binary();\n\nfor (@transferFileList){\n\n      $ftp-&gt;put(cwd . \"\\\\$_\") or die $ftp-&gt;message;\n}\n\n$ftp-&gt;quit or die $ftp-&gt;message;\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494094008, "post_id": 43821672, "comment_id": 74685725, "body": "What are <code>$app</code> and <code>$c</code>?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1494161724, "post_id": 43821672, "comment_id": 74700339, "body": "The purpose of <code>add_filter</code> is to massage the value before checks are applied. The filter is not where you raise a validation error. You need to <code>add_check</code> to check if the submitted value conforms to your criteria. The applicable checks for <code>subnet</code> are both <code>required</code> and your custom check."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1494161843, "post_id": 43821672, "comment_id": 74700384, "body": "On a separate note, you should consider updating your question to give more information so that people who do not already know what you are working on can understand it without the benefit of the dialogue between @Borodin and Simbabque."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494235137, "post_id": 43821672, "comment_id": 74723675, "body": "@Borodin: in terms of Mojolicious the <code>$app</code> is a reference to application. and <code>$c</code> is controller class which handles current request."}, {"owner": {"reputation": 202, "user_id": 1606164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6306a99514c0a21ba2e88e58b998505e?s=128&d=identicon&r=PG", "display_name": "Tigran Khachikyan", "link": "https://stackoverflow.com/users/1606164/tigran-khachikyan"}, "edited": false, "score": 0, "creation_date": 1494405493, "post_id": 43821672, "comment_id": 74808942, "body": "did you kept the rule to return undef when the data is valid?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 202, "user_id": 1606164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6306a99514c0a21ba2e88e58b998505e?s=128&d=identicon&r=PG", "display_name": "Tigran Khachikyan", "link": "https://stackoverflow.com/users/1606164/tigran-khachikyan"}, "edited": false, "score": 0, "creation_date": 1494413551, "post_id": 43821672, "comment_id": 74814528, "body": "@TigranKhachikyan: thanks. Fixed"}, {"owner": {"reputation": 202, "user_id": 1606164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6306a99514c0a21ba2e88e58b998505e?s=128&d=identicon&r=PG", "display_name": "Tigran Khachikyan", "link": "https://stackoverflow.com/users/1606164/tigran-khachikyan"}, "edited": false, "score": 0, "creation_date": 1494448460, "post_id": 43821672, "comment_id": 74838332, "body": "just for curiosity, can you please point how you fixed it?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 202, "user_id": 1606164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6306a99514c0a21ba2e88e58b998505e?s=128&d=identicon&r=PG", "display_name": "Tigran Khachikyan", "link": "https://stackoverflow.com/users/1606164/tigran-khachikyan"}, "edited": false, "score": 1, "creation_date": 1494489917, "post_id": 43821672, "comment_id": 74852875, "body": "@TigranKhachikyan: <code>return $ip</code>  -&gt; <code>return;</code>"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1494413533, "creation_date": 1494081243, "last_edit_date": 1592644375, "question_id": 43821672, "link": "https://stackoverflow.com/questions/43821672/how-to-implement-a-mojolicious-filter-and-raise-an-error-message", "title": "How to implement a Mojolicious filter and raise an error message?", "body": "<p>I have this filter:</p>\n<pre><code>use Net::IP;\n\nsub create_inet {\n    my( $self, $name, $value ) =  @_;\n\n    $self-&gt;error( $name =&gt; [ 'create_inet', 'Bad INET', Net::IP::Error ] ), return\n       unless my $ip =  Net::IP-&gt;new( $value );\n\n    return $ip;\n}\n</code></pre>\n<p>Which I add into my application like this</p>\n<pre><code>$app-&gt;validator-&gt;add_filter( inet =&gt; \\&amp;create_inet );\n</code></pre>\n<p>And in the controller's action I do this check</p>\n<pre><code>$c-&gt;validation-&gt;required( 'subnet', 'inet' );\n</code></pre>\n<p>But when the value for <code>subnet</code> is supplied in the wrong format I get the error <code>required</code> instead of the expected <code>Bad INET</code>.</p>\n<p>The error is overridden <a href=\"https://github.com/kraih/mojo/blob/master/lib/Mojolicious/Validator/Validation.pm#L88\" rel=\"nofollow noreferrer\">in <code>Mojolicious::Validator::Validation</code></a>.</p>\n<p>How to implement such a filter and raise an error if the supplied data is in the wrong format?</p>\n<br/>\n<hr />\n<h3>update</h3>\n<p>The <code>Mojolicious</code> app has two things I am interested in in this question:</p>\n<ul>\n<li>filter</li>\n<li>checker</li>\n</ul>\n<p>The <code>filter</code> works on <code>{ input }</code> values and puts them into <code>{ output }</code> after formatting it. For an example, look at the <a href=\"https://metacpan.org/source/SRI/Mojolicious-7.31/lib/Mojolicious/Validator.pm#L43\" rel=\"nofollow noreferrer\"><code>trim</code> filter</a>.</p>\n<p>The <code>checker</code> just checks validity of the parameter and raises error if necessary.</p>\n<p>In my approach I want to turn the input value into an object: <code>'1.2.3.4/32' -&gt; Net::IP</code>. So <code>$self-&gt;param( 'subnet' )</code> will return a <code>Net::IP</code> object</p>\n<p>I have two choices:</p>\n<pre><code>$self-&gt;required( 'subnet' )-&gt;inet;   #First\n$self-&gt;required( 'subnet', 'inet' ); #Second (described in question)\n</code></pre>\n<p>To my mind the first would break encapsulation because <code>output</code> is changed directly:</p>\n<pre><code>$app-&gt;validator-&gt;add_check( inet =&gt; \\&amp;create_inet );\n\nuse Net::IP;\n\nsub create_inet {\n    my( $self, $name, $value ) =  @_;\n\n    return Net::IP::Error\n        unless my $ip =  Net::IP-&gt;new( $value );\n\n    $self-&gt;output-&gt;{ $name } =  $ip; # Will this broke encapsulation?\n    return;\n}\n</code></pre>\n<p>In the second case the error message is lost.</p>\n"}, {"tags": ["perl", "parsing", "join"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1494086109, "post_id": 43821468, "comment_id": 74683233, "body": "<i>&quot;the reason I am not using join is because lines won&#39;t always match.&quot;</i>: how is it a problem? All you need to use <code>join</code> is sorted files. If records are missing in one of the files, it isn&#39;t a problem, <code>join</code> will skip them."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1494097824, "last_edit_date": 1494097824, "creation_date": 1494089921, "answer_id": 43823107, "question_id": 43821468, "link": "https://stackoverflow.com/questions/43821468/merge-files-based-on-a-mapping-in-another-file/43823107#43823107", "title": "Merge files based on a mapping in another file", "body": "\n\n<p>The immediate problem is that the indices of the tied arrays start at zero, while the line numbers in <code>$.</code> start at 1. That means you need to subtract one from <code>$.</code> or from the <code>$reference</code> variables before using them as indices. So your resulting data was never correct in the first place, and you may have overlooked that if it weren't for the warning!</p>\n\n<p>I fixed that and also tidied up your code a little. I mostly added <code>use autodie</code> so that there's no need to check the status of IO operations (except for <code>Tie::File</code>), changed to list assignments, moved the code to read the files into a subroutine, and added code blocks so that the lexical file handles would be closed automatically</p>\n\n<p>I also used the tied arrays to build the <code>%map</code> hashes instead of opening the files separately, which means their values are already zero-based as they need to be</p>\n\n<p>Oh, and I removed <code>looks_like_number</code>, because the <code>$reference</code> variables <em>must</em> be either numeric or <code>undef</code> because that's all we put into the hash. The correct way to check that a value isn't <code>undef</code> is with the <code>defined</code> operator</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\nuse autodie;\n\nuse Fcntl 'O_RDONLY';\nuse Tie::File;\n\nmy ( $mapfile, $infile1, $infile2, $outfile ) = @ARGV;\n\n{\n    tie my @file1, 'Tie::File' =&gt; $infile1, mode =&gt; O_RDONLY\n        or die \"Could not open $infile1: $!\";\n\n    tie my @file2, 'Tie::File' =&gt;$infile2, mode =&gt; O_RDONLY\n            or die \"Could not open $infile2: $!\";\n\n    my %map1 = map { (split /\\t/, $file1[$_], 3)[1] =&gt; $_ } 0 .. $#file1;\n    my %map2 = map { (split /\\t/, $file2[$_], 3)[1] =&gt; $_ } 0 .. $#file2;\n\n    open my $map_fh, '&lt;', $mapfile;\n\n    open my $out_fh, '&gt;', $outfile;\n\n    while ( &lt;$map_fh&gt; ) {\n        chomp;\n        my @row = split /\\t/;\n\n        my ( $species1, $species2 ) = @row[1,3];\n        my $reference1 = $map1{$species1};\n        my $reference2 = $map2{$species2};\n\n        my @nomatch    = ( \"NA\", \"\", \"NA\", \"\", \"\", \"\", \"\", \"NA\", \"NA\" );\n\n        my @fields = (\n            ( defined $reference1 ? $file1[$reference1] : @nomatch),\n            ( defined $reference2 ? $file2[$reference2] : @nomatch),\n        );\n\n        print $out_fh join( \"\\t\", @fields ), \"\\n\";\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Scf_3L  12798910    T   0   41  0   0   NA  NA  NA      NA                  NA  NA\nScf_3L  12798911    C   0   0   43  0   NA  NA  NA      NA                  NA  NA\nScf_3L  12798912    A   42  0   0   0   NA  NA  NA      NA                  NA  NA\nScf_3L  12798913    G   0   0   0   44  NA  NA  NA      NA                  NA  NA\nScf_3L  12798914    T   0   42  0   0   NA  NA  NA      NA                  NA  NA\nScf_3L  12798915    G   0   0   0   44  NA  NA  NA      NA                  NA  NA\nScf_3L  12798916    T   0   42  0   0   NA  NA  NA      NA                  NA  NA\nScf_3L  12798917    A   41  0   0   0   NA  NA  NA      NA                  NA  NA\nScf_3L  12798918    G   0   0   0   43  NA  NA  NA      NA                  NA  NA\nScf_3L  12798919    T   0   43  0   0   NA  NA  NA      NA                  NA  NA\nScf_3L  12798920    T   0   41  0   0   NA  NA  NA      NA                  NA  NA\n</code></pre>\n"}], "owner": {"reputation": 3386, "user_id": 3279716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3de7889a424ab30c3420b535d481db6c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3279716/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 43823107, "answer_count": 1, "score": 0, "last_activity_date": 1494097824, "creation_date": 1494080051, "question_id": 43821468, "link": "https://stackoverflow.com/questions/43821468/merge-files-based-on-a-mapping-in-another-file", "title": "Merge files based on a mapping in another file", "body": "<p>I have written a script in Perl that merges files based on a mapping in a third file; the reason I am not using <code>join</code> is because lines won't always match. The code works, but gives an error that doesn't appear to affect output: <code>Use of uninitialized value in join or string at join.pl line 43, &lt;$fh&gt; line 21.</code> As I am relatively new to Perl I have been unable to understand what is causing this error. Any help resolving this error or advice about my code would be greatly appreciated. I have provided example input and output below. </p>\n\n<p>join.pl</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse diagnostics;\nuse Tie::File;\nuse Scalar::Util qw(looks_like_number);\n\nchomp( my $infile  = $ARGV[0] );\nchomp( my $infile1 = $ARGV[1] );\nchomp( my $infile2 = $ARGV[2] );\nchomp( my $outfile = $ARGV[3] );\n\nopen my $mapfile,   '&lt;', $infile  or die \"Could not open $infile: $!\";\nopen my $file1,   '&lt;', $infile1  or die \"Could not open $infile1: $!\";\nopen my $file2,   '&lt;', $infile2  or die \"Could not open $infile2: $!\";\ntie my @tieFile1, 'Tie::File', $infile1 or die \"Could not open $infile1: $!\";\ntie my @tieFile2, 'Tie::File', $infile2 or die \"Could not open $infile2: $!\";\nopen my $output, '&gt;', $outfile or die \"Could not open $outfile: $!\";\n\nmy %map1;\nmy %map2;\n# This loop will read two input files and populate two hashes\n# using the coordinates (field 2) and the current line number\nwhile ( my $line1 = &lt;$file1&gt;, my $line2 = &lt;$file2&gt; ) {\n    my @row1 = split( \"\\t\", $line1 );\n    my @row2 = split( \"\\t\", $line2 );\n    # $. holds the line number\n    $map1{$row1[1]} = $.;\n    $map2{$row2[1]} = $.;\n}\nclose($file1);\nclose($file2);\n\nwhile ( my $line = &lt;$mapfile&gt; ) {\n    chomp $line;\n    my @row = split( \"\\t\", $line );\n    my $species1 = $row[1];\n    my $reference1 = $map1{$species1};\n    my $species2 = $row[3];\n    my $reference2 = $map2{$species2};\n    my @nomatch  = (\"NA\", \"\", \"NA\", \"\", \"\", \"\", \"\", \"NA\", \"NA\");\n    # test numeric\n    if ( looks_like_number($reference1) &amp;&amp; looks_like_number($reference2) ) {\n        # do the do using the maps\n        print $output join(\"\\t\", $tieFile1[$reference1], $tieFile2[$reference2]), \"\\n\";\n    }\n    elsif ( looks_like_number($reference1) )\n    {\n        print $output join(\"\\t\", $tieFile1[$reference1], @nomatch), \"\\n\";\n    }\n    elsif ( looks_like_number($reference2) )\n    {\n        print $output join(\"\\t\", @nomatch, $tieFile2[$reference2]), \"\\n\";\n    }\n}\nclose($output);\nuntie @tieFile1;\nuntie @tieFile2;\n</code></pre>\n\n<p>input_1:</p>\n\n<pre><code>Scf_3L  12798910    T   0   41  0   0   NA  NA\nScf_3L  12798911    C   0   0   43  0   NA  NA\nScf_3L  12798912    A   42  0   0   0   NA  NA\nScf_3L  12798913    G   0   0   0   44  NA  NA\nScf_3L  12798914    T   0   42  0   0   NA  NA\nScf_3L  12798915    G   0   0   0   44  NA  NA\nScf_3L  12798916    T   0   42  0   0   NA  NA\nScf_3L  12798917    A   41  0   0   0   NA  NA\nScf_3L  12798918    G   0   0   0   43  NA  NA\nScf_3L  12798919    T   0   43  0   0   NA  NA\nScf_3L  12798920    T   0   41  0   0   NA  NA\n</code></pre>\n\n<p>input_2:</p>\n\n<pre><code>3L  12559896    T   0   31  0   0   NA  NA\n3L  12559897    C   0   0   33  0   NA  NA\n3L  12559898    A   34  0   0   0   NA  NA\n3L  12559899    G   0   0   0   33  NA  NA\n3L  12559900    T   0   34  0   0   NA  NA\n3L  12559901    G   0   0   0   33  NA  NA\n3L  12559902    T   0   33  0   0   NA  NA\n3L  12559903    A   33  0   0   0   NA  NA\n3L  12559904    G   0   0   0   33  NA  NA\n3L  12559905    T   0   34  0   0   NA  NA\n3L  12559906    T   0   33  0   0   NA  NA\n</code></pre>\n\n<p>map:</p>\n\n<pre><code>3L  12798910    T   12559896    T\n3L  12798911    C   12559897    C\n3L  12798912    A   12559898    A\n3L  12798913    G   12559899    G\n3L  12798914    T   12559900    T\n3L  12798915    G   12559901    G\n3L  12798916    T   12559902    T\n3L  12798917    A   12559903    A\n3L  12798918    G   12559904    G\n3L  12798919    T   12559905    T\n3L  12798920    T   12559906    T\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Scf_3L  12798910    T   0   41  0   0   NA  NA    3L    12559896    T   0   31  0   0   NA  NA\nScf_3L  12798911    C   0   0   43  0   NA  NA    3L    12559897    C   0   0   33  0   NA  NA\nScf_3L  12798912    A   42  0   0   0   NA  NA    3L    12559898    A   34  0   0   0   NA  NA\nScf_3L  12798913    G   0   0   0   44  NA  NA    3L    12559899    G   0   0   0   33  NA  NA\nScf_3L  12798914    T   0   42  0   0   NA  NA    3L    12559900    T   0   34  0   0   NA  NA\nScf_3L  12798915    G   0   0   0   44  NA  NA    3L    12559901    G   0   0   0   33  NA  NA\nScf_3L  12798916    T   0   42  0   0   NA  NA    3L    12559902    T   0   33  0   0   NA  NA\nScf_3L  12798917    A   41  0   0   0   NA  NA    3L    12559903    A   33  0   0   0   NA  NA\nScf_3L  12798918    G   0   0   0   43  NA  NA    3L    12559904    G   0   0   0   33  NA  NA\nScf_3L  12798919    T   0   43  0   0   NA  NA    3L    12559905    T   0   34  0   0   NA  NA\nScf_3L  12798920    T   0   41  0   0   NA  NA    3L    12559906    T   0   33  0   0   NA  NA\n</code></pre>\n"}, {"tags": ["php", "perl", "cross-language"], "comments": [{"owner": {"reputation": 155, "user_id": 1384866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04db15e59184d2653f6febba3d14310?s=128&d=identicon&r=PG", "display_name": "daheda", "link": "https://stackoverflow.com/users/1384866/daheda"}, "edited": false, "score": 0, "creation_date": 1494075073, "post_id": 43820562, "comment_id": 74679646, "body": "Did you try exec() or system() ?"}, {"owner": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "reply_to_user": {"reputation": 155, "user_id": 1384866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04db15e59184d2653f6febba3d14310?s=128&d=identicon&r=PG", "display_name": "daheda", "link": "https://stackoverflow.com/users/1384866/daheda"}, "edited": false, "score": 0, "creation_date": 1494075645, "post_id": 43820562, "comment_id": 74679812, "body": "yes I tried but I couldn&#39;t keep calling the same running script"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1494104848, "post_id": 43820562, "comment_id": 74688802, "body": "Do you control the Perl program? Can you make it listen on a socket? Or something else, like listening on TCP."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494147706, "post_id": 43820562, "comment_id": 74696571, "body": "Youhave three valid answers now. I suggest you read <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>"}, {"owner": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1494172560, "post_id": 43820562, "comment_id": 74703768, "body": "@simbabque, yes I write the code of the Perl script."}, {"owner": {"reputation": 73667, "user_id": 1415724, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zErhj.jpg?s=128&g=1", "display_name": "Funk Forty Niner", "link": "https://stackoverflow.com/users/1415724/funk-forty-niner"}, "edited": false, "score": 0, "creation_date": 1494429397, "post_id": 43820562, "comment_id": 74827159, "body": "what&#39;s the status of this question, is it solved by any answer below? if so, the question should be marked as solved @VFX"}, {"owner": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "reply_to_user": {"reputation": 73667, "user_id": 1415724, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zErhj.jpg?s=128&g=1", "display_name": "Funk Forty Niner", "link": "https://stackoverflow.com/users/1415724/funk-forty-niner"}, "edited": false, "score": 0, "creation_date": 1494429508, "post_id": 43820562, "comment_id": 74827231, "body": "@Fred -ii- Not solved yet"}], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "edited": false, "score": 0, "creation_date": 1494076529, "post_id": 43820866, "comment_id": 74680078, "body": "how do I get the value of $b back to php using the $pipe ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "edited": false, "score": 0, "creation_date": 1494076767, "post_id": 43820866, "comment_id": 74680153, "body": "@VFX: That is a different problem and you need to open a new question. The <code>$pipe</code> connects to the Perl program&#39;s stdin, so you can&#39;t read from it. You will need to use <code>proc_open</code> instead. Why do you need a Perl program to add numbers up for your PHP code?"}, {"owner": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "edited": false, "score": 0, "creation_date": 1494077127, "post_id": 43820866, "comment_id": 74680249, "body": "Actually, I don&#39;t need a Perl script to add numbers up, but this example is  simple to ask my question, the main idea is the interconnection between php and perl"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1494076253, "creation_date": 1494076253, "answer_id": 43820866, "question_id": 43820562, "link": "https://stackoverflow.com/questions/43820562/how-to-pass-a-variable-from-php-to-a-running-perl-script/43820866#43820866", "title": "How to pass a variable from php to a running perl script", "body": "<p>You can open a pipe to a new instance of your Perl program with <code>popen</code></p>\n\n<pre><code>$pipe = popen(\"/path/to/program.pl\", \"w\");\n</code></pre>\n\n<p>then you can write your numbers to the pipe and the Perl code will add then up</p>\n\n<pre><code>fwrite($pipe, \"99\\n\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "is_accepted": false, "score": 0, "last_activity_date": 1494146141, "creation_date": 1494146141, "answer_id": 43829453, "question_id": 43820562, "link": "https://stackoverflow.com/questions/43820562/how-to-pass-a-variable-from-php-to-a-running-perl-script/43829453#43829453", "title": "How to pass a variable from php to a running perl script", "body": "<p>Both perl and php can do IPC via UNIX sockets, message queues and FIFO and much more. Connecting to an already running process STDIN - if it exists and  is a named device/object - is not so easy.</p>\n"}], "owner": {"reputation": 456, "user_id": 7972923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d7c39c0f852116f8af10dbf41a4de7?s=128&d=identicon&r=PG&f=1", "display_name": "VFX", "link": "https://stackoverflow.com/users/7972923/vfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1494146141, "creation_date": 1494074312, "last_edit_date": 1494076094, "question_id": 43820562, "link": "https://stackoverflow.com/questions/43820562/how-to-pass-a-variable-from-php-to-a-running-perl-script", "title": "How to pass a variable from php to a running perl script", "body": "<p>I have a perl script that has an endless loop that reads an integer from the user and add it to the variable $b every time;</p>\n\n<pre><code>$b = 0;\nwhile ( 1 == 1 ) {\n    $a = &lt;STDIN&gt;;\n    $b = $b + $a;\n    print $b + \"\\n\";\n}\n</code></pre>\n\n<p>I have a php form that has an input-text field and submit button, and when pressing the submit button I want to pass the value given in the input-text field to the running perl script and get the last value of the $b variable to show it in my php form.</p>\n\n<p>So my question is how to do this interconnection between php and perl?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1494082278, "post_id": 43820396, "comment_id": 74681870, "body": "You should replace your lookarounds with <code>\\B</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1494092163, "post_id": 43820396, "comment_id": 74685155, "body": "@CasimiretHippolyte True, that would have the same effect. It would probably take me a bit longer to read/understand, though,"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1494073695, "last_edit_date": 1494073695, "creation_date": 1494073314, "answer_id": 43820396, "question_id": 43820326, "link": "https://stackoverflow.com/questions/43820326/delete-any-non-word-character-but-spaces-and-a-single-quote-inside-the-word/43820396#43820396", "title": "Delete any non-word character but spaces and a single quote inside the word", "body": "<p>You could do this:</p>\n\n<pre><code>s/[^\\w\\s']|(?&lt;!\\w)'|'(?!\\w)//g\n</code></pre>\n\n<p>Delete everything that is either</p>\n\n<ul>\n<li>a character that is not (a word character or a space or <code>'</code>), or</li>\n<li>a <code>'</code> that is not preceded by a word character, or</li>\n<li>a <code>'</code> that is not followed by a word character</li>\n</ul>\n\n<p>The first clause will match (and remove) all characters that we obviously don't want to keep.</p>\n\n<p>The second and third clause will remove all <code>'</code> characters unless they're surrounded by word characters on both sides.</p>\n"}, {"comments": [{"owner": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "edited": false, "score": 0, "creation_date": 1494095061, "post_id": 43821170, "comment_id": 74686031, "body": "Wonderful! If I understand right, the <code>\\b&#39;\\b</code> is the same as <code>(?&lt;\\w)&#39;(?=\\w)</code> but <b>much</b> simpler. :)"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "edited": false, "score": 0, "creation_date": 1494099749, "post_id": 43821170, "comment_id": 74687441, "body": "@Nemo: yes the idea is to find word characters, whitespaces and quotes surrounded by word boundaries instead of searching all other cases to replace them with nothing. Don&#39;t forget the <code>=</code> in your lookbehinds <code>(?&lt;=...)</code>"}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 2, "last_activity_date": 1494082113, "last_edit_date": 1494082113, "creation_date": 1494078207, "answer_id": 43821170, "question_id": 43820326, "link": "https://stackoverflow.com/questions/43820326/delete-any-non-word-character-but-spaces-and-a-single-quote-inside-the-word/43821170#43821170", "title": "Delete any non-word character but spaces and a single quote inside the word", "body": "<p>You can also use a global research instead of a replacement, this way you only have to describe what you want to keep and the pattern becomes more simple:</p>\n\n<pre><code>perl -ne\"print /[\\w\\s]|\\b'\\b/g\" &lt;&lt;&lt; \"'a:b/c d????ef' don't\"\n</code></pre>\n"}], "owner": {"reputation": 3252, "user_id": 771480, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f759fe160ddd3aa8acf55def94c2d872?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/771480/nemo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 43820396, "answer_count": 2, "score": 1, "last_activity_date": 1494082113, "creation_date": 1494072833, "last_edit_date": 1494073920, "question_id": 43820326, "link": "https://stackoverflow.com/questions/43820326/delete-any-non-word-character-but-spaces-and-a-single-quote-inside-the-word", "title": "Delete any non-word character but spaces and a single quote inside the word", "body": "<p>Want cleanup some texts. So, want remove anything but <code>\\w</code> and <code>\\s</code>, but also want keep the single <code>'</code> inside the word. (e.g. want keep it in words like <code>don't</code>.</p>\n\n<p>I could do</p>\n\n<pre><code>perl -plE \"s/[^\\w\\s']//g\" &lt;&lt;&lt; \"'a:b/c d????ef' don't\"\n</code></pre>\n\n<p>which keeps the <code>'</code> but it keeps it also at the begining or end of string, e.g. it prints</p>\n\n<pre><code>'abc def' don't\n</code></pre>\n\n<p>I'm unable to implement the <strong>keep this</strong> <code>(?&lt;\\w)'(?=\\w)</code>, e.g. remove the <code>'</code> unless it is between two word characters.</p>\n\n<p>The wanted result:</p>\n\n<pre><code>abc def don't\n</code></pre>\n\n<p>How to do this?</p>\n"}, {"tags": ["arrays", "perl", "hash", "hash-reference"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1494072574, "post_id": 43820254, "comment_id": 74678902, "body": "<code>my @foo = (); my %bar = ();</code> is redundant. You can just write <code>my @foo; my %bar;</code> instead."}, {"owner": {"reputation": 165, "user_id": 4528846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/da886a060c917c55b4141b9bcce3f778?s=128&d=identicon&r=PG&f=1", "display_name": "Hellzzar", "link": "https://stackoverflow.com/users/4528846/hellzzar"}, "edited": false, "score": 0, "creation_date": 1494074959, "post_id": 43820254, "comment_id": 74679611, "body": "Thank you very much, it works now. Didn&#39;t realize I was initializing a reference with the braces. I see things clearer now :) and thanks for suggesting the use of Dumper."}], "tags": [], "owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "is_accepted": true, "score": 2, "last_activity_date": 1494072575, "last_edit_date": 1494072575, "creation_date": 1494072340, "answer_id": 43820254, "question_id": 43820070, "link": "https://stackoverflow.com/questions/43820070/error-when-accessing-array-of-hashes/43820254#43820254", "title": "Error when accessing array of hashes", "body": "<p><em>Reference found where even-sized list expected at generate_hashes.pl line 21, &lt;> line 1.</em></p>\n\n<p>That one is due to</p>\n\n<pre><code>my %new_hash = {};\n</code></pre>\n\n<p>Empty curly braces <code>{}</code> provide a reference to an empty hash, but on the left hand side you have a hash, not a reference to one.  You could instead initialise using:</p>\n\n<pre><code>my %new_hash = ();\n</code></pre>\n\n<p>But (as commented) you don't in practice need to initialise if you want to start with an empty hash; that's the default.</p>\n\n<p><em>Reference found where even-sized list expected at generate_hashes.pl line 12, &lt;> line 3.</em></p>\n\n<p>Same fault as above inside the <code>generateHash</code> function.</p>\n\n<p>In this line:</p>\n\n<pre><code>push (@hashes, %new_hash);\n</code></pre>\n\n<p>I suspect you intend to push a reference to the hash into the array, to do that you need to add a <code>\\</code>:</p>\n\n<pre><code>push( @hashes, \\%new_hash );\n</code></pre>\n\n<p>Otherwise you'll be putting the whole data structure in the array, etc.</p>\n\n<p>In this line:</p>\n\n<pre><code>my %test = $hashes[0];\n</code></pre>\n\n<p>Your right-hand side is a scalar, a reference to a hash, hence you need to dereference to use that hash in the assignment:</p>\n\n<pre><code>my %test = %{$hashes[0]};\n</code></pre>\n\n<p>Messages like</p>\n\n<p>HASH(0x2587a88)</p>\n\n<p>Come from this line:</p>\n\n<p>print \"@hashes\\n\";</p>\n\n<p>Not sure what you're intention is there, but you need to iterate over the data structure if you want to see the content (it'll be an array of references to hashes).  You might consider using the Data::Dumper module to help you see the content there.</p>\n"}], "owner": {"reputation": 165, "user_id": 4528846, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/da886a060c917c55b4141b9bcce3f778?s=128&d=identicon&r=PG&f=1", "display_name": "Hellzzar", "link": "https://stackoverflow.com/users/4528846/hellzzar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 43820254, "answer_count": 1, "score": 1, "last_activity_date": 1494074922, "creation_date": 1494071248, "last_edit_date": 1494074922, "question_id": 43820070, "link": "https://stackoverflow.com/questions/43820070/error-when-accessing-array-of-hashes", "title": "Error when accessing array of hashes", "body": "<p>I'm trying to generate a list of hashes, interacting with the user using the following script:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $KEY_1 = \"one\";\nmy $KEY_2 = \"two\";\n\n\nsub generateHash{\n    my ($value1, $value2) = (@_);\n\n    $value2 = $value1 + 5.0;\n\n    my %hash = {};\n\n    $hash{$KEY_1} = $value1;\n    $hash{$KEY_2} = $value2;\n\n    return %hash;\n}\n\nprint \"Num: \\n\";\nmy $number = &lt;&gt;;\n\nmy @hashes = ();\nmy %new_hash = {};\n\nfor ( my $i = 1; $i &lt; $number + 1; $i = $i + 1 ) {\n\n    print \"Enter the values  $i \\n\";\n\n    print \"value 1: \";\n    my $value1= &lt;&gt;;\n\n    print \"\\nvalue 2: \";\n    my $value2= &lt;&gt;;\n\n    chomp $value1;\n    chomp $value2;\n\n    %new_hash = generateHash($value1, $value2);     \n\n    push (@hashes, %new_hash);\n    print \"@hashes\\n\";\n}\n\nmy %test = $hashes[0];\nmy @keys = keys %test;\nmy @values = values %test;\n\nprint \"@keys\\n\";\nprint \"@values\\n\";\n</code></pre>\n\n<p>When I try to execute the program, it raises some errors related to use of references when accessing to the hashes within the array. I'm missing something but I can't see what, I wonder where I'm accessing to hash's reference. Thank you in advance, attached is the output from the execution:</p>\n\n<pre><code>Num: \n1\nReference found where even-sized list expected at generate_hashes.pl line 21, &lt;&gt; line 1.\nEnter the values  1 \nvalue 1: 1\n\nvalue 2: 1\nReference found where even-sized list expected at generate_hashes.pl line 12, &lt;&gt; line 3.\nUse of uninitialized value $hashes[1] in join or string at generate_hashes.pl line 32, &lt;&gt; line 3.\nHASH(0x2587a88)  one 1 two 6\nOdd number of elements in hash assignment at generate_hashes.pl line 34, &lt;&gt; line 3.\nHASH(0x2587a88)\nUse of uninitialized value $values[0] in join or string at generate_hashes.pl line 38, &lt;&gt; line 3.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1494071252, "post_id": 43819965, "comment_id": 74678538, "body": "change my $t = $r =~ s/ /bbb/r;  to my $t = $r =~ s/ /bbb/g;  note g at the end. but it will only solve one problem."}, {"owner": {"reputation": 41, "user_id": 7918059, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5181cf8c32823af74542be6f61d87cb?s=128&d=identicon&r=PG&f=1", "display_name": "nicha", "link": "https://stackoverflow.com/users/7918059/nicha"}, "reply_to_user": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1494071602, "post_id": 43819965, "comment_id": 74678634, "body": "this don&#39;t solve the problem . result will be :  i eat big pizza .my big pizza"}, {"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1494071817, "post_id": 43819965, "comment_id": 74678702, "body": "I knew that. it just fixed one problem in your codes (it might just be a typo). i posted the modified codes it worked on your example."}, {"owner": {"reputation": 41, "user_id": 7918059, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5181cf8c32823af74542be6f61d87cb?s=128&d=identicon&r=PG&f=1", "display_name": "nicha", "link": "https://stackoverflow.com/users/7918059/nicha"}, "reply_to_user": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 0, "creation_date": 1494073626, "post_id": 43819965, "comment_id": 74679236, "body": "thanks a lot for , this helped me"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7918059, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5181cf8c32823af74542be6f61d87cb?s=128&d=identicon&r=PG&f=1", "display_name": "nicha", "link": "https://stackoverflow.com/users/7918059/nicha"}, "edited": false, "score": 0, "creation_date": 1494315737, "post_id": 43820142, "comment_id": 74763046, "body": "how can i make it more fast because I use big files"}], "tags": [], "owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "is_accepted": true, "score": -1, "last_activity_date": 1494075480, "last_edit_date": 1494075480, "creation_date": 1494071694, "answer_id": 43820142, "question_id": 43819965, "link": "https://stackoverflow.com/questions/43819965/attach-frequent-words-in-text-file/43820142#43820142", "title": "Attach frequent words in text file", "body": "<p>Here is the modified code.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nmy ($f1, $f2) = ('a.txt', 'b.txt');\n\nopen(my $fh, $f1);\nmy @seq;\nforeach (&lt;$fh&gt; )\n{\n  chomp;\n  s/^\\s+|\\s+$//g;\n  push @seq, $_;\n}\nclose $fh;\n\n@seq = sort bylen @seq;  # need to sort @seq by length.\n\nopen($fh, $f2);\nforeach (&lt;$fh&gt; ) {\n  foreach my $r (@seq) {\n    my $t = $r =~ s/ /bbb/gr; \n    s/$r/$t/g;      # you may need to take care of cases of extra spaces\n  }\n  print;\n}\nclose $fh;\n\nexit 0;\n\nsub bylen {\n   length($b) &lt;=&gt; length($a);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1494073178, "last_edit_date": 1494073178, "creation_date": 1494072704, "answer_id": 43820308, "question_id": 43819965, "link": "https://stackoverflow.com/questions/43819965/attach-frequent-words-in-text-file/43820308#43820308", "title": "Attach frequent words in text file", "body": "<p>All that is wrong is your line</p>\n\n<pre><code>my $t = $r =~ s/ /bbb/r; \n</code></pre>\n\n<p>This substitution runs just <em>once</em>, and so replaces only the first space with <code>bbb</code></p>\n\n<p>You need to use a <em>global</em> substitution instead. And while we're changing this line it's best to also replace the space with <code>\\h+</code>, which matches any amount of \"horizontal space\", including both tabs and spaces</p>\n\n<pre><code>my $t = $r =~ s/\\h+/bbb/gr; \n</code></pre>\n\n<p>As it stands your code will find and replacing substrings of other entries in <code>@seq</code> if they appear earlier in the array. In this case, that means <code>big pizza</code> will be found first and converted to <code>bigbbbpizza</code>, after which\n<code>eat big pizza</code> can no longer be found. You need to first <em>sort</em> your array in descending order of length so that longer phrases are found before shorter ones</p>\n\n<pre><code>@seq = sort { length($b) &lt;=&gt; length($a) } @seq;\n</code></pre>\n\n<p>Then your program will work a little better</p>\n"}], "owner": {"reputation": 41, "user_id": 7918059, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5181cf8c32823af74542be6f61d87cb?s=128&d=identicon&r=PG&f=1", "display_name": "nicha", "link": "https://stackoverflow.com/users/7918059/nicha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 43820142, "answer_count": 2, "score": 0, "last_activity_date": 1494075480, "creation_date": 1494070425, "last_edit_date": 1592644375, "question_id": 43819965, "link": "https://stackoverflow.com/questions/43819965/attach-frequent-words-in-text-file", "title": "Attach frequent words in text file", "body": "<p>I have two files. The first contains frequent\nword sequences\nextracted from a text file</p>\n<h3>a.txt :</h3>\n<pre><code>big pizza\neat big pizza \n...\n</code></pre>\n<p>the text file is</p>\n<h3>b.txt :</h3>\n<pre><code>i eat big pizza .my big pizza ...\n</code></pre>\n<p>My problem is to add <code>bbb</code> between words from each sequence that exist in file <code>a.txt</code> and write a new file .\nso the result will be</p>\n<pre><code>i eatbbbbigbbbpizza.my bigbbbpizza...\n</code></pre>\n<p>below is my script. It adds <code>bbb</code> only between pairs 9f words. How can I correct this?</p>\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nmy ($f1, $f2) = ('a.txt', 'b.txt');\n \nopen( my $fh, $f1 );\n\nmy @seq;\n\nforeach ( &lt;$fh&gt; ) {\n  chomp; \n  s/^\\s+|\\s+$//g; \n  push @seq, $_;      \n}\nclose $fh;\n \nopen($fh, $f2);\n\nforeach (&lt;$fh&gt; ) {\n    foreach my $r (@seq) {   \n        my $t = $r =~ s/ /bbb/r; \n        if (/$r/) {\n            s/$r/$t/g;\n        }\n    }\n    print ;\n}\nclose $fh;\n</code></pre>\n"}, {"tags": ["perl", "oracle11g"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3856752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KRlF5.jpg?s=128&g=1", "display_name": "Harshit Bhatt", "link": "https://stackoverflow.com/users/3856752/harshit-bhatt"}, "edited": false, "score": 0, "creation_date": 1494022145, "post_id": 43814387, "comment_id": 74668246, "body": "I will give this a try. Although, I tried something similar to this before, it didn&#39;t worked."}, {"owner": {"reputation": 3, "user_id": 3856752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KRlF5.jpg?s=128&g=1", "display_name": "Harshit Bhatt", "link": "https://stackoverflow.com/users/3856752/harshit-bhatt"}, "edited": false, "score": 0, "creation_date": 1494023104, "post_id": 43814387, "comment_id": 74668533, "body": "Now, they are being set as &quot;undef&quot; for all substituted values [:p997=undef, :p998=undef, :p999=undef]"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 3, "user_id": 3856752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KRlF5.jpg?s=128&g=1", "display_name": "Harshit Bhatt", "link": "https://stackoverflow.com/users/3856752/harshit-bhatt"}, "edited": false, "score": 0, "creation_date": 1494132374, "post_id": 43814387, "comment_id": 74693324, "body": "I see you updated the question with the error you are getting but not your actual code (and that error isn&#39;t coming from code that uses my answer)"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 5, "last_activity_date": 1494021927, "creation_date": 1494021927, "answer_id": 43814387, "question_id": 43814340, "link": "https://stackoverflow.com/questions/43814340/passing-perl-array-to-an-oracle-prepare-query-for-the-in-clause/43814387#43814387", "title": "Passing Perl array to an Oracle prepare query for the IN clause", "body": "<p>Unless the Oracle database driver provides some other way to do it that I don't know of, you need to use a separate placeholder for each element:</p>\n\n<pre><code>$query = sprintf 'select * from xyz join abc on xyz.t=abc.t where xyz.a in (%s)',\n    join ',', ('?') x @array;\n$query_stmt = $dbh-&gt;prepare($query);\n$query_stmt-&gt;execute(@array);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3856752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KRlF5.jpg?s=128&g=1", "display_name": "Harshit Bhatt", "link": "https://stackoverflow.com/users/3856752/harshit-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1494025304, "creation_date": 1494021694, "last_edit_date": 1494025304, "question_id": 43814340, "link": "https://stackoverflow.com/questions/43814340/passing-perl-array-to-an-oracle-prepare-query-for-the-in-clause", "title": "Passing Perl array to an Oracle prepare query for the IN clause", "body": "<p>I have exhausted all options trying to pass either an array,its ref and its joined string to the IN clause in Oracle 11.2. I mostly get \"undocumented conversion\" or \"error possibly near &lt;*>\" indicator error with all tried cases.</p>\n\n<p>What may be the optimal way to pass an array to the IN clause of a prepare statement in Oracle DB?</p>\n\n<p>The prepared query is similar to :</p>\n\n<pre><code>$query = \"select * from xyz join abc on xyz.t=abc.t where xyz.a IN ?\";\n$query_stmt = $dbh-&gt;prepare($query);\n$query_stmt-&gt;execute(ARRAY(0x11223344) ||(other tried option) 'string0,string1,...');\n</code></pre>\n\n<p>Error : </p>\n\n<pre><code>DBD::Oracle::st execute failed: ORA-01460: unimplemented or  unreasonable conversion requested (DBD ERROR: OCIStmtExecute) [for Statement \"select\n                distinct cast(vt.a as varchar2(30))\n                    as a,\n                trim(to_char(value)) as b\n             from xyz vt\n             join abc vtc on vt.c\n             = vtc.c join w offer\n                on vt.d = offer.d\n                and vt.is_valid = 'Y'\n             where vt.a IN (?)\" with ParamValues: :p1=''6778168456141','6778179729141','6778200266141','6778203754141','6778208407141','6778224280141','6778224419141','6778236126141','6778249749141','6778256663141','6778260054141','6778276276141','6778285860141','6778317622141','6778321032141','6778341014141','6778347921141','6778365313141','6778370737141','6778404039141','6778405686141','6778424024141','6778443116141','6778481089141','6778529277141','6778538345141','6778591334141','6778595317141','6778619981141','6778692874141','6778767142141','6778778071141','6778797829141','6778816085141','6778867467141','6778883297141','6778895665141','6778978652141','6778996314141','6779024581141','6779081179141','6779119698141','6779125079141','6779128574141','6779128584141','6779128649141','6779128662141','6779128724141','6779142735141','6779146125141','6779146399141','6779152708141','6779153278141','6779163438141','6779164599141','6779168905141','6779187230141','6779210491141','6779278671141','6779288166141','6779304879141','6779328703141','67...']\n</code></pre>\n"}, {"tags": ["perl", "unix"], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 1626653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36RNP.jpg?s=128&g=1", "display_name": "khw", "link": "https://stackoverflow.com/users/1626653/khw"}, "edited": false, "score": 0, "creation_date": 1494439719, "post_id": 43814090, "comment_id": 74833456, "body": "Also, look at Unicode::UCD::num().  It returns undef if its string argument does not have a consistent numeric value; otherwise it returns the numeric quantity represented.  It is looking for sequences of numeric characters, so no decimal points, nor signs, nor scientific notation.  But it can be used to catch spoofing where look-alike digits from different scripts are used to give a visual appearance of a different number than actually represented"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 4, "last_activity_date": 1494020218, "creation_date": 1494020218, "answer_id": 43814090, "question_id": 43814055, "link": "https://stackoverflow.com/questions/43814055/easy-to-check-if-user-input-is-a-number-in-perl/43814090#43814090", "title": "Easy to check if user input is a number in perl?", "body": "<p>From the Perl FAQ <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-determine-whether-a-scalar-is-a-number%2fwhole%2finteger%2ffloat%3f\" rel=\"nofollow noreferrer\">How do I determine whether a scalar is a number/whole/integer/float?</a>:</p>\n\n<blockquote>\n  <p>There are also some commonly used modules for the task. <a href=\"https://metacpan.org/pod/Scalar::Util\" rel=\"nofollow noreferrer\">Scalar::Util</a> (distributed with 5.8) provides access to perl's internal function <code>looks_like_number</code> for determining whether a variable looks like a number. <a href=\"https://metacpan.org/pod/Data::Types\" rel=\"nofollow noreferrer\">Data::Types</a> exports functions that validate data types using both the above and other regular expressions. Thirdly, there is <a href=\"https://metacpan.org/pod/Regexp::Common\" rel=\"nofollow noreferrer\">Regexp::Common</a> which has regular expressions to match various types of numbers. Those three modules are available from the CPAN.</p>\n</blockquote>\n\n<p>Perl comes with excellent documentation. You should review everything linked from <code>perldoc perltoc</code> at least once a year.</p>\n"}], "owner": {"reputation": 41, "user_id": 7800047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/73227326b3332b504ab7c6fdb28d3226?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/7800047/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1271, "favorite_count": 0, "closed_date": 1494020375, "accepted_answer_id": 43814090, "answer_count": 1, "score": 0, "last_activity_date": 1494020218, "creation_date": 1494020034, "question_id": 43814055, "link": "https://stackoverflow.com/questions/43814055/easy-to-check-if-user-input-is-a-number-in-perl", "closed_reason": "Duplicate", "title": "Easy to check if user input is a number in perl?", "body": "<p>Question is just as the title says. Let's say a script prompts the user to input something, and stores said input into a variable. What's the easiest way to check if that user input/variable is a number in perl?</p>\n"}, {"tags": ["arrays", "perl", "file"], "comments": [{"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 4, "creation_date": 1494012096, "post_id": 43812274, "comment_id": 74664062, "body": "You know you are allowed to finish one file before starting to read another, right?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1494013201, "post_id": 43812274, "comment_id": 74664545, "body": "Have you considered scanning the directory and processing each file in a uniform manner? Check out <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\"><code>readdir</code></a> or the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> module, for example."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 3, "creation_date": 1494013781, "post_id": 43812274, "comment_id": 74664857, "body": "Just as a suggestion, write a subroutine that takes a file name as an argument, opens that file, reads each line, get your column of interest and sums that into a total.   Then close the file and  return that total as the result of the subroutine.  Then you can call that subroutine for each of your file names in your main section."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1494015782, "post_id": 43812274, "comment_id": 74665796, "body": "Don&#39;t use subroutine prototypes: <code>sub trim($) { ... }</code> should be <code>sub trim { ... }</code>, although I don&#39;t think you need to trim your data at all."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 3, "creation_date": 1494020816, "post_id": 43812274, "comment_id": 74667803, "body": "<a href=\"https://stackoverflow.com/a/1829927/100754\">When you find yourself adding an integer suffix to variable names, think &quot;<i>I should have used an array</i>&quot;.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1494015690, "post_id": 43813065, "comment_id": 74665757, "body": "@zdim: To be honest I think your guess was just as likely to be correct as mine!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494016360, "post_id": 43813065, "comment_id": 74666114, "body": "I think now that: &quot;<i>write it into a new file for each of those files</i>&quot; meant that (&quot;<i>information</i>&quot;) from &quot;<i>each of those files</i>&quot; goes into (one) &quot;<i>a new file</i>&quot; -- what agrees with their code. I think that you have the intent exactly right."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1494017103, "post_id": 43813065, "comment_id": 74666456, "body": "@zdim: Ah I see. I think you may be right. I just ignored the words and wrote something that did what the code appeared to be trying to do, disregarding the confusion between arrays and scalars."}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1494023992, "post_id": 43813065, "comment_id": 74668778, "body": "Hi Borodin, firstly \u0131 am sorry about my English :). In the output file, there should be 17 columns, including date, hour, equipment type like ACME A, cc type. Date- hour- NE- and cc type values are the same for all input files. The only thing that is changed is the cc_value ( which is column id 3 in every input file ). I want to write this values as a columns in the output file. For example like this;"}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1494024269, "post_id": 43813065, "comment_id": 74668873, "body": "Date-Hour-NE-CC TYPE- values in the 1.st file- values in the 2. file... - .......values in the 12th file ( 3.column ) - total count of the values                     tthank you for your kind help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1494024921, "post_id": 43813065, "comment_id": 74669048, "body": "@evenstar: So you want one line of output for each line of input? Is the number of lines the same in every file? What exactly is in the last column? It sounds like you want a total of the preceding 12 values in that line; is that right? I won&#39;t be able to do this tonight as it&#39;s midnight right now, but I&#39;ll work on it in the morning."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1494025206, "post_id": 43813065, "comment_id": 74669112, "body": "@evenstar: Are your files 200MB in total or 200MB each?"}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1494063912, "post_id": 43813065, "comment_id": 74676476, "body": "@Borodin, yes in every input file the number of columns and also rows are the same. Basically they have 3 columns and a lot of rows. Last column in the output file is the addition result of the values between column ID 5-16 for each row. And my files around 200MB in total not each. Thanks"}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1494068695, "post_id": 43813065, "comment_id": 74677779, "body": "Thanks for your help. can you please explain this part,                                  my @data = map {         chomp( my $line = &lt;$_&gt; );         ( $ne, $cc_type, $cc_count ) = split /\\t/, $line;         $cc_count;     } @fh;"}, {"owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1494069078, "post_id": 43813065, "comment_id": 74677898, "body": "I didnt understand the use of map function exactly, the rest is ok ."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "edited": false, "score": 0, "creation_date": 1494071652, "post_id": 43813065, "comment_id": 74678652, "body": "@evenstar: <code>map</code> converts one list of values into another by applying a block of code to each item of the original list.  That second <code>map</code> converts <code>@fh</code> (the array of file handles) into <code>@data</code> (the value in the third column of the files). It does it by reading from the file handle into <code>$line</code>, <code>chomp</code>ing that line, splitting it into three fields <code>$ne</code>, <code>$cc_type</code>, and  <code>$cc_count</code>, and returning the third field <code>$cc_count</code>. Using this to map from the list of 12 file handles results in a list of 12 values for the third column of the next line from each handle."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1494064946, "last_edit_date": 1494064946, "creation_date": 1494015134, "answer_id": 43813065, "question_id": 43812274, "link": "https://stackoverflow.com/questions/43812274/how-can-i-read-multiple-tab-separated-files-without-using-a-lot-of-while-loops/43813065#43813065", "title": "How can I read multiple tab-separated files without using a lot of while loops", "body": "\n\n<h3>Update</h3>\n\n<p>Now that I understand your requirement better I can write a more appropriate solution</p>\n\n<p>To test my code I've used twelve copies of this input file</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ACME A  0   2\nACME A  1   3\nACME A  2   5\nACME A  3   7\nACME A  4   11\nACME A  5   13\nACME A  6   17\n</code></pre>\n\n<p>which is the same as yours except that I've added some variation to the last column to make it clearer whether the code is working</p>\n\n<p>Note that I have added <code>use autodie</code>, which removes the need to explicitly check the status of file operations like <code>open</code></p>\n\n<p>I've used <code>map</code> to convert an array of file names to an array of open file handles <code>@fh</code>, and then <code>until ( any { eof $_ } @fh ) { ... }</code> to read a line from each of the files until any of them reaches end of file</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nuse List::Util qw/ any sum /;\n\nmy @minutes = qw/ 01 06 11 16 21 26 31 36 41 46 51 56 /;\n\nmy @files = map \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_$_.txt\", @minutes;\n\nmy $output_file = \"C:/Perl64/output/denemecik.txt\";\n\nmy ( $date, $hour ) = $files[0] =~ /(\\d\\d\\d\\d-\\d\\d-\\d\\d)_(\\d\\d)/;\n\nmy @fh = map {\n    open my $fh, '&lt;', $_;\n    $fh;\n} @files;\n\nopen my $out_fh, '&gt;', $output_file;\n\nuntil ( any { eof $_ } @fh ) {\n\n    my ( $ne, $cc_type, $cc_count );\n\n    my @data = map {\n        chomp( my $line = &lt;$_&gt; );\n        ( $ne, $cc_type, $cc_count ) = split /\\t/, $line;\n        $cc_count;\n    } @fh;\n\n    print $out_fh join( \"\\t\", $date, $hour, $ne, $cc_type, @data, sum @data ), \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>2017-02-03  00  ACME A  0   2   2   2   2   2   2   2   2   2   2   2   2   24\n2017-02-03  00  ACME A  1   3   3   3   3   3   3   3   3   3   3   3   3   36\n2017-02-03  00  ACME A  2   5   5   5   5   5   5   5   5   5   5   5   5   60\n2017-02-03  00  ACME A  3   7   7   7   7   7   7   7   7   7   7   7   7   84\n2017-02-03  00  ACME A  4   11  11  11  11  11  11  11  11  11  11  11  11  132\n2017-02-03  00  ACME A  5   13  13  13  13  13  13  13  13  13  13  13  13  156\n2017-02-03  00  ACME A  6   17  17  17  17  17  17  17  17  17  17  17  17  204\n</code></pre>\n\n<p>I hope this helps</p>\n\n<hr>\n\n<p>It is far from clear what you want, as your words describe something very different from what your code does</p>\n\n<p>Here's what I think you want. It basically makes your code work. It calculates a total of the third column for each of the files and prints them out in a single line, just like your <code>print OUTPUT</code> statement</p>\n\n<p>If this isn't what you want then you need to explain things better and gives some clear examples</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nmy @files = map \"C:/Perl64/output/sbc_cause_comp_intraday_$_.txt\", qw/\n    2017-02-03_00_01\n    2017-02-03_00_06\n    2017-02-03_00_11\n    2017-02-03_00_16\n    2017-02-03_00_21\n    2017-02-03_00_26\n    2017-02-03_00_31\n    2017-02-03_00_36\n    2017-02-03_00_41\n    2017-02-03_00_46\n    2017-02-03_00_51\n    2017-02-03_00_56\n/;\n\nmy $output_file = \"C:/Perl64/output/denemecik.txt\";\n\nmy $date = 'sbc_cause_comp_intraday_2017-02-03_00_01';\nmy ( $date1, $hour ) = $date =~ /(\\d\\d\\d\\d-\\d\\d-\\d\\d)_(\\d\\d)/;\n\nmy @counts;\nmy ( $ne, $cc_type );\n\nfor my $file ( @files ) {\n\n    push @counts, 0;\n\n    open my $fh, '&lt;', $file;\n\n    while ( &lt;$fh&gt; ) {\n        my @fields = split /\\t/;\n        ( $ne, $cc_type ) = @fields unless $ne;\n        $counts[-1] += $fields[2];\n    }\n}\n\nmy $total;\n$total += $_ for @counts;\n\n{\n    open my $fh, '&gt;', $output_file;\n    print $fh join( ' ', $date1, $hour, $ne, $cc_type, @counts, $total ), \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7215742, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f67fdc1c7393d61874d29691743e071b?s=128&d=identicon&r=PG&f=1", "display_name": "evenstar", "link": "https://stackoverflow.com/users/7215742/evenstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 43813065, "answer_count": 1, "score": -3, "last_activity_date": 1494064946, "creation_date": 1494011644, "last_edit_date": 1494024709, "question_id": 43812274, "link": "https://stackoverflow.com/questions/43812274/how-can-i-read-multiple-tab-separated-files-without-using-a-lot-of-while-loops", "title": "How can I read multiple tab-separated files without using a lot of while loops", "body": "<p>I have bunch of input files around 200MB which I need to read in Perl, extract specific information, and write it into a new file for each of those files. How can I do it without using a lot of while loops.</p>\n\n<p>Each input file is tab-separated like this. The fields are <code>ACME A</code>, <code>0</code>, <code>2</code></p>\n\n<p>In every file I want to obtain then third column </p>\n\n<pre><code>ACME A  0   2\nACME A  1   0\nACME A  2   0\nACME A  3   0\nACME A  4   0\nACME A  5   0\nACME A  6   0\n</code></pre>\n\n<p>Here is my code so far;</p>\n\n<pre><code>#! /usr/bin/perl -w\n\n#compiler profilleri\n\nuse strict;\nuse warnings;\n\nsub trim($) {\n    my $string = shift;\n    $string =~ s/^\\s+//;\n    $string =~ s/\\s+$//;    #/ turn off wrong syntax highlight\n    return $string;\n}\n\n#dosya locationlar\u0131\n\nmy $input_file   = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_01.txt\";\nmy $input_file1  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_06.txt\";\nmy $input_file2  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_11.txt\";\nmy $input_file3  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_16.txt\";\nmy $input_file4  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_21.txt\";\nmy $input_file5  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_26.txt\";\nmy $input_file6  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_31.txt\";\nmy $input_file7  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_36.txt\";\nmy $input_file8  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_41.txt\";\nmy $input_file9  = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_46.txt\";\nmy $input_file10 = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_51.txt\";\nmy $input_file11 = \"C:/Perl64/output/sbc_cause_comp_intraday_2017-02-03_00_56.txt\";\n\nmy $output_file = \"C:/Perl64/output/denemecik.txt\";\n\n#komutlar######\n\nmy $ne;\nmy @cc_type;\nmy @cc_count;\nmy @cc_count1;\nmy @cc_count2;\nmy @cc_count3;\nmy @cc_count4;\nmy @cc_count5;\nmy @cc_count6;\nmy @cc_count7;\nmy @cc_count8;\nmy @cc_count9;\nmy @cc_count10;\nmy @cc_count11;\n\nmy @total;\nmy $i;\n\nmy @count   = 0;\nmy @count1  = 0;\nmy @count2  = 0;\nmy @count3  = 0;\nmy @count4  = 0;\nmy @count5  = 0;\nmy @count6  = 0;\nmy @count7  = 0;\nmy @count8  = 0;\nmy @count9  = 0;\nmy @count10 = 0;\nmy @count11 = 0;\n\nmy $date  = 'sbc_cause_comp_intraday_2017-02-03_00_01';\nmy $date1 = substr( $date, 24, 10 );\nmy $hour  = substr( $date, 35, 1 );\n\n#print ($hour);\n\nopen INPUT,   \"&lt; $input_file\"   or die \"$0: open of $input_file failed, error: $! \\n\";\nopen INPUT1,  \"&lt; $input_file1\"  or die \"$0: open of $input_file1 failed, error: $! \\n\";\nopen INPUT2,  \"&lt; $input_file2\"  or die \"$0: open of $input_file2 failed, error: $! \\n\";\nopen INPUT3,  \"&lt; $input_file3\"  or die \"$0: open of $input_file3 failed, error: $! \\n\";\nopen INPUT4,  \"&lt; $input_file4\"  or die \"$0: open of $input_file4 failed, error: $! \\n\";\nopen INPUT5,  \"&lt; $input_file5\"  or die \"$0: open of $input_file5 failed, error: $! \\n\";\nopen INPUT6,  \"&lt; $input_file6\"  or die \"$0: open of $input_file6 failed, error: $! \\n\";\nopen INPUT7,  \"&lt; $input_file7\"  or die \"$0: open of $input_file7 failed, error: $! \\n\";\nopen INPUT8,  \"&lt; $input_file8\"  or die \"$0: open of $input_file8 failed, error: $! \\n\";\nopen INPUT9,  \"&lt; $input_file9\"  or die \"$0: open of $input_file9 failed, error: $! \\n\";\nopen INPUT10, \"&lt; $input_file10\" or die \"$0: open of $input_file10 failed, error: $! \\n\";\nopen INPUT11, \"&lt; $input_file11\" or die \"$0: open of $input_file11 failed, error: $! \\n\";\n\nopen OUTPUT, \"&gt; $output_file\" or die \"$0: open of $output_file failed, error: $! \\n\";\n\nprint OUTPUT ( \"**********************************************************************\\n\" );\n\nwhile ( defined( $_ = &lt;INPUT&gt; ) ) {\n\n    my $line = $_;\n    my ( $ne, $cc_type, $cc_count ) = split( '\\t', $line );\n    my $count = trim( $cc_count );\n\n    print( \"$ne\\n\" );\n\n    while ( defined( $_ = &lt;INPUT1&gt; ) ) {\n        my $line1 = $_;\n        my ( undef, undef, $cc_count1 ) = split( '\\t', $line1 );\n        my $count1 = trim( $cc_count1 );\n\n        #print(\"$count1\\n\");\n        while ( defined( $_ = &lt;INPUT2&gt; ) ) {\n            my $line2 = $_;\n            my ( undef, undef, $cc_count2 ) = split( '\\t', $line2 );\n            my $count2 = trim( $cc_count2 );\n\n            #print(\"$cc_count2\\n\");\n            while ( defined( $_ = &lt;INPUT3&gt; ) ) {\n                my $line3 = $_;\n                my ( undef, undef, $cc_count3 ) = split( '\\t', $line3 );\n                my $count3 = trim( $cc_count3 );\n\n                #print(\"$cc_count3\\n\");\n                while ( defined( $_ = &lt;INPUT4&gt; ) ) {\n                    my $line4 = $_;\n                    my ( undef, undef, $cc_count4 ) = split( '\\t', $line4 );\n                    my $count4 = trim( $cc_count4 );\n\n                    # print(\"$cc_count4\\n\");\n                    while ( defined( $_ = &lt;INPUT5&gt; ) ) {\n                        my $line5 = $_;\n                        my ( undef, undef, $cc_count5 ) = split( '\\t', $line5 );\n                        my $count5 = trim( $cc_count5 );\n\n                        #print(\"$cc_count5\\n\");\n                        while ( defined( $_ = &lt;INPUT6&gt; ) ) {\n                            my $line6 = $_;\n                            my ( undef, undef, $cc_count6 ) = split( '\\t', $line6 );\n                            my $count6 = trim( $cc_count6 );\n\n                            #print(\"$cc_count6\\n\");\n                            while ( defined( $_ = &lt;INPUT7&gt; ) ) {\n                                my $line7 = $_;\n                                my ( undef, undef, $cc_count7 ) = split( '\\t', $line7 );\n                                my $count7 = trim( $cc_count7 );\n\n                                #print(\"$cc_count7\\n\");\n                                while ( defined( $_ = &lt;INPUT8&gt; ) ) {\n                                    my $line8 = $_;\n                                    my ( undef, undef, $cc_count8 ) = split( '\\t', $line8 );\n                                    my $count8 = trim( $cc_count8 );\n\n                                    #print(\"$cc_count8\\n\");\n                                    while ( defined( $_ = &lt;INPUT9&gt; ) ) {\n                                        my $line9 = $_;\n                                        my ( undef, undef, $cc_count9 ) = split( '\\t', $line9 );\n                                        my $count9 = trim( $cc_count9 );\n\n                                        #print(\"$cc_count9\\n\");\n                                        while ( defined( $_ = &lt;INPUT10&gt; ) ) {\n                                            my $line10 = $_;\n                                            my ( undef, undef, $cc_count10 ) = split( '\\t', $line10 );\n                                            my $count10 = trim( $cc_count10 );\n\n                                            #print(\"$cc_count10\\n\");\n                                            while ( defined( $_ = &lt;INPUT11&gt; ) ) {\n                                                my $line11 = $_;\n                                                my ( undef, undef, $cc_count11 ) = split( '\\t', $line11 );\n                                                my $count11 = trim( $cc_count11 );\n\n                                                #print(\"$cc_count11\\n\");\n\n                                                for ( $i = 0; $i &lt; scalar @count; $i++ ) {\n\n                                                    $total[$i] = $count[$i]\n                                                            + $count1[$i]\n                                                            + $count2[$i]\n                                                            + $count3[$i]\n                                                            + $count4[$i]\n                                                            + $count5[$i]\n                                                            + $count6[$i]\n                                                            + $count7[$i]\n                                                            + $count8[$i]\n                                                            + $count9[$i]\n                                                            + $count10[$i]\n                                                            + $count11[$i];\n\n                                                    #   print(\"@total\\n\");\n                                                }\n\n                                                print OUTPUT (\n                                                    \"$date1 $hour $ne $cc_type  $count  $count1 $count2 $count3 $count4 $count5 $count6 $count7 $count8 $count9 $count10    $count11 $total\\n\"\n                                                );\n\n                                                #   print(\"@total\\n\");\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nclose OUTPUT;\nclose INPUT;\nclose INPUT1;\nclose INPUT2;\nclose INPUT3;\nclose INPUT4;\nclose INPUT5;\nclose INPUT6;\nclose INPUT7;\nclose INPUT8;\nclose INPUT9;\nclose INPUT10;\nclose INPUT11;\n</code></pre>\n\n<p>Can you please help me to write this code more logically? Right now, I am obtaining the values in an array but the output file shows only the first row as true, and the remaining rows just the iteration of the first one, so it is not true.</p>\n\n<p>The second problem is I don't know how to add number values in one row properly. I want to add those values for each row and write this value as a final column in output file.</p>\n\n<p>Here is the example of output file;</p>\n\n<pre><code> DATE / HOUR    NE  CC TYPE FILE 00_01  FILE / 00_06    FILE / 00_11    FILE  \n 00_16  FILE  00_21 FILE  00_26 FILE 00_31  FILE 00_36  FILE  00_41 FILE  \n 00_46  FILE  / 00_51   FILE  / 00_56   TOTAL\n 2/3/2017 00    ACME A  0   2   4   43  4   4   25  4   3   26  4   4   18  141\n 2/3/2017 00    ACME A  1   0   0   1   8   0   0   0   0   4   0   0   0   13\n 2/3/2017 00    ACME A  2   0   0   0   0   0   0   0   0   0   0   0   0   0\n 2/3/2017 00    ACME A  3   0   0   3   1   0   6   5   0   6   1   4   1   27\n 2/3/2017 00    ACME A  4   0   0   0   0   0   0   0   0   0   0   0   0   0\n 2/3/2017 00    ACME A  5   0   0   0   0   0   0   0   0   0   0   0   0   0\n</code></pre>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 4, "creation_date": 1494006813, "post_id": 43811041, "comment_id": 74661409, "body": "<i>without reloading the page</i> means you&#39;ll want to use JavaScript on the front end, not Perl on the back end"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1494018837, "post_id": 43811041, "comment_id": 74667077, "body": "@cajwine: Much as I am fond of Perl and dislike JavaScript, I have to acknowledge that the latter is far better suited to DOM manipulation than Perl."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1494018710, "last_edit_date": 1494018710, "creation_date": 1494008285, "answer_id": 43811446, "question_id": 43811041, "link": "https://stackoverflow.com/questions/43811041/using-perl-to-update-html/43811446#43811446", "title": "Using Perl to update HTML", "body": "<p>You can't do that.</p>\n\n<p><code>/cgi-bin/switchButtons.cgi</code> is a Perl program <em>on the server</em>.  Clicking on one of the form's buttons sends a request message to the server, which runs <code>switchButtons.cgi</code>. The output from that program is the contents of a new web page which is sent back to the client (the browser). Of course that involves loading a new page</p>\n\n<p>You could do it in JavaScript, which is part of the page and runs on the client. You can specify that a button will cause the browser to execute some JavaScript, which could alter the page 9n any way you want. But that doesn't answer your question</p>\n"}], "owner": {"reputation": 23, "user_id": 6236184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d5017dcafbb643aeebcfc4e230ad09?s=128&d=identicon&r=PG&f=1", "display_name": "fredster1777", "link": "https://stackoverflow.com/users/6236184/fredster1777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 43811446, "answer_count": 1, "score": 0, "last_activity_date": 1494018710, "creation_date": 1494006647, "last_edit_date": 1494008038, "question_id": 43811041, "link": "https://stackoverflow.com/questions/43811041/using-perl-to-update-html", "title": "Using Perl to update HTML", "body": "<p>I am having trouble wrapping my head around getting Perl to work with HTML. I am trying to do something I think is simple, but I cant find anything like it online.</p>\n\n<p>Let's say I have a blank web page that has only a button labeled <code>new</code>, and when I press it, I want to destroy the button and create two new buttons, one that is a <code>submit</code> button, and one <code>cancel</code> that creates the old <code>new</code> button.</p>\n\n<p>How would I go about doing that, without reloading the page?</p>\n\n<p>From my understanding, the original HTML code would look something like this.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form action=\"/cgi-bin/switchButtons.cgi\" method=\"POST\"&gt;\n&lt;input type=\"button\" value=\"new\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>and afterward should look like this.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>    &lt;form action=\"/cgi-bin/switchButtons.cgi\" method=\"POST\"&gt;\n    &lt;input type=\"submit\" value=\"submit\"&gt;\n    &lt;input type=\"button\" value=\"cancel\"&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>On pressing <code>cancel</code>, it should refer back to the first snippet.</p>\n"}, {"tags": ["perl", "post", "migration", "microsoft-translator"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1493999588, "post_id": 43808794, "comment_id": 74657386, "body": "<code>=&gt;</code> (the fat comma) automatically quotes barewords on the lhs which would not work with dashes, so you need <code>&#39;Ocp-Apim-Subscription-Key&#39;</code> to begin with. Do you need to decode the response?"}, {"owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493999652, "post_id": 43808794, "comment_id": 74657432, "body": "@Sinan&#220;n&#252;r still helpful thank you"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1494003527, "post_id": 43808794, "comment_id": 74659616, "body": "Please post your output as text. Images aren&#39;t very useful."}], "answers": [{"comments": [{"owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1494011830, "post_id": 43809945, "comment_id": 74663943, "body": "Having other issues with the process unrelated to this so I haven&#39;t been able to test, but I am going to accept this as an answer as I am pretty sure it is right. (Process is not making it far enough for me to actually test currently)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1494018383, "post_id": 43809945, "comment_id": 74666914, "body": "If you get specific diagnostics related to this, update your question with the <b>text</b> of any errors/warnings."}, {"owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 1, "creation_date": 1494020406, "post_id": 43809945, "comment_id": 74667660, "body": "Will do, currently though someone else is looking into the issue. It does not seem like the process is making it to the token or api call at this time."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 1, "last_activity_date": 1494005437, "last_edit_date": 1494005437, "creation_date": 1494002356, "answer_id": 43809945, "question_id": 43808794, "link": "https://stackoverflow.com/questions/43808794/get-access-token-in-perl-after-microsoft-translator-api-migration/43809945#43809945", "title": "get_access_token in perl after Microsoft Translator API migration", "body": "<p>Add</p>\n\n<pre><code># Sample code uses five minutes\nuse constant DEFAULT_TOKEN_LIFETIME =&gt; 5 * 60;\n</code></pre>\n\n<p>From a cursory look, the following might work:</p>\n\n<pre><code>if (!$token or time &gt; $expire - 5) {\n    $token = '';\n    console_log(\"Getting a new access token.\") if ($debug);\n    my $response = $ua-&gt;post(\n        \"https://api.cognitive.microsoft.com/sts/v1.0/issueToken\",\n        [\n            'Ocp-Apim-Subscription-Key' =&gt; $newazurekey,\n        ],\n    );\n    if ($response-&gt;is_success) {\n        $token = \"Bearer \" . $response-&gt;decoded_content;\n        $expire = time + DEFAULT_TOKEN_LIFETIME;\n        if ($fh) {\n            seek($fh, 0,0);\n            print $fh \"expire:$expire\\n\";\n            print $fh \"token:$token\\n\";\n            truncate($fh, tell($fh));\n        }\n    } else {\n        console_log(\"Failed to get Access Token.\") if ($debug);\n    }\n}\nclose $fh if($fh);\nreturn $token;\n}\n</code></pre>\n\n<p>This <a href=\"https://github.com/MicrosoftTranslator/GetAzureToken/blob/dce055012a22df4c05c46f8d93c93247a1cbc5f8/AzureAuthToken.cs#L19\" rel=\"nofollow noreferrer\">comment</a> says token lifetime is ten minutes, but the code sample uses a five minute interval:</p>\n\n<blockquote>\n<pre><code>// Use a duration of 5 minutes, which is less than the actual token lifetime of 10 minutes.\nprivate static readonly TimeSpan TokenCacheDuration = new TimeSpan(0, 5, 0);\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 43809945, "answer_count": 1, "score": 0, "last_activity_date": 1494005437, "creation_date": 1493998424, "last_edit_date": 1494000320, "question_id": 43808794, "link": "https://stackoverflow.com/questions/43808794/get-access-token-in-perl-after-microsoft-translator-api-migration", "title": "get_access_token in perl after Microsoft Translator API migration", "body": "<p><a href=\"https://cognitive.uservoice.com/knowledgebase/articles/1128340-announcements-action-required-before-april-30-20\" rel=\"nofollow noreferrer\">Microsoft DataMarket platform retired on April 30, 2017</a> and moved the Microsoft Translator API  to Azure. </p>\n\n<p>They have a full example of how to get the new token in <a href=\"https://github.com/MicrosoftTranslator/GetAzureToken\" rel=\"nofollow noreferrer\">C# here</a> </p>\n\n<p>Our old process, however, is perl which I have zero prior experience with. It grabbed the token using <code>post</code> in the code below :</p>\n\n<pre><code>if (!$token or time &gt; $expire - 5) {\n    $token = '';\n    console_log(\"Getting a new access token.\") if ($debug);\n    my $response = $ua-&gt;post(\n        \"https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/\",\n        [\n            client_id     =&gt; $clientid,\n            client_secret =&gt; $clientsecret,\n            scope         =&gt; 'http://api.microsofttranslator.com',\n            grant_type    =&gt; 'client_credentials',\n        ],\n    );\n    if ($response-&gt;is_success and $response-&gt;content =~ /^\\{\"token_type\":\".+?\",\"access_token\":\"(.+?)\",\"expires_in\":\"(\\d+?)\",\"scope\":\".+?\"\\}$/) {\n        $token = uri_escape(\"Bearer $1\");\n        $expire = time + $2;\n        if ($fh) {\n            seek($fh, 0,0);\n            print $fh \"expire:$expire\\n\";\n            print $fh \"token:$token\\n\";\n            truncate($fh, tell($fh));\n        }\n    } else {\n        console_log(\"Failed to get Access Token.\") if ($debug);\n    }\n}\nclose $fh if($fh);\nreturn $token;\n}\n</code></pre>\n\n<p>I was thinking that this could be as simple as changing to the updated url and scraping the old client_id and client secret, something like this :</p>\n\n<pre><code>my $response = $ua-&gt;post(\n        \"https://api.cognitive.microsoft.com/sts/v1.0/issueToken\",\n        [\n               //Ocp-Apim-Subscription-Key =&gt; newazurekey\n        ],\n    );\n</code></pre>\n\n<p>I have two concerns though</p>\n\n<blockquote>\n  <p>1) The documentation sites I have found and read, one says\n  Ocp-Apim-Subscription-Key is a header, the other a parameter is the code <code>Ocp-Apim-Subscription-Key =&gt; newazurekey</code> ok? does Perl allow dashes? </p>\n</blockquote>\n\n<p>Documentation sites : <a href=\"https://dev.cognitive.microsoft.com/docs/services/57346a70b4769d2694911369/operations/57346edcb5816c23e4bf7421\" rel=\"nofollow noreferrer\">one</a>, <a href=\"http://docs.microsofttranslator.com/oauth-token.html\" rel=\"nofollow noreferrer\">two</a>, <a href=\"https://dev.cognitive.microsoft.com/docs/services/57346a70b4769d2694911369/operations/57346edcb5816c23e4bf7421/console\" rel=\"nofollow noreferrer\">three</a></p>\n\n<blockquote>\n  <p>2) The response recieved testing the API doesn't seem to have the\n  <code>token_type:</code> <code>access_token:</code> <code>expires_in:</code> or <code>scope:</code> like in the old\n  code</p>\n</blockquote>\n\n<p>I'm referring to this condition </p>\n\n<pre><code>if ($response-&gt;is_success and $response-&gt;content =~ /^\\{\"token_type\":\".+?\",\"access_token\":\"(.+?)\",\"expires_in\":\"(\\d+?)\",\"scope\":\".+?\"\\}$/)\n</code></pre>\n\n<p>The response looks like this </p>\n\n<p><a href=\"https://i.stack.imgur.com/cXvc6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cXvc6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Am I on the right track for grabbing the token correctly or will more changes need to be made? </p>\n"}, {"tags": ["arrays", "perl", "loops"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1493992228, "post_id": 43806140, "comment_id": 74652340, "body": "Probably, but I think this might be better framed as a wider question - what&#39;s your input, and desired output data structures? Because this looks like an <code>XY problem</code> to me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493995706, "post_id": 43806140, "comment_id": 74654845, "body": "The real &quot;problem&quot; is that they are using parallel arrays."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1493996528, "post_id": 43806140, "comment_id": 74655394, "body": "A set of parallel arrays (effectively an HoA) use less memory than an array of objects (AoH), but it&#39;s so much harder to work with."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 7, "creation_date": 1493992905, "post_id": 43806340, "comment_id": 74652910, "body": "I learned some Perl today. I didn&#39;t think that <code>\\(@foo, @bar, @baz)</code> would do what it does. Thanks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493993269, "post_id": 43806340, "comment_id": 74653164, "body": "I didn&#39;t know either. I tried it on a hunch. I can&#39;t explain how the operand of the \\ doesn&#39;t become a flattened list. But it DWIM so hooray"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1493995092, "post_id": 43806340, "comment_id": 74654416, "body": "Perl comes with excellent documentation. One should regularly read everything linked from <code>perldoc perltoc</code> at least once a year. See <code>perldoc perlref</code>, in &quot;Making References&quot;: &quot;<i>Taking a reference to an enumerated list is not the same as using         square brackets--instead it&#39;s the same as creating a list of         references!</i>&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493995118, "post_id": 43806340, "comment_id": 74654434, "body": "@DaveCross, Wumpus, was interested too, so looked into it and found this in perlref: &quot;Taking a reference to an enumerated list is...the same as creating a list of references!&quot;  Exclamation point definitely warranted.  Weird inconsistent behavior too as <code>\\(@a)</code> doesn&#39;t behave like <code>\\(@a,@b)</code>.  Fun stuff."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493995353, "post_id": 43806340, "comment_id": 74654608, "body": "To be clear: I didn&#39;t expect it to do the same as square brackets. I expected it to flatten all the array elements into a single list and return a list of references to those elements."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 2, "creation_date": 1493995437, "post_id": 43806340, "comment_id": 74654675, "body": "I must have had a distant memory of reading that, which gave me the idea to try it. Still I wouldn&#39;t want to try to understand the part of the grammar that actually lets the commas inside the parentheses know that they shouldn&#39;t do their usual list-flattening thing because there&#39;s a backslash at the next node up the parse tree"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1493996628, "post_id": 43806340, "comment_id": 74655471, "body": "See also <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=131061\" rel=\"nofollow noreferrer\">Documentation of backslash operator inducing list context for its operand is missing</a>"}, {"owner": {"reputation": 41, "user_id": 7968922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoz9e.png?s=128&g=1", "display_name": "Flo", "link": "https://stackoverflow.com/users/7968922/flo"}, "edited": false, "score": 0, "creation_date": 1494228403, "post_id": 43806340, "comment_id": 74719936, "body": "Thanks for this hint!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 9, "last_activity_date": 1493991155, "creation_date": 1493991155, "answer_id": 43806340, "question_id": 43806140, "link": "https://stackoverflow.com/questions/43806140/how-to-apply-splice-or-any-other-function-to-several-different-arrays-in-perl/43806340#43806340", "title": "How to apply splice or any other function to several different arrays in Perl?", "body": "<p>You could iterate over an array of references:</p>\n\n<pre><code>@all_arrays = \\( # Note the ref-making backslash applied to the list\n    @identifiers,\n    @sequences,\n    @optional_informations,\n    @quality_scores,\n    @barcodes\n);\nfor $array (@all_arrays)\n{\n    splice @$array, $i, 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1493995625, "post_id": 43807831, "comment_id": 74654791, "body": "Indeed, this is the nice version you should use when you&#39;re willing to refactor the rest of the code using those arrays."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493995967, "post_id": 43807831, "comment_id": 74655021, "body": "@WumpusQ.Wumbley It would also make it easier to deal with a situation where an additional variable is added to the analysis. Although, I am guessing <code>@optional_informations</code> is a catch-all for that kind of stuff, similar to database fields stuffed with comma-separated data etc."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493996219, "post_id": 43807831, "comment_id": 74655181, "body": "Probably should be an AoH rather than an HoA. <code>[ { identifier =&gt; $identifier0, sequence =&gt; $sequence0, }, { ... }, ... ]</code>. Or even an HoH so you can &quot;splice&quot; more easily. <code>{ $identifier0 =&gt; { identifier =&gt; $identifier0, sequence =&gt; $sequence0, }, $identifier1 =&gt; { ... }, ... ]</code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493996688, "post_id": 43807831, "comment_id": 74655518, "body": "@ikegami It really depends. One thing is certain, they should not be stored in individual named arrays."}, {"owner": {"reputation": 41, "user_id": 7968922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoz9e.png?s=128&g=1", "display_name": "Flo", "link": "https://stackoverflow.com/users/7968922/flo"}, "edited": false, "score": 0, "creation_date": 1494228451, "post_id": 43807831, "comment_id": 74719966, "body": "Yes, using a HoH makes more sense. Thanks a lot!"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 7, "last_activity_date": 1493997922, "last_edit_date": 1493997922, "creation_date": 1493995391, "answer_id": 43807831, "question_id": 43806140, "link": "https://stackoverflow.com/questions/43806140/how-to-apply-splice-or-any-other-function-to-several-different-arrays-in-perl/43807831#43807831", "title": "How to apply splice or any other function to several different arrays in Perl?", "body": "<p>When you find yourself wanting to do similar things to a number of related data structures, that is an indication they should be members of a larger data structure. In this case, you could put all the arrays in a hash:</p>\n\n<pre><code>my %dataset = (\n    identifiers    =&gt; [],\n    sequences      =&gt; [],\n    optional_info  =&gt; [],\n    quality_scores =&gt; [],\n    barcodes       =&gt; [],\n);\n\nif ( /MATCH/ ) {\n    splice @$_, $i, 1 for values %dataset;\n}\n</code></pre>\n\n<p>In fact, as @ikegami notes in comments, other data structures might be more appropriate depending on the kind of operations you are may carry out. For example, if you ever need to select records using a subset of the values of a variable, say <code>quality_scores</code> between 30 and 70, it would be better to store the data as an array of hashes (if the order matters), or as a hash of hashes (if the order does not matter or if you are willing to add an ordinal to the data set.</p>\n\n<p>For example,</p>\n\n<pre><code> my %dataset = (\n    id0 =&gt; {\n        t =&gt; '...',\n        id =&gt; '...',\n        sequence =&gt; '...',\n        optional_info =&gt; '...',\n        quality_score =&gt; '...',\n        barcoode =&gt; '...',\n    },\n    # ...\n    idn =&gt; {\n        t =&gt; '...',\n        id =&gt; '...',\n        sequence =&gt; '...',\n        optional_info =&gt; '...',\n        quality_score =&gt; '...',\n        barcoode =&gt; '...',\n    },\n );\n</code></pre>\n\n<p>With that data structure, you can delete a specific record using its identifier (or index if you key on <code>t</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1494229357, "post_id": 43810419, "comment_id": 74720415, "body": "What does this answer add that the other answers do not capture?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7967251, "user_type": "registered", "profile_image": "https://graph.facebook.com/1637406896288188/picture?type=large", "display_name": "Tejas Sharma", "link": "https://stackoverflow.com/users/7967251/tejas-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1494004080, "creation_date": 1494004080, "answer_id": 43810419, "question_id": 43806140, "link": "https://stackoverflow.com/questions/43806140/how-to-apply-splice-or-any-other-function-to-several-different-arrays-in-perl/43810419#43810419", "title": "How to apply splice or any other function to several different arrays in Perl?", "body": "<p>we can collectively store references of arrays in an array and iterate through it as below.</p>\n\n<pre><code>foreach my $arr_ref (\\(@identifiers,@sequences,@optional_informations,@quality_scores)){\n\n     my @tmparr=@{ $arr_ref }[3,4];#slice operation or any other operation can be performed\n\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7968922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xoz9e.png?s=128&g=1", "display_name": "Flo", "link": "https://stackoverflow.com/users/7968922/flo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1494004080, "creation_date": 1493990650, "question_id": 43806140, "link": "https://stackoverflow.com/questions/43806140/how-to-apply-splice-or-any-other-function-to-several-different-arrays-in-perl", "title": "How to apply splice or any other function to several different arrays in Perl?", "body": "<p>I'm trying to shorten the following code:</p>\n\n<pre><code>    if ( /MATCH/ ){\n        splice @identifiers,            $i, 1;\n        splice @sequences,              $i, 1;\n        splice @optional_informations,  $i, 1;\n        splice @quality_scores,         $i, 1;\n        splice @barcodes,               $i, 1;\n    }\n</code></pre>\n\n<p>Is there a way to iterate over each array and perform splice or any other function? </p>\n"}, {"tags": ["perl", "xls"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "edited": false, "score": 1, "creation_date": 1493992727, "post_id": 43805924, "comment_id": 74652754, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/429193/whats-the-best-way-to-parse-excel-file-in-perl\">What&#39;s the best way to parse Excel file in Perl?</a>.  Note that this is an old question, but if it really is XLS, not XLSX, it&#39;s still correct.  There are other modules out there, too."}, {"owner": {"reputation": 47, "user_id": 5592251, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RsU82.gif?s=128&g=1", "display_name": "nagualcode", "link": "https://stackoverflow.com/users/5592251/nagualcode"}, "edited": false, "score": 0, "creation_date": 1494009790, "post_id": 43805924, "comment_id": 74662911, "body": "I can&#39;t find in that answers how to output an specific cell (by row and columm number)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "edited": false, "score": 0, "creation_date": 1494011254, "post_id": 43805924, "comment_id": 74663663, "body": "The top answer includes a complete working example that gets data from a specific cell. Hint: the relevant function is called get_cell."}], "answers": [{"tags": [], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "is_accepted": false, "score": 0, "last_activity_date": 1494015893, "last_edit_date": 1494015893, "creation_date": 1494015367, "answer_id": 43813116, "question_id": 43805924, "link": "https://stackoverflow.com/questions/43805924/perl-bash-echo-the-value-of-an-specific-xls-cell-to-a-text-file/43813116#43813116", "title": "Perl/Bash: Echo the value of an specific .XLS cell to a text file", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Spreadsheet::Read;\n\n\n\n  sub get_cell {\n  # send the file the sheet and the cell as \n  # command line arguments\n    my ($file, $sheet, $cell) = @ARGV;\n    return 0 unless $file =~ /.*\\.xls/i;\n    my $book = ReadData ($file);\n    return $book-&gt;[$sheet]{$cell};\n }\n\n    my $output_file = 'test.txt';\n\n    open (FH, '&gt;&gt;', $output_file) or die \"Canoot open ' $output_file' $!\";\n    print FH get_cell();\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5592251, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RsU82.gif?s=128&g=1", "display_name": "nagualcode", "link": "https://stackoverflow.com/users/5592251/nagualcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1494356044, "creation_date": 1493990049, "last_edit_date": 1494356044, "question_id": 43805924, "link": "https://stackoverflow.com/questions/43805924/perl-bash-echo-the-value-of-an-specific-xls-cell-to-a-text-file", "title": "Perl/Bash: Echo the value of an specific .XLS cell to a text file", "body": "<p>I have a .XLS table, where each cell has a value of pure text (with newlines).\nI need to use bash/perl to echo the value of a specific cell (by row and column number) to a text file.\nIdea of script:</p>\n\n<p><code>inputxls=\"$1\"\ncolumn=\"$2\"\nrow=\"$3\"\noutputtextfile=\"$4\"</code></p>\n\n<p>Calling script:\nscript table.xls 5 3 celltext.txt</p>\n\n<p>the output to to the text file would be:</p>\n\n<p><code>foo\nbar\nbar\nfoo</code>\n(respecting new lines)</p>\n\n<p>This is to work with a .xls populated with only text, there is no need to work with math.\nAny ideas?</p>\n"}, {"tags": ["perl", "struct"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493985579, "post_id": 43804357, "comment_id": 74647795, "body": "What do you mean by <code>$self-&gt;{_toret} =&gt; new object;</code>? Did you mean <code>=</code> instead?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493985630, "post_id": 43804357, "comment_id": 74647827, "body": "Calling <code>new object</code> from <code>object::new</code> smells like infinite recursion."}, {"owner": {"reputation": 1, "user_id": 7967986, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TbB_4hEyB7U/AAAAAAAAAAI/AAAAAAAAAwM/9Q9_sWQJ3xI/photo.jpg?sz=128", "display_name": "Diego Rodriguez", "link": "https://stackoverflow.com/users/7967986/diego-rodriguez"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1493985770, "post_id": 43804357, "comment_id": 74647907, "body": "ohh yes !! is $self-&gt;{_toret} = new object; it&#180;s a mistake, but still fails"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1493987624, "creation_date": 1493987624, "answer_id": 43805073, "question_id": 43804357, "link": "https://stackoverflow.com/questions/43804357/declare-struct-in-class-perl/43805073#43805073", "title": "Declare struct in class Perl", "body": "<p>I think you're overcomplicating this massively. The <code>struct()</code> function should be called from within the top-level package code, not from within the constructor (calling <code>struct()</code> creates a constructor called <code>new()</code> for you). And calling <code>new()</code> from within <code>new()</code> seems like a recipe for disaster.</p>\n\n<p>You've described what doesn't work, but you haven't really described what you're trying to achieve. I think that you want this (but, without more details, I really can't be sure).</p>\n\n<pre><code># Object is a terrible name for a class.\n# But if you insist on using it, at least capitalise the name.\n# Lowercase names are reserved for pragmata in Perl.\npackage Object;\n\nuse Class::Struct;\n\nstruct( hashMap =&gt; '%', array =&gt; '@' );\n\n1;\n</code></pre>\n\n<p>You can then use your class like this:</p>\n\n<pre><code>use Object;\n\nmy $obj = Object-&gt;new(\n  hashMap =&gt; { foo =&gt; 1, bar =&gt; 2, baz =&gt; 3},\n  array   =&gt; [ 0 .. 10]\n);\n\nsay $obj-&gt;hashMap-&gt;{foo}; # prints 1\nsay $obj-&gt;array-&gt;[10];    # prints 10\n</code></pre>\n\n<p>If that's not what you want, you need to explain a lot more about what you are trying to do.</p>\n"}], "owner": {"reputation": 1, "user_id": 7967986, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TbB_4hEyB7U/AAAAAAAAAAI/AAAAAAAAAwM/9Q9_sWQJ3xI/photo.jpg?sz=128", "display_name": "Diego Rodriguez", "link": "https://stackoverflow.com/users/7967986/diego-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 43805073, "answer_count": 1, "score": 0, "last_activity_date": 1493987624, "creation_date": 1493985434, "last_edit_date": 1493985781, "question_id": 43804357, "link": "https://stackoverflow.com/questions/43804357/declare-struct-in-class-perl", "title": "Declare struct in class Perl", "body": "<p>I want declare struct in of mi class in perl.In case anyone does not know this module: <a href=\"http://perldoc.perl.org/Class/Struct.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/Class/Struct.html</a>\nAnd this is my code:</p>\n\n<pre><code>package object;\nsub new{\n    my $class = shift;\n    struct( 'object', { hashMap =&gt; '%', array =&gt; '@' });\n    my $self = {\n        'object::hashMap' =&gt; shift ,\n        'object::array' =&gt; shift ,\n        _toret =&gt; shift // 0,\n    };\n    $self-&gt;{_toret} = new object;\n    return bless $self, $class;    \n}\n</code></pre>\n\n<p>if i want get my hasMap from struct, i should a object to call this \n struct, but I don't want to declare it in a function, because i would \n lose the data every time I refer the function.And that's why I declare it in class. The problem is that when i do the function, to get the hasMap this gives me error and tells me that it cann\u00b4t be referenced to hashMap    </p>\n\n<pre><code>sub get{\n        my($self) =@_;\n        return $self-&gt;{_toret}-&gt;hashMap;\n    }\n</code></pre>\n\n<p>i hope that you can help me. thanks!!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "edited": false, "score": 0, "creation_date": 1493979124, "post_id": 43802184, "comment_id": 74643773, "body": "You&#39;re using Perl?  Just loop through the file and discard all the lines until you find one that starts with that pattern."}, {"owner": {"reputation": 1127, "user_id": 1934910, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c2efea49fb5ae5c714e53be2a011942?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1934910/pradeep"}, "edited": false, "score": 0, "creation_date": 1493979495, "post_id": 43802184, "comment_id": 74644022, "body": "@dan1111 The data is present in a variable which is a respone from webservice.So I need a regex or something else to remove HTTP part"}, {"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "edited": false, "score": 0, "creation_date": 1493981043, "post_id": 43802184, "comment_id": 74644982, "body": "This is an HTTP response stream and in general the body may not necessarily start with <code>&lt;s:Envelope</code>. To get the body one needs to strip off HTTP headers. This can be achieved with <code>s&#47;\\A(?:^HTTP.*?(?:^.+$)*^$)+&#47;&#47;sm</code>. Demo: <a href=\"https://ideone.com/LEPpkQ\" rel=\"nofollow noreferrer\">ideone.com/LEPpkQ</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1127, "user_id": 1934910, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c2efea49fb5ae5c714e53be2a011942?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1934910/pradeep"}, "edited": false, "score": 0, "creation_date": 1494138564, "post_id": 43820450, "comment_id": 74694403, "body": "Complicated.I need some time to get a hang of this.It&#39;s working though."}], "tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": true, "score": 1, "last_activity_date": 1494073607, "creation_date": 1494073607, "answer_id": 43820450, "question_id": 43802184, "link": "https://stackoverflow.com/questions/43802184/strip-all-data-before-a-match/43820450#43820450", "title": "Strip all data before a match", "body": "<p>This looks like an HTTP response stream of which you need only HTTP response body. In general the body may not necessarily start with <code>&lt;s:Envelope</code>. To get the body you need to strip off HTTP headers. The headers are a series of non-empty lines followed by an empty line with first line starting with <code>HTTP</code>. A Perl regex substitution operator to remove the header is</p>\n\n<pre><code>s/\\A(?:^HTTP.*?(?:^.+$)*^$)+//sm;\n</code></pre>\n\n<p>In this regex:</p>\n\n<ul>\n<li><code>\\A</code> matches the start of the entire input (note that <code>^</code> is used here to match start of a new line since <code>/m</code> is used)</li>\n<li><code>(?:</code> - start of the outer non-capturing group. This group matches a single HTTP header block\n\n<ul>\n<li><code>^</code> - start of a line</li>\n<li><code>HTTP</code> - <code>HTTP</code> literally</li>\n<li><code>.*?</code> - any text in non-greedy fashion (which effectively continues to the end of line due to the following <code>^</code>)</li>\n<li><code>(?:</code> - start of the inner non-capturing group. This group matches a single non-empty line\n\n<ul>\n<li><code>^</code> - start of a line</li>\n<li><code>.+</code> - one or more chars (i.e. non-empty line)</li>\n<li><code>$</code> - end of the line</li>\n</ul></li>\n<li><code>)</code> - end of the inner non-capturing group.</li>\n<li><code>*</code> - repeat the the group (a non-empty line) zero or more times</li>\n</ul></li>\n<li><code>)</code> - end of the outer non-capturing group.</li>\n<li><code>+</code> - repeat the group (an HTTP headers block) one or more times</li>\n</ul>\n\n<p>Perl demo: <a href=\"https://ideone.com/LEPpkQ\" rel=\"nofollow noreferrer\">https://ideone.com/LEPpkQ</a></p>\n"}], "owner": {"reputation": 1127, "user_id": 1934910, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c2efea49fb5ae5c714e53be2a011942?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1934910/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 43820450, "answer_count": 1, "score": -1, "last_activity_date": 1494073607, "creation_date": 1493978863, "question_id": 43802184, "link": "https://stackoverflow.com/questions/43802184/strip-all-data-before-a-match", "title": "Strip all data before a match", "body": "<p>I have data in the following format.I need to strip all the data that appears before <code>&lt;s:Envelope</code>.</p>\n\n<pre><code>HTTP/1.1 100 Continue\n\nHTTP/1.1 200 OK\nContent-Type: text/xml; charset=utf-8\nServer: Microsoft-IIS/10.0\nX-Powered-By: ASP.NET\nDate: Fri, 05 May 2017 09:52:02 GMT\nContent-Length: 338962\n\n&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n    &lt;s:Body&gt;&lt;RetrieveStoredRoutesResponse xmlns=\"http://schema.website.com\"&gt;\n</code></pre>\n\n<p>How can I do this using regular expression?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1493976863, "post_id": 43801420, "comment_id": 74642307, "body": "Use <code>eq</code> to compare strings. Are you using <code>use strict; use warnings;</code>?"}, {"owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1493981192, "post_id": 43801420, "comment_id": 74645052, "body": "ahh ok now it works....I used the wrong operator... thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1493983757, "last_edit_date": 1493983757, "creation_date": 1493983395, "answer_id": 43803710, "question_id": 43801420, "link": "https://stackoverflow.com/questions/43801420/how-to-check-if-values-of-two-hashes-are-equal/43803710#43803710", "title": "How to check if values of two hashes are equal?", "body": "<p>By using the numeric comparison operator (<code>==</code>) you are telling Perl to compare your values as numbers. And Perl is very happy to do that.</p>\n\n<pre><code>$ perl -E'say \"19261 | 9;0;9;0;1\" == \"19261 | 9;0;9;0;5\"'\n1\n</code></pre>\n\n<p>If you had <code>use warnings</code> turned on (and you should always do that) then Perl would have told you:</p>\n\n<pre><code>$ perl -Mwarnings -E'say \"19261 | 9;0;9;0;1\" == \"19261 | 9;0;9;0;5\"'\nArgument \"19261 | 9;0;9;0;5\" isn't numeric in numeric eq (==) at -e line 1.\nArgument \"19261 | 9;0;9;0;1\" isn't numeric in numeric eq (==) at -e line 1.\n1\n</code></pre>\n\n<p>When Perl is asked to compare strings as numbers, it looks for something that looks like a number at the start of the string and uses that (in this case, the value 19261). If no number is found, it uses a zero.</p>\n\n<p>You can see how Perl will interpret your string as a number, by adding zero to it.</p>\n\n<pre><code>$ perl -E'say \"19261 | 9;0;9;0;1\" + 0'\n19261\n</code></pre>\n\n<p>In short, if you want to compare strings, use the string comparison operators (in this case, <code>eq</code>).</p>\n\n<p>And always <code>use warnings</code>!</p>\n"}], "owner": {"reputation": 133, "user_id": 6235589, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9e62de362533777ba04f9cbc4a45c1e2?s=128&d=identicon&r=PG&f=1", "display_name": "Moehre", "link": "https://stackoverflow.com/users/6235589/moehre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493983757, "creation_date": 1493976736, "question_id": 43801420, "link": "https://stackoverflow.com/questions/43801420/how-to-check-if-values-of-two-hashes-are-equal", "title": "How to check if values of two hashes are equal?", "body": "<p>I have to check if the values of two hashes are equal...</p>\n\n<p>hash 1: <code>19261 | 9;0;9;0;1</code>\nhash 2: <code>19261 | 9;0;9;0;1</code></p>\n\n<p>if a value in hash 1 or two is not equal like:</p>\n\n<p>hash 1: <code>19261 | 9;0;9;0;1</code>\nhash 2: <code>19261 | 9;0;9;0;5</code></p>\n\n<p>it should appear an error!!!</p>\n\n<p>I did it this way:</p>\n\n<pre><code>if($ADL_HNO{\"$LinkID;$NameIndex;$Side\"} == $ADLT_HNO{\"$key[0];$key[1];$key[2]\"} ){\n   #print \" HNO identisch\\n\";\n}\nelse\n{\n   print \"Die ADL-HNO: \".$ADL_HNO{\"$LinkID;$NameIndex;$Side\"}.\"\\ mit der LinkID: $LinkID und Side: $Side sind nicht identisch zur ADLT-HNO: \".$ADLT_HNO{\"$key[0];$key[1];$key[2]\"}.\"\\n\";\n}\n</code></pre>\n\n<p>At the moment it compares only the first number (in this case the 9).\nHow can i check all?</p>\n"}, {"tags": ["oracle", "perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1493969857, "post_id": 43798856, "comment_id": 74638195, "body": "What is the error message from <code>DBI</code>?"}, {"owner": {"reputation": 27, "user_id": 4290319, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4074fc448755c9ed5d1b7195da5b8aa1?s=128&d=identicon&r=PG&f=1", "display_name": "PANDIA LAKSHMANAN", "link": "https://stackoverflow.com/users/4290319/pandia-lakshmanan"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1493974383, "post_id": 43798856, "comment_id": 74640746, "body": "AbhiNickz   Error to connect db : ERROR OCIEnvNlsCreate. Check ORACLE_HOME (Linux) env var  or PATH (Windows) and or NLS settings, permissions, etc.!  this is the error"}, {"owner": {"reputation": 27, "user_id": 4290319, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4074fc448755c9ed5d1b7195da5b8aa1?s=128&d=identicon&r=PG&f=1", "display_name": "PANDIA LAKSHMANAN", "link": "https://stackoverflow.com/users/4290319/pandia-lakshmanan"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1493975377, "post_id": 43798856, "comment_id": 74641355, "body": "AbhiNickz could you explain why this is happening now?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1493976215, "post_id": 43798856, "comment_id": 74641887, "body": "If it used to work but now doesn&#39;t then something must have changed. Perhaps you have a new version of a Perl library (DBI or DBD::Oracle) or the Oracle client libraries. If you trace what has changed, you&#39;ll find out what the problem is."}, {"owner": {"reputation": 27, "user_id": 4290319, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4074fc448755c9ed5d1b7195da5b8aa1?s=128&d=identicon&r=PG&f=1", "display_name": "PANDIA LAKSHMANAN", "link": "https://stackoverflow.com/users/4290319/pandia-lakshmanan"}, "edited": false, "score": 0, "creation_date": 1493995803, "post_id": 43798856, "comment_id": 74654911, "body": "HI Thanks for your reply.. we had server up-gradation today so ORACLE instance not configure properly and now they have configure that now its working fine"}], "owner": {"reputation": 27, "user_id": 4290319, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/4074fc448755c9ed5d1b7195da5b8aa1?s=128&d=identicon&r=PG&f=1", "display_name": "PANDIA LAKSHMANAN", "link": "https://stackoverflow.com/users/4290319/pandia-lakshmanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1493981293, "answer_count": 0, "score": 0, "last_activity_date": 1493979296, "creation_date": 1493968867, "last_edit_date": 1493975875, "question_id": 43798856, "link": "https://stackoverflow.com/questions/43798856/connect-oracle-database-using-perl", "closed_reason": "Duplicate", "title": "connect oracle Database using perl", "body": "<p>I have some problem, i have perl script that connect Oracle database from Perl. it was works fine few weeks ago but now its causing issue i have pasted my code below</p>\n\n<pre><code>my $dbh= DBI -&gt;connect(\"DBI:Oracle:$ENV{'FACTORY_' . $db . '_DB_NAME'}\", $db_user, $db_password, {PrintError =&gt; 0 });\nif ($DBI::err)\n{\n    print \"Error to connect database : $DBI::err \\n\";\n\n}\n</code></pre>\n\n<p>When i try to run this it's failing with this error</p>\n\n<blockquote>\n  <p>Error to connect db : ERROR OCIEnvNlsCreate. Check ORACLE_HOME (Linux)\n  env var or PATH (Windows) and or NLS settings, permissions, etc.</p>\n</blockquote>\n\n<p>i try to connect manually i dont see any issue but here its causing issue. i have give all parameter as defined..</p>\n\n<p>could any one help ?</p>\n\n<p>Thanks\nPandia </p>\n"}, {"tags": ["arrays", "perl", "file", "append"], "comments": [{"owner": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1493956890, "post_id": 43796267, "comment_id": 74632931, "body": "What are you trying to do?"}, {"owner": {"reputation": 9, "user_id": 7160240, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404723899556230/picture?type=large", "display_name": "Ray Keown", "link": "https://stackoverflow.com/users/7160240/ray-keown"}, "reply_to_user": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1493957040, "post_id": 43796267, "comment_id": 74632972, "body": "either structure the appended file back into colum format before the script ends or have it stay in colum format when it appends.  I hope that makes sense."}, {"owner": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 1, "creation_date": 1493957112, "post_id": 43796267, "comment_id": 74632997, "body": "restructure your question and show us your Input and output and then your code."}, {"owner": {"reputation": 9, "user_id": 7160240, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404723899556230/picture?type=large", "display_name": "Ray Keown", "link": "https://stackoverflow.com/users/7160240/ray-keown"}, "reply_to_user": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1493957320, "post_id": 43796267, "comment_id": 74633056, "body": "C:\\Users\\Family\\Desktop\\Texasam\\scripting\\assignment14&gt;perl perl3.pl Full Name:        Joe Smo Age:              45 Gender:           Male Marital Status:   Single Do you want to change the age? (y or n) :y What is the new age? :25 Do you want to change marital status? (y or n) :y What is the new marital status? :Maried"}, {"owner": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1493957370, "post_id": 43796267, "comment_id": 74633072, "body": "Edit your question. I can&#39;t do anything if I don&#39;t know what you are doing..."}, {"owner": {"reputation": 9, "user_id": 7160240, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404723899556230/picture?type=large", "display_name": "Ray Keown", "link": "https://stackoverflow.com/users/7160240/ray-keown"}, "reply_to_user": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1493957985, "post_id": 43796267, "comment_id": 74633258, "body": "Thanks Ben, only used site twice.  wasn&#39;t sure how to edit it."}, {"owner": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1493958170, "post_id": 43796267, "comment_id": 74633305, "body": "can you put in what the input file looks like cause it&#39;s extremely hard to tell."}, {"owner": {"reputation": 9, "user_id": 7160240, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404723899556230/picture?type=large", "display_name": "Ray Keown", "link": "https://stackoverflow.com/users/7160240/ray-keown"}, "reply_to_user": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1493958529, "post_id": 43796267, "comment_id": 74633403, "body": "Joe Smo 25 Male Maried"}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1493961130, "post_id": 43796267, "comment_id": 74634175, "body": "Hi Ray, What I can make out from your query is that you are not able to maintain space between the values of name,age etc. when writing to the file.Is it the problem?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493975049, "post_id": 43796267, "comment_id": 74641155, "body": "@RayKeown: Please <a href=\"http://stackoverflow.com/posts/43796267/edit\">edit your question</a> to include an example of your input along with the expected output. Without that we are really guessing."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1493975813, "creation_date": 1493975813, "answer_id": 43801050, "question_id": 43796267, "link": "https://stackoverflow.com/questions/43796267/updated-file-strings-words-together/43801050#43801050", "title": "Updated file strings words together", "body": "<p>I'm guessing, because you haven't shown us your input data. But I think you're saying that your input file looks like this:</p>\n\n<pre><code>Joe Smo\n45\nMale\nSingle\n</code></pre>\n\n<p>And, after running your program, you end up with this:</p>\n\n<pre><code>Joe Smo45MaleSingle\n</code></pre>\n\n<p>When you read the file, you use the <code>chomp =&gt; 1</code> option to <code>read_file()</code>. That removes newlines from the end of the lines in the file. But <code>write_file()</code> doesn't have an <code>unchomp</code> option to replace the newlines.</p>\n\n<p>The quickest, dirtiest, fix is to stop removing the newlines. You'll want to remove the <code>chomp =&gt; 1</code> option from <code>read_file()</code> and also stop calling <code>chomp()</code> on the new <code>$status</code> values as you read them in. You can also remove the \"\\n\" from the lines where you are printing the original records (as they will have a newline attached).</p>\n\n<p>However, I'd caution you against using File::Slurp. It has some problems with UTF8 data that are likely to burn you in the future. I'd recommend <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> (which has <code>slurp()</code> and <code>spew()</code> methods) in its place.</p>\n\n<p>But, really, it looks like you're writing a database. So why not use a database?</p>\n"}], "owner": {"reputation": 9, "user_id": 7160240, "user_type": "registered", "profile_image": "https://graph.facebook.com/1404723899556230/picture?type=large", "display_name": "Ray Keown", "link": "https://stackoverflow.com/users/7160240/ray-keown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1493975813, "creation_date": 1493956790, "last_edit_date": 1493957572, "question_id": 43796267, "link": "https://stackoverflow.com/questions/43796267/updated-file-strings-words-together", "title": "Updated file strings words together", "body": "<p>My script works, except when I append the file: it bunches my words into one string like so:</p>\n\n<pre><code>Joe Smo45MaleSingle\n</code></pre>\n\n<p>Originally, in the text file, they are in a column.  I want the appended file to stay in a column.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Slurp;\n\nmy @array1 = (\"Full Name:\", \"Age:\", \"Gender:\", \"Marital Status:\");\nmy @array2 = read_file(\"empdata.txt\", chomp =&gt; 1);\n\nprint \"$array1[0]        $array2[0]\\n\";\nprint \"$array1[1]              $array2[1]\\n\";\nprint \"$array1[2]           $array2[2]\\n\";\nprint \"$array1[3]   $array2[3]\\n\";\n\nprint \"Do you want to change the age? (y or n) :\";\nchomp(my $answer = &lt;STDIN&gt;);\nif ($answer eq \"y\") {\nprint \"What is the new age? :\";\nchomp(my $age = &lt;STDIN&gt;);\n$array2[1] = $age;\nwrite_file(\"empdata.txt\",@array2);\n\nprint \"Do you want to change marital status? (y or n) :\";\nchomp(my $answer = &lt;STDIN&gt;);\n if ($answer eq \"y\") {\n    print \"What is the new marital status? :\";\n    chomp(my $status = &lt;STDIN&gt;);\n    $array2[3] = $status;\n    write_file(\"empdata.txt\",@array2);\n}  \n} else { \n print \"Do you want to change marital status? (y or n) :\";\n chomp(my $answer = &lt;STDIN&gt;);\n if ($answer eq \"y\") {\n    print \"What is the new marital status? :\";\n    chomp(my $status = &lt;STDIN&gt;);  \n    $array2[3] = $status;\n    write_file(\"empdata.txt\",@array2);\n}       \n}\n\nclose || die \"could not close file\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1493950412, "post_id": 43794371, "comment_id": 74631483, "body": "It&#39;s not <code>close SENDMAIL</code> that sends out the email, it&#39;s the <code>print SENDMAIL ...</code>. You need to intervene before that happens."}, {"owner": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1493950789, "post_id": 43794371, "comment_id": 74631565, "body": "Verified that we are definitely intervening before print SENDMAIL."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493952747, "post_id": 43794371, "comment_id": 74631961, "body": "You might be killing a shell, depending on the contents of <code>$sendmail</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1493956296, "post_id": 43794371, "comment_id": 74632795, "body": "Can&#39;t you wait until you know you want to send the mail before opening the pipe? You could <code>push</code> strings onto an array instead of <code>print</code>ing them to the pipe. Then you can just discard the contents of the array if you find you don&#39;t want it sent."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493956936, "post_id": 43794371, "comment_id": 74632942, "body": "Or make sure you find the pid of the actual sendmail process, then killing it will work."}, {"owner": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493984891, "post_id": 43794371, "comment_id": 74647343, "body": "@zdim Contents of $sendmail appear to be &quot;/usr/lib/sendmail -f\\$sender -t&quot;"}, {"owner": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493985032, "post_id": 43794371, "comment_id": 74647434, "body": "@Borodin as much as this should be rewritten and changed, it&#39;s legacy code that does work, and is secure, and with my limited knowledge of perl, I&#39;d prefer not to go down that rabbit hole."}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1493985323, "post_id": 43796534, "comment_id": 74647633, "body": "$sendmail appears to be &quot;/usr/lib/sendmail -f\\$sender -t&quot;, so that in the end <code>open (SENDMAIL, &quot;|&#47;usr&#47;lib&#47;sendmail -f\\$sender -t&quot;);</code> is what is being run. You have waitpid... which more research suggests that maybe $pid is not getting killed of before I reach close()? More testing now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1494003553, "post_id": 43796534, "comment_id": 74659631, "body": "@OutofControl  The form of <code>open</code> that is used <code>fork</code>&#39;s a process and once we <code>kill</code> it we should by all means <code>wait</code> for it.  The <code>waitpid</code> allows to wait for a particular process (by PID).  Change the regex then, to match things that will identify the process on your system.  I&#39;ll add a bit about that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1494003717, "post_id": 43796534, "comment_id": 74659722, "body": "@OutofControl  You need to kill the process before you reach prints to its filehandle.  As soon as those happen it is in the hands of <code>postfix</code> (and <code>postdrop</code> I think) and they <i>will</i> send whatever is in their queues and temp files.  By killing &quot;before close&quot; (but after there were prints to the filehandle) we only mess up our process, but not stop the email."}, {"owner": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1494006975, "post_id": 43796534, "comment_id": 74661476, "body": "If open() has already executed, but no prints, would I be able to kill the $pid and have no email sent?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1494007272, "post_id": 43796534, "comment_id": 74661646, "body": "@OutofControl  Yes -- it would be a big surprise that <code>kill</code> fails. If <code>sendmail</code> is killed before any prints then there is no email, and in my tests nothing is sent to that recepient, no message.  (You&#39;ll need to test on your system.) The only thing is to identify the right pid.  (You can even print all processes with <code>sendmail</code> in their command, just to see what is going on.) Updated the answer, will edit more. Let me know what needs to be explained"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1494010477, "post_id": 43796534, "comment_id": 74663255, "body": "@OutofControl  I added a note on another option, to kill the process group by <code>kill 9, -$pid</code>. Also edited a litt.e"}, {"owner": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1494526265, "post_id": 43796534, "comment_id": 74878664, "body": "Sidetracked for a couple of days. I&#39;ll review this after the weekend when I can give it the proper attention."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1494526630, "post_id": 43796534, "comment_id": 74878877, "body": "@OutofControl Alright, thanks for the note.  Once you get to it, perhaps first try with the <i>process group</i> way (at the end), as it&#39;s simplest to do.  Let me know how it goes."}, {"owner": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "edited": false, "score": 0, "creation_date": 1495029993, "post_id": 43796534, "comment_id": 75080702, "body": "Thanks for the detailed response. The issue in the end appears to be have been a conditional that would occasionally be true which resulted in a &#39;print&#39; being pushed to sendmail. However, your solution allowed me to be sure I had the correct PID, which is a must have."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1495040346, "last_edit_date": 1495542383, "creation_date": 1493958524, "answer_id": 43796534, "question_id": 43794371, "link": "https://stackoverflow.com/questions/43794371/in-perl-is-it-possible-to-kill-an-opensendmail-sendmail-before-closesen/43796534#43796534", "title": "In Perl, is it possible to kill an open(SENDMAIL, &quot;|$sendmail&quot;) before close(SENDMAIL)", "body": "<p>It seems that the command <code>$sendmail</code> isn't starting the <code>sendmail</code> program directly so the <code>$pid</code> returned by <code>open</code> isn't <code>sendmail</code>'s (but shell's?). </p>\n\n<p>Find the PID of the <code>sendmail</code> process itself and <code>kill</code> should work. (Or consder killing the whole <em>process group</em>, see the end). </p>\n\n<p>Instead of doing that by manually parsing <code>ps</code> you can use <a href=\"http://search.cpan.org/~durist/Proc-ProcessTable-0.39/ProcessTable.pm\" rel=\"nofollow noreferrer\">Proc::ProcessTable</a></p>\n\n<pre><code>use Proc::ProcessTable;\n\nmy $pid = open my $sm_fh, '|-', $sendmail or die \"Can't open sendmail: $!\";\n\nmy $pid_sm;\nmy $pt = Proc::ProcessTable-&gt;new();\nforeach my $proc (@{$pt-&gt;table}) {\n    if ($proc-&gt;cmndline =~ /^sendmail/) {  # adjust regex for your system\n        $pid_sm = $proc-&gt;pid;\n        say \"Sendmail command-line: \", $proc-&gt;cmndline;\n        say \"Sendmail process pid:  \", $proc-&gt;pid;\n    }   \n}\n\nkill 9, $pid_sm;\nmy $gone_pid = waitpid $pid_sm, 0;\nsay \"Process $gone_pid is gone\";\n\n# need a handler for SIGPIPE for prints to $sm_fh further in code\n</code></pre>\n\n<p>On my system the <code>CMD</code> field starts with <code>sendmail</code>, adjust for how it is on yours.  If there may be multiple <code>sendmail</code> processes, what is quite possible, you'll need a more thorough analysis. </p>\n\n<p>Since you need to blow the thing out of the water I presume that its following prints can't be modified for a check. (Otherwise you could solve this in much cleaner ways.) </p>\n\n<p>Then you <em>must</em> install a signal handler for <code>SIGPIPE</code> or the program will die at the next attempt to print to that filehandle, since it will get a <code>SIGPIPE</code> and its disposition is to terminate.</p>\n\n<p>Another solution is to wrap <code>sendmail</code> handling in <a href=\"http://search.cpan.org/~jacoby/Expect-1.33/lib/Expect.pm\" rel=\"nofollow noreferrer\">Expect</a>, which sets up a pseudo-terminal so you can send a <code>Ctrl-C</code> when needed. (Its own <code>hard_close</code> method does the job in my tests, too.) But for this the printing statements should be modified so it may be a no-go here.</p>\n\n<hr>\n\n<p>A little more detail.  It was clarified that the command is: <code>/usr/lib/sendmail -f$sender -t</code></p>\n\n<p>The module's object (<code>$pt</code> above) has a lot of process table fields, listed by <code>$pt-&gt;fields</code>, with descriptions at its <a href=\"http://search.cpan.org/~durist/Proc-ProcessTable-0.39/Process/Process.pm\" rel=\"nofollow noreferrer\">\"stub module\"</a>. I find it more informative to print and review them all for objects of interest.  Some that may be helpful for this purpose are <code>exec</code>, <code>cwd</code>, and various <code>id</code>s. </p>\n\n<p>How exactly to identify a process depends on details of the system, but one way is to look at the command line details.</p>\n\n<p>The example above extended a bit  </p>\n\n<pre><code>$SIG{PIPE} = sub { print \"Got $_[0]\\n\" };  # or just $SIG{PIPE} = 'IGNORE';\n\nmy $pid_sm;\nforeach my $proc (@{$pt-&gt;table}) {\n    my $cmd = $proc-&gt;cmndline;\n    next if $cmd !~ m{^/usr/lib/sendmail};\n    if ( (split ' ', $cmd)[1] eq \"-f$sender\" ) {\n        $pid_sm = $proc-&gt;pid;\n        say \"Our process $pid_sm: $cmd\";\n    }\n    else { say \"Some other sendmail: $cmd\" }\n}\nwarn \"Didn't find our sendmail process\" if not $pid_sm;\n\nif ($needToAbort and $pid_sm) {\n    kill 9, $pid_sm;\n    my $gone_pid = waitpid $pid_sm, 0;\n    if    ($gone_pid == -1) { say \"No process $pid_sm\" }\n    elsif ($gone_pid ==  0) { say \"Process $pid_sm still around?\" }\n    else                    { say \"Process $gone_pid is gone\" }\n};\n</code></pre>\n\n<p>The second field of the command-line is checked against the exact phrase <code>\"-f$sender\"</code>, what can be relexad by using regex instead of <code>eq</code>. Review command-lines printed for all processes above and adjust as needed. If there are problems print out anything that has <code>'sendmail'</code> in it.</p>\n\n<hr>\n\n<p>Another option is to kill the <a href=\"https://stackoverflow.com/questions/6548823/use-and-meaning-of-session-and-process-group-in-unix\">process group</a>: <code>kill 9, -$pid</code> (note the minus). This should catch the <code>sendmail</code> process itself, but of course make sure you know what is getting blown away.</p>\n\n<p>To add, I doubt that you need to use <code>SIGKILL</code> (9). Once the right pid is found the <code>SIGTERM</code> (15 on my system, see <code>man 7 signal</code>) may well be good enough, what is much nicer.</p>\n\n<p>Finally, a process can get tied down by the OS and be in an uninterruptible state, in particular in some I/O operation. However, that doesn't seem likely here and I'd first try the two approaches above. </p>\n"}], "owner": {"reputation": 401, "user_id": 1454415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d72122a91b4777caa0bac8ee5d20eedd?s=128&d=identicon&r=PG", "display_name": "Out of Control", "link": "https://stackoverflow.com/users/1454415/out-of-control"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 1, "accepted_answer_id": 43796534, "answer_count": 1, "score": 2, "last_activity_date": 1495040346, "creation_date": 1493941429, "question_id": 43794371, "link": "https://stackoverflow.com/questions/43794371/in-perl-is-it-possible-to-kill-an-opensendmail-sendmail-before-closesen", "title": "In Perl, is it possible to kill an open(SENDMAIL, &quot;|$sendmail&quot;) before close(SENDMAIL)", "body": "<p>I'm needing to hack an old system that uses <code>open(SENDMAIL, \"|$sendmail\")</code> and <code>close(SENDMAIL)</code>. Is it possible to stop the email from being sent once the stream is open? In this case, if some unexpected spammy content is discovered. </p>\n\n<p>I've tried this with no luck:</p>\n\n<pre><code>$pid = open(SENDMAIL, \"|$sendmail\");\nwhile (&lt;&gt;) {\n    ....do lots of stuff in here....\n    # Oops, we need to abort\n    if ($needToAbort) {\n        kill 9, $pid;\n        exit(0);\n    }\n}\nclose(SENDMAIL);\n</code></pre>\n\n<p>Even when the loop hits $needToAbort === true, the email still goes out. Best explanation I can find is that kill 9, $pid, is only closing off the stream forcibly, not actually killing it.</p>\n\n<p>In order to verify $pid exists, I'd tried add to the if:</p>\n\n<pre><code>if ($needToAbort) {\n    $exists = kill 0, $pid;\n    if ($exists) {\n        kill 9, $pid;\n        exit(0);\n    }\n}\n</code></pre>\n\n<p>Using logging, sometimes the $pid seems to exist and sometimes it doesn't. The system uses perl 5, version 16.</p>\n\n<p>Question: Is it possible, and how would I edit my code to stop the email from being sent?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1493941692, "post_id": 43792711, "comment_id": 74629472, "body": "What have you tried so far? What is the specific problem or error you&#39;re having? Where is the shortest code necessary to reproduce the problem?"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1493941892, "post_id": 43792711, "comment_id": 74629519, "body": "Will post code. Actually -- nearly got it working."}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1493942858, "post_id": 43792711, "comment_id": 74629750, "body": "Code posted. It is nearly working but not combining the class field."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1493943269, "post_id": 43792711, "comment_id": 74629836, "body": "Your code doesn&#39;t seem to match your sample file."}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1493943345, "post_id": 43792711, "comment_id": 74629855, "body": "I will update. Didn&#39;t want to complicate things."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1493944646, "post_id": 43792711, "comment_id": 74630150, "body": "&quot;Not working&quot; meaning...? You get an error message? You get an unexpected result? The code formats your drive?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1493944720, "post_id": 43792711, "comment_id": 74630169, "body": "In your sample file, your columns appear to be separated by spaces, but you&#39;re splitting on <code>\\t</code>."}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1493944846, "post_id": 43792711, "comment_id": 74630212, "body": "It&#39;s tab delimited."}], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1493937698, "post_id": 43792990, "comment_id": 74628432, "body": "if the 1st category will be <code>icecream</code> and the second <code>ice</code> it will not merge, because will match the substring."}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1493940109, "post_id": 43792990, "comment_id": 74629052, "body": "@jm666 - what would you suggest? Exact match rather than REGEX? That would be <code>( $merge{$id} ne $category )</code> correct?"}, {"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1493941977, "post_id": 43792990, "comment_id": 74629545, "body": "Just as @jm666 pointed, it will not merge, I edited my answer and now it might merge"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1493942617, "post_id": 43792990, "comment_id": 74629700, "body": "Please use Text::CSV"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1493943220, "post_id": 43792990, "comment_id": 74629827, "body": "@Robert I would but am unsure how to do what I need to do with it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1493978871, "post_id": 43792990, "comment_id": 74643596, "body": "<code>Text::CSV</code> is nice if you&#39;ve got to deal with linefeeding and quoting, but IMO not that worthwhile if not. <code>split &#47;\\t&#47;</code> or similar works just as well in 95% of use cases."}], "tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": -2, "last_activity_date": 1493941811, "last_edit_date": 1493941811, "creation_date": 1493933030, "answer_id": 43792990, "question_id": 43792711, "link": "https://stackoverflow.com/questions/43792711/perl-match-duplicate-on-first-field-combine-last-field/43792990#43792990", "title": "Perl: Match duplicate on first field combine last field", "body": "<p>A simple approach for small files could be done as above: </p>\n\n<pre><code>#!/usr/bin/env perl \n\nuse common::sense;    \nuse DDP;\n\nmy %merge;\n\nwhile ( &lt;DATA&gt; )\n{\n\n next if 1..1;\n\n chomp $_;\n\n my ( $id, $text, $category ) = split /,/ , $_;\n\n if ( ! $merge{$id} )\n {\n     $merge{$id} = \"$id,$text,$category\";\n }\n else\n {\n       my ( undef, undef , $c ) = split /,/ , $merge{$id};\n\n       if ( $c !~ /\\b$category\\b/ )\n       {\n          $merge{$id} .= \";$category\";\n       }\n }\n\n\n}\n\np %merge;\n\n__DATA__\nId    Title               Category\n12345,My favorite martian,aliens\n13444,Texas Meat,BBQ\n12345,My favorite martian,aliens\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>{\n    12345   \"12345,My favorite martian,aliens;space\",\n    13444   \"13444,Texas Meat,BBQ\"\n}\n</code></pre>\n\n<p>Considering you don't want duplicate categories it would help.</p>\n"}, {"comments": [{"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1494266262, "post_id": 43806011, "comment_id": 74744171, "body": "I have 5.22 and I get errors <code>near &quot;-&gt;%&quot;</code>. Is there an equivalent for this?"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1494268487, "post_id": 43806011, "comment_id": 74745479, "body": "It&#39;s line 25. Is there another way of writing this?"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1494269154, "post_id": 43806011, "comment_id": 74745812, "body": "Got it! Used the following: <code>use feature qw(postderef say);</code>."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1494317100, "post_id": 43806011, "comment_id": 74763893, "body": "@Bubnoff it is possible to write also as <code>%{$records-&gt;{$id}-&gt;[$_]}</code>."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 2, "last_activity_date": 1493990292, "creation_date": 1493990292, "answer_id": 43806011, "question_id": 43792711, "link": "https://stackoverflow.com/questions/43792711/perl-match-duplicate-on-first-field-combine-last-field/43806011#43806011", "title": "Perl: Match duplicate on first field combine last field", "body": "<p>I would load the file into some data-structure and remember each unique column value, and then print them as you want. E.g. as in this example (using <code>|</code> as it is delimiter better visible as the <code>\\t</code>):</p>\n\n<pre><code>#!/usr/bin/env perl \n\nuse 5.024;\nuse warnings;\nuse Data::Dumper;\n\nmy $records;\nmy $numcols;\nwhile(&lt;DATA&gt;) {\n    chomp;\n    my(@cols) = split /\\|/, $_, -1;\n    $numcols = @cols if( $. == 1 );\n    die \"Wrong number of columns (@{[scalar @cols]} instead of $numcols) in line $.\" unless (@cols == $numcols);\n    $records-&gt;{$cols[0]}-&gt;[0] = $. unless $records-&gt;{$cols[0]}; #remember the line# of the 1st apperance\n    for(my $c = 1; $c &lt; $numcols; $c++) {   #skip the id (col[0])\n        $records-&gt;{$cols[0]}-&gt;[$c]-&gt;{$cols[$c]}++;\n    }\n}\n# if want, check the data-structure\n#say Dumper($records);\n\nfor my $id (sort {$records-&gt;{$a}-&gt;[0] &lt;=&gt; $records-&gt;{$b}-&gt;[0]} keys %$records) {\n    say join(\"|\",\n            $id,\n            map { join(';', sort grep {/\\S/} keys $records-&gt;{$id}-&gt;[$_]-&gt;%*) } 1 .. $#{$records-&gt;{$id}}  #skip col[0]\n        );\n}\n\n__DATA__\nID|Name1|Name2|Name3\nid1|c11|c12|c13\nid1|c11|c12|c13\nid2|c21|c22|c23\nid1|c31|c12|c13\nid3|c41||c43\nid1|c51|c12|c13\nid1|c31||c13\nid1|c11||c13\nid1|c31|c12|c13\nid2|c21|c22|c83\nid4|c91|c92|\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>ID|Name1|Name2|Name3\nid1|c11;c31;c51|c12|c13\nid2|c21|c22|c23;c83\nid3|c41||c43\nid4|c91|c92|\n</code></pre>\n\n<p>Using some shell for pretty columns <code>perl script.pl | sed 's/||/| |/g' | column -s'|' -t</code></p>\n\n<pre><code>ID   Name1        Name2  Name3\nid1  c11;c31;c51  c12    c13\nid2  c21          c22    c23;c83\nid3  c41                 c43\nid4  c91          c92\n</code></pre>\n"}], "owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 43806011, "answer_count": 2, "score": 0, "last_activity_date": 1493990292, "creation_date": 1493931641, "last_edit_date": 1495542870, "question_id": 43792711, "link": "https://stackoverflow.com/questions/43792711/perl-match-duplicate-on-first-field-combine-last-field", "title": "Perl: Match duplicate on first field combine last field", "body": "<p>See question here:\n<a href=\"https://stackoverflow.com/questions/8283235/match-rows-based-on-first-field-and-combine-second-field\" title=\"match-rows-based-on-first-field-and-combine-second-field\">match-rows-based-on-first-field-and-combine-second-field</a></p>\n\n<p>How would you tackle this in perl given the following conditions:</p>\n\n<ul>\n<li>A single CSV file</li>\n<li>There are several duplicate records that fall in different categories</li>\n<li>You need to match on first field and merge/append the category field</li>\n</ul>\n\n<p>Sample file:</p>\n\n<pre><code>External ID     Item Name       Item Description        Release Date    Expiry Date     Weight  Template ID     Enabled EntityId        Classifications Address N/A     City    State   Zipcode Country of domain purchase is made from Title   Cover Image     Link    Author\n411280  Shade me        Shade me        04-May-2017     01-Jan-9999             0       Y       -1      Teen                                                    Shade me        MC.GIF        http://catalog.org/cgi-bin/koha/opac-detail.pl?biblionumber=411280 Brown, Jennifer\n411280  Shade me        Shade me        04-May-2017     01-Jan-9999             0       Y       -1      Books                                                   Shade me        MC.GIF        http://catalog.org/cgi-bin/koha/opac-detail.pl?biblionumber=411280 Brown, Jennifer\n413036  Now that's what I call music!   Now that's what I call music!   04-May-2017     01-Jan-9999             0       Y       -1      Teen                                                    Now that's what I call music!  MC.GIF http://catalog.org/cgi-bin/koha/opac-detail.pl?biblionumber=413036\n</code></pre>\n\n<p>The challenge is to match duplicate Ids and merge the categories.</p>\n\n<pre><code>Shade me        MC.GIF        http://catalog.org/cgi-bin/koha/opac-detail.pl?biblionumber=411280 Brown, Jennifer\n    411280  Shade me        Shade me        04-May-2017     01-Jan-9999             0       Y       -1      Teen;Books\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>while ( &lt;FILE&gt; ) { \n        next if 1..1;\n        chomp $_; \n\n        my ( $id, $name, $desc, $reldate, $expdate, $weight, $temp, $enabled, $ent, $class, $addr, $na, $city, $state, $zip, $country, $title, $img, $link, $auth ) = split /\\t/ , $_; \n\n        if ( ! $merge{$id} ) { \n                $merge{$id} = \"$id, $name, $desc, $reldate, $expdate, $weight, $temp, $enabled, $ent, $class, $addr, $na, $city, $state, $zip, $country, $title, $img, $link, $auth\";\n        } else {\n                $merge{$class} .= \";$class\" if ( $merge{$id} ne $class )\n        }\n}\n\np %merge;\n</code></pre>\n\n<p>The line giving me issues is:</p>\n\n<pre><code>$merge{$class} .= \";$class\" if ( $merge{$id} ne $class )\n</code></pre>\n\n<p>You can see what I need to do -- merge the class field. Not working</p>\n"}, {"tags": ["multithreading", "perl"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7965069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a993ff06d8f8b53dfb7b66e81303dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/7965069/jonathan"}, "edited": false, "score": 0, "creation_date": 1493969392, "post_id": 43793555, "comment_id": 74637919, "body": "Perfect! Your post gave me tips and helped to understand better parallelism. Thanks for your time!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1493937551, "last_edit_date": 1592644375, "creation_date": 1493935821, "answer_id": 43793555, "question_id": 43791833, "link": "https://stackoverflow.com/questions/43791833/perl-synchronizing-data-access/43793555#43793555", "title": "Perl - Synchronizing Data Access", "body": "<p>The problem is that your threads are synchronised with one another by the locked variable <code>$prime</code>. That means they don't have a chance to run simultaneously, and will also suffer the overhead of switching threads and synchronising access to the variable</p>\n<p>Primes aren't a great test for parallel processing, as the calculation of each prime depends on the previous result. However, you could do it by keeping a separate <code>$prime</code> variable, but starting at 5, 6, 7, and 8 for the four threads and adding 4 between tests. That way they don't duplicate each other's work but together cover every integer</p>\n<p>There is immediately a problem with this in that none of the even numbers will ever be prime, so two of the four threads will never produce a result. It is still a valid test of parallelism, but clearly very inefficient. You could fix that by starting the threads with 5, 7, 9, and 11, and incrementing by 8 before each test. Then every thread will be profitable</p>\n<p>Don't forget that you will have to code the same algorithm for the single-threaded code, otherwise the parallel section gets an unfair advantage</p>\n<hr />\n<h3>Update</h3>\n<p>Perhaps a better way would be to lock <code>$prime</code> only to fetch the next number to be tested and increment it. That way all the threads can do their calculations in parallel and only queue up to get another job</p>\n<p>You would then have to lock <code>$total_prime</code> to prevent two threads from incrementing it simultaneously, and also update <code>$last_prime</code> while that lock is in effect. Because parallel threads may well generate prime numbers out of sequence you will also have to check whether the prime just found is greater than the latest one discovered by any thread</p>\n<p>Your subroutine would look like this. I apologise for changing the identifiers, but Perl traditionally uses <code>snake_case</code> and I find <code>camelCase</code> unpleasant to read. Snake case is also much easier for many people whose first language isn't English, and who cannot pick out the capital letters so easily</p>\n<pre><code>sub calc_with_thread {\n\n    while ( time() &lt; $end_time_1 ) {\n\n        my $test = do {\n            lock $prime;\n            $prime++;\n        };\n\n        if ( calc_prime($test) ) {\n            lock $total_prime;\n            ++$total_prime;\n            $last_prime = $test if $test &gt; $last_prime;\n        }\n    }   \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493956959, "post_id": 43794071, "comment_id": 74632946, "body": "So you think <code>$Shared_Prime++</code> is atomic?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493961601, "post_id": 43794071, "comment_id": 74634344, "body": "@Borodin Nope, didn&#39;t spend too much time thinking about it. For the purposes of this example I just wanted to illustrate that it wasn&#39;t a locking issue, it was the shared variable."}, {"owner": {"reputation": 33, "user_id": 7965069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a993ff06d8f8b53dfb7b66e81303dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/7965069/jonathan"}, "edited": false, "score": 0, "creation_date": 1493969495, "post_id": 43794071, "comment_id": 74637975, "body": "@Schwern Ty for your contribution!"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1493939619, "last_edit_date": 1493939619, "creation_date": 1493939237, "answer_id": 43794071, "question_id": 43791833, "link": "https://stackoverflow.com/questions/43791833/perl-synchronizing-data-access/43794071#43794071", "title": "Perl - Synchronizing Data Access", "body": "<p>Multi-threading is not an automatic speed boost.</p>\n\n<p>Shared variables are tied, and tied variables are slow.</p>\n\n<p>Here's a simpler, improved version that goes up to a max number rather than by time. It avoids locking. Threads are still significantly slower, because each of them have to do a get and set on that sluggish shared variable for every number they check.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Time::HiRes qw(time);\nuse v5.10;\n\nuse threads;\nuse threads::shared;\n\nmy $Max_Number = 50_000;\n\n{\n    print \"\\n\\nCalc without Threads:\\n\";\n    my $start_time = time;\n    calcWithoutThread();\n    my $end_time = time;\n    say \"$Max_Number took @{[ $end_time - $start_time ]} seconds.\";\n}\n\nmy $Shared_Prime :shared = 5;\n{\n    print \"\\n\\nCalc with Threads:\\n\";\n    my $start_time = time;\n    my $thread1 = threads-&gt;create(\\&amp;calcWithThread);\n    my $thread2 = threads-&gt;create(\\&amp;calcWithThread);\n    my $thread3 = threads-&gt;create(\\&amp;calcWithThread);\n    my $thread4 = threads-&gt;create(\\&amp;calcWithThread);\n    $thread1-&gt;join();\n    $thread2-&gt;join();\n    $thread3-&gt;join();\n    $thread4-&gt;join();\n    my $end_time = time;\n    say \"$Max_Number took @{[ $end_time - $start_time ]} seconds.\";\n}\n\nsub calcWithoutThread {\n    my $prime = 5;                # Starts from the 5th prime\n\n    while( $prime &lt;= $Max_Number ) {\n        calcPrime($prime++);\n    }\n}\n\nsub calcWithThread {\n    while( $Shared_Prime &lt;= $Max_Number ) {\n        calcPrime($Shared_Prime++);\n    }\n}\n\nsub calcPrime {\n    my $prime = shift;\n\n    for( my $i=2 ; $i &lt; sqrt($prime) ; $i++){\n        if( $prime % $i == 0){\n            return 0;\n        }\n    }\n\n    return 1;   \n}\n</code></pre>\n\n<p>Instead, avoid shared state or coordinating workers as much as possible. For example, you can slice up the work into pieces. If you have 4 workers, give them each a starting number and they each increment by 4. Then they can cover the whole space without shared state.</p>\n\n<ul>\n<li>Worker 1: 5, 9, 13, ...</li>\n<li>Worker 2: 6, 10, 14, ...</li>\n<li>Worker 3: 7, 11, 15, ...</li>\n<li>Worker 4: 8, 12, 16, ...</li>\n</ul>\n\n\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Time::HiRes qw(time);\nuse v5.10;\n\nuse threads;\n\nmy $Max_Number = 7_000;\n\n{\n    print \"\\n\\nCalc without Threads:\\n\";\n    my $start_time = time;\n    calcWithoutThread(5, 1);\n    my $end_time = time;\n    say \"$Max_Number took @{[ $end_time - $start_time ]} seconds.\";\n}\n\n{\n    print \"\\n\\nCalc with Threads:\\n\";\n    my $start_time = time;\n    my $thread1 = threads-&gt;create(\\&amp;calcWithThread, 5, 4 );\n    my $thread2 = threads-&gt;create(\\&amp;calcWithThread, 6, 4 );\n    my $thread3 = threads-&gt;create(\\&amp;calcWithThread, 7, 4 );\n    my $thread4 = threads-&gt;create(\\&amp;calcWithThread, 8, 4 );\n    $thread1-&gt;join();\n    $thread2-&gt;join();\n    $thread3-&gt;join();\n    $thread4-&gt;join();\n    my $end_time = time;\n    say \"$Max_Number took @{[ $end_time - $start_time ]} seconds.\";\n}\n\nsub calcWithoutThread {\n    my($start, $inc) = @_;\n\n    my @primes;\n    for( my $prime = $start; $prime &lt;= $Max_Number; $prime += $inc ) {\n        push @primes, $prime if calcPrime($prime);\n    }\n\n    return \\@primes;\n}\n\nsub calcWithThread {\n    my($start, $inc) = @_;\n\n    my @primes;\n    for( my $prime = $start; $prime &lt;= $Max_Number; $prime += $inc ) {\n        push @primes, $prime if calcPrime($prime);\n    }\n\n    return \\@primes;\n}\n\nsub calcPrime {\n    my $prime = shift;\n\n    for( my $i=2 ; $i &lt; sqrt($prime) ; $i++){\n        if( $prime % $i == 0){\n            return 0;\n        }\n    }\n\n    return 1;   \n}\n</code></pre>\n\n<p>For me on my i7 MacBook (2 real cores, 4 virtual), threads break even at about 6000. To get the results, <code>$thread-&gt;join</code> will return the list of primes from <code>calcWithThread</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 7965069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a993ff06d8f8b53dfb7b66e81303dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/7965069/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 43793555, "answer_count": 2, "score": 3, "last_activity_date": 1493939703, "creation_date": 1493928022, "last_edit_date": 1493939703, "question_id": 43791833, "link": "https://stackoverflow.com/questions/43791833/perl-synchronizing-data-access", "title": "Perl - Synchronizing Data Access", "body": "<p>I'm starting to learn parallel programming, and I want to compare a single-threaded program with a multi-threaded one.</p>\n\n<p>I need to make a very simple algorithm that calculates the largest number of possible prime numbers within one minute and shows me the last calculated prime number and its position in the prime numbers.</p>\n\n<p>For example, prime number 23, would appear as the number 23 and its position 9, because it is the 9th prime number.</p>\n\n<p>Without using threads, the number of primes found was 233,596 and the last prime 3,246,107. But with threads, 229,972 primes were found and the last prime was 3,192,463.</p>\n\n<p>I think that is wrong, because multi-threading was supposed to obtain a superior result to the single thread. I believe it is a pretty basic error, but I cannot solve it as I still do not understand much of Perl's parallelism.</p>\n\n<p>This is the code. It calculates prime numbers for one minute single-threaded, and then the same calculation with four threads using shared variables.</p>\n\n<pre><code>use threads;\nuse threads::shared;\n\nmy $seconds = 60;\n\n # WITHOUT THREAD #\nprint \"\\n\\n Calc without Threads:\\n\";\nmy $endTime = time() + $seconds;\ncalcWithoutThread();\n\n\nprint \"\\n\\n ----------------===========================---------------- \\n\";\n\n # WITH THREAD #\nprint \"\\n\\n Calc with Threads:\\n\";\nmy $prime :shared = 5;          # Starts from the 5th prime\nmy $totalPrime :shared = 2; # Starts with prime 2 and prime 3\nmy $lastPrime :shared = 0;\nmy $endTime1 = time() + $seconds;\nmy $thread1 = threads-&gt;create(\\&amp;calcWithThread);\nmy $thread2 = threads-&gt;create(\\&amp;calcWithThread);\nmy $thread3 = threads-&gt;create(\\&amp;calcWithThread);\nmy $thread4 = threads-&gt;create(\\&amp;calcWithThread);\n$thread1-&gt;join();\n$thread2-&gt;join();\n$thread3-&gt;join();\n$thread4-&gt;join();\nprint \" Was found $totalPrime prime numbers. Last prime: $lastPrime.\";\n\n\n# SUB's #\n\nsub calcWithoutThread{\n    $prime = 5;            # Starts from the 5th prime\n    $totalPrime = 2;           # Starts with prime 2 and prime 3\n    $lastPrime = 0;\n    while (time() &lt; $endTime){\n        if(calcPrime($prime)){  \n            $totalPrime ++;\n            $lastPrime = $prime;\n        }\n        $prime ++;\n    }\n    print \" Was found $totalPrime prime numbers. Last prime: $lastPrime.\";\n}\n\nsub calcWithThread{\n    while (time() &lt; $endTime1) {\n        lock($prime);           \n        if(calcPrime($prime)){\n            $totalPrime ++;\n            $lastPrime = $prime;\n        }\n        $prime ++;\n    }   \n}\n\nsub calcPrime{\n    for($i=2 ; $i&lt; sqrt ($prime) ; $i++){\n        if( $prime % $i == 0){\n            return 0;\n        }\n    }\n    return 1;   \n}\n</code></pre>\n\n<p>The logic is that the threads do this calculation synchronously, if it is prime number or not, and also do not overlap values while calculating.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1493915110, "post_id": 43788143, "comment_id": 74616953, "body": "Make the non capturing group optional."}], "answers": [{"comments": [{"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 0, "creation_date": 1493915287, "post_id": 43788215, "comment_id": 74617068, "body": "Thanks Rahul... :)  The second one not capturing the password string."}, {"owner": {"reputation": 2268, "user_id": 10872397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca60fd27093da844faa62ca04d0fa7da?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/10872397/rahul"}, "reply_to_user": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 1, "creation_date": 1493915346, "post_id": 43788215, "comment_id": 74617110, "body": "Go for the first one."}], "tags": [], "owner": {"reputation": 2268, "user_id": 10872397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca60fd27093da844faa62ca04d0fa7da?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/10872397/rahul"}, "is_accepted": true, "score": 2, "last_activity_date": 1493915374, "last_edit_date": 1493915374, "creation_date": 1493915037, "answer_id": 43788215, "question_id": 43788143, "link": "https://stackoverflow.com/questions/43788143/regex-match-all-specific-string-or-at-least-one/43788215#43788215", "title": "Regex match all specific string or at least one", "body": "<p>This regex makes the password part optional. And captures in groups as you did.</p>\n\n<p><strong>Regex:</strong> <code>\\.(\\d+)\\s*=(?:.*?password:([^|]*))?</code></p>\n\n<p><strong><a href=\"https://regex101.com/r/gpE5eK/1/\" rel=\"nofollow noreferrer\">Regex101 Demo</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 1091, "user_id": 7963408, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/086ccd4f08c6258f6f4cdb1f3b259999?s=128&d=identicon&r=PG&f=1", "display_name": "Gawil", "link": "https://stackoverflow.com/users/7963408/gawil"}, "is_accepted": false, "score": 2, "last_activity_date": 1493915719, "creation_date": 1493915719, "answer_id": 43788424, "question_id": 43788143, "link": "https://stackoverflow.com/questions/43788143/regex-match-all-specific-string-or-at-least-one/43788424#43788424", "title": "Regex match all specific string or at least one", "body": "<p>I came up with this regex :<br /></p>\n\n<pre><code>'^(?:\\w+\\.)*(\\d+) = (?:WORDS: )?\"(?:.*\\|password:([^\\|]*).*)?\"$'\n</code></pre>\n\n<p>If you need any precision, just ask !</p>\n"}], "owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 43788215, "answer_count": 2, "score": 0, "last_activity_date": 1493915719, "creation_date": 1493914767, "question_id": 43788143, "link": "https://stackoverflow.com/questions/43788143/regex-match-all-specific-string-or-at-least-one", "title": "Regex match all specific string or at least one", "body": "<p>I have been trying this around 2 hours. I could not get solution for this. Here is my problem.</p>\n\n<p>Test string: </p>\n\n<pre><code>abc.1.2.4.6.8.10.9.8.7.10.12345 = WORDS: \"ABC|1A|CDE-FGH|password:FSSAD234SD2|cgap:234-34/23/23\"\n</code></pre>\n\n<p>Regex: </p>\n\n<pre><code>9\\.8\\.7\\.10\\.(\\d+) = (?:WORDS: )?\"[^\"]*(?:password:([A-Za-z0-9\\.\\-]+))\n</code></pre>\n\n<p>This will match <code>12345</code> and the password string <code>FSSAD234SD2</code></p>\n\n<p>But sometime i wont get the password string, so the test string would be as follows,</p>\n\n<pre><code>abc.1.3.5.7.9.11.9.8.7.10.12345 = \"\" \n</code></pre>\n\n<p>so i wanted to match at least <code>12345</code></p>\n\n<p>Online regex URL :</p>\n\n<p><a href=\"https://regex101.com/r/kQ3wT5/12\" rel=\"nofollow noreferrer\">https://regex101.com/r/kQ3wT5/12</a> - Working fine. </p>\n\n<p><a href=\"https://regex101.com/r/kQ3wT5/13\" rel=\"nofollow noreferrer\">https://regex101.com/r/kQ3wT5/13</a> - Not working. </p>\n\n<p>Please help me on this. </p>\n"}, {"tags": ["python", "regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1493912537, "post_id": 43787141, "comment_id": 74615180, "body": "Simpler: <code>perl -lane&#39;$sum=0; $sum += $_ for $F[5] =~ &#47;(\\d+)S&#47;g; print &quot;$F[5]\\t$sum&quot;&#39;</code>. (Add <code>-F\\t</code> if tab-separated input.) Not sure why you think this would be faster in Python (unless the rest of the program is written in Python and you want to avoid the subprocess entirely, but you indicated you still want to use <code>perl</code>)."}, {"owner": {"reputation": 77, "user_id": 3240735, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d64feda7ffd78c3699ad0eac1b9bceb4?s=128&d=identicon&r=PG&f=1", "display_name": "nietzschemouse", "link": "https://stackoverflow.com/users/3240735/nietzschemouse"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493912728, "post_id": 43787141, "comment_id": 74615337, "body": "It&#39;s not this step that is faster in python - it is a downstream process that is, but I figure I may as well wrap them all together in a single script.  How does that pass a python variable to that perl line?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493912974, "post_id": 43787141, "comment_id": 74615505, "body": "If you want a single script, why are you asking how to pass variables to other scripts?!"}, {"owner": {"reputation": 77, "user_id": 3240735, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d64feda7ffd78c3699ad0eac1b9bceb4?s=128&d=identicon&r=PG&f=1", "display_name": "nietzschemouse", "link": "https://stackoverflow.com/users/3240735/nietzschemouse"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493913253, "post_id": 43787141, "comment_id": 74615735, "body": "I call the perl line as a subprocess in python. I&#39;m asking how to pass a variable into that subprocess.call(&#39;perl )"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493913408, "post_id": 43787141, "comment_id": 74615862, "body": "I know. That doesn&#39;t answer my question."}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1493915339, "post_id": 43787141, "comment_id": 74617102, "body": "@ikegami has a good point OP - you should probably change your title, since what the title is asking and what you actually want to do are somewhat different (the <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493918935, "post_id": 43787141, "comment_id": 74619102, "body": "@nietzschemouse  Answer to your question from the comment: the <code>-a</code> option breaks the line by spaces into <code>@F</code>, available in code.  If you want other than spaces to break by use <code>-F\\t</code> (for tab).  The question is completely unclear to me."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 3240735, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d64feda7ffd78c3699ad0eac1b9bceb4?s=128&d=identicon&r=PG&f=1", "display_name": "nietzschemouse", "link": "https://stackoverflow.com/users/3240735/nietzschemouse"}, "edited": false, "score": 0, "creation_date": 1493922287, "post_id": 43787747, "comment_id": 74620976, "body": "I&#39;m using python3.5 and needed to wrap the print statement in parentheses, but this is perfect, otherwise. Thanks!"}], "tags": [], "owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "is_accepted": true, "score": 2, "last_activity_date": 1493921862, "last_edit_date": 1493921862, "creation_date": 1493913531, "answer_id": 43787747, "question_id": 43787141, "link": "https://stackoverflow.com/questions/43787141/how-to-send-a-python-variable-to-a-perl-subprocess/43787747#43787747", "title": "How to send a python variable to a perl subprocess", "body": "<p>There is most likely a way more compact way to write this in Python. This is just my attempt, taking you very literally at your problem definition/boundary. Anyway, point being, using the <code>re</code> module is certainly an easy option if you want to stick with Python. </p>\n\n<pre><code>import re\n\ndef sum_str_digits(my_string):\n    split_string = re.split(r'(\\d+)', my_string)\n    sums = 0\n    for index, string_piece in enumerate(split_string):\n        if string_piece == 'S':\n            sums += int(split_string[index - 1])\n    return sums\n\n# For Python 2.x\nprint sum_str_digits(my_string='12S1I100M37S')\n\n# Python 3.x\nprint(sum_str_digits(my_string='12S1I100M37S'))\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 3240735, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d64feda7ffd78c3699ad0eac1b9bceb4?s=128&d=identicon&r=PG&f=1", "display_name": "nietzschemouse", "link": "https://stackoverflow.com/users/3240735/nietzschemouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 43787747, "answer_count": 1, "score": 0, "last_activity_date": 1493921862, "creation_date": 1493911801, "question_id": 43787141, "link": "https://stackoverflow.com/questions/43787141/how-to-send-a-python-variable-to-a-perl-subprocess", "title": "How to send a python variable to a perl subprocess", "body": "<p>I am trying to use a perl regex to do somewhat complicated matching. In shell, it looks like:</p>\n\n<pre><code>cut -f6 file.txt | perl -ne 'chomp; $col=$_; $clipped = 0; foreach($col =~ m/(\\d+)S/g){ $clipped +=$_;} print $col,\"\\t\",$clipped,\"\\n\";'\n</code></pre>\n\n<p>And this works, but the downstream parts of this script are taking too long, so I want to do this in python, instead.</p>\n\n<p>For clarity, the perl line is finding the number before the character \"S\" in the sixth column of the file. There may be more than one \"S\", so it finds any digit before any \"S\" and stores that, then $clipped sums up those digits. If the column looked like 12S1I100M37S, then $clipped would total to be 49, for the 12S at the front and the 37S at the end. It ignores all other digits.</p>\n\n<p>Back to python: using split()[5], I can get the sixth column to a variable, but I don't know how to pass that to subprocess.call('perl -ne etc').</p>\n\n<p>Can someone suggest how I can do this or how I could use the python re module for the same type of matching?</p>\n"}, {"tags": ["perl", "command-line-arguments", "getopt-long"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1493915048, "last_edit_date": 1493915048, "creation_date": 1493911874, "answer_id": 43787168, "question_id": 43787024, "link": "https://stackoverflow.com/questions/43787024/getoptions-in-perl-does-not-validate-full-argument-names/43787168#43787168", "title": "GetOptions() in perl does not validate full argument names", "body": "<p>See \"Configuring <code>Getopt::Long</code>\" in the <a href=\"http://p3rl.org/Getopt::Long#Configuring-Getopt::Long\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <h3><code>auto_abbrev</code></h3>\n  \n  <p>Allow option names to be abbreviated to uniqueness. Default\n                  is enabled unless environment variable <code>POSIXLY_CORRECT</code> has\n                  been set, in which case \"<code>auto_abbrev</code>\" is disabled.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493917830, "post_id": 43787216, "comment_id": 74618491, "body": "I recommend <code>use Getopt::Long qw( :config posix_default );</code> instead; it provides saner defaults including <code>no_auto_abbrev</code>. Specifically, it&#39;s equivalent to <code>use Getopt::Long qw( :config no_auto_abbrev no_getopt_compat require_order );</code>, so <code>-fro</code> isn&#39;t allowed, <code>+from</code> isn&#39;t allowed, and mixing options and argument isn&#39;t allowed."}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 8, "last_activity_date": 1493912746, "last_edit_date": 1493912746, "creation_date": 1493911994, "answer_id": 43787216, "question_id": 43787024, "link": "https://stackoverflow.com/questions/43787024/getoptions-in-perl-does-not-validate-full-argument-names/43787216#43787216", "title": "GetOptions() in perl does not validate full argument names", "body": "<p>By default, abbreviations are enabled.  Disable <code>auto_abbrev</code>.  Refer to  <a href=\"http://perldoc.perl.org/Getopt/Long.html#Configuring-Getopt%3A%3ALong\" rel=\"noreferrer\">Getopt::Long</a>:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Getopt::Long qw(:config no_auto_abbrev);\n\nmy ($source,$dest);\nGetOptions(\n'from=s' =&gt; \\$source,\n'to=s' =&gt; \\$dest\n) or die \"Incorrect arguements\\n\";\n</code></pre>\n\n<p>For example, when <code>-fro</code> is passed, this dies with the message:</p>\n\n<pre><code>Unknown option: fro\nIncorrect arguements\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7963988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/344329db0faeccddb688d28b12bf47ef?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/7963988/ak47"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493915048, "creation_date": 1493911467, "last_edit_date": 1493914962, "question_id": 43787024, "link": "https://stackoverflow.com/questions/43787024/getoptions-in-perl-does-not-validate-full-argument-names", "title": "GetOptions() in perl does not validate full argument names", "body": "<p>Suppose I want to enter 2 command line parameters - source and destination.\nGetOptions allows the command line by checking only the first character of the argument name instead of the full string.\nHow do I validate for the full arguments strings instead of just allowing its substrings to be passed?</p>\n\n<p>Here's an example program:</p>\n\n<pre><code>my ($source,$dest);\nGetOptions(\n'from=s' =&gt; \\$source,\n'to=s' =&gt; \\$dest\n) or die \"Incorrect arguments\\n\";\n</code></pre>\n\n<p>It accepts any of:</p>\n\n<ul>\n<li><code>-from</code></li>\n<li><code>-fro</code></li>\n<li><code>-fr</code></li>\n<li><p><code>-f</code></p></li>\n<li><p><code>-to</code></p></li>\n<li><code>-t</code></li>\n</ul>\n\n<p>However, I want it to accept only</p>\n\n<ul>\n<li><code>-from</code></li>\n<li><code>-to</code></li>\n</ul>\n\n<p>and fail if anything except those full words is passed.</p>\n\n<p>How can I disallow the abbreviated options?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 563, "user_id": 3494614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d126b0db2c9c00ed1319d19231a386f?s=128&d=identicon&r=PG&f=1", "display_name": "user3494614", "link": "https://stackoverflow.com/users/3494614/user3494614"}, "reply_to_user": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 0, "creation_date": 1493911135, "post_id": 43786693, "comment_id": 74614127, "body": "No it should be either NA,PO,EO,PRO followed by whitespace."}, {"owner": {"reputation": 563, "user_id": 3494614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d126b0db2c9c00ed1319d19231a386f?s=128&d=identicon&r=PG&f=1", "display_name": "user3494614", "link": "https://stackoverflow.com/users/3494614/user3494614"}, "reply_to_user": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "edited": false, "score": 0, "creation_date": 1493911532, "post_id": 43786693, "comment_id": 74614427, "body": "PTTO/ETTO/PROO State ((?:NA|PO|EO|PRO)\\s+){14} works"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1493911377, "creation_date": 1493911377, "answer_id": 43786991, "question_id": 43786693, "link": "https://stackoverflow.com/questions/43786693/perl-reusing-parts-of-regular-expressions/43786991#43786991", "title": "Perl reusing parts of regular expressions", "body": "<p>Well, the short answer is - I wouldn't try to do this with a regex. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nwhile (&lt;&gt;) {\n\n   next unless m{^PTTO/ETTO/PROO State};\n   my ( undef, undef, @stuff ) = split;\n   print Dumper \\@stuff;\n\n   my @invalid = grep { not m/^(?:NA|PO|EO|PRO)$/ } @stuff;\n   if (@invalid) {\n      print \"Invalid values: @invalid\\n\";\n   }\n   else {\n      print \"Line matches\\n\";\n   }\n}\n</code></pre>\n\n<p>This way you split the line into fields first, then check each of them individually against a regex. </p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493913322, "post_id": 43787198, "comment_id": 74615792, "body": "Is it worth setting the inner bracket to capturing, so you&#39;re not capturing the whitespace?"}, {"owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1493914594, "post_id": 43787198, "comment_id": 74616660, "body": "@Sobrique I&#39;m not sure I know what you mean. I can&#39;t see a way to do it with 1 group. I guess neither group needs to be capturing, is that what you mean?"}], "tags": [], "owner": {"reputation": 23234, "user_id": 4333555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i9zgM.jpg?s=128&g=1", "display_name": "chris85", "link": "https://stackoverflow.com/users/4333555/chris85"}, "is_accepted": true, "score": 1, "last_activity_date": 1493911947, "creation_date": 1493911947, "answer_id": 43787198, "question_id": 43786693, "link": "https://stackoverflow.com/questions/43786693/perl-reusing-parts-of-regular-expressions/43787198#43787198", "title": "Perl reusing parts of regular expressions", "body": "<p>Your regex is incorrect, this:</p>\n\n<pre><code>(NA|PO|EO|PRO\\s+){14}\n</code></pre>\n\n<p>Allows <code>NA</code>, <code>PO</code>, <code>EO</code>, or <code>PRO</code> + one or more white spaces, 14 times (<a href=\"https://regex101.com/r/rEc16C/3\" rel=\"nofollow noreferrer\">https://regex101.com/r/rEc16C/3</a>). What you want though is:</p>\n\n<pre><code>((?:NA|PO|EO|PRO)\\s+){14}\n</code></pre>\n\n<p>Which allows <code>NA</code>, <code>PO</code>, <code>EO</code>, or <code>PRO</code>, and one or more white spaces 14 times (<a href=\"https://regex101.com/r/rEc16C/2\" rel=\"nofollow noreferrer\">https://regex101.com/r/rEc16C/2</a>).</p>\n"}], "owner": {"reputation": 563, "user_id": 3494614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d126b0db2c9c00ed1319d19231a386f?s=128&d=identicon&r=PG&f=1", "display_name": "user3494614", "link": "https://stackoverflow.com/users/3494614/user3494614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 43787198, "answer_count": 2, "score": 0, "last_activity_date": 1493911947, "creation_date": 1493910579, "last_edit_date": 1493911341, "question_id": 43786693, "link": "https://stackoverflow.com/questions/43786693/perl-reusing-parts-of-regular-expressions", "title": "Perl reusing parts of regular expressions", "body": "<p>I am trying to write a regex in perl to match this line</p>\n\n<pre><code>    PTTO/ETTO/PROO State  NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA       NA     \n\nHere \"PTTO/ETTO/PROO State \" is constant and line must start with that after that there could be PO,EO,PRO followed by whitespace. Then the same pattern of any one of PO,EO,PRO followed by whitespace repeats.\n</code></pre>\n\n<p>I am trying to match this line with this regex and it matches</p>\n\n<pre><code>PTTO/ETTO/PROO State  NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+NA|PO|EO|PRO\\s+\n</code></pre>\n\n<p>but it is not matching with the below regex.</p>\n\n<pre><code>PTTO/ETTO/PROO State  (NA|PO|EO|PRO\\s+){14}\n</code></pre>\n\n<p>Can someone please explain me where am I going wrong here?</p>\n\n<p>Thanks In Advance</p>\n"}, {"tags": ["perl", "floating-point", "floating-point-comparison"], "comments": [{"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493907001, "post_id": 43785155, "comment_id": 74610887, "body": "You missed code formatting. :("}, {"owner": {"reputation": 4150, "user_id": 2195875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/284c7d641e3c7f89e18ff01f31de4c24?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/2195875/tom"}, "reply_to_user": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493907089, "post_id": 43785155, "comment_id": 74610961, "body": "@toreau I&#39;ve improved formatting"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 2, "creation_date": 1493907698, "post_id": 43785155, "comment_id": 74611441, "body": "Using a pencil and paper write down the <i>decimal</i> representation of 1/3rd. Multiply it by 3.  Tell us the answer.  If you wrote down 0.3333 your answer will be 0.9999. In programming a floating point number is often stored using a binary representation, much like this example just used of representing 1/3rd as 0.3333. That&#39;s what you missed."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1493908396, "post_id": 43785155, "comment_id": 74611985, "body": "You missed several things, including, but not limited to the fact that your question is not about string comparisons at all, but you gave your post a misleading title. And, the fact that you added weird complications to make the problem statement as opaque as possible."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1493919334, "post_id": 43785479, "comment_id": 74619325, "body": "Using <code>int</code> always rounds down, which isn&#39;t always correct. You need to round to nearest."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 7, "last_activity_date": 1493919259, "last_edit_date": 1493919259, "creation_date": 1493907559, "answer_id": 43785479, "question_id": 43785155, "link": "https://stackoverflow.com/questions/43785155/in-perl-why-does-10018-35-not-compare-equal-to-1835/43785479#43785479", "title": "In Perl, why does 100*18.35 not compare equal to 1835?", "body": "<p>What you're missing is an old computer science problem - floating point conversion.</p>\n\n<p>You see, you cannot <em>precisely</em> represent '0.35' as a floating point number since it's a periodic number in binary. </p>\n\n<p>So if you add:</p>\n\n<pre><code>my $new = $a-&gt;{a} - $b;\nprint $new;\n</code></pre>\n\n<p>You'll get:</p>\n\n<pre><code>2.27373675443232e-013\n</code></pre>\n\n<p><code>$a-&gt;{a}</code> <em>is</em> very slightly more than <code>$b</code> and thus the test <em>is</em> correct. </p>\n\n<p>You can see this at work if you:</p>\n\n<pre><code>my $new_val = 18.35 - 18;\nprint $new_val;\n</code></pre>\n\n<p>Whilst we're at it though - don't use <code>$a</code> or <code>$b</code> - they're reserved for <code>sort</code>. And single letter var names aren't good style anyway. </p>\n\n<p>Also <code>my $a = {};</code> is redundant - there's no need to initialise an empty hash-reference like that. </p>\n\n<p>To do what you want, then you either need to compare 'like types' or cast explicitly to integer:</p>\n\n<pre><code>$a-&gt;{a} = int(18.35 * 100);\n</code></pre>\n"}], "owner": {"reputation": 4150, "user_id": 2195875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/284c7d641e3c7f89e18ff01f31de4c24?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/2195875/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1493908260, "accepted_answer_id": 43785479, "answer_count": 1, "score": -2, "last_activity_date": 1493919259, "creation_date": 1493906758, "last_edit_date": 1493908438, "question_id": 43785155, "link": "https://stackoverflow.com/questions/43785155/in-perl-why-does-10018-35-not-compare-equal-to-1835", "closed_reason": "Duplicate", "title": "In Perl, why does 100*18.35 not compare equal to 1835?", "body": "<p>When I run the following Perl one-liner:</p>\n\n<pre><code>$ perl -e 'print \"Oh no!\\n\" unless 1835 == 100*18.35'\n</code></pre>\n\n<p>I get</p>\n\n<pre>Oh no!</pre>\n\n<p>Why is that?</p>\n"}, {"tags": ["javascript", "perl", "websocket", "jsonp"], "comments": [{"owner": {"reputation": 800, "user_id": 6499984, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/bae3e5303384dc5d90cdb2cb6cca245a?s=128&d=identicon&r=PG&f=1", "display_name": "samnu pel", "link": "https://stackoverflow.com/users/6499984/samnu-pel"}, "edited": false, "score": 1, "creation_date": 1493906501, "post_id": 43785030, "comment_id": 74610519, "body": "<a href=\"http://stackoverflow.com/questions/2067472/what-is-jsonp-all-about\" title=\"what is jsonp all about\">stackoverflow.com/questions/2067472/what-is-jsonp-all-about</a> - might be useful"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 800, "user_id": 6499984, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/bae3e5303384dc5d90cdb2cb6cca245a?s=128&d=identicon&r=PG&f=1", "display_name": "samnu pel", "link": "https://stackoverflow.com/users/6499984/samnu-pel"}, "edited": false, "score": 0, "creation_date": 1493906767, "post_id": 43785030, "comment_id": 74610708, "body": "@sanju: Thank you, but neither that nor <a href=\"https://en.wikipedia.org/wiki/JSONP\" rel=\"nofollow noreferrer\">the Wikipedia page</a> or anything else I&#39;ve found on the web answer my question."}, {"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 3, "creation_date": 1493906986, "post_id": 43785030, "comment_id": 74610878, "body": "&quot;WebSocket JSONP&quot; doesn&#39;t make much sense. The point of JSONP is that browsers allow GET requests to any URL. JSONP means that the server responds the the request with a small snippet of JavaScript, basically just a function call. The JSON data is passed as the parameter to the function. You reference the URL in a <code>&lt;script&gt;</code> tag, so the browser does what it always does with scripts: it evaluates the code, so the function is called (presumably a function elsewhere on the page) and the JSON is consumed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1493908317, "post_id": 43785030, "comment_id": 74611935, "body": "@Pointy: That&#39;s pretty much what I thought, but I blamed my lack of understanding. It&#39;s clearly what the documentation says, and what a couple of support guys have confirmed. Are you confident enough to post that as an answer?"}, {"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1493908648, "post_id": 43785030, "comment_id": 74612169, "body": "@Borodin well I don&#39;t know anything about the service you&#39;re wanting to use, so for all I know somebody concocted some weird &quot;JSONP over WebSockets&quot; solution, but I do know that the original idea (and most frequent continued purpose) was to allow access to dynamic services from client-side code across domain boundaries."}], "answers": [{"comments": [{"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1536165589, "post_id": 43785299, "comment_id": 91329516, "body": "Wrong  answer. This is about plain HTTP. The fact that the server response (hopefully) happens to be valid, non-malicious JavaScript is irrelevant,  when you make  the  request from a different programming language. It&#39;s even safer because you don&#39;t have to blindly trust the  remote server but can check whether the response meets your expectations."}], "tags": [], "owner": {"reputation": 7895, "user_id": 3801947, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/MzYMo.jpg?s=128&g=1", "display_name": "Mohit Bhardwaj", "link": "https://stackoverflow.com/users/3801947/mohit-bhardwaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1493907123, "creation_date": 1493907123, "answer_id": 43785299, "question_id": 43785030, "link": "https://stackoverflow.com/questions/43785030/does-jsonp-require-the-use-of-javascript/43785299#43785299", "title": "Does JSONP require the use of JavaScript?", "body": "<p>Yes, you need to use javascript. JSONP is mostly used to make cross origin ajax requests. And you need to specify a javascript function that will be called when your ajax request returns with response.</p>\n"}, {"tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": true, "score": 2, "last_activity_date": 1493919809, "last_edit_date": 1495542861, "creation_date": 1493913073, "answer_id": 43787597, "question_id": 43785030, "link": "https://stackoverflow.com/questions/43785030/does-jsonp-require-the-use-of-javascript/43787597#43787597", "title": "Does JSONP require the use of JavaScript?", "body": "<p>I believe it's possible to use JSONP API without JavaScript on client side provided the API follows \"common JSONP contract\". The latter means the server is expected to return JSON data wrapped into a function call, i.e. the server response (body) would look something like <code>jsonpCallback({\"key\": \"value\"})</code>.</p>\n\n<p>To retrieve the JSON payload you just need to strip off the function wrapper:</p>\n\n<pre><code>$server_response =~ s/^\\s*\\w+\\((.*)\\);?\\s*$/$1/s;   # now it's pure JSON: '{\"key\": \"value\"}'\n</code></pre>\n\n<p>N.B. In theory the function name may require <a href=\"https://stackoverflow.com/a/9337047/4295017\">much harder</a> regex but again, if the \"common contract\" is in place, you define a simple callback function name in in your JSONP request.</p>\n"}], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 43787597, "answer_count": 2, "score": -1, "last_activity_date": 1493919809, "creation_date": 1493906420, "last_edit_date": 1493906614, "question_id": 43785030, "link": "https://stackoverflow.com/questions/43785030/does-jsonp-require-the-use-of-javascript", "title": "Does JSONP require the use of JavaScript?", "body": "<p>I'm vague on the details of JSONP, which doesn't appear to be a proper specification at all.</p>\n\n<p>I am writing a Perl client to communicate with a server that has a WebSocket JSONP API.</p>\n\n<p>Do I need to use JavaScript to specify the JSONP callback, or can it be done in another way?</p>\n"}, {"tags": ["perl", "imagemagick"], "comments": [{"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493909664, "post_id": 43784957, "comment_id": 74612946, "body": "@Sinan&#220;n&#252;r: <code>Sample</code> gives the same result. ImageMagick version being used: ImageMagick 7.0.5-5 Q16 x86_64"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1493909909, "post_id": 43784957, "comment_id": 74613160, "body": "toreau, you might have an excellent eye, because to me both look the same! Checking both with <code>identify -verbose</code> I also notice no difference other than the gamma chunk which is not present in the original one, and <code>cHRM</code> and <code>bKGD</code>. Gamma is 0.454545 in the original and 0.45455 in the new one. Colorspace is the same. Maybe our systems or viewing programs react to that differently. I&#39;m on Mac OS btw"}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493910189, "post_id": 43784957, "comment_id": 74613373, "body": "@Sinan&#220;n&#252;r: Weird. They are definitely different for me, and I also tried to change the color profile in OSX to see if there were any &quot;matching&quot; profiles. To no luck; it&#39;s always different. Also, see my edit about converting to JPEG &quot;fixes the problem.&quot;"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1493910730, "post_id": 43784957, "comment_id": 74613832, "body": "Yes I&#39;ve been flipping between then looking very closely but no difference to me. Interesting about the JPEG. The thing is, I don&#39;t see any relevant difference in metadata between the images either. You sure you get the same difference in the imgur samples? Sorry!"}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493911417, "post_id": 43784957, "comment_id": 74614343, "body": "<code>$image</code> contains the image as read from disk (or downloaded via http). There&#39;s not a problem there, because if I just load the image in Image::Magick and save it, without doing anything with it, it&#39;s perfectly OK. (Also sorry for mixing you two...)"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1493913594, "post_id": 43784957, "comment_id": 74615991, "body": "See also <a href=\"https://superuser.com/questions/579216/why-does-this-png-image-display-differently-in-chrome-firefox-than-in-safari-a\">Why does this PNG image display differently in Chrome &amp; Firefox than in Safari and IE?</a> and <a href=\"https://hsivonen.fi/png-gamma/\" rel=\"nofollow noreferrer\">The Sad Story of PNG Gamma \u201cCorrection\u201d</a>."}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493921316, "post_id": 43784957, "comment_id": 74620468, "body": "Yes, also the imgur pictures are different for me. What color profile do you use on your Mac? That &quot;Sad Story...&quot; article was <i>extremely</i> interesting, though. Thanks a lot!"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493921822, "post_id": 43784957, "comment_id": 74620720, "body": "@toreau The file sizes are different, but the pixel RGB values are identical as shown in detail in answer. The difference in file sizes comes from the gAMA chunk included in the modified image. Also, I have a feeling you still do not realize that sidyll and I are different people."}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493927443, "post_id": 43784957, "comment_id": 74623919, "body": "I&#39;m very aware of you two being different people now. Sorry about that. :) What I don&#39;t understand, though, is why ImageMagick <i>add</i> this kind of data when I don&#39;t ask for it."}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493913784, "post_id": 43787319, "comment_id": 74616132, "body": "Great answer, much appreciated! However, it doesn&#39;t say much about &quot;why&quot; and &quot;what to do&quot;...? :)"}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493914825, "post_id": 43787319, "comment_id": 74616796, "body": "<code>Strip</code> is not an option; it removes too much information that is important for colors, among other things."}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493915745, "post_id": 43787319, "comment_id": 74617337, "body": "<code>$magick-&gt;Set(option =&gt; &quot;png:exclude-chunk=gAMA&quot;);</code> gives me the correct colors. But this still doesn&#39;t help me much; why does ImageMagick add this chunk? I never asked for it?"}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1493941943, "last_edit_date": 1493941943, "creation_date": 1493912276, "answer_id": 43787319, "question_id": 43784957, "link": "https://stackoverflow.com/questions/43784957/why-do-the-color-profile-spaces-of-my-png-images-change-when-processed-with-perl/43787319#43787319", "title": "Why do the color profile/spaces of my PNG images change when processed with Perl&#39;s Image::Magick?", "body": "<p>When the image is saved in PNG format using <code>Image::Magick</code>, a <a href=\"https://www.w3.org/TR/PNG-Chunks.html#C.gAMA\" rel=\"nofollow noreferrer\">gAMA chunk</a> is added as can be seen by comparing the output of <a href=\"http://www.graphicsmagick.org/identify.html\" rel=\"nofollow noreferrer\"><code>gm identify -verbose modified.png</code></a> with the output of <code>gm identify -verbose original.png</code> shows:</p>\n\n<pre>$ fc original.info modified.info\n***** original.info\n      Standard Deviation:      18869.16 (0.2879)\n  Filesize: 613.0Ki\n  Interlace: No\n***** MODIFIED.INFO\n      Standard Deviation:      18869.16 (0.2879)\n  Gamma: 0.45455\n  Chromaticity:\n    red primary: (0.64,0.33)\n    green primary: (0.3,0.6)\n    blue primary: (0.15,0.06)\n    white point: (0.3127,0.329)\n  Filesize: 614.2Ki\n  Interlace: No\n*****</pre>\n\n<p>The RGB color <strong><em>values</em></strong> in the files are the same, but the saved gamma correction information in the second file causes it to be displayed slightly differently than the original. That is why converting the image to JPG \"fixes\" the problem: It removes the gamma correction information.</p>\n\n<p>Looking at the <a href=\"https://github.com/ImageMagick/ImageMagick/blob/f19d414d0ac4527544fef324969aa2a5d38b1027/MagickCore/image.c#L3661\" rel=\"nofollow noreferrer\">ImageMagick source code</a>, the stripping is achieved using:</p>\n\n<blockquote>\n<pre><code>SetImageArtifact(image,\"png:exclude-chunk\",\n     \"bKGD,cHRM,EXIF,gAMA,iCCP,iTXt,sRGB,tEXt,zCCP,zTXt,date\");\n</code></pre>\n</blockquote>\n\n<p>Therefore, I recommended the OP try:</p>\n\n<pre><code> $magick-&gt;Set(option =&gt; \"png:exclude-chunk=gAMA\");\n</code></pre>\n\n<p>in his Perl program, and the OP reported it solved the problem.</p>\n\n<p>Related information:</p>\n\n<ul>\n<li><p><a href=\"http://www.libpng.org/pub/png/book/chapter10.html#png.ch10.tbl.1\" rel=\"nofollow noreferrer\">libpng docs</a></p></li>\n<li><p><a href=\"http://jonathannicol.com/blog/2006/12/01/fixing-png-gamma/\" rel=\"nofollow noreferrer\">Fixing PNG Gamma</a></p></li>\n<li><p><a href=\"https://hsivonen.fi/png-gamma/\" rel=\"nofollow noreferrer\">The Sad Story of PNG Gamma \u201cCorrection\u201d</a></p></li>\n<li><p><a href=\"https://superuser.com/questions/579216/why-does-this-png-image-display-differently-in-chrome-firefox-than-in-safari-a\">Why does this PNG image display differently in Chrome &amp; Firefox than in Safari and IE?</a></p></li>\n</ul>\n"}], "owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493942060, "creation_date": 1493906272, "last_edit_date": 1493942060, "question_id": 43784957, "link": "https://stackoverflow.com/questions/43784957/why-do-the-color-profile-spaces-of-my-png-images-change-when-processed-with-perl", "title": "Why do the color profile/spaces of my PNG images change when processed with Perl&#39;s Image::Magick?", "body": "<p>I have encountered some quite puzzling behaviour with ImageMagick (using <a href=\"https://www.imagemagick.org/script/perl-magick.php\" rel=\"nofollow noreferrer\">PerlMagick</a>: I open a PNG picture, resize it, and saves it.</p>\n\n<p>All good, except that the resulting image colors' are slightly different.</p>\n\n<ul>\n<li><a href=\"https://imgur.com/a/WrMfS\" rel=\"nofollow noreferrer\">Original image</a></li>\n<li><a href=\"https://imgur.com/a/yQQwE\" rel=\"nofollow noreferrer\">Processed image</a></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code># Create the ImageMagick object.\nmy $magick = Image::Magick-&gt;new;\n\neval {\n    $magick-&gt;BlobToImage( $image );\n};\n\n$magick-&gt;Scale( ... );\n\n# ...and then save it.\n</code></pre>\n\n<p>However, if I manually set the image's color space to \"RGB\" right before I save it, the images are similar color-wise;</p>\n\n<pre><code>$magick-&gt;Colorspace( colorspace =&gt; 'RGB' );\n</code></pre>\n\n<p>Why is this?</p>\n\n<p><strong>EDIT:</strong> If I do exactly the same, except setting the color space manually, <em>but</em> convert to JPEG before saving, the colors becomes correct. Even more puzzling. :-/</p>\n"}, {"tags": ["macos", "perl", "curl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493929879, "post_id": 43784384, "comment_id": 74625266, "body": "I think it&#39;s because you haven&#39;t installed <code>libcurl</code>&#39;s dev files. WWW::Curl::Easy&#39;s installer needs to extract definitions of constants from <code>curl.h</code>, and <code>curl.h</code> isn&#39;t usually installed by installing an OS&#39;s <code>libcurl</code> package."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1493930204, "post_id": 43784384, "comment_id": 74625453, "body": "(If I had to pick between WWW::Curl::Easy and Net::Curl::Easy, I&#39;d use the latter. It&#39;s not that I know anything wrong about WWW::Curl::Easy, it&#39;s just that I have experience with Net::Curl::Easy, and it was written as an improvement to WWW::Curl:Easy.)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5792265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e44710da8d7faa24a56b31ff8639533?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/5792265/pete"}, "edited": false, "score": 0, "creation_date": 1493908357, "post_id": 43785114, "comment_id": 74611958, "body": "It&#39;s a package that I use when making API calls to Qualys.  I&#39;m no expert, and the example code I found uses it, so that&#39;s what I rolled with."}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "reply_to_user": {"reputation": 11, "user_id": 5792265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e44710da8d7faa24a56b31ff8639533?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/5792265/pete"}, "edited": false, "score": 0, "creation_date": 1493908988, "post_id": 43785114, "comment_id": 74612428, "body": "Can you link to the example code, or otherwise post it somewhere (pastebin, gist etc.)? If so, I can help you rewrite it using a bit more modern packages. :)"}, {"owner": {"reputation": 11, "user_id": 5792265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e44710da8d7faa24a56b31ff8639533?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/5792265/pete"}, "edited": false, "score": 0, "creation_date": 1493909483, "post_id": 43785114, "comment_id": 74612813, "body": "Here is the address of the example I used: <a href=\"https://github.com/Qualys/community/tree/master/fetchreport\" rel=\"nofollow noreferrer\">github.com/Qualys/community/tree/master/fetchreport</a>"}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "reply_to_user": {"reputation": 11, "user_id": 5792265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e44710da8d7faa24a56b31ff8639533?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/5792265/pete"}, "edited": false, "score": 0, "creation_date": 1493913562, "post_id": 43785114, "comment_id": 74615967, "body": "@Pete: Ok. This was much more than I anticipated for a rewrite. :) Plus, I have no way of testing a rewrite, so my suggestion is that you install Linux on a VM and take it from there. The problem seems to be with newer version of gcc that comes with OSX. Sorry. :("}, {"owner": {"reputation": 11, "user_id": 5792265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e44710da8d7faa24a56b31ff8639533?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/5792265/pete"}, "edited": false, "score": 0, "creation_date": 1493916890, "post_id": 43785114, "comment_id": 74617999, "body": "Part of the issue is that I didn&#39;t realize that XCode doesn&#39;t include the command line developer tools anymore: <a href=\"https://superuser.com/questions/995360/missing-usr-include-in-os-x-el-capitan\" title=\"missing usr include in os x el capitan\">superuser.com/questions/995360/&hellip;</a>  Though now I&#39;m just getting an error for a different missing file (curlver.h)"}], "tags": [], "owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "is_accepted": false, "score": 0, "last_activity_date": 1493906616, "creation_date": 1493906616, "answer_id": 43785114, "question_id": 43784384, "link": "https://stackoverflow.com/questions/43784384/error-installing-wwwcurleasy-cannot-build-constants-macos/43785114#43785114", "title": "error installing WWW::Curl::Easy &quot;Cannot build Constants&quot; MacOS", "body": "<p>You could install <a href=\"https://brew.sh/\" rel=\"nofollow noreferrer\">Homebrew</a>, and then install curl (<code>brew install curl</code>) which will help <em>a little</em>, but you'll probably run into compilation problems.</p>\n\n<p>I'm no big fan of the <a href=\"https://metacpan.org/pod/WWW::Curl\" rel=\"nofollow noreferrer\">WWW::Curl</a> package, though, so might I ask what you are trying to achieve? There are way better \"I want to access the interwebz\"-packages out there. :)</p>\n"}, {"comments": [{"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493929161, "post_id": 43789593, "comment_id": 74624907, "body": "Yes and no. The newest Xcode stuff from Apple fubars the module you want to install, because it references old-ish &quot;stuff.&quot; Sorry for the short version. You <i>can</i> solve it by installing an old gcc (4.8, I think), but I would rather fire up an VM if I were you."}, {"owner": {"reputation": 648, "user_id": 1204911, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/49ffe233c02befbec1ec3195553fdec8?s=128&d=identicon&r=PG", "display_name": "toreau", "link": "https://stackoverflow.com/users/1204911/toreau"}, "edited": false, "score": 0, "creation_date": 1493929264, "post_id": 43789593, "comment_id": 74624963, "body": "One other solution would be - of course - to ask those Qual-guys to pay me to rewrite their (?) script so that it conforms to modern standards. ;)"}], "tags": [], "owner": {"reputation": 11, "user_id": 5792265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e44710da8d7faa24a56b31ff8639533?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/5792265/pete"}, "is_accepted": true, "score": 0, "last_activity_date": 1493920032, "creation_date": 1493920032, "answer_id": 43789593, "question_id": 43784384, "link": "https://stackoverflow.com/questions/43784384/error-installing-wwwcurleasy-cannot-build-constants-macos/43789593#43789593", "title": "error installing WWW::Curl::Easy &quot;Cannot build Constants&quot; MacOS", "body": "<p>This particular error seems to be because the XCode command line tools were not installed.  I followed the instructions here: <a href=\"https://superuser.com/questions/995360/missing-usr-include-in-os-x-el-capitan\">https://superuser.com/questions/995360/missing-usr-include-in-os-x-el-capitan</a></p>\n\n<p>This still resulted in an error, but it is different and possibly unrelated to this one, so I am considering this question resolved.</p>\n"}], "owner": {"reputation": 11, "user_id": 5792265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e44710da8d7faa24a56b31ff8639533?s=128&d=identicon&r=PG&f=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/5792265/pete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 1, "accepted_answer_id": 43789593, "answer_count": 2, "score": 0, "last_activity_date": 1493920032, "creation_date": 1493904833, "question_id": 43784384, "link": "https://stackoverflow.com/questions/43784384/error-installing-wwwcurleasy-cannot-build-constants-macos", "title": "error installing WWW::Curl::Easy &quot;Cannot build Constants&quot; MacOS", "body": "<p>I'm trying to install the WWW::Curl::Easy module on MacOS10.12.4 and it fails stating \"Cannot find curl.h - cannot build constants file\".</p>\n\n<p>Curl-config in /usr/bin has an includedir of /usr/include, which does not exist.  I checked the Makefile with the perl module, and it lists several other locations it looks, such as /usr/local/include, /usr/local, etc.  Those didn't exist, but I made them and copied the curl.h that comes with XCode into them.</p>\n\n<p>I still receive the same error.  Here is the log:</p>\n\n<pre><code>cpanm (App::cpanminus) 1.7043 on perl 5.016000 built for darwin-2level\nWork directory is /Users/thisUser/.cpanm/work/1493902651.14410\nYou have make /usr/bin/make\nYou have /usr/bin/curl\nYou have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3\nYou have /usr/bin/unzip\nSearching WWW::Curl::Easy () on cpanmetadb ...\n--&gt; Working on WWW::Curl::Easy\nFetching http://www.cpan.org/authors/id/S/SZ/SZBALINT/WWW-Curl-4.17.tar.gz\n-&gt; OK\nUnpacking WWW-Curl-4.17.tar.gz\nEntering WWW-Curl-4.17\nChecking configure dependencies from META.yml\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (6.63_02)\nConfiguring WWW-Curl-4.17\nRunning Makefile.PL\nLocating required external dependency bin:curl-config... found at /usr/bin/curl-config.\nThe version is libcurl 7.51.0\nCannot find curl.h - cannot build constants files  - see Makefile.PL at Makefile.PL line 96.\n-&gt; N/A\n-&gt; FAIL Configure failed for WWW-Curl-4.17. See /Users/thisUser/.cpanm/work/1493902651.14410/build.log for details.\n</code></pre>\n\n<p>I've done my best searches here and on Google, and not finding an answer. I didn't have this issue when I installed this on my last Mac, so not sure what was changed.</p>\n"}, {"tags": ["linux", "bash", "perl", "passwords"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493900848, "post_id": 43782746, "comment_id": 74605958, "body": "You will need to include the passwords in some way. What&#39;s the reason you want them masked? Think about that first. Do you care if they are there as clear text in the source of the website, so that you&#39;d just not see them at a glance and the user needs to make some effort to get one? Or is this a security concern?"}, {"owner": {"reputation": 167, "user_id": 6650175, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ed6998139f290e17b248ecd080529858?s=128&d=identicon&r=PG&f=1", "display_name": "tso", "link": "https://stackoverflow.com/users/6650175/tso"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493900911, "post_id": 43782746, "comment_id": 74606007, "body": "It has a security reason"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1493901750, "post_id": 43782746, "comment_id": 74606645, "body": "Huh. That&#39;s tricky. Do you serve that page through SSL/https? Are you afraid that someone might listen in? Please be <i>very specific</i>. I&#39;m trying to narrow down what you want to do exactly. Right now your question is too broad. It&#39;s more about process than about programming. That code looks scary, too. I can explain what it does, but that won&#39;t help. So your code is not the issue yet as it seems you don&#39;t really know what to do yet. (And probably also not <i>how</i> to do that, but that&#39;s the point. That does not matter at this point)."}, {"owner": {"reputation": 167, "user_id": 6650175, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ed6998139f290e17b248ecd080529858?s=128&d=identicon&r=PG&f=1", "display_name": "tso", "link": "https://stackoverflow.com/users/6650175/tso"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493903286, "post_id": 43782746, "comment_id": 74607918, "body": "So all I want to know if it is somehow possible to create something like an onclick sub, where I have something like a button where a passwords is standing. And onclick it should show the password."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 4, "creation_date": 1493903352, "post_id": 43782746, "comment_id": 74607961, "body": "This is a good example of why the HTML generation functions in CGI.pm ought never to be used. While the wisdom of storing and transmitting plain text passwords is another topic, the idea that one should have to manipulate Perl code to add some JavaScript to a page is wrong."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1493905750, "post_id": 43783880, "comment_id": 74609863, "body": "Presumably you&#39;re intedning that the JavaScript will change the input type from <code>password</code> to <code>text</code>?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1493905955, "post_id": 43783880, "comment_id": 74610034, "body": "I am agnostic on the details. If I were doing this from scratch, I would not send the password in the first place, only asterisks or some such masking character. Then clicking would transfer the password for that particular certificate and only that one. I am assuming this is some kind of in-house certificate management system. Even then the passwords should not be stored and displayed together with other info. But, this is not the place for that discussion."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1493907958, "last_edit_date": 1592644375, "creation_date": 1493903546, "answer_id": 43783880, "question_id": 43782746, "link": "https://stackoverflow.com/questions/43782746/html-button-to-revbeal-password-input-field/43783880#43783880", "title": "HTML button to revbeal password input field", "body": "<p>You should only add a class, say <code>password-container</code> to elements that contain passwords. Set the initial content to masked.</p>\n<p>That is:</p>\n<pre><code>push @certlist, {\n    state     =&gt; $cert[0],\n    'expire'  =&gt; $date,\n    'subject' =&gt; $cert[5],\n    'cn'      =&gt; $cn,\n    'ip'      =&gt; $ccd_ips-&gt;{$cn},\n    'dl'      =&gt; '',\n    're'      =&gt; '',\n    'pw'      =&gt; '*' x 8,\n};\n</code></pre>\n<p>Add a bit of JavaScript to the page to add an <code>onclick</code> handler for all elements with the <code>password-container</code> class which handles the toggling.</p>\n<pre><code>return $q-&gt;table(\n    { 'class' =&gt; 'certs' },\n    $q-&gt;Tr(\n        [\n            $q-&gt;th(\n                [   'Status', 'Common Name', 'D',         'Password',\n                    'Date',   'Subject',     'IP-Adress', 'R'\n                ]\n            ) . &quot;\\n&quot;,\n            map {\n                  $q-&gt;td( { 'class' =&gt; $_-&gt;{'state'} }, $states{ $_-&gt;{'state'} } ) .\n                  $q-&gt;td( [ @$_{qw(cn dl)} ]) .\n                  $q-&gt;td( { 'class' =&gt; 'password_container' }, $_-&gt;{pw} ) .\n                  $q-&gt;td( [ @$_{qw(expire subject ip re)} ] ) . &quot;\\n&quot;\n            } @certlist\n        ]\n    )\n) . &quot;\\n&quot;;\n</code></pre>\n<p>or some similar garbage.</p>\n<p>This, once again, shows the value of not generating HTML using CGI.pm. Instead use templates. That's just advice for the future, I am assuming you can't fix the existing codebase.</p>\n<p>BTW, here is a relevant bit from <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">CGI.pm documentation</a>:</p>\n<blockquote>\n<p>All HTML generation functions within <code>CGI.pm</code> are no longer being maintained. Any issues, bugs, or patches will be rejected unless they relate to fundamentally broken page rendering.</p>\n<p>The rationale for this is that the HTML generation functions of <code>CGI.pm</code> are an obfuscation at best and a maintenance nightmare at worst. You should be using a template engine for better separation of concerns. See <code>CGI::Alternatives</code> for an example of using <code>CGI.pm</code> with the <code>Template::Toolkit</code> module.</p>\n<p>These functions, and perldoc for them, are considered deprecated, they are no longer being maintained and no fixes or features for them will be accepted. They will, however, continue to exist in CGI.pm without any deprecation warnings (&quot;soft&quot; deprecation) so you can continue to use them if you really want to. All documentation for these functions has been moved to <code>CGI::HTML::Functions</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 167, "user_id": 6650175, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ed6998139f290e17b248ecd080529858?s=128&d=identicon&r=PG&f=1", "display_name": "tso", "link": "https://stackoverflow.com/users/6650175/tso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1493907958, "creation_date": 1493900389, "last_edit_date": 1493905544, "question_id": 43782746, "link": "https://stackoverflow.com/questions/43782746/html-button-to-revbeal-password-input-field", "title": "HTML button to revbeal password input field", "body": "<p>I have a table with 7 columns. One of them contains passwords (pw).</p>\n\n<p>I dont want to show the passwords on my website: I would like to have some kind of \"click to expand\" in the table to show it.</p>\n\n<p>Here is a part of the script that contains the table:</p>\n\n<pre><code>...\n\npush @certlist, {\n    state     =&gt; $cert[0],\n    'expire'  =&gt; $date,\n    'subject' =&gt; $cert[5],\n    'cn'      =&gt; $cn,\n    'ip'      =&gt; $ccd_ips-&gt;{$cn},\n    'dl'      =&gt; '',\n    're'      =&gt; '',\n    'pw'      =&gt; $password-&gt;{$cn}\n};\n</code></pre>\n\n<p>...</p>\n\n<pre><code>return $q-&gt;table(\n    { 'class' =&gt; 'certs' },\n    $q-&gt;Tr(\n        [\n            $q-&gt;th(\n                [   'Status', 'Common Name', 'D',         'Password',\n                    'Date',   'Subject',     'IP-Adress', 'R'\n                ]\n            ) . \"\\n\",\n            map {\n                  $q-&gt;td( { 'class' =&gt; $_-&gt;{'state'} }, $states{ $_-&gt;{'state'} } ) .\n                  $q-&gt;td( [ @$_{qw(cn dl pw expire subject ip re)} ] ) . \"\\n\"\n            } @certlist\n        ]\n    )\n) . \"\\n\";\n\n...\n</code></pre>\n"}, {"tags": ["perl", "makefile"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493900905, "post_id": 43782163, "comment_id": 74606004, "body": "Is the <code>%DIFF_VARIABLES</code> hash in your module a lexical variable (defined with <code>my</code>) or a package variable (defined with <code>our</code> or <code>use vars</code>)?"}, {"owner": {"reputation": 59, "user_id": 1330796, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/06400654f90ec33c6ee1163fc47761c5?s=128&d=identicon&r=PG", "display_name": "Vijay c", "link": "https://stackoverflow.com/users/1330796/vijay-c"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493901700, "post_id": 43782163, "comment_id": 74606603, "body": "It is package variable - defined with &#39;our&#39;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493902177, "post_id": 43782163, "comment_id": 74606994, "body": "You will have to show the contents of <code>TEST_MODULE_1.pm</code>. What you have written passes the .pm file as input to the Perl command, but it is never read. You need to <i>execute</i> the module for the hash to gain a value."}, {"owner": {"reputation": 59, "user_id": 1330796, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/06400654f90ec33c6ee1163fc47761c5?s=128&d=identicon&r=PG", "display_name": "Vijay c", "link": "https://stackoverflow.com/users/1330796/vijay-c"}, "edited": false, "score": 0, "creation_date": 1493902780, "post_id": 43782163, "comment_id": 74607514, "body": "Borodin -  that is what I dont know - executing .pm from makefile to gain the value.  TEST_MODULE_1.pm is the package in which HASH -DIFF_VARIABLES is defined as package variable.."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493973561, "post_id": 43782163, "comment_id": 74640259, "body": "@Vijayc: It will be easier to help if we can see the contents of your Perl module and <code>my_new_perl_file.pl</code>."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 1330796, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/06400654f90ec33c6ee1163fc47761c5?s=128&d=identicon&r=PG", "display_name": "Vijay c", "link": "https://stackoverflow.com/users/1330796/vijay-c"}, "edited": false, "score": 0, "creation_date": 1493904307, "post_id": 43783673, "comment_id": 74608679, "body": "Thanks for reply Dave. I am trying what you suggested, but seems not working for me... doing some exp on top of it. Will post my updates.."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1493902993, "creation_date": 1493902993, "answer_id": 43783673, "question_id": 43782163, "link": "https://stackoverflow.com/questions/43782163/how-to-get-the-value-from-pm-xml-from-makefile/43783673#43783673", "title": "How to get the value from .pm/xml from Makefile", "body": "<p>You need to <code>print</code> the value in order for it to be passed out to your calling process. Here's a really simple package:</p>\n\n<pre><code>package Value;\n\nour %DIFF_VARIABLES = (\n  MAIN =&gt; { value =&gt; 'foo' },\n);\n\n1;\n</code></pre>\n\n<p>To print that value in a shell, we can use code like this:</p>\n\n<pre><code>$ perl -MValue -E'say $Value::DIFF_VARIABLES{MAIN}{value}'\nfoo\n</code></pre>\n\n<p>We can assign it to a shell variable like this:</p>\n\n<pre><code>$ VALUE=`perl -MValue -E'say $Value::DIFF_VARIABLES{MAIN}{value}'`\n$ echo $VALUE\nfoo\n</code></pre>\n\n<p>And you can probably build on that (using <code>$(shell ...)</code>) to do something similar in your Makefile.</p>\n"}], "owner": {"reputation": 59, "user_id": 1330796, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/06400654f90ec33c6ee1163fc47761c5?s=128&d=identicon&r=PG", "display_name": "Vijay c", "link": "https://stackoverflow.com/users/1330796/vijay-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493973490, "creation_date": 1493898755, "last_edit_date": 1493973490, "question_id": 43782163, "link": "https://stackoverflow.com/questions/43782163/how-to-get-the-value-from-pm-xml-from-makefile", "title": "How to get the value from .pm/xml from Makefile", "body": "<p>In a .pm file I have a hash <code>%DIFF_VARIABLES</code> and would like to extract the value of <code>$DIFF_VARIABLES{'MAIN'}{'value'}</code>.</p>\n\n<p>I would like to execute this from Makefile.</p>\n\n<p>I am trying this in the Makefile</p>\n\n<pre><code>MY_VAR := ($shell perl -Mconfig -e \"$DIFF_VARIABLES{'MAIN'}{'value'}\" /home/my_path/TEST_MODULE_1.pm)\n</code></pre>\n\n<p>But it is not working.</p>\n\n<p>I tried different ways, but I think I am making a mistake.</p>\n\n<hr>\n\n<p>Based on Below suggestion I tried this, but still its not working for me.. \nso here is what I did. I created a separate perl file where I placed the code which is looking for desired value from PERL Module. Now, in Makefile I execute that perl file</p>\n\n<p>But still it is NOT working......</p>\n\n<p>in Makefile here is what I did -</p>\n\n<pre><code>// comment --Lets say VAR_1's value came as 2.\n\nVAR_1 = $(shell perl ./my_new_perl_file.pl) export VAR_1\n\nifeq ($(VAR_1), 1) ...do task1 else ..do task2 endif\n</code></pre>\n\n<p>But it is not working... If I explicitly define VAR_1 = 1 in top of the makefile, then it is working...</p>\n\n<p>Any suggestion? pls.. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1493897544, "post_id": 43781542, "comment_id": 74603547, "body": "It is syntactic sugar for <b>xor operator</b> <code>$xor_sum = $xor_sum ^ $i;</code> can be written as <code>$xor_sum ^= $i;</code>"}, {"owner": {"reputation": 4467, "user_id": 3867787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gBELu.png?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/3867787/beginner"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 2, "creation_date": 1493897622, "post_id": 43781542, "comment_id": 74603606, "body": "@AbhiNickz ah, it is the assignment version of the bitwise ^ operator. Thanks! Please add as answer."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1493897831, "post_id": 43781542, "comment_id": 74603743, "body": "Comment Added as an answer :)"}], "answers": [{"tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": true, "score": 9, "last_activity_date": 1493897799, "creation_date": 1493897799, "answer_id": 43781814, "question_id": 43781542, "link": "https://stackoverflow.com/questions/43781542/what-does-the-operator-do-in-perl/43781814#43781814", "title": "What does the ^= operator do in Perl?", "body": "<p>In Perl <code>^=</code> is a <strong>syntactic sugar</strong> for <strong>xor operator</strong></p>\n\n<pre><code>$xor_sum = $xor_sum ^ $i;\n</code></pre>\n\n<p>can be rewritten as </p>\n\n<pre><code>$xor_sum ^= $i;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1493986675, "last_edit_date": 1493986675, "creation_date": 1493974856, "answer_id": 43800706, "question_id": 43781542, "link": "https://stackoverflow.com/questions/43781542/what-does-the-operator-do-in-perl/43800706#43800706", "title": "What does the ^= operator do in Perl?", "body": "<p>Any time you see a Perl expression of the form:</p>\n\n<pre><code>$l op= $r;\n</code></pre>\n\n<p>It can be rewritten as:</p>\n\n<pre><code>$l = $l op $r;\n</code></pre>\n\n<p>(Ok, I say \"any time\", but there are probably exceptions. There are always exceptions in Perl. But I can't think of one right now.)</p>\n"}], "owner": {"reputation": 4467, "user_id": 3867787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gBELu.png?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/3867787/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 43781814, "answer_count": 2, "score": 4, "last_activity_date": 1493986675, "creation_date": 1493897069, "question_id": 43781542, "link": "https://stackoverflow.com/questions/43781542/what-does-the-operator-do-in-perl", "title": "What does the ^= operator do in Perl?", "body": "<p>I am searching in the <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">documentation</a> what the ^= assigment operator does.</p>\n\n<p>The only thing I could find so far is:</p>\n\n<blockquote>\n  <p>Other assignment operators work similarly. The following are recognized:</p>\n\n<pre><code>  **=    +=    *=    &amp;=    &amp;.=    &lt;&lt;=    \n   -=    /=    |=    |.=   &gt;&gt;=    ||=\n   .=    %=    ^=    ^.=   //=    &amp;&amp;=\n</code></pre>\n</blockquote>\n\n<p>What is the result of <code>$c ^= $r;</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1493974561, "post_id": 43781015, "comment_id": 74640865, "body": "What do you see if you print <code>$email-&gt;as_string</code> just before you send the mail?"}, {"owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1494158384, "post_id": 43781015, "comment_id": 74699425, "body": "@DaveCross $VAR1 = &#39;To: gsrivastava@abc.com^M From: abcsender@abc.com^M Subject: Hi!^M Date: Sun, 7 May 2017 07:58:46 -0400^M ^M Hello^M &#39;;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1494164869, "post_id": 43781015, "comment_id": 74701300, "body": "Please add that to your question. It&#39;s largely unreadable in a comment."}, {"owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1494186617, "post_id": 43781015, "comment_id": 74708537, "body": "@DaveCross I have updated this in the question"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1494240413, "creation_date": 1494240413, "answer_id": 43845666, "question_id": 43781015, "link": "https://stackoverflow.com/questions/43781015/unable-to-attach-attachment-while-sending-mail/43845666#43845666", "title": "Unable to attach attachment while sending mail", "body": "<p>Turns out that this is a pretty simple mistake to make. You are creating a MIME email, but when you get to creating the actual email object, you use this code:</p>\n\n<pre><code>my $email = Email::Simple-&gt;create(\n  header =&gt; [\n    To      =&gt; 'gsrivastava@abc.com',\n    From    =&gt; 'abcsender@abc.com',\n    Subject =&gt; 'Hi!',\n  ],\n  body =&gt; \"Hello\",\n  parts      =&gt; [ @parts ],\n);\n</code></pre>\n\n<p>Email::Simple isn't intended for MIME mail messages, so it doesn't understand the <code>parts</code> attribute and ignores it. To create a MIME email, you need to use Email::MIME.</p>\n\n<pre><code>my $email = Email::MIME-&gt;create(\n  header =&gt; [\n    To      =&gt; 'gsrivastava@abc.com',\n    From    =&gt; 'abcsender@abc.com',\n    Subject =&gt; 'Hi!',\n  ],\n  parts      =&gt; [ @parts ],\n);\n</code></pre>\n\n<p>Note that I've removed the <code>body</code> attribute. MIME emails can't have both parts and a body. The solution is to add another element to <code>@parts</code> that contains your body text.</p>\n\n<pre><code>my @parts = (\n        Email::MIME-&gt;create(\n                attributes =&gt; {\n                        content_type =&gt; 'text/plain',\n                        disposition  =&gt; 'attachment',\n                        charset      =&gt; 'US-ASCII',\n                        encoding     =&gt; 'quoted-printable',\n                },\n                body_str =&gt; 'Hello',\n        ),\n\n        ...\n);\n</code></pre>\n"}], "owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1494240413, "creation_date": 1493895611, "last_edit_date": 1494186581, "question_id": 43781015, "link": "https://stackoverflow.com/questions/43781015/unable-to-attach-attachment-while-sending-mail", "title": "Unable to attach attachment while sending mail", "body": "<p>Can anyone please help with attaching two text files while sending email using Email::Simple. I am able to receive mail but without the attachments</p>\n\n<p>I have tried a lot but couldn't make it work, not sure if I am having the incorrect modules. I did not want to use MIME::Lite because of the recommendation by the creator of MIME::Lite. I basically wanted to use my own SMTP details, and got Email::Sender as recommendation. Everything works except the attachment.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Email::Sender::Simple qw(sendmail);\nuse Email::Sender::Transport::SMTP ();\nuse Email::Simple ();\nuse Email::Simple::Creator ();\nuse Email::Sender::Transport::SMTP::TLS;\nuse Email::MIME;\nuse IO::All;\n\nmy $transport = Email::Sender::Transport::SMTP::TLS-&gt;new({\n    host =&gt; 'smtp.office365.com',\n    port =&gt; 587,\n    sasl_username =&gt; 'abcsender@abc.com',\n    sasl_password =&gt; 'P@ssw0rd@123',\n    username =&gt; 'abcsender@abc.com',\n    password =&gt; 'P@ssw0rd@123'\n});\n\nmy @parts = (\n        Email::MIME-&gt;create(\n                attributes =&gt; {\n                        content_type =&gt; \"text/plain\",\n                        filename     =&gt; \"/tmp/ERROR1493720941.log\",\n                        charset      =&gt; \"US-ASCII\",\n                        disposition     =&gt;\"attachment\",\n                },    \n                body =&gt; io( \"/tmp/ERROR1493720941.log\" )-&gt;all,\n        ),\n        Email::MIME-&gt;create(\n                attributes =&gt; {\n                        content_type =&gt; \"text/plain\",\n                        filename     =&gt; \"/tmp/FAILED1493720941.log\",\n                        charset      =&gt; \"US-ASCII\",\n                        disposition     =&gt;\"attachment\",\n                },    \n                body =&gt; io( \"/tmp/FAILED1493720941.log\" )-&gt;all,\n        ),\n);\n\nmy $email = Email::Simple-&gt;create(\n  header =&gt; [\n    To      =&gt; 'gsrivastava@abc.com',\n    From    =&gt; 'abcsender@abc.com',\n    Subject =&gt; 'Hi!',\n  ],\n  body =&gt; \"Hello\",\n  parts      =&gt; [ @parts ],\n);\n\nsendmail($email, { transport =&gt; $transport });\n</code></pre>\n\n<p>As asked by @DaveCross in comment, here is the output of $email->as_string</p>\n\n<pre><code>$VAR1 = 'To: gsrivastava@abc.com^M\nFrom: abcsender@abc.com^M\nSubject: Hi!^M\nDate: Sun, 7 May 2017 07:58:46 -0400^M\n^M\nHello^M\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "flash-message"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493896790, "post_id": 43780445, "comment_id": 74603013, "body": "It might be implementing the flash message using a cookie. I&#39;d have to read the source. Is there a variable that is being used as an array ref in line 286 of that file? Make sure you check the correct version of Mojo if you look via metacpan though."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1493903055, "post_id": 43780445, "comment_id": 74607723, "body": "Out of the box, Mojolicious sends a <a href=\"https://metacpan.org/pod/Mojolicious#sessions\" rel=\"nofollow noreferrer\">session cookie</a>. It stores session data on the client side: <i>Persistent data storage for the next few requests, all session data gets serialized with Mojo::JSON and stored Base64 encoded in HMAC-SHA1 signed cookies, to prevent tampering. Note that cookies usually have a 4096 byte (4KB) limit, depending on browser.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 1145723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a97af4088a74752aa81dfb56bedf4d76?s=128&d=identicon&r=PG", "display_name": "Christopher Causer", "link": "https://stackoverflow.com/users/1145723/christopher-causer"}, "is_accepted": true, "score": 1, "last_activity_date": 1496663919, "creation_date": 1496663919, "answer_id": 44368456, "question_id": 43780445, "link": "https://stackoverflow.com/questions/43780445/perl-mojolicious-using-flash-gives-wierd-error/44368456#44368456", "title": "perl mojolicious - using flash gives wierd error", "body": "<p>This most likely happens when you have <code>undef</code> as your secrets. The error comes from the <a href=\"https://github.com/kraih/mojo/blob/334e72b968faa4427e82677793c31e303e0a88e3/lib/Mojolicious/Controller.pm#L286\" rel=\"nofollow noreferrer\">following line</a>:</p>\n\n<pre><code>my $checksum = Mojo::Util::hmac_sha1_sum($value, $self-&gt;app-&gt;secrets-&gt;[0]);\n</code></pre>\n\n<p>Normally, the secret is pre-generated which is insecure and needs to be defined by you in the config of the app. An example of it being used is in the <a href=\"https://github.com/kraih/mojo-pg/tree/master/examples/blog\" rel=\"nofollow noreferrer\">Mojo::Pg example application</a>:</p>\n\n<pre><code>{\n    pg      =&gt; 'postgresql://tester:testing@/test',\n    secrets =&gt; ['s3cret']\n}\n</code></pre>\n\n<p>Which is then consumed by the application itself </p>\n\n<pre><code>$self-&gt;secrets($self-&gt;config('secrets'));\n</code></pre>\n\n<p>If your application sets the secrets from a config file but the config file doesn't declare a secrets, or the key has been misspelt, the error you write will be given back whenever you try to set a cookie, such as using the flash.</p>\n"}], "owner": {"reputation": 827, "user_id": 3353752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2LunI.jpg?s=128&g=1", "display_name": "dipl0", "link": "https://stackoverflow.com/users/3353752/dipl0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 44368456, "answer_count": 1, "score": 1, "last_activity_date": 1496663919, "creation_date": 1493893967, "question_id": 43780445, "link": "https://stackoverflow.com/questions/43780445/perl-mojolicious-using-flash-gives-wierd-error", "title": "perl mojolicious - using flash gives wierd error", "body": "<p>The below code is giving the error:</p>\n\n<p>Can't use an undefined value as an ARRAY reference at /usr/local/share/perl/5.22.1/Mojolicious/Controller.pm line 286.</p>\n\n<p>and I am not particularly sure how i'd go about handling it. Especially as it quotes an error in the source code that seems to be related to encryption of cookies. And my application contains no cookies or encryption so that is suprising.</p>\n\n<pre><code> sub remove {\n    my $self = shift;\n    my $host_id = $self-&gt;stash('host_id');\n\n    $self-&gt;hosts-&gt;remove($self-&gt;stash('host')-&gt;{host_id});\n\n    $self-&gt;flash(message =&gt; 'User created successfully!');\n    $self-&gt;redirect_to('hosts');\n}\n</code></pre>\n"}, {"tags": ["perl", "lwp-useragent"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1493893237, "creation_date": 1493893237, "answer_id": 43780178, "question_id": 43779157, "link": "https://stackoverflow.com/questions/43779157/post-request-with-multipart-form-data-content-type-to-download-a-file/43780178#43780178", "title": "POST request with multipart/form-data content type to download a file", "body": "<p>Take a look at the entry on <code>POST</code> in <a href=\"http://search.cpan.org/~ether/HTTP-Message-6.11/lib/HTTP/Request/Common.pm\" rel=\"nofollow noreferrer\">the documentation for <code>HTTP::Request::Common</code></a></p>\n\n<p>You can generate a <code>multipart/form-data</code> request (instead of <code>application/x-www-form-urlencoded</code>) by passing a pseudo header value of  <code>Content_Type =&gt; 'form-data'</code></p>\n\n<p>It would look like this</p>\n\n<pre><code>my $response = $ua-&gt;post(\n    $url,\n    Content_Type =&gt; 'form-data',\n    {\n        ...;  # Hash of form key/value pairs\n    }\n);\n</code></pre>\n"}], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3228, "favorite_count": 1, "accepted_answer_id": 43780178, "answer_count": 1, "score": 1, "last_activity_date": 1493893237, "creation_date": 1493890532, "question_id": 43779157, "link": "https://stackoverflow.com/questions/43779157/post-request-with-multipart-form-data-content-type-to-download-a-file", "title": "POST request with multipart/form-data content type to download a file", "body": "<p>There's a webpage which includes a button inside the form. Clicking on that button makes a POST request and a CSV file gets downloaded.</p>\n\n<p>I'm trying to automate the CSV downloading process using LWP::UserAgent.</p>\n\n<p>I noticed from Chrome Developer Tools that the <code>Content-Type</code> is <code>multipart/form-data; boundary=---WebKitFormBoundary....</code></p>\n\n<p>Any idea how can I send the exact <code>Request Payload</code> which developer tools is showing?</p>\n\n<p>I generally do the below for <code>x-www-form-urlencoded</code> content type. But I have no idea how to submit multipart form data.</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n$ua-&gt;cookie_jar({ file =&gt; \"cookie.txt\", autosave =&gt; 1});\n\n\nmy $request = HTTP::Request-&gt;new('POST', $url);\n\n#copy the form_data from chrome developer tools\nmy $form_data = 'key=val&amp;key2=val2';\n\n#the form_data is too big (and is in parts) in case of multipart content type\n\n$request-&gt;content($form_data);\n$request-&gt;header('Content-Type' =&gt; \"application/x-www-form-urlencoded\");\n#I'll have to use `multipart/form-data; boundary=---WebKitFormBoundary....`\n\n#add some other headers like 'Origin', 'Host' and 'Referer' in similar manner\n#...\n#...\n\npush @{ $ua-&gt;requests_redirectable }, 'POST';\n\nmy $response = $ua-&gt;request($request);\n\n#Get the file\n</code></pre>\n"}, {"tags": ["xml", "perl", "web-services", "soap", "wsdl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493899177, "post_id": 43779088, "comment_id": 74604753, "body": "Did you look at the actual request and its headers?"}, {"owner": {"reputation": 1127, "user_id": 1934910, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c2efea49fb5ae5c714e53be2a011942?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1934910/pradeep"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493912516, "post_id": 43779088, "comment_id": 74615165, "body": "@simbabque I&#39;m not sure if you were referring to http headers or soap header.But the request does not have a soap header but has a soap body."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493939895, "post_id": 43779088, "comment_id": 74628998, "body": "I meant the Http headers. Or rather the whole thing. The trace mode should help. If not, install LWL::ConsoleLogger::Everywhere and use that. It will give you the full request. Since you say the xml works from another program it must be the http headers."}, {"owner": {"reputation": 1127, "user_id": 1934910, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c2efea49fb5ae5c714e53be2a011942?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1934910/pradeep"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1493963043, "post_id": 43779088, "comment_id": 74634875, "body": "@simbabque The WSDL file expects a literal variable as input.But the variable <code>result</code> is of type <code>SOAP::Data=HASH(0x33f11a0)</code>.So I need to pass an xml literal.How can I do this?"}], "owner": {"reputation": 1127, "user_id": 1934910, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c2efea49fb5ae5c714e53be2a011942?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1934910/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493891773, "creation_date": 1493890345, "last_edit_date": 1493891773, "question_id": 43779088, "link": "https://stackoverflow.com/questions/43779088/soapwsdl-with-xml-data-object", "title": "SOAP::WSDL with xml data object", "body": "<p>I wrote the following program to send a SOAP request.</p>\n\n<pre><code>use SOAP::Lite +trace;\nuse XML::LibXML;\n\n$client = SOAP::Lite-&gt;service('https://services.company.domain/svcfile.svc?wsdl');\n$xmlFileHandle = XML::LibXML-&gt;load_xml(location =&gt; 'request.xml');   \n$xmlContent = SOAP::Data-&gt;type('xml' =&gt; $xmlFileHandle);   \n$result = $client-&gt;RetrieveInfo($xmlContent);\nprint \"$result\";\n</code></pre>\n\n<p>When I go through the XML that is returned it says bad request ( Error 400).<br />\nWhen I paste the raw XML code in SOAPUI it works properly and returns the information needed.<br /></p>\n\n<p>The line that's causing the bad request error is :</p>\n\n<pre><code>$result = $client-&gt;RetrieveInfo($xmlContent);\n</code></pre>\n\n<p>How to correct this error?\nThank you.</p>\n"}, {"tags": ["perl", "pipe", "fork"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493882839, "post_id": 43774492, "comment_id": 74593764, "body": "I thought of unclosed <code>WRITER</code> as well.  I still don&#39;t see how the scalar read on <code>&lt;$fh&gt;</code> changes it ... am I missing that somewhere?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1493928506, "post_id": 43774492, "comment_id": 74624554, "body": "@zdim In scalar context you only get the first line (or in OP&#39;s words, &quot;<i>however, if there are multiple results from the command, this will only print the first result (seems to break on newline)</i>&quot;), whereas list context will read all lines, which necessitates blocking until EOF is reached."}, {"owner": {"reputation": 3, "user_id": 7961052, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154742952249958/picture?type=large", "display_name": "Stu", "link": "https://stackoverflow.com/users/7961052/stu"}, "edited": false, "score": 0, "creation_date": 1493934294, "post_id": 43774492, "comment_id": 74627229, "body": "Excellent! I did try closing WRITER, but I did it within the <code>unless</code> statement, not after it. I have updated my code to use a lexical variable as you suggested, but still included the explicit <code>close</code> statement for clarity. Thanks very much for your help. Champion."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1493875518, "creation_date": 1493875518, "answer_id": 43774492, "question_id": 43774237, "link": "https://stackoverflow.com/questions/43774237/reading-from-perl-pipe-child-process-hanging-on-last-element-of-handle-array/43774492#43774492", "title": "Reading from Perl pipe child process hanging on last element of handle array", "body": "<p>I haven't actually tried it, but:</p>\n\n<p>This code looks like you're deadlocking yourself. </p>\n\n<ul>\n<li><code>&lt;</code> <code>&gt;</code> in list context slurps the whole file, i.e. it reads until it reaches end-of-file (EOF).</li>\n<li>The file handle in question refers to a pipe.</li>\n<li>The read end of a pipe reaches EOF when all open handles to the write end are closed.</li>\n<li>You never close <code>WRITER</code> in the parent (the child implicitly closes it on exit).</li>\n<li>Thus the parent is stuck reading from the pipe while holding the write end open.</li>\n</ul>\n\n<p>The reason this only happens for the last array element is because you're using a bareword filehandle (<code>WRITER</code>), which is effectively a global variable. Re-opening the same handle implicitly closes it first; i.e. the (n+1)th iteration of the loop closes the nth pipe. Only the last <code>WRITER</code> is left open.</p>\n\n<p>If I'm right, then the fix is:</p>\n\n<pre><code>foreach my $server(@servers) {\n    pipe($readers{$server},WRITER);\n    unless(my $pid = fork()) {\n        my $response = qx(ssh -q oracle\\@$server \"$command\");\n        print WRITER $response;\n        exit();\n    }\n    close WRITER;  # always close WRITER in the parent\n}\n</code></pre>\n\n<p>But I would also recommend changing the code to this:</p>\n\n<pre><code>foreach my $server (@servers) {\n    pipe($readers{$server}, my $WRITER);\n    defined(my $pid = fork()) or die \"$0: fork: $!\\n\";\n    unless($pid) {\n        my $response = qx(ssh -q oracle\\@$server \"$command\");\n        print $WRITER $response;\n        exit();\n    }\n    close $WRITER;\n}\n</code></pre>\n\n<p>I.e. check <code>fork</code> for errors and use a lexical variable instead of a bareword filehandle. In this case the <code>close</code> is actually optional because <code>$WRITER</code> is implicitly closed at the end of its scope (the current loop iteration) because there are no other references to it.</p>\n\n<p>You could simplify it a bit more by using pipe open:</p>\n\n<pre><code>foreach my $server (@servers) {\n    open $readers{$server}, '-|', 'ssh', '-q', \"oracle\\@$server\", $command\n        or die \"$0: ssh: $!\\n\";\n}\n</code></pre>\n\n<p>Finally,</p>\n\n<pre><code>my $fh = $readers{$server};\nmy @procs = &lt;$fh&gt;;\n</code></pre>\n\n<p>could be reduced to</p>\n\n<pre><code>my @proces = readline $readers{$server};\n</code></pre>\n\n<p>(I don't like the <code>&lt;</code> <code>&gt;</code> operator. In my opinion always writing either <code>readline</code> or <code>glob</code> explicitly makes it more readable.)</p>\n"}], "owner": {"reputation": 3, "user_id": 7961052, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154742952249958/picture?type=large", "display_name": "Stu", "link": "https://stackoverflow.com/users/7961052/stu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 43774492, "answer_count": 1, "score": 0, "last_activity_date": 1493875518, "creation_date": 1493874126, "question_id": 43774237, "link": "https://stackoverflow.com/questions/43774237/reading-from-perl-pipe-child-process-hanging-on-last-element-of-handle-array", "title": "Reading from Perl pipe child process hanging on last element of handle array", "body": "<p>When running the following code, the last server is not printed - the script 'hangs' after the second-last array element.</p>\n\n<pre><code>my %readers;\nmy $command = \"pgrep -f weblogic.Name\";\n\nforeach my $server(@servers) {\n    pipe($readers{$server},WRITER);\n    unless(my $pid = fork()) {\n        my $response = qx(ssh -q oracle\\@$server \"$command\");\n        print WRITER $response;\n        exit();\n    }   \n}\n\n\nforeach my $server (@servers) {\n     my $fh = $readers{$server};\n     my @procs = &lt;$fh&gt;;\n     chomp(@procs);\n     for my $proc (@procs) {\n          printf \"%s\\t%s\\n\", substr($server,8), $proc;\n     }   \n }\n\n print \"end\\n\";\n</code></pre>\n\n<p>The output is as follows:</p>\n\n<pre><code>$ ./get_stuck.pl  \n92      18196\n93      27420\n94      17635\n95      10258\n96      10831\n</code></pre>\n\n<p>There should be a server '97' output after '96', yet there is not, and the script just hangs/stops at that point. </p>\n\n<p>If I change the reader section to use a string instead of an array as follows:</p>\n\n<pre><code>foreach my $server (@servers) {\n    my $fh = $readers{$server};\n    my $procs = &lt;$fh&gt;;\n    printf \"%s\\n\", $server;\n}\n</code></pre>\n\n<p>...then the script prints all servers including '97', however, if there are multiple results from the command, this will only print the first result (seems to break on newline). In other words, if the command returns 3 process ids for a given server, only the first process id is printed.</p>\n\n<p>Any suggestions on why using an array causes the script to hang on the last element? Or perhaps (less desirable) how I might use a string, but retrieve all results?</p>\n"}]