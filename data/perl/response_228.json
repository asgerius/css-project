[{"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558555540, "post_id": 56264060, "comment_id": 99144790, "body": "Try <code>$RE{URI}{HTTP}{-scheme =&gt; qr&#47;https?&#47;}{-keep}</code>"}, {"owner": {"reputation": 71, "user_id": 8605299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c462f9bc2c6e09cd19c4d917d961c4bd?s=128&d=identicon&r=PG&f=1", "display_name": "String_Chez", "link": "https://stackoverflow.com/users/8605299/string-chez"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558556893, "post_id": 56264060, "comment_id": 99145422, "body": "I get a  Search pattern not terminated error"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1558557923, "post_id": 56264060, "comment_id": 99145858, "body": "Sorry, you need to use different delimiters for that regex since you&#39;re interpolating it into another regex. Such as <code>qr&lt;https?&gt;</code>"}, {"owner": {"reputation": 71, "user_id": 8605299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c462f9bc2c6e09cd19c4d917d961c4bd?s=128&d=identicon&r=PG&f=1", "display_name": "String_Chez", "link": "https://stackoverflow.com/users/8605299/string-chez"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1558558127, "post_id": 56264060, "comment_id": 99145933, "body": "YaY!! That totally worked! Please put it as an answer so I can vote on it! Thanks!!"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1558562023, "creation_date": 1558562023, "answer_id": 56265510, "question_id": 56264060, "link": "https://stackoverflow.com/questions/56264060/regexpcommon-qw-uri-not-allowing-https/56265510#56265510", "title": "Regexp::Common qw /URI/ not allowing HTTPS", "body": "<p>The -scheme flag for <a href=\"https://metacpan.org/pod/Regexp::Common::URI::http\" rel=\"nofollow noreferrer\">Regexp::Common::URI::http</a> takes an argument which is a regex to match allowed schemes. It defaults to just matching <code>http</code> and leaving out the argument seems to mean the scheme is not included in the match at all. So to match both http and https you can pass it a regex of <code>https?</code>:</p>\n\n<pre><code>m/$RE{URI}{HTTP}{-scheme =&gt; qr&lt;https?&gt;}{-keep}/\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8605299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c462f9bc2c6e09cd19c4d917d961c4bd?s=128&d=identicon&r=PG&f=1", "display_name": "String_Chez", "link": "https://stackoverflow.com/users/8605299/string-chez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558562023, "creation_date": 1558554828, "question_id": 56264060, "link": "https://stackoverflow.com/questions/56264060/regexpcommon-qw-uri-not-allowing-https", "title": "Regexp::Common qw /URI/ not allowing HTTPS", "body": "<p>A bug was given to me where https isn't allowed to be entered into one of our forms.  After searching the form I noticed that we are using Regexp::Common qw /URI/</p>\n\n<p>I have tried </p>\n\n<pre><code>if ($params{URL} =~ /$RE{URI}{HTTP}{-keep}{-scheme}/)\n{\n$form{URL} = $1;\n}\nelse\n{\n$error .= '&lt;li&gt;Website Address is invalid. The URL must be in this form: &lt;b&gt;http://example.com&lt;/b&gt;&lt;/li&gt;';\n}\n</code></pre>\n\n<p>and that allows http and https but only saves ://www.google.com into the database</p>\n\n<pre><code>if ($params{URL} =~ /$RE{URI}{HTTP}{-keep}/)\n{\n$form{URL} = $1;\n}\nelse\n{\n$error .= '&lt;li&gt;Website Address is invalid. The URL must be in this form: &lt;b&gt;http://example.com&lt;/b&gt;&lt;/li&gt;';\n}\n</code></pre>\n\n<p>allows only http but saves the entire url into the database</p>\n\n<pre><code>if ($params{URL} =~ /$RE{URI}{HTTP}{-scheme}/)\n{\n$form{URL} = $1;\n}\nelse\n{\n$error .= '&lt;li&gt;Website Address is invalid. The URL must be in this form: &lt;b&gt;http://example.com&lt;/b&gt;&lt;/li&gt;';\n}\n</code></pre>\n\n<p>allows http and https but doesn't save ANYTHING to the database</p>\n\n<p>What I would like is to have https and http valid AND have the complete url saved in the database.</p>\n"}, {"tags": ["perl", "amazon-s3"], "comments": [{"owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "edited": false, "score": 1, "creation_date": 1558670798, "post_id": 56261523, "comment_id": 99184626, "body": "For AWS with perl please try <a href=\"https://metacpan.org/pod/Paws::S3\" rel=\"nofollow noreferrer\">Paws - Perl AWS</a>. I have used this module for EC2, S3, RDS etc and was very happy and never had to miss <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/index.html\" rel=\"nofollow noreferrer\">boto</a>."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1558544883, "creation_date": 1558544883, "answer_id": 56261847, "question_id": 56261523, "link": "https://stackoverflow.com/questions/56261523/perl-s3-multipart-upload-using-netamazons3/56261847#56261847", "title": "Perl S3 Multipart Upload using Net::Amazon::S3", "body": "<p>The docs say...</p>\n\n<blockquote>\n  <p><em>Note: This is the legacy interface, please check out Net::Amazon::S3::Client instead.</em></p>\n</blockquote>\n\n<p>Looking at <a href=\"https://metacpan.org/pod/Net::Amazon::S3::Client\" rel=\"nofollow noreferrer\">Net::Amazon::S3::Client</a>...</p>\n\n<blockquote>\n  <p><em>The Net::Amazon::S3::Client, Net::Amazon::S3::Client::Bucket and Net::Amazon::S3::Client::Object classes are designed after years of usage to be easy to use for common tasks.</em></p>\n</blockquote>\n\n<p>And <a href=\"https://metacpan.org/pod/Net::Amazon::S3::Client::Object\" rel=\"nofollow noreferrer\">Net::Amazon::S3::Client::Object</a> has <a href=\"https://metacpan.org/pod/Net::Amazon::S3::Client::Object#initiate_multipart_upload\" rel=\"nofollow noreferrer\">some information about multipart uploads</a>.</p>\n\n<pre><code>#initiate a new multipart upload for this object\nmy $object = $bucket-&gt;object(\n  key         =&gt; 'massive_video.avi'\n);\nmy $upload_id = $object-&gt;initiate_multipart_upload;\n\n...\n\n#add a part to a multipart upload\nmy $put_part_response = $object-&gt;put_part(\n   upload_id      =&gt; $upload_id,\n   part_number    =&gt; 1,\n   value          =&gt; $chunk_content,\n);\nmy $part_etag = $put_part_response-&gt;header('ETag');\n\n...\n\n#complete a multipart upload\n$object-&gt;complete_multipart_upload(\n  upload_id       =&gt; $upload_id,\n  etags           =&gt; [$etag_1, $etag_2],\n  part_numbers    =&gt; [$part_number_1, $part_number2],\n);\n</code></pre>\n\n<p>Hopefully with this and clues from <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingRESTAPImpUpload.html\" rel=\"nofollow noreferrer\">the Multipart Upload REST API</a> you can take it from there.</p>\n"}], "owner": {"reputation": 956, "user_id": 1065306, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/349bdbe6b8212de4cd9fb7a88f0568f2?s=128&d=identicon&r=PG", "display_name": "Nicolas Payart", "link": "https://stackoverflow.com/users/1065306/nicolas-payart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 56261847, "answer_count": 1, "score": 2, "last_activity_date": 1558544883, "creation_date": 1558543406, "question_id": 56261523, "link": "https://stackoverflow.com/questions/56261523/perl-s3-multipart-upload-using-netamazons3", "title": "Perl S3 Multipart Upload using Net::Amazon::S3", "body": "<p>I want to upload some large binary files to a private S3 bucket using Perl.</p>\n\n<p>I implemented a test script for a simple file upload using the <a href=\"https://metacpan.org/release/Net-Amazon-S3\" rel=\"nofollow noreferrer\">Net::Amazon::S3</a> library.</p>\n\n<p>My perl script looks like this:</p>\n\n<pre><code>use Net::Amazon::S3;\n\n# S3 Config\n$S3_ACCESS_KEY = \"xxxxxx\";\n$S3_SECRET_KEY = \"xxxxx\";\n$S3_HOST = \"xxxxx\";\n$S3_BUCKET = \"mybucket\";\n\n# Open S3 Connection\n$s3 = Net::Amazon::S3-&gt;new(\n    {\n        aws_access_key_id     =&gt; $S3_ACCESS_KEY,\n        aws_secret_access_key =&gt; $S3_SECRET_KEY,\n        host                  =&gt; $S3_HOST,\n        secure                =&gt; 0,\n    }\n);\n\n# Create and open Bucket\n$bucket = $s3-&gt;add_bucket(\n    { bucket =&gt; $S3_BUCKET }\n);\n\n$bucket-&gt;add_key_filename(\n    \"myfile.gz\", # Object name on S3\n    \"/tmp/myfile.gz\", # Local filename\n    { 'content_type'=&gt; 'application/gzip' },\n);\n</code></pre>\n\n<p>This works well for small files, but for large files (several GB), I have to implement a multi-part upload.</p>\n\n<p>Unfortunately, the documentation on this library is rather succint.</p>\n\n<p>I think I needs to implement methods like <em>InitiateMultipartUpload</em>, <em>PutPart</em> and <em>CompleteMultipartUpload</em> but I am not sure how to use them.</p>\n\n<p>Is there an example of a multipart upload using this library or any other   option for doing this with Perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1558541364, "post_id": 56260910, "comment_id": 99138519, "body": "<code>$filename = __FILE__; ${ &#39;main::&#39; }{ &quot;_&lt;$filename&quot; } eq ${ &quot;::_&lt;$filename&quot; };</code> returns false."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1558550278, "post_id": 56262710, "comment_id": 99142472, "body": "Congratulations on 100k :)))"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1558551304, "post_id": 56262710, "comment_id": 99142917, "body": "I&#39;d also add (as discussed on IRC) that since <code>%main::</code> is the package stash, <code>$main::{foo}</code> is actually a ref to the typeglob containing the variable as well as the other package variables sharing its name, which is why dereferencing it as a scalar gives you the scalar. <code>@{$main::{foo}}</code> instead would give you <code>@main::foo</code>. And in all these cases <code>main::</code> and <code>::</code> are of course equivalent."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558551658, "post_id": 56262710, "comment_id": 99143068, "body": "Also, these typeglob accesses are confusing and almost always unnecessary. Use <a href=\"https://metacpan.org/pod/Package::Stash\" rel=\"nofollow noreferrer\">Package::Stash</a> if you really need to access the stash."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558590329, "post_id": 56262710, "comment_id": 99152678, "body": "@Grinnz, Yeah, avoiding globs is good. These are really internal structures, and there&#39;s a couple of ways in which they can surprise you. No need for that package, though; just use a symbolic references (e.g. <code>${ &quot;::_&lt;$filename&quot; }</code> instead of <code>${ $::{ &quot;_&lt;$filename&quot; } }</code>)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1558586367, "last_edit_date": 1558586367, "creation_date": 1558548841, "answer_id": 56262710, "question_id": 56260910, "link": "https://stackoverflow.com/questions/56260910/perl-internal-variables-are-next-expressions-same/56262710#56262710", "title": "Perl internal variables. Are next expressions same?", "body": "<p>Almost</p>\n\n<p><code>${ \"::_&lt;$filename\" }</code> is the scalar variable in the default/<code>main</code> namespace with the name given by <code>\"_&lt;$filename\"</code></p>\n\n<p><code>%{\"main::\"}</code> is the stash variable for the default/<code>main</code> namespace, and\n<code>${\"main::\"}{\"_&lt;$filename\"}</code> is a typeglob which can be <em>derefenced</em> with any of the dereferencing operators to retrieve the values in the <code>main</code> namespace with the name given by <code>\"_&lt;$filename\"</code>.</p>\n\n<p>So it's these two expressions are equivalent:</p>\n\n<pre><code>${\"::_&lt;$filename\"}\n${${\"main::\"}{\"_&lt;$filename\"}}\n</code></pre>\n\n<p>A short demo:</p>\n\n<pre><code>$ perl -de 1\n\nLoading DB routines from perl5db.pl version 1.37\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nmain::(-e:1):   1\n  DB&lt;1&gt; $main::foo = 42                                                                                    \n\n  DB&lt;2&gt; @main::foo = (1,2,3,\"bacon\")                                                                       \n\n  DB&lt;3&gt; x ${\"main::\"}{\"foo\"}                                                                               \n0  *main::foo\n  DB&lt;4&gt; x ${${\"main::\"}{\"foo\"}}, @{${\"main::\"}{\"foo\"}}                                                     \n0  42\n1  1\n2  2\n3  3\n4  'bacon' \n  DB&lt;5&gt; x @{\"::foo\"}, ${\"::foo\"}                                                                           \n0  1\n1  2\n2  3\n3  'bacon'\n4  42\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1558594188, "post_id": 56268691, "comment_id": 99154007, "body": "very detailed explanation. thank you. Does documentation exist for this?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1558596663, "post_id": 56268691, "comment_id": 99155156, "body": "I suspect that all of this is documented, though not all in one place."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1558596816, "post_id": 56268691, "comment_id": 99155224, "body": "<a href=\"https://perldoc.perl.org/perlmod.html#Symbol-Tables\" rel=\"nofollow noreferrer\"><code>%::</code> and <code>%main::</code></a>. (Not much detail.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1558597042, "post_id": 56268691, "comment_id": 99155327, "body": "<a href=\"https://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles\" rel=\"nofollow noreferrer\">Globs</a>. (Mostly about working with <code>STDOUT</code> and creating an alias.) There&#39;s more about them <a href=\"https://perldoc.perl.org/perlmod.html#Symbol-Tables\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1558643398, "last_edit_date": 1558643398, "creation_date": 1558590019, "answer_id": 56268691, "question_id": 56260910, "link": "https://stackoverflow.com/questions/56260910/perl-internal-variables-are-next-expressions-same/56268691#56268691", "title": "Perl internal variables. Are next expressions same?", "body": "<p>No, but the following are equivalent:</p>\n\n<pre><code>${\"_&lt;$filename\"}         # When this expression is found in package main\n${\"::_&lt;$filename\"}\n${\"main::_&lt;$filename\"}\n\n${ $::{\"_&lt;$filename\"} }\n${ ${'::'}{\"_&lt;$filename\"} }\n\n${ $main::{\"_&lt;$filename\"} }\n${ ${'main::'}{\"_&lt;$filename\"} }\n</code></pre>\n\n<p>These are refer to the variable in the root/main namespace whose name is produced by <code>\"_&lt;$filename\"</code>.</p>\n\n<hr>\n\n<p>As a clearer example, the following are all equivalent (assuming the code is compiled in package <code>Foo::Bar</code> for the first two):</p>\n\n<pre><code>@moo                                  # Via hardcoded, unqualified name\n@{'moo'}                              # Via symref using unqualified name\n\n@Foo::Bar::moo                        # Via hardcoded, qualified name\n@{'Foo::Bar::moo'}                    # Via symref using qualified name\n\n@{ *Foo::Bar::moo }                   # Via hardcoded glob\n@{ *{'Foo::Bar::moo'} }               # Via symref to glob\n\n@{ $Foo::Bar::{moo} }                 # Via glob via hardcoded package\n@{ ${'Foo::Bar::'}{moo} }             # Via glob via symref to package\n\n@{ $Foo::{'Bar::'}{moo} }             # Via glob via hardcoded parent package\n@{ ${'Foo'}::{'Bar::'}{moo} }         # Via glob via symref to parent package\n\n@{ $::{'Foo::'}{'Bar::'}{moo} }       # Via glob via root package\n@{ $main::{'Foo::'}{'Bar::'}{moo} }   # Same\n</code></pre>\n\n<hr>\n\n<p>Perl allows symbol names to be used as references.</p>\n\n<pre><code>$ perl -e'%h = ( a =&gt; 4, b =&gt; 5 ); my $ref = \"h\"; CORE::say $ref-&gt;{a};'\n4\n</code></pre>\n\n<p>These are called \"symbolic references\" (and they're not allowed when using <code>use strict;</code>). The following uses <code>main::</code> as a symbolic reference:</p>\n\n<pre><code>${ 'main::' }{ \"_&lt;$filename\" }\n</code></pre>\n\n<p>There's no point to doing that, however. Since the name of the variable is hardcoded anyway, we might as well use the following:</p>\n\n<pre><code>$main::{ \"_&lt;$filename\" }\n</code></pre>\n\n<p>Not only is this simpler, it's allowed when using <code>use strict;</code>.</p>\n\n<hr>\n\n<p>But what is <code>%main::</code>? Well, that's the symbol table for the package <code>main</code>. The keys of <code>%main::</code> are the names of the symbols (variables) that exist in the package <code>main</code> (without any sigil).</p>\n\n<p>The values of <code>%main::</code> are symbol table entries. We call these \"typeglobs\", or \"globs\" for short. Dereferencing a glob as if it was a reference access the variable of the type appropriate for the dereference. For example,</p>\n\n<pre><code>$main::{a}\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>*main::a       # A glob\n</code></pre>\n\n<p>and</p>\n\n<pre><code>${ $main::{a} }\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>$main::a\n</code></pre>\n\n<p>This means that the following returns a glob to the variable in the <code>main</code> namespace whose name is produced by <code>\"_&lt;$filename\"</code></p>\n\n<pre><code>$main::{ \"_&lt;$filename\" }\n</code></pre>\n\n<hr>\n\n<p>The main namespace is also the root namespace. This means that</p>\n\n<pre><code>$main::a\n</code></pre>\n\n<p>and </p>\n\n<pre><code>$::a\n</code></pre>\n\n<p>both refer to the same variable. It also means that</p>\n\n<pre><code>%main::\n</code></pre>\n\n<p>and </p>\n\n<pre><code>%::\n</code></pre>\n\n<p>both refer to the same variable. It also means that </p>\n\n<pre><code>$main::{ \"_&lt;$filename\" }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$::{ \"_&lt;$filename\" }\n</code></pre>\n\n<p>both return the same glob.</p>\n\n<hr>\n\n<p>We've established that the following returns a glob to the symbol in the root/main namespace whose name is produced by <code>\"_&lt;$filename\"</code></p>\n\n<pre><code>$::{ \"_&lt;$filename\" }\n</code></pre>\n\n<p>We've also established that the following references the scalar in the root/main whose name is produced by <code>\"_&lt;$filename\"</code>:</p>\n\n<pre><code>${ $::{ \"_&lt;$filename\" } }\n</code></pre>\n\n<p>And finally, we've also established that following is a symbolic reference that references the same scalar:</p>\n\n<pre><code>${ \"::_&lt;$filename\" }\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 1, "accepted_answer_id": 56268691, "answer_count": 2, "score": 2, "last_activity_date": 1558643398, "creation_date": 1558540973, "last_edit_date": 1558541213, "question_id": 56260910, "link": "https://stackoverflow.com/questions/56260910/perl-internal-variables-are-next-expressions-same", "title": "Perl internal variables. Are next expressions same?", "body": "<p>I have two expressions:</p>\n\n<pre><code>${ 'main::' }{ \"_&lt;$filename\" }\n</code></pre>\n\n<p>and </p>\n\n<pre><code>${ \"::_&lt;$filename\" }\n</code></pre>\n\n<p>are these two expressions same?</p>\n"}, {"tags": ["perl", "unix", "ldap"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1558540275, "post_id": 56260614, "comment_id": 99137901, "body": "Is the password hash real?"}, {"owner": {"reputation": 25, "user_id": 8060165, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mdywERHBtWc/AAAAAAAAAAI/AAAAAAAAEbY/vmAop4TdW-Y/photo.jpg?sz=128", "display_name": "Manu Gal&#225;n", "link": "https://stackoverflow.com/users/8060165/manu-gal%c3%a1n"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1558548455, "post_id": 56260614, "comment_id": 99141654, "body": "@choroba yes, sorry, the passwords were all real, already edited them out."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8060165, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mdywERHBtWc/AAAAAAAAAAI/AAAAAAAAEbY/vmAop4TdW-Y/photo.jpg?sz=128", "display_name": "Manu Gal&#225;n", "link": "https://stackoverflow.com/users/8060165/manu-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1558603707, "post_id": 56261593, "comment_id": 99159009, "body": "I&#39;ve tried running the program with root priviledges and also removing the spaces, but none of the solutions worked. How can I enable the strace&#39;ing of the slapd process?"}, {"owner": {"reputation": 25, "user_id": 8060165, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mdywERHBtWc/AAAAAAAAAAI/AAAAAAAAEbY/vmAop4TdW-Y/photo.jpg?sz=128", "display_name": "Manu Gal&#225;n", "link": "https://stackoverflow.com/users/8060165/manu-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1558609372, "post_id": 56261593, "comment_id": 99162126, "body": "After doing some research it seems you were right and the ldap structure got corrupted somewhere with slapadd  and, after restoring, it works so thanks!"}], "tags": [], "owner": {"reputation": 26, "user_id": 10829292, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wOc8JT0pWAo/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZVy30tcHnMWAmS9z1MoFzQ4XLQ2Q/mo/photo.jpg?sz=128", "display_name": "jocelyn gibart", "link": "https://stackoverflow.com/users/10829292/jocelyn-gibart"}, "is_accepted": true, "score": 1, "last_activity_date": 1558544019, "last_edit_date": 1558544019, "creation_date": 1558543690, "answer_id": 56261593, "question_id": 56260614, "link": "https://stackoverflow.com/questions/56260614/how-to-create-users-on-a-ldap-server-with-perl-for-unix-authentication/56261593#56261593", "title": "How to create users on a LDAP server with Perl for Unix authentication?", "body": "<p>Definately an issue on the slapd side. Not a perl issue.</p>\n\n<p>This old thread <a href=\"https://www.openldap.org/lists/openldap-software/200407/msg00007.html\" rel=\"nofollow noreferrer\">https://www.openldap.org/lists/openldap-software/200407/msg00007.html</a> suggests that maybe your test ldap structure got created wrong using slapadd  instead of using ldapadd.\nOr you have a permission issue.</p>\n\n<p>Have you tried strace 'ing the slapd process ?</p>\n\n<p>Also try to remove the spaces in 'uid=pruebaPerl, ou=User, dc=ramal, dc=com' and 'cn=admin, dc=ramal, dc=com'</p>\n"}], "owner": {"reputation": 25, "user_id": 8060165, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mdywERHBtWc/AAAAAAAAAAI/AAAAAAAAEbY/vmAop4TdW-Y/photo.jpg?sz=128", "display_name": "Manu Gal&#225;n", "link": "https://stackoverflow.com/users/8060165/manu-gal%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 56261593, "answer_count": 1, "score": 0, "last_activity_date": 1558548336, "creation_date": 1558539974, "last_edit_date": 1558548336, "question_id": 56260614, "link": "https://stackoverflow.com/questions/56260614/how-to-create-users-on-a-ldap-server-with-perl-for-unix-authentication", "title": "How to create users on a LDAP server with Perl for Unix authentication?", "body": "<p>I'm trying to create a web server which needs for some user authentication within the server itself. I need to do it with Perl so I decided to try to use an LDAP server in localhost.</p>\n\n<p>I've been trying to use the script below. Everything is configured correctly (as i tried to search for entries aready configured), but, when I try to run the script, it tells me \"Index generation failed\"</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $ldap = Net::LDAP-&gt;new( '127.0.0.1' ) or die \"$@\";\n\nmy $mesg = $ldap-&gt;bind ('cn=admin, dc=ramal, dc=com',\n                        password=&gt;'&lt;admin_password&gt;'\n                     );\n\n#$mesg-&gt;code or die $mesg-&gt;error;\n\nmy $result = $ldap-&gt;add('uid=pruebaPerl, ou=User, dc=ramal, dc=com',\n                        attrs=&gt; [\n                                'uid' =&gt; 'pruebaPerl',\n                                'cn' =&gt; 'Usuario de prueba de Perl',\n                                'objectclass' =&gt; ['account', 'posixAccount', 'shadowAccount'],\n                                'userPassword' =&gt; '&lt;hashed password&gt;',\n                                'loginShell' =&gt; '/bin/bash',\n                                'uidNumber' =&gt; 2001,\n                                'gidNumber' =&gt; 2001,\n                                'homeDirectory' =&gt; '/home/pruebaPerl'\n                        ]\n                );\n\n$result-&gt;code and warn \"Failed to add entry: \", $result-&gt;error;\n\n$mesg = $ldap-&gt;unbind\n\n</code></pre>\n\n<p>So, I think something's wrong in the arguments for add but I don't know what.\nAny help is welcomed.</p>\n"}, {"tags": ["regex", "perl", "pcre", "vi", "regex-lookarounds"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1558536943, "post_id": 56259617, "comment_id": 99135901, "body": "Why tagging with <code>perl</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1558591603, "post_id": 56259617, "comment_id": 99153098, "body": "(1) That changes your data then -- that line will then have six fields (if you insert a comma and not, say, period). Is that what you want? (2) What when a number is longer than 6 digits: do you keep going, so inserting two commas?"}], "answers": [{"tags": [], "owner": {"reputation": 898, "user_id": 8214868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXRBf.png?s=128&g=1", "display_name": "Drubio", "link": "https://stackoverflow.com/users/8214868/drubio"}, "is_accepted": true, "score": 1, "last_activity_date": 1558538525, "last_edit_date": 1558538525, "creation_date": 1558538041, "answer_id": 56260034, "question_id": 56259617, "link": "https://stackoverflow.com/questions/56259617/how-to-find-and-replace-before-the-match/56260034#56260034", "title": "How to find and replace before the match?", "body": "<p>In order to find and replace you need to capture the groups. The regular expression that allows you to do this is:</p>\n\n<pre><code>(\\d{3},)([\\d,]*)\n</code></pre>\n\n<p>But, to be able to use it to find and replace in <code>vim</code> you need simple modification since it requires to skip the first curly bracket of the quantifier. Then, you can just insert the coma before the whole match. You can use directly the following statement in <code>vim</code>:</p>\n\n<pre><code>.s/\\d\\{3},[\\d,]*/,\\0/\n</code></pre>\n\n<p>As a brief explanation, <code>\\d\\{3},</code> allows you to match exactly the three previous digits before the first comma and the comma. Then the rest of the regex allows you to capture the trailing part. Finally, in <code>vim</code> the <code>,\\0</code> allows you to set a comma just before the full match.</p>\n"}, {"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 4, "last_activity_date": 1558543438, "creation_date": 1558543438, "answer_id": 56261536, "question_id": 56259617, "link": "https://stackoverflow.com/questions/56259617/how-to-find-and-replace-before-the-match/56261536#56261536", "title": "How to find and replace before the match?", "body": "<p>You've tagged with perl, so you could do:</p>\n\n<pre><code>echo '12345,6789,567890' | perl -pe 's/^[^,]*\\K(?=\\d{3},)/,/'\n12,345,6789,567890\n</code></pre>\n\n\n\n<p><strong>Explanation:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>^               # beginning of line\n  [^,]*         # 0 or more any character but comma\n  \\K            # forget all we have seen until this position\n  (?=           # positive lookahead, make sure we have after:\n    \\d{3}       # 3 digits\n    ,           # a comma\n  )             # end lookahead\n</code></pre>\n"}], "owner": {"reputation": 7153, "user_id": 320570, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/da52e85c547b2cc28d891fdcb7858911?s=128&d=identicon&r=PG", "display_name": "Jimm", "link": "https://stackoverflow.com/users/320570/jimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 56260034, "answer_count": 2, "score": 1, "last_activity_date": 1558629650, "creation_date": 1558536770, "last_edit_date": 1558629650, "question_id": 56259617, "link": "https://stackoverflow.com/questions/56259617/how-to-find-and-replace-before-the-match", "title": "How to find and replace before the match?", "body": "<p>I have comma delimited data like 12345,6789,567890. What i would like is to find 3 digits before the first comma and put a comma where they start. Given the above entry, i want to find 3 digits before first comma, that would be 345 and transform the entry \"12345\" to \"12,345\". </p>\n\n<p>What is the regular expression to find 3 digits before first comma occurrence and how to put comma before those 3 digits. I am using vim.</p>\n"}, {"tags": ["regex", "linux", "perl", "bioinformatics", "bioperl"], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1558532540, "creation_date": 1558532540, "answer_id": 56258282, "question_id": 56257775, "link": "https://stackoverflow.com/questions/56257775/how-to-match-two-csv-files-and-write-on-third-file-replacing-data-in-file-2-wit/56258282#56258282", "title": "How to match two .csv files and write on third file replacing data in file 2 with data from file 1", "body": "<p>The primary error is that</p>\n\n<pre><code>my @file1 = &lt;FILE1&gt;;\n\nmy @file2 = &lt;FILE2&gt;;\n</code></pre>\n\n<p>consume all data from the files, so that there's nothing left to read for the</p>\n\n<pre><code>while ( my $value = &lt;FILE1&gt; ) {\n</code></pre>\n\n<p>and</p>\n\n<pre><code>while (my $value = &lt;FILE2&gt;) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11539433, "user_type": "registered", "profile_image": "https://graph.facebook.com/1808376922618066/picture?type=large", "display_name": "Mutua Mwikali", "link": "https://stackoverflow.com/users/11539433/mutua-mwikali"}, "edited": false, "score": 0, "creation_date": 1560762679, "post_id": 56263710, "comment_id": 99828319, "body": "Thanks Hakon. your code doesn&#39;t give me any results though."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1, "user_id": 11539433, "user_type": "registered", "profile_image": "https://graph.facebook.com/1808376922618066/picture?type=large", "display_name": "Mutua Mwikali", "link": "https://stackoverflow.com/users/11539433/mutua-mwikali"}, "edited": false, "score": 0, "creation_date": 1560762931, "post_id": 56263710, "comment_id": 99828438, "body": "Hi. Can you send me the input files you are using? Then I will have a look at it. My email is in my profile."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1558553366, "creation_date": 1558553366, "answer_id": 56263710, "question_id": 56257775, "link": "https://stackoverflow.com/questions/56257775/how-to-match-two-csv-files-and-write-on-third-file-replacing-data-in-file-2-wit/56263710#56263710", "title": "How to match two .csv files and write on third file replacing data in file 2 with data from file 1", "body": "<p>Here is an example of how you can insert the annotations from the first file <code>annot.txt</code> into the second file <code>orthomcl.csv</code>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\n{\n    my $map = read_annot();\n    my ($regex) = map {qr /$_/} join '|', map {quotemeta} keys %$map;\n    my $fn = 'orthomcl.csv';\n    open ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\n    my $str = do { local $/; &lt;$fh&gt; };\n    close $fh;\n    $str =~ s/($regex)/$map-&gt;{$1}/ge;\n    save_combi( $str );\n}\n\nsub save_combi {\n    my ( $str ) = @_;\n\n    my $fn = 'combi.csv';\n    open ( my $fh, '&gt;', $fn ) or die \"Could not open file '$fn': $!\";\n    print $fh $str;\n    close $fh;\n\n    say \"Saved: '$fn'\";\n}\n\nsub read_annot {\n    my $fn = 'annot.txt';\n    open ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\n    my %map;\n    while (my $line = &lt;$fh&gt; ) {\n        chomp $line;\n        my ( $key, $value ) = $line =~ /^(\\S+),\\s+(.*)$/;\n        $value =~ s/\\s+$//;\n        if (defined $key) {\n            $map{$key} = $value;\n        }\n    }\n    close $fh;\n    return \\%map;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11539433, "user_type": "registered", "profile_image": "https://graph.facebook.com/1808376922618066/picture?type=large", "display_name": "Mutua Mwikali", "link": "https://stackoverflow.com/users/11539433/mutua-mwikali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1558553366, "creation_date": 1558531004, "last_edit_date": 1558552032, "question_id": 56257775, "link": "https://stackoverflow.com/questions/56257775/how-to-match-two-csv-files-and-write-on-third-file-replacing-data-in-file-2-wit", "title": "How to match two .csv files and write on third file replacing data in file 2 with data from file 1", "body": "<p>I have 2 csv and text files, file 1 has 2 columns one with gene id and two with gene name,file 2 has many columns with part of the string in columns being gene id e.g gene id(genome) or pseudo gene id(genome). i want to compare each gene id in file 1 with each gene id in file 2 and replace the gene id in file 2 with the gene name in file 1 printing in file 3.</p>\n\n<p>file 1;</p>\n\n<pre><code>SPAR5_0024, coA binding domain protein                    \nSPAR5_0025, hypothetical protein                    \nSPAR5_0026, hypothetical protein  \n</code></pre>\n\n<p>file 2;</p>\n\n<pre><code>SPAR5_0024(72.AFAX01.1.gb) SPAR5_0026(72.AFAX01.1.gbff) SPAR5_0025(72.AFAX01.1.gbff)\n</code></pre>\n\n<p>desired output (file 3);</p>\n\n<pre><code>coA binding domain protein(72.AFAX01.1.gb) hypothetical protein(72.AFAX01.1.gbff) hypothetical protein(72.AFAX01.1.gbff)\n</code></pre>\n\n<p>with my code am getting an empty file 3</p>\n\n<p>This is what am running;</p>\n\n<pre><code>#!/usr/local/bin/perl -w\n\nuse strict;\nuse warnings;\n\nmy $file1 = \"annot.txt\";\nmy $file2 = \"orthomcl.csv\";\nmy $file3 = \"combi.csv\";\n\nopen (FILE1,\"$file1\") || die;\nopen (FILE2,\"$file2\") || die;\nopen (FILE3,\"&gt;$file3\") || die;\n\n\nmy @file1 = &lt;FILE1&gt;;\nmy @file2 = &lt;FILE2&gt;;\n\n\nmy %file1;\nwhile ( my $value = &lt;FILE1&gt; ) {\n    chomp $value;\n    my @file1 = split /\\s+/, $_;\n    $file1{$value} = 1;\n}\n\nmy %file2;\nwhile (my $value = &lt;FILE2&gt;) {\n    chomp $value;\n    my @file2 = split /\\s+/, $_;\n    if ( $file1{ $value } ) {\n        $file2 = $file1{ $file2 };\n        print join( \"\\t\" =&gt; @file2 ), $/;\n    }\n}\n\nclose (FILE1);\nclose (FILE2);\nclose (FILE3);\n</code></pre>\n\n<p>desired output (file 3)</p>\n\n<pre><code>coA binding domain protein(72.AFAX01.1.gb) hypothetical protein(72.AFAX01.1.gbff) hypothetical protein(72.AFAX01.1.gbff)\n</code></pre>\n"}, {"tags": ["python", "string", "perl", "integer", "yaml"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1558520348, "post_id": 56254368, "comment_id": 99125980, "body": "Haven&#39;t tried, but possibly... <a href=\"https://metacpan.org/pod/YAML#QuoteNumericStrings\" rel=\"nofollow noreferrer\"><code>local $YAML::QuoteNumericStrings = 1</code></a>?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1558520568, "post_id": 56254368, "comment_id": 99126119, "body": "@Amadan I think that would not quote <code>1_1</code> since it is not numeric."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1558520667, "post_id": 56254368, "comment_id": 99126170, "body": "@H&#229;konH&#230;gland I haven&#39;t tested whether <code>YAML</code> module considers it to be numeric (it should), but <code>1_1</code> is numeric in Perl (equivalent to <code>11</code>), just like in Ruby. Try: <code>perl -e &quot;print 1_1;&quot;</code>"}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 2, "creation_date": 1558520691, "post_id": 56254368, "comment_id": 99126185, "body": "Your Perl library is doing the wrong thing. <a href=\"https://yaml.org/type/int.html\" rel=\"nofollow noreferrer\">yaml.org/type/int.html</a> clearly states <i>Any \u201c_\u201d characters in the number are ignored, allowing a readable representation of large values.</i> The flip side of that is that any string consisting of numerals and underscores, needs to be quoted in YAML. And unquoted <code>1_1</code> in YAML is the same key as <code>11</code>"}, {"owner": {"reputation": 873, "user_id": 508427, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3zmlJ.jpg?s=128&g=1", "display_name": "Recct", "link": "https://stackoverflow.com/users/508427/recct"}, "edited": false, "score": 0, "creation_date": 1558523452, "post_id": 56254368, "comment_id": 99127679, "body": "Library might be wrong in terms of YAML but in Perl can have integers in the form of <code>$var = 1_000_000</code> to represent a more readable million. Edit: also, what about <a href=\"https://metacpan.org/pod/YAML::Tiny\" rel=\"nofollow noreferrer\">metacpan.org/pod/YAML::Tiny</a> instead"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1558524167, "post_id": 56254368, "comment_id": 99128086, "body": "The relevant code in the Perl <a href=\"https://metacpan.org/pod/YAML\" rel=\"nofollow noreferrer\"><code>YAML</code></a> module is <a href=\"https://metacpan.org/source/TINITA/YAML-1.29/lib/YAML/Dumper.pm#L497\" rel=\"nofollow noreferrer\">here</a>. You can see that it uses <a href=\"https://metacpan.org/pod/Scalar::Util#looks_like_number\" rel=\"nofollow noreferrer\"><code>Scalar::Util::looks_like_number()</code></a> and quotes if <code>$YAML::QuoteNumericStrings == 1</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1558524493, "post_id": 56254368, "comment_id": 99128269, "body": "I suggest you add an issue at <a href=\"https://github.com/ingydotnet/yaml-pm/issues\" rel=\"nofollow noreferrer\">yaml-pm</a>"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 2, "creation_date": 1558526612, "post_id": 56254368, "comment_id": 99129384, "body": "Since nobody here has said they actually <i>tested</i> setting <code>QuoteNumericStrings</code> yet, I just tried adding it to the code in the question. Using YAML 1.29 (the current version as of this comment), it quoted <code>&#39;11&#39;</code>, but did <i>not</i> quote <code>1_1</code>."}], "owner": {"reputation": 31, "user_id": 5549924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548b42cd7b6ccea4b7923ec770ca3ee4?s=128&d=identicon&r=PG&f=1", "display_name": "rth", "link": "https://stackoverflow.com/users/5549924/rth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558521586, "creation_date": 1558519695, "last_edit_date": 1558521586, "question_id": 56254368, "link": "https://stackoverflow.com/questions/56254368/how-to-get-a-string-when-writing-a-perl-hash-into-a-yaml-1-1-will-be-1-1", "title": "How to get a string when writing a perl hash into a yaml (&#39;1_1&#39; =&gt; will be 1_1: in yaml format)", "body": "<p>I have a perl script which writes a hash into a file using YAML::DumpFile. The perl hash contains keys like '11':  and '1_1':. When I look into the yaml file I see that there is no string anymore, it is 11: and 1_1: (valid yaml syntax as far as I know). The problem is when I read this file with the as non string marked keys with python I loose one entry, because both 11: and 1_1: are handled as 11:.</p>\n\n<p>In the past I tried different proposal I found in the web but none of them solve my problem.</p>\n\n<p>This code generates the my.yaml file</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Data::Dumper;  \nuse YAML;\nmy %hash = (\n           '11'  =&gt; { 'TEST' =&gt; 'my_test_1' },\n           '1_1' =&gt; { 'TEST' =&gt; 'my_test_2' }\n           );\n\nprint Dumper \\%hash;\n\nYAML::DumpFile( \"my.yaml\",\\%hash );\n</code></pre>\n\n<p>this code uses the my.yaml file</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import yaml\n\ndef my_construct_mapping(self, node, deep=False):\n    data = self.construct_mapping_org(node, deep)\n    return {(str(key) if isinstance(key, int) else key): data[key] for key in data}\n\nyaml.SafeLoader.construct_mapping_org = yaml.SafeLoader.construct_mapping\nyaml.SafeLoader.construct_mapping = my_construct_mapping\n\ndata = yaml.safe_load(open('my.yaml').read())\nprint(data)\n</code></pre>\n\n<p>The files and printouts are:</p>\n\n<p>perl print.Dumper</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$VAR1 = {\n          '1_1' =&gt; {\n                     'TEST' =&gt; 'my_test_2'\n                   },\n          '11' =&gt; {\n                    'TEST' =&gt; 'my_test_1'\n                  }\n        };\n\n</code></pre>\n\n<p>so '1_1' looks for me lika a string.</p>\n\n<p>The my.yaml looks like:</p>\n\n<pre><code>---\n11:\n  TEST: my_test_1\n1_1:\n  TEST: my_test_2\n</code></pre>\n\n<p>I expect that I see a '1_1': in the my.yaml file but I get 1_1: which result in the removal of the '11' entry.</p>\n"}, {"tags": ["python", "perl", "awk", "sed", "large-data"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1558497494, "post_id": 56248555, "comment_id": 99115998, "body": "I can&#39;t reliably compare my posted program&#39;s performance with your <code>awk</code> line without realistic data. So I&#39;m expecting you to let me know if my program does or doesn&#39;t improve your runtimes :)"}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "edited": false, "score": 0, "creation_date": 1558504230, "post_id": 56248555, "comment_id": 99117649, "body": "Would you be so kind as to test my Perl solution as well and tell us which solution is fastest and the times? See also commentary under my answer."}, {"owner": {"reputation": 758, "user_id": 1586913, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/da7fcb41cc4239d92becd95552bd4d03?s=128&d=identicon&r=PG", "display_name": "Subbeh", "link": "https://stackoverflow.com/users/1586913/subbeh"}, "reply_to_user": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "edited": false, "score": 2, "creation_date": 1558505658, "post_id": 56248555, "comment_id": 99118180, "body": "@AlexHarvey, your solution takes <code>6m37.220s</code> on a single file containing 17576 lines. I like your solution as it goes through the entire line not taking separated fields into account but it is significantly slower than @zdim&#39;s solution: <code>0m0.419s</code>"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1558511770, "post_id": 56248555, "comment_id": 99121251, "body": "<code>500000</code> lines should ring alarm bells for you if you ever plan to use <code>awk</code> for such files. For simple substitutions <code>sed</code> would be pretty, <i>or at the least considerably</i>, fast for such files. However, <code>sed</code>&#39;s abilities are limited and it typically suits basic search and replace for systems administration."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558526445, "post_id": 56248555, "comment_id": 99129290, "body": "@Subbeh to provide the right answer we&#39;d need to know some more about your requirements, including 1) do you want a regexp or string match (e.g should <code>a.c</code> match <code>abc</code> or ONLY <code>a.c</code>), and 2) do you want a partial or full match (e.g. should <code>foo1</code> match the first 4 chars of <code>foo12</code> or ONLY <code>foo1</code> as a complete field)? If you post a few lines of sample input and epected output that cover all of your use cases (including where you have multiple strings on 1 line to replace and strings that should NOT be replaced such as regexp or partial matches if those are undesirable) then we can help you."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1558527909, "post_id": 56248555, "comment_id": 99130034, "body": "@sjsam Huh? Awk can handle files of 500000 lines as efficiently as any other tool, more so usually since manipulating text is ALL that awk was created to do and so it is highly optimized for just that specific task."}], "answers": [{"comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1558518568, "post_id": 56248763, "comment_id": 99125027, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/193762/discussion-on-answer-by-zdim-unix-perl-python-substitute-list-on-big-data-set\">moved to chat</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1558595380, "post_id": 56248763, "comment_id": 99154514, "body": "@Subbeh Added a version that uses <code>Text::CSV</code> (a standard for these things) to read (valid CSV) files.  This takes care of possible quotes and spaces so it&#39;s a little simpler as well.  Testing reliably is hard without real data but I found this to perhaps be faster, up to around 50%. So it may be worth a try.  (If you do, I&#39;d love to know how it compares with hand-rolled one, on your real data.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1569810839, "last_edit_date": 1569810839, "creation_date": 1558494518, "answer_id": 56248763, "question_id": 56248555, "link": "https://stackoverflow.com/questions/56248555/unix-perl-python-substitute-list-on-big-data-set/56248763#56248763", "title": "Unix/Perl/Python: substitute list on big data set", "body": "<p><strong>Note</strong> &nbsp; See the second part for a version that uses <code>Text::CSV</code> module to parse files</p>\n\n<hr>\n\n<p>Load mappings into a hash (dictionary), then go through your files and test each field for whether there is such a key in the hash, replace with value if there is. Write each line out to a temporary file, and when done move it into a new file (or overwrite the processed file).  Any tool has to do that, more or less.</p>\n\n<p>With Perl, tested with a few small made-up files</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse File::Copy qw(move);\n\nmy $file = shift;\ndie \"Usage: $0 mapping-file data-files\\n\"  if not $file or not @ARGV;\n\nmy %map;\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\nwhile (&lt;$fh&gt;) { \n    my ($key, $val) = map { s/^\\s+|\\s+$//gr } split /\\s*,\\s*/;  # see Notes\n    $map{$key} = $val;\n}\n\nmy $outfile = \"tmp.outfile.txt.$$\";  # use File::Temp\n\nforeach my $file (@ARGV) {\n    open my $fh_out, '&gt;', $outfile or die \"Can't open $outfile: $!\";\n    open my $fh,     '&lt;', $file    or die \"Can't open $file: $!\";\n    while (&lt;$fh&gt;) {\n        s/^\\s+|\\s+$//g;               # remove leading/trailing whitespace\n        my @fields = split /\\s*,\\s*/;\n        exists($map{$_}) &amp;&amp; ($_=$map{$_}) for @fields;  # see Notes\n        say $fh_out join ',', @fields;\n    }   \n    close $fh_out;\n\n    # Change to commented out line once thoroughly tested\n    #move($outfile, $file) or die \"can't move $outfile to $file: $!\";\n    move($outfile, 'new_'.$file) or die \"can't move $outfile: $!\";\n}\n</code></pre>\n\n<p>Notes.</p>\n\n<ul>\n<li><p>The check of data against mappings is written for efficiency: We must look at each field, there's no escaping that, but then we only check for the field as a key (no regex). For this all leading/trailing spaces need be stripped. Thus this code may change whitespace in output data files; in case this is important for some reason it can of course be modified to preserve original spaces.</p></li>\n<li><p>It came up in comments that a field in data can differ in fact, by having extra quotes. Then extract the would-be key first</p>\n\n<pre><code>for (@fields) {\n    $_ = $map{$1}  if /\"?([^\"]*)/ and exists $map{$1};\n}\n</code></pre>\n\n<p>This starts the regex engine on every check, what affects efficiency. It would help to clean up that input CSV data of quotes instead, and run with the code as it is above, with no regex. This can be done by reading files using a CSV-parsing module; see comment at the end.</p></li>\n<li><p>For Perls earlier than 5.14 replace </p>\n\n<pre><code>my ($key, $val) = map { s/^\\s+|\\s+$//gr } split /\\s*,\\s*/;\n</code></pre>\n\n<p>with </p>\n\n<pre><code>my ($key, $val) = map { s/^\\s+|\\s+$//g; $_ } split /\\s*,\\s*/;\n</code></pre>\n\n<p>since the \"non-destructive\" <code>/r</code> modifier was introduced only <a href=\"https://perldoc.perl.org/perl5140delta.html#Regular-Expressions\" rel=\"nofollow noreferrer\">in v5.14</a></p></li>\n<li><p>If you'd rather that your whole operation doesn't die for one bad file, replace <code>or die ...</code> with</p>\n\n<pre><code>or do { \n    # print warning for whatever failed (warn \"Can't open $file: $!\";)\n    # take care of filehandles and such if/as needed\n    next;\n};\n</code></pre>\n\n<p>and make sure to (perhaps log and) review output.</p></li>\n</ul>\n\n<p>This leaves room for some efficiency improvements, but nothing dramatic.</p>\n\n<hr>\n\n<p>The data, with commas separating fields, may (or may not) be valid CSV. Since the question doesn't at all address this, and doesn't report problems, it is unlikely that any properties of the CSV data format are used in data files (delimiters embedded in data, protected quotes). </p>\n\n<p>However, it's still a good idea to read these files using a module that honors full CSV, like <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>. That also makes things easier, by  taking care of extra spaces and quotes and handing us cleaned-up fields.  So here's that -- the same as above, but using the module to parse files</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse File::Copy qw(move);\n\nuse Text::CSV;\n\nmy $file = shift;\ndie \"Usage: $0 mapping-file data-files\\n\"  if not $file or not @ARGV;\n\nmy $csv = Text::CSV-&gt;new ( { binary =&gt; 1, allow_whitespace =&gt; 1 } ) \n    or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag ();\n\nmy %map;\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\nwhile (my $line = $csv-&gt;getline($fh)) {\n    $map{ $line-&gt;[0] } = $line-&gt;[1]\n}\n\nmy $outfile = \"tmp.outfile.txt.$$\";  # use File::Temp    \n\nforeach my $file (@ARGV) {\n    open my $fh_out, '&gt;', $outfile or die \"Can't open $outfile: $!\";\n    open my $fh,     '&lt;', $file    or die \"Can't open $file: $!\";\n    while (my $line = $csv-&gt;getline($fh)) {\n        exists($map{$_}) &amp;&amp; ($_=$map{$_}) for @$line;\n        say $fh_out join ',', @$line;\n    }\n    close $fh_out;\n\n    move($outfile, 'new_'.$file) or die \"Can't move $outfile: $!\";\n}\n</code></pre>\n\n<p>Now we don't have to worry about spaces or overall quotes at all, what simplifies things a bit.</p>\n\n<p>While it is difficult to reliably compare these two approaches without realistic data files, I benchmarked them for (made-up) large data files that involve \"similar\" processing. The code using <code>Text::CSV</code> for parsing runs either around the same, or (up to) 50% faster.</p>\n\n<p>The constructor option  <a href=\"https://metacpan.org/pod/Text::CSV#allow_whitespace\" rel=\"nofollow noreferrer\">allow_whitespace</a> makes it <em>remove</em> extra spaces, perhaps contrary to what the name may imply, as I do by hand above. (Also see <code>allow_loose_quotes</code> and related options.) There is far more, see docs. The <code>Text::CSV</code> defaults to <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>, if installed.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1558501339, "post_id": 56249197, "comment_id": 99116723, "body": "That <code>%m</code> is the whole mapping, with those &quot;13491&quot; keys. So the code runs a regex <i>for each key</i>, on each line of data. That will actually and visibly hurt runtime, while it&#39;s not needed -- the code isn&#39;t <i>using</i> the hash but is checking for every single key."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558505147, "post_id": 56249197, "comment_id": 99117984, "body": "Speed only matters if it works, but your solution replaces sequences that are only part of fields. It also fails to handle CSV quoting and escaping. (Proper handling of CSV is required according to comments by the OP.)"}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558505556, "post_id": 56249197, "comment_id": 99118133, "body": "@ikegami, I think you didn&#39;t read the OP&#39;s post carefully enough. They say, &quot;Please note that the value could be in different places on the <i>line</i> with more than 1 occurrence.&quot; They don&#39;t say that values must take up the entire field. Also, the pattern <code>**value1**</code> and <code>**value2**</code> to me looks like it is chosen because the data otherwise will not contain their delimiters, <code>**</code>. If so, my code works fine. And, obviously, it is trivial to fix if my assumption there is incorrect."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558505718, "post_id": 56249197, "comment_id": 99118215, "body": "Re &quot;<i>They don&#39;t say that values must take up the entire field.</i>&quot;, The Question would lead you to believe that, and the fact that zdim&#39;s solution works proves it"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558505766, "post_id": 56249197, "comment_id": 99118234, "body": "Re &quot;<i>to me looks like it is chosen because the data otherwise will not contain their delimiters, **.</i>&quot;, Oh, I hadn&#39;t even brought up the issue of your code injection because I was planning on fixing it. Fixed now."}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558506091, "post_id": 56249197, "comment_id": 99118368, "body": "Well the OP&#39;s comment explicitly confirmed that they prefer a line-based solution, although mine is too slow, so I did read the question correctly. @ikegami. I&#39;ll have to have a think to see if it can be sped up."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558506260, "post_id": 56249197, "comment_id": 99118431, "body": "Re &quot;<i>Well the OP&#39;s comment explicitly confirmed</i>&quot;, Where? I see a place where they said their failed attempt did it that way because they didn&#39;t know how to handle CSV properly. This is a bug in their solution too"}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558507403, "post_id": 56249197, "comment_id": 99118958, "body": "@ikegami, &quot;<i>I like your solution as it goes through the entire line not taking separated fields into account but it is significantly slower than zdim&#39;s solution</i>&quot;. So I guess you&#39;re saying their requirements are wrong?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558507467, "post_id": 56249197, "comment_id": 99118984, "body": "No,I&#39;m saying they&#39;re right, and that your solution doesn&#39;t comply to them in numerous ways. Even if you&#39;re right about this part, it&#39;s just that, a part."}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558511139, "post_id": 56249197, "comment_id": 99120898, "body": "@ikegami, well, you have stated, &quot;<i>It seems you want match entire fields</i>&quot;, and as I pointed out, it doesn&#39;t say that, and what it does say appears to contradict that, namely, &quot;<i>Please note that the value could be in different places on the line with more than 1 occurrence.</i>&quot;"}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558511364, "post_id": 56249197, "comment_id": 99121025, "body": "@ikegami, what are the other &quot;numerous ways&quot; that this solution, which I tested, &quot;doesn&#39;t comply&quot;?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558539146, "post_id": 56249197, "comment_id": 99137287, "body": "This code has a few basic issues: open and rename need to be checked for errors, lexical handles should be used instead of barewords, and each should be avoided."}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558540625, "post_id": 56249197, "comment_id": 99138064, "body": "Thanks @Grinnz. Updated."}], "tags": [], "owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "is_accepted": false, "score": 1, "last_activity_date": 1558540613, "last_edit_date": 1558540613, "creation_date": 1558498269, "answer_id": 56249197, "question_id": 56248555, "link": "https://stackoverflow.com/questions/56248555/unix-perl-python-substitute-list-on-big-data-set/56249197#56249197", "title": "Unix/Perl/Python: substitute list on big data set", "body": "<p>There is some commentary below suggesting that the OP needs to handle real CSV data, whereas the question says:</p>\n\n<blockquote>\n  <p>Please note that the value could be in different places on the line with more than 1 occurrence.</p>\n</blockquote>\n\n<p>I have taken this to mean that these are lines, not CSV data, and that a regex-based solution is required. The OP also confirmed that interpretation in a comment above.</p>\n\n<p>As noted in other answers, however, it is faster to break the data into fields and simply lookup the replacement in the map.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n# Load mappings.txt into a Perl\n# Hash %m.\n#\nopen my $mh, '&lt;', './mappings.txt'\n  or die \"open: $!\";\n\nmy %m = ();\nwhile ($mh) {\n  chomp;\n  my @f = split ',';\n  $m{$f[0]} = $f[1];\n}\n\n# Load files.txt into a Perl\n# Array @files.\n#\nopen my $fh, '&lt;', './files.txt';\nchomp(my @files = $fh);\n\n# Update each file line by line,\n# using a temporary file similar\n# to sed -i.\n#\nforeach my $file (@files) {\n\n  open my $fh, '&lt;', $file\n    or die \"open: $!\";\n  open my $th, '&gt;', \"$file.bak\"\n    or die \"open: $!\";\n\n  while ($fh) {\n    foreach my $k (keys %m) {\n      my $v = $m[$k];\n      s/\\Q$k/$v/g;\n    }\n    print $th;\n  }\n\n  rename \"$file.bak\", $file\n    or die \"rename: $!\";\n}\n</code></pre>\n\n<p>I assume of course that you have your mappings in <code>mappings.txt</code> and file list in <code>files.txt</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1558508025, "last_edit_date": 1558508025, "creation_date": 1558503603, "answer_id": 56249994, "question_id": 56248555, "link": "https://stackoverflow.com/questions/56248555/unix-perl-python-substitute-list-on-big-data-set/56249994#56249994", "title": "Unix/Perl/Python: substitute list on big data set", "body": "<p>According to your comments, you have proper CSV. The following properly handles quoting and escapes when reading from the map file, when reading from a data file, and when writing to a data file.</p>\n\n<p>It seems you want match entire fields. The following does this. It even supports fields that contains commas (<code>,</code>) and/or quotes (<code>\"</code>). It does the comparisons using a hash lookup, which is much faster than a regex match.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse Text::CSV_XS qw( );\n\nmy $csv = Text::CSV_XS-&gt;new({ auto_diag =&gt; 2, binary =&gt; 1 });\n\nsub process {\n   my ($map, $in_fh, $out_fh) = @_;\n   while ( my $row = $csv-&gt;getline($in_fh) ) {\n      $csv-&gt;say($out_fh, [ map { $map-&gt;{$_} // $_ } @$row ]);\n   }\n}\n\ndie \"usage: $0 {map} [{file} [...]]\\n\"\n   if @ARGV &lt; 1;\n\nmy $map_qfn = shift;\n\nmy %map;\n{\n   open(my $fh, '&lt;', $map_qfn)\n      or die(\"Can't open \\\"$map_qfn\\\": $!\\n\");\n   while ( my $row = $csv-&gt;getline($fh) ) {\n      $map{$row-&gt;[0]} = $row-&gt;[1];\n   }\n}\n\nif (@ARGV) {\n   for my $qfn (@ARGV) {\n      open(my $in_fh, '&lt;', $qfn)\n         or warn(\"Can't open \\\"$qfn\\\": $!\\n\"), next;\n      rename($qfn, $qfn.\"~\")\n         or warn(\"Can't rename \\\"$qfn\\\": $!\\n\"), next;\n      open(my $out_fh, '&gt;', $qfn)\n         or warn(\"Can't create \\\"$qfn\\\": $!\\n\"), next;\n      eval { process(\\%map, $in_fh, $out_fh); 1 }\n         or warn(\"Error processing \\\"$qfn\\\": $@\"), next;\n      close($out_fh)\n         or warn(\"Error writing to \\\"$qfn\\\": $!\\n\"), next;\n   }\n} else {\n   eval { process(\\%map, \\*STDIN, \\*STDOUT); 1 }\n      or warn(\"Error processing: $@\");\n   close(\\*STDOUT)\n      or warn(\"Error writing to STDOUT: $!\\n\");\n}\n</code></pre>\n\n<p>If you provide no files names beyond the map file, it reads from STDIN and outputs to STDOUT.</p>\n\n<p>If you provide one or more file names beyond the map file, it replaces the files in-place (though it leaves a backup behind).</p>\n"}, {"comments": [{"owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "edited": false, "score": 2, "creation_date": 1558527502, "post_id": 56256505, "comment_id": 99129816, "body": "very smart and elegant solution."}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "edited": false, "score": 1, "creation_date": 1558856769, "post_id": 56256505, "comment_id": 99232957, "body": "A nice demonstration of the elegance of AWK relative to Perl. ;-) I think you could improve the readability by defining a variable <code>quote = &quot;\\&quot;&quot;</code> and then having <code>map[quote $1 quote] = quote $2 quote</code> ?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1558880205, "post_id": 56256505, "comment_id": 99237773, "body": "Thanks. I find hard-coding <code>&quot;\\&quot;&quot;</code> more readable especially in some other contexts (I like to stick to one way of doing things like this and <code>\\047</code> vs <code>&#39;</code> vs <code>quote=&quot;&#39;&quot;</code>) such as <code>$0 ~ &quot;\\&quot;foo\\&quot;&quot;</code> vs <code>$0 ~ quote foo quote</code> where I&#39;m not even sure if the latter would be interpreted as <code>($0 ~ quote) foo quote</code> or <code>$0 ~ (quote foo quote)</code> but YMMV I suppose."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1558880821, "post_id": 56256505, "comment_id": 99237914, "body": "Arrgh I got the code wrong, it should be <code>$0 ~ quote &quot;foo&quot; quote</code> (apparently not only do I struggle to read it but I can&#39;t write it either :-) ) but you get the idea."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 758, "user_id": 1586913, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/da7fcb41cc4239d92becd95552bd4d03?s=128&d=identicon&r=PG", "display_name": "Subbeh", "link": "https://stackoverflow.com/users/1586913/subbeh"}, "edited": false, "score": 0, "creation_date": 1558881225, "post_id": 56256505, "comment_id": 99238022, "body": "@Subbeh you&#39;re welcome. I&#39;d be very interested in seeing the timing differences between the awk and perl solutions when run against your real data if you wouldn&#39;t mind updating your question to show them (just run <code>time awk ...</code> and <code>time perl ...</code> to get them but use the 3rd-run timing from each to eliminate cacheing impacts). If you do that then please leave me a comment so I can check it out. Thanks,."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "edited": false, "score": 1, "creation_date": 1558881404, "post_id": 56256505, "comment_id": 99238071, "body": "@AlexHarvey sorry I forgot to tag you in the above comments. Clearly I need some coffee."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 5, "last_activity_date": 1558535967, "last_edit_date": 1558535967, "creation_date": 1558527050, "answer_id": 56256505, "question_id": 56248555, "link": "https://stackoverflow.com/questions/56248555/unix-perl-python-substitute-list-on-big-data-set/56256505#56256505", "title": "Unix/Perl/Python: substitute list on big data set", "body": "<p>You're doing 13,491 <code>gsub()</code>s on every one of your 500,000 input lines - that's almost 7 billion full-line regexp search/replaces total. So yes, that would take some time and it's almost certainly corrupting your data in ways you just haven't noticed as the result of one gsub() gets changed by the next gsub() and/or you get partial replacements!</p>\n\n<p>I saw in a comment that some of your fields can be surrounded by double quotes. If those fields can't contain commas or newlines and assuming you want full string matches then this is how to write it:</p>\n\n<pre><code>$ cat tst.awk\nBEGIN { FS=OFS=\",\" }\nNR==FNR {\n    map[$1] = $2\n    map[\"\\\"\"$1\"\\\"\"] = \"\\\"\"$2\"\\\"\"\n    next\n}\n{\n    for (i=1; i&lt;=NF; i++) {\n        if ($i in map) {\n            $i = map[$i]\n        }\n    }\n    print\n}\n</code></pre>\n\n<p>I tested the above on a mapping file with 13,500 entries and an input file of 500,000 lines with multiple matches on most lines in cygwin on my underpowered laptop and it completed in about 1 second:</p>\n\n<pre><code>$ wc -l mapping.txt\n13500 mapping.txt\n\n$ wc -l file500k\n500000 file500k\n\n$ time awk -f tst.awk mapping.txt file500k &gt; /dev/null\nreal    0m1.138s\nuser    0m1.109s\nsys     0m0.015s\n</code></pre>\n\n<p>If that doesn't do exactly what you want efficiently then please edit your question to provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> and clearer requirements, see <a href=\"https://stackoverflow.com/questions/56248555/unix-perl-python-substitute-list-on-big-data-set#comment99129290_56248555\">my comment under your question</a>.</p>\n"}], "owner": {"reputation": 758, "user_id": 1586913, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/da7fcb41cc4239d92becd95552bd4d03?s=128&d=identicon&r=PG", "display_name": "Subbeh", "link": "https://stackoverflow.com/users/1586913/subbeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 56248763, "answer_count": 4, "score": 6, "last_activity_date": 1569810839, "creation_date": 1558492453, "last_edit_date": 1558511354, "question_id": 56248555, "link": "https://stackoverflow.com/questions/56248555/unix-perl-python-substitute-list-on-big-data-set", "title": "Unix/Perl/Python: substitute list on big data set", "body": "<p>I've got a mapping file of about 13491 key/value pairs which I need to use to replace the key with the value in a data set of about 500000 lines divided over 25 different files.</p>\n\n<p>Example mapping:\n<code>value1,value2</code></p>\n\n<p>Example input: <code>field1,field2,**value1**,field4</code></p>\n\n<p>Example output: <code>field1,field2,**value2**,field4</code></p>\n\n<p>Please note that the value could be in different places on the line with more than 1 occurrence.</p>\n\n<p>My current approach is with AWK:</p>\n\n<p><code>awk -F, 'NR==FNR { a[$1]=$2 ; next } { for (i in a) gsub(i, a[i]); print }' mapping.txt file1.txt &gt; file1_mapped.txt</code></p>\n\n<p>However, this is taking a very long time.</p>\n\n<p>Is there any other way to make this faster? Could use a variety of tools (Unix, AWK, Sed, Perl, Python etc.)</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1558491349, "post_id": 56247194, "comment_id": 99114929, "body": "You can install modules into your own lib folder (e.g.: under your home directory). The <code>local::lib</code> module can be used to manage where things get installed and where Perl looks when <code>use</code>ing a module.  The <a href=\"https://metacpan.org/pod/local::lib#The-bootstrapping-technique\" rel=\"nofollow noreferrer\">bootstrapping technique</a> section of the docs can get you started. Once you&#39;ve followed those instructions to set up a lib dir and modify your environment to point to it, you&#39;ll be able to install modules with <code>cpanm</code> as usual."}], "answers": [{"tags": [], "owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "is_accepted": false, "score": 1, "last_activity_date": 1558491871, "creation_date": 1558491871, "answer_id": 56248500, "question_id": 56247194, "link": "https://stackoverflow.com/questions/56247194/cannot-locate-config-general-pm-perl-module-in-inc/56248500#56248500", "title": "Cannot locate Config/General.pm Perl module in @INC?", "body": "<p>Since you already use <code>cpanm</code>, you may try this approach:</p>\n\n<ol>\n<li>Install all modules with prefix <code>~/perl5</code> </li>\n</ol>\n\n<pre><code>cpanm -L ~/perl5 Config::General\n</code></pre>\n\n<ol start=\"2\">\n<li>Set <code>@INC</code> to includ that when running your program, for example:</li>\n</ol>\n\n<pre><code>perl -I ~/perl5/lib/perl5 test.pl\n</code></pre>\n\n<p>The path looks a bit odd, but that's because cpan distributions may contain something more than a <code>.pm</code> file.</p>\n\n<p>Generally speaking this should work most of the time. :-)</p>\n"}], "owner": {"reputation": 41, "user_id": 5410238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c129d300d89c75e28128b1240660d?s=128&d=identicon&r=PG&f=1", "display_name": "ronhoward", "link": "https://stackoverflow.com/users/5410238/ronhoward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1486, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558491871, "creation_date": 1558478609, "question_id": 56247194, "link": "https://stackoverflow.com/questions/56247194/cannot-locate-config-general-pm-perl-module-in-inc", "title": "Cannot locate Config/General.pm Perl module in @INC?", "body": "<p>I am running a perl script that uses Config::General. However, when I run the script, I get the error:</p>\n\n<pre><code>Can't locate Config/General.pm in @INC (you may need to install the Config::General module) (@INC contains: /Library/Perl/5.18/darwin-thread-multi-2level /Library/Perl/5.18 /Network/Library/Perl/5.18/darwin-thread-multi-2level /Network/Library/Perl/5.18 /Library/Perl/Updates/5.18.2/darwin-thread-multi-2level /Library/Perl/Updates/5.18.2 /System/Library/Perl/5.18/darwin-thread-multi-2level /System/Library/Perl/5.18 /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level /System/Library/Perl/Extras/5.18 .) at test.pl line 6.\nBEGIN failed--compilation aborted at test.pl line 6.\n</code></pre>\n\n<p>When I try to install it myself (using 'cpanm Config::General'), I get:</p>\n\n<pre><code>Can't write to /Library/Perl/5.18 and /usr/local/bin: Installing modules to /Users/../perl5\n</code></pre>\n\n<p>Not sure if I should attempt to try to install as root since this is a work computer? Any other options?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558464985, "post_id": 56244185, "comment_id": 99107977, "body": "I think there&#39;s an error in your example output. There&#39;s no <code>AP</code> in <code>TM:downstream - INC1012090321</code> and <code>re-assigning to myself</code>"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1558465894, "last_edit_date": 1558465894, "creation_date": 1558464482, "answer_id": 56244662, "question_id": 56244185, "link": "https://stackoverflow.com/questions/56244185/perl-skipping-values-in-array/56244662#56244662", "title": "perl Skipping values in array", "body": "<p>Here is one approach using a flag to determine when to extract elements from the order team array:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @team = (\"AP\",\"II\",\"DS\",\"WJ\", \"JK\",\"LC\",\"BJ\") ;\nmy ( $team_regex ) = map {qr /$_/} join \"|\", map {quotemeta} @team;\n\nmy @orderdTeam ;\nmy $filename = shift @ARGV ;\nopen(my $fh, '&lt;', $filename) or die \"Could not open file $filename $!\";\nwhile (my $line = &lt;$fh&gt; ) {\n    if ( $line =~ /^($team_regex)/ ) {\n        push @orderdTeam, $1;\n    }\n}\nclose $fh;\n\nprint \"Ordered: @orderdTeam\\n\";\nmy $extract_flag = 0;\nmy @result;\nmy $end_name;\nfor my $name (reverse @orderdTeam) {\n    if ($name eq \"BJ\") {\n        $extract_flag = 1;\n    }\n    next if $extract_flag == 0; # skip items until we get \"BJ\"\n    if ( $extract_flag == 2 ) {\n        $end_name = $name; # save stop name\n    }\n    last if $extract_flag == 3 &amp;&amp; ($name eq $end_name); # second occurrence of $end_name\n    push @result, $name;\n    $extract_flag = 3 if $extract_flag == 2;\n    $extract_flag = 2 if $extract_flag == 1;\n}\n\nprint \"Result: \", (join \" \", reverse @result), \"\\n\";\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>Ordered: II AP DS LC II AP DS LC WJ DS II LC BJ\nResult: WJ DS II LC BJ\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1558469162, "last_edit_date": 1558469162, "creation_date": 1558464836, "answer_id": 56244742, "question_id": 56244185, "link": "https://stackoverflow.com/questions/56244185/perl-skipping-values-in-array/56244742#56244742", "title": "perl Skipping values in array", "body": "<p>Before I start, note that the initial order for the data you provided is </p>\n\n<pre><code>II AP DS LC II AP DS LC WJ DS II LC BJ\n</code></pre>\n\n<p>rather than</p>\n\n<pre><code>II AP DS LC II AP DS LC WJ DS AP II LC BJ\n</code></pre>\n\n<p>as you claimed.</p>\n\n<hr>\n\n<p>To achieve your goal, I recommend using a different approach than the one you describe. It seems to me that your actual intent is to remove duplicates, and that's what the following solution does:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse List::Util qw( uniq );\n\nmy @team = qw( AP II DS WJ JK LC BJ );\nmy %team = map { $_ =&gt; 1 } @team;\n\nmy @order;\nwhile (&lt;&gt;) {\n   my ($op) = /^(\\w+)/\n      or next;\n\n   $team{$op}\n      or next;\n\n   push @order, $op;\n}\n\nmy @filtered = reverse uniq reverse @order;\nsay \"@filtered\";\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>AP WJ DS II LC BJ\n</code></pre>\n\n<hr>\n\n<p>To do what you actually asked for, just walk back through the array until you find a copy of the second last element, then extract all the elements that follow.</p>\n\n<p>To do that, replace</p>\n\n<pre><code>my @filtered = reverse uniq reverse @order;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my $i = @order - 3;\n--$i while $i &gt;= 0 &amp;&amp; $order[$i] ne $order[-2];\nmy @filtered = @order[$i+1 .. $#order];\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>WJ DS II LC BJ\n</code></pre>\n\n<p>As you can see, the output is different. <code>AP</code> isn't listed because they don't appear between the two instances of <code>LC</code>. So this isn't just a far more complicated approach; it's also far more fragile.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 56244662, "answer_count": 2, "score": 0, "last_activity_date": 1558469162, "creation_date": 1558462409, "question_id": 56244185, "link": "https://stackoverflow.com/questions/56244185/perl-skipping-values-in-array", "title": "perl Skipping values in array", "body": "<p>I have a text file </p>\n\n<pre><code>II : RE: released for CR CHG1001739981 : Urgent for NYK SOD - INC1012082403\nCN: RE: futures  - INC1012083269\nAP: RE: REQ25116618-1: setups - INC1012084465\nDS: RE: access - INC1012084976\nLC: RE: options Grid - INC1012085569\nII: RE: issues - INC1012085587\nVK: RE: FW data - INC1012085827\nNW: RE: spread  - INC1012086027\nAP: RE: Exception Notification - INC1012087025\nVK: RE: Yellow - INC1012087066\nDS: RE: Exception Notification - INC1012087664&lt;/none&gt;\nLC: RE:  - INC1012087915\nCN: RE: [Restricted - Internal] - INC1012088249\nWJ: FW: issue - INC1012088961\ncan i get an inc for this pls\nyou sure can\nCN: User Feedback - INC1012089212\nthank you\nnp\nCN: benchmark - INC1012089691\nDS: NAN Value - INC1012089989\nTM:downstream - INC1012090321\nre-assigning to myself\nII: setup - INC1012090460\nLC: size - INC1012090813\nBJ - help with filter\n**handover mail**\n:)\n</code></pre>\n\n<p>This is how tickets are assigned in this group. Most of the team gets here at 7AM, BJ gets here at 10:30 and the\nhandover to the US is at 11:00. Since BJ just gets in he is often shifted to the top of the queue - he gets the first ticket. \nWhat I have to do is figure out what the order is for the rest of the shift. Usually by hand I remove the people from england who get off work at 11am easter time.<br>\nThen I strip off the test from the remining US people, and put them in horizontal order. </p>\n\n<pre><code>II AP DS LC II AP DS LC WJ DS AP II LC BJ\n</code></pre>\n\n<p>then reverse them </p>\n\n<pre><code> BJ LC II AP DS WJ LC DS AP II LC DS AP II\n</code></pre>\n\n<p>then skipping the BJ, go to the [1] in the list in this case LC, and the go back to where we get \"LC\" again. </p>\n\n<pre><code> BJ LC II AP DS WJ \n</code></pre>\n\n<p>the reverese it again  - and voila you hyave the assignment order for the day. </p>\n\n<pre><code>WJ DS AP II LC BJ\n</code></pre>\n\n<p>Right now I am having trouble stopping priting at the first instance of \"LC\"</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper ;\nmy @team = (\"AP\",\"II\",\"DS\",\"WJ\", \"JK\",\"LC\",\"BJ\") ;\nmy @orderdTeam ;\nmy $begin ;\nmy $rev ;\nmy @rev_orderdTeam  ;\nmy $filename = shift @ARGV ;\nopen(my $fh, '&lt;', $filename) or die \"Could not open file $filename $!\";\nwhile (my $line = &lt;$fh&gt; ) {\n    foreach my $op (@team) {\n        if ($line =~ /$op/) {\n        push (@orderdTeam, $op) ;\n        }\n    }\n\n    }\n\n\nprint \"order ---------&gt; \" . \"@orderdTeam\" . \"\\n\"       ;\n@rev_orderdTeam = reverse(@orderdTeam)              ;\nprint \"reverse order -&gt; \" . \"@rev_orderdTeam\" . \"\\n\"   ;\n\nprint \"The last person to get assigned is $begin\\n\" ;\n\nforeach $rev (@rev_orderdTeam[1 .. $#rev_orderdTeam]) {\n    if (\"$rev_orderdTeam[0]\" eq \"BJ\") {\n           $begin = $rev_orderdTeam[1]\n    }\n    else {\n          $begin = \"$rev_orderdTeam[0]\" ;\n    }\n\n    if ($rev ne \"$begin\") {\n            print \"$rev \" ;\n\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "unicode", "ord"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1558456767, "post_id": 56242507, "comment_id": 99104384, "body": "Try run your script with option <code>-CSDA</code> : i.e. <code>perl -CSDA ord.pl A B C D a b c d \\  \\\\ \u2026 \u2014 \uf028 \u20ac</code>. It works for me."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f2db88ab896af93c51a96ad1f5da07?s=128&d=identicon&r=PG&f=1", "display_name": "David Weeks", "link": "https://stackoverflow.com/users/4695740/david-weeks"}, "edited": false, "score": 0, "creation_date": 1558575219, "post_id": 56242871, "comment_id": 99149896, "body": "Thank you for your help.  As I suspected, ord is not unicode capable.  The non-ord example does return a usable approximation of a keyboard useable code point.  IE: Cntl-U ####.  I&#39;d have to lose the dot, easily enough, were I to use it in reference to common code point parlance.  A two (to four) byte character is still one character, even though it may have more than one byte.  Since ord seems to be limited to a single byte, I call that ascii only, right or wrong.  The docs need to say that, so that a noob like myself doesn&#39;t try to use it with unicode.  The docs do not say that currently."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 41, "user_id": 4695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f2db88ab896af93c51a96ad1f5da07?s=128&d=identicon&r=PG&f=1", "display_name": "David Weeks", "link": "https://stackoverflow.com/users/4695740/david-weeks"}, "edited": false, "score": 0, "creation_date": 1558579451, "post_id": 56242871, "comment_id": 99150606, "body": "@DavidWeeks That&#39;s not accurate. It is perfectly unicode capable. <code>ord(&quot;\\N{SNOWMAN}&quot;)</code> will return the ordinal of the snowman character fine. The problem is you have a misunderstanding of Perl&#39;s string model, or the difference between Unicode and character encodings, or both. An encoded string is still just a string of bytes, and needs to be decoded to be used as a string of characters. This is best done at the edges, such as when reading or writing, or via layers on the handles."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 41, "user_id": 4695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f2db88ab896af93c51a96ad1f5da07?s=128&d=identicon&r=PG&f=1", "display_name": "David Weeks", "link": "https://stackoverflow.com/users/4695740/david-weeks"}, "edited": false, "score": 0, "creation_date": 1558580051, "post_id": 56242871, "comment_id": 99150723, "body": "@DavidWeeks Here is an example. I have two strings: &quot;\\N{U+2603}&quot; and &quot;\\N{U+00E2}\\N{U+0098}\\N{U+0083}&quot;. These strings are both valid series of codepoints and not equal to each other. If you encode the first string to UTF-8, or decode the second one from UTF-8, it will equal the other. The second string is what you get in <code>@ARGV</code> without setting <code>-CA</code>, or from STDIN without a decoding layer, etc. The first string is what you need to do any operations on it as a single unicode character, such as ord(), length(), regex matches, and so on."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 41, "user_id": 4695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f2db88ab896af93c51a96ad1f5da07?s=128&d=identicon&r=PG&f=1", "display_name": "David Weeks", "link": "https://stackoverflow.com/users/4695740/david-weeks"}, "edited": false, "score": 0, "creation_date": 1558580499, "post_id": 56242871, "comment_id": 99150809, "body": "@DavidWeeks I&#39;ll also add that the non-ord example does not in fact print the codepoint, it prints the UTF-16BE encoded bytes, which do not match the codepoint in cases such as <code>\\N{U+20000}</code> like in @ikegami&#39;s example. So your python program will also be wrong in that case. If you want the hex representation of the codepoint, use the first example but with <code>sprintf(&#39;%04X&#39;, ord($decoded))</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558679467, "post_id": 56242871, "comment_id": 99186856, "body": "Re &quot;<i>As I suspected, ord is not unicode capable.</i>&quot;, Completely true and completely false at the same time. <code>ord</code> knows nothing of Unicode; it just returns the first character of the string as its number. However, if the first character of the string is a string of Unicode Code Points, then <code>ord</code> will happily returns its number."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558680084, "post_id": 56242871, "comment_id": 99187114, "body": "Re &quot;<i>The non-ord example does return a usable approximation of a keyboard useable code point.</i>&quot;, Grinnz&#39;s code prints the decimal representation of the number, while that sequence requires the hex representation of the number. I&#39;m not sure why they did that when you asked for hex. You can consult my answer for how to do this."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558707488, "post_id": 56242871, "comment_id": 99201423, "body": "@ikegami Only because it was what the original code did. The requirements and the code are of course in opposition, but it seems we got there in the end."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 4, "last_activity_date": 1558457182, "last_edit_date": 1558457182, "creation_date": 1558456881, "answer_id": 56242871, "question_id": 56242507, "link": "https://stackoverflow.com/questions/56242507/how-to-get-unicode-code-points-in-perl-v5-24/56242871#56242871", "title": "How to get unicode code points in perl v5.24?", "body": "<p>It is not a problem with ord, but with encoding. Input from the commandline will usually be UTF-8 encoded, and ord only takes a single character, not a multi byte string. You can use the <code>-CA</code> switch to decode <code>@ARGV</code> automatically (or <code>-CSA</code> so that STDOUT is also encoded for the terminal), or do it in the script.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Encode;\nforeach my $arg (@ARGV) {\n  my $decoded = decode 'UTF-8', $arg;\n  print $arg . \" is \" . ord($decoded) . \" in code.\\n\";\n}\n</code></pre>\n\n<p>However, your python script is doing something very different, it is returning the hex representation of the string encoded to UTF-16BE, not the decimal ordinals of the unicode characters. You can do this also in Perl.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Encode;\nforeach my $arg (@ARGV) {\n  my $utf16 = encode 'UTF-16BE', decode 'UTF-8', $arg;\n  print $arg . \" is \" . sprintf(\"%vX\", $utf16) . \" in code.\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f2db88ab896af93c51a96ad1f5da07?s=128&d=identicon&r=PG&f=1", "display_name": "David Weeks", "link": "https://stackoverflow.com/users/4695740/david-weeks"}, "edited": false, "score": 0, "creation_date": 1558622027, "post_id": 56243809, "comment_id": 99169416, "body": "Thank you ikegami.  I got a syntax error from &quot;say&quot; in your examples, until I added  <code>use v5.24;</code>  I thought it didn&#39;t matter, I was wrong.  Ah, the life of a noob.  This gets me what I set out to do, which is to determine the code point of an unknown pasted character."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 41, "user_id": 4695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f2db88ab896af93c51a96ad1f5da07?s=128&d=identicon&r=PG&f=1", "display_name": "David Weeks", "link": "https://stackoverflow.com/users/4695740/david-weeks"}, "edited": false, "score": 0, "creation_date": 1558633195, "post_id": 56243809, "comment_id": 99174826, "body": "<code>say</code> requires <code>use feature qw( say );</code> as mentioned in the documentation for <code>say</code>. <code>use v5.24;</code> includes the functionality of <code>use feature qw( say );</code>. We omit the shebang line, <code>use strict;</code> (ALWAYS use), <code>use warnings;</code> (ALWAYS use) and <code>use feature qw( say );</code> (if required) from snippets for brevity."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1558681157, "last_edit_date": 1558681157, "creation_date": 1558460758, "answer_id": 56243809, "question_id": 56242507, "link": "https://stackoverflow.com/questions/56242507/how-to-get-unicode-code-points-in-perl-v5-24/56243809#56243809", "title": "How to get unicode code points in perl v5.24?", "body": "<p>The Perl equivalent of </p>\n\n<pre><code>for ucp_str in unicode(sys.argv[1], 'utf-8'):\n    print ucp_str.encode(\"utf_16_be\").encode(\"hex\")\n</code></pre>\n\n<p>is</p>\n\n<pre><code>use Encode qw( decode encode );\n\nfor my $ucp_str (split(//, decode(\"UTF-8\", $ARGV[0]))) {\n   say unpack(\"H*\", encode(\"UTF-16be\", $ucp_str));\n}\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>$ ./a.py a\u00e9\u20ac\u2660\ud840\udc00\n0061\n00e9\n20ac\n2660\nd840dc00\n\n$ ./a.pl a\u00e9\u20ac\u2660\ud840\udc00\n0061\n00e9\n20ac\n2660\nd840dc00\n</code></pre>\n\n<p>But you asked to output the code points, and that's not what those programs do. For that, you can use the following:</p>\n\n<pre><code>use Encode qw( decode_utf8 );\n\nfor my $ucp_num (unpack('W*', decode_utf8($ARGV[0]))) {\n   say sprintf(\"%04X\", $ucp_num);\n}\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>$ ./a2.pl a\u00e9\u20ac\u2660\ud840\udc00\n0061\n00E9\n20AC\n2660\n20000\n</code></pre>\n\n<hr>\n\n<p>To get the characters of a string as strings:</p>\n\n<ul>\n<li><code>unpack('(a)*', $_)</code></li>\n<li><code>split(//, $_)</code></li>\n</ul>\n\n<p>To get the characters of a string as numbers:</p>\n\n<ul>\n<li><code>unpack('W*', $_)</code></li>\n<li><code>map { ord($_) } split(//, $_))</code></li>\n</ul>\n\n<p>To convert a string of bytes (characters in range 0x00..0xFF) into hex:</p>\n\n<ul>\n<li><code>unpack('H*', $_)</code></li>\n<li><code>join \"\", map { sprintf('%02X', $_) } split(//, $_))</code></li>\n</ul>\n\n<p>Easy way to see the characters of a string as hex for debugging:</p>\n\n<ul>\n<li><code>sprintf(\"%vX\", $_)</code></li>\n</ul>\n"}], "owner": {"reputation": 41, "user_id": 4695740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f2db88ab896af93c51a96ad1f5da07?s=128&d=identicon&r=PG&f=1", "display_name": "David Weeks", "link": "https://stackoverflow.com/users/4695740/david-weeks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1558681157, "creation_date": 1558455433, "question_id": 56242507, "link": "https://stackoverflow.com/questions/56242507/how-to-get-unicode-code-points-in-perl-v5-24", "title": "How to get unicode code points in perl v5.24?", "body": "<p>I want to document the hex unicode code points for strings that are cut and pasted into bash as an argument.  ord does not do this; ord seems to only work within ascii bounds.</p>\n\n<p>Most of what I've found regarding ord, is at least six years old, or older, and no longer relevant, as I am using v5.24 which I've read has unicode support build in.\nIn python it is trivial:</p>\n\n<pre><code>\nfor i in unicode(sys.argv[1], 'utf-8'):\n    print i.encode(\"utf_16_be\").encode(\"hex\")\n</code></pre>\n\n<p>which works from bash.\nI think the problem is with the ord function itself, which does not seem updated for unicode.</p>\n\n<pre><code>\n# ord.pl does not provide the unicode code point for a pasted variable.\nuse strict;\nuse warnings;\n#use charnames (); #nope.\n#use feature 'unicode_strings'; #nope.  Already automatically using as of v5.12.\n#use utf8; #nope.\n#binmode(STDOUT, \":encoding(UTF-8)\"); #nope.\n\nmy $arg = \"\";\n\nforeach $arg  (@ARGV) {\n  print $arg . \" is \" . ord($arg) . \" in code.\\n\";  # seems to me ord is ascii only.\n  #utf8::encode($arg);  #nope.\n  #print unpack(\"H*\", $arg) . \"\\n\";  #nope.\n\n  #printf \"%vX\\n\", $arg;  #nope.\n}\n</code></pre>\n\n<p>which gets:</p>\n\n<pre><code>david@A8DT01:~/bin$ ord.pl A B C D a b c d \\  \\\\ \u2026 \u2014 \uf028 \u20ac\nA is 65 in code.\n41\nB is 66 in code.\n42\nC is 67 in code.\n43\nD is 68 in code.\n44\na is 97 in code.\n61\nb is 98 in code.\n62\nc is 99 in code.\n63\nd is 100 in code.\n64\n  is 32 in code.\n20\n\\ is 92 in code.\n5c\n\u2026 is 226 in code.\nc3a2c280c2a6\n\u2014 is 226 in code.\nc3a2c280c294\n\uf028 is 239 in code.\nc3afc280c2a8\n\u20ac is 226 in code.\nc3a2c282c2ac\ndavid@A8DT01:~/bin$\n</code></pre>\n\n<p>I'd like to get the output I get in python:</p>\n\n<pre><code>david@A8DT01:~/bin$ python code-points.py \"ABCDabcd \\ \u2026 \u2014 \uf028 \u20ac\"\n0041\n0042\n0043\n0044\n0061\n0062\n0063\n0064\n0020\n005c\n0020\n2026\n0020\n2014\n0020\nf028\n0020\n20ac\ndavid@A8DT01:~/bin$\n</code></pre>\n"}, {"tags": ["list", "file", "perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558457555, "post_id": 56242154, "comment_id": 99104780, "body": "Consider <a href=\"https://perldoc.pl/File::Find\" rel=\"nofollow noreferrer\">File::Find</a>, or the nicer CPAN module <a href=\"https://metacpan.org/pod/Path::Iterator::Rule\" rel=\"nofollow noreferrer\">Path::Iterator::Rule</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1558457665, "post_id": 56242154, "comment_id": 99104838, "body": "But then those &quot;files&quot; themselves may be subfolders as well, right?  So you need code to work recursively -- to also go through all subfolders it finds.  This is not as simple while there are very good libraries.  Installed with the system, you&#39;ll find <a href=\"https://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a> .  Another popular one is <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a>, and there are yet others. There are articles around on how to use them effectively, as well."}, {"owner": {"reputation": 13, "user_id": 11534832, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IAAmr7rqxg8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8QLtIKLhNx-6OueL1imuLMiDP6Q/mo/photo.jpg?sz=128", "display_name": "Albert Marcelo Mariani", "link": "https://stackoverflow.com/users/11534832/albert-marcelo-mariani"}, "edited": false, "score": 0, "creation_date": 1558459455, "post_id": 56242154, "comment_id": 99105639, "body": "Can someone show me how to use one of those modules? or guide me to a good article that talks about it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1558486777, "post_id": 56242154, "comment_id": 99114217, "body": "Questions like this come up often. I encourage you to search Stackoverflow -- it&#39;s a skill that will repay every single time you have coding related needs.  For example, search the perl tag for <code>File::Find</code> and <a href=\"https://stackoverflow.com/search?tab=relevance&amp;q=%5bperl%5d%20File%3a%3aFind\">get this</a>, where the first few I clicked on (judged by title) had complete example programs.  Then there&#39;s <a href=\"https://stackoverflow.com/search?q=%5Bperl%5D+File%3A%3AFind%3A%3ARule\">this page</a> on <code>File::Find::Rule</code>.   Then, a perlmonks <a href=\"https://www.perlmonks.org/?node_id=217166\" rel=\"nofollow noreferrer\">guide</a> came up."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1558486964, "post_id": 56242154, "comment_id": 99114255, "body": "Then you got an answer to your specific questions using <code>Path::Iterator::Rule</code>. Also, for that module <a href=\"https://perlmaven.com/finding-files-in-a-directory-using-perl\" rel=\"nofollow noreferrer\">this tutorial</a> came up as well.  That&#39;s hopefully plenty of resources.  And of course let us know if things still aren&#39;t in good shape."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1558487262, "post_id": 56242154, "comment_id": 99114312, "body": "Eventually also have a look at <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 13, "user_id": 11534832, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IAAmr7rqxg8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8QLtIKLhNx-6OueL1imuLMiDP6Q/mo/photo.jpg?sz=128", "display_name": "Albert Marcelo Mariani", "link": "https://stackoverflow.com/users/11534832/albert-marcelo-mariani"}, "edited": false, "score": 0, "creation_date": 1558550052, "post_id": 56245192, "comment_id": 99142383, "body": "@AlbertMarceloMariani Then kindly consider accepting the answer ? (By cllicking on the check mark.)  And see the link in the comment under your question."}, {"owner": {"reputation": 13, "user_id": 11534832, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IAAmr7rqxg8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8QLtIKLhNx-6OueL1imuLMiDP6Q/mo/photo.jpg?sz=128", "display_name": "Albert Marcelo Mariani", "link": "https://stackoverflow.com/users/11534832/albert-marcelo-mariani"}, "edited": false, "score": 0, "creation_date": 1558640701, "post_id": 56245192, "comment_id": 99177891, "body": "No problem. Thank you"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1558467311, "last_edit_date": 1558467311, "creation_date": 1558466839, "answer_id": 56245192, "question_id": 56242154, "link": "https://stackoverflow.com/questions/56242154/how-can-i-change-my-script-to-list-files-on-the-subfolders-too/56245192#56245192", "title": "How can i change my script to list files on the subfolders too?", "body": "<p>Here is an example of iterating recursively using <a href=\"https://metacpan.org/pod/Path::Iterator::Rule\" rel=\"nofollow noreferrer\">Path::Iterator::Rule</a>. Also, <a href=\"https://perldoc.pl/File::stat\" rel=\"nofollow noreferrer\">File::stat</a> is a much simpler interface to stat fields.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Path::Iterator::Rule;\nuse File::Basename;\nuse File::stat;\n\nprint \"Please enter the Directory you want to list : \";\nchomp(my $dir = readline *STDIN);\nprint \"Please enter the minimum size (in bytes) of files you want to list : \";\nchomp(my $sz = readline *STDIN);\n\nmy $rule = Path::Iterator::Rule-&gt;new-&gt;not_dir-&gt;size(\"&gt;=$sz\");\nmy $next = $rule-&gt;iter($dir);\nwhile (defined(my $file = $next-&gt;())) {\n  my $stat = stat $file or die \"Failed to stat $file: $!\";\n  my $mode = $stat-&gt;mode;\n  my $size = $stat-&gt;size;\n  my $basename = basename $file;\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11534832, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IAAmr7rqxg8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8QLtIKLhNx-6OueL1imuLMiDP6Q/mo/photo.jpg?sz=128", "display_name": "Albert Marcelo Mariani", "link": "https://stackoverflow.com/users/11534832/albert-marcelo-mariani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56245192, "answer_count": 1, "score": -1, "last_activity_date": 1558467311, "creation_date": 1558454232, "last_edit_date": 1558454673, "question_id": 56242154, "link": "https://stackoverflow.com/questions/56242154/how-can-i-change-my-script-to-list-files-on-the-subfolders-too", "title": "How can i change my script to list files on the subfolders too?", "body": "<p>I want to change my script to list the files on the subfolders. lets say i choose the folder /lib64 y would like to do the search on the subfolders too\nThanks for your help.</p>\n\n<p>I need help only to list not only the folder given but also the subfolfers</p>\n\n<p>Below my script, working without any problems....</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nsystem(\"clear\");\nmy $dev;\nmy $ino;\nmy $mode;\nmy $nlink;\nmy $uid;\nmy $gid;\nmy $rdev;\nmy $size;\nmy $atime;\nmy $mtime;\nmy $ctime;\nmy $blksize;\nmy $blocks;\nmy $perm;\nmy $tmp1;\nmy $tmp2;\nclear;\n\nprint \" \\n\";\nprint \"Please enter the Directory you want to list : \";\nmy $dir = &lt;STDIN&gt;;\nchomp $dir;\nprint \"Directory selected is ------------&gt; $dir | \\n \\n\";\n\nprint \"Please enter the minimum size (in bytes) of files you want to list \n: \";\nmy $sz = &lt;STDIN&gt;;\nchomp $sz;\nprint \"Minimal size of files (in bytes)-----------------&gt; $sz | \\n \\n\";\nprint \"...........Please wait, preparing the file listing....... \\n \\n\";\n\nsleep 6;\n\nopendir (DIR, $dir ) or die \"Cannot open $dir\";\n\nwhile (my $file = readdir(DIR)) {\n\n($dev,$ino,$mode,$nlink,$uid,$gid,$rdev,$size,\n     $atime,$mtime,$ctime,$blksize,$blocks) = stat(\"$dir/$file\");\n\n\n$perm = sprintf(\"%04o\", $mode &amp; 07777);\n$tmp1 = int(($size/$sz));\n$tmp2 = length($file);\n\n\nif (($tmp1 &gt; $tmp2) &amp;&amp; ($perm =~ /.[^5410]../)) {\n\n    print \"List of files in --&gt; $dir | \";\n    print(\"File Name: -$file- | Size in bytes -$size- \\n\");\n}\n}\n\nclosedir(DIR);\n</code></pre>\n"}, {"tags": ["arrays", "perl", "parentheses"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1558446556, "creation_date": 1558446556, "answer_id": 56239802, "question_id": 56239646, "link": "https://stackoverflow.com/questions/56239646/getting-indices-of-matching-parentheses/56239802#56239802", "title": "Getting indices of matching parentheses", "body": "<p>Push to the stack on the left hand side parenthesis, pop on the right hand side.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy $string = '((((((...)))(((...))))))';\n\nmy @output;\nmy @stack;\n\nmy $pos = 0;\nfor my $char (split //, $string) {\n    if ($char eq '(') {\n        push @stack, $pos;\n    } elsif ($char eq ')') {\n        push @output, [ pop @stack, $pos ];\n    }\n    ++$pos;\n}\nsay \"@$_\" for sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] } @output;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 2, "last_activity_date": 1558459778, "creation_date": 1558459778, "answer_id": 56243581, "question_id": 56239646, "link": "https://stackoverflow.com/questions/56239646/getting-indices-of-matching-parentheses/56243581#56243581", "title": "Getting indices of matching parentheses", "body": "<p>Fun question! The accepted answer is fine, but here's another way to do it, because it's always educational to see another solution.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $string = '((((((...)))(((...))))))';\n\nmy (@out, @match);\n\nwhile ($string =~ m/([()])/g) {\n    my $p = pos($string) - 1;\n    if ($1 eq '(') {\n        push @out, [$p];\n        push @match, $#out;\n    }\n    else {\n        die \"mismatched paren at char $p\\n\"\n            unless @match;\n        $out[pop @match][1] = $p;\n    }\n}\n\nfor (@out) { print \"@$_\\n\" }\n\nexit(0);\n</code></pre>\n\n<p>Output is exactly as per your desired output. Dies on mismatched parentheses (which choroba's code could also do with an appropriate test in the elsif block). Unmatched parentheses result in lines with no second number, and they will also be residual in <code>@match</code> after the while loop.</p>\n\n<p>I've opted to use Perl's pattern matching a little instead of breaking the string into individual characters and iterating over them all. Instead, I match on each open or close parenthesis in turn, using the \"g\" modifier. Thus, the loop only iterates over characters of interest. The <code>pos()</code> function on <code>$string</code> returns the point <em>after</em> the last match, so I need to subtract one to get zero-based output.</p>\n\n<p>The other key difference is that I accumulate in <code>@out</code>, and track the corresponding close by noting the last index of <code>@out</code>, pushing it on <code>@match</code>. I then pop off <code>@match</code> as I find closing parentheses, and add the second element to the sub-array in <code>@out</code> at that position. This eliminates the need for sorting the final result, as <code>@out</code> is already in order of opening parentheses.</p>\n"}], "owner": {"reputation": 555, "user_id": 6369347, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4d81d9af1362e23a5a5c6ae2fda71dc?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Sabir Cheema", "link": "https://stackoverflow.com/users/6369347/ammar-sabir-cheema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 56239802, "answer_count": 2, "score": 3, "last_activity_date": 1558459778, "creation_date": 1558446112, "question_id": 56239646, "link": "https://stackoverflow.com/questions/56239646/getting-indices-of-matching-parentheses", "title": "Getting indices of matching parentheses", "body": "<p>Hi I am trying to print indices of the following pattern of brackets:</p>\n\n<pre><code>((((((...)))(((...))))))\n</code></pre>\n\n<p>as follows:</p>\n\n<pre><code>0 23\n1 22\n2 21\n3 11\n4 10\n5 9\n12 20\n13 19\n14 18\n</code></pre>\n\n<p>I tried to achieve this using this perl code as given below:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $string = '((((((...)))(((...))))))';\nmy @myarray = split('', $string); \nmy @stack;\nmy @stack1;\n\n\n\nwhile (my ($index, $element) = each(@myarray))\n{\n\n   if ($element eq '(')\n   {\n   push(@stack, $index);  \n   }\n\n   if ($element eq ')')\n   {\n   push(@stack1, $index);  \n   }  \n}\n\n\nprint \"$stack[$_]-$stack1[$_]\\n\" for (0 .. $#stack);\n</code></pre>\n\n<p>But the above code is giving me following output which is not the required output:</p>\n\n<pre><code>0-9\n1-10\n2-11\n3-18\n4-19\n5-20\n12-21\n13-22\n14-23\n</code></pre>\n\n<p>Is there any way I can achieve this?</p>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1558436588, "post_id": 56236224, "comment_id": 99092347, "body": "Have a look at <a href=\"https://metacpan.org/pod/Archive::Zip\" rel=\"nofollow noreferrer\">Archive::ZIP</a>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1558448317, "post_id": 56236224, "comment_id": 99099385, "body": "You want to append all the files in the zip archive to a single file? Should there be anything to indicate where one file ends and another starts in the output?"}], "answers": [{"tags": [], "owner": {"reputation": 1323, "user_id": 2030808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRrvi.png?s=128&g=1", "display_name": "pmqs", "link": "https://stackoverflow.com/users/2030808/pmqs"}, "is_accepted": false, "score": 1, "last_activity_date": 1558449321, "creation_date": 1558449321, "answer_id": 56240655, "question_id": 56236224, "link": "https://stackoverflow.com/questions/56236224/how-do-i-unzip-a-zip-archive-and-redirect-the-output-a-specified-file-using-p/56240655#56240655", "title": "How do I unzip a &quot;.zip&quot; archive and redirect the output a specified file using Perl?", "body": "<p>There are a number of options for unzipping in Perl.</p>\n\n<p>First one is to just run the shell command in Perl.</p>\n\n<pre><code>system 'unzip -Z1 myPartial.zip | grep -v \"/$\" &gt;&gt; my.log';\n</code></pre>\n\n<p>Next is use one of the zip modules. There are a few, including <a href=\"https://metacpan.org/pod/Archive::Zip\" rel=\"nofollow noreferrer\">Archive::Zip</a>, <a href=\"https://metacpan.org/pod/IO::Uncompress::Unzip\" rel=\"nofollow noreferrer\">IO::Uncompress::Unzip</a> and <a href=\"https://metacpan.org/pod/Archive::Zip::SimpleZip\" rel=\"nofollow noreferrer\">Archive::Zip::SimpleUnzip</a>.</p>\n\n<p>Whether you need to get into using one of the modules depends on the requirements of what you are doing.</p>\n"}, {"tags": [], "owner": {"reputation": 3548, "user_id": 10415695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ex5vb.jpg?s=128&g=1", "display_name": "LogicalBranch", "link": "https://stackoverflow.com/users/10415695/logicalbranch"}, "is_accepted": false, "score": 0, "last_activity_date": 1558454774, "creation_date": 1558454774, "answer_id": 56242323, "question_id": 56236224, "link": "https://stackoverflow.com/questions/56236224/how-do-i-unzip-a-zip-archive-and-redirect-the-output-a-specified-file-using-p/56242323#56242323", "title": "How do I unzip a &quot;.zip&quot; archive and redirect the output a specified file using Perl?", "body": "<p>You could try running the shell command directly using the <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a> method:</p>\n\n<pre><code>system(\"unzip -Z1 myPartial.zip | grep -v \"/$\" &gt;&gt; my.log\");\n</code></pre>\n\n<p>If you'd like to terminate your script after execution is complete use the <a href=\"https://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\"><code>exec</code></a> method:</p>\n\n<pre><code>exec(\"unzip -Z1 myPartial.zip | grep -v \"/$\" &gt;&gt; my.log\");\n</code></pre>\n\n<p>If you want to handle the program's output directly in PERL, simply use the backticks to execute the command and get it's output:</p>\n\n<pre><code>$response = `unzip -Z1 myPartial.zip | grep -v \"/$\" &gt;&gt; my.log`;\n</code></pre>\n\n<p>You could then use <a href=\"https://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\"><code>print</code></a> to preview the output, like this:</p>\n\n<pre><code>print $response;\n</code></pre>\n\n<p>Good luck.</p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1558461934, "last_edit_date": 1558461934, "creation_date": 1558461015, "answer_id": 56243877, "question_id": 56236224, "link": "https://stackoverflow.com/questions/56236224/how-do-i-unzip-a-zip-archive-and-redirect-the-output-a-specified-file-using-p/56243877#56243877", "title": "How do I unzip a &quot;.zip&quot; archive and redirect the output a specified file using Perl?", "body": "<p>Okay, so <code>unzip -Z1 foo.zip</code> appears to list the <em>filenames</em> of the files in the zip archive, not extract the files. That makes more sense for wanting everything in a single file. And you just want files, not directories.</p>\n\n<p>So a perl one-liner:</p>\n\n<pre><code>perl -MArchive::Zip -E '$, = \"\\n\"; say grep { m![^/]$! } Archive::Zip-&gt;new($ARGV[0])-&gt;memberNames' foo.zip &gt;&gt; my.log\n</code></pre>\n\n<p>But really, it's easier to just use <code>unzip</code>/<code>zipinfo</code> like you already are.</p>\n"}], "owner": {"reputation": 11, "user_id": 11533134, "user_type": "registered", "profile_image": "https://graph.facebook.com/2502484789785433/picture?type=large", "display_name": "Pmand", "link": "https://stackoverflow.com/users/11533134/pmand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1560249846, "creation_date": 1558434277, "last_edit_date": 1560249846, "question_id": 56236224, "link": "https://stackoverflow.com/questions/56236224/how-do-i-unzip-a-zip-archive-and-redirect-the-output-a-specified-file-using-p", "title": "How do I unzip a &quot;.zip&quot; archive and redirect the output a specified file using Perl?", "body": "<p>Lets say I have a zip file called <code>myPartial.zip</code> and I want to unzip this <code>myPartial.zip</code> archive and redirect the output to a file called <code>output.txt</code>.</p>\n\n<p>To achieve that I could use the following shell script:</p>\n\n<pre><code>unzip -Z1 myPartial.zip | grep -v \"/$\" &gt;&gt; my.log\n</code></pre>\n\n<p>My question is how do I do the same in Perl?</p>\n"}, {"tags": ["perl", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "edited": false, "score": 0, "creation_date": 1558440100, "post_id": 56236320, "comment_id": 99094367, "body": "Thanks for the info Dada, unfortunately I have about 900 column names"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "edited": false, "score": 0, "creation_date": 1558440542, "post_id": 56236320, "comment_id": 99094628, "body": "@Chazg76 So what? There is nothing inherently wrong to preparing 900 different insert statements. Well, your database sounds oddly designed, and my first reaction when I see that you need 900 different inserts on different column names is that you need to rethink your database, but who knows, there might there is a good justification.."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 3, "last_activity_date": 1558434542, "creation_date": 1558434542, "answer_id": 56236320, "question_id": 56236091, "link": "https://stackoverflow.com/questions/56236091/perl-dbi-prepare-with-variable-table-column-name/56236320#56236320", "title": "perl dbi prepare with variable table column name", "body": "<p>You can't use dynamic column names with <code>prepare</code> like you are trying to do.</p>\n\n<p>Your column names shouldn't be known to the user, and therefore don't really need to be part of the parameters, since they are not sensitive (and don't need to be protected against SQL injection). Preparing is still useful for performances though.</p>\n\n<p>What I'd suggest is to do a prepare for each of you column name, and store those in a hash:</p>\n\n<pre><code>my @col_names = qw(colname1 colname2);\nmy %inserts;\nfor my $col (@col_names) {\n    $inserts{$col} = $db-&gt;prepare(\"INSERT INTO tablename (ColA, $col) VALUES (?, ?)\");\n}\n...\n$inserts{colname1}-&gt;execute('val1', 'val2');\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 8721281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DKU2.jpg?s=128&g=1", "display_name": "Chazg76", "link": "https://stackoverflow.com/users/8721281/chazg76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 56236320, "answer_count": 1, "score": 1, "last_activity_date": 1558434542, "creation_date": 1558433826, "question_id": 56236091, "link": "https://stackoverflow.com/questions/56236091/perl-dbi-prepare-with-variable-table-column-name", "title": "perl dbi prepare with variable table column name", "body": "<p>I have used the following code many times before when inserting values into database tables using perl</p>\n\n<pre><code>my $SRV='xxx';\nmy $DB='dbname';        \nmy $db = DBI-&gt;connect(\"dbi:Oracle:$SRV/$DB\", \"user\", \"pword\" )  or die \"impossible de se connecter \u00e0 $SRV / $DB\";\n\nmy $insert_T1 = \"INSERT INTO tablename (ColA, ColB) VALUES ( ?, ?) \" ;\nmy $insert_T1_sth = $db-&gt;prepare($insert_T1) ;\n</code></pre>\n\n<p>Later in the code I can then call the following to do the insertion</p>\n\n<pre><code>$insert_T1_sth-&gt;execute('val1','val2');\n$insert_T1_sth-&gt;execute('val3','val4');\n</code></pre>\n\n<p>So basically when I use the prepare function above I can replace the entries I want to insert by question marks and then put the values of these question marks in the execute statements later on.</p>\n\n<p>So to my question: Can I use question marks in place of column names in the prepare statement? I'm thinking no because when I try the following I get a runtime error on the line where the execute statement(s) are.</p>\n\n<pre><code>my $SRV='xxx';\nmy $DB='dbname';        \nmy $db = DBI-&gt;connect(\"dbi:Oracle:$SRV/$DB\", \"user\", \"pword\" )  or die \"impossible de se connecter \u00e0 $SRV / $DB\";\n$db-&gt;{AutoCommit} = 0 ;\n\nmy $insert_T1 = \"INSERT INTO tablename (ColA, ?) VALUES ( ?, ?) \" ;\nmy $insert_T1_sth = $db-&gt;prepare($insert_T1) ;\n</code></pre>\n\n<p>Then later, as before, use</p>\n\n<pre><code>$insert_T1_sth-&gt;execute('colname1','val1','val2');\n$insert_T1_sth-&gt;execute('colname2','val3','val4');\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1558434091, "post_id": 56236070, "comment_id": 99091052, "body": "What is <code>@ret-&gt;[$index]</code> supposed to do?"}, {"owner": {"reputation": 11, "user_id": 11532825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7bd659ea2099ae86d78f52b51a61fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Soujain", "link": "https://stackoverflow.com/users/11532825/soujain"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1558434343, "post_id": 56236070, "comment_id": 99091173, "body": "@ret contains the result set in array"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1558434485, "post_id": 56236070, "comment_id": 99091235, "body": "OK. And then what? To get an element from an array you should use <code>@ret[$index]</code>. If <code>$ret</code> was an array <i>reference</i> you should use <code>$ret-&gt;[$index]</code>. The error message seems pretty clear; with what, exactly, do you need help?"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1558434519, "post_id": 56236070, "comment_id": 99091253, "body": "If <code>@ret</code> is an array you maybe meant <code>$ret[$index]-&gt;[0]</code>? Or is <code>$ret</code> an array ref? Then maybe <code>$ret-&gt;[$index]-&gt;[0]</code>?"}, {"owner": {"reputation": 11, "user_id": 11532825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7bd659ea2099ae86d78f52b51a61fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Soujain", "link": "https://stackoverflow.com/users/11532825/soujain"}, "edited": false, "score": 0, "creation_date": 1558434537, "post_id": 56236070, "comment_id": 99091262, "body": "$sqlsyntax=&quot;exec Stored_Procedure,\\@ErroeCode=&#39;$ErrMsg`&quot;;  @ret = $dbh-&gt;nsql ($sqlsyntax,&quot;ARRAY&quot;);"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1558434647, "post_id": 56236070, "comment_id": 99091325, "body": "@Soujain Please read <a href=\"https://stackoverflow.com/tour\">the tour</a> and <a href=\"https://stackoverflow.com/help/how-to-ask\"><i>How do I ask a good question?</i></a>."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 3, "creation_date": 1558434699, "post_id": 56236070, "comment_id": 99091354, "body": "@Soujain Please don\u2019t just dump code in comments. <a href=\"https://stackoverflow.com/posts/56236070/edit\">Edit</a> the question to include all relevant code."}, {"owner": {"reputation": 11, "user_id": 11532825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7bd659ea2099ae86d78f52b51a61fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Soujain", "link": "https://stackoverflow.com/users/11532825/soujain"}, "edited": false, "score": 0, "creation_date": 1558434717, "post_id": 56236070, "comment_id": 99091369, "body": "$EntityId=@ret-&gt;[$index][0]; $MaturutyDate=@ret-&gt;[$index][9]; As per above lines, It try to form something like below  $EntityId=@ret-&gt;[0][0]; $MaturutyDate=@ret-&gt;[0][9];"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11532825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7bd659ea2099ae86d78f52b51a61fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Soujain", "link": "https://stackoverflow.com/users/11532825/soujain"}, "edited": false, "score": 0, "creation_date": 1558442253, "post_id": 56236689, "comment_id": 99095641, "body": "Yes the code is from legacy system $ret[$index][0] is also not working , We tried with $ret[$index].[0] it doesn&#39;t have any compilation error but still not working"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 11532825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7bd659ea2099ae86d78f52b51a61fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Soujain", "link": "https://stackoverflow.com/users/11532825/soujain"}, "edited": false, "score": 4, "creation_date": 1558443023, "post_id": 56236689, "comment_id": 99096093, "body": "@Soujain: &quot;Also not working&quot; isn&#39;t a very helpful error report. Please explain exactly what happens. What unexpected behaviour do you see? Do you get the wrong answer? Is there an error message? Does your computer explode?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 11532825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7bd659ea2099ae86d78f52b51a61fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Soujain", "link": "https://stackoverflow.com/users/11532825/soujain"}, "edited": false, "score": 3, "creation_date": 1558443097, "post_id": 56236689, "comment_id": 99096132, "body": "@Soujain: <i>&quot;We tried with <code>$ret[$index].[0]</code>&quot;</i> Trying random syntax is not the mark of a careful programmer :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1558461929, "post_id": 56236689, "comment_id": 99106725, "body": "Re &quot;<i>it uses a very old version of Perl syntax</i>&quot;, This was never acceptable syntax. It just happened to work even though it shouldn&#39;t. A bug in Perl (arrays in scalar context are suppose to return the number of element within) made it so a bug in the user&#39;s program (<code>-&gt;</code> that shouldn&#39;t be there) didn&#39;t matter."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1558511481, "last_edit_date": 1558511481, "creation_date": 1558435817, "answer_id": 56236689, "question_id": 56236070, "link": "https://stackoverflow.com/questions/56236070/using-an-array-as-a-reference-is-deprecated-in-perl/56236689#56236689", "title": "using an array as a reference is deprecated in perl", "body": "<p>I'm not sure where you're getting this code from, but it uses a very old version of Perl syntax that you shouldn't have been using for a very long time. [<strong>Update:</strong> As ikegami points out in a comment below, this isn't very old Perl syntax - it's syntax that only worked because of a bug in Perl and which shouldn't have ever been used.]</p>\n\n<pre><code>@ret-&gt;[$index][0]\n</code></pre>\n\n<p>This code uses the fact that an array can (in certain circumstances) be used as an array reference. You should not do this, as there are other (simpler) ways to do the same thing. This syntax is, as you see, deprecated.</p>\n\n<p>Your code should be written as <code>$ret[$index][0]</code>. If you change it to be like this, then the warnings will go away.</p>\n\n<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>This perl is working fine in Solaris but when same is migrated to Linux environment, it is giving this error.</p>\n</blockquote>\n\n<p>I imagine that's because your Solaris system is running a far older version of Perl. What do you get from running <code>perl -v</code> on both of your systems?</p>\n"}], "owner": {"reputation": 11, "user_id": 11532825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7bd659ea2099ae86d78f52b51a61fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Soujain", "link": "https://stackoverflow.com/users/11532825/soujain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1558511481, "creation_date": 1558433753, "last_edit_date": 1558435436, "question_id": 56236070, "link": "https://stackoverflow.com/questions/56236070/using-an-array-as-a-reference-is-deprecated-in-perl", "title": "using an array as a reference is deprecated in perl", "body": "<p>Getting below Error: using an array as a reference is deprecated in perl script at line</p>\n\n<p>Please Suggest, What is wrong in below code.</p>\n\n<pre><code>$sqlsyntax=\"exec Stored_Procedure,\\@ErroeCode='$ErrMsg`\"; \n@ret = $dbh-&gt;nsql ($sqlsyntax,\"ARRAY\");\n\nmy($EntityId,\n$MaturutyDate);\nmy($size,$index,$count);\n$size=scalar @ret;\n$index=0;\n$EntityId=@ret-&gt;[$index][0];\n$MaturutyDate=@ret-&gt;[$index][9];\n</code></pre>\n\n<p>This perl is working fine in Solaris but when same is migrated to Linux environment, it is giving this error.</p>\n\n<p>Getting below Error: using an array as a reference is deprecated in perl script at line</p>\n\n<p>During Compilation it is giving this error, Want to fix this in Linux environment.</p>\n"}, {"tags": ["android", "perl", "kernel"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558476272, "post_id": 56234988, "comment_id": 99112254, "body": "What is checkstack.pl? Where did you get it?"}, {"owner": {"reputation": 9, "user_id": 10959640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce142bf04713195e81b4c530a674a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alreadybye", "link": "https://stackoverflow.com/users/10959640/alreadybye"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558484860, "post_id": 56234988, "comment_id": 99113927, "body": "@Grinnz you can find checkstack.pl <a href=\"https://elixir.bootlin.com/linux/latest/source/scripts/checkstack.pl\" rel=\"nofollow noreferrer\">elixir.bootlin.com/linux/latest/source/scripts/checkstack.pl</a> It is built in tools on linux kernel"}, {"owner": {"reputation": 9, "user_id": 10959640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce142bf04713195e81b4c530a674a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alreadybye", "link": "https://stackoverflow.com/users/10959640/alreadybye"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558516160, "post_id": 56234988, "comment_id": 99123622, "body": "I found a reason why it doesn&#39;t seem to be working correctly."}], "owner": {"reputation": 9, "user_id": 10959640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce142bf04713195e81b4c530a674a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alreadybye", "link": "https://stackoverflow.com/users/10959640/alreadybye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558429969, "creation_date": 1558429969, "question_id": 56234988, "link": "https://stackoverflow.com/questions/56234988/the-checkstack-pl-script-does-not-work-on-android", "title": "The checkstack.pl script does not work on Android", "body": "<p>The checkstack.pl script does not work on Android.</p>\n\n<p>I use Android P-OS.\nand kernel version is msm-4.14</p>\n\n<p>I executed checkstack.pl below command for check kernel stack size.</p>\n\n<pre><code>./aarch64-linux-android-objdump -d vmlinux | ./checkstack.pl aarch64\n</code></pre>\n\n<p>But there's only one line result.\n0xffffff80080a9ec0 sha256_block_data_order [vmlinux]:   128</p>\n\n<p>If I reflect the patch below, I will see no results.\n<a href=\"https://www.fclose.com/linux-kernels/778429/checkstack-pl-fix-for-aarch64-linux-4-9-150/\" rel=\"nofollow noreferrer\">https://www.fclose.com/linux-kernels/778429/checkstack-pl-fix-for-aarch64-linux-4-9-150/</a></p>\n\n<p>**)</p>\n\n<pre><code>\"./aarch64-linux-android-objdump -d vmlinux\" command works correctly.\n\n\nvmlinux:     file format elf64-littleaarch64\n\n\nDisassembly of section .head.text:\n\nffffff8008080000 &lt;_text&gt;:\nffffff8008080000:   91005a4d    add x13, x18, #0x16\nffffff8008080004:   145cbfff    b   ffffff80097b0000 &lt;__init_begin&gt;\n.....\nffffff8008082904 &lt;el0_irq_invalid&gt;:\nffffff8008082904:   a90007e0    stp x0, x1, [sp]\nffffff8008082908:   a9010fe2    stp x2, x3, [sp,#16]\nffffff800808290c:   a90217e4    stp x4, x5, [sp,#32]\nffffff8008082910:   a9031fe6    stp x6, x7, [sp,#48]\n</code></pre>\n\n<p>How can I get checkstack.pl to work on Android?</p>\n"}, {"tags": ["perl", "mojolicious", "mojolicious-lite"], "comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 1, "creation_date": 1558423977, "post_id": 56233174, "comment_id": 99085520, "body": "This is possibly because morbo does not fork, but hypnotoad forks!!"}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 1, "creation_date": 1558424111, "post_id": 56233174, "comment_id": 99085598, "body": "<a href=\"https://github.com/mojolicious/mojo/wiki/Hypnotoad-prefork-web-server#database-connection-problem-in-preforking\" rel=\"nofollow noreferrer\">github.com/mojolicious/mojo/wiki/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": true, "score": 2, "last_activity_date": 1558424426, "creation_date": 1558424426, "answer_id": 56233445, "question_id": 56233174, "link": "https://stackoverflow.com/questions/56233174/hypnotoad-helper-function-in-mojolicious-lite/56233445#56233445", "title": "hypnotoad helper function in mojolicious lite", "body": "<p>You can use DBIx::Connector, like this</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojolicious::Lite;\nuse DBIx::Connector;\n\nhelper connector =&gt; sub { \n    state $db = DBIx::Connector-&gt;new(sprintf('dbi:mysql:host=%s:database=%s',@{  $config-&gt;{mysql_database}}{qw[host db]}),@{$config-&gt;{mysql_database}}{qw[user password]}) or die \"Could not connect\";\n};\n\nhelper mysql =&gt; sub { shift-&gt;connector-&gt;dbh };\n\npost '/login' =&gt; sub {\n    my $c = shift;\n\n    my $user = $c-&gt;param('user_email');\n    my $password = $c-&gt;param('password');\n\n    my $sth = $c-&gt;mysql-&gt;prepare_cached('SELECT * FROM users WHERE user_email = ?') or $c-&gt;app-&gt;log-&gt;debug($DBI::errstr);\n\n    $sth-&gt;execute($user);\n\n    my $row = $sth-&gt;fetchrow_arrayref;\n\n    $sth-&gt;finish;\n\n    ## more code\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 715, "user_id": 5218508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88149bda385492c0f7ce78727dce639?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Lassche", "link": "https://stackoverflow.com/users/5218508/rob-lassche"}, "is_accepted": false, "score": 2, "last_activity_date": 1576774534, "creation_date": 1576774534, "answer_id": 59413975, "question_id": 56233174, "link": "https://stackoverflow.com/questions/56233174/hypnotoad-helper-function-in-mojolicious-lite/59413975#59413975", "title": "hypnotoad helper function in mojolicious lite", "body": "<p>When hypnotoad was running as a daemon (so, forked), then the database connection was lost.</p>\n\n<p>I used the database plugin:</p>\n\n<pre><code>use Mojolicious::Plugin::Database;\n</code></pre>\n\n<p>In the startup:</p>\n\n<pre><code>sub startup {\n  my $self = shift;\n\n  # Load configuration from hash returned by config file\n  my $config = $self-&gt;plugin('Config');\n\n  $self-&gt;plugin( 'database', {\n                     dsn =&gt; $config-&gt;{dsn},\n                     username =&gt; $config-&gt;{user},\n                     password =&gt; $config-&gt;{password},\n                     options =&gt; {\n                        RaiseError =&gt; 0,\n                        mysql_auto_reconnect =&gt; 1,\n                        AutoCommit =&gt; 1,\n                        PrintError         =&gt; 0,\n                        PrintWarn          =&gt; 0,\n                     },\n                     helper =&gt; 'db'\n                });\n}\n</code></pre>\n\n<p>Most important is mysql_auto_reconnect!!! That solved the my issue.</p>\n"}], "owner": {"reputation": 179, "user_id": 5530806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d27003bf675e52583fa0fb5309bfb74?s=128&d=identicon&r=PG&f=1", "display_name": "rx57", "link": "https://stackoverflow.com/users/5530806/rx57"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 56233445, "answer_count": 2, "score": 2, "last_activity_date": 1576774534, "creation_date": 1558423494, "last_edit_date": 1558621365, "question_id": 56233174, "link": "https://stackoverflow.com/questions/56233174/hypnotoad-helper-function-in-mojolicious-lite", "title": "hypnotoad helper function in mojolicious lite", "body": "<p>the Mojolicious::Lite app is working with morbo but not working with hypnotoad.</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\"dbi:mysql:dbname=xxx\", \"uname\", \"pass\",\n    { AutoCommit =&gt;  0, mysql_enable_utf8 =&gt; 1},  )\n    or die \"Couldn't connect to database: \", $DBI::errstr;\n\nhelper db =&gt; sub { $dbh };\n</code></pre>\n\n<pre><code>get '/xxx' =&gt; sub {\n    my $sth = $self-&gt;db-&gt;prepare(\"insert into posts values(?,?,?,?,?,?)\");\n    $sth-&gt;execute('xxx', 'xxx', 'xxx', 'xxx', 'xxx', 'xxx');\n    $sth-&gt;finish();\n    $self-&gt;db-&gt;commit;\n};\n</code></pre>\n\n<p>when run with hypnotoad, rest of the app is working but it is not reading/writing data to/from database. please help me write code that work with hypnotoad</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 1, "creation_date": 1558425453, "post_id": 56232491, "comment_id": 99086204, "body": "SHA1 and SHA256 are not the same,but Digest::SHA contains everything you need, <a href=\"https://metacpan.org/pod/Digest::SHA\" rel=\"nofollow noreferrer\">metacpan.org/pod/Digest::SHA</a>"}, {"owner": {"reputation": 169, "user_id": 4366554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WIjj2.jpg?s=128&g=1", "display_name": "iadvd", "link": "https://stackoverflow.com/users/4366554/iadvd"}, "reply_to_user": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1558426370, "post_id": 56232491, "comment_id": 99086635, "body": "@Pradeep that would be great if my server had the Digest::SHA library, but it is not installed as I mention in the question, neither I can ask to be installed, so I need an alternative (if any)"}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 2, "creation_date": 1558427337, "post_id": 56232491, "comment_id": 99087126, "body": "you can copy <a href=\"https://metacpan.org/pod/Digest::SHA::PurePerl\" rel=\"nofollow noreferrer\">metacpan.org/pod/Digest::SHA::PurePerl</a> no build/compile required"}, {"owner": {"reputation": 169, "user_id": 4366554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WIjj2.jpg?s=128&g=1", "display_name": "iadvd", "link": "https://stackoverflow.com/users/4366554/iadvd"}, "reply_to_user": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1558428502, "post_id": 56232491, "comment_id": 99087758, "body": "@Pradeep thanks, my doubt is copy where? I just have access to the place where I put my scripts, I cannot copy anything to the perl folders (I am not admin), so I just copy it to the same folder where I have my scripts and call it?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1558449919, "post_id": 56232491, "comment_id": 99100443, "body": "Digest::SHA is a core module, so if it is not installed, you should request that a full Perl be installed."}, {"owner": {"reputation": 169, "user_id": 4366554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WIjj2.jpg?s=128&g=1", "display_name": "iadvd", "link": "https://stackoverflow.com/users/4366554/iadvd"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558486301, "post_id": 56232491, "comment_id": 99114131, "body": "@Grinnz I guessed so... then I am lost because that is exactly what I cannot do. It is a very old fashion service provider with strong restrictions. In the past for different reasons we also required something else in the server and the answer was no. Time to change of provider..."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558449702, "post_id": 56235505, "comment_id": 99100295, "body": "Please don&#39;t recommend using an unpacked CPAN tarball directly as code. Only fatpacked scripts can be used this way reliably. Instead one should use local::lib to install it locally (most simply with <code>cpanm -l local Digest::SHA::PurePerl</code>), or <a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow noreferrer\">fatpack</a> the dependency yourself."}, {"owner": {"reputation": 169, "user_id": 4366554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WIjj2.jpg?s=128&g=1", "display_name": "iadvd", "link": "https://stackoverflow.com/users/4366554/iadvd"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558486590, "post_id": 56235505, "comment_id": 99114180, "body": "@Grinnz that is fine if you can access to your account and run code but I just can access to put script files via ftp and modify permissions of files, that is all. So I need (if possible) an alternative existing library or method."}, {"owner": {"reputation": 169, "user_id": 4366554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WIjj2.jpg?s=128&g=1", "display_name": "iadvd", "link": "https://stackoverflow.com/users/4366554/iadvd"}, "edited": false, "score": 1, "creation_date": 1558488650, "post_id": 56235505, "comment_id": 99114494, "body": "@Pradeep your solution worked like a charm. Probably as Grinnz says is not the safest or cleanest but given the strong restrictions I have in my server this has saved my day for my following tests. Thank you very much!"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 169, "user_id": 4366554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WIjj2.jpg?s=128&g=1", "display_name": "iadvd", "link": "https://stackoverflow.com/users/4366554/iadvd"}, "edited": false, "score": 1, "creation_date": 1558502859, "post_id": 56235505, "comment_id": 99117154, "body": "@iadvd Everything I said only requires copying files to the target server, as long as the modules are pure perl (which it is)."}, {"owner": {"reputation": 169, "user_id": 4366554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WIjj2.jpg?s=128&g=1", "display_name": "iadvd", "link": "https://stackoverflow.com/users/4366554/iadvd"}, "edited": false, "score": 0, "creation_date": 1558505798, "post_id": 56235505, "comment_id": 99118243, "body": "@Grinzz ok, sorry by your explanation I thought that it was required to use cpanm or fatpack via command line."}], "tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": true, "score": 2, "last_activity_date": 1558431765, "creation_date": 1558431765, "answer_id": 56235505, "question_id": 56232491, "link": "https://stackoverflow.com/questions/56232491/server-does-not-have-digestsha-hmac-sha256-base64-installed-can-i-use-diges/56235505#56235505", "title": "Server does not have Digest::SHA &#39;hmac_sha256_base64&#39; installed, can I use Digest::HMAC_SHA1 &#39;hmac_sha1&#39; instead?", "body": "<p>Download the tarball for Digest::SHA::PurePerl ( you'll find the download link on this page <a href=\"https://metacpan.org/pod/Digest::SHA::PurePerl\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Digest::SHA::PurePerl</a> )</p>\n\n<p>Create a library folder, something like this</p>\n\n<pre><code>.\n|-- library\n|   `-- Digest\n|       `-- SHA\n|           `-- PurePerl.pm\n`-- your_script.pl\n</code></pre>\n\n<p>your_script.pl looks like this, you can implement similarly:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse lib '.';\nuse lib '/tmp/iadvd/library/';\n\nuse Digest::SHA::PurePerl qw(sha1 sha1_hex);\n\nprint sha1_hex('Pradeep'),\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4366554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WIjj2.jpg?s=128&g=1", "display_name": "iadvd", "link": "https://stackoverflow.com/users/4366554/iadvd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 56235505, "answer_count": 1, "score": 1, "last_activity_date": 1558431765, "creation_date": 1558420957, "last_edit_date": 1592644375, "question_id": 56232491, "link": "https://stackoverflow.com/questions/56232491/server-does-not-have-digestsha-hmac-sha256-base64-installed-can-i-use-diges", "title": "Server does not have Digest::SHA &#39;hmac_sha256_base64&#39; installed, can I use Digest::HMAC_SHA1 &#39;hmac_sha1&#39; instead?", "body": "<p>I am preparing a CGI script that needs to confirm that the body of a incoming post request message, when is converted into a HMAC-SHA256 hash, is exactly the same content that also comes in a header tag of the same incoming message.</p>\n<p>I have been able to confirm using Python that the procedure is as explained above, but when I do the same functionality on a CGI script I cannot match the contents and probably is because I am not using the correct encryption / hashing library.</p>\n<p>My server provider does not have the Digest::SHA library and thus, I can not use the 'hmac_sha256_base64' function. I cannot ask them to install it, I just can use what is already available.</p>\n<p>I have checked the available libraries and there is a Digest::HMAC_SHA1 'hmac_sha1' library / function. So I am doing as follows:</p>\n<pre><code>my $q = CGI-&gt;new;\nmy %headers = map { $_ =&gt; $q-&gt;http($_) } $q-&gt;http();\n\n# below is the secret key, is an example but I am using the good one\nmy $channel_secret=&quot;abcdabcdabcdabcdabcdabcdabcdabcd&quot; \n\n# Incoming request body string\nmy $httpRequestBody = $q-&gt;param( 'POSTDATA' ); \n\n# now, I want to use Digest::SHA hmac_sha256_base64 but this server\n# does not have it so I am using the following one... \n# because I thought it was the equivalent new function to do the same\n# but probably it is not...\nuse Digest::HMAC_SHA1 'hmac_sha1';\nuse MIME::Base64 'encode_base64';\n\n$digest = hmac_sha1($httpRequestBody, $channel_secret);\nmy $signature = encode_base64($digest);\n</code></pre>\n<p>So basically I expect that these two variables contain the same string:</p>\n<pre><code>$headers{'A_EXISTING_TAG_OF_THE_HEADER'} \n$signature\n</code></pre>\n<p>But they are totally different. I suspect that I am not using the correct algorithm.</p>\n<blockquote>\n<p>So my question is:</p>\n<p>If my server provider does not include Digest::SHA 'hmac_sha256_base64' in the available libraries, then what other alternatives do I have to make the same? Is Digest::HMAC_SHA1 'hmac_sha1' the same functionality or not?</p>\n</blockquote>\n"}, {"tags": ["javascript", "perl", "mojolicious"], "comments": [{"owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "edited": false, "score": 1, "creation_date": 1558448424, "post_id": 56231039, "comment_id": 99099448, "body": "Can you show us what you see when you point your browser to <a href=\"http://127.0.0.1:8080/index.js\" rel=\"nofollow noreferrer\">127.0.0.1:8080/index.js</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11348001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c599cad5599beddfb07518a971eef1?s=128&d=identicon&r=PG&f=1", "display_name": "aesbetancourt", "link": "https://stackoverflow.com/users/11348001/aesbetancourt"}, "edited": false, "score": 0, "creation_date": 1558446141, "post_id": 56234126, "comment_id": 99097996, "body": "I tried it in all ways, surely I must be wrong in something, what I could do was place the https address and if it worked."}], "tags": [], "owner": {"reputation": 514, "user_id": 10844371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LSI8M.jpg?s=128&g=1", "display_name": "sergiotarxz", "link": "https://stackoverflow.com/users/10844371/sergiotarxz"}, "is_accepted": true, "score": 3, "last_activity_date": 1558428443, "last_edit_date": 1558428443, "creation_date": 1558427125, "answer_id": 56234126, "question_id": 56231039, "link": "https://stackoverflow.com/questions/56231039/how-to-properly-load-javascript-files-in-mojolicious-perl/56234126#56234126", "title": "How to properly load Javascript files in Mojolicious perl?", "body": "<p>Javascript files must be on the public folder in order to be seen by the browser. (The same for css or anything the browser should fetch directly)</p>\n\n<p>Probably mojolicious is sending the error 404 webpage, this can be the reason because the MIME is text/html.</p>\n"}], "owner": {"reputation": 45, "user_id": 11348001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c599cad5599beddfb07518a971eef1?s=128&d=identicon&r=PG&f=1", "display_name": "aesbetancourt", "link": "https://stackoverflow.com/users/11348001/aesbetancourt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 56234126, "answer_count": 1, "score": 3, "last_activity_date": 1558428443, "creation_date": 1558412639, "question_id": 56231039, "link": "https://stackoverflow.com/questions/56231039/how-to-properly-load-javascript-files-in-mojolicious-perl", "title": "How to properly load Javascript files in Mojolicious perl?", "body": "<p>I am trying to load javascript files to render graphs in the browser using Vis.JS. But it throws me an error when loading the files.</p>\n\n<p>It is important to highlight that I have the necessary js files in the folder of my project.</p>\n\n<pre><code>use Mojolicious::Lite;\n\nget '/' =&gt; 'index';\n\napp-&gt;start;\n__DATA__\n\n@@ index.html.ep\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Echo&lt;/title&gt;\n    %= javascript 'vis.js'\n    %= javascript 'jsgraphs.js'\n    %= stylesheet 'vis.css'\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h2&gt;Weighted DiGraph&lt;/h2&gt;\n    &lt;div id=\"graph\"&gt;&lt;/div&gt;\n    %= javascript 'index.js'\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The script from \u201c<a href=\"http://127.0.0.1:8080/vis.js\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/vis.js</a>\u201d was loaded even though its MIME type (\u201ctext/html\u201d) is not a valid JavaScript MIME type.</p>\n\n<p>Loading failed for the  with source \u201c<a href=\"http://127.0.0.1:8080/vis.js\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/vis.js</a>\u201d. \nThe script from \u201c<a href=\"http://127.0.0.1:8080/jsgraphs.js\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/jsgraphs.js</a>\u201d was loaded even though its MIME type (\u201ctext/html\u201d) is not a valid JavaScript MIME type.</p>\n\n<p>Loading failed for the  with source \u201c<a href=\"http://127.0.0.1:8080/jsgraphs.js\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/jsgraphs.js</a>\u201d.</p>\n\n<p>The script from \u201c<a href=\"http://127.0.0.1:8080/index.js\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/index.js</a>\u201d was loaded even though its MIME type (\u201ctext/html\u201d) is not a valid JavaScript MIME type</p>\n\n<p>Loading failed for the  with source \u201c<a href=\"http://127.0.0.1:8080/index.js\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/index.js</a>\u201d.</p>\n\n<p>\u200b</p>\n"}, {"tags": ["perl", "textwrangler"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1558406749, "post_id": 56230420, "comment_id": 99080535, "body": "Show the relevant part of the file?"}, {"owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "edited": false, "score": 4, "creation_date": 1558407378, "post_id": 56230420, "comment_id": 99080626, "body": "I had something similar recently, turns out I had pasted the code from another text editor and got some invisible special character (page break) in there. I deleted the problem section and re-typed it and it was fine."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1558409940, "post_id": 56230420, "comment_id": 99081053, "body": "You need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with the code in the body of your question. Screenshots don&#39;t help."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1558426692, "post_id": 56230420, "comment_id": 99086780, "body": "Please don&#39;t post images of text. We can&#39;t copy and paste images of text."}, {"owner": {"reputation": 1901, "user_id": 5389320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ErlB0.jpg?s=128&g=1", "display_name": "Cam_Aust", "link": "https://stackoverflow.com/users/5389320/cam-aust"}, "edited": false, "score": 0, "creation_date": 1559035066, "post_id": 56230420, "comment_id": 99283167, "body": "Stephane good attempt at using this site. Do seek to respond to the comments by Dave Cross and Shawn above. It will be appreciated and help you benefit from this site in future. I up voted your question as I think the issue you raise is worthy, and I acknowledge your new to posting questions. Encouragement I hope."}, {"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 0, "creation_date": 1560370698, "post_id": 56230420, "comment_id": 99718678, "body": "Please add code, errors and data as <b>text</b> (<a href=\"//stackoverflow.com/editing-help#code\">using code formatting</a>), not images. Images: A) don&#39;t allow us to copy-&amp;-paste the code/errors/data for testing; B) don&#39;t permit searching based on the code/error/data contents; and <a href=\"//meta.stackoverflow.com/a/285557\">many more reasons</a>. In general, code/errors/data in text format &gt;&gt;&gt;&gt; code/errors/data as an image &gt;&gt; nothing.  Images should only be used, <i>in addition to text in code format</i>, if having the image adds something significant that is not conveyed by just the text code/error/data."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558461515, "post_id": 56231670, "comment_id": 99106554, "body": "Answer edited.."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1558461237, "last_edit_date": 1558461237, "creation_date": 1558416841, "answer_id": 56231670, "question_id": 56230420, "link": "https://stackoverflow.com/questions/56230420/why-is-the-semicolon-unrecognized-when-running-this-perl-script/56231670#56231670", "title": "Why is the semicolon unrecognized when running this perl script?", "body": "<p>It's not complaining about the semi-colon (which is 3B), it's complaining about a byte with value C2 after it. That's not legal ASCII (which is expected if you don't use <code>use utf8;</code>) though it might be the start of a legal UTF-8 sequence (which is expected if you do use <code>use utf8;</code>)</p>\n\n<p>You don't see it in the terminal or in the editor either because it's also junk to them, or because they expect UTF-8 and it's (the start of) some kind whitespace or unprintable UTF-8 character.</p>\n\n<p>It's likely a U+00A0 NO-BREAK SPACE, which UTF-8 encodes to C2 A0. This would appear as a normal space in a terminals and editors that expects UTF-8.</p>\n\n<p>Retype the line to replace the NBSP with a normal space, or add <code>use utf8;</code> to have Perl to treat the source code as UTF-8.</p>\n"}], "owner": {"reputation": 29, "user_id": 10722980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d9600d0a6528309bbff7ee10c7bffb?s=128&d=identicon&r=PG&f=1", "display_name": "stephane", "link": "https://stackoverflow.com/users/10722980/stephane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "closed_date": 1560372644, "accepted_answer_id": 56231670, "answer_count": 1, "score": -2, "last_activity_date": 1558461237, "creation_date": 1558406529, "last_edit_date": 1558418300, "question_id": 56230420, "link": "https://stackoverflow.com/questions/56230420/why-is-the-semicolon-unrecognized-when-running-this-perl-script", "closed_reason": "Not suitable for this site", "title": "Why is the semicolon unrecognized when running this perl script?", "body": "<p>Code from text editor</p>\n\n<p><a href=\"https://i.stack.imgur.com/XR5PK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XR5PK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Terminal Error. </p>\n\n<p><a href=\"https://i.stack.imgur.com/DnXE4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DnXE4.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm trying to set up Moss(stanford plagarism checker for CS), and when I run the script an error not recognizing semicolon in the script comes up?.</p>\n\n<p>This is being run on Mac OSX using textwrangler as the text editor.</p>\n\n<blockquote>\n  <p>Unrecognized character \\xC2; marked by &lt;-- HERE after t_l = \"c\";&lt;--\n  HERE near column 14 at ./moss.pl line 173.</p>\n</blockquote>\n"}, {"tags": ["perl", "frequency-distribution"], "comments": [{"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1558382111, "post_id": 56227290, "comment_id": 99075064, "body": "You might want to check out this article on Perl Maven, explaining how to write a script to produce word frequencies.  <a href=\"https://perlmaven.com/count-words-in-text-using-perl\" rel=\"nofollow noreferrer\">perlmaven.com/count-words-in-text-using-perl</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1558383059, "post_id": 56227290, "comment_id": 99075410, "body": "What&#39;s the actual error message?"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 1, "creation_date": 1562958127, "post_id": 56227290, "comment_id": 100557792, "body": "Possible duplicate of <i><a href=\"https://stackoverflow.com/questions/660624/why-doesnt-my-perl-one-liner-work-on-windows\">Why doesn&#39;t my Perl one-liner work on Windows?</a></i>"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1558386723, "post_id": 56227616, "comment_id": 99076686, "body": "Will escaping the quotes work? If not, the <code>qq{}</code> syntax offers a workaround  (<code>print qq[$h{$w}\\t$w]</code>) ."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1558390175, "post_id": 56227616, "comment_id": 99077641, "body": "@mob, I tried it on a Windows and it worked, but I&#39;m not sure it works in every situation though. Gonna edit your <code>qq{}</code> suggestion in ;)"}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 5, "last_activity_date": 1558422917, "last_edit_date": 1558422917, "creation_date": 1558383400, "answer_id": 56227616, "question_id": 56227290, "link": "https://stackoverflow.com/questions/56227290/unexpected-character-when-running-one-liner-on-windows/56227616#56227616", "title": "Unexpected character when running one-liner on Windows", "body": "<p>You are probably using Windows. You therefore need to use doubles quotes <code>\"</code> instead of singles quotes <code>'</code> around your code:</p>\n\n<pre><code>perl -lane \"$h{$_}++ for @F; END{for $w (sort {$h{$b}&lt;=&gt;$h{$a} || $a cmp $b} keys %h) {print qq($h{$w}\\t$w)}}\" file &gt; freq\n</code></pre>\n\n<p>Also, note how I used <code>qq()</code> instead of <code>\"...\"</code> within the code, as suggested by @mob. Another option is to escape the quotes with <code>\\\"</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 11529997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e19b944173c521a0353c70d62ebaef1?s=128&d=identicon&r=PG&f=1", "display_name": "pedmacedo", "link": "https://stackoverflow.com/users/11529997/pedmacedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 56227616, "answer_count": 1, "score": 0, "last_activity_date": 1558573963, "creation_date": 1558381767, "last_edit_date": 1558573963, "question_id": 56227290, "link": "https://stackoverflow.com/questions/56227290/unexpected-character-when-running-one-liner-on-windows", "title": "Unexpected character when running one-liner on Windows", "body": "<p>I want to generate an output file that shows the frequency of each word inside an input file. After some search, I found that Perl is the ideal language for this problem, but I don't know this language.</p>\n\n<p>After some more search, I found the following code here at stackoverflow, supposedly it provides the solution I want at great efficiency:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>perl -lane '$h{$_}++ for @F; END{for $w (sort {$h{$b}&lt;=&gt;$h{$a} || $a cmp $b} keys %h) {print \"$h{$w}\\t$w\"}}' file &gt; freq\n</code></pre>\n\n<p>I tried running this command line using the form below:</p>\n\n<pre><code>perl -lane 'code' input.txt &gt; output.txt\n</code></pre>\n\n<p>The execution halts due to an unexpected '>' (the one at '&lt;=>'). I did some research but can't understand what is wrong.\nCould some one enlight me? Thanks!</p>\n\n<p>Here is the topic from where I got the code:\n<a href=\"https://stackoverflow.com/questions/4888879/elegant-ways-to-count-the-frequency-of-words-in-a-file\">Elegant ways to count the frequency of words in a file</a></p>\n\n<p>If it's relevant, my words use letters and numbers and are separated by a single white space.</p>\n"}, {"tags": ["perl", "promise", "mojolicious", "mojo-useragent"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1558377779, "last_edit_date": 1558377779, "creation_date": 1558370409, "answer_id": 56225018, "question_id": 56224240, "link": "https://stackoverflow.com/questions/56224240/how-to-assign-promise-returned-from-get-p-to-a-variable/56225018#56225018", "title": "How to assign promise returned from get_p to a variable?", "body": "<p>All active connections created by a UA object are closed when the UA object is destroyed. The promise doesn't reference the UA object, so you must ensure the UA object doesn't get destroyed.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\nuse utf8;\nuse 5.024;\n\nuse Mojo::IOLoop;\nuse Mojo::UserAgent;\n\nmy $ua = Mojo::UserAgent-&gt;new;\n\nmy $promise = $ua-&gt;get_p('http://example.com');\n$promise-&gt;then(sub {\n    my $tx = shift;\n    warn 'Using variable';\n    warn $tx-&gt;result-&gt;body;\n})-&gt;wait;\n\n$ua-&gt;get_p('http://example.com')\n-&gt;then(sub {\n    my $tx = shift;\n    warn 'Not using variable';\n    warn $tx-&gt;result-&gt;body;\n})-&gt;wait;\n</code></pre>\n\n<p>Since Perl uses reference counting for garbage collection, one couldn't be faulted for believing that objects are destroyed as soon as nothing references them. In reality, an object can survive until the end of the statement in which it became unreferenced. (This is a side-effect of the mechanism used to compensate for the stack's references not being counted.)</p>\n\n<p>Your test worked when you only used a single statement because the UA object survived until the end of the statement, and thus after <code>wait</code> returned.</p>\n"}], "owner": {"reputation": 2486, "user_id": 2255594, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vrBrq.jpg?s=128&g=1", "display_name": "Geraint Anderson", "link": "https://stackoverflow.com/users/2255594/geraint-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 2, "accepted_answer_id": 56225018, "answer_count": 1, "score": 4, "last_activity_date": 1558404421, "creation_date": 1558367002, "last_edit_date": 1558404421, "question_id": 56224240, "link": "https://stackoverflow.com/questions/56224240/how-to-assign-promise-returned-from-get-p-to-a-variable", "title": "How to assign promise returned from get_p to a variable?", "body": "<p>I tried to return a promise from a subroutine which contained some data obtained from a HTTP request to a web server. But I couldn't call <code>then</code> on the result. Having narrowed it down, it doesn't seem possible to assign the promise returned from <code>get_p</code> to a variable and then use it as a promise.</p>\n\n<p>Here's an example. I would have thought that the two requests are exactly the same, but only the second one runs the code in the then block.</p>\n\n<p>Can someone please explain what the difference is, and how I should return a promise from a subroutine if I want to chain more <code>then</code> methods outside the sub?</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\nuse utf8;\nuse 5.024;\n\nuse Data::Dumper;\nuse Mojo::IOLoop;\nuse Mojo::UserAgent;\n\nmy $promise = Mojo::UserAgent-&gt;new-&gt;get_p('http://example.com');\n$promise-&gt;then(sub {\n    my $tx = shift;\n    warn 'Using variable';\n    warn $tx-&gt;result-&gt;body;\n})-&gt;wait;\n\nMojo::UserAgent-&gt;new-&gt;get_p('http://example.com')\n-&gt;then(sub {\n    my $tx = shift;\n    warn 'Not using variable';\n    warn $tx-&gt;result-&gt;body;\n})-&gt;wait;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1558364660, "post_id": 56223265, "comment_id": 99067849, "body": "Have you tried string comparison <a href=\"https://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\"><code>eq</code></a>?"}, {"owner": {"reputation": 189, "user_id": 6854983, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10155211828014027/picture?type=large", "display_name": "aminards", "link": "https://stackoverflow.com/users/6854983/aminards"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1558365696, "post_id": 56223265, "comment_id": 99068440, "body": "@H&#229;konH&#230;gland Yes, I did try string comparison (eq).  It unfortunately didn&#39;t capture the zero values."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1558367282, "post_id": 56223265, "comment_id": 99069280, "body": "I wonder if <code>int(&#39;0.0&#39;) eq &#39;0&#39;</code> is relevant here.  But be careful with <code>int(undef)</code> and <code>int(\\z)</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558387547, "post_id": 56223265, "comment_id": 99076942, "body": "You could also use <code>no warnings &#39;numeric&#39;;</code> in a limited scope if you are sure you want non-numeric data to be truncated to a number or treated as 0."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 6854983, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10155211828014027/picture?type=large", "display_name": "aminards", "link": "https://stackoverflow.com/users/6854983/aminards"}, "edited": false, "score": 1, "creation_date": 1558375297, "post_id": 56224038, "comment_id": 99072575, "body": "I ended up using the Scalar::Util looks_like_number() version and it works perfectly for me.  Thank you.  I wish I could mark two answers as &#39;correct&#39;."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1558367346, "last_edit_date": 1558367346, "creation_date": 1558366253, "answer_id": 56224038, "question_id": 56223265, "link": "https://stackoverflow.com/questions/56223265/how-can-i-avoid-warnings-when-checking-element-in-array-for-numeric-equivalency/56224038#56224038", "title": "How can I avoid warnings when checking element in array for numeric equivalency to zero even though some elements are character strings?", "body": "<p>You could use <code>looks_like_number()</code> (from <a href=\"https://metacpan.org/pod/Scalar::Util\" rel=\"nofollow noreferrer\">Scalar::Util</a>):</p>\n\n<pre><code>use Scalar::Util 'looks_like_number';\n\nif (looks_like_number($aoa[$i][$j]) and $aoa[$i][$j] == '0'){\n    next;\n}\n</code></pre>\n\n<p>Or something like this:</p>\n\n<pre><code># If the value has a length and is false, then it\n# must be 0 or 0.0.\nif (length($aoa[$i][$j]) and ! $aoa[$i][$j]) {\n    next;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 6854983, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10155211828014027/picture?type=large", "display_name": "aminards", "link": "https://stackoverflow.com/users/6854983/aminards"}, "edited": false, "score": 0, "creation_date": 1558375222, "post_id": 56224072, "comment_id": 99072536, "body": "I am going to mark this answer as the accepted answer only because of the considerations for the &#39;type&#39; of zero.  I think both this answer and @Dave Cross&#39;s answer are both perfect answers though."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": true, "score": 3, "last_activity_date": 1558366354, "creation_date": 1558366354, "answer_id": 56224072, "question_id": 56223265, "link": "https://stackoverflow.com/questions/56223265/how-can-i-avoid-warnings-when-checking-element-in-array-for-numeric-equivalency/56224072#56224072", "title": "How can I avoid warnings when checking element in array for numeric equivalency to zero even though some elements are character strings?", "body": "<p>As always, there are several ways to do it. If none of your elements are <code>undef</code>, then you can test for falseness and <code>ne ''</code>, as in <code>if (!$x &amp;&amp; $x ne '') {}</code> (using $x for brevity). That won't catch certain expressions of zero, such as \"0E0\" or \"0 but true\". If those matter to you, then another approach is to use the <code>looks_like_number()</code> function from the standard <code>Scalar::Util</code> module. That way you can say <code>if (looks_like_number($x) &amp;&amp; $x == 0) {}</code> without fear of warnings. You could also simply say <code>if ($x eq '0') {}</code> if you're sure that your zeros are in normal form, because it's valid to do a string comparison against a number (but not vice versa).</p>\n\n<p>Good for you wanting to eliminate warnings, by the way.</p>\n"}], "owner": {"reputation": 189, "user_id": 6854983, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10155211828014027/picture?type=large", "display_name": "aminards", "link": "https://stackoverflow.com/users/6854983/aminards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 56224072, "answer_count": 2, "score": 3, "last_activity_date": 1558367346, "creation_date": 1558363302, "question_id": 56223265, "link": "https://stackoverflow.com/questions/56223265/how-can-i-avoid-warnings-when-checking-element-in-array-for-numeric-equivalency", "title": "How can I avoid warnings when checking element in array for numeric equivalency to zero even though some elements are character strings?", "body": "<p>I would like to not get the warning that the value being checked isn't numeric in numeric eq (==) when checking for the number zero in an array of arrays that includes character string elements and numeric elements.  </p>\n\n<p>I am working with an array of arrays (aoa) in Perl.  Some elements in the aoa are character strings and some are numeric.  I need to check if the element $aoa[$i][$j] is the number zero.  I am using this code.   </p>\n\n<pre><code>if($aoa[$i][$j] == '0'){\n    next;\n}\n</code></pre>\n\n<p>This produces tons of warnings (one for each check on a character element - my data has several hundred thousand elements to check) that the \"argument isn't numeric in numeric eq (==)\".<br>\nI want to not see these warnings.  Other than specifically suppress this warning at this point in my code, can I do my check any differently such that it will not produce these warnings at this step?  </p>\n\n<p>This isn't so much to make my code work better for my task, it is simply to stop getting a ton of warnings that make you think something isn't working correctly in the code.  When you tell someone, \"oh, don't worry about all those warnings - it is working fine\" some people tend to not believe you!</p>\n"}, {"tags": ["json", "perl", "sorting"], "comments": [{"owner": {"reputation": 2630, "user_id": 1983197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwjpR.png?s=128&g=1", "display_name": "LordWilmore", "link": "https://stackoverflow.com/users/1983197/lordwilmore"}, "edited": false, "score": 0, "creation_date": 1558360701, "post_id": 56222318, "comment_id": 99065523, "body": "What exactly is your problem?  What have you tried?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1558362900, "creation_date": 1558362900, "answer_id": 56223144, "question_id": 56222318, "link": "https://stackoverflow.com/questions/56222318/json-sort-by-specific-value-perl/56223144#56223144", "title": "JSON sort by specific value - PERL", "body": "<p><code>-&gt;sort_by</code> is used to control the order of the elements of hashes. </p>\n\n<p>You want to control the order of the elements of an array.</p>\n\n<p>There's no equivalent mechanism to <code>-&gt;sort_by</code> for arrays because there's no need for one. While you can't naturally control the order in which a hash returns its elements, you can naturally control the order in which an array returns its elements.</p>\n\n<pre><code>my $data = [ ... ];\n@$data = sort { $a-&gt;{id} &lt;=&gt; $b-&gt;{id} } @$data;\nprint $json-&gt;encode($data);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11528497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e876331b85dd04ea37363db0ab14d59?s=128&d=identicon&r=PG&f=1", "display_name": "user11528497", "link": "https://stackoverflow.com/users/11528497/user11528497"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 56223144, "answer_count": 1, "score": 0, "last_activity_date": 1558472148, "creation_date": 1558360099, "last_edit_date": 1558472148, "question_id": 56222318, "link": "https://stackoverflow.com/questions/56222318/json-sort-by-specific-value-perl", "title": "JSON sort by specific value - PERL", "body": "<p>i have this example code</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse JSON::PP qw( );\nuse Data::Dumper qw (Dumper);\n\n\nmy $json = JSON::PP-&gt;new()-&gt;pretty-&gt;utf8;       # lesbares JSON | Sort numerically\nmy %ORDER = (id =&gt; 1, name =&gt; 2);\n\n $json-&gt;sort_by(sub {\n    ($ORDER{$JSON::PP::a} // 999) &lt;=&gt; ($ORDER{$JSON::PP::b} // 999)\n    or $JSON::PP::a cmp $JSON::PP::b\n});\n\nprint $json-&gt;encode(\n[\n    {name =&gt; 'ABS700', id =&gt; 0, data =&gt; [\n            {\n                dmsg =&gt; 's4F038300', state =&gt; 'T: 3.3', user =&gt; 'SD_Protocol'\n            }\n        ]\n    },\n    {name =&gt; 'GT-WT-02', id =&gt; 0, data =&gt; [\n      {\n                dmsg =&gt; 's5410AC5F9800', state =&gt; 'T: 17.2 H: 47', user =&gt; 'Ralf9'\n      }\n    ]\n    },\n    {name =&gt; 'NEU', id =&gt; 99, data =&gt; [\n      {\n                dmsg =&gt; 's5410AC5F9800', state =&gt; 'T: 17.2 H: 47', user =&gt; 'NEUER'\n      }\n    ]\n    },\n    {name =&gt; 'Ventus W132', id =&gt; 4, data =&gt; [\n      {\n                dmsg =&gt; 'sD66EE1603000', user1 =&gt; 'dirigent', comment =&gt; 'wind',\n                readings =&gt; [{ state =&gt; 'windGuest: 1.2 winddir:0' }]\n      }\n    ]\n    },\n],\n);\n</code></pre>\n\n<p>I would like to sort this, that the value with the \"id => 99\" appears at the end.</p>\n\n<p>I could sort all internal values \u200b\u200barbitrarily but I need the new outer sorting.</p>\n\n<p>How do I solve this problem?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1558387693, "post_id": 56221681, "comment_id": 99076979, "body": "Additionally, in real code the string will probably come from outside the source code, so you will likely need to decode it from UTF-8 either after reading or using a <code>:encoding(UTF-8)</code> layer when reading."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 1, "last_activity_date": 1558357729, "creation_date": 1558357729, "answer_id": 56221681, "question_id": 56221545, "link": "https://stackoverflow.com/questions/56221545/regex-match-all-word-characters-with-umlauts-from-different-languages/56221681#56221681", "title": "RegEx match all word characters, with umlauts from different languages", "body": "<p>You need to tell Perl that the source code of your file is in utf8. Add</p>\n\n<pre><code>use utf8;\n</code></pre>\n\n<p>After </p>\n\n<pre><code>use strict;\n</code></pre>\n"}], "owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1558477343, "accepted_answer_id": 56221681, "answer_count": 1, "score": 1, "last_activity_date": 1558357729, "creation_date": 1558357222, "question_id": 56221545, "link": "https://stackoverflow.com/questions/56221545/regex-match-all-word-characters-with-umlauts-from-different-languages", "closed_reason": "Duplicate", "title": "RegEx match all word characters, with umlauts from different languages", "body": "<p>I want to check if a person's name is valid.\nIt should check latin letters, also with umlauts (i.e. \u00f6\u00e4\u00fc\u00d6\u00c4\u00dc\u00e9).</p>\n\n<p>unfortunately nothing i've tried works.</p>\n\n<p>regarding many sources (following some links), </p>\n\n<p><a href=\"https://www.regular-expressions.info/unicode.html\" rel=\"nofollow noreferrer\">https://www.regular-expressions.info/unicode.html</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12626208/regex-for-word-characters-in-any-language\">Regex for word characters in any language</a></p>\n\n<p><code>\\p{L}</code> should work, but it doesn't works for me.\nDo i have to <code>use</code> a library for this?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $test = \"testString\";\nprint $1 if ($test =~ m/^(\\p{L}+)$/);   #testString\n$test = \"testString\u00f6\";\nprint $1 if ($test =~ m/^(\\p{L}+)$/);   #no print msg\n$test = \"test\u00e9String\";\nprint $1 if ($test =~ m/^(\\p{L}+)$/);   #no print msg\n</code></pre>\n"}, {"tags": ["perl", "text", "awk", "sed", "replace"], "answers": [{"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558358639, "post_id": 56218616, "comment_id": 99064261, "body": "You don&#39;t need <code>if ($i ~ &#47;[,]&#47;)</code> - the <code>gsub(&#47;[,]&#47;...)</code> just won&#39;t do anything if there&#39;s no match for <code>[,]</code>. Also that will delete empty fields - you should use <code>*</code>s instead of <code>+</code>s in the <code>FPAT</code> setting."}], "tags": [], "owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "is_accepted": true, "score": 3, "last_activity_date": 1558346694, "creation_date": 1558346694, "answer_id": 56218616, "question_id": 56218499, "link": "https://stackoverflow.com/questions/56218499/sed-replace-comma-after-first-regex-match/56218616#56218616", "title": "sed - Replace comma after first regex match", "body": "<p>CSV files should be parsed in <code>awk</code> with a proper <code>FPAT</code> variable that defines what constitutes a valid <em>field</em> in such a file. Once you do that, you can just iterate over the fields to do the substitution you need</p>\n\n<pre><code>gawk 'BEGIN { FPAT = \"([^,]+)|(\\\"[^\\\"]+\\\")\"; OFS=\",\" } \n       { for(i=1; i&lt;=NF;i++) if ($i ~ /[,]/) gsub(/[,]/,\".\",$i);}1' file\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/a/43478468/5291015\">this answer of mine</a> to understand how to define and parse CSV file content with <code>FPAT</code> variable. Also see <a href=\"https://stackoverflow.com/q/16529716/5291015\">Save modifications in place with awk</a> to do in-place file modifications like <code>sed -i''</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 1, "creation_date": 1558348003, "post_id": 56218937, "comment_id": 99058386, "body": "Why don&#39;t you define <code>OFS=&quot;,&quot;</code> in the first awk? With your current solution, you will destroy all spaces which could be located in strings."}, {"owner": {"reputation": 72, "user_id": 9337378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d50e2d799706ec8d04e0c63e5cede9f?s=128&d=identicon&r=PG&f=1", "display_name": "Skeptic Biped", "link": "https://stackoverflow.com/users/9337378/skeptic-biped"}, "reply_to_user": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1558348329, "post_id": 56218937, "comment_id": 99058572, "body": "I wanted to keep it clean and simple. Also, I assumed no white spaces other than the field separators."}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1558348443, "post_id": 56218937, "comment_id": 99058649, "body": "But if you would define <code>OFS</code> directly, you get rid of a single command: <code>awk &#39;{print $1,$2,$3,$4&quot;.&quot;$5,$6,$7}&#39; FS=&quot;,&quot; OFS=&quot;,&quot; file</code>"}, {"owner": {"reputation": 72, "user_id": 9337378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d50e2d799706ec8d04e0c63e5cede9f?s=128&d=identicon&r=PG&f=1", "display_name": "Skeptic Biped", "link": "https://stackoverflow.com/users/9337378/skeptic-biped"}, "reply_to_user": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1558348632, "post_id": 56218937, "comment_id": 99058761, "body": "Well, you can do that too! Thanks for your input."}], "tags": [], "owner": {"reputation": 72, "user_id": 9337378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d50e2d799706ec8d04e0c63e5cede9f?s=128&d=identicon&r=PG&f=1", "display_name": "Skeptic Biped", "link": "https://stackoverflow.com/users/9337378/skeptic-biped"}, "is_accepted": false, "score": 0, "last_activity_date": 1558347797, "creation_date": 1558347797, "answer_id": 56218937, "question_id": 56218499, "link": "https://stackoverflow.com/questions/56218499/sed-replace-comma-after-first-regex-match/56218937#56218937", "title": "sed - Replace comma after first regex match", "body": "<p>Assuming you have this:\n    <code>BBBBBBB.2018_08,XXXXXXXXXXXXX,01/01/2014,\"109,07\",DF,CCCCCCCCCCC</code></p>\n\n<p>Try this:\n    <code>awk -F',' '{print $1,$2,$3,$4\".\"$5,$6,$7}' filename | awk '$1=$1' FS=\" \" OFS=\",\"</code></p>\n\n<p>Output will be:\n   <code>BBBBBBB.2018_08,XXXXXXXXXXXXX,01/01/2014,\"109.07\",DF,CCCCCCCCCCC</code></p>\n\n<p>You simply need to know the field numbers for replacing the field separator between them.</p>\n"}, {"tags": [], "owner": {"reputation": 770, "user_id": 2597267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGkUn.jpg?s=128&g=1", "display_name": "Borislav Markov", "link": "https://stackoverflow.com/users/2597267/borislav-markov"}, "is_accepted": false, "score": 0, "last_activity_date": 1558348238, "creation_date": 1558348238, "answer_id": 56219074, "question_id": 56218499, "link": "https://stackoverflow.com/questions/56218499/sed-replace-comma-after-first-regex-match/56219074#56219074", "title": "sed - Replace comma after first regex match", "body": "<p>In order to use regexp as in perl you have to activate extended regular expression with <code>-r</code>.\nSo if you want to replace all numbers and omit the \" sign, then you can use this:</p>\n\n<pre><code>echo 'BBBBBBB.2018_08,XXXXXXXXXXXXX,01/01/2014,\"109,07\",DF,CCCCCCCCCCC, .......'|sed -r 's/\\\"([0-9]+)\\,([0-9]+)\\\"/\\1\\.\\2/g'\n</code></pre>\n\n<p>If you want to replace first occurrence only you can use that:</p>\n\n<pre><code>echo 'BBBBBBB.2018_08,XXXXXXXXXXXXX,01/01/2014,\"109,07\",DF,CCCCCCCCCCC, .......'|sed -r 's/\\\"([0-9]+)\\,([0-9]+)\\\"/\\1\\.\\2/1'\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://www.gnu.org/software/sed/manual/sed.txt\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/sed/manual/sed.txt</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "is_accepted": false, "score": 1, "last_activity_date": 1558349389, "creation_date": 1558349389, "answer_id": 56219380, "question_id": 56218499, "link": "https://stackoverflow.com/questions/56218499/sed-replace-comma-after-first-regex-match/56219380#56219380", "title": "sed - Replace comma after first regex match", "body": "<p>The following <code>sed</code> will convert all decimal separators in quoted numeric fields:</p>\n\n<pre><code> sed 's/\"\\([-+]\\?[0-9]*\\)[,]\\?\\([0-9]\\+\\([eE][-+]\\?[0-9]+\\)\\?\\)\"/\"\\1.\\2\"/g'\n</code></pre>\n\n<p>See: <a href=\"https://www.regular-expressions.info/floatingpoint.html\" rel=\"nofollow noreferrer\">https://www.regular-expressions.info/floatingpoint.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1558356540, "creation_date": 1558356540, "answer_id": 56221370, "question_id": 56218499, "link": "https://stackoverflow.com/questions/56218499/sed-replace-comma-after-first-regex-match/56221370#56221370", "title": "sed - Replace comma after first regex match", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -E ':a;s/^([^\"]*(\"[^\",]*\"[^\"]*)*\"[^\",]*),/\\1./;ta' file\n</code></pre>\n\n<p>This regexp matches a <code>,</code> within a pair of <code>\"</code>'s and replaces it by a <code>.</code>. The regexp is anchored to the start of the line and thus needs to be repeated until no further matches can be matched, hence the <code>:a</code> and the <code>ta</code> commands which causes the substitution to be iterated over whilst any substitution is successful.</p>\n\n<p>N.B. The solution expects that all double quotes are matched and that no double quotes are quoted i.e. <code>\\\"</code> does not appear in a line.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1558360089, "creation_date": 1558360089, "answer_id": 56222312, "question_id": 56218499, "link": "https://stackoverflow.com/questions/56218499/sed-replace-comma-after-first-regex-match/56222312#56222312", "title": "sed - Replace comma after first regex match", "body": "<p>If your input always follows that format of only one quoted field containing 1 comma then all you need is:</p>\n\n<pre><code>$ sed 's/\\([^\"]*\"[^\"]*\\),/\\1./' file\nBBBBBBB.2018_08,XXXXXXXXXXXXX,01/01/2014,\"109.07\",DF,CCCCCCCCCCC, .......\n</code></pre>\n\n<p>If it's more complicated than that then see <a href=\"https://stackoverflow.com/q/45420535/1745001\">What&#39;s the most robust way to efficiently parse CSV using awk?</a>.</p>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 1, "accepted_answer_id": 56218616, "answer_count": 6, "score": 0, "last_activity_date": 1558360089, "creation_date": 1558346288, "last_edit_date": 1558358533, "question_id": 56218499, "link": "https://stackoverflow.com/questions/56218499/sed-replace-comma-after-first-regex-match", "title": "sed - Replace comma after first regex match", "body": "<p>i m trying to perform the following substitution on lines of the general format:</p>\n\n<pre><code>BBBBBBB.2018_08,XXXXXXXXXXXXX,01/01/2014,\"109,07\",DF,CCCCCCCCCCC, .......\n</code></pre>\n\n<p>as you see the problem is that its a comma separated file, with a specific field containing a comma decimal. I would like to replace that with a dot .</p>\n\n<p>I ve tried this, to replace the first occurence of a pattern after match, but to no avail, could someone help me?</p>\n\n<pre><code>sed -e '/,\"/!b' -e \"s/,/./\"\nsed -e '/\"/!b' -e ':a' -e \"s/,/\\./\"\n</code></pre>\n\n<p>Thanks in advance. An awk or perl solution would help me as well. Here's an awk effort:</p>\n\n<pre><code>gawk -F \",\" 'substr($10, 0, 3)==3 &amp;&amp; length($10)==12 { gsub(/,/,\".\", $10); print}'\n</code></pre>\n\n<p>That yielded the same file unchanged.</p>\n"}, {"tags": ["perl", "ssl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1558350192, "post_id": 56218283, "comment_id": 99059616, "body": "Why would you want to do that? If you want to measure throughput, you want to count the unencrypted data. If you want to measure the amount of data sent over your connection, then your approach doesn&#39;t even work for non-encrypted connections (because it doesn&#39;t include the packet headers and resent packets)."}, {"owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558356978, "post_id": 56218283, "comment_id": 99063332, "body": "The latter. Yes, I&#39;m aware of the packet headers and resent packets issue; I&#39;m willing to accept an approximate value based on bytes counted from send() and recv()."}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1558354448, "creation_date": 1558354448, "answer_id": 56220817, "question_id": 56218283, "link": "https://stackoverflow.com/questions/56218283/actual-bytes-read-and-written-by-iosocketssl/56220817#56220817", "title": "Actual bytes read and written by IO::Socket::SSL", "body": "<p>IO::Socket::SSL does not provide you with that view to the underlying TCP socket since it let just OpenSSL handle the TCP socket (via Net::SSLeay). In order to get such details you would need to handle read/write on the TCP socket yourself and then interact with the SSL layer using the BIO interface. Of course, this is way more complex than just using the abstraction offered by IO::Socket::SSL.</p>\n"}], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 56220817, "answer_count": 1, "score": 1, "last_activity_date": 1558354448, "creation_date": 1558345527, "question_id": 56218283, "link": "https://stackoverflow.com/questions/56218283/actual-bytes-read-and-written-by-iosocketssl", "title": "Actual bytes read and written by IO::Socket::SSL", "body": "<p>I'd like to count bytes in/out from a socket. For a regular socket, I can just total the size change of buffer effected by recv() and the return value of send(). How do you do this with IO::Socket::SSL?</p>\n"}, {"tags": ["regex", "perl", "file-handling", "perlscript"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1558345260, "last_edit_date": 1558345260, "creation_date": 1558342009, "answer_id": 56217290, "question_id": 56217239, "link": "https://stackoverflow.com/questions/56217239/how-to-replace-some-patterns-with-whitespace-in-perl/56217290#56217290", "title": "How to replace some patterns with whitespace in perl?", "body": "<p>Looks like your regex is too complicated (and, therefore, too likely to be wrong). If you want to delete everything after <code>params:</code> then just do that.</p>\n\n<pre><code>for (@lines) {\n  s/params:.+//;\n  ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 1, "last_activity_date": 1558343249, "creation_date": 1558343249, "answer_id": 56217624, "question_id": 56217239, "link": "https://stackoverflow.com/questions/56217239/how-to-replace-some-patterns-with-whitespace-in-perl/56217624#56217624", "title": "How to replace some patterns with whitespace in perl?", "body": "<p>If you want to keep the single quote at the end, do:</p>\n\n<pre><code>for (@lines) {\n  s/params:.+/'/;\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9198418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad44f3a89a2fe34cc9fce961a2e55b42?s=128&d=identicon&r=PG&f=1", "display_name": "Gokul.Mohan", "link": "https://stackoverflow.com/users/9198418/gokul-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1558345260, "creation_date": 1558341811, "question_id": 56217239, "link": "https://stackoverflow.com/questions/56217239/how-to-replace-some-patterns-with-whitespace-in-perl", "title": "How to replace some patterns with whitespace in perl?", "body": "<p>I'm having a file in which there are lines containing some patterns as</p>\n\n<p>`XX3 DB3 DBB1 VDD VSS VSSS VDDS inverter params: ln=.045u wn=0.5 mm=mm'</p>\n\n<p>`XX4 DBB1 DB3 VDD VSS VSSS VDDS inverter params: ln=.045u wn=.12u</p>\n\n<p>`XX14 DBB1 DB_TBY VDD VSS VSSS VDDS inverter params: Mpar =(Something))</p>\n\n<p>I need to replace these lines as </p>\n\n<p>`XX3 DB3 DBB1 VDD VSS VSSS VDDS inverter</p>\n\n<p>`XX4 DBB1 DB3 VDD VSS VSSS VDDS inverter</p>\n\n<p>`XX14 DBB1 DB_TBY VDD VSS VSSS VDDS inverter</p>\n\n<p>that is I want to delete everything after params, It can be anything, till the newline.</p>\n\n<pre><code>    foreach(@lines){\n     $_ =~ s/params: .*?[a-z,A-Z,),0-9,mm,m]'/ /g;}\n</code></pre>\n\n<p>But here everything is deleting but it should end with ' . As I have no idea about what all patterns can be present , this technique is not possible.</p>\n"}, {"tags": ["perl", "sed"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 2, "creation_date": 1558309866, "post_id": 56212912, "comment_id": 99046904, "body": "Have you tried writing any code yet?  Note that Stack Overflow tries to not be a free code writing service."}, {"owner": {"reputation": 1874, "user_id": 11053344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf3a714fab6df963d0193526cffc5b?s=128&d=identicon&r=PG&f=1", "display_name": "vintnes", "link": "https://stackoverflow.com/users/11053344/vintnes"}, "edited": false, "score": 0, "creation_date": 1558312242, "post_id": 56212912, "comment_id": 99047204, "body": "I think you mean &quot;descending sort by the number of hyphenated strings in the second column&quot;. Is this correct?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1558322988, "post_id": 56212912, "comment_id": 99048811, "body": "Would <code>123|Z2|Goal|test</code> come before or after <code>123|Z12|Goal|test</code>? In other words are <code>Z2</code> and <code>Z12</code> sorted entirely alphabetically or alphabetically on <code>Z</code> where they are identical but then numerically on <code>2</code> vs <code>12</code>? Include that case in your sample input output as so far you have nothing in there to show if the sorting should be partially numerical or not."}, {"owner": {"reputation": 13, "user_id": 11525302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0a2a824a47654727ebc52c9859a1a5?s=128&d=identicon&r=PG&f=1", "display_name": "Starter", "link": "https://stackoverflow.com/users/11525302/starter"}, "edited": false, "score": 0, "creation_date": 1558376943, "post_id": 56212912, "comment_id": 99073193, "body": "[Tim Biegeleisen] you have the option not to help the starter like me but you have no right to prevent the other from helping the starter . Thanks to -[tshiono] who helped me to solve my problem"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558349871, "post_id": 56213175, "comment_id": 99059458, "body": "Or: <code>perl -MSort::Key=ikeysort -e&#39;print ikeysort { -length((split &#47;\\|&#47;)[1]) } &lt;&gt;&#39;</code>"}], "tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": true, "score": 0, "last_activity_date": 1558324729, "last_edit_date": 1558324729, "creation_date": 1558313286, "answer_id": 56213175, "question_id": 56212912, "link": "https://stackoverflow.com/questions/56212912/how-to-use-sed-or-perl-to-sort-given-text-file-based-on-2nd-column-number-of-str/56213175#56213175", "title": "How to use Sed or Perl to sort given text file based on 2nd column number of string in a descending manner", "body": "<p>With the <code>Schwartzian Transform</code> in <code>Perl</code>, please try the following:</p>\n\n<pre><code>perl -e '\n    print map { $_-&gt;[0] }\n    sort { $b-&gt;[1] &lt;=&gt; $a-&gt;[1] }\n    map { [$_, length((split(/\\|/))[1])] }\n    &lt;&gt;;\n' input.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>123|N1-G23-H40-K1-A11-C12-J12|banana|boy\n123|N1-G23-H40-K1-A11-C12|banana|boy\n123|F1-B23-G39-M22-Z12|some|girl\n123|P1-G23-H40-K1|school|boy\n123|E1-T23-N12|car|girl\n123|V1-M12|car|girl\n123|Z12|Goal|test\n</code></pre>\n\n<p><strong>[How it works]</strong></p>\n\n<p>To understand the algorithm, it will be convenient to read the script\nfrom the bottom to the top.</p>\n\n<p>The first function:</p>\n\n<pre><code>map { [$_, length((split(/\\|/))[1])] }\n&lt;&gt;;\n</code></pre>\n\n<p>reads the input file, then generates a 2-D list which holds the input line\nitself in the 1st column and the length of the 2nd fileld in the 2nd column\nsomething like as:</p>\n\n<pre><code>[[\"123|N1-G23-H40-K1-A11-C12-J12|banana|boy\\n\", 25],\n[\"123|Z12|Goal|test\\n\", 3],\n[\"123|F1-B23-G39-M22-Z12|some|girl\\n\", 13],\n...]]\n</code></pre>\n\n<p>The second function:</p>\n\n<pre><code>sort { $b-&gt;[1] &lt;=&gt; $a-&gt;[1] }\n</code></pre>\n\n<p>sorts the list by the values in the 2nd columns\nin descending order and the result will look like:</p>\n\n<pre><code>[[\"123|N1-G23-H40-K1-A11-C12-J12|banana|boy\\n\", 25],\n[\"123|N1-G23-H40-K1-A11-C12|banana|boy\\n\", 21],\n[\"123|F1-B23-G39-M22-Z12|some|girl\\n\", 18],\n...]]\n</code></pre>\n\n<p>The final function:</p>\n\n<pre><code>print map { $_-&gt;[0] }\n</code></pre>\n\n<p>extracts the 1st columns and prints the result.</p>\n\n<p>The <code>Schwartzian transform</code> is a useful and efficient technique (or an idiom)\nto sort a list by a certain property of the elements of the list.</p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1558313595, "creation_date": 1558313595, "answer_id": 56213203, "question_id": 56212912, "link": "https://stackoverflow.com/questions/56212912/how-to-use-sed-or-perl-to-sort-given-text-file-based-on-2nd-column-number-of-str/56213203#56213203", "title": "How to use Sed or Perl to sort given text file based on 2nd column number of string in a descending manner", "body": "<p>One way:</p>\n\n<pre><code>$ awk -F'|' -v OFS='|' '{ print $1, split($2, a, /-/), $2, $3, $4 }' input.txt |\n    sort -t'|' -k 2nr,3 |\n    cut -d'|' -f1,3,4,5\n123|N1-G23-H40-K1-A11-C12-J12|banana|boy\n123|N1-G23-H40-K1-A11-C12|banana|boy\n123|F1-B23-G39-M22-Z12|some|girl\n123|P1-G23-H40-K1|school|boy\n123|E1-T23-N12|car|girl\n123|V1-M12|car|girl\n123|Z12|Goal|test\n</code></pre>\n\n<p>The <code>awk</code> bit adds a new second column that is the number of <code>-</code>-separated words in the original second column. <code>sort</code> then sorts that output by first sorting that new second column in reverse numeric order, and for each line where that number is the same, sorts the third column (original second) in ascending lexicographic order. Finally, <code>cut</code> removes that extra column.</p>\n"}], "owner": {"reputation": 13, "user_id": 11525302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0a2a824a47654727ebc52c9859a1a5?s=128&d=identicon&r=PG&f=1", "display_name": "Starter", "link": "https://stackoverflow.com/users/11525302/starter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 56213175, "answer_count": 2, "score": -1, "last_activity_date": 1558324729, "creation_date": 1558309752, "last_edit_date": 1558319593, "question_id": 56212912, "link": "https://stackoverflow.com/questions/56212912/how-to-use-sed-or-perl-to-sort-given-text-file-based-on-2nd-column-number-of-str", "title": "How to use Sed or Perl to sort given text file based on 2nd column number of string in a descending manner", "body": "<p>How to use Sed or Perl to sort given text file based on 2nd column number of string in a descending manner</p>\n\n<p>Input.txt</p>\n\n<pre><code>123|N1-G23-H40-K1-A11-C12-J12|banana|boy      \n123|Z12|Goal|test     \n123|F1-B23-G39-M22-Z12|some|girl     \n123|E1-T23-N12|car|girl     \n123|N1-G23-H40-K1-A11-C12|banana|boy     \n123|V1-M12|car|girl     \n123|P1-G23-H40-K1|school|boy\n</code></pre>\n\n<p>Output.txt</p>\n\n<pre><code>123|N1-G23-H40-K1-A11-C12-J12|banana|boy   \n123|N1-G23-H40-K1-A11-C12|banana|boy    \n123|F1-B23-G39-M22-Z12|some|girl    \n123|P1-G23-H40-K1|school|boy    \n123|E1-T23-N12|car|girl    \n123|V1-M12|car|girl     \n123|Z12|Goal|test\n</code></pre>\n"}, {"tags": ["perl", "filesystems", "xs"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1558205000, "post_id": 56201844, "comment_id": 99026481, "body": "There is  <code>EXTEND(sp, 7);</code> at the start of <code>_df</code> in the XS file. Try to make a <code>EXTEND(sp,8);</code> out of it since you push 8 arguments."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1558215771, "last_edit_date": 1558215771, "creation_date": 1558209093, "answer_id": 56202356, "question_id": 56201844, "link": "https://stackoverflow.com/questions/56201844/how-do-i-get-f-type-from-statfs/56202356#56202356", "title": "How do I get f_type from statfs?", "body": "<p>Unlike <code>XPUSH*</code>, <code>PUSH*</code> doesn't ensure there's enough room on the stack.</p>\n\n<blockquote>\n  <p><strong>PUSHs</strong></p>\n  \n  <p>Push an SV onto the stack. The stack must have room for this element. Does not handle 'set' magic. Does not use <code>TARG</code>. See also <code>PUSHmortal</code>, <code>XPUSHs</code>, and <code>XPUSHmortal</code>.</p>\n\n<pre><code>void PUSHs(SV* sv)\n</code></pre>\n</blockquote>\n\n<p>To ensure there's enough space for the additional value being returned, simply replace</p>\n\n<pre><code>EXTEND(sp, 7)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>EXTEND(sp, 8)\n</code></pre>\n\n<blockquote>\n  <p><strong>EXTEND</strong></p>\n  \n  <p>Used to extend the argument stack for an XSUB's return values. Once used, guarantees that there is room for at least <code>nitems</code> to be pushed onto the stack.</p>\n\n<pre><code>void EXTEND(SP, SSize_t nitems)\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>Tip:</p>\n\n<pre><code>PUSHs(sv_2mortal(newSVnv((double)st.f_type)));\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>PUSHs(sv_2mortal(newSVnv((NV)st.f_type)));\n</code></pre>\n\n<p>That can be shortened to</p>\n\n<pre><code>mPUSHs(newSVnv((NV)st.f_type));\n</code></pre>\n\n<p>And that can be shortened to</p>\n\n<pre><code>mPUSHn((NV)st.f_type);\n</code></pre>\n\n<p>I realize you're creating a minimal patch and that you're striving for consistency, but this could benefit you and other readers in other situations.</p>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 56202356, "answer_count": 1, "score": -1, "last_activity_date": 1558302902, "creation_date": 1558204633, "last_edit_date": 1558302902, "question_id": 56201844, "link": "https://stackoverflow.com/questions/56201844/how-do-i-get-f-type-from-statfs", "title": "How do I get f_type from statfs?", "body": "<p>I need to get <code>f_type</code> from <code>statfs</code>. I tried patching <code>Filesys::Df</code>:</p>\n\n<pre><code>---\n Df.pm       | 6 +++---\n Makefile.PL | 7 +------\n XS_statfs   | 1 +\n 3 files changed, 5 insertions(+), 9 deletions(-)\n\ndiff --git a/Df.pm b/Df.pm\nindex b24bd9c..986082a 100644\n--- a/Df.pm\n+++ b/Df.pm\n@@ -28,7 +28,7 @@ my %fs = ();\n    ($block_size) ||\n        ($block_size = 1024);\n\n-   my ($frsize, $blocks, $bfree, $bavail, $files, $ffree, $favail);\n+   my ($frsize, $blocks, $bfree, $bavail, $files, $ffree, $favail, $ftype);\n\n    #### If open filehandle call fstatvfs or fstatfs\n    if(defined(fileno($dir))) {\n@@ -36,7 +36,7 @@ my %fs = ();\n    }\n\n    else {\n-       ($frsize, $blocks, $bfree, $bavail, $files, $ffree, $favail) = _df($dir);\n+       ($frsize, $blocks, $bfree, $bavail, $files, $ffree, $favail, $ftype) = _df($dir);\n    }\n\n\n@@ -199,7 +199,7 @@ my %fs = ();\n         #        $fs{user_files}  = undef;\n         #}\n\n-\n+    $fs{type} = $ftype;\n    return(\\%fs);\n }\n\ndiff --git a/Makefile.PL b/Makefile.PL\nindex 6a89ec4..e91cbb3 100644\n--- a/Makefile.PL\n+++ b/Makefile.PL\n@@ -21,12 +21,7 @@ if($Config{osname} =~ /^MSWin/i) {\n    die \"You might try Filesys::DfPortable instead.\\n\";\n }\n\n-#### Check for the existance of statvfs\n-if(check_statvfs()) {\n-   ####$define .= \"-DDF_STATVFS \";\n-   copy_xs(\"XS_statvfs\", $xs_file);\n-   print \"Building with statvfs ....\\n\";\n-}\n+# force statfs\n\n #### Check for the existance of statfs\n elsif(check_statfs()) {\ndiff --git a/XS_statfs b/XS_statfs\nindex 856c646..ef801c3 100644\n--- a/XS_statfs\n+++ b/XS_statfs\n@@ -45,6 +45,7 @@ _df(dir)\n        PUSHs(sv_2mortal(newSVnv((double)st.f_ffree)));\n        /* No favail */\n        PUSHs(sv_2mortal(newSVnv((double)st.f_ffree)));\n+       PUSHs(sv_2mortal(newSVnv((double)st.f_type)));\n    }\n\n    else {\n-- \n2.21.0\n</code></pre>\n\n<p>followed by </p>\n\n<pre><code>perl Makefile.PL ; make ; perl -Mblib -MFilesys::Df=df -E'say df(\"/\")-&gt;{type}'\n</code></pre>\n\n<p>but that crashes</p>\n\n<pre><code>panic: XSUB Filesys::Df::_df (Df.c) failed to extend arg stack: base=11d3b10, sp=11d3b50, hwm=11d3b48\n</code></pre>\n\n<p>How do I solve this problem? </p>\n"}, {"tags": ["perl", "arguments", "pipe", "xargs"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558205591, "post_id": 56200990, "comment_id": 99026579, "body": "@ikegami  Yes, thank you, fixed.  I didn&#39;t mean to get into pipe-vs-files but it is just better to keep it correct in either case."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1558207586, "last_edit_date": 1558207586, "creation_date": 1558198032, "answer_id": 56200990, "question_id": 56199968, "link": "https://stackoverflow.com/questions/56199968/xargs-pass-multiple-arguments-to-perl-subroutine/56200990#56200990", "title": "xargs pass multiple arguments to perl subroutine?", "body": "<p>I am not sure about the details of your design, so I take it that you need a Perl one-liner to use shell's variables that are seen in the scope in which it's called.</p>\n\n<p>A <code>perl -e'...'</code> executes a Perl <em>program</em> given under <code>''</code>. For any variables from the environment where this program runs -- a pipeline, or a shell script -- to be available to the program their values need be passed to it. Ways to do this with a one-liner are spelled out in <a href=\"https://stackoverflow.com/a/51713578/4653379\">this post</a>, and here is a summary.</p>\n\n<p>A Perl program receives arguments passed to it on the command-line in <code>@ARGV</code> array. So you can invoke it in a pipeline as </p>\n\n<pre><code>... | perl -e'($v1, $v2) = @ARGV; ...' \"$0\" \"$1\"\n</code></pre>\n\n<p>or as</p>\n\n<pre><code>... | xargs -l perl -e'($v1, $v2) = @ARGV; ...'\n</code></pre>\n\n<p>if <code>xargs</code> is indeed used to feed the Perl program its input.  In the first example the variables are quoted to protect possible interesting characters in them (spaces, <code>*</code>, etc) from being interpreted by the shell that sets up and runs the perl program.</p>\n\n<p>If input contains multiple lines to process and the one-liner uses <code>-n</code> or <code>-p</code> for it then unpack arguments in a <code>BEGIN</code> block</p>\n\n<pre><code>... | perl -ne'BEGIN { ($v1, $v2) = splice(@ARGV,0,2) }; ...'  \"$0\" \"$1\" ...\n</code></pre>\n\n<p>which runs at compile time, so before the loop over input lines provided by <code>-n</code>/<code>-p</code>.  The arguments other than filenames are now removed from <code>@ARGV</code>, so to leave only the filenames there for <code>-n</code>/<code>-p</code>, in case input comes from files.</p>\n\n<p>There is also a rudimentary mechanism for command-line switches in a one-liner, via the <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">-s switch</a>.  Please see the link above for details; I'd recommend <code>@ARGV</code> over this.</p>\n\n<p>Finally, your calling code could set up <em>environment variables</em> which are then available to the Perl progam in <code>%ENV</code>. However, that doesn't seem to be suitable to what you seem to want.</p>\n\n<p>Also see <a href=\"https://stackoverflow.com/a/54059744/4653379\">this post</a> for another example.</p>\n"}, {"comments": [{"owner": {"reputation": 4024, "user_id": 1080804, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9bff7b79c1278cd94621160ed497aa71?s=128&d=identicon&r=PG", "display_name": "ecoe", "link": "https://stackoverflow.com/users/1080804/ecoe"}, "edited": false, "score": 0, "creation_date": 1558209093, "post_id": 56201639, "comment_id": 99027300, "body": "thanks, yes I agree it&#39;s an XY Problem. Essentially I&#39;m using <a href=\"https://spark.apache.org/docs/latest/rdd-programming-guide.html#transformations\" rel=\"nofollow noreferrer\">Apache Spark and am trying to <code>pipe</code> data</a> to a Perl ETL process. In order to satisfy communication from Spark to Perl via STDIN/STDOUT, my knee jerk reaction was to avoid adapting the existing Perl script to process STDIN solely to minimize the extent of rewriting it, but now you are making me think that maybe I need to slow down and study Perl more. Thank you for the example."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1558203105, "creation_date": 1558203105, "answer_id": 56201639, "question_id": 56199968, "link": "https://stackoverflow.com/questions/56199968/xargs-pass-multiple-arguments-to-perl-subroutine/56201639#56201639", "title": "xargs pass multiple arguments to perl subroutine?", "body": "<p>While <code>bash</code>'s argument are available as <code>$@</code> and <code>$0</code>, <code>$1</code>, <code>$2</code>, etc, Perl's arguments are available via <code>@ARGV</code>. This means that the Perl equivalent of</p>\n\n<pre><code>echo a b | xargs -l bash -c 'echo \"1:$0 2:$1\"'\n</code></pre>\n\n<p>is</p>\n\n<pre><code>echo a b | xargs -l perl -e'CORE::say \"1:$ARGV[0] 2:$ARGV[1]\"'\n</code></pre>\n\n<p>That said, it doesn't make sense to use <code>xargs</code> in this way because there's no way to predict how many times it will call <code>perl</code>, and there's no way to predict how many arguments it will pass to <code>perl</code> each time. You have an <a href=\"https://www.perlmonks.org/?node_id=542341\" rel=\"nofollow noreferrer\">XY Problem</a>, and you haven't provided any information to help us. Maybe you're looking for</p>\n\n<pre><code>perl -e'CORE::say \"1:$ARGV[0] 2:$ARGV[1]\"' $( echo a b )\n</code></pre>\n"}], "owner": {"reputation": 4024, "user_id": 1080804, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9bff7b79c1278cd94621160ed497aa71?s=128&d=identicon&r=PG", "display_name": "ecoe", "link": "https://stackoverflow.com/users/1080804/ecoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 56200990, "answer_count": 2, "score": 1, "last_activity_date": 1558207586, "creation_date": 1558190409, "last_edit_date": 1558190761, "question_id": 56199968, "link": "https://stackoverflow.com/questions/56199968/xargs-pass-multiple-arguments-to-perl-subroutine", "title": "xargs pass multiple arguments to perl subroutine?", "body": "<p>I know how to pipe <a href=\"https://stackoverflow.com/a/25623391/1080804\">multiple arguments with xargs</a>:</p>\n\n<pre><code>echo a b | xargs -l bash -c '1:$0 2:$1'\n</code></pre>\n\n<p>and I know how to pass the array of arguments to my perl module's subroutine from xargs:</p>\n\n<pre><code>echo a b | xargs --replace={} perl -I/home/me/module.pm -Mme -e 'me::someSub(\"{}\")'\n</code></pre>\n\n<p>But I can't seem to get multiple <em>individual</em> arguments passed to perl using those dollar references (to satisfy the <code>me::someSub</code> signature):</p>\n\n<pre><code>echo a b | xargs -l perl -e 'print(\"$0 $1\")'\n</code></pre>\n\n<p>Just prints:</p>\n\n<blockquote>\n  <p>-e</p>\n</blockquote>\n\n<p>So how do I get the shell arguments: <code>$0</code>, <code>$1</code> passed to my perl module's subroutine?</p>\n\n<p>I know I could just delimit <code>a;b</code> so that the xarg <code>{}</code> could be processed by perl splitting it to get individual arguments), but I could also just completely process all STDIN with perl. Instead, my objective is to use <code>perl -e</code> so that I can explicitly call the subroutine I want (rather than having some pre-process in the script that figures out what subroutine to call and what arguments to use based on STDIN, to avoid script maintenance costs).</p>\n"}, {"tags": ["sql-server", "perl", "utf-8", "character-encoding", "iso-8859-1"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1558136990, "post_id": 56194799, "comment_id": 99013917, "body": "1) Most DBD return the strings <i>encoded</i>, so it&#39;s up to you to decode them. It sounds from the docs that you can use <code>Win32::OLE-&gt;Option( CP =&gt; Win32::OLE::CP_UTF8 );</code> to set the encoding to UTF-8, making it easy for you to decode them."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558137007, "post_id": 56194799, "comment_id": 99013921, "body": "2) You print to the terminal without first encoding your output."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558138120, "post_id": 56194799, "comment_id": 99014104, "body": "About the latter point, see <a href=\"https://www.perlmonks.org/?node_id=1231890\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 3, "user_id": 11518546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b706139349441d313b94d8b7449d547b?s=128&d=identicon&r=PG&f=1", "display_name": "arfry", "link": "https://stackoverflow.com/users/11518546/arfry"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558163959, "post_id": 56194799, "comment_id": 99017333, "body": "Great answer @ikegami7! Problem solved!  It was enough to add the encoding for the standard output:          require Win32;            my $coe = &quot;cp&quot; . Win32::GetConsoleOutputCP();       binmode(STDOUT, &quot;:encoding($coe)&quot;);   I thank you very much"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6811857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbdaabcd276802beea59d063eb84ed4?s=128&d=identicon&r=PG&f=1", "display_name": "wellbay", "link": "https://stackoverflow.com/users/6811857/wellbay"}, "is_accepted": false, "score": 0, "last_activity_date": 1582874933, "creation_date": 1582874933, "answer_id": 60447098, "question_id": 56194799, "link": "https://stackoverflow.com/questions/56194799/how-can-i-read-special-characters-from-a-table-of-sqlserver-in-perl/60447098#60447098", "title": "How can I read special characters from a table of SQLSERVER in perl?", "body": "<pre><code>my $reportJson = to_json($data,{ pretty =&gt; 1})\n</code></pre>\n\n<p>use perl \"pretty\", everything looks good.</p>\n"}], "owner": {"reputation": 3, "user_id": 11518546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b706139349441d313b94d8b7449d547b?s=128&d=identicon&r=PG&f=1", "display_name": "arfry", "link": "https://stackoverflow.com/users/11518546/arfry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1582874933, "creation_date": 1558136592, "question_id": 56194799, "link": "https://stackoverflow.com/questions/56194799/how-can-i-read-special-characters-from-a-table-of-sqlserver-in-perl", "title": "How can I read special characters from a table of SQLSERVER in perl?", "body": "<p>with perl I'm trying to read some records from a SQLSERVER database that has a default charset = Latin1_General_CI_AS</p>\n\n<p>These records have some special characters (for example: \u00e0 \u00e8 \u00ec \u00f2 \u00f9)</p>\n\n<p>When I extract these records the perl output does not show these special characters.</p>\n\n<p>I tried the encode / decode functions but without success ...</p>\n\n<pre><code>use DBI;\n# DBD::ADO \n$dsn = \"Provider=sqloledb;Trusted Connection=yes;\"; \n$dsn .= \"Server=$host;Database=$database\"; \nmy $dbh = DBI-&gt;connect(\"dbi:ADO:$dsn\",  $user,  $auth, \n { RaiseError =&gt; 1, AutoCommit =&gt; 1} \n ) || die \"Database connection not made: $DBI::errstr\";\n\n$sql = \"select idnews, titolo from news where idnews&gt;$ultimoidinserito\";\n\n $sth = $dbh-&gt;prepare($sql);\n $sth-&gt;execute\n or die \"SQL Error: $DBI::errstr\\n\";\n  while(@row = $sth-&gt;fetchrow_array) \n  {\n    $titolo=lc($row[1]);\n    $idnews=$row[0];\n        print \"$titolo\\n\";\n }\n</code></pre>\n\n<p>Some record expected:</p>\n\n<p>Eurolega la finale sar\u00e0 CSKA-Efes</p>\n\n<p>Futuro Allegri ecco dove pu\u00f2 andare</p>\n\n<p>Result obtained:</p>\n\n<p>Eurolega la finale sar\u03b1 CSKA-Efes</p>\n\n<p>Futuro Allegri ecco dove pu\u2265 andare</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1558129124, "post_id": 56192934, "comment_id": 99012275, "body": "What, if anything, assigns a value to <code>@mtf</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1558128606, "creation_date": 1558128606, "answer_id": 56193787, "question_id": 56192934, "link": "https://stackoverflow.com/questions/56192934/using-perls-filebasename-to-rename-a-file-extension/56193787#56193787", "title": "Using Perl&#39;s File::Basename to rename a file extension", "body": "<p><code>fileparse(@mtf,qr/\\.[^.]*$/);</code> makes no sense. Since you have to ensure that <code>@mtf</code> contains exactly one element for this to work, it makes no sense to use an array instead of a scalar.</p>\n\n<p>You didn't show what <code>@mtf</code> contains, but it it's apparently not a single element, or the single element doesn't match the regexp pattern <code>\\.[^.]*$</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 9604360, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NtmWAyLRXoY/AAAAAAAAAAI/AAAAAAAAACQ/60Cu4WXZoQ8/photo.jpg?sz=128", "display_name": "Oleg Bukhantsov", "link": "https://stackoverflow.com/users/9604360/oleg-bukhantsov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558128606, "creation_date": 1558123744, "question_id": 56192934, "link": "https://stackoverflow.com/questions/56192934/using-perls-filebasename-to-rename-a-file-extension", "title": "Using Perl&#39;s File::Basename to rename a file extension", "body": "<p>Reciving the following warning message, how do I get rid of it?</p>\n\n<p><code>Use of uninitialized value $suffix in concatenation (.) or string at /usr/share/perl5/File/Basename.pm line 167.\nUse of uninitialized value $suffix in substr at /usr/share/perl5/File/Basename.pm line 169.</code></p>\n\n<p>Code being used:</p>\n\n<pre><code>use File::Copy;\nuse File::Basename qw(fileparse);\n\nmy @mtf;\nmy $name;\nmy $dir;\nmy $ext;\nmy $ascii;\nmy $suffix=\"\";\n\n($name, $dir, $suffix) = fileparse(@mtf,qr/\\.[^.]*$/);\n$name =~ s/\\.$suffix$//;\nsystem(\"cp $mtf[0] $name.ASCII\");\n$ascii = \"$name.ASCII\";\n</code></pre>\n"}, {"tags": ["perl", "https", "lwp"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1558122206, "post_id": 56192292, "comment_id": 99009978, "body": "How would we know? Was there an error message? Can you get to other pages? Is perl installed on your system?"}, {"owner": {"reputation": 31, "user_id": 11506690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd8dea046c60f03a4ca461e31f7803a?s=128&d=identicon&r=PG&f=1", "display_name": "wiedhas", "link": "https://stackoverflow.com/users/11506690/wiedhas"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1558122529, "post_id": 56192292, "comment_id": 99010084, "body": "Yes I have perl installed.  Error message prints out according to the code.  Yes I can get to other pages. I just tested it by replacing the url with http instead of https using <a href=\"http://google.com\" rel=\"nofollow noreferrer\">google.com</a> and it worked.  So is the problem with the HTTPS?"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1558122973, "post_id": 56192292, "comment_id": 99010277, "body": "If you&#39;re on an old system, old versions, it used to be so that you need to install the Net::SSL or Net::SSLeay modules separately to use https with LWP::Simple. Try <code>sudo cpan NET::SSL</code> or <code>sudo cpan NET::SSLeay</code> or something."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1558124861, "post_id": 56192292, "comment_id": 99010956, "body": "Works for me. You could try using <code>getprint($url);</code> which should print status code and error message if unsuccessful. As a side note, add <code>use strict; use warnings;</code> to the top of your program."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1558177499, "post_id": 56192292, "comment_id": 99019942, "body": "What is &quot;<i>Error message prints out according to the code.</i>&quot; supposed to mean? Do you get an error or not? If yes, what&#39;s the error message?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1558177611, "post_id": 56192292, "comment_id": 99019960, "body": "@KjetilS. Do not use <code>sudo cpan</code>. Among other issues, it can overwrite or remove system packages."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1558179568, "post_id": 56192292, "comment_id": 99020363, "body": "@melpomene. Maybe <code>sudo cpanm</code> then?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1558186268, "post_id": 56192292, "comment_id": 99021972, "body": "@KjetilS. No, that gives you the same results."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1558590433, "last_edit_date": 1558590433, "creation_date": 1558123423, "answer_id": 56192881, "question_id": 56192292, "link": "https://stackoverflow.com/questions/56192292/unable-to-get-page-via-https-with-lwpsimple-in-perl/56192881#56192881", "title": "Unable to get page via HTTPS with LWP::Simple in Perl", "body": "<p><a href=\"https://metacpan.org/pod/LWP::Protocol::https\" rel=\"nofollow noreferrer\">LWP::Protocol::https</a> is needed to make HTTPS requests with LWP. It needs to be installed separately from the rest of LWP. It looks like you installed LWP, but not LWP::Protocol::https, so simply install it now.</p>\n"}], "owner": {"reputation": 31, "user_id": 11506690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd8dea046c60f03a4ca461e31f7803a?s=128&d=identicon&r=PG&f=1", "display_name": "wiedhas", "link": "https://stackoverflow.com/users/11506690/wiedhas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558590433, "creation_date": 1558120352, "last_edit_date": 1558530104, "question_id": 56192292, "link": "https://stackoverflow.com/questions/56192292/unable-to-get-page-via-https-with-lwpsimple-in-perl", "title": "Unable to get page via HTTPS with LWP::Simple in Perl", "body": "<p>I try to download a page from an HTTPS URL with Perl:</p>\n\n<pre><code>use LWP::Simple;\n\nmy $url = 'https://www.ferc.gov/xml/whats-new.xml';\nmy $content = get $url or die \"Unable to get $url\\n\";\nprint $content;\n</code></pre>\n\n<p>There seems to be a problem. Just can't figure out the error. I can't get the page. Is the get request improperly coded?  Do I need to use a user agent? </p>\n"}, {"tags": ["perl", "chilkat"], "comments": [{"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1558126521, "post_id": 56191928, "comment_id": 99011523, "body": "I have searched a little in the documentation of chilkat, but it seems that they don&#39;t provide any further functions for port forwarding in the ssh tunnel. So, instead of getting stuck in this kinds of errors, why don&#39;t you use some kind of wrapper like <code>Net::SSH::Tunnel</code>, there are variety that can solve your problem"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11517512, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YLZLW9fUtGY/AAAAAAAAAAI/AAAAAAAAAUE/etRwB3E3BpM/photo.jpg?sz=128", "display_name": "ZTitan", "link": "https://stackoverflow.com/users/11517512/ztitan"}, "edited": false, "score": 0, "creation_date": 1558712703, "post_id": 56199664, "comment_id": 99204089, "body": "Thanks for this example Matt. This is actually what I was modeling it after. Would this work with active FTP, where the client side must open up additonal data ports?  In testing, the connection itself worked, but the data port appeared to be the issue."}], "tags": [], "owner": {"reputation": 1100, "user_id": 1722983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d54dcc6d4bef86fd7ee62a7cf6334a?s=128&d=identicon&r=PG", "display_name": "Chilkat Software", "link": "https://stackoverflow.com/users/1722983/chilkat-software"}, "is_accepted": false, "score": 0, "last_activity_date": 1558188059, "creation_date": 1558188059, "answer_id": 56199664, "question_id": 56191928, "link": "https://stackoverflow.com/questions/56191928/how-to-create-active-ftp-connection-through-ssh-tunnel-using-chilkat-library/56199664#56199664", "title": "How to create Active FTP Connection through SSH Tunnel using Chilkat library", "body": "<p>You would use CkSshTunnel in dynamic port forwarding mode, so that the CkSshTunnel acts as a SOCKS5 proxy from the $ftp's point of view.  For example, see this:  </p>\n\n<p><a href=\"https://www.example-code.com/perl/ftp_sshTunnel.asp\" rel=\"nofollow noreferrer\">https://www.example-code.com/perl/ftp_sshTunnel.asp</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11517512, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YLZLW9fUtGY/AAAAAAAAAAI/AAAAAAAAAUE/etRwB3E3BpM/photo.jpg?sz=128", "display_name": "ZTitan", "link": "https://stackoverflow.com/users/11517512/ztitan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558188059, "creation_date": 1558118406, "question_id": 56191928, "link": "https://stackoverflow.com/questions/56191928/how-to-create-active-ftp-connection-through-ssh-tunnel-using-chilkat-library", "title": "How to create Active FTP Connection through SSH Tunnel using Chilkat library", "body": "<p>I'm trying to use an SSH Tunnel (using Chilkat library CKSshTunnel) to a remote server, that remote server is able to reach the destination FTP server. The FTP server requires an Active FTP connection, not passive. I do know the server will always use port 20 for data.</p>\n\n<p>Is it possible to make an SSH tunnel, then use CKFTP2 with proxy settings to open an active FTP connection? I think the Active connection means the FTP client must open a receiving data port. Can it do that through the Chilkat SSH tunnel?</p>\n\n<p>I'm able to make a tunnel connection, and open the FTP connection to the destination FTP server and see an initial greeting, but from there the connection times out.</p>\n\n<p>\"Failed to read FTP control channel reply.\"</p>\n\n<pre><code>#  Connect to an SSH server and establish the SSH tunnel:\nmy $tunnel = chilkat::CkSshTunnel-&gt;new();\n$success = $tunnel-&gt;Connect('192.168.1.1',22);\n    if ($success != 1) { print $tunnel-&gt;lastErrorText() . \"\\r\\n\"; exit;}\n</code></pre>\n\n<pre><code>$ftp = chilkat::CkFtp2-&gt;new();\n$ftp-&gt;put_Hostname(\"10.100.1.1\");\n$ftp-&gt;put_Username(\"anonymous\");\n$ftp-&gt;put_Passive(0);\n\n$ftp-&gt;put_ActivePortRangeStart(20); # data port\n$ftp-&gt;put_ActivePortRangeEnd(20);  # data port\n$ftp-&gt;put_ForcePortIpAddress('192.168.1.1');\n\n$ftp-&gt;put_SocksHostname('127.0.0.1'); # connect to local side of the tunnel\n$ftp-&gt;put_SocksPort(1080);\n$ftp-&gt;put_SocksUsername(\"secret\");\n$ftp-&gt;put_SocksPassword(\"secret\");\n$ftp-&gt;put_SocksVersion(5);\n</code></pre>\n"}, {"tags": ["perl", "sed"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1558110793, "post_id": 56189865, "comment_id": 99005610, "body": "Why are there two stars around <code>sur.name.custom</code>? In your input file <code>text.txt</code> there are no stars"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11507840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682afe7e03b4381f6b4bdcf2c2544560?s=128&d=identicon&r=PG&f=1", "display_name": "saun", "link": "https://stackoverflow.com/users/11507840/saun"}, "edited": false, "score": 0, "creation_date": 1558108979, "post_id": 56189922, "comment_id": 99004918, "body": "Work as expected in bash, how do write to file? and can you provide sed or perl since I need sed or perl. thanks alots!"}, {"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "reply_to_user": {"reputation": 13, "user_id": 11507840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682afe7e03b4381f6b4bdcf2c2544560?s=128&d=identicon&r=PG&f=1", "display_name": "saun", "link": "https://stackoverflow.com/users/11507840/saun"}, "edited": false, "score": 1, "creation_date": 1558109222, "post_id": 56189922, "comment_id": 99005023, "body": "@saun I don&#39;t know perl and sed is not the right tool for this task. to update the input file with this command&#39;s output you need to use a temporary file, like <code>awk ... file &gt; tempfile &amp;&amp; mv tempfile file</code>."}, {"owner": {"reputation": 13, "user_id": 11507840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682afe7e03b4381f6b4bdcf2c2544560?s=128&d=identicon&r=PG&f=1", "display_name": "saun", "link": "https://stackoverflow.com/users/11507840/saun"}, "edited": false, "score": 1, "creation_date": 1558109433, "post_id": 56189922, "comment_id": 99005106, "body": "OK, I will look into awk and thanks for your fast replied."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "reply_to_user": {"reputation": 13, "user_id": 11507840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682afe7e03b4381f6b4bdcf2c2544560?s=128&d=identicon&r=PG&f=1", "display_name": "saun", "link": "https://stackoverflow.com/users/11507840/saun"}, "edited": false, "score": 2, "creation_date": 1558111496, "post_id": 56189922, "comment_id": 99005867, "body": "@saun: not sure why you say you need <code>sed</code> or <code>perl</code>? is it because they have the <code>-i</code> (inplace) option? The answer provided is just the long hand version of what is happening in the background when you use the <code>-i</code> option. There is no space savings using <code>-i</code>, you always 2X the disk space of your original file in order to modify it. <code>sed</code> is only good for <code>s&#47;str&#47;rep&#47;g&#39; file</code> operations. Learn <code>awk</code> and fly. .... <a href=\"http://grymoire.com/Unix/Awk.html\" rel=\"nofollow noreferrer\">awk tutorial</a> is very good. You&#39;ll know a lot  when you have worked thru that. Good luck."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1558116019, "post_id": 56189922, "comment_id": 99007690, "body": "Perl version added to answer. Feel free to revert."}, {"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558117926, "post_id": 56189922, "comment_id": 99008415, "body": "@ikegami thanks, does it print other lines too? to my ignorant eyes it seems like it doesn&#39;t"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1558119375, "post_id": 56189922, "comment_id": 99008931, "body": "Oops! It does now :) I was basing my code on your <code>awk</code> command (rather than the OP&#39;s question), except I don&#39;t know <code>awk</code>. I guess I know what that <code>1</code> means now :)"}, {"owner": {"reputation": 13, "user_id": 11507840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682afe7e03b4381f6b4bdcf2c2544560?s=128&d=identicon&r=PG&f=1", "display_name": "saun", "link": "https://stackoverflow.com/users/11507840/saun"}, "edited": false, "score": 0, "creation_date": 1558140069, "post_id": 56189922, "comment_id": 99014374, "body": "Perl version worked. But perl -pi wont write to file. lol ask again sorry. Edited: Perl -pali -e to write to file."}], "tags": [], "owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "is_accepted": true, "score": 3, "last_activity_date": 1558119359, "last_edit_date": 1558119359, "creation_date": 1558108693, "answer_id": 56189922, "question_id": 56189865, "link": "https://stackoverflow.com/questions/56189865/using-sed-to-append-string-from-regex-pattern-in-the-same-file/56189922#56189922", "title": "Using sed to append string from regex pattern in the same file", "body": "<p>Why don't you use awk for this? Assuming names doesn't contain spaces following command should work:</p>\n\n<pre><code>awk '$1==\"Name:\"{name=$2} $1==\"Website:\"{print $0 name;next} 1' file\n</code></pre>\n\n<p>Perl equivalent:</p>\n\n<pre><code>perl -pale'\n   $F[0] eq \"Name:\"    and $name = $F[1];\n   $F[0] eq \"Website:\" and $_ .= $name;\n' file\n</code></pre>\n\n<p>(Line breaks may be removed.)</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11507840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682afe7e03b4381f6b4bdcf2c2544560?s=128&d=identicon&r=PG&f=1", "display_name": "saun", "link": "https://stackoverflow.com/users/11507840/saun"}, "edited": false, "score": 0, "creation_date": 1558140471, "post_id": 56194561, "comment_id": 99014424, "body": "Thanks your sed version working fine! But the above answer first and provide awk and perl to be fair I chose first answer as accepted. thanks for sharing your sed command!"}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1558161728, "post_id": 56194561, "comment_id": 99016957, "body": "Perhaps <code>sed &#39;&#47;^Name:&#47;h;&#47;^Website:&#47;G;s&#47;\\nName: &#47;&#47;&#39; file</code> would be acceptable?"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1558219539, "post_id": 56194561, "comment_id": 99029259, "body": "@potong: Yes, I considered that, but decided that the first way would be simpler-- but now that I see it written out, I think I prefer yours."}], "tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 3, "last_activity_date": 1558134410, "creation_date": 1558134410, "answer_id": 56194561, "question_id": 56189865, "link": "https://stackoverflow.com/questions/56189865/using-sed-to-append-string-from-regex-pattern-in-the-same-file/56194561#56194561", "title": "Using sed to append string from regex pattern in the same file", "body": "<p>Here' a sed solution:</p>\n\n<pre><code>sed '/^Name:/{h;s/Name: *//;x;};/^Website:/{G;s/\\n//;}' filename\n</code></pre>\n\n<p>Translation: If the line begins with <code>Name:</code>, save the name to the hold space; if the line starts with <code>Website:</code>, append the (latest) name from the holdspace.</p>\n"}], "owner": {"reputation": 13, "user_id": 11507840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682afe7e03b4381f6b4bdcf2c2544560?s=128&d=identicon&r=PG&f=1", "display_name": "saun", "link": "https://stackoverflow.com/users/11507840/saun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 56189922, "answer_count": 2, "score": 1, "last_activity_date": 1560369966, "creation_date": 1558108492, "last_edit_date": 1560369966, "question_id": 56189865, "link": "https://stackoverflow.com/questions/56189865/using-sed-to-append-string-from-regex-pattern-in-the-same-file", "title": "Using sed to append string from regex pattern in the same file", "body": "<p>I'm new to unix programming like sed, perl etc. I've searched and no result found match my case. I need to append substring from top line in the same file. My file content text.txt :</p>\n\n<pre><code>Name: sur.name.custom\nTel: xxx\nAddress: yyy\nWebsite: www.site.com/id=\nName: sur.name.custom1\nTel: xxx\nAddress: yyy\nWebsite: www.site.com/id=\n</code></pre>\n\n<p>I need to append every Name (sur.name.*) to every website on its block.\nSo Expected ouput:</p>\n\n<pre>\n<code>Name: <b>sur.name.custom</b>\nTel: xxx\nAddress: yyy\nWebsite: www.site.com/id=<b>sur.name.custom</b>\nName: <b>sur.name.custom1</b>\nTel: xxx\nAddress: yyy\nWebsite: www.site.com/id=<b>sur.name.custom1</b></code>\n</pre>\n\n<p>I've tried the following sed command:</p>\n\n<pre><code>sed -n \"/^Website:.*id=$/ s/$/sur.name..*/p\" ./text.txt;\n</code></pre>\n\n<p>But sed returned: Website: www.site.com/id=sur.name.* same string I put.\nI'm sure sed can append from regex pattern. I need both sed and perl if possible. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1558106827, "post_id": 56188899, "comment_id": 99003943, "body": "try <code>if (grep m{&#47;\\Q$str\\E&#47;},  @ary ) {  ... }</code> . This will search <code>@ary</code> for the pattern <code>&#47;$str&#47;</code> where <code>$str</code> is a perl variable which is to be interpolated into the regex. Note: <code>grep -w</code> is not valid Perl."}, {"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 1, "creation_date": 1558112660, "post_id": 56188899, "comment_id": 99006312, "body": "The expression <code>if (grep -w (&#47;$str&#47;), @ary) { do_something() }</code> is actually valid Perl. It&#39;s an extremely silly expression which does nothing like the stated intention, but it is valid Perl! It won&#39;t even trigger a warning if $str and @ary are declared."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1558115649, "post_id": 56188899, "comment_id": 99007552, "body": "@TFBW Interesting. So it checks if the file &quot;0&quot; or &quot;1&quot; (if the the regexp matches <code>$_</code> it checks for the file &quot;1&quot;, if not, it checks the file &quot;0&quot;) is writeable. So most likely there will be no files &quot;0&quot; or &quot;1&quot; in the current directory and the <code>if</code> will not execute :) .. or maybe not &quot;0&quot;, but the empty string or <code>undef</code> (which are not valid filenames?? ) hmm"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1558177723, "post_id": 56188899, "comment_id": 99019986, "body": "What do you mean by &quot;<i>escape characters in a file</i>&quot;? Files don&#39;t have escape characters. Also, please provide sample data for your variables."}, {"owner": {"reputation": 171, "user_id": 6216109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7621171d8e27ff9bf3f45dabfd823811?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani ", "link": "https://stackoverflow.com/users/6216109/shivani"}, "edited": false, "score": 0, "creation_date": 1558337614, "post_id": 56188899, "comment_id": 99052987, "body": "my @ary conatins data of abc.txt which is :                                                  good morning\\Hi\\abc there\\match bye                                                                                                                         I want to match Hi which is present between two \\. The match must be exact."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1558338654, "post_id": 56188899, "comment_id": 99053489, "body": "@Shivani: I&#39;m afraid it&#39;s still not very clear what you&#39;re asking. Can you please edit your code to add Data::Dumper&#39;s representation of <code>@ary</code> (<code>print Dumper \\@ary</code>) along with the exact output that you are looking for."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 6216109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7621171d8e27ff9bf3f45dabfd823811?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani ", "link": "https://stackoverflow.com/users/6216109/shivani"}, "edited": false, "score": 0, "creation_date": 1558337474, "post_id": 56197942, "comment_id": 99052927, "body": "But if my @ary = (&quot;/abc/pqr/pattern123/xyz&quot;); it still matches since grep is used. I want to match exact &quot;pattern&quot;. So even if pattern123 exists, it says &#39;no match&quot;"}, {"owner": {"reputation": 171, "user_id": 6216109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7621171d8e27ff9bf3f45dabfd823811?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani ", "link": "https://stackoverflow.com/users/6216109/shivani"}, "edited": false, "score": 0, "creation_date": 1558340494, "post_id": 56197942, "comment_id": 99054349, "body": "also, the contents in the file have back slash not forward slash, thus it is not working in my case."}, {"owner": {"reputation": 171, "user_id": 6216109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7621171d8e27ff9bf3f45dabfd823811?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani ", "link": "https://stackoverflow.com/users/6216109/shivani"}, "edited": false, "score": 1, "creation_date": 1558341962, "post_id": 56197942, "comment_id": 99055108, "body": "if (grep m{\\\\\\Q$str\\E\\\\}, @ary ) { ... } this did the trick! Thank you :)"}], "tags": [], "owner": {"reputation": 616, "user_id": 7922428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vINFX.png?s=128&g=1", "display_name": "Bman70", "link": "https://stackoverflow.com/users/7922428/bman70"}, "is_accepted": false, "score": 0, "last_activity_date": 1558173968, "creation_date": 1558173968, "answer_id": 56197942, "question_id": 56188899, "link": "https://stackoverflow.com/questions/56188899/match-exact-string-in-an-array-in-perl/56197942#56197942", "title": "Match exact string in an array in Perl", "body": "<p>If you aren't wanting to use only <code>grep</code> for some reason, this code works and finds the match between escape characters: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @ary = (\"/abc/pqr/pattern/xyz\");\n\nif (\"@ary\" =~ m/(pattern)/) {\nprint \"match is $1\";\n}\nelse {\nprint \"no match\";\n}\n\nexit 0;\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 6216109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7621171d8e27ff9bf3f45dabfd823811?s=128&d=identicon&r=PG&f=1", "display_name": "Shivani ", "link": "https://stackoverflow.com/users/6216109/shivani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571820401, "creation_date": 1558104749, "last_edit_date": 1571820401, "question_id": 56188899, "link": "https://stackoverflow.com/questions/56188899/match-exact-string-in-an-array-in-perl", "title": "Match exact string in an array in Perl", "body": "<p>I want to match an exact string in Perl present between two escape characters in a file.</p>\n\n<p>I have tried the below codes, but they don't work when escape characters are present before and after the pattern to be matched.</p>\n\n<p>NOTE : <code>@ary</code> contains contents of a <code>.txt</code> file given as an argument to the script.</p>\n\n<pre><code>if (grep -w (/$str/), @ary) {\n\n   # do something\n\n}\n</code></pre>\n\n<p>Note <code>grep(/^$str/), @ary</code> doesn't work either.</p>\n\n<p>The content present inside <code>@ary</code> is in the below format:</p>\n\n<pre><code>/abc/pqr/pattern/xyz\u2026\n</code></pre>\n\n<p>I want to check if pattern exists in <code>@ary</code>. The pattern should be an exact match.</p>\n"}, {"tags": ["perl", "validation", "drop-down-menu", "excel-writer-xlsx"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1558101537, "post_id": 56187943, "comment_id": 99000952, "body": "Why have you altered the string when you use it in Perl? What happens when you use the original version?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1558101956, "post_id": 56187943, "comment_id": 99001196, "body": "<code>$E</code> inside double quotes in Perl interpolates into the value of the <code>$E</code> variable. Use <code>q()</code> instead of double quotes to prevent interpolation."}, {"owner": {"reputation": 56, "user_id": 6695627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab066ecc4a46d27b10ff21b124f2baf?s=128&d=identicon&r=PG", "display_name": "Thomas K&#252;hnert", "link": "https://stackoverflow.com/users/6695627/thomas-k%c3%bchnert"}, "edited": false, "score": 0, "creation_date": 1558102428, "post_id": 56187943, "comment_id": 99001499, "body": "If I use the same code like in Excel I get the same error. I am changing the string because i found an example on the internet."}, {"owner": {"reputation": 56, "user_id": 6695627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab066ecc4a46d27b10ff21b124f2baf?s=128&d=identicon&r=PG", "display_name": "Thomas K&#252;hnert", "link": "https://stackoverflow.com/users/6695627/thomas-k%c3%bchnert"}, "edited": false, "score": 0, "creation_date": 1558105577, "post_id": 56187943, "comment_id": 99003253, "body": "I&#39;ve tested q(), the error is the same on both strings: $validate_source = q(=BEREICH.VERSCHIEBEN(&#39;Boden_Subtyp&#39;!$E:$G;1;VERGLEICH(&#39;Pro&zwnj;&#8203;fil&#39;!$G$2;&#39;Boden_Sub&zwnj;&#8203;typ&#39;!$E$1:$G$1;0)-1;&zwnj;&#8203;ANZAHL2(INDEX(&#39;Boden&zwnj;&#8203;_Subtyp&#39;!$E:$G;;VERG&zwnj;&#8203;LEICH(&#39;Profil&#39;!$G$2;&zwnj;&#8203;&#39;Boden_Subtyp&#39;!$E$1:&zwnj;&#8203;$G$1;0)));1)); and $validate_source = q(=BEREICH.VERSCHIEBEN(Boden_Subtyp!$E:$G;1;VERGLEICH(Profil&zwnj;&#8203;!$G$2;Boden_Subtyp!$&zwnj;&#8203;E$1:$G$1;0)-1;ANZAHL&zwnj;&#8203;2(INDEX(Boden_Subtyp&zwnj;&#8203;!$E:$G;;VERGLEICH(Pr&zwnj;&#8203;ofil!$G$2;Boden_Subt&zwnj;&#8203;yp!$E$1:$G$1;0)));1)&zwnj;&#8203;);"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1558107580, "post_id": 56187943, "comment_id": 99004286, "body": "Is there a possibility that it doesn&#39;t like the German Excel formula?"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 6695627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab066ecc4a46d27b10ff21b124f2baf?s=128&d=identicon&r=PG", "display_name": "Thomas K&#252;hnert", "link": "https://stackoverflow.com/users/6695627/thomas-k%c3%bchnert"}, "is_accepted": false, "score": 1, "last_activity_date": 1558346994, "creation_date": 1558346994, "answer_id": 56218701, "question_id": 56187943, "link": "https://stackoverflow.com/questions/56187943/perl-excelwriterxlsx-correct-syntax-for-the-excel-function-move-area-functio/56218701#56218701", "title": "Perl Excel::Writer::XLSX correct syntax for the Excel function Move Area.function", "body": "<p>That's not the solution to the problem. I simplify the problem. The script creates a file that Excel can read without errors. If the commented source entry is used, Excel reports an error. However, the commented source entry can be directly exchanged for the uncommented source entry in Excel.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse diagnostics;\nuse strict;\nuse warnings;\nuse Excel::Writer::XLSX;\n\nmy $workbook  = Excel::Writer::XLSX-&gt;new( '/home/nutzer/test_bereich_verschieben.xlsx' );\nmy $home_hash = $workbook-&gt;add_worksheet('Home');\n$home_hash -&gt; write(0, 0, 'range_val');\n$home_hash -&gt; data_validation(\n    1,0,\n    {\n        validate =&gt; 'list',\n        source   =&gt; 'Horizont!$C$5:$C$6',       # list: 2 and 3\n#       source   =&gt; '=BEREICH.VERSCHIEBEN(Horizont!$C:$E;3;0;3;1)', # list: 1 and 2 and 3\n    }\n);\n\nmy $horizont_hash = $workbook-&gt;add_worksheet('Horizont');\n$horizont_hash -&gt; write(3, 2, '1');\n$horizont_hash -&gt; write(4, 2, '2');\n$horizont_hash -&gt; write(5, 2, '3');\n\n$workbook-&gt;close;\nexit;   \n__END__\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": false, "score": 1, "last_activity_date": 1583072815, "creation_date": 1583072815, "answer_id": 60476105, "question_id": 56187943, "link": "https://stackoverflow.com/questions/56187943/perl-excelwriterxlsx-correct-syntax-for-the-excel-function-move-area-functio/60476105#60476105", "title": "Perl Excel::Writer::XLSX correct syntax for the Excel function Move Area.function", "body": "<p>From the <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#Non-US-Excel-functions-and-syntax\" rel=\"nofollow noreferrer\">Excel::Writer::XLSX</a> docs but repeated here for clarity:</p>\n\n<blockquote>\n  <p><strong>Non US Excel functions and syntax</strong></p>\n  \n  <p>Excel stores formulas in the format of the US English version, regardless of the language or locale of the end-user's version of Excel. Therefore all formula function names written using Excel::Writer::XLSX must be in English:</p>\n</blockquote>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    worksheet-&gt;write_formula('A1', '=SUM(1, 2, 3)');   # OK\n    worksheet-&gt;write_formula('A2', '=SOMME(1, 2, 3)'); # French. Error on load.\n</code></pre>\n\n<blockquote>\n  <p>Also, formulas must be written with the US style separator/range operator which is a comma (not semi-colon). Therefore a formula with multiple values should be written as follows:</p>\n</blockquote>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    worksheet-&gt;write_formula('A1', '=SUM(1, 2, 3)'); # OK\n    worksheet-&gt;write_formula('A2', '=SUM(1; 2; 3)'); # Semi-colon. Error on load.\n</code></pre>\n\n<blockquote>\n  <p>If you have a non-English version of Excel you can use the following multi-lingual Formula Translator (<a href=\"http://en.excel-translator.de/language/\" rel=\"nofollow noreferrer\">http://en.excel-translator.de/language/</a>) to help you convert the formula. It can also replace semi-colons with commas.</p>\n</blockquote>\n\n<p>Using the translator listed above the formula should be:</p>\n\n<pre><code>OFFSET('Boden_Subtyp'!$E:$G,1,MATCH('Profil'!$G$2,'Boden_Subtyp'!$E$1:$G$1,0)-1,COUNTA(INDEX('Boden_Subtyp'!$E:$G,,MATCH('Profil'!$G$2,'Boden_Subtyp'!$E$1:$G$1,0))),1)\n</code></pre>\n"}], "owner": {"reputation": 56, "user_id": 6695627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab066ecc4a46d27b10ff21b124f2baf?s=128&d=identicon&r=PG", "display_name": "Thomas K&#252;hnert", "link": "https://stackoverflow.com/users/6695627/thomas-k%c3%bchnert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1583072815, "creation_date": 1558101373, "last_edit_date": 1558107526, "question_id": 56187943, "link": "https://stackoverflow.com/questions/56187943/perl-excelwriterxlsx-correct-syntax-for-the-excel-function-move-area-functio", "title": "Perl Excel::Writer::XLSX correct syntax for the Excel function Move Area.function", "body": "<p>I use the Perl module Excel::Writer::XLSX. If I enter the function directly in excel under data check it works. The modified form for the Perl script does not work.</p>\n\n<p>I have some sheets in my Excel file. Under 'data validation' -> 'list', I use this as 'source':</p>\n\n<pre><code>=BEREICH.VERSCHIEBEN(Boden_Subtyp!$E:$G;1;VERGLEICH(Profil!$G$2;Boden_Subtyp!$E$1:$G$1;0)-1;ANZAHL2(INDEX(Boden_Subtyp!$E:$G;;VERGLEICH(Profil!$G$2;Boden_Subtyp!$E$1:$G$1;0)));1)\n</code></pre>\n\n<p>It works.    </p>\n\n<p>If I use this in a modified form in my Perl script to create an Excel file with this function so I can't open the Excel file. The modified form:</p>\n\n<pre><code>=BEREICH.VERSCHIEBEN('Boden_Subtyp'!$E:$G;1;VERGLEICH('Profil'!$G$2;'Boden_Subtyp'!$E$1:$G$1;0)-1;ANZAHL2(INDEX('Boden_Subtyp'!$E:$G;;VERGLEICH('Profil'!$G$2;'Boden_Subtyp'!$E$1:$G$1;0)));1)\n</code></pre>\n\n<p>Code snipped:</p>\n\n<pre><code>$validate_source = \"=BEREICH.VERSCHIEBEN('Boden_Subtyp'!$E:$G;1;VERGLEICH('Profil'!$G$2;'Boden_Subtyp'!$E$1:$G$1;0)-1;ANZAHL2(INDEX('Boden_Subtyp'!$E:$G;;VERGLEICH('Profil'!$G$2;'Boden_Subtyp'!$E$1:$G$1;0)));1)\";\n$profil_zugriffshash -&gt; data_validation(\n    $iii,$spaltenzaehler,\n    {\n        validate =&gt; 'list',\n        source   =&gt; \"$validate_source\",\n    }\n);\n</code></pre>\n\n<p>If the Excel file is created I'll open it with Excel and get the error: excel's unreadable content was found ...</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1558120822, "post_id": 56183870, "comment_id": 99009433, "body": "How do you want to handle characters larger than 0xFFFF?"}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1558089547, "post_id": 56184145, "comment_id": 98994624, "body": "I got the expected output with <code>uc join &quot;&quot;, unpack &#39;(H2)*&#39;, pack &#39;(xa)*&#39;, split &#47;&#47;, $input</code>. I don&#39;t know how to shorten it :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1558122268, "post_id": 56184145, "comment_id": 99010004, "body": "@choroba, Replace <code>&#39;(xa)*&#39;</code> with <code>&#39;n*</code> to handle chars up to 0xFFFF instead of chars up to 0xFF. With that fix, simplifying <code>join &quot;&quot;, unpack &#39;(H2)*&#39;,</code> to <code>unpack &#39;H*&#39;,</code>, and replacing <code>split</code> with <code>unpack</code> for style, we get: <code>uc unpack &#39;H*&#39;, pack &#39;n*&#39;, unpack &#39;W*&#39;, $input</code>."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1558087510, "creation_date": 1558087510, "answer_id": 56184145, "question_id": 56183870, "link": "https://stackoverflow.com/questions/56183870/how-to-convert-char-string-to-hex-in-perl/56184145#56184145", "title": "How to convert char string to hex in perl", "body": "<p>One algorithm you can use to do this is:</p>\n\n<ul>\n<li>break the string into characters</li>\n<li>convert the character to <a href=\"https://perldoc.perl.org/functions/ord.html\" rel=\"noreferrer\">its numerical value</a> (also see <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"noreferrer\">ASCII</a> and <a href=\"https://perldoc.perl.org/perlunicode.html\" rel=\"noreferrer\">perlunicode</a>)</li>\n<li><a href=\"https://perldoc.perl.org/functions/sprintf.html\" rel=\"noreferrer\">convert</a> the base-10 number to hexadecimal with four digits</li>\n<li>stick it back together and/or output</li>\n</ul>\n\n<p>A possible implementation could be</p>\n\n<pre><code>print map { sprintf '%04X', ord } split //, 'hello world!';\n</code></pre>\n\n<p>The output of this program is </p>\n\n<pre><code>00680065006C006C006F00200077006F0072006C00640021\n</code></pre>\n\n<p>That said, there is probably a <a href=\"https://perldoc.perl.org/functions/pack.html\" rel=\"noreferrer\"><code>pack</code></a> implementation that I am not aware of.</p>\n"}, {"comments": [{"owner": {"reputation": 1792, "user_id": 3105222, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eSikW.png?s=128&g=1", "display_name": "FlorianB", "link": "https://stackoverflow.com/users/3105222/florianb"}, "edited": false, "score": 0, "creation_date": 1603036209, "post_id": 56184271, "comment_id": 113902614, "body": "And to make it work with any byte (including \\n for example) ([\\x00-\\xff]) would be preferable to (.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1792, "user_id": 3105222, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eSikW.png?s=128&g=1", "display_name": "FlorianB", "link": "https://stackoverflow.com/users/3105222/florianb"}, "edited": false, "score": 1, "creation_date": 1615452784, "post_id": 56184271, "comment_id": 117696482, "body": "@FlorianB, 1) <code>.</code> already matches newline because of <code>&#47;s</code> 2) Why would you want to needlessly limit yourself to the first 256 Unicode chars?!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1558123179, "last_edit_date": 1558123179, "creation_date": 1558087904, "answer_id": 56184271, "question_id": 56183870, "link": "https://stackoverflow.com/questions/56183870/how-to-convert-char-string-to-hex-in-perl/56184271#56184271", "title": "How to convert char string to hex in perl", "body": "<p>Here's another approach. Do it all in one go with a regex.</p>\n\n<pre><code>my $string = 'hello world!';\n$string =~ s/(.)/sprintf '%04x', ord $1/seg;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1558347257, "last_edit_date": 1558347257, "creation_date": 1558120662, "answer_id": 56192354, "question_id": 56183870, "link": "https://stackoverflow.com/questions/56183870/how-to-convert-char-string-to-hex-in-perl/56192354#56192354", "title": "How to convert char string to hex in perl", "body": "<p>The exiting answers provide the hex representation of the Unicode Code Points. </p>\n\n<p>That format doesn't permit the input to include any characters above 0xFFFF. If it were to permit this, there would be no way to know if</p>\n\n<pre><code>20000200002000020000\n</code></pre>\n\n<p>means</p>\n\n<pre><code>2000 0200 0020 0002 0000\n</code></pre>\n\n<p>or</p>\n\n<pre><code>20000 20000 20000 20000\n</code></pre>\n\n<p>If that's fine because you'll never have characters above 0xFFFF, then I recommend the following:</p>\n\n<pre><code>my $text = 'hello world!';\nmy $hex = uc unpack 'H*', pack 'n*', unpack 'W*', $text;\n</code></pre>\n\n<p>It should be much faster than the existing solutions, and it handles characters above 0xFFFF better than the existing solutions (since it still provides only 4 hex digits for characters above 0xFFFF).</p>\n\n<hr>\n\n<p>If, however, you want to handle all Unicode Code Points, the above solution and the solution provided by the earlier answers aren't adequate.</p>\n\n<p>With that in mind, I suspect you actually want the hex representation of the UTF-16be encoding of the Unicode Code Points. At worse, having a character above 0xFFFF will still produce useful and lossless output.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Code Point    Perl string lit  JSON string lit  Hex of UCP  Hex of UTF-16be\n------------  ---------------  ---------------  ----------  ---------------\nh  (U+0068)   \"\\x{68}          \"\\u0068\"         0068        0068\n\u00e9  (U+00E9)   \"\\x{E9}          \"\\u00E9\"         00E9        00E9\n\u1300  (U+1300)   \"\\x{1300}        \"\\u1300\"         1300        1300\n\ud840\udc00 (U+20000)  \"\\x{20000}       \"\\uD840\\uDC00\"   20000       D840DC00\n</code></pre>\n\n<p>If that's the case, you want</p>\n\n<pre><code>use Encode qw( encode );\n\nmy $text = 'hello world!';\nmy $hex = uc unpack 'H*', encode 'UTF-16be', $text;\n</code></pre>\n"}], "owner": {"reputation": 993, "user_id": 3707143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b2ef6644eeada3698459a882458eb69d?s=128&d=identicon&r=PG&f=1", "display_name": "Kirill", "link": "https://stackoverflow.com/users/3707143/kirill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3455, "favorite_count": 0, "accepted_answer_id": 56184271, "answer_count": 3, "score": 2, "last_activity_date": 1558347257, "creation_date": 1558086562, "last_edit_date": 1558086758, "question_id": 56183870, "link": "https://stackoverflow.com/questions/56183870/how-to-convert-char-string-to-hex-in-perl", "title": "How to convert char string to hex in perl", "body": "<p>I read this post:\n<a href=\"https://stackoverflow.com/questions/40738323/how-to-convert-hex-to-char-string-in-perl\">How to convert hex to char string in perl</a>\nto convert hex to chart string.</p>\n\n<p>How can I do reverse operation? I need convert char string to hex in perl. For example, I have string \"<strong>hello world!</strong>\" and I must get:</p>\n\n<pre><code>00680065006C006C006F00200077006F0072006C00640021\n</code></pre>\n"}, {"tags": ["perl", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1558192587, "post_id": 56182706, "comment_id": 99023496, "body": "Is there a way to override the subroutines from DBI to force a lowercase on hash keys?  So when an user requests @$resutls[0]-&gt;{hAsHkEy} that &#39;hAsHkEy&#39; gets to lower case automatically ?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 1, "creation_date": 1558388682, "post_id": 56182706, "comment_id": 99077247, "body": "@rooger That would be what tying the returned data structure would be. But you&#39;d have to tie each hash in the returned array. You could tie each hash with <a href=\"https://metacpan.org/pod/Tie::CPHash\" rel=\"nofollow noreferrer\">Tie::CPHash</a>: <code>tie %$_, &#39;Tie::CPHash&#39; for @$results</code>. But be warned this may significantly slow down your program. <a href=\"https://metacpan.org/pod/Variable::Magic\" rel=\"nofollow noreferrer\">Variable::Magic</a> would be a faster solution but there&#39;s no ready made option for this case. -- But in the end, I would just tell the user to lowercase all inputs, this is a common idiom."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1558082412, "creation_date": 1558082412, "answer_id": 56182706, "question_id": 56182633, "link": "https://stackoverflow.com/questions/56182633/perl-dbi-case-insensitive-methods/56182706#56182706", "title": "Perl DBI case insensitive methods", "body": "<p>You can't. Perl doesn't have case-insensitive strings. </p>\n\n<p>The closest you could come would be to use <code>NAME_lc</code> and then pass every value through <a href=\"https://perldoc.perl.org/functions/lc.html\" rel=\"nofollow noreferrer\"><code>lc</code></a> before trying to use it as a key name.</p>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558082412, "creation_date": 1558082124, "question_id": 56182633, "link": "https://stackoverflow.com/questions/56182633/perl-dbi-case-insensitive-methods", "title": "Perl DBI case insensitive methods", "body": "<p>I'm trying to make selectall_arrayref subroutine from DBI to return case insensitive hash keys. For example:   </p>\n\n<pre><code>my $dbh = DBI-&gt;connect('dbi:Oracle:' . 'host','user','pass',\n        {\n            RaiseError =&gt; 1, \n            PrintError =&gt; 0,\n            AutoCommit =&gt; 1\n        }\n        ) || die( $DBI::errstr . \"\\n\" );\n$dbh-&gt;do('alter session set NLS_COMP=LINGUISTIC'); # this doesn't work \n$dbh-&gt;do('alter session set NLS_SORT=BINARY_CI'); # this doesn't work\n\n\nmy $query = 'select test_id from test_table';\nmy $result = $dbh-&gt;selectall_arrayref($query, {Slice=&gt;{}});\n\nprint(@$result[0]-&gt;{TEST_ID}); #works   \nprint(@$result[0]-&gt;{test_id}); #does not work but I want to make it work\nprint(@$result[0]-&gt;{tEsT_Id}); #does not work but I want to make it work\n</code></pre>\n\n<p>I know that DBI has this setting:   </p>\n\n<pre><code>$dbh-&gt;{FetchHashKeyName} = 'NAME_uc' #upper case keys\n$dbh-&gt;{FetchHashKeyName} = 'NAME_lc' #lower case keys\n$dbh-&gt;{FetchHashKeyName} = 'NAME' #default\n</code></pre>\n\n<p>Yes, if I set one of these, it works for the respective case, but I want to somehow rewrite the selectall_arrayref subroutine to return keys insenstive, so I could use lower,upper or combined lower and upper case.   </p>\n\n<p>How can I achieve something like this?   </p>\n\n<p>I would be interested to achieve this on other subroutines too from DBI.   </p>\n\n<p>I'm currently using DBD::Oracle for Oracle and DBD::Sybase for Microsoft SQL Server.<br>\nThank you,</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "is_accepted": true, "score": 5, "last_activity_date": 1558117214, "last_edit_date": 1558117214, "creation_date": 1558079001, "answer_id": 56181846, "question_id": 56181561, "link": "https://stackoverflow.com/questions/56181561/why-perl-doesnt-recognize-i-want-to-create-an-arrayref-with-split/56181846#56181846", "title": "why perl doesn&#39;t recognize i want to create an arrayRef with &quot;split&quot;?", "body": "<p>What you see here is called \"context\". The documentation about this is rather scattered. You also want to take a look at this tutorial about \"scalar vs list context\"  <a href=\"https://perlmaven.com/scalar-and-list-context-in-perl\" rel=\"nofollow noreferrer\">https://perlmaven.com/scalar-and-list-context-in-perl</a></p>\n\n<p>If you assign the result of split (or any subroutine calls) to an array, it's list context:</p>\n\n<pre><code>my @arr = split ' ', $name;\n#=&gt; @arr = ('hans', 'georg', 'mustermann');\n</code></pre>\n\n<p>What your example code shows is assigning them to a scalar -- and therefore it's under \"scalar context\".</p>\n\n<p>Since, naturally, multiple things cannot fit into one position, some sort of summarization needs to be done. In the case of <code>split</code> function, perl5 has defined that the number of elements in the result of <code>split</code> shall be the best.</p>\n\n<p>Check the documentation of the <code>split</code> function: <a href=\"https://perldoc.pl/functions/split\" rel=\"nofollow noreferrer\">https://perldoc.pl/functions/split</a> -- which actually defines the behaviour under scalar context as well as list context.</p>\n\n<p>Also take a glance at the documentation of all builtin functions at <a href=\"https://perldoc.pl/functions\" rel=\"nofollow noreferrer\">https://perldoc.pl/functions</a>  -- you'll find the behaviour definition under \"list context\" and \"scalar context\" for most of them -- although many of them are not returning \"the size of lists\" but rather something else.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558388905, "post_id": 56181927, "comment_id": 99077306, "body": "To be specific, it&#39;s the <code>split</code> function that counts the number of elements in scalar context, not lists themselves. Arrays also return a count in scalar context, but the comma operator, list slices, and qw operator do not, for example."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1558079263, "creation_date": 1558079263, "answer_id": 56181927, "question_id": 56181561, "link": "https://stackoverflow.com/questions/56181561/why-perl-doesnt-recognize-i-want-to-create-an-arrayref-with-split/56181927#56181927", "title": "why perl doesn&#39;t recognize i want to create an arrayRef with &quot;split&quot;?", "body": "<p>That's called <a href=\"http://modernperlbooks.com/books/modern_perl_2016/01-perl-philosophy.html#Q29udGV4dA\" rel=\"nofollow noreferrer\"><strong>context</strong></a>.</p>\n\n<p>The partial expression <code>split ' ', $name</code> evaluates to a list. The partial expression <code>$array = LIST</code> coerces the list to a scalar value, namely counting the number of elements in the list. That's the default behaviour of lists in scalar context.</p>\n\n<p>You should write <code>@array = LIST</code> instead, using an array variable, not a scalar variable, in order to preserve the list values.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1558081820, "creation_date": 1558081820, "answer_id": 56182560, "question_id": 56181561, "link": "https://stackoverflow.com/questions/56181561/why-perl-doesnt-recognize-i-want-to-create-an-arrayref-with-split/56182560#56182560", "title": "why perl doesn&#39;t recognize i want to create an arrayRef with &quot;split&quot;?", "body": "<p>If you read the <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">documentation for <code>split()</code></a>, you'll find the bit that explains what the function returns.</p>\n\n<blockquote>\n  <p>Splits the string EXPR into a list of strings and returns the list in list context, or the size of the list in scalar context.</p>\n</blockquote>\n\n<p>You're calling the function in scalar context (because you're assigning the result of the call to a scalar variable) so you're getting the size of the list.</p>\n\n<p>If you want to get the list, then you need to store it either in a list of variables:</p>\n\n<pre><code>my ($forename, $middlename, $surname) = split ' ', $name;\n</code></pre>\n\n<p>Or (more usually) in an array:</p>\n\n<pre><code>my @name_parts = split ' ', $name;\n</code></pre>\n\n<p>But actually, you say that you want an array reference. You can do that by calling <code>split()</code> inside an anonymous array constructor (<code>[ ... ]</code>) and assigning the result of that call to a scalar variable.</p>\n\n<pre><code>my $name_parts = [ split ' ', $name ];\n</code></pre>\n"}], "owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 56181846, "answer_count": 3, "score": 1, "last_activity_date": 1558117214, "creation_date": 1558077866, "question_id": 56181561, "link": "https://stackoverflow.com/questions/56181561/why-perl-doesnt-recognize-i-want-to-create-an-arrayref-with-split", "title": "why perl doesn&#39;t recognize i want to create an arrayRef with &quot;split&quot;?", "body": "<p>I want to split a scalar by whitespaces and save the result in an ArrayReference.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $name = 'hans georg      mustermann';\nmy $array = split ' ', $name;\n\nprint Dumper($array);     #$VAR1 = 3;\n</code></pre>\n\n<p>So it seems <code>$array</code> is now a scalar with the <code>size</code> resulted by the <code>split</code> operation.</p>\n\n<p>When i change the code to <code>my $array = [split ' ', $name];</code> the variable <code>$array</code> is now a ArrayReference and contains all 3 strings.</p>\n\n<p>I just don't understand this behavior. Would be really great if someone could explain it to me or post a good documentation about these things, as i don't know how to search for this topic.</p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["regex", "perl", "awk", "grep", "salt"], "comments": [{"owner": {"reputation": 1874, "user_id": 11053344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf3a714fab6df963d0193526cffc5b?s=128&d=identicon&r=PG&f=1", "display_name": "vintnes", "link": "https://stackoverflow.com/users/11053344/vintnes"}, "edited": false, "score": 2, "creation_date": 1558054233, "post_id": 56178127, "comment_id": 98982713, "body": "Please show your exact desired output."}, {"owner": {"reputation": 1874, "user_id": 11053344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf3a714fab6df963d0193526cffc5b?s=128&d=identicon&r=PG&f=1", "display_name": "vintnes", "link": "https://stackoverflow.com/users/11053344/vintnes"}, "edited": false, "score": 1, "creation_date": 1558055320, "post_id": 56178127, "comment_id": 98982936, "body": "The best way is to use <code>jq</code> to parse the json output, but <code>awk</code> can do this quite trivially if we know what exactly you want."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1558056517, "post_id": 56178127, "comment_id": 98983187, "body": "You&#39;re doing it backwards. Don&#39;t write a tool to produce the data from the &quot;readable output&quot;, write a tool to produce the &quot;readable output&quot; from JSON."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1558133051, "last_edit_date": 1558133051, "creation_date": 1558062331, "answer_id": 56179028, "question_id": 56178127, "link": "https://stackoverflow.com/questions/56178127/parse-default-salt-highstate-output/56179028#56179028", "title": "Parse default Salt highstate output", "body": "<pre><code>perl -e'\n   use strict;\n   use warnings qw( all );\n\n   use Text::CSV_XS qw( );\n\n   my $csv = Text::CSV_XS-&gt;new({ auto_diag =&gt; 2, binary =&gt; 1 });\n   $csv-&gt;say(select(), [qw( instance unchanged change warning failed )]);\n\n   my ( $instance, $unchanged, $changed, $warning, $failed );\n   while (&lt;&gt;) {\n      if (/^Summary for (\\S+)/) {\n         ( $instance, $unchanged, $changed, $warning, $failed ) = $1;\n      }\n      elsif (/^Succeeded:\\s+\\d+ \\(unchanged=(\\d+), changed=(\\d+)\\)/) {\n         ( $unchanged, $changed ) = ( $1, $2 );\n      }\n      elsif (/^Warning:\\s+(\\d+)/) {\n         $warning = $1;\n      }\n      elsif (/^Failed:\\s+(\\d+)/) {\n         $failed = $1;\n         $csv-&gt;say(select(), [ $instance, $unchanged, $changed, $warning, $failed ]);\n      }\n   }\n'\n</code></pre>\n\n<p>Provide input via STDIN, or provide path to file(s) from which to read as arguments.</p>\n\n<hr>\n\n<p>Terse version:</p>\n\n<pre><code>perl -MText::CSV_XS -ne'\n   BEGIN {\n      $csv = Text::CSV_XS-&gt;new({ auto_diag =&gt; 2, binary =&gt; 1 });\n      $csv-&gt;say(select(), [qw( instance unchanged change warning failed )]);\n   }\n   /^Summary for (\\S+)/ and @row=$1;\n   /^Succeeded:\\s+\\d+ \\(unchanged=(\\d+), changed=(\\d+)\\)/ and @row[1,2]=($1,$2);\n   /^Warning:\\s+(\\d+)/ and $row[3]=$1;\n   /^Failed:\\s+(\\d+)/ and ($row[4]=$1), $csv-&gt;say(select(), \\@row);\n'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "edited": false, "score": 0, "creation_date": 1558123190, "post_id": 56179204, "comment_id": 99010350, "body": "good concise solution. And is hold all records in memory and spit it out. This fails the theme of awk stream processing."}, {"owner": {"reputation": 1874, "user_id": 11053344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf3a714fab6df963d0193526cffc5b?s=128&d=identicon&r=PG&f=1", "display_name": "vintnes", "link": "https://stackoverflow.com/users/11053344/vintnes"}, "reply_to_user": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "edited": false, "score": 1, "creation_date": 1558131145, "post_id": 56179204, "comment_id": 99012807, "body": "@DudiBoy It only holds each <code>out</code> until <code>&#47;^Summary&#47;</code> is encountered. It runs <code>END{print out}</code> in order to handle the last record."}, {"owner": {"reputation": 1874, "user_id": 11053344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf3a714fab6df963d0193526cffc5b?s=128&d=identicon&r=PG&f=1", "display_name": "vintnes", "link": "https://stackoverflow.com/users/11053344/vintnes"}, "reply_to_user": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "edited": false, "score": 0, "creation_date": 1558132742, "post_id": 56179204, "comment_id": 99013190, "body": "@DudiBoy made more clear and concise; please see edit"}], "tags": [], "owner": {"reputation": 1874, "user_id": 11053344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf3a714fab6df963d0193526cffc5b?s=128&d=identicon&r=PG&f=1", "display_name": "vintnes", "link": "https://stackoverflow.com/users/11053344/vintnes"}, "is_accepted": false, "score": 1, "last_activity_date": 1558132718, "last_edit_date": 1558132718, "creation_date": 1558063841, "answer_id": 56179204, "question_id": 56178127, "link": "https://stackoverflow.com/questions/56178127/parse-default-salt-highstate-output/56179204#56179204", "title": "Parse default Salt highstate output", "body": "<p>Here you go. This will also work if your output contains warnings. Please note that the output is in a different order than you specified; it's the order in which each record occurs in the file. Don't hesitate with any questions.</p>\n\n<pre><code>$ awk -v OFS=, '\n        BEGIN        { print \"instance,unchanged,changed,warning,failed\" }\n        /^Summary/   { instance=$NF }\n        /^Succeeded/ { split($3 $4 $5, S, /[^0-9]+/) }\n        /^Failed/    { print instance, S[2], S[3], S[4], $2 }\n' \"$_FILE\"\n</code></pre>\n\n<ul>\n<li><code>split($3 $4 $5, S, /[^0-9]+/)</code> handles the possibility of warnings by disregarding the first two \"words\" <code>Succeeded: ###</code> and using any number of non-digits as a separator. </li>\n</ul>\n\n<p><em>edit:</em> Printed on <code>/^Fail/</code> instead of using <code>/^Summ/</code> and <code>END</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1874, "user_id": 11053344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabf3a714fab6df963d0193526cffc5b?s=128&d=identicon&r=PG&f=1", "display_name": "vintnes", "link": "https://stackoverflow.com/users/11053344/vintnes"}, "edited": false, "score": 1, "creation_date": 1558131428, "post_id": 56193924, "comment_id": 99012890, "body": "This is GNU Awk only; it depends on <code>match(string, regex, array)</code>. It&#39;s also too brittle to handle the output that would be generated if a warning was encountered."}], "tags": [], "owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1558130245, "last_edit_date": 1558130245, "creation_date": 1558129410, "answer_id": 56193924, "question_id": 56178127, "link": "https://stackoverflow.com/questions/56178127/parse-default-salt-highstate-output/56193924#56193924", "title": "Parse default Salt highstate output", "body": "<p>Improving answer from @vintnes.\nProducing output as tab separated CSV </p>\n\n<p>Write awk script that reads values from lines by their order.\nPrint each record as it is read.</p>\n\n<h3>script.awk</h3>\n\n<pre><code>BEGIN {print(\"computer\",\"succeeded\",\"unchanged\",\"changed\",\"failed\",\"states run\",\"run time\");}\nFNR%8 == 1 {arr[1] = $3}\nFNR%8 == 3 {arr[2] = $2; arr[3] = extractNum($3); arr[4] = extractNum($4)}\nFNR%8 == 4 {arr[5] = $2;}\nFNR%8 == 6 {arr[6] = $4;}\nFNR%8 == 7 {arr[7] = $4; print arr[1],arr[2],arr[3],arr[4],arr[5],arr[6],arr[7];}\n\nfunction extractNum(str){match(str,/[[:digit:]]+/,m);return m[0];}\n</code></pre>\n\n<h3>run script</h3>\n\n<p>Tab separated CSV output</p>\n\n<pre><code>awk -v OFS=\"\\t\" -f script.awk input-1.txt input-2.txt ...\n</code></pre>\n\n<p>Comma separated CSV output</p>\n\n<pre><code>awk -v OFS=\",\" -f script.awk input-1.txt input-2.txt ...\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>computer        succeeded       unchanged        changed failed  states run      run time\napp1.domain.com 278     12      6       0       278     7.383\napp2.domain.com 278     12      6       0       278     7.448\napp0.domain.com 293     13      6       0       293     7.510\n\ncomputer,succeeded,unchanged,changed,failed,states run,run time\napp1.domain.com,278,12,6,0,278,7.383\napp2.domain.com,278,12,6,0,278,7.448\napp0.domain.com,293,13,6,0,293,7.510\n</code></pre>\n\n<h3>Explanation</h3>\n\n<p><code>BEGIN {print(\"computer\",\"succeeded\",\"unchanged\",\"changed\",\"failed\",\"states run\",\"run time\");}</code></p>\n\n<p>Print the heading CSV line</p>\n\n<p><code>FNR%8 == 1 {arr[1] = $3}</code></p>\n\n<p>Extract the arr[1] value from 3rd field in (first line from 8 lines)</p>\n\n<p><code>FNR%8 == 3 {arr[2] = $2; arr[3] = extractNum($3); arr[4] = extractNum($4)}</code></p>\n\n<p>Extract the arr[2,3,4] values from 2nd,3rd,4th fields in (third line from 8 lines)</p>\n\n<p><code>FNR%8 == 4 {arr[5] = $2;}</code></p>\n\n<p>Extract the arr[5] value from 2nd field in (4th line from 8 lines)</p>\n\n<p><code>FNR%8 == 6 {arr[6] = $4;}</code></p>\n\n<p>Extract the arr[6] value from 4th field in (6th line from 8 lines)</p>\n\n<p><code>FNR%8 == 7 {arr[7] = $4;</code> </p>\n\n<p>Extract the arr[7] value from 4th field in (7th line from 8 lines)</p>\n\n<p><code>print arr[1],arr[2],arr[3],arr[4],arr[5],arr[6],arr[7];}</code></p>\n\n<p>print the array elements for the extracted variable at the completion of reading 7th line from 8 lines.</p>\n\n<p><code>function extractNum(str){match(str,/[[:digit:]]+/,m);return m[0];}</code></p>\n\n<p>Utility function to extract numbers from text field.</p>\n"}], "owner": {"reputation": 1571, "user_id": 1039166, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/G0a5H.jpg?s=128&g=1", "display_name": "David Vasandani", "link": "https://stackoverflow.com/users/1039166/david-vasandani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1558133051, "creation_date": 1558053044, "last_edit_date": 1558062609, "question_id": 56178127, "link": "https://stackoverflow.com/questions/56178127/parse-default-salt-highstate-output", "title": "Parse default Salt highstate output", "body": "<p>I'm trying to parse the highstate output of Salt has proven to be difficult. Without changing the output to <code>json</code> due to the fact that I still want it to be human legible. </p>\n\n<p>What's the best way to convert the Summary into something machine readable?</p>\n\n<pre><code>Summary for app1.domain.com\n--------------\nSucceeded: 278 (unchanged=12, changed=6)\nFailed:      0\n--------------\nTotal states run:     278\nTotal run time:     7.383 s\n--\nSummary for app2.domain.com\n--------------\nSucceeded: 278 (unchanged=12, changed=6)\nFailed:      0\n--------------\nTotal states run:     278\nTotal run time:     7.448 s\n--\nSummary for app0.domain.com\n--------------\nSucceeded: 293 (unchanged=13, changed=6)\nFailed:      0\n--------------\nTotal states run:     293\nTotal run time:     7.510 s\n</code></pre>\n\n<p>Without a better idea I'm trying to grep and awk the output and insert it into a csv.</p>\n\n<p>These two work:</p>\n\n<pre><code>cat ${_FILE} | grep Summary | awk '{ print $3} ' | \\\n    tr '\\n' ',' | sed '$s/,$/\\n/' &gt;&gt; /tmp/highstate.csv;\n\ncat ${_FILE} | grep -oP '(?&lt;=unchanged=)[0-9]+' | \\\n    tr '\\n' ',' | sed '$s/,$/\\n/' &gt;&gt; /tmp/highstate.csv;\n</code></pre>\n\n<p>But this one fails but works in <a href=\"http://regexr.com/4e4s4\" rel=\"nofollow noreferrer\">Reger</a></p>\n\n<pre><code>cat ${_FILE} | grep -oP '(?&lt;=\\schanged=)[0-9]+' | \\\n    tr '\\n' ',' | sed '$s/,$/\\n/' &gt;&gt; /tmp/highstate.csv;\n</code></pre>\n\n<p>EDIT1: @vintnes @ikegami I agree I'd much rather take the json output parse the output but Salt doesn't offer a summary of changes when outputting to josn. So far this is what I have and while very ugly, it's working.</p>\n\n<pre><code>cat ${_FILE} | grep Summary | awk '{ print $3} ' | \\\n    tr '\\n' ',' | sed '$s/,$/\\n/' &gt;&gt; /tmp/highstate_tmp.csv;\n\ncat ${_FILE} | grep -oP '(?&lt;=unchanged=)[0-9]+' | \\\n    tr '\\n' ',' | sed '$s/,$/\\n/' &gt;&gt; /tmp/highstate_tmp.csv;\n\ncat ${_FILE} | grep unchanged | awk -F' ' '{ print $4}' | \\\n    grep -oP '(?&lt;=changed=)[0-9]+' | tr '\\n' ',' | sed '$s/,$/\\n/' &gt;&gt; /tmp/highstate_tmp.csv;\n\ncat ${_FILE} | { grep \"Warning\" || true; } | awk -F: '{print $2+0} END { if (!NR) print \"null\" }' | \\\n    tr '\\n' ',' | sed '$s/,$/\\n/' &gt;&gt; /tmp/highstate_tmp.csv;\n\ncat ${_FILE} | { grep \"Failed\" || true; } | awk -F: '{print $2+0} END { if (!NR) print \"null\" }' | \\\n    tr '\\n' ',' | sed '$s/,$/\\n/' &gt;&gt; /tmp/highstate_tmp.csv;\n\ncsvtool transpose /tmp/highstate_tmp.csv &gt; /tmp/highstate.csv;\n\nsed -i '1 i\\instance,unchanged,changed,warning,failed' /tmp/highstate.csv;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>instance,unchanged,changed,warning,failed\napp1.domain.com,12,6,,0\napp0.domain.com,13,6,,0\napp2.domain.com,12,6,,0\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 2, "creation_date": 1558042761, "post_id": 56176891, "comment_id": 98980377, "body": "You should probably show what you&#39;ve tried so far so that others can fill in the blanks rather than asking people to write the full script themselves."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1558043901, "post_id": 56176891, "comment_id": 98980678, "body": "Why not keep track of the most recent Row line so you don&#39;t have to go backwards?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1558050713, "last_edit_date": 1558050713, "creation_date": 1558044934, "answer_id": 56177255, "question_id": 56176891, "link": "https://stackoverflow.com/questions/56176891/how-to-parse-files-for-a-string-search-backwards-for-another-string-and-export/56177255#56177255", "title": "How to parse files for a string, search backwards for another string and export the full line where that string occurs to a file", "body": "<p>Just record the most recently encountered <code>##Row</code> line.</p>\n\n<pre><code>my $row;\nwhile (&lt;&gt;) {\n   $row = $_  if /##Row/;\n   print $row if /##Unable to connect/;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11510394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b9d9883fa542688d6630dfc052337ed?s=128&d=identicon&r=PG&f=1", "display_name": "Perl", "link": "https://stackoverflow.com/users/11510394/perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558050713, "creation_date": 1558042494, "question_id": 56176891, "link": "https://stackoverflow.com/questions/56176891/how-to-parse-files-for-a-string-search-backwards-for-another-string-and-export", "title": "How to parse files for a string, search backwards for another string and export the full line where that string occurs to a file", "body": "<p>I am trying to search multiple time stamp based log files for a matching phrase \"##Unable to connect\", then search backwards (these are time stamped log files) until I find \"##Row\" and export that full line of text to a file.</p>\n\n<p>I need to search 100's of log files that indicate a disconnect error (##unable to connect\" and find the locations (##row....\" where the disconnects are occurring to analyze the data for locations trends where the disconnects are happening.</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1558006431, "creation_date": 1558006431, "answer_id": 56167625, "question_id": 56167146, "link": "https://stackoverflow.com/questions/56167146/how-to-compare-nested-hashes/56167625#56167625", "title": "How to compare nested hashes", "body": "<p>Here is an example how you can compare the values for a given user in the sub hashes. Assuming your hash is called <code>$info</code>:</p>\n\n<pre><code>use List::Util qw(uniq);\n\nmy $info = { ... };  # Set up the hash here\nmy $user = \"5678903\";\nmy $status = get_user_value( $info, 'status', $user );\nmy $age = get_user_value( $info, 'age', $user );\n\nif ( ((uniq @$status) == 1) &amp;&amp; ((uniq @$age) == 1) ) {\n    say \"Same status and age\";\n}\nelse {\n    say \"Not same status and age\";\n}\n\nsub get_user_value {\n    my ( $info, $key, $user ) = @_;\n\n    my @values;\n    for my $server (keys %$info) {\n        if (exists $info-&gt;{$server}{$user}) {\n            push @values, $info-&gt;{$server}{$user}{$key}\n              if exists $info-&gt;{$server}{$user}{$key};\n        }\n    }\n    return \\@values;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7060018, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202613861703656/picture?type=large", "display_name": "Peter F", "link": "https://stackoverflow.com/users/7060018/peter-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 56167625, "answer_count": 1, "score": 0, "last_activity_date": 1558006431, "creation_date": 1558004844, "question_id": 56167146, "link": "https://stackoverflow.com/questions/56167146/how-to-compare-nested-hashes", "title": "How to compare nested hashes", "body": "<p>I'm trying to compare data in hash in order to find differences.\nMy hash:</p>\n\n<pre><code>$VAR1 = {\n10.200.40.10 =&gt; {\n                5678903  =&gt; { \n                                'status' =&gt; 'ACTIVE',\n                                'age'    =&gt; '20'\n                            }\n                8234234  =&gt; {\n                                'status' =&gt; 'NOT ACTIVE',\n                                'age'    =&gt; '23'\n                            }\n                }        \n10.200.40.11 =&gt; {        \n                5678903  =&gt; { \n                                'status' =&gt; 'NOT ACTIVE',\n                                'age'    =&gt; '20'\n                            }\n                8234234  =&gt; {\n                                'status' =&gt; 'NOT ACTIVE',\n                                'age'    =&gt; '23'\n                            }\n                }        \n10.200.40.12 =&gt; {        \n                5678903  =&gt; { \n                                'status' =&gt; 'NOT ACTIVE',\n                                'age'    =&gt; '21'\n                            }\n                8234234  =&gt; {\n                                'status' =&gt; 'ACTIVE',\n                                'age'    =&gt; '23'\n                            }\n                }\n}\n</code></pre>\n\n<p>I would like to check if the same user e.g with ID 5678903 has the same values of status and age on each server. Should I divide it for three separated hashes?</p>\n\n<p>Thanks for all suggestions!</p>\n"}, {"tags": ["bash", "perl", "awk"], "answers": [{"tags": [], "owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "is_accepted": true, "score": 5, "last_activity_date": 1558607293, "last_edit_date": 1558607293, "creation_date": 1557999854, "answer_id": 56165560, "question_id": 56164408, "link": "https://stackoverflow.com/questions/56164408/converting-second-pattern-to-millisecond-in-awk/56165560#56165560", "title": "Converting second pattern to millisecond in awk", "body": "<p>What I will try to do here is explain it a bit generic and then apply it to your case.</p>\n\n<blockquote>\n  <p><strong>Question:</strong> I have a string of the form <code>123a456b7c8d</code> where the numbers are numeric integral values of any length and the letters are corresponding units. I also have conversion factors to convert from unit <code>a,b,c,d</code> to unit <code>f</code>. How can I convert this to a single quantity of unit <code>f</code>?</p>\n  \n  <p><strong>Example:</strong>  from <code>1s183ms</code> to <code>1183ms</code></p>\n</blockquote>\n\n<p><strong>Strategy:</strong></p>\n\n<ol>\n<li>create per string a set of key-value pairs   <code>'a' =&gt; 123</code>,<code>'b' =&gt; 456</code>, <code>'c' =&gt; 7</code> and <code>'d' =&gt; 8</code></li>\n<li>multiply each value with the corect conversion factor</li>\n<li>add the numbers together</li>\n</ol>\n\n<p>Assume we use awk and the key-value pairs are stored in array <code>a</code> with the key as an index.</p>\n\n<ol>\n<li><p>Extract key-value pairs from <code>str</code>:</p>\n\n<pre><code>function extract(str,a,   t,k,v) {\n   delete a; t=str; \n   while(t!=\"\") { \n      v=t+0; match(t,/[a-zA-Z]+/); k=substr(t,RSTART,RLENGTH);\n      t=substr(t,RSTART+RLENGTH);\n      a[k]=v\n   }\n   return\n }\n</code></pre></li>\n<li><p>convert and sum: here we assume we have an array <code>f</code> which contains the conversion factors:</p>\n\n<pre><code>function convert(a,f,  t,k) {\n   t=0; for(k in a) t+=a[k] * f[k]\n   return t\n}\n</code></pre></li>\n<li><p>The full code (for the example of the OP)</p>\n\n<pre><code># set conversion factors\nBEGIN{ f['s']=1000; f['ms'] = 1 }\n# print first word\nBEGIN{ printf \"App:\" }\n# extract string and print\n/^App/ { extract($2,a); printf OFS \"%dms\", convert(a,f) }\nEND { printf ORS }\n</code></pre></li>\n</ol>\n\n<p>which outputs:</p>\n\n<pre><code> App: 1170ms 186ms 1171ms 1484ms 1227ms 204ms 1180ms 1177ms 1183ms 1155ms\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "reply_to_user": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "edited": false, "score": 1, "creation_date": 1558075115, "post_id": 56172164, "comment_id": 98987386, "body": "@Arya See my answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "edited": false, "score": 1, "creation_date": 1558076624, "post_id": 56172164, "comment_id": 98988022, "body": "@Arya  (1) But you provided <code>perl</code> tag (under the question), which means that you are interested in Perl as well -- and so here you clearly have a Perl answer.  Why do you ask about other languages?  (2) There is also another answer (given in a form of an algorithm which can be used in any language) -- did you not see it?"}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "reply_to_user": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1558111576, "post_id": 56172164, "comment_id": 99005908, "body": "@kvantour gave a really high quality awk answer. I just added this because of the <code>perl</code> tag.  For this question, perl happens to do a number of things automagically that make the code succinct."}, {"owner": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "edited": false, "score": 0, "creation_date": 1558592449, "post_id": 56172164, "comment_id": 99153375, "body": "Your code is not provide correct output. See the new test case uploaded above."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "reply_to_user": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "edited": false, "score": 0, "creation_date": 1558626007, "post_id": 56172164, "comment_id": 99171625, "body": "@Arya This is rude.  You totally changed the formatting of the input data.  Which makes a totally new question.  I&#39;m not clairvoyant."}], "tags": [], "owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "is_accepted": false, "score": 1, "last_activity_date": 1558075191, "last_edit_date": 1558075191, "creation_date": 1558021121, "answer_id": 56172164, "question_id": 56164408, "link": "https://stackoverflow.com/questions/56164408/converting-second-pattern-to-millisecond-in-awk/56172164#56172164", "title": "Converting second pattern to millisecond in awk", "body": "<pre><code>perl -n -e '$s=0; ($s)=/(\\d+)s/; ($ms)=/(\\d+)ms/;\n            s/^(\\w+):/push @{$vals{$1}}, $ms+$s*1000/e;\n            eof &amp;&amp; print \"$_: @{$vals{$_}}\\n\" for keys %vals;' file`\n</code></pre>\n\n<ul>\n<li><code>perl -n</code> doesn't print anything as it loops through the input.</li>\n<li><code>$s</code> and <code>$ms</code> are set to those fields.  <code>$s</code> is ensured to reset to zero</li>\n<li><code>s///e</code> is stuffing the <code>%vals</code> hash with a list of numbers in ms for each key, <code>App</code>, in this case.</li>\n<li><code>eof &amp;&amp;</code> executes the subsequent code after the end of the file.</li>\n<li><code>print \"$_: @{$vals{$_}}\\n\" for keys %vals</code> is printing the <code>%vals</code> hash as the OP wants.</li>\n</ul>\n\n<blockquote>\n  <p>App: 1170 186 1171 1484 1227 204 1180 1177 1183 1155</p>\n</blockquote>\n"}], "owner": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "accepted_answer_id": 56165560, "answer_count": 2, "score": 0, "last_activity_date": 1558626647, "creation_date": 1557996244, "last_edit_date": 1558626647, "question_id": 56164408, "link": "https://stackoverflow.com/questions/56164408/converting-second-pattern-to-millisecond-in-awk", "title": "Converting second pattern to millisecond in awk", "body": "<p>I have file which is having pattern 's' , I need to convert into 'ms' by multiplying by 1000. I am unable to do it. Please help me.</p>\n\n<p>file.txt</p>\n\n<pre><code>First launch 1\nApp: +1s170ms\n\nFirst launch 2\nApp: +186ms\n\nFirst launch 3\nApp: +1s171ms\n\nFirst launch 4\nApp: +1s484ms\n\nFirst launch 5\nApp: +1s227ms\n\nFirst launch 6\nApp: +204ms\n\nFirst launch 7\nApp: +1s180ms\n\nFirst launch 8\nApp: +1s177ms\n\nFirst launch 9\nApp: +1s183ms\n\nFirst launch 10\nApp: +1s155ms\n</code></pre>\n\n<p>My code: </p>\n\n<pre><code>awk 'BEGIN { FS=\"[: ]+\"}\n/:/ &amp;&amp; $2 ~/ms$/{vals[$1]=vals[$1] OFS $2+0;next}\nEND {\n         for (key in vals)\n          print key vals[key]\n}' file.txt\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>App 1170 186 1171 1484 1227 204 1180 1177 1183 1155\n</code></pre>\n\n<p>Output Coming:</p>\n\n<pre><code>App 1 186 1 1 1 204 1 1 1 1\n</code></pre>\n\n<p>How to convert in above pattern 's' to 'ms' if second pattern comes .</p>\n"}, {"tags": ["perl", "switch-statement"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1557995319, "post_id": 56163925, "comment_id": 98955459, "body": "What is <code>switch</code>? Is it from a module or something?"}, {"owner": {"reputation": 9855, "user_id": 7780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9668c1ebea8ecea9f1ac4474236b5e?s=128&d=identicon&r=PG", "display_name": "dsm", "link": "https://stackoverflow.com/users/7780/dsm"}, "edited": false, "score": 1, "creation_date": 1557996579, "post_id": 56163925, "comment_id": 98956136, "body": "It should say <code>else</code>, not <code>default</code> (Unless you have Perl 6, that is). See: <a href=\"https://perldoc.perl.org/5.8.9/Switch.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/5.8.9/Switch.html</a>"}, {"owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "edited": false, "score": 0, "creation_date": 1557998111, "post_id": 56163925, "comment_id": 98956982, "body": "added else still not working"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1558015694, "post_id": 56163925, "comment_id": 98967519, "body": "Please update your question showing the code that is still not working"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1558017006, "post_id": 56163925, "comment_id": 98968360, "body": "If this is the old <a href=\"https://perldoc.pl/5.12.5/Switch\" rel=\"nofollow noreferrer\">Switch</a> module, it was removed from Perl core in 5.14 and should be avoided at all costs. It&#39;s a terrible source filter that causes inscrutable issues throughout your code. The <a href=\"https://perldoc.pl/perlsyn#Switch-Statements\" rel=\"nofollow noreferrer\">experimental switch feature</a> should also be avoided as it relies on confusing and complicated behavior of both when and smartmatch. Consider <a href=\"https://metacpan.org/pod/Switch::Plain\" rel=\"nofollow noreferrer\">Switch::Plain</a>."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1558081351, "creation_date": 1558081351, "answer_id": 56182436, "question_id": 56163925, "link": "https://stackoverflow.com/questions/56163925/why-is-this-throwing-error-bad-switch-statement/56182436#56182436", "title": "Why is this throwing error Bad switch statement", "body": "<p>It looks like you're using the <a href=\"https://metacpan.org/pod/Switch\" rel=\"nofollow noreferrer\">Switch</a> module. There was a time when this was included in the standard Perl distribution (from 5.8 to 5.10) but it's a source filter, which is a short way of saying \"this does incredibly complicated things to parse your Perl code and is almost guaranteed to break in hard-to-find ways at some point\".</p>\n\n<p>Please don't use it.</p>\n\n<p>But if you insist on using it, then replace <code>default</code> with <code>else</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 5035398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aTRUoUpeyvQ/AAAAAAAAAAI/AAAAAAAAA3M/d1TDAyu_Wqc/photo.jpg?sz=128", "display_name": "Anupam Das", "link": "https://stackoverflow.com/users/5035398/anupam-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 56182436, "answer_count": 1, "score": -2, "last_activity_date": 1558081351, "creation_date": 1557994571, "question_id": 56163925, "link": "https://stackoverflow.com/questions/56163925/why-is-this-throwing-error-bad-switch-statement", "title": "Why is this throwing error Bad switch statement", "body": "<p>When i am only using 6 cases the switch is working and when i add the 7th case its giving error</p>\n\n<pre><code>switch($A){\n    case 0 {do something}\n    case 1 {do something}\n    case 2 {do something}\n    case 3 {do something}\n    case 4 {do something}\n    case 5 {do something}\n    case 6 {do something}\n    default{}\n}\n</code></pre>\n"}, {"tags": ["perl", "dist-zilla"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1557997663, "post_id": 56163191, "comment_id": 98956731, "body": "Can you show us the whole dist.ini please?"}, {"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1558016943, "post_id": 56163191, "comment_id": 98968311, "body": "Example dist.ini:  <a href=\"https://github.com/telatin/FASTQ-Parser/blob/master/dist.ini\" rel=\"nofollow noreferrer\">github.com/telatin/FASTQ-Parser/blob/master/dist.ini</a>"}], "answers": [{"comments": [{"owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "edited": false, "score": 0, "creation_date": 1558430531, "post_id": 56171278, "comment_id": 99089004, "body": "Thanks for the answer! I admit I&#39;m shocked that a complex framework like Dist::Zilla makes this task so hard... #ignorancebliss"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1558018485, "last_edit_date": 1558018485, "creation_date": 1558018109, "answer_id": 56171278, "question_id": 56163191, "link": "https://stackoverflow.com/questions/56163191/exclude-a-directory-from-perl-module-release-using-distzilla/56171278#56171278", "title": "Exclude a directory from Perl module release using Dist::Zilla", "body": "<p>The <code>@Basic</code> plugin bundle cannot pass through options to the plugins it uses. So you must first remove the <code>GatherDir</code> plugin from it using the <a href=\"https://metacpan.org/pod/Dist::Zilla::PluginBundle::Filter\" rel=\"noreferrer\">@Filter</a> bundle, and then use <code>GatherDir</code> yourself with the extra options.</p>\n\n<pre><code>[GatherDir]\nprune_directory = experimental\n\n[@Filter]\n-bundle = @Basic\n-remove = GatherDir\n</code></pre>\n\n<p>Another option is to use the <a href=\"https://metacpan.org/pod/Dist::Zilla::PluginBundle::ConfigSlicer\" rel=\"noreferrer\">@ConfigSlicer</a> bundle to modify the plugin <code>@Basic</code> uses directly.</p>\n\n<pre><code>[@ConfigSlicer]\n-bundle = @Basic\nGatherDir.prune_directory[] = experimental\n</code></pre>\n\n<p>(The <code>[]</code> in this case is because setting multi-value options through Config::Slicer requires the indication that it's multi-value. See <a href=\"https://metacpan.org/pod/Config::MVP::Slicer#CONFIGURATION-SYNTAX\" rel=\"noreferrer\">the docs</a> for details.)</p>\n\n<p>Consider the <a href=\"https://metacpan.org/pod/Dist::Zilla::PluginBundle::Starter\" rel=\"noreferrer\">@Starter</a> bundle, a modernized version of <code>@Basic</code> that allows <code>-remove</code> and config slicing options by default, as well as many other improvements and options based on modern Dist::Zilla practices.</p>\n"}], "owner": {"reputation": 642, "user_id": 5467494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99Y3d.jpg?s=128&g=1", "display_name": "Andrea T.", "link": "https://stackoverflow.com/users/5467494/andrea-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 56171278, "answer_count": 1, "score": 4, "last_activity_date": 1558018485, "creation_date": 1557992063, "last_edit_date": 1558017003, "question_id": 56163191, "link": "https://stackoverflow.com/questions/56163191/exclude-a-directory-from-perl-module-release-using-distzilla", "title": "Exclude a directory from Perl module release using Dist::Zilla", "body": "<p>I have a subdirectory in my Perl Module root directory that I don't want to release.</p>\n\n<p>I tried using \"prune_directory\" or \"exclude_file\" properties of <a href=\"https://metacpan.org/pod/Dist::Zilla::Plugin::GatherDir\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Dist::Zilla::Plugin::GatherDir</a></p>\n\n<p>I tried to specify the [GatherDir] section, but this conflicted as duplicate with @Basic, so in my <code>dist.ini</code> now I have (full file: <a href=\"https://github.com/telatin/FASTQ-Parser/blob/master/dist.ini\" rel=\"nofollow noreferrer\">https://github.com/telatin/FASTQ-Parser/blob/master/dist.ini</a>):</p>\n\n<pre><code>[@Basic]\nprune_directory = experimental\n</code></pre>\n\n<p>When building with <code>dzil build --verbose</code> i have all the lines like:</p>\n\n<pre><code>[@Basic/GatherDir] adding file experimental/scripts/my.pl\n</code></pre>\n\n<p>so the directory I wanted to prune is indeed added.</p>\n\n<p>What should I do?</p>\n"}, {"tags": ["perl", "diff", "stat", "strftime"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557990514, "post_id": 56162311, "comment_id": 98952846, "body": "<a href=\"https://metacpan.org/pod/BSD::stat\" rel=\"nofollow noreferrer\">BSD::stat</a> looks promising for getting hires file times."}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557990631, "post_id": 56162311, "comment_id": 98952922, "body": "@Shawn: Is it possible with internal perl modules?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557990766, "post_id": 56162311, "comment_id": 98952990, "body": "I don&#39;t think so. <code>stat</code> only returns seconds, and <code>POSIX::stat</code> is just it by another name."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1557991105, "post_id": 56162311, "comment_id": 98953166, "body": "Once you get the time in nanoseconds... divide by 1000000000 to get seconds, use that to get the time as a human-readable string like you&#39;re doing, and use the remainder to get the leftover nanoseconds."}], "answers": [{"comments": [{"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 0, "creation_date": 1557999800, "post_id": 56163885, "comment_id": 98958087, "body": "Kudos for <code>ls --full-time</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558018905, "post_id": 56163885, "comment_id": 98969558, "body": "<a href=\"https://perldoc.pl/Time::HiRes#stat\" rel=\"nofollow noreferrer\">Time::HiRes&#39;s version of stat</a> will return subseconds if available. If you do have to shell out, you should quote your filename with <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a> or bypass shell parsing such as with <a href=\"https://metacpan.org/pod/IPC::ReadpipeX\" rel=\"nofollow noreferrer\">IPC::ReadpipeX</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1558020752, "post_id": 56163885, "comment_id": 98970671, "body": "@Grinnz Well, that doesn&#39;t help -- [<code>Time::HiRes::stat</code>] says &quot;<i>In any case do not expect nanosecond resolution, or even a microsecond resolution.</i>&quot;  As for running external commands, yeah, sure, I hope they do it right. I&#39;ll add a comment"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 0, "creation_date": 1558151890, "post_id": 56163885, "comment_id": 99015671, "body": "@KamalNayan Welcome.  I recall a version of man page for <code>ls</code> from years ago saying in bugs section &quot;Too many options&quot; or such :)  It&#39;s always worth checking whether there&#39;s something"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1566365209, "last_edit_date": 1566365209, "creation_date": 1557994419, "answer_id": 56163885, "question_id": 56162311, "link": "https://stackoverflow.com/questions/56162311/how-to-get-last-modified-time-of-a-file-in-perl-in-the-format-returned-from-diff/56163885#56163885", "title": "How to get last modified time of a file in perl in the format returned from diff command?", "body": "<p>I must first say, that's not going to be accurate.  Even as your hardware likely supports nanosecond resolution by the time it gets back to software it's hundreds of times off. (With a file's timestamp, presumably used only  as relative to other files, that may be less important.)</p>\n\n<p>Having said that, the only way I find to claim nanoseconds is to use system's tools, so <code>stat</code></p>\n\n<pre><code>my ($ts) = grep { /^\\s*Access: [0-9]{4}/ } qx(stat $file);\n$ts =~ s/^\\s*Access:\\s+//;\n</code></pre>\n\n<p>or, using <code>map</code> also as a filter</p>\n\n<pre><code>my ($ts) = map { /^\\s*Access:\\s+([0-9]{4}.*)/ ? $1 : () } qx(stat $file);\n</code></pre>\n\n<p>One problem here, of course, is that we have to parse output; so see your man pages and test your <code>stat</code>, and don't hope for much portability. Watch for system changes as output format of programs may change.  But I don't find nanoseconds claim in Perl.</p>\n\n<p>For reference, on my CentOS 7 (under both <code>bash</code> and <code>tcsh</code>)</p>\n\n<pre><code>perl -we'$f=shift; print grep { /^\\s*Access: [0-9]{4}/ } qx(stat $f)' file\n</code></pre>\n\n<p>prints, for a random file</p>\n\n<pre>\nAccess: 2019-05-15 13:21:57.723987422 -0700\n</pre>\n\n<p>Once again, the \"nano\"seconds aren't accurate at all.</p>\n\n<hr>\n\n<p>Another option, for perhaps more reliable output parsing, is to use <code>ls</code> with its <code>--full-time</code></p>\n\n<pre><code>my $ts = join ' ', (split ' ', qx(ls --full-time $file))[5..7];\n</code></pre>\n\n<hr>\n\n<p>As always, when running external commands build your variables with care and quote and escape appropriately.  A good tool is <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a>. Or, better avoid the shell altogether unless it's specifically needed. Best do all this using a module for running external tools.</p>\n"}, {"comments": [{"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1558002338, "post_id": 56166057, "comment_id": 98959462, "body": "In retrospect, I think it&#39;s best to start the timestr() function by formatting the incoming number with sprintf(), then splitting it on the decimal place. This keeps all the time arithmetic nicely integer-based, and ensures you have a set number of decimal places."}], "tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 1, "last_activity_date": 1558001314, "creation_date": 1558001314, "answer_id": 56166057, "question_id": 56162311, "link": "https://stackoverflow.com/questions/56162311/how-to-get-last-modified-time-of-a-file-in-perl-in-the-format-returned-from-diff/56166057#56166057", "title": "How to get last modified time of a file in perl in the format returned from diff command?", "body": "<p>This is a multi-part challenge. The first challenge is to get a sub-second resolution on your file times, which is both OS and filesystem-dependent. The second part is to get the local timezone offset. All of this is doable on a modern system, however. You were on the right track with <code>Time::HiRes</code>, but <code>strftime()</code> is only going to get you part way. Here is an example program which takes files as arguments and prints the hi-res mtime per your requirements.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Time::HiRes qw(stat);\nuse Time::Piece;\nuse Time::Seconds;\n\nsub timestr {\n    my $t = localtime($_[0]);\n    my $tstr = $t-&gt;strftime('%Y-%m-%d %H:%M:%S');\n    if ($_[0] =~ /(\\.\\d+$)/) { $tstr .= $1 }\n    my $off = $t-&gt;tzoffset;\n    return sprintf('%s %+02d%02d', $tstr, int($off-&gt;hours), $off-&gt;minutes % 60);\n}\n\nfor (@ARGV) {\n    my @stat = stat($_);\n    print \"$_\\n  \".($! ? \"Error: $!\" : timestr($stat[9])).\"\\n\";\n}\nexit(0);\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>$ ./stat.pl stat.pl\nstat.pl\n  2019-05-16 20:02:38.76708 +1000\n</code></pre>\n\n<p>A lot of the heavy lifting is being done by <code>Time::Piece</code>, but there is a little bit of hackery going on to extract the fractional part of the time, and convert the timezone to the desired format (and I haven't tested it extensively). You may want to use <code>sprintf()</code> on the original incoming value to coerce a particular number of decimal places. My code just honestly reproduces the original fractional part.</p>\n\n<p>Bear in mind that not all timestamps will have a fractional part, even on a filesystem which supports sub-second resolution. The file may have been copied from a source which does not have sub-second resolution, for example.</p>\n"}], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 56163885, "answer_count": 2, "score": 5, "last_activity_date": 1566365754, "creation_date": 1557988945, "last_edit_date": 1566365754, "question_id": 56162311, "link": "https://stackoverflow.com/questions/56162311/how-to-get-last-modified-time-of-a-file-in-perl-in-the-format-returned-from-diff", "title": "How to get last modified time of a file in perl in the format returned from diff command?", "body": "<p>I want to display time in the same format as is displayed by the linux <code>diff</code> command.</p>\n\n<pre><code>D:\\&gt;diff -dub old.cfg new.cfg\n--- old.cfg       2019-05-15 15:03:14.289950700 +0530\n+++ new.cfg       2019-05-14 16:07:21.119695300 +0530\n</code></pre>\n\n<p>I want to show last modified time of a file as <code>2019-05-15 15:03:14.289950700 +0530</code>.<br>\nI used <code>stat</code> but I am not getting that nanosecond part. Alo, need timezone in given format. I tried <code>Time::HiRes</code> too, but couldn't get.</p>\n\n<pre><code>my $dt = strftime(\"%Y-%m-%d %H:%M:%S\", localtime((stat($old_file))[9]));\n</code></pre>\n\n<p>It returns: <code>2019-05-15 15:03:14</code>. Can you please help me to append the other info?</p>\n"}, {"tags": ["perl", "catalyst", "template-toolkit"], "answers": [{"tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": true, "score": 1, "last_activity_date": 1557984401, "last_edit_date": 1592644375, "creation_date": 1557984401, "answer_id": 56161389, "question_id": 56161257, "link": "https://stackoverflow.com/questions/56161257/formatting-and-groupping-float-numbers/56161389#56161389", "title": "Formatting and groupping float numbers", "body": "<p>From the very top of documentation link you provided:</p>\n<blockquote>\n<h1>Constructor Parameters</h1>\n<p>The USE line accepts the following parameters, all optional, which define the default behavior for filters within the current Context:</p>\n<pre><code>THOUSANDS_SEP\n</code></pre>\n<p>character inserted between groups of 3 digits</p>\n<p>......</p>\n</blockquote>\n"}], "owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 56161389, "answer_count": 1, "score": 0, "last_activity_date": 1557984401, "creation_date": 1557983726, "question_id": 56161257, "link": "https://stackoverflow.com/questions/56161257/formatting-and-groupping-float-numbers", "title": "Formatting and groupping float numbers", "body": "<p>In a Perl Catalyst application, using Template-Toolkit, I print lists of floating numbers using a format:</p>\n\n<pre><code>&lt;h4&gt;[% price | format('%9.2f') %]&lt;/h4&gt;\n</code></pre>\n\n<p>what formats correctly the numbers (ex. 2113.99) But, I would like to use digit groupping like <strong>2 113.99</strong>. I read <a href=\"https://metacpan.org/pod/Template::Plugin::Number::Format\" rel=\"nofollow noreferrer\">Template::Plugin::Number::Format</a> but there is no word about digit groupping. How could achieve this?</p>\n\n<p>KI</p>\n"}, {"tags": ["javascript", "node.js", "perl"], "comments": [{"owner": {"reputation": 1678, "user_id": 3672474, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rDa0a.jpg?s=128&g=1", "display_name": "PrivateOmega", "link": "https://stackoverflow.com/users/3672474/privateomega"}, "edited": false, "score": 0, "creation_date": 1557974575, "post_id": 56160025, "comment_id": 98948272, "body": "Strings are immutable by nature, so better return the value of <code>this.replace()</code> instead of reassigning it to <code>this</code>. and assign it to a new variable."}, {"owner": {"reputation": 8181, "user_id": 709223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e8eb1671ae3bf4a7536c1aa2c3276779?s=128&d=identicon&r=PG", "display_name": "ekkis", "link": "https://stackoverflow.com/users/709223/ekkis"}, "reply_to_user": {"reputation": 1678, "user_id": 3672474, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rDa0a.jpg?s=128&g=1", "display_name": "PrivateOmega", "link": "https://stackoverflow.com/users/3672474/privateomega"}, "edited": false, "score": 0, "creation_date": 1557992781, "post_id": 56160025, "comment_id": 98954116, "body": "ja.  I was hoping there was a way I could avoid that"}], "answers": [{"comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1557975263, "post_id": 56160037, "comment_id": 98948414, "body": "You might want to add the global flag, as this will only replace the last line, and not multiple new lines at the end of the string..."}, {"owner": {"reputation": 253862, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "reply_to_user": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1557975384, "post_id": 56160037, "comment_id": 98948431, "body": "Pretty sure OP is only looking to replace the final line - <code>and it will remove a newline from the end</code>. The global flag would need to be combined with the multiline flag, and then it would remove <i>all</i> newlines followed by either the end of the string, or another newline"}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1557975549, "post_id": 56160037, "comment_id": 98948476, "body": "If I am reading correctly perl chomp() removes all newlines at the end of a string..."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1557976292, "post_id": 56160037, "comment_id": 98948612, "body": "@GetOffMyLawn: You are not reading correctly. Perl <code>chomp</code> removes all newlines <i>only in paragraph mode</i> (when you explicitly set the end-of-line marker <code>$&#47;</code> to an empty string). In normal operation, when <code>$&#47;</code> is non-empty (typically containing <code>&quot;\\n&quot;</code> or <code>&quot;\\r\\n&quot;</code>), it will only remove a single copy of <code>$&#47;</code>, if present."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1557978155, "post_id": 56160037, "comment_id": 98948959, "body": "@Get Off My Lawn, <code>chomp</code> removes the value of <code>$&#47;</code> (a global var), which defaults to a line feed. The behaviour you describe only happens when <code>$&#47;</code> contains an empty string, which isn&#39;t the norm. Even if the OP wanted to replicate that behavour (and there&#39;s no signs of that), adding <code>&#47;g</code> wouldn&#39;t help; using <code>&#47;\\n+$&#47;</code> would be the solution."}, {"owner": {"reputation": 8181, "user_id": 709223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e8eb1671ae3bf4a7536c1aa2c3276779?s=128&d=identicon&r=PG", "display_name": "ekkis", "link": "https://stackoverflow.com/users/709223/ekkis"}, "edited": false, "score": 0, "creation_date": 1557992684, "post_id": 56160037, "comment_id": 98954058, "body": "pity that.  so want I wanted to implement is not possible.  thank you for the straight answer"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1558026442, "post_id": 56160037, "comment_id": 98973432, "body": "@Amadan, It&#39;s a line feed even on Windows because CRLF gets converted to LF on read in Windows by default."}], "tags": [], "owner": {"reputation": 253862, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "is_accepted": true, "score": 2, "last_activity_date": 1557975690, "last_edit_date": 1557975690, "creation_date": 1557974301, "answer_id": 56160037, "question_id": 56160025, "link": "https://stackoverflow.com/questions/56160025/can-i-modify-the-content-of-a-string-within-a-prototype-method/56160037#56160037", "title": "Can I modify the content of a string within a prototype method?", "body": "<p>Strings are immutable. You'd have to reassign the result of <code>chomp</code> to the new string:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>String.prototype.chomp = function() {\r\n  return this.replace(/\\n$/, '')\r\n};\r\n\r\nconst foo = `foo\r\n`;\r\nconst fooChomped = foo.chomp();\r\nconsole.log(fooChomped);\r\nconsole.log(fooChomped.length);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If you want to remove <em>all</em> newlines from the end of the string, repeat the <code>\\n</code> with <code>+</code> instead:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>String.prototype.chomp = function() {\r\n  return this.replace(/\\n+$/, '')\r\n};\r\n\r\nconst foo = `foo\r\n\r\n\r\n\r\n`;\r\nconst fooChomped = foo.chomp();\r\nconsole.log(fooChomped);\r\nconsole.log(fooChomped.length);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557978347, "post_id": 56160051, "comment_id": 98948992, "body": "Indeed, virtually every time <code>chomp</code> is used, trimming all trailing whitespace is a better option. It would be nice if you mentioned why the OP&#39;s approach doesn&#39;t work, though (immutable strings)."}], "tags": [], "owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1557975301, "last_edit_date": 1557975301, "creation_date": 1557974435, "answer_id": 56160051, "question_id": 56160025, "link": "https://stackoverflow.com/questions/56160025/can-i-modify-the-content-of-a-string-within-a-prototype-method/56160051#56160051", "title": "Can I modify the content of a string within a prototype method?", "body": "<p>JavaScript has <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim\" rel=\"nofollow noreferrer\">trim</a>, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimStart\" rel=\"nofollow noreferrer\">trimStart</a> and <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimEnd\" rel=\"nofollow noreferrer\">trimEnd</a> which should do what you are looking for</p>\n\n<blockquote>\n  <p>The trim() method removes whitespace from both ends of a string. Whitespace in this context is all the whitespace characters (space, tab, no-break space, etc.) and all the line terminator characters (LF, CR, etc.).</p>\n</blockquote>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const str = `\r\nfoo\r\nbar\r\n\r\n\r\n`;\r\n\r\n\r\nconsole.log(JSON.stringify(str))\r\nconsole.log(JSON.stringify(str.trimEnd()))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 8181, "user_id": 709223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e8eb1671ae3bf4a7536c1aa2c3276779?s=128&d=identicon&r=PG", "display_name": "ekkis", "link": "https://stackoverflow.com/users/709223/ekkis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56160037, "answer_count": 2, "score": 0, "last_activity_date": 1557975690, "creation_date": 1557974212, "question_id": 56160025, "link": "https://stackoverflow.com/questions/56160025/can-i-modify-the-content-of-a-string-within-a-prototype-method", "title": "Can I modify the content of a string within a prototype method?", "body": "<p>perl has a wonderful method called chomp().  I can do something like:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$string.chomp()\n</code></pre>\n\n<p>and it will remove a newline from the end.  I want to implement the same functionality in Javascript but can't figure out how to modify the object within a prototype definition:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>String.prototype.chomp = function() {\n   this = this.replace(/\\n$/, '')\n}\n</code></pre>\n\n<p>I can't assign to <code>this</code>.  if I look, I see that <code>this</code> is an object with a key <code>0</code>, so I tried <code>this[0] = this[0].replace(/\\n$/, '')</code> but that doesn't work either</p>\n\n<p>I can do this with objects:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>Object.prototype.chomp = function() {\n   Object.keys(this).forEach(k =&gt; this[k] = this[k].replace(/\\n$/, ''))\n}\n</code></pre>\n\n<p>but I can't do it for a single string.  is there some magic I can do?</p>\n"}]