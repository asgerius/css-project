[{"tags": ["regex", "perl", "replace"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1549515063, "post_id": 54563150, "comment_id": 95931202, "body": "I&#39;m surprised you don&#39;t want <code>&quot;3&quot;|&quot;Text &quot;&quot;around&quot;&quot; quotes&quot;|&quot;abc&quot;\\n</code> (proper CSV for <code>3</code>, <code>Text &quot;around&quot; quotes</code> and <code>abc</code>) instead of clobbering your text."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1549515153, "post_id": 54563150, "comment_id": 95931227, "body": "You didn&#39;t define how to handle text that contains <code>`</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549529814, "post_id": 54563150, "comment_id": 95936944, "body": "Grasshopper, once you are back, please let us know how you want to represent <i>literal</i> backticks in your fields. In short, if you have <code>&quot;2&quot;|&quot;&quot;Text `in` quotes&quot;&quot;|&quot;ab&quot;</code>, what should it look like? Should <code>in</code> be enclosed with a double backticks? Or escaped with a backslash?  Or any other way?"}, {"owner": {"reputation": 152, "user_id": 1029009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb768cd25f7a7817fce8b0a0e20c3a70?s=128&d=identicon&r=PG", "display_name": "Grasshopper", "link": "https://stackoverflow.com/users/1029009/grasshopper"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549552708, "post_id": 54563150, "comment_id": 95950589, "body": "@ikegami I am loading this data into a database using SQL*Loader and was fearful that  text such as &quot;&quot;around&quot;&quot; would break the load.  If it works this would be preferrable."}, {"owner": {"reputation": 152, "user_id": 1029009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb768cd25f7a7817fce8b0a0e20c3a70?s=128&d=identicon&r=PG", "display_name": "Grasshopper", "link": "https://stackoverflow.com/users/1029009/grasshopper"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549552872, "post_id": 54563150, "comment_id": 95950700, "body": "@WiktorStribi\u017cew and @ikegami literal backticks in the fields should be enclosed in `` double backticks."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549559378, "post_id": 54563150, "comment_id": 95954765, "body": "See <a href=\"https://stackoverflow.com/a/54563967/3832970\">my updated answer</a> with an <a href=\"https://ideone.com/LqIdYQ\" rel=\"nofollow noreferrer\">online demo</a>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549515231, "post_id": 54563967, "comment_id": 95931251, "body": "You should mention how you decided to handle text that already contains <code>`</code>."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549528909, "post_id": 54563967, "comment_id": 95936467, "body": "@ikegami There is no way to add that to the answer since OP has not provided any specs regarding how to represent literal backticks inside the fields (escaped with another backtick? A backslash?). It can be easily fixed once the specs are revealed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549528982, "post_id": 54563967, "comment_id": 95936508, "body": "That&#39;s my point. You made an assumption but didn&#39;t document it. What did you assume the OP&#39;s spec says concerning this?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549559642, "post_id": 54563967, "comment_id": 95954925, "body": "@ikegami Now, it works as expected. Literal backticks <a href=\"https://stackoverflow.com/questions/54563150/replace-quotes-within-quote-encapsulated-string-using-perl-regular-expressions?noredirect=1#comment95950700_54563150\">must be doubled</a>."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 3, "last_activity_date": 1549559365, "last_edit_date": 1549559365, "creation_date": 1549494624, "answer_id": 54563967, "question_id": 54563150, "link": "https://stackoverflow.com/questions/54563150/replace-quotes-within-quote-encapsulated-string-using-perl-regular-expressions/54563967#54563967", "title": "Replace quotes within quote encapsulated string using Perl regular expressions", "body": "<p>With Perl 5.14 and newer, you may use</p>\n\n<pre><code>perl -pi.bak -e 's/(?:^|\\|)(\")?\\K(.*?)(?=\\1(?:$|\\|))/$2=~s#\"|(`)#`$1#gr/ge' test.txt\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/lqeAGR/1\" rel=\"nofollow noreferrer\">regex demo</a> and an <a href=\"https://ideone.com/LqIdYQ\" rel=\"nofollow noreferrer\">online demo</a>.</p>\n\n<p>The point here is that you match the fields with the first regex, and then you deal with double quotation marks and backticks using the second regex run on the match part.</p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>(?:^|\\|)</code> - matches the start of a string or <code>|</code></li>\n<li><code>(\")?</code> - an optional Group 1 matching  a <code>\"</code></li>\n<li><code>\\K</code> - match reset operator discarding all text in the current match buffer</li>\n<li><code>(.*?)</code> - Group 2: any 0+ chars other than line break chars</li>\n<li><code>(?=\\1(?:$|\\|))</code> - a positive lookahead that makes sure there is the same value as in Group 1 and then the end of string or <code>|</code> immediately to the right of the current location.</li>\n</ul>\n\n<p>So, Group 2 is the cell contents, with no enclosing double quotation marks. <code>$2=~s#\"|(</code>)#<code>$1#gr</code> replaces all <code>\"</code> with <code>`</code> and duplicates all found literal backticks in Group 2 value (see <a href=\"https://regex101.com/r/lqeAGR/2\" rel=\"nofollow noreferrer\">this regex demo</a>). The <code>\"|(`)</code> pattern matches a <code>\"</code> or a backtick (capturing the latter into Group 1) and the <code>`$1</code> replaces the match with a backtick and the contents of Group 1.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549497162, "post_id": 54564225, "comment_id": 95927517, "body": "Note that split and multiple regexes don&#39;t necessarily lose efficiency when compared to a more complicated single regex. If you really care, you should benchmark them."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549497277, "post_id": 54564225, "comment_id": 95927550, "body": "@Grinnz  Corrrect! At first I had &quot;may lose&quot; ... but then, in this case, against a <i>well written regex</i>, it should lose &quot;some&quot; I think.  Indeed, should benchmark.  ... actually, I put back that &quot;may&quot;.  thanks"}, {"owner": {"reputation": 1225, "user_id": 423429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e17a9e57f5c62be509ad887dcfcea10?s=128&d=identicon&r=PG", "display_name": "robartsd", "link": "https://stackoverflow.com/users/423429/robartsd"}, "edited": false, "score": 0, "creation_date": 1549501996, "post_id": 54564225, "comment_id": 95928593, "body": "Split could match a pipe contained within a quote encapsulated string."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1225, "user_id": 423429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e17a9e57f5c62be509ad887dcfcea10?s=128&d=identicon&r=PG", "display_name": "robartsd", "link": "https://stackoverflow.com/users/423429/robartsd"}, "edited": false, "score": 0, "creation_date": 1549504416, "post_id": 54564225, "comment_id": 95929093, "body": "@robartsd Well ... there are various possibilities with data that would torpedo any processing.  In this problem a pipe can&#39;t be where it shouldn&#39;t be, or we should consider the separator to be <code>&quot;|&quot;</code> -- and this is possible as well (and could be the pattern for the separator in <code>split</code>).  It depends on what real data is like and the OP may need refinements to any approach we offer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549515239, "post_id": 54564225, "comment_id": 95931252, "body": "You should mention how you decided to handle text that already contains <code>`</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1549524766, "post_id": 54564225, "comment_id": 95934608, "body": "@ikegami heh, no decision but just picked up theirs.  It does need a good mention, thank you.  Edited"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1549856888, "last_edit_date": 1549856888, "creation_date": 1549496268, "answer_id": 54564225, "question_id": 54563150, "link": "https://stackoverflow.com/questions/54563150/replace-quotes-within-quote-encapsulated-string-using-perl-regular-expressions/54564225#54564225", "title": "Replace quotes within quote encapsulated string using Perl regular expressions", "body": "<p><strong>Updated</strong> &thinsp; for clarification that backticks that are already present should be doubled</p>\n\n<hr>\n\n<p>One way is to <code>split</code> on <code>|</code> and strip the enclosing quotes to make the remaining  regex simple, then assemble the string back.  That may lose some efficiency in comparison with a single regex but is much simpler to maintain</p>\n\n<pre><code>perl -F\"\\|\" -wlanE'\n    say join \"\\|\", \n        map { s/^\"|\"$//g; s/`/``/g; s/\"([^\"]+)\"/`$1`/g; qq(\"$_\") } @F\n' data.txt\n</code></pre>\n\n<p>The <code>-a</code> option makes it \"autosplit\" each line so in the program the line tokens are available in <code>@F</code>, and the <code>-F</code> specifies the pattern to split on (other than default). The <code>-l</code> handles newlines. See <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">Command switches in perlrun</a>.</p>\n\n<p>In the <code>map</code> the enclosing <code>\"</code>s are removed and any existing backticks doubled; then <code>\"</code> around patterns are changed, globally. Then the quotes are put back and the returned list <code>join</code>-ed. The <code>|</code> in the <code>join</code> is escaped so to sneak it through the shell to the Perl program; if this goes into a script (instead of a one-liner), what I'd always recommend, change that <code>\\|</code> to <code>|</code>.</p>\n\n<p>I don't know the typical data and possible edge cases regarding quoting, but if there may be loose (single, unpaired) quotes the above will have problems and may produce wrong output, and quietly; just as any procedure that expects paired quotes would, without an extremely detailed analysis.  </p>\n\n<p>It may be overall safer to simply replace all <code>\"</code>s (other than enclosing ones), with</p>\n\n<pre><code>map { s/^\"|\"$//g; s/`/``/g; s/\"/`/g; qq(\"$_\") }\n</code></pre>\n\n<p>(or with <code>tr</code> instead of regex <code>s///g</code>).  That also adds some measure of efficiency.</p>\n\n<hr>\n\n<p>Another way to get to the \"meat\" of the data is to use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a>, which allows a delimiter other than (the default) comma and absorbs the enclosing quotes. Having quotes inside fields is considered bad CSV but the module can parse that just fine as well, with choices below. </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Text::CSV;\n\nmy $file = shift || 'data.txt';\nmy $outfile = 'new_' . $file;\n\nmy $csv = Text::CSV-&gt;new( { binary =&gt; 1, sep_char =&gt; '|', \n    allow_loose_quotes =&gt; 1, escape_char =&gt; '',     # quotes inside fields\n    always_quote =&gt; 1                               # output as desired\n} ) or die \"Can't do CSV: \", Text::CSV-&gt;error_diag;\n\nopen my $fh,     '&lt;', $file    or die \"Can't open $file: $!\";\nopen my $out_fh, '&gt;', $outfile or die \"Can't open $outfile: $!\";\n\nwhile (my $row = $csv-&gt;getline($fh)) {\n    s/`/``/g for @$row;\n    tr/\"/`/  for @$row;\n    $csv-&gt;say($out_fh, $row);\n}\n</code></pre>\n\n<p>To work with quotes inside fields the <code>escape_char</code> needs to differ from <code>quote_char</code>; I've simply set it to <code>''</code> here. The output is handled by the module as well, and <code>always_quote</code> attribute is for that (to quote all fields, needed or not). Please see documentation.</p>\n\n<p>There is far more that can be done with this module, of course.  </p>\n\n<p>If the purpose of the question is precisely to clean up a file format where same quoting is used both for fields and inside the fields, I'd suggest to do it all with the module. This approach allows one to cleanly and consistently set up all kinds of options, both for input and output, and is maintainable.</p>\n\n<hr>\n\n<p>A few questions</p>\n\n<ul>\n<li><p>What kind of data is there and is it possible to have a stray quote? Then what? This can affect even the choice of the optimal approach as it may require a detailed analysis.</p></li>\n<li><p>If the quest here is to straighten CSV-style data, then why not double the quotes inside fields, as common and proper in CSV, instead of replacing them (and potentially hurting their textual meaning)? See module's docs, for instance.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1225, "user_id": 423429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e17a9e57f5c62be509ad887dcfcea10?s=128&d=identicon&r=PG", "display_name": "robartsd", "link": "https://stackoverflow.com/users/423429/robartsd"}, "is_accepted": false, "score": 1, "last_activity_date": 1549504098, "last_edit_date": 1549504098, "creation_date": 1549503304, "answer_id": 54565097, "question_id": 54563150, "link": "https://stackoverflow.com/questions/54563150/replace-quotes-within-quote-encapsulated-string-using-perl-regular-expressions/54565097#54565097", "title": "Replace quotes within quote encapsulated string using Perl regular expressions", "body": "<p>Perl uses $1 as the placeholder for the first capturing group in the replacement part of the regex instead of \\1 (used in the matching part of the regex). Your regex wasn't matching the inner quotes and would fail to match the first or last field of your pipe delimited data. Your substitution also failed to include a quote character before the captured group.</p>\n\n<p>Try:</p>\n\n<pre><code>perl -pi.bak -e 's/(?&lt;=(?:^|\\|)\")\"([^\"]*)\"(?=\"(?:$|\\|))/`$1\u00b4/' test.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1549616760, "creation_date": 1549616760, "answer_id": 54588984, "question_id": 54563150, "link": "https://stackoverflow.com/questions/54563150/replace-quotes-within-quote-encapsulated-string-using-perl-regular-expressions/54588984#54588984", "title": "Replace quotes within quote encapsulated string using Perl regular expressions", "body": "<p>Another Perl. After splitting by array @F, check for \" that is not at the beginning/end of the elements.</p>\n\n<pre><code> perl -F\"\\|\"  -lane   ' for(@F) { s/(?&lt;!^)\"(?!$)/`/g }; print join(\"|\",@F) ' \n</code></pre>\n\n<p>with the given inputs</p>\n\n<pre><code>$ cat grasshopper.txt\n\"1\"|\"Text\"|\"a\"\n\"2\"|\"\"Text in quotes\"\"|\"ab\"\n\"3\"|\"Text \"around\" quotes\"|\"abc\"\n$  perl -F\"\\|\"  -lane   ' for(@F) { s/(?&lt;!^)\"(?!$)/`/g }; print join(\"|\",@F) ' grasshopper.txt\n\"1\"|\"Text\"|\"a\"\n\"2\"|\"`Text in quotes`\"|\"ab\"\n\"3\"|\"Text `around` quotes\"|\"abc\"\n$\n</code></pre>\n"}], "owner": {"reputation": 152, "user_id": 1029009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb768cd25f7a7817fce8b0a0e20c3a70?s=128&d=identicon&r=PG", "display_name": "Grasshopper", "link": "https://stackoverflow.com/users/1029009/grasshopper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 54564225, "answer_count": 4, "score": 1, "last_activity_date": 1549856888, "creation_date": 1549490160, "question_id": 54563150, "link": "https://stackoverflow.com/questions/54563150/replace-quotes-within-quote-encapsulated-string-using-perl-regular-expressions", "title": "Replace quotes within quote encapsulated string using Perl regular expressions", "body": "<p>I am trying to replace quotes within a pipe delimited and quote encapsulated file without replacing the quotes providing the encapsulation.</p>\n\n<p>I have tried using the below Perl line to replace the quotes with a back tick ` but am not sure how to replace only the quotes and not the entire group 1.</p>\n\n<p>Sample data (test.txt):</p>\n\n<pre><code>\"1\"|\"Text\"|\"a\"\\n\n\"2\"|\"\"Text in quotes\"\"|\"ab\"\\n\n\"3\"|\"Text \"around\" quotes\"|\"abc\"\\n\n\nperl -pi.bak -e 's/(?&lt;=\\|\")(.*)(?=\"\\|)/\\1`/' test.txt\n</code></pre>\n\n<p>Here is what is happening:</p>\n\n<pre><code>\"1\"|\"`\"|\"a\"\\n\n\"2\"|\"`\"|\"ab\"\\n\n\"3\"|\"`\"|\"abc\"\\n\n</code></pre>\n\n<p>Here is what I am trying to achieve: </p>\n\n<pre><code>\"1\"|\"Text\"|\"a\"\\n\n\"2\"|\"`Text in quotes`\"|\"ab\"\\n\n\"3\"|\"Text `around` quotes\"|\"abc\"\\n\n</code></pre>\n"}, {"tags": ["perl", "treeview", "gtk", "gtk2"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1549489201, "post_id": 54562641, "comment_id": 95924818, "body": "You need to pass a reference to the <code>get_end_products</code> sub routine. So try <code>$filtered_store-&gt;set_visible_func(\\&amp;get_end_products, $unfiltered_store)</code>"}, {"owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1549489251, "post_id": 54562641, "comment_id": 95924837, "body": "You mean like this?   $filtered_store-&gt;set_visible_func(\\&amp;get_end_products, $unfiltered_store);"}, {"owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1549489409, "post_id": 54562641, "comment_id": 95924897, "body": "FYi that even before passing by reference, the &#39;get_end_products&#39; function is being called. My question has more to do with the store -- how do I access the store in the &#39;get_end_products&#39; function? The two dumper statements print nothing, but the printing a warn statement like &#39;Hello World&#39; inside the get_end_products function DOES work."}, {"owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1549489479, "post_id": 54562641, "comment_id": 95924925, "body": "Hey! I just added the reference and ...it works! Program doesn&#39;t crash. I can&#39;t thank you enough."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1549489595, "post_id": 54562641, "comment_id": 95924976, "body": "Great to hear! Note that generally, variables <code>$a</code> and <code>$b</code> are special variables used by the <code>sort</code> function. So it is not recommended to use those variable names."}, {"owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1549489766, "post_id": 54562641, "comment_id": 95925057, "body": "Thanks again. So...can you help me with just the last part which is handling the parameters in the visible function. Is the liststore visible there? I just included $a and $b but wasn&#39;t even sure that would work (again, I couldn&#39;t find a working example). My last step is I need to check a certain column in the liststore and if it&#39;s set to a certain value, then I return true, otherwise, return false. I would be much obliged if you could help me with this last step. And this will be great for anyone else searching for a working Perl/GTK TreeModelFilter example. I found none online!"}], "answers": [{"comments": [{"owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "edited": false, "score": 1, "creation_date": 1549491777, "post_id": 54563128, "comment_id": 95925821, "body": "You&#39;re amazing. Thank you so much."}, {"owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "edited": false, "score": 0, "creation_date": 1549493306, "post_id": 54563128, "comment_id": 95926347, "body": "If I use the anonymous sub, how do I access the iteration? Do I just pass it into the anonymous sub as a second parameter, etc?"}, {"owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "edited": false, "score": 0, "creation_date": 1549493375, "post_id": 54563128, "comment_id": 95926374, "body": "Or just loop through the model, etc?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "edited": false, "score": 0, "creation_date": 1549493446, "post_id": 54563128, "comment_id": 95926396, "body": "Yes you can try pass it like this <code>sub { get_end_products( $_[1], $unfiltered_store) }</code> . Now the first parameter will be the iteration, since <code>@_</code> should be equal to <code>($model, $iter, $user_data)</code>"}, {"owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "edited": false, "score": 0, "creation_date": 1549548427, "post_id": 54563128, "comment_id": 95947914, "body": "I&#39;m not able to check the value of the model&#39;s iteration. Performing  $val = $model-&gt;get_value($iter,$data) is returning a &quot;Can&#39;t locate object method &#39;get_value&#39;..&quot; error. I need to see the value of the column before returning true/false. What am I doing wrong?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "edited": false, "score": 0, "creation_date": 1549548707, "post_id": 54563128, "comment_id": 95948083, "body": "It is difficult to say without seeing more of your code. Maybe you could post some more of your code at <a href=\"https://pastebin.com/\" rel=\"nofollow noreferrer\">pastebin</a> for example? Or even better (?), if you upload all of your code, I could try run it."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1549491124, "last_edit_date": 1549491124, "creation_date": 1549490074, "answer_id": 54563128, "question_id": 54562641, "link": "https://stackoverflow.com/questions/54562641/treemodelfilter-in-gtk-perl-question-about-set-visible-func/54563128#54563128", "title": "TreeModelFilter in GTK/Perl - Question about set_visible_func", "body": "<p>The <code>set_visible_func</code> method of the filtered store should get a sub reference as the first argument, but you are not passing a sub reference here:</p>\n\n<pre><code>$filtered_store-&gt;set_visible_func(get_end_products, $unfiltered_store);\n</code></pre>\n\n<p>This will instead <em>call</em> the sub routine <code>get_end_products</code> and then pass on its return value (which is not a sub reference). To fix it add the reference operator <code>\\&amp;</code> in front of the sub name:</p>\n\n<pre><code>$filtered_store-&gt;set_visible_func(\\&amp;get_end_products, $unfiltered_store);\n</code></pre>\n\n<p>Regarding your other question in the comments:\n<a href=\"https://developer.gnome.org/pygtk/stable/class-gtktreemodelfilter.html#method-gtktreemodelfilter--set-visible-func\" rel=\"nofollow noreferrer\">According to the documentation</a> the user data parameter is passed as the <em>third</em> parameter to <code>get_end_products</code>, so you should define it like this:</p>\n\n<pre><code>sub get_end_products {\n      my ($model, $iter, $user_data) = @_;\n      # Do something with $user_data\n      return TRUE;\n }\n</code></pre>\n\n<p>If for some reason <code>$unfiltered_store</code> is not passed on to <code>get_end_products</code>, you can try pass it using an anonymous <code>sub</code> instead, like this:</p>\n\n<pre><code>$filtered_store-&gt;set_visible_func(\n    sub { get_end_products( $unfiltered_store) });\n</code></pre>\n"}], "owner": {"reputation": 2641, "user_id": 177850, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wWhJg.jpg?s=128&g=1", "display_name": "Miriam P.  Raphael", "link": "https://stackoverflow.com/users/177850/miriam-p-raphael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 54563128, "answer_count": 1, "score": 1, "last_activity_date": 1549491124, "creation_date": 1549487585, "last_edit_date": 1549489852, "question_id": 54562641, "link": "https://stackoverflow.com/questions/54562641/treemodelfilter-in-gtk-perl-question-about-set-visible-func", "title": "TreeModelFilter in GTK/Perl - Question about set_visible_func", "body": "<p>I am trying to filter a liststore using the GTK2::TreeModelFilter. I can't seem to find an example online that uses perl and I am getting syntax errors. Can someone help me with the syntax below? The $unfiltered_store is a liststore.</p>\n\n<pre><code>$filtered_store = Gtk2::TreeModeFilter-&gt;new($unfiltered_store);\n$filtered_store-&gt;set_visible_func(get_end_products, $unfiltered_store);\n$combobox = Gtk2::ComboBoxEntry-&gt;new($filtered_store,1);\n</code></pre>\n\n<p>Then somewhere below:</p>\n\n<pre><code> sub get_end_products {\n      my ($a, $b) = @_;\n\n      warn(Dumper(\\$a));\n      warn(Dumper(\\$b));\n      return true;     # Return all rows for now\n }\n</code></pre>\n\n<p>Ultimately what I want to do is look at column 14 of the listore ($unfiltered_store) and if it is a certain value, then it filtered into the $filtered_store.</p>\n\n<p>Can someone help me with the syntax on this? I checked a bunch of sites, but they're in other languages and using different syntax (like 'new_filter' -- doesn't exist with Perl GTK).\nThis is the most elegant solution to a fix I need to make and I would prefer to learn how to use this rather than using a brute force method of pulling and saving the filtered data.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1549484927, "post_id": 54561936, "comment_id": 95922979, "body": "What do you mean by &quot;use <code>$1</code>&quot;?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549485077, "post_id": 54561936, "comment_id": 95923042, "body": "See <a href=\"https://ideone.com/xbWaU9\" rel=\"nofollow noreferrer\">ideone.com/xbWaU9</a>"}], "owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1549485530, "answer_count": 0, "score": 0, "last_activity_date": 1549486323, "creation_date": 1549484533, "question_id": 54561936, "link": "https://stackoverflow.com/questions/54561936/can-i-put-a-perl-regex-replacement-string-in-a-variable-which-references-1-2", "closed_reason": "Duplicate", "title": "Can I put a Perl regex replacement string in a variable which references $1, $2, etc?", "body": "<p>In this snippet, I want <code>$str1</code> and <code>$str2</code> to end up containing the same value (<code>\"ba\"</code>).</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $replacement = '$2$1';\n\nmy $str1 = \"ab\";\nmy $str2 = \"ab\";\n\n$str1 =~ s/(.)(.)/$2$1/g;\n$str2 =~ s/(.)(.)/$replacement/g;\n\nprint \"$str1\\n$str2\\n\";\n</code></pre>\n\n<p>I want to be able to supply the <code>$replacement</code> pattern from user input, where the user can use <code>$1</code> and friends.</p>\n\n<p>How can I make this work?</p>\n"}, {"tags": ["perl", "syntax"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 2, "creation_date": 1549476041, "post_id": 54559851, "comment_id": 95919005, "body": "See the <a href=\"https://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\"><code>perlop</code></a> reference - this covers Operators and the like, including <code>!</code> under Symbolic Unary Operators. Likewise <code>perlsyn</code> and related are also relevant reads.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 1, "creation_date": 1549476458, "post_id": 54559851, "comment_id": 95919183, "body": "@toolic, That&#39;s one of the worse written parts of the docs. See my comments in the answers of <a href=\"https://stackoverflow.com/q/1036347/589924\">this question</a> for why. See the <a href=\"https://stackoverflow.com/a/5655485/589924\">second answer</a> for much better documentation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549477938, "post_id": 54559851, "comment_id": 95919826, "body": "(It&#39;s an incomplete list of false values with an arbitrary of list false-returning code snippets that contains duplicates mixed in.)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1549489648, "post_id": 54559851, "comment_id": 95925005, "body": "@ikegami documentation patches are always appreciated by the porters, provided it still manages to convey the information the user needs."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9131438, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEsW3itPppg/AAAAAAAAAAI/AAAAAAAAAys/LoDOnsSIHdA/photo.jpg?sz=128", "display_name": "Mahmoud Shater", "link": "https://stackoverflow.com/users/9131438/mahmoud-shater"}, "edited": false, "score": 0, "creation_date": 1549476841, "post_id": 54559889, "comment_id": 95919345, "body": "hello,  I just need to confirm what I got from you right or not  is that meaning it&#39;s checking about if check if the variable is empty or not  and if it is empty it will set the value of the variable equal to 0   is that right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15, "user_id": 9131438, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEsW3itPppg/AAAAAAAAAAI/AAAAAAAAAys/LoDOnsSIHdA/photo.jpg?sz=128", "display_name": "Mahmoud Shater", "link": "https://stackoverflow.com/users/9131438/mahmoud-shater"}, "edited": false, "score": 0, "creation_date": 1549476999, "post_id": 54559889, "comment_id": 95919408, "body": "Assuming you mean &quot;undefined&quot; by &quot;empty&quot;, then not quite. While undefined is false, that&#39;s not the only false value."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1549482912, "post_id": 54559889, "comment_id": 95922124, "body": "It will set the variable to 0 if $value does not evaluate to true. That is the case, for  0, the empty string, undefined, an empty list, and the false value returned by !$anything itself."}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1549490568, "post_id": 54559889, "comment_id": 95925386, "body": "I don&#39;t think it can be considered a shortcut for &quot;not defined&quot;, as stated in the last point. Rather, it normalizes all false values (numerical 0, the string &quot;0&quot;, empty string and undefined) into a single kind of false value (0)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1549495556, "post_id": 54559889, "comment_id": 95927066, "body": "@Silvar, That&#39;s extremely unlikely. The code in question probably only accepts an optional number that defaults to zero. One could use <code>!defined($value)</code> to check for that, but <code>!$value</code> is a perfectly valid shortcut the code appears to have used."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549497068, "post_id": 54559889, "comment_id": 95927489, "body": "I don&#39;t think it&#39;s worth assuming the intent of the code given a single out of context line. I have written a lot of code that checks for false, and would break if you checked for undef instead."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549498993, "post_id": 54559889, "comment_id": 95927991, "body": "@Grinnz, Quite so, but 1) I said the code is checking for false in lieu of undef (not checking for undef in lieu of false), and 2) I never said they were equivalent. I simply explained what <code>if (!$value) {$value = 0;}</code> is doing."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1549498892, "last_edit_date": 1549498892, "creation_date": 1549476174, "answer_id": 54559889, "question_id": 54559851, "link": "https://stackoverflow.com/questions/54559851/what-does-mean-before-a-variable-in-perl/54559889#54559889", "title": "What does &quot;!&quot; mean before a variable in perl", "body": "<p>It is the <a href=\"http://perldoc.perl.org/perlop.html#Symbolic-Unary-Operators\" rel=\"nofollow noreferrer\">unary negation operator</a>.</p>\n\n<ul>\n<li><p>If the value of <code>$value</code> is true, <code>!$value</code> will evaluate to a false value.</p></li>\n<li><p>If the value of <code>$value</code> is false, <code>!$value</code> will evaluate to a true value.</p></li>\n</ul>\n\n<p>As a whole, the statement will set <code>$value</code> to <code>0</code> if <code>$value</code> was <a href=\"https://stackoverflow.com/a/5655485/589924\">false</a>.</p>\n\n<p>It could have been written as follows:</p>\n\n<pre><code>$value ||= 0;\n</code></pre>\n\n<p>It is surely being used a shortcut for the following:</p>\n\n<pre><code>if (!defined($value)) { $value = 0; }    # Can be written as: $value //= 0;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9131438, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TEsW3itPppg/AAAAAAAAAAI/AAAAAAAAAys/LoDOnsSIHdA/photo.jpg?sz=128", "display_name": "Mahmoud Shater", "link": "https://stackoverflow.com/users/9131438/mahmoud-shater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1549498892, "creation_date": 1549475982, "last_edit_date": 1549476157, "question_id": 54559851, "link": "https://stackoverflow.com/questions/54559851/what-does-mean-before-a-variable-in-perl", "title": "What does &quot;!&quot; mean before a variable in perl", "body": "<p>I need your help for this line I can't understand the meaning of this check</p>\n\n<pre><code>if (!$value) {$value = 0;}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549470676, "post_id": 54557725, "comment_id": 95916248, "body": "Are you following standard networking conventions, i.e. the sender converts the 32-bit from local endianess to network endianess before writing it to the socket?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11023814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQM9P.png?s=128&g=1", "display_name": "SAnji Holic", "link": "https://stackoverflow.com/users/11023814/sanji-holic"}, "edited": false, "score": 0, "creation_date": 1549469471, "post_id": 54557792, "comment_id": 95915529, "body": "Thanks for letting me know. pack / unpack is the best choice. But it takes $ data as an argument. Is there a way to pack / unpack @data (array)?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 45, "user_id": 11023814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQM9P.png?s=128&g=1", "display_name": "SAnji Holic", "link": "https://stackoverflow.com/users/11023814/sanji-holic"}, "edited": false, "score": 0, "creation_date": 1549469645, "post_id": 54557792, "comment_id": 95915629, "body": "@SAnjiHolic You already have <code>$data</code> as a string and keeping it that way is the most efficient approach. If you have an array, <code>@tmpp</code>, then <code>unpack &#39;L&gt;&#47;a&#39;, join &#39;&#39;, @tmpp</code> could work and would be relatively fast. Splitting a string into an array and then working on the array is usually a bad approach in Perl."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 45, "user_id": 11023814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQM9P.png?s=128&g=1", "display_name": "SAnji Holic", "link": "https://stackoverflow.com/users/11023814/sanji-holic"}, "edited": false, "score": 0, "creation_date": 1549470013, "post_id": 54557792, "comment_id": 95915838, "body": "@SanjiHolic If the answer works for you, please accept it ( <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a> )"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 45, "user_id": 11023814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQM9P.png?s=128&g=1", "display_name": "SAnji Holic", "link": "https://stackoverflow.com/users/11023814/sanji-holic"}, "edited": false, "score": 0, "creation_date": 1549470534, "post_id": 54557792, "comment_id": 95916166, "body": "@StefanBecker Thanks, <code>N</code> is a much better/clearer template"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 2, "last_activity_date": 1549470518, "last_edit_date": 1549470518, "creation_date": 1549469087, "answer_id": 54557792, "question_id": 54557725, "link": "https://stackoverflow.com/questions/54557725/perl-arraydata-to-variablesdata/54557792#54557792", "title": "Perl array(@data) to variables($data)", "body": "<p>This is a standard case for <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\">pack/unpack</a>. The <code>N/a</code> template will unpack a string of length <code>N</code> (in network byte order):</p>\n\n<pre><code>my( $json ) = unpack 'N/a', $data;\nprint $json;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1549475688, "creation_date": 1549475688, "answer_id": 54559777, "question_id": 54557725, "link": "https://stackoverflow.com/questions/54557725/perl-arraydata-to-variablesdata/54559777#54559777", "title": "Perl array(@data) to variables($data)", "body": "<p>If you have what you say you have, you could simply peel off the length prefix.</p>\n\n<pre><code>my $json = substr($data, 4);\n</code></pre>\n\n<p>But this would mean that the length prefix is useless, which suggests you have a major bug earlier in your program. Did you properly read from the socket?</p>\n\n<pre><code>sub read_bytes {\n   my ($fh, $bytes_to_read) = @_;\n   my $buf = '';\n   while ($bytes_to_read) {\n      my $bytes_read = read($fh, $buf, $bytes_to_read, length($buf))\n      die($!) if !defined($bytes_read);\n      die(\"Premature EOF\") if !$bytes_read;\n      $bytes_to_read -= $bytes_read;\n   }\n\n   return $buf;\n}\n\nsub read_uint32be { unpack('N', read_bytes($_[0], 4)) }\n\nsub read_string {\n   my ($fh) = @_;\n   my $len = read_uint32be($fh);\n   return read_bytes($fh, $len);\n}\n\nmy $json = read_string($sock);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11023814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQM9P.png?s=128&g=1", "display_name": "SAnji Holic", "link": "https://stackoverflow.com/users/11023814/sanji-holic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54557792, "answer_count": 2, "score": 3, "last_activity_date": 1549475688, "creation_date": 1549468806, "question_id": 54557725, "link": "https://stackoverflow.com/questions/54557725/perl-arraydata-to-variablesdata", "title": "Perl array(@data) to variables($data)", "body": "<p>I am doing socket programming.\nThe data ($ data) received from the socket contains 4 bytes of length data + json data.\nI want to trim the length and only parse the json.</p>\n\n<p>I have completed the code and it works fine. But I wonder if there is a more efficient way (algorithm).</p>\n\n<p>Is there an efficient way to move arrays to variables in perl?</p>\n\n<pre><code>@tmpp = split(//,$data); #data = socket data\n\nmy $t1 = sprintf(\"%02x%02x%02x%02x\",ord($tmpp[0]),ord($tmpp[1]),ord($tmpp[2]),ord($tmpp[3])); \n$t1 = hex($t1); #t1 = length \n\nmy $json;\nmy @tmp = @tmpp[0..-1];\nforeach(@tmp){ $json .= $_;}&lt;br&gt;\nprint $json;\n\nOk Print ; \n</code></pre>\n"}, {"tags": ["python", "list", "perl", "pretty-print"], "comments": [{"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 1, "creation_date": 1549467781, "post_id": 54557367, "comment_id": 95914367, "body": "There&#39;s a <a href=\"https://docs.python.org/3/library/pprint.html?highlight=pprint#module-pprint\" rel=\"nofollow noreferrer\"><code>pprint</code></a> module you can probably experiment with."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 10351133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VhTf1.png?s=128&g=1", "display_name": "ZoeLiao", "link": "https://stackoverflow.com/users/10351133/zoeliao"}, "reply_to_user": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "edited": false, "score": 0, "creation_date": 1549471671, "post_id": 54558334, "comment_id": 95916808, "body": "You can flatten the nested lists before using enumerate and pprint <a href=\"https://stackoverflow.com/questions/952914/how-to-make-a-flat-list-out-of-list-of-lists\" title=\"how to make a flat list out of list of lists\">stackoverflow.com/questions/952914/&hellip;</a>"}], "tags": [], "owner": {"reputation": 67, "user_id": 10351133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VhTf1.png?s=128&g=1", "display_name": "ZoeLiao", "link": "https://stackoverflow.com/users/10351133/zoeliao"}, "is_accepted": false, "score": 1, "last_activity_date": 1549470714, "creation_date": 1549470714, "answer_id": 54558334, "question_id": 54557367, "link": "https://stackoverflow.com/questions/54557367/how-to-pretty-print-a-python-list-with-indices/54558334#54558334", "title": "How to pretty-print a Python list with indices?", "body": "<p>you can use <a href=\"http://book.pythontips.com/en/latest/enumerate.html\" rel=\"nofollow noreferrer\">enumerate</a> to get the indices, and use <a href=\"https://docs.python.org/3/library/pprint.html?highlight=pprint#module-pprint\" rel=\"nofollow noreferrer\">pprint</a> to pretty-print a python list.\nFor example:</p>\n\n<pre><code>pprint.pprint([{num: value} for num, value in enumerate(L)], width=20)\n</code></pre>\n\n<p>and the output is:</p>\n\n<pre><code>[{0: 'a'},\n {1: 'b'},\n {2: None},\n {3: 'c'}]\n</code></pre>\n"}], "owner": {"reputation": 10395, "user_id": 275088, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b931a4a3164d36350c78dd67ed8a9f99?s=128&d=identicon&r=PG", "display_name": "planetp", "link": "https://stackoverflow.com/users/275088/planetp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1549470714, "creation_date": 1549467743, "last_edit_date": 1549468389, "question_id": 54557367, "link": "https://stackoverflow.com/questions/54557367/how-to-pretty-print-a-python-list-with-indices", "title": "How to pretty-print a Python list with indices?", "body": "<p>How can I pretty-print a (possibly nested) Python list <strong>with indices</strong>, similar to the Perl's <a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"nofollow noreferrer\"><code>Data::Printer</code></a> module, e.g. for <code>L = ['a', 'b', None, 'c']</code> the output should be something like this:</p>\n\n<pre><code>[\n    [0] 'a',\n    [1] 'b',\n    [2] None,\n    [3] 'c',\n]\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "is_accepted": false, "score": 1, "last_activity_date": 1549470326, "creation_date": 1549470326, "answer_id": 54558205, "question_id": 54557358, "link": "https://stackoverflow.com/questions/54557358/why-wont-perl-ptkdb-honor-the-ptkdbproperty-entries-i-have-in-xdefaults/54558205#54558205", "title": "Why won&#39;t perl/ptkdb honor the ptkdb*&lt;property&gt; entries I have in .Xdefaults?", "body": "<p>My bad.  I transcribed the font name from xfontsel incorrectly.  This worked...</p>\n\n<pre><code> -adobe-courier-medium-r-normal-*-14-*-*-*-*-*-*\n</code></pre>\n\n<p>(I missed the \"-normal-\")</p>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549470326, "creation_date": 1549467710, "question_id": 54557358, "link": "https://stackoverflow.com/questions/54557358/why-wont-perl-ptkdb-honor-the-ptkdbproperty-entries-i-have-in-xdefaults", "title": "Why won&#39;t perl/ptkdb honor the ptkdb*&lt;property&gt; entries I have in .Xdefaults?", "body": "<p>PLATFORM=linux_2.6.32_64\nptkdb: perl-5.18.2-gcc481/lib/5.18.2</p>\n\n<p>I'm trying/failing to get ptkdb to use the font def I placed in .Xdefaults for it.  This is the entry in .Xdefaults...</p>\n\n<pre><code>ptkdb*font:                        -adobe-courier-medium-*-18-*-*-*-*-*-*-*\n</code></pre>\n\n<p>I \"constructed\" that font name using \"xfontsel\" and am assuming it's valid.<br>\nI then ran \"xrdb ~/.Xdefaults\"<br>\nI copied ~/Xdefaults to ~/Xresources          </p>\n\n<p>When I run perl using the debugger (perl -d:ptkdb myscript.pl) it sticks to the same, small font that I want to change.</p>\n\n<p>Can anyone see what I'm doing wrong ?</p>\n"}, {"tags": ["perl", "csv", "parsing"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1549463376, "post_id": 54555688, "comment_id": 95911526, "body": "Are you asking how to access the other fields? They&#39;d be stored in <code>@csv_value</code>, ie <code>$csv_value[1]</code> for the email"}, {"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 1, "creation_date": 1549463980, "post_id": 54555688, "comment_id": 95911918, "body": "perl -ne &#39;if (!/^\\d/){print &quot;$line$_&quot;;} else {print $_;} /(.*,).*/; $line=$1;&#39; file1"}, {"owner": {"reputation": 29, "user_id": 753179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae3d4974dc3a96bab9f820b84edf581?s=128&d=identicon&r=PG", "display_name": "sorn", "link": "https://stackoverflow.com/users/753179/sorn"}, "reply_to_user": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 0, "creation_date": 1549468048, "post_id": 54555688, "comment_id": 95914595, "body": "It&#39;s worked, Thanks @EssexBoy , but please explain how it works and if want to write full script, how can i do?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549468833, "post_id": 54555688, "comment_id": 95915140, "body": "Your input CSV is broken, e.g. the first row should be (showing the embedded new lines) <code>1,test@email.com,192.168.10.109,&quot;FTP\\nHTTP\\nHTTPS&quot;,,</code>. <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> will parse such a file, but you&#39;ll need to add the <code>binary =&gt; 1</code> option to the constructor, as your CSV contains non-ASCII characters."}, {"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "edited": false, "score": 0, "creation_date": 1549525127, "post_id": 54555688, "comment_id": 95934761, "body": "@tcc I&#39;ve added an answer"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1549469523, "creation_date": 1549469523, "answer_id": 54557929, "question_id": 54555688, "link": "https://stackoverflow.com/questions/54555688/how-can-i-split-and-fill-value-from-csv-data/54557929#54557929", "title": "How can i split and fill value from csv data?", "body": "<p>Your input CSV is broken. I would suggest to fix the generator.</p>\n\n<p>With correctly formatted input CSV you will have to enable <code>binary</code> option in <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> as your data contains non-ASCII characters.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Text::CSV;\n\n# input has non-ASCII characters\nmy $csv_in  = Text::CSV-&gt;new({ binary =&gt; 1 });\nmy $csv_out = Text::CSV-&gt;new();\n$csv_out-&gt;eol(\"\\n\");\n\nwhile (my $row = $csv_in-&gt;getline(\\*STDIN)) {\n    for my $protocol (split(\"\\n\", $row-&gt;[3])) {\n        $row-&gt;[3] = $protocol;\n        $csv_out-&gt;print(\\*STDOUT, $row);\n    }\n}\n\nexit 0;\n</code></pre>\n\n<p>Test with fixed input data:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cat dummy.csv\nNo,Email,IP,Service,Comment\n1,test@email.com,192.168.10.109,\"FTP\nHTTP\nHTTPS\",,\n2,webmaster@email.com,192.168.10.111,\"SFTP\nSNMP\",,\n3,admin@email.com,192.168.10.112,HTTP,,\n\n$ perl dummy.pl &lt;dummy.csv \nNo,Email,IP,Service,Comment\n1,test@email.com,192.168.10.109,FTP,,\n1,test@email.com,192.168.10.109,HTTP,,\n1,test@email.com,192.168.10.109,HTTPS,,\n2,webmaster@email.com,192.168.10.111,SFTP,,\n2,webmaster@email.com,192.168.10.111,SNMP,,\n3,admin@email.com,192.168.10.112,HTTP,,\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 2, "last_activity_date": 1549525096, "creation_date": 1549525096, "answer_id": 54568433, "question_id": 54555688, "link": "https://stackoverflow.com/questions/54555688/how-can-i-split-and-fill-value-from-csv-data/54568433#54568433", "title": "How can i split and fill value from csv data?", "body": "<p>To expand on my comment</p>\n\n<pre><code>perl -ne 'if (!/^\\d/){print \"$line$_\";} else {print $_;} /(.*,).*/; $line=$1;' file1\n</code></pre>\n\n<p>Use the <a href=\"https://www.perl.com/pub/2004/08/09/commandline.html/\" rel=\"nofollow noreferrer\">perl command line options</a></p>\n\n<pre><code>e = inline command\nn = implicit loop, i.e. for every line in the file do the script\n</code></pre>\n\n<p>Each line of the file is now in the $_ default variable</p>\n\n<pre><code>if (!/^\\d/){print \"$line$_\";} - if the line does not start with a digit print the $line (more later) variable, followed by default variable which is the line from the file\n\nelse {print $_;} - else just print the line\n</code></pre>\n\n<p>Now after we've done this if the line matches anything followed by a comma followed by anything, catch it with the regex bracket so it's put in $1. So for the first line $1 will be '1,test@email.com,192.168.10.109,'</p>\n\n<pre><code>/(.*,).*/; $line=$1;\n</code></pre>\n\n<p>Because we do this after the first line has been printed $line will always be the previous full line.</p>\n"}], "owner": {"reputation": 29, "user_id": 753179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae3d4974dc3a96bab9f820b84edf581?s=128&d=identicon&r=PG", "display_name": "sorn", "link": "https://stackoverflow.com/users/753179/sorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "accepted_answer_id": 54557929, "answer_count": 2, "score": 2, "last_activity_date": 1549525096, "creation_date": 1549462574, "last_edit_date": 1549464699, "question_id": 54555688, "link": "https://stackoverflow.com/questions/54555688/how-can-i-split-and-fill-value-from-csv-data", "title": "How can i split and fill value from csv data?", "body": "<p>How can i Split Value by Newline (\\n) in some column, extract to new row and fill other column</p>\n\n<p>My Example CSV Data (data.csv)</p>\n\n<pre><code>No,Email,IP,Service,Comment\n1,test@email.com,192.168.10.109,FTP\nHTTP\nHTTPS,,\n2,webmaster@email.com,192.168.10.111,SFTP\nSNMP,,\n3,admin@email.com,192.168.10.112,HTTP,,\n</code></pre>\n\n<p>In Service column has multiple value, separate by new line.</p>\n\n<p>I want to extract it and fill with other value in some row look like this.</p>\n\n<pre><code>1,test@email.com,192.168.10.110,FTP,,\n1,test@email.com,192.168.10.110,HTTP,,\n1,test@email.com,192.168.10.110,HTTPS,,\n2,webmaster@email.com,192.168.10.111,SFTP,,\n2,webmaster@email.com,192.168.10.111,SNMP,,\n3,admin@email.com,192.168.10.112,HTTP,,\n</code></pre>\n\n<p>I try to parsing with Text::CSV, I can only split multiple ip and service But i Don't known to fill other value as above example.</p>\n\n<pre><code>#!/usr/bin/perl\nuse Text::CSV;\nmy $file = \"data.csv\";\nmy @csv_value;\nopen my $fh, '&lt;', $file or die \"Could not open $file: $!\";\nmy $csv = Text::CSV-&gt;new;\nmy $sum = 0;\nopen(my $data, '&lt;:encoding(utf8)', $file) or die \"Could not open '$file' $!\\n\";\nwhile (my $fields = $csv-&gt;getline( $data )) {\n    push @csv_value, $fields;\n}\nclose $data;\n</code></pre>\n\n<p>Thank you in advance for any help you can provide.</p>\n"}, {"tags": ["perl", "export-to-csv"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549480211, "post_id": 54555107, "comment_id": 95920928, "body": "The problem description is incomplete. (a) hashes are unsorted. In which order should the columns appear? (or are you keys really named <code>column1</code>, <code>column10</code> etc.?) (b) what should happen in those cells where <code>columnX</code> has less entries than e.g. <code>N</code>? Empty values? Output should be truncated to shortest column?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549488895, "post_id": 54555107, "comment_id": 95924679, "body": "What would be a meaningful value for the missing values? Also, please don&#39;t edit your questions when you already got answers for your original question"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549488153, "post_id": 54555241, "comment_id": 95924377, "body": "Sort::Key::Natural&#39;s <code>natsort</code> would be better than <code>sort</code> If the columns are really named <code>column1</code>, <code>column2</code>, etc (and quite possibly even if they aren&#39;t)."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1549488861, "last_edit_date": 1549488861, "creation_date": 1549461197, "answer_id": 54555241, "question_id": 54555107, "link": "https://stackoverflow.com/questions/54555107/how-to-write-arrays-to-csv-as-columns/54555241#54555241", "title": "How to write arrays to CSV as columns", "body": "<p>This is easy using <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> (or Text::CSV, as they share the same API). Just traverse the arrays in your hash by index/row number:</p>\n\n<pre><code>my @columns = sort keys %myHash;\nmy $rows = scalar @{ $myHash{ $columns[0] }};\nmy $writer = Text::CSV_XS-&gt;new();\nopen my $fh, '&gt;', 'output.csv' or die \"Couldn't write file: $!\";\n\n# Output headers\n$writer-&gt;print($fh, \\@columns);\n\n# Output payload\nfor my $row (0..$rows) {\n    $writer-&gt;print($fh, [map { $myHash{$_}-&gt;[$row] } @columns]);\n};\n</code></pre>\n\n<p>After the edit of the question, this answer doesn't fully apply anymore. If the arrays are of different length, there is no way to add values for the missing columns.</p>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1549465482, "last_edit_date": 1549465482, "creation_date": 1549465162, "answer_id": 54556532, "question_id": 54555107, "link": "https://stackoverflow.com/questions/54555107/how-to-write-arrays-to-csv-as-columns/54556532#54556532", "title": "How to write arrays to CSV as columns", "body": "<p>You can do it in two steps:\n1. Covert your hash of arrays into array of arrays\n2. Write the csv.</p>\n\n<p>My solution allows you to have blank columns. If you define in your hash columns 1,3,5, columns 2,4 will be blank.</p>\n\n<pre><code>my @twoDarray;\nforeach my $row (keys %myHash) {\n    my ($colIndex) = $row =~ /(\\d+)$/;\n    $colIndex--;\n    $twoDarray[0][$colIndex] = $row;\n    foreach my $rowIndex(0..$#{$myHash{$row}}) {\n        $twoDarray[++$rowIndex][$colIndex] = $myHash{$row}-&gt;[$rowIndex];\n    }\n}\n\nmy $finalFile = \"output.csv\";\nopen my $OUT, \"&gt;\", $finalFile;\nmy $csvTo = Text::CSV_XS-&gt;new ({ binary =&gt; 1, auto_diag =&gt; 2, sep_char =&gt; ',', allow_whitespace =&gt; 1, eol =&gt; \"\\n\"});\n$csvTo-&gt;print ($OUT, $_) for (@twoDarray);\nclose $OUT;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 0, "last_activity_date": 1549486054, "last_edit_date": 1549486054, "creation_date": 1549481677, "answer_id": 54561258, "question_id": 54555107, "link": "https://stackoverflow.com/questions/54555107/how-to-write-arrays-to-csv-as-columns/54561258#54561258", "title": "How to write arrays to CSV as columns", "body": "<p>As stated in my comment, the problem description is incomplete. My solution assumes:</p>\n\n<ol>\n<li>hash keys are named <code>column1</code>, ..., <code>column9</code>, <code>column10</code>, and so on, i.e. the columns in the generated CSV should be numerically sorted by the embedded number.</li>\n<li>the longest array defines how many rows should be in the generated CSV, i.e. undefined values should map to empty cells.</li>\n</ol>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse List::Util qw(max);\nuse Text::CSV;\n\n# read in hash-of-arrays\nmy %hash;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my($column, @values) = split(' ');\n    $hash{$column} = \\@values;\n}\n\n# column sort order (using Schwartzian transform)\nmy @column_order =\n    map  { $_-&gt;[0] }               # [ \"columnN\", N ] -&gt; \"columnN\"\n    sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }   # numerical sort, ascending\n    map  { [ /^(column(\\d+))$/ ] } # \"columnN\" -&gt; [ \"columnN\", N ]\n    keys %hash;\n\n# calculate highest array index\nmy $max_index =\n    max\n    map { $#{ $_ } }\n    values %hash;\n\n# transpose hash-of-arrays and print CSV to STDOUT\nmy $csv = Text::CSV-&gt;new();\n$csv-&gt;eol(\"\\n\");    \n$csv-&gt;print(\\*STDOUT, \\@column_order);\nfor my $index (0..$max_index) {\n    my @row =\n        map { $hash{$_}-&gt;[$index] // '' }\n        @column_order;\n    $csv-&gt;print(\\*STDOUT, \\@row);\n}\n\nexit 0;\n\n__DATA__\ncolumn1   1  2  3\ncolumn2   4  5  6 7\ncolumn3   8  9\ncolumn4  10 11 12\ncolumn5  13 14 15 16 17 18\ncolumn6\ncolumn7  19 20 21 22\ncolumn8  23\ncolumn9  24 25 26\ncolumn10 27 28 29 30\n</code></pre>\n\n<p>Run with the embedded test data</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\ncolumn1,column2,column3,column4,column5,column6,column7,column8,column9,column10\n1,4,8,10,13,,19,23,24,27\n2,5,9,11,14,,20,,25,28\n3,6,,12,15,,21,,26,29\n,7,,,16,,22,,,30\n,,,,17,,,,,\n,,,,18,,,,,\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 1834034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544e1e6f60b02616b549dd057dbfbb15?s=128&d=identicon&r=PG", "display_name": "CoderGrrl", "link": "https://stackoverflow.com/users/1834034/codergrrl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1798, "favorite_count": 0, "accepted_answer_id": 54561258, "answer_count": 3, "score": 0, "last_activity_date": 1549488861, "creation_date": 1549460757, "last_edit_date": 1549479716, "question_id": 54555107, "link": "https://stackoverflow.com/questions/54555107/how-to-write-arrays-to-csv-as-columns", "title": "How to write arrays to CSV as columns", "body": "<p>I have a hash of arrays.  Each hash key is a column name.  Each array is the values for that column.  </p>\n\n<pre><code>$myHash{column1} = [value1, value2, ..., valueN];\n$myHash{column2} = [value1, value2, ..., valueM];\n...\n</code></pre>\n\n<p>Each array is of different length.</p>\n\n<p>I want to output this as a CSV file with each array being a column.  I looked at Text::CSV but don't see how to make this structure work with that module.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1549460851, "post_id": 54555054, "comment_id": 95909935, "body": "You have posted much code. What part of the code is actually relevant and what part is not? Please reduce your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. As you are passing references around, most likely you are modifying data somewhere and hope that it remains unmodified. Also, why are you using a recursive subroutine here? What is the purpose of <code>ProcessTables</code> ?"}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549461545, "post_id": 54555054, "comment_id": 95910339, "body": "The main idea is to describe the structure of the database in an array. It turns out something like a master-detail relationship. If the main table has subordinate tables, then the data for the row of the main table, select from subordinate tables. There is a lot of code for you to take and use to debug it."}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 2, "creation_date": 1549461614, "post_id": 54555054, "comment_id": 95910391, "body": "You&#39;re reusing the variable <code>$i</code> in the inner loop."}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "edited": false, "score": 0, "creation_date": 1549462252, "post_id": 54555054, "comment_id": 95910783, "body": "Oops. Corrected on <code>i2</code>. There is no effect."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549463064, "post_id": 54555054, "comment_id": 95911317, "body": "There are many problems with your code. For example <code>$sth</code> is declared in global scope but only used in <code>ProcessTables</code>. Declare <code>$sth</code> within <code>ProcessTables</code>. Also tell us what you mean by &quot;everything changes radically on the line ...&quot; - what is the output of <code>ProcessTable</code> then? What did you expect. Please also <a href=\"https://stackoverflow.com/posts/54555054/edit\">edit</a> your code and change the second instance of <code>$i</code> to <code>$i2</code> as per your comment. Is the database connection really needed or can you simplify your code with hardcoded information?"}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "edited": false, "score": 0, "creation_date": 1549465436, "post_id": 54555054, "comment_id": 95912836, "body": "This is before line <code>if ( $tbl-&gt;[$i]-&gt;[$DET_TABLE] != 0) {</code>: &lt;img src=&quot;<a href=\"https://ibb.co/zSxkXHV\" rel=\"nofollow noreferrer\">ibb.co/zSxkXHV</a>&quot; width=&quot;100&quot; height=&quot;100&quot;&gt; This is after line: &lt;img src=&quot;<a href=\"https://ibb.co/Dg342YB\" rel=\"nofollow noreferrer\">ibb.co/Dg342YB</a>&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549465993, "post_id": 54555054, "comment_id": 95913201, "body": "Please add the output as <i>text</i> , not screenshots. Screenshots are not searchable."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549466345, "post_id": 54555054, "comment_id": 95913413, "body": "Also, of course the content of <code>$tbl</code> changes, because once you recurse, you change the value to whatever you called your next instance of <code>ProcessTables</code> with. Your original <code>@tables</code> array is likely different from what your <code>select</code> statement and <code>@arr = @{$tbl-&gt;[$i]-&gt;[$DET_TABLE]};</code> put into the next <code>$tbl</code>."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549466445, "post_id": 54555054, "comment_id": 95913485, "body": "We can only guess about your code because you have not provided a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please <a href=\"https://stackoverflow.com/posts/54555054/edit\">edit</a> your post and remove all the database stuff and replace it by hardcoded values."}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "edited": false, "score": 0, "creation_date": 1549466603, "post_id": 54555054, "comment_id": 95913587, "body": "The variable before: <code>$VAR1 = [   [ \t&#39;accounts&#39;, \t[ \t  &#39;id&#39; \t], \t&#39;&#39;, \t&#39;id_client&#39;, \t0   ] ];</code>  The variable after: <code>$VAR1 = [   [ \t&#39;clients&#39;, \t[ \t  &#39;id&#39; \t], \t&#39;id&#39;, \t&#39;&#39;, \t[ \t  [ \t\t&#39;accounts&#39;, \t\t[ \t\t  &#39;id&#39; \t\t], \t\t&#39;&#39;, \t\t&#39;id_client&#39;, \t\t0 \t  ] \t]   ] ]; </code>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549467098, "post_id": 54555054, "comment_id": 95913905, "body": "Sure, but in <code>$tbl</code> is whatever you call <code>ProcessTable</code> with, so I don&#39;t see how that is problematic. But then again, as I said several times already, your posted code is far too large and relies on far too many unknown things for me to properly replicate your situation. I recommend that you remove as many things as possible, by hardcoding the values instead."}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "edited": false, "score": 0, "creation_date": 1549467237, "post_id": 54555054, "comment_id": 95913995, "body": "Yes, content <code>$tbl</code> changed, but it chenged when execute of line <code>if ( $tbl-&gt;[$i]-&gt;[$DET_TABLE] != 0) {</code>. This should not happen.I check the variable. When checking something happens, that clearly seen in the pictures listed on the link above."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549467482, "post_id": 54555054, "comment_id": 95914165, "body": "No. Your screenshots only show that <code>$tbl</code> now points to the <code>clients</code> array instead of the outer array. Which is to be expected, as you call <code>ProcessTable(\\@arr)</code> and did assign the sub-array to <code>@arr</code>. I don&#39;t see how the line you claim &quot;changes everything&quot; does actually change everything. I would, instead of using a debugger, use <code>Data::Dumper</code> and <code>print</code> to show the values and watch the progress through the script. If you set a breakpoint or &quot;step over&quot; the subroutine call, then the debugger will maybe trigger the breakpoint while you are within that subroutine call."}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "edited": false, "score": 0, "creation_date": 1549468703, "post_id": 54555054, "comment_id": 95915066, "body": "I make video record of this process. Where it upload for the best you download?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1549468983, "post_id": 54555054, "comment_id": 95915241, "body": "We don&#39;t want a video. We want a simplified version of your code that we can run."}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "edited": false, "score": 0, "creation_date": 1549482454, "post_id": 54555054, "comment_id": 95921926, "body": "I have a change my post. Are you have any idea?"}, {"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1549492991, "post_id": 54555054, "comment_id": 95926231, "body": "Add <code>use Data::Dumper;</code> then, at the third line of <code>ProcessTables()</code>, add <code>print Dumper  $tbl, $id_value;</code>."}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "edited": false, "score": 0, "creation_date": 1549518803, "post_id": 54555054, "comment_id": 95932348, "body": "Added. Here is output: 1st - <code>$VAR1 = [ [ &#39;clients&#39;, [   &#39;id&#39; ], &#39;id&#39;, &#39;&#39;, [   [ \t&#39;accounts&#39;, \t[ \t  &#39;id&#39; \t], \t&#39;&#39;, \t&#39;id_client&#39;, \t0   ] ] ] ]; $VAR2 = undef;</code>  2 -nd - <code>$VAR1 = [ [ &#39;accounts&#39;, [   &#39;id&#39; ], &#39;&#39;, &#39;id_client&#39;, 0 ] ]; $VAR2 = &#39;blablalba&#39;;</code>"}, {"owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "edited": false, "score": 1, "creation_date": 1549535707, "post_id": 54555054, "comment_id": 95940339, "body": "Very BIG Thanks to all. I&#39;ve got it. The problem is solved. Have i nice day.! <code>return</code> made a miracle."}], "owner": {"reputation": 1, "user_id": 6370201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVj2j.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/6370201/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549482373, "creation_date": 1549460625, "last_edit_date": 1549482373, "question_id": 54555054, "link": "https://stackoverflow.com/questions/54555054/perl-variables-access-problem-with-recursive-call-sub", "title": "Perl variables access problem with recursive call sub", "body": "<p>I need to convert the database to SQL. I write it on perl. It's here:</p>\n\n<p>P.S. Simplifyed</p>\n\n<pre><code>#!/usr/bin/perl\nuse utf8;\nuse strict;\nuse warnings;\n\nmy @tables = (\n    ['clients', ['id'], 'id', '', \n      [['accounts', ['id'], '', 'id_client', 0]]\n    ]\n);\n\nsub ProcessTables {\n    my ($tbl, $id_value) = @_;\n    my ($i, $i2, $sth);\n    my @arr;\n    my $arr_count = $#$tbl;\n    for ( $i=0; $i&lt;=$arr_count; $i++ ) {\n        if ( $tbl-&gt;[$i]-&gt;[4] != 0) {\n            @arr = @{$tbl-&gt;[$i]-&gt;[4]};\n            ProcessTables( \\@arr, 'blablalba' );\n        };\n    }\n};\n\nProcessTables(\\@tables);\n</code></pre>\n\n<p>When I get into the procedure a second time (after the line @arr = ....) by the passed parameters and access to them, there are no problems. Everything is smooth and beautiful. Everything changes radically on the line \"if ( $tbl->[$i]->[4] != 0)\". After that, it seems that I did not go here. All variables refer to the data that I saw when I first entered this procedure. Before the call \"if,\" all links pointed to an array with data \"accounts\". After the call, they began to point to the \"clients\" again.\nPlease tell me what is the matter? Why it happens?</p>\n\n<p>P.S. I debug it under linux. This is output:</p>\n\n<pre><code>  DB&lt;2&gt;\nmain::ProcessTables(TestRecurce2.pl:19):\n19:         my $arr_count = $#$tbl;\n  DB&lt;2&gt;\nmain::ProcessTables(TestRecurce2.pl:20):\n20:         for ( $i=0; $i&lt;=$arr_count; $i++ ) {\n  DB&lt;2&gt;\nmain::ProcessTables(TestRecurce2.pl:21):\n21:             if ( $tbl-&gt;[$i]-&gt;[4] != 0) {\n  DB&lt;2&gt; p $tbl\nARRAY(0x5593be5baba0)\n  DB&lt;3&gt; p  $tbl-&gt;[$i]\nARRAY(0x5593be5fbf78)\n  DB&lt;4&gt; p $tbl-&gt;[$i]-&gt;[4]\n0\n  DB&lt;5&gt; n\nDebugged program terminated.  Use q to quit or R to restart,\nuse o inhibit_exit to avoid stopping after program termination,\nh q, h R or h o to get additional info.\n</code></pre>\n"}, {"tags": ["perl", "datetime"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1549460800, "post_id": 54554008, "comment_id": 95909888, "body": "It&#39;s not clear what that <code>DateTime</code> package is as you&#39;ve not included a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, but does it not have some method of parsing a date string?"}], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": false, "score": 2, "last_activity_date": 1549461132, "creation_date": 1549461132, "answer_id": 54555217, "question_id": 54554008, "link": "https://stackoverflow.com/questions/54554008/perl-format-a-utc-mysql-datetime-to-a-gmt-bst-london-europe-string/54555217#54555217", "title": "Perl format a UTC MySQL datetime to a GMT/BST London/Europe string", "body": "<pre><code>use strict;\nuse warnings;\n\nuse DateTime;\nuse DateTime::Format::Strptime;\n\nmy $my_utc_date_time = \"2019-07-01 01:02:03\";\n\nmy $datetime_parser = DateTime::Format::Strptime-&gt;new(pattern =&gt; '%F %T',\n                                                      locale =&gt; 'en_GB',\n                                                      time_zone =&gt; 'UTC');\n\nmy $datetime = $datetime_parser-&gt;parse_datetime($my_utc_date_time);\nprint $datetime-&gt;strftime('%FT%T %Z (UTC %z)'), \"\\n\";\n\nmy $local_datetime = $datetime-&gt;set_time_zone('Europe/London');\nprint $local_datetime-&gt;strftime('%FT%T %Z (UTC %z)'), \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2019-07-01T01:02:03 UTC (UTC +0000)\n2019-07-01T02:02:03 BST (UTC +0100)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 778, "user_id": 989067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8972405a5613aaf47e573c0335cfbef2?s=128&d=identicon&r=PG", "display_name": "danielpopa", "link": "https://stackoverflow.com/users/989067/danielpopa"}, "is_accepted": false, "score": 1, "last_activity_date": 1549462237, "creation_date": 1549462237, "answer_id": 54555592, "question_id": 54554008, "link": "https://stackoverflow.com/questions/54554008/perl-format-a-utc-mysql-datetime-to-a-gmt-bst-london-europe-string/54555592#54555592", "title": "Perl format a UTC MySQL datetime to a GMT/BST London/Europe string", "body": "<p>There are multiple options, an <a href=\"https://metacpan.org/pod/Date::Language::Bulgarian\" rel=\"nofollow noreferrer\">example</a> is\n(and <a href=\"https://metacpan.org/pod/Date::Format\" rel=\"nofollow noreferrer\">format</a>)</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Date::Language;\n\nmy $dt = Date::Language-&gt;new('English');\nprint $dt-&gt;time2str(\"%Y-%m-%d %H:%M:%S %Z (UTC %z)\", time, 'Europe/London');\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>2019-02-06 14:08:05 EUROPE/LONDON (UTC +0000)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1549467513, "creation_date": 1549467513, "answer_id": 54557277, "question_id": 54554008, "link": "https://stackoverflow.com/questions/54554008/perl-format-a-utc-mysql-datetime-to-a-gmt-bst-london-europe-string/54557277#54557277", "title": "Perl format a UTC MySQL datetime to a GMT/BST London/Europe string", "body": "<p>Just for completeness I'm adding an answer for <a href=\"https://metacpan.org/pod/distribution/Date-Manip/lib/Date/Manip.pod\" rel=\"nofollow noreferrer\">Date::Manip</a> too:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Date::Manip;\n\nmy $date = Date::Manip::Date-&gt;new()\n    or die \"can't create Date::Manip::Date object\\n\";\n\n# Parse time\nmy $error;\n# add timezone - otherwise parser assumes local timezone\n$error = $date-&gt;parse(\"${ARGV[0]} UTC\")\n    and die \"PARSE: ${error}\\n\";\n\nforeach my $zone (\n    'UTC',\n    'Europe/Helsinki',\n    'Europe/London',\n    'America/New_York',\n    'America/Los_Angeles',\n    'Asia/Tokyo',\n) {\n    # Convert time to other timezone\n    $error = $date-&gt;convert($zone)\n        and die \"CONVERT (${zone}) ${error}\\n\";\n    printf \"%-25s: %s\\n\", $zone, $date-&gt;printf('%Y-%m-%d %H:%M:%S %Z (UTC %z)');\n}\n\nexit 0;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl \"2019-01-01 01:02:03\"\nUTC                      : 2019-01-01 01:02:03 UTC (UTC +0000)\nEurope/Helsinki          : 2019-01-01 03:02:03 EET (UTC +0200)\nEurope/London            : 2019-01-01 01:02:03 GMT (UTC +0000)\nAmerica/New_York         : 2018-12-31 20:02:03 EST (UTC -0500)\nAmerica/Los_Angeles      : 2018-12-31 17:02:03 PST (UTC -0800)\nAsia/Tokyo               : 2019-01-01 10:02:03 JST (UTC +0900)\n\n# example in summer to show \"BST\"\n$ perl dummy.pl \"2018-06-01 01:02:03\"\nUTC                      : 2018-06-01 01:02:03 UTC (UTC +0000)\nEurope/Helsinki          : 2018-06-01 04:02:03 EEST (UTC +0300)\nEurope/London            : 2018-06-01 02:02:03 BST (UTC +0100)\nAmerica/New_York         : 2018-05-31 21:02:03 EDT (UTC -0400)\nAmerica/Los_Angeles      : 2018-05-31 18:02:03 PDT (UTC -0700)\nAsia/Tokyo               : 2018-06-01 10:02:03 JST (UTC +0900)\n</code></pre>\n"}], "owner": {"reputation": 10795, "user_id": 1072492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cB556.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1072492/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1549467513, "creation_date": 1549457206, "last_edit_date": 1549461022, "question_id": 54554008, "link": "https://stackoverflow.com/questions/54554008/perl-format-a-utc-mysql-datetime-to-a-gmt-bst-london-europe-string", "title": "Perl format a UTC MySQL datetime to a GMT/BST London/Europe string", "body": "<p>I have DateTime formatted as <code>2019-01-01 01:02:03</code> returned from a MySQL Database. I would like to convert that to <code>Europe/London</code> and output formatted as:</p>\n\n<p><code>2019-01-01 01:02:03 GMT (UTC +00:00)</code></p>\n\n<p>This should be able to handle BST DateTimes too such as:</p>\n\n<p><code>2019-07-01 01:02:03</code> UTC would output <code>2019-07-01 02:02:03 BST (UTC +01:00)</code></p>\n\n<p>I've tried looking at this <a href=\"https://stackoverflow.com/questions/5770846/perl-get-bst-london-time-or-any-other-time\">question and answer</a> but can't figure out how to apply that locale conversion on a supplied DateTime string rather than <code>now</code>?</p>\n\n<p>This is the pseudo code equivalent of what I need, forgive my horrible Perl...</p>\n\n<pre><code>use DateTime;\nmy $my_utc_date_time = \"2019-01-01 01:02:03\";\n\n# this needs to use $my_utc_date_time not now\nmy $start_date = DateTime-&gt;now-&gt;set_time_zone(\"Europe/London\")-&gt;iso8601;\n\nmy $start_date_formatted = strftime(\"%Y-%m-%d %H:%M:%S %Z (UTC +00:00)\", $start_date);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "reply_to_user": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 0, "creation_date": 1549455302, "post_id": 54552732, "comment_id": 95906576, "body": "@PushpeshKumarRajwanshi The rationale is typically that the user answered a bad question, and deserves to be punished.  But sometimes the threshhold for issuing such a downvote is too easy IMO."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1549463294, "post_id": 54552732, "comment_id": 95911474, "body": "Although it is perfectly correct, maybe your downvoter was surprised by the <code>,-.</code> in the character class."}], "tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 3, "last_activity_date": 1549464058, "last_edit_date": 1549464058, "creation_date": 1549452873, "answer_id": 54552732, "question_id": 54552622, "link": "https://stackoverflow.com/questions/54552622/regex-for-first-character-can-not-be-special-one-and-same-character-not-allowed/54552732#54552732", "title": "Regex for First character can not be special one and same character not allowed consecutively 8 or more times", "body": "<p>Try this regex:</p>\n\n<pre><code>^(?!.*(.)\\1{7})[A-Za-z0-9][\\w!#+,./:=@-]{7,23}$\n</code></pre>\n\n<p>Here is an explanation:</p>\n\n<pre><code>^                          from the start of the string\n    (?!.*(.)\\1{7})         assert that the same character does not occur 8 or more\n                           times in a row\n    [A-Za-z0-9]            match an inital non special character\n    [\\w!#+,./:=@-]{7,23}$  then match 7 to 23 of any character\n$                          end of input\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/2Khhfk/2\" rel=\"nofollow noreferrer\"><h2>Demo</h2></a></p>\n"}], "owner": {"reputation": 193, "user_id": 5287896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-AntAZn3hpog/AAAAAAAAAAI/AAAAAAAAAEw/Ieccb185oDo/photo.jpg?sz=128", "display_name": "Mohit Agrawal", "link": "https://stackoverflow.com/users/5287896/mohit-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 54552732, "answer_count": 1, "score": 1, "last_activity_date": 1555920217, "creation_date": 1549452602, "last_edit_date": 1555920217, "question_id": 54552622, "link": "https://stackoverflow.com/questions/54552622/regex-for-first-character-can-not-be-special-one-and-same-character-not-allowed", "title": "Regex for First character can not be special one and same character not allowed consecutively 8 or more times", "body": "<p>I want to define a perl regex that will satisfy below conditions </p>\n\n<ol>\n<li>Minimum length is 8 and maximum is 24. - (^[\\w!#+,-./:=@]{8,24}$) </li>\n<li><p>Same character can not appear consecutively 8 or more times - ([\\w!#+,-./:=@])\\1{7} </p></li>\n<li><p>First character can not be special one - ^[^a-zA-Z0-9]+</p></li>\n<li><p>Character allowed - \\w!#+,-./:=@ </p></li>\n</ol>\n\n<p>I am able to achieve this separately, but how to combine all these 3 regex .</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["database", "oracle", "amazon-web-services", "perl", "amazon-rds"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549445596, "post_id": 54548149, "comment_id": 95900770, "body": "Please <a href=\"https://stackoverflow.com/posts/54548149/edit\">edit</a> your post and show us the &quot;lots of errors&quot;. Without seeing these, it&#39;s hard to suggest you a good way on how to approach the situation."}, {"owner": {"reputation": 113, "user_id": 10815761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Xd81.jpg?s=128&g=1", "display_name": "Mohamed Jawad", "link": "https://stackoverflow.com/users/10815761/mohamed-jawad"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549452497, "post_id": 54548149, "comment_id": 95904901, "body": "please go through the error @Corion"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549452829, "post_id": 54548149, "comment_id": 95905095, "body": "The error is quite descriptive: <code>Perhaps the DBD::Oracle perl module hasn&#39;t been fully installed</code>. Most likely, this is the case."}, {"owner": {"reputation": 113, "user_id": 10815761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Xd81.jpg?s=128&g=1", "display_name": "Mohamed Jawad", "link": "https://stackoverflow.com/users/10815761/mohamed-jawad"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549458060, "post_id": 54548149, "comment_id": 95908248, "body": "Tried using cpan DBD::Oracle command &amp; cpan&gt; install DBD::Oracle, getting this at the end. YAML is also installed &#39;Warning: No success on command[/usr/bin/perl Makefile.PL] &#39;YAML&#39; not installed, will not store persistent state   ZARQUON/DBD-Oracle-1.76.tar.gz   /usr/bin/perl Makefile.PL -- NOT OK Running make test   Make had some problems, won&#39;t test Running make install   Make had some problems, won&#39;t install Failed during this command:  ZARQUON/DBD-Oracle-1.76.tar.gz               : writemakefile NO &#39;/usr/bin/perl Makefile.PL&#39; returned status 512&#39; @Corion"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549460044, "post_id": 54548149, "comment_id": 95909433, "body": "Yes, but that is a different problem. Most likely, the Oracle client libraries are not installed. You don&#39;t show the output of ` /usr/bin/perl Makefile.PL` but most likely it tells you that. See also <code>https:&#47;&#47;metacpan.org&#47;pod&#47;distribution&#47;DBD-Oracle&#47;</code> and <a href=\"https://stackoverflow.com/questions/11407513/perl-dbdoracle-module-installation\" title=\"perl dbdoracle module installation\">stackoverflow.com/questions/11407513/&hellip;</a>"}, {"owner": {"reputation": 113, "user_id": 10815761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Xd81.jpg?s=128&g=1", "display_name": "Mohamed Jawad", "link": "https://stackoverflow.com/users/10815761/mohamed-jawad"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549545074, "post_id": 54548149, "comment_id": 95945987, "body": "Thanks@Corion, Error is gone."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 10815761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Xd81.jpg?s=128&g=1", "display_name": "Mohamed Jawad", "link": "https://stackoverflow.com/users/10815761/mohamed-jawad"}, "edited": false, "score": 0, "creation_date": 1549545003, "post_id": 54551758, "comment_id": 95945939, "body": "I followed Oracle Data pump method by installing Oracle XE in EC2 instance, created db_link with RDS. Thanks @Dmitry"}], "tags": [], "owner": {"reputation": 1739, "user_id": 7734732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LKH8p.jpg?s=128&g=1", "display_name": "Dmitry Demin", "link": "https://stackoverflow.com/users/7734732/dmitry-demin"}, "is_accepted": true, "score": 0, "last_activity_date": 1549450013, "creation_date": 1549450013, "answer_id": 54551758, "question_id": 54548149, "link": "https://stackoverflow.com/questions/54548149/how-to-upload-oracle-dump-file-to-oracle-database-aws-rds/54551758#54551758", "title": "How to upload oracle dump file to oracle database: AWS RDS", "body": "<p>AWS RDS does not allow directory access.</p>\n\n<ol>\n<li>You need install Oracle XE on Amazon EC2.</li>\n<li>Create db_link on Oracle XE EC2 between Oracle XE and Oracle RDS.</li>\n<li>Use a db_link between Oracle XE and Oracle RDS to transfer files\n    using the procedure DBMS_FILE_TRANSFER.</li>\n</ol>\n\n<p>If you can export using the original export <code>exp</code>, \nyou can import from any workstation with oracle client and the original import utility <code>imp</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 10815761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Xd81.jpg?s=128&g=1", "display_name": "Mohamed Jawad", "link": "https://stackoverflow.com/users/10815761/mohamed-jawad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 54551758, "answer_count": 1, "score": 0, "last_activity_date": 1549452417, "creation_date": 1549436168, "last_edit_date": 1549452417, "question_id": 54548149, "link": "https://stackoverflow.com/questions/54548149/how-to-upload-oracle-dump-file-to-oracle-database-aws-rds", "title": "How to upload oracle dump file to oracle database: AWS RDS", "body": "<p>I have oracle dump file in my AWS ec2 instance, I want to import this dump file to Oracle database in AWS RDS. </p>\n\n<p>I tried using with Oracle SQL developer and also using Perl script.</p>\n\n<p><a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Oracle.Procedural.Importing.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Oracle.Procedural.Importing.html</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/23486198/how-to-import-oracle-dump-from-ec2-instance-to-rds-in-aws\">How to import oracle dump from ec2 instance to RDS in AWS</a></p>\n\n<p>Using Oracle SQL Developer method, the 'Database Copy' option is not enabled.\nUsing Perl, getting a lot of error while running the script.</p>\n\n<pre><code>[root@ip-172-28-1-70 oracle]# perl dump_exp.pl     \ninstall_driver(Oracle) failed: Can't locate DBD/Oracle.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at (eval 4) line 3.\n    Perhaps the DBD::Oracle perl module hasn't been fully installed,\n    or perhaps the capitalisation of 'Oracle' isn't right.\n    Available drivers: DBM, ExampleP, File, Gofer, Mem, Proxy, SQLite, Sponge.\n     at dump_exp.pl line 23.\n</code></pre>\n\n<p>this both methods are not working for me, and am not aware of Perl.</p>\n\n<p>Please suggest me if have any better method.</p>\n"}, {"tags": ["pathname", "perl", "file-find"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549419483, "post_id": 54545713, "comment_id": 95892117, "body": "it calls catdir to concatenate all but the final arg, and catdir calls canonpath which &quot;cleans up&quot; . entries, double slashes, leading /.., and such"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549421113, "post_id": 54545713, "comment_id": 95892471, "body": "@ysth But why &quot;clean up&quot; the <code>.&#47;</code> on only files <b>not</b> in the root? That seems like a major inconsistency."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1549421980, "post_id": 54545713, "comment_id": 95892636, "body": "<code>File::Spec-&gt;catfile(File::Spec-&gt;catfile(&quot;.&quot;, &quot;foo&quot;), &quot;bar&quot;);</code> makes no sense. Should be <code>File::Spec-&gt;catfile(File::Spec-&gt;catdir(&quot;.&quot;, &quot;foo&quot;), &quot;bar&quot;);</code> or <code>File::Spec-&gt;catfile(&quot;.&quot;, &quot;foo&quot;, &quot;bar&quot;);</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549422401, "post_id": 54545713, "comment_id": 95892726, "body": "@EvanCarroll don&#39;t know what you mean by &quot;not in the root&quot;; what&#39;s an example of &quot;in the root&quot;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1549422476, "post_id": 54545713, "comment_id": 95892744, "body": "@ysth, They mean the base directory. More specifically, they mean a base of directory of <code>.</code>. The question is in the comments ask why <code>.&#47;file</code> isn&#39;t canonized to <code>file</code>."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1549423711, "post_id": 54545713, "comment_id": 95892967, "body": "Or why not canonize all things with the <code>.&#47;</code> prefix (there isn&#39;t a standard that I know that says an initial <code>.&#47;</code> is incorrect). It&#39;s more about the inconsistency."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549424372, "post_id": 54545713, "comment_id": 95893082, "body": "No way. To canonize means to clean up. Adding noise is the opposite of that"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549424925, "post_id": 54545713, "comment_id": 95893192, "body": "@ikegami I don&#39;t read &quot;canonicalization&quot; as &quot;cleaning up&quot;. It&#39;s supposed to be standardizing which is why this bizarre. That said, the &quot;Remove Dot Segments&quot; algorithm in the W3C XML canonicalization says to remove <code>.&#47;</code> the <code>.&#47;foo</code> and I have no resistance to change either way."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549427922, "post_id": 54545713, "comment_id": 95893814, "body": "To canonize is to  transform into the normal (&quot;canon&quot;) form, which is a clean form for display. This includes getting rid of extraneous junk (e.g <code>.&#47;</code> in paths). (On systems like NTFS, it could also mean switching to the long name as capitalized on disk, though File::Spec doesn&#39;t do that.)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549433094, "post_id": 54545713, "comment_id": 95895337, "body": "Ah.  catfile takes directory parts and a filename.  The directory is canonicalized, and . doesn&#39;t canonicalized to nothing"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1549422535, "creation_date": 1549422535, "answer_id": 54546091, "question_id": 54545713, "link": "https://stackoverflow.com/questions/54545713/why-is-filespec-dropping-on-files-in-sub-directories/54546091#54546091", "title": "Why is File::Spec dropping &#39;./&#39; on files in sub directories?", "body": "<p>File::Spec::Unix canonizes the directory part of the path.</p>\n\n<p>Why doesn't it canoninize the whole path (so that <code>catfile('.', 'file')</code> produces <code>file</code>)? No idea. This seems like an oversight to me. Feel free to file a bug report.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54546091, "answer_count": 1, "score": 1, "last_activity_date": 1549422535, "creation_date": 1549418957, "last_edit_date": 1549421676, "question_id": 54545713, "link": "https://stackoverflow.com/questions/54545713/why-is-filespec-dropping-on-files-in-sub-directories", "title": "Why is File::Spec dropping &#39;./&#39; on files in sub directories?", "body": "<p><a href=\"https://metacpan.org/pod/File::Spec\" rel=\"nofollow noreferrer\"><code>File::Spec</code></a> is a core module to <em>\"portably perform operations on file names\"</em>. This behavior makes perfect sense to me,</p>\n\n<pre><code># returns ./foo\nFile::Spec-&gt;catfile(\".\", \"foo\");\n</code></pre>\n\n<p>However, this has my mind boggled.</p>\n\n<pre><code># returns foo/bar\nFile::Spec-&gt;catfile(File::Spec-&gt;catfile(\".\", \"foo\"), \"bar\");\nFile::Spec-&gt;catfile(\"./foo\", \"bar\");\n</code></pre>\n\n<p>For a library that supposed to standardize this stuff, why is my <code>./</code> gone? Is there a reason for this behavior?</p>\n\n<p>Just weird to have this returned,</p>\n\n<pre><code>CP-JobApp/t/lib/Testing.pm\nCP-JobApp/t/pod.t\nCP-JobApp/t/find.t\n./h\n./problem1.pl\n</code></pre>\n\n<p>Is it normal to post-process file names the module returns?</p>\n"}, {"tags": ["python", "powershell", "perl", "parsing", "autosys"], "comments": [{"owner": {"reputation": 9, "user_id": 4305786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wGUNTO04hSY/AAAAAAAAAAI/AAAAAAAAAIg/VmnehjEktcc/photo.jpg?sz=128", "display_name": "brisingr1995", "link": "https://stackoverflow.com/users/4305786/brisingr1995"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1549405264, "post_id": 54543847, "comment_id": 95888960, "body": "Thanks orde, is there anything specific about my question that i should change ?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1549405565, "post_id": 54543847, "comment_id": 95889039, "body": "Code-based questions on SO typically require your attempt(s) to solve the problem.  You&#39;ve outlined your input and expected output, but you&#39;re missing what you tried to solve the issue.  If you can supply that, I&#39;ll give you an upvote :)  Good luck!"}, {"owner": {"reputation": 9, "user_id": 4305786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wGUNTO04hSY/AAAAAAAAAAI/AAAAAAAAAIg/VmnehjEktcc/photo.jpg?sz=128", "display_name": "brisingr1995", "link": "https://stackoverflow.com/users/4305786/brisingr1995"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1549405764, "post_id": 54543847, "comment_id": 95889094, "body": "Oh alright, i&#39;m nowhere near the answer so i thought it would waste time but i will post what i have ."}], "owner": {"reputation": 9, "user_id": 4305786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wGUNTO04hSY/AAAAAAAAAAI/AAAAAAAAAIg/VmnehjEktcc/photo.jpg?sz=128", "display_name": "brisingr1995", "link": "https://stackoverflow.com/users/4305786/brisingr1995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 1, "closed_date": 1549408610, "answer_count": 0, "score": 0, "last_activity_date": 1549406622, "creation_date": 1549404668, "last_edit_date": 1549406622, "question_id": 54543847, "link": "https://stackoverflow.com/questions/54543847/how-to-loop-through-sections-within-a-text-file-using-python-language-isnt-fix", "closed_reason": "Duplicate", "title": "How to loop through sections within a text file using python ( language isnt fixed, any should be okay)", "body": "<p>I'm trying to learn coding and i've decided to try python. As a starter project, i plan to write a script to parse an autosys JIL file. </p>\n\n<p>The input file looks like this , lets call it a.txt</p>\n\n<pre><code>start\ninsert_job: backupJIL \njob_type: c \ncommand: autorep -J ALL -q &gt; /home/autosys/...p/autosys_jil_bk\nmachine: machine\nowner: autosys@machine\npermission: gx,ge,wx,we\ndate_conditions: 1\ndays_of_week: tu,we,th,fr,sa\nstart_times: \"17:00\"\ndescription: \"Daily backup of job definitions\"\nstd_out_file: /tmp/autosys_jil_backup.out\nstd_err_file: /tmp/autosys_jil_backup.err\nalarm_if_fail: 1\nstop\nstart\ninsert_job: BC_mount \njob_type: c \nbox_name: S..fresh_box\ncommand: /sysadm/xp/bin..odbc.sh\nmachine: machine\nowner: autosys@machine\npermission: gx,wx\ncondition: success(Check_BC_Status)\ndescription: \"Mount the BCs on machine\"\nstd_out_file: &gt;/var/tmp/mountprodbc.log\nstd_err_file: &gt;/var/tmp/mountprodbc.err\nalarm_if_fail: 1\nstop\n</code></pre>\n\n<p>What i wish to do is to go through this file, and for each section ( section start is denoted by the word start, sections ends at the word stop) to save these values to a database .</p>\n\n<p>That comes later though, assuming i do better at coding . For now, it would be very helpful if anyone could point me in the right direction. My current goal is only to count the number of lines in each section.</p>\n\n<p>P.S. I'm relatively new to actual coding, so far i've only dabbled in databases and ETL, therefore i have no specific language im stuck to. Other languages that i plan to learn are perl and poweshell . </p>\n\n<p>Expected result from parsing the input file</p>\n\n<pre><code>13\n12\n</code></pre>\n\n<p>I'm not sure how to go ahead with this , as of now i am only able to count all lines within the file . This is what im trying right now .</p>\n\n<pre><code>def autoparse(fname):\n    j=0\n    with open(fname) as f:\n        for i in (f):\n            j=j+1\n            if i == \"start\" : break\n    return j\n\nprint(autoparse(\"a.txt\"))\n</code></pre>\n"}, {"tags": ["excel", "perl"], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1549434122, "last_edit_date": 1592644375, "creation_date": 1549433631, "answer_id": 54547630, "question_id": 54543381, "link": "https://stackoverflow.com/questions/54543381/excelwriterxlsx-writing-unformatted-date/54547630#54547630", "title": "Excel::Writer::XLSX writing unformatted date", "body": "<p>Quoting from <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#CELL-FORMATTING\" rel=\"nofollow noreferrer\">CELL FORMATTING</a> section:</p>\n<blockquote>\n<p>Cell formatting is defined through a Format object. Format objects are created by calling the workbook <code>add_format()</code> method as follows:</p>\n<pre><code>my $format2 = $workbook-&gt;add_format( %props );    # Set at creation\n</code></pre>\n<p>The format object holds all the formatting properties that can be applied to a cell, a row or a column. <strong>The process of setting these properties is discussed in the next section.</strong></p>\n</blockquote>\n<p>Another quote from <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#write_date_time(-$row,-$col,-$date_string,-$format-)\" rel=\"nofollow noreferrer\">write_date_time()</a> section:</p>\n<blockquote>\n<p>A date should always have a <code>$format</code>, otherwise it will appear as a number, see &quot;DATES AND TIME IN EXCEL&quot; and &quot;CELL FORMATTING&quot;.</p>\n</blockquote>\n<p>According to this your code should be:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>my $date_format = $workbook-&gt;add_format(\n    bold       =&gt; 1,\n    align      =&gt; 'center',\n    num_format =&gt; 'mm/dd/yyyy'\n);\n\n# apply format to a specific cell\n# $string should be in ISO-8601 format as UTC, e.g. yyyy-mm-ddThh:mm:ss.sssZ\n$worksheet-&gt;write_date_time($row, $column, $string, $date_format);\n</code></pre>\n<p>My weapon of choice for wrangling time stamps would be the <a href=\"https://metacpan.org/pod/Date::Manip::Examples\" rel=\"nofollow noreferrer\">Date::Manip</a> distribution.</p>\n"}], "owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1549434122, "creation_date": 1549402348, "last_edit_date": 1549433619, "question_id": 54543381, "link": "https://stackoverflow.com/questions/54543381/excelwriterxlsx-writing-unformatted-date", "title": "Excel::Writer::XLSX writing unformatted date", "body": "<p>I have a script which is using the <code>Spreadsheet::XLSX</code> module to read in data which includes unformatted dates.  When I open the spreadsheet on the desktop it does show the dates in the <code>mm/dd/yyyy</code> format.  After I am finished reading them I write them out to a spreadsheet using the <code>Excel::Writer::XLSX</code> module. I am basically adding the next date in sequence. Everything works fine until I then read in from the spreadsheet that I created.  It ONLY reads the date as formatted, no matter if I use either of these to read them:</p>\n\n<pre><code>$cell-&gt;{Val}\n$cell-&gt;value()\n</code></pre>\n\n<p>This is the write format I'm using to write out the date.  Just so I'm clear, I am writing out the date in the unformatted value using this format.  If I don't use the <code>num_format</code> then the dates are in the <code>ddddd</code> format when I open the spreadsheet.</p>\n\n<pre><code>$workbook-&gt;add_format(bold =&gt; 1, align =&gt; 'center', num_format =&gt; 'mm/dd/yyyy');\n</code></pre>\n\n<p>How do I get it to be consistent when reading the spreadsheets and also viewing the dates as <code>mm/dd/yyyy</code> when I open it?</p>\n"}, {"tags": ["arrays", "perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1549397399, "post_id": 54542265, "comment_id": 95885705, "body": "Do you get any errors?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1549398544, "post_id": 54542265, "comment_id": 95886191, "body": "<code>$_-&gt;{&#39;roles&#39;}{&#39;member&#39;}</code> among other ways."}, {"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1549398709, "post_id": 54542265, "comment_id": 95886256, "body": "Hi Shawn, i tried it but it doesnt work, i get ARRAY(0x28b38cc)"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549399689, "post_id": 54542265, "comment_id": 95886676, "body": "<code>$_-&gt;{roles}-&gt;{member}</code> is an array ref, so you&#39;ll need to de-reference it with <code>@{ ... }</code>. Otherwise it&#39;ll get again stringified, hence <code>ARRAY(...)</code>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549400146, "post_id": 54542265, "comment_id": 95886869, "body": "May I point you to <a href=\"http://perldoc.perl.org/perlreftut.html#The-Rest\" rel=\"nofollow noreferrer\">perlreftut</a>? &quot;If you try to use a reference like a string, you get strings like <code>ARRAY(0x80f5dec)</code>   or  <code>HASH(0x826afc0)</code>&quot;"}, {"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1549400346, "post_id": 54542265, "comment_id": 95886945, "body": "thank you. will refer to this document."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549401686, "post_id": 54542265, "comment_id": 95887525, "body": "also <a href=\"http://perlmonks.org/?node=References+quick+reference\" rel=\"nofollow noreferrer\">perlmonks.org/?node=References+quick+reference</a>"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1549398836, "post_id": 54542560, "comment_id": 95886319, "body": ":Thank you. i tried this, for this i get ARRAY(0xxxxxxxx).I am not getting the value in member field. Is there anything i am missing here."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1549399405, "post_id": 54542560, "comment_id": 95886542, "body": "See the updated full code example with test run. As you can see it works."}, {"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1549400401, "post_id": 54542560, "comment_id": 95886981, "body": "Thanks a lot Stefan, this works. Will read the perlreftut you sent."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1549399559, "last_edit_date": 1549399559, "creation_date": 1549398624, "answer_id": 54542560, "question_id": 54542265, "link": "https://stackoverflow.com/questions/54542265/access-variables-of-an-array-elements-using-perl/54542560#54542560", "title": "Access variables of an array elements using perl", "body": "<p>Try</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># hash ref, key 'family' pointing to scalar\nprint $_-&gt;{family}, \"\\n\";\n# hash ref, key 'roles' pointing to hash ref,\n#    key 'members' pointing to array ref \nprint @{ $_-&gt;{roles}-&gt;{member} }, \"\\n\";\n</code></pre>\n\n<p>Your hash reference got interpolated into a string, hence the <code>HASH(...)</code>.</p>\n\n<p>Complete code example based on your code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $array = [\n    {\n        family =&gt; \"abc\",\n        roles  =&gt; {},\n    },\n    {\n        family =&gt; \"def\",\n        roles  =&gt; {\n            member =&gt; [\"1234\"],\n        },\n    },\n];\n\nfor my $hash_ref (@{ $array }) {\n    print \"family \", $hash_ref-&gt;{family}, \"\\n\";\n    while (my($key, $value) = each %{ $hash_ref-&gt;{roles} }) {\n        print \"role '${key}' @{ $value }\\n\";\n    }\n}\n\nexit 0;\n</code></pre>\n\n<p>Test run</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nfamily abc\nfamily def\nrole 'member' 1234\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54542560, "answer_count": 1, "score": 0, "last_activity_date": 1549399559, "creation_date": 1549397357, "last_edit_date": 1549398617, "question_id": 54542265, "link": "https://stackoverflow.com/questions/54542265/access-variables-of-an-array-elements-using-perl", "title": "Access variables of an array elements using perl", "body": "<p>I am trying to access a specific variable member in the array in perl.</p>\n\n<pre><code>my $array = [];\n@{$array} = (\n             { 'family'  =&gt; \"abc\", \n               'roles'   =&gt; {},\n             },\n             { 'family'  =&gt; \"def\", \n               'roles'   =&gt; {\n                              'member'=&gt;[\"1234\"],\n                            },\n             },\n            );\n</code></pre>\n\n<p>I tried to access the values using  </p>\n\n<pre><code>foreach (@{$array}){\n   print \" $_-&gt;{'family'} \\n\"; \n   #This is printing the family value \n}\n</code></pre>\n\n<p>Could someone explain to me how i could access the member field.i tried using $_->roles->{'member'} but this doesn't seem to work. any inputs here would be of great help.</p>\n\n<p>I get the below output..i am not getting any error.</p>\n\n<p>Hash(0x268d35)->roles->{'memeber'}</p>\n"}, {"tags": ["perl", "autovivification"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1549399001, "post_id": 54540811, "comment_id": 95886387, "body": "Autovivification is the automatic creation of a variable when <code>undef</code> is dereferenced. For example, it makes <code>$task-&gt;{parent_id}</code> equivalent to <code>( $task &#47;&#47;= {} )-&gt;{parent_id}</code>. But there&#39;s no dereference in <code>Dumper($task);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549400104, "post_id": 54540972, "comment_id": 95886855, "body": "<code>sub testsub { my $task = shift &#47;&#47; { parent_id =&gt; 3 }; ... } testsub($task)</code>"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 5, "last_activity_date": 1549391881, "creation_date": 1549391881, "answer_id": 54540972, "question_id": 54540811, "link": "https://stackoverflow.com/questions/54540811/perl-autovivification-when-calling-subroutine/54540972#54540972", "title": "perl autovivification when calling subroutine", "body": "<pre><code>my $task\nprint Dumper($task)\n</code></pre>\n\n<p>At this point, perl has no idea what to autovivify. It passes an LVALUE reference of $task to Dumper, which does nothing with that reference, so nothing happens</p>\n\n<pre><code>my $a = $task-&gt;{parent_id}\n</code></pre>\n\n<p>Because this is a copy, it's treated as an RVALUE. Thus no vivification required.</p>\n\n<pre><code>my $b = testsub($task-&gt;{parent_id})\n</code></pre>\n\n<p>To populate <code>@_</code> properly with LVALUE references, perl now has to create the hash so that it can pass in the reference properly.</p>\n\n<p>To avoid doing so, you could pass in a reference to <code>$task</code>, and then access <code>parent_id</code> inside when necessary:</p>\n\n<pre><code>sub testsub { my $task_ref = shift; if (something) { $$task_ref-&gt;{parent_id} = 3 } }\nmy $b = testsub(\\$task);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1874161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f563fa7bb248fdf5e6f267cb1c6792?s=128&d=identicon&r=PG", "display_name": "Konstantin Tokar", "link": "https://stackoverflow.com/users/1874161/konstantin-tokar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 54540972, "answer_count": 1, "score": 4, "last_activity_date": 1551287044, "creation_date": 1549391273, "last_edit_date": 1551287044, "question_id": 54540811, "link": "https://stackoverflow.com/questions/54540811/perl-autovivification-when-calling-subroutine", "title": "perl autovivification when calling subroutine", "body": "<p>Why auto-vivification does not work when calling procedures? Is there a way to prohibit it in this case too?</p>\n\n<pre><code>#!/usr/bin/env perl\nno autovivification;\nuse Data::Dumper;\n\nsub testsub { }\n\nmy $task;\nprint Dumper($task);    # $VAR1 = undef;\nmy $a = $task-&gt;{parent_id};\nprint Dumper($task);    # $VAR1 = undef;\nmy $b = testsub($task-&gt;{parent_id});\nprint Dumper($task);    # $VAR1 = {}; \n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1549388435, "post_id": 54540061, "comment_id": 95881498, "body": "<code>=</code> is for assignment, <code>==</code> is for numerical comparison"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1549389060, "post_id": 54540061, "comment_id": 95881773, "body": "<code>my @rand = map { 20 - int(rand(30)) } 0..int(rand(19))</code> might be a bit easier."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1549467468, "post_id": 54540061, "comment_id": 95914146, "body": "If you have a new question, it should go in a new question. Please remove the new question from here, create a new question, paste it there, and then you may get a better response. You can reference this question in your follow-on if you want, but that&#39;s not strictly required."}], "answers": [{"tags": [], "owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "is_accepted": true, "score": 1, "last_activity_date": 1549388584, "creation_date": 1549388584, "answer_id": 54540185, "question_id": 54540061, "link": "https://stackoverflow.com/questions/54540061/creating-a-random-generated-array-with-a-fixed-number-of-elements-but-still-les/54540185#54540185", "title": "Creating a random generated array with a fixed number of elements, but still less than a fixed amount", "body": "<p>Try this:</p>\n\n<pre><code>    last if $i==$all_the_numbers;\n</code></pre>\n\n<p>Observe the operator <code>==</code>.</p>\n\n<p>You probably knew it already, but for the benefit of other readers that might visit:</p>\n\n<ul>\n<li>The operator <code>==</code> compares for equality.</li>\n<li>The operator <code>=</code> <em>assigns</em> the value on its right to the variable on its left.</li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 11018970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1e12e7bff48a4bbe4f23da8cd8af83?s=128&d=identicon&r=PG&f=1", "display_name": "El-", "link": "https://stackoverflow.com/users/11018970/el"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 54540185, "answer_count": 1, "score": 0, "last_activity_date": 1549448484, "creation_date": 1549388032, "last_edit_date": 1549448484, "question_id": 54540061, "link": "https://stackoverflow.com/questions/54540061/creating-a-random-generated-array-with-a-fixed-number-of-elements-but-still-les", "title": "Creating a random generated array with a fixed number of elements, but still less than a fixed amount", "body": "<p>newbie here, as the title says I'm trying to generate an array that has to contain random numbers (including negative ones), but no more than 19.\nI came up with this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw/say/;\n\nmy @rand=();\n\nmy $all_the_numbers=int(rand(19));\n\nmy $i=0;\n\nwhile ($all_the_numbers&lt;20)\n{\n    my $number=20-int(rand(30));  #in order to randomize negative numbers too\n    push @rand, $number;\n    $i++;\n    last if $i=$all_the_numbers;\n}\nsay \"@rand\";\n</code></pre>\n\n<p>But I always end up with an array that has only one element. Any idea why?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>First of all, thanks for helping me with the previous problem.\nNow I'm trying to delete every positive number in the array, making it contain only the negative ones; the whole program looks like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw/say/;\nuse 5.10.1;\n\nmy @rand=();\n\nmy $all_the_numbers=int(rand(19));\n\nmy $i=0;\n\nwhile ($all_the_numbers&lt;20)\n{\n my $number=20-int(rand(30));\n push @rand, $number;\n $i++;\n last if $i==$all_the_numbers;\n}\nsay \"@rand\";\n\nmy $h=0;\n\nwhile ($all_the_numbers&lt;20)\n{\n for (@rand)\n {\n if ($rand[0]&lt;0)\n  {\n   next;  #in order to make it skip the negative ones\n  }\n   shift @rand;\n }\n $h++;\n last if $h==$all_the_numbers;\n}\nsay \"@rand\";\n</code></pre>\n\n<p>However, this resoults in deleting only the positive numbers that come before the first negative one in the array, leaving what comes right after untouched...\nSo, how is it that the while loop doesn't keep on deleting the positives?\nHere's a picture to better explain myself: <a href=\"https://i.stack.imgur.com/qi7sf.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/qi7sf.png</a>\nThanks in advance.</p>\n"}, {"tags": ["perl", "process", "output", "buffer"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1549394651, "post_id": 54538273, "comment_id": 95884474, "body": "Some quick looking on metacpan suggests <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> might be worth looking into; it has a way to run a process in a pseudo tty which might avoid the buffering problem you&#39;re encountering."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1549382590, "creation_date": 1549382590, "answer_id": 54538426, "question_id": 54538273, "link": "https://stackoverflow.com/questions/54538273/flush-output-of-child-process/54538426#54538426", "title": "Flush output of child process", "body": "<p>Unfortunately Perl has no control over the buffering behavior of the programs it executes. Some systems have an <a href=\"http://manpages.ubuntu.com/manpages/cosmic/en/man1/expect_unbuffer.1.html\" rel=\"nofollow noreferrer\"><code>unbuffer</code></a> utility that can do this. If you have access to this tool, you could say</p>\n\n<pre><code>my $pid = open2($out, $in, 'unbuffer ./child_process');\n</code></pre>\n\n<p>There's a discussion <a href=\"https://stackoverflow.com/questions/11516258/what-is-the-equivalent-of-unbuffer-program-on-windows\">here</a> about the equivalent tools for Windows, but I couldn't say whether any of them are effective.</p>\n"}, {"comments": [{"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1560493136, "post_id": 54547957, "comment_id": 99761821, "body": "If I want to <code>cd</code> to a specific location before doing this <code>run \\@cmd, &#39;&gt;pty&gt;&#39;, sub { say &quot;out: @_&quot; }</code>, how should I modify this command ? The file that I want to run cannot be run from other locations."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1560495430, "post_id": 54547957, "comment_id": 99762806, "body": "@him  Do you mean <code>chdir</code>?  That changes script&#39;s working directory.  So if you do <code>chdir $dir</code> in the script then if there is a program (say, <code>prog</code>) in that directory you can run it without path (so just <code>.&#47;prog</code> or probably even <code>prog</code>).   It&#39;s a direct equivalent of doing <code>cd dir</code> on the command line and then running <code>prog</code>. Is that what you mean?"}, {"owner": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1560496346, "post_id": 54547957, "comment_id": 99763209, "body": "I have a script to run another program, before running that command I want to change my current directory to some other location from inside the script just for running the program - the program can&#39;t be run from elsewhere. I tried to write something like <code>run \\@cdCmd, &#39;&gt;pty&gt;&#39;, sub { say &quot;out: @_&quot; }, &#39;|&#39;, \\@cmd, &#39;&gt;pty&gt;&#39;, sub { say &quot;out: @_&quot; }</code> but it says <code>&#39;cd&#39; not found ....</code>. This may be because <code>cd</code> is a builitin shell command. So, I wanted to know a method to do this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 1, "creation_date": 1560496784, "post_id": 54547957, "comment_id": 99763394, "body": "@him OK, so that&#39;s what I said -- add <code>chdir $dir;</code>to your script, and after that you can do <code>run \\@cmd ...</code> (<code>$dir</code> is directory you need to be in, where that program is).  The Perl builtin to change the working directory of the script is <a href=\"https://perldoc.perl.org/functions/chdir.html\" rel=\"nofollow noreferrer\">chdir</a>, which you run as a separate command first."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1560496983, "post_id": 54547957, "comment_id": 99763497, "body": "@him  Try this on the command line: <code>perl -MCwd -wE&#39;$d=shift&#47;&#47;&quot;..&quot;; say &quot;in: &quot;, cwd; chdir $d; say &quot;now in: &quot;, cwd&#39;</code>.  The program prints the working directory, then changes it (by default just to one directory up, <code>..</code>), then it prints it again. You can give it the directory to go to: <code>perl -MCwd -wE&#39;...&#39; dir-to-go-to</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 447, "user_id": 10202232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Avzwj.png?s=128&g=1", "display_name": "him", "link": "https://stackoverflow.com/users/10202232/him"}, "edited": false, "score": 0, "creation_date": 1560497150, "post_id": 54547957, "comment_id": 99763574, "body": "@him Once you do <code>chdir $dir;</code> don&#39;t forget that after that point your script runs in <code>$dir</code>! So if you need to change back to where you started it, record where you are (using <code>cwd</code> from <code>Cwd</code> module) before the change so that you can change back once you need that"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1553752221, "last_edit_date": 1553752221, "creation_date": 1549435215, "answer_id": 54547957, "question_id": 54538273, "link": "https://stackoverflow.com/questions/54538273/flush-output-of-child-process/54547957#54547957", "title": "Flush output of child process", "body": "<p>One way is to set up a terminal-like environment for the process, a pseudo-terminal (pty). That is hard to do right and is very system dependent, but <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> has that capability ready for easy use.</p>\n\n<p>Here is the driver, run using <code>at</code> facility so that it has no controlling terminal (or run it via <code>cron</code>)</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse IPC::Run qw(run);\n\nmy @cmd = qw(./t_term.pl input arguments); \n\nrun \\@cmd, '&gt;pty&gt;', sub { say \"out: @_\" };\n\n#run \\@cmd, '&gt;', sub { say \"out: @_\" }   # no pty\n</code></pre>\n\n<p>With <code>&gt;pty&gt;</code> it sets up a pseudo-terminal for <code>STDOUT</code> of the program in <code>@cmd</code> (it's a pipe with <code>&gt;</code>); also see <code>&lt;pty&lt;</code> and see more <a href=\"https://metacpan.org/pod/IPC::Run#Redirection-Operators\" rel=\"nofollow noreferrer\">about redirection</a>.\nThe anonymous <code>sub {}</code> gets called every time there is output from the child, so one can process it as it goes. There are other options for this as well.</p>\n\n<p>The program that is called (<code>t_term.pl</code>) only tests for a terminal</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nsay \"Is STDOUT filehandle attached to a terminal: \",\n    ( (-t STDOUT) ? \"yes\" : \"no\" );\nsleep 2;\nsay \"bye from $$\";\n</code></pre>\n\n<p>The <code>-t STDOUT</code> (see <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">filetest operators</a>) is a suitable way to check for a terminal in this example.  For more/other ways see <a href=\"https://stackoverflow.com/q/53133604/4653379\">this post</a>.</p>\n\n<p>The output shows that the called program (<code>t_term.pl</code>) does see a terminal on its <code>STDOUT</code>, even when a driver runs without one (using <code>at</code>, or when run out of a <code>crontab</code>). If the <code>&gt;pty&gt;</code> is changed to the usual redirection with <code>&gt;</code> (using a pipe) then there is no terminal.</p>\n\n<p>Whether this solves the buffering problems is clearly up to that program, and whether it is enough to fool it with a terminal.</p>\n\n<p>Another way around the problem is using <code>unbuffer</code> when possible, as in mob's answer. </p>\n"}], "owner": {"reputation": 387, "user_id": 10263994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/983e9b8d00cbbecacd2f3da19be600fa?s=128&d=identicon&r=PG&f=1", "display_name": "Yanis.F", "link": "https://stackoverflow.com/users/10263994/yanis-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 54547957, "answer_count": 2, "score": 2, "last_activity_date": 1564120270, "creation_date": 1549382031, "last_edit_date": 1564120270, "question_id": 54538273, "link": "https://stackoverflow.com/questions/54538273/flush-output-of-child-process", "title": "Flush output of child process", "body": "<p>I created a child process via <code>IPC::Open2</code>.<br>\nI need to read from the stdout of this child process line by line.<br>\nProblem is, as the stdout of the child process is not connected to a terminal, it's fully buffered and I can't read from it until the process terminates.</p>\n\n<p><strong>How can I flush the output of the child process without modifying its code ?</strong></p>\n\n<hr>\n\n<p><em>child process code</em></p>\n\n<pre><code>while (&lt;STDIN&gt;) {\n    print \"Received : $_\";\n}\n</code></pre>\n\n<p><em>parent process code:</em></p>\n\n<pre><code>use IPC::Open2;\nuse Symbol;\n\nmy $in = gensym();\nmy $out = gensym();\n\nmy $pid = open2($out, $in, './child_process');\n\nwhile (&lt;STDIN&gt;) {\n    print $in $_;\n    my $line = &lt;$out&gt;;\n    print \"child said : $line\";\n}\n</code></pre>\n\n<hr>\n\n<p>When I run the code, <strong>it get stucks waiting the output of the child process</strong>.<br>\nHowever, if I run it with <code>bc</code> the result is what I expect, I believe <code>bc</code> must manually flush its output</p>\n\n<p>note:<br>\nIn the child process if I add <code>$| = 1</code> at the beginning or <code>STDOUT-&gt;flush()</code> after printing, the parent process can properly read from it.<br>\nHowever this is an example and I must handle programs that don't manually flush their output.</p>\n"}, {"tags": ["javascript", "perl", "url"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1549380380, "post_id": 54537286, "comment_id": 95876850, "body": "At least <a href=\"https://stackoverflow.com/questions/1547899/which-characters-make-a-url-invalid?rq=1\" title=\"which characters make a url invalid\">stackoverflow.com/questions/1547899/&hellip;</a> suggests that these are &quot;invalid&quot; URLs, and it seems that User Agents clean them up, unfortunately. For sanitizing/stripping HTML, I guess you should follow what the UAs implement and not what the spec says..."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1549385369, "post_id": 54537286, "comment_id": 95879752, "body": "Apart from that you are mixing up plain URL with URL encoded within an HTML context. The characters you add (i.e. <code>&amp;#1;</code>) are not unprintable, but they get interpreted a HTML encoded (i.e. as one character <code>\\x01</code>) inside a href since this is HTML context. They are  taken verbatim (<code>&amp;#1;</code> - 4 characters) if you just use these without explicit HTML decoding in Perl."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1549395452, "post_id": 54537286, "comment_id": 95884811, "body": "@SteffenUllrich the main issue is that HTML::Restrict should be able to deal with any content (malicious or otherwise) provided by the user. In this case the HTML encoded content is able to defeat HTML::Restrict because URI doesn&#39;t find a scheme. What I&#39;m after is the correct way and the correct place to deal with this.  Maybe stripping HTML encoded chars from the URL before parsing it? <a href=\"https://github.com/oalders/html-restrict/issues/30\" rel=\"nofollow noreferrer\">github.com/oalders/html-restrict/issues/30</a> is the issue that started this."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1549395613, "post_id": 54537286, "comment_id": 95884875, "body": "@SteffenUllrich I say unprintable because the range of problematic chars are ASCII control characters. Taken verbatim, yes, they are printable by Perl but the browser won&#39;t render them."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1549396059, "post_id": 54537286, "comment_id": 95885097, "body": "@oalders: the browser will interpret HTML entities only inside the HTML context. If you put &#39;&amp;#1;&#39; into a <code>&lt;script&gt;</code> part it will not be treated as <code>\\x01</code> but as <code>&amp;#1;</code>. Context matters."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1549396219, "post_id": 54537286, "comment_id": 95885162, "body": "@oalders: as for HTML::Restrict: if in HTML context it should check the HTML decoded value for a valid syntax, i.e. decode the contents of the <code>href</code> attribute before checking. <code>\\x01</code> (the HTML decoded <code>&amp;#1;</code>) is not part of a valid URL (no matter if absolute or relative) and should thus be blocked."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1549400515, "post_id": 54537286, "comment_id": 95887027, "body": "@SteffenUllrich would it perhaps be the job of the parser to strip the control chars?  I&#39;m looking at <a href=\"https://url.spec.whatwg.org/\" rel=\"nofollow noreferrer\">url.spec.whatwg.org</a> and it says a parser should &quot;remove any leading and trailing C0 control or space from input&quot;. I&#39;ve opened a ticket for that here: <a href=\"https://github.com/libwww-perl/URI/issues/61\" rel=\"nofollow noreferrer\">github.com/libwww-perl/URI/issues/61</a>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1549425947, "post_id": 54537286, "comment_id": 95893414, "body": "@oalders: The spec says before that <i>&quot;If input contains any leading or trailing C0 control or space, validation error.&quot;</i>. Based on the context HTML::Restrict is used in I would argue that it should not rely on URI to return sanitized data but should treat such input as invalid and remove it."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1549470465, "post_id": 54537286, "comment_id": 95916121, "body": "Thanks @SteffenUllrich, this has been very helpful."}], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1549378952, "creation_date": 1549378952, "question_id": 54537286, "link": "https://stackoverflow.com/questions/54537286/how-to-parse-urls-with-leading-unprintable-control-characters", "title": "How to parse URLs with leading unprintable control characters?", "body": "<p>I'm looking at a couple of URL parsers in Perl (<a href=\"https://metacpan.org/pod/Mojo::URL\" rel=\"nofollow noreferrer\">Mojo::URL</a> and <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\">URI</a>) in the context of <a href=\"https://metacpan.org/pod/HTML::Restrict\" rel=\"nofollow noreferrer\">HTML::Restrict</a>.  The problem that I want to solve is that I'd like to be able to strip URLs in some cases.  For instance, when filtering HTML I might want to allow relative URLs, but disallow JavaScript.</p>\n\n<p>I've been presented with the following problem:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse Mojo::URL ();\n\nmy $js_url = 'javascript:alert(1);';\n\nmy $mojo = Mojo::URL-&gt;new($js_url);\nsay 'scheme: ' . $mojo-&gt;scheme . \" in $js_url\";\n\nfor my $i ( 1 .. 8, 14 .. 31 ) {\n    my $bad_url = \"&amp;#$i;\" . $js_url;\n    my $mojo    = Mojo::URL-&gt;new($bad_url);\n    say $mojo-&gt;scheme ? 'scheme is ' . $mojo-&gt;scheme : 'no scheme found in ' . $bad_url;\n}\n</code></pre>\n\n<p>This yields the following output:</p>\n\n<pre><code>scheme: javascript in javascript:alert(1);\nno scheme found in &amp;#1;javascript:alert(1);\nno scheme found in &amp;#2;javascript:alert(1);\nno scheme found in &amp;#3;javascript:alert(1);\nno scheme found in &amp;#4;javascript:alert(1);\nno scheme found in &amp;#5;javascript:alert(1);\nno scheme found in &amp;#6;javascript:alert(1);\nno scheme found in &amp;#7;javascript:alert(1);\nno scheme found in &amp;#8;javascript:alert(1);\nno scheme found in &amp;#14;javascript:alert(1);\nno scheme found in &amp;#15;javascript:alert(1);\nno scheme found in &amp;#16;javascript:alert(1);\nno scheme found in &amp;#17;javascript:alert(1);\nno scheme found in &amp;#18;javascript:alert(1);\nno scheme found in &amp;#19;javascript:alert(1);\nno scheme found in &amp;#20;javascript:alert(1);\nno scheme found in &amp;#21;javascript:alert(1);\nno scheme found in &amp;#22;javascript:alert(1);\nno scheme found in &amp;#23;javascript:alert(1);\nno scheme found in &amp;#24;javascript:alert(1);\nno scheme found in &amp;#25;javascript:alert(1);\nno scheme found in &amp;#26;javascript:alert(1);\nno scheme found in &amp;#27;javascript:alert(1);\nno scheme found in &amp;#28;javascript:alert(1);\nno scheme found in &amp;#29;javascript:alert(1);\nno scheme found in &amp;#30;javascript:alert(1);\nno scheme found in &amp;#31;javascript:alert(1);\n</code></pre>\n\n<p>In the above URLs, where the scheme is not found, I'm left to assume that it's a relative URL.  However, if I use the above URLs in <code>href</code> tags, Chrome, Firefox and Safari all pop up a JavaScript alert box when clicked:</p>\n\n<pre><code>&lt;a href=\"&amp;#1;javascript:alert(1);\"&gt;1&lt;/a&gt;\n&lt;a href=\"&amp;#2;javascript:alert(1);\"&gt;2&lt;/a&gt;\n&lt;a href=\"&amp;#3;javascript:alert(1);\"&gt;3&lt;/a&gt;\n&lt;a href=\"&amp;#4;javascript:alert(1);\"&gt;4&lt;/a&gt;\n&lt;a href=\"&amp;#5;javascript:alert(1);\"&gt;5&lt;/a&gt;\n&lt;a href=\"&amp;#6;javascript:alert(1);\"&gt;6&lt;/a&gt;\n&lt;a href=\"&amp;#7;javascript:alert(1);\"&gt;7&lt;/a&gt;\n&lt;a href=\"&amp;#8;javascript:alert(1);\"&gt;8&lt;/a&gt;\n&lt;a href=\"&amp;#14;javascript:alert(1);\"&gt;14&lt;/a&gt;\n&lt;a href=\"&amp;#15;javascript:alert(1);\"&gt;15&lt;/a&gt;\n&lt;a href=\"&amp;#16;javascript:alert(1);\"&gt;16&lt;/a&gt;\n&lt;a href=\"&amp;#17;javascript:alert(1);\"&gt;17&lt;/a&gt;\n&lt;a href=\"&amp;#18;javascript:alert(1);\"&gt;18&lt;/a&gt;\n&lt;a href=\"&amp;#19;javascript:alert(1);\"&gt;19&lt;/a&gt;\n&lt;a href=\"&amp;#20;javascript:alert(1);\"&gt;20&lt;/a&gt;\n&lt;a href=\"&amp;#21;javascript:alert(1);\"&gt;21&lt;/a&gt;\n&lt;a href=\"&amp;#22;javascript:alert(1);\"&gt;22&lt;/a&gt;\n&lt;a href=\"&amp;#23;javascript:alert(1);\"&gt;23&lt;/a&gt;\n&lt;a href=\"&amp;#24;javascript:alert(1);\"&gt;24&lt;/a&gt;\n&lt;a href=\"&amp;#25;javascript:alert(1);\"&gt;25&lt;/a&gt;\n&lt;a href=\"&amp;#26;javascript:alert(1);\"&gt;26&lt;/a&gt;\n&lt;a href=\"&amp;#27;javascript:alert(1);\"&gt;27&lt;/a&gt;\n&lt;a href=\"&amp;#28;javascript:alert(1);\"&gt;28&lt;/a&gt;\n&lt;a href=\"&amp;#29;javascript:alert(1);\"&gt;29&lt;/a&gt;\n&lt;a href=\"&amp;#30;javascript:alert(1);\"&gt;30&lt;/a&gt;\n&lt;a href=\"&amp;#31;javascript:alert(1);\"&gt;31&lt;/a&gt;\n</code></pre>\n\n<p>I've used <code>Mojo::URL</code> in the examples, but <code>URI</code> has the same behaviour.  What I gather is that in both cases the parser does not strip the unprintable control character and, therefore, does not recognize that there is JavaScript in the URL.  Web browsers (helpfully?) recognize that the control characters are not printable and allow the JavaScript in the URL to be executed on click.</p>\n\n<p>What's going on here?  Are the parsers and browsers both behaving correctly?  Is it up to me to strip away unprintable control characters before parsing the URL?</p>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 2, "creation_date": 1549374916, "post_id": 54535769, "comment_id": 95873431, "body": "Aren&#39;t you attempting double UTF-8 decode? You already decode UTF-8 in the slurp, why would you need <code>-&gt;utf8</code> on the JSON object?"}], "answers": [{"comments": [{"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 0, "creation_date": 1549377726, "post_id": 54536278, "comment_id": 95875069, "body": "Ah man  - sometimes you just need an extra pair of eyes to look over it! I think this came from trying to use File::Slurp::read_file, but that apparently isn&#39;t good with utf8 - so I moved over to reading the file myself, but guess I didn&#39;t take that part out as well. Thanks for saving my sanity :)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "edited": false, "score": 2, "creation_date": 1549383122, "post_id": 54536278, "comment_id": 95878499, "body": "@AndrewNewby It is recommended to use <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> instead which has much more straightforward functions. From that you can use read_binary to read the bytes as-is, and then use a standard UTF-8 decoding json decoder."}, {"owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549433450, "post_id": 54536278, "comment_id": 95895470, "body": "@Grinnz thanks for the recommendation. I&#39;ll try and remember that for the next project :) (for now, the method I&#39;m using is working as needed, so not much point including a whole extra module :))"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 3, "last_activity_date": 1549375808, "creation_date": 1549375808, "answer_id": 54536278, "question_id": 54535769, "link": "https://stackoverflow.com/questions/54535769/utf-8-encoded-json-file-trying-to-parse-with-json-module-wide-character/54536278#54536278", "title": "UTF-8 encoded JSON file, trying to parse with JSON module - wide character", "body": "<p>You are trying to double decode UTF-8:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse JSON;\nuse Data::Dumper;\n\nopen(my $fh,  '&lt;:encoding(UTF-8)', $ARGV[0]) or die $!;\nmy @lines = &lt;$fh&gt;;\nclose($fh) or die $!;\n\n# Wide character in subroutine entry at dummy.pl line 14.\nmy $ref = JSON-&gt;new-&gt;utf8-&gt;decode(join('', @lines));\n\n# OK, no warning.\nmy $ref = JSON-&gt;new-&gt;decode(join('', @lines));\n\nprint Dumper($ref);\n\nexit 0;\n</code></pre>\n\n<p>Test run</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cat dummy.json\n{\n   \"path\": \"\u00e4\u2048\"\n}\n\n# with -&gt;utf8\n$ perl dummy.pl dummy.json\nWide character in subroutine entry at dummy.pl line 14.\n\n# without -&gt;utf8\n$ perl dummy.pl dummy.json\n$VAR1 = {\n          'path' =&gt; \"\\x{e4}\\x{2048}\"\n        };\n</code></pre>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 54536278, "answer_count": 1, "score": 2, "last_activity_date": 1549380051, "creation_date": 1549374091, "last_edit_date": 1549380051, "question_id": 54535769, "link": "https://stackoverflow.com/questions/54535769/utf-8-encoded-json-file-trying-to-parse-with-json-module-wide-character", "title": "UTF-8 encoded JSON file, trying to parse with JSON module - wide character", "body": "<p>I have a pretty simple script in Perl:</p>\n\n<pre><code>use JSON;\n\nuse open qw/ :std :encoding(utf8) /;\n\n#my $ref = JSON::decode_json($json_contents);\n\nmy $path = \"/home/chambres/web/x.org/public_html/cgi-bin/links/admin/booking_import/import/file.json\";\n\nmy $json_contents = slurp_utf8_file($path);\n\nmy $ref =  JSON-&gt;new-&gt;utf8-&gt;decode($json_contents);\n\nsub slurp_utf8_file {\n\n  my @back;\n  #open my $in,  '&lt;:encoding(UTF-8)',  $_[0]  or die $!;\n  open my $in,  \"&lt;$_[0]\" or die $!;\n    while (&lt;$in&gt;) {\n      push @back, $_\n    }\n  close ($in);\n\n  return join(\"\", @back);\n}\n</code></pre>\n\n<p>The file is encoded in UTF-8 in Notepad++: </p>\n\n<p><a href=\"https://i.stack.imgur.com/JqElz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JqElz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>...yet when I run my script I get:</p>\n\n<pre><code>perl test.cgi\nWide character in subroutine entry at test.cgi line 11.\n</code></pre>\n\n<p>Line 11 is:</p>\n\n<pre><code>my $ref =  JSON-&gt;new-&gt;utf8-&gt;decode($json_contents);\n</code></pre>\n\n<p>I'm baffled as to what I'm doing wrong. Maybe I just need a break! Any advice would be much appreciated! </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 201, "user_id": 8167039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391ac8775d5e296cf8cf1539017c1fb2?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Kirov", "link": "https://stackoverflow.com/users/8167039/mario-kirov"}, "edited": false, "score": 0, "creation_date": 1549359678, "post_id": 54531294, "comment_id": 95864395, "body": "Why would you use sed, when you can use one of the most powerful tools in Perl - plain simple RegEx and accomplish the same thing very easily."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1549359698, "post_id": 54531294, "comment_id": 95864414, "body": "Why do you want to write to a file from within the substitution? Perl gets confused about your code, but you can help it by using the &quot;expression syntax&quot; for filehandles: <code>s|(.*)|print {$fh} &quot;Hello&quot;,$1,&quot; how are you&quot;;|e;</code>. But the better code would be: <code>s|(.*)|Hello,$1, how are you|; print $fh $_;</code>."}, {"owner": {"reputation": 704, "user_id": 7364588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b06a987d5dffc629dd7d33dd80bf567?s=128&d=identicon&r=PG&f=1", "display_name": "user7364588", "link": "https://stackoverflow.com/users/7364588/user7364588"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549359952, "post_id": 54531294, "comment_id": 95864560, "body": "@Corion Thank you for your reply, the better code you provided is a solution !"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1549359583, "creation_date": 1549359583, "answer_id": 54531393, "question_id": 54531294, "link": "https://stackoverflow.com/questions/54531294/print-into-file-descriptor-using-perl-s-e/54531393#54531393", "title": "Print into file descriptor using perl s/.../.../e", "body": "<p>Interestingly, what works is to enclose the filehandle in curly brackets:</p>\n\n<pre><code>s/(.*)/print {$fh} \"Hello\",$1,\" how are you\"/e;\n</code></pre>\n\n<p>It's a good practice to use them always, anyway.</p>\n"}], "owner": {"reputation": 704, "user_id": 7364588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b06a987d5dffc629dd7d33dd80bf567?s=128&d=identicon&r=PG&f=1", "display_name": "user7364588", "link": "https://stackoverflow.com/users/7364588/user7364588"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 54531393, "answer_count": 1, "score": 3, "last_activity_date": 1549359645, "creation_date": 1549359235, "last_edit_date": 1549359645, "question_id": 54531294, "link": "https://stackoverflow.com/questions/54531294/print-into-file-descriptor-using-perl-s-e", "title": "Print into file descriptor using perl s/.../.../e", "body": "<p>I am encountering an error with the following <code>perl</code> code:</p>\n\n<pre><code>#!/usr/bin/perl\nopen $fh, '&gt;', 'myfile.txt' or die;\ns|(.*)|print $fh \"Hello\",$1,\" how are you\"|e;\nclose $fh or die\n</code></pre>\n\n<blockquote>\n  <p>String found where operator expected at ./script.pl line 3, near \"$fh \"Hello\"\"<br/>\n      (Missing operator before \"Hello \"?)</p>\n</blockquote>\n\n<p>I use the <code>s|(.*)|...|e</code> to write the start of the string another time, like <code>Hello Hello</code>.</p>\n\n<p>The expected output the file <code>myfile.txt</code> is</p>\n\n<blockquote>\n  <p>Hello Hello, how are you?</p>\n</blockquote>\n\n<p>Is there a way to make it run with the actual operations?</p>\n\n<p>Or must I change the <code>s|(.*)|...|e</code> operation in another way?</p>\n"}, {"tags": ["apache", "perl", "cors", "catalyst"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1549354454, "post_id": 54529785, "comment_id": 95861672, "body": "You don&#39;t show any relevant code. Please <a href=\"https://stackoverflow.com/posts/54529785/edit\">edit</a> your post to show the relevant code generating the response. You set headers in a Catalyst application by calling the <code>-&gt;header(...)</code> method of <a href=\"https://metacpan.org/pod/Catalyst::Response#%24res-%3Eheader\" rel=\"nofollow noreferrer\">Catalyst::Response</a>, so that&#39;s where I would start."}, {"owner": {"reputation": 61150, "user_id": 441757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/921df025d1d7c99fad4553ac83bd8bdf?s=128&d=identicon&r=PG", "display_name": "sideshowbarker", "link": "https://stackoverflow.com/users/441757/sideshowbarker"}, "edited": false, "score": 0, "creation_date": 1549356406, "post_id": 54529785, "comment_id": 95862572, "body": "So for the applications to be considered same-origin, it\u2019s not enough for both apps to be running on the same server. The two applications must also be served with the exactly the same hostname, and same port number, and the same protocol (both http or both https). Otherwise browsers will consider any request to be a cross-origin request if it\u2019s made by your frontend JavaScript code running on the Apache server to the Perl Catalyst server. So that\u2019s why you need to CORS-enable the Perl Catalyst server. For that, see <a href=\"http://lists.scsys.co.uk/pipermail/catalyst/2018-June/thread.html#30639\" rel=\"nofollow noreferrer\">lists.scsys.co.uk/pipermail/catalyst/2018-June/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 6, "last_activity_date": 1549357208, "creation_date": 1549357208, "answer_id": 54530767, "question_id": 54529785, "link": "https://stackoverflow.com/questions/54529785/how-to-enable-cors-for-catalyst/54530767#54530767", "title": "How to enable CORS for Catalyst", "body": "<p>Catalyst allows you to set response headers using <a href=\"https://metacpan.org/pod/Catalyst::Response#$res-%3Eheader\" rel=\"noreferrer\">the <code>header</code> method on the response object</a>.</p>\n\n<pre><code>$c-&gt;res-&gt;header( \"Access-Control-Allow-Origin\" =&gt; \"http://localhost:8888\" );\n</code></pre>\n\n<p>Consider using a controller's <code>sub auto</code> or <a href=\"https://metacpan.org/pod/Catalyst#setup_middleware-(?@middleware)\" rel=\"noreferrer\">using</a> existing <a href=\"https://metacpan.org/pod/Plack::Middleware::CrossOrigin\" rel=\"noreferrer\">middleware</a> if you have multiple endpoints that need to provide permission via CORS.</p>\n"}], "owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 1, "accepted_answer_id": 54530767, "answer_count": 1, "score": 3, "last_activity_date": 1549360672, "creation_date": 1549352880, "last_edit_date": 1549360672, "question_id": 54529785, "link": "https://stackoverflow.com/questions/54529785/how-to-enable-cors-for-catalyst", "title": "How to enable CORS for Catalyst", "body": "<p>Having a Perl Catalyst application, which produces JSON, I need to read that JSON content using jQuery within an HTML page, served by an Apache server. Both   applications, Catalyst and Apache are running on the same host.</p>\n\n<p>When I access the Catalyst URL from Apache I get the error</p>\n\n<pre><code>Access to XMLHttpRequest at 'http://localhost:3000/abc/json_list' from origin 'http://localhost:8888' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.\n</code></pre>\n\n<p>As I red in many topics, a header (or more) must be set. In this case the Catalyst must be set but I don't know how.</p>\n\n<p>Any hint?</p>\n"}, {"tags": ["c#", "windows", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549350475, "post_id": 54529080, "comment_id": 95860059, "body": "What problem are you referring to?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549350671, "post_id": 54529080, "comment_id": 95860138, "body": "Why is this tagged with <a href=\"https://stackoverflow.com/questions/tagged/perl\">perl</a>? I don&#39;t see any Perl code, just Windows process handling"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549350824, "post_id": 54529080, "comment_id": 95860198, "body": "@StefanBecker I added the <code>perl</code> tag, but to be fair, I also added the <code>c#</code> tag. OP doesn&#39;t seem to know what&#39;s going on or what their question actually is."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1549351747, "post_id": 54529080, "comment_id": 95860572, "body": "Much as I love perl... if you&#39;re using C#, why not do it directly in that language?"}, {"owner": {"reputation": 79509, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 3, "creation_date": 1549353293, "post_id": 54529080, "comment_id": 95861189, "body": "You may need to flip the order of the calls to <code>perl.WaitForExit();</code> and <code>perl.StandardOutput.ReadToEnd();</code> -- see <a href=\"https://stackoverflow.com/a/9258187/3744182\">this answer</a> to <a href=\"https://stackoverflow.com/q/9258068/3744182\">Running Perl throughC# code</a> for details.  But beyond that we need to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, you do a lot of manipulation of files paths and such, are you sure directories and files actually exist at the stated location(s)?  Try calling <code>File.Exists(string)</code> and <code>Directory.Exists(string)</code> in the debugger to be sure."}], "answers": [{"tags": [], "owner": {"reputation": 4839, "user_id": 891715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8295eac2214c96652ce9be2faeee4ec5?s=128&d=identicon&r=PG", "display_name": "Arie", "link": "https://stackoverflow.com/users/891715/arie"}, "is_accepted": false, "score": 1, "last_activity_date": 1549351952, "creation_date": 1549351952, "answer_id": 54529568, "question_id": 54529080, "link": "https://stackoverflow.com/questions/54529080/failed-to-convert-xml-to-csv-using-perl-script-through-c/54529568#54529568", "title": "Failed to convert xml to csv using perl script through c#", "body": "<p>First, to find out what went wrong:</p>\n\n<pre><code>string error = perl.StandardError.ReadToEnd();\n</code></pre>\n\n<p>Also, make sure you have necessary permissions to create files in the output directory. You may try to run your process with Admin privileges to find out if it's a permission issue:</p>\n\n<pre><code>perlStartInfo.Verb = \"runas\";\n</code></pre>\n\n<p>You may want to run your entire host process with elevated permissions for this. </p>\n\n<p><em>(This is only to figure out if it's a permission issue! If it's the case, grant the output directory the necessary permissions, and if possible don't automatically run scripts with admin privileges in production environment)</em></p>\n\n<p>There also may be errors in the perl script itself.</p>\n"}], "owner": {"reputation": 1, "user_id": 10827983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4dd7a37bc703436679fce2dd4d581f?s=128&d=identicon&r=PG&f=1", "display_name": "S.Saranya", "link": "https://stackoverflow.com/users/10827983/s-saranya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1549351952, "creation_date": 1549349568, "last_edit_date": 1549350430, "question_id": 54529080, "link": "https://stackoverflow.com/questions/54529080/failed-to-convert-xml-to-csv-using-perl-script-through-c", "title": "Failed to convert xml to csv using perl script through c#", "body": "<p>I have the following code for converting xml to csv by using perl script. When I run the perl script through c# but there is no files are created and string output become empty.\nWhat is the problem?\nI have the perl script with .txt extention, Is this ok or not?</p>\n\n<pre><code>string filePath = Path.GetDirectoryName(Path.GetDirectoryName(Directory.GetCurrentDirectory())) + \"/Files/SAVVIS_CDR_1806012231.XML\";\n\nif (Path.GetExtension(filePath) != \"csv\")\n            {\n                ProcessStartInfo perlStartInfo = new ProcessStartInfo(@\"C:\\Strawberry\\perl\\bin\\perl.exe\");\n                string perlScriptFilePath = Path.GetDirectoryName(Path.GetDirectoryName(Directory.GetCurrentDirectory())) + \"/PerlScript/formatter_savvis.pl.txt\";\n                string csvFilePath = Path.GetDirectoryName(Path.GetDirectoryName(Directory.GetCurrentDirectory())) + \"/PerlScript/\";\n                perlStartInfo.Arguments = perlScriptFilePath + \" \" + filePath + \" \" + csvFilePath;\n                perlStartInfo.UseShellExecute = false;\n                perlStartInfo.RedirectStandardOutput = true;\n                perlStartInfo.RedirectStandardError = true;\n                perlStartInfo.CreateNoWindow = false;\n\n                Process perl = new Process();\n                perl.StartInfo = perlStartInfo;\n                perl.Start();\n                perl.WaitForExit();\n                string output = perl.StandardOutput.ReadToEnd();\n            }\n</code></pre>\n\n<p>Could you please anyone help me to solve this problem?\nThanks in advance.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1549346361, "creation_date": 1549346361, "answer_id": 54528459, "question_id": 54528381, "link": "https://stackoverflow.com/questions/54528381/syntax-for-multiple-array-in-a-single-foreach-loop-in-perl/54528459#54528459", "title": "syntax for multiple array in a single foreach loop in perl", "body": "<p>To someone who doesn't know TCL, it's not clear what you want, but I think you want the following:</p>\n\n<pre><code>for my $i (0..$#foos) {\n   my $foo = $foos[$i];\n   my $bar = $bars[$i];\n   ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 14251919, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TfK7POeuXu8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucku_r2038cqc9u0c5QPol9vZGXurw/photo.jpg?sz=128", "display_name": "Alexx", "link": "https://stackoverflow.com/users/14251919/alexx"}, "edited": false, "score": 0, "creation_date": 1601380920, "post_id": 54528926, "comment_id": 113384484, "body": "Is there any way without using cpam modules? Can&#39;t we do it in standard way?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 475, "user_id": 14251919, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TfK7POeuXu8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucku_r2038cqc9u0c5QPol9vZGXurw/photo.jpg?sz=128", "display_name": "Alexx", "link": "https://stackoverflow.com/users/14251919/alexx"}, "edited": false, "score": 0, "creation_date": 1601383746, "post_id": 54528926, "comment_id": 113385937, "body": "Why would you need CPAN? <code>$ corelist List::Util</code> -&gt; <code>List::Util was first released with perl v5.7.3</code>"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1549361277, "last_edit_date": 1549361277, "creation_date": 1549348749, "answer_id": 54528926, "question_id": 54528381, "link": "https://stackoverflow.com/questions/54528381/syntax-for-multiple-array-in-a-single-foreach-loop-in-perl/54528926#54528926", "title": "syntax for multiple array in a single foreach loop in perl", "body": "<p>The TCL syntax isn't clear, so I went to the source, i.e. <code>tclsh</code>:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>% set a { 1 2 3 4 }\n 1 2 3 4\n% set e { 4 5 6 7 0 9 }        \n 4 5 6 7 8 9\n% foreach i $a j $e { puts \"'$i' '$j'\" }      \n'1' '4'\n'2' '5'\n'3' '6'\n'4' '7'\n'' '0'\n'' '9'\n</code></pre>\n\n<p><a href=\"https://www.tcl.tk/man/tcl8.6/TclCmd/foreach.htm\" rel=\"nofollow noreferrer\">TCL foreach</a>:</p>\n\n<blockquote>\n  <p>Values in each list are used in order from first to last, and each value is used exactly once. The total number of loop iterations is large enough to use up all the values from all the value lists. If a value list does not contain enough elements for each of its loop variables in each iteration, empty values are used for the missing elements. </p>\n</blockquote>\n\n<p>In Perl \"empty\" elements are <code>undef</code>, so I guess the closest translation to Perl would be:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse List::Util qw(max);\n\nmy @a = (1, 2, 3, 4);\nmy @e = (4, 5, 6, 7, 0, 9);\nmy $max_index = max($#a, $#e);\n\nforeach my $index (0..$max_index) {\n    my $i = $a[$index] // '';\n    my $j = $e[$index] // '';\n\n    # your \"TCL\" loop code goes here...\n    print \"$index '$i' '$j'\\n\";\n}\n\nexit 0;\n</code></pre>\n\n<p>Test output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n0 '1' '4'\n1 '2' '5'\n2 '3' '6'\n3 '4' '7'\n4 '' '0'\n5 '' '9'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 1, "last_activity_date": 1549355748, "creation_date": 1549355748, "answer_id": 54530423, "question_id": 54528381, "link": "https://stackoverflow.com/questions/54528381/syntax-for-multiple-array-in-a-single-foreach-loop-in-perl/54530423#54530423", "title": "syntax for multiple array in a single foreach loop in perl", "body": "<p>With just core Perl, there's also the option of using <code>shift</code>, but note that this method modifies (empties) the arrays, so use copies of them if it matters:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy @a = 1 .. 4;\nmy @e = 5 .. 9;\n\nwhile (@a || @e) {\n  my $i = shift @a // '-';\n  my $j = shift @e // '-';\n\n  say \"$i\\t$j\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 3, "last_activity_date": 1549355983, "creation_date": 1549355983, "answer_id": 54530478, "question_id": 54528381, "link": "https://stackoverflow.com/questions/54528381/syntax-for-multiple-array-in-a-single-foreach-loop-in-perl/54530478#54530478", "title": "syntax for multiple array in a single foreach loop in perl", "body": "<p>Current versions of the <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a> module provide a <code>zip_unflatten</code> command which will combine two (or more) arrays into a single array containing references to an array of the first element of each list, then the second, and so on:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse List::MoreUtils 'zip_unflatten';\n\nmy @a = 1 .. 4;\nmy @e = 5 .. 9;\n\nmy @z = zip_unflatten(@a, @e);\n\nfor my $pair (@z) {\n  my $i = $pair-&gt;[0] // '-';\n  my $j = $pair-&gt;[1] // '-';\n\n  say \"$i\\t$j\";\n}\n</code></pre>\n\n<p>(The <code>//</code> operator I use here is \"defined-OR\", which is basically the same as <code>||</code>, except it works on whether the variable to its left has a defined value rather than whether it has a true value.)</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1549356924, "creation_date": 1549356924, "answer_id": 54530694, "question_id": 54528381, "link": "https://stackoverflow.com/questions/54528381/syntax-for-multiple-array-in-a-single-foreach-loop-in-perl/54530694#54530694", "title": "syntax for multiple array in a single foreach loop in perl", "body": "<p>The <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\">List::UtilsBy</a> function <code>zip_by</code> may be useful for this task. Unfortunately there is no good way to declare multiple iteration variables in a foreach loop currently, so we use arrayrefs.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::UtilsBy 'zip_by';\nmy @arr1 = ...;\nmy @arr2 = ...;\nforeach my $zipped (zip_by { [@_] } \\@arr1, \\@arr2) {\n  my ($i, $j) = @$zipped;\n  ...\n}\n</code></pre>\n\n<p>The <a href=\"https://metacpan.org/pod/List::SomeUtils\" rel=\"nofollow noreferrer\">List::SomeUtils</a> <code>zip</code> function does this same task more concisely, but has an awkward prototype requiring arrays, where <code>zip_by</code> is more flexible.</p>\n"}], "owner": {"reputation": 99, "user_id": 10782176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecf99d5611f25e7124a2eb47c7cfd011?s=128&d=identicon&r=PG&f=1", "display_name": "Crazy coder", "link": "https://stackoverflow.com/users/10782176/crazy-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 1, "accepted_answer_id": 54528926, "answer_count": 5, "score": 2, "last_activity_date": 1549361277, "creation_date": 1549345904, "last_edit_date": 1549347116, "question_id": 54528381, "link": "https://stackoverflow.com/questions/54528381/syntax-for-multiple-array-in-a-single-foreach-loop-in-perl", "title": "syntax for multiple array in a single foreach loop in perl", "body": "<p>I need to know the proper syntax for multiple arrays in a single foreach loop.</p>\n\n<p>In TCL, we can have multiple list in a single foreach loop. But how to do it with perl?</p>\n\n<pre><code>#TCL eg:\nforeach i $a j $e {\n\n}\n</code></pre>\n"}, {"tags": ["perl", "coderef"], "comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549345155, "post_id": 54527825, "comment_id": 95858303, "body": "I left a piece of the code out.  <code>$va</code> and <code>$vb</code> are numeric.  <code>$val{&quot;ENOTE&quot;} = 05;</code>, for example.  Sorry for the confusion. -E"}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549344212, "post_id": 54527997, "comment_id": 95858074, "body": "OK.  That worked.  Why didn&#39;t <code>$sortFunc</code>, need the same treatment?  And why didn&#39;t <code>$sortFunc{date}</code> (without the BLOCK parens) work (it didn&#39;t even run)?  And just for yuks, what &quot;type&quot; is a BLOCK?  a coderef works sometimes, it seems.  In any case, your changes work, and many thanks to you.  -Erik"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549344441, "post_id": 54527997, "comment_id": 95858126, "body": "Is it because <code>$sortFunc</code> was in the symbol table as a coderef, whereas the value of a hash usually isn&#39;t in the symbol table at all?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1549344816, "post_id": 54527997, "comment_id": 95858222, "body": "Because it doesn&#39;t follow the <code>sort BLOCK LIST</code> calling convention. For example, <code>sort { $sortFunc } ...</code> would give you the same result as <code>sort { $sortFunc{date} } ...</code>. <code>sort $sortFunc ...</code> does not match any of the documented calling conventions, but works as <code>sort SUBNAME LIST</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1549345162, "post_id": 54527997, "comment_id": 95858305, "body": "Re &quot;<i>And just for yuks, what &quot;type&quot; is a BLOCK?</i>&quot;, A block is a syntactical element of the form &quot;<code>{ STATEMENTS }</code>&quot;"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1549345007, "last_edit_date": 1549345007, "creation_date": 1549343460, "answer_id": 54527997, "question_id": 54527825, "link": "https://stackoverflow.com/questions/54527825/passing-a-coderef-to-sort-problems/54527997#54527997", "title": "passing a coderef to sort() problems", "body": "<p>When using the <code>sort BLOCK LIST</code> calling convention, the block should return a value that indicates how <code>$a</code> compares to <code>$b</code>. However, your sort compare block returns a code ref (<code>$sortFunc{\"date\"}</code>). You might as well have used</p>\n\n<pre><code> sort { 1 } @$rec;\n</code></pre>\n\n<p>Replace</p>\n\n<pre><code> sort { $sortFunc{date} } @$rec;\n</code></pre>\n\n<p>with</p>\n\n<pre><code> sort { $sortFunc{date}-&gt;() } @$rec;\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 54527997, "answer_count": 1, "score": 1, "last_activity_date": 1549345256, "creation_date": 1549342227, "last_edit_date": 1549345256, "question_id": 54527825, "link": "https://stackoverflow.com/questions/54527825/passing-a-coderef-to-sort-problems", "title": "passing a coderef to sort() problems", "body": "<p>Using the following pieces of code, I get wildly different results.</p>\n\n<pre><code>$val{\"ENOTE\"} = 05;\n$val{\"WATCH\"} = 10;\n\nmy %sortFunc = ();\n\nmy $sortFunc = sub {\n    my ($va, $vb);\n\n    $va = $val{$$a{\"etype\"} . \":\" . $$a{\"emsg\"}} // $val{$$a{\"etype\"}};\n    $vb = $val{$$b{\"etype\"} . \":\" . $$b{\"emsg\"}} // $val{$$b{\"etype\"}};\n\n    #    printf(\"$$a{etype} gets $va\\n\");\n\n    $$a{\"year\"} &lt;=&gt; $$b{\"year\"}\n    || $$a{\"month\"} &lt;=&gt; $$b{\"month\"}\n    || $$a{\"day\"} &lt;=&gt; $$b{\"day\"}\n    || $$a{\"sym\"} cmp $$b{\"sym\"}\n    || $va &lt;=&gt; $vb;\n};\n\n$sortFunc{\"date\"} = sub {\n    my ($va, $vb);\n\n    $va = $val{$$a{\"etype\"} . \":\" . $$a{\"emsg\"}} // $val{$$a{\"etype\"}};\n    $vb = $val{$$b{\"etype\"} . \":\" . $$b{\"emsg\"}} // $val{$$b{\"etype\"}};\n\n    #    printf(\"$$a{etype} gets $va\\n\");\n\n    $$a{\"year\"} &lt;=&gt; $$b{\"year\"}\n    || $$a{\"month\"} &lt;=&gt; $$b{\"month\"}\n    || $$a{\"day\"} &lt;=&gt; $$b{\"day\"}\n    || $$a{\"sym\"} cmp $$b{\"sym\"}\n    || $va &lt;=&gt; $vb;\n};\n</code></pre>\n\n<p>When I call them, I get wildly different results.</p>\n\n<pre><code>@newsortrec = sort $sortFunc (@$rec);\n@newsortrec = sort {$sortFunc{\"date\"}} (@$rec);\n</code></pre>\n\n<p>The call to <code>$sortFunc</code> works as I'd expect, and I have verified its output.  The output from <code>{$sortFunc{\"date\"}}</code> is really odd.  It's not gibberish like you'd expect if it had gotten bad data or ran bad code.  It's just sorted in the wrong order.  It's changed, and it's \"sorted\", but in a really weird way.</p>\n\n<p>Is there something about the mysterious <code>$a</code> and <code>$b</code> that's giving me grief?</p>\n\n<p>The fact that they are (foolishly) named <code>$sortFunc</code> shouldn't be a concern, should it?  At least as far as <strong>perl</strong> is concerned.</p>\n\n<p>Is there something different about the scoping rules for <code>$a</code> and <code>$b</code>?</p>\n\n<p>I've <code>diff</code>ed the code, so I know that it's the same.</p>\n\n<p>Any hints/clues?  I'm trying to move the code into the hash (where it runs... strangely).</p>\n\n<p>Thanks.</p>\n\n<p>-Erik</p>\n"}, {"tags": ["perl", "multidimensional-array"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 7, "last_activity_date": 1549314287, "last_edit_date": 1549314287, "creation_date": 1549311340, "answer_id": 54523702, "question_id": 54523648, "link": "https://stackoverflow.com/questions/54523648/what-is-the-proper-way-to-dereference-a-multidimensional-array-in-perl/54523702#54523702", "title": "What is the proper way to dereference a multidimensional array in Perl?", "body": "<p>To <a href=\"http://p3rl.org/pop\" rel=\"noreferrer\">pop</a> from an array reference, use</p>\n\n<pre><code>my $last = pop @$aref;\n</code></pre>\n\n<p>Or, in more recent Perl versions,</p>\n\n<pre><code>my $last = pop $aref-&gt;@*;\n</code></pre>\n\n<p>To pop the inner array, you need to dereference the given element of the array reference:</p>\n\n<pre><code>my $last = pop @{ $aref-&gt;[$index] };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $last = pop $aref-&gt;[$index]-&gt;@*;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1549348940, "post_id": 54523729, "comment_id": 95859486, "body": "Please don&#39;t recommend prototypes to someone who is obviously very new to the language."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": -3, "last_activity_date": 1549313034, "last_edit_date": 1549313034, "creation_date": 1549311476, "answer_id": 54523729, "question_id": 54523648, "link": "https://stackoverflow.com/questions/54523648/what-is-the-proper-way-to-dereference-a-multidimensional-array-in-perl/54523729#54523729", "title": "What is the proper way to dereference a multidimensional array in Perl?", "body": "<p>It's an array ref pointing to an array of array refs pointing to arrays of scalars. So you'll need two de-references for a single element, one for a column and none for a row:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub filterout(\\@$$) {\n     my($array_ref, $y, $data) = @_;\n\n     # single element &lt;row&gt;,&lt;col&gt;\n     $array_ref-&gt;[ &lt;row &gt;]-&gt;[ &lt;column&gt; ] = ...;\n\n     # pop column of &lt;row&gt;\n     pop(@{ $array_ref-&gt;[ &lt;row&gt; ] });\n\n     # pop row\n     pop(@{ $array_ref });\n}\n\nfilterout(@rows, $y, $data);\n</code></pre>\n\n<p>Note the prototype, which makes <code>filterout()</code> work like <code>push()</code>.</p>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 54523729, "answer_count": 2, "score": 0, "last_activity_date": 1549314287, "creation_date": 1549311099, "last_edit_date": 1549312883, "question_id": 54523648, "link": "https://stackoverflow.com/questions/54523648/what-is-the-proper-way-to-dereference-a-multidimensional-array-in-perl", "title": "What is the proper way to dereference a multidimensional array in Perl?", "body": "<p>In my code I have a multidimensional array</p>\n\n<pre><code>       $rows[$x][$y]\n</code></pre>\n\n<p>I am passing it to a sub function with multiple uses but at some point that function will need to remove (pop) one of the elements from the main array. </p>\n\n<p>I believe the proper way to pass it is by referencing it since I am passing more than just the array:</p>\n\n<pre><code>        filterout(\\@rows, $y, $data );\n</code></pre>\n\n<p>But am unsure of the syntax to dereferencing it on the subroutine side. </p>\n\n<p>Would appreciate any help, thanks as alway. </p>\n"}, {"tags": ["perl", "email"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1549294881, "post_id": 54519521, "comment_id": 95841944, "body": "Why do you have that &quot;header&quot; stuff in the email body at all? This makes no sense. Remove it if you&#39;re not piping to <code>sendmail</code>."}, {"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549294976, "post_id": 54519521, "comment_id": 95841985, "body": "This is due to some old legacy code, and another system uses that, so I&#39;m trying to find a solution where not too many files need to be amended (it may well be as part of this change, that later gets removed anyway, but it&#39;s an intermediate step)."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 4, "creation_date": 1549295088, "post_id": 54519521, "comment_id": 95842050, "body": "Email::Simple does not know about your custom way of structuring the email body. I can only recommend to strip your custom way if you cannot restructure your templates: <code>$body =~ s!\\A.*?\\r\\n\\r\\n!!s;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549302125, "post_id": 54521021, "comment_id": 95845679, "body": "Shouldn&#39;t that be <code>split(&#47;\\r\\n\\r\\n&#47;, ....)</code>? Unless of course this is <code>$body</code> before handing it off to Email::Simple."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 4, "creation_date": 1549302910, "post_id": 54521021, "comment_id": 95846082, "body": "... also, if <code>$body</code> contains one more empty line, this will mutilate <code>$body</code>. Using the three argument version of <code>split</code> should work: <code>(undef, $body) = split &#47;\\n\\n&#47;, $body, 2;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549347351, "post_id": 54521021, "comment_id": 95858952, "body": "@Corion: Good catch. Fixed."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549348346, "post_id": 54521021, "comment_id": 95859272, "body": "@StefanBecker: As I said, &quot;before passing it to the create() method&quot;."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1549347334, "last_edit_date": 1549347334, "creation_date": 1549300079, "answer_id": 54521021, "question_id": 54519521, "link": "https://stackoverflow.com/questions/54519521/sending-using-emailsimple-with-to-from-in-body-text-instead-of-headers/54521021#54521021", "title": "Sending using Email::Simple with To/From in body text instead of headers", "body": "<p>I assume your <code>$body</code> variable contains the text from one of your template files. And as those templates contain the headers, they will end up duplicated in the body of your email messages.</p>\n\n<p>The best approach is to edit your templates to remove the header sections.</p>\n\n<p>But if you can't do that for some reason, you can pre-process <code>$body</code> before passing it to the <code>create()</code> method. Something like this, perhaps:</p>\n\n<pre><code>(undef, $body) = split /\\n\\n/, $body, 2;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "is_accepted": false, "score": 2, "last_activity_date": 1549365435, "creation_date": 1549365435, "answer_id": 54533230, "question_id": 54519521, "link": "https://stackoverflow.com/questions/54519521/sending-using-emailsimple-with-to-from-in-body-text-instead-of-headers/54533230#54533230", "title": "Sending using Email::Simple with To/From in body text instead of headers", "body": "<p>Actually the answer is simpler than I thought...</p>\n\n<p>If you just use</p>\n\n<pre><code>my $email = Email::Simple-&gt;new( $text );\nsendmail( $email, { transport =&gt; $transport });\n</code></pre>\n\n<p>It will use the headers from the text/body, and not include them in the main body.</p>\n\n<p>If you use </p>\n\n<pre><code>my $email = Email::Simple-&gt;create( $text );\nsendmail( $email, { transport =&gt; $transport });\n</code></pre>\n\n<p>It seems to need the separate headers, and sends out the headers in the text as part of the main data/html that's sent out.</p>\n"}], "owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549365435, "creation_date": 1549294793, "question_id": 54519521, "link": "https://stackoverflow.com/questions/54519521/sending-using-emailsimple-with-to-from-in-body-text-instead-of-headers", "title": "Sending using Email::Simple with To/From in body text instead of headers", "body": "<p>Currently we are using a print to send an html mail via a sendmail pipe, which works fine.</p>\n\n<pre><code>$fh-&gt;open( q{|sendmail -f&lt;fromaddress&gt; .......} );\n</code></pre>\n\n<p>This comes from a template which contains text like...</p>\n\n<pre><code>From: &lt;Fromaddress&gt;\nReply-to: &lt;replyaddress&gt;\nSubject: etc\nMine-Version: 1.o\nContent-Type: text/html\n\n&lt;!DOCTYPE html...\n&lt;html...\nrest of body\n</code></pre>\n\n<p>I am now trying to use Email::Simple with the same text</p>\n\n<pre><code>my $email = Email::simple-&gt;create(\n    header =&gt; $header,\n    body =&gt; $body\n);\n\nsendmail( $email, { transport =&gt; $transport });\n</code></pre>\n\n<p>My headers are like</p>\n\n<pre><code>[ To =&gt; &lt;toaddress&gt;, From =&gt; &lt;fromaddress&gt;, 'Content-Type' =&gt; 'text/html' ]\n</code></pre>\n\n<p>This all sends fine, except it includes also the 'From:.. To:: Subject..' as part of the html to be displayed also, whereas sendmail consumes this to be used.</p>\n\n<p>I could use regex to strip out the header content that's included in the text (as it's already generated, but that feels risk prone and clunky), but I'm wondering, is there an Email::Simple way of discarding that, or using only the html instead of the From/To/Subject specific headers provided to Email::Simple ?</p>\n\n<p>I have looked <a href=\"https://metacpan.org/pod/Email::Sender::Manual::QuickStart\" rel=\"nofollow noreferrer\">here</a> but can't see any reference to that.</p>\n"}, {"tags": ["perl", "prototype"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1549296706, "post_id": 54519375, "comment_id": 95842924, "body": "Do you <i>have to</i> use the prototype though? Does it give you anything?"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549358115, "post_id": 54519437, "comment_id": 95863459, "body": "That would probably be a different question. I tried a few examples <code>pv(&quot;test&quot;)</code>, <code>pv([1, 2, 3, 4])</code> &amp; <code>my $o = [[1, 2], [3, 4], [5, 6], [7, 8, 9]]; bless($o, &#39;SNMP::VarList&#39;); pv($o);</code> and get <code>test</code>, <code>1.2.3.4</code> &amp; <code>1.2, 3.4, 5.6, 7.8.9</code>, i.e. what I think the code should return."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 8, "last_activity_date": 1549294461, "creation_date": 1549294461, "answer_id": 54519437, "question_id": 54519375, "link": "https://stackoverflow.com/questions/54519375/how-to-declare-function-and-use-it-recursively-without-called-too-early-to-chec/54519437#54519437", "title": "How to declare function and use it recursively without &quot;called too early to check prototype&quot;", "body": "<p>Simple: forward declaration</p>\n\n<pre><code>sub pv($);\nsub pv($) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 10295921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a218d1aa8601550cb2db024ea70d241e?s=128&d=identicon&r=PG&f=1", "display_name": "petitLynx", "link": "https://stackoverflow.com/users/10295921/petitlynx"}, "edited": false, "score": 0, "creation_date": 1549356524, "post_id": 54530274, "comment_id": 95862636, "body": "Thanks my version is 5.016003"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1549355073, "creation_date": 1549355073, "answer_id": 54530274, "question_id": 54519375, "link": "https://stackoverflow.com/questions/54519375/how-to-declare-function-and-use-it-recursively-without-called-too-early-to-chec/54530274#54530274", "title": "How to declare function and use it recursively without &quot;called too early to check prototype&quot;", "body": "<p>On Perl 5.16+, you can use the <a href=\"https://perldoc.pl/feature#The-&#39;current_sub&#39;-feature\" rel=\"nofollow noreferrer\">current_sub feature</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'current_sub';\n\nsub pv($) {\n  ...\n  __SUB__-&gt;($_)\n  ...\n}\n</code></pre>\n\n<p>This is more useful when using anonymous subs, so that you don't create a memory cycle (as it would close over a reference to itself; this doesn't occur with named subs, since it just looks up the symbol).</p>\n\n<p>Additionally, consider just not using a prototype. It's very likely that you don't need it, unless you know why you do; prototypes are for the parser, not the caller. Without the prototype, calling it with parentheses will be sufficient to delay the symbol lookup.</p>\n"}], "owner": {"reputation": 61, "user_id": 10295921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a218d1aa8601550cb2db024ea70d241e?s=128&d=identicon&r=PG&f=1", "display_name": "petitLynx", "link": "https://stackoverflow.com/users/10295921/petitlynx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1549355073, "creation_date": 1549294206, "last_edit_date": 1549298032, "question_id": 54519375, "link": "https://stackoverflow.com/questions/54519375/how-to-declare-function-and-use-it-recursively-without-called-too-early-to-chec", "title": "How to declare function and use it recursively without &quot;called too early to check prototype&quot;", "body": "<p>I have a generic and recursive function but why it is not authorized in perl</p>\n\n<pre><code>sub pv($) {\n    my ($vars) = @_;\n    if(ref($vars) eq 'SNMP::Varbind') {\n        return $vars-&gt;tag() . (defined($vars-&gt;iid()) ? '.' . $vars-&gt;iid() : '');\n    } elsif (ref($vars) eq 'SNMP::VarList') {\n        return join(', ', map { pv($_) } @$vars);\n    } elsif(ref($vars) eq 'ARRAY') {\n        return join('.', @{$vars});\n    } else {\n        return $vars;\n    }\n}\n</code></pre>\n\n<p>This error code \"pv() called too early to check prototype\" for this line return join(', ', map { pv($_) } @$vars);</p>\n"}, {"tags": ["bash", "perl", "awk"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 4, "creation_date": 1549292230, "post_id": 54518784, "comment_id": 95840382, "body": "Can you please <a href=\"https://stackoverflow.com/posts/54518784/edit\">edit</a> your post and show us the code you already have and also tell us how it fails to do what you want?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1549293265, "creation_date": 1549293265, "answer_id": 54519095, "question_id": 54518784, "link": "https://stackoverflow.com/questions/54518784/find-the-hightest-value-in-a-line-of-a-file-with-multlines/54519095#54519095", "title": "Find the hightest value in a line of a file with multlines", "body": "<p>It's certainly possible in all of the tools that you've tagged your question with. It's trivial, for example, in Perl.</p>\n\n<p>But Stack Overflow isn't a code-writing service and you've shown us no evidence that you have written any code to solve the problem, so I'm not going to give you a solution. Here's some pseudocode that you can use as the design for your solution.</p>\n\n<pre><code>WHILE you can read a line from the file\n  SPLIT the input record on whitespace\n  PRINT the first element of the split record\n  CALCULATE the maximum value of the remaining element\n  PRINT the maximum value\nEND WHILE\n</code></pre>\n\n<p>So you would need to know how to do the following things:</p>\n\n<ul>\n<li>Read a record of data from a file</li>\n<li>Split a string on whitespace</li>\n<li>Print data</li>\n<li>Find the maximum in a list of values</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11013017, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-f9Cr-59FX-A/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPbQRCw-k4omOEqv9IfM7VeCHIUVw/mo/photo.jpg?sz=128", "display_name": "Stephane Abel", "link": "https://stackoverflow.com/users/11013017/stephane-abel"}, "edited": false, "score": 0, "creation_date": 1549380009, "post_id": 54519122, "comment_id": 95876586, "body": "Hello, thank you all for your help. I tagged the perl language with bash and awk because I thought it would be easier to find a solution to my simple problem. I am not a programmer (but I try to do at best with what I know as the bash / awk language or possibly fortran). By bringing me your help with your perl approach you have helped me a lot and more importantly I learned. the code you wrote me will help me if I have another similar problem of the same kind. Thank you again"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1549293346, "creation_date": 1549293346, "answer_id": 54519122, "question_id": 54518784, "link": "https://stackoverflow.com/questions/54518784/find-the-hightest-value-in-a-line-of-a-file-with-multlines/54519122#54519122", "title": "Find the hightest value in a line of a file with multlines", "body": "<p>As you tagged for Perl:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse List::Util qw(max);\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my($key, @numbers) = split(/\\s+/);\n    print \"${key}\\t\", max(@numbers), \"\\n\";\n}\n\n__DATA__\n136   0.369326 0.004999\n137   0.003199 0.140172 0.055189 0.047191 0.520696 0.172565\n138   0.000400 0.021596 0.095381 0.179164 0.065187\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n136     0.369326\n137     0.520696\n138     0.179164\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1549295181, "creation_date": 1549295181, "answer_id": 54519623, "question_id": 54518784, "link": "https://stackoverflow.com/questions/54518784/find-the-hightest-value-in-a-line-of-a-file-with-multlines/54519623#54519623", "title": "Find the hightest value in a line of a file with multlines", "body": "<p>Perl one-liner</p>\n\n<pre><code>$ cat stephane.txt\n136   0.369326 0.004999\n137   0.003199 0.140172 0.055189 0.047191 0.520696 0.172565\n138   0.000400 0.021596 0.095381 0.179164 0.065187\n\n$ perl -lane ' @x=sort {$a&lt;$b} @F[1..$#F]; print \"$F[0] $x[0]\" ' stephane.txt\n136 0.369326\n137 0.520696\n138 0.179164\n\n$\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11013017, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-f9Cr-59FX-A/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPbQRCw-k4omOEqv9IfM7VeCHIUVw/mo/photo.jpg?sz=128", "display_name": "Stephane Abel", "link": "https://stackoverflow.com/users/11013017/stephane-abel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 2, "closed_date": 1549387698, "answer_count": 3, "score": -5, "last_activity_date": 1549295181, "creation_date": 1549292157, "question_id": 54518784, "link": "https://stackoverflow.com/questions/54518784/find-the-hightest-value-in-a-line-of-a-file-with-multlines", "closed_reason": "Needs more focus", "title": "Find the hightest value in a line of a file with multlines", "body": "<p>I have a file with different lines and would like to find and output the hightest value in each line starting from the second column. It is possible in bash or awk ?</p>\n\n<p>For instance the file has this format structure </p>\n\n<pre>\n136   0.369326 0.004999\n137   0.003199 0.140172 0.055189 0.047191 0.520696 0.172565\n138   0.000400 0.021596 0.095381 0.179164 0.065187\n...\nand so on\"\n</pre>\n\n<p>And I would like the following output </p>\n\n<pre>\n136   0.369326\n137   0.520696\n138   0.179164\n... and so on\n</pre>\n\n<p>Thanks </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1549280233, "post_id": 54515290, "comment_id": 95833365, "body": "Crossposed from <a href=\"https://perlmonks.org/?node_id=1229334\" rel=\"nofollow noreferrer\">perlmonks.org</a>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549280521, "post_id": 54515290, "comment_id": 95833502, "body": "Where is the question in your post?"}, {"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 0, "creation_date": 1549292774, "post_id": 54515290, "comment_id": 95840718, "body": "There is <i>no</i> &quot;PERL&quot;. <code>Perl</code> is the language; <code>perl</code> is the name of the interpreter."}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1549284367, "last_edit_date": 1549284367, "creation_date": 1549281172, "answer_id": 54515516, "question_id": 54515290, "link": "https://stackoverflow.com/questions/54515290/parse-text-file-data-to-send-a-mail-in-perl/54515516#54515516", "title": "Parse text file data to send a mail in perl", "body": "<p>How about this?</p>\n\n<p>Gist of the implementation approach: use <code>..</code> bi-stable operator with regexes defining the start and end conditions.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# Generate regexes for section keywords\nmy @sections = qw(TO SUBJECT BODY);\nmy %keywords = map {\n    (\n     \"$_\"    =&gt; qr/^$_$/,\n     \"END$_\" =&gt; qr/^END$_$/\n    )} @sections;\n\nmy($to, $subject, @body);\nwhile (&lt;STDIN&gt;) {\n    chomp;\n    if      (/$keywords{TO}/../$keywords{ENDTO}/) {\n        # skip keyword lines\n        next if /$keywords{TO}|$keywords{ENDTO}/;\n        $to = $_;\n    } elsif  (/$keywords{SUBJECT}/../$keywords{ENDSUBJECT}/) {\n        # skip keyword lines\n        next if /$keywords{SUBJECT}|$keywords{ENDSUBJECT}/;\n        $subject = $_;\n    } elsif  (/$keywords{BODY}/../$keywords{ENDBODY}/) {\n        if      (/$keywords{BODY}/) {\n            # skip keyword line\n        } elsif (/$keywords{ENDBODY}/) {\n            # mail is done... send it\n            print \"To: ${to}\\n\";\n            print \"Bcc: rahul.agarwal\\@everyone.com\\n\";\n            print \"From: rahul.agarwal\\@everyone.com\\n\";\n            print \"Subject: ${subject}\\n\";\n            print \"\\n\";\n            print \"$_\\n\" foreach (@body);\n        } else {\n            # body text line\n            push(@body, $_);\n        }\n    }\n}\n\nexit 0;\n</code></pre>\n\n<p>Output with your test example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># add \"| /usr/sbin/sendmail -t\" after command to actually send it...\n$ perl dummy.pl &lt;dummy.txt\nTo: rahul@example.com,you@everyone.com\nBcc: rahul.agarwal@everyone.com\nFrom: rahul.agarwal@everyone.com\nSubject: Weekly status snapshot for WW-5\n\nHi All, Weekly progress snapshot for this week will be taken on Thursday, 30 Jan at the end of the day. ( Please update your status before the snapshot)\nUse work week number as 5 for this week's updates .\nNote : If you want any additional data to be picked up ( or dropped ) from your sheets, do work with me so that status collation script can be updated to do this .\nThanks ,\n-Ram\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8738411, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612844115439133/picture?type=large", "display_name": "Rahul Agarwal", "link": "https://stackoverflow.com/users/8738411/rahul-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549284367, "creation_date": 1549280173, "question_id": 54515290, "link": "https://stackoverflow.com/questions/54515290/parse-text-file-data-to-send-a-mail-in-perl", "title": "Parse text file data to send a mail in perl", "body": "<p>I'm new to PERL. I want to create a PERL Script that could send mail by taking all required fields from an input file present at desktop and can send a mail to everyone in mailing list (separated by comma) accordingly. Contents of my input data file is as follows:</p>\n\n<ul>\n<li>Recipients are enclosed between tags TO &amp; ENDTO.</li>\n<li>Subject of mail is enclosed between SUBJECT &amp; ENDSUBJECT.</li>\n<li>Body of mail is enclosed between BODY &amp; ENDBODY. <br></li>\n</ul>\n\n<p>Sample data file :</p>\n\n<p>TO <br>\nrahul@example.com,you@everyone.com <br>\nENDTO <br></p>\n\n<p>SUBJECT <br>\nWeekly status snapshot for WW-5 <br>\nENDSUBJECT <br> <br></p>\n\n<p>BODY <br>\nHi All, \nWeekly progress snapshot for this week will be taken on Thursday, 30 Jan at the end of the day. ( Please update your status before the snapshot) <br>\nUse work week number as 5 for this week's updates . <br>\nNote : If you want any additional data to be picked up ( or dropped ) from your sheets, do work with me so that status collation script can be updated to do this . <br>\nThanks , <br>\n-Ram <br>\nENDBODY <br></p>\n\n<ul>\n<li>Till now I'm using a code that takes inputs from two different files (\"message.txt\" &amp; \"recipients.txt\") and sends mail accordingly. But now I want to parse data from a single file separated by tag fields for recipients, body and subject. <br></li>\n</ul>\n\n<pre><code>    $mailprog = \"/usr/sbin/sendmail\";\n\n    my $file1 = 'message';\n    open my $ifh1, '&lt;', $file1;\n    local $/ = undef;\n    my $contents = $ifh1;\n\n    my $file2 = 'recipients';\n    open my $ifh2, '&lt;', $file2;\n    local $/ = undef;\n    my $recip = $ifh2; \n\n    close( $ifh2 );\n    close( $ifh1 );\n\n    $subject= \"Weekly status snapshot for WW-3\";\n    open(MAIL, \"|$mailprog -t\");\n    print MAIL \"To: $recip \\n\";\n    print MAIL \"bcc: rahul.agarwal\\@everyone.com\\n\";\n    print MAIL \"From: rahul.agarwal\\@everyone.com\\n\";\n    print MAIL \"Subject: $subject\\n\\n\";\n    print MAIL \"$contents\";\n    close(MAIL); \n\n\n\n</code></pre>\n"}, {"tags": ["c", "linux", "perl", "gcc"], "comments": [{"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1549276394, "post_id": 54514185, "comment_id": 95831507, "body": "Your gcc version is not the last one,perhaps you can try we a newer version"}, {"owner": {"reputation": 193, "user_id": 2792459, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3642f1cdb1c0bbf33e81d23a319681f2?s=128&d=identicon&r=PG&f=1", "display_name": "algorithmic", "link": "https://stackoverflow.com/users/2792459/algorithmic"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1549277177, "post_id": 54514185, "comment_id": 95831919, "body": "Thanks Orel. But my friend actually tried this on other Debian machine with same GCC version and it was successful. So I am not sure if GCC version is an issue here."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549277346, "post_id": 54514185, "comment_id": 95832003, "body": "Why do you use <code>sudo make</code>? You run the configuration phase <code>perl ...</code> as normal user, but the compilation as root. Why?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1549277370, "post_id": 54514185, "comment_id": 95832016, "body": "<a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=20562\" rel=\"nofollow noreferrer\">Binutils Bug 20562, Linker aborting on line 444 in bfd_get_reloc_size</a>. It is an old Binutils, so it is unlikely to be fixed if it has not already been fixed. Given H.J. Lu&#39;s answer was <i>&quot;Please try binutils 2.27&quot;</i>, I&#39;m guessing it will not be fixed."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1549277627, "post_id": 54514185, "comment_id": 95832138, "body": "Also, instead of <code>LD_RUN_PATH</code>, you might try linker options <code>-Wl,-rpath=&lt;...&gt;</code> and <code>-Wl,--enable-new-dtags</code>. It is just some knob turning that tries to work around something that may confuse the linker. It does not solve the underlying problem with the tool. And as Stefan said, use just <code>make</code> (and not <code>sudo make</code>). The only time to use <code>sudo</code> is during <code>sudo make install</code> when you need <code>root</code>."}, {"owner": {"reputation": 193, "user_id": 2792459, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3642f1cdb1c0bbf33e81d23a319681f2?s=128&d=identicon&r=PG&f=1", "display_name": "algorithmic", "link": "https://stackoverflow.com/users/2792459/algorithmic"}, "edited": false, "score": 0, "creation_date": 1549278130, "post_id": 54514185, "comment_id": 95832379, "body": "rm -f blib/arch/auto/DBD/Sybase/Sybase.so LD_RUN_PATH=&quot;/usr/local/freetds/lib&quot; /network//glnxa64/gcc-4.7.2/bin/gcc -shared   -L/usr/local/freetds/lib -pthread -L/usr/local/lib -fstack-protector Sybase.o dbdimp.o  -o blib/arch/auto/DBD/Sybase/Sybase.so       \\    -L/usr/local/freetds/lib -lct -ldl -lm \\ /network//glnxa64/gcc-4.7.2/bin/ld: cannot open output file blib/arch/auto/DBD/Sybase/Sybase.so: Permission denied collect2: error: ld returned 1 exit status Makefile:485: recipe for target &#39;blib/arch/auto/DBD/Sybase/Sybase.so&#39; failed make: *** [blib/arch/auto/DBD/Sybase/Sybase.so] Error 1"}, {"owner": {"reputation": 193, "user_id": 2792459, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3642f1cdb1c0bbf33e81d23a319681f2?s=128&d=identicon&r=PG&f=1", "display_name": "algorithmic", "link": "https://stackoverflow.com/users/2792459/algorithmic"}, "edited": false, "score": 0, "creation_date": 1549278286, "post_id": 54514185, "comment_id": 95832450, "body": "Above is an error I get when I use &quot;make&quot; instead of &quot;sudo make&quot;"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1549279733, "post_id": 54514185, "comment_id": 95833121, "body": "If you have additional information please add it to the question. It is practically unreadable as a comment. You can add the additional information to the question by clicking <i>Edit</i>."}, {"owner": {"reputation": 193, "user_id": 2792459, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3642f1cdb1c0bbf33e81d23a319681f2?s=128&d=identicon&r=PG&f=1", "display_name": "algorithmic", "link": "https://stackoverflow.com/users/2792459/algorithmic"}, "edited": false, "score": 0, "creation_date": 1549280402, "post_id": 54514185, "comment_id": 95833448, "body": "Well using a different version of binutils worked. I used version 2.28. The error message is not so obvious. Thank you all for your help."}], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 2792459, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3642f1cdb1c0bbf33e81d23a319681f2?s=128&d=identicon&r=PG&f=1", "display_name": "algorithmic", "link": "https://stackoverflow.com/users/2792459/algorithmic"}, "is_accepted": false, "score": 1, "last_activity_date": 1549280579, "creation_date": 1549280579, "answer_id": 54515369, "question_id": 54514185, "link": "https://stackoverflow.com/questions/54514185/problems-building-dbd-sybase-on-debian/54515369#54515369", "title": "Problems building DBD Sybase on Debian", "body": "<p>As @jww pointed out, the issue was the older version of binutils and gcc. I just edited the generated Makefile in Sybase base directory to point to newer versions of gcc and binutils. FYI, I the versions that worked are \"gcc version 6.3.0 \" and \"GNU ld (GNU Binutils) 2.28.1\"</p>\n"}], "owner": {"reputation": 193, "user_id": 2792459, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3642f1cdb1c0bbf33e81d23a319681f2?s=128&d=identicon&r=PG&f=1", "display_name": "algorithmic", "link": "https://stackoverflow.com/users/2792459/algorithmic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1604601906, "creation_date": 1549276003, "last_edit_date": 1549276954, "question_id": 54514185, "link": "https://stackoverflow.com/questions/54514185/problems-building-dbd-sybase-on-debian", "title": "Problems building DBD Sybase on Debian", "body": "<p>I am trying to build DBD::Sybase on Debian machine, but I am running into a problem. The problem is, <em><code>BFD (GNU Binutils) 2.21.1 internal error</code></em> when linking the program. Please help me resolve this.</p>\n\n<ol>\n<li>I successfully installed freetds</li>\n<li>Downloaded \"DBD-Sybase-1.16\"</li>\n<li>Executed \"perl Makefile.PL INSTALL_BASE=/usr/lib/perl5/\" which was successfull</li>\n<li>When I execute \"sudo make\", I get the following error. I tried googling but could not find help.</li>\n</ol>\n\n<p>Here is the tail of the build.</p>\n\n<pre><code>Skip blib/lib/DBD/Sybase.pm (unchanged)   \nSkip blib/lib/DBD/dbd-sybase.pod (unchanged)  \nRunning Mkbootstrap for DBD::Sybase ()   \nchmod 644 Sybase.bs   \n/network/glnxa64/gcc-4.7.2/bin/gcc -c  -I/usr/local/freetds/include -DSYB_LP64 -DNO_BLK=1 -I/company/hub/share/apps/BuildTools/Linux/glibc-2.13/x86_64/perl/perl-5.20.2-mw-021/lib/site_perl/5.20.2/x86_64-linux-thread-multi/auto/DBI -D_REENTRANT -D_GNU_SOURCE -O2 -pipe -pthread -fPIC -fwrapv -fno-strict-aliasing -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\\\"1.16\\\" -DXS_VERSION=\\\"1.16\\\" -fPIC \"-I/company/hub/share/apps/BuildTools/Linux/glibc-2.13/x86_64/perl/perl-5.20.2-mw-021/lib/5.20.2/x86_64-linux-thread-multi/CORE\"   Sybase.c     \n\n/network/glnxa64/gcc-4.7.2/bin/gcc -c  -I/usr/local/freetds/include -DSYB_LP64 -DNO_BLK=1 -I/company/hub/share/apps/BuildTools/Linux/glibc-2.13/x86_64/perl/perl-5.20.2-mw-021/lib/site_perl/5.20.2/x86_64-linux-thread-multi/auto/DBI -D_REENTRANT -D_GNU_SOURCE -O2 -pipe -pthread -fPIC -fwrapv -fno-strict-aliasing -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\\\"1.16\\\" -DXS_VERSION=\\\"1.16\\\" -fPIC \"-I/company/hub/share/apps/BuildTools/Linux/glibc-2.13/x86_64/perl/perl-5.20.2-mw-021/lib/5.20.2/x86_64-linux-thread-multi/CORE\"   dbdimp.c\nrm -f blib/arch/auto/DBD/Sybase/Sybase.so\nLD_RUN_PATH=\"/usr/local/freetds/lib\" /network/glnxa64/gcc-4.7.2/bin/gcc -shared   -L/usr/local/freetds/lib -pthread -L/usr/local/lib -fstack-protector Sybase.o dbdimp.o  -o blib/arch/auto/DBD/Sybase/Sybase.so       \\\n   -L/usr/local/freetds/lib -lct -ldl -lm       \\\n\n/network/glnxa64/gcc-4.7.2/bin/ld: BFD (GNU Binutils) 2.21.1 internal error, aborting at /local/greg/3p/sources/gcc-4.7/../binutils/bfd/reloc.c line 443 in bfd_get_reloc_size\n\n/network/glnxa64/gcc-4.7.2/bin/ld: Please report this bug.\n\ncollect2: error: ld returned 1 exit status\nMakefile:485: recipe for target 'blib/arch/auto/DBD/Sybase/Sybase.so' failed\nmake: *** [blib/arch/auto/DBD/Sybase/Sybase.so] Error 1\n</code></pre>\n"}, {"tags": ["perl", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9103438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41ec264d06a89c90a66cfa7adbc800e?s=128&d=identicon&r=PG&f=1", "display_name": "Tulasi Kumar G M", "link": "https://stackoverflow.com/users/9103438/tulasi-kumar-g-m"}, "edited": false, "score": 0, "creation_date": 1549271644, "post_id": 54512911, "comment_id": 95828965, "body": "Totally I have 64 rows in my database, with this statement I can able to retrieve only two rows."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 9103438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41ec264d06a89c90a66cfa7adbc800e?s=128&d=identicon&r=PG&f=1", "display_name": "Tulasi Kumar G M", "link": "https://stackoverflow.com/users/9103438/tulasi-kumar-g-m"}, "edited": false, "score": 0, "creation_date": 1549274028, "post_id": 54512911, "comment_id": 95830218, "body": "@TulasiKumarGM: I don&#39;t see how the journal mode would affect the number of rows a query returns. What makes you think you have 64 rows in your table?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 9103438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41ec264d06a89c90a66cfa7adbc800e?s=128&d=identicon&r=PG&f=1", "display_name": "Tulasi Kumar G M", "link": "https://stackoverflow.com/users/9103438/tulasi-kumar-g-m"}, "edited": false, "score": 0, "creation_date": 1549274097, "post_id": 54512911, "comment_id": 95830254, "body": "@TulasiKumarGM: But, anyway, your question was about connecting to the database. I think I&#39;ve fixed that problem for you. If you have further problems, you should ask separate questions about them."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1549284637, "post_id": 54512911, "comment_id": 95835870, "body": "The only persistent journal mode is <code>wal</code>, btw. The others still need to be set for every connection."}, {"owner": {"reputation": 11, "user_id": 9103438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41ec264d06a89c90a66cfa7adbc800e?s=128&d=identicon&r=PG&f=1", "display_name": "Tulasi Kumar G M", "link": "https://stackoverflow.com/users/9103438/tulasi-kumar-g-m"}, "edited": false, "score": 0, "creation_date": 1549365245, "post_id": 54512911, "comment_id": 95867704, "body": "I copied db3 file in one of my local folder and tried to open using Sqlite Studio, so here I can able to see only two rows. if I copy a .db3 and .db3-wal in one of my local folder and tried to open using Sqlite Studio, so here I can able to see all 64 rows. so here while connecting .db3, I need to consider .db3-wal also"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1549273971, "last_edit_date": 1549273971, "creation_date": 1549271247, "answer_id": 54512911, "question_id": 54512733, "link": "https://stackoverflow.com/questions/54512733/sqlite-connection-string-in-perl/54512911#54512911", "title": "Sqlite connection string in perl", "body": "<p>Reading <a href=\"https://metacpan.org/pod/DBD::SQLite#Pragma\" rel=\"nofollow noreferrer\">the section on PRAGMA in the DBD::SQLite documentation</a>, it looks like you're setting the PRAGMA at the wrong time. It shouldn't be part of the connection string, but an SQL command that is run once you have connected.</p>\n\n<pre><code>my $driver   = \"SQLite\"; \nmy $database = \"C:\\\\Sample\\\\Sample_Sqlite\\\\Activities.db3\";\n\nmy $dsn = \"DBI:$driver:dbname=$database\";\nprint $dsn;\nmy $dbh = DBI-&gt;connect(          \n    $dsn,                          \n    { RaiseError =&gt; 1 },         \n) or die $DBI::errstr;\n\n$dbh-&gt;do('PRAGMA journal_mode=WAL');\n</code></pre>\n\n<p><strong>Update:</strong> It's probably also worth noting that the <code>journal_mode</code> setting is persistent. So you only need to set it once, and then you can drop it completely from your connection code.</p>\n"}], "owner": {"reputation": 11, "user_id": 9103438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41ec264d06a89c90a66cfa7adbc800e?s=128&d=identicon&r=PG&f=1", "display_name": "Tulasi Kumar G M", "link": "https://stackoverflow.com/users/9103438/tulasi-kumar-g-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549273971, "creation_date": 1549270458, "last_edit_date": 1549270807, "question_id": 54512733, "link": "https://stackoverflow.com/questions/54512733/sqlite-connection-string-in-perl", "title": "Sqlite connection string in perl", "body": "<p>I am using below sqlite connection string in perl to connect sqlite database and getting following below error</p>\n\n<blockquote>\n  <p>Can't set DBI::db=HASH(0x2c34194)->{PRAGMA journal_mode}: unrecognised attribute name or invalid value</p>\n</blockquote>\n\n<pre><code>my $driver   = \"SQLite\"; \nmy $database = \"C:\\\\Sample\\\\Sample_Sqlite\\\\Activities.db3;PRAGMA journal_mode=WAL;\";\n\nmy $dsn = \"DBI:$driver:dbname=$database\";\nprint $dsn;\nmy $dbh = DBI-&gt;connect(          \n    $dsn,                          \n    { RaiseError =&gt; 1 },         \n) or die $DBI::errstr;\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "mojolicious-lite"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 0, "last_activity_date": 1549356217, "creation_date": 1549356217, "answer_id": 54530531, "question_id": 54512637, "link": "https://stackoverflow.com/questions/54512637/can-i-forward-to-action-in-same-controller-in-mojolicious/54530531#54530531", "title": "Can I forward to action in same controller in Mojolicious", "body": "<p>While Mojolicious::Lite is a very simple wrapper, any subs defined within the Lite script will not be controller methods but application methods. There's not really a way to make them controller methods except by defining a controller, which is totally possible even in a lite app (<em>very</em> simple wrapper) but would make it not-so-lite. The other direction is easily possible though; you can have anonymous subroutines as actions in a full app. You could also write your actions as helpers, which can then be called simply from either an anonymous subroutine or a controller action. Either of these would probably not be great code organization for a full app.</p>\n\n<p>The main takeaway in any case is that the contents of a Mojolicious::Lite script are equivalent to the <code>startup</code> sub of a full app, not a controller.</p>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54530531, "answer_count": 1, "score": 1, "last_activity_date": 1549356217, "creation_date": 1549269952, "last_edit_date": 1549298135, "question_id": 54512637, "link": "https://stackoverflow.com/questions/54512637/can-i-forward-to-action-in-same-controller-in-mojolicious", "title": "Can I forward to action in same controller in Mojolicious", "body": "<p>If I split my application with Controller classes I can do</p>\n\n<pre><code> get '/foo/bar' =&gt; { controller =&gt; 'Foo', action =&gt; 'bar' };\n</code></pre>\n\n<p>can I do the same if my action is inside the same Mojolicious::Lite file?</p>\n\n<p>For now I do </p>\n\n<pre><code>sub foobar {\n    my $c = shift;\n    ...\n}\n\nget '/' =&gt; sub { foobar(@_) };\n</code></pre>\n\n<p>but I'd like to do </p>\n\n<pre><code>get '/' =&gt; { action =&gt; 'foobar' };\n</code></pre>\n\n<p>for consistency and ease of splitting later should I decide to do so, while keeping the general Mojolicious::Lite structure (i.e: single file).</p>\n\n<p>How can this be done?</p>\n"}, {"tags": ["python", "perl", "setuptools", "distutils", "python-wheel"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1549289531, "post_id": 54511002, "comment_id": 95838688, "body": "Either use <a href=\"https://stackoverflow.com/search?q=%5Bsetuptools%5D+package_data\">package_data</a> or <a href=\"https://stackoverflow.com/search?q=%5Bsetuptools%5D+data+files\">data files</a>."}], "answers": [{"comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 1, "creation_date": 1549380533, "post_id": 54511036, "comment_id": 95876949, "body": "<a href=\"https://packaging.python.org/guides/distributing-packages-using-setuptools/#manifest-in\" rel=\"nofollow noreferrer\">Note: MANIFEST.in does not affect binary distributions such as wheels.</a>"}, {"owner": {"reputation": 13849, "user_id": 2904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428748f4b24cb77ed1745007d95e1ef6?s=128&d=identicon&r=PG", "display_name": "metatoaster", "link": "https://stackoverflow.com/users/2904896/metatoaster"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1549416635, "post_id": 54511036, "comment_id": 95891625, "body": "@phd the documentation is wrong, it does actually work, as I have projects that are packaged in this manner."}, {"owner": {"reputation": 13849, "user_id": 2904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428748f4b24cb77ed1745007d95e1ef6?s=128&d=identicon&r=PG", "display_name": "metatoaster", "link": "https://stackoverflow.com/users/2904896/metatoaster"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1549437042, "post_id": 54511036, "comment_id": 95896832, "body": "@phd also if you read my updates to this answer, you may come across <a href=\"http://blog.codekills.net/2011/07/15/lies,-more-lies-and-python-packaging-documentation-on--package_data-/\" rel=\"nofollow noreferrer\">this</a> link (via <a href=\"https://stackoverflow.com/a/14159430/2904896\">this answer</a>) explaining why your suggestion to use <code>package_data</code> doesn&#39;t actually work, and <code>data_files</code> take a lot more effort to use."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1549450799, "post_id": 54511036, "comment_id": 95903901, "body": "Both links point to quite an outdated answers (&quot;damn lies&quot; in their own terms). These days the primary distribution format is wheels, and <code>package_data</code> works perfectly."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1549450878, "post_id": 54511036, "comment_id": 95903960, "body": "As for <code>MANIFEST.in</code> \u2014 your update answer contains <code>include_package_data=True,</code> \u2014 that makes it work."}, {"owner": {"reputation": 13849, "user_id": 2904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428748f4b24cb77ed1745007d95e1ef6?s=128&d=identicon&r=PG", "display_name": "metatoaster", "link": "https://stackoverflow.com/users/2904896/metatoaster"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1549453718, "post_id": 54511036, "comment_id": 95905633, "body": "@phd Actually it still needs one more line in order to actually make it work, which is <code>package_data={&#39;&#39;: [&#39;*&#39;]},</code> for the new system, but it does <b>not</b> change the fact that the assertion that <code>MANIFEST.in</code> does not affect wheels is also wrong."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1549453803, "post_id": 54511036, "comment_id": 95905685, "body": "Without <code>include_package_data</code> it doesn&#39;t."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428748f4b24cb77ed1745007d95e1ef6?s=128&d=identicon&r=PG", "display_name": "metatoaster", "link": "https://stackoverflow.com/users/2904896/metatoaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1549453959, "last_edit_date": 1549453959, "creation_date": 1549261252, "answer_id": 54511036, "question_id": 54511002, "link": "https://stackoverflow.com/questions/54511002/how-to-package-perl-files-in-python-wheel/54511036#54511036", "title": "How to package perl files in python wheel", "body": "<p>If you are currently using <code>setuptools</code> in the <code>setup.py</code> for your project, and making use of <code>python setup.py bdist_wheel</code> as the method to generate the <code>.whl</code> file, add the following line to the <code>MANIFEST.in</code> file which is already present at the root of your project.</p>\n\n<pre><code>recursive-include myproject *\n</code></pre>\n\n<p>Naturally, replace <code>myproject</code> for the actual top level directory that will include the target <code>.pl</code> scripts (or any other file).</p>\n\n<p>As a demo, if your <code>setup.py</code> is written approximately like so:</p>\n\n<pre><code>from setuptools import setup\nfrom setuptools import find_packages\n\nsetup(\n    name='myproject',\n    version='0.0.0',\n    description='demo package',\n    long_description=open('README.md').read(),\n    classifiers=[\n        'Programming Language :: Python',\n    ],\n    packages=find_packages(),\n    include_package_data=True,\n    zip_safe=False,\n)\n</code></pre>\n\n<p>Running <code>python setup.py bdist_wheel</code> will show output that looks like:</p>\n\n<pre><code>...\nadding 'myproject/__init__.py'\nadding 'myproject/config.py'\nadding 'myproject/logging.ini'\nadding 'myproject/myperlscript.pl'\nadding 'myproject/scripta.py'\nadding 'myproject/utils.py'\nadding 'myproject/version.py'\nadding 'test/__init__.py'\n...\n</code></pre>\n\n<p>The files are packaged inside the <code>.whl</code>:</p>\n\n<pre><code>$ unzip -t dist/myproject-0.0.0-py3-none-any.whl \nArchive:  dist/myproject-0.0.0-py3-none-any.whl\n    testing: myproject/__init__.py    OK\n    testing: myproject/config.py      OK\n    testing: myproject/logging.ini    OK\n    testing: myproject/myperlscript.pl   OK\n...\n</code></pre>\n\n<p>Installing the resulting <code>.whl</code> file in a new environment:</p>\n\n<pre><code>$ pip install -U myproject-0.0.0-py3-none-any.whl \nProcessing myproject-0.0.0-py3-none-any.whl\nInstalling collected packages: myproject\nSuccessfully installed myproject-0.0.0\n$ ls env/lib/python3.6/site-packages/myproject/\nconfig.py    logging.ini      __pycache__  utils.py\n__init__.py  myperlscript.pl  scripta.py   version.py\n</code></pre>\n\n<p>Also note that if the <code>MANIFEST.in</code> method is unwanted, include <code>package_data={'': ['*']},</code> argument for the <code>setup</code> call should also make it work with the recent versions of <code>setuptools</code>.</p>\n\n<p>Further addendum: The <code>setuptools</code> package actually has a <a href=\"https://github.com/pypa/setuptools/blob/v40.8.0/MANIFEST.in\" rel=\"nofollow noreferrer\"><code>MANIFEST.in</code></a> that include this particular syntax, though restricted to specific filename extensions for the files they want to include.  This is clearly a supported option despite some guides/documentation that might suggest otherwise.  In fact, this is a feature <a href=\"https://docs.python.org/3/distutils/sourcedist.html#specifying-the-files-to-distribute\" rel=\"nofollow noreferrer\">provided by the core <code>distutils</code> module</a> that is shipped with Python by default.  Related questions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/10924885/is-it-possible-to-include-subdirectories-using-dist-utils-setup-py-as-part-of\">Is it possible to include subdirectories using dist utils (setup.py) as part of package data?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7522250/how-to-include-package-data-with-setuptools-distribute\">How to include package data with setuptools/distribute?</a></li>\n</ul>\n"}], "owner": {"reputation": 1069, "user_id": 5417164, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9cb24e9b54605c9f72cf40cf425fc814?s=128&d=identicon&r=PG&f=1", "display_name": "joydeep bhattacharjee", "link": "https://stackoverflow.com/users/5417164/joydeep-bhattacharjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549453959, "creation_date": 1549260973, "last_edit_date": 1549289392, "question_id": 54511002, "link": "https://stackoverflow.com/questions/54511002/how-to-package-perl-files-in-python-wheel", "title": "How to package perl files in python wheel", "body": "<p>We have created a pip wheel file for a package which has a collection of python and perl scripts. Since python packaging will only add the python files to the wheel file what is the best way to package the perl files as well.</p>\n\n<p>This is my project structure</p>\n\n<pre><code>.\n|____myproject\n| |____logging.ini\n| |____utils.py\n| |____myperlscript.pl\n| |____config.py\n| |____version.py\n| |____scripta.py\n| |____scriptb.py\n| |____scriptc.py\n| |______init__.py\n|____test\n| |____test_scripts.py\n|______init__.py\n|____MANIFEST.in\n|____README.md\n|____setup.py\n|____.gitignore\n|____Jenkinsfile\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549316119, "post_id": 54510838, "comment_id": 95851742, "body": "<code>for (split &#47;^&#47;m, $file_contents)</code> will get you what you want"}], "answers": [{"comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1549268334, "post_id": 54510989, "comment_id": 95827679, "body": "<code>foreach (&quot;foo&quot;) { ... }</code> is perfectly valid Perl, looping over the single-element list <code>(&quot;foo&quot;)</code>."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": -2, "last_activity_date": 1549261192, "last_edit_date": 1549261192, "creation_date": 1549260851, "answer_id": 54510989, "question_id": 54510838, "link": "https://stackoverflow.com/questions/54510838/perls-foreach-with-string-argument/54510989#54510989", "title": "Perl&#39;s foreach with string argument", "body": "<p>A string is not a list. If you want to iterate over the characters in a string you'll need</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach my $character (split('', \"foo\\nbar\\nbaz\")) {\n</code></pre>\n\n<p>I think you might be confusing Perl with Python:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>&gt;&gt;&gt; for c in \"foo\\nbar\\nbaz\":\n...    print c\n... \nf\no\n.... remainder deleted ....\na\nz\n&gt;&gt;&gt;\n</code></pre>\n\n<p>As pointed out by the other answers backticks/<code>qx{}</code> return a list of output lines from the executed command in list context.</p>\n"}, {"tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": false, "score": 1, "last_activity_date": 1549260988, "last_edit_date": 1592644375, "creation_date": 1549260988, "answer_id": 54511006, "question_id": 54510838, "link": "https://stackoverflow.com/questions/54510838/perls-foreach-with-string-argument/54511006#54511006", "title": "Perl&#39;s foreach with string argument", "body": "<p>From <code>perldoc -f qx</code>:</p>\n<blockquote>\n<p>In list context, returns a list of lines (however you've defined lines with $/ or $INPUT_RECORD_SEPARATOR), or an empty list if the command failed.</p>\n</blockquote>\n<p>From <code>perldoc perlsyn</code>:</p>\n<blockquote>\n<p><strong>Compound statements</strong></p>\n<p>[...]</p>\n<p>LABEL foreach VAR (LIST) BLOCK</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1549261076, "creation_date": 1549261076, "answer_id": 54511013, "question_id": 54510838, "link": "https://stackoverflow.com/questions/54510838/perls-foreach-with-string-argument/54511013#54511013", "title": "Perl&#39;s foreach with string argument", "body": "<p>In scalar context, backticks return a single scalar containing all the output of the enclosed command. But <code>foreach (...)</code> evaluates the backticks in list context, which will separates the output into a list with one line per element.</p>\n"}, {"comments": [{"owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1549264027, "post_id": 54511319, "comment_id": 95826043, "body": "Thanks, this was my confusion. I had some overly simple assumptions about how Perl enforces context."}, {"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1549295167, "post_id": 54511319, "comment_id": 95842089, "body": "cf. <code>print join &quot;:&quot;, localtime</code> and <code>print join &quot;:&quot;, scalar localtime</code> or even <code>print join &quot;:&quot;, sub{wantarray ? (1,2,3) : &quot;scalar&quot; }-&gt;()</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1549304934, "last_edit_date": 1549304934, "creation_date": 1549263068, "answer_id": 54511319, "question_id": 54510838, "link": "https://stackoverflow.com/questions/54510838/perls-foreach-with-string-argument/54511319#54511319", "title": "Perl&#39;s foreach with string argument", "body": "<p>The question revolves around the <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a>, a critical concept for many things in Perl.</p>\n\n<p>The <code>foreach</code> loop needs a list to iterate over, so it imposes the list context to build the <a href=\"https://perldoc.perl.org/perldata.html#List-value-constructors\" rel=\"nofollow noreferrer\">list values</a> you saw mentioned in docs. The list may be formed with literals, <code>qw(a b c)</code>, and may have one element; this is your second example, where one string is given, forming the one-element list that is iterated over.</p>\n\n<p>The list can also come from an expression, that is evaluated in the list context; this is your first example. Many operations yield different returns based on context, and <code>qx</code> is such an operator as explained in mob's answer. This is something to note and be careful with. An expression may also return a single value regardless of context; then it is simply used to populate the list.</p>\n"}], "owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 54511013, "answer_count": 4, "score": 1, "last_activity_date": 1549304934, "creation_date": 1549260029, "question_id": 54510838, "link": "https://stackoverflow.com/questions/54510838/perls-foreach-with-string-argument", "title": "Perl&#39;s foreach with string argument", "body": "<p>Perldocs only indicate that <code>foreach</code> loops \"iterates over a normal list value\" <a href=\"https://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlsyn.html#Foreach-Loops</a>, but I sometimes see them with string arguments, such as the following examples:</p>\n\n<pre><code>foreach (`curl example.com 2&gt;/dev/null`) {\n    # iterates 50 times\n}\n\nforeach (\"foo\\nbar\\nbaz\") {\n    # iterates just 1 time. Why?\n}\n</code></pre>\n\n<p>Is the behavior of passing a string like this defined? Separately, why the disparate results from passing the string returned by a backticked command, and a literal string, as in the example?</p>\n"}, {"tags": ["perl", "exiftool"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10951727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec23c1da9acbb30fd6c4aeab1e80c806?s=128&d=identicon&r=PG&f=1", "display_name": "excelUser365", "link": "https://stackoverflow.com/users/10951727/exceluser365"}, "edited": false, "score": 0, "creation_date": 1549281219, "post_id": 54511300, "comment_id": 95833888, "body": "Thank you! The core issue was indeed that I was missing an XMP."}, {"owner": {"reputation": 3, "user_id": 10951727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec23c1da9acbb30fd6c4aeab1e80c806?s=128&d=identicon&r=PG&f=1", "display_name": "excelUser365", "link": "https://stackoverflow.com/users/10951727/exceluser365"}, "edited": false, "score": 0, "creation_date": 1549281690, "post_id": 54511300, "comment_id": 95834179, "body": "I did have the <code>use</code> lines and hadn&#39;t shown them in my question; added them in the question for clarity for future readers. The procedural call was indeed a sloppy mistake made while trying to identify the problem. Everything is now OO. Works like a charm. Thanks again for your help. Much appreciated."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 0, "last_activity_date": 1549262975, "creation_date": 1549262975, "answer_id": 54511300, "question_id": 54509182, "link": "https://stackoverflow.com/questions/54509182/reading-from-two-files-one-raw-one-xmp-with-exiftool/54511300#54511300", "title": "Reading from two files (one raw, one XMP) with ExifTool", "body": "<p>As your code is incomplete, I have to ask: did you make sure to start your script with the following lines?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>Those two lines are <em>not</em> there to annoy you, they will protect you from simple mistakes you might have made in your code.</p>\n\n<hr>\n\n<p>IMHO the real problem with your <code>sub listKeywords()</code> is the following line:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $exifInfo = ImageInfo($filePathXMP);\n</code></pre>\n\n<p>There are two problems here:</p>\n\n<ol>\n<li>you redefine the variable <code>$exifInfo</code> from a few lines before.</li>\n<li>you are not using the OO approach for the 2nd image info.</li>\n</ol>\n\n<p>I think what you intended to write was the following line:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $exifInfoXMP = $exifToolXMP-&gt;ImageInfo($filePathXMP);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10951727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec23c1da9acbb30fd6c4aeab1e80c806?s=128&d=identicon&r=PG&f=1", "display_name": "excelUser365", "link": "https://stackoverflow.com/users/10951727/exceluser365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 54511300, "answer_count": 1, "score": 0, "last_activity_date": 1549281412, "creation_date": 1549243117, "last_edit_date": 1549281412, "question_id": 54509182, "link": "https://stackoverflow.com/questions/54509182/reading-from-two-files-one-raw-one-xmp-with-exiftool", "title": "Reading from two files (one raw, one XMP) with ExifTool", "body": "<p>I am new to PERL and even newer to ExifTool\u2014and am therefore likely missing something quite basic.</p>\n\n<p>The goal is to read XMP fields from a photo file. Looking at the exiftool documentation on both the ExifTool site and CPAN, I was able to read tagged jpeg and the XMP sidecar files, both without issues. </p>\n\n<p>The problem is when I read from a raw file\u2014which obviously doesn't have custom fields\u2014I would get an error with an uninitialized value. That is to be expected.</p>\n\n<p>So, I want to have code that says \"if you read a field/tag from the raw file and it isn't there, look at the associated XMP file, and if that fails, return a blank string.\"</p>\n\n<p>I therefore tried to open a second instance of ExifTool, such as:</p>\n\n<pre><code>my $exifInfo = ImageInfo($filePath);\n</code></pre>\n\n<p>goes to </p>\n\n<pre><code>my $exifInfoXMP = ImageInfo($filePathXMP);\n</code></pre>\n\n<p>But that keeps failing. If I read the XMP directly from the get-go, it works just fine, so I am getting the impression that I cannot read two ExifTool structures at the same time (which can't be right; I have to be the error here). The code below works, but I cannot \"interleave\" the conditionals on the two files. I have to process the raw first, then run a second pass with a new handler for the XMP. Knowing how efficient PERL is, my approach cannot possibly be a good one (even though it does the job).</p>\n\n<p>In particular, there is one line that puzzles me. If I remove it, nothing works. (it should be well marked).</p>\n\n<pre><code>$filePath =~ s/$photoExtensions$/.XMP/i;\n</code></pre>\n\n<p>That line essential does the same as reading the XMP from the get-go (not my ideal solution).</p>\n\n<p>Anyone have an idea as to where I am messing up?</p>\n\n<p>Thanks,</p>\n\n<p>Paul</p>\n\n<p>header [EDITED TO SHOW ALL OPTIONS; HAD SHOWN ALL USED IN QUESTION]</p>\n\n<pre><code>#!/usr/bin/perl\n\n# load standard packages\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse File::Find;\nno warnings 'File::Find';\nuse Image::ExifTool ':Public';\n\n# define proxy for ExifTool\nmy $exifTool = new Image::ExifTool;\nmy $exifToolXMP = new Image::ExifTool;\n\n# turn on immediate updates\n$|=1;\n\n# common extensions that I want to recognize\nmy $photoExtensions = \"\\.(jpg|crw|cr2|cr3|rw2|orf|raw|nef|arw|dng)\";\nmy $imageExtensions = \"\\.(tiff|tif|psd|png|eps|hdr|exr|svg|gif|afphoto|pdf)\";\nmy $videoExtensions = \"\\.(flv|vob|ogv|avi|mts|m2ts|mov|qt|wmv|mp4|m4p|m4v|svi|3gp|3g2)\";\nmy $audioExtensions = \"\\.(aiff|aac|wav|mp3|m4a|m4p|ogg|wma)\";\nmy $appFileExtensions = \"\\.(on1|cos|cof)\";\nmy $GPSFileExtensions = \"\\.(gpx|kml|kmz|log)\";\n\n# start main program\nmain();\n</code></pre>\n\n<p>routine in question</p>\n\n<pre><code>sub listKeywords { \n    print \"Reads and displays file information from certain tags (typically set in Photomechanic):\\n\";\n    print \"\\t1. Subject\\n\";\n    print \"\\t2. Hierarchical Subject\\n\";\n    print \"\\t3. Supplemental Categories\\n\";\n    print \"\\t4. Label Name 1\\n\";\n    print \"\\t5. Label Name 2\\n\";\n    print \"\\t6. Label Name 3\\n\";\n    print \"\\t7. Label Name 4\\n\\n\";\n\n    print \"List Keywords ---\\n\\tEnter file name (with path) --&gt; \";\n    my $filePath = &lt;STDIN&gt;;\n    chomp $filePath;\n    $filePath =~ s/\\\\//g;\n    $filePath =~ s/\\s+$//;\n\n\n    ########################################################\n\n    # COMMENT OUT THE FOLLOWING LINE AND NOTHING WORKS;\n    # $filePathXMP should be defined anyway, which suggests to \n    # me that the second invocation of ImageInfo doesn't actually occur. \n    # But I don't understand why.\n\n    $filePath =~ s/$photoExtensions$/.XMP/i;\n    print \"\\n\\n\";\n\n    my $filePathXMP = $filePath;\n    $filePathXMP =~ s/$photoExtensions$/.XMP/i;  # TO FIX: filename may not have uppercase extension\n\n    # Get Exif information from image file\n    my $exifInfo = $exifTool-&gt;ImageInfo($filePath);\n    #    my $exifInfoXMP = $exifToolXMP-&gt;ImageInfo($filePath =~ s/$photoExtensions$/.XMP/gi);\n    print \"XMP Sidecar: \\[$filePathXMP\\]\\n\\n\";\n\n    ########################################################\n\n\n    # Get Specific Tag Value\n    my $hierarchicalSubject = $exifTool-&gt;GetValue('HierarchicalSubject');\n    my $subject = $exifTool-&gt;GetValue('Subject');\n    my $supplementalCategories = $exifTool-&gt;GetValue('SupplementalCategories');\n    my $labelName1 = $exifTool-&gt;GetValue('LabelName1');\n    my $labelName2 = $exifTool-&gt;GetValue('LabelName2');\n    my $labelName3 = $exifTool-&gt;GetValue('LabelName3');\n    my $labelName4 = $exifTool-&gt;GetValue('LabelName4');\n\n    my $exifInfo = ImageInfo($filePathXMP);\n    if (not defined $hierarchicalSubject) {$hierarchicalSubject = $exifTool-&gt;GetValue('HierarchicalSubject');}\n    if (not defined $hierarchicalSubject) {$hierarchicalSubject = \"\";}\n    if (not defined $subject) {$subject = $exifTool-&gt;GetValue('Subject');}\n    if (not defined $subject) {$subject = \"\";}\n    if (not defined $supplementalCategories) {$supplementalCategories = $exifTool-&gt;GetValue('SupplementalCategories');}\n    if (not defined $supplementalCategories) {$supplementalCategories = \"\";}\n    if (not defined $labelName1) {$labelName1 = $exifTool-&gt;GetValue('LabelName1');}\n    if (not defined $labelName1) {$labelName1 = \"\";}\n    if (not defined $labelName2) {$labelName2 = $exifTool-&gt;GetValue('LabelName2');}\n    if (not defined $labelName2) {$labelName2 = \"\";}\n    if (not defined $labelName3) {$labelName3 = $exifTool-&gt;GetValue('LabelName3');}\n    if (not defined $labelName3) {$labelName3 = \"\";}\n    if (not defined $labelName4) {$labelName4 = $exifTool-&gt;GetValue('LabelName4');}\n    if (not defined $labelName4) {$labelName4 = \"\";}\n\n    print \"Subject:\\n------------------------------\\n$subject\\n\\n\";\n    print \"Hierarchical Subject:\\n------------------------------\\n$hierarchicalSubject\\n\\n\";\n    print \"Supplemental Categories:\\n------------------------------\\n$supplementalCategories\\n\\n\";\n    print \"Label Name 1:\\n------------------------------\\n$labelName1\\n\\n\";\n    print \"Label Name 2:\\n------------------------------\\n$labelName2\\n\\n\";\n    print \"Label Name 3:\\n------------------------------\\n$labelName3\\n\\n\";\n    print \"Label Name 4:\\n------------------------------\\n$labelName4\\n\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "pragma"], "answers": [{"comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1549229850, "post_id": 54507832, "comment_id": 95819304, "body": "Clearly, I can&#39;t figure out what the logic is in having it disable features explicitly enabled."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 2, "creation_date": 1549229989, "post_id": 54507832, "comment_id": 95819347, "body": "This is actually <a href=\"https://perldoc.pl/feature#IMPLICIT-LOADING\" rel=\"nofollow noreferrer\">documented under the feature pragma as well</a> - it will first disable all features. I suspect this is because the <code>array_base</code> feature is default, but has been removed from all bundles since <code>:5.16</code>."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1549230153, "post_id": 54507832, "comment_id": 95819379, "body": "I don&#39;t see it documented on that link. It mentions enabling features, not disabling enabled features. You&#39;d have to read enabled in such a way that the two were the same."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 1, "creation_date": 1549230207, "post_id": 54507832, "comment_id": 95819395, "body": "@EvanCarroll <code>no feature &#39;:all&#39;;</code> disables all features. That&#39;s what I was referring to."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1549230234, "post_id": 54507832, "comment_id": 95819406, "body": "I guess the <code>array_base</code> piece is interesting. I see features as being a method of <b>adding</b> functionality to perl, that it&#39;s being used to remove functionality was just weird at first but it&#39;s all good."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 1, "creation_date": 1549230435, "post_id": 54507832, "comment_id": 95819453, "body": "Funny enough, <code>array_base</code> will be moot starting with 5.30 because actually making use of that feature will be a <a href=\"https://perldoc.pl/5.29.7/variables/%24%5B\" rel=\"nofollow noreferrer\">fatal error</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 1, "creation_date": 1549234389, "post_id": 54507832, "comment_id": 95820337, "body": "@Evan Carroll, Re &quot;<i>Clearly, I can&#39;t figure out what the logic is in having it disable features explicitly enabled.</i>&quot;, Because <code>use v5.x;</code> doesn&#39;t mean you want the features from 5.x, it means you want the language 5.x. This includes both turning on features that were in 5.x, and turning off features that weren&#39;t. Use <code>use feature &#39;:5.x&#39;;</code> if you just want to turn on features."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 7, "last_activity_date": 1549230294, "last_edit_date": 1549230294, "creation_date": 1549229725, "answer_id": 54507832, "question_id": 54507655, "link": "https://stackoverflow.com/questions/54507655/why-does-the-pragma-order-matter-when-enabling-experimental-features/54507832#54507832", "title": "Why does the pragma order matter when enabling experimental features?", "body": "<p>The <code>use v5.026</code> declaration <a href=\"https://perldoc.pl/functions/use\" rel=\"nofollow noreferrer\">implicitly enables</a> the <a href=\"https://perldoc.pl/feature#FEATURE-BUNDLES\" rel=\"nofollow noreferrer\">feature bundle</a> for that version, in this case it would be equivalent to <code>no feature ':all'; use feature ':5.26'</code>. This overrides the features you had enabled/disabled already.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54507832, "answer_count": 1, "score": 1, "last_activity_date": 1549230294, "creation_date": 1549228524, "question_id": 54507655, "link": "https://stackoverflow.com/questions/54507655/why-does-the-pragma-order-matter-when-enabling-experimental-features", "title": "Why does the pragma order matter when enabling experimental features?", "body": "<p>Is it the defined behavior that the order of <code>features</code> and <code>use version</code> matters?</p>\n\n<pre><code>use feature 'signatures';\nuse v5.026;\n</code></pre>\n\n<p>vs </p>\n\n<pre><code>use v5.026;\nuse feature 'signatures';\n</code></pre>\n\n<p>The top will produce an error, </p>\n\n<blockquote>\n  <p>Global symbol requires explicit package name</p>\n</blockquote>\n\n<p>on </p>\n\n<pre><code>use feature 'signatures';                                                                                        \nuse v5.026;                                                                                                      \n\nsub foo ($opt1, $opt2 = undef) {                                                                                 \n  say $opt1 if $opt2;                                                                                            \n}\n</code></pre>\n"}, {"tags": ["perl", "subroutine", "optional-parameters", "function-signature"], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1549285471, "post_id": 54507625, "comment_id": 95836286, "body": "Cf. <a href=\"https://perldoc.perl.org/perlsub.html#Signatures\" rel=\"nofollow noreferrer\">perlsub</a>. In particular, &quot;A positional parameter is made optional by giving a default value&quot;. (but there are various other useful information regarding signatures)"}], "tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": true, "score": 6, "last_activity_date": 1549228349, "creation_date": 1549228349, "answer_id": 54507625, "question_id": 54507624, "link": "https://stackoverflow.com/questions/54507624/how-do-i-declare-an-optional-parameter-in-a-signature/54507625#54507625", "title": "How do I declare an optional parameter in a signature?", "body": "<p>Optional parameters with subroutine signatures require a defined default which is done with <code>= default_value_expression</code>. You can hard set this to <code>undef</code>:</p>\n\n<pre><code>sub foo ($opt1, $opt2 = undef) {\n  say $opt1 if $opt2;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1549229599, "creation_date": 1549229599, "answer_id": 54507816, "question_id": 54507624, "link": "https://stackoverflow.com/questions/54507624/how-do-i-declare-an-optional-parameter-in-a-signature/54507816#54507816", "title": "How do I declare an optional parameter in a signature?", "body": "<p>You can also allow any number of optional parameters by ending the signature with an array, which will slurp any remaining arguments and also allows no values, like normal array assignment.</p>\n\n<pre><code>sub foo ($opt1, @opts) {\n</code></pre>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54507625, "answer_count": 2, "score": 3, "last_activity_date": 1549229599, "creation_date": 1549228349, "question_id": 54507624, "link": "https://stackoverflow.com/questions/54507624/how-do-i-declare-an-optional-parameter-in-a-signature", "title": "How do I declare an optional parameter in a signature?", "body": "<p>Let's say I have </p>\n\n<pre><code>use v5.026;\nuse feature 'signatures';\n\nsub foo ($opt1, $opt2) {\n  say $opt1 if $opt2;\n}\n\nmain::foo(1,2);\nmain::foo(1);\n</code></pre>\n\n<p>Now I want to call <code>foo</code> with and without opt2:</p>\n\n<pre><code>foo(1);    # not currently accepted\nfoo(1,2);  # works fine\n</code></pre>\n"}, {"tags": ["perl", "ftp", "file-transfer", "lftp"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1549227125, "post_id": 54507344, "comment_id": 95818562, "body": "Why aren&#39;t you using <a href=\"http://p3rl.org/Net::FTP\" rel=\"nofollow noreferrer\">Net::FTP</a>?"}, {"owner": {"reputation": 33, "user_id": 11009753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56ca07bb17f678f8e6abc537b8ca20?s=128&d=identicon&r=PG&f=1", "display_name": "Perl_Devloper", "link": "https://stackoverflow.com/users/11009753/perl-devloper"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1549227344, "post_id": 54507344, "comment_id": 95818629, "body": "Net :FTP is not picking up the proxy settings. It is only working if proxy is not there."}, {"owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "edited": false, "score": 0, "creation_date": 1549235180, "post_id": 54507344, "comment_id": 95820486, "body": "Could be something the &#39;expect&#39; program can handle?"}, {"owner": {"reputation": 1177, "user_id": 3292582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616abc13c1fd4782a1ac9362968bc4db?s=128&d=identicon&r=PG", "display_name": "lav", "link": "https://stackoverflow.com/users/3292582/lav"}, "edited": false, "score": 1, "creation_date": 1549264310, "post_id": 54507344, "comment_id": 95826132, "body": "Try adding &quot;set interactive yes&quot; to the command file."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549304837, "post_id": 54507344, "comment_id": 95846942, "body": "Could the problem be an incorrect command line? I just tried lftp 4.8.4 on my Linux bash and couldn&#39;t get <code>&lt;command_file</code> to work. Only <code>-f command_file</code> works."}, {"owner": {"reputation": 33, "user_id": 11009753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56ca07bb17f678f8e6abc537b8ca20?s=128&d=identicon&r=PG&f=1", "display_name": "Perl_Devloper", "link": "https://stackoverflow.com/users/11009753/perl-devloper"}, "reply_to_user": {"reputation": 1177, "user_id": 3292582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616abc13c1fd4782a1ac9362968bc4db?s=128&d=identicon&r=PG", "display_name": "lav", "link": "https://stackoverflow.com/users/3292582/lav"}, "edited": false, "score": 0, "creation_date": 1549327932, "post_id": 54507344, "comment_id": 95855026, "body": "Hi, my issue has been fixed using @lav solution. Adding &quot;set interactive yes&quot; to command_file published the output. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549306080, "post_id": 54511417, "comment_id": 95847492, "body": "Updated my code example and verified it on my local LInux box."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1549305870, "last_edit_date": 1549305870, "creation_date": 1549263652, "answer_id": 54511417, "question_id": 54507344, "link": "https://stackoverflow.com/questions/54507344/can-we-get-response-in-lftp-file-transfer-through-perl/54511417#54511417", "title": "Can we get response in LFTP file transfer through perl", "body": "<p>Three issues:</p>\n\n<ol>\n<li><code>&lt;command_file</code> doesn't work, <code>-f command_file</code> does,</li>\n<li>some messages go to STDERR, so we need a redirect to catch all, and</li>\n<li>as pointed out by @lav you need to enable interactive mode manually if STDOUT isn't a tty</li>\n</ol>\n\n<p>Updated <a href=\"https://stackoverflow.com/help/mcve\">complete code example</a>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $successful;\n\n# redirect STDERR to STDOUT: some messages go to STDERR!\nif (open(my $ftp_fh, \"lftp -vvv -f dummy.txt 2&gt;&amp;1 |\")) {\n    while(&lt;$ftp_fh&gt;) {\n        print;\n        $successful++ if / transferred$/;\n    }\n\n    close($ftp_fh)\n        or die \"lftp command failed: $!\\n\";\n\n} else {\n    die \"lftp execution failed\\n\";\n}\n\nprint \"File transfer \", ($successful ? \"\" : \"not \"), \"successful!\\n\";\n\nexit 0;\n</code></pre>\n\n<p>Here is my command file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>set interactive yes\nset xfer:clobber yes\nopen ftp://ftp.funet.fi\nuser Anonynmous test@does.not.exist.com\ncd /pub/linux/kernel/v4.x\nget sha256sums.asc\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\ncd ok, cwd=/pub/linux/kernel/v4.x\n288261 bytes transferred\nFile transfer successful!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 15447910, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Aqp6kum4pLs/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnIosRb2laetqX82oX1gMZRdzzm6A/s96-c/photo.jpg?sz=128", "display_name": "Majak", "link": "https://stackoverflow.com/users/15447910/majak"}, "is_accepted": false, "score": 1, "last_activity_date": 1616370102, "creation_date": 1616370102, "answer_id": 66738716, "question_id": 54507344, "link": "https://stackoverflow.com/questions/54507344/can-we-get-response-in-lftp-file-transfer-through-perl/66738716#66738716", "title": "Can we get response in LFTP file transfer through perl", "body": "<p>I had to use &quot;set cmd:verbose yes&quot; in command file to get the desired functionality working.</p>\n"}], "owner": {"reputation": 33, "user_id": 11009753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c56ca07bb17f678f8e6abc537b8ca20?s=128&d=identicon&r=PG&f=1", "display_name": "Perl_Devloper", "link": "https://stackoverflow.com/users/11009753/perl-devloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1616370102, "creation_date": 1549226347, "last_edit_date": 1549293038, "question_id": 54507344, "link": "https://stackoverflow.com/questions/54507344/can-we-get-response-in-lftp-file-transfer-through-perl", "title": "Can we get response in LFTP file transfer through perl", "body": "<p>I am new in LFTP and trying to automate my file delivery through perl code using LFTP. I am able to set the proxy server and connect to remote host and also able to successfully transfer the file to remote host using perl code. But I am not able to get the response from lftp transfer which can let my perl job know that transfer is successfully completed due to this my perl job is failing considering there is some issue with the transfer. I have tried verbose option as well but it is also not displaying any response while transferring the file using lftp.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open(FTP,\"lftp -vvv &lt;command_file |\")\n</code></pre>\n\n<p>command_file has below lines of code :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>set ftp:proxy http://proxy_server:port\nopen ftp://remote_server_name\nuser user_name password\ncd /remote_server_dir\nput /local_server_file_name -o remote_server_file_name\n</code></pre>\n\n<p>Now after calling this code \"FTP\", file is successfully transferred to remote host but to validate it is successful I am using below code :</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while(&lt;FTP&gt;)\n{\n   print $_;\n   if ((/transferred/))\n   {\n      # successful\n   }\n   else\n   {\n      # not successful\n   }\n}\n</code></pre>\n\n<p>LFTP while executing manually gives response like <code>300 bytes transferred</code>. And therefore I am trying to use keyword <code>transferred</code> as a sign of successful transfer. But it seems while running this LFTP through perl I am not getting any response at all.</p>\n\n<p>Please let me know how to get the response from remote server after successful transfer of the file through automated job.\nThanks!</p>\n"}, {"tags": ["python", "regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "is_accepted": false, "score": 3, "last_activity_date": 1549225433, "creation_date": 1549225433, "answer_id": 54507212, "question_id": 54507167, "link": "https://stackoverflow.com/questions/54507167/is-in-perl-equivalent-to-re-match-in-python/54507212#54507212", "title": "Is =~ in Perl equivalent to re.match in Python?", "body": "<p>Certainly not <a href=\"https://docs.python.org/3/library/re.html#re.match\" rel=\"nofollow noreferrer\"><code>re.match()</code></a>. It's a bit of a gotcha, but <code>re.match</code> matches pattern only starting at the beginning of the string.</p>\n\n<blockquote>\n  <p>If zero or more characters at the beginning of string match the regular expression pattern, return a corresponding match object. Return None if the string does not match the pattern; note that this is different from a zero-length match.</p>\n</blockquote>\n\n<p><a href=\"https://docs.python.org/3/library/re.html#re.search\" rel=\"nofollow noreferrer\"><code>re.search()</code></a> is more likely what you are looking for (unless you regex patter happens to always match beginning of the string).</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1549225544, "creation_date": 1549225544, "answer_id": 54507231, "question_id": 54507167, "link": "https://stackoverflow.com/questions/54507167/is-in-perl-equivalent-to-re-match-in-python/54507231#54507231", "title": "Is =~ in Perl equivalent to re.match in Python?", "body": "<p><code>=~</code> is the binding operator. It can bind a match, substitution, or transliteration. I guess only the first one could be equivalent to matching in Python, but it seems you need <code>re.search</code> instead, as matching with <code>//</code> is not anchored at the beginning of the string.</p>\n"}], "owner": {"reputation": 501, "user_id": 9108781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9baf3ed2c7b82534b0af2e4b854eb6ef?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Wang", "link": "https://stackoverflow.com/users/9108781/victor-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 54507231, "answer_count": 2, "score": -1, "last_activity_date": 1549225544, "creation_date": 1549225123, "question_id": 54507167, "link": "https://stackoverflow.com/questions/54507167/is-in-perl-equivalent-to-re-match-in-python", "title": "Is =~ in Perl equivalent to re.match in Python?", "body": "<p>I'm trying to replicate Perl Fathom in Python. This step corrects the syllable count for some word combinations. Is =~ equivalent to re.match in Python? re.match only looks for the first instance. Thank you!  </p>\n\n<pre><code> @SubSyl = (\n           'cial',\n           'tia',\n           'cius',\n           'cious',\n           'giu',              \n           'ion',\n           'iou',\n           'sia$',\n           '.ely$',             \n           '[^td]ed$',          \n          );\n\n foreach (@SubSyl) {\n          $syl-- if $word =~ /$_/;\n        }\n</code></pre>\n"}, {"tags": ["regex", "perl", "unicode"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1549224864, "post_id": 54507064, "comment_id": 95817884, "body": "How is the input encoded?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549227067, "post_id": 54507064, "comment_id": 95818545, "body": "Try <code>perl -CIOED -pe &#39;s&#47;[^&#225;&#233;&#237;&#243;&#250;&#193;&#201;&#205;&#211;&#218;[:ascii:]]&#47;&#47;g;&#39; filename</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549229357, "post_id": 54507064, "comment_id": 95819173, "body": "You need <code>use utf8;</code> or <code>-Mutf8</code> in order to include UTF-8 encoded characters directly in your Perl code (which is probably what your terminal is sending). In addition your input must be decoded and your output must be re-encoded, because files are always in some encoding. The encoding of the file is likely UTF-8 in which case <code>-CSD</code> (equivalent to <code>-CIOED</code> mentioned by @WiktorStribi\u017cew) will do this encoding, but you should know this for sure."}, {"owner": {"reputation": 1005, "user_id": 1294162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c42e2bb9e662a05b0cd9f851b8a44239?s=128&d=identicon&r=PG", "display_name": "wazy", "link": "https://stackoverflow.com/users/1294162/wazy"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549235058, "post_id": 54507064, "comment_id": 95820466, "body": "Thanks for your feedback @WiktorStribi\u017cew and @Grinnz. Using <code>perl -CIOED -pe &#39;s&#47;[^&#225;&#233;&#237;&#243;&#250;&#193;&#201;&#205;&#211;&#218;&#161;&#191;[:ascii:]]&#47;&#47;g;&#39; testing</code> removes all the unicode but the inverted question and exclamation marks yet doesn&#39;t retain the &#225;&#233;&#237;&#243;&#250;&#193;&#201;&#205;&#211;&#218; characters like I&#39;m expecting. I&#39;m trying to retain &#225;&#233;&#237;&#243;&#250;&#193;&#201;&#205;&#211;&#218;&#161;&#191; and remove all other unicode (leaving just ascii) from an utf-8 input file."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1549236628, "post_id": 54507064, "comment_id": 95820759, "body": "Aside: Don&#39;t you want to keep &#241; and &#209;, too?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1549236779, "post_id": 54507064, "comment_id": 95820788, "body": "You forgot &#241; and &#252;, btw (I don&#39;t think Spanish uses umlauts with any other vowels but I&#39;m rusty)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549241122, "post_id": 54507064, "comment_id": 95821503, "body": "Your command does not inlcude <code>-Mutf8</code>. I mentioned that is required."}, {"owner": {"reputation": 1005, "user_id": 1294162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c42e2bb9e662a05b0cd9f851b8a44239?s=128&d=identicon&r=PG", "display_name": "wazy", "link": "https://stackoverflow.com/users/1294162/wazy"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1549243086, "post_id": 54507064, "comment_id": 95821775, "body": "@Shawn and @Tom Blodget I did actually forget &#241; and &#209; :) @Grinnz you are exactly right and my apologies for overlooking that. <code>perl -CIOED -Mutf8 -pe &#39;s&#47;[^&#225;&#233;&#237;&#243;&#250;&#241;&#193;&#201;&#205;&#211;&#218;&#209;&#161;&#191;[:ascii:]]&#47;&#47;g;&#39; filename</code> works perfectly. I would be happy to accept your answer as the solution if you wanted to make your comment an answer."}, {"owner": {"reputation": 1005, "user_id": 1294162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c42e2bb9e662a05b0cd9f851b8a44239?s=128&d=identicon&r=PG", "display_name": "wazy", "link": "https://stackoverflow.com/users/1294162/wazy"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1549243278, "post_id": 54507064, "comment_id": 95821801, "body": "@Shawn you are also right about missing the di&#233;resis: &#252;"}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1550063017, "post_id": 54670771, "comment_id": 96131505, "body": "I notice &#209; and &#241; also, obviously."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1550063205, "post_id": 54670771, "comment_id": 96131626, "body": "@tripleee Well, more can be added or removed, fortunately, that is the least trouble."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1550062638, "creation_date": 1550062638, "answer_id": 54670771, "question_id": 54507064, "link": "https://stackoverflow.com/questions/54507064/how-to-replace-all-unicode-characters-except-for-spanish-ones/54670771#54670771", "title": "How to replace all unicode characters except for Spanish ones?", "body": "<p>You have a UTF8 encoded file and work with Unicode chars, thus, you need to pass specific set of options to let Perl know of that. </p>\n\n<p>You should add <code>-Mutf8</code> to let Perl recognize the UTF8-encoded characters used directly in your Perl code. </p>\n\n<p>Also, you need to pass <code>-CSD</code> (equivalent to <code>-CIOED</code>) in order to have your input decoded and output re-encoded. This value is encoding dependent, it will work for UTF8 encoding.</p>\n\n<pre><code>perl -CSD -Mutf8 -pe 's/[^\u00e1\u00e9\u00ed\u00f3\u00fa\u00f1\u00fc\u00c1\u00c9\u00cd\u00d3\u00da\u00d1\u00dc\u00a1\u00bf[:ascii:]]//g;' filename\n</code></pre>\n\n<p>Do not forget about <code>\u00dc</code> and <code>\u00fc</code>.</p>\n"}], "owner": {"reputation": 1005, "user_id": 1294162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c42e2bb9e662a05b0cd9f851b8a44239?s=128&d=identicon&r=PG", "display_name": "wazy", "link": "https://stackoverflow.com/users/1294162/wazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 54670771, "answer_count": 1, "score": 3, "last_activity_date": 1550062638, "creation_date": 1549224500, "question_id": 54507064, "link": "https://stackoverflow.com/questions/54507064/how-to-replace-all-unicode-characters-except-for-spanish-ones", "title": "How to replace all unicode characters except for Spanish ones?", "body": "<p>I am trying to remove all Unicode characters from a file except for the Spanish characters.</p>\n\n<p>Matching the different vowels has not been any issue and <code>\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da</code> are not replaced using the following regex (but all other Unicode appears to be replaced):</p>\n\n<p><code>perl -pe 's/[^\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da[:ascii:]]//g;' filename</code></p>\n\n<p>But when I add the inverted question mark \u00bf or exclamation mark \u00a1 to the regex other Unicode characters are also being matched and excluded that I would like to be removed:</p>\n\n<p><code>perl -pe 's/[^\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da\u00a1\u00bf[:ascii:]]//g;' filename</code> does not replace the following (some are not printable):\n<code>\u00b3 \ufffd \ufffd</code>\n\u00ad</p>\n\n<p>Am I missing something obvious here? I am also open to other ways of doing this on the terminal.</p>\n"}, {"tags": ["perl", "samtools"], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549270149, "post_id": 54507205, "comment_id": 95828399, "body": "Judging by @stack0114106 answers you might actually be looking for the 10th field. In Perl array start at index <code>0</code>, so you would need to update the code above from <code>10</code> to <code>9</code>."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1549225361, "creation_date": 1549225361, "answer_id": 54507205, "question_id": 54506555, "link": "https://stackoverflow.com/questions/54506555/extract-reads-from-a-bam-sam-file-of-a-designated-length/54507205#54507205", "title": "Extract reads from a BAM/SAM file of a designated length", "body": "<p>Your question is a bit confusing. Is the code snippet supposed to be a Perl script or a shell script that calls a Perl one-liner?</p>\n\n<p>Assuming that you meant to write a Perl script into which you pipe the output of <code>samtools view</code> to:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile (&lt;STDIN&gt;) {\n    my @fields = split(\"\\t\", $_);\n\n    # debugging, just to see what field is extracted...\n    print \"'$fields[10]' \", length($fields[10]), \"\\n\";\n\n    if (length($fields[10]) eq 21) {\n        print $_;\n    }\n}\n\nexit 0;\n</code></pre>\n\n<p>With your test data in <code>dummy.txt</code> I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># this would be \"samtools view ./file.bam | head | perl dummy.pl\" in your case?\n$  cat dummy.txt | perl dummy.pl\n'FF:FFFF,FFFFFFFF:FFFFF' 22\n'FFFFFFF,FFFFFFFFFFFFFFFF' 24\n</code></pre>\n\n<p>Your test data doesn't contain a sample with length 21 though, so the <code>if</code> clause is never executed.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1549263419, "creation_date": 1549263419, "answer_id": 54511379, "question_id": 54506555, "link": "https://stackoverflow.com/questions/54506555/extract-reads-from-a-bam-sam-file-of-a-designated-length/54511379#54511379", "title": "Extract reads from a BAM/SAM file of a designated length", "body": "<p>Note that the 10th field in your sample input is having either 22 or 24 in length. Also, the syntax that you use is wrong. Here is the Perl one-liner to match the field with length=22.</p>\n\n<pre><code>$ cat pkom.txt\nYT:Z:UUA00182:193:HG2NLDMXX:1:1101:29884:1078   0   3R  6234066 42  22M *   0   0   TCACTGGGCTTTGTTTATCTCA  FF:FFFF,FFFFFFFF:FFFFF  AS:i:0  XN:i:0  XM:i:0  XO:i:0  XG:i:0  NM:i:0  MD:Z:22\n\nYT:Z:UUA00182:193:HG2NLDMXX:1:1101:1777:1094    16  4   1313373 1   24M *   0   0   TCGCATTCTTATTGATTTTCCTTT    FFFFFFF,FFFFFFFFFFFFFFFF    AS:i:0  XS:i:0  XN:i:0  XM:i:0  XO:i:0  XG:i:0  NM:i:0  MD:Z:24\n\n$ perl -lane ' print if length($F[9])==22 ' pkom.txt\nYT:Z:UUA00182:193:HG2NLDMXX:1:1101:29884:1078   0   3R  6234066 42  22M *   0   0   TCACTGGGCTTTGTTTATCTCA  FF:FFFF,FFFFFFFF:FFFFF  AS:i:0  XN:i:0  XM:i:0  XO:i:0  XG:i:0  NM:i:0  MD:Z:22\n\n$\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11009501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6d867457bdea101d05ce39907dc1c8a?s=128&d=identicon&r=PG&f=1", "display_name": "pkom", "link": "https://stackoverflow.com/users/11009501/pkom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549263419, "creation_date": 1549221257, "question_id": 54506555, "link": "https://stackoverflow.com/questions/54506555/extract-reads-from-a-bam-sam-file-of-a-designated-length", "title": "Extract reads from a BAM/SAM file of a designated length", "body": "<p>I am a bit of new to Perl and wish to use it in order to extract reads of a specific length from my BAM (alignment) file. </p>\n\n<p>The BAM file contains reads, whose length is from 19 to 29 nt. \nHere is an example of first 2 reads:</p>\n\n<pre><code>YT:Z:UUA00182:193:HG2NLDMXX:1:1101:29884:1078   0   3R  6234066 42  22M *   0   0   TCACTGGGCTTTGTTTATCTCA  FF:FFFF,FFFFFFFF:FFFFF  AS:i:0  XN:i:0  XM:i:0  XO:i:0  XG:i:0  NM:i:0  MD:Z:22   \n\nYT:Z:UUA00182:193:HG2NLDMXX:1:1101:1777:1094    16  4   1313373 1   24M *   0   0   TCGCATTCTTATTGATTTTCCTTT    FFFFFFF,FFFFFFFFFFFFFFFF    AS:i:0  XS:i:0  XN:i:0  XM:i:0  XO:i:0  XG:i:0  NM:i:0  MD:Z:24   \n</code></pre>\n\n<p>I want to extract only those, which are, let's say, 21 nt in length.</p>\n\n<p>I try to do this with the following code:</p>\n\n<pre><code>my $string = &lt;STDIN&gt;;    \n$length = samtools view ./file.bam | head | perl -F'\\t'  -lane'length @F[10]';    \nif ($length == 21){    \n        print($string)    \n}        \n</code></pre>\n\n<p>However, the program does not give any result...\nCould anyone please suggest the right way of doing this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549220695, "post_id": 54506391, "comment_id": 95816616, "body": "For difficult regexes it might be helpful to define sub-regexes, e.g. <code>$three_digits = qr&#47;\\d{3}&#47;;</code> and then combine them to each case you list as another sub-regex and then combine those 8 regexes to the final regex."}], "answers": [{"tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": false, "score": 1, "last_activity_date": 1549220905, "last_edit_date": 1549220905, "creation_date": 1549220595, "answer_id": 54506446, "question_id": 54506391, "link": "https://stackoverflow.com/questions/54506391/perl-comprehensive-phone-number-regex/54506446#54506446", "title": "Perl comprehensive phone number regex", "body": "<p>You haven't escaped parenthesis properly and have uselessly escaped hyphen which isn't needed. The regex you are trying to create is this,</p>\n\n<pre><code>^\\(?\\d{3}\\)?[ .-]\\d{3}[ .-]\\d{4}$\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>^</code> -</li>\n<li><code>\\(?</code> - Optional starting parenthesis <code>(</code></li>\n<li><code>\\d{3}</code> - Followed by three digits</li>\n<li><code>\\)?</code> - Optional closing parenthesis <code>)</code></li>\n<li><code>[ .-]</code> - A single character either a space or <code>.</code> or <code>-</code></li>\n<li><code>\\d{3}</code> - Followed by three digits</li>\n<li><code>[ .-]</code> - Again a single character either a space or <code>.</code> or <code>-</code></li>\n<li><code>\\d{4}</code> - Followed by four digits</li>\n<li><code>$</code> - End of string</li>\n</ul>\n\n<p><strong><a href=\"https://regex101.com/r/BPFJT4/1\" rel=\"nofollow noreferrer\">Demo</a></strong></p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 7844145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f43e2baeed1bd0f222eda44134c5b7?s=128&d=identicon&r=PG&f=1", "display_name": "studentinneed77", "link": "https://stackoverflow.com/users/7844145/studentinneed77"}, "edited": false, "score": 0, "creation_date": 1549224510, "post_id": 54506448, "comment_id": 95817790, "body": "this worked except it matched a phone number with a closing parens but without an opening parens . ex <code>323) 729-9329</code>"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 1, "last_activity_date": 1549220606, "creation_date": 1549220606, "answer_id": 54506448, "question_id": 54506391, "link": "https://stackoverflow.com/questions/54506391/perl-comprehensive-phone-number-regex/54506448#54506448", "title": "Perl comprehensive phone number regex", "body": "<p>Here you go</p>\n\n<pre><code>\\(?\\d{3}\\)?[-. ]\\d{3}[-. ]\\d{4}\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/vQCGyf/1/\" rel=\"nofollow noreferrer\"><strong>a demo on regex101.com</strong></a>.\n<hr>\nBroken down this is</p>\n\n<pre><code>\\(?   # \"(\", optional\n\\d{3} # three digits\n\\)?   # \")\", optional\n[-. ] # one of \"-\", \".\" or \" \"\n\\d{3} # three digits\n[-. ] # same as above\n\\d{4} # four digits\n</code></pre>\n\n<p>If you want, you can add word boundaries on the right site (<code>\\b</code>), some potential matches may be filtered out then.</p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549221028, "post_id": 54506453, "comment_id": 95816722, "body": "Also, when the first delimiter is . or -, needs to restrict the second delimiter to that"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1549221458, "post_id": 54506453, "comment_id": 95816849, "body": "@ysth I fixed the first by using an alternation instead, and added an option for checking the second (while it&#39;s possible to do in one regex, it would be unnecessarily complex)"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1549221493, "last_edit_date": 1549221493, "creation_date": 1549220651, "answer_id": 54506453, "question_id": 54506391, "link": "https://stackoverflow.com/questions/54506391/perl-comprehensive-phone-number-regex/54506453#54506453", "title": "Perl comprehensive phone number regex", "body": "<p>Your current regex allows too much, as it will allow <code>xxx-(xxx)</code> at the beginning. It also doesn't handle any of the <code>.</code> or space separated cases. You want to have only three sets of digits, and then allow optional parentheses around the first set which you can use an <a href=\"https://perldoc.pl/perlretut#Matching-this-or-that\" rel=\"nofollow noreferrer\">alternation</a> for, and then you can make use of <a href=\"https://perldoc.pl/perlretut#Using-character-classes\" rel=\"nofollow noreferrer\">character classes</a> to indicate the set of separators you want to allow.</p>\n\n<p>Additionally, don't use <code>\\d</code> as it will match any unicode digit. Since you likely only want to allow ASCII digits, use the character class <code>[0-9]</code> (there are other options, but this is the simplest).</p>\n\n<p>Finally, <code>$</code> allows a newline at the end of the string, so use <code>\\z</code> instead which does not. Make sure if you are reading these from a file that you <a href=\"https://perldoc.pl/functions/chomp\" rel=\"nofollow noreferrer\">chomp</a> them so they do not contain trailing newlines.</p>\n\n<p>This leaves us with:</p>\n\n<pre><code>qr/^(?:[0-9]{3}|\\([0-9]{3}\\))[-. ][0-9]{3}[-.][0-9]{4}\\z/\n</code></pre>\n\n<p>If you want to ensure that the two separators are the same if the first is a <code>.</code> or <code>-</code>, it is easiest to do this in multiple regex checks (these can be more lenient since we already validated the general format):</p>\n\n<pre><code>if ($str =~ m/^[0-9()]+ /\n    or $str =~ m/^[0-9()]+\\.[0-9]{3}\\./\n    or $str =~ m/^[0-9()]+-[0-9]{3}-/) {\n    # allowed\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7844145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f43e2baeed1bd0f222eda44134c5b7?s=128&d=identicon&r=PG&f=1", "display_name": "studentinneed77", "link": "https://stackoverflow.com/users/7844145/studentinneed77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 1, "closed_date": 1549221067, "answer_count": 3, "score": -1, "last_activity_date": 1549221493, "creation_date": 1549220277, "question_id": 54506391, "link": "https://stackoverflow.com/questions/54506391/perl-comprehensive-phone-number-regex", "closed_reason": "Duplicate", "title": "Perl comprehensive phone number regex", "body": "<p>I have a file that contains phone numbers of the following formats: </p>\n\n<pre><code>(xxx) xxx.xxxx\n(xxx).xxx.xxxx\n(xxx) xxx-xxxx\n(xxx)-xxx-xxxx\nxxx.xxx.xxxx\nxxx-xxx-xxxx\nxxx xxx-xxxx\nxxx xxx.xxxx\n</code></pre>\n\n<p>I must parse the file for phone numbers of those and ONLY those formats, and output them to a separate file. I'm using perl, and so far I have what I think is a valid regex for two of these numbers </p>\n\n<pre><code>my $phone_regex = qr/^(\\d{3}\\-)?(\\(\\d{3}\\))?\\d{3}\\-\\d{4}$/;\n</code></pre>\n\n<p>But I'm not sure if this is correct, or how to do the rest all in one regex. Thank you!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549217127, "post_id": 54505861, "comment_id": 95815439, "body": "Is the <code>use Socket;</code> line necessary to reproduce the problem?"}, {"owner": {"reputation": 3517, "user_id": 8069748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9ZD9.png?s=128&g=1", "display_name": "Navid Zarepak", "link": "https://stackoverflow.com/users/8069748/navid-zarepak"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549217418, "post_id": 54505861, "comment_id": 95815533, "body": "@Corion Yes, I have the problem while using a module."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1549217601, "post_id": 54505861, "comment_id": 95815585, "body": "Please <a href=\"https://stackoverflow.com/posts/54505861/edit\">edit</a> your post and mention that the problem (only?) happens when you use a module. Also, is <code>Socket.pm</code> the only module that is problematic or does the same problem happen when adding <code>use strict;</code>? Also, do you really get an error in <code>line 26</code> as the pasted error message says? If not, please show us the real code you are running."}, {"owner": {"reputation": 3517, "user_id": 8069748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9ZD9.png?s=128&g=1", "display_name": "Navid Zarepak", "link": "https://stackoverflow.com/users/8069748/navid-zarepak"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549218052, "post_id": 54505861, "comment_id": 95815737, "body": "@Corion Updated the post."}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 5, "last_activity_date": 1549232210, "creation_date": 1549232210, "answer_id": 54508138, "question_id": 54505861, "link": "https://stackoverflow.com/questions/54505861/perlcc-compile-error-on-perl-5-28-while-compiling-to-binary/54508138#54508138", "title": "perlcc compile error on perl 5.28 while compiling to binary", "body": "<p>The <code>perlcc</code> tool is a fairly niche utility that is no longer part of core Perl. For a third party tool that is tightly coupled with perl internals, you are likely to see some amount of breakage when using a recent perl version.</p>\n\n<p>Looking into the perlcc <a href=\"https://metacpan.org/changes/release/RURBAN/B-C-1.55_10\" rel=\"noreferrer\">Changes</a> document helps here:</p>\n\n<ul>\n<li>version 1.55 (the latest stable release) only added support for perl 5.24</li>\n<li>the development version 1.55_08 mentions perl 5.27.3, a development version of perl 5.28</li>\n<li>the <a href=\"https://github.com/rurban/perl-compiler\" rel=\"noreferrer\">perl-compiler</a> GitHub project mentions tests on 5.28</li>\n</ul>\n\n<p>Therefore:</p>\n\n<ul>\n<li>consider installing a development version of perlcc,</li>\n<li>or even installing directly from GitHub.</li>\n<li>Or consider using an older Perl version.</li>\n<li>Or consider using cperl, a perl fork by perlcc maintainer Reini Urban. (Of course, using a fork is likely to break other things\u2026)</li>\n</ul>\n"}], "owner": {"reputation": 3517, "user_id": 8069748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9ZD9.png?s=128&g=1", "display_name": "Navid Zarepak", "link": "https://stackoverflow.com/users/8069748/navid-zarepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 54508138, "answer_count": 1, "score": 3, "last_activity_date": 1549232210, "creation_date": 1549217032, "last_edit_date": 1549218016, "question_id": 54505861, "link": "https://stackoverflow.com/questions/54505861/perlcc-compile-error-on-perl-5-28-while-compiling-to-binary", "title": "perlcc compile error on perl 5.28 while compiling to binary", "body": "<p>I compiled perl 5.28 from Source in custom path <code>(/usr/local/perl528)</code> with this options:</p>\n\n<pre><code>config_args='-des -Dprefix=/usr/local/perl528'\n</code></pre>\n\n<p>Then compiled B:CC in perl528 and created a <code>hello.pl</code> with the following code:</p>\n\n<pre><code>#!/usr/local/perl528/bin/perl\n\nuse Socket;\n\nprint \"Hello world\";\n</code></pre>\n\n<p>next step:</p>\n\n<p><code>/usr/local/perl528/perlcc -o hello hello.pl</code></p>\n\n<p>after execution of the ./hello, i get the following code:</p>\n\n<pre><code>panic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\npanic: corrupt saved stack index -1414812757 at (eval 12) line 26.\n</code></pre>\n\n<p>Trace for ./hello:</p>\n\n<pre><code>27738 stat(\"/usr/local/perl528/lib/5.28.1/x86_64-linux/Socket.pm/auto//.so\", 0x9ce0a0) = -1 ENOTDIR (Not a directory)\n</code></pre>\n\n<p>Why I get this error?</p>\n\n<p><strong>Updates:</strong> </p>\n\n<ul>\n<li><p>Problem only happen when using a module.</p></li>\n<li><p><code>use strict;</code> is fine and causes no error but others will.</p></li>\n<li><p>And the code and errors are the real ones. (Yes getting error on line\n26 while i have only 6 lines of code.</p></li>\n</ul>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "dependencies", "dependency-management", "cpan", "metacpan"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549217537, "post_id": 54504058, "comment_id": 95815565, "body": "Create a chat, and tag me in. I might have an idea for your real question. I just can&#39;t get into it right now."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1549217776, "last_edit_date": 1549217776, "creation_date": 1549216453, "answer_id": 54505769, "question_id": 54504058, "link": "https://stackoverflow.com/questions/54504058/how-does-the-key-file-of-the-structure-provides-work-with-meta-for-cpan/54505769#54505769", "title": "How does the key &quot;file&quot; of the structure &quot;provides&quot; work with &quot;META.*&quot; for &quot;CPAN::Meta::Spec&quot;?", "body": "<p>The <code>provides</code> metadata is a list of the packages provided by the distribution primarily for use by the PAUSE indexer, but also may be used by analysis tools. If it is present, PAUSE will not inspect your files for packages and their versions but will trust <code>provides</code>. For each package in the distribution it must list the file in which the package resides, and the version of the package if it has one. Since this is an \"override\", it is not required to match reality, but unless you're doing something very strange it should. The ability to set the file to <code>META.yml</code> or <code>META.json</code> is simply a fallback if you have a package which has no associated file; it is extremely uncommon that you will need to do this, and it places no additional requirement on the <code>META.json</code> or <code>META.yml</code> except they should exist. As always, in implementation this metadata is always set in <code>META.json</code> and <code>META.yml</code> included in the distribution.</p>\n"}], "owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549217776, "creation_date": 1549205546, "last_edit_date": 1549215670, "question_id": 54504058, "link": "https://stackoverflow.com/questions/54504058/how-does-the-key-file-of-the-structure-provides-work-with-meta-for-cpan", "title": "How does the key &quot;file&quot; of the structure &quot;provides&quot; work with &quot;META.*&quot; for &quot;CPAN::Meta::Spec&quot;?", "body": "<p>I'm trying to <a href=\"https://stackoverflow.com/questions/54484092/how-to-make-prereqs-of-cpanmetaspec-require-a-distribution-instead-of-a-pa\">better understand</a> what <a href=\"https://stackoverflow.com/questions/54492053/how-to-manage-dependencies-in-perl-above-package-level-and-without-focussing-on\">I could use</a> <code>CPAN::Meta::Spec</code> for and came across the following sentence in the <a href=\"https://metacpan.org/pod/CPAN::Meta::Spec#file1\" rel=\"nofollow noreferrer\">spec</a> for the key <code>file</code>:</p>\n\n<blockquote>\n  <p>[...]to a file that contains or generates the package. It may be given as META.yml or META.json to claim a package for indexing without needing a *.pm.</p>\n</blockquote>\n\n<p>This sentence reads to me like one was able to directly specify some <code>META.*</code> within the config using a path to a file instead of a <code>*.pm</code>. Hence using the wording <code>it</code>, that clearly associates to the formerly mentioned path. Pretty much like in the following example:</p>\n\n<pre><code>provides =&gt; {\n  'Foo::Bar' =&gt; {\n    file    =&gt; 'lib/Foo/Bar.pm',\n    version =&gt; '0.27_02'\n  },\n  'Foo::Bar2' =&gt; {\n    file    =&gt; 'lib/Foo/Bar2.yml', &lt;-- META.yml?\n  },\n  'Foo::Bar3' =&gt; {\n    file    =&gt; 'lib/Foo/Bar3.json', &lt;-- META.json?\n    version =&gt; '0.3'\n  }\n</code></pre>\n\n<p>So, while <code>Foo/Bar2.pm</code> and <code>Foo/Bar3.pm</code> might exist in the distribution, they are not defined explicitly, but implicitly using the <code>META.*</code> files.</p>\n\n<ol>\n<li><p>How does such a <code>META.*</code> look like, what does it contain? Only things like <code>name</code> and <code>version</code>, which is what a native Perl package might provide as well? Or additional things like <code>license</code> and <code>keyword</code>, maybe everything except dependencies?</p></li>\n<li><p>How do CPAN-clients handle such cases? <code>META.*</code> obviously isn't the Perl package itself and I don't see how it's used to generate it. So what gets actually installed in a system in the end? Is there some additional mechanism generating the package somehow?</p></li>\n<li><p>How is providing <code>META.*</code> instead of <code>*.pm</code> compatible with the key <code>version</code> and the following restriction:</p></li>\n</ol>\n\n<blockquote>\n  <p>[...]If the package does not have a $VERSION, this field must be omitted.</p>\n</blockquote>\n\n<p>Does <code>META.*</code> count as a package containing <code>$VERSION</code> in this case? Or is it expected that somehow the package gets generated in the end and that simply must have <code>$VERSION</code> as well and as long as the package isn't generated, the version of <code>META.*</code> can simply be used?</p>\n\n<p>Thanks for your clarification!</p>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1549194597, "post_id": 54502516, "comment_id": 95809137, "body": "What version of Perl do you have? Backreferences were introduced in I think Perl 5.14. You can find the Perl version using the command <code>perl -V</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549195087, "post_id": 54502516, "comment_id": 95809232, "body": "Use <code>&quot;s&#47;(?&lt;Naa&gt;aa)&#47;$+{Naa}&#47;;&quot;</code>"}, {"owner": {"reputation": 41, "user_id": 2299468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c0eda3c38158c670cfb9baa690e245?s=128&d=identicon&r=PG", "display_name": "mr.tee", "link": "https://stackoverflow.com/users/2299468/mr-tee"}, "edited": false, "score": 0, "creation_date": 1549195547, "post_id": 54502516, "comment_id": 95809320, "body": "Working! BUT why the &quot;+&quot; ?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1549196338, "post_id": 54502516, "comment_id": 95809501, "body": "You may read about it at <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlre.html</a>, see <i>Capture Groups</i> section. <i>Capture group contents are dynamically scoped and available to you outside the pattern until the end of the enclosing block or until the next successful match, whichever comes first. (See Compound Statements in perlsyn.) You can refer to them by absolute number (using &quot;$1&quot; instead of &quot;\\g1&quot; , etc); or by name via the %+ hash, using &quot;$+{name}&quot;.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": false, "score": 2, "last_activity_date": 1549195222, "creation_date": 1549195222, "answer_id": 54502619, "question_id": 54502516, "link": "https://stackoverflow.com/questions/54502516/perl-shell-script-escaped-replace-pattern-not-working/54502619#54502619", "title": "perl shell script escaped replace pattern not working", "body": "<p>You can only use <code>\\g{name}</code> (or <code>\\k&lt;name&gt;</code>) on the <em>matching</em> side of the regular expression. You can use <code>$+{name}</code> on the replacement side:</p>\n\n<pre><code>echo \"aabbaaccdd\" | perl -w -pe \"s/(?&lt;Naa&gt;aa)(?=bb\\g{Naa}).*/$+{Naa}/;\"\n</code></pre>\n\n<p>prints out</p>\n\n<pre><code>aa\n</code></pre>\n\n<p>This is because named captures are placed in the hash table <code>%+</code>.</p>\n\n<p>EDIT: Wiktor Stribi\u017cew beat me to it while I was writing this, in the comments to the question.</p>\n"}], "owner": {"reputation": 41, "user_id": 2299468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c0eda3c38158c670cfb9baa690e245?s=128&d=identicon&r=PG", "display_name": "mr.tee", "link": "https://stackoverflow.com/users/2299468/mr-tee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1549196363, "creation_date": 1549194381, "last_edit_date": 1549196363, "question_id": 54502516, "link": "https://stackoverflow.com/questions/54502516/perl-shell-script-escaped-replace-pattern-not-working", "title": "perl shell script escaped replace pattern not working", "body": "<p>I have this NOT working issue.</p>\n\n<pre><code>echo \"aabbccdd\" | perl -w -pe \"s/(?&lt;Naa&gt;aa)/\\g{Naa}-$1/;\"\n</code></pre>\n\n<p>it outputs </p>\n\n<p><strong>Unrecognized escape \\g passed through at -e line 1.</strong></p>\n\n<p>my perl version is \"subversion 4 (v5.18.4)\"</p>\n\n<p>my bash version is \"version 4.2.53(1)-release (x86_64-redhat-linux-gnu)\"</p>\n\n<p>my OS distro is \"Fedora release 20 (Heisenbug)\"</p>\n\n<p>my locale is \"C\"</p>\n\n<p>how to solve ?</p>\n\n<p><strong>update:</strong></p>\n\n<p>how to display same labeled group by number 1 ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549187046, "post_id": 54501635, "comment_id": 95807486, "body": "Your question should go into the question, your answer into an answer to that question, that you then accept."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 2, "creation_date": 1549189050, "post_id": 54501635, "comment_id": 95807902, "body": "I see no question here."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1549203413, "post_id": 54501635, "comment_id": 95811416, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549221855, "post_id": 54501635, "comment_id": 95816979, "body": "@StefanBecker Intial post divided into question-/answer-section according to your recommendation."}, {"owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1549221873, "post_id": 54501635, "comment_id": 95816989, "body": "@DaveCross Consider this post rather as a question answered by myself than a question to the community as stated here:   <a href=\"https://stackoverflow.blog/2011/07/01/its-ok-to-ask-and-answer-your-own-questions\">stackoverflow.blog/2011/07/01/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1549221106, "post_id": 54502019, "comment_id": 95816743, "body": "In X on linux, you my have <code>xclip</code>. Or wiith perl/Tk, do something like: <code>use Tk; print MainWindow-&gt;new-&gt;SelectionGet(-selection=&gt;&#39;CLIPBOARD&#39;);</code> or <code>use Tk; print MainWindow-&gt;new-&gt;SelectionGet;</code>"}], "tags": [], "owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "is_accepted": true, "score": 0, "last_activity_date": 1549192956, "last_edit_date": 1549192956, "creation_date": 1549190511, "answer_id": 54502019, "question_id": 54501635, "link": "https://stackoverflow.com/questions/54501635/perl-one-liner-recipe-convert-lists-into-comma-separated-strings-in-single-quo/54502019#54502019", "title": "Perl one-liner recipe: Convert lists into &#39;comma-separated strings in single quotes&#39; OR &#39;multiple lines&#39; on the fly", "body": "<p>Both can be done quickly and easily using a short perl one-liner.</p>\n\n<h2>A1: Build one string (i. e. one single line) with comma-separated strings in single quotes</h2>\n\n<p><strong>First create a list to be used in the following (SQL) examples:</strong></p>\n\n<pre><code>cat &gt; list.txt &lt;&lt;EOF\nA\nB\nC\nD\nEOF\n</code></pre>\n\n<p>Or in Perl style:</p>\n\n<pre><code>perl -le 'print foreach (A..D)' &gt; list.txt\n</code></pre>\n\n<p><strong>Create the comma separated list with single quoted strings:</strong></p>\n\n<p>In order to avoid struggling with bash's interpreation of single quotes use the two-digit hex ASCII value <strong>\\x27</strong> for the single quote &lt; <strong>'</strong> >.</p>\n\n<pre><code>perl -e 'print join \",\", map { chomp; qq(\\x27$_\\x27) } &lt;&gt;' list.txt     # 'A','B','C','D'\n</code></pre>\n\n<p>Same principle, just using the octal ASCII value <strong>\\047</strong>:</p>\n\n<pre><code> perl -e 'print join \",\", map { chomp; qq(\\047$_\\047) } &lt;&gt;' list.txt    # 'A','B','C','D'\n</code></pre>\n\n<p>For other purposes (non SQL) where double quotes are needed:</p>\n\n<pre><code> perl -e 'print join \",\", map { chomp; qq(\"$_\") } &lt;&gt;' list.txt          # \"A\",\"B\",\"C\",\"D\"\n</code></pre>\n\n<p>In case <code>#</code>, <code>;</code> or <code>:</code> is needed as separator, just replace the <code>,</code> within the double-quotes of  <code>join \",\",</code> into what is required.</p>\n\n<p>For example:<br>\n<code>join \"#\",</code><br>\n<code>join \";\",</code><br>\n<code>join \":\",</code> </p>\n\n<p>As in most cases lists are taken by cut &amp; paste from somewhere else. So, the usage of <code>pbpaste</code> on <em>Mac OS X | macos</em> can substantially shorten the workflow. btw: Any hint for an equivalent Linux command would be highly appreciated. To test the following example first fill the clipboard with the above created list: <code>cat list.txt | pbcopy</code> </p>\n\n<pre><code> pbpaste | perl -e 'print join \",\", map { chomp; qq(\\x27$_\\x27) } &lt;&gt;'\n</code></pre>\n\n<p>Even shorter; replace the clipboard's content with the transformed list on the fly using <code>pbcopy</code>:</p>\n\n<pre><code> pbpaste | perl -e 'print join \",\", map { chomp; qq(\\x27$_\\x27) } &lt;&gt;' | pbcopy\n</code></pre>\n\n<p>In order to having it at hand when needed (e. g. by pressing <strong>ctrl + x + c</strong> ~ <em>c to convert</em>), just write this line to $HOME/.inputrc</p>\n\n<pre><code>\"\\C-xc\": \"pbpaste | perl -e 'print join \",\", map { chomp; qq(\\x27$_\\x27) } &lt;&gt;' | pbcopy\"\n</code></pre>\n\n<p>Activate the key-binding (see <a href=\"https://www.gnu.org/software/bash/manual/html_node/Sample-Init-File.html#Sample-Init-File\" rel=\"nofollow noreferrer\">readline</a> or the many questions tagged <a href=\"/questions/tagged/readline\" class=\"post-tag\" title=\"show questions tagged &#39;readline&#39;\" rel=\"tag\">readline</a> to learn more):</p>\n\n<pre><code> bind -f $HOME/.inputrc     # read/activate settings\n bind -s                    # show key-bindings\n</code></pre>\n\n<p>Now just hit <strong>ctrl + x + c</strong> for a fully automated conversion of your SQL INSERT Values.</p>\n\n<p><strong>For the sake of completeness some annotations about SQL-quoting</strong></p>\n\n<p><a href=\"https://stackoverflow.com/a/11321508/7203861\">Excerpt taken from this very good clarification about quotes and backticks</a>: <em>Single quotes should be used for string values like in the VALUES() list</em>. Double quotes are supported by MySQL for string values as well, but single quotes are more widely accepted by other RDBMS, so it is a good habit to use single quotes instead of double quotes.</p>\n\n<h2>A2: Create a command list (i. e. many lines) from a list (e. g. process numbers)</h2>\n\n<p>This approach builds - in contrast to A1 - multiple lines (a repetition of commands with process ids).</p>\n\n<p>Again: <strong>First create a list to be used for the following (Cisco) example:</strong></p>\n\n<pre><code>perl -le 'print foreach (1000..1010)' | pbcopy\n</code></pre>\n\n<p>In reality copy the real process ids to the clipboard; after that transform the plain list of numbers into the appropriate command list:</p>\n\n<pre><code>pbpaste | perl -wle 'while (&lt;&gt;) {chomp; print \"clear crypto isakmp $_\"}'\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>clear crypto isakmp 1000\nclear crypto isakmp 1001\nclear crypto isakmp 1002\nclear crypto isakmp 1003\nclear crypto isakmp 1004\nclear crypto isakmp 1005\nclear crypto isakmp 1006\nclear crypto isakmp 1007\nclear crypto isakmp 1008\nclear crypto isakmp 1009\nclear crypto isakmp 1010\n</code></pre>\n\n<p>To have it also at hand when needed (e. g. by pressing <strong>ctrl + x + p</strong> ~ <em>p for process list</em>), just write this line to $HOME/.inputrc</p>\n\n<pre><code>\"\\C-xc\": \"pbpaste | perl -wle 'while (&lt;&gt;) {chomp; print \"clear crypto isakmp $_\"}' | pbcopy\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "is_accepted": false, "score": 0, "last_activity_date": 1549211347, "creation_date": 1549211347, "answer_id": 54505019, "question_id": 54501635, "link": "https://stackoverflow.com/questions/54501635/perl-one-liner-recipe-convert-lists-into-comma-separated-strings-in-single-quo/54505019#54505019", "title": "Perl one-liner recipe: Convert lists into &#39;comma-separated strings in single quotes&#39; OR &#39;multiple lines&#39; on the fly", "body": "<p>The question states that we are not using cut&amp;paste, etc, so I assume we are taking the list items and processing them inside the Perl script.</p>\n\n<p>Q1 posits a very dangerous way to insert into SQL. If the individual list items happen to contain characters that Perl doesn't consider special but SQL does, then you have opened up your database to an <a href=\"https://en.wikipedia.org/wiki/SQL_injection\" rel=\"nofollow noreferrer\">injection attack</a>.</p>\n\n<p>Rather than combine the list in Perl, you should create a <a href=\"https://en.wikipedia.org/wiki/Prepared_statement\" rel=\"nofollow noreferrer\">prepared statement</a> for your DBI layer and then pass the list items directly as arguments.</p>\n\n<p>While it is possible to correctly sanitise elements of a list to avoid misinterpretation when treated as SQL, using the prepared statement approach is much less likely to result in a security hole.</p>\n\n<p>The same is true of Q2. While process id numbers can be easily checked, in the general case, it is better to pass arguments directly, for example using Perl's multi-argument form of exec() or system().</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1549264051, "creation_date": 1549264051, "answer_id": 54511493, "question_id": 54501635, "link": "https://stackoverflow.com/questions/54501635/perl-one-liner-recipe-convert-lists-into-comma-separated-strings-in-single-quo/54511493#54511493", "title": "Perl one-liner recipe: Convert lists into &#39;comma-separated strings in single quotes&#39; OR &#39;multiple lines&#39; on the fly", "body": "<p>Q1) There are 2 ways.</p>\n\n<pre><code>$ echo \"A B C\" | perl -lpe ' s/(\\S+)/\\x27$1\\x27/g ; s/\\s+/,/g '\n'A','B','C'\n\n$ echo \"A B C\" | perl -ne ' @x=split(/\\s+/); $_=\"\\x27$_\\x27\" for(@x); print join(\",\",@x) '\n'A','B','C'\n</code></pre>\n\n<p>Q2) </p>\n\n<pre><code>$ echo \"23828 11281 22873 3765 1234\" | perl -lane ' print \"clear crypto isakmp $_\" for(@F) '\nclear crypto isakmp 23828\nclear crypto isakmp 11281\nclear crypto isakmp 22873\nclear crypto isakmp 3765\nclear crypto isakmp 1234\n\n$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "edited": false, "score": 0, "creation_date": 1549284596, "post_id": 54512603, "comment_id": 95835844, "body": "The solution above is a kind of common practice inserting values to databases. But the topic is to have a generic approach converting lists with perl one-liners."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "edited": false, "score": 0, "creation_date": 1549285709, "post_id": 54512603, "comment_id": 95836439, "body": "@HRitter: Sure, but I didn&#39;t want people to see what you wrote about it being used for database insertions without posting information about why that&#39;s a bad idea."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1549269748, "creation_date": 1549269748, "answer_id": 54512603, "question_id": 54501635, "link": "https://stackoverflow.com/questions/54501635/perl-one-liner-recipe-convert-lists-into-comma-separated-strings-in-single-quo/54512603#54512603", "title": "Perl one-liner recipe: Convert lists into &#39;comma-separated strings in single quotes&#39; OR &#39;multiple lines&#39; on the fly", "body": "<p>You say that your first requirement is \"Mostly needed to INSERT values in databases\". The solution you have come up with is open to <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">SQL injection attacks</a> and should be avoided.</p>\n\n<p>To avoid this problem, you should always use bind points when inserting external data into a database. Something like this:</p>\n\n<pre><code>open my $fh, '&lt;', 'somefile.txt' or die $!;\n\nchomp(my @data = &lt;$fh&gt;);\n\nmy $sql = 'INSERT INTO some_table VALUES (';\n$sql .= join ',', ('?') x @data;\n$sql .= ')';\n\n# Assume you already have a $dbh\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute(@data);\n</code></pre>\n\n<p>(Of course, it's always good practice to explicitly list the names of the columns that you're inserting data into - I've omitted that here for simplicity.)</p>\n"}], "owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 54502019, "answer_count": 4, "score": -1, "last_activity_date": 1549284392, "creation_date": 1549186892, "last_edit_date": 1549284392, "question_id": 54501635, "link": "https://stackoverflow.com/questions/54501635/perl-one-liner-recipe-convert-lists-into-comma-separated-strings-in-single-quo", "title": "Perl one-liner recipe: Convert lists into &#39;comma-separated strings in single quotes&#39; OR &#39;multiple lines&#39; on the fly", "body": "<h1>Q: How to convert lists in a swift and convenient way on the fly for further processing?</h1>\n\n<p>The focus is on a general approach to achive a fully fluent workflow (without the hassle of handling files, pipes, cut &amp; past and so on) for further processing.</p>\n\n<h3>Q1) Convert lists into comma-separated strings in single quotes</h3>\n\n<p>Mostly needed to <strong>INSERT values in databases</strong> like MySQL, MariaDB, Oracle and so on.</p>\n\n<p>Convert <code>A B C</code> into  <code>'A','B','C'</code>  </p>\n\n<h3>Q2: How to convert list of ids into a list of commands using the ids</h3>\n\n<p>Mostly needed to repeat a single command with, lets say, multiple process numbers in order to <strong>terminate numerous isakmp sessions (VPN) on a Cisco router</strong> due to a lack of shell-capabilities (like for-loops or xargs) on the IOS command line (despite the fact it could be achived using the <a href=\"https://www.packetlevel.ch/html/cisco/ciscotcl.html\" rel=\"nofollow noreferrer\">Cisco IOS tclsh</a>).</p>\n\n<p>Convert <code>23828 11281 22873 3765 1234</code> into</p>\n\n<pre><code>clear crypto isakmp 23828\nclear crypto isakmp 22873\nclear crypto isakmp 11281\nclear crypto isakmp 22873\nclear crypto isakmp  3765\nclear crypto isakmp  1234\n</code></pre>\n\n<h2>Addtion to the main focus about this question</h2>\n\n<p>I am fully aware about the risk of SQL injection attacks. But security is not the point here, as I know what kind of data my lists carry. The main focus is to have a more <strong>generic approach to convert lists on the fly, while being as much flexible as possible</strong>. Certainly, some tasks can be better achieved using the appropriate tool like sed, awk, tr, cut or whatever tool buzz around. Unfortunately, everytime choosing the <em>best</em> tool for a <em>specific task</em> you have to fiddle around with the syntax, switches and aside how the tool work. This is exactly the hassle I want to avoid having a more generic approach at hand. </p>\n\n<p>Hence, bear the topic in mind: Calling a <strong>Perl one-liner</strong> just by pressing a keystroke which can be easily adjusted/edited in the shell before executing it. My approach - see the answer by myself and <a href=\"https://stackoverflow.blog/2011/07/01/its-ok-to-ask-and-answer-your-own-questions/\">this</a> as a side node - fulfills exactly this requirement.\nSo, it could be a good idea to read my answer before just posting a <em>solution</em> or <em>suggestion</em> to question. ;-)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549132855, "post_id": 54495068, "comment_id": 95797828, "body": "Basic regex stuff. Please read <a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>."}, {"owner": {"reputation": 41, "user_id": 6283788, "user_type": "registered", "profile_image": "https://graph.facebook.com/789795011164491/picture?type=large", "display_name": "Tri Ngo", "link": "https://stackoverflow.com/users/6283788/tri-ngo"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549163182, "post_id": 54495068, "comment_id": 95804033, "body": "thank you so much. it is very useful for a fresher like me (y)"}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1549141545, "post_id": 54496239, "comment_id": 95800240, "body": "If <code>.model</code> is always at the beginning of a string, best to use <code>^\\.model</code>."}, {"owner": {"reputation": 41, "user_id": 6283788, "user_type": "registered", "profile_image": "https://graph.facebook.com/789795011164491/picture?type=large", "display_name": "Tri Ngo", "link": "https://stackoverflow.com/users/6283788/tri-ngo"}, "edited": false, "score": 0, "creation_date": 1549162708, "post_id": 54496239, "comment_id": 95803975, "body": "thank you so much, it is so useful with a fresher like me. (y)"}], "tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": false, "score": 5, "last_activity_date": 1549132566, "creation_date": 1549132566, "answer_id": 54496239, "question_id": 54495068, "link": "https://stackoverflow.com/questions/54495068/how-to-catch-model-in-perl/54496239#54496239", "title": "How to catch &quot;.model&quot; in perl", "body": "<p>Make the thing you're matching against a regular expression rather than a double-quoted string:</p>\n\n<pre><code>$array =~ /\\.model/;\n</code></pre>\n\n<p>Otherwise perl will first process the double-quoted string, unescaping the escaped dot, then pass the string \".model\" to the regex compiler.</p>\n"}], "owner": {"reputation": 41, "user_id": 6283788, "user_type": "registered", "profile_image": "https://graph.facebook.com/789795011164491/picture?type=large", "display_name": "Tri Ngo", "link": "https://stackoverflow.com/users/6283788/tri-ngo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1549192041, "creation_date": 1549125148, "last_edit_date": 1549192041, "question_id": 54495068, "link": "https://stackoverflow.com/questions/54495068/how-to-catch-model-in-perl", "title": "How to catch &quot;.model&quot; in perl", "body": "<p>My input file has content like this one:</p>\n\n<pre><code>1.1 CORE VT MODEL                             \n.model ABC\nmodel selector\n</code></pre>\n\n<p>I used this code to catch \".model\" string</p>\n\n<pre><code>if ($array=~ \"\\.model\")\n</code></pre>\n\n<p>but my output file catch all \"model\" string in my input file.\nSo how can i catch \".model\" string in my input file?\nThank you so much</p>\n"}, {"tags": ["xml", "perl", "csv"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549115320, "post_id": 54493545, "comment_id": 95792785, "body": "Why don&#39;t you use a XML parser like <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> and then implement your processing in the DOM domain? For tabulated output I would recommend <a href=\"https://metacpan.org/pod/Text::Table\" rel=\"nofollow noreferrer\">Text::Table</a>. It would also help to see an example of your input data and the expected output."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1549128378, "post_id": 54493545, "comment_id": 95796511, "body": "I&#39;m afraid I don&#39;t know enough about this data to know what the problem is. I don&#39;t even understand your description of what is wrong with the bad output. Could you please explain it in simpler words. &quot;I&#39;m expecting to see &#39;foo&#39; in column X, but instead I&#39;m seeing &#39;bar&#39;&quot;. Thanks."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1549129053, "post_id": 54493545, "comment_id": 95796719, "body": "One useful debugging aid would be to use Data::Dumper to display the contents of <code>%annotation</code> after you&#39;ve finished parsing the input file."}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549130393, "post_id": 54495786, "comment_id": 95797092, "body": "Added output for example 1 too."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549130842, "post_id": 54495786, "comment_id": 95797205, "body": "Hmm, the idea is correct, but the results are incorrect. I think there is a bug in the XPath processing..."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549132570, "post_id": 54495786, "comment_id": 95797753, "body": "There will hopefully be a day when I&#39;ll understand XML and XPath... Fixed."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549139609, "post_id": 54495786, "comment_id": 95799779, "body": "After contemplating the given XML data a bit, I have restructured the main loop to loop over <code>&lt;protein&gt;</code> nodes and look downwards for a <code>&lt;xref&gt;</code> node (for the ID) and <code>&lt;matches&gt;...&lt;signature ...&gt;</code> nodes."}, {"owner": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550349933, "post_id": 54495786, "comment_id": 96238667, "body": "I am having some trouble with the code for the <code>tsv</code> separated output. For the <code>csv</code> code, I am using the same &quot;main code&quot;, and I am getting the desired output. However, when using the same &quot;main code&quot; with the <code>tsv</code> code, some columns are not filled up and some cells are not in the correct place. I can provide you with the code + example if you wish! Many thanks in advance!"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550352077, "post_id": 54495786, "comment_id": 96239155, "body": "Have you tried <code>my $csv = Text::CSV-&gt;new({ binary =&gt; 1, eol =&gt; &quot;\\n&quot;, sep_char =&gt; &quot;\\t&quot; })</code>?"}, {"owner": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550357657, "post_id": 54495786, "comment_id": 96240501, "body": "This also leads to weird results (number of cells than expected). My best guess is that there are some characters in my input that are not supported?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550359465, "post_id": 54495786, "comment_id": 96240873, "body": "I don&#39;t quite understand your problem. How can there be &quot;missing columns&quot; when <code>keys %signature_processors == @key_order</code>? Maybe you have added a key in one of them that is missing in the other one? The output code at the end always generates <code>@key_order + 1</code> columns for every row. Or maybe you have UTF-8 characters in your input? It is difficult to say without the same code &amp; input files you are using..."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550361076, "post_id": 54495786, "comment_id": 96241207, "body": "Another possibility: can it be that some of the strings extracted by the XML processing contain <code>\\t</code> instead of spaces? That would explain extra columns in <code>tsv</code> output."}, {"owner": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550434728, "post_id": 54495786, "comment_id": 96257063, "body": "Here is an input example: <a href=\"https://pastebin.com/9WJf6B5v\" rel=\"nofollow noreferrer\">pastebin.com/9WJf6B5v</a> here my <code>tsv</code> code: <a href=\"https://pastebin.com/dTByfnPg\" rel=\"nofollow noreferrer\">pastebin.com/dTByfnPg</a> and my <code>csv</code> code: <a href=\"https://pastebin.com/tTN5fvx7\" rel=\"nofollow noreferrer\">pastebin.com/tTN5fvx7</a>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550492326, "post_id": 54495786, "comment_id": 96276172, "body": "The generated <code>tsv</code> is &quot;correct&quot; (in a sense). Did you maybe forget to disable <code>,</code> (comma) as separator when loading the document? At least LibreOffice has this option in the CSV importer dialog. Your simple TAB generator <i>does not</i> do quoting, hence <code>,</code> is unquoted and can be interpreted as column separator. Please do yourself a favor and use <code>my $csv = Text::CSV-&gt;new({     binary   =&gt; 1,     eol      =&gt; &quot;\\n&quot;,     sep_char =&gt; &quot;\\t&quot;, })</code> which generates a <code>tsv</code> with correct quoting that Libreoffice loads correctly even when TAB, comma <i>and</i> semicolon are enabled as separators."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550493069, "post_id": 54495786, "comment_id": 96276594, "body": "I&#39;ve added another update section to to my answer to summarize these findings."}, {"owner": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "edited": false, "score": 0, "creation_date": 1550518793, "post_id": 54495786, "comment_id": 96290155, "body": "Thank you so much! I can confirm that LibreOffice imports it as it should, only Microsoft Excel messes up the output."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1550493033, "last_edit_date": 1550493033, "creation_date": 1549129777, "answer_id": 54495786, "question_id": 54493545, "link": "https://stackoverflow.com/questions/54493545/parsing-an-xml-file-correctly-in-perl/54495786#54495786", "title": "Parsing an xml file correctly in perl", "body": "<p>Your code is quite long, so my answer will only present the gist of the idea with a few example items processed. But it should give you a starting point how to process the other items in your XML data.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\n# XML namespace\nuse constant DEFAULT_XMLNS =&gt; 'http://www.ebi.ac.uk/interpro/resources/schemas/interproscan5';\n\nmy $doc;\neval {\n    $doc = XML::LibXML-&gt;load_xml(IO =&gt; \\*STDIN);\n};\ndie \"XML parser error: $@\\n\"\n    if $@;\n\n# initialize XPath context\n# NOTE: all nodes without NS must use default: prefix!\nmy $xpc = XML::LibXML::XPathContext-&gt;new();\n$xpc-&gt;registerNs('default', DEFAULT_XMLNS);\n\n# Signature processors - code\nsub processor_just_primary {\n    my($protein, $key, $primary) = @_;\n    push(@{ $protein-&gt;{$key} }, $primary);\n}\nsub processor_primary_and_first_attr {\n    my($protein, $key, $primary, $attrs) = @_;\n    push(@{ $protein-&gt;{$key} }, \"${primary}: \" . $attrs-&gt;[0]);\n}\n\n# Signature processors - map key, \"ac\" identifier, attributes, code\nmy %signature_processors = (\n    Gene3D  =&gt; {\n        id   =&gt; qr/^G3DSA:(.+)/,\n        attr =&gt; [],\n        code =&gt; \\&amp;processor_just_primary,\n    },\n    Hamap   =&gt; {\n        id   =&gt; qr/^(MF.+)/,\n        attr =&gt; [ qw{desc name} ],\n        code =&gt; \\&amp;processor_primary_and_first_attr,\n    },\n    PANTHER =&gt; {\n        id   =&gt; qr/^(PTHR.+)/,\n        attr =&gt; [ qw{name} ],\n        code =&gt; \\&amp;processor_primary_and_first_attr,\n    },\n    TIGRFAM =&gt; {\n        id   =&gt; qr/^(TIGR.+)/,\n        attr =&gt; [ qw{desc name} ],\n        code =&gt; \\&amp;processor_primary_and_first_attr,\n    },\n);\n\nmy @proteins;\nforeach my $protein_node ($xpc-&gt;findnodes('//default:protein', $doc)) {\n    # search &lt;xref&gt; node downwards from &lt;protein&gt; node\n    my @xrefs  = $xpc-&gt;findnodes('./default:xref', $protein_node)\n        or die \"Can't find xref node for protein \" . $protein_node-&gt;toString() . \"\\n\";\n    my $id     = $xrefs[0]-&gt;getAttribute('id')\n        or die \"Can't get attribute 'id' for protein \" . $xrefs[0]-&gt;toString() . \"\\n\";\n\n    # initialize new protein\n    # NOTE: a key with an undefined value means \"not found\" -&gt; empty column\n    my %protein  = map { ($_ =&gt; undef) } keys %signature_processors;\n    $protein{ID} = $id;\n    push(@proteins, \\%protein);\n\n    # fill protein with signature matches - searching nodes downwards from &lt;protein/matches&gt; node\n    foreach my $signature ($xpc-&gt;findnodes('./default:matches//default:signature', $protein_node)) {\n        my($attr_ac) = $signature-&gt;getAttribute('ac')\n            or die \"Can't get attribute 'ac' for XML node \" . $signature-&gt;toString() . \"\\n\";\n\n        while (my($key, $processor) = each %signature_processors) {\n            my($primary)  = ($attr_ac =~ $processor-&gt;{id})\n                or next;\n\n            # additional attributes\n            my @attrs;\n            foreach my $attr (@{ $processor-&gt;{attr} }) {\n                my($value) = $signature-&gt;getAttribute($attr)\n                    or die \"Can't get attribute '${attr}' for XML node \" . $signature-&gt;toString() . \"\\n\";\n                push(@attrs, $value);\n            }\n\n            # call processor\n            $processor-&gt;{code}-&gt;(\\%protein, $key, $primary, \\@attrs);\n        }\n    }\n}\n\nmy @key_order = qw(\n    TIGRFAM\n    Hamap\n    PANTHER\n    Gene3D\n);\n\nsub dump_row(@) {\n    print join(\"\\t\", @_), \"\\n\";\n}\n\ndump_row('ID', @key_order);\nforeach my $protein (@proteins) {\n    my @columns =\n        map { $_ ? join('; ', @{ $_ }) : '-' } # handle empty columns\n        @{ $protein }{@key_order};\n\n    dump_row($protein-&gt;{ID}, @columns);\n}\n\nexit 0;\n</code></pre>\n\n<p>Test output for example 1:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl &lt;Downloads/c73whyqk.txt \nID      TIGRFAM Hamap   PANTHER Gene3D\nid_10002        -       -       -       -\nid_10001        TIGR00621: ssb: single-stranded DNA-binding protein     MF_00984: Single-stranded DNA-binding protein.  PTHR10302:SF0: SINGLE-STRANDED DNA-BINDING PROTEIN, MITOCHONDRIAL; PTHR10302: SINGLE-STRANDED DNA-BINDING PROTEIN      2.40.50.140\nid_10003        -       -       PTHR34107: FAMILY NOT NAMED     3.90.1570.10\n</code></pre>\n\n<p>Test output for example 2:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl &lt;dummy.xml\nID      TIGRFAM Hamap   PANTHER Gene3D\nid_10005        -       -       PTHR13696:SF85: SUBFAMILY NOT NAMED; PTHR13696: FAMILY NOT NAMED        3.40.50.300\nid_10004        -       -       PTHR13696:SF86: SUBFAMILY NOT NAMED; PTHR13696: FAMILY NOT NAMED        3.40.50.300\n</code></pre>\n\n<hr>\n\n<p><strong>BONUS CODE:</strong> as the question is also tagged with <a href=\"/questions/tagged/csv\" class=\"post-tag\" title=\"show questions tagged &#39;csv&#39;\" rel=\"tag\">csv</a> I'll add the changes required to generate CSV output:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Text::CSV;\nuse XML::LibXML;\n\n# ... the main code is left unchanged ...\n\nmy $csv = Text::CSV-&gt;new()\n    or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag() . \"\\n\";\n$csv-&gt;eol(\"\\n\");\n\nsub dump_row(@) {\n    $csv-&gt;print(\\*STDOUT, \\@_);\n}\n\ndump_row('ID', @key_order);\nforeach my $protein (@proteins) {\n    my @columns =\n        map { $_ ? join('; ', @{ $_ }) : '' } # handle empty columns\n        @{ $protein }{@key_order};\n\n    dump_row($protein-&gt;{ID}, @columns);\n}\n\nexit 0;\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE 2:</strong> it turns out that loading the TSV version of the original code can lead to problem when your CSV importer doesn't have an option to disable <code>,</code> (comma) and <code>;</code> (semicolon) as separators. The original code should therefore be rewritten to use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> instead, which does proper quoting and therefore avoids such problems.</p>\n\n<p>I've also added some sanity check code for <code>@key_order</code> vs. <code>%signature_processors</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># sanity checks\ndie \"\\@keyorder has keys not in \\%signature_processors!\\n\"\n    if grep { not exists $signature_processors{$_} } @key_order;\n{\n    my %keys = map { ($_ =&gt; 1) } @key_order;\n    die \"\\%signature_processors has keys not in \\@keyorder!\\n\"\n        if grep { not exists $keys{$_} } keys %signature_processors;\n}\n\nmy $csv = Text::CSV-&gt;new({\n    binary   =&gt; 1,\n    eol      =&gt; \"\\n\",\n    # Select the output format by uncommenting *one* of the following\n    #sep_char =&gt; ',', # CSV - comma separated values\n    sep_char =&gt; \"\\t\", # TSV - TAB separated values\n})\n    or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag() . \"\\n\";\n\nsub dump_row(@) {\n    $csv-&gt;print(\\*STDOUT, \\@_);\n}\n</code></pre>\n"}], "owner": {"reputation": 672, "user_id": 7421940, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ba36d1dca63cd1671c842dc1153e3d0d?s=128&d=identicon&r=PG&f=1", "display_name": "rororo", "link": "https://stackoverflow.com/users/7421940/rororo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 54495786, "answer_count": 1, "score": 1, "last_activity_date": 1550493033, "creation_date": 1549114110, "last_edit_date": 1549213669, "question_id": 54493545, "link": "https://stackoverflow.com/questions/54493545/parsing-an-xml-file-correctly-in-perl", "title": "Parsing an xml file correctly in perl", "body": "<p>I have a xml results file (gzipped) that I want to output as a nice tab-separated table.</p>\n\n<p>I came up with a script that should do that job (code see below).</p>\n\n<p>BUT: When some of the sections in the file, e.g. <code>Hamap</code>, are not present, then the table is shifted and no hyphen is printed when the field should be empty. How do I have to modify the script so that fields that are absent are also outputted as empty?</p>\n\n<p>I can post two examples of my xml file in case you wish! </p>\n\n<pre><code>use warnings;\nuse strict;\nuse IO::Compress::Gzip;\n\nmy $input_file  = $ARGV[0]; \nmy $output_file = \"$ARGV[0]\".\".tsv\";\n$output_file =~ s/\\.gz//;\nmy $i = 0;\nmy $query; my %annotation;\n\nopen (IN,\"gzip -dc $input_file |\") or die \"\\nCould not open $input_file\\n\";\n\n\nwhile (&lt;IN&gt;) {\n    if ( $_ =~ /\\&lt;xref desc=\\\"(.*)\\\" db=\\\"(.*)\\\" id=\\\"(.*)\\\" name=\\\"(.*)\\\"\\/\\&gt;/) {\n\n        $query = $3;\n        $annotation{$query}{\"order\"}            = $i;\n        $annotation{$query}{\"Pfam\"}             = \"-\";\n        $annotation{$query}{\"TIGRFAM\"}          = \"-\";\n        $annotation{$query}{\"Gene3D\"}           = \"-\";\n        $annotation{$query}{\"PANTHER\"}          = \"-\";\n        $annotation{$query}{\"ProSiteProfiles\"}  = \"-\";\n        $annotation{$query}{\"Hamap\"}            = \"-\";\n        $annotation{$query}{\"SUPERFAMILY\"}      = \"-\";\n        $annotation{$query}{\"PRINTS\"}           = \"-\";\n        $annotation{$query}{\"PIRSF\"}            = \"-\";\n        $annotation{$query}{\"SMART\"}            = \"-\";\n        $annotation{$query}{\"GO_BIO\"}           = \"-\";\n        $annotation{$query}{\"GO_MOL\"}           = \"-\";\n        $annotation{$query}{\"GO_CEL\"}           = \"-\";\n        $annotation{$query}{\"IPRO\"}             = \"-\";\n        $annotation{$query}{\"pathway\"}          = \"-\";\n        $annotation{$query}{\"CDD\"}              = \"-\";\n        $annotation{$query}{\"MobiDBLite\"}       = \"-\";\n\n\n        $i++;\n\n\n    } elsif ($_ =~ /\\&lt;xref/){\n                if ($_ =~ /id=\\\"(.*)\\\"/){\n                 $query=$1;\n                 $annotation{$query}{\"order\"}            = $i;\n                $annotation{$query}{\"Pfam\"}              = \"-\";\n                $annotation{$query}{\"TIGRFAM\"}           = \"-\";\n                $annotation{$query}{\"Gene3D\"}            = \"-\";\n                $annotation{$query}{\"PANTHER\"}           = \"-\";\n                $annotation{$query}{\"ProSiteProfiles\"}   = \"-\";\n                $annotation{$query}{\"Hamap\"}             = \"-\";\n                $annotation{$query}{\"SUPERFAMILY\"}       = \"-\";\n                $annotation{$query}{\"PRINTS\"}            = \"-\";\n                $annotation{$query}{\"PIRSF\"}             = \"-\";\n                $annotation{$query}{\"SMART\"}             = \"-\";\n                $annotation{$query}{\"GO_BIO\"}            = \"-\";\n                $annotation{$query}{\"GO_MOL\"}            = \"-\";\n                $annotation{$query}{\"GO_CEL\"}            = \"-\";\n                $annotation{$query}{\"IPRO\"}              = \"-\";\n                $annotation{$query}{\"pathway\"}           = \"-\";\n                $annotation{$query}{\"CDD\"}               = \"-\";\n                $annotation{$query}{\"MobiDBLite\"}        = \"-\";\n\n\n                $i++;\n\n                }\n\n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(PF.*)\\\" desc=\\\"(.*)\\\" name=\\\"(.*)\\\"&gt;/ ) {                # Pfam \n            if ($annotation{$query}{\"Pfam\"} eq \"-\"){\n                $annotation{$query}{\"Pfam\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"Pfam\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(TIGR.*)\\\" desc=\\\"(.*)\\\" name=\\\"(.*)\\\"&gt;/ ) {              # TIGRFAM\n        if ($annotation{$query}{\"TIGRFAM\"} eq \"-\"){\n                $annotation{$query}{\"TIGRFAM\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"TIGRFAM\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(G3DSA:.*)\\\"&gt;/ ) {                                        # Gene3D\n        if ($annotation{$query}{\"Gene3D\"} eq \"-\"){\n                $annotation{$query}{\"Gene3D\"} = \"$1\";\n            }else{\n            $annotation{$query}{\"Gene3D\"} .= \"; $1\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(PTHR.*)\\\" name=\\\"(.*)\\\"\\&gt;/ ) {                           # PANTHER\n        if ($annotation{$query}{\"PANTHER\"} eq \"-\"){\n                $annotation{$query}{\"PANTHER\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"PANTHER\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(PS.*)\\\" desc=\\\"(.*)\\\"&gt;/ ) {                              # ProSiteProfiles\n        if ($annotation{$query}{\"ProSiteProfiles\"} eq \"-\"){\n                $annotation{$query}{\"ProSiteProfiles\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"ProSiteProfiles\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(MF.*)\\\" desc=\\\"(.*)\\\" name=\\\"(.*)\\\"&gt;/ ) {                # Hamap\n        if ($annotation{$query}{\"Hamap\"} eq \"-\"){\n                $annotation{$query}{\"Hamap\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"Hamap\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(SSF.*)\\\" name=\\\"(.*)\\\"&gt;/ ) {                             # SUPERFAMILY\n        if ($annotation{$query}{\"SUPERFAMILY\"} eq \"-\"){\n                $annotation{$query}{\"SUPERFAMILY\"} = \"$1: $2\";\n            }else{\n                $annotation{$query}{\"SUPERFAMILY\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(PR.*)\\\" desc=\\\"(.*)\\\" name=\\\"(.*)\\\"\\&gt;/ ) {               # PRINTS\n        if ($annotation{$query}{\"PRINTS\"} eq \"-\"){\n                $annotation{$query}{\"PRINTS\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"PRINTS\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(PIRSF.*)\\\" name=\\\"(.*)\\\"&gt;/ ) {                           # PIRSF\n        if ($annotation{$query}{\"PIRSF\"} eq \"-\"){\n                $annotation{$query}{\"PIRSF\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"PIRSF\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(SM.*)\\\" desc=\\\"(.*)\\\" name=\\\"(.*)\\\"\\&gt;/ ) {               # SMART\n        if ($annotation{$query}{\"SMART\"} eq \"-\"){\n                $annotation{$query}{\"SMART\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"SMART\"} .= \"; $1: $2\";\n            }\n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(cd.*)\\\" desc=\\\"(.*)\\\" name=\\\"(.*)\\\"\\&gt;/ ) {               # CDD\n        if ($annotation{$query}{\"CDD\"} eq \"-\"){\n                $annotation{$query}{\"CDD\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"CDD\"} .= \"; $1: $2\";\n            }\n\n    } elsif ( $_ =~ /\\&lt;signature ac=\\\"(mobidb-lite.*)\\\" desc=\\\"(.*)\\\" name=\\\"(.*)\\\"\\&gt;/ ) {      # MobiDBLite\n        if ($annotation{$query}{\"MobiDBLite\"} eq \"-\"){\n                $annotation{$query}{\"MobiDBLite\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"MobiDBLite\"} .= \"; $1: $2\";\n            }\n\n    } elsif ( $_ =~ /\\&lt;go-xref category=\"BIOLOGICAL_PROCESS\" db=\"GO\" id=\"(GO:.*)\" name=\"(.*)\"\\/&gt;/ ) {\n        if ($annotation{$query}{\"GO_BIO\"} eq \"-\"){\n                $annotation{$query}{\"GO_BIO\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"GO_BIO\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;go-xref category=\"MOLECULAR_FUNCTION\" db=\"GO\" id=\"(GO:.*)\" name=\"(.*)\"\\/&gt;/ ) {\n        if ($annotation{$query}{\"GO_MOL\"} eq \"-\"){\n                $annotation{$query}{\"GO_MOL\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"GO_MOL\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;go-xref category=\"CELLULAR_COMPONENT\" db=\"GO\" id=\"(GO:.*)\" name=\"(.*)\"\\/&gt;/ ) {\n        if ($annotation{$query}{\"GO_CEL\"} eq \"-\"){\n                $annotation{$query}{\"GO_CEL\"} = \"$1: $2\";\n        }else{\n                $annotation{$query}{\"GO_CEL\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;pathway-xref db=\"(.*)\" id=\"(.*)\" name=\"(.*)\"\\/&gt;/ ) {\n        if ($annotation{$query}{\"pathway\"} eq \"-\"){\n                $annotation{$query}{\"pathway\"} = \"$1-$2: $3\";\n        } elsif ($annotation{$query}{\"pathway\"} =~ /$2/) {\n            next;\n        }else{\n                $annotation{$query}{\"pathway\"} .= \"; $1-$2: $3\";\n            } \n\n\n\n    } elsif ( $_ =~ /\\&lt;entry ac=\"(IP.*)\" desc=\"(.*)\" name=\"(.*)\" type=\"(.*)\"&gt;/ ) {\n        if ($annotation{$query}{\"IPRO\"} eq \"-\"){\n                $annotation{$query}{\"IPRO\"} = \"$1: $2\";\n        } elsif ($annotation{$query}{\"IPRO\"} =~ /$1/) {\n            next;\n        }else{\n                $annotation{$query}{\"IPRO\"} .= \"; $1: $2\";\n            } \n\n    } elsif ( $_ =~ /\\&lt;\\/protein\\-matches\\&gt;/ ) {\n\n    }\n\n}\nclose (IN);\n\nopen (OUT, \"&gt;$output_file\") or die \"\\nCould not open $output_file\\n\";\nprint OUT \"Query\\tInterPro Entry\\tInterPro: pathways\\tInterPro: GO terms - Molecular Function\\tInterPro: GO terms - Biological Process\\tInterPro: GO terms - Cellular Component\\t\";\nprint OUT \"InterPro: Pfam\\tInterPro: TIGRFAM\\tInterPro: PANTHER\\tInterPro: ProSiteProfiles\\tInterPro: Hamap\\t\";\nprint OUT \"InterPro: PIRSF\\tInterPro: Gene3D\\tInterPro: SUPERFAMILY\\tInterPro: PRINTS\\tInterPro: SMART\\tInterPro: CDD\\tInterPro: MobiDBLite\\n\";\n\nforeach my $query (sort {$annotation{$a}{\"order\"} &lt;=&gt; $annotation{$b}{\"order\"}} keys %annotation ) {\n    print OUT $query,\"\\t\",$annotation{$query}{\"IPRO\"},\"\\t\",$annotation{$query}{\"pathway\"},\"\\t\",$annotation{$query}{\"GO_MOL\"},\"\\t\",$annotation{$query}{\"GO_BIO\"},\"\\t\",$annotation{$query}{\"GO_CEL\"},\"\\t\";\n    print OUT $annotation{$query}{\"Pfam\"},\"\\t\",$annotation{$query}{\"TIGRFAM\"},\"\\t\",$annotation{$query}{\"PANTHER\"},\"\\t\";\n    print OUT $annotation{$query}{\"ProSiteProfiles\"},\"\\t\",$annotation{$query}{\"Hamap\"},\"\\t\",$annotation{$query}{\"PIRSF\"},\"\\t\";\n    print OUT $annotation{$query}{\"Gene3D\"},\"\\t\",$annotation{$query}{\"SUPERFAMILY\"},\"\\t\",$annotation{$query}{\"PRINTS\"},\"\\t\";\n    print OUT $annotation{$query}{\"SMART\"},\"\\t\",$annotation{$query}{\"CDD\"},\"\\t\",$annotation{$query}{\"MobiDBLite\"},\"\\n\";\n}\n\nclose (OUT);\n\n\nexit 1; \n</code></pre>\n\n<p>UPDATE: Here are two example files, the first one works as expected, but the second does not work properly (there is a shift in the fields).</p>\n\n<p><a href=\"https://pastebin.com/c73whyqk\" rel=\"nofollow noreferrer\">example 1</a></p>\n\n<p><a href=\"https://pastebin.com/nh08bSBB\" rel=\"nofollow noreferrer\">example 2</a></p>\n\n<p>Desired output of example 2:</p>\n\n<pre><code>Query   InterPro Entry  InterPro: pathways  InterPro: GO terms - Molecular Function InterPro: GO terms - Biological Process InterPro: GO terms - Cellular Component InterPro: Pfam  InterPro: TIGRFAM   InterPro: PANTHER   InterPro: ProSiteProfiles   InterPro: Hamap InterPro: PIRSF InterPro: Gene3D    InterPro: SUPERFAMILY   InterPro: PRINTS    InterPro: SMART InterPro: CDD   InterPro: MobiDBLite\nid_10005\" name=\"id_10005    -   -   -   -   -   PF13614: AAA domain -   PTHR13696:SF85: SUBFAMILY NOT NAMED; PTHR13696: FAMILY NOT NAMED    -   G3DSA:3.40.50.300   SSF52540: P-loop containing nucleoside triphosphate hydrolases  -   -   -   -   -   mobidb-lite: consensus disorder prediction; mobidb-lite: consensus disorder prediction\nid_10004\" name=\"id_10004    -   -   -   -   -   PF13614: AAA domain -   PTHR13696:SF86: SUBFAMILY NOT NAMED; PTHR13696: FAMILY NOT NAMED    -   G3DSA:3.40.50.300   SSF52540: P-loop containing nucleoside triphosphate hydrolases  -   -   -   -   cd02042: ParA   -\n</code></pre>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1549109617, "post_id": 54492860, "comment_id": 95791494, "body": "Please add your Perl code and the schemas too (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), thank you."}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549110871, "post_id": 54492860, "comment_id": 95791760, "body": "This is my code:"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549111731, "post_id": 54492860, "comment_id": 95791933, "body": "please always update your question, don&#39;t add information via comments."}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1549112011, "post_id": 54492860, "comment_id": 95791994, "body": "I have added the code"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549112214, "post_id": 54492860, "comment_id": 95792042, "body": "Why are you using random regex options? None of <code>&#47;mp</code> or <code>&#47;g</code> should be there."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549112278, "post_id": 54492860, "comment_id": 95792056, "body": "Don&#39;t interpolate variables into your SQL. Use <a href=\"https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values\" rel=\"nofollow noreferrer\">placeholders</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549112348, "post_id": 54492860, "comment_id": 95792080, "body": "Why are you calling <code>prepare</code> and <code>execute</code> separately? Wouldn&#39;t <a href=\"https://metacpan.org/pod/DBI#do\" rel=\"nofollow noreferrer\">the <code>do</code> method</a> be more convenient?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1549112439, "post_id": 54492860, "comment_id": 95792100, "body": "Your code is logically broken. Your loop condition <code>my @row = $sth-&gt;fetchrow_array()</code> tries to retrieve rows from <code>$sth</code>, but your loop body overwrites <code>$sth</code> with an <code>UPDATE</code> statement."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1549112639, "post_id": 54492860, "comment_id": 95792152, "body": "Which RDBMS are you using? How do you know your query is what you claim it is? If you hardcode it in your program, does it throw the same error?"}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549256578, "post_id": 54492860, "comment_id": 95824034, "body": "I tried to use sth1 inside loop but still I face the same error. When I tried to hardcode the query, it updated the db though i got the following error:commit ineffective with AutoCommit enabled"}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549256593, "post_id": 54492860, "comment_id": 95824037, "body": "I am using Sybase"}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549258760, "post_id": 54492860, "comment_id": 95824503, "body": "updated code used."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549258541, "post_id": 54493893, "comment_id": 95824448, "body": "Dont have JSON installed :-( Any idea how the update works when hardcoded."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549260752, "post_id": 54493893, "comment_id": 95825027, "body": "I would suggest to install JSON module if you have to write Perl code that has to process/generate JSON. Anyway, I updated my answer with an alternative."}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549264474, "post_id": 54493893, "comment_id": 95826183, "body": "my problem is that the update query is not taking single quote at the end of the query. Thats why I am getting a parse error. id is a string and i need to put it in between single quotes."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549265133, "post_id": 54493893, "comment_id": 95826418, "body": "With placeholders you wouldn&#39;t have this problem. Please do try the code improvements I have suggested."}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549270019, "post_id": 54493893, "comment_id": 95828345, "body": "my $sql2 = &quot;UPDATE alerts.status SET AlertKey=? WHERE Identifier=?&quot;;                 my $sth1 = $dbh-&gt;prepare($sql2);                 $sth1-&gt;execute($alertkey,$id)                    or die &quot;SQL Error: couldnt update $DBI::errstr\\n&quot;;;"}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549270038, "post_id": 54493893, "comment_id": 95828358, "body": "facing this error SQL Error: couldnt update Server message number=17001 severity=10 state=0 line=0 server=AWSOSA1 text=No SRV_DYNAMIC handler installed."}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549270088, "post_id": 54493893, "comment_id": 95828377, "body": "I tried to print $alertkey and $id. They are as expected"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549270550, "post_id": 54493893, "comment_id": 95828547, "body": "That looks like a different error message. So your original problem seems to be solved. You should probably check the Sybase documentation for this new error message."}, {"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549270846, "post_id": 54493893, "comment_id": 95828657, "body": "This is what the documentation says:The default handler sends the message \u201cNo SRV_DYNAMIC handler installed\u201d to the client. Open Server returns DONE ERROR to the client."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549273610, "post_id": 54493893, "comment_id": 95829999, "body": "Can we agree that your original question &quot;parser error in SQL update query&quot; is solved? If yes, then please up-vote and accept the answer you like best. For your new error message: I&#39;m no DBI expert but that looks like driver/configuration issue. I would search if some other DBI user had the same issue or raise a new question for it."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1549260606, "last_edit_date": 1549260606, "creation_date": 1549116982, "answer_id": 54493893, "question_id": 54492860, "link": "https://stackoverflow.com/questions/54492860/i-am-getting-parse-error-while-updating-the-query-through-perl/54493893#54493893", "title": "I am getting parse error while updating the query through perl", "body": "<p>As pointed out in the comments, your code has several problems. I'm not sure if the following will solve your problem, but at least it doesn't have any of the mentioned issues.</p>\n\n<p>BTW: I took an educated guess based on your regex that the <code>AdditionalText</code> column actually contains a JSON string. Then you should use a JSON parser instead of applying a regex.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse JSON qw(decode_json);\n\n# DB setup etc.\nuse DBI....\nmy $dbh = ...\n...\n\n# Query for alert status\nmy $query_sth = $dbh-&gt;prepare(\n    q(SELECT AlertKey,AdditionalText,Identifier FROM alerts.status where AdditionalText like 'priority' AND Summary like 'Uplink' AND Type=1)\n);\n\n# Update AlertKey\nmy $update_sth = $dbh-&gt;prepare(\n    q(UPDATE alerts.status SET AlertKey=? WHERE Identifier=?)\n);\n\n# Execute query\n$query_sth-&gt;execute()\n    or die \"SQL Error: couldn't execute $DBI::errstr\\n\";\n\n# Loop over results\nforeach my $row ($query_sth-&gt;fetchrow_arrayref) {\n    my($key, $text, $id) = @{ $row };\n    my $data;\n\n    # Educated guess: $text is actually a JSON string\n    eval {\n        $data = decode_json($text);\n    };\n    if ($@) {\n        # handle JSON parse errors here...\n        next;\n    }\n\n    my $link = $data-&gt;{link_index};\n    unless ($link) {\n        # handle missing link index here...\n        next;\n    }\n\n    # update alert key\n    my $alert = \"Port ${link} Circuit Up down\";\n    $update_sth-&gt;execute($alert, $id)\n        or die \"SQL Error: couldn't update $DBI::errstr\\n\";\n}\n</code></pre>\n\n<h2>Alternative without using JSON</h2>\n\n<p><strong>NOTE:</strong> this is <em>not</em> recommended. If you have JSON, XML, CSV, whatever...: always use a parser and work in the \"parsed\" domain.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    my($key, $text, $id) = @{ $row };\n\n    # NOTE: regex might be incorrect if JSON property \"link_index\"\n    #       is actually a number, not a string (see following line)\n    my($link) = ($text =~ /\"link_index\":\\s*\"(\\d+)\"/;\n    #         = ($text =~ /\"link_index\":\\s*(\\d+)/;\n    unless ($link) {\n        # handle missing link index here...\n        next;\n    }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1549273427, "creation_date": 1549108702, "last_edit_date": 1549273427, "question_id": 54492860, "link": "https://stackoverflow.com/questions/54492860/i-am-getting-parse-error-while-updating-the-query-through-perl", "title": "I am getting parse error while updating the query through perl", "body": "<p>I tried to update the table in DB using an update query in perl. Am getting the below error</p>\n\n<blockquote>\n  <p><code>SQL Error: couldnt update Server message number=20000 severity=0 state=0 line=0 server=AWSOSA1 text=ERROR=Parse failure on line 1 of statement 'UPDATE alerts.status SET AlertKey='Port 101 Circuit Up down' where Identifier='Link 101 Circuit Up Down Circuit Status Private Cloud uplinks CP0027829 DOWN 101 PC_SOCKET_PROBE', at or near '''</code></p>\n</blockquote>\n\n<p>I tried to print the query and run it in db and it is working there. Not sure why the parse error is coming while running through perl script :-(</p>\n\n<p>Can anybody help?</p>\n\n<p>Below is the query I tried to run through perl:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE alerts.status SET AlertKey='Port 101 Circuit Up down' where Identifier='Link 101 Circuit Up Down Circuit Status Private Cloud uplinks CP0027829 DOWN 101 PC_SOCKET_PROBE'\n</code></pre>\n\n<p>Code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $sql1 = \"SELECT AlertKey,AdditionalText,Identifier FROM alerts.status where AdditionalText like 'priority' AND Summary like 'Uplink' AND Type=1\";\nmy $sth = $dbh-&gt;prepare($sql1);\nmy $alertkey;\nmy $str;\n$sth-&gt;execute() || die \"SQL Error: couldnt execute $DBI::errstr\\n\";\n\nwhile(my @row = $sth-&gt;fetchrow_array())\n{\n        print \"Inside while\\n\";\n        my $str=$row[1];\n        print \"\\nAdditional Text=\".$str;\n        $alertkey=$row[0];\n        print \"\\nAlert Key before modification=\".$alertkey;\n        my $regex = qr/\"link_index\":\"(\\d+)\"/mp;\n        if($str =~ /$regex/g)\n        {\n                my $linkIndex=$1;\n                $alertkey='Link '.$linkIndex.' Circuit Up down';\n                print \"\\nAlertKey after modification=\".$alertkey;\n        }\n        my $sql2 = \"UPDATE alerts.status SET AlertKey='$alertkey' WHERE Identifier='$row[2]'\";\n        my $sth1 = $dbh-&gt;prepare($sql2);\n        $sth1-&gt;execute() || die \"SQL Error: couldnt update $DBI::errstr\\n\";;\n        print \"Number of rows updated :\" + $sth-&gt;rows;\n        $sth1-&gt;finish();\n        $dbh-&gt;commit or die $DBI::errstr;\n }\n</code></pre>\n\n<p>$dbh->disconnect();</p>\n"}, {"tags": ["perl", "dependencies", "dependency-management", "build-tools"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549140098, "post_id": 54492053, "comment_id": 95799897, "body": "&quot;some/most are considered deprecated&quot; - this is irrelevant. Don&#39;t use Module::Build or Module::Install, information is provided for them for the benefit of people still using them. There are many other options which are actively used and maintained."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549140171, "post_id": 54492053, "comment_id": 95799904, "body": "The real question is how you expect to use this metadata. CPAN::Meta::Spec and META.json are designed for consumption by PAUSE and CPAN installers. If you will not be using a CPAN installer, then there is no reason for you to use it, though you could certainly use it as inspiration. cpanfile on the other hand is a format designed for specifying Perl module dependencies and can be read by anything using Module::CPANfile, hence why I recommended it previously."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1549140484, "post_id": 54492053, "comment_id": 95799982, "body": "Additionally cpanm (dev versions only) and carton recognize some options you can apply to cpanfile requirements to install from a specific URL, this may be of use. <a href=\"https://metacpan.org/pod/Carton#Specifying-a-CPAN-distribution\" rel=\"nofollow noreferrer\">The carton docs mention it</a> and I have an <a href=\"https://github.com/miyagawa/cpanminus/pull/579\" rel=\"nofollow noreferrer\">open pull request</a> to document it for cpanm."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549141409, "post_id": 54492053, "comment_id": 95800208, "body": "Re &quot;<i>Pretty much what seems to be possible with CPAN::Meta::Spec already, apart from package level dependencies.</i>&quot;, You are mistaken. CPAN::Meta::Spec is entirely about defining dependencies on packages. The catch is, it&#39;s about defining dependencies on Perl (CPAN) packages. You obviously want dependencies on some other type of package. This brings us to the key question: What kind of packages are you talking about? We can&#39;t tell you how to define optional dependencies in a system if you don&#39;t specify what system."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549201906, "post_id": 54492053, "comment_id": 95811016, "body": "@Grinnz <code>dist</code> and <code>url</code> in deed look interesting. Do you know of any support for package manager like <code>APT</code> or <code>PPM</code> currently? Might be possible to implement it like with <code>url</code>?"}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549202294, "post_id": 54492053, "comment_id": 95811113, "body": "@ikegami My quoted sentence doesn&#39;t say that <code>CPAN::Meta::Spec</code> doesn&#39;t provide package level dependencies, but that I don&#39;t want to model dependencies at that low level only. I want to model dependencies on what <code>CPAN::Meta::Spec</code> calls a distribution, but of course for Perl, because that is what e.g. APT, PPM and even CPAN-clients install at the end, not individual packages. I prefer APT and PPM instead of CPAN and therefore need to decide at their level what my dependencies are."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549202474, "post_id": 54492053, "comment_id": 95811154, "body": "@ikegami There is no e.g. PAUSE for APT mapping individual Perl packages to distributions and additionally the developer needs to decide currently how a distribution is available at all. It might be using APT, it might be some SNAP, it might be PPM, it might be not at all on Windows because of XS in use and code doesn&#39;t compile on Windows or whatever. So simply specifying a dependency on <code>Some::Foo::Bar::Package</code> alone won&#39;t help me deciding if that is available using APT or whatever."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549202586, "post_id": 54492053, "comment_id": 95811188, "body": "@ikegami If it&#39;s available using APT, the distribution name for that is my dependency in my opinion. Have a look at the following APT-distribution, which contains a lot of individual Perl packages. I would like to manage the dependency at that level, simply because I know all necessary things are available using APT, APT handles transitive dependencies itself etc. <a href=\"https://packages.ubuntu.com/xenial/all/carton/filelist\" rel=\"nofollow noreferrer\">packages.ubuntu.com/xenial/all/carton/filelist</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549213247, "post_id": 54492053, "comment_id": 95814226, "body": "Re &quot;<i>I want to model dependencies on what CPAN::Meta::Spec calls a distribution</i>&quot;, Ok, undeleted my answer since that&#39;s exactly what it covers. I thought I wanted something else."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549215658, "post_id": 54492053, "comment_id": 95814964, "body": "@ThorstenSch&#246;ning Apt or RPM would be a more appropriate tool for what it sounds like you want to do, since they are capable of depending on versions of other deb or rpm packages. Using these has nothing to do with CPAN::Meta::Spec or cpanfiles, you would use whatever tools are appropriate for that ecosystem and create a deb/rpm for each distribution involved."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549276336, "post_id": 54492053, "comment_id": 95831474, "body": "@Grinnz The point is that APT doesn&#39;t always provide the Perl packages I need, only mostly, sometimes I need to use CPAN instead. APT doesn&#39;t work on Windows for ActiveState PPM, sometimes I need CPAN on Windows as well, and it doesn&#39;t integrate with simple e.g. SVN checkouts. I need something able to integrate all of those and because CPAN is used sometimes, I know it has specs describing dependencies and my apps are Perl already anway, I thought I focus on the specs and tools of the CPAN ecosystem first."}], "answers": [{"comments": [{"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549214898, "post_id": 54495951, "comment_id": 95814753, "body": "I don&#39;t see with your example how exactly it allows me to depend on APT RPM-packages I already know the name of or distributions placed within some SVN-Repos? You are still relying on e.g. <code>PAUSE</code> mapping individual Perl packages to some distribution known to CPAN, but there is nothing I know of doing such mapping for APT-packages. Additionally, what does using <code>MakeMaker</code> make easier compared to writing <code>META.*</code> manually? Does it handle installing dependencies and acts as a CPAN-client as well? Don&#39;t have the feeling and I don&#39;t need makefiles,, APT and PPM should handle such things."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549215283, "post_id": 54495951, "comment_id": 95814857, "body": "Re &quot;<i>I don&#39;t see with your example how exactly it allows me to depend on APT RPM-packages</i>&quot;, It doesn&#39;t. You said you wanted &quot;to model dependencies on what CPAN::Meta::Spec calls a distribution&quot;. apt distros aren&#39;t CPAN distros."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549215750, "post_id": 54495951, "comment_id": 95814986, "body": "Re &quot;<i>what does using <code>MakeMaker</code> make easier compared to writing <code>META.*</code> manually?</i>&quot;, Do you realize that <code>cpan</code> doesn&#39;t install modules? It&#39;s really just a dependency walker and a downloader. It calls the distro&#39;s <code>Makefile.PL</code> or <code>Build.PL</code> to do the actual testing and installing. MakeMaker a module installer. Creating <code>META.*</code> is just a little favour it does for you. If you want to do it manually, have fun."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549216028, "post_id": 54495951, "comment_id": 95815067, "body": "APT-distros and CPAN-distros are conceptually the same thing compared to Perl-packages managed as dependency by CPAN::Meta::Spec, which are one level below distros. And because CPAN knows distros, APT knows distros and even SVN might know a distro based e.g. on its URL, but neither APT nor SVN know Perl-packages, I want to model dependencies on distro-level."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 1, "creation_date": 1549234897, "post_id": 54495951, "comment_id": 95820434, "body": "Re &quot;<i>APT-distros and CPAN-distros are conceptually the same thing</i>&quot;, No, not at all. They&#39;re not the same format, nor are they found in the same place. CPAN and APT are two completely separate systems with their own tools and distros."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549615341, "post_id": 54495951, "comment_id": 95973608, "body": "You shouldn&#39;t take the quote out of it&#39;s context. I clearly say <code>compared to Perl-packages</code> and APT- and CPAN-distros simply are conceptually(!) the same level above those packages, have pretty much the same design goals and purpose. I didn&#39;t made any of your other claims."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549616951, "post_id": 54495951, "comment_id": 95974347, "body": "Recommendation for software applications are off-topic"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1549213301, "last_edit_date": 1549213301, "creation_date": 1549130887, "answer_id": 54495951, "question_id": 54492053, "link": "https://stackoverflow.com/questions/54492053/how-to-manage-dependencies-in-perl-above-package-level-and-without-focussing-on/54495951#54495951", "title": "How to manage dependencies in Perl ABOVE package level and WITHOUT focussing on CPAN?", "body": "<blockquote>\n  <p><em>I want to model dependencies on what CPAN::Meta::Spec calls a distribution</em></p>\n</blockquote>\n\n<p>When using ExtUtils::MakeMaker, <code>META_MERGE</code> gives you access to fields from the <a href=\"https://metacpan.org/pod/CPAN::Meta::Spec\" rel=\"nofollow noreferrer\">META spec</a> that allow you to specify the information you want to specify. The following snippet from DateTime::Format::Atom demonstrates this:</p>\n\n<pre><code>META_MERGE  =&gt; {\n   'meta-spec' =&gt; { version =&gt; 2 },\n\n   prereqs =&gt; {\n      configure =&gt; {\n         requires =&gt; {\n            'ExtUtils::MakeMaker'       =&gt; 6.74,\n         },\n      },\n      runtime =&gt; {\n         requires =&gt; {\n            'strict'                    =&gt; 0,\n            'version'                   =&gt; 0,\n            'warnings'                  =&gt; 0,\n            'DateTime'                  =&gt; 0,\n            'DateTime::Format::RFC3339' =&gt; 0,\n         },\n      },\n      test =&gt; {\n         requires =&gt; {\n            'Test::More'                =&gt; 0,\n         },\n      },\n      develop =&gt; {\n         requires =&gt; {\n            'FindBin'                   =&gt; 0,\n            'Pod::Coverage'             =&gt; 0.18,\n            'Test::Pod::Coverage'       =&gt; 1.08,\n         },\n      },\n   },\n},\n</code></pre>\n\n<p>Consult <a href=\"https://metacpan.org/pod/CPAN::Meta::Spec#Prereq-Spec\" rel=\"nofollow noreferrer\">this</a> for the full <code>prereqs</code> spec.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>But both only seem to support dependencies on package instead of some higher distribution level.</em>\"</p>\n</blockquote>\n\n<p>You're making a fuss about nothing. It doesn't matter that you have to use Foo::Bar instead of Foo-Bar.</p>\n"}], "owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549213301, "creation_date": 1549102627, "last_edit_date": 1549201980, "question_id": 54492053, "link": "https://stackoverflow.com/questions/54492053/how-to-manage-dependencies-in-perl-above-package-level-and-without-focussing-on", "title": "How to manage dependencies in Perl ABOVE package level and WITHOUT focussing on CPAN?", "body": "<p>This is related to a <a href=\"https://stackoverflow.com/questions/54484092/how-to-make-prereqs-of-cpanmetaspec-require-a-distribution-instead-of-a-pa\">former question</a> about <code>CPAN::Meta::Spec</code>, which doesn't seem to be designed for what I thought I could use it.</p>\n\n<h1>My use case</h1>\n\n<p>I have different Perl apps containing of a lot of packages themself, depending on some home grown system wide utility stuff and of course 3rd party packages. Those apps might provide different features depending on runtime config and depending on those features, dependencies are different. Additionally, if automated tests are available, those might introduce dependencies as well and in the most current example those dependencies where available in ActiveState Perl 5.22 on Windows by default already, where on Ubuntu 16.04 those needed to be installed using APT.</p>\n\n<p>My own apps and utility stuff are maintained using Subversion and the repos at least partly publicly available to customers as well. 3rd party packages are preferred to be maintained by the package manager of the OS like APT or the Perl distribution, like PPM for ActiveState Perl on Windows. Only if some dependency is not available that way, CPAN comes into play.</p>\n\n<h1>What I would like to achieve...</h1>\n\n<p>...is describing my apps and system wide utility stuff with their dependencies in a way that allows me to distinguish e.g. runtime from development or tests and being able to distinguish optional features and their dependencies. Additionally, I would like to maintain some repos where e.g. my own apps and system wide utilities can be downloaded from.</p>\n\n<h1>What I don't want...</h1>\n\n<p>...is to maintain at multiple places each and every individual package I'm using somewhere, because that doesn't make much sense to me. APT is not necessarily installing individual Perl packages, but instead some higher level distribution containing multiple of those, a complete app for example. If dependencies are introduced, developers need to check anyway if those are available on all platforms of interest, which is not necessarily the case, and how those are distributed on each platform, e.g. APT, PPM or CPAN. So dependencies on individual packages can not be introduced easily without checking how those packages are distributed on which platform. Therefore it seems enough for my needs to manage dependencies ABOVE a package level, which is what mostly gets maintained on platforms anyway.</p>\n\n<p>Additionally, this is how e.g. Maven and Gradle work: One doesn't depend on individual classes like <code>org.apache.commons.lang3.AnnotationUtils</code> or <code>org.apache.commons.io.ByteOrderMark</code>, but on distributions containing those classes like Apache Commons Lang and Apache Commons IO in some specific version. While individual classes are imported in some class in the end, the project description and its dependencies itself doesn't contain that level of detail. I don't see why I should dive deeper in Perl if it works for Java pretty well and if I need to check at distribution level anyway if Perl-dependencies can be fulfilled at all.</p>\n\n<h1>What I need</h1>\n\n<p>So, what I need is some spec/DSL to describe my project with some name, version number, its dependencies and most likely different repos where to get things from. Such a repo would be my own SVN-repos or concepts like APT or PPM, at best even with additional repos for those, if one decides to host such. In the end, some tools like Ansible should be used to install some app of mine while being able to deal with dependencies automatically, using plugins or additional tools or whatever, based on the specs in each app/project.</p>\n\n<h1>What I've found so far</h1>\n\n<p>For Perl this lead me to <a href=\"https://metacpan.org/pod/distribution/App-cpanminus/bin/cpanm\" rel=\"nofollow noreferrer\">cpanm</a>, <a href=\"http://metacpan.org/pod/cpanfile\" rel=\"nofollow noreferrer\">cpanfile</a> and <a href=\"https://metacpan.org/pod/CPAN::Meta::Spec\" rel=\"nofollow noreferrer\">CPAN::Meta::Spec</a>, both being able to distinguish runtime from test, support optional features etc. The latter can even model different repos. But both only seem to support dependencies on package instead of some higher distribution level. One might be able to work around this using some packages acting as placeholder for distributions, though. E.g. by creating <code>sysutils.pm</code> containing <code>package sysutils;</code> and defining some version only. Apps could then depend on that package using the above formats.</p>\n\n<h1>Downsides recognized so far</h1>\n\n<p>But people e.g. recommend to not write <code>CPAN::Meta::Spec</code> manually, but use some <a href=\"http://blogs.perl.org/users/neilb/2017/05/specifying-dependencies-for-your-cpan-distribution.html\" rel=\"nofollow noreferrer\">build and authoring tools</a> instead. The problem with those is that some/most are considered deprecated by the linked blog post itself or <a href=\"https://stackoverflow.com/questions/30765522/cpan-module-prereqs#comment49583542_30765614\">other sources</a> and some examples even are providing manually written <code>CPAN::Meta::Spec</code> to those tools in the end only. And if not, they sometimes simply expect infos of <code>CPAN::Meta::Spec</code> in some custom configuration format, which seems not as well defined as the spec itself. So why use those tools at all instead of writing the spec manually?</p>\n\n<p>Even the <code>CPAN::Meta::Spec</code> itself seems to be problematic, as the most current version 2 seems to prefer <code>JSON</code> for some undocumented reason. That is a bad decision for manually writing and maintaining that spec of course, because <code>JSON</code> lacks comments, which is a no-go for any kind of description maintained by humans in my opinion.</p>\n\n<h1>Questions</h1>\n\n<ol>\n<li><p>So, which format/spec can I use to manually describe some abstract distribution using some name and version, including it's optional features and dependencies? Pretty much what seems to be possible with <code>CPAN::Meta::Spec</code> already, only that package level dependencies seem too low level for me currently.</p></li>\n<li><p>Which tool should be used to resolve dependencies based on the former spec and supports different source-repos for dependencies like APT, PPM and SVN?</p></li>\n<li><p>With things like Ansible coming into play, is it worth it to maintain some Perl-specific description at all anymore or should one simply use Ansible to describe dependencies and let Ansible provide all of those using plugins or whatever?</p></li>\n</ol>\n\n<p>Thanks for your suggestions!</p>\n"}, {"tags": ["perl", "backticks", "qx"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 11003360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31471b3195f8ba8571f1674f9a4efc8?s=128&d=identicon&r=PG&f=1", "display_name": "C\u0103c\u0103r\u0103u", "link": "https://stackoverflow.com/users/11003360/c%c4%83c%c4%83r%c4%83u"}, "edited": false, "score": 0, "creation_date": 1549060446, "post_id": 54487898, "comment_id": 95782556, "body": "those modules are not part of the standard distribution, right?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 101, "user_id": 11003360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31471b3195f8ba8571f1674f9a4efc8?s=128&d=identicon&r=PG&f=1", "display_name": "C\u0103c\u0103r\u0103u", "link": "https://stackoverflow.com/users/11003360/c%c4%83c%c4%83r%c4%83u"}, "edited": false, "score": 0, "creation_date": 1549060475, "post_id": 54487898, "comment_id": 95782565, "body": "@C\u0103c\u0103r\u0103u IPC::System::Simple and Capture::Tiny are not core, but they are pure-perl so they can be <a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow noreferrer\">fatpacked</a> into a script."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1549079131, "post_id": 54487898, "comment_id": 95785857, "body": "@zdim It is functionally identical to qx except for the method in which it takes arguments and its additional error handling. Not to imply that it&#39;s another built-in operator, since it clearly isn&#39;t."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 5, "last_activity_date": 1549060587, "last_edit_date": 1549060587, "creation_date": 1549059649, "answer_id": 54487898, "question_id": 54487856, "link": "https://stackoverflow.com/questions/54487856/use-perls-qx-operator-with-a-list-of-arguments/54487898#54487898", "title": "use perl&#39;s qx{} / `...` operator with a list of arguments", "body": "<p>A list form of the qx operator is provided by the module <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a> as the function <code>capturex</code> (additionally like the other functions in that module, it will throw an exception if there is an execution error or non-zero response code, which you can tweak). Alternatively, you can use <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a> to wrap a core <code>system</code> call and provide the same behavior, but it also has other functions that can wrap STDERR together or separately from STDOUT.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IPC::System::Simple 'capturex';\nmy $output = capturex $prog, @args;\n\nuse Capture::Tiny 'capture_stdout';\nmy ($output, $exit) = capture_stdout { system $prog, @args };\n# standard system() error checking required here\n</code></pre>\n\n<p>In core the pipe open is for the most part the only option, aside from <a href=\"https://perldoc.pl/IPC::Open3\" rel=\"nofollow noreferrer\">IPC::Open3</a> which is similarly complex but allows directing STDERR as well.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1549139892, "last_edit_date": 1549139892, "creation_date": 1549063270, "answer_id": 54488399, "question_id": 54487856, "link": "https://stackoverflow.com/questions/54487856/use-perls-qx-operator-with-a-list-of-arguments/54488399#54488399", "title": "use perl&#39;s qx{} / `...` operator with a list of arguments", "body": "<p>Here are a few simple options.</p>\n\n<ul>\n<li><p><a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a> + <code>qx</code>:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\nmy $cmd = shell_quote(@cmd);\nmy $output = `$cmd`;\n</code></pre></li>\n<li><p><a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a>:</p>\n\n<pre><code>use IPC::System::Simple qw( capturex );\nmy $output = capturex(@cmd)\n</code></pre></li>\n<li><p><a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a>:</p>\n\n<pre><code>use IPC::Run3 qw( run3 );\nrun3(\\@cmd, \\undef, \\my $output);\n</code></pre></li>\n<li><p><a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a>:</p>\n\n<pre><code>use IPC::Run qw( run );\nrun(\\@cmd, \\undef, \\my $output);\n</code></pre></li>\n</ul>\n\n<p>The first solution involves a shell, but none of the others.</p>\n"}, {"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1549247345, "post_id": 54500161, "comment_id": 95822435, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/187828/discussion-on-answer-by-ccru-use-perls-qx-operator-with-a-list-of\">moved to chat</a>. Please <a href=\"https://stackoverflow.com/posts/54500161/edit\">edit</a> the answer to incorporate any relevant information from the chat discussion."}], "tags": [], "owner": {"reputation": 101, "user_id": 11003360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31471b3195f8ba8571f1674f9a4efc8?s=128&d=identicon&r=PG&f=1", "display_name": "C\u0103c\u0103r\u0103u", "link": "https://stackoverflow.com/users/11003360/c%c4%83c%c4%83r%c4%83u"}, "is_accepted": true, "score": 1, "last_activity_date": 1549171271, "last_edit_date": 1549171271, "creation_date": 1549170924, "answer_id": 54500161, "question_id": 54487856, "link": "https://stackoverflow.com/questions/54487856/use-perls-qx-operator-with-a-list-of-arguments/54500161#54500161", "title": "use perl&#39;s qx{} / `...` operator with a list of arguments", "body": "<p>It turns out that (unfortunately) this wasn't an overlook from my part -- the only solution really is to do it with <code>open -|</code> or use one of the external modules listed in the other answers.</p>\n\n<p>The backtick <a href=\"https://perl5.git.perl.org/perl.git/blob/refs/heads/blead:/pp_sys.c#l281\" rel=\"nofollow noreferrer\">implementation</a> (whether invoked by <code>qx/.../</code>, <code>`...`</code>, or <code>readpipe</code>) is deep down hardwired to accept a single string argument:</p>\n\n<pre><code>PP(pp_backtick)\n{\n    dSP; dTARGET;\n    PerlIO *fp;\n    const char * const tmps = POPpconstx;\n    const U8 gimme = GIMME_V;\n    const char *mode = \"r\";\n\n    TAINT_PROPER(\"``\");\n    if (PL_op-&gt;op_private &amp; OPpOPEN_IN_RAW)\n        mode = \"rb\";\n    else if (PL_op-&gt;op_private &amp; OPpOPEN_IN_CRLF)\n        mode = \"rt\";\n    fp = PerlProc_popen(tmps, mode);\n    ...\n</code></pre>\n\n<p>Notice the <code>POPpconstx</code> which pops a single argument from the stack and the use of <code>PerlProc_popen</code> instead of <code>PerlProc_popen_list</code>.</p>\n"}], "owner": {"reputation": 101, "user_id": 11003360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31471b3195f8ba8571f1674f9a4efc8?s=128&d=identicon&r=PG&f=1", "display_name": "C\u0103c\u0103r\u0103u", "link": "https://stackoverflow.com/users/11003360/c%c4%83c%c4%83r%c4%83u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 1, "accepted_answer_id": 54500161, "answer_count": 3, "score": 6, "last_activity_date": 1549244582, "creation_date": 1549059435, "last_edit_date": 1549244582, "question_id": 54487856, "link": "https://stackoverflow.com/questions/54487856/use-perls-qx-operator-with-a-list-of-arguments", "title": "use perl&#39;s qx{} / `...` operator with a list of arguments", "body": "<p><code>system</code>, <code>exec</code>, <code>open '|-'</code>, <code>open2</code>, etc. all allow me to specify the command to run as a list of arguments that will be passed directly to <code>execvp</code> instead of run through a shell.</p>\n\n<p>Even if <code>perl</code> is smart enough to run it directly if it looks like a \"simple\" command, that saves me the trouble of correctly shell-escaping the arguments with all the nasty pitfalls that it entails.</p>\n\n<p>Example:</p>\n\n<pre><code>open my $out, '|-', $prog, @args;\nsystem $prog, @args;\nexec $prog, @args;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>open my $out, \"|$prog @args\";\nsystem \"$prog @args\";\nexec \"$prog @args\";\n</code></pre>\n\n<p>Is there such an equivalent for the <code>qx//</code> operator? Or do you have to always do it by hand eg.</p>\n\n<pre><code>sub slurpcmd {\n   open my $h, '-|', @_ or die \"open $_[0]|: $!\";\n   local $/ unless wantarray;\n   &lt;$h&gt;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549045580, "post_id": 54485081, "comment_id": 95777256, "body": "Dynamically importing stuff is done by <code>require</code>. Consider reading the <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">documentation of use</a>, which tells you the exact incantation you need for dynamically loading a module."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1549048286, "post_id": 54485081, "comment_id": 95778392, "body": "If you have modules in a position related to the script, use <code>use lib $FindBin::RealBin&#47;...&quot;;</code>. But if you have modules installed elsewhere, set env var <code>PERL5LIB</code> to its location"}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549049136, "post_id": 54485081, "comment_id": 95778719, "body": "@ikegami yes but I want both. First to import contants package which relative (using <code>FindBin</code>) and then use a const (which is a path) to import the area from it."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 0, "creation_date": 1549052240, "post_id": 54485081, "comment_id": 95779884, "body": "@TTaJTa4 If I well understood your question, you need to do some dynamic loading of modules at runtime.. I&#39;m right? If yes, see <a href=\"https://perldoc.perl.org/Module/Load.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Module/Load.html</a> core module. You can even use it in BEGIN blocks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "edited": false, "score": 1, "creation_date": 1549053439, "post_id": 54485081, "comment_id": 95780315, "body": "@Hannibal, Nope, they want to load a module (Data::TreeDumper) at compile-time. The location of that module is to be provided by a variable exported by their own module (<code>constants.pm</code>). There&#39;s a bug in their module (<code>constants.pm</code>) with which the OP needs help, but they are refusing to show it. Therefore, the question is off-topic as it stands."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1549131914, "post_id": 54485081, "comment_id": 95797532, "body": "The posted code works. While having a non-fatal bug that results in a warning, while changing <code>@INC</code> in a module (which doesn&#39;t make any sense), and while being extremely complex (especially for someone search for simplicity), the posted code does add <code>&#47;p&#47;disk&#47;tools&#47;perl&#47;5.26.1&#47;lib64&#47;site_perl</code> to <code>@INC</code>. If you           still get the error you claim you get, it&#39;s because the module isn&#39;t where you claim it is, or there&#39;s some issue (e.g. permissions) that prevents it from being accessed. Cheers. You sure made it hard on yourself and everyone else, but you finally got there."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1549142064, "post_id": 54485081, "comment_id": 95800350, "body": "@ikegami OMG. You clearly miss the issue and you behave like you know it all. <code>@INC</code> does not points to the <code>$PATH_TO_THE_MODULE</code> because it fails in compile time and <code>$PATH_TO_THE_MODULE</code> is know only in run time. In order the compiler to read <code>$PATH_TO_THE_MODULE</code> he needs to know it in RUNTIME. That is my question, how can I get the compiler to know about that variable in compile time."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1549143177, "post_id": 54485081, "comment_id": 95800603, "body": "It is not a bug thread, rather its a question on how can I make the compiler know the variable name in run-time so it could use <code>use $path;</code>. It does not work because <code>$path</code> is known only in run-time (even if it is a const). Why are you all miss it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1549144599, "post_id": 54485081, "comment_id": 95800928, "body": "Re &quot;<i>because it fails in compile time and $PATH_TO_THE_MODULE is know only in run time.</i>&quot;, You are mistaken. The code you posted compiles just fine, and <code>$PATH_TO_THE_MODULE</code> is both created and initialized while <code>test.pm</code> is being compiled and before <code>use lib $PATH_TO_THE_MODULE;</code> is compiled and executed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1549144978, "post_id": 54485081, "comment_id": 95801019, "body": "Re &quot;<i>is known only in run-time (even if it is a const)</i>&quot;, 1) It&#39;s not a const, 2) There&#39;s no such thing as a run-time const 3) It&#39;s known an compile-time 4) While it&#39;s initialised during constants.pm&#39;s runtime, that happens during test.pm&#39;s compile time. Specifically, before <code>use lib $PATH_TO_THE_MODULE;</code> is compiled and executed."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549149194, "post_id": 54498064, "comment_id": 95801917, "body": "<i><code>import Foo;</code></i> - or in a slightly less misleading syntax, <code>Foo-&gt;import();</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549149309, "post_id": 54498064, "comment_id": 95801932, "body": "@melpomene, That&#39;s actually more misleading. <code>import</code> is an operator, not a method name."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1549149356, "post_id": 54498064, "comment_id": 95801946, "body": "Since when? <code>import</code> is absolutely a method name and called as a method (which is why inheriting from <code>Exporter</code> gives you access to its <code>import</code> method)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549149559, "post_id": 54498064, "comment_id": 95801983, "body": "Let me rephrase. It&#39;s documented as an operator, and it doesn&#39;t behave like a method call (it not an error if the method doesn&#39;t exist). Seeing as it&#39;s different from a normal method call, it&#39;s good to make it look different."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549149635, "post_id": 54498064, "comment_id": 95802000, "body": "It is <a href=\"https://perldoc.pl/functions/use\" rel=\"nofollow noreferrer\">documented as a method call</a>: &quot;<i>[<code>use Module LIST</code>] is exactly equivalent to <code>BEGIN { require Module; Module-&gt;import( LIST ); }</code></i>&quot;"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549149796, "post_id": 54498064, "comment_id": 95802033, "body": "I just checked; both <code>perldoc -f use</code> and <code>perldoc -f import</code> refer to <code>import</code> as a normal (user-defined) subroutine / method. Where is it documented as an operator?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549152414, "post_id": 54498064, "comment_id": 95802478, "body": "&quot;perldoc -f&quot; only lists operators. It returns information from perlfunc, which is the docs for named operators."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549159304, "post_id": 54498064, "comment_id": 95803546, "body": "It also lists a few other things, such as <code>tr</code>, <code>DESTROY</code>, <code>__SUB__</code>, <code>CORE</code>, <code>__DATA__</code> or <code>import</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549159403, "post_id": 54498064, "comment_id": 95803562, "body": "All of which are special."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549160557, "post_id": 54498064, "comment_id": 95803705, "body": "Except it&#39;s wrong. Like I already said, <code>import</code> doesn&#39;t behave like an ordinary method. Pretending it&#39;s an ordinary method is therefore a bad thing."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1549192404, "post_id": 54498064, "comment_id": 95808613, "body": "The only thing special about it is that you can call it without an error even if it doesn&#39;t exist (I believe there&#39;s a special case for method lookup in the interpreter?). But that happens regardless of the calling syntax. Besides, indirect object syntax can be used with other methods as well: <code>foo bar $baz</code> means <code>bar-&gt;foo($baz)</code>, and <code>import Foo LIST</code> means <code>Foo-&gt;import(LIST)</code>. It&#39;s just that the latter syntax is less ambiguous."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1549212228, "post_id": 54498064, "comment_id": 95813912, "body": "But you don&#39;t use it for other method calls, so that&#39;s irrelevant"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1549146766, "last_edit_date": 1549146766, "creation_date": 1549145886, "answer_id": 54498064, "question_id": 54485081, "link": "https://stackoverflow.com/questions/54485081/importing-a-module-from-a-global-area-in-perl/54498064#54498064", "title": "Importing a module from a global area in Perl", "body": "<p>You claim your code doesn't work, and it's because the initialization of <code>$PATH_TO_THE_MODULE</code> happens at run-time.</p>\n\n<p>Well, your code does work, and it's because there isn't a single compile phase and a single run phase.</p>\n\n<p>Let's say you had the following script:</p>\n\n<pre><code>use constants ':all';\nuse lib $PATH_TO_THE_MODULE;\nuse Data::TreeDumper qw();\nprint \"Hi\\n\";\n</code></pre>\n\n<p>And let's simplify your module to the following:</p>\n\n<pre><code>package constants;\nuse Exporter qw( import );\nour @EXPORT_OK = qw( $PATH_TO_THE_MODULE );\nour %EXPORT_TAGS = ( all =&gt; \\@EXPORT_OK );\nour $PATH_TO_THE_MODULE = \"/path/to/site_perl\";\n</code></pre>\n\n<p>Keeping in mind that <code>use Foo;</code> is roughly equivalent to <code>BEGIN { use Foo; import Foo; }</code> and that <code>BEGIN</code> blocks are executed as soon as they are compiled, the following describes what happens when you execute the script:</p>\n\n<ol>\n<li>Compile <code>script.pl</code>\n\n<ol>\n<li>Compile <code>use constants ':all';</code></li>\n<li>Execute <code>require constants;</code>\n\n<ol>\n<li>Compile <code>constants.pm</code>\n\n<ol>\n<li>Compile <code>package constants;</code></li>\n<li>Compile <code>use Exporter qw( import );</code>\n\n<ol>\n<li>Execute <code>require Exporter;</code>\n\n<ol>\n<li>Compile <code>Exporter.pm</code> [...]</li>\n<li>Execute <code>Exporter.pm</code> [...]</li>\n</ol></li>\n<li>Execute <code>import Exporter qw( import );</code></li>\n</ol></li>\n<li>Compile <code>our @EXPORT_OK = qw( $PATH_TO_THE_MODULE );</code></li>\n<li>Compile <code>our %EXPORT_TAGS = ( all =&gt; \\@EXPORT_OK );</code></li>\n<li>Compile <code>our $PATH_TO_THE_MODULE = \"/path/to/site_perl\";</code></li>\n</ol></li>\n<li>Execute <code>constants.pm</code>\n\n<ol>\n<li>Execute <code>our @EXPORT_OK = qw( $PATH_TO_THE_MODULE );</code></li>\n<li>Execute <code>our %EXPORT_TAGS = ( all =&gt; \\@EXPORT_OK );</code></li>\n<li>Execute <code>our $PATH_TO_THE_MODULE = \"/path/to/site_perl\";</code></li>\n</ol></li>\n</ol></li>\n<li>Execute <code>import constants;</code></li>\n<li>Compile <code>use lib $PATH_TO_THE_MODULE;</code></li>\n<li>Execute <code>require lib;</code>\n\n<ol>\n<li>Compile <code>lib.pm</code> [...]</li>\n<li>Execute <code>lib.pm</code> [...]</li>\n</ol></li>\n<li>Execute <code>import lib $PATH_TO_MODULE;</code></li>\n<li>Compile <code>use Data::TreeDumper qw();</code></li>\n<li>Execute <code>require Data::TreeDumper;</code>\n\n<ol>\n<li>Compile <code>Data/TreeDumper.pm</code> [...]</li>\n<li>Execute <code>Data/TreeDumper.pm</code> [...]</li>\n</ol></li>\n<li>Compile <code>print \"Hi\\n\";</code></li>\n</ol></li>\n<li>Execute <code>script.pl</code>\n\n<ol>\n<li>Execute <code>print \"Hi\\n\";</code></li>\n</ol></li>\n</ol>\n\n<p>From the above, we see the following happening:</p>\n\n<ol>\n<li>[1.2.1.5] <code>$constants::PATH_TO_THE_MODULE</code> is created</li>\n<li>[1.2.2.3] <code>$constants::PATH_TO_THE_MODULE</code> is set to the path</li>\n<li>[1.3] <code>$main::PATH_TO_THE_MODULE</code> is created as an alias to <code>$constants::PATH_TO_THE_MODULE</code></li>\n<li>[1.6] <code>$main::PATH_TO_THE_MODULE</code> is added to <code>@INC</code></li>\n<li>[1.8] Data::TreeDumper is loaded</li>\n</ol>\n\n<hr>\n\n<p>It's ironic that you claim that only one of the following snippets work and the other one doesn't when they are fundamentally the same:</p>\n\n<pre><code>use FindBin qw( $RealBin );\nuse lib $RealBin;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use constants qw( $PATH_TO_THE_MODULE );\nuse lib $PATH_TO_THE_MODULE;\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1549146766, "creation_date": 1549045145, "last_edit_date": 1549066031, "question_id": 54485081, "link": "https://stackoverflow.com/questions/54485081/importing-a-module-from-a-global-area-in-perl", "title": "Importing a module from a global area in Perl", "body": "<p>So, I'm trying to import a module into a Perl package and I try to make it in the cleanest way possible. First, I read some of the previous threads (like: <a href=\"https://stackoverflow.com/questions/185114/how-do-i-use-a-perl-module-in-a-directory-not-in-inc\">link</a>).</p>\n\n<p>The module is located in the following path: <code>/p/disk/tools/perl/5.26.1/lib64/site_perl</code>. The module is <code>Data::TreeDumper</code>.</p>\n\n<p>I used the <code>FindBin</code> module in order to import it:</p>\n\n<pre><code>BEGIN {\n    use Exporter ();\n    use vars qw(@ISA @EXPORT_OK  %EXPORT_TAGS);\n    use FindBin;\n    use lib \"$FindBin::RealBin\";\n    use lib \"$FindBin::Bin\";\n    use lib \"$FindBin::Bin/../lib\";\n    use lib \"/p/disk/tools/perl/5.26.1/lib64/site_perl\";\n    @ISA       = qw(Exporter);\n    @EXPORT_OK = qw(# ALL subs\n                   );\n    %EXPORT_TAGS = (all =&gt; [@EXPORT_OK]);\n}\nuse constants qw(:all);\nuse Data::TreeDumper;\n</code></pre>\n\n<p>It works for me, but the path is hardcoded. I would like to include the path into the <code>constants</code> package (my package). But it kind of a circle because in order to use the constants (and the path) I need to import it first, but then, from where? huh.</p>\n\n<p>So I thought to remove the <code>use lib \"/p/disk/tools/perl/5.26.1/lib64/site_perl\";</code> line and somehow import first the <code>constants</code> file and then do something like:</p>\n\n<pre><code>use constants qw(:all);\nuse lib $PATH_TO_THE_MODULE; # represents path to the module area\nuse Data::TreeDumper;\n</code></pre>\n\n<p>But It does not work for. Is it possible to achieve it?</p>\n\n<p>Before trying to import the module (didn't know it was installed in a global place), I installed it locally and it worked. But I prefer not to keep the non-mine modules in the same directory as the project. So IT guys installed the module in a global area and I just asking if it is possible to import it in a clean way.</p>\n\n<p><strong>EDIT:</strong> I'm trying to insert the path <code>/p/disk/tools/perl/5.26.1/lib64/site_perl</code> into the constants file in a global variable (let's call it <code>$PATH_TO_THE_MODULE</code>). Then I want to import from the other package the <code>constants</code> package so I use <code>FindBin</code>. And Then I want to import the module using the <code>$PATH_TO_THE_MODULE</code> variable which points to the area of the module. So it should look something like this:</p>\n\n<pre><code>use constants qw(:all);\nuse lib $PATH_TO_THE_MODULE; # represents a path to the module area\nuse Data::TreeDumper;\n</code></pre>\n\n<p>But it does not work. I tried to switch to <code>require</code> because I understood that <code>require</code> will use dynamically. But it also fails with <code>Can't locate Data/TreeDumper.pm in @INC</code>.</p>\n\n<p>So if we connect both pieces of code we get:</p>\n\n<pre><code>package test;\n$|=1;\nuse strict;\nuse warnings;\nBEGIN {\n    use Exporter ();\n    use vars qw(@ISA @EXPORT_OK  %EXPORT_TAGS);\n    use FindBin;\n    use lib \"$FindBin::RealBin\";\n    use lib \"$FindBin::Bin\";\n    use lib \"$FindBin::Bin/../lib\";\n    @ISA       = qw(Exporter);\n    @EXPORT_OK = qw(# ALL subs\n                   );\n    %EXPORT_TAGS = (all =&gt; [@EXPORT_OK]);\n}\nuse constants qw(:all);\nuse lib $PATH_TO_THE_MODULE; # represents a path to the module area\nuse Data::TreeDumper;\nprint \"Hi\\n\";\n</code></pre>\n\n<p>constants package:</p>\n\n<pre><code>package constants;\n$|=1;\nuse strict;\nuse warnings;\nBEGIN {\n    use Exporter ();\n    use vars qw(@ISA @EXPORT_OK  %EXPORT_TAGS);\n    use FindBin;\n    use lib \"$FindBin::RealBin\";\n    use lib \"$FindBin::Bin\";\n    use lib \"$FindBin::Bin/../lib\";\n    @ISA       = qw(Exporter);\n    @EXPORT_OK = qw($PATH_TO_THE_MODULE);\n    %EXPORT_TAGS = (all =&gt; [@EXPORT_OK]);\n}\nour $PATH_TO_THE_MODULE = \"/p/disk/tools/perl/5.26.1/lib64/site_perl\";\n</code></pre>\n\n<p>If I'll remove <code>use lib $PATH_TO_THE_MODULE;</code> and <code>use Data::TreeDumper;</code> from the <code>test</code> package and I'll print <code>$PATH_TO_THE_MODULE</code>, it will compile and print the path as expected.</p>\n"}, {"tags": ["perl", "cpan", "metacpan"], "answers": [{"comments": [{"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549042363, "post_id": 54484238, "comment_id": 95775883, "body": "OTOH, it doesn&#39;t make much sense to me to maintain individual required packages at two places, one being the package actually requiring and the other <code>META.yml</code>. In the latter case with no context or hierarchy showing why it is required and can be easily forgotten to maintain. So I would I need some automated process to maintain those things, making everything more complicated, while working on the level of a distribution with different repos seems to work pretty good for e.g. Maven and Gradle."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549042463, "post_id": 54484238, "comment_id": 95775935, "body": "It only works until it doesn&#39;t anymore. And there are CPAN tools for maintaining META.yml - I&#39;ve almost never edited that myself, relying on Module::Build or similar to do it for me as part of the <code>dist</code> action."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549042603, "post_id": 54484238, "comment_id": 95776011, "body": "<code>Module::Build</code> is considered a failed experiment by some people as well, Maven and Gradle work for pretty large projects and automated tools e.g. can&#39;t be used easily with things like different features with different requirements within one app. I have such apps requiring different 3rd party libs depending on runtime configuration, e.g. GD or OpenOffice-Libs or ... <a href=\"https://stackoverflow.com/questions/30765522/cpan-module-prereqs#comment49583542_30765614\" title=\"cpan module prereqs%23comment49583542_30765614\">stackoverflow.com/questions/30765522/&hellip;</a>"}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549042796, "post_id": 54484238, "comment_id": 95776093, "body": "In the end, I can always switch to individual packages if it doesn&#39;t work on a distribution level anymore, but not the other way around if CPAN::Meta::Spec simply doesn&#39;t support it. Hence my question."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549042935, "post_id": 54484238, "comment_id": 95776145, "body": "Module::Build isn&#39;t the only one that can update META.yml for you. It&#39;s just the one I remember off the top of my head."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549057665, "post_id": 54484238, "comment_id": 95781731, "body": "@ThorstenSch&#246;ning Every authoring tool maintains META.json for you, including <a href=\"https://perldoc.pl/ExtUtils::MakeMaker#make-distdir\" rel=\"nofollow noreferrer\">ExtUtils::MakeMaker</a>. You should not be caring about META.yml or META.json manually, ever, but instead <a href=\"http://blogs.perl.org/users/neilb/2017/05/specifying-dependencies-for-your-cpan-distribution.html\" rel=\"nofollow noreferrer\">specifying your prereqs for your authoring tool</a>. META.yml is also the outdated format, though you should include both for compatibility."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549058894, "post_id": 54484238, "comment_id": 95782136, "body": "@ThorstenSch&#246;ning If you want a system to specify prereqs that is independent of authoring tools, look into <a href=\"http://metacpan.org/pod/cpanfile\" rel=\"nofollow noreferrer\">cpanfile</a>, which can be used by several authoring tools and also by <a href=\"http://metacpan.org/pod/cpanm\" rel=\"nofollow noreferrer\">cpanm</a>, <a href=\"http://metacpan.org/pod/Carton\" rel=\"nofollow noreferrer\">Carton</a>, and on its own via <a href=\"https://metacpan.org/pod/Module::CPANfile\" rel=\"nofollow noreferrer\">Module::CPANfile</a>. But it will still be package-based."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549060147, "post_id": 54484238, "comment_id": 95782486, "body": "@ThorstenSch&#246;ning Also something like <a href=\"https://metacpan.org/pod/scan-prereqs-cpanfile\" rel=\"nofollow noreferrer\">scan-prereqs-cpanfile</a> may be of interest, though prereq scanning is an imperfect art so it can be fooled."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 3, "last_activity_date": 1549041638, "creation_date": 1549041638, "answer_id": 54484238, "question_id": 54484092, "link": "https://stackoverflow.com/questions/54484092/how-to-make-prereqs-of-cpanmetaspec-require-a-distribution-instead-of-a-pa/54484238#54484238", "title": "How to make &quot;prereqs&quot; of CPAN::Meta::Spec require a distribution instead of a package?", "body": "<p>That's really not what you want to do. You want to pre-req what you actually <em>require</em>. So, for example, if you need <code>File::Spec</code>, that's what you need, regardless of whether it comes from perl core or from a separate CPAN distribution.</p>\n\n<p>I've seen cases where certain modules have moved from CPAN to core, or vice versa. By requiring the module directly, you don't need to ship new releases of your dependent distributions simply because someone you depend on changed their method of distribution.</p>\n\n<p>I've also seen cases where certain modules are split off from their original distributions when it was determined they were valuable as standalone modules. Depending on the module means that you no longer drag in a bunch of other modules for a simple dependency.</p>\n\n<p>What you're more or less looking for is akin to the <code>Task::*</code> modules. No real logic in most of them, just a list of further dependencies.</p>\n"}, {"comments": [{"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549097297, "post_id": 54487530, "comment_id": 95788721, "body": "The mentioned blog post either writes <code>META.*-structures manually in some build tool, where I don&#39;t see the need to use that tool at all, or suggests tools others see as deprecated already or mentions tools itself saying those are not recommended anymore. </code>cpanfile` doesn&#39;t seem to provide any benefit to <code>META.*</code> as well, it doesn&#39;t e.g. seem to handle different repos as install source, preferable defined per distribution like is the case with Maven and Gradle."}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1549097490, "post_id": 54487530, "comment_id": 95788753, "body": "I&#39;ve started my research with <code>cpanfile</code>, which lead me to <code>CPAN::Meta::Spec</code> and all those mentioned build/authoring tools I came across either were not recommended anymore or simply didn&#39;t fit my needs regarding repo definitions, distinguishing optional features and their requirements properly within apps etc. This whole topic currently seems like a lot of redundant approaches and mixing high with too low levels to me. I more or less seem to only need an approach like Maven or Gradle."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1549058789, "last_edit_date": 1549058789, "creation_date": 1549057381, "answer_id": 54487530, "question_id": 54484092, "link": "https://stackoverflow.com/questions/54484092/how-to-make-prereqs-of-cpanmetaspec-require-a-distribution-instead-of-a-pa/54487530#54487530", "title": "How to make &quot;prereqs&quot; of CPAN::Meta::Spec require a distribution instead of a package?", "body": "<p>The Perl dependency system works entirely on package names, on multiple levels. When a CPAN distribution is uploaded, each package within is indexed by PAUSE, which also checks if the uploader has <a href=\"https://cpanmeta.grinnz.com/perms\" rel=\"nofollow noreferrer\">permissions</a> for that package and that the package has a newer version than the <a href=\"https://cpanmeta.grinnz.com/packages\" rel=\"nofollow noreferrer\">currently indexed package</a>. None of these checks care about the distribution as a whole (though the indexer does do other checks at that level).</p>\n\n<p>Then, when a CPAN client sees a dependency, or you tell it to install something, it checks the index for that package name, which tells it what distribution release to install. If it depends on a certain version, that is checked against the <code>$VERSION</code> declared in that package if you have it installed; whereas once a distribution is installed, its \"version\" is no longer tracked. The distribution level is almost entirely meaningless except that it is what is ultimately downloaded and installed to satisfy these dependencies. This is important, because modules can and do move between distributions, maintaining their version increments, and the package index will always tell you which distribution to get the version you need.</p>\n\n<p>As you noticed, the <code>perl</code> dependency is weird. It's a special case that has been there forever, as a convention to declare what version of Perl you require, you declare a runtime requirement of <code>perl</code>. It is not an indexed module, and every CPAN client and other consumer of CPAN metadata special cases this to either ignore it or treat it as a minimum Perl version, rather than something that can be installed. There's no way to extend this to work for distributions in general, and it would be a bad idea to try.</p>\n\n<p>As an additional note, the CPAN meta spec is a specification for the file named <code>META.json</code> included in CPAN distributions (<code>META.yml</code> is the legacy version), but this file is automatically generated by your authoring tool. It should never be manually created, though you may have your authoring tool manually add certain keys (in which case reading the spec is important), including <code>prereqs</code>. See <a href=\"http://blogs.perl.org/users/neilb/2017/05/specifying-dependencies-for-your-cpan-distribution.html\" rel=\"nofollow noreferrer\">neilb's blog post</a> for how to specify dependencies for various authoring tools, which will then transpose these into the generated META file, and also how to use cpanfiles to specify dependencies in general.</p>\n"}], "owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549096473, "creation_date": 1549040942, "last_edit_date": 1549096473, "question_id": 54484092, "link": "https://stackoverflow.com/questions/54484092/how-to-make-prereqs-of-cpanmetaspec-require-a-distribution-instead-of-a-pa", "title": "How to make &quot;prereqs&quot; of CPAN::Meta::Spec require a distribution instead of a package?", "body": "<p>I'm researching about how to package some of my Perl apps and better manage their dependencies to make distribution easier for me and my customers, which most likely doesn't include uploading to CPAN at all. Instead, I would provide custom repos if necessary or, more likely, access to SCMs like Subversion.</p>\n\n<p><a href=\"https://metacpan.org/pod/CPAN::Meta::Spec#prereqs1\" rel=\"nofollow noreferrer\">CPAN::Meta::Spec</a> seems to provide what I need to describe my apps, their dependencies and even where to get them from, but what I'm wondering is about the level of detail of pre-requisites. <a href=\"https://metacpan.org/pod/CPAN::Meta::Spec#prereqs1\" rel=\"nofollow noreferrer\">The spec</a> contains the following sentence:</p>\n\n<blockquote>\n  <p>The set of relations must be specified as a Map of package names to version ranges.</p>\n</blockquote>\n\n<p>Requiring packages seems a little too low level for my needs, I would prefer requiring distributions instead. Pretty much the level (from my understanding) tools like Maven and Gradle work at, e.g. Apache Commons Lang vs. Apache Commons IO etc. instead of individual classes like <code>org.apache.commons.lang3.AnnotationUtils</code> or <code>org.apache.commons.io.ByteOrderMark</code>. OTOH, the example in the docs contains the following lines:</p>\n\n<pre><code>requires =&gt; {\n  'perl'          =&gt; '5.006',\n  'File::Spec'    =&gt; '0.86',\n  'JSON'          =&gt; '2.16',\n},\n</code></pre>\n\n<p>The line containing <code>perl</code> doesn't look like a package to me and I didn't find some <code>package perl</code> or <code>perl.pm</code> anywhere on my system. Seems to me like that is handled differently to the other things of the example.</p>\n\n<p>I have a system wide folder containing e.g. some utility packages, which seems comparable to some abstract <code>perl</code> to me. That folder should get defined as one distribution, maintain a version number for all of the packages in that folder and therefore should allow other apps to <code>require</code> that whole thing. If I understand the docs correctly, I would need to create not only the <code>META.yml</code> in the folder, but additionally some e.g. <code>sysutils.pm</code> containing <code>package sysutils;</code> and defining some version.</p>\n\n<p><strong>Is there some way to avoid creating that file and really <code>require</code> the distribution itself only?</strong></p>\n\n<p>The <code>META.yml</code> already contains a name and version on it's own, so looks like some abstract thing one could <code>require</code> in theory. I don't see the need of adding an additional <code>.pm</code>-file representing the distribution itself only to allow <code>require</code> to work. It wouldn't contain any business logic in my case.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "docker", "debugging", "dancer", "starman"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1549050586, "post_id": 54484009, "comment_id": 95779241, "body": "<a href=\"https://stackoverflow.com/questions/32013380/how-can-you-invoke-interactive-perl-debugging-with-hypnotoad-or-morbo\">Similar question about Mojolicious</a>"}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 6181390, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mN8POmelc0o/AAAAAAAAAAI/AAAAAAAAAEM/Be4BQF0mcBw/photo.jpg?sz=128", "display_name": "Alejandro Decchi", "link": "https://stackoverflow.com/users/6181390/alejandro-decchi"}, "is_accepted": false, "score": 1, "last_activity_date": 1549054199, "creation_date": 1549054199, "answer_id": 54486973, "question_id": 54484009, "link": "https://stackoverflow.com/questions/54484009/remote-debuging-perl-dancer-starman-docker/54486973#54486973", "title": "Remote Debuging Perl, Dancer, Starman, Docker", "body": "<p>To MAP the application, the application folder in the server or container and in the machine that will act as debugger have to be in the same location, if not we can debug the application.\nDo not forget to expose port in container.</p>\n"}], "owner": {"reputation": 73, "user_id": 6181390, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mN8POmelc0o/AAAAAAAAAAI/AAAAAAAAAEM/Be4BQF0mcBw/photo.jpg?sz=128", "display_name": "Alejandro Decchi", "link": "https://stackoverflow.com/users/6181390/alejandro-decchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1549054199, "creation_date": 1549040616, "question_id": 54484009, "link": "https://stackoverflow.com/questions/54484009/remote-debuging-perl-dancer-starman-docker", "title": "Remote Debuging Perl, Dancer, Starman, Docker", "body": "<p>Hi stackoverflow users,</p>\n\n<p>I am using:\n - Perl \n - Dancer\n - Starman\n - Camelcade\n - Intellij</p>\n\n<p>I built a container with the web application. I configure the environment variables requires by Camelcade.\nwhen I run the debug:</p>\n\n<ul>\n<li>perl -d:Camelcadedb web.pl</li>\n</ul>\n\n<p>It only debug the startup perl file, that calls Dancer and then finish there with Dancer and Starman running, but not all the web application is in debug mode, because when I invoke some endpoint it is not debugging.\nMy idea is when I invoke to URL and It has a break point, It stop there.\nSomeone can give an idea, what is going on ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1549040682, "post_id": 54483979, "comment_id": 95775107, "body": "Why would you call <code>home</code> from the signal handler, when your code is already in <code>home</code> as you never exit it?"}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1549040820, "post_id": 54483979, "comment_id": 95775178, "body": "ah! after the input , I need to call another subroutine , in which some processes take some time , so I want to return to <code>home()</code> in that case"}, {"owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "edited": false, "score": 1, "creation_date": 1549040951, "post_id": 54483979, "comment_id": 95775245, "body": "+1, good question, but please capitalize the first letter of each sentence. Also, it is usual in English to use commas as the comment you are reading does, with a space after but not before."}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1549041893, "post_id": 54484050, "comment_id": 95775664, "body": "Yeah it does work , but supposing that i am having double loop , I mean after the input im gonna loop the string , need I to flag it?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1549042064, "post_id": 54484050, "comment_id": 95775747, "body": "I think as long as you&#39;re not calling <code>$term-&gt;readline()</code> (or do other I/O) before entering the outer loop again, you should be fine."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 4, "last_activity_date": 1549042113, "last_edit_date": 1549042113, "creation_date": 1549040792, "answer_id": 54484050, "question_id": 54483979, "link": "https://stackoverflow.com/questions/54483979/perl-crtl-c-ignored-when-calling-subroutine-instead-of-exiting/54484050#54484050", "title": "Perl : CRTL C ignored when calling subroutine instead of exiting", "body": "<p>You should not call <code>home()</code> in your signal handler.</p>\n\n<p>Just set a flag that you check in your input loop. When <code>$term-&gt;readline()</code> returns, because it was interrupted by CTRL-C, check that the flag was set, reset it and continue to loop.</p>\n\n<p>Here is your updated code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Term::ReadLine;\n\n$SIG{'INT'} = 'INT_handler';\nmy $interrupted;\nsub INT_handler {\n    $interrupted++;\n}\n\nmy $term = Term::ReadLine-&gt;new('Simple Perl calc');\n\nsub home {\n    my $prompt = \"\\$&gt; \";\n    my $OUT = $term-&gt;OUT || \\*STDOUT;\n\n    while ( defined ($_ = $term-&gt;readline($prompt)) || $interrupted ) {\n        if ($interrupted) {\n            $interrupted = 0;\n            print \"\\n[+] Aborting\\n\";\n            next;\n        }\n        my $com = $_;\n        print $com.\"\\n\";\n        if ($com eq 'exit') {\n            exit;\n        }\n    }\n}\n\nhome();\n\nexit 0;\n</code></pre>\n\n<p>Test output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n$&gt; test\ntest\n$&gt; ^C\n\n[+] Aborting\n$&gt; ^C\n\n[+] Aborting\n$&gt; sdasd^C\n\n[+] Aborting\n$&gt; exit\nexit\n</code></pre>\n\n<p><strong>NOTE:</strong> there seems to be one issue still: you need to press return to get the prompt back. Probably something to do with how <code>Term::Readline</code> works.</p>\n"}], "owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 54484050, "answer_count": 1, "score": 4, "last_activity_date": 1573682949, "creation_date": 1549040487, "last_edit_date": 1573682949, "question_id": 54483979, "link": "https://stackoverflow.com/questions/54483979/perl-crtl-c-ignored-when-calling-subroutine-instead-of-exiting", "title": "Perl : CRTL C ignored when calling subroutine instead of exiting", "body": "<p>So the script is something like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Term::ReadLine;\n\n$SIG{'INT'} = 'INT_handler';\nsub INT_handler {\n  print \"[+] Abording\\n\";\n  home();\n}\n\nmy $term = Term::ReadLine-&gt;new('Simple Perl calc');\n\nsub home {\n\n  my $prompt = \"\\$&gt; \";\n  my $OUT = $term-&gt;OUT || \\*STDOUT;\n\n  while ( defined ($_ = $term-&gt;readline($prompt)) ) {\n    my $com = $_;\n    print $com.\"\\n\";\n    if ($com eq 'exit') {\n        exit;\n    }\n  option(); # another subroutine when the input is transferred to\n  }\n}\n\nhome();\n</code></pre>\n\n<p>what I get:</p>\n\n<pre><code>$&gt;                                                                              \n[+] Abording\n$&gt; # I pushed CRTL C but nothing shows                                                                             \n$&gt; # same here\n</code></pre>\n\n<p>What I want to achieve is to be able to go to <code>home()</code> without exiting, and keep the <code>$SIG{'INT'}</code> working. </p>\n\n<p>I have tried some other methods ( labels, using if statement ), but it will take too long cause the input is used in long processes</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 3, "creation_date": 1549030780, "post_id": 54478707, "comment_id": 95769605, "body": "What have you tried? What didn&#39;t work? What did you get? What did you expect? What doesn&#39;t work with your code and where is it?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549022204, "post_id": 54478781, "comment_id": 95764819, "body": "I have tried this but its not working. $LinkIndex=~ /&quot;link_index&quot;:&quot;(\\d+)&quot;/"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549022785, "post_id": 54478781, "comment_id": 95765169, "body": "@Bindu go to <a href=\"https://www.tutorialspoint.com/execute_perl_online.php\" rel=\"nofollow noreferrer\">tutorialspoint.com/execute_perl_online.php</a> and copy/paste my code. It&#39;s working fine, you can test it there."}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "edited": false, "score": 0, "creation_date": 1549039602, "post_id": 54478781, "comment_id": 95774565, "body": "@Bindu glad it worked, remember to mark the question as solved"}], "tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 0, "last_activity_date": 1549022750, "last_edit_date": 1549022750, "creation_date": 1549021265, "answer_id": 54478781, "question_id": 54478707, "link": "https://stackoverflow.com/questions/54478707/extract-substring-from-string-in-perl/54478781#54478781", "title": "extract substring from string in perl", "body": "<p>You can use a simple regex like this:</p>\n\n<pre><code>\"link_index\":\"(\\d+)\"\n</code></pre>\n\n<p>And then grab the content from capturing group</p>\n\n<p><strong><a href=\"https://regex101.com/r/GwuzYe/1\" rel=\"nofollow noreferrer\">Working demo</a></strong></p>\n\n<pre><code>my $str = 'downCircuit received;TOKENS START;{\"action\":\\'\"UPDATE\",\"device_id\":\"CP0027829\",\"link_index\":\"101\",\"name\":\"uplink101\",\"description\":\"link1-0/0/3\",\"priority\":\"200\",\"status\":\"DOWN\",\"wan_status\":\"DOWN\",\"vlan\":\"4094\",\"vlan_description\":\"vlan4094-intf\",\"topic\":\"uplinks\",\"stream_timestamp\":\"1547015547\",\"aws_host\":\"attwifi-poc-central.arubathena.com\",\"aws_timestamp\":\"1547015547\",\"customer_id\":\"6666778917\"};TOKENS END';\nmy $regex = qr/\"link_index\":\"(\\d+)\"/mp;\n\nif ( $str =~ /$regex/g ) {\n  print \"Whole match is ${^MATCH} and its start/end positions can be obtained via \\$-[0] and \\$+[0]\\n\";\n  print \"Capture Group 1 is $1 and its start/end positions can be obtained via \\$-[1] and \\$+[1]\\n\";\n  # print \"Capture Group 2 is $2 ... and so on\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1078, "user_id": 11000412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lyxuc.jpg?s=128&g=1", "display_name": "Oliver Gaida", "link": "https://stackoverflow.com/users/11000412/oliver-gaida"}, "is_accepted": false, "score": 0, "last_activity_date": 1549057440, "last_edit_date": 1549057440, "creation_date": 1549028289, "answer_id": 54480689, "question_id": 54478707, "link": "https://stackoverflow.com/questions/54478707/extract-substring-from-string-in-perl/54480689#54480689", "title": "extract substring from string in perl", "body": "<p>you could use a backreference:</p>\n\n<p><code>print $1,\"\\n\" if /\"link_index\":\"(\\d+)\"/</code></p>\n\n<p>in full context:</p>\n\n<pre><code>$string=q(downCircuit received;TOKENS START;{\"action\":'\"UPDATE\",\"device_id\":\"CP0027829\",\"link_index\":\"101\",\"name\":\"uplink101\",\"description\":\"link1-0/0/3\",\"priority\":\"200\",\"status\":\"DOWN\",\"wan_status\":\"DOWN\",\"vlan\":\"4094\",\"vlan_description\":\"vlan4094-intf\",\"topic\":\"uplinks\",\"stream_timestamp\":\"1547015547\",\"aws_host\":\"attwifi-poc-central.arubathena.com\",\"aws_timestamp\":\"1547015547\",\"customer_id\":\"6666778917\"};TOKENS END);\nprint $1,\"\\n\" if $string =~ /\"link_index\":\"(\\d+)\"/;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1549040450, "last_edit_date": 1549040450, "creation_date": 1549036188, "answer_id": 54482823, "question_id": 54478707, "link": "https://stackoverflow.com/questions/54478707/extract-substring-from-string-in-perl/54482823#54482823", "title": "extract substring from string in perl", "body": "<blockquote>\n  <p>I have a string like below</p>\n</blockquote>\n\n<p>What you have there is some JSON with extra cruft before and after it. So rather than struggling with regexes, the best idea would be to extract the actual JSON and then use <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">a JSON parser</a> to deal with it. Something like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse JSON;\n\nmy $input = 'downCircuit received;TOKENS START;{\"action\":\"UPDATE\",\"device_id\":\"CP0027829\",\"link_index\":\"101\",\"name\":\"uplink101\",\"description\":\"link1-0/0/3\",\"priority\":\"200\",\"status\":\"DOWN\",\"wan_status\":\"DOWN\",\"vlan\":\"4094\",\"vlan_description\":\"vlan4094-intf\",\"topic\":\"uplinks\",\"stream_timestamp\":\"1547015547\",\"aws_host\":\"attwifi-poc-central.arubathena.com\",\"aws_timestamp\":\"1547015547\",\"customer_id\":\"6666778917\"};TOKENS END';\n\n$input =~ s/.*START;//;\n$input =~ s/;TOKENS END//;\n\nmy $data = JSON-&gt;new-&gt;decode($input);\n\nsay $data-&gt;{link_index};\n</code></pre>\n\n<p>As expected, this produces the output <code>101</code>.</p>\n\n<p><strong>Note:</strong> I think there's a typo in your question. At least, there's a syntax error in the JSON. I removed a single, unmatched quote character that you have before <code>\"UPDATE\"</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 11000754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30f719a00e3fd69a36a5e7b26cc0290?s=128&d=identicon&r=PG&f=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/11000754/bindu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1549057440, "creation_date": 1549020959, "last_edit_date": 1549021191, "question_id": 54478707, "link": "https://stackoverflow.com/questions/54478707/extract-substring-from-string-in-perl", "title": "extract substring from string in perl", "body": "<p>I have a string like below:</p>\n\n<pre><code>downCircuit received;TOKENS START;{\"action\":'\"UPDATE\",\"device_id\":\"CP0027829\",\"link_index\":\"101\",\"name\":\"uplink101\",\"description\":\"link1-0/0/3\",\"priority\":\"200\",\"status\":\"DOWN\",\"wan_status\":\"DOWN\",\"vlan\":\"4094\",\"vlan_description\":\"vlan4094-intf\",\"topic\":\"uplinks\",\"stream_timestamp\":\"1547015547\",\"aws_host\":\"attwifi-poc-central.arubathena.com\",\"aws_timestamp\":\"1547015547\",\"customer_id\":\"6666778917\"};TOKENS END\n</code></pre>\n\n<p>I wanted to extract the value of link_index from it. i.e. output should be 101 in this case. Can somebody please help on how to extract 101 from my string.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1549018251, "post_id": 54477772, "comment_id": 95762779, "body": "Have you tried anything yet yourself? It looks like you are trying to parse a MIME encoded multi-part document. There are modules for this on CPAN. Doing it yourself is a bit mad."}, {"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1549018862, "post_id": 54477772, "comment_id": 95763110, "body": "I have tried several times, and I always do, I&#39;m not strong in regex, for now the need is to use the regex because I&#39;ve already used Mail :: IMAPClient (function: bodypart_string) and using the regex I can arrive at the expected results, it remains for me just this part which requires the use of regex"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1549028862, "post_id": 54477772, "comment_id": 95768474, "body": "An IMAP Client is something else. You want to parse email bodies, not download email."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1549056968, "post_id": 54477772, "comment_id": 95781505, "body": "I recommend <a href=\"https://metacpan.org/pod/Email::MIME\" rel=\"nofollow noreferrer\">Email::MIME</a>."}, {"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1549293955, "post_id": 54477772, "comment_id": 95841421, "body": "thank you Simbabque and Grinnz, Email::MIME is a good idea,  I managed to extract only the text / plain from body by using Email::MIME"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1549025139, "post_id": 54478412, "comment_id": 95766495, "body": "I want to extract only the body (without --000000...) ,  I want a body extraction according to both cases , the header of Var1 can be: Content-Type: text / plain; charset = &quot;UTF-8&quot; or Content-Type: text / plain; charset = &quot;UTF-8 &quot; Content-Transfer-Encoding: quoted-printable"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1549031474, "post_id": 54478412, "comment_id": 95770037, "body": "I&#39;m not quite sure I understand your comment. My answer shows the desired output shown in your question. I have updated my answer to include both input texts, maybe it becomes more clear now?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "edited": false, "score": 0, "creation_date": 1549039305, "post_id": 54478412, "comment_id": 95774394, "body": "@Red_Developper updated with your latest input string. That makes things much simpler, BTW."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1549039275, "last_edit_date": 1549039275, "creation_date": 1549019827, "answer_id": 54478412, "question_id": 54477772, "link": "https://stackoverflow.com/questions/54477772/substring-with-perl-regex/54478412#54478412", "title": "substring with perl (Regex?)", "body": "<p>One solution: use <code>/ms</code> modifier, see <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $regex = qr/\\AContent-Type: [^\\n]+\\n(?:^Content-Transfer-Encoding: [^\\n]+\\n)?(.+)^--.+\\Z/ms;\nmy $body;\n\nmy $input = &lt;&lt;'END_OF_STRING';\nContent-Type: text/html; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n\nINPUT 1 BODY\n\n--000000000000ddc1610580816add--\nEND_OF_STRING\n\n($body) = ($input =~ $regex)\n    or die \"mismatch in INPUT 1!\\n\";\nprint \"INPUT 1 '${body}'\\n\";\n\n$input = &lt;&lt;'END_OF_STRING';\nContent-Type: text/plain; charset=\"UTF-8\"\n\nINPUT 2 BODY\n\n--000000000000ddc1610580816add--\nEND_OF_STRING\n\n($body) = ($input =~ $regex)\n    or die \"mismatch in INPUT 2!\\n\";\nprint \"INPUT 2 '${body}'\\n\";\n\nexit 0;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nINPUT 1 '\nINPUT 1 BODY\n\n'\nINPUT 2 '\nINPUT 2 BODY\n\n'\n</code></pre>\n\n<p><strong>UPDATE:</strong> with the new input string provided by OP:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# multipart MIME content as single string\nmy $input = &lt;&lt;'END_OF_STRING';\n--0000000000007bcdff05808169f5\nContent-Type: text/plain; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n\nBODY text/plain\n\n--0000000000007bcdff05808169f5\nContent-Type: text/html; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n\nBODY text/html\n\n--0000000000007bcdff05808169f5\nEND_OF_STRING\n\n# split into multiple parts at the separator\nforeach my $part (split(/^--[^\\n]+\\n/ms, $input)) {\n    # skip empty parts\n    next if $part =~ /\\A\\s*\\Z/m;\n\n    # split header and body\n    my($header, $body) = split(\"\\n\\n\", $part, 2);\n\n    # Only match parts with text/plain content\n    # \"Content-Type\" must be matched case-insensitive\n    if ($header =~ m{^(?i)Content-Type(?-i):\\s+text/plain[;\\s]}ms) {\n        print \"plain text BODY: '${body}'\\n\";\n    }\n}\n\nexit 0;\n</code></pre>\n\n<p>Test output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nplain text BODY: 'BODY text/plain\n\n'\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10955982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fXlUjyZGvU4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM1ntguuklLWl7NMRK18InSOUcfEg/mo/photo.jpg?sz=128", "display_name": "Red_Developper", "link": "https://stackoverflow.com/users/10955982/red-developper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 54478412, "answer_count": 1, "score": 0, "last_activity_date": 1549291903, "creation_date": 1549017574, "last_edit_date": 1549291903, "question_id": 54477772, "link": "https://stackoverflow.com/questions/54477772/substring-with-perl-regex", "title": "substring with perl (Regex?)", "body": "<p>I need help to extract \"BODY\" part from string according to the two following cases:</p>\n\n<p>Case 1:</p>\n\n<pre><code>Var1 = \nContent-Type: text/plain; charset=\"UTF-8\"\n\nBODY \n\n--000000000000ddc1610580816add\n\n\nContent-Type: text/html; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n\nBODY56 text/html\n\n--000000000000ddc1610580816add-\n</code></pre>\n\n<p>Case 2: </p>\n\n<pre><code>Var1=\nContent-Type: text/plain; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n\nBODY\n\n--000000000000ddc1610580816add--\n\n\n\nContent-Type: text/html; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n\nBODY56 text/html\n\n--000000000000ddc1610580816add-\n</code></pre>\n\n<p>I want to do: </p>\n\n<p>if Var1 contains: \n<code>Content-Type: text/plain; charset=\"UTF-8\"</code>\n then \nextract text between \n<code>Content-Type: text/plain; charset=\"UTF-8\"</code> \nand \n<code>--000000000000ddc1610580816add</code></p>\n\n<p>else if Var1 contains: </p>\n\n<pre><code>Content-Type: text/plain; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n</code></pre>\n\n<p>Then extract text between:</p>\n\n<pre><code>Content-Type: text/plain; charset=\"UTF-8\"\nContent-Transfer-Encoding: quoted-printable\n</code></pre>\n\n<p>And <code>--000000000000ddc1610580816add--</code>.</p>\n\n<p>my Code, I need to fix it if someone can fix it:</p>\n\n<pre><code> if (index($body, \"Content-Type: text\\/plain; charset=\\\"UTF-8\\\"\\n\nContent-Transfer-Encoding: quoted-printable\") != -1) {\n    $body =~ /Content-Type: text\\/plain; charset=\"UTF-8\"\\n\nContent-Transfer-Encoding: quoted-printable(.*?)--00.*/s ;\n                        $body=$1;\n\n}\n    elsif   (index($body, \"Content-Type: text\\/plain; charset=\\\"UTF-8\\\"\") != -1)\n                              {\n    $body =~ /Content-Type: text\\/plain; charset=\"UTF-8\"(.*?)--00.*/s ;\n                        $body=$1;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "regex", "perl", "pcre", "ecmascript-5"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549013774, "post_id": 54475919, "comment_id": 95760337, "body": "Why should <code>package5.package6.class5</code> be in the matched set, but not <code>class8</code>? I think your specification is misguided/unclear."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549014192, "post_id": 54475919, "comment_id": 95760581, "body": "I&#39;ve edited my answer."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549014371, "post_id": 54475919, "comment_id": 95760683, "body": "... edited again, so to also exclude <code>class8</code>."}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 7786237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ecb760d02112bce299ebb5bc09ba90?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan", "link": "https://stackoverflow.com/users/7786237/erwan"}, "edited": false, "score": 1, "creation_date": 1549011393, "post_id": 54475994, "comment_id": 95759127, "body": "you can replace <code>(?=[^_])</code> by <code>(?!_)</code>"}, {"owner": {"reputation": 907, "user_id": 4646394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/59cde1f2da25b8437f9a390c303734b7?s=128&d=identicon&r=PG&f=1", "display_name": "helix", "link": "https://stackoverflow.com/users/4646394/helix"}, "edited": false, "score": 0, "creation_date": 1549011655, "post_id": 54475994, "comment_id": 95759250, "body": "@Corion : what if the symbol isn&#39;t there in <code>\\w</code>, say, instead of <code>_</code> I want to exclude words starting with <code>.</code> but include if it doesn&#39;t start with <code>.</code> and comes only in the middle ?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 907, "user_id": 4646394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/59cde1f2da25b8437f9a390c303734b7?s=128&d=identicon&r=PG&f=1", "display_name": "helix", "link": "https://stackoverflow.com/users/4646394/helix"}, "edited": false, "score": 0, "creation_date": 1549012120, "post_id": 54475994, "comment_id": 95759472, "body": "@helix Can you maybe edit your post and specify your question in more detail then? This is likely mostly a matter of adding the relevant parts to the exclusion part (<code>(?=[^_.])</code>) and adding them to the latter inclusion part (<code>[\\w.]+</code>)."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1549012179, "post_id": 54475994, "comment_id": 95759504, "body": "Instead of Perl can just use <a href=\"https://regex101.com/r/tFWYdS/1\" rel=\"nofollow noreferrer\">regex101.com</a> for a quick test"}, {"owner": {"reputation": 907, "user_id": 4646394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/59cde1f2da25b8437f9a390c303734b7?s=128&d=identicon&r=PG&f=1", "display_name": "helix", "link": "https://stackoverflow.com/users/4646394/helix"}, "edited": false, "score": 0, "creation_date": 1549013208, "post_id": 54475994, "comment_id": 95760051, "body": "@Corion: updated the question as you suggested. I believe the problem I was trying to solve was way off-track from what I asked and I apologize for that. Can you please take a look at the updated question?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 907, "user_id": 4646394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/59cde1f2da25b8437f9a390c303734b7?s=128&d=identicon&r=PG&f=1", "display_name": "helix", "link": "https://stackoverflow.com/users/4646394/helix"}, "edited": false, "score": 0, "creation_date": 1549013500, "post_id": 54475994, "comment_id": 95760220, "body": "@helix The first regex already does what your expanded question asks. It still captures <code>extends</code>. Do you want to exclude that?"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 2, "last_activity_date": 1549014159, "last_edit_date": 1549014159, "creation_date": 1549011318, "answer_id": 54475994, "question_id": 54475919, "link": "https://stackoverflow.com/questions/54475919/conditional-group-matching-using-regex/54475994#54475994", "title": "conditional group matching using regex", "body": "<p>Just use a word boundary <code>\\b</code> and make sure that the first character is not an underscore (but still a letter):</p>\n\n<pre><code>(\\b(?=[^_])[\\w]+)\n</code></pre>\n\n<p>Using the following Perl script to validate that:</p>\n\n<pre><code>perl -wlne \"print qq(Matched &lt;$_&gt;) for /(\\b(?=[^_])[\\w]+)/g\"\n\nMatched &lt;just&gt;\nMatched &lt;any&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/msgPNh/1\" rel=\"nofollow noreferrer\">regex101 playground</a></p>\n\n<p>In response to the expansion of the question in the comment, the following regular expression will also capture dots in the \"middle\" of the word (but still disallow them at the start of a word):</p>\n\n<pre><code>(\\b(?=[^_.])[\\w.]+)\n\nperl -wlne \"print qq(Matched &lt;$_&gt;) for /(\\b(?=[^_.])[\\w.]+)/g\"\n\njust _checking any _string. and. this. inclu.ding dots\nMatched &lt;just&gt;\nMatched &lt;any&gt;\nMatched &lt;and.&gt;\nMatched &lt;this.&gt;\nMatched &lt;inclu.ding&gt;\nMatched &lt;dots&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/rszonH/1\" rel=\"nofollow noreferrer\">regex101 playground</a></p>\n\n<p>After the third expansion of the question, I've expanded the regular expression to match the class names but exclude the <code>extends</code> keyword, and only start a new match when there was a space (<code>\\s</code>) or less-than sign (<code>&lt;</code>). The full qualified matches are achieved by forcing a dot ( <code>\\.</code> ) to appear in the match:</p>\n\n<pre><code>(?:^|[&lt;&gt;\\s])(?:(?![_.]|\\bextends\\b)([\\w]+\\.[\\w.]+))\n\nperl -nwle \"print qq(Matched &lt;$_&gt;) for /(?:^|[&lt;&gt;\\s])(?:(?![_.]|\\bextends\\b)([\\w]+\\.[\\w.]+))/g\"\n\nMatched &lt;package1.class1&gt;\nMatched &lt;package2.class2&gt;\nMatched &lt;package3.class3&gt;\nMatched &lt;package4.class4&gt;\nMatched &lt;package5.package6.class5&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/rszonH/5\" rel=\"nofollow noreferrer\">regex 101 playground</a></p>\n"}], "owner": {"reputation": 907, "user_id": 4646394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/59cde1f2da25b8437f9a390c303734b7?s=128&d=identicon&r=PG&f=1", "display_name": "helix", "link": "https://stackoverflow.com/users/4646394/helix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 1, "accepted_answer_id": 54475994, "answer_count": 1, "score": 0, "last_activity_date": 1549014397, "creation_date": 1549011042, "last_edit_date": 1549014397, "question_id": 54475919, "link": "https://stackoverflow.com/questions/54475919/conditional-group-matching-using-regex", "title": "conditional group matching using regex", "body": "<p>how to match a group except if it starts with a certain character.</p>\n\n<p>e.g. I have the following sentence:</p>\n\n<pre><code>just _checking any _string.\n</code></pre>\n\n<p>I have the regex <code>([\\w]+)</code> which matches all the words <code>{just, _checking, any, _sring}</code>. But, what I want is to match all the words that don't start with character <code>_</code> i.e. <code>{just, any}</code>.</p>\n\n<p>The above example is a watered down version of what I'm actually trying to parse.</p>\n\n<p>I'm parsing a code file, which contains string in the following format :</p>\n\n<pre><code>package1.class1&lt;package2.class2 &lt;? extends package3.class3&gt; , package4.class4 &lt;package5.package6.class5&lt;?&gt;.class6.class7&lt;class8&gt; &gt;.class9.class10\n</code></pre>\n\n<p>The output that I require should create a match result like all the fully qualified names (having at least one <code>.</code> in the middle )but stop if encounter a <code>&lt;</code>.</p>\n\n<p>So, the result should be :</p>\n\n<pre><code>{ package1.class1, package2.class2, package3.class3, package4.class4, package5.package6.class5 }\n</code></pre>\n\n<p>I wrote <code>([\\w]+\\.)+([\\w]+)</code> to parse it but it also matches <code>class6.class7</code> and <code>class9.class10</code> which I don't want. I know it's way off the mark and I apologize for that.</p>\n\n<p>Hence, I earlier asked if I can ignore a capture group starting from a specific character.</p>\n\n<p>Here's the link where I tried : <a href=\"https://regex101.com/r/v1jfXC/3\" rel=\"nofollow noreferrer\">regex101</a></p>\n\n<p>there everything that it is matching is correct except the part where it matches <code>class6.class7</code> and <code>class9.class10</code>.</p>\n\n<p>I'm not sure how to proceed on this. I'm using C++14 and it supports ECMAScript grammar as well along with POSIX style.</p>\n\n<p><strong>EDIT</strong> : as suggested by @Corion, I've added more details.\n<strong>EDIT2</strong> : added regex101 link</p>\n"}, {"tags": ["windows", "perl", "timeout"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1549006830, "post_id": 54474956, "comment_id": 95757090, "body": "What problem are you trying to solve? <code>alarm</code> works for Windows, for example like: <code>perl -wle &quot;alarm(3); sleep 10&quot;</code>. Please <a href=\"https://stackoverflow.com/posts/54474956/edit\">edit</a> your post and show an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces your problem."}, {"owner": {"reputation": 29, "user_id": 7988873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93e484d4fec65fc38a6d110aa800e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/7988873/victor"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1549043423, "post_id": 54474956, "comment_id": 95776373, "body": "Corion-&gt; Added my code that causes the problem"}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1549045431, "creation_date": 1549045431, "answer_id": 54485158, "question_id": 54474956, "link": "https://stackoverflow.com/questions/54474956/timing-out-with-alarm-when-waiting-on-input-on-perl-in-windows/54485158#54485158", "title": "Timing out with alarm when waiting on input on Perl in Windows", "body": "<p>There is no easy/convenient way to get a timeout on <code>STDIN</code> on Windows Perl. The following implements a simple-minded readline function with a timeout. It doesn't handle backspace or cursor keys, so you will still have to implement these. It demonstrates how to implement a timeout on Windows for STDIN.</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse Term::ReadKey;\n\nsub timed_input {\n   my $end_time = time + shift;\n   my $string ;\n   do {\n       my $key = ReadKey(1);\n       $string .= $key if defined $key;\n       print \"\\r$string\" if (defined $string);\n   } while (time &lt; $end_time);\n   return $string\n};\n\nmy $input = '';\nif( -t ) { \n    # we are interactive \n    $input = timed_input(3);\n} else {\n    $input = &lt;&gt;;\n};\nprint \"Input is [$input]\\n\";\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7988873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93e484d4fec65fc38a6d110aa800e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/7988873/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549056865, "creation_date": 1549006773, "last_edit_date": 1549056865, "question_id": 54474956, "link": "https://stackoverflow.com/questions/54474956/timing-out-with-alarm-when-waiting-on-input-on-perl-in-windows", "title": "Timing out with alarm when waiting on input on Perl in Windows", "body": "<p>Is there an alternative for alarm function in Perl to be used on Windows? </p>\n\n<p>Alarm doesn't seem to work in Windows. </p>\n\n<p>The below code should timeout if no user input is given within N seconds. The code works good in linux but hangs in there on Windows.</p>\n\n<p>CODE:</p>\n\n<pre><code>$SIG{ALRM} = \\&amp;input_timed_out;\n\neval {\n\n        alarm(10);\n\n        $input = &lt;&gt;;\n        alarm(0);   \n        print $input.\"\\n\";\n}\n\nprint \"eval exit with:  $@  \\n\";\n\nif ( $@ =~ /NO USER INPUT IN TIME/ ) {\n\n       print \"Timed out.\\n\";\n       $input = \"quit\";\n}\n\nprint \"Answer is $input\\n\";\n\nsub input_timed_out {\n\n           die \"NO USER INPUT IN TIME\";\n\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 3, "creation_date": 1548983612, "post_id": 54471482, "comment_id": 95750763, "body": "This is a basic regex. One solution : <code>my ($language,$version) = ( &quot;Invalid version of perl: 5.8.7&quot; =~  &#47;Invalid version of (.*): (.*)&#47; );</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 2, "creation_date": 1548991415, "post_id": 54471482, "comment_id": 95752589, "body": "@GMB There is no reason for parenthesis around the matching (<code>=~</code>) expression in that statement: <code>my ($m1, $m2) = $string =~ &#47;($p1)($p2)&#47;;</code> returns both captures (or <code>undef</code> for unmatched patterns), the list context being provided by the LHS. For matching a pattern repeatedly in a string we&#39;d need <code>&#47;g</code> as well.  (Unless you meant the parens for emphasis?)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1548991763, "post_id": 54471482, "comment_id": 95752680, "body": "I suggest to start using documentation.  For regex the tutorial is <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>, and what you asked here (and half guessed) is spelled out in <a href=\"https://perldoc.perl.org/perlretut.html#Extracting-matches\" rel=\"nofollow noreferrer\">&quot;<i>Extracting matches</i>&quot;</a>"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1549012097, "post_id": 54471482, "comment_id": 95759461, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4736/learning-regular-expressions\">Learning Regular Expressions</a>"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1549011050, "post_id": 54474094, "comment_id": 95758935, "body": "Putting those unnecessary <code>{</code> and <code>}</code> in your print statement is likely to confuse people who are new to the language (as this poster seems to be)."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1549011496, "post_id": 54474094, "comment_id": 95759166, "body": "@DaveCross that might be, but it is one of my &quot;best practices&quot; for shell &amp; perl."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1549002772, "creation_date": 1549002772, "answer_id": 54474094, "question_id": 54471482, "link": "https://stackoverflow.com/questions/54471482/trying-to-get-two-substring-from-a-string-using-regex-in-perl/54474094#54474094", "title": "Trying to get two substring from a string using regex in Perl", "body": "<p>This is basic regex'ing, so please do read e.g. <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> or <a href=\"https://www.oreilly.com/library/view/mastering-regular-expressions/0596528124/\" rel=\"nofollow noreferrer\">\"Mastering Regular Expressions\" by Jeffrey E.F. Friedl</a>.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/There&#39;s_more_than_one_way_to_do_it\" rel=\"nofollow noreferrer\">TMTOWDTI</a> of course, but here is one of them:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $input = \"Invalid version of perl: 5.8.7\";\n\nmy($language, $version) = ($input =~ /(\\w+):\\s+(\\d+(?:\\.\\d+)*)/)\n    or die \"Can't detect language or version!\\n\";\n\nprint \"'${language}' '${version}'\\n\";\n\nexit 0;\n</code></pre>\n\n<p>Output</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\n'perl' '5.8.7'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1549012273, "last_edit_date": 1549012273, "creation_date": 1549011551, "answer_id": 54476054, "question_id": 54471482, "link": "https://stackoverflow.com/questions/54471482/trying-to-get-two-substring-from-a-string-using-regex-in-perl/54476054#54476054", "title": "Trying to get two substring from a string using regex in Perl", "body": "<p>You can extract multiple values from a string using \"capturing\". The basic version works like this.  You capture text in a matched regex by surrounding the text with <code>(...)</code>. I this example, we'll extract runs of non-whitespace characters either side of \": \".</p>\n\n<pre><code>use feature 'say'; # for \"say()\"\n\n$_ = 'Invalid version of perl: 5.8.7';\n\nif (/(\\S+): (\\S+)/) {\n  say \"Language = $1\";\n  say \"Version  = $2\";\n}\n</code></pre>\n\n<p>The captured text is put into variables called <code>$1</code> and <code>$2</code>. Notice that we put the whole match in an <code>if</code> statement to ensure that our regex matches before displaying anything.</p>\n\n<p>An alternative approach which makes your code easier to understand is to copy the matching data into named variables like this:</p>\n\n<pre><code>use feature 'say'; # for \"say()\"\n\n$_ = 'Invalid version of perl: 5.8.7';\n\nif (my ($language, $version) = /(\\S+): (\\S+)/) {\n  say \"Language = $language\";\n  say \"Version  = $version\";\n}\n</code></pre>\n\n<p>As others have pointed out, the Perl documentation is well worth reading if you're new to the language. In this case, you should spend an hour or two studying <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1549012273, "creation_date": 1548982876, "question_id": 54471482, "link": "https://stackoverflow.com/questions/54471482/trying-to-get-two-substring-from-a-string-using-regex-in-perl", "title": "Trying to get two substring from a string using regex in Perl", "body": "<p>I'm trying to build a regex which gets the following string:</p>\n\n<pre><code>Invalid version of perl: 5.8.7\n</code></pre>\n\n<p>Format:</p>\n\n<pre><code>Invalid version of _: _\n</code></pre>\n\n<p>I was wondering if is possible to get the language name and the version in <em>one line</em>, something like: <code>my ($language,$version) =~ /.../</code>.</p>\n\n<p>So the output will be:</p>\n\n<pre><code>$language = perl\n$version = 5.8.7\n</code></pre>\n\n<p>Maybe it can be done with an if-else?</p>\n"}, {"tags": ["perl", "cygwin", "cpan", "cpanm"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1548976162, "post_id": 54470275, "comment_id": 95748949, "body": "Answered by <a href=\"https://stackoverflow.com/a/30379902/589924\">this</a>"}, {"owner": {"reputation": 9869, "user_id": 1147688, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76a3f29c105a73c4060b3d1934ccd9a?s=128&d=identicon&r=PG", "display_name": "not2qubit", "link": "https://stackoverflow.com/users/1147688/not2qubit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1549014539, "post_id": 54470275, "comment_id": 95760766, "body": "@ikegami Thanks! (I would never have found it under that question.)"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 11, "last_activity_date": 1549015349, "last_edit_date": 1549015349, "creation_date": 1548974901, "answer_id": 54470382, "question_id": 54470275, "link": "https://stackoverflow.com/questions/54470275/what-is-the-difference-between-the-core-vendor-and-site-locations-in-perl/54470382#54470382", "title": "What is the difference between the core, vendor and site locations in Perl?", "body": "<p>The best reference for these install locations is probably the <a href=\"https://perldoc.pl/ExtUtils::MakeMaker#make-install\" rel=\"noreferrer\">ExtUtils::MakeMaker</a> documentation for where it installs things. In essence:</p>\n\n<ul>\n<li><strong><code>core</code></strong> (also known as <em>privlib</em>) - is where core modules that are installed with Perl goes. On Perls older than 5.12, updates to dual-life modules also need to be installed here over the core versions instead of into site or vendor lib, because privlib came first in <code>@INC</code> before 5.12. This is especially dangerous in a system Perl where the files in privlib are usually managed by a package manager.</li>\n<li><strong><code>vendor</code></strong> - is where a distribution vendor may install modules to. This is usually where system package managers install non-core modules to.</li>\n<li><strong><code>site</code></strong> - is where CPAN clients install modules to when invoked directly, barring unusual configuration like for dual-life modules as mentioned above.</li>\n</ul>\n\n<p>(Dual-life modules are core modules which are also available separately on CPAN, which means that you can install an updated version.)</p>\n\n<p>Each of these lib locations have an <strong><code>arch</code></strong> variant, which is where distributions with build-specific output files are installed to. Pure-perl distributions with no dynamic configuration are installed into the standard architecture-agnostic directory, and can usually run unmodified in other installations of Perl and architectures provided their requirements are still satisfied (though it's not a good idea unless you really know what you are doing). <em>Distributions with any compiled XS modules or that generate modules dynamically in the build process are installed into the <code>arch</code> directory and are not safe to use from another Perl.</em></p>\n\n<p>All of these locations are configured when the Perl is built and can be discovered using the <code>perl -V</code> option as you showed. They also each have accompanying <code>script</code> and <code>bin</code> directories (which are usually the same) and directories for manpages.</p>\n\n<p>As to the discrepancy of <code>cpan-outdated</code> - this tool (like many tools using <a href=\"https://perldoc.pl/ExtUtils::Installed\" rel=\"noreferrer\">ExtUtils::Installed</a>) is restricted to finding modules that have <em>packlists</em>, which are included when installing a module using a CPAN client, but not with core modules and they are generally stripped from vendor packages. So most likely <code>cpan-outdated</code> will only discover modules in <em>sitelib</em>, but this is usually all you need to find. I'm not sure what mechanism the cpan command uses.</p>\n"}, {"tags": [], "owner": {"reputation": 9869, "user_id": 1147688, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76a3f29c105a73c4060b3d1934ccd9a?s=128&d=identicon&r=PG", "display_name": "not2qubit", "link": "https://stackoverflow.com/users/1147688/not2qubit"}, "is_accepted": false, "score": 2, "last_activity_date": 1549028709, "last_edit_date": 1549028709, "creation_date": 1549017768, "answer_id": 54477832, "question_id": 54470275, "link": "https://stackoverflow.com/questions/54470275/what-is-the-difference-between-the-core-vendor-and-site-locations-in-perl/54477832#54477832", "title": "What is the difference between the core, vendor and site locations in Perl?", "body": "<p><strong>UPDATE</strong>: </p>\n\n<p>Thanks to <em>ikegami</em>'s SO link, I have since done some source browsing, where we can find a lot of info about this. To get the more specific locations:</p>\n\n \n\n<pre><code># perl -V:'install(privlib|archlib|vendorlib|vendorarch|sitelib|sitearch)' |column -t -s \"=\"\n\ninstallarchlib     '/usr/lib/perl5/5.26/x86_64-cygwin-threads';\ninstallprivlib     '/usr/share/perl5/5.26';\ninstallsitearch    '/usr/local/lib/perl5/site_perl/5.26/x86_64-cygwin-threads';\ninstallsitelib     '/usr/local/share/perl5/site_perl/5.26';\ninstallvendorarch  '/usr/lib/perl5/vendor_perl/5.26/x86_64-cygwin-threads';\ninstallvendorlib   '/usr/share/perl5/vendor_perl/5.26';\n</code></pre>\n\n<p>Then for the meaning of those, we can look (in the perl sources) in the file: <code>./Porting/Glossary</code>:</p>\n\n \n\n<pre><code>installarchlib    '- is the same for modules with arch- or build-dependent components.'\ninstallprivlib    '- contains the \"pure Perl\" modules that came with Perl.'\ninstallsitearch   '- is the same for modules with arch- or build-dependent components.'\ninstallsitelib    '- contains the \"pure Perl\" modules installed by you.'\ninstallvendorarch '- is the same for modules with arch- or build-dependent components.'\ninstallvendorlib  '- contains the \"pure Perl\" modules installed by your distro.'\n</code></pre>\n\n<p>with the additional interesting note about the <em>installstyle</em> option:</p>\n\n<blockquote>\n  <p><code>installstyle (installstyle.U):</code></p>\n  \n  <p>This variable describes the <strong>style</strong> of the perl installation. This\n  is intended to be useful for tools that need to manipulate entire perl\n  distributions. Perl itself doesn't use this to find its libraries --\n  the library directories are stored directly in Config.pm. Currently,\n  there are only two styles:  <strong><code>lib</code></strong> and <strong><code>lib/perl5</code></strong>. The default\n  library locations (e.g. privlib, sitelib) are either <code>$prefix/lib</code> or\n  <code>$prefix/lib/perl5</code>. The former is useful if <strong>$prefix</strong> is a\n  directory dedicated to perl (e.g. /opt/perl), while the latter is\n  useful if $prefix is shared by many packages, e.g. if\n  <code>$prefix=/usr/local</code>.</p>\n  \n  <p>Unfortunately, while this \"style\" variable is used to set defaults for\n  all three directory hierarchies (core, vendor, and site), there is no\n  guarantee that the same style is actually appropriate for all those\n  directories.  For example, $prefix might be /opt/perl, but\n  <code>$siteprefix</code> might be /usr/local. (Perhaps, in retrospect, the \"lib\"\n  style should never have been supported, but it did seem like a nice\n  idea at the time.)</p>\n  \n  <p>The situation is even less clear for tools such as MakeMaker that can\n  be used to install additional modules into non-standard places.  For\n  example, if a user intends to install a module into a private\n  directory (perhaps by setting PREFIX on the Makefile.PL command line),\n  then there is no reason to assume that the Configure-time\n  $installstyle setting will be relevant for that PREFIX.</p>\n  \n  <p>This may later be extended to include other information, so be careful\n  with pattern-matching on the results.</p>\n  \n  <p>For compatibility with perl5.005 and earlier, the default setting is\n  based on whether or not $prefix contains the string \"perl\".</p>\n</blockquote>\n\n<p>All the gritty details can then be found in the <code>INSTALLATION</code> file, under the <code>Installation Directories</code> heading. </p>\n\n<ul>\n<li><p><code>Directories for the perl distribution</code>:<br>\nBy default, Configure will use the following directories (5.28.1):</p>\n\n<pre><code>    Configure variable  Default value\n    $prefixexp          /usr/local\n    $binexp             $prefixexp/bin\n    $scriptdirexp       $prefixexp/bin\n    $privlibexp         $prefixexp/lib/perl5/$version\n    $archlibexp         $prefixexp/lib/perl5/$version/$archname\n</code></pre></li>\n<li><p><code>Directories for site-specific add-on files</code>:</p>\n\n<pre><code>   Configure        Default\n   variable          value\n $siteprefixexp    $prefixexp\n $sitebinexp       $siteprefixexp/bin\n $sitescriptexp    $siteprefixexp/bin\n $sitelibexp       $siteprefixexp/lib/perl5/site_perl/$version\n $sitearchexp      $siteprefixexp/lib/perl5/site_perl/$version/$archname\n</code></pre></li>\n<li><p><code>Directories for vendor-supplied add-on files</code>:  </p>\n\n<p>If are building a binary distribution of perl for distribution, Configure\ncan optionally set up the following directories for you to use to \ndistribute add-on modules.</p>\n\n<pre><code>   Configure          Default\n   variable            value\n $vendorprefixexp    (none)\n\n (The next ones are set only if vendorprefix is set.)\n\n $vendorbinexp       $vendorprefixexp/bin\n $vendorscriptexp    $vendorprefixexp/bin\n $vendorlibexp       $vendorprefixexp/lib/perl5/vendor_perl/$version\n $vendorarchexp      $vendorprefixexp/lib/perl5/vendor_perl/$version/$archname\n</code></pre></li>\n<li><p><code>otherlibdirs</code>:<br>\nAs a final catch-all, Configure also offers an <code>$otherlibdirs</code> variable. \nThis variable contains a colon-separated list of additional directories \nto add to <strong>@INC</strong>. By default, it will be empty. </p></li>\n<li><p><code>APPLLIB_EXP</code>:<br>\nThere is one other way of adding paths to @INC at perl build \ntime, and that is by setting the APPLLIB_EXP C pre-processor \ntoken. The directories defined by APPLLIB_EXP get added to \n@INC <strong>first</strong>, ahead of any others.<br>\n<code>sh Configure -Accflags='-DAPPLLIB_EXP=\\\"/usr/libperl\\\"'</code></p></li>\n</ul>\n"}], "owner": {"reputation": 9869, "user_id": 1147688, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76a3f29c105a73c4060b3d1934ccd9a?s=128&d=identicon&r=PG", "display_name": "not2qubit", "link": "https://stackoverflow.com/users/1147688/not2qubit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 4, "accepted_answer_id": 54470382, "answer_count": 2, "score": 8, "last_activity_date": 1549028709, "creation_date": 1548974401, "last_edit_date": 1549017794, "question_id": 54470275, "link": "https://stackoverflow.com/questions/54470275/what-is-the-difference-between-the-core-vendor-and-site-locations-in-perl", "title": "What is the difference between the core, vendor and site locations in Perl?", "body": "<p>I recently ran into some trouble installing some modules and discovered to my surprise that many of the modules that had been installed, have duplicated installations and versions. Trying to track where stuff goes in a standard (if there is such a thing) installation using <code>cpanm</code>, I found the following results very confusing.</p>\n\n<p>The reports show these locations:</p>\n\n<ul>\n<li>Using <code>cpan -V</code>:</li>\n</ul>\n\n<pre class=\"lang-sh prettyprint-override\"><code># cpan -V\n\n/usr/bin/cpan script version 1.672, CPAN.pm version 2.22\n--------------------------------------------------\nChecking install dirs...\nChecking core\n        + /usr/share/perl5/5.26\n        + /usr/lib/perl5/5.26/x86_64-cygwin-threads\nChecking vendor\n        + /usr/share/perl5/vendor_perl/5.26\n        + /usr/lib/perl5/vendor_perl/5.26/x86_64-cygwin-threads\nChecking site\n        + /usr/local/share/perl5/site_perl/5.26\n        + /usr/local/lib/perl5/site_perl/5.26/x86_64-cygwin-threads\nChecking PERL5LIB\n        no directories for PERL5LIB\nChecking PERLLIB\n        no directories for PERLLIB\n</code></pre>\n\n<ul>\n<li>Using <code>perl -V:.*site.*</code>:</li>\n</ul>\n\n<pre class=\"lang-sh prettyprint-override\"><code># perl -V:.*site.* |column -t -s \"=\" |sort -d -i -k 1.22\n\nd_sitearch           'define';\nusesitecustomize     'undef';\nsiteprefix           '/usr/local';\nsiteprefixexp        '/usr/local';\ninstallsitebin       '/usr/local/bin';\ninstallsitescript    '/usr/local/bin';\nsitebin              '/usr/local/bin';\nsitebinexp           '/usr/local/bin';\nsitescript           '/usr/local/bin';\nsitescriptexp        '/usr/local/bin';\ninstallsitearch      '/usr/local/lib/perl5/site_perl/5.26/x86_64-cygwin-threads';\nsitearch             '/usr/local/lib/perl5/site_perl/5.26/x86_64-cygwin-threads';\nsitearchexp          '/usr/local/lib/perl5/site_perl/5.26/x86_64-cygwin-threads';\ninstallsitehtml1dir  '/usr/local/share/doc/perl/html/html1';\nsitehtml1dir         '/usr/local/share/doc/perl/html/html1';\nsitehtml1direxp      '/usr/local/share/doc/perl/html/html1';\ninstallsitehtml3dir  '/usr/local/share/doc/perl/html/html3';\nsitehtml3dir         '/usr/local/share/doc/perl/html/html3';\nsitehtml3direxp      '/usr/local/share/doc/perl/html/html3';\ninstallsiteman1dir   '/usr/local/share/man/man1';\nsiteman1dir          '/usr/local/share/man/man1';\nsiteman1direxp       '/usr/local/share/man/man1';\ninstallsiteman3dir   '/usr/local/share/man/man3';\nsiteman3dir          '/usr/local/share/man/man3';\nsiteman3direxp       '/usr/local/share/man/man3';\ninstallsitelib       '/usr/local/share/perl5/site_perl/5.26';\nsitelib              '/usr/local/share/perl5/site_perl/5.26';\nsitelib_stem         '/usr/local/share/perl5/site_perl/5.26';\nsitelibexp           '/usr/local/share/perl5/site_perl/5.26';\n</code></pre>\n\n<ul>\n<li>Using <code>@INC</code>:</li>\n</ul>\n\n<pre class=\"lang-sh prettyprint-override\"><code># perl -e 'print join(\"\\n\",@INC,\"\")'\n\n/usr/local/lib/perl5/site_perl/5.26/x86_64-cygwin-threads\n/usr/local/share/perl5/site_perl/5.26\n/usr/lib/perl5/vendor_perl/5.26/x86_64-cygwin-threads\n/usr/share/perl5/vendor_perl/5.26\n/usr/lib/perl5/5.26/x86_64-cygwin-threads\n/usr/share/perl5/5.26\n</code></pre>\n\n<p>The result is that <code>cpan-outdated -p --verbose</code> show a completely different (and shorter) list of outdated modules than what <code>cpan -lO</code> does. Needless to say, modules are installed all over the place and I don't see how to understand if there is a default install location and where it goes, or <em>should</em> go.</p>\n\n<hr>\n\n<p><strong>QUESTION</strong>:</p>\n\n<ol>\n<li>So what is the difference between the <code>core</code>, <code>vendor</code> and <code>site</code> <em>type</em> of paths?</li>\n<li>Why are there 2 paths in each type?</li>\n</ol>\n"}, {"tags": ["perl", "centos7", "dbd", "dbd-pg"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1548968978, "post_id": 54469247, "comment_id": 95746387, "body": "Most likely your installation of Perl is missing some core libraries. This is in violation of the Perl license, but some Linux distributions and maybe Oracle don&#39;t care and strip essential modules. You also don&#39;t show us which <code>perl</code> is getting invoked. Most likely this is the system Perl and not the Oracle Perl because the error message reports <code>&#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;ExtUtils&#47;MakeMaker.pm</code> and running the Makefile.PL reports Perl 5.16.3 and not Perl 5.22."}], "answers": [{"tags": [], "owner": {"reputation": 2291, "user_id": 1577662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4cP0W.jpg?s=128&g=1", "display_name": "Joe T", "link": "https://stackoverflow.com/users/1577662/joe-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1548969362, "creation_date": 1548969362, "answer_id": 54469345, "question_id": 54469247, "link": "https://stackoverflow.com/questions/54469247/cant-find-version-pm-while-trying-to-install-dbd-pg-2-19-3-on-centos-7/54469345#54469345", "title": "can&#39;t find version.pm while trying to install DBD-Pg-2.19.3 on Centos-7", "body": "<p>This is the (current) problem <code>prerequisite Test::More 0.61 not found</code>.<br>\nThis is the solution <a href=\"https://superuser.com/a/1111321/156111\">https://superuser.com/a/1111321/156111</a></p>\n\n<p>\"</p>\n\n<pre><code>yum install make cpan\n</code></pre>\n\n<p>Then configure your perl with CPAN. Just enter cpan in the command prompt and answer yes to all interactive questions.</p>\n\n<p>Then update you cpan manager:</p>\n\n<pre><code>#cpan install Bundle::CPAN\n#cpan reload cpan\n</code></pre>\n\n<p>And now install packages of your interest:</p>\n\n<pre><code>#cpan install Test::More\n</code></pre>\n\n<p>\"</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1548970620, "last_edit_date": 1548970620, "creation_date": 1548970242, "answer_id": 54469528, "question_id": 54469247, "link": "https://stackoverflow.com/questions/54469247/cant-find-version-pm-while-trying-to-install-dbd-pg-2-19-3-on-centos-7/54469528#54469528", "title": "can&#39;t find version.pm while trying to install DBD-Pg-2.19.3 on Centos-7", "body": "<p>You need to install the full Perl core. In CentOS 7 this package is called <code>perl-core</code>, and <code>perl</code> is just the interpreter, not suitable if you actually want to use it yourself. The full Perl been renamed to <code>perl</code> (and the interpreter renamed to <code>perl-interpreter</code>) in recent versions of Fedora.</p>\n\n<pre><code>yum install perl-core\n</code></pre>\n\n<p>Even better is to <a href=\"https://metacpan.org/pod/perl-build\" rel=\"nofollow noreferrer\">build your own Perl</a>, so that you can install things into it as you need without messing with the system Perl that may be used by other things and not expect these updates. If you stick to using the system Perl, it's recommended to isolate any modules you install without the package manager using a <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a> or <a href=\"https://metacpan.org/pod/Carton\" rel=\"nofollow noreferrer\">Carton</a>.</p>\n\n<p>It looks like you already have a separate build of Perl, as those paths containing <code>5.22.0</code> are not from the system perl in CentOS 7. This installation of Perl will not be managed or related to anything you install with <code>yum</code> unless it's from an Oracle repository. The correct way to install modules that can handle the dependencies for that module is with the <a href=\"https://metacpan.org/pod/cpan\" rel=\"nofollow noreferrer\">cpan</a> client, or other clients like <a href=\"https://metacpan.org/pod/cpanm\" rel=\"nofollow noreferrer\">cpanm</a>. Just make sure to run the executable for the Perl you want to install modules into and use.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 939857, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/717f0bfe9a70d20956f534822306af9f?s=128&d=identicon&r=PG", "display_name": "user939857", "link": "https://stackoverflow.com/users/939857/user939857"}, "edited": false, "score": 0, "creation_date": 1549194817, "post_id": 54475880, "comment_id": 95809184, "body": "I didn&#39;t downvote you.  Maybe it works, I had already fixed it by manually installing the dependencies as in my answer.  Thanks."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1549010891, "creation_date": 1549010891, "answer_id": 54475880, "question_id": 54469247, "link": "https://stackoverflow.com/questions/54469247/cant-find-version-pm-while-trying-to-install-dbd-pg-2-19-3-on-centos-7/54475880#54475880", "title": "can&#39;t find version.pm while trying to install DBD-Pg-2.19.3 on Centos-7", "body": "<p>If you're happy using the system Perl and its associated Perl library (as you seem to be as you're running <code>yum install perl-DBI</code>) then you can use the pre-packaged version of DBD::Pg.</p>\n\n<pre><code> sudo yum install perl-DBD-Pg\n</code></pre>\n\n<p>And this will automatically pull in any other RPMs that are required.</p>\n\n<p>DBD::Oracle is harder. A pre-built package is not available (presumably, because Oracle is not open source), but you could probably build your own RPM following <a href=\"https://perlhacks.com/2015/10/build-rpms-of-cpan-modules/\" rel=\"nofollow noreferrer\">the method I described a few years ago</a>. You will need to ensure that the Oracle client libraries (and their associated header files) are already installed.</p>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 939857, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/717f0bfe9a70d20956f534822306af9f?s=128&d=identicon&r=PG", "display_name": "user939857", "link": "https://stackoverflow.com/users/939857/user939857"}, "is_accepted": true, "score": 0, "last_activity_date": 1549194583, "creation_date": 1549194583, "answer_id": 54502542, "question_id": 54469247, "link": "https://stackoverflow.com/questions/54469247/cant-find-version-pm-while-trying-to-install-dbd-pg-2-19-3-on-centos-7/54502542#54502542", "title": "can&#39;t find version.pm while trying to install DBD-Pg-2.19.3 on Centos-7", "body": "<pre><code>set -x -e\nsudo yum -y install perl-devel\nsudo yum -y install perl-DBI\nsudo yum -y install perl-version perl-Data-Dumper\nsudo yum -y install postgresql-devel\ncp ./DBD* /tmp\npushd /tmp\ntar xvf DBD-Oracle-1.52.tar\ntar xvf DBD-Pg-2.19.3.tar\npushd DBD-Oracle-1.52\nperl Makefile.PL\nsudo make\nsudo make install\npopd\npushd DBD-Pg-2.19.3\nperl Makefile.PL\nsudo make\nsudo make install\ncd ~/ora2pg\nperl Make.PL\nsudo make\nsudo make install\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 939857, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/717f0bfe9a70d20956f534822306af9f?s=128&d=identicon&r=PG", "display_name": "user939857", "link": "https://stackoverflow.com/users/939857/user939857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 54502542, "answer_count": 4, "score": 0, "last_activity_date": 1549194583, "creation_date": 1548968811, "last_edit_date": 1548969097, "question_id": 54469247, "link": "https://stackoverflow.com/questions/54469247/cant-find-version-pm-while-trying-to-install-dbd-pg-2-19-3-on-centos-7", "title": "can&#39;t find version.pm while trying to install DBD-Pg-2.19.3 on Centos-7", "body": "<p>On Centos 7.  </p>\n\n<p>The oracle DBD installed just fine I am having a problem with the Postgresql version.  </p>\n\n<p>This is the script I am running:</p>\n\n<pre><code>set -x -e\nsudo yum -y install perl-devel\nsudo yum -y install perl-DBI\n\ncp ./DBD* /tmp\npushd /tmp\ntar xvf DBD-Oracle-1.52.tar\ntar xvf DBD-Pg-2.19.3.tar\npushd DBD-Oracle-1.52\nperl Makefile.PL\nsudo make\nsudo make install\npopd\npushd DBD-Pg-2.19.3\nperl Makefile.PL\nsudo make\nsudo make install\n</code></pre>\n\n<p>the postgresql DBD perl Makefile.PL returns</p>\n\n<pre><code>++ perl Makefile.PL\nConfiguring DBD::Pg 2.19.3\nPostgreSQL version: 90224 (default port: 5432)\nPOSTGRES_HOME: (not set)\nPOSTGRES_INCLUDE: /usr/include\nPOSTGRES_LIB: /usr/lib64\nOS: linux\nWarning: prerequisite Test::More 0.61 not found.\nWarning: prerequisite version 0 not found.\nCould not eval '\n                package ExtUtils::MakeMaker::_version;\n                no strict;\n                BEGIN { eval {\n                    # Ensure any version() routine which might have leaked\n                    # into this package has been deleted.  Interferes with\n                    # version-&gt;import()\n                    undef *version;\n                    require version;\n                    \"version\"-&gt;import;\n                } }\n\n                local $VERSION;\n                $VERSION=undef;\n                do {\n                        use version; our $VERSION = qv('2.19.3');\n                };\n                $VERSION;\n            ' in Pg.pm: Can't locate version.pm in @INC (@INC contains: t/lib /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at (eval 9) line 16, &lt;$fh&gt; line 19.\nBEGIN failed--compilation aborted at (eval 9) line 16, &lt;$fh&gt; line 19.\nWARNING: Setting VERSION via file 'Pg.pm' failed\n at /usr/share/perl5/vendor_perl/ExtUtils/MakeMaker.pm line 619.\nUsing DBI 1.627 (for perl 5.016003 on x86_64-linux-thread-multi) installed in /usr/lib64/perl5/vendor_perl/auto/DBI/\nWriting Makefile for DBD::Pg\n++ sudo make\nSkip blib/lib/DBD/testme.tmp.pl (unchanged)\nSkip blib/lib/Bundle/DBD/Pg.pm (unchanged)\nSkip blib/lib/DBD/Pg.pm (unchanged)\ngcc -c  -I/usr/include -I/usr/lib64/perl5/vendor_perl/auto/DBI -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPGLIBVERSION=90224 -DPGDEFPORT=5432 -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic  -DPERL_EXTMALLOC_DEF -Dmalloc=Perl_malloc -Dfree=Perl_mfree -Drealloc=Perl_realloc -Dcalloc=Perl_calloc -DVERSION=\\\"undef\\\" -DXS_VERSION=\\\"undef\\\" -fPIC \"-I/usr/lib64/perl5/CORE\"   Pg.c\nIn file included from Pg.xs:13:0:\nPg.h:36:22: fatal error: libpq-fe.h: No such file or directory\n #include \"libpq-fe.h\"\n                      ^\ncompilation terminated.\nmake: *** [Pg.o] Error 1\n</code></pre>\n\n<p>however locate shows:</p>\n\n<pre><code>/common/oracle/tfa/austin/tfa_home/perl/lib/5.22.0/version.pm\n/common/oracle/tfa/austin/tfa_home/perl/lib/5.22.0/ExtUtils/MakeMaker/version.pm\n/common/orainst/perl/lib/5.22.0/version.pm\n/common/orainst/perl/lib/5.22.0/ExtUtils/MakeMaker/version.pm\n/opt/oracle/product/18c/dbhomeXE/perl/lib/5.22.0/version.pm\n/opt/oracle/product/18c/dbhomeXE/perl/lib/5.22.0/ExtUtils/MakeMaker/version.pm\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548965632, "post_id": 54468519, "comment_id": 95744947, "body": "Most likely you are running that oneliner under <code>cmd.exe</code> and not the cygwin shell. This would easily explain the error message, as Perl should never see a single quote under a sh-compatible shell."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10958118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d031869396dac31525287a90e2d8d94a?s=128&d=identicon&r=PG&f=1", "display_name": "dhvsfan", "link": "https://stackoverflow.com/users/10958118/dhvsfan"}, "edited": false, "score": 0, "creation_date": 1549034271, "post_id": 54468986, "comment_id": 95771545, "body": "The command was issued in cygwin&#39;s version of Bash.  I didn&#39;t run it in either the DOS cmd window nor in Powershell.   So, the sub-command is actually spawning a DOS cmd shell ??"}, {"owner": {"reputation": 1, "user_id": 10958118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d031869396dac31525287a90e2d8d94a?s=128&d=identicon&r=PG&f=1", "display_name": "dhvsfan", "link": "https://stackoverflow.com/users/10958118/dhvsfan"}, "edited": false, "score": 0, "creation_date": 1549035048, "post_id": 54468986, "comment_id": 95771932, "body": "Upon further investigation, the PERL5SHELL controls what Perl uses for executing backtick commands.  Its default is claimed to be cmd.exe. So, I need to make sure that it is set to cygwin&#39;s Bash value."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 10958118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d031869396dac31525287a90e2d8d94a?s=128&d=identicon&r=PG&f=1", "display_name": "dhvsfan", "link": "https://stackoverflow.com/users/10958118/dhvsfan"}, "edited": false, "score": 0, "creation_date": 1549036489, "post_id": 54468986, "comment_id": 95772763, "body": "Or make sure to use a cygwin build of Perl"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1548967984, "last_edit_date": 1548967984, "creation_date": 1548967680, "answer_id": 54468986, "question_id": 54468519, "link": "https://stackoverflow.com/questions/54468519/re-https-stackoverflow-com-questions-23937389-determine-parent-shell-from-per/54468986#54468986", "title": "Re: https://stackoverflow.com/questions/23937389/determine-parent-shell-from-perl/25139489", "body": "<p>That is a command for the Bourne shell (<code>sh</code>) or similar, but you gave it to the Windows shell (<code>cmd</code>) to execute. Execute the command using <code>sh</code> or similar (whether cygwin-built or otherwise) to get rid of the error.</p>\n\n<p>By the way, you were using a Windows build of Perl (<code>MSWin32-x64</code> arch), not a cygwin build of Perl (<code>cygwin</code> arch). That's not the cause of the error, as the program will run fine either way. That said, this \"issue\" will surely go away once you use a cygwin-built <code>sh</code> or similar to execute the command.</p>\n"}], "owner": {"reputation": 1, "user_id": 10958118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d031869396dac31525287a90e2d8d94a?s=128&d=identicon&r=PG&f=1", "display_name": "dhvsfan", "link": "https://stackoverflow.com/users/10958118/dhvsfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1549001446, "creation_date": 1548965351, "last_edit_date": 1549001446, "question_id": 54468519, "link": "https://stackoverflow.com/questions/54468519/re-https-stackoverflow-com-questions-23937389-determine-parent-shell-from-per", "title": "Re: https://stackoverflow.com/questions/23937389/determine-parent-shell-from-perl/25139489", "body": "<p>Has anyone tried this code on cygwin?</p>\n\n<p>I get these errors:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't find string terminator \"'\" anywhere before EOF at -e line 1.\nUse of uninitialized value in pattern match (m//) at ./dos_it.pl line 506.\nUse of uninitialized value $shellpath in rindex at ./dos_it.pl line 586.\nUse of uninitialized value $shellpath in substr at ./dos_it.pl line 586.\nUse of uninitialized value $pathToShell in concatenation (.) or string at ./dos_it.pl line 761.\nUse of uninitialized value $shell_conformance in concatenation (.) or string at ./dos_it.pl line 761.\n</code></pre>\n\n<p>The string that is generated is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ps -ef | perl -ane '1..1 and /^(.*)CO?MM?A?N?D/ and $s=length $1;s/^.{$s}//; print \"@F[1,2] $_\"'\n</code></pre>\n\n<p>Perl version:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -v    \nThis is perl 5, version 26, subversion 2 (v5.26.2) built for MSWin32-x64-multi-thread\n</code></pre>\n"}, {"tags": ["linux", "perl", "system-calls", "atomic", "file-descriptor"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1548947753, "post_id": 54463525, "comment_id": 95735350, "body": "Can you include the code you experimented with (both C and Perl?)"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1548948679, "post_id": 54463525, "comment_id": 95736015, "body": "@choroba: Added code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548949017, "post_id": 54463525, "comment_id": 95736252, "body": "I suspect there&#39;s a limit on the size of the write for it to be atomic. I suspect that limit is no less than 4 KiB, but that&#39;s just a guess."}], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1549195089, "post_id": 54463911, "comment_id": 95809235, "body": "is there any way to make this work on NFS file systems? Although I have read that NFS file system is not POSIX compliant, but can I hack my way through it somehow? your valuable comments/suggestions are welcome! thanks in advance."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1549213143, "post_id": 54463911, "comment_id": 95814194, "body": "I don&#39;t know anything about POSIX assurances."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1548949200, "last_edit_date": 1548949200, "creation_date": 1548948402, "answer_id": 54463911, "question_id": 54463525, "link": "https://stackoverflow.com/questions/54463525/can-perl-sysopen-open-file-for-atomic-writes/54463911#54463911", "title": "Can perl sysopen open file for atomic writes?", "body": "<p>It doesn't matter if you <code>open</code> or <code>sysopen</code>; the key is using <code>syswrite</code> and <code>sysread</code> instead of <code>print</code>/<code>printf</code>/<code>say</code>/etc and <code>readline</code>/<code>read</code>/<code>eof</code>/etc.</p>\n\n<p><code>syswrite</code> maps to a single <code>write(2)</code> call, while <code>print</code>/<code>printf</code>/<code>say</code>/etc can result in multiple calls to <code>write(2)</code> (even if autoflush is enabled).<sup>[1]</sup></p>\n\n<p><code>sysread</code> maps to a single <code>read(2)</code> call, while <code>readline</code>/<code>read</code>/<code>eof</code>/etc can result in multiple calls to <code>read(2)</code>.</p>\n\n<p>So, by using <code>syswrite</code> and <code>sysread</code>, you are subject to all the assurances that POSIX gives about those calls (whatever they might be) if you're on a POSIX system.</p>\n\n<hr>\n\n<ol>\n<li>If you use <code>print</code>/<code>printf</code>/<code>say</code>/etc, and limit your writes to less than the size of the buffer between (explicit or automatic) flushes, you'll get a single <code>write(2)</code> call. The buffer size was 4 KiB in older versions of Perl, and it's 8 KiB by default in newer versions of Perl. (The size is decided when <code>perl</code> is built.)</li>\n</ol>\n"}], "owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 54463911, "answer_count": 1, "score": 5, "last_activity_date": 1548957391, "creation_date": 1548947279, "last_edit_date": 1548957391, "question_id": 54463525, "link": "https://stackoverflow.com/questions/54463525/can-perl-sysopen-open-file-for-atomic-writes", "title": "Can perl sysopen open file for atomic writes?", "body": "<p>While reading the APUE (3rd edition) book, I came across the open system call and its ability to let user open file for <code>write</code> atomic operation with <code>O_APPEND</code> mode meaning that, multiple processes can write to a file descriptor and kernel ensures that the data written to the single file by multiple processes, doesn't overlap and all lines are intact.</p>\n\n<p>Upon experimenting successfully with open system call with a C/C++ program, I was able to validate the same and it works just like the book describes. I was able to launch multiple processes which wrote to a single file and all lines could be accounted for w.r.t to their process PIDs.</p>\n\n<p>I was hoping to observe the same behavior with perl <code>sysopen</code>, as I have some tasks at work which could benefit with this behavior. Tried it out but it actually did not work. When I analyzed the output file, I was able to see signs of race condition (probably) as there many a times interleaved lines.</p>\n\n<p>Question: Is perl <code>sysopen</code> call not same as the linux's open system call? Is it possible to achieve this type of atomic write operation by multiple processes to a single file?</p>\n\n<p>EDIT: adding C code, and perl code used for testing.</p>\n\n<p><strong>C/C++ code</strong></p>\n\n<pre><code>int main(void)\n{\n  if ((fd = open(\"outfile.txt\",O_WRONLY|O_CREAT|O_APPEND)) == -1) { \n    printf (\"failed to create outfile! exiting!\\n\");\n    return -1;\n  }\n\n  for (int counter{1};counter&lt;=MAXLINES;counter++)\n  { /* write string 'line' for MAXLINES no. of times */\n    std::string line = std::to_string(ACE_OS::getpid())\n      + \" This is a sample data line \";\n    line += std::to_string(counter) + \" \\n\";\n    if ((n = write(fd,line.c_str(),strlen(line.c_str()))) == -1) {\n      printf(\"Failed to write to outfile!\\n\";\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p><strong>Perl code</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Fcntl;\nuse strict;\nuse warnings;\n\nmy $maxlines = 100000;\n\nsysopen (FH, \"testfile\", O_CREAT|O_WRONLY|O_APPEND) or die \"failed sysopen\\n\";\nwhile ($maxlines != 0) {\n  print FH \"($$) This is sample data line no. $maxlines\\n\";\n  $maxlines--;\n}\nclose (FH);\n__END__\n</code></pre>\n\n<p><strong>Update (<em>after initial troubleshooting</em>):</strong></p>\n\n<p>Thanks to the information provided in the answer below, I was able to get it working. Although I ran into issue of some missing lines which was caused by me opening the file with each process with <code>O_TRUNC</code>, which I shouldn't have done, but missed it initially. After some careful analysis - I spotted the issue and corrected it. As always - linux never fails you :).</p>\n\n<p>Here is a bash script I used to launch the processes:</p>\n\n<pre><code>#!/bin/bash\n\n# basically we spawn \"$1\" instances of the same \n# executable which should append to the same output file.\n\nmax=$1\n[[ -z $max ]] &amp;&amp; max=6\necho \"creating $max processes for appending into same file\"\n\n# this is our output file collecting all\n# the lines from all the processes.\n# we truncate it before we start\n&gt;testfile\n\nfor i in $(seq 1 $max)\ndo\n    echo $i &amp;&amp; ./perl_read_write_with_syscalls.pl 2&gt;&gt;_err &amp; \ndone\n\n# end.\n</code></pre>\n\n<p><strong>Verification from output file:</strong></p>\n\n<pre><code>[compuser@lenovoe470:07-multiple-processes-append-to-a-single-file]$  ls -lrth testfile \n-rw-rw-r--. 1 compuser compuser 252M Jan 31 22:52 testfile\n[compuser@lenovoe470:07-multiple-processes-append-to-a-single-file]$  wc -l testfile \n6000000 testfile\n[compuser@lenovoe470:07-multiple-processes-append-to-a-single-file]$  cat testfile |cut -f1 -d\" \"|sort|uniq -c\n1000000 (PID: 21118)\n1000000 (PID: 21123)\n1000000 (PID: 21124)\n1000000 (PID: 21125)\n1000000 (PID: 21126)\n1000000 (PID: 21127)\n[compuser@lenovoe470:07-multiple-processes-append-to-a-single-file]$  \n</code></pre>\n\n<p><strong>Observations:</strong></p>\n\n<p>To my surprise, there wasn't any wait average load on the system - at all. I was not expecting it. I believe somehow kernel must have taken care of that but don't know how it works. I would be interested to know more about it.</p>\n\n<p><strong>What could be the possible applications of this?</strong></p>\n\n<p>I do a  lot of file to file reconciliation(s), and we (<em>at work</em>) always have need to parse huge data files (like 30gb - 50gb each). With this working - I could now do parallel operations instead of my previous approach which comprised of: hashing file1, then hashing file2, then compare key,value pairs from 2 files. Now I could do the hashing part in parallel and bring down the time it takes - even further.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "security"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1548941845, "post_id": 54461793, "comment_id": 95731721, "body": "What makes you think that there is an issue? If you want a security code review you are at the wrong place. This one is for specific programming questions &quot;Is there something wrong, if yes what?&quot; is far too broad."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1548942075, "post_id": 54461793, "comment_id": 95731861, "body": "I as a user would probably be annoyed by the fact that I get money taken from my account and am told about the new balance - but the transfer I asked for is never done, which probably causes the recipient to complain at some point. Wouldn&#39;t call that a security issue however..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1548943911, "post_id": 54461793, "comment_id": 95732924, "body": "@Yunnosch, <code>FatalError</code> probably throws an exception, but it&#39;s definitely a good of you to verify that assumption :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548944019, "post_id": 54461793, "comment_id": 95732979, "body": "@Barominos, You probably don&#39;t want to allow transfers of $0 either."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1548945048, "post_id": 54461793, "comment_id": 95733590, "body": "@Barominos Maybe learn about the domain you want to implement. There is a good reason that finance has implemented the ledger and a balance is merely a sum over the ledger."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1548966476, "post_id": 54461793, "comment_id": 95745312, "body": "@ikegami I do not get you. I was referring to the successful complete execution of the whole shown code. It ends with my new balance being sent, but not a new balance to the recipient."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1548944004, "post_id": 54462048, "comment_id": 95732968, "body": "You can also improve performance and reduce the potential time frame for the race condition occurring by fetching the balance after checking the transfer amount is positive."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1548969148, "last_edit_date": 1548969148, "creation_date": 1548942564, "answer_id": 54462048, "question_id": 54461793, "link": "https://stackoverflow.com/questions/54461793/what-could-be-a-security-issue-in-this-perl/54462048#54462048", "title": "What could be a security issue in this Perl?", "body": "<h2>Problem 1</h2>\n\n<p>A very important security mechanism in financial transaction is the ability to perform audits. There's no indication that this code leaves behind any kind of paper trail. One shouldn't just update the balance, but also create a record of the transaction.</p>\n\n<h2>Problem 2</h2>\n\n<p>That code suffers from a race condition. Consider what happens if they are two concurrent actions. </p>\n\n<pre><code>Process 1                                         Process 2\n===============================================   ===============================================\n$xfer_amt = GetTransferAmount();\n$balance = GetBalanceFromDatabase();\n\nif ($xfer_amt &lt; 0) {\n    FatalError(\"Bad Transfer Amount\");\n}\n\n                                                  $xfer_amt = GetTransferAmount();                      \n                                                  $balance = GetBalanceFromDatabase();\n\n                                                  if ($xfer_amt &lt; 0) {\n                                                      FatalError(\"Bad Transfer Amount\");\n                                                  }\n\n                                                  $newbalance = $balance - $xfer_amt;\n                                                  if (($balance - $xfer_amt) &lt; 0) {\n                                                      FatalError(\"Insufficient Funds\");\n                                                  }\n\n$newbalance = $balance - $xfer_amt;\nif (($balance - $xfer_amt) &lt; 0) {\n    FatalError(\"Insufficient Funds\");\n}\n\nSendNewBalanceToDatabase($newbalance);\nNotifyUser(\"Transfer of $xfer_amt succeeded.\");\nNotifyUser(\"New balance: $newbalance\");\n\n                                                  SendNewBalanceToDatabase($newbalance);\n                                                  NotifyUser(\"Transfer of $xfer_amt succeeded.\");\n                                                  NotifyUser(\"New balance: $newbalance\");\n</code></pre>\n\n<p>(Renamed a variable so the code would fit better on the screen.)</p>\n\n<p>The database will only end up being deducted for one of the transactions.</p>\n\n<p>Doing this right gets even more complicated as you incorporate a fix for the first problem because you need to make sure the balance is always in sync with transaction records (taking into consideration the possibility of concurrent transactions, network failures, power outages, etc).</p>\n\n<h2>Problem 3</h2>\n\n<p>Where do the funds ago? In most scenarios, there's a possibility that the doing something with the withdrawn funds fails. If so, instead of withdrawing the funds, you probably should be reserving them (marking them unavailable), and only withdrawing the funds once they have actually been used.</p>\n"}], "owner": {"reputation": 39, "user_id": 5748664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28ea5df0a90cfb60559f206e15be098?s=128&d=identicon&r=PG&f=1", "display_name": "Barominos", "link": "https://stackoverflow.com/users/5748664/barominos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "accepted_answer_id": 54462048, "answer_count": 1, "score": -1, "last_activity_date": 1548969148, "creation_date": 1548941686, "question_id": 54461793, "link": "https://stackoverflow.com/questions/54461793/what-could-be-a-security-issue-in-this-perl", "title": "What could be a security issue in this Perl?", "body": "<pre><code>$transfer_amount = GetTransferAmount();\n$balance = GetBalanceFromDatabase();\n\nif ($transfer_amount &lt; 0) {\n    FatalError(\"Bad Transfer Amount\");\n}\n\n$newbalance = $balance - $transfer_amount;\nif (($balance - $transfer_amount) &lt; 0) {\n    FatalError(\"Insufficient Funds\");\n}\n\nSendNewBalanceToDatabase($newbalance);\nNotifyUser(\"Transfer of $transfer_amount succeeded.\");\nNotifyUser(\"New balance: $newbalance\");\n</code></pre>\n\n<p>Could anybody explain to me if there is a security issue with this code?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1548928117, "post_id": 54457625, "comment_id": 95723377, "body": "Please <a href=\"https://stackoverflow.com/posts/54457625/edit\">edit</a> your post and show us the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> you already have. This helps us to address your problem more closely"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1548930993, "post_id": 54457808, "comment_id": 95725138, "body": "Perl programmers tend to prefer snake_case over camelCase, so the function would be called <code>end_by()</code> (or, probably better, <code>ends_in()</code>) :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1548949496, "post_id": 54457808, "comment_id": 95736562, "body": "Should be <code>.ma\\z</code> instead of <code>.ma$</code> unless you want to allow <code>&quot;foo.ma\\n&quot;</code> to pass."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1548949553, "post_id": 54457808, "comment_id": 95736596, "body": "That <code>.*</code> will just slow things down (potentially by a lot). Get rid of it"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1548949562, "post_id": 54457808, "comment_id": 95736601, "body": "All you need: <code>return $string =~ &#47;\\.ma\\z&#47;;</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1548958839, "post_id": 54457808, "comment_id": 95741777, "body": "Your prototype claims <code>end_by</code> takes no arguments. If you do it like that, <code>end_by($input1)</code> won&#39;t even compile."}], "tags": [], "owner": {"reputation": 386, "user_id": 6400711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83370d2a7cf7c28e08586f262badff7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phx Dev", "link": "https://stackoverflow.com/users/6400711/phx-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1549010426, "last_edit_date": 1549010426, "creation_date": 1548928408, "answer_id": 54457808, "question_id": 54457625, "link": "https://stackoverflow.com/questions/54457625/need-to-check-the-string-ends-with-a-particular-extension-or-not-in-perl-script/54457808#54457808", "title": "Need to check the string ends with a particular extension or not in Perl script", "body": "<p>You could create a function : </p>\n\n<pre><code>sub end_by($){\n    my $string = shift;\n    if ($string =~ m/\\.ma$/) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>And so call it like that :</p>\n\n<pre><code>print $input1 if end_by($input1);\nprint $input2 if end_by($input2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 6, "last_activity_date": 1548958371, "last_edit_date": 1548958371, "creation_date": 1548928458, "answer_id": 54457822, "question_id": 54457625, "link": "https://stackoverflow.com/questions/54457625/need-to-check-the-string-ends-with-a-particular-extension-or-not-in-perl-script/54457822#54457822", "title": "Need to check the string ends with a particular extension or not in Perl script", "body": "<p>You can use a regex:</p>\n\n<pre><code>print $string if $string =~ /\\.ma\\z/;\n</code></pre>\n\n<p>Or use <a href=\"http://p3rl.org/substr\" rel=\"noreferrer\">substr</a>:</p>\n\n<pre><code>print $string if '.ma' eq substr $string, -length('.ma');\n</code></pre>\n\n<p>or use <a href=\"http://p3rl.org/rindex\" rel=\"noreferrer\">rindex</a></p>\n\n<pre><code>print $string if length($string) == length('.ma') + rindex $string, '.ma';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1548931233, "creation_date": 1548931233, "answer_id": 54458696, "question_id": 54457625, "link": "https://stackoverflow.com/questions/54457625/need-to-check-the-string-ends-with-a-particular-extension-or-not-in-perl-script/54458696#54458696", "title": "Need to check the string ends with a particular extension or not in Perl script", "body": "<p>It's unclear what your data actually is. Does it end in '.ma' or '.ma\"'? In my code below, I've assumed the latter.</p>\n\n<p>This is a pretty simple use of regular expressions.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n  print if /\\.ma\"$/;\n}\n\n__DATA__\ninput1 = \"charles.ma@abc.com\"\ninput2 = \"charles.ma\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8052645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3213baa1a73e79352c23ecdb9f8b67b4?s=128&d=identicon&r=PG&f=1", "display_name": "sudarsan", "link": "https://stackoverflow.com/users/8052645/sudarsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4543, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1549010426, "creation_date": 1548927947, "last_edit_date": 1548928336, "question_id": 54457625, "link": "https://stackoverflow.com/questions/54457625/need-to-check-the-string-ends-with-a-particular-extension-or-not-in-perl-script", "title": "Need to check the string ends with a particular extension or not in Perl script", "body": "<pre><code>input1 = \"charles.ma@abc.com\"\ninput2 = \"charles.ma\"\n</code></pre>\n\n<p>Need to print the value if it ends with only <code>.ma</code> so only <code>input2</code> should print.</p>\n\n<p>The function should pass <code>input1</code> as it is not ending with <code>.ma</code> followed by <code>@abc</code>. </p>\n"}, {"tags": ["regex", "perl", "vim"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548927578, "post_id": 54457293, "comment_id": 95723029, "body": "You would need a multiline regex for this. Maybe this vim wike page <a href=\"http://vim.wikia.com/wiki/Search_across_multiple_lines\" rel=\"nofollow noreferrer\">Search across multiple lines</a> will help you."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548927911, "post_id": 54457293, "comment_id": 95723234, "body": "Oh and it seems in vim regexes you need to write <code>{</code> to match <code>{</code>, i.e. <code>&#47;{\\{1}\\n\\a*</code> matches exactly 1 <code>{</code>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548928150, "post_id": 54457293, "comment_id": 95723394, "body": "I only get <code>&#47;\\({\\{1}\\n[^{}]*{\\n\\}*\\n}\\)&#47;</code> to match, but that doesn&#39;t recurse. Are you sure the syntax <code>?1</code> is correct?"}, {"owner": {"reputation": 31, "user_id": 7394190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5739bb26f62353859d102274afa8e228?s=128&d=identicon&r=PG&f=1", "display_name": "lisinan", "link": "https://stackoverflow.com/users/7394190/lisinan"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548928300, "post_id": 54457293, "comment_id": 95723495, "body": "@StefanBecker it works in perl"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548928628, "post_id": 54457293, "comment_id": 95723715, "body": "Well, vim is not Perl, and I gather it uses its own regex engine, not even PCRE. Maybe this SO question <a href=\"https://stackoverflow.com/questions/5139300/match-parenthesised-block-using-regular-expressions-in-vim\">Match parenthesised block using regular expressions in vim</a> helps?"}, {"owner": {"reputation": 31, "user_id": 7394190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5739bb26f62353859d102274afa8e228?s=128&d=identicon&r=PG&f=1", "display_name": "lisinan", "link": "https://stackoverflow.com/users/7394190/lisinan"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548929435, "post_id": 54457293, "comment_id": 95724213, "body": "@StefanBecker Thank you for your help. Judging from the answer, it seems very difficult to Recursive in vim."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548929585, "post_id": 54457293, "comment_id": 95724301, "body": "I guess you should answer yourself and accept the answer."}, {"owner": {"reputation": 31, "user_id": 7394190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5739bb26f62353859d102274afa8e228?s=128&d=identicon&r=PG&f=1", "display_name": "lisinan", "link": "https://stackoverflow.com/users/7394190/lisinan"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548929980, "post_id": 54457293, "comment_id": 95724545, "body": "@StefanBecker You have spent a lot of energy and time on this.You can answer and I will adopt you."}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1548930608, "creation_date": 1548930608, "answer_id": 54458496, "question_id": 54457293, "link": "https://stackoverflow.com/questions/54457293/can-recursive-regularization-be-used-in-vim/54458496#54458496", "title": "Can Recursive Regularization be Used in vim?", "body": "<p>Unfortunately vim is not Perl, and I gather it uses its own regex engine, not even PCRE.</p>\n\n<p>According to this SO question <a href=\"https://stackoverflow.com/questions/5139300/match-parenthesised-block-using-regular-expressions-in-vim\">Match parenthesised block using regular expressions in vim</a> the vim regex engine doesn't support recursive regexes.</p>\n"}], "owner": {"reputation": 31, "user_id": 7394190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5739bb26f62353859d102274afa8e228?s=128&d=identicon&r=PG&f=1", "display_name": "lisinan", "link": "https://stackoverflow.com/users/7394190/lisinan"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1548964869, "accepted_answer_id": 54458496, "answer_count": 1, "score": -1, "last_activity_date": 1548930608, "creation_date": 1548926924, "last_edit_date": 1548928339, "question_id": 54457293, "link": "https://stackoverflow.com/questions/54457293/can-recursive-regularization-be-used-in-vim", "closed_reason": "Duplicate", "title": "Can Recursive Regularization be Used in vim?", "body": "<p>Match the following text</p>\n\n<pre><code>{\nclass innerC{\n}\n}\n</code></pre>\n\n<p>I use below in perl</p>\n\n<pre><code>(\\{[^{}]*(?1)*[^{}]*\\})\n</code></pre>\n\n<p>But it doesn't work in vim.Does vim not support Recursive regular?How to achieve the above matching in vim</p>\n"}, {"tags": ["xml", "perl", "svg"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1548923793, "post_id": 54456290, "comment_id": 95720850, "body": "Sausages? I&#39;m German and I appreciate sausages, especially <i>mit Senf</i>, but I have no idea what you are talking about. ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548923890, "post_id": 54456290, "comment_id": 95720884, "body": "Can you add a short SVG example file to show which bits you are actually trying to access? See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548923896, "post_id": 54456290, "comment_id": 95720886, "body": "Hmmmm, sausages!! Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, thank you."}, {"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548931581, "post_id": 54456290, "comment_id": 95725498, "body": "@simbabque added an example file"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548932447, "post_id": 54456290, "comment_id": 95726004, "body": "If you want those paths and nothing else, you don&#39;t even need to use an XML parser. This is a case were I think a simple regex is fine."}, {"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1548940382, "post_id": 54456290, "comment_id": 95730783, "body": "@simbabque Might do that, but then I would have missed a learning opportunity. This is the first time I have ever used an XML parser, and I don&#39;t want to give up just because the documentation is complicated."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548959482, "post_id": 54456290, "comment_id": 95742075, "body": "Even though a regex would probably be able to do this reasonably, you would still have to deal with things like XML decoding, and it wouldn&#39;t extend well to more complicated requirements."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548958881, "post_id": 54466333, "comment_id": 95741795, "body": "Please don&#39;t suggest XML::Simple for any reason. See <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">the answers here for why</a>."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548960388, "post_id": 54466333, "comment_id": 95742489, "body": "@Grinnz really? For a simple SVG? No one reason in the posted link meets this very trivial case. No one."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548960799, "post_id": 54466333, "comment_id": 95742660, "body": "Yes, because every other option (aside from XML::Easy, apparently) is simpler and won&#39;t break when trying to do something more complex."}, {"owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548961667, "post_id": 54466333, "comment_id": 95743077, "body": "You&#39;re right as always, off course.. but just for doing easy philosophy: Isn&#39;t like saying to use the chainsaw to cut the bread, because one day it could happen to have to cut something harder? :-)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1548962080, "post_id": 54466333, "comment_id": 95743287, "body": "In my opinion XML::Simple is the chainsaw, but it&#39;s the one without a handle. ;)"}, {"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "edited": false, "score": 0, "creation_date": 1549023839, "post_id": 54466333, "comment_id": 95765744, "body": "But what if I have multiple paths?"}], "tags": [], "owner": {"reputation": 333, "user_id": 4220763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AuCF.jpg?s=128&g=1", "display_name": "Hannibal", "link": "https://stackoverflow.com/users/4220763/hannibal"}, "is_accepted": false, "score": 0, "last_activity_date": 1549059787, "last_edit_date": 1549059787, "creation_date": 1548956443, "answer_id": 54466333, "question_id": 54456290, "link": "https://stackoverflow.com/questions/54456290/perl-xmleasy-read-svg-path-data/54466333#54466333", "title": "Perl XML::Easy: read SVG path data", "body": "<p>Since you don't remember the reason you choose to use <code>XML::Easy</code>, consider using <a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a> instead :-) :</p>\n\n<pre><code>use XML::Simple qw( XMLin ) ;\n\nmy $svg = q{\n    &lt;svg width=\"190\" height=\"160\" xmlns=\"http://www.w3.org/2000/svg\"&gt;\n      &lt;path d=\"M10 10 C 20 20, 40 20, 50 10\" stroke=\"black\" fill=\"transparent\"/&gt;\n      &lt;path d=\"M70 10 C 70 20, 120 20, 120 10\" stroke=\"black\" fill=\"transparent\"/&gt;\n      &lt;path d=\"M70 10 C 70 20, 120 20, 120 10\" stroke=\"black\" fill=\"transparent\"/&gt;\n    &lt;/svg&gt;\n};\n\nmy $decoded = XMLin( $svg, ForceArray =&gt; 1 ) ;\n\nforeach my $path ( @{ $decoded-&gt;{ path } } ){\n    my $data = $path-&gt;{d} ;\n    my $stroke = $path-&gt;{stroke} ;\n    my $fill = $path-&gt;{ fill } ;\n    ...\n}\n</code></pre>\n\n<p>Where <code>$decoded-&gt;{ path }</code> is: </p>\n\n<pre><code> [\n     {\n         d      =&gt; \"M10 10 C 20 20, 40 20, 50 10\",\n         fill   =&gt; \"transparent\",\n         stroke =&gt; \"black\"\n     },\n     {\n         d      =&gt; \"M70 10 C 70 20, 120 20, 120 10\",\n         fill   =&gt; \"transparent\",\n         stroke =&gt; \"black\"\n     },\n     {\n         d      =&gt; \"M70 10 C 70 20, 120 20, 120 10\",\n         fill   =&gt; \"transparent\",\n         stroke =&gt; \"black\"\n     }\n ]\n</code></pre>\n\n<p><strong>BEWARE</strong> : As pointed by Grinnz, don't use <code>XML::Simple</code> for anything else more complex than a trivial SVG.</p>\n"}, {"comments": [{"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "edited": false, "score": 0, "creation_date": 1549024041, "post_id": 54467075, "comment_id": 95765857, "body": "One of the reasons I chose XML::Easy is that it is in apt. I can&#39;t find Mojo::DOM in apt, so even though it looks easier, I&#39;ll accept the other answer."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "edited": false, "score": 0, "creation_date": 1549056024, "post_id": 54467075, "comment_id": 95781209, "body": "@MarkGardner It would be part of the Mojolicious distribution."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "edited": false, "score": 0, "creation_date": 1549056356, "post_id": 54467075, "comment_id": 95781311, "body": "@MarkGardner Another common option that would be nearly as simple would be <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>. I&#39;m not quite as familiar with XPath to show an example."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1548960737, "last_edit_date": 1548960737, "creation_date": 1548959299, "answer_id": 54467075, "question_id": 54456290, "link": "https://stackoverflow.com/questions/54456290/perl-xmleasy-read-svg-path-data/54467075#54467075", "title": "Perl XML::Easy: read SVG path data", "body": "<p>Here is how I'd do it with <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">Mojo::DOM</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::DOM;\n\nmy $svg = &lt;&lt;'SVG';\n&lt;svg&gt;\n[...]\n&lt;g id=\"something\"&gt;\n&lt;path d=\"M350.41,62.567v0.135l1.118,0.04v-0.135L350.41,62.567z\n    M351.898,60.655c-0.242,0-0.433,0.059-0.572,0.175c-0.089,0.104-0.179,0.207-0.269,0.311l-0.014-0.445l-0.875-0.013v0.31\n        l0.458,0.067l-0.041,1.421l0.498,0.006l0.014-0.754c0.197-0.449,0.438-0.673,0.72-0.673c0.193,0,0.29,0.11,0.29,0.329\n        c0,0.108-0.025,0.223-0.074,0.344l0.316,0.081c0.085-0.148,0.128-0.312,0.128-0.491c0-0.185-0.047-0.34-0.142-0.465\n        C352.228,60.723,352.082,60.655,351.898,60.655z\n      M350.572,62.816l-0.027,0.922l0.525-0.08l0.006-0.835L350.572,62.816z\"/&gt;\n&lt;/g&gt;\n[...]\n&lt;/svg&gt;\nSVG\n\nmy $dom = Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse($svg);\nmy $sausage = $dom-&gt;at('path')-&gt;{d};\n</code></pre>\n\n<p>Or if you want to get it from a specific <code>&lt;g&gt;</code> tag instead of the first one:</p>\n\n<pre><code>my $sausage = $dom-&gt;at('g#something path')-&gt;{d};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1548960711, "creation_date": 1548960711, "answer_id": 54467382, "question_id": 54456290, "link": "https://stackoverflow.com/questions/54456290/perl-xmleasy-read-svg-path-data/54467382#54467382", "title": "Perl XML::Easy: read SVG path data", "body": "<p>After diving into XML::Easy's docs for a bit, I think this would work:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Easy::Text 'xml10_read_document';\nuse XML::Easy::NodeBasics qw(xml_e_content_twine xml_e_type_name xml_e_attribute);\nuse List::Util 'first';\n\nmy $svg = &lt;&lt;'SVG';\n&lt;svg&gt;\n[...]\n&lt;g id=\"something\"&gt;\n&lt;path d=\"M350.41,62.567v0.135l1.118,0.04v-0.135L350.41,62.567z\n    M351.898,60.655c-0.242,0-0.433,0.059-0.572,0.175c-0.089,0.104-0.179,0.207-0.269,0.311l-0.014-0.445l-0.875-0.013v0.31\n        l0.458,0.067l-0.041,1.421l0.498,0.006l0.014-0.754c0.197-0.449,0.438-0.673,0.72-0.673c0.193,0,0.29,0.11,0.29,0.329\n        c0,0.108-0.025,0.223-0.074,0.344l0.316,0.081c0.085-0.148,0.128-0.312,0.128-0.491c0-0.185-0.047-0.34-0.142-0.465\n        C352.228,60.723,352.082,60.655,351.898,60.655z\n      M350.572,62.816l-0.027,0.922l0.525-0.08l0.006-0.835L350.572,62.816z\"/&gt;\n&lt;/g&gt;\n[...]\n&lt;/svg&gt;\nSVG\n\nmy $root = xml10_read_document($svg);\nmy $contents = xml_e_content_twine($root);\nmy $g = first { ref $_ and xml_e_type_name($_) eq 'g' and xml_e_attribute($_, 'id') eq 'something' } @$contents;\nmy $g_contents = xml_e_content_twine($g);\nmy $path = first { ref $_ and xml_e_type_name($_) eq 'path' } @$g_contents;\nmy $sausage = xml_e_attribute($path, 'd');\n</code></pre>\n\n<p>Hardly seems \"easy\" to me. I'd recommend any of the XPath or CSS equipped parsers instead.</p>\n"}], "owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 54467382, "answer_count": 3, "score": 0, "last_activity_date": 1549059787, "creation_date": 1548923477, "last_edit_date": 1548931531, "question_id": 54456290, "link": "https://stackoverflow.com/questions/54456290/perl-xmleasy-read-svg-path-data", "title": "Perl XML::Easy: read SVG path data", "body": "<p>I am working on a thing which will need to get at the path data of individual paths in an <code>SVG</code> file, so that I can generate similar paths.</p>\n\n<p>After looking in horror at the plethora of c/c++ libraries for handling SVG files, I decided to use perl (since it is more suited to the job of sorting through sausages of SVG path data) with an XML parser. For some reason I chose <code>XML::Easy</code> (I had a good reason. That was yesterday and I can't remember what it was. Probably the fact that it's supposed to be <code>Easy</code>) as the parser.</p>\n\n<p>However, I have not found any tutorials or documentation other than perldoc and metacpan.</p>\n\n<p>I have managed to read my file into an <code>XML::Easy::Element</code> reference using <code>xml10_read_document</code>, but I have no idea how to get at the actual path data.</p>\n\n<p>How do I get the path sausage from the <code>XML::Easy::Element</code> reference?</p>\n\n<p>Edit: the sausage I am referring to is the d attribute in the path. EG: from</p>\n\n<pre><code>&lt;svg&gt;\n[...]\n&lt;g id=something&gt;\n&lt;path d=\"M350.41,62.567v0.135l1.118,0.04v-0.135L350.41,62.567z\n    M351.898,60.655c-0.242,0-0.433,0.059-0.572,0.175c-0.089,0.104-0.179,0.207-0.269,0.311l-0.014-0.445l-0.875-0.013v0.31\n        l0.458,0.067l-0.041,1.421l0.498,0.006l0.014-0.754c0.197-0.449,0.438-0.673,0.72-0.673c0.193,0,0.29,0.11,0.29,0.329\n        c0,0.108-0.025,0.223-0.074,0.344l0.316,0.081c0.085-0.148,0.128-0.312,0.128-0.491c0-0.185-0.047-0.34-0.142-0.465\n        C352.228,60.723,352.082,60.655,351.898,60.655z\n      M350.572,62.816l-0.027,0.922l0.525-0.08l0.006-0.835L350.572,62.816z\"/&gt;\n&lt;/g&gt;\n[...]\n&lt;/svg&gt;\n</code></pre>\n\n<p>I would like to extract </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>\"M350.41,62.567v0.135l1.118,0.04v-0.135L350.41,62.567z\n M351.898,60.655c-0.242,0-0.433,0.059-0.572,0.175c-0.089,0.104-0.179,0.207-0.269,0.311l-0.014-0.445l-0.875-0.013v0.31\n l0.458,0.067l-0.041,1.421l0.498,0.006l0.014-0.754c0.197-0.449,0.438-0.673,0.72-0.673c0.193,0,0.29,0.11,0.29,0.329      c0,0.108-0.025,0.223-0.074,0.344l0.316,0.081c0.085-0.148,0.128-0.312,0.128-0.491c0-0.185-0.047-0.34-0.142-0.465\n        C352.228,60.723,352.082,60.655,351.898,60.655z\n      M350.572,62.816l-0.027,0.922l0.525-0.08l0.006-0.835L350.572,62.816z\"\n</code></pre>\n"}, {"tags": ["r", "regex", "perl", "lookahead", "lookbehind"], "comments": [{"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 2, "creation_date": 1548905852, "post_id": 54452783, "comment_id": 95714147, "body": "<code>&#47;TGGA[CT](?:[ACT]|G(?!T)){0,4}[CT]{5,}&#47;</code>"}, {"owner": {"reputation": 900, "user_id": 9023668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d29f01236fbcf07cf85a5d9291bb0ce?s=128&d=identicon&r=PG&f=1", "display_name": "GenesRus", "link": "https://stackoverflow.com/users/9023668/genesrus"}, "reply_to_user": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 1, "creation_date": 1548906380, "post_id": 54452783, "comment_id": 95714254, "body": "Brilliant! This works well. Would you add this as an answer so I can select it?"}], "answers": [{"tags": [], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "is_accepted": true, "score": 3, "last_activity_date": 1549299650, "creation_date": 1549299650, "answer_id": 54520923, "question_id": 54452783, "link": "https://stackoverflow.com/questions/54452783/using-look-ahead-behind-on-complex-search-in-r-perl-regex/54520923#54520923", "title": "Using look-ahead/behind on complex search in R/Perl regex", "body": "<p>Use a negative lookahead after the relevant G characters to indicate that a T should not follow:</p>\n\n<pre><code>/TGGA[CT](?:[ACT]|G(?!T)){0,4}[CT]{5,}/\n</code></pre>\n"}], "owner": {"reputation": 900, "user_id": 9023668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d29f01236fbcf07cf85a5d9291bb0ce?s=128&d=identicon&r=PG&f=1", "display_name": "GenesRus", "link": "https://stackoverflow.com/users/9023668/genesrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 54520923, "answer_count": 1, "score": 1, "last_activity_date": 1549299650, "creation_date": 1548904482, "last_edit_date": 1548904979, "question_id": 54452783, "link": "https://stackoverflow.com/questions/54452783/using-look-ahead-behind-on-complex-search-in-r-perl-regex", "title": "Using look-ahead/behind on complex search in R/Perl regex", "body": "<p>I can't figure out how to utilize lookaheads/behinds in a regular expression to find matches across individual search bits (?) of the word/motif I'm searching for. </p>\n\n<p>In a set of DNA strings, I need to match TGGA + one C or T + 0-4 A/C/T/G + >= 5 C/T, but don't want a GT anywhere in the match. I've figured out how to eliminate this within the 0-4 A/C/T/G (example #1), but I can't figure out how to deal with cases where the G comes from the [A,C,T,G]{0,4} and the adjacent T comes from the {5,}. </p>\n\n<p>I've tried adding a look behind after expanding the last part to [C,T](?>!GT)[C,T]{4,} and the look behind in front of the [A,C,T,G]{0,4} doesn't pick up the split GT instance. Any tips/help would be appreciated!</p>\n\n<p>Current regex:  </p>\n\n<pre><code>TGGA[C,T](?!GT)[A,C,T,G]{0,4}[C,T]{5,}\n</code></pre>\n\n<p>Example set:<br>\n1) TGGACGTGGTCCCCC (bad, dealt with)<br>\n2) TGGACGCCCCC (good)<br>\n3) TGGACGGGGTCCCCC... (bad, how do I fix this?)</p>\n"}]