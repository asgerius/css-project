[{"tags": ["mysql", "sql", "perl", "cgi", "dbi"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544655961, "post_id": 53752725, "comment_id": 94358301, "body": "You either need to set RaiseError =&gt; 1 in the DBI constructor so that errors will be thrown as exceptions you can see in the log (easy option), or check for errors yourself for every <code>connect</code> and <code>prepare</code> and <code>execute</code> and other DBI calls as described in the DBI documentation."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544656464, "post_id": 53752725, "comment_id": 94358462, "body": "Just in case this is a new project and you weren&#39;t aware, there are <a href=\"http://blogs.perl.org/users/grinnz/2018/11/modern-perl-cgi.html\" rel=\"nofollow noreferrer\">much better alternatives to CGI.pm</a> even just for CGI scripts. Otherwise feel free to ignore this comment."}], "answers": [{"tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 0, "last_activity_date": 1544659095, "creation_date": 1544659095, "answer_id": 53753179, "question_id": 53752725, "link": "https://stackoverflow.com/questions/53752725/update-db-row-with-perl-cgi/53753179#53753179", "title": "Update db row with perl cgi", "body": "<p>Without knowing the DBMS I can't be 100% certain, but it appears as though you blended the syntax for an insert and an update command.  The correct syntax for an update should be:</p>\n\n<pre><code>UPDATE tblclasses\nset\n  classname = ?,\n  department = ?,\n  classum = ?,\n  grade = ?,\n  credits = ?\nWHERE classID = $id\n</code></pre>\n\n<p>Also, for what it's worth, you should also be able to pass the <code>$id</code> variable as a parameter also rather than interpolating it.  This, in theory, will be kinder to the database as it will be compiling once and executing the same SQL statement over and over, only with different bind variable values:</p>\n\n<pre><code>my $check = qq{\n  UPDATE tblclasses\n  set\n    classname = ?,\n    department = ?,\n    classum = ?,\n    grade = ?,\n    credits = ?\n  WHERE classID = ?\n};\n\nmy $sth = $dbh-&gt;prepare($check);\n$sth-&gt;execute($className, $department, $classnum, $grade,$credits, $id);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 3, "last_activity_date": 1544660163, "creation_date": 1544660163, "answer_id": 53753291, "question_id": 53752725, "link": "https://stackoverflow.com/questions/53752725/update-db-row-with-perl-cgi/53753291#53753291", "title": "Update db row with perl cgi", "body": "<p>There is an error in the syntax of your SQL statement :</p>\n\n<pre><code>UPDATE tblclasses(classname, department, classnum, grade, credits) \nVALUES (?, ?, ?, ?, ?)\nWHERE classID = $id\n</code></pre>\n\n<p>Should be written :</p>\n\n<pre><code>UPDATE tblclasses\nSET classname = ?, \n       department = ?,\n       classnum = ?,\n       grade = ?,\n       credits = ?\nWHERE classID = ?\n</code></pre>\n\n<p>See <a href=\"https://dev.mysql.com/doc/refman/8.0/en/update.html\" rel=\"nofollow noreferrer\">the mysql docs</a>.</p>\n\n<p>Side notes (as commented also by @Grinnz) :</p>\n\n<ul>\n<li><p>you should always \u00ab\u00a0use strict\u00a0\u00bb</p></li>\n<li><p>you should set DBI attribute \u00ab\u00a0RaiseError\u00a0\u00bb to 1 on your database or statement handle(s) ; hence all DBI errors become fatal ; disabling both \u00ab\u00a0RaiseError\u00a0\u00bb and \u00ab\u00a0PrintErrror\u00a0\u00bb results in DBI neither dying on errors nor reporting them, hence you must manually check the return code of each and every DBI call to make sure that it worked - see <a href=\"https://metacpan.org/pod/DBI#RaiseError\" rel=\"nofollow noreferrer\">the DBI docs</a></p></li>\n<li><p>you should bind all variables in your SQL statement to void SQL injection (you did not bind $id, I changed that in the above query)</p></li>\n</ul>\n"}], "owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1554059475, "creation_date": 1544655792, "last_edit_date": 1554059475, "question_id": 53752725, "link": "https://stackoverflow.com/questions/53752725/update-db-row-with-perl-cgi", "title": "Update db row with perl cgi", "body": "<p>I am trying to update my sql table with some new values entered into the user. For some reason the sql command is not updating my db. I am getting the correct values I verified. Here is my code</p>\n\n<pre><code>#!/usr/bin/perl \n#This is going to be the user login check and will set a cookie\n\nuse DBI;\nuse CGI qw(:standard);\n\nuse strict;\n\n#Connection error \nsub showErrorMsgAndExit {\n    print header(), start_html(-title=&gt;shift);\n    print (shift);\n    print end_html();\n    exit;\n}\n\n#Connecting to the database\nmy $dbUsername = \"root\";\nmy $dbPassword = \"password\";\n\nmy $dsn = \"DBI:mysql:f18final:localhost\";\nmy $dbh = DBI-&gt;connect($dsn, $dbUsername, $dbPassword, {PrintError =&gt; 0});\n\n#error checking\nif(!$dbh) {\n    print header(), start_html(-title=&gt;\"Error connecting to DB\");\n    print (\"Unable to connec to the database\");\n    print end_html();\n    exit;\n}\n\nprint header;\nprint start_html(-title=&gt;'Add Classes');\n\n#Get the information the user entered\nmy $id = param('classid');\nmy $className = param('classname');\nmy $department = param('department');\nmy $classnum = param('classnum');\nmy $grade = param('grade');\nmy $credits = param('credit');\nprint \"$id $className, $department, $classnum, $grade, $credits\";\n#first sql check to see if username is already taken\nmy $check = \"UPDATE tblclasses(classname, department, classnum, grade, credits) VALUES (?, ?, ?, ?, ?) WHERE classID = $id\";\nmy $sth = $dbh-&gt;prepare($check);\n$sth-&gt;execute($className, $department, $classnum, $grade,$credits);\nprint \"&lt;h1&gt;Success&lt;/h1&gt;\";\nprint \"&lt;form action=http://localhost/cgi-bin/edit.pl method = 'post'&gt;\";\nprint \"&lt;input type = 'submit' name = 'submit' value = 'Update Another'&gt;\";\nprint \"&lt;/form&gt;\";\nprint \"&lt;form action=http://localhost/cgi-bin/actions.pl method = 'post'&gt;\";\nprint \"&lt;input type = 'submit' name = 'submit' value = 'Back to actions'&gt;\";\nprint \"&lt;/form&gt;\";\n\n\nprint end_html();\nexit;\n</code></pre>\n\n<p>When I try to run the sql command in mysql workbench it successfuly updates the row. What is my issue?</p>\n"}, {"tags": ["perl", "cgi", "webpage"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1544655710, "post_id": 53752509, "comment_id": 94358222, "body": "Start by adding error checking, as Perl built ins do not throw exceptions by default: <code>open(my $FH, &#39;&gt;&#39;, $txtfile) or die &quot;Failed to open $txtfile for writing: $!&quot;;</code> and for your system call, see <a href=\"https://perldoc.pl/functions/system\" rel=\"nofollow noreferrer\">the system function docs</a> for examples. You can also check print and close for errors but these are less important."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1544659416, "post_id": 53752509, "comment_id": 94359299, "body": "This is total speculation, but my guess is the location of the file is not where you think it&#39;s going.  Can you add an absolute path to a known location to see if that works?  If it does, the contextual directory from wherever the script was called is probably where the file is being dropped."}, {"owner": {"reputation": 955, "user_id": 2152612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1429edc49cce4063c2b57c1a6ab1c826?s=128&d=identicon&r=PG", "display_name": "Emil Perhinschi", "link": "https://stackoverflow.com/users/2152612/emil-perhinschi"}, "edited": false, "score": 0, "creation_date": 1544745022, "post_id": 53752509, "comment_id": 94395219, "body": "if you can see the output from your CGI script in the browser use cwd ( <a href=\"https://perldoc.perl.org/Cwd.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Cwd.html</a> ) to see where the script thinks the current working directory is, then look for the text.txt file there, or check if you have permissions to write there.   Also do this:   open (my $FH, &#39;&gt;&#39;, $txtfile) or die $!;  this will tell you why it cannot write the file, if that is the problem.   Also looking at the web server error log should give you more information, if you have access to the web server error log."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1544693928, "creation_date": 1544693928, "answer_id": 53758854, "question_id": 53752509, "link": "https://stackoverflow.com/questions/53752509/writing-to-a-text-file-using-perl-cgi/53758854#53758854", "title": "Writing to a text file using Perl CGI", "body": "<p>Your CGI program is going to run by a user who has very low permissions on your system - certainly lower than your own user account on that same system.</p>\n\n<p>It seems likely that one of two things is happening:</p>\n\n<ol>\n<li>Your CGI process can't see the program you're trying to run.</li>\n<li>Your CGI program doesn't have permission to execute the program you're trying to run.</li>\n</ol>\n\n<p>You should check the return value from <code>system()</code> and look at the value of <code>$?</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1547684461, "creation_date": 1547684461, "answer_id": 54227338, "question_id": 53752509, "link": "https://stackoverflow.com/questions/53752509/writing-to-a-text-file-using-perl-cgi/54227338#54227338", "title": "Writing to a text file using Perl CGI", "body": "<p>Either give system a single string, or give it individual arguments.  Your script is attempting and failing to run the program <code>perl predict_seq_1.pl</code>, rather than having perl run the script <code>predict_seq_1.pl</code>.</p>\n\n<pre><code>system('perl', 'predict_seq_1.pl', $geneSeq);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10783272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RLdEWicxjys/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hebJ0fSjct1FoPhh0ocJcUUQzv6w/mo/photo.jpg?sz=128", "display_name": "Richard TANG", "link": "https://stackoverflow.com/users/10783272/richard-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547684461, "creation_date": 1544654590, "last_edit_date": 1544671170, "question_id": 53752509, "link": "https://stackoverflow.com/questions/53752509/writing-to-a-text-file-using-perl-cgi", "title": "Writing to a text file using Perl CGI", "body": "<p>I am using cgi to call a perl function, and inside the perl function, I want it to write something in a txt. But it's not working for now. I have tried to run the cgi script on my apache server. The cgi could print the webpage as I requied, but I can't see the file that I want it to write. Seems like the perl script is not execute by the server.</p>\n\n<p>The perl script is quite simple.The file name is perl predict_seq_1.pl</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\n\nmy $seq = $ARGV[0];\nmy $txtfile = \"test.txt\";\nopen(my $FH, '&gt;', $txtfile);\nprint $FH \"test $seq success\\n\";\nclose $FH;\n</code></pre>\n\n<p>And the cgi part, I just call it by</p>\n\n<pre><code>system('perl predict_seq_1.pl', $geneSeq);\n</code></pre>\n"}, {"tags": ["excel", "perl"], "answers": [{"tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": true, "score": 2, "last_activity_date": 1544661589, "last_edit_date": 1544661589, "creation_date": 1544661273, "answer_id": 53753403, "question_id": 53750268, "link": "https://stackoverflow.com/questions/53750268/how-to-use-excelwriterxlsx-to-create-a-table-where-inserting-a-row-copies-a/53753403#53753403", "title": "How to use Excel::Writer::XLSX to create a table where inserting a row copies a column&#39;s formula?", "body": "<p>Excel tables are so underused...  it's good to see someone with an appreciation for what they have to offer, and kudos to the module author for adding table support.</p>\n\n<p>A couple of things...  if you want a table-based formula, declare it in the formula property of the table column.  This will cause it to be copied to any new rows that are created.</p>\n\n<pre><code>{ header =&gt; 'Title', formula =&gt; '=1+2' }\n</code></pre>\n\n<p>Secondly, there may be a way to do this via a R1C1 syntax (Excel supports it, but I don't know if Excel::Writer::XLSX does), but I find when you are referencing other columns in the table, it's easiest to do it based on the table column rather than the cell reference -- this is one of big advantages of Excel tables over standard ranges.</p>\n\n<pre><code>formula =&gt; '=[@[Header A]]*[@[Header B]]'\n</code></pre>\n\n<p>The impacted code should look as follows:</p>\n\n<pre><code>my @data = ( [1,2], [3,4], [5,6] );\n\nmy $rowCount = (scalar @data) + 1;\n\n$worksheet-&gt;add_table(\n    \"A1:C$rowCount\",\n    {\n        data =&gt; \\@data,\n        name =&gt; 'Table1',\n        style =&gt; 'Table Style Medium 2',\n        autofilter =&gt; 0,\n        header_row =&gt; 1,\n        columns =&gt; [\n            { header =&gt; 'Value 1' },\n            { header =&gt; 'Value 2' },\n            { header =&gt; 'Sum',\n              formula =&gt; '=SUM([@[Value 1]]:[@[Value 2]])'\n            },\n        ]\n    }\n);\n</code></pre>\n\n<p>When you open the spreadsheet and add a row, I think you will get the behavior you desire.</p>\n"}], "owner": {"reputation": 232, "user_id": 4664828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/2IHdJ.jpg?s=128&g=1", "display_name": "Sechanris", "link": "https://stackoverflow.com/users/4664828/sechanris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 1, "accepted_answer_id": 53753403, "answer_count": 1, "score": 6, "last_activity_date": 1544661589, "creation_date": 1544643718, "question_id": 53750268, "link": "https://stackoverflow.com/questions/53750268/how-to-use-excelwriterxlsx-to-create-a-table-where-inserting-a-row-copies-a", "title": "How to use Excel::Writer::XLSX to create a table where inserting a row copies a column&#39;s formula?", "body": "<p>So, in Excel, I can manually create create the following (I'm having it display the formula in column C):</p>\n\n<p><a href=\"https://i.stack.imgur.com/0N7iR.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0N7iR.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Then, I can select A:1 through C3, choose Insert -> Table, and press OK on the Create Table dialog to make my data into a table, unchecking the Filter Button box:</p>\n\n<p><a href=\"https://i.stack.imgur.com/T4IU6.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/T4IU6.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Then, when I right-click on row 3 and select Insert, I get a new row 3, with column C's formula copied correctly.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ukN3T.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ukN3T.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>My problem is I can't seem to generate an Excel file with Perl using Excel::Writer::XLSX that can create a table where inserting a row will cause the formula to be copied. It ends up being blank, like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2Mcew.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2Mcew.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Below is my code. Any insights would be much appreciated.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Excel::Writer::XLSX;\n\nmy $filePath = shift;\nmy $workbook = Excel::Writer::XLSX-&gt;new( $filePath );\nmy $worksheet = $workbook-&gt;add_worksheet( 'Metadata' );\n\nmy @data = ( [1,2,\"=SUM(A2:B2)\"], [3,4,\"=SUM(A3:B3)\"], [5,6,\"=SUM(A4:B4)\"] );\n\nmy $rowCount = (scalar @data) + 1;\n\n$worksheet-&gt;add_table( \n    \"A1:C$rowCount\", \n    {\n        data =&gt; \\@data,\n        name =&gt; 'Table1',\n        style =&gt; 'Table Style Medium 2',\n        autofilter =&gt; 0,\n        header_row =&gt; 1,\n        columns =&gt; [\n            { header =&gt; 'Value 1' },\n            { header =&gt; 'Value 2' },\n            { header =&gt; 'Sum' },\n        ]\n    }\n);\n\n$workbook-&gt;close();\n</code></pre>\n"}, {"tags": ["perl", "www-mechanize"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1544642556, "post_id": 53749353, "comment_id": 94352620, "body": "Welcome to Stack Overflow and the Perl tag. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and take the <a href=\"https://stackoverflow.com/tour\">tour</a>, then take a look at <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We will need to see a larger sample of this page, with at least two rows of relevant mail. You&#39;ll also need to tell us what it is you want to do exactly. If you want to click the subject link, you can find all links with <code>&#47;pk_mode=in_view&#47;</code> in them for example, and follow each of them. Please keep in mind that forwarding (is that what you mean) company email to your private email address might be a breach of your work contract in Germany."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10468668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5419fad4e6c48b7aaac77e2c1c2b5398?s=128&d=identicon&r=PG&f=1", "display_name": "Franz M&#252;ller", "link": "https://stackoverflow.com/users/10468668/franz-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1544642878, "creation_date": 1544642878, "answer_id": 53750061, "question_id": 53749353, "link": "https://stackoverflow.com/questions/53749353/perl-wwwmechanize-follow-link-in-a-certain-table-row/53750061#53750061", "title": "perl WWW::Mechanize follow link in a certain table row", "body": "<p>Sorry, I found it myself, it's</p>\n\n<pre><code># get all the table rows\nmy @list2 = $mech-&gt;look_down('_tag' =&gt; 'tr',\n                            'class' =&gt; 'bold preview');\n# only the first is of interest\nif(!defined $list2[0]){exit 0;}\n# get all the links, only the first matters\nmy @linklist= $list2[0]-&gt;look_down(_tag =&gt; 'a');\n# follow the link\n$mech-&gt;get($linklist[0]-&gt;attr('href'));\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10468668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5419fad4e6c48b7aaac77e2c1c2b5398?s=128&d=identicon&r=PG&f=1", "display_name": "Franz M&#252;ller", "link": "https://stackoverflow.com/users/10468668/franz-m%c3%bcller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544642878, "creation_date": 1544639888, "question_id": 53749353, "link": "https://stackoverflow.com/questions/53749353/perl-wwwmechanize-follow-link-in-a-certain-table-row", "title": "perl WWW::Mechanize follow link in a certain table row", "body": "<p>I'm trying to write a script, that transfers internal office mails to my normal mail-account. The only way I see to identify unread mails is, that they are in a <code>&lt;tr&gt;</code> with a special style ('bold preview'). I'm able to store the <code>&lt;tr&gt;</code>-element in a \nHTML-Element, a dump() gives me:</p>\n\n<pre><code>&lt;tr class=\"bold preview\"&gt; @0.1.0.2.0.0.0.0.2.0.4.3.1.3\n&lt;td class=\"collapsing\" style=\"padding-top: .4em; padding-bottom: .4em;\" \nvalign=\"top\"&gt; @0.1.0.2.0.0.0.0.2.0.4.3.1.3.0\n&lt;input class=\"pk-check-select\" name=\"pk_in_del[145930]\" \nonchange=\"checked_pk(this)\" type=\"checkbox\" value=\"1\" /&gt; \n@0.1.0.2.0.0.0.0.2.0.4.3.1.3.0.0\n&lt;td style=\"padding-top: .4em; padding-bottom: .4em;\" valign=\"top\"&gt; \n@0.1.0.2.0.0.0.0.2.0.4.3.1.3.1\n\" M. S. \"\n&lt;td style=\"padding-top: .4em; padding-bottom: .4em;\" valign=\"top\"&gt; \n@0.1.0.2.0.0.0.0.2.0.4.3.1.3.2\n&lt;a class=\"pk-subject-line\"  href=\"../index.php&amp;\ncsrf=1ff5569125fc9b41427d5816e5ba52912738e40a12df58f053f3c9886c7989dc\n&amp;amp;nav_mode=r&amp;amp;std_nav_id=4&amp;amp;pk_mode=in_view&amp;amp;PK_ID=145930\" \ntitle=\"Messaging-Dienste \"&gt; @0.1.0.2.0.0.0.0.2.0.4.3.1.3.2.0\n\" Messaging-Dienste \"\n&lt;span class=\"preview\"&gt; @0.1.0.2.0.0.0.0.2.0.4.3.1.3.2.0.1\n\"\u00a0&amp;dash;\u00a0 Werte Kolleginnen und Kollegen, hier eine Zusammenfassun...\"\n\" \"\n&lt;td class=\"right aligned\" style=\"padding-top: .4em; padding-bottom: .4em;\" \nvalign=\"top\"&gt; @0.1.0.2.0.0.0.0.2.0.4.3.1.3.3\n\" 10.12.2018 - 15:52 \" \n</code></pre>\n\n<p>now I have no idea how to follow this single link to retrieve the whole message. The number and the content of the link varies everytime, the page is called. </p>\n"}, {"tags": ["perl", "post", "dynamic", "cgi"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 1, "creation_date": 1544638159, "post_id": 53748843, "comment_id": 94350416, "body": "Are you sure that the values are available in the form, eg can you see them in the HTML source ?"}, {"owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544638357, "post_id": 53748843, "comment_id": 94350510, "body": "Yes using the same way I set each variable to print out my table. In my td I print out $row[i] for the data. It shows in the table."}, {"owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544638938, "post_id": 53748843, "comment_id": 94350796, "body": "@GMB you were right. I had to set the variables before entering the form. Thank you"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1544711514, "post_id": 53748843, "comment_id": 94379861, "body": "Please don&#39;t put raw HTML in your code. Take a look at <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> for some better suggestions."}], "owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544638994, "creation_date": 1544637692, "last_edit_date": 1544638994, "question_id": 53748843, "link": "https://stackoverflow.com/questions/53748843/passing-hidden-text-values-perl-cgi", "title": "Passing hidden text values perl cgi", "body": "<p>I am currently working on a project where I have to enter in class into to a database and preform some actions on it. One action is editing class. In my edit page I populate a table with all the classes in a db with a edit button which I pass information about that row to a new .pl file. In this file I am trying to read those hidden values I passed to prepopulate some text boxes with those values for updating. I am not able to pass the hidden content to my new file though.</p>\n\n<pre><code>print \"&lt;form action=http://localhost/cgi-bin/editing.pl method = 'post' &gt;\";\nmy $classid = $row[0];\nmy $classname = $row[1];\nmy $dep = $row[2];\nmy $classnum = $row[3];\nmy $grade = $row[4];\nmy $credit = $row[5];\nprint \"&lt;input type='hidden' name='classid' value='$classid' /&gt;\" ;\nprint \"&lt;input type='hidden' name='classname' value='$classname' /&gt;\" ;\nprint \"&lt;input type='hidden' name='dep' value='$dep' /&gt;\" ;\nprint \"&lt;input type='hidden' name='classnum' value='$classnum' /&gt;\" ;\nprint \"&lt;input type='hidden' name='grade' value='$grade' /&gt;\" ;\nprint \"&lt;input type='hidden' name='credit' value='$credit' /&gt;\" ;\nprint \"&lt;input type = 'submit' name = 'submit' value = 'Edit'&gt;\";\nprint \"&lt;/form&gt;\";\nprint \"&lt;/td&gt;\";\nprint \"&lt;/tr&gt;\";\n</code></pre>\n\n<p>This is where I dynamically populate my table with the values and then have a edit button to link to the editing.pl page. There I am trying to get the info by doing this</p>\n\n<pre><code>#Get the information the user entered\nmy $id = param('classid');\nmy $className = param('classname');\nmy $department = param('dep');\nmy $classnum = param('classnum');\nmy $grade = param('grade');\nmy $credits = param('credit');\n\nprint \"$id , $className, $department , $classnum, $grade, $credits\";#Get the information the user entered\n</code></pre>\n\n<p>But the only output I get is \", , , , ,\" so the values aren't being transfered. I am not sure as to what the issue is.</p>\n\n<p>EDIT here is my table output. Ignore the empty rows, I hae a bunch in my db when I was experimenting.\n<a href=\"https://i.stack.imgur.com/W65QY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W65QY.png\" alt=\"enter image description here\"></a></p>\n\n<p>FIX: Had to set my variables before entering the form. </p>\n"}, {"tags": ["perl", "cluster-computing", "submission"], "comments": [{"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1544637974, "post_id": 53748702, "comment_id": 94350323, "body": "That error message comes from the shell, not perl, so for whatever reason the script isn&#39;t being seen as a perl script"}, {"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "reply_to_user": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1544639860, "post_id": 53748702, "comment_id": 94351261, "body": "Thanks, I&#39;ve asked it &quot;which perl&quot;, but beyond that I&#39;m stuck."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1544647636, "post_id": 53748702, "comment_id": 94354884, "body": "the recommended shebang is <code>#!&#47;usr&#47;bin&#47;env perl</code> - see <a href=\"https://stackoverflow.com/questions/2791954/what-should-i-use-for-a-perl-scripts-shebang-line\" title=\"what should i use for a perl scripts shebang line\">stackoverflow.com/questions/2791954/&hellip;</a>  Have you tried setting the exact path to your perl binary instead?"}], "answers": [{"tags": [], "owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "is_accepted": true, "score": 0, "last_activity_date": 1549893140, "creation_date": 1549893140, "answer_id": 54632068, "question_id": 53748702, "link": "https://stackoverflow.com/questions/53748702/perl-runtime-bug-in-ogs-hpc-cluster/54632068#54632068", "title": "Perl runtime bug in OGS HPC cluster", "body": "<p>The solution,as @bytepusher described, was </p>\n\n<pre><code>#!/usr/bin/env perl\n</code></pre>\n\n<p>and submission to <code>qsub -cwd -q long.q ./test.pl</code> was fine.</p>\n"}], "owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 54632068, "answer_count": 1, "score": 0, "last_activity_date": 1549893140, "creation_date": 1544637092, "question_id": 53748702, "link": "https://stackoverflow.com/questions/53748702/perl-runtime-bug-in-ogs-hpc-cluster", "title": "Perl runtime bug in OGS HPC cluster", "body": "<p>I'm attempting to debug a HPC cluster. </p>\n\n<p><strong>One problem</strong>: submitting Perl scripts into a several hundred node Linux Suse cluster via Open Grid Scheduler (OGS/GE 2011.11). </p>\n\n<p>This generates a runtime error for Perl scripts on the \"long queue\" in the cluster, but not on the \"short queue\".</p>\n\n<pre><code>$&gt; qsub -cwd -q short.q ./test.pl\n</code></pre>\n\n<p>Output is ok</p>\n\n<pre><code>$&gt; qsub -cwd -q long.q ./test.pl\n</code></pre>\n\n<p>Output error log,\n<strong>/var/spool/sge/comp26/job_scripts/3141815: line 2: syntax error near unexpected token <code>my'\n/var/spool/sge/comp26/job_scripts/3141815: line 2:</code>open (my $fh, '>', 'test.out');'</strong></p>\n\n<p>If I submit a shell script to the long queue it works, containing</p>\n\n<pre><code>perl ./test.pl \n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>System: GNU bash, version 4.2.46(2), Perl v5.16.3 (yuk)</p>\n\n<p><strong>Test script</strong></p>\n\n<pre><code>#!/usr/bin/perl\n# Also tried #!/bin/perl\nsystem(\"perl -v &gt; perl.out\");\nopen (my $fh, '&gt;', 'test.out');\nprint $fh 'test';\nclose $fh;\n</code></pre>\n"}, {"tags": ["perl", "stdin", "getopt-long"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544639086, "post_id": 53748461, "comment_id": 94350879, "body": "Can you show examples of usage you need? When you set up an option <code>--o</code> (for example) with Getopt, both <code>script.pl -o val file</code> and <code>echo &quot;...&quot; | script.pl -o val</code> will read in the option value and you&#39;ll be able to read either from the pipe or the file with <code>while (&lt;&gt;)</code>.  (Is that not what you want?)"}, {"owner": {"reputation": 9, "user_id": 8828919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fb62e588a6efcef0a8346156ea8d74?s=128&d=identicon&r=PG&f=1", "display_name": "Yiran Guo", "link": "https://stackoverflow.com/users/8828919/yiran-guo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544647056, "post_id": 53748461, "comment_id": 94354646, "body": "@zdim It is something like <code>script.pl -s tab filename</code> or <code>head -3 filename | script.pl -s tab -</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544647718, "post_id": 53748461, "comment_id": 94354928, "body": "Then that should work exactly as in my comment (see @ikegami answer). Note that you do not need the <code>-</code> for what you want."}, {"owner": {"reputation": 9, "user_id": 8828919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fb62e588a6efcef0a8346156ea8d74?s=128&d=identicon&r=PG&f=1", "display_name": "Yiran Guo", "link": "https://stackoverflow.com/users/8828919/yiran-guo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544648756, "post_id": 53748461, "comment_id": 94355331, "body": "Aha yes thanks a lot @zdim"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8828919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fb62e588a6efcef0a8346156ea8d74?s=128&d=identicon&r=PG&f=1", "display_name": "Yiran Guo", "link": "https://stackoverflow.com/users/8828919/yiran-guo"}, "edited": false, "score": 0, "creation_date": 1544647133, "post_id": 53749880, "comment_id": 94354675, "body": "I tried &lt;&gt; instead of &lt;STDIN&gt; and it is the same - only the first row is printed. What I want is something like <code>script.pl -s tab filename</code> or <code>head -3 filename | script.pl -s tab -</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 9, "user_id": 8828919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fb62e588a6efcef0a8346156ea8d74?s=128&d=identicon&r=PG&f=1", "display_name": "Yiran Guo", "link": "https://stackoverflow.com/users/8828919/yiran-guo"}, "edited": false, "score": 0, "creation_date": 1544648838, "post_id": 53749880, "comment_id": 94355366, "body": "@YiranGuo  The answer shows you the principle, the main point being to use <code>&lt;&gt;</code> (without <code>STDIN</code>).  In order to read more use <code>while (&lt;&gt;) { ... }</code> instead of reading it into a scalar variable.  (Or, you can read it into an array, which will then fetch all lines, but I&#39;d recommend to use a <code>while</code> instead.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1544642074, "creation_date": 1544642074, "answer_id": 53749880, "question_id": 53748461, "link": "https://stackoverflow.com/questions/53748461/perl-take-arguments-from-both-command-line-and-piped-stdinfile-using-getopt/53749880#53749880", "title": "Perl: Take arguments from both command line and [piped STDIN|file], using Getopt::Long", "body": "<p>Just use <code>&lt;&gt;</code> (short for <code>&lt;ARGV&gt;</code>) instead of <code>&lt;STDIN&gt;</code>. <code>ARGV</code> is a special handle that reads from STDIN if <code>@ARGV</code> is empty, and reads from the each of the files specified in <code>@ARGV</code> if it's not.</p>\n\n<pre><code>GetOptions(\"se=s\" =&gt; \\my $se)\n   or die \"Usage: $0 -s &lt;tab|space|comma&gt;\\n\";\n\nmy $st = &lt;&gt;;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8828919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fb62e588a6efcef0a8346156ea8d74?s=128&d=identicon&r=PG&f=1", "display_name": "Yiran Guo", "link": "https://stackoverflow.com/users/8828919/yiran-guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544642074, "creation_date": 1544636167, "question_id": 53748461, "link": "https://stackoverflow.com/questions/53748461/perl-take-arguments-from-both-command-line-and-piped-stdinfile-using-getopt", "title": "Perl: Take arguments from both command line and [piped STDIN|file], using Getopt::Long", "body": "<p>Hi I wanted to implement both command line argument1, and either piped STDIN (through lone single dash '-') or a filename as argument2, using Getop::Long in Perl. In perldoc it is merely mentioned a little bit \"A lone dash on the command line will now be a legal option, and using it will set variable $stdio\": (<a href=\"https://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/Getopt/Long.html</a>). But this is far from what I can use. I tried the following</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Getopt::Long;\nmy ($se, $st);\nGetOptions(\"se=s\" =&gt; \\$s, '' =&gt; \\$st) or die \"Usage: $0 -s &lt;tab|space|comma&gt;\\n\";\n$st = &lt;STDIN&gt;;\nprint \"$se\\n$st\\n\";\n</code></pre>\n\n<p>However $st only returns the first line or should I use a filehandle? Then what if the lone single dash '-' is not there and a filename is specified as argument2? Thanks a lot,</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1544634128, "post_id": 53747836, "comment_id": 94348261, "body": "The original title wasn&#39;t describing what you were trying to do, just your approach. I&#39;ve tried to steer it more towards the problem you&#39;re trying to solve."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1544633951, "creation_date": 1544633951, "answer_id": 53747888, "question_id": 53747836, "link": "https://stackoverflow.com/questions/53747836/extracting-version-number-from-list-of-paths-with-regular-expression/53747888#53747888", "title": "Extracting version number from list of paths with regular expression", "body": "<p>You may use</p>\n\n<pre><code>if ($str =~ /(.*)\\/python\\/?([^\\/]*)/) {\n    my $version = $2;\n}\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/ijeb3f/1\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>(.*)</code> - Group 1: any 0+ chars other than line break chars, as many as possible</li>\n<li><code>\\/python</code> - <code>/python</code> substring</li>\n<li><code>\\/?</code> - 1 or 0 <code>/</code> chars</li>\n<li><code>([^\\/]*)</code> - Group 2: any 0+ chars other than <code>/</code> char.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": 1, "last_activity_date": 1544636977, "creation_date": 1544636977, "answer_id": 53748665, "question_id": 53747836, "link": "https://stackoverflow.com/questions/53747836/extracting-version-number-from-list-of-paths-with-regular-expression/53748665#53748665", "title": "Extracting version number from list of paths with regular expression", "body": "<p>For all the provided examples, you can use <code>([\\d.]+)</code>, i.e.:</p>\n\n<pre><code>if ($str =~ /([\\d.]+)/) {\n    my $version = $1;\n}\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://www.jdoodle.com/embed/v0/QDT\" rel=\"nofollow noreferrer\">Perl Demo</a><br>\n<a href=\"https://regex101.com/r/otppLM/1\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<hr>\n\n<p><strong>Regex Explanation:</strong><br>\n<a href=\"https://i.stack.imgur.com/tmPc1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tmPc1.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544636977, "creation_date": 1544633785, "last_edit_date": 1544634091, "question_id": 53747836, "link": "https://stackoverflow.com/questions/53747836/extracting-version-number-from-list-of-paths-with-regular-expression", "title": "Extracting version number from list of paths with regular expression", "body": "<p>Consider the following strings:</p>\n\n<pre><code>/bin/python2.7.5\n/bin/python/2.7.5/log/dir\n/bin/python2.7.5/src\n</code></pre>\n\n<p>I would like to extract the version in a variable so for the second string I did:</p>\n\n<pre><code>if ($str =~ /(.*)\\/python\\/(.*?)\\//) {\n    my $version = $2;\n}\n</code></pre>\n\n<p>Also for the first one, I can do the following regex:</p>\n\n<pre><code>$str =~ /(.*)\\/python(\\d+\\.)?(\\d+\\.)?(\\*|\\d+)/;\n</code></pre>\n\n<p>But how can I combine those regexes into one main regular expression so (for example) <code>$2</code> will contain the version? Any possible way to make it shorter?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544651238, "post_id": 53747826, "comment_id": 94356418, "body": "Specifically: <a href=\"https://perldoc.pl/perlop#Additive-Operators\" rel=\"nofollow noreferrer\">perldoc.pl/perlop#Additive-Operators</a> and <a href=\"https://perldoc.pl/perlop#Assignment-Operators\" rel=\"nofollow noreferrer\">perldoc.pl/perlop#Assignment-Operators</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9537786, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gYuwmR1adco/AAAAAAAAAAI/AAAAAAAAEdI/5xccCUzLBzc/photo.jpg?sz=128", "display_name": "Chuda Mainali", "link": "https://stackoverflow.com/users/9537786/chuda-mainali"}, "edited": false, "score": 0, "creation_date": 1544717162, "post_id": 53763961, "comment_id": 94383461, "body": "you beautifully answered my question. Thanks a lot."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 15, "user_id": 9537786, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gYuwmR1adco/AAAAAAAAAAI/AAAAAAAAEdI/5xccCUzLBzc/photo.jpg?sz=128", "display_name": "Chuda Mainali", "link": "https://stackoverflow.com/users/9537786/chuda-mainali"}, "edited": false, "score": 0, "creation_date": 1544717945, "post_id": 53763961, "comment_id": 94383949, "body": "@ChudaMainali: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1544710896, "creation_date": 1544710896, "answer_id": 53763961, "question_id": 53747826, "link": "https://stackoverflow.com/questions/53747826/operator-in-perl/53763961#53763961", "title": ".= operator in perl", "body": "<p>The dot (<code>.</code>) is the concatenation operator in Perl.</p>\n\n<pre><code>$string = $a_substring . $another_substring;\n</code></pre>\n\n<p>Sometimes you want to concatenate text to the same variable.</p>\n\n<pre><code>$string = $string . $some_extra_text;\n</code></pre>\n\n<p>Most binary operators in Perl have an \"assignment\" version which simplifies code like this. So instead of:</p>\n\n<pre><code>$total = $total + $line_value;\n</code></pre>\n\n<p>You can just write:</p>\n\n<pre><code>$total += $line_value;\n</code></pre>\n\n<p>Syntax like this can be found in pretty much any C-style programming language.</p>\n\n<p>In Perl, the concatenation operator has an assignment version. So instead of:</p>\n\n<pre><code>$string = $string . $some_extra_text;\n</code></pre>\n\n<p>You can just write:</p>\n\n<pre><code>$string .= $some_extra_text;\n</code></pre>\n\n<p>So, reversing that logic, your code:</p>\n\n<pre><code>$contents .= $_;\n</code></pre>\n\n<p>Is just a shortcut for:</p>\n\n<pre><code>$contents = $contents . $_;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9537786, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gYuwmR1adco/AAAAAAAAAAI/AAAAAAAAEdI/5xccCUzLBzc/photo.jpg?sz=128", "display_name": "Chuda Mainali", "link": "https://stackoverflow.com/users/9537786/chuda-mainali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53763961, "answer_count": 1, "score": -5, "last_activity_date": 1544710896, "creation_date": 1544633733, "last_edit_date": 1544633807, "question_id": 53747826, "link": "https://stackoverflow.com/questions/53747826/operator-in-perl", "title": ".= operator in perl", "body": "<p>Can someone explain me what is happening here? I am trying to read a Downloaded-XML file</p>\n\n<pre><code>while(&lt;MY-FILE&gt;) {\n chomp;\n $contents .= $_;#what is this doing?\n</code></pre>\n\n<p>}</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["c", "perl", "printf"], "answers": [{"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 6, "last_activity_date": 1544609027, "last_edit_date": 1544609027, "creation_date": 1544605873, "answer_id": 53739532, "question_id": 53738961, "link": "https://stackoverflow.com/questions/53738961/printf-how-to-align-numbers-on-decimal-point/53739532#53739532", "title": "printf: how to align numbers on decimal point", "body": "<p>The <code>[*]printf</code> function allow you to:</p>\n\n<ul>\n<li>get how much characters have been written,</li>\n<li>add some padding.</li>\n</ul>\n\n<p>So if you know how much characters are before the dot (<code>d = sprintf(buf, \"%.0f\", ar[i]);</code>), you can align the dot using (<code>printf(\"[%*s %g\", 4-d, \"\", ar[i]);</code>).</p>\n\n<p>Then same logic to align the closing bracket:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    double ar[] = {\n        1.788139343e-007,   0.0547055073198, -0.703213036125,\n       -0.583665880391,    -1.41198285298,    0.171879081676,\n       -0.58966025098,    -86.0627173425,    -0.84449797709,\n        3.49876623321e-005, 3.02660429162,   -0.256948695361};\n\n    for (int i = 0; i &lt; 12; ++i)\n    {\n        /* buffer to count how much character are before the dot*/\n        char buf[64];\n\n        /* how much before the dot? */\n        int d = sprintf(buf, \"%+.0lf\", ar[i]);\n\n        /* write float with aligned dot and store second padding */\n        int e = printf(\"[%*s %+.15lg\", 4-d, \"\", ar[i]);\n        printf(\"%*s]\\n\", 25-e, \"\");\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>[   +1.788139343e-07     ]\n[   +0.0547055073198     ]\n[   -0.703213036125      ]\n[   -0.583665880391      ]\n[   -1.41198285298       ]\n[   +0.171879081676      ]\n[   -0.58966025098       ]\n[  -86.0627173425        ]\n[   -0.84449797709       ]\n[   +3.49876623321e-05   ]\n[   +3.02660429162       ]\n[   -0.256948695361      ]\n</code></pre>\n"}], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1565, "favorite_count": 1, "accepted_answer_id": 53739532, "answer_count": 1, "score": 4, "last_activity_date": 1544609027, "creation_date": 1544603614, "last_edit_date": 1544603971, "question_id": 53738961, "link": "https://stackoverflow.com/questions/53738961/printf-how-to-align-numbers-on-decimal-point", "title": "printf: how to align numbers on decimal point", "body": "<p>consider having a set of numbers:</p>\n\n<pre><code>my @array =   (\n   1.788139343e-007, 0.0547055073198, -0.703213036125,\n   -0.583665880391, -1.41198285298, +0.171879081676,\n   -0.58966025098, -86.0627173425, -0.84449797709,\n 3.49876623321e-005, 3.02660429162, -0.256948695361);\n</code></pre>\n\n<p>I would like to have the decimal point aligned at the n-th column of a total width of m (maybe n=6 and m=25)</p>\n\n<p>If using <code>%f</code> i get nicely aligned numbers, but the numbers that require an scientific notation are being destroyed.\nusging <code>%g</code> interprets the precision argument after the dot as an absolute precision that results in different decimals after the decimal point.\nAnd since the most numbers are in the range (-10, 10) I do not want to take the scientific notation <code>%e</code></p>\n\n<p>Are there any flags or format attributes (or combination of) that I overlooked? </p>\n\n<p>the expected outcome would be:</p>\n\n<pre><code>foreach my $f (@array){\n  printf(\"[%+25.12g]$/\", $f);\n}\n\n\n[   +1.788139343e-007     ]\n[   +0.0547055073198      ]\n[   -0.703213036125       ]\n[   -0.583665880391       ]\n[   -1.41198285298        ]\n[   +0.0171879081676      ]\n[   -0.58966025098        ]\n[  -86.0627173425         ]\n[   -0.84449797709        ]\n[   +3.49876623321e-005   ]\n[   +3.02660429162        ]\n[   -0.256948695361       ]\n</code></pre>\n\n<p>or even better</p>\n\n<pre><code>[   +1.7881393430000e-007 ]\n[   +0.0547055073198      ]\n[   -0.7032130361250      ]\n[   -0.5836658803910      ]\n[   -1.4119828529800      ]\n[   +0.0171879081676      ]\n[   -0.5896602509800      ]\n[  -86.0627173425000      ]\n[   -0.8444979770900      ]\n[   +3.4987662332100e-005 ]\n[   +3.0266042916200      ]\n[   -0.2569486953610      ]\n</code></pre>\n\n<p>(the question is about Perl but <code>s?printf</code>s format string is rather independent, so I also added <code>C</code> tag)</p>\n"}, {"tags": ["spring", "perl", "curl", "optimization", "controller"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1544596894, "post_id": 53737369, "comment_id": 94327567, "body": "Probably better to do it in pure perl... LWP::UserAgent or a similar module. Heck, there might even be a libcurl binding..."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1544604089, "post_id": 53737369, "comment_id": 94330600, "body": "Using <a href=\"https://corion.net/curl2lwp.psgi\" rel=\"nofollow noreferrer\">corion.net/curl2lwp.psgi</a> , you can easily convert a Curl command line to a Perl script using LWP::UserAgent. The comment box is too small for the resulting code, but if that&#39;s what you&#39;re looking for, I can post it as answer."}, {"owner": {"reputation": 71, "user_id": 5737809, "user_type": "registered", "profile_image": "https://graph.facebook.com/918164548261117/picture?type=large", "display_name": "Gaurav Setia", "link": "https://stackoverflow.com/users/5737809/gaurav-setia"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544604217, "post_id": 53737369, "comment_id": 94330687, "body": "@Corion it would be appreciable if u put it in as an answer upfront! :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544605471, "post_id": 53737369, "comment_id": 94331355, "body": "<code>curl</code> is just a wrapper for the libcurl library. Rather than shelling out, why not use the libcurl library directly? <a href=\"http://search.cpan.org/perldoc?Net::Curl\" rel=\"nofollow noreferrer\">Net::Curl</a>."}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 5270449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-X7PISHc1N4w/AAAAAAAAAAI/AAAAAAAAAKU/UsuImgLOvDk/photo.jpg?sz=128", "display_name": "Dosisod", "link": "https://stackoverflow.com/users/5270449/dosisod"}, "is_accepted": false, "score": 0, "last_activity_date": 1544597217, "creation_date": 1544597217, "answer_id": 53737475, "question_id": 53737369, "link": "https://stackoverflow.com/questions/53737369/how-to-execute-curl-command-from-a-perl-script/53737475#53737475", "title": "How to execute CURL command from a perl script?", "body": "<p>Bad practice, but using <code>system</code> (runs arbitrary shell code):</p>\n\n<pre><code>system \"curl -v -H 'Accept:text/x-html-parts,text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8' -H 'Accept-Charset:UTF-8' -H 'Accept-Encoding:identity' -H 'Connection:Keep-Alive' -H 'Via:HTTP/1.1 ShoppingArea' + + + something.. something....\"\n</code></pre>\n\n<p>also, from (<a href=\"https://stackoverflow.com/questions/7196124/how-do-i-write-a-perl-script-to-use-curl-to-process-a-url\">How do I write a Perl script to use curl to process a URL?</a>):</p>\n\n<pre><code>my $curl=`curl http://whatever`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 10232486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9lJZ.png?s=128&g=1", "display_name": "vikram sahu", "link": "https://stackoverflow.com/users/10232486/vikram-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1544597793, "creation_date": 1544597793, "answer_id": 53737582, "question_id": 53737369, "link": "https://stackoverflow.com/questions/53737369/how-to-execute-curl-command-from-a-perl-script/53737582#53737582", "title": "How to execute CURL command from a perl script?", "body": "<p>if you want to use specific CURL only in your Perl Script. I would Recommend you to execute System call using backticks.</p>\n\n<pre><code>my $curlcomm = `curl -v -H \"Accept:text/x-html-parts,text/html,application/xhtml+xml,applicatio/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\" -H \"Accept-Charset:UTF-8\" -H \"Accept-Encoding:identity\" -H \"Connection:Keep-Alive\" -H \"Via:HTTP/1.1 ShoppingArea\" + + + something.. something....`\n</code></pre>\n\n<p>but standard ways are also available that can be using <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a>, <a href=\"https://metacpan.org/pod/LWP::Curl\" rel=\"nofollow noreferrer\">LWP::Curl</a> and similar.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 5737809, "user_type": "registered", "profile_image": "https://graph.facebook.com/918164548261117/picture?type=large", "display_name": "Gaurav Setia", "link": "https://stackoverflow.com/users/5737809/gaurav-setia"}, "edited": false, "score": 1, "creation_date": 1544611399, "post_id": 53739269, "comment_id": 94335013, "body": "while i am trying to run the above script, i get &quot; java.lang.IllegalArgumentException: Invalid character found in method name. HTTP method names must be tokens&quot; as an error.  i guess this is due to presence of &quot;|&quot; (pipe) character. how can i get rid of this?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 71, "user_id": 5737809, "user_type": "registered", "profile_image": "https://graph.facebook.com/918164548261117/picture?type=large", "display_name": "Gaurav Setia", "link": "https://stackoverflow.com/users/5737809/gaurav-setia"}, "edited": false, "score": 0, "creation_date": 1544618864, "post_id": 53739269, "comment_id": 94339258, "body": "That is a Java error message. Where do you get that Java error message from? The above script is a Perl script."}, {"owner": {"reputation": 71, "user_id": 5737809, "user_type": "registered", "profile_image": "https://graph.facebook.com/918164548261117/picture?type=large", "display_name": "Gaurav Setia", "link": "https://stackoverflow.com/users/5737809/gaurav-setia"}, "edited": false, "score": 0, "creation_date": 1544688924, "post_id": 53739269, "comment_id": 94367209, "body": "thanks for the help! can you please let me know, how can i be sure that this script got executed successfully or not?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 71, "user_id": 5737809, "user_type": "registered", "profile_image": "https://graph.facebook.com/918164548261117/picture?type=large", "display_name": "Gaurav Setia", "link": "https://stackoverflow.com/users/5737809/gaurav-setia"}, "edited": false, "score": 0, "creation_date": 1544701133, "post_id": 53739269, "comment_id": 94373833, "body": "@GauravSetia This is more a debugging question - I don&#39;t know how to debug Java scripts, but you can <code>print $res-&gt;is_success</code> or <code>exit $res-&gt;is_success</code> or <code>print $res-&gt;code</code> to see/signal the request status."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1544606152, "last_edit_date": 1544606152, "creation_date": 1544604915, "answer_id": 53739269, "question_id": 53737369, "link": "https://stackoverflow.com/questions/53737369/how-to-execute-curl-command-from-a-perl-script/53739269#53739269", "title": "How to execute CURL command from a perl script?", "body": "<p>As a rough prototype of reproducing what <code>curl</code> does in pure Perl (Using <a href=\"https://corion.net/curl2lwp.psgi\" rel=\"nofollow noreferrer\">https://corion.net/curl2lwp.psgi</a> ), you can easily convert a Curl command line to a Perl script using LWP::UserAgent:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\nuse HTTP::Request;\n\n\nmy $ua = LWP::UserAgent-&gt;new();\nmy $r  = HTTP::Request-&gt;new(\n    'GET' =&gt; 'https://api.example.com/',\n    [\n        'Connection' =&gt; 'Keep-Alive',\n        'Via'        =&gt; 'HTTP/1.1 ShoppingArea',\n        'Accept' =&gt;\n'text/x-html-parts,text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',\n        'Accept-Charset'  =&gt; 'UTF-8',\n        'Accept-Encoding' =&gt; 'identity',\n        'Host'            =&gt; 'api.example.com:443',\n        'User-Agent'      =&gt; 'curl/7.55.1',\n    ],\n\n);\nmy $res = $ua-&gt;request( $r, );\n\n\n__END__\n\nCreated from curl command line\ncurl -v -H \"Accept:text/x-html-parts,text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\" -H \"Accept-Charset:UTF-8\" -H \"Accept-Encoding:identity\" -H \"Connection:Keep-Alive\" -H \"Via:HTTP/1.1 ShoppingArea\" https://api.example.com/ \n</code></pre>\n\n<p>This requires the <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> module, so shelling out to <code>curl</code> might still be a quicker approach to you. If you need to react on the result, like sending error mails on HTTP Error 500 or other notifications on HTTP Error 4xx, using pure Perl is more convenient as you get the status code directly back.</p>\n"}], "owner": {"reputation": 71, "user_id": 5737809, "user_type": "registered", "profile_image": "https://graph.facebook.com/918164548261117/picture?type=large", "display_name": "Gaurav Setia", "link": "https://stackoverflow.com/users/5737809/gaurav-setia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4725, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1544606152, "creation_date": 1544596693, "question_id": 53737369, "link": "https://stackoverflow.com/questions/53737369/how-to-execute-curl-command-from-a-perl-script", "title": "How to execute CURL command from a perl script?", "body": "<p>I want to warm up my service as soon as deployment is done, otherwise the first person hitting my service faces a big latency.</p>\n\n<p>For this i want to execute a curl command similar to :</p>\n\n<pre><code>curl -v -H \"Accept:text/x-html-parts,text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\" -H \"Accept-Charset:UTF-8\" -H \"Accept-Encoding:identity\" -H \"Connection:Keep-Alive\" -H \"Via:HTTP/1.1 ShoppingArea\" + + + something.. something....\n</code></pre>\n\n<p>This curl script will execute during the deployment process and will invoke the main spring controller of my service.</p>\n\n<p>I want to write this command in a perl file.</p>\n\n<p>But i am not very sure how to do this!</p>\n\n<p>Any leads would be helpful :)</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544563239, "post_id": 53732423, "comment_id": 94318838, "body": "The <code>while (&lt;&gt;)</code> reads all lines from all input files, but here you set a hard-coded <code>%hash</code> inside and don&#39;t use actual input.  I see that this is for a definite demo of the problem, but it won&#39;t work.  I suggest: put your actual code instead (trimmed down for a short example), which does read from files, and use it with a short sample file that you also show here.  (Another problem: <code>$state</code> isn&#39;t set from anywhere in this code snippet.)"}, {"owner": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544563783, "post_id": 53732423, "comment_id": 94319063, "body": "@zdim - Posted it"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544564159, "post_id": 53732423, "comment_id": 94319228, "body": "@user3423407 Thank you -- now go back and nice and slow check what you posted: it won&#39;t print what you show.  This  is firstly because in the string <code>&quot;$name, $city,$hash{$city}&quot;</code> there is a space before <code>$city</code> so when you <code>split</code> it later on a comma you get ` $city` (with the leading space), which isn&#39;t a key in your hash."}, {"owner": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544564762, "post_id": 53732423, "comment_id": 94319478, "body": "Thanks @zdim . i made that change and ran and it still didnt print the correct map.  Please note it shows the correct value in $_, that is the key value shows Joe,NYC,NY Mary,Washington,Virginia  But when it finishes this line ($name,$city,$hash{$city}) = split(&quot;,&quot;,$_); not sure why it is not retrieving the correct key value"}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544564813, "post_id": 53732423, "comment_id": 94319505, "body": "1. The space in the string, like @zdim mentioned. 2. I expect NY=&gt;NYC should be NYC=&gt;NY. 3. You don&#39;t chomp the hard return off of $_ so none of your lookup hash items will match. 4. You can&#39;t assign $hash{$city} from a split (which is why you&#39;re seeing previous values - try changing it to something else, like $state). 5.  Your hash assignment doesn&#39;t need to be inside the loop."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1544564852, "post_id": 53732423, "comment_id": 94319521, "body": "e.g. <code>($name, $city,$state) = split(&quot;,&quot;,$_);</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544564854, "post_id": 53732423, "comment_id": 94319522, "body": "Can you then post the program that does what you say?  It&#39;s hard to see why, since the posted code won&#39;t do any of that.  Once you show the actual program we can fix it."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 0, "creation_date": 1544565071, "post_id": 53732423, "comment_id": 94319599, "body": "Just think about it, what is the value of <code>$city</code> when you assign <code>$hash{$city}</code>? Is it the value it had in the previous iteration of the loop, or the value that the previous <code>$city</code> item got assigned after the split. It&#39;s ambiguous and I don&#39;t expect anyone would be able to predict what value it will have. $city is being changed on the same line you&#39;re using it to do the lookup."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 1, "creation_date": 1544565235, "post_id": 53732423, "comment_id": 94319664, "body": "And I&#39;d recommend reading up on hard returns (&quot;\\n&quot;). The last value on each line is still a hard return, which is used in the $city key when you try to look up the &quot;state&quot;, which will evaluate to undef."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "edited": false, "score": 1, "creation_date": 1544565319, "post_id": 53732423, "comment_id": 94319698, "body": "The only reason you got $hash{$city} to return anything other than undef is because you assigned it in your second call to split, because it wasn&#39;t getting a defined value the first time you set it."}, {"owner": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544831936, "post_id": 53732423, "comment_id": 94428245, "body": "@zdim - that\u2019s for editing and posting the final solution. Am still getting used to how use stack overflow. Again appreciate all the help you and others have provided here. Thanks a ton again!"}, {"owner": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544981448, "post_id": 53732423, "comment_id": 94457835, "body": "@zdim - Yes it was a typo. I meant thanks. Do feel free to clean up whichever comments aren\u2019t serving purpose here"}], "owner": {"reputation": 321, "user_id": 3423407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b87180f5144208fd90608dcc5c34?s=128&d=identicon&r=PG&f=1", "display_name": "user3423407", "link": "https://stackoverflow.com/users/3423407/user3423407"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548197165, "creation_date": 1544562784, "last_edit_date": 1544810015, "question_id": 53732423, "link": "https://stackoverflow.com/questions/53732423/hash-key-value-not-being-retrieved-correctly", "title": "Hash key value not being retrieved correctly", "body": "<pre><code>*Editing to include the entire code\n\n#Shell script\n\nless file.txt | perl parseperl.pl &gt; index.html\n\n#This is the Perl file parseperl.pl\nmy @array;\nwhile(&lt;&gt;)\n{\n($date,$name,$city) = split(\",\",$_,3);\n%hash =(NY=&gt;\"NYC\", Washington=&gt;\"Virginia\", London=&gt;\"UK\");\npush @array, \"$name, $city,$hash{$city}\";\n}\nforeach(@array)\n{\n($date,$name,$city,$hash{$city}) = split(\",\",$_);\nprint \"&lt;tr&gt;\\n\";\nprint \"&lt;td&gt;$name&lt;/td&gt;\\n\";\nprint \"&lt;td&gt;$city&lt;/td&gt;\\n\";\nprint \"&lt;td&gt;$hash{$city}&lt;/td&gt;\\n\";\n}\n</code></pre>\n\n<p>The code for some reason takes the previous key's value in the output</p>\n\n<p>For eg: this is the output </p>\n\n<pre><code>Joe NYC NY\nMary Washington NY\n</code></pre>\n\n<p>My input file is file.txt. </p>\n\n<pre><code>12/12 12:32:56,Joe,NYC\n12/12 12:12:16,Mary,Washington\n</code></pre>\n\n<p>Please advise</p>\n\n<hr>\n\n<p><em>Edit</em></p>\n\n<p>My code works when I use this</p>\n\n<pre><code>($name, $city, $state) = split (/,/,$_)\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1544560717, "post_id": 53731991, "comment_id": 94317758, "body": "If you enable warnings via <code>use warnings;</code>, you will get a warning for <code>@foo[0]</code>. See <a href=\"http://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perldiag.html</a> and <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">perldoc.perl.org/perldata.html#Slices</a> on &quot;slices&quot;. <code>@foo[1,2,3]</code> is an &quot;array slice&quot; that returns more than one element."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1544563984, "post_id": 53732305, "comment_id": 94319159, "body": "For added confusion, <code>$foo{LIST}</code> is also valid (for a hash %foo) but does <a href=\"https://perldoc.pl/perldata#Multi-dimensional-array-emulation\" rel=\"nofollow noreferrer\">something completely different</a>. Thanks, Perl 4!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1544605943, "post_id": 53732305, "comment_id": 94331630, "body": "@Grinnz, Re &quot;<i><code>$foo{LIST}</code> is also valid (for a hash %foo)</i>&quot;, No, it doesn&#39;t. <code>LIST</code> means an expression evaluated in list context, so <code>$foo{LIST}</code> doesn&#39;t describe any Perl syntax."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544636060, "post_id": 53732305, "comment_id": 94349335, "body": "@ikegami I was referring to the same construct as <code>$foo[LIST]</code> above, but actually in this case it is evaluated in list context, as the list elements are joined on <code>$;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544640447, "post_id": 53732305, "comment_id": 94351555, "body": "Re &quot;<i><code>$foo[LIST]</code> is also a valid expression in Perl.</i>&quot;, No, that&#39;s wrong. <code>LIST</code> means an arbitrary expression evaluated in <b>list</b> context (and <code>EXPR</code> means an arbitrary expression evaluated in <b>scalar</b> context), so <code>$foo[LIST]</code> incorrectly describes what Perl does."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544640452, "post_id": 53732305, "comment_id": 94351559, "body": "Re &quot;returns the list (&quot;bar&quot;)&quot;, 1) Parens never create lists, and 2) that&#39;s just a weird way of saying &quot;returns the scalar &quot;bar&quot;. You&#39;re inventing non-existent concepts which only ends up causing confusion. We&#39;ve seen this over and over and over again.  Similarly, <code>@foo[0,2]</code> simply returns the <i>scalars</i> &quot;foo&quot; and &quot;baz&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544641032, "post_id": 53732305, "comment_id": 94351885, "body": "Re &quot;<i>So a warning -- not an error -- &quot;</i>&quot;, A warning is a non-fatal error. I believe you mean &quot;not an exception&quot;."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544650647, "post_id": 53732305, "comment_id": 94356128, "body": "@ikegami I agree it is an incorrect interpretation to say <code>$foo[LIST]</code>, but in <code>$foo{LIST}</code> it is actually interpreted as a list. <code>$foo{1,2,3}</code> is equivalent to <code>$foo{join $;, 1, 2, 3}</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544689967, "post_id": 53732305, "comment_id": 94367682, "body": "@ikegami I did this, and it still acts as list context: <code>$; = &quot;.&quot;; my @arr = 1..3; my %hash; $hash{@arr,5} = 1; say +(keys %hash)[0]</code>results in <code>1.2.3.5</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544706176, "post_id": 53732305, "comment_id": 94376588, "body": "@Grinnz, My apologies, there must have been an error in my test. But even though I got a detail wrong (not <code>$foo{EXPR, EXPR[, ...]}</code> but <code>$foo{LIST, LIST[, ...]}</code>), the point stands. <code>$foo{LIST}</code> is not a thing. You can see a comma is required by removing <code>,5</code> from your test."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 7, "last_activity_date": 1544620730, "last_edit_date": 1544620730, "creation_date": 1544562207, "answer_id": 53732305, "question_id": 53731991, "link": "https://stackoverflow.com/questions/53731991/perl-why-can-you-use-or-when-accessing-a-specific-element-in-an-array/53732305#53732305", "title": "Perl: Why can you use @ or $ when accessing a specific element in an array?", "body": "<p>Both <code>@foo[0]</code> and <code>$foo[1]</code> are legal Perl constructions.</p>\n\n<p><code>$foo[$n]</code>, or more generally <code>$foo[EXPR]</code>, is a scalar element, representing the <code>$n</code>-th (with the index starting at 0) element of the array <code>@foo</code> (or whatever <code>EXPR</code> evaluates to).</p>\n\n<p><code>@foo[LIST]</code> is an <em>array slice</em>, the set of elements of <code>@foo</code> indicated by indices in <code>LIST</code>. When <code>LIST</code> has one element, like <code>@foo[0]</code>, then <code>@foo[LIST]</code> is a list with one element.</p>\n\n<p>Although <code>@foo[1]</code> is a valid expression, experience has shown that that construction is usually used inappropriately, when it would be more appropriate to say <code>$foo[1]</code>. So a warning -- not an error -- is issued when warnings are enabled and you use that construction.</p>\n\n<p><code>$foo[LIST]</code> is also a valid expression in Perl. It's just that Perl will evaluate the <code>LIST</code> in scalar context and return the element of <code>@foo</code> corresponding to that evaluation, not a list of elements.</p>\n\n<pre><code>@foo = (\"foo\",\"bar\",\"baz\");\n$foo[0]     returns the scalar \"foo\"\n@foo[1]     returns the list (\"bar\") (and issues warning)\n@foo[0,2]   returns the list (\"foo\",\"baz\")\n$foo[0,2]   returns \"baz\"   ($foo[0,2] evaluates to $foo[2], and issues warning)\n$foo[@foo]  returns undef   (evaluates to $foo[scalar @foo] =&gt; $foo[3])\n</code></pre>\n\n<hr>\n\n<p>Diversion: the only reason I could come up with to use <code>@foo[SCALAR]</code> is as an lvalue somewhere that distinguishes between scalar/list context. Consider</p>\n\n<pre><code>sub bar { wantarray ? (42,19) : 101 }\n</code></pre>\n\n<p><code>$foo[0] = bar();</code> would assign the value <code>101</code> to the 1st element of <code>@foo</code>, but <code>@foo[0] = bar()</code> would assign the value <code>42</code>. But even that's not anything you couldn't accomplish by saying <code>($foo[0]) = bar()</code>, unless you're golfing.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 7, "last_activity_date": 1544649741, "last_edit_date": 1544649741, "creation_date": 1544581663, "answer_id": 53735226, "question_id": 53731991, "link": "https://stackoverflow.com/questions/53731991/perl-why-can-you-use-or-when-accessing-a-specific-element-in-an-array/53735226#53735226", "title": "Perl: Why can you use @ or $ when accessing a specific element in an array?", "body": "<p>Perl sigils tell you how you are treating data and only loosely relate to variable type. Instead of thinking about what something <em>is</em>, think about what it is <em>doing</em>. It's verbs over nouns in Perl:</p>\n\n<ul>\n<li><code>$</code> uses a single item</li>\n<li><code>@</code> uses multiple items</li>\n<li><code>%</code> uses pairs</li>\n</ul>\n\n<p>The scalar variable <code>$foo</code> is a single item and uses the <code>$</code> sigil. Since there aren't multiples or pairs for a single item, the other sigils don't come into play.</p>\n\n<p>The array variable <code>@foo</code> is potentially many items and the <code>@</code> refers to all of those items together. The <code>$foo[INDEX]</code> refers to a single item in the array and uses the <code>$</code> sigil. You can refer to multiple items with an array slice, such as <code>@foo[INDEX,INDEX2,...]</code> and you use the <code>@</code> for that. Your question focuses on the degenerate case of a slice of one element, <code>@foo[INDEX]</code>. That works, but it's in list context. Sometimes that behaves differently.</p>\n\n<p>The hash variable <code>%foo</code> is a collection of key-value pairs. To get a single value, you use the <code>$</code> again, like <code>$foo{KEY}</code>. You can also get more than one value with a hash slice, using the <code>@</code> because it's multiple values, like <code>@hash{KEY1,KEY2,...}</code>.</p>\n\n<p>And, here's a recent development: <a href=\"https://www.effectiveperlprogramming.com/2014/07/perl-5-20-introduces-keyvalue-slices/\" rel=\"nofollow noreferrer\">Perl 5.20 introduces \u201cKey/Value Slices\u201d</a>. You can get a hash slice of either an array or a hash. <code>%array[INDEX1,INDEX2]</code> or <code>%hash{KEY1,KEY2}</code>. These return a list of key-value pairs. In the array case, the keys are the indices.</p>\n\n<p>For arrays and hashes with single element access or either type of slice, you know the variable type by the indexing character: arrays use <code>[]</code> and hashes use <code>{}</code>. And, here's the other interesting wrinkle: those delimiters supply scalar or list context depending on single or (potentially) multiple items.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1544653965, "post_id": 53749719, "comment_id": 94357585, "body": "If we&#39;re going to be pedantic, this still isn&#39;t complete: the array slice <code>@foo[0,2]</code> is itself context sensitive, just like the comma operator in <code>$foo[0], $foo[2]</code>, and is implemented to act similarly to the comma operator and result in the last element of the slice in scalar context. This is notably different from <code>@foo</code> in scalar context, which returns the size. But using array slices (or list slices, which is its own special parser case) in scalar context is also pretty weird."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544706490, "post_id": 53749719, "comment_id": 94376784, "body": "@Grinnz, Indeed, but since it makes no sense to use an array slice in scalar context, I&#39;ll leave the answer as-is to avoid cluttering it up. (It makes so little sense that an array slice in scalar context used return exactly the same thing as in list context for the longest time. Not surprisingly, Perl had a tendency to crash shortly after doing that.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1544706345, "last_edit_date": 1544706345, "creation_date": 1544641404, "answer_id": 53749719, "question_id": 53731991, "link": "https://stackoverflow.com/questions/53731991/perl-why-can-you-use-or-when-accessing-a-specific-element-in-an-array/53749719#53749719", "title": "Perl: Why can you use @ or $ when accessing a specific element in an array?", "body": "<p>Both <code>@foo[0]</code> and <code>$foo[1]</code> are legal Perl constructions.</p>\n\n<p><code>$foo[EXPR]</code> (where <code>EXPR</code> is an arbitrary expression evaluated in scalar context) returns the single element specified by the result of the expression.</p>\n\n<p><code>@foo[LIST]</code> (where <code>LIST</code> is an arbitrary expression evaluated in list context) returns every element specified by the result of the expression.</p>\n\n<p>(Contrary to other posts, there's no such thing as <code>$foo[LIST]</code> in Perl. When using <code>$foo[...]</code>, the expression is always evaluated in scalar context.)</p>\n\n<p>Although <code>@foo[1]</code> is a valid expression, experience has shown that that construction is usually used inappropriately, when it would be more appropriate to say <code>$foo[1]</code>. So a warning &mdash; not an excption &mdash; is issued when warnings are enabled and you use that construction.</p>\n\n<p>What this means:</p>\n\n<pre><code>my @foo = ( \"foo\", \"bar\", \"baz\" );\n\n$foo[0]        0 eval'ed in scalar cx.  Returns scalar \"foo\".             ok\n@foo[1]        1 eval'ed in list cx.    Returns scalar \"bar\".             Weird. Warns.\n@foo[0,2]    0,2 eval'ed in list cx.    Returns scalars \"foo\" and \"baz\".  ok\n$foo[0,2]    0,2 eval'ed in scalar cx.  Returns scalar \"baz\".             Wrong. Warns.\n$foo[@foo]  @foo eval'ed in scalar cx.  Returns undef.                    Probably wrong.\n</code></pre>\n\n<hr>\n\n<p>The only reason I could come up with to use <code>@foo[SCALAR]</code> is as an lvalue somewhere that distinguishes between scalar/list context. Consider</p>\n\n<pre><code>sub bar { wantarray ? (42,19) : 101 }\n</code></pre>\n\n<p><code>$foo[0] = bar();</code> would assign the value <code>101</code> to the 1st element of <code>@foo</code>, but <code>@foo[0] = bar();</code> would assign the value <code>42</code>. It would be far more common to use <code>($foo[0]) = bar()</code> instead.</p>\n\n<hr>\n\n<p>Portions of the post Copyrighted by mob under the same terms as this site.</p>\n\n<p>This post addresses numerous issues in mob's <a href=\"https://stackoverflow.com/a/53732305/589924\">post</a>, including 1) the misuse of <code>LIST</code> to mean something other than an arbitrary expression in list context, 2) pretending that parens creates lists, 3) pretending that there's a difference between return scalars and returning a list, and 4) pretending there's no such thing as a non-fatal error.</p>\n"}], "owner": {"reputation": 117, "user_id": 2777741, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/610fec3f2084c8628d791fafd19e36da?s=128&d=identicon&r=PG&f=1", "display_name": "redvyper", "link": "https://stackoverflow.com/users/2777741/redvyper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 53732305, "answer_count": 3, "score": 3, "last_activity_date": 1544706345, "creation_date": 1544560638, "last_edit_date": 1544659682, "question_id": 53731991, "link": "https://stackoverflow.com/questions/53731991/perl-why-can-you-use-or-when-accessing-a-specific-element-in-an-array", "title": "Perl: Why can you use @ or $ when accessing a specific element in an array?", "body": "<p>I'm a novice Perl user and have not been able to find a satisfactory answer</p>\n\n<pre><code>my @foo = (\"foo\",\"bar\")\nprint \"@foo[0]\"\nfoo\nprint \"$foo[1]\"\nbar\n</code></pre>\n\n<p>Not only <code>@foo[0]</code> works as expected, but <code>$foo[1]</code> outputs a string as well.</p>\n\n<p>Why? This is even when <code>use strict</code> is enabled.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1544553178, "post_id": 53730231, "comment_id": 94314291, "body": "See <a href=\"https://stackoverflow.com/a/45418639/3832970\">stackoverflow.com/a/45418639/3832970</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1544564419, "post_id": 53730231, "comment_id": 94319337, "body": "See the Perl docs. <a href=\"https://perldoc.perl.org/perl5140delta.html#Regular-Expressions\" rel=\"nofollow noreferrer\">perldoc.perl.org/perl5140delta.html#Regular-Expressions</a>. Really, inline modifiers are scoped and allow a temporary change as to how the regex behaves. This is taken/given based on what the external regex modifiers <i>were/are</i>, i.e. <code>=~ &#47;rx&#47;here</code>. So, if you had <code>&#47;&#47;xsm</code>, you could temporarily change it to <code>(?i-xsm:abc)</code> which takes off the <code>&#47;&#47;xsm</code> and adds the <code>&#47;&#47;i</code>. The bright (relative term) people over there decided a new circumflex <code>^</code> modifier was called for <code>(?^:abc)</code> which sets the <i><code>Perl defaults</code></i> as external modifiers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1544564740, "post_id": 53730231, "comment_id": 94319469, "body": "And with something like <code>(?^u: ... )</code> it temporarily (scoped) sets the default&#39;s and adds the <i><code>u</code></i> modifier. You can also do <code>(?^add-remove:...)</code> to tailor it to your needs."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544609957, "post_id": 53730231, "comment_id": 94334102, "body": "It indicates what flags you provided to the regex compiler (e.g. <code>qr&#47;...&#47;i</code> would produce <code>(?^i:... )</code>). <code>^</code> means the default. <code>^u</code> means default plus <code>&#47;u</code>. One of the features enabled by <code>use 5.016;</code> causes <code>&#47;u</code> to be used by default."}], "owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1544553126, "answer_count": 0, "score": 0, "last_activity_date": 1544552762, "creation_date": 1544552762, "question_id": 53730231, "link": "https://stackoverflow.com/questions/53730231/meaning-of-in-perl-compiled-regex", "closed_reason": "Duplicate", "title": "Meaning of (?^: ) in perl compiled regex", "body": "<p>I've been trying to understand what the <code>qr//</code> construct does in perl.\nI wrote the following test one-liner:</p>\n\n<pre><code>perl -e 'my $re=qr/b.+|c|d/; END {print \"$re\\n\"}'\n</code></pre>\n\n<p>That outputs:</p>\n\n<p><code>(?^:b.+|c|d)</code></p>\n\n<p>And if I add <code>use 5.016</code>, E.g.:</p>\n\n<pre><code>perl -e 'use 5.016; my $re=qr/b.+|c|d/; END {say $re}'\n</code></pre>\n\n<p>I get:</p>\n\n<p><code>(?^u:b.+|c|d)</code></p>\n\n<p>What do the <code>(?^: ... )</code> and <code>(?^u: ... )</code> constructions mean, and what's the difference between them?</p>\n"}, {"tags": ["apache", "perl", "internationalization", "fastcgi", "mod-fcgid"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544553081, "post_id": 53729592, "comment_id": 94314230, "body": "What&#39;s with all the <code>our</code> instead of <code>my</code>???"}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544561383, "post_id": 53729592, "comment_id": 94318048, "body": "@ikegami Guessing he&#39;d like to be able to change its value from another Perl file in his program..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1544561700, "post_id": 53729592, "comment_id": 94318166, "body": "@Marcus (1) wouldn&#39;t work just so. making it <code>our</code> doesn&#39;t make it magically leap out of its own file (2) don&#39;t want to do that. that&#39;s what (programming) <i>interfaces</i> are for, so that things can be changed in a clear, articulate, and structured way."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1544604627, "post_id": 53729592, "comment_id": 94330884, "body": "@Marcus, When? Before loading the module? Useless because the outside value would get clobbered by the assignment. After loading the module? Useless because the value has already been used by then. It just wouldn&#39;t work. (It would also form high <a href=\"https://en.wikipedia.org/wiki/Coupling_(computer_science)\" rel=\"nofollow noreferrer\">coupling</a>, which is a bad thing..)"}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544623935, "post_id": 53729592, "comment_id": 94342144, "body": "@ikegami Was simply commenting on why people use &#39;our&#39;, to share the variable across packages.  Not commenting on how advisable in any context, especially since we aren&#39;t seeing the code of its other usage."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1544624678, "post_id": 53729592, "comment_id": 94342585, "body": "@Marcus, hmmm, That&#39;s not what you said at all. You gave a reason for the OP doing it that made no sense."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544625017, "post_id": 53729592, "comment_id": 94342777, "body": "@ikegami Well, I said to he might want to change its value from another Perl file in his program, or otherwise access it, not limit its scope to this package.  That&#39;s the use of &#39;our&#39;.  Regardless, we&#39;re not helping his question by debating this lol."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1544625257, "post_id": 53729592, "comment_id": 94342920, "body": "@Marcus, Re &quot;<i>I said to he might want to change its value from another Perl file in his program</i>&quot;, And I explained why that won&#39;t work."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544625439, "post_id": 53729592, "comment_id": 94343036, "body": "@ikegami I&#39;m sure we just misunderstand each other, as &#39;our&#39; works fine for me.  Perhaps I am describing the behavior poorly."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544625469, "post_id": 53729592, "comment_id": 94343065, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185150/discussion-between-marcus-and-ikegami\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1544551435, "creation_date": 1544551435, "answer_id": 53729900, "question_id": 53729592, "link": "https://stackoverflow.com/questions/53729592/apache-fastcgi-is-there-a-means-to-dynamically-check-an-env-value-at-subroutine/53729900#53729900", "title": "Apache fastcgi: is there a means to dynamically check an ENV value at subroutine use?", "body": "<p>I don't know that much about translation in fastcgi environments, but I do know that <code>use</code> is a compile-time statement, so the <code>use</code> statement in your script would be the first thing that Perl would execute (even before <code>$LOCALE_NAMESPACE</code> is initialized).</p>\n\n<p>The run-time equivalent of <code>use MODULE ARGS</code> is</p>\n\n<pre><code>require MODULE;\nMODULE-&gt;import(ARGS);\n</code></pre>\n\n<p>This works sometimes to dynamically configure a module at run-time, though it also has many failure modes.</p>\n"}, {"comments": [{"owner": {"reputation": 635, "user_id": 425494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5439298bfdaa312ef693734b3c882052?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/425494/sean"}, "edited": false, "score": 0, "creation_date": 1544646854, "post_id": 53731456, "comment_id": 94354561, "body": "unfortunately, this won&#39;t fix the issue with fastcgi as that env is still not set in that case."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 635, "user_id": 425494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5439298bfdaa312ef693734b3c882052?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/425494/sean"}, "edited": false, "score": 0, "creation_date": 1544648028, "post_id": 53731456, "comment_id": 94355051, "body": "@Sean The <code>%ENV</code> carries values set by the environment as the script is started. Are you saying that the environment <i>is not</i> at all (yet?) set at that time? (Is this something inherent to fastcgi?)"}, {"owner": {"reputation": 635, "user_id": 425494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5439298bfdaa312ef693734b3c882052?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/425494/sean"}, "edited": false, "score": 0, "creation_date": 1545068618, "post_id": 53731456, "comment_id": 94489401, "body": "I think that this is a fastcgi issue."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 635, "user_id": 425494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5439298bfdaa312ef693734b3c882052?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/425494/sean"}, "edited": false, "score": 0, "creation_date": 1545069417, "post_id": 53731456, "comment_id": 94489756, "body": "@Sean Alright, it may be so (if the environment doesn&#39;t get set at all by the time the script starts).  But note that one problem with shown code is that the <code>use</code> goes at compile time, so before any and all runtime statements (regardless of whether they come before it in the source).  So the <code>use</code> that needs that <code>$ENV{...}</code> runs <i>before</i> that variable is set.  (I edited the answer to clearly state that.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 635, "user_id": 425494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5439298bfdaa312ef693734b3c882052?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/425494/sean"}, "edited": false, "score": 0, "creation_date": 1545069563, "post_id": 53731456, "comment_id": 94489838, "body": "@Sean Can you confirm whether you get <i>any</i> environment set? For instance, right at the top of the module file add <code>say &quot;$_ =&gt; $ENV{$_}&quot; for keys %ENV;</code> (or some such)?  (You need <code>use feature &#39;say&#39;;</code> before this, or an equivalent like <code>use v5.10</code> or newer, to turn on features. Or of course just <code>print</code> with manual newlines. Once we are it: add <code>use warnings;</code> and <code>use strict;</code> to the top of the module. They don&#39;t cascade down from the caller.)"}, {"owner": {"reputation": 635, "user_id": 425494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5439298bfdaa312ef693734b3c882052?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/425494/sean"}, "edited": false, "score": 0, "creation_date": 1547056203, "post_id": 53731456, "comment_id": 95064256, "body": "We&#39;ve moved onto another solution.  If I remember where we ended up on this path there just didn&#39;t seem to be a way to get the ENV vars within the fastcgi loop, but if I&#39;m wrong, in my defense it&#39;s been a good whiles since we looked at this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 635, "user_id": 425494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5439298bfdaa312ef693734b3c882052?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/425494/sean"}, "edited": false, "score": 0, "creation_date": 1547059108, "post_id": 53731456, "comment_id": 95065507, "body": "@Sean OK, thanks for update.  One thing to remember from this Q though: since <code>use</code> goes at compile time it can&#39;t make use of any runtime statements, variables, etc (even if they come before it in source).  So if a <code>use</code> statement needs a constant, which much be retrieved from somewhere first, that constant must be worked out in a <code>BEGIN</code> block (and before that <code>use</code>).   This is what&#39;s going on in the question as asked here, and is a legitimate and good question on its own."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1545070259, "last_edit_date": 1545070259, "creation_date": 1544558195, "answer_id": 53731456, "question_id": 53729592, "link": "https://stackoverflow.com/questions/53729592/apache-fastcgi-is-there-a-means-to-dynamically-check-an-env-value-at-subroutine/53731456#53731456", "title": "Apache fastcgi: is there a means to dynamically check an ENV value at subroutine use?", "body": "<p>One clear problem is that the runtime assignment to <code>$LOCALE_NAMESPACE</code>, that uses the capture from regex on <code>$ENV{REQUEST_URI}</code>, runs <em>after</em> the <code>use</code> statement where that variable is used, since all <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a> statements run at compile time.</p>\n\n<p>If the sole problem is of how to set <code>$LOCALE_NAMESPACE</code> in time for <code>use</code>, do it in <code>BEGIN</code> phase</p>\n\n<pre><code>package SR::Locale;\n\nmy $LOCALE_NAMESPACE;\n\nBEGIN { \n    # Add a check that $ENV{REQUEST_URI} is indeed set by the environment\n    ($LOCALE_NAMESPACE) = $ENV{REQUEST_URI} =~ m{example.com/(..)/};\n}\n\nuse Locale::TextDomain::UTF8 qw( $LOCALE_NAMESPACE );\n</code></pre>\n\n<p>Don't forget that this <code>BEGIN</code> must come before <code>use</code> statements that rely on it. All code that runs in <code>BEGIN</code> phase is executed in order of its appearance in source files (including any further <code>use</code> statements or <code>BEGIN</code> blocks inside the <code>use</code>d modules).</p>\n"}], "owner": {"reputation": 635, "user_id": 425494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5439298bfdaa312ef693734b3c882052?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/425494/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1545070259, "creation_date": 1544550265, "question_id": 53729592, "link": "https://stackoverflow.com/questions/53729592/apache-fastcgi-is-there-a-means-to-dynamically-check-an-env-value-at-subroutine", "title": "Apache fastcgi: is there a means to dynamically check an ENV value at subroutine use?", "body": "<p>I apologize if the problem definition is a bit disjointed.  We have been attacking this issue on many different vectors.</p>\n\n<p>Basic description, we have a website we are trying to provide translations for using Locale::TextDomain</p>\n\n<p>We have fastcgi scripts, that call our local library of perl modules.   Fastcgi and translation is tricky (as we are using it) because the language is set at the launch of the script and persists.  </p>\n\n<p>So in our library of perl modules this works.</p>\n\n<pre><code>package SR::Locale;\nour $LOCALE_NAMESPACE = 'es';\nuse Locale::TextDomain::UTF8 qw( $LOCALE_NAMESPACE );\nour $word = __(\"football\");\n</code></pre>\n\n<p>But we can't figure out a means to dynamically set the variable $LOCALE_NAMESPACE at startup.  We'd like to set it based on the request_uri or the dir path of the script being executed or something like that.  So we'd like to do something like, but we can't figure this out in a fast cgi setting:</p>\n\n<pre><code>package SR::Locale;\n$ENV{REQUEST_URI} =~ m{example.com/(..)/}\nour $LOCALE_NAMESPACE = $1;\nuse Locale::TextDomain::UTF8 qw( $LOCALE_NAMESPACE );\nour $word = __(\"football\");\n</code></pre>\n\n<p>in this example (for a fastcgi), $ENV{REQUEST_URI} is blank in the module at script start.</p>\n\n<p>Any help would be much appreciated.  I have not been able to find any references to translation and fastcgi working together in perl.</p>\n"}, {"tags": ["perl", "encryption", "blowfish"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 0, "creation_date": 1544632823, "post_id": 53729969, "comment_id": 94347565, "body": "Thanks @ikegami... looks great, i will try it out!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1544551721, "creation_date": 1544551721, "answer_id": 53729969, "question_id": 53729347, "link": "https://stackoverflow.com/questions/53729347/perl-blowfish-cbc-encryption-and-decryption-functions/53729969#53729969", "title": "Perl Blowfish/CBC Encryption and Decryption functions", "body": "<p>The following uses Crypt::CBC for salting, padding and chaining, and it uses Crypt::Rijndael (AES) for encryption.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\nuse Crypt::CBC qw( );\n\nsub encrypt {\n   my ($key, $plaintext) = @_;\n\n   my $iv = Crypt::CBC-&gt;random_bytes(16);\n\n   my $cipher = Crypt::CBC-&gt;new(\n      -cipher      =&gt; 'Rijndael',\n      -literal_key =&gt; 1,\n      -key         =&gt; $key,\n      -iv          =&gt; $iv,\n      -header      =&gt; 'none',\n   );\n\n   return $iv . $cipher-&gt;encrypt($plaintext);\n}\n\nsub decrypt {\n   my ($key, $ciphertext) = @_;\n\n   my $iv = substr($ciphertext, 0, 16, '');\n\n   my $cipher = Crypt::CBC-&gt;new(\n      -cipher      =&gt; 'Rijndael',\n      -literal_key =&gt; 1,\n      -key         =&gt; $key,\n      -iv          =&gt; $iv,\n      -header      =&gt; 'none',\n   );\n\n   return $cipher-&gt;decrypt($ciphertext);\n}\n\n{\n   my $key = Crypt::CBC-&gt;random_bytes(32);\n   say \"Key: \", unpack \"H*\", $key;\n\n   my $expect = 'secret';\n   say \"Plaintext: $expect\";\n\n   my $ciphertext = encrypt($key, $expect);\n   say \"Ciphertext: \", unpack \"H*\", $ciphertext;\n\n   my $got = decrypt($key, $ciphertext);\n   say \"Plaintext: $got\";\n   say $expect eq $got ? \"ok\" : \"not ok\";\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 53729969, "answer_count": 1, "score": -1, "last_activity_date": 1544551721, "creation_date": 1544549324, "question_id": 53729347, "link": "https://stackoverflow.com/questions/53729347/perl-blowfish-cbc-encryption-and-decryption-functions", "title": "Perl Blowfish/CBC Encryption and Decryption functions", "body": "<p>New to Perl and Cryptography here. Does anyone have any simple Encrypt/Decrypt functions (using Blowfish or CBC) that encapsulate all the under-the-hood dirty work? I want to have one <strong>fixed</strong> KEY to use and be able to pass a string of <strong>any</strong> length for encryption.</p>\n\n<p>For clarity, I want to encrypt credentials using the Encrypt function, save the result somewhere, and Decrypt it when needed... all the while using the same key.</p>\n\n<p>I basically want to do this:</p>\n\n<pre><code>$fixedKey = \"0123456789ABCDEF\";\n$plainText = \"A string of any length..........\";\n\n$encryptedString = Encrypt($fixedKey, $plainText); \n\n$retrievedText = Decrypt($fixedKey, $encryptedString);\n</code></pre>\n\n<p>Appreciated.</p>\n"}, {"tags": ["perl", "ssl", "mojolicious", "mojo-useragent"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544549606, "post_id": 53728872, "comment_id": 94312551, "body": "My first guess is that your proxy is refusing to let you through. How did you configured the proxy of Mojo::UserAgent ? Do you have some code for that ?"}, {"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544551061, "post_id": 53728872, "comment_id": 94313264, "body": "i am using those environment variables HTTP_PROXY and HTTPS_PROXY,http_proxy,HTTPS_PROXY which working well with curl but mojo::useragent return the error mentioned above"}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 1, "last_activity_date": 1544552483, "last_edit_date": 1544552483, "creation_date": 1544552167, "answer_id": 53730087, "question_id": 53728872, "link": "https://stackoverflow.com/questions/53728872/mojouseragent-ssl-failure/53730087#53730087", "title": "Mojo::useragent SSL failure", "body": "<p>Form the SSL error, it looks like your network is actively refusing to let you through.</p>\n\n<p>Defining environment variables HTTP_PROXY and HTTPS_PROXY is fine, however you need to tell Mojo::UserAgent to use them (unlike cURL, that automatically looks them up by default).</p>\n\n<p>Add this line to your code before you run the query :</p>\n\n<pre><code>$ua-&gt;proxy-&gt;detect;\n</code></pre>\n\n<p>See <a href=\"https://metacpan.org/pod/Mojo::UserAgent::Proxy#detect\" rel=\"nofollow noreferrer\">the Mojo::UserAgent::Proxy documentation</a>.</p>\n\n<p>If you are looking for a pure Perl solution without using environment variables, you can configure the proxy manually, directly in your code, like :</p>\n\n<pre><code>$ua-&gt;proxy\n      -&gt;http('http://127.0.0.1:8080')\n      -&gt;https('http://127.0.0.1:8080');\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 53730087, "answer_count": 1, "score": 0, "last_activity_date": 1544556040, "creation_date": 1544547440, "last_edit_date": 1544556040, "question_id": 53728872, "link": "https://stackoverflow.com/questions/53728872/mojouseragent-ssl-failure", "title": "Mojo::useragent SSL failure", "body": "<p>i am using Mojo::Useragent to fetch some site behind a proxy which defined using HTTP_PROXY and HTTPS_PROXY</p>\n\n<p>below an example of the code :</p>\n\n<pre><code>my $rs = $ua-&gt;insecure(1)-&gt;get($mysite) \nif($rs-&gt;res-&gt;is_success) {\n    .....\n} else {\n    print \"Problem with fetching $mysite \\n\";\n    print $rs-&gt;res-&gt;error-&gt;{message};\n}\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<blockquote>\n  <p>SSL connect attempt failed error:14077419:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert access denied</p>\n</blockquote>\n\n<p>While when i am using curl on the same machine I get the results as expected.</p>\n\n<p>Any idea how to solve this issue?</p>\n"}, {"tags": ["perl", "perlbrew"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1544543126, "post_id": 53727600, "comment_id": 94308786, "body": "I would, as the <code>root</code> user, install the OS package for <code>perlbrew</code> , and then, as the normal user, install the appropriate (version of) Perl. How does downloading and installing perlbrew fail for you? Please <a href=\"https://stackoverflow.com/posts/53727600/edit\">edit</a> your question and add your Linux version, the command you&#39;re trying and the output how it fails."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1544545007, "post_id": 53727600, "comment_id": 94309976, "body": "You could have a look at <a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\">github.com/tokuhirom/plenv</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1544556417, "post_id": 53727600, "comment_id": 94315759, "body": "<i>&quot;It seems like my server does not trust that website address&quot;</i> It would be helpful to know what led you to that conclusion. What error messages did you see?"}, {"owner": {"reputation": 21, "user_id": 10776405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e98846d0c8dc8f91b26e4c0e443c036?s=128&d=identicon&r=PG&f=1", "display_name": "Zeason", "link": "https://stackoverflow.com/users/10776405/zeason"}, "edited": false, "score": 0, "creation_date": 1544583083, "post_id": 53727600, "comment_id": 94324037, "body": "I just edit the question again, this maybe more clear to you guys."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544563745, "post_id": 53729924, "comment_id": 94319048, "body": "You can use <a href=\"https://metacpan.org/pod/perl-build\" rel=\"nofollow noreferrer\">perl-build</a> which can be downloaded as a standalone script to install a Perl wherever you want. I often install to <code>&#47;opt&#47;perl</code>, then add <code>&#47;opt&#47;perl&#47;bin</code> to my PATH and then that perl is used for everything I do."}, {"owner": {"reputation": 21, "user_id": 10776405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e98846d0c8dc8f91b26e4c0e443c036?s=128&d=identicon&r=PG&f=1", "display_name": "Zeason", "link": "https://stackoverflow.com/users/10776405/zeason"}, "edited": false, "score": 0, "creation_date": 1544581703, "post_id": 53729924, "comment_id": 94323784, "body": "i try to use perl-bulid. But i still cant download it. The wrong is just like the picture i show you above. :("}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1544620396, "post_id": 53729924, "comment_id": 94340113, "body": "Grab the source off cpan, run <code>.&#47;Configure -de &amp;&amp; make &amp;&amp; make test &amp;&amp; make install</code>. Seems to work usually..."}, {"owner": {"reputation": 21, "user_id": 10776405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e98846d0c8dc8f91b26e4c0e443c036?s=128&d=identicon&r=PG&f=1", "display_name": "Zeason", "link": "https://stackoverflow.com/users/10776405/zeason"}, "edited": false, "score": 0, "creation_date": 1544662106, "post_id": 53729924, "comment_id": 94359865, "body": "I try the way you told me.But when i run make , i got this:  collect2: error: ld returned 1 exit status make: *** [miniperl] Error 1. Besides , can the script i edit under a old version perl  run well under my new version perl? If it can , i dont need to install perl 5.8.8  any longer."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1544551537, "creation_date": 1544551537, "answer_id": 53729924, "question_id": 53727600, "link": "https://stackoverflow.com/questions/53727600/how-can-i-install-two-different-version-perl-on-my-linux/53729924#53729924", "title": "How can i install two different version perl on my linux?", "body": "<p>The easy answer is 'just install perl' - it'll drop by default into /usr/local/bin, and you can just use that instead. </p>\n\n<p>DON'T overwrite /usr/bin/perl, as that's a recipe for pain. (Lots of stuff will have dependencies on perl versions installed via your package manager). </p>\n"}], "owner": {"reputation": 21, "user_id": 10776405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e98846d0c8dc8f91b26e4c0e443c036?s=128&d=identicon&r=PG&f=1", "display_name": "Zeason", "link": "https://stackoverflow.com/users/10776405/zeason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1544617322, "creation_date": 1544542974, "last_edit_date": 1544617322, "question_id": 53727600, "link": "https://stackoverflow.com/questions/53727600/how-can-i-install-two-different-version-perl-on-my-linux", "title": "How can i install two different version perl on my linux?", "body": "<p>I have a Linux server, and it has its own Perl whose version is not what I want.\nSo I want to install another Perl on it. \nI tried to solve it with perlbrew, but my server can't download it. It seems like my server does not trust that website address. And i don't know whether I should download it as root. Besides, I think there is a huge difference between root and a normal user to download and install it, and I just want do it as a normal user.\nIs there another way install different version Perl on my server?\nI downloaded the version I want before, and I tried to install it in a usual way, but it just failed.\nThanks a lot.\nHere is the worng when i tap the command \"<em>wget -O - <a href=\"https://install.perlbrew.pl\" rel=\"nofollow noreferrer\">https://install.perlbrew.pl</a> | bash</em>\" as a normal user.<a href=\"https://i.stack.imgur.com/DcMHx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DcMHx.png\" alt=\"enter image description here\"></a>\nMaybe i should tap it as root?\nAnd when i try to install the perl v5.8.8(this is version i want) in ~/bin,i run the Configure. \nBut i can not run make after that,it just told me that <strong>make:No rule to make target , needed by miniperlmain.o Stop.</strong>\nBesides, my Linux is Centos 7.4. I don`t how to fix it.\nIt seems that i find a way to let me to make.\nHere is the <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=40633\" rel=\"nofollow noreferrer\">link</a>.\nAfter i edit the makedepend.SH, i run make agian.\nBut i got this wrong:\n<a href=\"https://i.stack.imgur.com/9f7fH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9f7fH.png\" alt=\"enter image description here\"></a></p>\n\n<p>The thing is really weird. Why perl V5.8.8 is so diffcult to install. :-(</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2197, "user_id": 1725871, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06e1c4b46656313883eda6e96e9ab4e9?s=128&d=identicon&r=PG", "display_name": "JoSSte", "link": "https://stackoverflow.com/users/1725871/josste"}, "edited": false, "score": 4, "creation_date": 1544529493, "post_id": 53723689, "comment_id": 94300811, "body": "Please  show your efforts. Read the  <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide your own (even non-functioning) code, preferably in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1544530645, "post_id": 53723689, "comment_id": 94301424, "body": "I&#39;m afraid I have no idea what you are talking about. You will have to give us a lot more context. What&#39;s that <i>order.properties</i> file? What date? In what format? Dates can come in all kinds of formats, like today could be <code>2018-12-11</code> or <code>11.12.2018</code> or <code>12&#47;11&#47;18</code> or <code>11th of December, 2018</code>. Please also note the language is called <i>Perl</i>, not <i>pearl</i>. Being accurate in your communication is very important for programming, and in general if you work with computers."}, {"owner": {"reputation": 61, "user_id": 10717966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912cd9d509512cefba2a02a489392bd?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/10717966/sravs"}, "edited": false, "score": 0, "creation_date": 1544531405, "post_id": 53723689, "comment_id": 94301821, "body": "order.properties is a name of the file i want to create and date in a formate of YYYYMMDDHH:24MI and this value i want to store in a variable"}, {"owner": {"reputation": 61, "user_id": 10717966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912cd9d509512cefba2a02a489392bd?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/10717966/sravs"}, "edited": false, "score": 0, "creation_date": 1544531469, "post_id": 53723689, "comment_id": 94301866, "body": "thank you  - mkHun"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1544533728, "post_id": 53723689, "comment_id": 94302989, "body": "Please <a href=\"https://stackoverflow.com/posts/53723689/edit\">edit</a> your question and add an example <code>order.properties</code> file, and an example input information, and also what code you already have. We don&#39;t know what information you have and what output you actually need."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1544537389, "creation_date": 1544537389, "answer_id": 53725906, "question_id": 53723689, "link": "https://stackoverflow.com/questions/53723689/how-to-create-properties-file-inside-perl-script/53725906#53725906", "title": "How to create properties file inside perl script", "body": "<blockquote>\n  <p>i want to create a order.properties file inside a Perl script </p>\n</blockquote>\n\n<pre><code>open my $fh, '&gt;', 'order.properties' or die $!;\n# Do you want to put any data into the file? Do it here\nclose $fh;\n</code></pre>\n\n<blockquote>\n  <p>and send the current date into the variable <code>$starttime</code></p>\n</blockquote>\n\n<pre><code>use Time::Piece;\n\nmy $starttime = localtime-&gt;strftime('%Y%m%d%H%M');\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10717966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912cd9d509512cefba2a02a489392bd?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/10717966/sravs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1544552214, "accepted_answer_id": 53725906, "answer_count": 1, "score": -1, "last_activity_date": 1544622421, "creation_date": 1544529328, "last_edit_date": 1544622421, "question_id": 53723689, "link": "https://stackoverflow.com/questions/53723689/how-to-create-properties-file-inside-perl-script", "closed_reason": "Needs details or clarity", "title": "How to create properties file inside perl script", "body": "<p>i want to create a <code>order.properties</code> and inside of order.properties file  create a variable called starttime and assign the value of current time(System time) in a YYYYMMDDHH24MM format using perl Scripting</p>\n\n<p>I am a beginner to Perl scripting, please help me with this.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl", "post", "cgi", "query-string"], "comments": [{"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 1, "creation_date": 1544526435, "post_id": 53721981, "comment_id": 94299118, "body": "<code>$cgi-&gt;url_param(&#39;file&#39;)</code>  <a href=\"http://perldoc.perl.org/CGI.html#MIXING-POST-AND-URL-PARAMETERS\" rel=\"nofollow noreferrer\">perldoc.perl.org/CGI.html#MIXING-POST-AND-URL-PARAMETERS</a>"}, {"owner": {"reputation": 51430, "user_id": 387194, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dc10501a6e08f9efcb42bf7b434bf1b1?s=128&d=identicon&r=PG", "display_name": "jcubic", "link": "https://stackoverflow.com/users/387194/jcubic"}, "reply_to_user": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1544528657, "post_id": 53721981, "comment_id": 94300349, "body": "@ernix thanks, you can add this as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 51430, "user_id": 387194, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dc10501a6e08f9efcb42bf7b434bf1b1?s=128&d=identicon&r=PG", "display_name": "jcubic", "link": "https://stackoverflow.com/users/387194/jcubic"}, "edited": false, "score": 0, "creation_date": 1544538858, "post_id": 53725613, "comment_id": 94306011, "body": "Will this work without <code>use CGI; my $cgi = CGI-&gt;new();</code>? You didn&#39;t use <code>$cgi-&gt;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 51430, "user_id": 387194, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dc10501a6e08f9efcb42bf7b434bf1b1?s=128&d=identicon&r=PG", "display_name": "jcubic", "link": "https://stackoverflow.com/users/387194/jcubic"}, "edited": false, "score": 1, "creation_date": 1544539110, "post_id": 53725613, "comment_id": 94306147, "body": "@jcubic: Yeah, that works too. But I&#39;ve never really seen the point of using CGI objects. Whoever needs more than one CGI object in a program?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 51430, "user_id": 387194, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dc10501a6e08f9efcb42bf7b434bf1b1?s=128&d=identicon&r=PG", "display_name": "jcubic", "link": "https://stackoverflow.com/users/387194/jcubic"}, "edited": false, "score": 1, "creation_date": 1544539191, "post_id": 53725613, "comment_id": 94306194, "body": "@jcubic: Also, please read <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> and <a href=\"https://perlhacks.com/2018/11/please-dont-use-cgi-pm/\" rel=\"nofollow noreferrer\">Please Don&#39;t Use CGI.pm</a>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1544536522, "creation_date": 1544536522, "answer_id": 53725613, "question_id": 53721981, "link": "https://stackoverflow.com/questions/53721981/how-to-get-query-string-parameters-from-post-request-in-cgi-perl-script/53725613#53725613", "title": "How to get query string parameters from POST request in CGI Perl script?", "body": "<p>Seems weird to make a <code>POST</code> request with all of the data in the URL. Why not just make a <code>GET</code>?</p>\n\n<p>But, anyway, CGI.pm has you covered. There's a section in the documentation called <strong><a href=\"https://metacpan.org/pod/CGI#Mixing-post-and-url-parameters\" rel=\"nofollow noreferrer\">Mixing post and url parameters</a></strong> which says the following:</p>\n\n<blockquote>\n<pre><code>my $color = url_param('color');\n</code></pre>\n  \n  <p>It is possible for a script to receive CGI parameters in the URL as well as in the fill-out form by creating a form that POSTs to a URL containing a query string (a \"?\" mark followed by arguments). The param() method will always return the contents of the POSTed fill-out form, ignoring the URL's query string. To retrieve URL parameters, call the url_param() method. Use it in the same way as param(). The main difference is that it allows you to read the parameters, but not set them.</p>\n</blockquote>\n"}], "owner": {"reputation": 51430, "user_id": 387194, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dc10501a6e08f9efcb42bf7b434bf1b1?s=128&d=identicon&r=PG", "display_name": "jcubic", "link": "https://stackoverflow.com/users/387194/jcubic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2637, "favorite_count": 0, "accepted_answer_id": 53725613, "answer_count": 1, "score": 1, "last_activity_date": 1544536522, "creation_date": 1544523609, "question_id": 53721981, "link": "https://stackoverflow.com/questions/53721981/how-to-get-query-string-parameters-from-post-request-in-cgi-perl-script", "title": "How to get query string parameters from POST request in CGI Perl script?", "body": "<p>You can get query param in CGI script with this code:</p>\n\n<pre><code>#!C:\\Perl64\\bin\\perl.exe\n\nuse CGI;\n\nmy $cgi = CGI-&gt;new();\n\nmy $file = $cgi-&gt;param( \"file\" );\nprint \"Content-Type: text/plain\\n\\n\";\n\nmy $text = do {\n    open(my $f, \"&lt;:encoding(UTF-8)\", $file)\n      or die(\"Can't open \\$filename\\\": $!\\n\");\n    local $/;\n    &lt;$f&gt;\n};\n\nprint $text;\n</code></pre>\n\n<p>but this don't work if request is POST, I'm sending this request using fetch API:</p>\n\n<pre><code>await fetch('cgi-bin/script.pl?file=..\\foo.php', {\n   method: 'POST',\n   body: 'Some Text'\n}).then(r =&gt; r.text());\n</code></pre>\n\n<p>if I open the script in Browser I get content of the file. Is there a way to tell CGI module to get params from QueryString instead of POST data? or any other raw way to parse Query String without CGI module in Perl?</p>\n"}, {"tags": ["r", "perl", "bioinformatics"], "answers": [{"comments": [{"owner": {"reputation": 16336, "user_id": 6356278, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cb6527e3af8a89177b809385400437b?s=128&d=identicon&r=PG&f=1", "display_name": "Wimpel", "link": "https://stackoverflow.com/users/6356278/wimpel"}, "reply_to_user": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "edited": false, "score": 0, "creation_date": 1544520402, "post_id": 53720744, "comment_id": 94295475, "body": "@RochiSaurabh easily, using the <code>fill</code>-argument from <code>data.table::dcast()</code>.. see updated answer"}], "tags": [], "owner": {"reputation": 16336, "user_id": 6356278, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cb6527e3af8a89177b809385400437b?s=128&d=identicon&r=PG&f=1", "display_name": "Wimpel", "link": "https://stackoverflow.com/users/6356278/wimpel"}, "is_accepted": true, "score": 1, "last_activity_date": 1544520383, "last_edit_date": 1544520383, "creation_date": 1544519499, "answer_id": 53720744, "question_id": 53720610, "link": "https://stackoverflow.com/questions/53720610/create-a-matrix-in-perl-or-r-if-data-is-provided-in-csv-file/53720744#53720744", "title": "create a matrix in Perl or R if data is provided in CSV file", "body": "<pre><code>library( data.table )\n\ndt &lt;- fread(\"./cn0_gene.csv\")\ndcast( dt, Sample_Name ~ Gene_Names, value.var = \"Frequencey\" )\n\n#    Sample_Name ACTA2,FAS,FAS-AS1 MMP26,OR51A2 NOT_FOUND OR52N1,OR52N5,TRIM5 RHD,RSRP1 RNLS SCAPER TP63 WWOX\n# 1:   gw6.00033                NA           NA         4                  NA        NA   NA     NA   NA   NA\n# 2:    gw6.0006                 1            1         5                   1         1    1      1    1    1\n</code></pre>\n\n<p>to fill in NA's as zero's, use:</p>\n\n<pre><code>dcast( dt, Sample_Name ~Gene_Names, value.var = \"Frequencey\", fill = 0 )\n\n#    Sample_Name ACTA2,FAS,FAS-AS1 MMP26,OR51A2 NOT_FOUND OR52N1,OR52N5,TRIM5 RHD,RSRP1 RNLS SCAPER TP63 WWOX\n# 1:   gw6.00033                 0            0         4                   0         0    0      0    0    0\n# 2:    gw6.0006                 1            1         5                   1         1    1      1    1    1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32939, "user_id": 6574038, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/cb225ef54c975d2f1edd3f14cabf95ee?s=128&d=identicon&r=PG&f=1", "display_name": "jay.sf", "link": "https://stackoverflow.com/users/6574038/jay-sf"}, "is_accepted": false, "score": 0, "last_activity_date": 1544520264, "creation_date": 1544520264, "answer_id": 53720970, "question_id": 53720610, "link": "https://stackoverflow.com/questions/53720610/create-a-matrix-in-perl-or-r-if-data-is-provided-in-csv-file/53720970#53720970", "title": "create a matrix in Perl or R if data is provided in CSV file", "body": "<p>You also could use base R.</p>\n\n<pre><code>tt &lt;- read.csv(\"cn0_gene.csv\", header=TRUE, sep=\"\", row.names=1)\nreshape(tt, idvar=c(\"Sample_Name\", \"Copy_No\"), timevar = \"Gene_Names\", direction=\"wide\")\n\n#     Sample_Name Copy_No Frequencey.NOT_FOUND Frequencey.ACTA2,FAS,FAS-AS1\n# 1     gw6.00033    cn=0                    4                           NA\n# 102    gw6.0006    cn=0                    5                            1\n#     Frequencey.MMP26,OR51A2 Frequencey.OR52N1,OR52N5,TRIM5 Frequencey.RHD,RSRP1\n# 1                        NA                             NA                   NA\n# 102                       1                              1                    1\n#     Frequencey.RNLS Frequencey.SCAPER Frequencey.TP63 Frequencey.WWOX\n# 1                NA                NA              NA              NA\n# 102               1                 1               1               1\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 53720744, "answer_count": 2, "score": 0, "last_activity_date": 1544523928, "creation_date": 1544518918, "last_edit_date": 1544523928, "question_id": 53720610, "link": "https://stackoverflow.com/questions/53720610/create-a-matrix-in-perl-or-r-if-data-is-provided-in-csv-file", "title": "create a matrix in Perl or R if data is provided in CSV file", "body": "<p>This is a CSV file cn0_gene.csv:-</p>\n\n<pre><code>  X Sample_Name           Gene_Names Frequencey\n 1   gw6.00033              NOT_FOUND         4\n 102  gw6.0006       ACTA2,FAS,FAS-AS1        1\n 103  gw6.0006           MMP26,OR51A2         1                  \n 104  gw6.0006               NOT_FOUND        5\n 105  gw6.0006     OR52N1,OR52N5,TRIM5        1\n</code></pre>\n\n<p>How can I create a matrix if data is in CSV file?</p>\n\n<p>Expected output :- unique <code>sample_name</code> as row and <code>Gene_Name</code> as column and frequency as data corresponding to <code>sample_name</code> and <code>Gene_names</code>.</p>\n"}, {"tags": ["perl", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1544519796, "post_id": 53720476, "comment_id": 94295102, "body": "Did you switch your codepage in the console to 65001? With <code>chcp 65001</code>, I get <code>\u0410\u0432\u0442\u043e\u0440</code> as the output from: <code>perl -MEncode -wle &quot;print encode(&#39;UTF-8&#39;,decode(&#39;Windows-1251&#39;,shift))&quot; &quot;&#192;&#226;&#242;&#238;&#240;&quot;</code> , so your data is encoded as <code>Windows-1251</code> I guess."}, {"owner": {"reputation": 331, "user_id": 993047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c961d41ca31f63a66b3b8c5515370a?s=128&d=identicon&r=PG", "display_name": "Codr", "link": "https://stackoverflow.com/users/993047/codr"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544524503, "post_id": 53720476, "comment_id": 94297988, "body": "Corion, how can I do that without using the console? I have to write the correct UTF-8 string to an .html file (with <code>&lt;meta charset=&quot;utf-8&quot;&gt;</code>)."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544527990, "post_id": 53720476, "comment_id": 94299985, "body": "Then output the file correctly: <code>open my $fh, &#39;&gt;:encoding(UTF-8)&#39;, $filename or die &quot;Couldn&#39;t write to $filename: $!&quot;; print $fh decode(&#39;Windows-1251&#39;, ...);</code>"}, {"owner": {"reputation": 331, "user_id": 993047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c961d41ca31f63a66b3b8c5515370a?s=128&d=identicon&r=PG", "display_name": "Codr", "link": "https://stackoverflow.com/users/993047/codr"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544528706, "post_id": 53720476, "comment_id": 94300382, "body": "It works! Thank you. Why not post this as an answer here?"}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 2, "last_activity_date": 1544529673, "creation_date": 1544529673, "answer_id": 53723786, "question_id": 53720476, "link": "https://stackoverflow.com/questions/53720476/how-to-fix-utf-8-encoding-error-with-russian-words/53723786#53723786", "title": "How to fix UTF-8 encoding error with Russian words", "body": "<p>After some tries, I get the expected output <code>\u0410\u0432\u0442\u043e\u0440</code> when switching the (Windows) console code page to 65001 (UTF-8) and decoding the input data from <code>Windows-1251</code>:</p>\n\n<pre><code>perl -MEncode -wle \"print encode('UTF-8',decode('Windows-1251',shift))\" \"\u00c0\u00e2\u00f2\u00ee\u00f0\"\n</code></pre>\n\n<p>This suggests that the input data is encoded as <code>Windows-1251</code> and decoding from that should give you the cyrrillic letters in Unicode. To output the data to a file, make sure you either set the encoding when opening the file (easiest) or <code>encode</code> each string to the target encoding on output (hard to keep track of):</p>\n\n<pre><code>my $octets = &lt;$input_file&gt;;\n\nmy $data = decode('Windows-1251', $octets;\nopen my $fh, '&gt;:encoding(UTF-8)', $filename\n    or die \"Couldn't write to $filename: $!\";\nprint $fh decode('Windows-1251', $data);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544563414, "post_id": 53726193, "comment_id": 94318918, "body": "The user should not concern themselves with the internal form of the string. After decoding the input, it is just characters in the logical Perl representation. If you want to output them, you need to encode them to what the output expects, this is not related to the internal storage of the string."}, {"owner": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544602666, "post_id": 53726193, "comment_id": 94329946, "body": "@Grinnz, yes. Maybe &#39;users&#39; should not concern (as it was said many times in many perl books), but &#39;developers&#39; should know how it works behind the scene because otherwise you can get problems with string operations later."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544636128, "post_id": 53726193, "comment_id": 94349369, "body": "By users, I am referring to Perl developers. If you are not writing XS code, concerning yourself with these details without a full understanding will inevitably lead to bugs, and this can be seen all over CPAN whenever anyone uses <code>is_utf8</code>."}, {"owner": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544648702, "post_id": 53726193, "comment_id": 94355310, "body": "@Grinnz, I heard this many times. But from the other hand, take a look at Perl modules for Windows OS where developers (users?) instead of Unicode version of Windows API use ANSI versions explicitly  adding &#39;A&#39; at the end of each function. Other developers (users?) try to create Unicode files on NTFS or use COM and run into problems with these modules. To make it works, I think, they have only one option - take a look at source code of these modules and figure out how Perl works behind the scene with string. And it is not related to XS only."}], "tags": [], "owner": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "is_accepted": false, "score": 1, "last_activity_date": 1544607296, "last_edit_date": 1544607296, "creation_date": 1544538294, "answer_id": 53726193, "question_id": 53720476, "link": "https://stackoverflow.com/questions/53720476/how-to-fix-utf-8-encoding-error-with-russian-words/53726193#53726193", "title": "How to fix UTF-8 encoding error with Russian words", "body": "<p>Your bytes sequence is 0xc0 0xe2 0xf2 0xee 0xf0. This is russian word 'author' in cp1251. Representation given by you can be get if your application assumes that this is cp1252 encoding. Now the question is here what codepage do you like to have? Or, what codepage needed to your application? </p>\n\n<p>To read file in cp1251 in correct way you have to use construction like this: </p>\n\n<pre><code>open (my $tmp_h,\"&lt;:encoding(cp-1251)\", $ARGV[0]) or die $!; \n</code></pre>\n\n<p>That allows perl to know what codepage do you use in your file. And then when you will read file into string it allows perl to correctly convert values from cp1251 to Perl's internal form (UTF-8) and use these string as you want without any problems.</p>\n\n<p>For internal form perl set UTF8 flag you can check using Devel::Peek module.</p>\n\n<p>I think, that using internal form also will give you chance to use any string operation correctly and will help avoid mistakes.</p>\n\n<p>I would recommend to use \"use utf8\" pragma in our source code. Now, all literals in the source code will be threated as utf8 and automatically converted into internal form correctly. Now, we know that our source code is in UTF8 (and it would also better if with BOM, because detecting BOM usualy is the first thing different IDE and editor will typical do). Later, we can open other files in any encoding using \"&lt;:encoding(....)\" construction get data from the web, from the databases and again make sure that data were converted into internal form correctly checking utf8 flag. Having all this, we would be able to work with all this data in one manner, correcly compare string, use regular expression and so on. </p>\n"}], "owner": {"reputation": 331, "user_id": 993047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c961d41ca31f63a66b3b8c5515370a?s=128&d=identicon&r=PG", "display_name": "Codr", "link": "https://stackoverflow.com/users/993047/codr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 0, "accepted_answer_id": 53723786, "answer_count": 2, "score": 0, "last_activity_date": 1544607296, "creation_date": 1544518447, "question_id": 53720476, "link": "https://stackoverflow.com/questions/53720476/how-to-fix-utf-8-encoding-error-with-russian-words", "title": "How to fix UTF-8 encoding error with Russian words", "body": "<p>My Perl script reads from an text file which contains mainly English ANSI words.\nBut there are Russian words sometimes, which I can not convert back to UTF-8.</p>\n\n<p>See same example (the words in brackets are the English translations):</p>\n\n<pre><code>\u00ca\u00ee\u00ec\u00ef\u00ee\u00ed\u00e5\u00ed\u00f2 (Component)\n\u00c0\u00e2\u00f2\u00ee\u00f0 (Author)\n\u00c3\u00fd\u00ed\u00e4\u00e0\u00eb\u00fc\u00f4 (Gandalf)\n\u00c4\u00e0\u00f2\u00e0 \u00f1\u00ee\u00e7\u00e4\u00e0\u00ed\u00e8\u00ff (Create date): 20-\u00ec\u00e0\u00e9(may)-2003\n\u00c4\u00e0\u00f2\u00e0 \u00ea\u00ee\u00f0\u00f0\u00e5\u00ea\u00f6\u00e8\u00e8 (Last correction Date): 25-\u00ec\u00e0\u00f0(mar)-2003\n\u00c2\u00e5\u00f0\u00f1\u00e8\u00ff (Version): 0.92\n\u00c1\u00eb\u00e0\u00e3\u00ee\u00e4\u00e0\u00f0\u00ed\u00ee\u00f1\u00f2\u00e8 (Thanks):\n\u00cd\u00ee\u00e2\u00ee\u00e5 \u00e2 (New in):\n\u00cf\u00ee\u00e4\u00e4\u00e5\u00f0\u00e6\u00ea\u00e0 (Support)\n\u00ce\u00f7\u00e5\u00ed\u00fc \u00ec\u00ed\u00ee\u00e3\u00ee (Very much)\n</code></pre>\n\n<p>I've read the <a href=\"http://www.i18nqa.com/debug/utf8-debug.html\" rel=\"nofollow noreferrer\">UTF-8 Encoding Debugging Chart</a> and tried also the following</p>\n\n<pre><code>$s='\u00c0\u00e2\u00f2\u00ee\u00f0';\nfrom_to($s, \"iso-8859-5\",\"utf-8\");  \nprint \"$s\\n\";\n\nmy $s = Encode::decode( 'iso-8859-5', '\u00c0\u00e2\u00f2\u00ee\u00f0' );\nfrom_to($s, \"iso-8859-5\",\"utf-8\");  \nprint \"$s\\n\";\n</code></pre>\n\n<p>I've tried also <code>cp1252</code> instead of <code>iso-8859-5</code>, but nothing helps.\nI've tried also Encode::Guess, but the result is not helpful: <code>iso-8859-5 or cp1251 or koi8-r or iso-8859-1</code>.</p>\n\n<p>Any idea how to convert '\u00c0\u00e2\u00f2\u00ee\u00f0' back to the Cyrillic text '\u0430\u0432\u0442\u043e\u0440'?</p>\n"}, {"tags": ["perl", "encryption", "cgi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1544515434, "post_id": 53719717, "comment_id": 94292815, "body": "Fundamentally, you can&#39;t usefully encrypt the source code. To execute the encrypted Perl code, it would first need to be decrypted. To be decrypted, the decryption key must be available."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544515644, "post_id": 53719717, "comment_id": 94292919, "body": "Now, you could move the credentials to a separate file. But that doesn&#39;t actually help. The Perl code needs to be able to access that file and the credentials within."}, {"owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544516030, "post_id": 53719717, "comment_id": 94293114, "body": "Yes the passwords are actually in a separate file, but they can always be moved to the code file itself. If we can&#39;t ensure 100% safety, 50% is better than nothing. What CAN be done and how?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1544516490, "post_id": 53719717, "comment_id": 94293297, "body": "@ZiggY If the secrets are in their own file, like a config file, encrypt the file. Then have the Perl code decrypt it. Store the key in an environment variable so it never touches disk. It would clear things up if you could provide an example of how the code gets its secrets. And in computer security, 50% security is often worse than nothing; it gives you a false sense of security and can demotivate real fixes."}, {"owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 0, "creation_date": 1544517328, "post_id": 53719717, "comment_id": 94293674, "body": "It looks something like this (edited): $conffile = &quot;/f1/f2/f3/dbInfo.conf&quot;;  ($p1,$username,$password,$p2) = &amp;db_getDelimitedValues(&quot;dbName&quot;);  $dbh=DBI-&gt;connect($p1,$username,$password,&#39;###&#39;)"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1544521312, "post_id": 53719717, "comment_id": 94296029, "body": "@ZiggY Please <a href=\"https://stackoverflow.com/posts/53719717/edit\">edit your question</a> with any updates to your question so others can have the complete picture."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1544536056, "post_id": 53719717, "comment_id": 94304243, "body": "@Ziggy: Firstly, as you can hopefully see, putting code in a comment is a terrible idea. Please edit your question to add this information. Secondly, while you&#39;re showing us code, the contents of the <code>db_getDelimitedValues()</code> subroutine would also be really useful."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 0, "creation_date": 1544517476, "post_id": 53719967, "comment_id": 94293750, "body": "Hi Schwern, yes i guess that&#39;s one way to go. But if someone gets a hold of the Perl file he can easily retrieve what&#39;s stored in the environment variables by running the code, right?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 1, "creation_date": 1544521216, "post_id": 53719967, "comment_id": 94295969, "body": "@ZiggY No. Environment variables only exist in memory. You&#39;d set them probably when you start the web server. Then only the server and its child processes, which includes CGI programs, can access them."}, {"owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 0, "creation_date": 1544525300, "post_id": 53719967, "comment_id": 94298438, "body": "Understood. It&#39;s hosted on a Linux server (which im also not very literate in). But from what im reading, to permanently set an environment variable you must store the value in a .bashrc file... which is basically running around in circles. We wouldn&#39;t be much better off than we are now."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 0, "creation_date": 1544533794, "post_id": 53719967, "comment_id": 94303020, "body": "@ZiggY: what exactly are you trying to protect yourself from? There are (at least) two different levels of security that seem to be getting confused here. There are things that might accidentally get exposed to end-users of your web site. Anything that is hard-coded in your programs (or in any other web-accessible file) is in this category. If an attacker can trick your web server into revealing the code then you&#39;re in trouble. Stuff that&#39;s in <code>.bashrc</code> is different. In order to see that someone would need to have full access to your server. And that&#39;s a whole different level of problems."}, {"owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1544534909, "post_id": 53719967, "comment_id": 94303617, "body": "@DaveCross, in my case, i have a web application running on Perl CGI. How would i set a persistent environment variable accessible by the Perl code written above by @Schwern? From what i understand, the .bashrc file executes only for specific users or when an interactive shell is started. Btw, please excuse my limited knowledge here, i barely know much about Linux (i&#39;m Windows oriented)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 0, "creation_date": 1544535925, "post_id": 53719967, "comment_id": 94304169, "body": "@ZiggY: You would put it in the <code>.bashrc</code> file that belongs to the user that your web server runs as."}, {"owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 0, "creation_date": 1544538220, "post_id": 53719967, "comment_id": 94305645, "body": "I&#39;v added an environment variable in .bashrc called testVar, but when calling ENV{testVar} from the Perl code, it&#39;s returning nothing. I even tried a code to loop and print everything from %ENV, and it&#39;s not there. What am i missing?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544541050, "post_id": 53719967, "comment_id": 94307441, "body": "Does your web server read the <code>.bashrc</code> of your user and execute it before running your Perl program? Most likely, it doesn&#39;t. So you will either need to write a shell script that reads the <code>.bashrc</code> and then runs your Perl program or read the <code>.bashrc</code> (or whatever other configuration file) from within Perl. This will not solve your problem of safe storage of secrets in either case..."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "edited": false, "score": 0, "creation_date": 1544578983, "post_id": 53719967, "comment_id": 94323224, "body": "@ZiggY This is beyond the detail level of StackOverflow, and it&#39;s a security matter. At your level of understanding you could put a lot of work in and not get any security benefit, or make things worse. I would advise you consider hiring someone to give you a hand."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1544516693, "last_edit_date": 1544516693, "creation_date": 1544516328, "answer_id": 53719967, "question_id": 53719717, "link": "https://stackoverflow.com/questions/53719717/how-to-protect-perl-source-code-using-encryption/53719967#53719967", "title": "How to protect Perl source code using encryption", "body": "<p>You can't protect the code. <a href=\"https://stackoverflow.com/questions/53719717/how-to-protect-perl-source-code-using-encryption#comment94292815_53719717\">As Ikegami said</a>, in order to run the code you need to decrypt the code.</p>\n\n<p>But you can protect the sensitive information. The simplest thing to do is put it in environment variables and ensure those variables are set when the program runs.</p>\n\n<p>For example, if you have...</p>\n\n<pre><code>my $dbpassword = \"sekret\";\n</code></pre>\n\n<p>You'd change this to...</p>\n\n<pre><code>my $dbpassword = $ENV{DBPASSWORD};\n</code></pre>\n\n<p>And ensure that the <code>DBPASSWORD</code> environment variable is set to <code>sekret</code> when the program runs. This both moves the secrets out of the source code, and makes the code more flexible. You can store the secrets in one place making them easier to manage. It ensures those secrets are never stored in the clear on disk.</p>\n\n<p>Similarly, if your secrets are in a file you can encrypt that file. Then have the Perl code decrypt the file using a key stored in an environment variable. Again, secrets are never stored on disk in the clear. This is similar to <a href=\"https://www.engineyard.com/blog/rails-encrypted-credentials-on-rails-5.2\" rel=\"nofollow noreferrer\">Rails Encrypted Credentials</a>.</p>\n\n<p>How you securely store those secrets and set those environment variables depends on your server setup. Once the problem of storing secrets is moved out of the legacy Perl code you have many options.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1544516458, "creation_date": 1544516458, "answer_id": 53719994, "question_id": 53719717, "link": "https://stackoverflow.com/questions/53719717/how-to-protect-perl-source-code-using-encryption/53719994#53719994", "title": "How to protect Perl source code using encryption", "body": "<p>From the <a href=\"https://perldoc.perl.org/perlfaq.html\" rel=\"nofollow noreferrer\">Perl FAQ</a>:</p>\n\n<blockquote>\n  <p><a href=\"https://perldoc.perl.org/perlfaq3.html#How-can-I-hide-the-source-for-my-Perl-program%3F\" rel=\"nofollow noreferrer\"><strong>How can I hide the source for my Perl program?</strong></a></p>\n  \n  <p>Delete it. :-) Seriously, there are a number of (mostly\n  unsatisfactory) solutions with varying levels of \"security\".</p>\n  \n  <p>First of all, however, you can't take away read permission, because\n  the source code has to be readable in order to be compiled and\n  interpreted. (That doesn't mean that a CGI script's source is readable\n  by people on the web, though--only by people with access to the\n  filesystem.) So you have to leave the permissions at the socially\n  friendly 0755 level.</p>\n  \n  <p>Some people regard this as a security problem. If your program does\n  insecure things and relies on people not knowing how to exploit those\n  insecurities, it is not secure. It is often possible for someone to\n  determine the insecure things and exploit them without viewing the\n  source. Security through obscurity, the name for hiding your bugs\n  instead of fixing them, is little security indeed.</p>\n  \n  <p>You can try using encryption via source filters (Starting from Perl\n  5.8 the Filter::Simple and Filter::Util::Call modules are included in the standard distribution), but any decent programmer will be able to\n  decrypt it. You can try using the byte code compiler and interpreter\n  described later in perlfaq3, but the curious might still be able to\n  de-compile it. You can try using the native-code compiler described\n  later, but crackers might be able to disassemble it. These pose\n  varying degrees of difficulty to people wanting to get at your code,\n  but none can definitively conceal it (true of every language, not just\n  Perl).</p>\n  \n  <p>It is very easy to recover the source of Perl programs. You simply\n  feed the program to the perl interpreter and use the modules in the\n  B:: hierarchy. The B::Deparse module should be able to defeat most\n  attempts to hide source. Again, this is not unique to Perl.</p>\n  \n  <p>If you're concerned about people profiting from your code, then the\n  bottom line is that nothing but a restrictive license will give you\n  legal security. License your software and pepper it with threatening\n  statements like \"This is unpublished proprietary software of XYZ Corp.\n  Your access to it does not give you permission to use it blah blah\n  blah.\" We are not lawyers, of course, so you should see a lawyer if\n  you want to be sure your license's wording will stand up in court.</p>\n</blockquote>\n"}], "owner": {"reputation": 49, "user_id": 1531061, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1c5824ed7b79e586a9a583977b5b224c?s=128&d=identicon&r=PG", "display_name": "ZiggY", "link": "https://stackoverflow.com/users/1531061/ziggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1544516693, "creation_date": 1544515256, "question_id": 53719717, "link": "https://stackoverflow.com/questions/53719717/how-to-protect-perl-source-code-using-encryption", "title": "How to protect Perl source code using encryption", "body": "<p>We have an old website written in Perl which contains sensitive passwords used for connecting to certain databases. </p>\n\n<p>What is the best way to protect the Perl code? We have very minimal understanding of Perl and CGI, but we need a solution to this problem as it poses a security risk.</p>\n\n<p>We'r looking for encryption/obfuscation solutions, we read about Filter::Crypto::Decrypt but have no idea how to apply it. We also stumbled on this site (<a href=\"http://enscryption.com/\" rel=\"nofollow noreferrer\">http://enscryption.com/</a>) but we'r pretty skeptical about it.</p>\n\n<p>We'd appreciate some straightforward guidance on what to do, with steps! :)</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 2715390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6971def9656bba6059ad87a6c372d3c9?s=128&d=identicon&r=PG&f=1", "display_name": "WallyZ", "link": "https://stackoverflow.com/users/2715390/wallyz"}, "edited": false, "score": 0, "creation_date": 1544497991, "post_id": 53716390, "comment_id": 94287629, "body": "You&#39;re right!  gen-declspecs.pl was being called by a line of code : my @o = readpipe(&quot;perl mk/gen-declspecs.pl &#39;$file&#39;&quot;); Which means it should never have worked!!!  But I have download this AGAR script dozens of times and run it successfully. Why has this problem only raised it&#39;s head now?"}], "tags": [], "owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "is_accepted": true, "score": 1, "last_activity_date": 1544494173, "creation_date": 1544494173, "answer_id": 53716390, "question_id": 53716269, "link": "https://stackoverflow.com/questions/53716269/perl-not-finding-data-files/53716390#53716390", "title": "Perl not finding data files", "body": "<p>If this line:</p>\n\n<pre><code>print STDERR \"gen-declspecs : File does not exist : $ARGV[0]\\n\";\n</code></pre>\n\n<p>(which doesn't include single-quotes) is printing this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gen-declspecs : File does not exist : './ada-core/ctxt.h'\n</code></pre>\n\n<p>(which does), then that means your <code>$ARGV[0]</code> starts and ends with spurious single-quotes. <code>-e</code> isn't going to strip those out; for all it knows, maybe you really are interested in a folder named <code>'.</code> that contains a folder named <code>ada-core</code> that contains a file named <code>ctxt.h'</code>!</p>\n\n<p>To fix this, you need to run your script correctly; don't put spurious single-quotes in the arguments to it.</p>\n\n<p>(If you're coming from a Unix-like environment, you need to be aware that the default Windows shell does not use the same quoting rules at all.)</p>\n"}], "owner": {"reputation": 157, "user_id": 2715390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6971def9656bba6059ad87a6c372d3c9?s=128&d=identicon&r=PG&f=1", "display_name": "WallyZ", "link": "https://stackoverflow.com/users/2715390/wallyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 53716390, "answer_count": 1, "score": 0, "last_activity_date": 1544494173, "creation_date": 1544493251, "last_edit_date": 1544493787, "question_id": 53716269, "link": "https://stackoverflow.com/questions/53716269/perl-not-finding-data-files", "title": "Perl not finding data files", "body": "<p>I have a perl script that is refusing to see existing data files.  When I take the code and isolate in a test perl script it works fine but in the main perl script it can't find anything.</p>\n\n<p>Code looks like this:</p>\n\n<pre><code>use Cwd qw(cwd);\n\nmy $dir = cwd;\nprint STDERR \"gen-decsplecs : dir $dir : file $ARGV[0]\\n\";\n\nif (-e $ARGV[0]) {\n    print STDERR \"gen-declspecs : File Exists : $ARGV[0]\\n\";\n} else {\n    print STDERR \"gen-declspecs : File does not exist : $ARGV[0]\\n\";\n}\n\nif (-e \"C:/Users/walter/Documents/Projects/agar-1.5.0/ada-core/ctxt.h\") {\n    print STDERR \"gen-declspecs : File Exists : C:/Users/walter/Documents/Projects/agar-1.5.0/ada-core/ctxt.h\\n\";\n} else {\n    print STDERR \"gen-declspecs : File does not exist : C:/Users/walter/Documents/Projects/agar-1.5.0/ada-core/ctxt.h\\n\";\n}\n\nopen(F, $ARGV[0]) || die \"$ARGV[0]: $!\";\n</code></pre>\n\n<p>This prints :</p>\n\n<pre><code>gen-decsplecs : dir C:/Users/walter/Documents/Projects/agar-1.5.0 : file './ada-core/ctxt.h'\ngen-declspecs : File does not exist : './ada-core/ctxt.h'\ngen-declspecs : File Exists : C:/Users/walter/Documents/Projects/agar-1.5.0/ada-core/ctxt.h\n'./ada-core/ctxt.h': No such file or directory at mk/gen-declspecs.pl line 93.\ngen-declspecs.pl failed\n</code></pre>\n\n<p>So my question is if the code is executing fomr directory :</p>\n\n<p>C:/Users/walter/Documents/Projects/agar-1.5.0</p>\n\n<p>And is looking for file :</p>\n\n<p>./ada-core/ctxt.h</p>\n\n<p>Why does it not exist on the relative path when the full pathed file :</p>\n\n<p>C:/Users/walter/Documents/Projects/agar-1.5.0/ada-core/ctxt.h</p>\n\n<p>does exist? Especially when I have copied the perl to a test script and it does work!!!</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1544491353, "post_id": 53715993, "comment_id": 94286349, "body": "Welcome to StackOverflow.  Please <a href=\"https://stackoverflow.com/posts/53715993/edit\">edit</a> your post and include a representative sample of the input data, and explain what you mean by <i>&quot;cannot seem to get it to work&quot;</i>.  Show the expected output, the <i>actual output</i> and what steps you&#39;ve taken to identify the problem."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544495128, "post_id": 53715993, "comment_id": 94287097, "body": "You just want the total number of each Add, Delete, etc. in all of those columns combined?"}, {"owner": {"reputation": 39, "user_id": 10773441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6fa1175c027604be8b0e3a13a4e2d97?s=128&d=identicon&r=PG&f=1", "display_name": "knxwledge", "link": "https://stackoverflow.com/users/10773441/knxwledge"}, "edited": false, "score": 0, "creation_date": 1544495384, "post_id": 53715993, "comment_id": 94287135, "body": "Yes! I assumed some sort of dictionary would work for this, considering you can use the unique keys as the request types and the values as the counts, but could not for the life of me get it to work."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544499904, "post_id": 53716781, "comment_id": 94287997, "body": "<code>$requests{$_} += 1</code> is better written as <code>++$requests{$_};</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544501466, "post_id": 53716781, "comment_id": 94288287, "body": "@ikegami I don&#39;t like to use increment/decrement operators unless actually taking advantage of their side-effects (Which is almost never the case)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544514835, "post_id": 53716781, "comment_id": 94292569, "body": "Backwards. If you used <code>++$requests{$_};</code>, you would be taking advantage of its <a href=\"https://en.wikipedia.org/wiki/Side_effect_(computer_science)\" rel=\"nofollow noreferrer\">side effect</a>, but you wouldn&#39;t be taking advantage of the value it returns. The thing is, this is EXACTLY what you are doing now. You are only using <code>$requests{$_} += 1;</code> for its side-effect, ignoring the value it returns. <code>$requests{$_} += 1</code> and <code>++$requests{$_}</code> even return exactly the same value! <code>$requests{$_} += 1</code> is purely a slow and weird version of <code>++$requests{$_}</code>."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1544497705, "creation_date": 1544497705, "answer_id": 53716781, "question_id": 53715993, "link": "https://stackoverflow.com/questions/53715993/how-to-separate-values-in-a-column-and-count-occurrences/53716781#53716781", "title": "How to separate values in a column and count occurrences?", "body": "<p>You're on the right track about wanting to use a hash table to keep track of the request types, not an array:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\n\nmy %requests;\n\nwhile (&lt;&gt;) {\n  chomp;\n  my @fields = split /\\|/;\n  # Increment the count based on the values in these indexes of the array\n  $requests{$_} += 1 for @fields[2,4,6,8,10];\n}\n\nsay \"$_: $requests{$_}\" for sort keys %requests;\n</code></pre>\n\n<p>The above uses an <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">array slice</a> to get all the relevant values from the <code>@fields</code> array without using a bunch of extra variables, and then loops over them, incrementing entries in a hash table. Then it loops again over the keys in that table to display the results.</p>\n"}], "owner": {"reputation": 39, "user_id": 10773441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6fa1175c027604be8b0e3a13a4e2d97?s=128&d=identicon&r=PG&f=1", "display_name": "knxwledge", "link": "https://stackoverflow.com/users/10773441/knxwledge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544497705, "creation_date": 1544490731, "last_edit_date": 1544494056, "question_id": 53715993, "link": "https://stackoverflow.com/questions/53715993/how-to-separate-values-in-a-column-and-count-occurrences", "title": "How to separate values in a column and count occurrences?", "body": "<p>I am very new to Perl. I have read in a file and separated it into columns or \"fields\". The file has several columns, but only 5 specific columns needed to keep track of (call them A-E). In each field is some type of request (Get, Update, etc.). I am trying to read in the request types and count how many of each type there are, but I am having trouble separating each specific value. What is the best way to push just the single, unique request values into an array (without repeating), and count the occurrences as well?</p>\n\n<p>The file input looks something like this.</p>\n\n<pre><code>65739483|test|Add|54758|Update|1443|Add|||||testing||||...\n65739483|test|Delete|54758|Add|1443|Get|||||test2||||...\n</code></pre>\n\n<p>This is what I have so far.</p>\n\n<pre><code>....\nMy @fields = split(/\\|/, $line);\nmy $a_column = $fields [2];\nmy $b_column = $fields [4];\nmy $c_column = $fields [6];\nmy $d_column = $fields [8];\nmy $e_column = $fields [10];\n\nmy @request_types = ();\n\nforeach my $new_request ($a_column) {\n    if($new_request &amp;&amp; $new_request !~ @request_types) {\n        push(@request_types, \"$new_request\");\n    }\n}\n....\n</code></pre>\n\n<p>When I run this it prints out the entire column, something like this.</p>\n\n<pre><code>Add Delete Delete Update Add ...\n</code></pre>\n\n<p>I have been trying nested for loops, 2d matrices, etc. and cannot seem to get it to work. Is there a much simpler way to approach this that I am missing? Dictionaries maybe?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544489447, "post_id": 53715840, "comment_id": 94286009, "body": "Read two lines at a time. Create a HoH (<code>++$animals{$group}{$thing};</code>), then flatten after you&#39;ve read everything in (<code>$_ = join(&quot;, &quot;, @$_) for values(%animals);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "is_accepted": true, "score": 1, "last_activity_date": 1544490482, "creation_date": 1544490482, "answer_id": 53715960, "question_id": 53715840, "link": "https://stackoverflow.com/questions/53715840/how-can-i-make-an-array-of-values-after-duplicate-keys-in-a-hash/53715960#53715960", "title": "How can I make an array of values after duplicate keys in a hash?", "body": "<p>You're very close here. We can't get exactly the output you want from <code>Data::Dumper</code> because hashes can only have one value per key. The easiest way to fix that is to assign a reference to an array to the key and add things to it. But since you want to eliminate the duplicates as well, it's easier to build hashes as an intermediate representation then transform them to arrays:</p>\n\n<pre><code>use Data::Dumper;\nmy $file = \"animals.txt\";\nopen($fh, \"&lt;\", $file) || die \"Could not open file $file $!/n\";\n\nwhile (&lt;$fh&gt;) {\n    chomp;\n    if(/^&gt;(.+)/){\n        $group = $1; \n        next;\n    }\n    $animals{$group} = {} unless exists $animals{$group};\n    $animals{$group}-&gt;{$_} = 1;\n}\n\n# Transform the hashes to arrays\nforeach my $group (keys %animals) {\n  # Make the hash into an array of its keys\n  $animals{$group} = [ sort keys %{$animals{$group}} ];\n  # Throw away the array if we only have one thing\n  $animals{$group} = $animals{$group}-&gt;[0] if @{ $animals{$group} } == 1;\n}\nprint  Dumper(\\%animals);\n</code></pre>\n\n<p>Result is</p>\n\n<pre><code>$VAR1 = {\n          'Reptiles' =&gt; 'Snakes',\n          'Fish' =&gt; 'Clownfish',\n          'Birds' =&gt; 'Parrots',\n          'Mammals' =&gt; [\n                         'Cats',\n                         'Dogs'\n                       ]\n        };\n</code></pre>\n\n<p>which is as close as you can get to what you had as your desired output.</p>\n\n<p>For ease in processing the ingested data, it may actually be easier to <em>not</em> throw away the arrays in the one-element case so that every entry in the hash can be processed the same way (they're all references to arrays, no matter how many things are in them). Otherwise you've added a conditional to strip out the arrays, and you have to add another conditional test in your processing code to check</p>\n\n<pre><code>if (ref $item) {\n    # This is an anonymous array\n} else {\n    # This is just a single entry\n}\n</code></pre>\n\n<p>and it's easier to just have one path there instead of two, even if the <code>else</code> just wraps the single item into an array again. Leave them as arrays (delete the <code>$animals{$group} = $animals{$group}-&gt;[0]</code> line) and you'll be fine.</p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1544494289, "last_edit_date": 1544494289, "creation_date": 1544491632, "answer_id": 53716085, "question_id": 53715840, "link": "https://stackoverflow.com/questions/53715840/how-can-i-make-an-array-of-values-after-duplicate-keys-in-a-hash/53716085#53716085", "title": "How can I make an array of values after duplicate keys in a hash?", "body": "<p>Given:</p>\n\n<pre><code>__DATA__\n&gt;Mammals\nCats\n&gt;Fish\nClownfish\n&gt;Birds\nParrots\n&gt;Mammals\nDogs\n&gt;Reptiles\nSnakes\n&gt;Reptiles\nSnakes\n</code></pre>\n\n<p>(at the end of the source code or a file with that content)</p>\n\n<p>If you are willing to <em>slurp</em> the file, you can do something with a regex and a HoH like this:</p>\n\n<pre><code>use Data::Dumper;\nuse warnings;\nuse strict;\nmy %animals;\nmy $s;\n\nwhile(&lt;DATA&gt;){\n    $s.=$_;\n}    \n\nwhile($s=~/^&gt;(.*)\\R(.*)/mg){\n    ++$animals{$1}{$2};\n}\n\nprint Dumper(\\%animals);\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>$VAR1 = {\n          'Mammals' =&gt; {\n                         'Cats' =&gt; 1,\n                         'Dogs' =&gt; 1\n                       },\n          'Birds' =&gt; {\n                       'Parrots' =&gt; 1\n                     },\n          'Fish' =&gt; {\n                      'Clownfish' =&gt; 1\n                    },\n          'Reptiles' =&gt; {\n                          'Snakes' =&gt; 2\n                        }\n        };\n</code></pre>\n\n<p>Which you can arrive to your format with this complete Perl program:</p>\n\n<pre><code>$s.=$_ while(&lt;DATA&gt;);\n++$animals{$1}{$2} while($s=~/^&gt;(.*)\\R(.*)/mg);\nwhile ((my $k, my $v) =  each (%animals)) {\n    print \"$k: \". join(\", \", keys($v)) . \"\\n\";\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Fish: Clownfish\nBirds: Parrots\nMammals: Cats, Dogs\nReptiles: Snakes\n</code></pre>\n\n<p>(Know that the output order may be different than file order since Perl hashes do not maintain insertion order...)</p>\n"}], "owner": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 53715960, "answer_count": 2, "score": 1, "last_activity_date": 1544494289, "creation_date": 1544489092, "question_id": 53715840, "link": "https://stackoverflow.com/questions/53715840/how-can-i-make-an-array-of-values-after-duplicate-keys-in-a-hash", "title": "How can I make an array of values after duplicate keys in a hash?", "body": "<p>I have a question regarding duplicate keys in hashes.\nSay my dataset looks something like this: </p>\n\n<pre><code>&gt;Mammals\nCats\n&gt;Fish\nClownfish\n&gt;Birds\nParrots\n&gt;Mammals\nDogs\n&gt;Reptiles\nSnakes\n&gt;Reptiles\nSnakes\n</code></pre>\n\n<p>What I would like to get out of my script is a hash that looks like this: </p>\n\n<pre><code>$VAR1 = {\n          'Birds' =&gt; 'Parrots',\n          'Mammals' =&gt; 'Dogs', 'Cats',\n          'Fish' =&gt; 'Clownfish',\n          'Reptiles' =&gt; 'Snakes'\n        };\n</code></pre>\n\n<p>I found a possible answer here (<a href=\"https://www.perlmonks.org/?node_id=1116320\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=1116320</a>). However I am not sure how to identify the values and the duplicates with the format of my dataset. </p>\n\n<p>Here's the code that I have been using:</p>\n\n<pre><code>use Data::Dumper;\n    open($fh, \"&lt;\", $file) || die \"Could not open file $file $!/n\";\n\n    while (&lt;$fh&gt;) {\n        chomp;\n        if($_ =~ /^&gt;(.+)/){\n            $group = $1; \n            $animals{$group} = \"\"; \n            next;\n\n        }\n        $animals{$group} .= $_;   \npush @{$group (keys %animals)}, $animals{$group};\n\n    }\nprint  Dumper(\\%animals);\n</code></pre>\n\n<p>When I execute it the push function does not seem to work as the output from this command is the same as when the command is absent (in the duplicate \"Mammal\" group, it will replace the cat with the dog instead of having both as arrays within the same group).</p>\n\n<p>Any suggestions as to what I am doing wrong would be highly appreciated.</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["perl", "png", "gd"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1544483754, "creation_date": 1544483754, "answer_id": 53715133, "question_id": 53715103, "link": "https://stackoverflow.com/questions/53715103/perl-gd-module-png-image-corrupt-or-cant-open/53715133#53715133", "title": "Perl GD module PNG image corrupt or cant open", "body": "<p>By default, the Windows version of Perl opens files in <code>crlf</code> mode (replacing each new line in an output stream with carriage return + new line). You don't want this to happen to your png stream, so you need to tell Perl to use <code>raw</code> mode (output raw bytes).</p>\n\n<pre><code>open IMG, \"&gt;:raw\", \"prob1.png\";\n</code></pre>\n\n<p>is one way to do that.</p>\n\n<pre><code>open IMG, \"&gt;\", \"prob1.png\";\nbinmode IMG;\n</code></pre>\n\n<p>is another. Both the <a href=\"http://metacpan.org/pod/GD\" rel=\"nofollow noreferrer\"><code>GD</code></a> and <a href=\"https://metacpan.org/pod/GD::Graph\" rel=\"nofollow noreferrer\"><code>GD::Graph</code></a> documentation calls attention to the need for <code>binmode</code> several times.</p>\n"}], "owner": {"reputation": 1, "user_id": 10378088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf93d0a3faf2157ad07c8bf93fb3fae5?s=128&d=identicon&r=PG&f=1", "display_name": "koushik ayaluri", "link": "https://stackoverflow.com/users/10378088/koushik-ayaluri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 53715133, "answer_count": 1, "score": -1, "last_activity_date": 1544483754, "creation_date": 1544483553, "question_id": 53715103, "link": "https://stackoverflow.com/questions/53715103/perl-gd-module-png-image-corrupt-or-cant-open", "title": "Perl GD module PNG image corrupt or cant open", "body": "<p>I am running Windows 10 and I've installed Perl v5.26.1, built for MSWin32-x64-multithread. Binary build 2601 [404865] provided by ActiveState.</p>\n\n<p>My problem is I want to use the GD::Graph.</p>\n\n<p>Everything looked fine. I wrote a code and did a syntax check and everything was fine. When I run the script all I get is nonsense though. I tried outputting to *.png file instead, but the file is corrupt.</p>\n\n<p>This is driving me bonkers. What am I doing wrong here? Any help would be much appreciated. The following is the code</p>\n\n<pre><code>#!usr/bin/perl -w\nuse strict;\nuse GD::Graph::area;\n# File: prob1.pl\n\nmy @x = (0, 0, 0.00759, 0.018975, 0.036053, 0.216319, 0.449715, 0.648956, \n0.815939, 0.935484, 1);\nmy @y = (0, 0.053763, 0.16129, 0.308244, 0.577061, 0.792115, 0.874552, \n0.924731, 0.964158, 0.989247, 1);\n\nmy @data = (\\@x, \\@y);\n\nmy $graph = GD::Graph::area-&gt;new(500, 300);\n\n$graph-&gt;set( x_label=&gt;'False Positive Rate', y_label=&gt;'True Positive \nRate',title=&gt;'ROC Curve') or warn $graph-&gt;error;\n\nmy $image = $graph-&gt;plot(\\@data) or die $graph-&gt;error;\n\nopen IMG, \"&gt;prob1.png\" or die \"can't open prob1.png\\n\";\nprint IMG $image-&gt;png;\nexit;\n</code></pre>\n"}, {"tags": ["perl", "accurev"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1544482387, "post_id": 53713856, "comment_id": 94284313, "body": "Do you use the perl debugger? It seems like you could step through this program yourself and see at what part the program results deviate from your expectations. Then you could narrow the question down."}, {"owner": {"reputation": 539, "user_id": 2611867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f1a868814c4ec5b37c107d99bb5299?s=128&d=identicon&r=PG", "display_name": "Mike Abusheery", "link": "https://stackoverflow.com/users/2611867/mike-abusheery"}, "edited": false, "score": 0, "creation_date": 1544538658, "post_id": 53713856, "comment_id": 94305912, "body": "What output do you actually get from running the script? You probably want to either use the debugger to look at each line of execution or to add some additional debugging output to see the contents of variables."}, {"owner": {"reputation": 71, "user_id": 7686357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b49ed62db3c09ef33fde653878d4c30?s=128&d=identicon&r=PG&f=1", "display_name": "Stacker", "link": "https://stackoverflow.com/users/7686357/stacker"}, "edited": false, "score": 0, "creation_date": 1544551605, "post_id": 53713856, "comment_id": 94313516, "body": "I was getting an output of 0, so it was failing but I solved it, I will post below"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 7686357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b49ed62db3c09ef33fde653878d4c30?s=128&d=identicon&r=PG&f=1", "display_name": "Stacker", "link": "https://stackoverflow.com/users/7686357/stacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1544552597, "last_edit_date": 1544552597, "creation_date": 1544551973, "answer_id": 53730034, "question_id": 53713856, "link": "https://stackoverflow.com/questions/53713856/export-snapshots-from-accurev-using-perl/53730034#53730034", "title": "Export Snapshots from Accurev using Perl", "body": "<p>The problem was that the AccuRev path was not working correctly so I was not getting the correct output. Since I have the AccuRev home directory listed in my envrionment variables I was able to call accurev  and save it to an XML file to be referenced in the XMLin call. \nIn addition to this, the command had to be in \"\" not '' or ``. </p>\n\n<p>Below is the end result with an additional argument to specify the date range of snapshots:</p>\n\n<pre><code>#!C:\\Strawberry\\perl\\bin\n#only tested on Windows - not supported by AccuRev\n\nuse XML::Simple qw(:strict);\nuse English qw( -no_match_vars );\nuse Data::Dumper ;\nuse strict ;\nuse Time::Piece;\n\nmy ( $login, $xml, $command, $myDepot, $myDateStart, $myDateEnd, $stream_xml, $streamNumber, $streamName, $counter, $snapTime) ;\n\n###If Accurev is already in your environment variables, you can call it without setting the path \n###otherwise uncomment and update script \n###$accurev = \"/cygdrive/c/\\\"Program Files (x86)\\\"/AccuRev/bin/accurev.exe\";\n### With AccuRev 4.5+ security, if you want to ensure you are authenticated before executing the script,\n### uncomment the following line and use a valid username and password.\n\n###$login = \"accurev login -n username password\" ;\n###system($login);\n\nchomp($myDepot = $ARGV[0]);\nchomp($myDateStart = $ARGV[1]);\nchomp($myDateEnd = $ARGV[2]);\n\nif ($myDepot eq \"\") {\n  print \"\\nUsage: perl snapshot_streams.pl &lt;depot_name&gt;\\n\" ;\n  print \"This script will return the name of the snapshot streams for the depot passed in...\\n\" ;\n  exit(1) ;\n}\n\n$command = \"accurev show -p $myDepot -fx streams &gt; snapshot_streams.xml\";\nsystem($command);\n\n$stream_xml = XMLin(\"snapshot_streams.xml\", ForceArray =&gt; 1, SuppressEmpty =&gt; '', KeyAttr =&gt; 'stream') ;\nif ($stream_xml eq \"\") {\n  print \"\\nDepot $myDepot doesn't exist...\\n\" ;\n  exit(1) ;\n}\n\nprint \"List of snapshots in depot $myDepot:\\n\";\n$counter = 0 ;\n\nforeach $stream_xml (@{$stream_xml-&gt;{stream}})\n{\n    if ($stream_xml-&gt;{type} eq \"snapshot\") {\n        $streamName =  $stream_xml-&gt;{name};\n        $snapTime = scalar localtime($stream_xml-&gt;{time});\n        my $datecheck = $snapTime-&gt;strftime('%Y%m%d');\n        if ($datecheck &gt;= $myDateStart &amp;&amp; $datecheck &lt;= $myDateEnd){\n        print \"Snapshot Name: $streamName \\t\\t\\t Time: $snapTime\\n\" ;\n        }\n        $counter = $counter + 1 ;\n    }       \n}\n\nif ( $counter == 0 ) {\n    print \"\\nNo snapshots found in depot $myDepot...\\n\" ;\n}\n</code></pre>\n\n<p>Here is the call:</p>\n\n<pre><code>perl -w snapshot.pl &lt;depot&gt; \"FromDate\" \"ToDate\" &gt; output.txt 2&gt;&amp;1\n</code></pre>\n\n<p>The output looks something like this:</p>\n\n<pre><code>List of snapshots in depot &lt;Depot_Name&gt;:\n\nSnapshot Name: Product_1_SS                  Time: Tue Jul 04 10:00:05 2018\nSnapshot Name: Product_2_SS                  Time: Tue Jul 07 11:00:15 2018\nSnapshot Name: Product_3_SS                  Time: Tue Jul 15 12:30:30 2018\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7686357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b49ed62db3c09ef33fde653878d4c30?s=128&d=identicon&r=PG&f=1", "display_name": "Stacker", "link": "https://stackoverflow.com/users/7686357/stacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544552597, "creation_date": 1544477072, "question_id": 53713856, "link": "https://stackoverflow.com/questions/53713856/export-snapshots-from-accurev-using-perl", "title": "Export Snapshots from Accurev using Perl", "body": "<p>I am trying to use a Perl script to pull out all snapshots from Accurev but I'm having issues.</p>\n\n<p>I can run this command fine on it's own</p>\n\n<pre><code>accurev show -p myDepot streams\n</code></pre>\n\n<p>This will get all the streams for me, but when I go to put it into my Perl script, I come up empty and can't pass in the argument to a for each loop.</p>\n\n<p>Here's what I have:</p>\n\n<pre><code>#!/usr/bin/perl\n#only tested on Windows - not supported by AccuRev\n\nuse XML::Simple ;\nuse Data::Dumper ;\nuse strict ;\nuse Time::Piece;\n\n### Modify to reflect your local AccuRev client path\n$::AccuRev = \"/cygdrive/c/\\\"Program Files (x86)\\\"/AccuRev/bin/accurev.exe\" ;\n\n\nmy ($myDepot, $myDate, $stream_raw, $stream_xml, $streamNumber,   $streamName, $counter, $snapTime) ;\n\n### With AccuRev 4.5+ security, if you want to ensure you are authenticated before executing the script,\n### uncomment the following line and use a valid username and password.\n\nsystem \"$::AccuRev login -n username password\" ;\n\nchomp($myDepot = $ARGV[0]);\nchomp($myDate = $ARGV[1]);\n\nif ($myDepot eq \"\") {\n  print \"\\nUsage: perl snapshot_streams.pl &lt;depot_name&gt;\\n\" ;\n  print \"This script will return the name of the snapshot streams for the depot passed in...\\n\" ;\n  exit(1) ;\n}\n\n\n$stream_raw = `$::AccuRev show -p $myDepot -fx streams`;\n$stream_xml = XMLin($stream_raw, forcearray =&gt; 1, suppressempty =&gt; '', KeyAttr =&gt; 'stream') ;\nif ($stream_xml eq \"\") {\n  print \"\\nDepot $myDepot doesn't exist...\\n\" ;\n  exit(1) ;\n}\n\nprint \"List of snapshots in depot $myDepot:\\n\";\n$counter = 0 ;\n\nforeach $stream_xml (@{$stream_xml-&gt;{stream}})\n{\n    if ($stream_xml-&gt;{type} eq \"snapshot\") {\n    $streamName =  $stream_xml-&gt;{name};\n    $snapTime = scalar localtime($stream_xml-&gt;{time});\n    my $datecheck = $snapTime-&gt;strftime('%Y%m%d');\n    if ($datecheck &gt;= $myDate){\n    print \"Snapshot Name: $streamName \\t\\t\\t Time: $snapTime\\n\" ;\n    }\n    $counter = $counter + 1 ;\n    }       \n}\n\nif ( $counter == 0 ) {\n     print \"\\nNo snapshots found in depot $myDepot...\\n\" ;\n}\n</code></pre>\n"}, {"tags": ["perl", "date", "timestamp", "last-modified"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1544473655, "post_id": 53712979, "comment_id": 94280786, "body": "No, you need <code>my $mtime = (stat(&quot;$jbossHome&#47;standalone&#47;deployments&#47;$artifactId.$packag&zwnj;&#8203;ing&quot;))[9];</code> - see <a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/stat.html</a> . Also, you&#39;re not checking a directory, you&#39;re checking the same string as above."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544474117, "post_id": 53712979, "comment_id": 94280998, "body": "um, are you sure that you get what you show, that (epoch&#39;s) timestamp in scalar context?  With <code>my $v = stat(...);</code> you should get a mere success/failure boolean (1 or <code>&#39;&#39;</code>)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544474450, "post_id": 53712979, "comment_id": 94281141, "body": "@zdim there&#39;s definitely some code in between, perhaps a <code>localtime($mtime)</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544475999, "post_id": 53712979, "comment_id": 94281809, "body": "@Grinnz Yeah, and that should be in the question, what I meant to bring up; why should we have to guess? Also, as Corion noted, they are using the same string in both samples. (What else may be missing or wrong?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544476243, "post_id": 53712979, "comment_id": 94281902, "body": "@Dave I don&#39;t mean to be rough on you but i do mean to suggest to be careful when writing and posting questions. This one&#39;s easy and you got good answers but with more complicated stuff an imprecise question usually makes it far harder to answer."}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 2, "last_activity_date": 1544489225, "last_edit_date": 1544489225, "creation_date": 1544474159, "answer_id": 53713249, "question_id": 53712979, "link": "https://stackoverflow.com/questions/53712979/how-do-i-get-the-last-modified-date-of-a-directory/53713249#53713249", "title": "How do I get the last modified date of a directory?", "body": "<p>This :</p>\n\n<pre><code>my $mtime = stat(\"$jbossHome/standalone/deployments/$artifactId.$packaging\");\n</code></pre>\n\n<p>Should be written as :</p>\n\n<pre><code>my $mtime = (stat(\"$jbossHome/standalone/deployments/$artifactId.$packaging\"))[9];\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\">perldoc stat</a>.</p>\n\n<blockquote>\n  <p><strong>stat EXPR</strong> returns a 13-element list giving the status info for a file, either the file opened via FILEHANDLE or DIRHANDLE, or named by EXPR.</p>\n</blockquote>\n\n<p>In the resulting list, mtime in 10th position (index 9).</p>\n\n<p>And also :</p>\n\n<blockquote>\n  <p>In scalar context, stat returns a boolean value indicating success or failure</p>\n</blockquote>\n\n<p>So in your code, where you evaluate in scalar context, the mtime variable is assigned a value of 1. When interpretef as a Unix timestamp, this means  1 second after January 1st, 1970.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1544474355, "creation_date": 1544474355, "answer_id": 53713290, "question_id": 53712979, "link": "https://stackoverflow.com/questions/53712979/how-do-i-get-the-last-modified-date-of-a-directory/53713290#53713290", "title": "How do I get the last modified date of a directory?", "body": "<p>You can use the core <a href=\"https://perldoc.pl/File::stat\" rel=\"nofollow noreferrer\">File::stat</a> to get a much nicer interface to the stat fields.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::stat;\nmy $stat = stat($filename) or die \"stat $filename failed: $!\";\nmy $mtime = $stat-&gt;mtime;\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "accepted_answer_id": 53713249, "answer_count": 2, "score": 0, "last_activity_date": 1544489225, "creation_date": 1544472901, "question_id": 53712979, "link": "https://stackoverflow.com/questions/53712979/how-do-i-get-the-last-modified-date-of-a-directory", "title": "How do I get the last modified date of a directory?", "body": "<p>I'm using 5.16.3.  How do I get the last modified timestamp of a directory?  With a file, I can run</p>\n\n<pre><code>    my $deployFile = \"$jbossHome/standalone/deployments/$artifactId.$packaging\";\n    open my $fh, '&gt;', $deployFile or die(\"File does not exist.\");\n    my $mtime = (stat ($fh))[9]; \n</code></pre>\n\n<p>I tried this logic with a directory, </p>\n\n<pre><code>my $mtime = stat(\"$jbossHome/standalone/deployments/$artifactId.$packaging\");\n</code></pre>\n\n<p>but the result is always</p>\n\n<pre><code>Thu Jan  1 00:00:01 1970\n</code></pre>\n\n<p>even though I can tell on the server that the last modified time stamp of the directory is this weekend.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 11, "last_activity_date": 1544453698, "creation_date": 1544453698, "answer_id": 53708185, "question_id": 53707913, "link": "https://stackoverflow.com/questions/53707913/sub-sample-an-array-with-an-index-array/53708185#53708185", "title": "sub sample an array with an index array", "body": "<p>Use an array slice.</p>\n\n<p>A slice will return the elements of <code>@data</code> in <code>@indexes</code> order</p>\n\n<pre><code>@res = @data[@indexes]\n</code></pre>\n\n<p>Note the <code>@</code> before <code>data</code> this tells Perl to return a list where as </p>\n\n<pre><code>@res = $data[@indexes]\n</code></pre>\n\n<p>takes the length of <code>@indexes</code> as the element of <code>@data</code> to return</p>\n"}], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 53708185, "answer_count": 1, "score": 2, "last_activity_date": 1544455407, "creation_date": 1544452788, "last_edit_date": 1544455407, "question_id": 53707913, "link": "https://stackoverflow.com/questions/53707913/sub-sample-an-array-with-an-index-array", "title": "sub sample an array with an index array", "body": "<p>Consider having a large array <code>@data</code>.\nAdditionally there is some array <code>@indexes</code> that contains indexes to data (consider <code>$indexes[n] &lt; @data</code> to be guaranteed for each n).</p>\n\n<p>Is there a simple expression to retrieve the result array</p>\n\n<pre><code>my @res;\nforeach my $ind (@indexes){\n  push(@res, $data[$ind]);\n}\n</code></pre>\n\n<p>e.g. (not working):</p>\n\n<pre><code>my @res = $data[@indexes];\n</code></pre>\n\n<p>is there something?</p>\n"}, {"tags": ["perl", "encoding", "excel-writer-xlsx"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1544452169, "post_id": 53707686, "comment_id": 94269928, "body": "I&#39;m not sure if this will work, but try encoding the output as <code>utf16-le</code>  which is Windows native encoding"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 1, "creation_date": 1544452178, "post_id": 53707686, "comment_id": 94269933, "body": "Perl asumes that source code is Latin-1. So the string &quot;&#228;&#246;&#252;.xlsx&quot; is interpreted as Latin-1."}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1544452336, "post_id": 53707686, "comment_id": 94270013, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/627661/how-can-i-output-utf-8-from-perl\">How can I output UTF-8 from Perl?</a>"}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1544452388, "post_id": 53707686, "comment_id": 94270037, "body": "I add <code>use open &#39;:std&#39;, &#39;:encoding(utf16-le)&#39;;</code>and got <code>\u251c &#241; \u251c &#194; \u251c \u255d . x l s x</code>."}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1544452448, "post_id": 53707686, "comment_id": 94270068, "body": "That affects the content not the name of the file. See here: <a href=\"https://perldoc.perl.org/utf8.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/utf8.html</a>"}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1544452998, "post_id": 53707686, "comment_id": 94270406, "body": "Also <code>binmode(STDOUT, &quot;:utf8&quot;);</code> does not fix the problem."}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1544453707, "post_id": 53707686, "comment_id": 94270849, "body": "<code>use utf8; $excel_name = encode(&#39;latin1&#39;,$excel_name);</code> does not fix the problem. Tried also with: latin-1, utf16-le."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1544457577, "post_id": 53707686, "comment_id": 94273028, "body": "The Windows APIs that Perl uses assume Latin-1 filename encodings,while parts of the world think that filenames must represent UTF-8 octets and other parts think you need to use the appropriate Win32 <code>*W</code> APIs to get at the properly encoded filenames. Your script is bad because likely your script was saved as <code>UTF-8</code> but you do not specify the encoding of the script in the source code. If you really want to create filenames outside the 7-bit ASCII range on Windows, see <a href=\"https://www.perlmonks.org/?node_id=1162804\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1162804</a> , <a href=\"https://metacpan.org/pod/Win32::File\" rel=\"nofollow noreferrer\">metacpan.org/pod/Win32::File</a> and <a href=\"https://metacpan.org/pod/Win32::LongPath\" rel=\"nofollow noreferrer\">metacpan.org/pod/Win32::LongPath</a>"}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544463094, "post_id": 53707686, "comment_id": 94275997, "body": "@Corion Thanks for these informations. At the end I found the solution <a href=\"http://perl.mines-albi.fr/perl5.8.5/5.8.5/utf8.html\" rel=\"nofollow noreferrer\">here</a>: <code>use utf8; decode($excel_name);</code>. This gives me the desired Excel-file. The output on the console remains cryptic."}, {"owner": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "edited": false, "score": 1, "creation_date": 1544465712, "post_id": 53707686, "comment_id": 94277163, "body": "A lot of Win32 perl modules do not support unicode in file names because they use ANSI Windows API. But in your case, package should use COM to work with Excel and Windows API uses utf16-le for unicode support as was mentioned above, so try to pass file name encoded in utf16-le"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544459821, "creation_date": 1544452020, "last_edit_date": 1544459821, "question_id": 53707686, "link": "https://stackoverflow.com/questions/53707686/perl-excelwriter-create-excel-with-umlaut", "title": "Perl Excel::Writer: create Excel with umlaut", "body": "<p>I try to create an Excel-file with perl and <code>Excel::Writer::XLSX</code> with an Excel-name which contains umlauts, but do not succeed.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Excel::Writer::XLSX;\n\nmy $excel_name = \"\u00e4\u00f6\u00fc.xlsx\";\nprint \"\\n$excel_name\\n\";\n\nmy $workbook  = Excel::Writer::XLSX-&gt;new( $excel_name );\n$workbook-&gt;close;\n</code></pre>\n\n<p>The Excel-file I got is named: <code>\u00c3\u00a4\u00c3\u00b6\u00c3\u00bc.xlsx</code>. Also if I print the name on STDOUT the output has strange symbols: <code>\u251c\u00e2\u252c\u00f1\u251c\u00e2\u252c\u00c2\u251c\u00e2\u252c\u255d.xlsx</code>.</p>\n\n<p>When I print the name in a text file:</p>\n\n<pre><code>make_excel.pl &gt;test.txt\n</code></pre>\n\n<p>the text-file contains the correct output <code>\u00e4\u00f6\u00fc.xlsx</code> and has utf-8 encoding (determined with Notepad++).</p>\n\n<p>The working environment is, Windows 7, active codepage is cp950 and perl version 5.28 (Strawberry).</p>\n\n<p>I tried using (among a lot of others):</p>\n\n<pre><code>use open ':std', ':encoding(cp850)';\n</code></pre>\n\n<p>but it does not gives the desired output.</p>\n\n<p>Does anyone have an idea how I can get an Excel-file with umlaut? </p>\n\n<p>Update 1:\nThe code is UTF-8 (according to Notepad++ and Emacs <code>C-h v buffer-file-coding-system RET</code>)</p>\n"}, {"tags": ["perl", "hash", "hashmap"], "answers": [{"tags": [], "owner": {"reputation": 452, "user_id": 1909072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afbab10abf613abcb9e509f763c35c2a?s=128&d=identicon&r=PG", "display_name": "Vivek Pabani", "link": "https://stackoverflow.com/users/1909072/vivek-pabani"}, "is_accepted": true, "score": 3, "last_activity_date": 1544451447, "creation_date": 1544451447, "answer_id": 53707557, "question_id": 53707464, "link": "https://stackoverflow.com/questions/53707464/mapping-array-additionally-to-existing-hash-in-perl/53707557#53707557", "title": "Mapping array additionally to existing hash in Perl", "body": "<p>Try:</p>\n\n<pre><code>%existing_hash = (%existing_hash, map { $_ =&gt; 1 } @new_elements);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 5612947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/87015e9f060914356d4a66154b5a6722?s=128&d=identicon&r=PG&f=1", "display_name": "haru", "link": "https://stackoverflow.com/users/5612947/haru"}, "edited": false, "score": 0, "creation_date": 1544459364, "post_id": 53709080, "comment_id": 94273988, "body": "Your first solution works well too and looks simple, thanks for great idea."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1544456867, "creation_date": 1544456867, "answer_id": 53709080, "question_id": 53707464, "link": "https://stackoverflow.com/questions/53707464/mapping-array-additionally-to-existing-hash-in-perl/53709080#53709080", "title": "Mapping array additionally to existing hash in Perl", "body": "<p>I think I'd do it the simple way:</p>\n\n<pre><code>$existing_hash{$_} = 1 for @new_elements;\n</code></pre>\n\n<p>But you could also use a hash slice:</p>\n\n<pre><code>@existing_hash{@new_elements} = (1) x @new_elements;\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 5612947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/87015e9f060914356d4a66154b5a6722?s=128&d=identicon&r=PG&f=1", "display_name": "haru", "link": "https://stackoverflow.com/users/5612947/haru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 53707557, "answer_count": 2, "score": 0, "last_activity_date": 1544456867, "creation_date": 1544451087, "question_id": 53707464, "link": "https://stackoverflow.com/questions/53707464/mapping-array-additionally-to-existing-hash-in-perl", "title": "Mapping array additionally to existing hash in Perl", "body": "<p>How can I add elements in existing hash like push in array but using mapping?</p>\n\n<p>If I do:</p>\n\n<pre><code>%existing_hash = map { $_ =&gt; 1 } @new_elements;\n</code></pre>\n\n<p>This resets the %existing_hash.</p>\n"}, {"tags": ["perl", "syntax", "language-lawyer", "punctuation", "bareword"], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 1, "last_activity_date": 1544452829, "creation_date": 1544452829, "answer_id": 53707927, "question_id": 53707424, "link": "https://stackoverflow.com/questions/53707424/why-are-leading-hyphen-options-permitted-on-use-lines-without-fat-comma-and-wi/53707927#53707927", "title": "Why are leading-hyphen options permitted on `use` lines without fat comma and with strict?", "body": "<p>From <code>perlop</code></p>\n\n<p><strong>Symbolic Unary Operators</strong></p>\n\n<p>Unary \"-\" performs arithmetic negation if the operand is numeric, including any\nstring that looks like a number. If the operand is an identifier, a string\nconsisting of a minus sign concatenated with the identifier is returned.\nOtherwise, if the string starts with a plus or minus, a string starting with\nthe opposite sign is returned. <em>One effect of these rules is that -bareword is\nequivalent to the string \"-bareword\".</em> If, however, the string begins with a \nnon-alphabetic character (excluding \"+\" or \"-\"), Perl will attempt to convert\nthe string to a numeric and the arithmetic negation is performed. If the string\ncannot be cleanly converted to a numeric, Perl will give the warning Argument\n\"the string\" isn't numeric in negation (-) at ....</p>\n\n<p>So because of the rules of Perl parsing -name is treated as \"-name\" even under <code>use strict</code></p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1544457233, "post_id": 53707937, "comment_id": 94272798, "body": "barewords as the target of method invocations should be quoted.  <code>Foo-&gt;bar</code> is <i>not</i> <code>&#39;Foo&#39;-&gt;bar</code> if a sub Foo exists, it is <code>Foo()-&gt;bar</code>.  You should use <code>Foo::-&gt;bar</code> or <code>&#39;Foo&#39;-&gt;bar</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1544457720, "post_id": 53707937, "comment_id": 94273111, "body": "also note <code>-Foo&#39;Bar</code> becomes &quot;-Foo::Bar&quot; - but unlike <code>-Foo::Bar</code>, gives a bareword error unless package Foo exists.  this (unlike the basic well documented concept of - implicitly quoting) is arguably buggy"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 4, "last_activity_date": 1544476036, "last_edit_date": 1544476036, "creation_date": 1544452849, "answer_id": 53707937, "question_id": 53707424, "link": "https://stackoverflow.com/questions/53707424/why-are-leading-hyphen-options-permitted-on-use-lines-without-fat-comma-and-wi/53707937#53707937", "title": "Why are leading-hyphen options permitted on `use` lines without fat comma and with strict?", "body": "<p>You already cited <a href=\"https://perldoc.perl.org/perlop.html#Symbolic-Unary-Operators\" rel=\"nofollow noreferrer\"><code>perldoc perlop</code></a>, but it is relevant here.</p>\n\n<blockquote>\n  <p>Unary <code>-</code> performs arithmetic negation if the operand is numeric, including any string that looks like a number. If the operand is an identifier, a string consisting of a minus sign concatenated with the identifier is returned. ...  One effect of these rules is that <code>-bareword</code> is equivalent to the string <code>\"-bareword\"</code>.</p>\n</blockquote>\n\n<p>This behavior of the unary minus operator is applied to the bareword <em>before the <code>strict</code> checks are applied</em>. Therefore, unary minus is a kind of quoting operator that also works in strict mode.</p>\n\n<p>Similarly, barewords as the invocant in method invocation do not need to be quoted as long as they are not a function call:</p>\n\n<pre><code>Foo-&gt;bar;    # 'Foo'-&gt;bar(); --- but only if no sub Foo exists\nprint-&gt;bar;  # print($_)-&gt;bar();\n</code></pre>\n\n<p>However, the unary minus behaviour seems to be due to constant folding, not due to a special case in the parser. For example, this code</p>\n\n<pre><code>use strict;\n0 ? foo : bar;\n</code></pre>\n\n<p>will only complain about the bareword \"bar\" being disallowed, suggesting that the bareword check happens very late during parsing and compilation. In the unary minus case, the bareword will already have been constant-folded into a proper string value at that point, and no bareword remains visible.</p>\n\n<p>While this is arguably buggy, it is also impossible to change without breaking backwards compatibility \u2013 and this behaviour is used by many modules such as <code>use parent</code> to communicate options. Compare also similar idioms on command line interfaces, where options usually begin with a dash.</p>\n"}], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 53707937, "answer_count": 2, "score": 3, "last_activity_date": 1544476036, "creation_date": 1544450940, "last_edit_date": 1544452093, "question_id": 53707424, "link": "https://stackoverflow.com/questions/53707424/why-are-leading-hyphen-options-permitted-on-use-lines-without-fat-comma-and-wi", "title": "Why are leading-hyphen options permitted on `use` lines without fat comma and with strict?", "body": "<p>Why is the following <code>use</code> line legal Perl syntax?  (Adapted from the POD for <a href=\"https://metacpan.org/pod/parent#DESCRIPTION\" rel=\"nofollow noreferrer\">parent</a>; tested on Perl 5.26.2 x64 on Cygwin.)</p>\n\n<pre><code>package MyHash;\nuse strict;\nuse Tie::Hash;\nuse parent -norequire, \"Tie::StdHash\";\n       #   ^^^^^^^^^^ A bareword with nothing to protect it!\n</code></pre>\n\n<p>Under <code>-MO=Deparse</code>, the <code>use</code> line becomes</p>\n\n<pre><code>use parent ('-norequire', 'Tie::StdHash');\n</code></pre>\n\n<p>but I can't tell from the <a href=\"https://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\"><code>use</code> docs</a>  where the quoting on <code>-norequire</code> comes from.</p>\n\n<ul>\n<li><p>If <code>use strict</code> were not in force, I would understand it.  The bareword <code>norequire</code> would <a href=\"https://perlmaven.com/barewords-in-perl\" rel=\"nofollow noreferrer\">become the string</a> <code>\"norequire\"</code>, the <a href=\"https://perldoc.perl.org/perlop.html#Symbolic-Unary-Operators\" rel=\"nofollow noreferrer\">unary minus</a> would turn that string into <code>\"-bareword\"</code>, and the resulting string would go into the <code>use</code> import list.  For example:</p>\n\n<pre><code>package MyHash;\nuse Tie::Hash;\nuse parent -norequire, \"Tie::StdHash\";\n</code></pre></li>\n<li><p>Similarly, if there were a fat comma, I would understand it.  <code>-foo =&gt; bar</code> becomes <code>\"-foo\", bar</code> because <code>=&gt;</code> <a href=\"https://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\">turns <code>foo</code> into <code>\"foo\"</code></a>, and then the unary minus works its magic again.  For example:</p>\n\n<pre><code>package MyHash;\nuse strict;\nuse Tie::Hash;\nuse parent -norequire =&gt; \"Tie::StdHash\";\n</code></pre></li>\n</ul>\n\n<p>Both of those examples produce the same deparse for the <code>use</code> line.  However, both have quoting that the original example does not.  What am I missing that makes the original example (with <code>strict</code>, without <code>=&gt;</code>) legal?  Thanks!</p>\n"}, {"tags": ["regex", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544449248, "post_id": 53706822, "comment_id": 94268265, "body": "Can you please <a href=\"https://stackoverflow.com/posts/53706822/edit\">edit</a> your post and add the (Perl) code you&#39;ve already written? Most likely, you&#39;re better served by using <code>gcc</code> in preprocessor mode to expand your macros, but if you only (and exactly) want to expand <i>this</i> macro, a oneliner like <code>perl -pie &#39;s&#47;\\bARRAY\\(\\s*(\\w+)\\s*,\\s*(\\w+)\\s*,\\s*(\\w+)\\s*\\)&#47;$1 $3[$2]&#47;g&#39; *.c</code> might do it already, provided the macro invocation is always on a single line and the types itself are simple identifiers."}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1544449662, "post_id": 53706822, "comment_id": 94268528, "body": "Things quickly become complicated if you have stuff like <code>ARRAY(Ctype&lt;foo,bar&gt;,C_LEN,cname)</code> (notice the happy &lt;comma&gt; sitting between <code>foo</code> and <code>bar</code>)"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544450553, "post_id": 53706822, "comment_id": 94269033, "body": "... but hopefully, your C code is simple and/or you can manually edit the remaining cases. A solution that expands 80% of the <code>ARRAY</code> macro is still better than editing those 640 lines yourself..."}, {"owner": {"reputation": 139, "user_id": 1042402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/hJixX.png?s=128&g=1", "display_name": "RobbyChaps", "link": "https://stackoverflow.com/users/1042402/robbychaps"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544451475, "post_id": 53706822, "comment_id": 94269536, "body": "Thanks @Corion I created a quick test file to experiment with this command. It contains(Test.txt):  <code>ARRAY( uint8_t, BAR_LEN, Bar1);</code>     <code>ARRAY(uint8_t,BAR_LEN,Bar2);</code>   <code>ARRAY(uint8_t, BAR_LEN,Bar3);</code>   <code>ARRAY(uint8_t,BAR_LEN, Bar4);</code>    When I ran the following command:  <code>perl -i -pe &#39;s&#47;\\bARRAY\\(\\s*(\\w+)\\s*,\\s*(\\w+)\\s*,\\s*(\\w+)\\s*\\)&#47;$1 $3[$2]&#47;g&#39; Test.txt</code>  The result is:  <code>uint8_t ;</code> <code>uint8_t ;</code> <code>uint8_t ;</code> <code>uint8_t ;</code>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544451827, "post_id": 53706822, "comment_id": 94269734, "body": "Can you please <a href=\"https://stackoverflow.com/posts/53706822/edit\">edit</a> your post and add the test file. Most likely you need <code>perl -i -pe &#39;s&#47;\\bARRAY\\(\\s*(\\w+)\\s*,\\s*(\\w+)\\s*,\\s*(\\w+)\\s*\\)&#47;$1 $3\\[$2\\]&#47;g&#39; Test.txt</code> or maybe you need to double the backslashes for your shell or somehing like that. If you post the example file in your question, I can try things myself."}, {"owner": {"reputation": 139, "user_id": 1042402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/hJixX.png?s=128&g=1", "display_name": "RobbyChaps", "link": "https://stackoverflow.com/users/1042402/robbychaps"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544452883, "post_id": 53706822, "comment_id": 94270341, "body": "Awesome @Corion, I updated my question. Instead of hosting the file somewhere I just pasted its contents as it was only a few lines of text. I also added a quick link just to show an example of the c declarations."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544455038, "post_id": 53706822, "comment_id": 94271592, "body": "Ah - I had the command line switches a bit mixed up. The following works for me (under <code>bash</code>): <code>perl -pi -e &#39;s&#47;\\bARRAY\\(\\s*(\\w+)\\s*,\\s*(\\w+)\\s*,\\s*(\\w+)\\s*\\)&#47;$1 $3\\[$2\\]&#47;g&#39;</code>"}, {"owner": {"reputation": 139, "user_id": 1042402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/hJixX.png?s=128&g=1", "display_name": "RobbyChaps", "link": "https://stackoverflow.com/users/1042402/robbychaps"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544459850, "post_id": 53706822, "comment_id": 94274276, "body": "Thank you @Corion, your solution worked perfectly. If you want, you can convert your comment to an answer so I can accept your approach."}], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 1, "last_activity_date": 1544468595, "creation_date": 1544468595, "answer_id": 53712025, "question_id": 53706822, "link": "https://stackoverflow.com/questions/53706822/replacing-array-macro-with-regex/53712025#53712025", "title": "Replacing array macro with regex", "body": "<p>Most likely, you're better served by using gcc in preprocessor mode to expand your macros, but if you only (and exactly) want to expand this macro, the following oneliner might do it already, provided the macro invocation is always on a single line and the types itself are simple identifiers as in your example.</p>\n\n<pre><code>perl -pi -e 's/\\bARRAY\\(\\s*(\\w+)\\s*,\\s*(\\w+)\\s*,\\s*(\\w+)\\s*\\)/$1 $3\\[$2\\]/g' *.c\n</code></pre>\n\n<p>This outputs for your test data:</p>\n\n<pre><code>uint8_t Bar1[16];\nuint8_t Bar2[4];\nuint8_t Bar3[18];\nuint8_t Bar4[2];\n</code></pre>\n\n<p>Another approach would be to run <code>gcc -E</code>, but that will expand all <code>#include</code>s as well.</p>\n"}], "owner": {"reputation": 139, "user_id": 1042402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/hJixX.png?s=128&g=1", "display_name": "RobbyChaps", "link": "https://stackoverflow.com/users/1042402/robbychaps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53712025, "answer_count": 1, "score": 0, "last_activity_date": 1544468595, "creation_date": 1544448950, "last_edit_date": 1544452754, "question_id": 53706822, "link": "https://stackoverflow.com/questions/53706822/replacing-array-macro-with-regex", "title": "Replacing array macro with regex", "body": "<p>I wanted to remove a macro in one of the projects I\u2019ve been working on, and it will required a script to do it as there\u2019s 800+ occurrences in the c/cpp source. Note that although this macro appears in cpp files, the declarations and types are all plain c.</p>\n\n<p>The macro in question looks like this:</p>\n\n<pre><code>#define ARRAY(data_type, size, array_name) data_type array_name[size]\n</code></pre>\n\n<p>When it\u2019s used in source, it looks like this:</p>\n\n<pre><code>#define BAR_LEN 2\n\nstruct Foo_t\n{\n   uint16_t example;\n   ARRAY(uint8_t, BAR_LEN, Bar);  //&lt;-- This line\n   uint8_t target;\n};\n</code></pre>\n\n<p>Now, I can list all the source files </p>\n\n<pre><code>find . -regextype egrep -regex '.*/.*\\.(h|c|cpp)' -print0\n</code></pre>\n\n<p>And potentially pipe them into xargs for use with another utility like awk or sed. The problem is, I\u2019m not sure which direction to take. Using the example above, my goal is to convert:</p>\n\n<pre><code>struct Foo_t\n{\n   uint16_t example;\n   ARRAY(uint8_t, BAR_LEN, Bar); //&lt;-- This line\n   uint8_t target;\n};\n</code></pre>\n\n<p>To</p>\n\n<pre><code>struct Foo_t\n{\n   uint16_t example;\n   uint8_t Bar[BAR_LEN];  //&lt;-- This line\n   uint8_t target;\n};\n</code></pre>\n\n<p>However, there\u2019s many declarations that use that macro, which pass different parameters for each call. Also, the macro usage has formatting variations in terms of spacing. I'm a bit stumped at the moment, any direction would be greatly appreciated. Thanks!</p>\n\n<p><strong>Update:</strong>  </p>\n\n<p>For testing purposes, I created a Test.txt file to test the commands against, all it contains is the following 4 lines:</p>\n\n<pre><code>ARRAY( uint8_t, 16, Bar1);\nARRAY(uint8_t,4,Bar2);\nARRAY(uint8_t, 18,Bar3);\nARRAY(uint8_t,2, Bar4);\n</code></pre>\n\n<p>The actual usage can be found in the link below:  </p>\n\n<p><a href=\"https://onlinegdb.com/Skpstxn1N\" rel=\"nofollow noreferrer\">https://onlinegdb.com/Skpstxn1N</a></p>\n"}, {"tags": ["linux", "windows", "perl", "sql-insert", "query-performance"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544437402, "post_id": 53701786, "comment_id": 94261924, "body": "So <code>Feb</code> is converted to <code>02</code>, but what about March?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1544457342, "post_id": 53701786, "comment_id": 94272865, "body": "What is the problem or question?"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544461748, "post_id": 53701786, "comment_id": 94275313, "body": "my question is how to put thousand line in one time"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544612412, "post_id": 53701786, "comment_id": 94335593, "body": "Not sure why this was closed as unclear. The OP is asking how to add multiple rows as one transaction, and the answer covers that."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544435371, "post_id": 53702636, "comment_id": 94260867, "body": "thanks, i have this message  DBD::mysql::st execute failed: called with 1 bind variables when 0 are needed at test_request.pl line 104, &lt;FILE&gt; line 1. DBD::mysql::st execute failed: called with 1 bind variables when 0 are needed at test_request.pl line 104, &lt;FILE&gt; line 1. Issuing rollback() due to DESTROY without explicit disconnect() of DBD::mysql::db handle database=slow_transdb;host=ip at test_requ"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544437896, "post_id": 53702636, "comment_id": 94262178, "body": "@dfg ert, That error doesn&#39;t come from GMB&#39;s code. GMB&#39;s code provides 3 values when 3 are needed (not 0 and 1 as you claim)"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544438072, "post_id": 53702636, "comment_id": 94262277, "body": "i have new message @ikegami  DBD::mysql::st execute failed: called with 3 bind variables when 0 are needed at test_request.pl line 96, &lt;FILE&gt; line 1. DBD::mysql::st execute failed: called with 3 bind variables when 0 are needed at test_request.pl line 96, &lt;FILE&gt; line 1. Issuing rollback() due to DESTROY without explicit disconnect()"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544438186, "post_id": 53702636, "comment_id": 94262339, "body": "Still not coming from GBD&#39;s code. The error means the query you are using has no <code>?</code> in it, but you are passing three arguments to <code>execute</code>. In GBD&#39;s code, there are three <code>?</code> in the query, and three arguments are passed to <code>execute</code>."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544438787, "post_id": 53702636, "comment_id": 94262680, "body": "i use 3 argument, i don&#39;t know why that put the message. $sth-&gt;execute(&quot;$word5-$word2-$word3 $word4&quot;, $word11, $word13);"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544438920, "post_id": 53702636, "comment_id": 94262746, "body": "You are probably not using the query I gave you - yours has no bind parameters at all, hence the error. Look at your <code>prepare</code> statement...PS : thanks @ikegami !"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544438960, "post_id": 53702636, "comment_id": 94262777, "body": "@dfg ert, I know you are passing three arguments to <code>execute</code>. I said you were. The problem is that there are no placeholders (<code>?</code>) in the query you are executing."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544439047, "post_id": 53702636, "comment_id": 94262825, "body": "my prepare statement work well my $sth = $dbh-&gt;prepare(&quot;INSERT INTO <code>test_querry</code> (time, cstep, time_in_seconde) VALUES(&#39;$word5-$word2-$word3 $word4&#39;, $word11, $word13);&quot;);"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544439690, "post_id": 53702636, "comment_id": 94263180, "body": "As explained by @ikegami, this is not the query <code>INSERT query I gave you (mine has 3 </code>?` in it, yours has none). Please properly copy the code in my answer, then test it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544439787, "post_id": 53702636, "comment_id": 94263232, "body": "@dfg ert, It only <i>appears</i> to work well, but actually suffers from a nasty code injection bug. GMB fixed this by switching to using placeholders, and you should do the same."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544448494, "post_id": 53702636, "comment_id": 94267827, "body": "@GMB your code work but that not commit my 80000 line in one commit, your code execute one line by one line so its slow"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1544458242, "post_id": 53702636, "comment_id": 94273386, "body": "Updated my answer to demonstrate the use of DBI&#39;s <code>execute_array</code> method, that performs bulk database operations"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544461633, "post_id": 53702636, "comment_id": 94275240, "body": "@gmb i have this message : DBD::mysql::st execute_array failed: ArrayTupleFetch &#39;ARRAY(0x2129868)&#39; is not a code ref or statement handle at test_request.pl line 91, &lt;$file&gt; line 83098.  Use of uninitialized value $words[12] in substitution (s///) at test_request.pl line 15, &lt;$file&gt; line 33761. Use of uninitialized value $words[12] in numeric gt (&gt;) at test_request.pl line 17, &lt;$file&gt; line 33761. Use of uninitialized value $words[4] in concatenation (.) or string at test_request.pl line 86, &lt;$file&gt; line 33761."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544525381, "post_id": 53702636, "comment_id": 94298485, "body": "@GMB do you have any idea ?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1544548919, "post_id": 53702636, "comment_id": 94312196, "body": "@dfgert : I updated my answer, please check"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 3, "last_activity_date": 1546347761, "last_edit_date": 1546347761, "creation_date": 1544433704, "answer_id": 53702636, "question_id": 53701786, "link": "https://stackoverflow.com/questions/53701786/add-eight-thousand-line-in-one-commit/53702636#53702636", "title": "Add eight thousand line in one commit", "body": "<p>For better performance, you want to simplify your code and move as many code as possible out of the loop :</p>\n\n<ul>\n<li><p><code>prepare</code> the statement out of the loop, using bind parameters : the statement is always the same, only bind parameters get to change</p></li>\n<li><p><code>commit</code> out of the loop : this will increase performance and also has the advantage of making your process <em>atomic</em>. As all changes occur within the same database transaction, either all lines will be processed (and commited), or, if a failure occurs on any line, no line at all will be commited. While implementing this optimization you need to watch for resource usage on your database (this will typically require more space in the <code>UNDO</code> tablespace) ; if resources are not enough, either increase them or commit every Nth record (with <code>N</code> being as high as possible)</p></li>\n<li><p>avoid <code>print</code>ing inside the loop unless your really need it (I commented that line)</p></li>\n<li><p>you are building a connection with <code>RaiseError</code> attribute enabled, but then you ignore errors that can occur at <code>execute</code>. If this is really what you want, then just disable the <code>RaiseError</code> attribute on the statement handler, and remove the <code>eval</code> around <code>execute</code></p></li>\n</ul>\n\n<p>Other considerations in terms of coding practices :</p>\n\n<ul>\n<li><p>always <code>use strict</code> and <code>use warnings</code></p></li>\n<li><p>use an array to store parsed data instead of a list of scalars : <em>could</em> make your code faster and <em>will</em> make it more readable</p></li>\n</ul>\n\n<p>Code :</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# Connect to the database.\nmy $dbh = DBI-&gt;connect(\n    \"DBI:mysql:database=DB;host=&gt;IP\",\n    \"hostname\", 'password',\n    {'RaiseError' =&gt; 1,'AutoCommit'=&gt; 0}\n);\n\n# prepare the insert statement\nmy $sth = $dbh-&gt;prepare(\"INSERT INTO `test_query` (time, cstep, time_in_seconde) VALUES(?, ?, ?)\");\n$sth-&gt;{RaiseError} = 0;\n\nopen (my $file, 'file.log') or die \"could not open : $!\";\nwhile (&lt;$file&gt;) {\n    my @words = split / /;\n    $words[12] =~ s/[^\\d.]//g;\n    if ($words[1] eq \"Feb\") {\n            $words[1] = \"02\" ;\n    }\n\n    # print \"'$words[4]-$words[1]-$words[2] $words[3]', $words[10], $words[12] \\n\";\n    $sth-&gt;execute( \"$words[4]-$words[1]-$words[2] $words[3]\", $words[10], $words[12] );\n\n}\n\n$dbh-&gt;commit;\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>The last solution, that would probably perform even faster than this one, is to use <a href=\"https://metacpan.org/pod/DBI#execute_array\" rel=\"nofollow noreferrer\">DBI method <code>execute_array</code></a> to perform bulk database inserts. Attribute <code>ArrayTupleFetch</code> can be used to provide a code reference that DBI will invoke everytime it is ready to perform the next <code>INSERT</code> : this code reference should read the next file line and provide an array reference of values suitable for <code>INSERT</code>. When the file is exhausted, the sub should return undef, which will indicate DBI that the bulk process is completed.</p>\n\n<p>Code :</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse strict;\nuse warnings;\nuse DBI;\n\n# open the file\nopen (my $file, 'log.file') or die \"could not open : $!\";\n\n# connect the database\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:database=DB;host=ip\", \"hostname\", 'password', {'RaiseError' =&gt; 1,'AutoCommit'=&gt; 0});\n\n# prepare the INSERT statement\nmy $sth = $dbh-&gt;prepare(\"INSERT INTO `test_query` (time, cstep, time_in_seconde) VALUES(?, ?, ?)\");\n\n# run bulk INSERTS\nmy $tuples = $sth-&gt;execute_array({ \n    ArrayTupleStatus =&gt; \\my @tuple_status,\n    ArrayTupleFetch =&gt; sub {\n        my $line = &lt;$file&gt;;\n        return unless $line;\n        my @words = split / /;\n        # ... do anything you like with the array, then ...\n        return [ \"$words[4]-$words[1]-$words[2] $words[3]\", $words[10], $words[12] ];\n    }\n});\n\nif ($tuples) {\n    print \"Successfully inserted $tuples records\\n\";\n} else {\n    # do something usefull with @tuple_status, that contains the detailed results\n}\n\n$dbh-&gt;commit;\n$dbh-&gt;disconnect;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1544458769, "accepted_answer_id": 53702636, "answer_count": 1, "score": -1, "last_activity_date": 1600903212, "creation_date": 1544429774, "last_edit_date": 1600903212, "question_id": 53701786, "link": "https://stackoverflow.com/questions/53701786/add-eight-thousand-line-in-one-commit", "closed_reason": "Needs details or clarity", "title": "Add eight thousand line in one commit", "body": "<p>I have a log file, perl script who took the log file and transcript the log file, i want to send this all line (eight thousand line) in one commit</p>\n\n<p>my script:</p>\n\n<pre><code># Connect to the database.\nmy $dbh = DBI-&gt;connect(\n    \"DBI:mysql:database=DB;host=&gt;IP\",\n    \"hostname\", 'password',\n    {'RaiseError' =&gt; 1,'AutoCommit'=&gt; 0}\n);\n\n    open (FILE, 'file.log');\n    while (&lt;FILE&gt;) {\n\n        ($word1, $word2, $word3, $word4, $word5, $word6, $word7, $word8, $word9, $word10, $word11, $word12, $word13, $word14) = split(\" \");\n\n        $word13 =~ s/[^\\d.]//g;\n        if ($word2 eq \"Feb\") {\n                $word2 = \"02\"  \n        }\n\n        print \"'$word5-$word2-$word3 $word4', $word11, $word13 \\n\";\n\n        eval {\n            #on peut utiliser insert mais il y aura des doublons et ici on est dans une table unique\n            my $sth = $dbh-&gt;prepare(\"INSERT INTO `test_query` (time, cstep, time_in_seconde) VALUES('$word5-$word2-$word3 $word4', $word11, $word13);\");\n\n            #print $sth-&gt;rows . \" rows found.\\n\";\n            #$sth-&gt;finish;          \n\n            # do inserts, updates, deletes, queries here\n            #$sth-&gt;execute() or die \"execution failed: $dbh-&gt;errstr()\";\n            $sth-&gt;execute() or die \"execution failed: $dbh-&gt;errstr()\";\n            $dbh-&gt;commit();\n\n        };\n\n        ### If something went wrong...\n\n    }\n}\n\n$dbh-&gt;disconnect();\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["sqlite", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1544431290, "post_id": 53701766, "comment_id": 94258764, "body": "Comparing to NULL is always false when using <code>=</code>. Using <code>IS</code>, however, will be true if both expressions are NULL."}, {"owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544431797, "post_id": 53701766, "comment_id": 94258992, "body": "Oh. That simple. Thank you. It works."}], "owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544429699, "creation_date": 1544429699, "question_id": 53701766, "link": "https://stackoverflow.com/questions/53701766/sqlite-duplicates-null-perl", "title": "SQLite Duplicates NULL Perl", "body": "<p>I use the following code in Perl to find duplicates in my SQLite database on the basis of 5 columns (Term1 to Term5). </p>\n\n<pre><code>my $dublette = $dbh-&gt;selectall_arrayref(\"\nSELECT t.ID, t.Tag1, t.Tag2, t.Term1, t.Term2, t.Term3, t.Term4, t.Term5 \nFROM Data t inner join (\nSELECT ID, Tag1, Tag2, Term1, Term2, Term3, Term4, Term5, COUNT(*) c FROM Data GROUP BY Term1, Term2, Term3, Term4, Term5 HAVING c &gt; 1) \nx on t.Term1=x.Term1 AND t.Term2=x.Term2 AND t.Term3=x.Term3 AND t.Term4=x.Term4 AND t.Term5=x.Term5 \n</code></pre>\n\n<p>This seems to work exept if my unused values are NULL (but it works if they are empty). Any idea ho can I change it to get all duplicates?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544465560, "post_id": 53699341, "comment_id": 94277104, "body": "@ikegami My assumption was that he was looking for keys in <code>%try_1</code> that would be matched by a key in <code>%try</code>. Like <code>STRONGER</code> in <code>%try_1</code> is matched by <code>STRONG</code> in <code>%try</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1544475525, "post_id": 53699341, "comment_id": 94281633, "body": "@ChrisCharley, Oops, yeah. Deleted my comment"}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 3, "last_activity_date": 1544475612, "last_edit_date": 1544475612, "creation_date": 1544415060, "answer_id": 53699394, "question_id": 53699341, "link": "https://stackoverflow.com/questions/53699341/how-to-print/53699394#53699394", "title": "How to print $_", "body": "<p>You're almost there. Change:</p>\n\n<pre><code>print \"\\n\".$_.\"\\n\" if (grep {$_ =~ /\\Q$temp_0/i} (keys %try_1));\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>print \"\\n\".$_.\"\\n\" for grep {/\\Q$temp_0/i} keys %try_1;\n</code></pre>\n\n<p>The <code>\\Q</code> handles any special character <code>$temp_0</code> might contain.</p>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53699394, "answer_count": 1, "score": 0, "last_activity_date": 1544475612, "creation_date": 1544414508, "question_id": 53699341, "link": "https://stackoverflow.com/questions/53699341/how-to-print", "title": "How to print $_", "body": "<p>How can I print $_ outside using grep? I want to print the data inside <code>%try_1</code> if it match with <code>%try</code>\n.........</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Tie::Autotie 'Tie::IxHash';\n\ntie my %try, 'Tie::IxHash';\n$try{STRONG}{ALLIES}='A';\n$try{AGILE}{BOBBY}='B';\n$try{AGILE}{HOBBY}='B';\n$try{SMART}{CAKRA}='C';\n$try{SMART}{PHONE}='C';\n$try{SMART}{PEOPLE}='C';\nmy %try_1;\n$try_1{STRONGER}='A';\n$try_1{AGILER}='B';\n$try_1{SMARTER}='C';\n\nforeach my $temp_0 (keys %try)\n{\n    print \"\\n\".$_.\"\\n\" if (grep {$_ =~ /$temp_0/i} (keys %try_1));\n }\n</code></pre>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 2, "creation_date": 1544400826, "post_id": 53697979, "comment_id": 94251273, "body": "You are using <code>cmp</code> which is comparing strings. Instead use <code>&lt;=&gt;</code> which is comparing numbers."}, {"owner": {"reputation": 1, "user_id": 10768487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ab17ab8eeaf1264c7e4f99ba7f13da?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kpke", "link": "https://stackoverflow.com/users/10768487/steve-kpke"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1544403169, "post_id": 53697979, "comment_id": 94251699, "body": "I knew this must be something obvious which I am just too tired to see. This fix did the trick. Thank you so much"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1544401575, "last_edit_date": 1544401575, "creation_date": 1544401151, "answer_id": 53698038, "question_id": 53697979, "link": "https://stackoverflow.com/questions/53697979/why-is-this-perl-sorting-not-working-as-expected/53698038#53698038", "title": "Why is this perl sorting not working as expected?", "body": "<p>When comparing lexically, <code>10</code> comes before <code>2</code> just like <code>ba</code> comes before <code>c</code>. You want to compare numerically, so use <code>&lt;=&gt;</code> instead of <code>cmp</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10768487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ab17ab8eeaf1264c7e4f99ba7f13da?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kpke", "link": "https://stackoverflow.com/users/10768487/steve-kpke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544401575, "creation_date": 1544400576, "question_id": 53697979, "link": "https://stackoverflow.com/questions/53697979/why-is-this-perl-sorting-not-working-as-expected", "title": "Why is this perl sorting not working as expected?", "body": "<p>I first calculate the number of keys in array. When the number of \"vectranet\" items exceeds 9 the sorting does not work properly - \"vectranet\" is not first on the sorted list (I sort by hash value), here is my code, please help me I am going crazy :-) This form tells me that my post is mostly code and that I should provide more details, but I cannot write any more text I explained everything and I need to attach this huge array for you to see what my problem is :(</p>\n\n<pre><code>@cprov=(\n'vectranet.pl',\n'airmax.pl',\n'mm.pl',\n'aduro.pl',\n'lss.net.pl',\n'multiplay.pl',\n'vectranet.pl',\n'vectranet.pl',\n'vectranet.pl',\n'vectranet.pl',\n'vectranet.pl',\n'inetia.pl',\n'orange.pl',\n'orange.pl',\n'proneteus.pl',\n'zicom.pl',\n'zicom.pl',\n'ac1-nat13.pl',\n'sownet.pl',\n't-mobile.pl',\n't-mobile.pl',\n't-mobile.pl',\n'multiplay.pl',\n'multiplay.pl',\n'cyfrowypolsat.pl',\n'plus.pl',\n'vectranet.pl',\n'vectranet.pl',\n'centertel.pl',\n'centertel.pl',\n'centertel.pl',\n'play-internet.pl',\n'centertel.pl',\n'plus.pl',\n'cyfrowypolsat.pl',\n'play-internet.pl',\n'centertel.pl',\n'satfilm.com.pl',\n'odramedia.pl',\n'netia.com.pl',\n'espol.com.pl',\n'netia.com.pl',\n'tpnet.pl',\n'tpnet.pl',\n'tpnet.pl',\n'tpnet.pl',\n'vectranet.pl',\n'vectranet.pl',\n'tktelekom.pl',\n'tktelekom.pl',\n'sitel.net.pl',\n'inter-sat.pl',\n'mm.pl',\n'mm.pl',\n'chello.pl',\n'chello.pl',\n'chello.pl',\n'chello.pl',\n'chello.pl',\n'net-system.pl',\n'vectranet.pl',\n'krosoft.pl',\n'artcom.pl',\n'play-internet.pl',\n'protonet.pl',\n'plus.pl',\n'tpnet.pl'\n);\n\nmy %pcounts;\n$pcounts{$_}++ for @cprov;\n\nfor my $key ( sort { $pcounts{$b} cmp $pcounts{$a} } keys %pcounts ) {\n    print \"$key - $pcounts{$key}\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "cgi", "dbi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1544391002, "post_id": 53696793, "comment_id": 94249086, "body": "You print two CGI headers: <code>print &quot;Content-type: text&#47;html\\n\\n&quot;;</code>, and <code>print header</code>. The second one is treated as being part of the body."}, {"owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544391239, "post_id": 53696793, "comment_id": 94249156, "body": "Thank you, I got rid of that print statement. The actual content and the checks are still not working though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544391255, "post_id": 53696793, "comment_id": 94249162, "body": "And further down, you try to to add to the HTML header (<code>print qq{&lt;meta http...}</code>) after you&#39;ve already started the body."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544391285, "post_id": 53696793, "comment_id": 94249168, "body": "What checks are not working?"}, {"owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544391321, "post_id": 53696793, "comment_id": 94249183, "body": "It is still not inserting into the DB or checking if the user already exists"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544391335, "post_id": 53696793, "comment_id": 94249189, "body": "I mean, why do you claim that?"}, {"owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544391397, "post_id": 53696793, "comment_id": 94249205, "body": "When I try to register with a username already in the db it skips directly to successfully registered. If I try to register a new account it tells me that it was successfully registered but when I check the db no content was added."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544391477, "post_id": 53696793, "comment_id": 94249222, "body": "Don&#39;t describe, show. Also, if you think it&#39;s not working, check to see if an error was returned!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544391490, "post_id": 53696793, "comment_id": 94249226, "body": "You&#39;ve also have serious code injection bugs."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1544391765, "post_id": 53696793, "comment_id": 94249310, "body": "In fact, these are the source of your problem. Add error checking, and you&#39;ll find the problem."}, {"owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544392117, "post_id": 53696793, "comment_id": 94249380, "body": "You were right about the injection I believe. I managed to make it work now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544401847, "post_id": 53696793, "comment_id": 94251447, "body": "I hope you used <code>$dbh-&gt;quote</code> or placeholders. Adding quotes is not enough!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1544434068, "post_id": 53696793, "comment_id": 94260135, "body": "Please take a look at <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">bobby-tables.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 0, "last_activity_date": 1544462924, "creation_date": 1544462924, "answer_id": 53710699, "question_id": 53696793, "link": "https://stackoverflow.com/questions/53696793/perl-cgi-not-running-sql-properly/53710699#53710699", "title": "Perl CGI not running sql properly", "body": "<p>Just to sum up ikegami\u2019s comments in a single answer...</p>\n\n<p>You have errors in your SQL queries. String variables need to be quoted when passed in the query. This will generate an error in the database, but you won\u2019t see it because you did not set the RaiseError attribute on your handle, on top of which you disabled PrintError. </p>\n\n<p>Enable error management when connecting the database :</p>\n\n<pre><code>my $dbh = DBI-&gt;connect($dsn, $dbUsername, $dbPassword, {RaiseError =&gt; 1});\n</code></pre>\n\n<p>To avoid the quoting issue and at the same time protect your code against SQL injection, use bind parameters.</p>\n\n<p>When looking up a user :</p>\n\n<pre><code>my $check = \"SELECT * from tblusers WHERE login = ?\";\nmy $sth = $dbh-&gt;prepare($check);\n$sth-&gt;execute($username);\n</code></pre>\n\n<p>When creating a new user :</p>\n\n<pre><code>my $sql  = \"INSERT INTO tblusers(login, password, name) VALUES(?, ?, ?)\";\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute($username, $password, $name);\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 5701641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JuTHnkxHPT0/AAAAAAAAAAI/AAAAAAAAAbI/wrda8chhosw/photo.jpg?sz=128", "display_name": "Sai Peri", "link": "https://stackoverflow.com/users/5701641/sai-peri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544462924, "creation_date": 1544390500, "last_edit_date": 1544391849, "question_id": 53696793, "link": "https://stackoverflow.com/questions/53696793/perl-cgi-not-running-sql-properly", "title": "Perl CGI not running sql properly", "body": "<p>I am working on a basic registration page but I cannot seem to get the username check to trigger or the actual inserting into the db. In this page I take the info I pass in from my html page and first do a check to see if the username is already there. If not I redirect. Otherwise, I insert the values into the db and redirect to a new page. The output I get is this: \n<a href=\"https://i.stack.imgur.com/S8r4f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S8r4f.png\" alt=\"output\"></a></p>\n\n<p>I am not able to find what the actual issue is in my code..</p>\n\n<pre><code>    #!/usr/bin/perl \n#This is going to be the user login check and will set a cookie\n\nuse DBI;\nuse CGI qw(:standard);\nprint \"Content-type: text/html\\n\\n\"; #Tells website to print content\n\nuse strict;\n\n#Connection error \nsub showErrorMsgAndExit {\n    print header(), start_html(-title=&gt;shift);\n    print (shift);\n    print end_html();\n    exit;\n}\n\n#Connecting to the database\nmy $dbUsername = \"root\";\nmy $dbPassword = \"password\";\n\nmy $dsn = \"DBI:mysql:f18final:localhost\";\nmy $dbh = DBI-&gt;connect($dsn, $dbUsername, $dbPassword, {PrintError =&gt; 0});\n\n#error checking\nif(!$dbh) {\n    print header(), start_html(-title=&gt;\"Error connecting to DB\");\n    print (\"Unable to connec to the database\");\n    print end_html();\n    exit;\n}\n\n\nprint header;\nprint start_html(-title=&gt;'Registration Page');\n\n#Get the information the user entered\nmy $username = param('username');\nmy $password = param('password');\nmy $name = param('name');\n\n#first sql check to see if username is already taken\nmy $check = \"SELECT * from tblusers WHERE login = $username\";\nmy $sth = $dbh-&gt;prepare($check);\n$sth-&gt;execute();\nif($sth-&gt;fetchrow_array) {\n    print \"&lt;p&gt;The user already exists. You will be redirected to register page in 5 seconds.&lt;/p&gt;\";\n    print qq{&lt;meta http-equiv=\"refresh\" content = \"5; url=/var/www/html/register.html\"};\n} else {\n    #prepare to enter the content into the db\n    my $sql  = \"INSERT INTO tblusers(login, password, name) VALUES($username, $password, $name)\";\n    my $sth = $dbh-&gt;prepare($sql);\n    $sth-&gt;execute();\n    print \"&lt;p&gt;Successfuly registered. You will be redirected to login in 5 seconds.&lt;/p&gt;\";\n    print qq{&lt;meta http-equiv=\"refresh\" content = \"5; url=/var/www/html/login.html\"};\n}\n\n\nprint end_html();\nexit;\n</code></pre>\n\n<p>EDIT: A few more details for the post\nI ran chmod on the register.cgi and did perl register.cgi and this was the output. \n<a href=\"https://i.stack.imgur.com/wjLPs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wjLPs.png\" alt=\"enter image description here\"></a>\nThe html file consists of only a form:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VoxK1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VoxK1.png\" alt=\"enter image description here\"></a></p>\n\n<p>My sql table looks like this. (I added the first account manually in mysql workbench)\n<a href=\"https://i.stack.imgur.com/y93OW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y93OW.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1544380044, "post_id": 53695236, "comment_id": 94246018, "body": "I don&#39;t think that you will get more disk IO by reading files in parallel. Also see your previous question <a href=\"https://stackoverflow.com/questions/53691911/most-efficient-way-to-concatenate-thousands-of-files-in-perl\" title=\"most efficient way to concatenate thousands of files in perl\">stackoverflow.com/questions/53691911/&hellip;</a> , which has answers. Also, don&#39;t read the files line-by-line but read them in bulk (see your previous question)."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544380155, "post_id": 53695236, "comment_id": 94246051, "body": "@Corion Hey, I saw the answer and they helped me a lot but my engineer has suggested me to do it parallel because it should be fast. I&#39;m trying to test it and then decide which implementation is better."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1544390998, "post_id": 53695236, "comment_id": 94249083, "body": "Please checkout my edit to the question."}], "answers": [{"tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 0, "last_activity_date": 1544456767, "creation_date": 1544456767, "answer_id": 53709054, "question_id": 53695236, "link": "https://stackoverflow.com/questions/53695236/reading-lines-of-a-file-into-a-hash-parallel-in-perl/53709054#53709054", "title": "Reading lines of a file into a hash parallel in Perl", "body": "<p>Try <a href=\"https://metacpan.org/pod/MCE::Map\" rel=\"nofollow noreferrer\">MCE::Map</a>.  It will automatically gather the output of the sub-processes into a list, which in your case can be a hash.  Here's some untested pseudocode:</p>\n\n<pre><code>use MCE::Map qw[ mce_map ];\n\n# note that MCE passes the argument via $_, not @_\nsub process_file {\n   my $file = $_;\n   my %result_hash;\n   ... fill hash ...\n   return %result_hash\n}\n\nmy %result_hash = mce_map  \\&amp;process_file \\@list_of_files\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1544456767, "creation_date": 1544379027, "last_edit_date": 1544390973, "question_id": 53695236, "link": "https://stackoverflow.com/questions/53695236/reading-lines-of-a-file-into-a-hash-parallel-in-perl", "title": "Reading lines of a file into a hash parallel in Perl", "body": "<p>I have thousands of files. My goal is to insert the lines of those files into a hash (Big amount of those lines repeats).\nFor now, I iterate through an array on files and for each file, I open it and split the row (Because each row is in the following format: <code>&lt;path&gt;,&lt;number&gt;</code>).\nThen I insert into the <code>%paths</code> hash. Also each line I write into one main file (trying to save time by combining).</p>\n\n<p>Piece of my code:</p>\n\n<pre><code>open(my $fh_main, '&gt;', \"$main_file\") or die;\nforeach my $dir (@dirs)\n{\n    my $test = $dir.\"/\".\"test.csv\";\n    open(my $fh, '&lt;', \"$test\") or die;\n    while (my $row = &lt;$fh&gt;)\n    {\n        print $fh_main $row;\n        chomp($row);\n        my ($path,$counter) = split(\",\",$row);\n        my $abs_path = abs_path($path);\n        $paths{$abs_path} += $counter;\n    }\n    close ($fh);\n}\nclose ($fh_main);\n</code></pre>\n\n<p>Due to a lot of files, I would like to split the iteration at least half. I thought of using the <code>Parallel::ForkManager</code> module (<a href=\"http://stackoverflow.com/questions/49221685/perl-copying-directory-from-other-machine-to-local-machine\">link</a>), \nin order to parallel insert the files into a hash <code>A</code> and into a hash <code>B</code> (if possible, then more than two hashes). \nThen I can combine those two (or more) hashes into one main hash. There should not be a memory issue (because I'm running on a machine that does not have memory issues). \nI read the decontamination but every single try failed and each iteration was running alone. I would like to see an initial example of the should I solve this issue. \nAlso, I would like to hear another opinion on how to implement this in a more clean and wise way.</p>\n\n<p><strong>Edit</strong>: maybe I didn't understand what exactly the module do. I would like to create a fork in the script so one half will of the files will be collected by process 1 and the other half will be collected by process 2. The first one to finish will write to a file and the other one will read from it. Is it possible to implement? Will it reduce the run time?</p>\n"}, {"tags": ["perl", "sorting", "bioinformatics", "fasta", "fastq"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544379620, "post_id": 53695039, "comment_id": 94245903, "body": "What does &quot;the content is messed up?&quot; mean? What are you getting? What do you want to get? (Small) sample input, expected and actual output files should be included in the question."}], "answers": [{"tags": [], "owner": {"reputation": 3386, "user_id": 3279716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3de7889a424ab30c3420b535d481db6c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3279716/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1545142043, "last_edit_date": 1545142043, "creation_date": 1544393925, "answer_id": 53697249, "question_id": 53695039, "link": "https://stackoverflow.com/questions/53695039/merge-fasta-and-qual-files-with-different-headers-order-in-fastq/53697249#53697249", "title": "Merge Fasta and Qual files with different headers order in FASTQ", "body": "<p>It's been a while since I have used perl, but I would approach this using a hash of key/value pairs for both the fasta and quality input. Then write out all the pairs by looping over the fasta hash and pulling out the corresponding quality string.</p>\n\n<p>I have written something in python that will do what you need, you can see it in action <a href=\"https://repl.it/@alexomics/JubilantRobustTriangle\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<p>It assumes that your input looks like this:<br>\n<strong>reads.fasta</strong></p>\n\n<pre><code>&gt;fa_0\nGCAGCCTGGGACCCCTGTTGT\n&gt;fa_1\nCCCACAAATCGCAGACACTGGTCGG\n</code></pre>\n\n<p><strong>reads.qual</strong></p>\n\n<pre><code>&gt;fa_0\n59 37 38 51 56 55 60 44 43 42 56 65 60 68 52 67 43 72 59 65 69\n&gt;fa_1\n36 37 47 72 34 53 67 41 70 67 66 51 47 41 73 58 75 36 61 48 70 55 46 42 42\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>@fa_0\nGCAGCCTGGGACCCCTGTTGT\n+\n;%&amp;387&lt;,+*8A&lt;D4C+H;AE\n@fa_1\nCCCACAAATCGCAGACACTGGTCGG\n+\n$%/H\"5C)FCB3/)I:K$=0F7.**\n@fa_2\nTCGTACAGCAGCCATTTTCATAACCGAACATGACTC\n+\nC?&amp;93A@:?@F,2:'KF*20CC:I7F9J.,:E8&amp;?F\n</code></pre>\n\n<hr>\n\n<pre><code>import sys\n\n\n# Check there are enough arguments\nif len(sys.argv) &lt; 3:\n    print('Usage: {s} reads.fasta reads.qual &gt; reads.fq'.format(s=sys.argv[0]), file=sys.stderr)\n    sys.exit(1)\n\n# Initalise dictionaries for reads and qualities\nread_dict = dict()\nqual_dict = dict()\n\nfa_input = sys.argv[1]\nqual_input = sys.argv[2]\n\n# Read in fasta input\nwith open(fa_input, 'r') as fa:\n    for line in fa:\n      line = line.strip()\n      if line[0] == '&gt;':\n        read_dict[line[1:]] = next(fa).strip()\n      else:\n        next(fa)\n\n# Read in quality input\nwith open(qual_input, 'r') as qual:\n    for line in qual:\n      line = line.strip()\n      if line[0] == '&gt;':\n        qual_dict[line[1:]] = next(qual).strip()\n      else:\n        next(qual)\n\ncount = 0\n# Iterate over all fasta reads\nfor key, seq in read_dict.items():\n    # Check if read header is in the qualities data\n    if key in qual_dict.keys():\n        # There's both sequence and quality data so write stdout\n        read_str = '@{header}\\n{seq}\\n+\\n{qual}'.format(\n            header=key,\n            seq=seq,\n            qual=''.join([chr(int(x)) for x in qual_dict[key].split(' ')]))\n        print(read_str, file=sys.stdout)\n        count += 1\n    else:  # not found\n        # Write error to stderr\n        print('Error: {k} not found in qual file'.format(k=key), file=sys.stderr)\n\n# Print count to stderr\nprint('{c} reads written'.format(c=count), file=sys.stderr)\n</code></pre>\n\n<p>If you need to use an offset for the quality score edit<br>\n<code>qual=''.join([chr(int(x)) for x in qual_dict[key].split(' ')]))</code> to<br>\n<code>qual=''.join([chr(int(x) + offset) for x in qual_dict[key].split(' ')]))</code> and define an <code>offset</code> variable before this. </p>\n"}], "owner": {"reputation": 11, "user_id": 10767533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9d26e60a4672f6f41269e9c9e2ad00?s=128&d=identicon&r=PG&f=1", "display_name": "Anso", "link": "https://stackoverflow.com/users/10767533/anso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545142043, "creation_date": 1544377840, "last_edit_date": 1544449208, "question_id": 53695039, "link": "https://stackoverflow.com/questions/53695039/merge-fasta-and-qual-files-with-different-headers-order-in-fastq", "title": "Merge Fasta and Qual files with different headers order in FASTQ", "body": "<p>I am trying to merge a fasta file and a qual file in a new fastq file having in mind the case that the two files might be provided with different order in their sequence IDs. To do that, I tried the first step of my script to be the sorting of the sequences which works perfectly when I test it as a separate script. The same with the rest, when I run separately the part where it combines the files in a fastq, it runs perfectly. But now that I am trying to combine the two methods in one script it doesn't work and I don't know what else to do! I would appreciate it if you can help me.</p>\n\n<p>Here is my script as far. It creates the new fastq file but the content is messed up and not what I want. I run it from terminal like this:</p>\n\n<pre><code>$ perl script.pl reads.fasta reads.qual &gt; reads.fq\n</code></pre>\n\n<p>Script :</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\ndie (\"Usage: script.pl reads.fasta reads.qual &gt; reads.fq\") unless  (scalar @ARGV) == 2;\n\nopen FASTA, $ARGV[0] or die \"cannot open fasta: $!\\n\";\nopen QUAL, $ARGV[1] or die \"cannot open qual: $!\\n\";\n\nmy $offset = 33; \nmy $count = 0;\nlocal($/) = \"\\n&gt;\";\n\nmy %id2seq = ();\nmy $id = '';\nmy %idq2seq = ();\nmy $idq = '';\nmy (@sort_q, @sort_f);\n\nwhile(&lt;FASTA&gt;){\n    chomp;\n        if($_ =~ /^&gt;(.+)/){\n            $id = $1;\n        }else{\n            $id2seq{$id} .= $_;\n        }\n     }\n\nfor $id (sort keys %id2seq)\n    {\n     @sort_f = \"$id\\n$id2seq{$id}\\n\\n\";\n     print @sort_f;\n    }\n\nwhile(&lt;QUAL&gt;){\nchomp;\n    if($_ =~ /^&gt;(.+)/){\n        $idq = $1;\n    }else{\n        $idq2seq{$idq} .= $_;\n    }\n}\n\nfor $idq (sort keys %idq2seq)\n    {\n    @sort_q = \"$idq\\n$idq2seq{$idq}\\n\\n\";\n    print \"@sort_q\";\n    }\n\nwhile (my @sort_f) {\nchomp @sort_f;\nmy ($fid, @seq) = split \"\\n\", @sort_f;   \nmy $seq = join \"\", @seq; $seq =~ s/\\s//g;\nmy $sortq = @sort_q;\nchomp my @sortq;\nmy ($qid, @qual) = split \"\\n\", @sortq;\n\n@qual = split /\\s+/, (join( \" \", @qual));\n# convert score to character code:\nmy @qual2 = map {chr($_+$offset)} @qual;\nmy $quals = join \"\", @qual2; `enter code here`\ndie \"missmatch of fasta and qual: '$fid' ne '$qid'\" if $fid ne $qid;\n$fid =~ s/^\\&gt;//;\nprint STDOUT (join( \"\\n\", \"@\".$fid, $seq, \"+$fid\", $quals), \"\\n\");\n$count++;\n}\nclose FASTA;\nclose QUAL;\nprint STDERR \"wrote $count entries\\n\";\n</code></pre>\n\n<p>Thank you in advance    </p>\n"}, {"tags": ["javascript", "forms", "perl", "cgi", "textfield"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544373377, "post_id": 53694356, "comment_id": 94244139, "body": "Are you automating a browser? If so, see <a href=\"https://metacpan.org/pod/WWW::Mechanize\" rel=\"nofollow noreferrer\">metacpan.org/pod/WWW::Mechanize</a> and/or <a href=\"https://metacpan.org/pod/WWW::Mechanize::Chrome\" rel=\"nofollow noreferrer\">metacpan.org/pod/WWW::Mechanize::Chrome</a> . Otherwise, you will have to learn how <a href=\"https://en.wikipedia.org/wiki/Http\" rel=\"nofollow noreferrer\">HTTP</a> works. In either case, you will have to learn Javascript in addition to Perl."}, {"owner": {"reputation": 45, "user_id": 9512774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7689ec5b9340fa4c23a8dbb7fb7a76a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan S Ravi K", "link": "https://stackoverflow.com/users/9512774/sujan-s-ravi-k"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544374293, "post_id": 53694356, "comment_id": 94244389, "body": "no automation here"}, {"owner": {"reputation": 20897, "user_id": 1169519, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/j4Iyy.png?s=128&g=1", "display_name": "Teemu", "link": "https://stackoverflow.com/users/1169519/teemu"}, "edited": false, "score": 0, "creation_date": 1544374351, "post_id": 53694356, "comment_id": 94244414, "body": "<a href=\"http://stackoverflow.com/questions/13840429/what-is-the-difference-between-client-side-and-server-side-programming\" title=\"what is the difference between client side and server side programming\">stackoverflow.com/questions/13840429/&hellip;</a>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544374726, "post_id": 53694356, "comment_id": 94244510, "body": "If you want to write a website where you can write the client code in Perl, consider looking at <a href=\"https://webperl.zero-g.net/\" rel=\"nofollow noreferrer\">WebPerl</a> , which allows you to run Perl on the client in the browser."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1544436127, "creation_date": 1544436127, "answer_id": 53703281, "question_id": 53694356, "link": "https://stackoverflow.com/questions/53694356/call-a-perl-function-on-click-of-a-button-and-fill-the-return-value-into-a-textf/53703281#53703281", "title": "call a perl function on click of a button and fill the return value into a textfield in a form", "body": "<p>You can't do this without involving Javascript (well, you probably could, but 99.9% of your users will have browsers that can only use Javascript for client-side programming).</p>\n\n<p>You need to do it like this:</p>\n\n<ul>\n<li>Set up a Javascript event handler on your find button which grabs the username value and makes an AJAX call to your web server, including the username.</li>\n<li>Write an AJAX handler sitting on your web server which takes the username, calls your code, formats the data as JSON and returns that data to the browser.</li>\n<li>Set up Javascript in the web page that takes the JSON returned from the AJAX call, extracts the various data items and inserts them into the appropriate part of the page.</li>\n</ul>\n"}], "owner": {"reputation": 45, "user_id": 9512774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7689ec5b9340fa4c23a8dbb7fb7a76a9?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan S Ravi K", "link": "https://stackoverflow.com/users/9512774/sujan-s-ravi-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544436127, "creation_date": 1544373122, "last_edit_date": 1544423408, "question_id": 53694356, "link": "https://stackoverflow.com/questions/53694356/call-a-perl-function-on-click-of-a-button-and-fill-the-return-value-into-a-textf", "title": "call a perl function on click of a button and fill the return value into a textfield in a form", "body": "<p>I'm completely new to the HTML, javascript &amp; web world. My requirement is as follows.</p>\n\n<h1>UI layout</h1>\n\n<pre><code>username:   __________ |find button|\nFirst name: __________\nLast name:  __________\ne-mail:     __________\n</code></pre>\n\n<h1>To be done</h1>\n\n<ol>\n<li>user enters a user name in the username textfield &amp; clicks on find button</li>\n<li>On click of find button, call the Perl method <code>getDetails(\"enteredUName\")</code></li>\n<li>Capture the return value from the called Perl method and fill the details in the remaining textfields (first, last names &amp; email). </li>\n</ol>\n\n<p>I've the form and the searching logic ready. </p>\n\n<p>Now my confusion is what should I put in the <code>-onClick</code> attribute of the <strong>search</strong> button. In the code, for forms, there's always javascript calls written for other buttons. So how should I make a call to the Perl method upon click of the search button and fill the remain text fields?</p>\n\n<h2>Update</h2>\n\n<p>Based on my current understanding did the following:</p>\n\n<ol>\n<li>Defined a hidden boolean parameter <code>isUsernameGiven</code>, with initial value 0, in the form</li>\n<li>When user types something in textfield with name <code>usernameText</code> and clicks search button, invoke javascript which sets the value of <code>isUsernameGiven</code> to 1 and the window location with a specified action.</li>\n<li>Action is routed to the Perl module file via the application perl script. In this module, the search happens based on <code>usernameText</code> parameter</li>\n<li>Newly appearing form comes with the details pre-filled.</li>\n</ol>\n\n<h2>Code Structure</h2>\n\n<pre><code>ApplicationDirectory\n  application.pl\n    ModuleFolder\n        ModuleFile.pm\n\napplication.pl:\n    ...\n    if ($action eq 'save') {\n        my $m = new ModuleFile();\n    }\n    ...\n\n\nModuleFile.pm:\n    ...\n    sub new {\n        # param isUsernameGiven is preserved/carried over from previous??\n        my $isUsernameGiven = param('isUsernameGiven');\n        if ($isUsernameGiven != 0) {\n            param(-name=&gt;'isUsernameGiven',-value=&gt;$isUsernameGiven);\n        }\n        if ( $action eq \"add\" ) {\n            showAddForm($self);\n        } elsif ($action eq \"addEmp\") {\n            showAddForm($self, $self-&gt;getUserInfoFromActiveDir(param('usernameText')));\n        }\n    }\n    sub getUserInfoFromActiveDir {\n        # search info and return employee object\n        ...\n    }\n    sub showForm {\n        ...\n        print \"\\n&lt;form name=\\\"edit_employee_form\\\" method=\\\"post\\\" action=\\\"application.pl\\\" onSubmit=\\\"return validate_form();\\\"&gt;\\n\";\n        print \"&lt;input type='hidden' name='isUsernameGiven' value='0'/&gt;\\n\";\n\n        print \"&lt;table class=edit style=\\\"width:420px;\\\"&gt;\\n\";\n        my $findButton = '';\n        if (!$id) {\n            $findButton = \"&lt;td&gt;\\n\".button(-value=&gt;\"Find\", -class=&gt;\"bigbutton\",\n                -onClick=&gt;\"document.edit_employee_form.isUsernameGiven.value=1;getDetailsFilled();\").\"&lt;/td&gt;\";\n        }\n        my $fieldname = 'username';\n        print \"&lt;tr&gt;&lt;td&gt;Username:&lt;/td&gt;&lt;td &gt; \\n\".textfield(-name=&gt;$fieldname -default=$unameValue,\".\n            \"-size=&gt;30, -maxlength=&gt;50).\"&lt;/td&gt;\".$findButton.\"&lt;/tr&gt;&lt;br&gt;\";\n\n        print \"&lt;tr&gt;&lt;td&gt;First Name:&lt;/td&gt;&lt;td &gt; \\n\".textfield(-name=&gt;'first', -default=&gt;$fnameValue, -size=&gt;30, -maxlength=&gt;50).\"&lt;/td&gt;&lt;/tr&gt;\\n\";\n        print \"&lt;tr&gt;&lt;td class=edit&gt;Last Name:&lt;/td&gt;&lt;td &gt; \\n\".textfield(-name=&gt;'name', -default=$lnameValue, -size=&gt;30, -maxlength=&gt;50).\"&lt;/td&gt;&lt;/tr&gt;\\n\";\n        ...\n    }\n\nModuleFile.js:\n    ...\n    function getDetailsFilled()\n    {\n        if ( document.edit_employee_form.username.value == \"\" )\n        {\n            alert ( \"Please fill in a username.\" );\n            document.edit_item_form.username.focus();\n        } else {\n            // Call Perl method here\n            window.location=\"application.pl?application=ModuleFile&amp;action=addEmp\";\n        }\n    }\n    ...\n</code></pre>\n\n<h1>Problem</h1>\n\n<ol>\n<li>Upon clicking the find button nothing happens. What did I miss?</li>\n<li>Seems the parameter <code>isUsernameGiven</code> is coming as undefined in the sub <code>showform</code>.\n\n<ol>\n<li>Do the param values get preserved or reset for every <code>ModuleFile</code> object?</li>\n<li>How's the value coming as undefined if the default value of <code>isUsernameGiven</code> is set to 0?</li>\n<li>Is my understanding of params correct?</li>\n</ol></li>\n<li>Is my current overall approach correct?</li>\n</ol>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1544356718, "post_id": 53691911, "comment_id": 94239788, "body": "Read and write content in fixed sized chunks instead of line by line. $/ = \\1024*1024*8;"}, {"owner": {"reputation": 2351, "user_id": 10533011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cf679869635f63c1d842fa24604a02?s=128&d=identicon&r=PG&f=1", "display_name": "Donat", "link": "https://stackoverflow.com/users/10533011/donat"}, "edited": false, "score": 1, "creation_date": 1544359434, "post_id": 53691911, "comment_id": 94240420, "body": "Have a look at shelll command <code>xargs</code>. Maybe this can solve your issue of having too many files for the <code>cat</code> command."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1544360707, "post_id": 53691911, "comment_id": 94240747, "body": "Please show us the code you already have. Most likely it should be something like <code>use Path::Tiny; open my $out, &#39;&gt;&#39;, $outfilename or die &quot;Couldn&#39;t write to &#39;$outfilename&#39;: $!&quot;; for my $in (@inputfiles) { print $out path($in)-&gt;slurp }</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544377057, "post_id": 53691911, "comment_id": 94245123, "body": "Blocks of data instead of lines, using <code>sysread</code> and <code>syswrite</code>. Or possibly using <code>File::Map</code> instead to read the files."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1544496188, "post_id": 53691911, "comment_id": 94287295, "body": "Please allow us Google that for you: <a href=\"https://www.google.com/search?q=concatenate+files+using+perl\" rel=\"nofollow noreferrer\">concatenate files using perl</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1544457205, "post_id": 53698764, "comment_id": 94272777, "body": "@KjetilS., That&#39;s not true. <code>-exec ... +</code> (as opposed to <code>-exec ... ;</code>) passes multiple paths per proces just like <code>xargs</code> does."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1544800011, "post_id": 53698764, "comment_id": 94415854, "body": "Yes, I didn&#39;t notice the <code>+</code> at the end of <code>-exec</code> and thought of the behaviour of <code>;</code> instead of <code>+</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1544409186, "creation_date": 1544409186, "answer_id": 53698764, "question_id": 53691911, "link": "https://stackoverflow.com/questions/53691911/most-efficient-way-to-concatenate-thousands-of-files-in-perl/53698764#53698764", "title": "Most efficient way to concatenate thousands of files in Perl", "body": "<pre><code>use IPC::Run qw( run );\n\nrun [ \"xargs\", \"-0\", \"cat\", \"--\" ],\n   '&lt;', \\join(\"\\0\", @paths),\n   '&gt;', $output_qfn;\n</code></pre>\n\n<p>You could maybe use <code>find</code> to generate the list of files to concatenate.</p>\n\n<pre><code>use IPC::Run qw( run );\n\nrun [ \"find\", ..., \"-print0\" ],\n   '|' [ \"xargs\", \"-0\", \"cat\", \"--\" ],\n      '&gt;', $output_qfn;\n</code></pre>\n\n<p>On a GNU system (e.g. Linux), you can avoid <code>xargs</code> when using <code>find</code>.</p>\n\n<pre><code>use IPC::Run qw( run );\n\nrun [ \"find\", ..., \"-exec\", \"cat\", \"--\", \"{}\", \"+\" ],\n   '&gt;', $output_qfn;\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1544409186, "creation_date": 1544355376, "last_edit_date": 1544355967, "question_id": 53691911, "link": "https://stackoverflow.com/questions/53691911/most-efficient-way-to-concatenate-thousands-of-files-in-perl", "title": "Most efficient way to concatenate thousands of files in Perl", "body": "<p>I'm looking for the most efficient way to concatenate thousands of files. The way I did it (Using Perl) until now is: I will open the source and the destination path and insert each line to the destination file.\nOf course, it will take a lot of time. I thought of using the Linux command <code>cat</code> in order to solve this issue. But from past threads, I understood that cat has <code>MAX_ARG</code> that sets the limit to the command-line.\nConsider you have an array <code>@paths</code> which contains all the paths to concatenate. What is the most efficient way possible, to concatenate thousands of files into one main file (order does not matter), using Perl? </p>\n\n<p><strong>EDIT</strong>: If that matters, the concatenate file could get up to <code>3GB</code>.</p>\n"}, {"tags": ["perl", "devel-cover"], "comments": [{"owner": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1544396126, "post_id": 53690391, "comment_id": 94250331, "body": "I have verified this and it is 1.31, good point though, thanks. I&#39;m going over open issues on Github, there are a few that possibly could have the same root cause but don&#39;t look similar on the first look. I&#39;ll try to narrow it down and update this based on the results."}, {"owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "edited": false, "score": 1, "creation_date": 1544463655, "post_id": 53690391, "comment_id": 94276261, "body": "Your code does not match your example output. It&#39;s also unnecessarily complicated. If you can strip it down to a <i>complete</i> runnable example that illustrates the problem, we can possibly help."}, {"owner": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "edited": false, "score": 0, "creation_date": 1544503518, "post_id": 53690391, "comment_id": 94288793, "body": "I tried to simplify it further, but I could no longer reproduce the issue. The screenshots are taken on this exact code - perl perhaps translates stuff internally? If you&#39;re referring to the &quot;unless&quot; that is not in my code. Anyway, I made a GitHub repo with all the sources to hopefully make it easier to reproduce."}], "owner": {"reputation": 646, "user_id": 2645631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AGlIC.jpg?s=128&g=1", "display_name": "lukash", "link": "https://stackoverflow.com/users/2645631/lukash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544503372, "creation_date": 1544341638, "last_edit_date": 1544503372, "question_id": 53690391, "link": "https://stackoverflow.com/questions/53690391/develcover-impossible-to-mark-branch-as-uncoverable", "title": "Devel::Cover - Impossible to mark branch as uncoverable", "body": "<p>I'm honestly not sure if this is a bug or me missing something. </p>\n\n<p><code>Devel::Cover</code> ignores my <code># uncoverable branch true</code> based on a previous condition somehow.</p>\n\n<p>I have 2 files - <code>Test</code> and <code>Test2</code> - the <code>uncoverable</code> is in <code>Test</code>.</p>\n\n<p>Now when the <em>trigger condition (see below)</em> is not commented out I get 50% branch coverage that looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/28SdQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/28SdQ.png\" alt=\"messed up coverage\"></a></p>\n\n<p>Now comment out the <em>trigger condition</em> and run everything again and I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/j7zTl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j7zTl.png\" alt=\"expected coverage\"></a></p>\n\n<p>The branch is now properly ignored as uncoverable. The only thing that was changed was commenting out the <em>trigger condition</em>.</p>\n\n<p>I really don't understand this behavior - if anybody would be willing to try this out to see if this is me not understanding something or a bug.</p>\n\n<p>Disclaimer: I'm no perl guru :) I tried to simplify this more but I could not reproduce it otherwise - even simplification of this is appreciated - maybe it will help trace to the root cause of it.</p>\n\n<p><strong>EDIT</strong>: I made this repo to make this easier to reproduce: <a href=\"https://github.com/lukaskuzmiak/Devel--Cover_coverage_issue_PoC\" rel=\"nofollow noreferrer\">https://github.com/lukaskuzmiak/Devel--Cover_coverage_issue_PoC</a></p>\n\n<pre><code>package My::Test;\n\nuse 5.026;\nuse strict;\nuse warnings;\n\nuse My::Test2;\n\n\nsub test {\n\n    my $test2 = My::Test2-&gt;new({});\n\n    if ($test2 &gt; 1) { say 'something'; } # let's call this \"trigger condition\"\n\n    # uncoverable branch true\n    $test2-&gt;asdf(\n        {\n            variable =&gt; 'asdf'\n        }\n    ) or say 'something else';\n\n    return 1;\n}\n\n1;\n</code></pre>\n\n<p>And a second <code>Test2</code></p>\n\n<pre><code>package My::Test2;\n\nuse 5.026;\nuse strict;\nuse warnings;\n\nsub new {\n    my ($class, $args) = @_;\n    my $self = {};\n    return bless $self, $class;\n}\n\nsub asdf {\n    my ($class, $args) = @_;\n    return 1;\n}\n\n1;\n</code></pre>\n"}, {"tags": ["linux", "perl", "debian"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 2, "creation_date": 1544238304, "post_id": 53679107, "comment_id": 94216130, "body": "This is a big HTML page, hence using regex may not be the good approach... You should consider using a real HTML parser"}, {"owner": {"reputation": 18344, "user_id": 119326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b29825e83c1da695da0e22b4198a0105?s=128&d=identicon&r=PG", "display_name": "Cfreak", "link": "https://stackoverflow.com/users/119326/cfreak"}, "edited": false, "score": 3, "creation_date": 1544238315, "post_id": 53679107, "comment_id": 94216131, "body": "Parsing HTML with a regex is luck at best. Regex isn&#39;t really the right tool for the job. Check into something like HTML::TokenParser. Also use LWP::Simple to eliminate wget and pull the data directly into your script"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1544250984, "last_edit_date": 1544250984, "creation_date": 1544243196, "answer_id": 53679484, "question_id": 53679107, "link": "https://stackoverflow.com/questions/53679107/extract-information-from-html-using-wget-and-perl/53679484#53679484", "title": "Extract information from HTML using wget and Perl", "body": "<p>First things first: processing HTML using regular expressions is a bad idea.  They are inadequate for the job in principle and borne with trouble in practice. A lot has been written on that.</p>\n\n<p>I understand that you \"only\" want to pick up the titles, but you have on your hands a full-blown HTML document. Issues will keep creeping in, things will get worse, and there'll be no end to that.</p>\n\n<p>Instead, there are many modules that can do parsing of various types of content for you. As for tables, what you need, <a href=\"https://metacpan.org/pod/HTML::TableExtract\" rel=\"noreferrer\">HTML::TableExtract</a> in particular is a most excellent tool.</p>\n\n<p>An HTML document can also be easily retrieved in your script, by a number of good modules.  I use <a href=\"https://metacpan.org/pod/LWP::Simple\" rel=\"noreferrer\">LWP::Simple</a> below but see the full <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"noreferrer\">LWP::UserAgent</a>, and <a href=\"https://mojolicious.org/\" rel=\"noreferrer\">Mojo</a> framework, for example.</p>\n\n<p>For simplicity, I fetch the first table in the document (which happens to be the right one) and only do basic processing for a demo.  I hope that you can take it from there.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse LWP::Simple;\nuse HTML::TableExtract;\n\nuse open qw(:encoding(UTF-8) :std);\n\nmy $url = 'https://nocable.org/tv-listings/2f46-miami-fl';\nmy $page = get($url) or die \"Can't load $url: $!\";\n\nmy $tec = HTML::TableExtract-&gt;new();\n$tec-&gt;parse($page);\n\nforeach my $rowref ($tec-&gt;rows) \n{\n    next if not @$rowref;\n\n    # Clean up undefined/whitespace/newlines, often found in HTML\n    my @row = map { \n        $_ = '' if not defined;  # keep undefined fields for formatting\n        s/^\\s*|\\s*$//g;          #/ leading and trailing whitespace\n        s/\\s+|\\n/ /g;            # multiple spaces, newlines\n        $_                       # return it\n    } @$rowref;\n\n    say join ' | ', @row;\n }\n</code></pre>\n\n<p>Note the undef, white-space, and newline cleaning statements, where an arrayref for each row is \"unpacked\" into an array. There are other ways to do that but I left it raw to show how it goes once you have to get into HTML details with regex.</p>\n\n<p>I change undefined elements to empty strings in case you want to format the table and align its elements for print. I add <code>|</code> between elements for easier review. Please adjust to your needs.</p>\n\n<p>A first few rows, also cut-off for readability </p>\n\n<pre>\nAll | 11:00 pm (ON AIR) | 11:30 pm | 12:00 am | 12:30 am | 1:00 am       ...\nWPBT2HD 2.1 | Celtic Woman: Ancient Land 11:00 pm |  |  |  | Retire Safe ...\nWPBT2-2 2.2 | Globe Trekker Delhi & Agra10:30 pm | Lidia's Kitchen       ... \n...\n</pre>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1544283746, "creation_date": 1544283746, "answer_id": 53684108, "question_id": 53679107, "link": "https://stackoverflow.com/questions/53679107/extract-information-from-html-using-wget-and-perl/53684108#53684108", "title": "Extract information from HTML using wget and Perl", "body": "<p>Why reinvent the wheel? Use <a href=\"http://www.xmltv.org/\" rel=\"nofollow noreferrer\">XMLTV</a> which might already support your program information source. If not why not use the framework and <a href=\"https://github.com/xmltv/xmltv\" rel=\"nofollow noreferrer\">contribute a new grabber for your source</a>?</p>\n\n<p>Look at the other grabbers and e.g. use <a href=\"https://metacpan.org/pod/HTML::TreeBuilder\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a> to parse the HTML into a DOM. Searching for information is much easier on the DOM and less prone to break when some parts of the HTML change.</p>\n"}], "owner": {"reputation": 29, "user_id": 10649327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc1a9ee87650513262f7b229bb6c35d?s=128&d=identicon&r=PG&f=1", "display_name": "DigiSlinger", "link": "https://stackoverflow.com/users/10649327/digislinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544283746, "creation_date": 1544237929, "last_edit_date": 1544238465, "question_id": 53679107, "link": "https://stackoverflow.com/questions/53679107/extract-information-from-html-using-wget-and-perl", "title": "Extract information from HTML using wget and Perl", "body": "<p>I'm trying to write a Perl script that works like a tv guide that displays the current show playing for certain channels, for example Fox(7.1 WSVNH) and ABC(10.1 WPLGH).</p>\n\n<p>The output I'm trying achieve would look like this:</p>\n\n<pre><code>7.1 - Hell's Kitchen\n\n10.1 - 20/20\n\n... and so on\n</code></pre>\n\n<p>(Channel number and current show title)</p>\n\n<p>Here's the site I'm trying to extract HTML from:\n<a href=\"https://nocable.org/tv-listings/2f46-miami-fl\" rel=\"nofollow noreferrer\">https://nocable.org/tv-listings/2f46-miami-fl</a></p>\n\n<p>Here's the command I'm using to execute the script:</p>\n\n<pre><code>wget -O - website | ./script.pl\n</code></pre>\n\n<p>And here's some of the code I'm working on (Note: I'm trying to stick to using regular expression's in Perl for pattern matching as I'm still learning Perl):</p>\n\n<pre><code>#!/usr/bin/perl\nwhile ( &lt;&gt; ) {\n    @htmlstring = m/wplgh(.*?)br/i\n}\nprint @htmlstring;\n</code></pre>\n\n<p>I'm able to extract chunks of html but not what I want. I'm trying to extract the show title. Also I've been thinking it might be best to store show titles in a hash after extracting from the html.</p>\n\n<pre><code>%channel; \n$channel{'7.1'} = $showtitle;\n$channel{'10.1'} = $showtitle;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544206986, "post_id": 53674785, "comment_id": 94207453, "body": "Your regex is not matching the line you think it is because it requires a space immediately before the word Preview, and your input does not have one."}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1544207028, "post_id": 53674785, "comment_id": 94207470, "body": "Ok I missed that  - it is for some reason now skipping the first record."}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 2, "last_activity_date": 1544207113, "creation_date": 1544207113, "answer_id": 53675010, "question_id": 53674785, "link": "https://stackoverflow.com/questions/53674785/parse-service-now-ticket-data-in-perl-inc-and-short-description/53675010#53675010", "title": "Parse service now ticket data in Perl INC and short description", "body": "<p>You need to fix the regex and keep track of the previous line so that you can prepend the number:</p>\n\n<pre><code>use warnings;\nuse strict ;\n\nmy $prevline;\nwhile (my $line = &lt;DATA&gt; ) {\n    next if $line =~ /^$/ ;\n    next if $line =~ /\\(empty\\)/ ;\n    if ($line =~ /Select record for action.*Preview (INC\\d+)/) {\n        my $incnumb = $1;\n        print \"$incnumb $prevline\\n\" ;\n    }\n    $prevline = $line;\n}\n</code></pre>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 53675010, "answer_count": 1, "score": 1, "last_activity_date": 1544207363, "creation_date": 1544205933, "last_edit_date": 1544207363, "question_id": 53674785, "link": "https://stackoverflow.com/questions/53674785/parse-service-now-ticket-data-in-perl-inc-and-short-description", "title": "Parse service now ticket data in Perl INC and short description", "body": "<p>I am trying to parse raw Service now ticket data into just the INC number and the short description. \nThe script below does not throw an error; however, it is not giving me what I want. </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict ;\n\n#my $rawTicket = \"$ARGV[0]\" ;\nmy $line = \"\";\nmy $incnumb = \"\";\n\n#open my $ticketPaste, '&lt;', $rawTicket or die \"Failed to open $rawTicket: $!\\n\";\n#while( $line = &lt;$ticketPaste&gt; ) {\n\nwhile( $line = &lt;DATA&gt; ) {\n    next if $line =~ /^$/ ;\n    next if $line =~ /\\(empty\\)/ ;\n    if ($line =~ /Select record for action.* Preview (INC\\d+)/) {\n            $incnumb = $1;\n    }\n    next if $line =~ /Select record for action/ ;\n\n    print \"$incnumb $line\\n\" ;\n    #sleep 1 ;\n    }\n\n    #    close $ticketPaste or die \"Failed to close $rawTicket: $!\\n\";\n\n##Can't use string (\" \") as a symbol ref while \"strict refs\" in use at ./ticket_watch.pl line 18, &lt;$ticketPaste&gt; line 7. &lt;!-- did not like the 'my line' in line 7 \n\n __END__\n\n(empty)\nCtas\n?Select record for action ?Preview INC1008626119\n(empty)\n\n(empty)\n\n(empty)\nRE: RPM 117036-2 - New Service Request for CASPER\n?Select record for action ?Preview INC1008625854\n(empty)\n\n(empty)\n</code></pre>\n\n<p>This is what it is giving me: </p>\n\n<pre><code>casper@CASPER ~$ ./rawTicketParse.pl\n Ctas\n\n RE: RPM 117036-2 - New Service Request for CASPER\n</code></pre>\n\n<p>However, this is What I am trying to get :  </p>\n\n<pre><code>casper@CASPER ~$ ./rawTicketParse.pl\nINC1008626119 Ctas\n\nINC1008625854  RE: RPM 117036-2 - New Service Request for CASPER\n</code></pre>\n"}, {"tags": ["perl", "db2"], "comments": [{"owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "edited": false, "score": 0, "creation_date": 1544207727, "post_id": 53672400, "comment_id": 94207774, "body": "The problem <i>might</i> be in the usage of <code>gmake</code>. On Unix I would suggest creating an alias <code>gmake=make</code>. On Windows, I don&#39;t know a fix ad hoc."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544212190, "post_id": 53672400, "comment_id": 94209698, "body": "I&#39;m puzzled by the lack of error message. Sure, <code>gmake</code> failed, but why? Probably because some program it tried to execute returned an error, but which one, and why didn&#39;t it produce an error message? I presume there&#39;s some switch that can be passed to <code>gmake</code> to be more verbose..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544212259, "post_id": 53672400, "comment_id": 94209722, "body": "By the way, can you conifirm that <code>D:&#47;SQLLIB</code> exists and that the DB2 driver files are in it? (Maybe provide the directory listing produced by <code>dir d:\\sqllib</code>?)"}, {"owner": {"reputation": 1, "user_id": 10760452, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FftRPOrM07o/AAAAAAAAAAI/AAAAAAAAXFE/Rp5YCgiJh08/photo.jpg?sz=128", "display_name": "Parth Suthar", "link": "https://stackoverflow.com/users/10760452/parth-suthar"}, "edited": false, "score": 0, "creation_date": 1544212583, "post_id": 53672400, "comment_id": 94209866, "body": "D:\\SQLLIB exists` and so does <code>D:\\SQLLIB\\include</code> and <code>D:\\SQLLIB\\lib</code> directory listing is too big for the comment section"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10760452, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FftRPOrM07o/AAAAAAAAAAI/AAAAAAAAXFE/Rp5YCgiJh08/photo.jpg?sz=128", "display_name": "Parth Suthar", "link": "https://stackoverflow.com/users/10760452/parth-suthar"}, "edited": false, "score": 0, "creation_date": 1544652615, "post_id": 53681640, "comment_id": 94357052, "body": "Hi Mao, I tried the ppm install but it failed with the erorr: <code>PPM install failed: The PPD does not provide code to install for this platform</code> when I tried running <code>ppm install http:&#47;&#47;www.bribes.org&#47;perl&#47;ppm&#47;DBD-DB2.ppd</code> and <code>ppm install http:&#47;&#47;www.bribes.org&#47;perl&#47;ppm64&#47;DBD-DB2.ppd</code> I also tried <code>CPAN install DBD::DB2</code> which says there are errors in my DB2 instance. currently running Db2 11.1.4fp4"}, {"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "reply_to_user": {"reputation": 1, "user_id": 10760452, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FftRPOrM07o/AAAAAAAAAAI/AAAAAAAAXFE/Rp5YCgiJh08/photo.jpg?sz=128", "display_name": "Parth Suthar", "link": "https://stackoverflow.com/users/10760452/parth-suthar"}, "edited": false, "score": 0, "creation_date": 1544682790, "post_id": 53681640, "comment_id": 94364671, "body": "If Strawberry-Perl is still installed then you&#39;ve not understood the answer. If you already switched to ActiveState Perl, then you should create a new question."}], "tags": [], "owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "is_accepted": false, "score": 0, "last_activity_date": 1544265156, "creation_date": 1544265156, "answer_id": 53681640, "question_id": 53672400, "link": "https://stackoverflow.com/questions/53672400/dbddb2-installation-failing-because-of-test-using-cpan-on-strawberry-perl/53681640#53681640", "title": "DBD::DB2 installation failing because of test using cpan on Strawberry Perl", "body": "<p>According to this <a href=\"http://www-01.ibm.com/support/docview.wss?rs=71&amp;uid=swg21297335\" rel=\"nofollow noreferrer\">technote</a>, IBM India (possibly the maintainers of DBD:DB2) supports DBD:DB2 for Windows with ActiveState Perl. The technote also shows how to use ppm to get the pre-built module.</p>\n\n<p>If you don't care about which Perl supplier , consider using Activestate Perl for Windows. If you must persist with Strawberry Perl, read on.</p>\n\n<p>The current V11.1 Db2-LUW <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSEPGG_11.1.0/com.ibm.swg.im.dbclient.perl.doc/doc/c0006687.html\" rel=\"nofollow noreferrer\">documentation</a> also says in addition to ActiveState Perl, that 32-bit Strawberry-Perl is supported with this statement:</p>\n\n<blockquote>\n  <p>The working versions of Perl that works with Db2 are Activestate Perl\n  and 32-bit Strawberry Perl. For 32-bit Strawberry Perl specifically,\n  you must email opendev@us.ibm.com or contact IBM support for the\n  required binaries.</p>\n</blockquote>\n\n<p>If you have a support contract for Db2, you might want to check with them if the Db2 documentation is accurate (frequently for non-core stuff, it is inaccurate, out of date, misleading etc), and whether they can issue 64-bit binaries for DBD::DB2.</p>\n\n<p>Looking at the <a href=\"https://metacpan.org/pod/distribution/DBD-DB2/Changes\" rel=\"nofollow noreferrer\">CPAN</a> page for changes to DBD:DB2, seems the most recent change was in 2012. So it is unclear if this module is maintained currently.</p>\n\n<p>On the same site, there is also a reported <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=87877\" rel=\"nofollow noreferrer\">issue</a> opened in 2013, that DBD:DB2 fails to build with Strawberry perl. </p>\n\n<p>I'm sure that a determined C programmer would be able to resolve the issue...the question is whether there are enough users to bother...</p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 1750851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c759e38c5b9869093695c5fb0220812?s=128&d=identicon&r=PG", "display_name": "hrodic", "link": "https://stackoverflow.com/users/1750851/hrodic"}, "is_accepted": false, "score": 0, "last_activity_date": 1609914762, "creation_date": 1609914762, "answer_id": 65591186, "question_id": 53672400, "link": "https://stackoverflow.com/questions/53672400/dbddb2-installation-failing-because-of-test-using-cpan-on-strawberry-perl/65591186#65591186", "title": "DBD::DB2 installation failing because of test using cpan on Strawberry Perl", "body": "<p>I've found a work around for this, just insert this the following files:</p>\n<ul>\n<li>Constants/Constants.xs</li>\n<li>DB2.h</li>\n</ul>\n<pre class=\"lang-c prettyprint-override\"><code> #ifndef __DBD_DBI_FIX__\n #define __DBD_DBI_FIX__\n     #include &lt;specstrings.h&gt;\n     #ifndef __out_ecount_opt\n         #define __out_ecount_opt    SAL__out_ecount_opt\n     #endif\n     #ifndef __in_ecount_opt\n         #define __in_ecount_opt  SAL__in_ecount_opt\n     #endif\n     #ifndef __out_bcount_opt\n         #define __out_bcount_opt    SAL__out_bcount_opt\n     #endif\n #endif\n</code></pre>\n<p>The full fix is here:\n<a href=\"https://github.com/ro-ag/DBD-DB2-1.86/commit/1ad9d4163656d9830fd567caf6d57603045ee392\" rel=\"nofollow noreferrer\">https://github.com/ro-ag/DBD-DB2-1.86/commit/1ad9d4163656d9830fd567caf6d57603045ee392</a></p>\n<p>You may also direct install it from a PPM package I've create for Windows 10:\n<a href=\"https://github.com/ro-ag/Perl-64-PPM/raw/master/PPM-64/DBD-DB2.tar.gz\" rel=\"nofollow noreferrer\">https://github.com/ro-ag/Perl-64-PPM/raw/master/PPM-64/DBD-DB2.tar.gz</a></p>\n<p>The cpan module is forgotten i've sent several e-mails to IBM to include this fix without success.</p>\n"}], "owner": {"reputation": 1, "user_id": 10760452, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FftRPOrM07o/AAAAAAAAAAI/AAAAAAAAXFE/Rp5YCgiJh08/photo.jpg?sz=128", "display_name": "Parth Suthar", "link": "https://stackoverflow.com/users/10760452/parth-suthar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1609914762, "creation_date": 1544196231, "question_id": 53672400, "link": "https://stackoverflow.com/questions/53672400/dbddb2-installation-failing-because-of-test-using-cpan-on-strawberry-perl", "title": "DBD::DB2 installation failing because of test using cpan on Strawberry Perl", "body": "<p>I am very new to perl and I am trying to install DBD::DB2 module for perl on a windows PC using cpan but I keep getting this error:</p>\n\n<pre><code>CPAN: CPAN::SQLite loaded ok (v0.212)\nDatabase was generated on Thu, 06 Dec 2018 20:55:19 GMT\n\nRunning install for module 'DBD::DB2'\nCPAN: Digest::SHA loaded ok (v6.02)\nCPAN: Compress::Zlib loaded ok (v2.081)\nChecksum for D:\\STRAWB~1\\cpan\\sources\\authors\\id\\I\\IB\\IBMTORDB2\\DBD-DB2-1.85.tar.gz ok\nCPAN: Archive::Tar loaded ok (v2.32)\nCPAN: YAML::XS loaded ok (v0.75)\nCPAN: CPAN::Meta::Requirements loaded ok (v2.140)\nCPAN: Parse::CPAN::Meta loaded ok (v2.150010)\nCPAN: CPAN::Meta loaded ok (v2.150010)\nConfiguring I/IB/IBMTORDB2/DBD-DB2-1.85.tar.gz with Makefile.PL\n\nConfiguring DBD::DB2...\nRemember to actually read the README and CAVEATS files!\n\nUsing DB2 in \"D:/SQLLIB\"\nSystem: perl5.028001 DBI1.642 Win32 strawberry-perl 5.28.1.1 #1 Sun Dec  2 14:24:00 2018 x64 MSWin32-x64-multi-thread dl_win32.xs\nCompiler: gcc -s -O2  -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields\nIncludes:  -I\"D:/SQLLIB/include\" -I\"D:\\STRAWB~1\\perl\\site\\lib/auto/DBI\" -I\"D:\\STRAWB~1\\perl\\lib/auto/DBI\" -I\"D:\\STRAWB~1\\perl\\vendor\\lib/auto/DBI\" -I\"D:\\STRAWB~1\\perl\\site\\lib/auto/DBI\" \nLibraries: -L\"D:/SQLLIB/lib\" db2cli.lib db2api.lib\n\nChecking if your kit is complete...\nLooks good\nChecking if your kit is complete...\nLooks good\nWriting MYMETA.yml and MYMETA.json\nGenerating a gmake-style Makefile\nWriting Makefile for DBD::DB2\nWriting MYMETA.yml and MYMETA.json\nIBMTORDB2/DBD-DB2-1.85.tar.gz\nD:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- OK\nRunning make for I/IB/IBMTORDB2/DBD-DB2-1.85.tar.gz\nCPAN: Module::CoreList loaded ok (v5.20181130)\ncp DB2.pm blib\\lib\\DBD\\DB2.pm\ncp DB2.pod blib\\lib\\DBD\\DB2.pod\ncp lib/Bundle/DBD/DB2.pm blib\\lib\\Bundle\\DBD\\DB2.pm\ngmake[1]: Entering directory 'D:/STRAWB~1/cpan/build/DBD-DB2-1.85-10/Constants'\nAutoSplitting ..\\blib\\lib\\DBD\\DB2\\Constants.pm     (..\\blib\\lib\\auto\\DBD\\DB2\\Constants)\nRunning Mkbootstrap for Constants ()\n\"D:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e chmod -- 644     \"Constants.bs\"\n\"D:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command::MM -e cp_nonempty -- Constants.bs    ..\\blib\\arch\\auto\\DBD\\DB2\\Constants\\Constants.bs 644\n\"D:\\Strawberry\\perl\\bin\\perl.exe\"    \"D:\\Strawberry\\perl\\lib\\ExtUtils/xsubpp\"  -typemap   D:\\STRAWB~1\\perl\\lib\\ExtUtils\\typemap  Constants.xs &gt; Constants.xsc\n\"D:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e mv -- Constants.xsc Constants.c\ngcc -c -I\"D:/SQLLIB/include\" -I\"D:\\STRAWB~1\\perl\\site\\lib/auto/DBI\" -I\"D:\\STRAWB~1\\perl\\lib/auto/DBI\" -I\"D:\\STRAWB~1\\perl\\vendor\\lib/auto/DBI\" -I\"D:\\STRAWB~1\\perl\\site\\lib/auto/DBI\"   -I\"D:/SQLLIB/include\" -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -s -O2   -DVERSION=\\\"1.85\\\" -DXS_VERSION=\\\"1.85\\\"  \"-ID:\\STRAWB~1\\perl\\lib\\CORE\" -   DDB2_CACHE_FIX    Constants.c\ngmake[1]: Leaving directory 'D:/STRAWB~1/cpan/build/DBD-DB2-1.85-10/Constants'\nIBMTORDB2/DBD-DB2-1.85.tar.gz\nD:\\STRAWB~1\\c\\bin\\gmake.exe -- NOT OK\nStopping: 'install' failed for 'DBD::DB2'.\n</code></pre>\n\n<p>I tried to copying the DBD::DB2 module form another computer but that did not work and gave me error Can't locate loadable object for module DBD::DB2::Constants in @INC \nAny help is appreciated.</p>\n"}, {"tags": ["perl", "memory-mapped-files"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1544193498, "post_id": 53671315, "comment_id": 94200680, "body": "What is the difference between using <code>File::Map</code> and using a filehandle with read-write access (e.g., opened in <code>+&lt;</code> mode)? When you work with a read-write filehandle, you also have to be careful not to clobber existing data and to truncate it if you shrink the file, but it is still useful sometimes."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1544206285, "post_id": 53671686, "comment_id": 94207164, "body": "Additional benefits of using Path::Tiny: there is also edit_lines to work line-by-line; all edits are done safely by writing to a temporary file then renaming it over the original atomically; and edit and edit_lines have a _utf8 version which is likely to be what you want whenever editing a text file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1544211018, "post_id": 53671686, "comment_id": 94209237, "body": "Re &quot;<i>I&#39;m not sure how to trigger it (maybe with self-assignment, <code>$foo = $foo</code>?)</i>&quot;, Perl strings are mutable. That path is taken when the string buffer is modified rather than replaced, such as when using <code>substr($s, 2, 1, &#39;!&#39;)</code>. This is the proper way to modify the mapped memory."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544211213, "post_id": 53671686, "comment_id": 94209327, "body": "Re &quot;<i>That is, writing through an mmap&#39;d variable is not efficient</i>&quot;, hmmm, not really. The warning is not a performance warning. The GET magic added to the scalar makes it so all changes to the string --even when done correctly using <code>substr($s, 2, 1, &#39;!&#39;)</code>-- result in a sub call. And while this is a relatively expensive operation, it&#39;s not that expensive (espcially since the sub in question is written in C)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544211393, "post_id": 53671686, "comment_id": 94209396, "body": "@ikegami I&#39;ve edited that part of my answer. Hopefully it&#39;s more accurate now. As for efficiency: It literally says &quot;<i>it&#39;s not possible to write a mapping implementation that allows direct assignment yet performs well</i>&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544211448, "post_id": 53671686, "comment_id": 94209421, "body": "Yes. But since the module supports direct assignment, the penalty is constant whether you use code that warns or not. So, 1) that&#39;s not what the warning is about. And 2) the penalty is actually pretty small (a sub call for every change to the scalar + a memcpy if you replaced the buffer)."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 6, "last_activity_date": 1544211540, "last_edit_date": 1592644375, "creation_date": 1544193532, "answer_id": 53671686, "question_id": 53671315, "link": "https://stackoverflow.com/questions/53671315/how-to-properly-write-to-a-file-using-filemap/53671686#53671686", "title": "How to properly write to a file using File::Map?", "body": "<p>The <a href=\"https://metacpan.org/pod/release/LEONT/File-Map-0.55/lib/File/Map.pm#Advantages-of-this-module-over-other-similar-modules\" rel=\"nofollow noreferrer\">first quote</a>,</p>\n<blockquote>\n<p>Files are mapped into a variable that can be read just like any other variable, and it can be written to using standard Perl techniques such as regexps and <code>substr</code>.</p>\n</blockquote>\n<p>is under the heading &quot;Simplicity&quot;.</p>\n<p>And it is true: You can simply write Perl code that manipulates strings and the data will end up in the file.</p>\n<p>However, in the section <a href=\"https://metacpan.org/pod/release/LEONT/File-Map-0.55/lib/File/Map.pm#Warnings\" rel=\"nofollow noreferrer\">Warnings</a> we have:</p>\n<blockquote>\n<p>Writing directly to a memory mapped file is not recommended</p>\n<p>Due to the way perl works internally, it's not possible to write a mapping implementation that allows direct assignment yet performs well. As a compromise, File::Map is capable of fixing up the mess if you do it nonetheless, but it will warn you that you're doing something you shouldn't. This warning is only given when <code>use warnings 'substr'</code> is in effect.</p>\n</blockquote>\n<p>That is, writing through an mmap'd variable is not efficient unless the modification of the string buffer can be done in place (the string has to be assembled and stored in memory first and is only copied over to the file afterwards). If you're OK with this, you can disable the warning with <code>no warnings 'substr'</code>.</p>\n<blockquote>\n<p>Additionally, looking at the code, there seems to be only one use case in which writing doesn't result in a warning at all, though I don't understand how I'm able to trigger that.</p>\n</blockquote>\n<p>That's the case where you're trying to write a buffer to itself. This happens when a scalar is actually modified in place. The other cases are workarounds for when the string buffer is replaced (e.g. because it's overwritten: <code>$foo = $bar</code>). For a real in-place modification no extra work is necessary and you don't get the warning.</p>\n<p>But this doesn't help you because growing a string cannot be done in-place with a fixed size mapped buffer.</p>\n<p>Changing the size of the file is not possible. This is not because of File::Map, but because the underlying <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\"><code>mmap</code> system call</a> works on fixed size mappings and does not provide any option to resize files automatically.</p>\n<p>If you need to edit files (especially small files), I recommend using <a href=\"https://metacpan.org/pod/Path::Tiny#edit,-edit_raw,-edit_utf8\" rel=\"nofollow noreferrer\"><code>edit</code> in Path::Tiny</a> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1544274565, "post_id": 53675431, "comment_id": 94222527, "body": "Could you please add examples for replacements using regexps as well? Because that is mentioned in my question. <code>perl -MFile::Map=map_file -we&quot;map_file my $map, &#39;scratch&#39;, &#39;+&lt;&#39;; $map =~ s&#47;^.&#47;1&#47;&quot;</code> vs. <code>perl -MFile::Map=map_file -we&quot;map_file my $map, &#39;scratch&#39;, &#39;+&lt;&#39;; $map =~ s&#47;.$&#47;11&#47;&quot;</code> The latter leads to a warning as it increases the buffer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1544278448, "post_id": 53675431, "comment_id": 94223532, "body": "Again, the mapping has a fixed size, so you can&#39;t do that"}, {"owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1544367439, "post_id": 53675431, "comment_id": 94242487, "body": "I understood that and just wanted to provide one example showing that it not only works with using <code>substr</code> and the corresponding case not working anymore because the size of the buffer is increased."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "edited": false, "score": 0, "creation_date": 1544390806, "post_id": 53675431, "comment_id": 94249033, "body": "I added to an example that shows that s/// can modify in place, but there was already an example showing attempting to change the size of the map fails."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1546923399, "last_edit_date": 1546923399, "creation_date": 1544209332, "answer_id": 53675431, "question_id": 53671315, "link": "https://stackoverflow.com/questions/53671315/how-to-properly-write-to-a-file-using-filemap/53675431#53675431", "title": "How to properly write to a file using File::Map?", "body": "<p>An mmap is a fixed-sized mapping of a portion of a file to memory.</p>\n\n<p>The various mapping functions set the string buffer of the provided scalar to the mapped memory page. The OS will reflect any changes to that buffer to the file and vice versa if requested.</p>\n\n<p>The proper way to work with an mmap is to <em>modify</em> the string buffer, not replace it.</p>\n\n<ul>\n<li><p>Anything that changes the string buffer without changing its size is appropriate.</p>\n\n<pre><code>$ perl -e'print \"\\0\"x16' &gt;scratch\n\n$ perl -MFile::Map=map_file -we'\n   map_file my $map, \"scratch\", \"+&lt;\";\n   $map =~ s/\\x00/\\xFF/g;             # ok\n   substr($map, 6, 2, \"00\");          # ok\n   substr($map, 8, 2) = \"11\";         # ok\n   substr($map, 7, 2) =~ s/../22/;    # ok\n'\n\n$ hexdump -C scratch\n00000000  ff ff ff ff ff ff 30 32  32 31 ff ff ff ff ff ff  |......0221......|\n00000010\n</code></pre></li>\n<li><p>Anything that replaces the string buffer (such as assigning to the scalar) is not ok.</p>\n\n<p>...kinda. The module notices you've replaced the scalar's buffer. It proceeds to copy the contents of the new buffer to the mapped memory, then replaces the scalar's buffer with the pointer to the mapped memory.</p>\n\n<pre><code>$ perl -e'print \"\\0\"x16' &gt;scratch\n\n$ perl -MFile::Map=map_file -we'\n   map_file my $map, \"scratch\", \"+&lt;\";\n   $map = \"4\" x 16;  # Effectively: substr($map, 0, 16, \"4\" x 16)\n'\nWriting directly to a memory mapped file is not recommended at -e line 3.\n\n$ hexdump -C scratch\n00000000  34 34 34 34 34 34 34 34  34 34 34 34 34 34 34 34  |4444444444444444|\n00000010\n</code></pre>\n\n<p>Aside from the warning can be silenced using <code>no warnings qw( substr );</code>,<sup>[1]</sup> the only down side is that doing this way requires using <code>memcpy</code> to copy <code>length($map)</code> bytes, while using <code>substr($map, $pos, length($repl), $repl)</code> only requires copying <code>length($repl)</code> bytes.</p></li>\n<li><p>Anything that changes the size of string buffer is not ok.</p>\n\n<pre><code>$ perl -MFile::Map=map_file -we'\n   map_file my $map, \"scratch\", \"+&lt;\";\n   $map = \"5\" x 32;  # Effectively: substr($map, 0, 16, \"5\" x 16)\n'\nWriting directly to a memory mapped file is not recommended at -e line 3.\nTruncating new value to size of the memory map at -e line 3.\n\n$ hexdump -C scratch\n00000000  35 35 35 35 35 35 35 35  35 35 35 35 35 35 35 35  |5555555555555555|\n00000010\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>WARNING: The module doesn't warn if you shrink the buffer, even though this has no effect except to clobber one of the bytes with a NUL.</p>\n\n<pre><code>$ perl -e'print \"\\0\"x16' &gt;scratch\n\n$ perl -MFile::Map=map_file -we'\n   map_file my $map, \"scratch\", \"+&lt;\";\n   substr($map, 0, 16, \"6\" x 16);\n   substr($map, 14, 2, \"\");\n'\n\n$ hexdump -C scratch\n00000000  36 36 36 36 36 36 36 36  36 36 36 36 36 36 00 36  |66666666666666.6|\n00000010\n</code></pre>\n\n<p>I've submitted a <a href=\"https://rt.cpan.org/Ticket/Display.html?id=127961\" rel=\"nofollow noreferrer\">ticket</a>.</p>\n\n<hr>\n\n<ol>\n<li>This is somewhat ironic, seeing as it more or less warns when not using <code>substr</code>, but I suppose it also warn when using <code>substr</code> \"incorrectly\".</li>\n</ol>\n"}], "owner": {"reputation": 2566, "user_id": 2055163, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/38e40a8a1f83778784f9ffbed05584ed?s=128&d=identicon&r=PG", "display_name": "Thorsten Sch&#246;ning", "link": "https://stackoverflow.com/users/2055163/thorsten-sch%c3%b6ning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 1, "accepted_answer_id": 53675431, "answer_count": 2, "score": 8, "last_activity_date": 1546923399, "creation_date": 1544192092, "last_edit_date": 1592644375, "question_id": 53671315, "link": "https://stackoverflow.com/questions/53671315/how-to-properly-write-to-a-file-using-filemap", "title": "How to properly write to a file using File::Map?", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/File::Map\" rel=\"noreferrer\">File::Map</a> often to map especially small text files into memory and e.g. process some read-only regular expressions on those. Now I have a use case in which I need to replace some text in the file as well and thought that I can still use <code>File::Map</code>, because it documents the following:</p>\n<blockquote>\n<p>Files are mapped into a variable that can be read just like any other variable, and it can be written to using standard Perl techniques such as regexps and substr.</p>\n</blockquote>\n<p>While the data I'm interested in to replace is properly replaced within the file, I'm losing data because the file keeps its original size and data is truncated in the end. The new data is a little bit larger than the old one. Both things are warned about as documented using the following sentences:</p>\n<blockquote>\n<p>Writing directly to a memory mapped file is not recommended</p>\n<p>Truncating new value to size of the memory map</p>\n</blockquote>\n<p>The explanations to both warnings read like one shouldn't ever write anything using <code>File::Map</code>, but it might work in cases one can either live with truncated files or the overall file size is simply not changed at all. But the first quote explicitly mentions writes as supported without any exception from that rule.</p>\n<p>So, is there some special way to safely write using <code>File::Map</code>, e.g. getting the underlying file increased and such? The first warning uses the wording <code>directly</code>, which I have the feeling that there's some other, better supported way to write?</p>\n<p>I'm simply using <code>=~ s///</code> on the mapped view currently, which seems to be the wrong approach. I couldn't even find anyone trying to write using <code>File::Map</code> at all, only the official tests which do exactly what I do and expect the warnings I get. Additionally, looking at the code, there seems to be only one use case in which writing doesn't result in a warning at all, though I don't understand how I'm able to trigger that:</p>\n<pre><code>static int mmap_write(pTHX_ SV* var, MAGIC* magic) {\n        struct mmap_info* info = (struct mmap_info*) magic-&gt;mg_ptr;\n        if (!SvOK(var))\n                mmap_fixup(aTHX_ var, info, NULL, 0);\n        else if (!SvPOK(var)) {\n                STRLEN len;\n                const char* string = SvPV(var, len);\n                mmap_fixup(aTHX_ var, info, string, len);\n        }\n        else if (SvPVX(var) != info-&gt;fake_address)\n                mmap_fixup(aTHX_ var, info, SvPVX(var), SvCUR(var));\n        else\n                SvPOK_only_UTF8(var);\n        return 0;\n}\n</code></pre>\n<p><a href=\"https://metacpan.org/source/LEONT/File-Map-0.55/lib/File/Map.xs#L240\" rel=\"noreferrer\">https://metacpan.org/source/LEONT/File-Map-0.55/lib/File/Map.xs#L240</a></p>\n<p>After all, if writing should be avoided at all, why do the docs explicitly mention it as supported? Doesn't look supported to me if it results at least in a warning in all cases but one.</p>\n"}, {"tags": ["perl", "soap", "otrs"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3, "user_id": 9829115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bdb24b8cfeabe3d6845aabe0877b26?s=128&d=identicon&r=PG&f=1", "display_name": "abahko", "link": "https://stackoverflow.com/users/9829115/abahko"}, "edited": false, "score": 0, "creation_date": 1544174593, "post_id": 53666273, "comment_id": 94190840, "body": "The second is better if you&#39;re getting more than just one value."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1544173420, "creation_date": 1544173420, "answer_id": 53666273, "question_id": 53666159, "link": "https://stackoverflow.com/questions/53666159/accessing-specific-otrs-dynamic-field-value-via-soap/53666273#53666273", "title": "Accessing Specific OTRS Dynamic Field value via SOAP", "body": "<pre><code>my $fields = $Body-&gt;{$ResponseKey}{Ticket}{DynamicField};\n\nmy ($ref_date) =\n   map $_-&gt;{Value},\n      grep $_-&gt;{Name} eq 'RefDate',\n         @$fields;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %fields;\n$fields{ $_-&gt;{Name} } = $fields{ $_-&gt;{Value} }\n   for @{ $Body-&gt;{$ResponseKey}{Ticket}{DynamicField} };\n\nmy $ref_date = $fields{RefDate};\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9829115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bdb24b8cfeabe3d6845aabe0877b26?s=128&d=identicon&r=PG&f=1", "display_name": "abahko", "link": "https://stackoverflow.com/users/9829115/abahko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 53666273, "answer_count": 1, "score": 0, "last_activity_date": 1544173420, "creation_date": 1544172955, "question_id": 53666159, "link": "https://stackoverflow.com/questions/53666159/accessing-specific-otrs-dynamic-field-value-via-soap", "title": "Accessing Specific OTRS Dynamic Field value via SOAP", "body": "<p>How do I further access this dynamic field value? Upon using below dumper,</p>\n\n<pre><code>print Dumper( $Body-&gt;{$ResponseKey} );\n</code></pre>\n\n<p>The result is :</p>\n\n<pre><code>$VAR1 = {\n          'Ticket' =&gt; {\n                      'Title' =&gt; 'TPLUS Service PIC',\n                      'DynamicField' =&gt; [\n                                        {\n                                          'Value' =&gt; '43312',\n                                          'Name' =&gt; 'BugID'\n                                        },                                       \n                                        {\n                                          'Value' =&gt; '6',\n                                          'Name' =&gt; 'OTRSMV'\n                                        },\n                                        {\n                                          'Value' =&gt; '6.13',\n                                          'Name' =&gt; 'OTRSPLV'\n                                        },\n                                        {\n                                          'Value' =&gt; 'Dev',\n                                          'Name' =&gt; 'OTRSUse'\n                                        },\n                                        {\n                                          'Value' =&gt; '2018-03-02 00:28:00',\n                                          'Name' =&gt; 'RefDate'\n                                        },\n                                        {\n                                          'Value' =&gt; '0',\n                                          'Name' =&gt; 'RefNumber'\n                                        },\n                                        {\n                                          'Value' =&gt; '',\n                                          'Name' =&gt; 'StartTime'\n                                        }\n                                      ],\n                      'StateType' =&gt; 'open',\n                      'SLAID' =&gt; ''\n                }\n    };\n</code></pre>\n\n<p>How can I access the single value of DynamicField->RefDate ? Thanks</p>\n"}, {"tags": ["linux", "perl", "rsync", "centos6", "mod-perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544170400, "post_id": 53663359, "comment_id": 94188825, "body": "Can you get any <code>rsync</code> to work programmatically? Any issues with (programmatic) <code>ssh</code> logins, garbage in output, etc?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544172493, "post_id": 53663359, "comment_id": 94189751, "body": "Thoughts: Add <code>-e &#39;ssh -v&#39;</code> for hopefully more detail on <code>ssh</code>; Try to look into remote&#39;s <code>rsync</code> daemon log; Try to print the <code>$cmd</code> and copy-paste it to terminal (if you haven&#39;t); An <a href=\"https://rsync.samba.org/issues.html\" rel=\"nofollow noreferrer\">rsync page</a> shows a debugging shell script to install on then remote system"}, {"owner": {"reputation": 97, "user_id": 3727869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d8afe01024b9d60f9f57330dbb21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Shovas", "link": "https://stackoverflow.com/users/3727869/shovas"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544198959, "post_id": 53663359, "comment_id": 94203703, "body": "@zdim Yes, these same programmatic rsync commands works programmatically on 50%+ of executions. Just sometimes they don&#39;t."}, {"owner": {"reputation": 97, "user_id": 3727869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d8afe01024b9d60f9f57330dbb21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Shovas", "link": "https://stackoverflow.com/users/3727869/shovas"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544198974, "post_id": 53663359, "comment_id": 94203716, "body": "@zdim Thanks, I&#39;ll try the -e idea"}, {"owner": {"reputation": 97, "user_id": 3727869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d8afe01024b9d60f9f57330dbb21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Shovas", "link": "https://stackoverflow.com/users/3727869/shovas"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544205074, "post_id": 53663359, "comment_id": 94206650, "body": "@zdim I tried adding in -e &#39;ssh -v&#39; and while it&#39;s nice verbose output it didn&#39;t provide me any clues about how to diagnose the issue. Thanks, though"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 3727869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d8afe01024b9d60f9f57330dbb21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Shovas", "link": "https://stackoverflow.com/users/3727869/shovas"}, "edited": false, "score": 0, "creation_date": 1544377873, "post_id": 53678446, "comment_id": 94245363, "body": "It&#39;s not technically a heisenbug, it&#39;s just randomly failing. Yes, I&#39;ve put in retries. The thing I find odd is when it fails and retries it will <i>always</i> fail but you can run it on a subsequent request and it works. I did check local and remote logs, nothing that I could identify that would highlight the root cause. I can run the command by hand and it works so yes there&#39;s enough disk space, directories exist, remote and local ssh versions are the same. Thanks for the advice."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1544229716, "last_edit_date": 1544229716, "creation_date": 1544229412, "answer_id": 53678446, "question_id": 53663359, "link": "https://stackoverflow.com/questions/53663359/rsync-system-execution-in-perl-fails-randomly-with-protocol-error/53678446#53678446", "title": "Rsync system() execution in Perl fails randomly with protocol error", "body": "<p>If this is a real <a href=\"https://en.wikipedia.org/wiki/Heisenbug\" rel=\"nofollow noreferrer\">heisenbug</a>, you could retry rsync maybe three times with some sleep between:</p>\n\n<pre><code>for my $n (1..3){\n   my $exitCode = system($cmd);\n   my_log_sub(\"SUCCESS: rsync succeded on try $n\") + last if $exitCode==0;\n   my_log_sub(\"ERROR: rsync $n of 3 failed: $cmd $! $?\");\n   sleep(1) if $n&lt;3;\n}\n</code></pre>\n\n<p>Have you checked your local and remote logs? Try <code>sudo ls -rtl /var/log/</code> or <code>sudo ls -rtl /var/log/httpd/</code> right after a fail and <code>tail -f /var/log/one_of_the_newest_logs</code> while retrying.</p>\n\n<p>Have you checked if the remote disk is full or if the directory exists? Firewall issue? Remote and local rsync or ssh versions are (very) different? (although I guess that should show a clearer error message)</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 3727869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d8afe01024b9d60f9f57330dbb21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Shovas", "link": "https://stackoverflow.com/users/3727869/shovas"}, "is_accepted": true, "score": 0, "last_activity_date": 1549388090, "creation_date": 1549388090, "answer_id": 54540076, "question_id": 53663359, "link": "https://stackoverflow.com/questions/53663359/rsync-system-execution-in-perl-fails-randomly-with-protocol-error/54540076#54540076", "title": "Rsync system() execution in Perl fails randomly with protocol error", "body": "<p>The solution was to change system() to backticks. Seriously. I don't know why it works.</p>\n\n<p>The change is literally this:</p>\n\n<pre><code># BAD:\n$exitCode = system($cmd);\n# GOOD:\n`$cmd`;\n</code></pre>\n\n<p>If I had to guess I'd say there's some subtle difference with how the shell is being initialized, maybe some environment variables or memory locations not being cleaned properly. I really don't know, though.</p>\n"}], "owner": {"reputation": 97, "user_id": 3727869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d8afe01024b9d60f9f57330dbb21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Shovas", "link": "https://stackoverflow.com/users/3727869/shovas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 1, "accepted_answer_id": 54540076, "answer_count": 2, "score": 1, "last_activity_date": 1549388090, "creation_date": 1544157515, "question_id": 53663359, "link": "https://stackoverflow.com/questions/53663359/rsync-system-execution-in-perl-fails-randomly-with-protocol-error", "title": "Rsync system() execution in Perl fails randomly with protocol error", "body": "<p>We commonly call <code>rsync</code> in (Mod)Perl (and PHP) and haven't run into too many issues but we are running into an occassional protocol error when running a command that when run on a subsequent request goes through fine. The funny thing is even if I retry in code, for the same http request, it will fail every time, but if you make another http request it will likely succeed.</p>\n\n<p>Code looks like this:</p>\n\n<pre><code>$cmd = sprintf('rsync -auvvv --rsync-path=\"rsync --log-file=/tmp/ui-rsync.log\" %s %s', \"$fromDir/$fromBase/\", \"$path/$toBase/\");\n$exitCode = system($cmd);\n</code></pre>\n\n<p>The --rsync-path argument was added in there later for debugging. It was unhelpful. It fails either way.</p>\n\n<p>The errors look like this:</p>\n\n<pre><code>rsync: connection unexpectedly closed (0 bytes received so far) [sender]\nrsync error: error in rsync protocol data stream (code 12) at io.c(600) [sender=3.0.6]\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>unexpected tag 93 [receiver]\nrsync error: error in rsync protocol data stream (code 12) at io.c(1134) [receiver=3.0.6]\nrsync: connection unexpectedly closed (9 bytes received so far) [sender]\nrsync error: error in rsync protocol data stream (code 12) at io.c(600) [sender=3.0.6]\n</code></pre>\n\n<p>I debug the actual generated commands and I can run them by-hand fine.</p>\n\n<p>The http user can run the commands fine.</p>\n\n<p>Again, a programmatic retry <em>never</em> works, but a manually retry (hitting the same http endpoint that triggers it), works almost always.</p>\n\n<p>Appreciate any help as this has been driving us crazy for...a long time, with many fixes tried.</p>\n"}, {"tags": ["python", "shell", "perl"], "comments": [{"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 1, "creation_date": 1544147906, "post_id": 53662125, "comment_id": 94182660, "body": "Can you please elaborate what this <i>same-ness</i> means?   Just the filename? In your example, <code>2.7.2</code> <code>_ssl.so</code> is really not the same (probably) as the one from <code>2.7.5</code>.  But it does have the same name.  Maybe if the names are the same, the code could calculate a checksum of the file or suchlike to determine if they really are identical.  Then &quot;find&quot; the match with the last amount of path letter-differences."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544171264, "post_id": 53662125, "comment_id": 94189220, "body": "I see you went back to &quot;source&quot; and &quot;destination&quot;, but those names make no sense since you&#39;re not copying. Orig/old and new make more sense."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544171293, "post_id": 53662125, "comment_id": 94189233, "body": "Also... <code>return 0</code> on error? What&#39;s up with that???"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1544178710, "post_id": 53662125, "comment_id": 94192876, "body": "Do you want the tool to iterate <code>file.txt</code> (list of filenames) and if a file does not exist on B, it should use some heuristic approach to check if a &quot;similar&quot; file could exists instead? (If so, then <i>&quot;similar&quot;</i> should first be more closely defined I think)"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1544230397, "post_id": 53662125, "comment_id": 94215023, "body": "As far as I understand, you have a list of directories on A where for each dir you want to output true or false on whether the dir exists on machine B."}], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1544230537, "creation_date": 1544230537, "answer_id": 53678545, "question_id": 53662125, "link": "https://stackoverflow.com/questions/53662125/comparing-paths-between-two-different-machine/53678545#53678545", "title": "Comparing paths between two different machine", "body": "<p>As far as I understand, you have a list of directories on A where for each dir you want to output true or false on whether the dir exists on machine B</p>\n\n<pre><code>find /etc/ -type d &gt; /tmp/dirlist\ncat /tmp/dirlist | ssh B \"perl -nle'print q().(-d\\$_?q(yes):q(no)).qq( \\$_)'\"\n</code></pre>\n\n<p>...where B is your other machine. Replace <code>B</code> with <code>username@remote.server.org</code> or something. Remember ssh can invoke any command on the remote server which get the same stdin and stdout. The default is the users shell (for instance bash). The <code>q(string)</code> and <code>qq()</code> quotation methods are just to avoid using <code>'</code> and <code>\"</code> since I have used up those already.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544230537, "creation_date": 1544147069, "question_id": 53662125, "link": "https://stackoverflow.com/questions/53662125/comparing-paths-between-two-different-machine", "title": "Comparing paths between two different machine", "body": "<p>I have a file which contains a list of paths that were used on machine <code>A</code>. I would like to check each path on machine <code>B</code>. At this point, I just iterate through the list on machine <code>B</code> and check the existence of the path (by using <code>-e</code> flag in Perl). Problem is I have paths on machine <code>A</code> that does not exactly exists on machine <code>B</code>, rather they exist but with a different path. For example:</p>\n\n<pre><code>machine A: /usr/bin/pkgs/python/2.7.2/lib/site-packages/_ssl.so\nmachine B: /usr/bin/pkgs/python/2.7.5/lib/python2.7/pkgs/_ssl.so\n</code></pre>\n\n<p>Some tool (let's call it <code>toolX</code>) on machine <code>A</code> uses the first path and on machine <code>B</code> the second one. Is it possible to find a way in order to alert if the file does not exist at all on machine <code>B</code>? For starters, I would like to start with <code>Perl</code> and <code>Python</code> packages and modules. I have a list of versions of <code>Perl</code> and <code>Python</code> that works on machine <code>B</code> and I would like to alert if some module does not exist. Maybe I should iterate over the <code>Perl</code> and <code>Python</code> packages (with <code>find</code>) and look for all similar modules with the same name and maybe the same size.</p>\n\n<p>Part of my code for now:</p>\n\n<pre><code>open(my $fh_d, '&gt;', $destination) or return 0;\nopen(my $fh_s, '&lt;', $source) or return 0;\n\nwhile(my $file = &lt;$fh_s&gt;) {\n    chomp($file);\n    print $fh_d $file.\"\\n\" unless(-e $file);\n}\n\nclose ($fh_s);\nclose ($fh_d);\n</code></pre>\n\n<p>In summary, I would like to alert if a specific path does not exist on machine <code>B</code> but in a smart way, so if there is another path with the same name, it might be it (the question is how?). What is the best way to approach this issue? How should I check if the path is <code>perl</code> or <code>python</code> path for sure?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1544126191, "post_id": 53658557, "comment_id": 94175710, "body": "I see absolutely no way for the code you show to print what you show as printed. Can you check what you posted, the code and what it prints?  Or ... do you mean by <code>NEW_LINE (\\n)</code> to say that there is an extra blank line at the end of the file?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544212579, "post_id": 53658557, "comment_id": 94209863, "body": "Tip: <code>if ($files =~ m&#47;\\.txt$&#47;g)</code> makes no sense and can cause weird, hard-to-debug errors. It should be <code>if ($files =~ m&#47;\\.txt$&#47;)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544212625, "post_id": 53658557, "comment_id": 94209883, "body": "Your request is very weird!!! Every line including the last one should have a terminating line feed"}], "answers": [{"tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 7, "last_activity_date": 1544126266, "creation_date": 1544126266, "answer_id": 53658768, "question_id": 53658557, "link": "https://stackoverflow.com/questions/53658557/avoid-print-a-new-line-in-the-last-line-of-a-perl-loop/53658768#53658768", "title": "avoid print a new line in the last line of a perl loop", "body": "<p>If you are open to an alternate approach, you could just read all files into an array and then print them with a <code>join</code>:</p>\n\n<pre><code>my @files = grep { /\\.txt$/ } readdir (DIR);\nprint LIST join \"\\n\", map { \"$_\\t$_\" } @files;\n</code></pre>\n\n<p>This can be golfed down quite a bit, but I thought this would show the steps clearly enough.</p>\n\n<p>By the way, best practice dictates you should change the filehandles <code>DIR</code> and <code>LIST</code> to <code>$DIR</code> and <code>$LIST</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3276674/which-one-is-good-practice-a-lexical-filehandle-or-a-typeglob\">Which one is good practice, a lexical filehandle or a typeglob?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1479741/why-is-three-argument-open-calls-with-autovivified-filehandles-a-perl-best-pract\">Why is three-argument open calls with autovivified filehandles a Perl best practice?</a></p>\n"}, {"comments": [{"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1544142718, "post_id": 53659714, "comment_id": 94181649, "body": "Nice plug, :-))"}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 2, "last_activity_date": 1544141376, "last_edit_date": 1544141376, "creation_date": 1544130511, "answer_id": 53659714, "question_id": 53658557, "link": "https://stackoverflow.com/questions/53658557/avoid-print-a-new-line-in-the-last-line-of-a-perl-loop/53659714#53659714", "title": "avoid print a new line in the last line of a perl loop", "body": "<p>Requisite plug for <a href=\"https://metacpan.org/pod/IO::All\" rel=\"nofollow noreferrer\"><code>IO::All</code></a>:</p>\n\n<p><code>perl -MIO::All -E 'say for io-&gt;dir(\"~/Documents/\")-&gt;glob(\"*.txt\")'</code></p>\n\n<p>Or, as a script instead of a one-liner:</p>\n\n<pre><code>use IO::All;\nmy @dir = io-&gt;dir(\"~/Documents/\")-&gt;glob(\"*.txt\");\nprint join \"\\n\", @dir ;\n</code></pre>\n\n<p>Sorry <strong>:-)</strong></p>\n"}, {"tags": [], "owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "is_accepted": false, "score": 0, "last_activity_date": 1544283562, "creation_date": 1544283562, "answer_id": 53684083, "question_id": 53658557, "link": "https://stackoverflow.com/questions/53658557/avoid-print-a-new-line-in-the-last-line-of-a-perl-loop/53684083#53684083", "title": "avoid print a new line in the last line of a perl loop", "body": "<p>Instead of reading all the lines into memory and joining them, you can approach this by changing the problem from \"add a newline to the end of each line except for the last\" to \"add a newline to the beginning of each line except for the first\". The second problem is much easier to solve.</p>\n\n<p>Working example to illustrate the concept:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# a set of chomp-ed \"lines\" to print\nmy @lines = qw(foo bar baz);\n\n# newline before each line (but blank for the first line)\nmy $nl = '';\n\n# print the lines with \\n before all except first\nfor (@lines) {\n  print \"$nl$_\";\n  # remaining lines will get \\n before them\n  $nl = \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1544283562, "creation_date": 1544125362, "last_edit_date": 1544125884, "question_id": 53658557, "link": "https://stackoverflow.com/questions/53658557/avoid-print-a-new-line-in-the-last-line-of-a-perl-loop", "title": "avoid print a new line in the last line of a perl loop", "body": "<p>I have this code to create a list of .txt files inside of a dir, and print it in 2 columns in a output file; so I just want to avoid the new line (\\n) after of the last file</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Getopt::Long;\n\n\n#Variables\nmy ($dir_path, $outputfile);\n\nGetOptions (\n            'dir=s'      =&gt;\\$dir_path,\n            'list=s'      =&gt;\\$outputfile\n            );\n\nopendir (DIR, $dir_path) or die $!;\n\nopen LIST, '&gt;', $outputfile, or die \"can\u00b4t open $outputfile file\";\n\nwhile (my $files=readdir(DIR)) {\n    chomp $files;\n\n    if ($files =~ m/\\.txt$/g) {\n        print LIST \"$files\\t$files\\n\";\n    }\n    else {\n        next;\n    }\n}\n\nclosedir DIR;\nclose LIST;\nexit;\n</code></pre>\n\n<p>it print:</p>\n\n<pre><code>file_1.txt file_1.txt\nfile_2.txt file_2.txt\nfile_3.txt file_3.txt\nfile_Last.txt file_Last.txt\nNEW_LINE (\\n)\n</code></pre>\n\n<p>and I just want to avoid print the las NEW LINE after of the last file !!!:</p>\n\n<pre><code>file_1.txt file_1.txt\nfile_2.txt file_2.txt\nfile_3.txt file_3.txt\nfile_Last.txt file_Last.txt\n</code></pre>\n"}, {"tags": ["perl", "ms-word", "win32ole", "word-table"], "answers": [{"tags": [], "owner": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "is_accepted": true, "score": 0, "last_activity_date": 1544202247, "creation_date": 1544202247, "answer_id": 53673970, "question_id": 53655004, "link": "https://stackoverflow.com/questions/53655004/pointing-a-range-at-the-end-of-a-table-cell/53673970#53673970", "title": "Pointing a range at the end of a table cell", "body": "<p>You're on the right track. </p>\n\n<p>Immediately after <code>wdCollapseEnd</code> try moving the range backwards by a character: </p>\n\n<pre><code>$lo_range-&gt;MoveEnd(wdCharacter, -1)\n</code></pre>\n\n<p>The \"why\" is a bit arcane and I'm not sure if what I imagine is the reason is is correct... What I believe is the reason is that collapsing the Range puts the focus at the beginning of the next cell. Think of it as if the entire cell were selected and pressing right-arrow moved to the next cell instead of at the end of the text in the selected cell. So it's necessary to move back one character (like pressing left-arrow) to get to the end of the original cell.</p>\n\n<p><code>Range</code> has <code>MoveEnd</code> and <code>MoveStart</code>. Using a positive number with <code>MoveStart</code> or a negative number with <code>MoveEnd</code> will effectively move the entire <code>Range</code> without including additional content. A negative value with <code>MoveStart</code> or a positive value with <code>MoveEnd</code> will extand the <code>Range</code> to include new content. Again, think of it like using the arrow keys, but this time with <code>Shift</code> held down to extend the selection. There are various parameters (<code>WdUnits</code> Enumeration) that can be used with these methods that work with objects such as cells, paragraphs, etc. The list can be found in the Word Language Reference.</p>\n"}], "owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53673970, "answer_count": 1, "score": 2, "last_activity_date": 1544424052, "creation_date": 1544111301, "last_edit_date": 1544424052, "question_id": 53655004, "link": "https://stackoverflow.com/questions/53655004/pointing-a-range-at-the-end-of-a-table-cell", "title": "Pointing a range at the end of a table cell", "body": "<p>In a Perl CGI, using Win32::OLE, I need to insert several text lines in a table cell, but one by one.</p>\n\n<p>The different objects I use are :</p>\n\n<ul>\n<li><em>$go_document</em>, the Word document</li>\n<li><em>$lo_table</em>, the Word table</li>\n<li><em>$li_row</em> and <em>$li_col</em>, the cell coordinates in the table</li>\n<li><em>@ly_lines</em>, the text array</li>\n</ul>\n\n<p>Here's my code, which works properly:</p>\n\n<pre><code>for (my $ii = 0; $ii &lt;= $#ly_lines; $i++)\n{\n    my $lo_range = $lo_table-&gt;Cell($li_row, $li_col)-&gt;Range;\n    $lo_range-&gt;InsertAfter($ly_lines[$ii]);\n\n    $lo_range = $lo_table-&gt;Cell($li_row, $li_col)-&gt;Range;\n    $lo_range-&gt;InsertParagraphAfter();\n}\n</code></pre>\n\n<p>My problem happens when I try to apply a style to each one of the text lines.</p>\n\n<p>Since I don't want to set the style of the entire cell but of the line I'm about to insert, I tried this (the styles being stored in the <em>@ly_styles</em> array):</p>\n\n<pre><code>for (my $ii = 0; $ii &lt;= $#ly_lines; $i++)\n{\n    my $lo_range = $lo_table-&gt;Cell($li_row, $li_col)-&gt;Range;\n    $lo_range-&gt;Collapse(wdCollapseEnd);\n\n    $go_document-&gt;Styles-&gt;Add($ly_styles[$ii]);\n    $lo_range-&gt;{'Style'} = $ly_styles;\n    $lo_range-&gt;InsertAfter($ly_lines[$ii]);\n\n    $lo_range = $lo_table-&gt;Cell($li_row, $li_col)-&gt;Range;\n    $lo_range-&gt;Collapse(wdCollapseEnd);\n\n    $lo_range-&gt;InsertParagraphAfter();\n}\n</code></pre>\n\n<p>With this loop, the text lines read <strong>in a reversed order and in the cell next to the one I want</strong>!</p>\n\n<p>It seems that the <em>Collapse(wdCollapseEnd)</em> command doesn't set the range to the end of the aimed cell, but to the beginning of the next one.</p>\n\n<p>Does anyone know how to fix this?\nThanks in advance.</p>\n"}, {"tags": ["regex", "shell", "perl", "string-substitution"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544107516, "post_id": 53653852, "comment_id": 94166210, "body": "The part after <code>-e</code> is just Perl code, so you can use <code>&quot;if( $. &gt; 1 ) { ... s&#47;&#47;&#47; }; print @F&quot;</code> . But if you&#39;re always printing, use <code>-p</code> instead of <code>-n</code> ?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544107613, "post_id": 53653852, "comment_id": 94166287, "body": "But unless you&#39;re on Windows, mixing double quotes and dollar signs is likely bad, as your shell will then interpolate what it thinks are shell variables while you think of them as Perl variables?! Otherwise, use <code>\\$.</code> instead of <code>$.</code> so that <code>$.</code> gets passed through to Perl. Also consider converting your oneliner to a script instead."}, {"owner": {"reputation": 43, "user_id": 10351828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3vVIKQLNBA/AAAAAAAAAAI/AAAAAAAAAOs/JFCfpNdbdT8/photo.jpg?sz=128", "display_name": "Julien Camus", "link": "https://stackoverflow.com/users/10351828/julien-camus"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1544111047, "post_id": 53653852, "comment_id": 94168344, "body": "Thank you for your solution! Actually I am doing in-place edition so the following command works well: <code>perl -aF&#39;(;)&#39; -ne &#39;if( $. &gt; 1 ) { s&#47;^.{3}&#47;XXX&#47; for @F[2] }; print @F&#39; -i file</code>. But I don&#39;t get how to use the <code>-p</code> option instead of the <code>print @F</code> command. Do you have any tip? Thanks!"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544111754, "post_id": 53653852, "comment_id": 94168832, "body": "Oh - no, <code>-p</code> wouldn&#39;t help much then. You&#39;d need <code>$_ = @F</code> so that <code>-p</code> works, so your approach is good enough using <code>-n</code>."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10351828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3vVIKQLNBA/AAAAAAAAAAI/AAAAAAAAAOs/JFCfpNdbdT8/photo.jpg?sz=128", "display_name": "Julien Camus", "link": "https://stackoverflow.com/users/10351828/julien-camus"}, "edited": false, "score": 0, "creation_date": 1544111581, "post_id": 53654869, "comment_id": 94168706, "body": "This solution does not print the header line at all. What I want is not to substitute this line but print it anyway. Do you have another idea? Thanks!"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 0, "last_activity_date": 1544113860, "last_edit_date": 1544113860, "creation_date": 1544110854, "answer_id": 53654869, "question_id": 53653852, "link": "https://stackoverflow.com/questions/53653852/perl-string-substitution-in-bash-using-field-separator-skip-header-line/53654869#53654869", "title": "Perl string substitution in bash using field separator - Skip header line", "body": "<p><code>-n</code> wraps</p>\n\n<pre><code>LINE: while (&lt;&gt;) {\n    ... # your program goes here\n}\n</code></pre>\n\n<p>around your script so you can add <code>next LINE if $. == 1;</code> to your one liner to skip the header.</p>\n\n<pre><code>perl -aF'(;)' -ne \"if (1 .. 1) { print; next LINE } s/^.{$length}/$x_string/ for @F[2*$index]; print @F\" file\n</code></pre>\n\n<p>This uses the flip flop operator <code>..</code> to count the first line and the block in the if statement then prints it.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1544123323, "post_id": 53657610, "comment_id": 94174542, "body": "@JulienCamus Edited"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1544123919, "last_edit_date": 1544123919, "creation_date": 1544120950, "answer_id": 53657610, "question_id": 53653852, "link": "https://stackoverflow.com/questions/53653852/perl-string-substitution-in-bash-using-field-separator-skip-header-line/53657610#53657610", "title": "Perl string substitution in bash using field separator - Skip header line", "body": "<p>Just condition the change (regex) itself on <code>$.</code> and otherwise do the same (print)</p>\n\n<pre><code>perl -aF'(;)' -ne'$F[2*$index] =~ s/^.{$length}/$x_string/ unless $.==1; print @F' file\n</code></pre>\n\n<p>There is no need for the <code>for</code> loop since you specify precisely one <code>@F</code> element to change. (Also, with <code>-w</code> you'd be seeing a warning for writing a scalar as array/list, using <code>@</code> sigil.)</p>\n\n<hr>\n\n<p>One other way is to change <code>$_</code> directly using regex and use <code>-p</code>. Since <code>-p</code> always prints <code>$_</code>, even if lines aren't processed, now you can simply skip the first line</p>\n\n<pre><code>perl -pe'next if $.==1; s/(?:.*?;){$index}\\K.{$length}/$x_string/' file\n</code></pre>\n\n<p>The regex matches <code>$index</code> sequences ending with <code>;</code>, grouped without capture due to <code>?:</code>, and then <a href=\"https://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\"><code>\\K</code> assertion</a> drops all that so the substitution happens only for what is matched next. So this regex changes the <code>$length</code> characters following the <code>$index</code>-th semicolon.</p>\n"}], "owner": {"reputation": 43, "user_id": 10351828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3vVIKQLNBA/AAAAAAAAAAI/AAAAAAAAAOs/JFCfpNdbdT8/photo.jpg?sz=128", "display_name": "Julien Camus", "link": "https://stackoverflow.com/users/10351828/julien-camus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544123919, "creation_date": 1544107394, "last_edit_date": 1544109908, "question_id": 53653852, "link": "https://stackoverflow.com/questions/53653852/perl-string-substitution-in-bash-using-field-separator-skip-header-line", "title": "Perl string substitution in bash using field separator - Skip header line", "body": "<p>I am working on the anonymisation of several fields in a semicolon-separated text file.</p>\n\n<p>For now I have the following command:</p>\n\n\n\n<pre><code>perl -aF'(;)' -ne \"s/^.{$length}/$x_string/ for @F[2*$index]; print @F\" file\n</code></pre>\n\n<p>Where <code>$index</code> corresponds to the index of the string I want to substitute relatively to the semicolon split, <code>$length</code> is the size of the string to substitute and <code>$x_string</code> is a simple string of X's.</p>\n\n<p>For an <code>$index</code> equal to <code>1</code>, <code>$size</code> equal to <code>3</code> and <code>$x_string</code> equal to <code>XXX</code>, if <code>file</code> has the following content:</p>\n\n<pre><code>azerty;012;test;20181201;;wxc;\nytreza;345;demo;20160214;;nbv;\n</code></pre>\n\n<p>Then the <code>perl</code> command returns this:</p>\n\n<pre><code>azerty;XXX;test;20181201;;wxc;\nytreza;XXX;demo;20160214;;nbv;\n</code></pre>\n\n<p>My problem is that I want to skip and not to anonymise a potential header line. I know how to do it without the <code>for</code> statement - using <code>unless $. == 1</code> for example - but I don't know how to manage it when combined with the <code>-F</code> option.</p>\n\n<p>Note that I will always have an array of size 1 because of my configuration file's structure pairing the <code>index</code> and <code>length</code> variables.</p>\n\n<p>I am a total newbie with <code>perl</code> so I am asking you for some help with this issue!</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1544103445, "post_id": 53652647, "comment_id": 94163551, "body": "Have you looked at <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-sort-an-array-by-(anything)%3f\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a> ? How does that FAQ fail to answer your question?"}, {"owner": {"reputation": 3, "user_id": 10754873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPpZ7.png?s=128&g=1", "display_name": "Yodonai", "link": "https://stackoverflow.com/users/10754873/yodonai"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544106275, "post_id": 53652647, "comment_id": 94165366, "body": "@Corion My bad, I&#39;ve only tried searching on google and here but I didn&#39;t find that page. I still couldn&#39;t make it work for my case though."}, {"owner": {"reputation": 3, "user_id": 10754873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPpZ7.png?s=128&g=1", "display_name": "Yodonai", "link": "https://stackoverflow.com/users/10754873/yodonai"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544109635, "post_id": 53652647, "comment_id": 94167555, "body": "@ikegami You&#39;re right, sorry again. I hope it&#39;s good enough now."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10754873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPpZ7.png?s=128&g=1", "display_name": "Yodonai", "link": "https://stackoverflow.com/users/10754873/yodonai"}, "edited": false, "score": 0, "creation_date": 1544125428, "post_id": 53654666, "comment_id": 94175373, "body": "Thank you very much, it worked! Sorry for taking so long to answer. Can&#39;t upvote for now unfortunately."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1544111023, "last_edit_date": 1544111023, "creation_date": 1544110187, "answer_id": 53654666, "question_id": 53652647, "link": "https://stackoverflow.com/questions/53652647/perl-sorting-an-array-of-xml-query-data/53654666#53654666", "title": "Perl - Sorting an array of XML query data", "body": "<p>First, let's construct our list of prod elements:</p>\n\n<pre><code>use XML::LibXML;\n\nmy @qfns = ( 'xml/nota1.xml', 'xml/nota5.xml', ... );\n\nmy @prod_eles;\nfor my $qfn (@qfns) {\n    my $doc = XML::LibXML-&gt;load_xml( location =&gt; $qfn );\n    push @prod_eles, $doc-&gt;findnodes('/list/prod');\n}\n</code></pre>\n\n<p>I used XML::LibXML because I'm familiar with it, it's very fast, it's very reliable, and because you are loading it (even if you aren't using it).</p>\n\n<p>Now, we just have to sort the elements. There's nothing particularly special about your case. Using XPath, we can easily query the objects for the values we want to compare.</p>\n\n<pre><code>@prod_eles =\n   sort { $a-&gt;findvalue('vProd') &lt;=&gt; $b-&gt;findvalue('vProd') }\n      @prod_eles;\n</code></pre>\n\n<p>To speed things up, we could also use the following instead:</p>\n\n<pre><code>use Sort::Key qw( nkeysort );\n\n@prod_eles =\n   nkeysort { $_-&gt;findvalue('vProd') }\n      @prod_eles;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10754873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPpZ7.png?s=128&g=1", "display_name": "Yodonai", "link": "https://stackoverflow.com/users/10754873/yodonai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53654666, "answer_count": 1, "score": 0, "last_activity_date": 1544111023, "creation_date": 1544103321, "last_edit_date": 1544109499, "question_id": 53652647, "link": "https://stackoverflow.com/questions/53652647/perl-sorting-an-array-of-xml-query-data", "title": "Perl - Sorting an array of XML query data", "body": "<p>I'm a newbie in Perl and I'm trying to sort an array of XML elements from 6 similar XMLs. The code below has 2 of the 6 files as recommended. I've tried the sort function with substrings but it hasn't worked yet. Can anyone check and help me make it work?</p>\n\n<pre><code>use 5.010;\nuse warnings;\nuse XML::LibXML;\nuse XML::XPath;\nuse XML::XPath::XMLParser;\n\nmy $dom1 = XML::XPath-&gt;new(filename =&gt; './xml/nota1.xml');\nmy $dom2 = XML::XPath-&gt;new(filename =&gt; './xml/nota5.xml');\n\nmy @list;\n\nforeach my $vProd ($dom1-&gt;find('//prod'), $dom2-&gt;find('//prod')){\n      push @list, $vProd;\n}\nsay @list;\n</code></pre>\n\n<p>All XML files have a \"prod\" element that contains information about products, and I want to sort by an element called \"vProd\". \"vProd\" is the ninth element and it's the product's value in my country's currency. Below are both XML files:</p>\n\n<p>nota1.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;list&gt;\n    &lt;prod&gt;\n        &lt;cProd&gt;025-1220-318-40&lt;/cProd&gt;\n        &lt;cEAN&gt;4051411545402&lt;/cEAN&gt;\n        &lt;xProd&gt;Chuteira Puma Esito Finale IT&lt;/xProd&gt;\n        &lt;NCM&gt;64029990&lt;/NCM&gt;\n        &lt;CFOP&gt;6108&lt;/CFOP&gt;\n        &lt;uCom&gt;PAR&lt;/uCom&gt;\n        &lt;qCom&gt;1&lt;/qCom&gt;\n        &lt;vUnCom&gt;94.91&lt;/vUnCom&gt;\n        &lt;vProd&gt;94.91&lt;/vProd&gt;\n        &lt;cEANTrib&gt;4051411545402&lt;/cEANTrib&gt;\n        &lt;uTrib&gt;PAR&lt;/uTrib&gt;\n        &lt;qTrib&gt;1&lt;/qTrib&gt;\n        &lt;vUnTrib&gt;94.91&lt;/vUnTrib&gt;\n        &lt;indTot&gt;1&lt;/indTot&gt;\n    &lt;/prod&gt;\n&lt;/list&gt;\n</code></pre>\n\n<p>nota5.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;list&gt;\n    &lt;prod&gt;\n        &lt;cProd&gt;AEMC815BZA&lt;/cProd&gt;\n        &lt;cEAN&gt;0885909455232&lt;/cEAN&gt;\n        &lt;xProd&gt;MAC MINI COREI5 2GB500GB | 0885909455232| Rua: A&lt;/xProd&gt;\n        &lt;NCM&gt;84715010&lt;/NCM&gt;\n        &lt;CFOP&gt;5929&lt;/CFOP&gt;\n        &lt;uCom&gt;PC&lt;/uCom&gt;\n        &lt;qCom&gt;1.0000&lt;/qCom&gt;\n        &lt;vUnCom&gt;1606.0000&lt;/vUnCom&gt;\n        &lt;vProd&gt;1606.00&lt;/vProd&gt;\n        &lt;cEANTrib&gt;0885909455232&lt;/cEANTrib&gt;\n        &lt;uTrib&gt;PC&lt;/uTrib&gt;\n        &lt;qTrib&gt;1.0000&lt;/qTrib&gt;\n        &lt;vUnTrib&gt;1606.0000&lt;/vUnTrib&gt;\n        &lt;indTot&gt;1&lt;/indTot&gt;\n    &lt;/prod&gt;\n    &lt;prod&gt;\n        &lt;cProd&gt;AEMD032BZA&lt;/cProd&gt;\n        &lt;cEAN&gt;0885909480920&lt;/cEAN&gt;\n        &lt;xProd&gt;ROTEADOR TIME CAPSULE 2TB BCO | 0885909480920| Rua: A&lt;/xProd&gt;\n        &lt;NCM&gt;84717019&lt;/NCM&gt;\n        &lt;CFOP&gt;5929&lt;/CFOP&gt;\n        &lt;uCom&gt;PC&lt;/uCom&gt;\n        &lt;qCom&gt;1.0000&lt;/qCom&gt;\n        &lt;vUnCom&gt;852.0000&lt;/vUnCom&gt;\n        &lt;vProd&gt;852.00&lt;/vProd&gt;\n        &lt;cEANTrib&gt;0885909480920&lt;/cEANTrib&gt;\n        &lt;uTrib&gt;PC&lt;/uTrib&gt;\n        &lt;qTrib&gt;1.0000&lt;/qTrib&gt;\n        &lt;vUnTrib&gt;852.0000&lt;/vUnTrib&gt;\n        &lt;indTot&gt;1&lt;/indTot&gt;\n    &lt;/prod&gt;\n&lt;/list&gt;\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["string", "perl", "unicode"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544099885, "post_id": 53651565, "comment_id": 94161296, "body": "Maybe Encode them to UTF-8 octets and then XOR the octet strings?"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544101359, "post_id": 53651565, "comment_id": 94162204, "body": "@Corion, added encode example too"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544102273, "post_id": 53651565, "comment_id": 94162755, "body": "@Corion, you could submit it as answer, introduced my own bug, when got <code>substr outside of string at...</code> warnings"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544102569, "post_id": 53651565, "comment_id": 94162930, "body": "If you want to answer your own question, go ahead, but post it as an answer."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544102834, "post_id": 53651565, "comment_id": 94163112, "body": "@ikegami, it is actually Corion&#39;s answer, I will post it as answer, but only after 24h (and if he has not submitted it)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544102904, "post_id": 53651565, "comment_id": 94163151, "body": "Using UTF-8 is a no-go. For example, comparing <code>&#201;ric</code> and <code>Eric</code> will give you 4 differences."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544102954, "post_id": 53651565, "comment_id": 94163197, "body": "@ikegami, ok, that&#39;s why i got string length differences..."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1544103254, "post_id": 53651565, "comment_id": 94163433, "body": "@ikegami: Yeah - thinking about the UTF-8 indices vs. the Unicode indices was what delayed my answer.Your solution is much nicer in that regard."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1544209287, "post_id": 53651565, "comment_id": 94208464, "body": "I really wish they hadn&#39;t deprecated that; it worked just fine as was."}], "answers": [{"comments": [{"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1544103413, "post_id": 53652510, "comment_id": 94163528, "body": "does it mean, that without normalization it may give some false positives?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1544104566, "post_id": 53652510, "comment_id": 94164257, "body": "Integrated my comment  and my reply to yours into my answer"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1544199016, "post_id": 53652510, "comment_id": 94203733, "body": "This will work for strings containing only Unicode characters, but not in the event that you have characters wider than 32 bits"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1544203761, "post_id": 53652510, "comment_id": 94206125, "body": "@ysth, True, but that&#39;s what the question asks for"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1544105082, "last_edit_date": 1544105082, "creation_date": 1544102833, "answer_id": 53652510, "question_id": 53651565, "link": "https://stackoverflow.com/questions/53651565/fast-way-to-find-difference-between-two-unicode-strings-in-perl-vol-2/53652510#53652510", "title": "Fast Way to Find Difference between Two Unicode Strings in Perl vol 2", "body": "<p>Encode the string using a fixed-width encoding.</p>\n\n<pre><code>my $s1 = encode('UTF-32', $original_string_1);\nmy $s2 = encode('UTF-32', $original_string_2);\n\nmy $mask = $s1 ^ $s2;\nwhile ($mask =~ /\\G(?:\\0{4})*+(.{4})/sg) {\n    my $pos = $-[1] / 4;\n    printf \"%d %s %s\\n\",\n       $pos,\n       substr($original_string_1, $pos, 1),\n       substr($original_string_2, $pos, 1);\n}\n</code></pre>\n\n<p>Of course, this still has the problems of using XOR (has problems with insertions and deletions, as opposed to replacements). <a href=\"http://search.cpan.org/perldoc?Algorithm::Diff\" rel=\"nofollow noreferrer\">Algorithm::Diff</a> provides something that \"resynchronizes\".</p>\n\n<p>Also, be wary that not all code points are suitable for printing on their own. Control characters, continuation marks, and other code points should probably not printed out directly.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544103492, "post_id": 53652598, "comment_id": 94163589, "body": "Using UTF-32 isn&#39;t about getting the position. It&#39;s because UTF-8 simply doesn&#39;t work. For example, comparing <code>&#201;ric</code> and <code>Eric</code> give 4 differences (and prints garbage). For example, comparing the single-character strings <code>\u3661</code> and <code>\u2660</code> give 2 differences (and prints garbage). etc"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544103843, "post_id": 53652598, "comment_id": 94163805, "body": "@ikegami Sure - but as long as you mostly care about the rough position of the differences, it works. You can somewhat resynchronize, but that goes bad when you have enough variable-width characters like my third example, <code>&#228;</code> vs <code>.</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544104461, "post_id": 53652598, "comment_id": 94164187, "body": "Re &quot;<i>as long as you mostly care about the rough position of the differences, it works.</i>&quot;, The first example I gave disproves that. There&#39;s no difference anywhere the last character of the string."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1544103169, "creation_date": 1544103169, "answer_id": 53652598, "question_id": 53651565, "link": "https://stackoverflow.com/questions/53651565/fast-way-to-find-difference-between-two-unicode-strings-in-perl-vol-2/53652598#53652598", "title": "Fast Way to Find Difference between Two Unicode Strings in Perl vol 2", "body": "<p>Encoding the Unicode strings down to UTF-8 encoded octets should work without warnings:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse Encode 'encode';\nuse charnames ':full'; # just for the example below\n\n    binmode STDOUT, ':encoding(UTF-8)';\n\nsub cmp_unicode {\n    my ($s1, $s2) = @_;\n    $s1 = encode( 'UTF-8' =&gt; $s1 );\n    $s2 = encode( 'UTF-8' =&gt; $s2 );\n    my $mask = $s1^$s2;\n    while ($mask =~ /[^\\0]/g) {\n        print substr($s1,$-[0],1), ' ', substr($s2,$-[0],1), ' ', $-[0], \"\\n\";\n    }\n}\n\ncmp_unicode( 'abc', 'def' );\ncmp_unicode( \"   &lt;\\N{SNOWMAN}&gt;\", \"   &lt;\\N{FATHER CHRISTMAS}&gt;\" );\ncmp_unicode( \"   &lt;\\N{LATIN CAPITAL LETTER A WITH DIAERESIS}!!&gt;\", \"   &lt;...&gt;\" );\n</code></pre>\n\n<p>The indices will be the indices of the octets, not the indices in the Unicode strings. @ikegami's solution of decoding to UTF-32 is much better as it finds the indices in the original Unicode strings. An adapted example is below:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse Encode 'encode';\nuse charnames ':full'; # just for the example below\n\n    binmode STDOUT, ':encoding(UTF-32)';\n\nsub cmp_unicode {\n    my ($s1, $s2) = @_;\n    $s1_32 = encode( 'UTF-32' =&gt; $s1 );\n    $s2_32 = encode( 'UTF-32' =&gt; $s2 );\n    my $mask = $s1_32^$s2_32;\n    while ($mask =~ /\\G(?:\\0{4})*+(.{4})/sg) {\n    printf \"%d %s %s\\n\",\n       $pos,\n       substr($s1, $pos, 1),\n       substr($s2, $pos, 1);\n    }\n}\n\ncmp_unicode( 'abc', 'def' );\ncmp_unicode( \"   &lt;\\N{SNOWMAN}&gt;\", \"   &lt;\\N{FATHER CHRISTMAS}&gt;\" );\ncmp_unicode( \"   &lt;\\N{LATIN CAPITAL LETTER A WITH DIAERESIS}!!&gt;\", \"   &lt;...&gt;\" );\n</code></pre>\n\n<p>Whether the upgrade to 32-bit (four times the data) is still fast enough or you simply don't care about the character positions is for you to decide.</p>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53652510, "answer_count": 2, "score": 0, "last_activity_date": 1544105082, "creation_date": 1544099571, "last_edit_date": 1544102540, "question_id": 53651565, "link": "https://stackoverflow.com/questions/53651565/fast-way-to-find-difference-between-two-unicode-strings-in-perl-vol-2", "title": "Fast Way to Find Difference between Two Unicode Strings in Perl vol 2", "body": "<p>In original <a href=\"https://stackoverflow.com/q/4709537/196241\">question</a> on same topic is cool and fast <a href=\"https://stackoverflow.com/a/4709643/196241\">answer</a>, but newer perls don't support such use case anymore, they give warning of deprecation:</p>\n\n<pre><code>Use of strings with code points over 0xFF as arguments to bitwise xor (^) operator is deprecated\n</code></pre>\n\n<p>How to find differences between two unicode strings in Perl?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1544107650, "post_id": 53652456, "comment_id": 94166319, "body": "Great answer! Thank you. Is it possible to show change the  <code>sub { wanted( \\@files, $_ ) }</code> part? So it will be something like: <code>find(  \\&amp;wanted , $main_dir);</code>? (of course without declaring another sub)."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1544108219, "post_id": 53652456, "comment_id": 94166692, "body": "Thanks! Yes you can change <code>find( sub { wanted ... }, $dir)</code> to <code>find (\\&amp;wanted, $dir)</code>. The only catch is that you will miss the explicitness of the <code>@files</code> lexical array argument passed to the sub <code>wanted()</code>. Now, it is instead passed implicitly, which can lead to unclear code and later strange bugs.. Why would like to change the calling syntax?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1544102648, "creation_date": 1544102648, "answer_id": 53652456, "question_id": 53651357, "link": "https://stackoverflow.com/questions/53651357/find-recursively-all-paths-with-specific-name-with-specific-conditions/53652456#53652456", "title": "Find recursively all paths with specific name with specific conditions", "body": "<p>Here is one approach using post processing of <code>@files</code>, and a temporary hash <code>%full_json_dir</code> to record if a directory contains a \"full\" file:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nuse File::Basename qw(basename dirname);\nuse File::Find;\n\nmy @files;\nmy $main_dir = '.';\nmy %full_json_dir;\n\nfind( sub { wanted( \\@files, $_ ) }, $main_dir);\n\nsub wanted {\n    my ( $files, $name ) = @_;\n\n    if ( $name eq 'test.json' ) {\n        push @$files, $File::Find::name;\n        my $pdir = dirname $File::Find::dir;\n        my $full_dir = ( (basename $File::Find::dir) eq \"full_json_files\" ) ? 1 : 0;\n        if ( exists $full_json_dir{$pdir} ) {\n            if ( !$full_json_dir{$pdir} ) {\n                $full_json_dir{$pdir} = $full_dir;\n            }\n        }\n        else {\n            $full_json_dir{$pdir} = $full_dir;\n        }\n    }\n} \n\nmy @files2;\nfor my $file (@files) {\n    my $dir = dirname $file;\n    my $pdir = dirname $dir;\n    if ( $full_json_dir{$pdir} == 1) {\n        push @files2, $file;\n        $full_json_dir{$pdir} = 2;\n    }\n    elsif ( $full_json_dir{$pdir} == 0 )  {\n        push @files2, $file;\n    }\n}\n\n\nsay for @files2;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>./somePath1/log_dir/json_files_12345/test.json\n./somePath2/log_dir/full_json_files/test.json\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 0, "last_activity_date": 1544134438, "creation_date": 1544134438, "answer_id": 53660487, "question_id": 53651357, "link": "https://stackoverflow.com/questions/53651357/find-recursively-all-paths-with-specific-name-with-specific-conditions/53660487#53660487", "title": "Find recursively all paths with specific name with specific conditions", "body": "<p>Requisite plug for <a href=\"https://metacapan.org/pod/IO::All\" rel=\"nofollow noreferrer\"><code>IO::All</code></a>:</p>\n\n<pre><code>perl -MIO::All -E 'say for io(\"./mydir\")-&gt;filter(sub{ /test.json/ })-&gt;All_Files'\n</code></pre>\n\n<p>Or, as a script instead of a one-liner:</p>\n\n<pre><code>use IO::All;\nmy @testfiles = io-&gt;dir(\"./mydir\")-&gt;filter(sub{ /test.json/ })-&gt;All_Files;\nprint join \"\\n\", @testfiles ;\n</code></pre>\n\n<p>Sorry <strong>:-)</strong></p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 53652456, "answer_count": 2, "score": 1, "last_activity_date": 1544134438, "creation_date": 1544098874, "last_edit_date": 1544099676, "question_id": 53651357, "link": "https://stackoverflow.com/questions/53651357/find-recursively-all-paths-with-specific-name-with-specific-conditions", "title": "Find recursively all paths with specific name with specific conditions", "body": "<p>I'm trying to recursively find all the files which are called <code>test.json</code> in a specif directory and insert them into an array.\nThey are always located in <code>json_files_&lt;id_num&gt;</code> (<code>&lt;id_num&gt;</code> = some unique id number) directory which always located in <code>log_dir</code>. But <code>log_dir</code> can also contain <code>full_json_files</code> directory which also have this file.\nI am trying to create a utility which iterates over all paths in the input directory and finds all the paths to the <code>test.json</code> file. \nBut if we have <code>full_json_files</code> directory in the <code>log_dir</code> directory, I would like to take <code>full_json_files/test.json</code> instead of <code>json_files&lt;id_num&gt;</code>.</p>\n\n<p>I'll try to make more sense with an example. Consider the following hierarchy:</p>\n\n<pre><code>- somePath1\n    - log_dir\n        - json_files_12345\n            - test.json\n- somePath2\n    - log_dir\n        - json_files_543\n            - test.json \n        - full_json_files\n            - test.json\n- somePath3\n    - log_dir\n        - json_files_123\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>somePath1/log_dir/json_files_12345/test.json\nsomePath2/log_dir/full_json_files/test.json\n</code></pre>\n\n<p>Please note that <code>somePath1,somePath2,somePath3</code> are all paths that are starting from the input directory (<code>$main_dir</code>).\nI though of using <code>File::Find</code> module, so I did something basic: </p>\n\n<pre><code>find( \n    sub { push (@dirs,$File::Find::name) if(basename($File::Find::name) eq \"test.json\"); }, \n    $main_dir\n);\n</code></pre>\n\n<p>It will insert to <code>@dirs</code> all the paths to the <code>test.json</code> files. But I would like to somehow to combine the above condition in this <code>sub</code>.\nAlso, I would like to declare this subroutine separate and pass by reference (by using <code>&amp;</code>), and do all of the checks in that subroutine.\nHow should I do it? <code>File::find</code> is a good way to solve this issue? if not, what another way to do it?</p>\n\n<p>It should be very basic, but for some reason, I struggle to continue from that point.</p>\n"}, {"tags": ["perl", "loops", "hash"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1544095007, "post_id": 53650120, "comment_id": 94158606, "body": "I don&#39;t see where the &quot;Verwende 20 Threads&quot; part of your code is."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1544095199, "post_id": 53650120, "comment_id": 94158710, "body": "@lurker: when you insert &#39;print $line,&quot;\\n&quot;;&#39; after &#39;if ($flag)&#39; it will output &#39;Verwende 20 Threads&#39;"}, {"owner": {"reputation": 35588, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1544246395, "post_id": 53650120, "comment_id": 94217138, "body": "Hint: use your own pattern recognition to reduce possible problems.: <code>my $neodate = qr{\\d\\d.\\d\\d.\\d\\d\\d\\d \\d\\d:\\d\\d:\\d\\d};</code> and use <code>$neodate</code> from there on."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1544098670, "post_id": 53650494, "comment_id": 94160573, "body": "I would suggest that <code>next if !~</code> might be better written as <code>next unless $line =~ ....</code>"}], "tags": [], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "is_accepted": false, "score": 0, "last_activity_date": 1544095936, "creation_date": 1544095936, "answer_id": 53650494, "question_id": 53650120, "link": "https://stackoverflow.com/questions/53650120/perl-jump-to-specific-line-in-loop/53650494#53650494", "title": "perl jump to specific line in loop", "body": "<p>I solved the issue actually by this:</p>\n\n<pre><code>else {\n       next if $line !~ /Anzahl erfolgreich/;\n       if ($flag) {\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544095936, "creation_date": 1544094679, "last_edit_date": 1544095261, "question_id": 53650120, "link": "https://stackoverflow.com/questions/53650120/perl-jump-to-specific-line-in-loop", "title": "perl jump to specific line in loop", "body": "<p>I have Logfile structure like this: </p>\n\n<blockquote>\n<pre><code>Start Sollumsatz-Verrechnung 05.12.2018 03:42:51  \nVerwende 20 Threads.\nAnzahl gesamt     : 162360\nAnzahl erfolgreich: 162360\nAnzahl fehlerhaft : 0\nEnde Sollumsatz-Verrechnung 05.12.2018 04:03:03 \n</code></pre>\n</blockquote>\n\n<p>I want to save some of the information in an hash (%hash_ref). In the \"flag-part\" my code jumps to the line \"Verwende 20 Threads.\" but it should jump to \"Anzahl erfolgreich\". Do you know how this can be done?</p>\n\n<p>Any help would be appreciated.</p>\n\n<pre><code>my %hash_ref;\nmy %filter;\nmy ($act, $time,$flag);\nwhile(my $line = &lt;FILE&gt;) {\n    if ($line =~ /(.+? Sollumsatz-Verrechnung)\\s+(\\d\\d.\\d\\d.\\d\\d\\d\\d \\d\\d:\\d\\d:\\d\\d)/) {\n            ($act,$time) = ($1,$2);\n            $flag = 1;\n    }\n    elsif ($line =~ /(.+? Deaktiviere PKonten)\\s+(\\d\\d.\\d\\d.\\d\\d\\d\\d \\d\\d:\\d\\d:\\d\\d)/) {\n            ($act,$time) = ($1,$2);\n            $flag = 1;\n    }\n    elsif ($line =~ /(.+? PSK historisieren)\\s+(\\d\\d.\\d\\d.\\d\\d\\d\\d \\d\\d:\\d\\d:\\d\\d)/) {\n            ($act,$time) = ($1,$2);\n            $flag = 1;\n    }\n    else {\n                    if ($flag) {\n                            print $line,\"\\n\" # this outputs 'Verwende 20 Threads'\n                            if ($line =~ /Anzahl erfolgreich:\\s+(.+?)\\s*$/) {\n                                    #print $line, \"\\n\";\n                                    push @{ $hash_ref{$act}{'Anzahl'} }, $1;\n                            }\n                    }\n                    $flag = 0;\n    }\n    if (! defined($filter{$act}{$time})) {\n            push @{ $hash_ref{$act}{'time'} }, $time;\n            $filter{$act}{$time} = 1;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "grep"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1544096850, "post_id": 53650057, "comment_id": 94159529, "body": "Please <a href=\"https://stackoverflow.com/posts/53650057/edit\">edit</a> your post and show us the code you have, and also tell us how it fails to do what you need. An <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> helps us to give a much better answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544096897, "post_id": 53650057, "comment_id": 94159556, "body": "There are a couple of problems with you question: 1) Your title (where you ask to sort) doesn&#39;t match the body of the question (where you ask to build an array of names). 2) It&#39;s unclear what &quot;building an array of names&quot; means."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544096948, "post_id": 53650057, "comment_id": 94159581, "body": "You seem to have some misconceptions. 1) Hashes can&#39;t be sorted (though you could obtain the keys of a hash and sort those). 2) Neither <code>grep</code> nor <code>map</code> sort."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1544098304, "post_id": 53650057, "comment_id": 94160354, "body": "What have you tried? What problems are you having? Please show us your code."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1544098541, "creation_date": 1544098541, "answer_id": 53651247, "question_id": 53650057, "link": "https://stackoverflow.com/questions/53650057/use-grep-and-map-function-to-sort-a-hash/53651247#53651247", "title": "Use grep and map function to sort a hash", "body": "<p>Both the key and values in your hash are names. So the easiest way to \"build an array of names\" from your hash is simply:</p>\n\n<pre><code>my @names = %names;\n</code></pre>\n\n<p>But that doesn't use <code>map</code> or <code>grep</code>. So we can (pointlessly) add them.</p>\n\n<pre><code>my @names = grep { 1 } map { $_ } %names;\n</code></pre>\n\n<p>I think, perhaps, you should explain what you want in a little more detail.</p>\n"}], "owner": {"reputation": 125, "user_id": 10690484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2f3b349f09d335afad326d1355f86a?s=128&d=identicon&r=PG&f=1", "display_name": "Nutiu Radu", "link": "https://stackoverflow.com/users/10690484/nutiu-radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1544104032, "accepted_answer_id": 53651247, "answer_count": 1, "score": -3, "last_activity_date": 1544507815, "creation_date": 1544094466, "last_edit_date": 1544507815, "question_id": 53650057, "link": "https://stackoverflow.com/questions/53650057/use-grep-and-map-function-to-sort-a-hash", "closed_reason": "Needs details or clarity", "title": "Use grep and map function to sort a hash", "body": "<p>Given the structure below: </p>\n\n<pre><code>my %names = qw ( hanibal lecter Harry Potter INDIANA JONES Sarah connor scarlet O\u2019Hara JAMES Bond );\n</code></pre>\n\n<p>Write a program that builds an array of names based on this list. The resulting array should contain full names (first + last name) in their original capitalization and should be ordered by the last name/first name. When sorting, you must ignore capitalization. \nFor reasons unknown, we don\u2019t want people named \u201cJones\u201d or \u201cConnor\u201d in our list so they should be filtered out.</p>\n\n<p>this is my requirement, and i need to solve this problem using grep, map and sort functions.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1544062896, "post_id": 53643508, "comment_id": 94146421, "body": "$hash{$week,$item}=$Ttl_Rmn; is an unusual hash. Second, how are you loading the hash, viz. $col1 =! $week (obviously)."}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "reply_to_user": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 1, "creation_date": 1544063309, "post_id": 53643508, "comment_id": 94146517, "body": "Sorry, I have fixed the script. Now is the original one."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544063539, "post_id": 53643508, "comment_id": 94146575, "body": "What is this new column supposed to be?"}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1544064137, "post_id": 53643508, "comment_id": 94146719, "body": "The count where col5 from file b greater than 0 per line matched with file a."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1544065220, "post_id": 53643508, "comment_id": 94146947, "body": "That&#39;s really confusing wording. Looking more at the wanted output, it&#39;s the number of times each line starting with the same col1,col2 prefix appears in the output?"}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1544065462, "post_id": 53643508, "comment_id": 94147008, "body": "Exactly, I only want to count the match between two files when col5 is greater than 0 but my keys are col1 and col2."}, {"owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "edited": false, "score": 0, "creation_date": 1544066945, "post_id": 53643508, "comment_id": 94147314, "body": "Let me explain in another way. I want know how many times the line of file A match with file B but only with col5 from B is &gt; 0. This is what I want."}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1544069046, "post_id": 53644205, "comment_id": 94147791, "body": "What about &quot; $filea{$F[0]}-&gt;{$F[1]} += 1; ?"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1544066914, "creation_date": 1544066914, "answer_id": 53644205, "question_id": 53643508, "link": "https://stackoverflow.com/questions/53643508/counting-values-between-two-files-perl/53644205#53644205", "title": "Counting values between two files perl", "body": "<p>Something like:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse autodie;\nuse English;\n\n# Read file1, saving the first two fields.\nmy %filea;\nopen my $filea, \"&lt;\", $ARGV[0];\nwhile (&lt;$filea&gt;) {\n  my @F = split /,/;\n  $filea{$F[0]}-&gt;{$F[1]} = 1;\n}\n\n# Read fileb\nmy %fileb;\nopen my $fileb, \"&lt;\", $ARGV[1];\nwhile (&lt;$fileb&gt;) {\n  chomp;\n  my @F = split /,/;\n  next unless $F[4] &gt; 0; # Skip rows where the fifth column is 0 or less\n  push @{$fileb{$F[0]}-&gt;{$F[1]}}, \\@F; # Save the others\n}\n\n$OFS = \",\";\n# For each unique col1,col2 in filea, print the matching lines from fileb\n# with added count.\nfor my $col1 (sort keys %filea) {\n  next unless exists $fileb{$col1};\n  for my $col2 (sort keys %{$filea{$col1}}) {\n    next unless exists $fileb{$col1}-&gt;{$col2};\n    my $rows = $fileb{$col1}-&gt;{$col2};\n    my $count = @$rows;\n    say @$_, $count for @$rows;\n  }\n}\n</code></pre>\n\n<p>To get the right counts, you have to read every line with the prefix you're counting before printing out those lines. If the input files are known to be sorted a smarter implementation can be written to take advantage of that and not have to read the entire files before outputting anything.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1544092141, "creation_date": 1544092141, "answer_id": 53649324, "question_id": 53643508, "link": "https://stackoverflow.com/questions/53643508/counting-values-between-two-files-perl/53649324#53649324", "title": "Counting values between two files perl", "body": "<p>Your code doesn't give the output. It gives a syntax error. But when you fix that and add the missing newline, you get this:</p>\n\n<pre><code>201843,12345,3,4,2,5,1\n201843,12345,4,4,5,5,2\n201844,33333,3,0,9,10,3\n201844,33333,4,0,9,10,4\n201844,33333,5,0,10,10,5\n</code></pre>\n\n<p>Notice that the counter value increments on each line - it's not stuck at 5 as in your output.</p>\n\n<p>And that's a big clue to what's going wrong here. Or, rather, the <strong>two</strong> things that are going wrong here. Firstly, you can't have just one counter - you need to keep a separate counter for each of your col1/col2 combinations. And secondly, you can't start to print any output until you've processed both files - as it's impossible to know what values those counters will reach until you've seen all of <code>FileB</code>.</p>\n\n<p>Here's how I've rewritten your code. It's possible that it could be simplified, but I'm afraid I don't have the time.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nopen my $fh_a, '&lt;', 'FileA' or die $!;\n\n# Phase 1: Read FileA into a hash\n# This is very similar to your existing code\nmy %file_a;\n\nwhile (&lt;$fh_a&gt;) {\n  chomp;\n  my @cols = split /,/;\n  $file_a{\"$cols[0],$cols[1]\"} = $cols[2];\n}\n\n# Phase 2: Process FileB\n# Store data in two variables.\n# %counts contains the current value of the various counters.\n# @outout contains one array ref for each line you want to output.\n# The sub-arrays all contain two elements.\n# The first element is the input line from FileB.\n# The second element is the key you need to get the correct count\n# for this line.\nopen my $fh_b, '&lt;', 'FileB' or die $!;\n\nmy %counts;\nmy @output;\n\nwhile (&lt;$fh_b&gt;) {\n  chomp;\n  my @cols = split /,/;\n\n  next unless exists $file_a{\"$cols[0],$cols[1]\"};\n  next unless $cols[4] &gt; 0;\n\n  ++$counts{\"$cols[0],$cols[1]\"};\n  push @output, [$_, \"$cols[0],$cols[1]\"];\n}\n\n# Phase 3: Produce output.\n# Walk the @output array and display a) the original line\n# from FileB and b) the final counter value for lines of that type.\nfor (@output) {\n  say join ',', $_-&gt;[0], $counts{$_-&gt;[1]};\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 8802831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31cb28b8b09d0b36a9a1d2395b056662?s=128&d=identicon&r=PG&f=1", "display_name": "ebk", "link": "https://stackoverflow.com/users/8802831/ebk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544092141, "creation_date": 1544061562, "last_edit_date": 1544063275, "question_id": 53643508, "link": "https://stackoverflow.com/questions/53643508/counting-values-between-two-files-perl", "title": "Counting values between two files perl", "body": "<p>I have an issue to solve,</p>\n\n<p>I have 2 files.</p>\n\n<p>File A col1,col2, col3</p>\n\n<p>File A</p>\n\n<pre><code>201843,12345,30\n201844,33333,10\n</code></pre>\n\n<p>File B col1,col2,col3, col4, col5, col6</p>\n\n<pre><code>201843,12345,1,2,0,5\n201843,12345,2,4,0,5\n201843,12345,3,4,2,5\n201843,12345,4,4,5,5\n201844,33333,1,0,0,10\n201844,33333,2,0,0,10\n201844,33333,3,0,9,10\n201844,33333,4,0,9,10\n201844,33333,5,0,10,10\n</code></pre>\n\n<p>I need to count how many times the file B match with File base in two parameters:\nParam 1: My keys will be matched with col1 and col2\nParam 2: Col5 from File B need to be greater than zero.</p>\n\n<p>So the result for each line in File B will be this way. Adding a new Col in the last position.</p>\n\n<pre><code>201843,12345,3,4,2,5,2\n201843,12345,4,4,5,5,2\n201844,33333,3,0,9,10,3\n201844,33333,4,0,9,10,3\n201844,33333,5,0,10,10,3\n</code></pre>\n\n<p>But I am getting this result and I do not want it:</p>\n\n<pre><code>201843,12345,3,4,2,5,5\n201843,12345,4,4,5,5,5\n201844,33333,3,0,9,10,5\n201844,33333,4,0,9,10,5\n201844,33333,5,0,10,10,5\n</code></pre>\n\n<p>I have used this script</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n$|=1;\n\nmy $FILEA = $ARGV[0];\nmy $FILEB = $ARGV[1];\n\nopen ( FA, '&lt;', $FILEA ) || die ( \"File $FILEA Could not be found!\" );\nopen ( FB, '&lt;', $FILEB ) || die ( \"File $FILEB Could not be found!\" );\n\n\nmy %hash;\nwhile ( &lt;FA&gt; ){\n        chomp;\n        my($col1, $col2, $col3) = split \",\";\n        $hash{$col1,$col2}=$col3;\n\n}\n\nmy $count=0;\nwhile ( &lt;FB&gt; ){\n        chomp;\n        my($cl1, $cl2, $cl3, $cl4, $cl5, $cl6) = split \",\";\n        if(exists($hash{$cl1,$cl2}) and ($cl5 &gt; 0)){\n        $count++;\n        }\n        if ($cl5 &gt; 0){\n                print join(\",\",$$cl1, $cl2, $cl3, $cl4, $cl5, $cl6,$count);\n        }\n}\n</code></pre>\n"}, {"tags": ["perl", "gzip", "tie"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1544069409, "post_id": 53643019, "comment_id": 94147876, "body": "Re &quot;<i>Tie::File is a bad idea for large files, as it needs to store the whole file in memory at once</i>&quot;, That is not true. It only keeps a configurable-sized portion of the file in memory. But it does store the offset of every line it encounters in memory, and that can easily take as much memory than the file itself. So Tie::File isn&#39;t only insanely slower than the alternatives --I&#39;ve seen it be 30x slower in my tests-- it also uses more memory than simply loading the entire file into memory. It&#39;s an awful module that should be avoided."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1544057398, "creation_date": 1544057398, "answer_id": 53643019, "question_id": 53642912, "link": "https://stackoverflow.com/questions/53642912/perl-reading-only-specific-gz-file-lines/53643019#53643019", "title": "Perl reading only specific gz file lines", "body": "<p><code>Tie::File</code> is a bad idea for large files, as it needs to store the whole file in memory at once. It is also an impractical, if not impossible idea for compressed files. Instead, you will want to operate on an input stream of your data. And if you are going to modify the data, an output stream to a new copy of the data. Perl has pretty good support for gzip compression through the <code>PerlIO::gzip' layer, but you could also pipe data through one or two</code>gzip` processes.</p>\n\n<pre><code># I/O stream initialization\nuse PerlIO::gzip;\nopen my $input, \"&lt;:gzip\", \"data.gz\";\nopen my $output. \"&gt;:gzip\", \"data.new.gz\";    # if $output is needed\n\n# I/O stream initialization without PerlIO::gzip\nopen my $input, \"gzip -d data.gz |\";\nopen my $output, \"| gzip -c &gt; data.new.gz\";\n</code></pre>\n\n<p>Once the input (and optional output) streams are set up, you can use Perl's I/O facilities on them just like any other file handles.</p>\n\n<pre><code># copy first $startLine lines unedited\nwhile (&lt;$input&gt;) {\n    print $output $_;\n    last if $. &gt;= $startLine;\n}\n\nwhile (my $line = &lt;$input&gt;) {\n    # blah blah blah\n    # manipulate $line\n    print $output $line;\n    last if $. &gt;= $endLine;\n}\n\nprint $output &lt;$input&gt;; # write remaining input to output stream\nclose $input;\nclose $output;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 10752063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de1bcbf5ea59f46484f664cef063ae?s=128&d=identicon&r=PG&f=1", "display_name": "Anfoni", "link": "https://stackoverflow.com/users/10752063/anfoni"}, "edited": false, "score": 0, "creation_date": 1544063027, "post_id": 53643020, "comment_id": 94146450, "body": "Thank you for the quick response! Is there a way to jump directly to the start line without have to perform a getline for the first couple of thousand lines? Run time for the first lines up until the start_line was something I was trying to avoid."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1544064194, "post_id": 53643020, "comment_id": 94146736, "body": "If the lines are a fixed length, you can <code>seek</code> to the correct record (<code>$z-&gt;seek($record_length * $start_line, 0)</code>)"}, {"owner": {"reputation": 43, "user_id": 10752063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de1bcbf5ea59f46484f664cef063ae?s=128&d=identicon&r=PG&f=1", "display_name": "Anfoni", "link": "https://stackoverflow.com/users/10752063/anfoni"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1544065885, "post_id": 53643020, "comment_id": 94147105, "body": "Thanks @mob. When you used $record_length do you mean you need to multiply the number of total lines within the file by the start line?   Looking at the documentation for seek it says we need ($positon,$whence). In this case wouldn&#39;t it be seek($start_line,0)?  Meaning that we go from the 1st line to the $start_line?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 43, "user_id": 10752063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de1bcbf5ea59f46484f664cef063ae?s=128&d=identicon&r=PG&f=1", "display_name": "Anfoni", "link": "https://stackoverflow.com/users/10752063/anfoni"}, "edited": false, "score": 1, "creation_date": 1544069232, "post_id": 53643020, "comment_id": 94147834, "body": "@Anfoni, Re &quot;<i>Is there a way to jump directly to the start line without have to perform a getline for the first couple of thousand lines?</i>&quot;, Text files are not indexed, meaning there&#39;s no way to know where lines start. Even Tie::File needs to read all the lines up to the one you request. (Tie::File also takes 30x longer than not using Tie::File. NEVER use Tie::File)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544069641, "post_id": 53643020, "comment_id": 94147940, "body": "@choroba, Tie::File gets very slow and memory hungry &lt;del&gt;when processing large files.&lt;/del&gt;&lt;ins&gt;period&lt;/ins&gt;. It stores the index of every line encountered on top of the configurable-sized buffer, and it has insane computational overhead no matter what size the file is."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1544070096, "post_id": 53643020, "comment_id": 94148049, "body": "Could also do <code>for (1 .. $end_line) { my $line = $z-&gt;getline; next if $_ &lt; $start_line; ... }</code>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1544101925, "post_id": 53643020, "comment_id": 94162546, "body": "The first argument to seek is a number of bytes, not a number of lines."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1544070032, "last_edit_date": 1544070032, "creation_date": 1544057405, "answer_id": 53643020, "question_id": 53642912, "link": "https://stackoverflow.com/questions/53642912/perl-reading-only-specific-gz-file-lines/53643020#53643020", "title": "Perl reading only specific gz file lines", "body": "<p>Use <a href=\"http://p3rl.org/IO::Uncompress::Gunzip\" rel=\"nofollow noreferrer\">IO::Uncompress::Gunzip</a> which is a core module:</p>\n\n<pre><code>use IO::Uncompress::Gunzip;\n\nmy $z = IO::Uncompress::Gunzip-&gt;new('file.gz');\n$z-&gt;getline for 1 .. $start_line - 1;\nfor ($start_line .. $end_line) {\n    my $line = $z-&gt;getline;\n    ...\n}\n</code></pre>\n\n<p><a href=\"http://p3rl.org/Tie::File\" rel=\"nofollow noreferrer\">Tie::File</a> gets very slow and memory hungry when processing large files.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 10752063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de1bcbf5ea59f46484f664cef063ae?s=128&d=identicon&r=PG&f=1", "display_name": "Anfoni", "link": "https://stackoverflow.com/users/10752063/anfoni"}, "edited": false, "score": 0, "creation_date": 1544321624, "post_id": 53678766, "comment_id": 94234180, "body": "Thanks for the tip! I&#39;ll definitely give it a try, and let you know the results!"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1544233559, "last_edit_date": 1544233559, "creation_date": 1544233231, "answer_id": 53678766, "question_id": 53642912, "link": "https://stackoverflow.com/questions/53642912/perl-reading-only-specific-gz-file-lines/53678766#53678766", "title": "Perl reading only specific gz file lines", "body": "<p>You write: \"<em>In my test case file I am interested in only reading in lines 123080 to 139361</em>\".</p>\n\n<p>This can be done in the shell as well:</p>\n\n<pre><code>zcat file | tail -n +123080 | head -16282\n</code></pre>\n\n<p>Or by:</p>\n\n<pre><code>my $file = 'the_file.gz';\nmy($from,$to) = (123080,139361);\nmy @lines = qx( zcat $file | tail -n +$from | head -@{[-$from+$to+1]});\n</code></pre>\n\n<p>This might be faster than a normal single core pure perl solution since the <code>zcat</code>, <code>tail</code> and <code>head</code> inside qx will become three processes, and perl is a fourth. And all four might get a separate cpu core on their own. You might want to test the speed with different line numbers.</p>\n"}], "owner": {"reputation": 43, "user_id": 10752063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de1bcbf5ea59f46484f664cef063ae?s=128&d=identicon&r=PG&f=1", "display_name": "Anfoni", "link": "https://stackoverflow.com/users/10752063/anfoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 1, "accepted_answer_id": 53643020, "answer_count": 3, "score": 4, "last_activity_date": 1546403928, "creation_date": 1544056502, "last_edit_date": 1546403928, "question_id": 53642912, "link": "https://stackoverflow.com/questions/53642912/perl-reading-only-specific-gz-file-lines", "title": "Perl reading only specific gz file lines", "body": "<p>I'm trying to make a parsing script that parses a huge text file (2 million+ lines) that is gunzip compressed. I only want to parse a range of lines in the text file. So far I've used zgrep -n to find the two lines that mentions the string that I know will start and end the section of the file I'm interested.</p>\n\n<p>In my test case file I am interested in only reading in lines 123080 to 139361. I've found Tie::File to access the file lines using the array object it returns, but unfortunately this won't work for the gun zipped file I'm working with. </p>\n\n<p>Is there something like the following for a gunzipped file?</p>\n\n<pre><code>use Tie::File\ntie @fileLinesArray, 'Tie::File', \"hugeFile.txt.gz\"\nmy $startLine = 123080;\n\nmy $endLine = 139361;    \nmy $lineCount = $startLine;\nwhile ($lineCount &lt;= $endLine){\n    my $line = @fileLinesArray[$lineCount]\n    blah blah...\n}\n</code></pre>\n"}]