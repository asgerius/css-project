[{"tags": ["debian", "audio", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4933750"}, "edited": false, "score": 0, "creation_date": 1520479277, "post_id": 49193269, "comment_id": 85391138, "body": "As for moving this question to SE, I&#39;ve already posted there and got lots of close votes without a relevant answer."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520488498, "post_id": 49193269, "comment_id": 85391139, "body": "As I believe I commented over on SO, see <a href=\"https://www.perlmonks.org/?node_id=1203062\" rel=\"nofollow noreferrer\">this PerlMonks thread</a>, where it sounded like it might be worth taking a look at <a href=\"https://metacpan.org/pod/distribution/SDL/lib/pods/SDL.pod\" rel=\"nofollow noreferrer\"><code>SDL</code></a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4933750"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520523322, "post_id": 49193269, "comment_id": 85391140, "body": "@haukex Thanks. But I skimmed through SDL&#39;s manual and didn&#39;t find a word about synthsis. There was only audio playback there."}], "answers": [{"tags": [], "owner": {"reputation": 22623, "user_id": 147175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PyWe3.jpg?s=128&g=1", "display_name": "Scott Stensland", "link": "https://stackoverflow.com/users/147175/scott-stensland"}, "is_accepted": true, "score": 2, "last_activity_date": 1521148947, "last_edit_date": 1521148947, "creation_date": 1520690898, "answer_id": 49209987, "question_id": 49193269, "link": "https://stackoverflow.com/questions/49193269/perl-sound-synthesis-on-debian-9/49209987#49209987", "title": "Perl sound synthesis on Debian 9", "body": "<p>audio is just a curve, so code which makes a point wobble up and down and is sampled at some interval of time will synthesize audio (raw audio in PCM format) ... here perl generates such a curve</p>\n\n<pre><code>perl -e 'for ($c=0; $c&lt;4*44100; $c++) {\n             $k=1*sin((1500+$c/16e1)*$c*22e-6); print pack \"f\", $k;\n         } ' |\nsox -V -r 44100 -c 1 -b 32 -e floating-point -t raw - \\\n    -c 2 -b 16 -t wav - trim 0 3 gain -1 dither |\ntee test.wav |\naplay\n</code></pre>\n\n<p>output from perl is piped into sox which effectively just adds a wav format header to the PCM audio ... then the wav file is piped into tee which outputs a wav file while piping to aplay which renders the audio ... for the benefit of others this installs needed debian (ubuntu) packages</p>\n\n<pre><code>sudo apt-get install sox alsa-utils\n</code></pre>\n\n<p>now just save above code into a file and source it ... vi somefile-with-above-code</p>\n\n<pre><code>source somefile-with-above-code\n</code></pre>\n\n<p>its handy to separate the process of audio synthesis from its sonic rendering so above division of labor is often justified</p>\n\n<p>Alternatively you can use perl to synthesize the raw audio and dump it directly to a file yourself ... just save following perl snippet into a file  <code>vi my-audio-perl-file</code></p>\n\n<pre><code>perl -e 'for ($c=0; $c&lt;4*44100; $c++) {\n             $k=1*sin((1500+$c/16e1)*$c*22e-6); print pack \"f\", $k;\n         } '\n</code></pre>\n\n<p>then execute it redirecting output to a file using </p>\n\n<pre><code>source ./my-audio-perl-file  &gt; synth_audio.pcm\n</code></pre>\n\n<p>then use <a href=\"https://www.audacityteam.org/\" rel=\"nofollow noreferrer\">Audacity</a> to visualize and render the PCM file ... File -> Import Raw Data </p>\n\n<pre><code>-&gt; Encoding -&gt; 32 bit float \n-&gt; Byte order -&gt; Little-endian\n-&gt; Channels  -&gt; 1 Channel (Mono)\n</code></pre>\n\n<p>and hit <code>Import</code></p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1520596576, "question_id": 428857}, "owner": {"reputation": 121, "user_id": 13945629, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rWPKvxztWnw/AAAAAAAAAAI/AAAAAAAABH0/AMZuucl27opf5Ty_QQfyZAzFPLH-w5PQFg/photo.jpg?sz=128", "display_name": "tom463", "link": "https://stackoverflow.com/users/13945629/tom463"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 49209987, "answer_count": 1, "score": 2, "last_activity_date": 1521148947, "creation_date": 1520456122, "question_id": 49193269, "link": "https://stackoverflow.com/questions/49193269/perl-sound-synthesis-on-debian-9", "title": "Perl sound synthesis on Debian 9", "body": "<p>How to generate sounds in Perl on Debian 9?</p>\n\n<p>Own research done, not much found. Eg. <a href=\"https://metacpan.org/pod/Audio::NoiseGen\" rel=\"nofollow noreferrer\">Audio::NoiseGen</a>, which has problems with dependencies (namely <a href=\"https://metacpan.org/pod/Audio::PortAudio\" rel=\"nofollow noreferrer\">Audio::PortAudio</a>, which in turn is old and doesn't accept <code>portaudio-2.0</code> on my Debian 9).</p>\n\n<p>I mean sound synthesis, not playing files. The closest to what I'm looking for is using the <code>system</code> command to call the <code>sox</code> program. But that's reaching outside of Perl, so not a good integration. And I need a good one like a Perl module.</p>\n"}, {"tags": ["regex", "perl", "perl-module"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1520440285, "post_id": 49156809, "comment_id": 85318425, "body": "Looks like the solution is in the title."}, {"owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1520440892, "post_id": 49156809, "comment_id": 85318829, "body": "@toolic: yes, thats the issue. For an input like 20a10, the output should be &quot;Build is NOT required&quot; which is not happening."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1520441088, "post_id": 49156809, "comment_id": 85318950, "body": "You listed 6 example inputs, but you didn&#39;t say which of the 6 values should match and which shouldn&#39;t. Please explain what strings should match and which shouldn&#39;t!"}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 0, "last_activity_date": 1520451003, "creation_date": 1520451003, "answer_id": 49159838, "question_id": 49156809, "link": "https://stackoverflow.com/questions/49156809/perl-regex-scenario/49159838#49159838", "title": "perl regex scenario", "body": "<p>Example inputs are good, better would be if you could additionally explain the rules for when a \"build is required\" and when it isn't. Based on your (<em>possibly incomplete!</em>) example inputs:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Test::More;\n\nmy $build_is_required_regex = qr/^20a\\d(?!\\d)/;\n\nlike   \"20a0\",     $build_is_required_regex;\nlike   \"20a0a1\",   $build_is_required_regex;\nlike   \"20a1\",     $build_is_required_regex;\nlike   \"20a1a2\",   $build_is_required_regex;\nlike   \"20a2a11\",  $build_is_required_regex;\nlike   \"20a2a1\",   $build_is_required_regex;\nunlike \"20a10\",    $build_is_required_regex;\nunlike \"20a10a11\", $build_is_required_regex;\nunlike \"20a11\",    $build_is_required_regex;\nunlike \"20a11a1\",  $build_is_required_regex;\n\ndone_testing;\n</code></pre>\n\n<p>So that means:</p>\n\n<pre><code>if ( $release_num =~ /^20a\\d(?!\\d)/ ) {\n    print \" Build is required \\n\";\n}\nelse {\n    print \" Build is NOT required \\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1547875163, "creation_date": 1547875163, "answer_id": 54264298, "question_id": 49156809, "link": "https://stackoverflow.com/questions/49156809/perl-regex-scenario/54264298#54264298", "title": "perl regex scenario", "body": "<p>Based on the if cases given, I'm guessing the desired answer is more like</p>\n\n<pre><code>if ( $release_num =~ /^20a[012](?!\\d)/ ) {\n    print \" Build is required \\n\";\n}\nelse {\n    print \" Build is NOT required \\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 7620805, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3f2d11bb6c725bca5c844805789f68c1?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/7620805/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1547875163, "creation_date": 1520440110, "last_edit_date": 1520441416, "question_id": 49156809, "link": "https://stackoverflow.com/questions/49156809/perl-regex-scenario", "title": "perl regex scenario", "body": "<p>Based on the user input i.e. $release_num, I have to take a call on a particular action.</p>\n\n<p>Its working in certain cases but fails in some other cases. Need help in refining the final solution.</p>\n\n<p>Code:</p>\n\n<pre><code>my $release_num;\n\nmy $short_release_num = substr($release_num, 0, 4);\n\nif (($short_release_num eq '20a0') or ($short_release_num eq '20a1') or ($short_release_num eq '20a2'))\n{\n    print \" Build is required \\n\";\n}\nelse\n{\n    print \" Build is NOT required \\n\";\n}\n</code></pre>\n\n<p>Probable values of user input $release_num are as follows:</p>\n\n<pre><code>$release_num = \"20a1\";\n$release_num = \"20a1a11\";\n$release_num = \"20a10\";\n$release_num = \"20a10a11\";\n$release_num = \"20a11\";\n$release_num = \"20a11a1\";\n</code></pre>\n\n<p>While my code works for some of the specific cases (<code>20a1</code>), but its not a generic solution as it fails for cases like <code>20a10a11</code>. Please suggest how the code can be improved. </p>\n\n<p>For Example: If the input is 20a10 or 20a10a11, the output should be <code>\"Build is NOT required\"</code> whereas I'm getting the output as \"<code>Build is required</code>\".</p>\n\n<p>Expected Result:</p>\n\n<p>For following inputs we should get \"Build is required\":</p>\n\n<pre><code>$release_num = \"20a0\";\n$release_num = \"20a0a1\";\n$release_num = \"20a1\";\n$release_num = \"20a1a2\";\n$release_num = \"20a2a11\";\n$release_num = \"20a2a1\";\n</code></pre>\n\n<p>For following inputs we should get \"Build is NOT required\":</p>\n\n<pre><code>$release_num = \"20a10\";\n$release_num = \"20a10a11\";\n$release_num = \"20a11\";\n$release_num = \"20a11a1\";\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 2, "creation_date": 1520435283, "post_id": 49155083, "comment_id": 85314701, "body": "sub functions return the value of the last command if there is no explicit return statement."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 6, "last_activity_date": 1520435316, "creation_date": 1520435316, "answer_id": 49155157, "question_id": 49155083, "link": "https://stackoverflow.com/questions/49155083/how-is-this-perl-sub-function-returning-anything/49155157#49155157", "title": "How is this perl sub function returning anything?", "body": "<blockquote>\n  <p>why do we not need to take some result from the grep line and return it</p>\n</blockquote>\n\n<p>You do, and are. See <code>perldoc perlsub</code>:</p>\n\n<blockquote>\n  <p>If no \"return\" is found and if the last statement is an expression, its value is returned.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "edited": false, "score": 0, "creation_date": 1520446820, "post_id": 49156662, "comment_id": 85322444, "body": "Yes, thanks for the detail. I understand Perl only returns lists, it was just the lack of an explicit return statement that I was confused by, which your answer and the previous one has answered. I didn&#39;t know about Perl returning the result of the final statement when there&#39;s no explicit return statement."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1520439638, "creation_date": 1520439638, "answer_id": 49156662, "question_id": 49155083, "link": "https://stackoverflow.com/questions/49155083/how-is-this-perl-sub-function-returning-anything/49156662#49156662", "title": "How is this perl sub function returning anything?", "body": "<p>It's not clear which part of the subroutine you're not understanding. But before we look at the subroutine, a brief aside about terminology.</p>\n\n<p>In Perl \"lists\" and \"arrays\" are two different things. And a subroutine only ever returns a list, not an array. The fact that you then store the returned list into the array <code>@filtered</code> makes no difference - what you originally got back from the subroutine was a list.</p>\n\n<p>With that in mind, let's look at your subroutine.</p>\n\n<p>You pass in the array, <code>@array</code>. The contents of that array are put into <code>@_</code> and passed to the subroutine.</p>\n\n<p>You then use <code>grep</code> on your input array, <code>@_</code>. <code>grep</code> acts as a list filter - it takes a list as input and returns a (probably shorter) list as output. So you get a list of values as the output from <code>grep</code>.</p>\n\n<p>As your subroutine doesn't have an explicit <code>return</code> statement, it returns the value of the final statement executed in the subroutine. That's the <code>grep</code> statement, so the subroutine returns the list that was returned from the <code>grep</code>.</p>\n\n<p>You then take the list that was returned from your subroutine and store it in <code>@filtered</code>.</p>\n\n<p>Does that help at all?</p>\n"}], "owner": {"reputation": 2310, "user_id": 380329, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/f2971b8caa637f5949413f0da1ce26a8?s=128&d=identicon&r=PG", "display_name": "SSilk", "link": "https://stackoverflow.com/users/380329/ssilk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 49155157, "answer_count": 2, "score": 0, "last_activity_date": 1520439638, "creation_date": 1520435140, "question_id": 49155083, "link": "https://stackoverflow.com/questions/49155083/how-is-this-perl-sub-function-returning-anything", "title": "How is this perl sub function returning anything?", "body": "<p>I've been using the implementation of uniq shown <a href=\"https://stackoverflow.com/questions/7651/how-do-i-remove-duplicate-items-from-an-array-in-perl\">here</a> for a couple of years in various scripts, and I just realized I don't understand how it's <em>returning</em> an array. </p>\n\n<p>That implementation is as follows:</p>\n\n<pre><code>sub uniq {\n    my %seen;\n    grep !$seen{$_}++, @_;\n}\n\nmy @array = qw(one two three two three);\nmy @filtered = uniq(@array);\n</code></pre>\n\n<p>Can someone explain how that two line sub is returning an array that gets assigned to <code>@filtered</code>? I.e. why do we not need to take some result from the grep line and return it? </p>\n\n<p>Looking at the sub itself in isolation, my assumption would have been that the grep line was operating on an array passed by reference, <code>@_</code>, and that the calling line could just be <code>uniq(@array);</code>, with <code>@array</code> being modified after that call. </p>\n\n<p>This is purely for my own understanding, I've got no beef with the functionality of this sub, which I've been using with great success. </p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 3, "last_activity_date": 1520426820, "creation_date": 1520426820, "answer_id": 49152347, "question_id": 49152003, "link": "https://stackoverflow.com/questions/49152003/debug-cgi-script-on-the-command-line-with-json/49152347#49152347", "title": "Debug cgi script on the command line with json", "body": "<p>Okay, I figured it out:</p>\n\n<pre><code>$ perl 1.pl POSTDATA='{\"a\": 1, \"b\": 2}'\n</code></pre>\n"}], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 49152347, "answer_count": 1, "score": 1, "last_activity_date": 1520426820, "creation_date": 1520425754, "last_edit_date": 1520426081, "question_id": 49152003, "link": "https://stackoverflow.com/questions/49152003/debug-cgi-script-on-the-command-line-with-json", "title": "Debug cgi script on the command line with json", "body": "<p>I have a cgi script that gets sent some simple json, and I want to parse the json, then return a couple of the values.  I'm trying to test my cgi script on the command line, but I get this error:</p>\n\n<blockquote>\n  <p>malformed JSON string, neither tag, array, object, number, string or\n  atom, at character offset 0 (before &quot;(end of string)&quot;) at\n  1.pl line 21.</p>\n</blockquote>\n\n<p>Here's my command line attempt:</p>\n\n<pre><code>$ perl 1.pl '{\"a\": 1, \"b\": 2}'\n&lt;h1&gt;Software error:&lt;/h1&gt;\n&lt;pre&gt;malformed JSON string, neither tag, array, object, number, string or atom, at character offset 0 (before &amp;quot;(end of string)&amp;quot;) at 1.pl line 21.\n&lt;/pre&gt;\n&lt;p&gt;\nFor help, please send mail to this site's webmaster, giving this error message \nand the time and date of the error.\n\n&lt;/p&gt;\n[timestamp] 1.pl: malformed JSON string, neither tag, array, object, number, string or atom, at character offset 0 (before \"(end of string)\") at 1.pl \n</code></pre>\n\n<p>1.pl:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse 5.020;\nuse autodie;\nuse Data::Dumper;\nuse CGI;\nuse CGI::Carp qw(fatalsToBrowser);\nuse JSON;\n\nmy $q = CGI-&gt;new;\n\nmy $json = $q-&gt;param('POSTDATA');\nmy $href = decode_json($json);\nmy $a = $href-&gt;{a};\nmy $b = $href-&gt;{b};\n\nprint $q-&gt;header,\n      $q-&gt;start_html(\"Test Page\"),\n      $q-&gt;h1(\"Results:\"),\n      $q-&gt;div(\"a=$a\"),\n      $q-&gt;div(\"b=$b\"),\n      $q-&gt;end_html;\n</code></pre>\n\n<p>If I just return $json, this is what I get:</p>\n\n<pre><code>$ perl 1.pl '{\"a\": 1, \"b\": 2}'\n[Wed Mar  7 05:32:19 2018] 1.pl: Use of uninitialized value $json in concatenation (.) or string at 1.pl line 25.\nContent-Type: text/html; charset=ISO-8859-1\n\n&lt;!DOCTYPE html\n    PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n     \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;\n&lt;head&gt;\n&lt;title&gt;Test Page&lt;/title&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Results:&lt;/h1&gt;&lt;div&gt;--&gt;&lt;---&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>So, it looks like my cgi script is not receiving anything from the command line, and the line <code>my $href = decode_json($json);</code> is causing the error. Is there a way to send json data on the command line?</p>\n"}, {"tags": ["perl", "xs"], "answers": [{"comments": [{"owner": {"reputation": 549, "user_id": 123679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb364b3c6b6e18465df2e50ee13626dd?s=128&d=identicon&r=PG", "display_name": "manison", "link": "https://stackoverflow.com/users/123679/manison"}, "edited": false, "score": 0, "creation_date": 1520448444, "post_id": 49155925, "comment_id": 85323415, "body": "You are saying that one should always explicitly choose between byte or utf-8 representation depending on the underlying C function? The default typemap uses SvPV which is not suitable for representing strings, right? So your preferred way is to work directly with SV in argument and retrieve the pointer and length in the PREINIT section. The length keyword is not the right way to do it, I assume."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 549, "user_id": 123679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb364b3c6b6e18465df2e50ee13626dd?s=128&d=identicon&r=PG", "display_name": "manison", "link": "https://stackoverflow.com/users/123679/manison"}, "edited": false, "score": 1, "creation_date": 1520450545, "post_id": 49155925, "comment_id": 85324665, "body": "Re &quot;<i>You are saying that one should always explicitly choose between byte or utf-8 representation depending on the underlying C function?</i>&quot;, There&#39;s a third option: Using <code>SvPV</code> along with <code>SvUTF8</code> to determine the encoding of the buffer returned by <code>SvPV</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 549, "user_id": 123679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb364b3c6b6e18465df2e50ee13626dd?s=128&d=identicon&r=PG", "display_name": "manison", "link": "https://stackoverflow.com/users/123679/manison"}, "edited": false, "score": 1, "creation_date": 1520450715, "post_id": 49155925, "comment_id": 85324769, "body": "Re &quot;<i>The default typemap uses SvPV which is not suitable for representing strings, right?</i>&quot;, When using <code>SvPV</code> without <code>SvUTF8</code>, you don&#39;t know what you have.  For example, <code>&quot;\\xE9&quot;</code> in Perl could equally result in <code>&quot;\\xE9\\x00&quot;</code> or <code>&quot;\\xC3\\xA9\\x00&quot;</code> in C when using <code>SvPV</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 549, "user_id": 123679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb364b3c6b6e18465df2e50ee13626dd?s=128&d=identicon&r=PG", "display_name": "manison", "link": "https://stackoverflow.com/users/123679/manison"}, "edited": false, "score": 1, "creation_date": 1520450759, "post_id": 49155925, "comment_id": 85324794, "body": "Re &quot;<i>So your preferred way</i>&quot;, Adjusting the typemap is equally acceptable."}, {"owner": {"reputation": 549, "user_id": 123679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb364b3c6b6e18465df2e50ee13626dd?s=128&d=identicon&r=PG", "display_name": "manison", "link": "https://stackoverflow.com/users/123679/manison"}, "edited": false, "score": 0, "creation_date": 1520494863, "post_id": 49155925, "comment_id": 85340656, "body": "I had to move the <code>SvPVxxx</code> call into the <code>INIT</code> section, since in the <code>PREINIT</code> the SV argument is not popped from the stack yet, causing the <i>&#39;sv&#39; was not declared in this scope</i> error."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1520512693, "post_id": 49155925, "comment_id": 85351437, "body": "Why should <code>char *</code> in an XS prototype be buggy?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1520527270, "post_id": 49155925, "comment_id": 85361721, "body": "@nwellnhof, It shouldn&#39;t be, but people make mistakes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 549, "user_id": 123679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb364b3c6b6e18465df2e50ee13626dd?s=128&d=identicon&r=PG", "display_name": "manison", "link": "https://stackoverflow.com/users/123679/manison"}, "edited": false, "score": 0, "creation_date": 1520528191, "post_id": 49155925, "comment_id": 85362268, "body": "@manison, Ah ok. Fixed by move it to the <code>CODE</code> section. Note that you must leave the declaration in the <code>PREINIT</code> section. (Or you could move it into curlies in your <code>CODE</code> section (e.g. <code>CODE: { STRLEN len; char* s = SvPVutf8(sv, len); ... }</code>)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1520527441, "last_edit_date": 1520527441, "creation_date": 1520437455, "answer_id": 49155925, "question_id": 49151872, "link": "https://stackoverflow.com/questions/49151872/how-to-pass-length-of-a-string-argument-to-code-section-in-xs/49155925#49155925", "title": "How to pass length of a string argument to CODE section in XS?", "body": "<p>First of all, if you're using <code>char*</code> in your XS prototype (and the default typemap), your code is buggy.</p>\n\n<p>You want</p>\n\n<pre><code>void\nfoo(SV* sv)\nPREINIT:\n    STRLEN len;\n    char* s;\nCODE:\n    s = SvPVbyte(sv, len);\n    foo(s, len);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void\nfoo(SV* sv)\nPREINIT:\n    STRLEN len;\n    char* s;\nCODE:\n    s = SvPVutf8(sv, len);\n    foo(s, len);\n</code></pre>\n\n<p>Remember that Perl strings are sequences of 32-bit or 64-bit numbers, while C strings are sequences of 8-bit chars.<sup>[1]</sup> Some conversion needs to occur, and you need to specify which one.</p>\n\n<p>In the first case, each character of the string will be a <code>char</code> of <code>s</code>.</p>\n\n<p>In the second case, <code>s</code> will be provided the Perl string encoded using utf8.</p>\n\n<hr>\n\n<ol>\n<li>Technically, a <code>char</code> can be larger than 8 bits, but I don't think it can be on systems supported by <code>perl</code>.</li>\n</ol>\n"}], "owner": {"reputation": 549, "user_id": 123679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb364b3c6b6e18465df2e50ee13626dd?s=128&d=identicon&r=PG", "display_name": "manison", "link": "https://stackoverflow.com/users/123679/manison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 49155925, "answer_count": 1, "score": 4, "last_activity_date": 1520527441, "creation_date": 1520425365, "question_id": 49151872, "link": "https://stackoverflow.com/questions/49151872/how-to-pass-length-of-a-string-argument-to-code-section-in-xs", "title": "How to pass length of a string argument to CODE section in XS?", "body": "<p>In XS I can pass the length of a string argument to a C function using the <a href=\"https://perldoc.perl.org/perlxs.html#The-length(NAME)-Keyword\" rel=\"nofollow noreferrer\">length keyword</a>:</p>\n\n<pre><code>static int foo(const char *s, size_t len)\n{\n    return 1;\n}\n\nMODULE = Foo        PACKAGE = Foo\n\nvoid\nfoo(char *s, STRLEN length(s))\n</code></pre>\n\n<p>However how can I get the length of the string if I need it inside the CODE block?</p>\n\n<pre><code>void\nfoo(char *s, STRLEN length(s))\nCODE:\n    ...\n    foo(s, ???);\n</code></pre>\n\n<p>I can use <code>STRLEN_length_of_s</code> or <code>XSauto_length_of_s</code> variable autogenerated \nby <em>xsubpp</em> but it feels a bit hardcoded. Is there a way (possibly a predefined macro) I can use to get the variable name? Or can I assign my own name to the length argument? Or do I need to resort to declaring the argument as <code>SV *</code> and then get the length myself with <code>SvPV</code> in CODE section?</p>\n"}, {"tags": ["php", "perl", "zlib", "deflate"], "comments": [{"owner": {"reputation": 427, "user_id": 4097674, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000169908395/picture?type=large", "display_name": "ass-king some question", "link": "https://stackoverflow.com/users/4097674/ass-king-some-question"}, "edited": false, "score": 0, "creation_date": 1571491033, "post_id": 49144776, "comment_id": 103263436, "body": "How did you get the prefix and suffix between $brute variable at line 17 of your code"}], "answers": [{"comments": [{"owner": {"reputation": 56, "user_id": 4660994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WkjfooTrKuo/AAAAAAAAAAI/AAAAAAAAABo/z0R2mPHoe4E/photo.jpg?sz=128", "display_name": "Dzulfikar Adib", "link": "https://stackoverflow.com/users/4660994/dzulfikar-adib"}, "edited": false, "score": 0, "creation_date": 1520465837, "post_id": 49148515, "comment_id": 85331746, "body": "Hi @daxim, I have fixed my codes <a href=\"https://pastebin.com/fNuXNE29\" rel=\"nofollow noreferrer\">here</a> but seems stuck on bruteforce4 (I still working on it). Ya you are right mine before fail because it was too short and error from format specifier. Until now, I do brute-fix-brute-fix and need hours. by the way, how do you know that I need 5 nibbles on my template. And the position of nibbles you mark with arrow, is amazing I dont realize that."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 56, "user_id": 4660994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WkjfooTrKuo/AAAAAAAAAAI/AAAAAAAAABo/z0R2mPHoe4E/photo.jpg?sz=128", "display_name": "Dzulfikar Adib", "link": "https://stackoverflow.com/users/4660994/dzulfikar-adib"}, "edited": false, "score": 0, "creation_date": 1520519449, "post_id": 49148515, "comment_id": 85356072, "body": "<code>0000f39928192211151069192827576f511211221e1c2e12626b6f5f5f57&zwnj;&#8203;6e69b16375535b6f0000</code> \u2194 <code>x\\234c\\140\\370&lt;SCRIPT SRC=&lt;?PHPINFO();?&gt;&gt;&lt;&#47;script&gt;\\3\\3\\0\\307\\17\\n\\233</code>"}, {"owner": {"reputation": 427, "user_id": 4097674, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000169908395/picture?type=large", "display_name": "ass-king some question", "link": "https://stackoverflow.com/users/4097674/ass-king-some-question"}, "edited": false, "score": 0, "creation_date": 1571550435, "post_id": 49148515, "comment_id": 103274578, "body": "How did you get the prefix and suffix between $brute variable at line 17 of your code"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 2, "last_activity_date": 1520415383, "creation_date": 1520415383, "answer_id": 49148515, "question_id": 49144776, "link": "https://stackoverflow.com/questions/49144776/php-shell-on-pngs-idat-chunk/49148515#49148515", "title": "PHP shell on PNG&#39;s IDAT Chunk", "body": "<p>The bruteforce fails because it's too short. You need 5 nibbles, not only 4. I marked the extra digit with an arrow.</p>\n\n<pre><code>0000f399281922111510691928276e6e....1f576e69b16375535b6f0000 your template\n0000f399281922111510691928276e6e51121f576e69b16375535b6f0000 \"x\\234c`\\370&lt;SCRIPT SRC=//PH&gt;&lt;/script&gt;\\3\\3\\0w\\314\\10)\"\n0000f399281922111510691928276e6e576f5f576e69b16375535b6f0000 \"x\\234c`\\370&lt;SCRIPT SRC=//&lt;?&gt;&lt;/script&gt;\\3\\3\\0w\\314\\10)\"\n                                    \u2191\n</code></pre>\n\n<p>The program also contains a bug that prevents it from completely exhausting the search space. The format specifier for sprintf must be zero-padded, otherwise the hexdigit strings are too short; in other words in the original program it must be <code>%04x</code>, not <code>%x</code>.</p>\n"}], "owner": {"reputation": 56, "user_id": 4660994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WkjfooTrKuo/AAAAAAAAAAI/AAAAAAAAABo/z0R2mPHoe4E/photo.jpg?sz=128", "display_name": "Dzulfikar Adib", "link": "https://stackoverflow.com/users/4660994/dzulfikar-adib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2107, "favorite_count": 1, "accepted_answer_id": 49148515, "answer_count": 1, "score": 2, "last_activity_date": 1566641920, "creation_date": 1520400700, "question_id": 49144776, "link": "https://stackoverflow.com/questions/49144776/php-shell-on-pngs-idat-chunk", "title": "PHP shell on PNG&#39;s IDAT Chunk", "body": "<p>I am studying about DVWA on file upload high-vulnerabilities. I want to bypass the filter, which only allows uploading of images like jpg or png. So I'm planning to embed payload <code>&lt;?=phpinfo();</code> to image-file. After the search, I found these great blogs:</p>\n\n<ol>\n<li><a href=\"https://whitton.io/articles/xss-on-facebook-via-png-content-types/\" rel=\"nofollow noreferrer\" title=\"Jack Whitton\">An XSS on Facebook via PNGs &amp; Wonky Content Types</a></li>\n<li><a href=\"https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/\" rel=\"nofollow noreferrer\">Encoding Web Shells in PNG IDAT chunks</a></li>\n<li><a href=\"https://www.adamlogue.com/revisiting-xss-payloads-in-png-idat-chunks/\" rel=\"nofollow noreferrer\" title=\"Adam Logue\">Revisiting XSS payloads in PNG IDAT chunks</a></li>\n</ol>\n\n<p>I'm too lazy to study about Deflate algorithm and search about png shell generator and found this great repository:</p>\n\n<ol>\n<li><a href=\"https://github.com/akiraaisha/PNG-IDAT-chunks\" rel=\"nofollow noreferrer\" title=\"PNG IDAT Payload Generator\">PNG Payload Generator with PERL</a></li>\n</ol>\n\n<p>After clone and run, it works great. But the payload is for XSS Vuln <a href=\"https://imgur.com/uQPaZ3x\" rel=\"nofollow noreferrer\" title=\"Hexdump Output\">output here</a>:</p>\n\n<pre><code>&lt;SCRIPT SRC=//ABC.DE&gt;&lt;/SCRIPT&gt;\n</code></pre>\n\n<p>I want to finish the DVWA's objective. It says </p>\n\n<blockquote>\n  <p>Execute any PHP function of your choosing on the target system (such as phpinfo() or system()) thanks to this file upload vulnerability.</p>\n</blockquote>\n\n<p>So, the payload what I want is: <code>&lt;?=phpinfo();?&gt;</code> embed on PNG's IDAT chunks, which this payload survived from filters and compression on IDAT. From the repository, I found the bruteforce() logic where previously described by f1n1te / idontplaydarts blog. I copy the source code and try to bruteforce deflate compression with my payload <a href=\"https://pastebin.com/UqEG1B85\" rel=\"nofollow noreferrer\">here</a> but fail on symbol characters. Based on the source/generator, I have 2 question:</p>\n\n<ol>\n<li>Why on <a href=\"https://pastebin.com/UqEG1B85\" rel=\"nofollow noreferrer\">the source</a>, the bruteforce fail on symbol \"&lt;\" and \"?\", and also another ascii symbol ? But it works on ascii \"a-z\" &amp; \"A-Z\".</li>\n<li><p>On the 3 blogs &amp; 1 repository which I found, those are use this payload to bruteforce Deflate : </p>\n\n<p><code>7ff399281922111510691928276e6e5c1e151e51241f576e69b16375535b6f</code> - f1n1te\n<code>f399281922111510691928276e6e562e2c1e581b1f576e69b16375535b6f0e7f</code> - Adam\n<code>03a39f67546f2c24152b116712546f112e29152b2167226b6f5f5310</code> - idontplaydarts\n<code>0000f399281922111510691928276e6e5313241e1f576e69b16375535b6f0000</code> - Repository</p></li>\n</ol>\n\n<p>How those guys get all these payloads to bruteforce <a href=\"https://en.wikipedia.org/wiki/DEFLATE\" rel=\"nofollow noreferrer\">Deflate Compression</a>?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1520398834, "post_id": 49144452, "comment_id": 85294049, "body": "Why do think you need to write a script? Can you not use grep?"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1520398947, "post_id": 49144452, "comment_id": 85294080, "body": "@JimGarrison I am new to perl. So not sure what grep will do. And also, i want to print the line in a HTML file to show as report"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1520404526, "post_id": 49144452, "comment_id": 85295937, "body": "what do you want to fetch the line might be keywords???"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1520404650, "post_id": 49144452, "comment_id": 85295985, "body": "where to assign the line <code>its already in the input</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1520406212, "post_id": 49144452, "comment_id": 85296663, "body": "Your regex has forward slashes <code>&#47;</code> (not as delimiters, which are <code>!</code>) while the line you show you want to match doesn&#39;t. You also have a dollar sign at the end of the regex (<code>\\$</code>), which also isn&#39;t in the line. So the regex is not going to match that line. The code seems fine"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1520406456, "post_id": 49144452, "comment_id": 85296785, "body": "You show the line with quotes -- does it really have quotes? The regex doesn&#39;t allow for them. Do the lines really start with spaces (as &quot;<i>Text file lines</i>&quot; do)?  The regex doesn&#39;t.  Other than this, it seems that you need to remove the two <code>&#47;</code> and the <code>\\$</code> from the regex."}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1520408420, "post_id": 49144452, "comment_id": 85297653, "body": "@zdim Please suggest"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1520411223, "post_id": 49144452, "comment_id": 85298998, "body": "I did -- remove <code>&#47;</code> and <code>\\$</code> from regex.  Also, regex doesn&#39;t account for <code>,808</code> in the time stamp. Altogether: <code>&#47;^(\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}:\\d{2},\\d{3})\\s+.*XMLGener&zwnj;&#8203;ator\\s+TLS\\s+ID\\s+si&zwnj;&#8203;ze.*&#47;</code>  This works in my test (for that line you show). I didn&#39;t test the whole code (which seems fine to me), just the regex."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520419041, "post_id": 49144452, "comment_id": 85303789, "body": "There&#39;s also a stray semicolon at the end of the <code>if</code> statement which means it does nothing and the subsequent code block will always happen"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520451280, "post_id": 49144452, "comment_id": 85325071, "body": "This question looks awfully similar to your last one, <a href=\"https://stackoverflow.com/questions/49107903/perl-script-to-read-a-line-in-file-with-pattern-matching-and-print\">Perl script to read a line in file with pattern matching and print</a>...?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520494585, "post_id": 49163374, "comment_id": 85340517, "body": "This works! thanks. Now i want to print a particular string from a line after &quot;backslash&quot;"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520494650, "post_id": 49163374, "comment_id": 85340552, "body": "2018-03-02 07:11:54,040 DEBUG [com.Get.xmlgenerator.XMLGenerator] generating file for TranID:142283:D:/Data/Address\\142283_RESP_2018-03-02T07-11-0&zwnj;&#8203;9-009+10-00.xml"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520494678, "post_id": 49163374, "comment_id": 85340564, "body": "i want to print only :      142283_RESP_2018-03-02T07-11-09-009+10-00.xml"}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "reply_to_user": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520496271, "post_id": 49163374, "comment_id": 85341373, "body": "@Purushothaman I&#39;ve updated the source snipped in the answer: <code>$line =~ &#47;^(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}).*generating file for.*\\\\(.*)&#47;</code>"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520501136, "post_id": 49163374, "comment_id": 85344251, "body": "the line will be like:"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520501165, "post_id": 49163374, "comment_id": 85344277, "body": "2018-03-02 07:11:54,040 DEBUG [com.hdmi.xmlgenerator.XMLGenerator] generating file for TranID:142283:D:/InterfaceData/Address\\142283_RESP_2018-03-0&zwnj;&#8203;2T07-11-09-009+10-00&zwnj;&#8203;.xml"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520501181, "post_id": 49163374, "comment_id": 85344289, "body": "i want ro print only the .xml file name"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520501193, "post_id": 49163374, "comment_id": 85344297, "body": "142283_RESP_2018-03-02T07-11-09-009+10-00.xml"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520501231, "post_id": 49163374, "comment_id": 85344320, "body": "if ($line =~ /^(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}).*generating file for.*\\&#40;.*)/)  \t\t\t\t\t\t{ \t\t\t\t\t\t\tprint &quot;Timestamp: $1, filename: $2\\n&quot;; \t\t\t\t\t\t}"}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "reply_to_user": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520502700, "post_id": 49163374, "comment_id": 85345323, "body": "@Purushothaman Code snippet in the answer has the working example."}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520578870, "post_id": 49163374, "comment_id": 85381659, "body": "I am trying to split a server name and printing it. But I am getting number &quot;2&quot; while printing. Please advice"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520578883, "post_id": 49163374, "comment_id": 85381662, "body": "my $jboss_server = split(&#39;,&#39;,$jboss_servers);"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520578901, "post_id": 49163374, "comment_id": 85381672, "body": "print &quot;$jboss_server\\n&quot;;"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520578952, "post_id": 49163374, "comment_id": 85381694, "body": "In Config file: jboss_servers=app624,app621"}, {"owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "edited": false, "score": 0, "creation_date": 1520578997, "post_id": 49163374, "comment_id": 85381706, "body": "$jboss_servers is printing correctly app624,app621... After split, its not printing properly"}], "tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": true, "score": 1, "last_activity_date": 1520496237, "last_edit_date": 1520496237, "creation_date": 1520468014, "answer_id": 49163374, "question_id": 49144452, "link": "https://stackoverflow.com/questions/49144452/perl-script-to-print-the-matching-line-from-a-text-file/49163374#49163374", "title": "Perl script to print the matching line from a text file", "body": "<p>If the issue is with the regular expression, then here's the small sample with the correctly working one:</p>\n\n<pre><code>#!/usr/bin/perl\nmy @lines = (\n    '2018-03-02 10:56:06,808 DEBUG [com.server.hdmi.xmlgenerator.XMLGenerator] XMLGenerator TLS ID size 142392_REQ_2018-03-02T09-53-18-991+10-00:3561',\n    '2018-03-02 10:56:02,074 DEBUG [com.server.hdmi.xmlgenerator.XMLGenerator] XMLGenerator TLS ID size 142401_REQ_2018-03-02T09-53-20-607+10-00:1444',\n    '2018-03-02 10:56:02,074 INFO  [com.server.hdmi.xmlgenerator.XMLGenerator] Exit createDOMTreefromXMLGenerator',\n    '2018-03-02 10:56:02,074 DEBUG [com.server.hdmi.xmlgenerator.XMLGenerator] generating file for TranID:142401:D:/InterfaceData/Address\\142401_RESP_2018-03-02T10-55-35-035+10-00.xml'\n);\n\nforeach my $line (@lines) {\n    if ($line =~ /^(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}).*XMLGenerator TLS ID size (.*)/) {\n        print \"Timestamp: $1, TLS ID: $2\\n\";\n    } elsif ($line =~ /^(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}).*generating file for.*\\\\(.*)/) {\n        print \"Timestamp: $1, filename: $2\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9444991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2074c41fdaafcb52ca0ad468ec4f920?s=128&d=identicon&r=PG&f=1", "display_name": "Purushothaman", "link": "https://stackoverflow.com/users/9444991/purushothaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 49163374, "answer_count": 1, "score": -1, "last_activity_date": 1520496237, "creation_date": 1520398795, "last_edit_date": 1520424092, "question_id": 49144452, "link": "https://stackoverflow.com/questions/49144452/perl-script-to-print-the-matching-line-from-a-text-file", "title": "Perl script to print the matching line from a text file", "body": "<p>Text file lines:</p>\n\n<pre><code>2018-03-02 10:56:06,808 DEBUG [com.server.hdmi.xmlgenerator.XMLGenerator] XMLGenerator TLS ID size 142392_REQ_2018-03-02T09-53-18-991+10-00:3561\n2018-03-02 10:56:02,074 DEBUG [com.server.hdmi.xmlgenerator.XMLGenerator] XMLGenerator TLS ID size 142401_REQ_2018-03-02T09-53-20-607+10-00:1444\n2018-03-02 10:56:02,074 INFO  [com.server.hdmi.xmlgenerator.XMLGenerator] Exit createDOMTreefromXMLGenerator\n2018-03-02 10:56:02,074 DEBUG [com.server.hdmi.xmlgenerator.XMLGenerator] generating file for TranID:142401:D:/InterfaceData/Address\\142401_RESP_2018-03-02T10-55-35-035+10-00.xml\n</code></pre>\n\n<p>My script:</p>\n\n<pre><code>my $LogDir = '\\\\\\\\server\\\\ddrive\\support\\purushoth\\log';\n    if(-e $LogDir)\n\n    {                       \n        opendir(DIR, $LogDir);\n        while (defined(my $file = readdir (DIR)))   \n        {           \n            if ($file =~ m/server/i)\n            {\n            my $fullfilename = $LogDir.\"\\\\\".$file;\n            my @logFileLines = ();\n            open (LOGFILE, \"$fullfilename\") or die \"Could not open file\";\n                {\n                    @logFileLines = &lt;LOGFILE&gt;;\n\n                }\n                close(LOGFILE);\n\n                my $temp2 = 0;\n                foreach my $line1 (@logFileLines)\n                {\n                    chomp($line1);      \n                    if ( $line1 =~ (m!/^(\\d{4}-\\d{2}-\\d{2}\\s{1}\\d{2}:\\d{2}:\\d{2})\\s+.*XMLGenerator\\s+TLS\\s+ID\\s+size\\s+/.*\\$!);\n                    {\n                    print \"the line match in the server log:  $line1\\n\";\n                    }\n                 }            \n            }\n        }\n    }\n</code></pre>\n\n<p>From the log file, I want to print only matching lines like this. I tried with my script, but it's not working.</p>\n\n<pre><code>2018-03-02 10:56:06,808 DEBUG [com.server.hdmi.xmlgenerator.XMLGenerator] XMLGenerator TLS ID size 142392_REQ_2018-03-02T09-53-18-991+10-00:3561\n</code></pre>\n\n<p>Please help me to read such lines and print it. And also i want to assign the last part of this line. </p>\n\n<pre><code>142392_REQ_2018-03-02T09-53-18-991+10-00:3561\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1520383805, "post_id": 49142160, "comment_id": 85290390, "body": "vi <code>&amp;</code> expands to the whole matched string, including <code>drop table</code>. This is not what you want."}, {"owner": {"reputation": 693, "user_id": 564870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/119f774b39fce2072d94530a83ea1617?s=128&d=identicon&r=PG&f=1", "display_name": "slashlos", "link": "https://stackoverflow.com/users/564870/slashlos"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520386414, "post_id": 49142160, "comment_id": 85291041, "body": "Yes the perl code is verbose but cannot be changed, as is the calling language a custom shell.  The script wants to process files with these commands to basically replace them;  so the &quot;&amp;&quot; as in vi would work just fine for me - my example was just getting zealous to just consume the last token in the example."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1520386592, "post_id": 49142160, "comment_id": 85291082, "body": "I&#39;m not saying it&#39;s verbose; I&#39;m saying it&#39;s silly and contains duplicated code for no reason. And what does that have to do with the calling language?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520386868, "post_id": 49142160, "comment_id": 85291135, "body": "... speaking of verbosity, the code is curiously non-verbose: <code>s&#47;$regexp&#47;$newtxt&#47;g; print FOUT;</code> could have been written <code>$_ =~ s&#47;$regexp&#47;$newtxt&#47;g; print FOUT $_;</code> if you wanted to be completely explicit."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1520384147, "creation_date": 1520384147, "answer_id": 49142455, "question_id": 49142160, "link": "https://stackoverflow.com/questions/49142160/perl-equivalent-of-the-placeholder-in-the-vi-editor/49142455#49142455", "title": "Perl equivalent of the `&amp;` placeholder in the &quot;vi&quot; editor", "body": "<p>What you're asking for is (mostly) impossible. Perl does not treat any character in the replacement string specially.</p>\n\n<p>What you can do is capture (explicitly or implicitly) the matched text and use one of the special variables in the replacement part (<code>$1</code>, <code>$2</code>, <code>$&amp;</code>, etc), but that only works because the replacement part is <em>code</em>. In your case, <code>s/$regexp/$newtxt/g</code>, the only variable is <code>$newtxt</code>, and its content is not rescanned for further expansion.</p>\n\n<p>You might be able to trick the <code>s/$regexp/$newtxt/g</code> code by passing an object with overloaded stringification as <code>$newtxt</code>, but it would be much better (i.e. easier and more maintainable) to change the code. In fact, the existing code is already a bit silly:</p>\n\n<pre><code>if ($_ !~ /$regexp/)\n{\n    print FOUT;\n}\nelse\n{\n    s/$regexp/$newtxt/g;\n    print FOUT;\n}\n</code></pre>\n\n<p>can be simplified to just</p>\n\n<pre><code>s/$regexp/$newtxt/g;\nprint FOUT;\n</code></pre>\n\n<p>To allow dynamic replacement, the natural interface is to use a function, not a string:</p>\n\n<pre><code>s/$regexp/ $newtxt-&gt;() /eg;\n</code></pre>\n\n<p>Here <code>/e</code> tells Perl that the replacement part is to be parsed as a block of code, not a quoted string. The call would look like</p>\n\n<pre><code>perl_swap( 'drop table (.*);' , sub { \"echo $1;\" } );\n</code></pre>\n\n<p><code>$1</code> being the contents of the first capture group <code>(</code> <code>)</code>.</p>\n\n<p>On the other hand, if the interface must use strings only, you need to do a bit more manual work or use a module that does it for you. For example:</p>\n\n<pre><code>use Data::Munge qw(replace);\n...\n$_ = replace($_, $regexp, $newtxt, 'g');\n</code></pre>\n\n<p>This allows calls of the form</p>\n\n<pre><code>perl_swap( 'drop table (.*);' , 'echo $1;' );\n</code></pre>\n\n<p>because <a href=\"https://metacpan.org/pod/Data::Munge#replace-STRING,-REGEX,-REPLACEMENT,-FLAG\" rel=\"nofollow noreferrer\"><code>Data::Munge::replace</code></a> explicitly scans for and expands <code>$</code> sequences such as <code>$1</code> in the replacement string.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520473243, "post_id": 49142783, "comment_id": 85333672, "body": "I thought you frowned upon &quot;it doesn&#39;t work&quot; as a problem description?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520473539, "post_id": 49142783, "comment_id": 85333741, "body": "I don&#39;t have a question beyond my comment. It is you who wrote about &quot;solutions that don&#39;t work&quot;."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520499986, "post_id": 49142783, "comment_id": 85343541, "body": "@Borodin Refer to <a href=\"https://metacpan.org/pod/String::Substitution#DESCRIPTION\" rel=\"nofollow noreferrer\">the documentation</a>. (I admit it could be clearer.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1520386763, "creation_date": 1520386763, "answer_id": 49142783, "question_id": 49142160, "link": "https://stackoverflow.com/questions/49142160/perl-equivalent-of-the-placeholder-in-the-vi-editor/49142783#49142783", "title": "Perl equivalent of the `&amp;` placeholder in the &quot;vi&quot; editor", "body": "<p>You are looking for <a href=\"http://search.cpan.org/perldoc?String::Substitution\" rel=\"nofollow noreferrer\">String::Substitution</a>'s <code>gsub_modify</code>.</p>\n\n<pre><code>use String::Substitution qw( gsub_modify );\n\nmy $pat = 'drop table (.*);';\nmy $repl = 'echo $1;';\nlocal $_ = 'drop table foo;';\ngsub_modify($_, $pat, $repl);\nsay;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520499803, "post_id": 49152742, "comment_id": 85343405, "body": "<code>autodie</code> is redundant here. This code is semantically wrong if <code>$s</code> already contains <code>&amp;</code> anywhere. Never use <code>$1</code> without making sure the previous regex match succeeded. You don&#39;t need to escape <code>&amp;</code> in a regex."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520502512, "post_id": 49152742, "comment_id": 85345196, "body": "<code>autodie</code> is no more redundant than <code>use strict;</code> and <code>use warning;</code> You should always include them in your code. And you should escape all non-alphanumeric characters because you don&#39;t know if they will be used as a meta-character in the future."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520502635, "post_id": 49152742, "comment_id": 85345283, "body": "I disagree on <code>autodie</code>, but OK. As for (currently non-special) non-alphanumeric characters: They won&#39;t be used as regex meta-characters because that would break all existing programs."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520505729, "post_id": 49152742, "comment_id": 85347228, "body": "@melpomene You are correct about <code>&amp;</code> but I was fooled by the <code>&#47;g</code> modifier. The pattern is anchored to the beginning of the string, so multiple <code>&amp;</code> are not a problem. That means the <code>&#47;g</code> modifier is superfluous. And misleading. I have corrected the code."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 0, "last_activity_date": 1520505924, "last_edit_date": 1520505924, "creation_date": 1520428079, "answer_id": 49152742, "question_id": 49142160, "link": "https://stackoverflow.com/questions/49142160/perl-equivalent-of-the-placeholder-in-the-vi-editor/49152742#49152742", "title": "Perl equivalent of the `&amp;` placeholder in the &quot;vi&quot; editor", "body": "<p>I think this will do what you want.</p>\n\n<pre><code>    #!/usr/bin/env perl\n\n    # always use these two\n    use strict;\n    use warnings;\n\n    # use autodie to automatically die on open errors\n    use autodie;\n\n    my $s = 'drop table FOO';\n    print \"$s\\n\";\n\n    if( $s =~ s/^drop table (.*)/exec rename_table('&amp;')/ ){\n        my $captured = $1;\n        $s =~ s/\\&amp;/$captured/;\n    }\n\n    print \"$s\\n\";\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 564870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/119f774b39fce2072d94530a83ea1617?s=128&d=identicon&r=PG&f=1", "display_name": "slashlos", "link": "https://stackoverflow.com/users/564870/slashlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 49142783, "answer_count": 3, "score": 1, "last_activity_date": 1520505924, "creation_date": 1520381966, "last_edit_date": 1520464604, "question_id": 49142160, "link": "https://stackoverflow.com/questions/49142160/perl-equivalent-of-the-placeholder-in-the-vi-editor", "title": "Perl equivalent of the `&amp;` placeholder in the &quot;vi&quot; editor", "body": "<p>Using the <strong>vi</strong> screen editor I would do this</p>\n\n<pre><code>%s/^drop table .*/exec rename_table('&amp;')/g\n</code></pre>\n\n<p>which allows me to reformat the found string. I need to do same in Perl.</p>\n\n<p>I have written a module to which I pass the pattern <code>$regexp</code> and replacement <code>$newtxt</code> strings.</p>\n\n<p>This module does</p>\n\n<pre><code>if ( $_ !~ /$regexp/ ) {\n    print FOUT;\n}\nelse {\n    s/$regexp/$newtxt/g;\n    print FOUT;\n}\n</code></pre>\n\n<p>and I tried</p>\n\n<pre><code>perl_swap( '(drop table .*);' , 'echo $3;' )\n</code></pre>\n\n<p>hoping the found table name\u2014the third argument\u2014would get mapped to <code>$3</code>. </p>\n"}, {"tags": ["perl", "hash", "key", "assign"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1520378569, "post_id": 49141600, "comment_id": 85288746, "body": "Your example doesn&#39;t even compile. <code>%res</code> is undeclared."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1520379261, "post_id": 49141600, "comment_id": 85288992, "body": "Yeah, that <code># multi step before following code</code> part is where the actual problem is. You should create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> first."}], "answers": [{"comments": [{"owner": {"reputation": 2375, "user_id": 1586201, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/1d988ac481cd735f944f4670152e5c09?s=128&d=identicon&r=PG", "display_name": "Tony Xu", "link": "https://stackoverflow.com/users/1586201/tony-xu"}, "edited": false, "score": 0, "creation_date": 1520535459, "post_id": 49141709, "comment_id": 85366572, "body": "You&#39;re right. I dumped at each step and found what you said. Thanks."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 7, "last_activity_date": 1520378870, "creation_date": 1520378870, "answer_id": 49141709, "question_id": 49141600, "link": "https://stackoverflow.com/questions/49141600/why-perl-hash-does-not-take-certain-string-variables-as-its-key/49141709#49141709", "title": "Why perl hash does not take certain string variables as its key?", "body": "<p>Because at some point you did the equivalent of </p>\n\n<pre><code>$res{'NZ_AEMG01000001t1'} = %some_other_hash;\n</code></pre>\n\n<p>which sets <code>$res{'NZ_AEMG01000001t1'}</code> to a string, not a reference to a (nested) hash.</p>\n\n<p>The error indicates you're trying to use a string as if it were a hashref. Your data structure doesn't contain what you think it does.</p>\n"}], "owner": {"reputation": 2375, "user_id": 1586201, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/1d988ac481cd735f944f4670152e5c09?s=128&d=identicon&r=PG", "display_name": "Tony Xu", "link": "https://stackoverflow.com/users/1586201/tony-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 49141709, "answer_count": 1, "score": 0, "last_activity_date": 1520378870, "creation_date": 1520378235, "last_edit_date": 1520378852, "question_id": 49141600, "link": "https://stackoverflow.com/questions/49141600/why-perl-hash-does-not-take-certain-string-variables-as-its-key", "title": "Why perl hash does not take certain string variables as its key?", "body": "<p>When I try to assign a value to multiple level hash</p>\n\n<pre><code>        use strict;\n        # multi step before following code\n\n        $res{cccc}{1}{sense} = '+'; # no problem\n        my $ttsid = 'NZAEMG01000001';\n        $res{$ttsid}{1}{sense} = '+'; # no problem\n        $ttsid = 'NZAEMG01000001.1';\n        $res{$ttsid}{1}{sense} = '+'; # no problem\n        print \"before sid is $sid\\n\"; # print out NZ_AEMG01000001t1\n</code></pre>\n\n<p>At this step, program runs well</p>\n\n<pre><code>        $res{$sid}{1}{sense} = '+'; # even this gets problem too\n</code></pre>\n\n<p>However, when I add this line into program, I got error</p>\n\n<pre><code> Can't use string (\"57/128\") as a HASH ref while \"strict refs\" in use\n</code></pre>\n\n<p>Test a bit more with following</p>\n\n<pre><code>        $sid = 'placement'; # result\n        $res{$sid}{1}{sense} = '+';\n</code></pre>\n\n<p>This has no problem. So it looks to me, the line</p>\n\n<pre><code>        $sid = 'placement'; # result\n</code></pre>\n\n<p>changed $sid value from NZ_AEMG01000001t1 to placement, and this makes the line</p>\n\n<pre><code>        $res{$sid}{1}{sense} = '+';\n</code></pre>\n\n<p>works. This kind of translates into</p>\n\n<pre><code>        $res{'NZ_AEMG01000001t1'}{1}{sense} = '+'; # Not working\n        $res{'placement'}{1}{sense} = '+'; # working\n</code></pre>\n\n<p>Indeed, when I change $ttsid to $sid value like this</p>\n\n<pre><code>        $ttsid = 'NZ_AEMG01000001t1'; # which is $sid value\n        $res{$ttsid}{1}{sense} = '+'; # has problem\n</code></pre>\n\n<p>This gets problem too.</p>\n\n<p>Why?</p>\n"}, {"tags": ["perl", "batch-file", "bioinformatics"], "comments": [{"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 2, "creation_date": 1520362458, "post_id": 49137805, "comment_id": 85281126, "body": "You should put <code>&#47;B &#47;WAIT</code> right after <code>start &quot;&quot;</code>.  Check <code>start &#47;?</code>.  And you don&#39;t need <code>&amp;</code> before infile.fast if it is just an argument for FastTree.exe. And I would not recommend leaving the title <code>&quot;&quot;</code> empty. You may get glitches depending on OS version."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 0, "last_activity_date": 1520452291, "creation_date": 1520452291, "answer_id": 49160133, "question_id": 49137805, "link": "https://stackoverflow.com/questions/49137805/batch-file-for-bioinformatic-analysis/49160133#49160133", "title": "Batch file for bioinformatic analysis", "body": "<p>In your example, instead of <code>./mugsy seq_1.fsa seq_2.fsa seq_N.fsa</code>, you could do <code>perl mugsy seq_1.fsa seq_2.fsa seq_N.fsa</code>. So if I try the following (incorporating the suggestions from @wolfrevokcats), it works for me on Win 7:</p>\n\n<pre><code>START \"program1\" /B /WAIT perl program1.pl arg1 arg2 arg3\n</code></pre>\n\n<p>As for general design, having a PHP script run a Windows batch file which in turn spawns off other processes using <code>START</code> doesn't seem like the best solution to me, e.g. I'm not sure if your system is supposed to later support multiple users? However, not being a PHP expert, and without knowing more about the system you're building, I can't tell you what the better way to spawn processes from PHP is, just that you might want to look into that \u263a</p>\n"}], "owner": {"reputation": 1, "user_id": 5996949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2180c55ad2bed75657331d3c60e7be6?s=128&d=identicon&r=PG&f=1", "display_name": "E. Hedman", "link": "https://stackoverflow.com/users/5996949/e-hedman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1520452291, "creation_date": 1520361467, "last_edit_date": 1520363391, "question_id": 49137805, "link": "https://stackoverflow.com/questions/49137805/batch-file-for-bioinformatic-analysis", "title": "Batch file for bioinformatic analysis", "body": "<p><b>Background:</b></p>\n\n<p>I'm part of a group project at the university where the task is to build a server based web application integrated with a database. We're using <code>Apache</code>, <code>PHP</code> and <code>MySQL</code> and it's going great. However, we're at the part where the user is to press a button <code>Do Analysis</code> and a batch file <em>(.bat)</em> is supposed to be <code>activated</code>, go through some programs and then give a result.</p>\n\n<p>Here's the idea of the batch file, but it doesn't work:</p>\n\n<pre><code>@ECHO OFF\nCD \"C:\\Path\\To\\Directory\\With\\All\\Programs\"\nSTART \"\" program1.pl [specific in parameters for program1] [infile for program1] /B /WAIT\nSTART \"\" program2.exe [specific in parameters for program2] [infile for program2] /B /WAIT\nSTART \"\" program3 [specific in parameters for program3] [infile for program3] /B /WAIT\n@EXIT\n</code></pre>\n\n<p><b>Problem:</b></p>\n\n<p>Some programs are in reality packages of <code>perl</code> scripts or <code>.exe</code> files and require both in parameters and infiles. </p>\n\n<p>On Linux a typical command in the terminal for Program1 would be <code>./mugsy seq_1.fsa seq_2.fsa seq_N.fsa</code>, where mugsy is a big <code>perl</code> script and the files <code>.fsa</code> are the infiles for mugsy. </p>\n\n<p>Program2 would be: <code>./FastTree -gtr -nt alignment_file &gt; tree_file</code>, where <code>-gtr</code> and <code>-nt</code> are necessary in parameters for the program <code>FastTree</code>, <code>alignment_file</code> is the infile used by <code>FastTree</code>, and <code>tree_file</code> is the name of the output file.</p>\n\n<p>Program3 would be something like: <code>figtree &lt; infile.tre &gt; outfile.jpg</code>, where <code>figtree</code> is the program using the infile and outputs a <code>jpg</code>.</p>\n\n<p><b>Question:</b></p>\n\n<p>How can I write a batch file for the above situation? Is it possible?</p>\n\n<p><code>START /?</code> gives examples of different parameter settings for <code>start</code>, but not how to put parameters for the actual program starting. </p>\n\n<p>When executing <code>START \"\" FastTree.exe &amp; infile.fasta /B /WAIT</code> they are opening separately and I can't find any way of opening <code>infile.fasta</code> with <code>FastTree.exe</code>.</p>\n"}, {"tags": ["algorithm", "perl", "knapsack-problem"], "comments": [{"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "edited": false, "score": 2, "creation_date": 1520356084, "post_id": 49136294, "comment_id": 85277588, "body": "This question is confusing.  Perhaps I am missing background information.  What output do you want?"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "edited": false, "score": 0, "creation_date": 1520356836, "post_id": 49136294, "comment_id": 85278007, "body": "Sorry for the confusion, I am trying to not exclude the weights that are bigger than the bucket size.   If a weight is bigger than the bucketsize that weight is excluded. I am trying not to exclude that weight, but fill a bucket with that weight only."}, {"owner": {"reputation": 61508, "user_id": 78259, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/844c572938eaad1e44eb084fb39416f9?s=128&d=identicon&r=PG", "display_name": "Chas. Owens", "link": "https://stackoverflow.com/users/78259/chas-owens"}, "edited": false, "score": 1, "creation_date": 1520357604, "post_id": 49136294, "comment_id": 85278456, "body": "That doesn&#39;t help.  I still have no idea what output you want. What are you trying to solve?  This very much feels like an XY problem: <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">xyproblem.info</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520358422, "post_id": 49136294, "comment_id": 85278962, "body": "Tip: Avoid using <code>$b</code> to avoid conflicts with <code>sort</code> and similar subs."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1520357218, "creation_date": 1520357218, "answer_id": 49136696, "question_id": 49136294, "link": "https://stackoverflow.com/questions/49136294/knapsack-weight-max-size/49136696#49136696", "title": "knapsack weight &gt; max size", "body": "<p>I don't see where you're stuck.  You merely add a pre-processing step to the existing algorithm.  You make a single pass over the weights.  When you find one <code>&gt;= bucketsize</code>, simply fill one bucket with that weight.  Then remove that weight and the bucket from the problem set and continue as usual.</p>\n\n<p>In your example above, you would start with</p>\n\n<pre><code>bucket[0] = 88\nweights = [15, 23, 10, 8]\n</code></pre>\n\n<p>Continue with your usual solution, appending the 88-kg bucket after you return.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1520451873, "post_id": 49136971, "comment_id": 85325413, "body": "(The second solution is the same as Prune&#39;s.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1520451227, "last_edit_date": 1520451227, "creation_date": 1520358301, "answer_id": 49136971, "question_id": 49136294, "link": "https://stackoverflow.com/questions/49136294/knapsack-weight-max-size/49136971#49136971", "title": "knapsack weight &gt; max size", "body": "<p>Just pass the bucket size instead of the actual size for any items over the bucket size.</p>\n\n<pre><code>use Algorithm::Bucketizer qw( );\nuse List::Util            qw( min );\n\nmy @items = ...;\nmy $bucket_size = 30;\n\nmy $bzer = Algorithm::Bucketizer-&gt;new( bucketsize =&gt; $bucket_size );\nfor my $i (0..$#items) {\n    $bzer-&gt;add_item( $i =&gt; min($items[$i], $bucket_size) );\n}\n\nmy @bucketed_items = map { [ $bucket-&gt;items() ] } $bzer-&gt;buckets();\n</code></pre>\n\n<p>Alternatively, since you know oversized values will take up an entire bucket, filter them out and add them back to the results.</p>\n\n<pre><code>use Algorithm::Bucketizer qw( );\n\nmy @items = ...;\nmy $bucket_size = 30;\n\nmy $bzer = Algorithm::Bucketizer-&gt;new( bucketsize =&gt; $bucket_size );\nmy @bucketed_items;\nfor my $i (0..$#items) {\n    if ($items[$i] &gt;= $bucket_size) {\n        push @bucketed_items, [ $i ];\n    } else {\n        $bzer-&gt;add_item( $i =&gt; $items[$i] );\n    }\n}\n\npush @bucketed_items, map { [ $bucket-&gt;items() ] } $bzer-&gt;buckets();\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 49136971, "answer_count": 2, "score": 1, "last_activity_date": 1520451227, "creation_date": 1520355842, "question_id": 49136294, "link": "https://stackoverflow.com/questions/49136294/knapsack-weight-max-size", "title": "knapsack weight &gt; max size", "body": "<p>I am currently having a query that results like this</p>\n\n<p><strong>A,B,C,D, E</strong> = item</p>\n\n<p><em>numbers</em> = weight</p>\n\n<ol>\n<li><strong>A</strong> <em>15</em></li>\n<li><strong>B</strong> <em>23</em></li>\n<li><strong>C</strong> <em>10</em></li>\n<li><strong>D</strong> <em>8</em></li>\n<li><p><strong>E</strong> <em>88</em></p>\n\n<pre><code>use Algorithm::Bucketizer;\n\nmy $b = Algorithm::Bucketizer-&gt;new( bucketsize =&gt; 30);\nfor my $i (1..10) {\n    $b-&gt;add_item($i, 30+$i);\n}\n\nfor my $bucket ($b-&gt;buckets()) {\n    for my $item ($bucket-&gt;items()) {\n        print \"Bucket \", $bucket-&gt;serial(), \": Item $item\\n\";\n    }\n    print \"\\n\";\n}\n</code></pre></li>\n</ol>\n\n<p><a href=\"http://search.cpan.org/~mschilli/Algorithm-Bucketizer-0.13/Bucketizer.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~mschilli/Algorithm-Bucketizer-0.13/Bucketizer.pm</a></p>\n\n<p>Using this module I am applying the knapsack algorithm to try to distribute the weights of the items to buckets</p>\n\n<pre><code>my $bucketizer = Algorithm::Bucketizer-&gt;new(bucketsize =&gt; $size);\n</code></pre>\n\n<p>The problem is that when the weight is bigger that the size I am searching for that weight gets excluded.</p>\n\n<p>Example:</p>\n\n<p>bucketsize => 30</p>\n\n<ol start=\"5\">\n<li><strong>E</strong> <em>88</em> this will get excluded</li>\n</ol>\n\n<p>Is there another algorithm that could possibly fix this situation? Or is there a way to modify this one to not exclude the weight that is bigger than the size?</p>\n\n<p>Is is it possible to adjust it to work like this?</p>\n\n<p>If weight > size then fill only a bucket with that weight</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1520350351, "post_id": 49134455, "comment_id": 85273537, "body": "Don&#39;t use <code>-w</code>; use <code>use warnings;</code> instead. Don&#39;t predeclare variables; declare them on first use. Don&#39;t use 2-arg open, use 3-arg open. Don&#39;t use bareword filehandles, just use normal variables."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520350402, "post_id": 49134455, "comment_id": 85273572, "body": "Check for <code>open</code> failure. Include <code>$!</code> in the error message for <code>open</code> and <code>opendir</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520350459, "post_id": 49134455, "comment_id": 85273626, "body": "Why are you slurping in all of <code>paths.txt</code> (with that <code>foreach</code> / <code>readline</code> loop) but reading directory entries one at a time (<code>while</code> / <code>readdir</code>)?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520350504, "post_id": 49134455, "comment_id": 85273668, "body": "<code>... or die &quot;$0: Cannot open $path: $!\\n&quot;;</code> would have probably told you what the problem is."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 1, "creation_date": 1520350748, "post_id": 49134455, "comment_id": 85273836, "body": "Remember that your file of paths has a end of line char at the end of each path. you need to use chomp to remove that other wise you wil be essentially trying to open a dir called &quot;/some/dir/\\n&quot;"}], "owner": {"reputation": 21, "user_id": 8230054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26f2a4b22878480d112141065c901476?s=128&d=identicon&r=PG&f=1", "display_name": "imsr", "link": "https://stackoverflow.com/users/8230054/imsr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1520355072, "answer_count": 0, "score": 0, "last_activity_date": 1520354821, "creation_date": 1520350176, "last_edit_date": 1520354821, "question_id": 49134455, "link": "https://stackoverflow.com/questions/49134455/reading-all-directories-from-a-text-file", "closed_reason": "Duplicate", "title": "Reading all directories from a text file", "body": "<p>I have a text file called <code>paths.txt</code> that contains file system paths like below</p>\n\n<pre><code>/prod/bcs/lgnp/clientapp/empstmt/parm/\n/prod/bcs/hdpp/clientapp/trprpsp/parm/\n/prod/bcs/hdpp/clientapp/trpnonq/parm/\n/prod/bcs/lgnp/clientapp/kmpndwl/parm/\n</code></pre>\n\n<p>I am trying to read all the data present in those directories using Perl.</p>\n\n<p>I tried like this, but it's unable to open the directories.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\nmy ($path, $file, @files);\n\nopen(IN, \"paths.txt\");\n\nforeach $path ( &lt;IN&gt; ) {\n\n    opendir(DIR, $path) or die \"Cannot open $path\\n\";\n\n    while ( $file = readdir(DIR) ) {\n        print \"$file\";\n    }\n\n    closedir(DIR);\n}\n\nclose(IN);\n</code></pre>\n"}, {"tags": ["perl", "http", "gzip"], "comments": [{"owner": {"reputation": 97, "user_id": 1623839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4449ebdfcdfcb1520797bdcafdc4ee6a?s=128&d=identicon&r=PG", "display_name": "Thaodan", "link": "https://stackoverflow.com/users/1623839/thaodan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520346434, "post_id": 49131007, "comment_id": 85270874, "body": "Thats someone I know only didn&#39;t knowed how to send a document with the contens of a variable."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520349631, "post_id": 49134023, "comment_id": 85273094, "body": "Re &quot;<i>Also, 3 space indentation is weird</i>&quot;, :p"}, {"owner": {"reputation": 97, "user_id": 1623839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4449ebdfcdfcb1520797bdcafdc4ee6a?s=128&d=identicon&r=PG", "display_name": "Thaodan", "link": "https://stackoverflow.com/users/1623839/thaodan"}, "edited": false, "score": 0, "creation_date": 1520354135, "post_id": 49134023, "comment_id": 85276244, "body": "Thanks for the detailed explenation.  The last one is the solution I used. The 3 spaces indentation is set from emacs and In just kept using it."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1520348955, "creation_date": 1520348955, "answer_id": 49134023, "question_id": 49131007, "link": "https://stackoverflow.com/questions/49131007/can-i-send-a-binary-variable-using-httprequestcommonpost/49134023#49134023", "title": "Can I send a binary variable using HTTP::Request::Common::post?", "body": "<p>Side note: Predeclaring variables, as in</p>\n\n<pre><code>   my ($wdb_dir,\n       $wdb_dir_dh,\n       @wdb_dir_files,\n       $file,\n       $vol,\n       $dir,\n       $ffile,\n       %gzipped_wdb);\n</code></pre>\n\n<p>is considered bad style. A variable should be declared in the smallest scope possible, which usually means it should be declared when first used.</p>\n\n<p>(Also, 3 space indentation is weird.)</p>\n\n<hr>\n\n<p>According to <a href=\"https://curl.haxx.se/docs/manpage.html#-F\" rel=\"nofollow noreferrer\">the <code>curl</code> manual</a>, <code>-F</code> specifies fields for a web form submission (specifically, in <code>multipart/form-data</code> format). A value prefixed with <code>@</code> makes curl upload a file (attached to the POST request).</p>\n\n<p>The <a href=\"https://metacpan.org/pod/LWP::UserAgent#post\" rel=\"nofollow noreferrer\"><code>LWP::UserAgent</code> documentation</a> says the <code>post</code> method calls <code>HTTP::Request::Common::POST</code> underneath.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/HTTP::Request::Common#POST-$url\" rel=\"nofollow noreferrer\"><code>HTTP::Request::Common</code> documentation for <code>POST</code></a> says you can create a <code>multipart/form-data</code> request by specifying the content type as <code>'form-data'</code>. It also says you can do a file upload by specifying an array reference as the form field value, and you can create a \"virtual file\" by setting the <code>Content</code> pseudo-header (which bypasses reading an actual file from disk).</p>\n\n<p>Putting it all together:</p>\n\n<pre><code>sub post\n{\n    my ($files) = @_;\n\n    my $ua = LWP::UserAgent-&gt;new;\n\n    my $response = $ua-&gt;post(\n        \"YOUR URL HERE\",\n        Content_Type =&gt; 'form-data',\n        Content =&gt; [\n            do {\n                my $i = 0;\n                map +(\n                    'file' . $i++ =&gt; [ undef, $_, Content =&gt; $files-&gt;{$_} ] \n                ),\n                sort keys %$files\n            }\n        ],\n    );\n\n    ...\n}\n</code></pre>\n\n<p>We iterate over the keys of <code>%$files</code>, which I assume are the short names of the compressed files. (We also do it in alphabetical order to make it deterministic, which is often nice for debugging.)</p>\n\n<p>We also maintain a counter (<code>$i</code>), which we use for generating the form field names.</p>\n\n<p>For each filename (stored in <code>$_</code> by <code>map</code>), we produce a key-value pair. The key is the form field name (consisting of <code>field</code> and the current counter value), the value is an array reference (this is our file upload spec).</p>\n\n<p>The array reference contains a file of <code>undef</code> (because we don't want to read a real file from disk), an upload filename of <code>$_</code> (this is what we want the web server to see the filename as; maybe you want to pass <code>\"$_.gz\"</code> here?), and the most important part, the actual content stored under <code>$files-&gt;{$_}</code>.</p>\n\n<p>All of this happens right in the call to <code>post</code> thanks to the <code>do</code> block, which is admittedly cheeky. You could equally well create the data structure beforehand:</p>\n\n<pre><code>my @fields;\nfor my $name (sort keys %$files) {\n    push @fields, 'file' . @fields =&gt; [ undef, $name, Content =&gt; $files-&gt;{$name} ];\n    # we don't need a counter here because we can just ask @fields how big it is\n}\n</code></pre>\n\n<p>and then pass <code>Content =&gt; \\@fields</code> in the <code>post</code> call.</p>\n"}], "owner": {"reputation": 97, "user_id": 1623839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4449ebdfcdfcb1520797bdcafdc4ee6a?s=128&d=identicon&r=PG", "display_name": "Thaodan", "link": "https://stackoverflow.com/users/1623839/thaodan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 49134023, "answer_count": 1, "score": 0, "last_activity_date": 1520348955, "creation_date": 1520339741, "last_edit_date": 1520346615, "question_id": 49131007, "link": "https://stackoverflow.com/questions/49131007/can-i-send-a-binary-variable-using-httprequestcommonpost", "title": "Can I send a binary variable using HTTP::Request::Common::post?", "body": "<p>I want to send data that I have compressed with gzip before with an post\nrequest without saving it to a file.\nIn the documentation of HTTP::Request::Common I see nowhere explained how to just post the compressed data that I have made before.</p>\n\n<pre><code>I want to emulate this call,\ncurl -F \"file0=@+Wowhead_Looter.lua.gz\" -F \"file1=@creaturecache.wdb.gz\" -F \"file2=@gameobjectcache.wdb.gz\" \\\n     -F \"file3=@itemcache.wdb.gz\" -F \"file4=@pagetextcache.wdb.gz\" \\\n     -F \"file5=@questcache.wdb.gz\" \"URL\"\n</code></pre>\n\n<p>I dont know if this is exact one call or multiple calls.</p>\n\n<p>Can somebody help me on this?</p>\n\n<p>I have this function that reads all files and returns the object with all compressed files:</p>\n\n<pre><code>sub compress_wdb\n{\n   my ($wdb_dir,\n       $wdb_dir_dh,\n       @wdb_dir_files,\n       $file,\n       $vol,\n       $dir,\n       $ffile,\n       %gzipped_wdb);\n\n   $wdb_dir = shift;\n   opendir $wdb_dir_dh, $wdb_dir,;\n   @wdb_dir_files = grep(/^.+\\..+$/, readdir $wdb_dir_dh);\n   closedir $wdb_dir_dh;\n\n\n   for $file (@wdb_dir_files)\n   {\n      gzip $wdb_dir.\"/\".$file =&gt; \\$gzipped_wdb{$file}\n          or die \"gzip failed: $GzipError\\n\";\n   }\n\n   return %gzipped_wdb;\n}\n</code></pre>\n\n<p>the function later gets called like this:</p>\n\n<pre><code>my %wdb = compress_wdb($wdb_dir);\n</code></pre>\n\n<p>Then there's the post function, where I have the issue:</p>\n\n<pre><code>sub post\n{\n   my ($auth_user, $auth_password, $data, $ua, $req);\n\n   $ua = LWP::UserAgent-&gt;new;\n\n   $req = $ua-&gt;post(\"URL\",\n  Content_Type =&gt; 'form-data',\n  Content =&gt; [\n   #  $addon =&gt; [ $obj ],\n  ],\n);\n}\n</code></pre>\n\n<p>Which is than called like this:</p>\n\n<pre><code>post(\\%wdb);\n</code></pre>\n"}, {"tags": ["regex", "perl", "spamassassin"], "comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1520339719, "post_id": 49130946, "comment_id": 85266447, "body": "Could you post <b>full</b> spamassassin configuration line?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1520339860, "post_id": 49130946, "comment_id": 85266546, "body": "More to the point, could you post a representative raw Subject: line and the <i>precise</i> rule you are attempting to match that with?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1520339965, "post_id": 49130946, "comment_id": 85266618, "body": "No, the raw message source, not what you see in your mail client."}, {"owner": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "edited": false, "score": 0, "creation_date": 1520341815, "post_id": 49130946, "comment_id": 85267875, "body": "I&#39;ve added the raw body part that I use for testing."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520341937, "post_id": 49130946, "comment_id": 85267953, "body": "Does spamassassin look inside attachments?"}, {"owner": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520342317, "post_id": 49130946, "comment_id": 85268203, "body": "@ChrisTurner this is just the encoded body part of the e-mail, no attachement."}], "answers": [{"comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 2, "creation_date": 1520370689, "post_id": 49132926, "comment_id": 85285301, "body": "&quot;SpamAssassin doesn&#39;t normalize the character set to Unicode&quot; - <b>normalize_charset</b> configuration option is not supposed to provide it?"}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": true, "score": 2, "last_activity_date": 1520402015, "last_edit_date": 1520402015, "creation_date": 1520345742, "answer_id": 49132926, "question_id": 49130946, "link": "https://stackoverflow.com/questions/49130946/spamassassin-matching-han-chinese-characters/49132926#49132926", "title": "Spamassassin matching Han/chinese characters", "body": "<p>Unless you separately set <code>normalize_charset 1</code> in your local configuration (default is 0), SpamAssassin doesn't normalize the character set to Unicode; then, there is virtually zero chance that these regular expressions will match.</p>\n\n<p>In the absence of this setting, to match a Chinese character in UTF-8, your regex needs to match the UTF-8 sequence of the character, not the decoded Unicode representation.</p>\n\n<pre><code>body  SPAM44_UTF8 /[\\xe4-\\xe9][\\x80-\\xbf][\\x80-\\xbf]/\nscore SPAM44_UTF8 2\n</code></pre>\n\n<p>(Not entirely sure about the regex, but you get the idea.)</p>\n\n<p>This obviously only works for bodies in UTF-8, so you would need to author a similar rule for any other character set you want to handle (GB2312 perhaps?) and it might produce false positives for message bodies which aren't actually UTF-8 (though the risk for that would seem rather marginal).</p>\n\n<p>This rule matches a <em>single</em> Chinese character anywhere. Maybe you'll want to extend it to look for a sequence of, say, four or more to reduce the risk of false positives.</p>\n\n<p>Perhaps <code>normalize_charset 1</code> will become the default one day, but with the current state of email, I don't think that will be feasible any time soon. There are simply too many cases where the character set information is missing or incorrect, and heuristics to fix it automatically are brittle and error-prone.</p>\n"}], "owner": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 49132926, "answer_count": 1, "score": 1, "last_activity_date": 1520402015, "creation_date": 1520339551, "last_edit_date": 1520342536, "question_id": 49130946, "link": "https://stackoverflow.com/questions/49130946/spamassassin-matching-han-chinese-characters", "title": "Spamassassin matching Han/chinese characters", "body": "<p>I'm trying to implement a rule that matches all chinese characters (Han) with</p>\n\n<p>SpamAssassin version 3.3.1\n  running on Perl version 5.10.1</p>\n\n<p>So far I tried the following rules:</p>\n\n<pre><code>body SPAM44 /\\p{Han}/\nbody SPAM44 /[\\x{4e00}-\\x{9FFF}]/\nbody SPAM44 /[\u4e00-\u4fff\u5000-\u5fff\u6000-\u6fff\u7000-\u7fff\u8000-\u8fff\u9000-\u9fa5]+/\n</code></pre>\n\n<p>The first 2 rules just don't match anything. The Last rule matches nearly all my mail.\nAll these rules work fine on regex101.com. So this is probably a spamassassin specific issue.</p>\n\n<p>Example Body that should be matched:</p>\n\n<pre><code>--_000_7f25887479e34b8585663e5702f9ae87companyde_\nContent-Type: text/plain; charset=\"utf-8\"\nContent-Transfer-Encoding: base64\n\n6L2m6Lqr5Yi26YCg5bel6Im65Y+K6KOF5aSH44CB5rG96L2m5pW06L2m6K6+6K6h5byA5Y+R5LiO\n6K+V5Yi244CB5rG96L2m5bel56iL5LiO5pyN5Yqh44CB5pm66IO95Lqn57q/54mp5rWB5oqA5pyv\n44CB5raC6KOF55Sf5Lqn57q/5Y+K6KOF5aSH44CB5bel5Lia5py65Zmo5Lq65oiQ5aWX5oqA5pyv\n5Y+K6KOF5aSH44CB5bqV55uY5Yi26YCg5bel6Im65Y+K6KOF5aSHDQoNCg0KDQoN\n</code></pre>\n\n<p>I cannot post the decoded string, because stackoverflow says it's spam.</p>\n\n<p>So how do I match chinese characters with spamassassin?</p>\n"}, {"tags": ["perl", "cgi", "url-redirection"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520334471, "post_id": 49129146, "comment_id": 85263032, "body": "You&#39;ve got your output and form handling code mixed up together"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520334565, "post_id": 49129146, "comment_id": 85263085, "body": "plus the HTML you are outputting isn&#39;t complete too"}, {"owner": {"reputation": 91, "user_id": 6034768, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/971957272840537/picture?type=large", "display_name": "JMAD2016", "link": "https://stackoverflow.com/users/6034768/jmad2016"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520334772, "post_id": 49129146, "comment_id": 85263215, "body": "@ChrisTurner I just want to assign different actions to multiple submit buttons.."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6034768, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/971957272840537/picture?type=large", "display_name": "JMAD2016", "link": "https://stackoverflow.com/users/6034768/jmad2016"}, "edited": false, "score": 0, "creation_date": 1520336366, "post_id": 49129508, "comment_id": 85264268, "body": "Thanks a lot! Got it working. I think its a bit confusing needing to check both buttons <code>$q-&gt;param(&#39;button&#39;) &amp;&amp; $q-&gt;param(&#39;button&#39;)</code> in the if-statement. But as long as its working."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 91, "user_id": 6034768, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/971957272840537/picture?type=large", "display_name": "JMAD2016", "link": "https://stackoverflow.com/users/6034768/jmad2016"}, "edited": false, "score": 0, "creation_date": 1520336932, "post_id": 49129508, "comment_id": 85264652, "body": "You can shorten that code a bit with e.g. <code>my $btn = $q-&gt;param(&#39;button&#39;) || &#39;&#39;; if ( $btn eq &quot;disable&quot; ) { ... } elsif ( $btn eq &quot;enable&quot; ) { ...</code> (the same issue with false-but-defined values applies; see also the <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">defined-or <code>&#47;&#47;</code></a>)"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 3, "last_activity_date": 1520334918, "creation_date": 1520334918, "answer_id": 49129508, "question_id": 49129146, "link": "https://stackoverflow.com/questions/49129146/perl-cgi-redirect-from-multiple-submit-buttons/49129508#49129508", "title": "Perl: CGI redirect from multiple submit buttons", "body": "<p>See <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#Generating-a-redirection-header\" rel=\"nofollow noreferrer\">\"Generating a redirection header\"</a> in the CGI docs: \"If you use redirection like this, you should <strong>not</strong> print out a header as well.\"</p>\n\n<p>The messages you're seeing in the log are referring to the <code>$q-&gt;param('button') eq \"disable\"</code> checks: <code>$q-&gt;param('button')</code> is returning <code>undef</code> because the field has not been submitted yet, so you're comparing <code>\"disable\"</code> to the undefined value. These are warning messages only, that you can avoid by first checking if <code>$q-&gt;param('button')</code> has a true value before doing the <code>eq</code> comparison. (Note: In other cases, one might want to use <a href=\"http://perldoc.perl.org/functions/defined.html\" rel=\"nofollow noreferrer\"><code>defined</code></a> to check for <code>undef</code>, because there are some values in Perl that are defined but still false, see <a href=\"http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood\" rel=\"nofollow noreferrer\">Truth and Falsehood </a> - but in this case, both <code>\"disable\"</code> and <code>\"enable\"</code> are true values.)</p>\n\n<p>Also, your submit buttons need to be in a <code>&lt;form&gt;</code>. And note you've got a typo with <code>elsf</code>. This works for me:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse CGI;\n\nmy $q = CGI-&gt;new();\nif ( $q-&gt;param('button') &amp;&amp; $q-&gt;param('button') eq \"disable\" ) {\n    print $q-&gt;redirect(-uri=&gt;\"...\");\n} elsif ( $q-&gt;param('button') &amp;&amp; $q-&gt;param('button') eq \"enable\" ) {\n    print $q-&gt;redirect(-uri=&gt;\"...\");\n} else {\n    print $q-&gt;header();\n    print $q-&gt;start_html;\n    print $q-&gt;start_form;\n    print $q-&gt;submit(-name=&gt;'button', -value=&gt;'disable');\n    print $q-&gt;submit(-name=&gt;'button', -value=&gt;'enable');\n    print $q-&gt;end_form;\n    print $q-&gt;end_html;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 6034768, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/971957272840537/picture?type=large", "display_name": "JMAD2016", "link": "https://stackoverflow.com/users/6034768/jmad2016"}, "edited": false, "score": 0, "creation_date": 1520423729, "post_id": 49130734, "comment_id": 85306773, "body": "thats awesome! Couldn&#39;t understand my colleagues when they said build a cgi programm. Its deprecated and inefficient. Thanks I will look up your cgi alternatives.!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1520338885, "creation_date": 1520338885, "answer_id": 49130734, "question_id": 49129146, "link": "https://stackoverflow.com/questions/49129146/perl-cgi-redirect-from-multiple-submit-buttons/49130734#49130734", "title": "Perl: CGI redirect from multiple submit buttons", "body": "<p>If you are just starting to write web applications in Perl, I would urge you to read <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> and decide whether you really want to use such old technology when newer and better (and still Perl-based) alternatives are available.</p>\n\n<p>However, if you decide to stick with CGI (and CGI.pm) then there are a couple of things that can make your life easier.</p>\n\n<p><strong>It's a rare CGI program that needs two CGI objects</strong></p>\n\n<p>For most CGI programs, using an object-oriented approach is overkill. You rarely need objects. CGI.pm has a, simpler, function-based approach that you can use instead. Simply, import the functions that you want to use as you load the module:</p>\n\n<pre><code>use CGI qw[param header redirect];\n</code></pre>\n\n<p>Then use them without creating an object first:</p>\n\n<pre><code>if (param) {\n  print redirect(...);\n} else {\n  print header(...);\n}\n</code></pre>\n\n<p><strong>The CGI-Generation functions are a terrible idea</strong></p>\n\n<p>It's even <a href=\"https://metacpan.org/pod/CGI#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">in the documentation</a>.</p>\n\n<blockquote>\n  <p><strong>HTML Generation functions should no longer be used</strong></p>\n  \n  <p>All HTML generation\n  functions within CGI.pm are no longer being maintained. Any issues,\n  bugs, or patches will be rejected unless they relate to fundamentally\n  broken page rendering.</p>\n  \n  <p>The rationale for this is that the HTML generation functions of CGI.pm\n  are an obfuscation at best and a maintenance nightmare at worst. You\n  should be using a template engine for better separation of concerns.\n  See <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> for an example of using CGI.pm with the\n  <a href=\"https://metacpan.org/pod/Template::Toolkit\" rel=\"nofollow noreferrer\">Template::Toolkit</a> module.</p>\n  \n  <p>These functions, and perldoc for them, are considered deprecated, they\n  are no longer being maintained and no fixes or features for them will\n  be accepted. They will, however, continue to exist in CGI.pm without\n  any deprecation warnings (\"soft\" deprecation) so you can continue to\n  use them if you really want to. All documentation for these functions\n  has been moved to <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI/HTML/Functions.pod\" rel=\"nofollow noreferrer\">CGI::HTML::Functions</a>.</p>\n</blockquote>\n\n<p>Putting your HTML into an external template is a much better idea. And it will be easier for your front-end developer to edit. Yes, I realise you probably don't have a front-end developer on your project right now - but don't you want to plan ahead?</p>\n\n<p>Having said that, your program becomes something like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse CGI qw[param header redirect];\n\nmy $disable_url = '...';\nmy $enable_url  = '...';\n\nif (param('button') {\n  if (param('button') eq 'disable') {\n    print redirect($disable_url);\n  } elsif (param('button') eq 'enable') {\n    print redirect($enable_url);\n  }\n  exit;\n} \n\nprint header;\nprint $some_output_that_is_generated_from_a_template.\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6034768, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/971957272840537/picture?type=large", "display_name": "JMAD2016", "link": "https://stackoverflow.com/users/6034768/jmad2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 49129508, "answer_count": 2, "score": 1, "last_activity_date": 1520338885, "creation_date": 1520333810, "question_id": 49129146, "link": "https://stackoverflow.com/questions/49129146/perl-cgi-redirect-from-multiple-submit-buttons", "title": "Perl: CGI redirect from multiple submit buttons", "body": "<p>I have a small CGI Script with 2 submit buttons. I want that the current Script redirects the User to another script, depending on which submit button is pressed.</p>\n\n<p>The CGi-Script:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n# Modules\nuse strict;\nuse warnings;\nuse CGI;\n\nmy $q                           = CGI-&gt;new();\nprint $q-&gt;header();\nprint $q-&gt;submit(-name=&gt;'button',-value =&gt; 'disable');\nprint $q-&gt;submit(-name=&gt;'button',-value =&gt; 'enable');\n\nif ($q-&gt;param('button') eq \"disable\"){\n         print $q-&gt;redirect(-uri=&gt;\"http://1.1.1.1./cgi-bin/services/switch_XXX.cgi?disable\");\n} elsf ($q-&gt;param('button') eq \"enable\"){\n        print $q-&gt;redirect(-uri=&gt;\"http://1.1.1.1./cgi-bin/services/switch_XXX.cgi?enable\");\n} else {\n}\n</code></pre>\n\n<p>But none of the actions is actually performed. The Error-Log shows the following:</p>\n\n<pre><code>[Tue Mar 06 11:48:44 2018] [error] [client XXXX] Use of uninitialized value in string eq at /var/www/cgi-bin/test.cgi line 23.\n[Tue Mar 06 11:48:44 2018] [error] [client XXXX] Use of uninitialized value in string eq at /var/www/cgi-bin/test.cgi line 26.\n</code></pre>\n\n<p>Could someone of you tell me what causes the error and why the redirect is not working?</p>\n\n<p>Many thanks in advance!</p>\n"}, {"tags": ["perl", "fork"], "comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 2, "creation_date": 1520277807, "post_id": 49117462, "comment_id": 85241196, "body": "1. Call <code>exec</code> instead of <code>system</code> with a <i>single</i> executable and without <code>&amp;</code>. 2. Install a <code>$SIG{CHLD}</code> handler to detect termination of the child process more reliably and efficiently."}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1520280571, "post_id": 49117462, "comment_id": 85242575, "body": "Thanks for the response ~  I tried exec vs system.  No difference.  I also got rid of the &amp;.  This seemed to make the parent.pl proc uninterruptable.  Not sure I understand the %SIG hash or how to use in this context. Reading up on that now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1520281436, "post_id": 49117462, "comment_id": 85243060, "body": "What else does the parent need to do?  Also, the way you have it the <code>do_fork_sub</code> blocks for as long as that work in xterm takes.  Is that intended? What is the purpose of the whole program?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 2, "creation_date": 1520281533, "post_id": 49117462, "comment_id": 85243109, "body": "You should also read the <code>system</code> and <code>exec</code> documentation. <code>system</code> does another fork/exec and if the command contains shell metacharacters, the command is executed via the shell, resulting in a third fork before <code>xterm</code> is launched. <code>$pid</code> will only contain the PID of the <code>xterm</code> process with <code>exec(&#39;xterm&#39;)</code>. Not sure what <code>tcsh</code> is supposed to do. Maybe you want <code>exec(&#39;xterm&#39;, &#39;-e&#39;, &#39;tcsh&#39;)</code>?"}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1520285781, "post_id": 49117462, "comment_id": 85245248, "body": "Regarding the question... What else does the parent need to do?, I will elaborate in the body of the question (easier there)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1520308156, "post_id": 49117462, "comment_id": 85251453, "body": "Alright, thanks for the update. It brings further questions. First, the <code>xterm -e</code> that you now mention differs crucially from the example: It exits when what it <b>e</b>xecutes finishes (on my system anyway).  So your <code>xterm</code> will be gone, whether the job did well or not.  How is the user going to &quot;<i>go to the xterm and try to debug the problem</i>&quot;?  Second, cannot the parent establish both success/failure by parsing that log?  There are a number of things you can do but I am not sure what exactly is happening. For one, <code>exec</code> the program and in the parent <code>waitpid</code> and then parse the log."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1520308797, "post_id": 49117462, "comment_id": 85251615, "body": "Btw, I noticed you haven&#39;t accepted any answers out of your 27 questions.  See <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  At one point it becomes hard to respond to questions of someone who won&#39;t do that one simple thing that is expected. That matters for those who come to these pages later, for organization of questions, etc etc."}], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "is_accepted": false, "score": -1, "last_activity_date": 1520345325, "creation_date": 1520345325, "answer_id": 49132791, "question_id": 49117462, "link": "https://stackoverflow.com/questions/49117462/how-can-i-detect-when-a-forked-xterm-has-been-exited-perl-rhel6/49132791#49132791", "title": "How can I detect when a forked xterm has been exited (perl RHEL6)?", "body": "<p>Well, it's not elegant, but the answer I came up with was to pass an \"echo ...\" statement to the xterm invocation which uniquely identifies it in the output of \"ps aux\".  For example...</p>\n\n<p>$cmd = \"xterm -e \\\"echo 'This string is unique'; tcsh\\\" &amp;\"<br>\nThen system($cmd);</p>\n\n<p>Then just grep the output of \"ps aux\" for the unique string &amp;&amp; maybe \"xterm\" &amp;&amp; perhaps the user... whatever it takes.</p>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1520345325, "creation_date": 1520275687, "last_edit_date": 1520287234, "question_id": 49117462, "link": "https://stackoverflow.com/questions/49117462/how-can-i-detect-when-a-forked-xterm-has-been-exited-perl-rhel6", "title": "How can I detect when a forked xterm has been exited (perl RHEL6)?", "body": "<p>In perl on RHEL6, I need to detect when an xterm running in a forked process has been exited by the user of that xterm.  </p>\n\n<p>Here's some code that demonstrates the problem... </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\n\nmy $fork_stat = do_fork_sub();\nprint \"fork_stat: ${fork_stat}\\n\";\n\nexit;\n\nsub do_fork_sub {\n\n    my $pid = fork();\n\n    if($pid == 0) {\n\n        my $cmd = \"xterm; tcsh &amp;\";\n        system($cmd);\n\n        # When system command above finishes, the xterm is done, exit\n        # this child process...\n        exit;\n    }\n\n    for(;;) {\n\n        # If something happened in the xterm that \n        # created file \"child_complete_flag\", return \"SUCCESS\".\n        if(-e \"child_complete.flag\") {return(\"SUCCESS\");}\n\n        # If the user of the xterm gave up on the work by exiting,\n        # return \"FAILED\".  \n        my $pid_srch_cmd = \"ps uax | awk '{print \\$2}' | grep ${pid}\";\n        print \"-I- searching for pid using...  ${pid_srch_cmd}\\n\";\n        my $fork_pid_alive = `${pid_srch_cmd}`;    \n\n        if(!($fork_pid_alive)) {\n        print \"Detected end of xterm proc\\n\";\n            return(\"FAILED\");\n        }\n\n    sleep(3);\n    }\n}\n</code></pre>\n\n<p>This doesn't work.  If I exit the xterm, the forked process persists anyway.  I tried sticking a system call to a \"kill -9\" of $$ after the system call that creates the xterm.  No luck.  </p>\n\n<p>Any suggestions welcome.</p>\n\n<hr>\n\n<p>In response to one of the questions I was asked below....</p>\n\n<p>\"What else does the parent need to do? Also, the way you have it the do_fork_sub blocks for as long as that work in xterm takes. Is that intended? What is the purpose of the whole program?\"</p>\n\n<p>The example above is a greatly simplified version of what's really happening.  In that world, the xterm does a -e and runs a tool that can take a long time to run, days sometimes.  If it finishes successfully, I want the parent to detect this (parses this info from a log file), return from the subroutine where the next step will start (another 2-3 days).  What I don't want to do is wait around for the user to exit the xterm in that case.  If the tool passed, declare success and move on.  Thus the purpose of the parent sitting around looking at the child.  </p>\n\n<p>The tool that runs in the xterm may also fail.  In that case, email is sent to the user a and they eventually go to the xterm and try to debug the problem. WHen ready to try again, they start the tool again and let it run in the xterm (2-3 more days).  If it passes... see above.  But, it may fail again.  If they eventually just give up, they will \"exit\" out of the xterm.  In that case, I want to detect this and return from the subroutine with a \"FAILED\" status.  </p>\n\n<p>I am playing with $SIG(CHLD) = 'IGNORE' and = 'DEFAULT', seeing if I can control the fate of forked process once it exits.  Rather than let it become a zombie, I would rather it just die so that the parent can detect it's death and act accordingly.  It seems sensitive to me setting the $SIG{CHLD} = 'IGNORE' if I place it before the fork().  If I exit the xterm, the child process dies, the parent detects it, and everything acts accordingly.  But unfortunately, the child process seems to die on it's own.  It looks like the parent's call to \"system(\"xterm\")\" doesn't wait for the xterm to complete and the whole thing just dies prematurely.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520269541, "post_id": 49115756, "comment_id": 85236688, "body": "Why are there no error checks in your code? <code>rename</code>, <code>open</code>, <code>print</code>, <code>close</code> can all fail."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520269595, "post_id": 49115756, "comment_id": 85236734, "body": "Don&#39;t use 2-arg open and bareword filehandles. Use 3-arg open and lexical variables instead (very modern feature, available since 2000)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1520270153, "post_id": 49115756, "comment_id": 85237091, "body": "This question contains an unclear problem description, a random code fragment (with no error checks and incomplete), and seemingly no attempts to debug the problem yourself. What do you expect from us without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 2, "creation_date": 1520270331, "post_id": 49115756, "comment_id": 85237209, "body": "Don&#39;t use global file handle, use a local var <code>open my $fh, &#39;&lt;&#39;, &#39;file&#39; or die</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520270563, "post_id": 49115756, "comment_id": 85237332, "body": "Why would you shell out to <code>date</code> and <code>awk</code> just to get the time? That&#39;s just <code>use POSIX qw(strftime); my $time = strftime &quot;%H:%M:%S&quot;, localtime;</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520280311, "post_id": 49115756, "comment_id": 85242443, "body": "I don&#39;t see any way that your output file can be empty. Is <code>$file</code> the same as <code>$rundir&#47;upp&#47;run_unipost.bak</code>? You should remove everything except the substitution and the <code>print</code> from your code and try again."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520280758, "post_id": 49115756, "comment_id": 85242668, "body": "@melpomene: <code>POSIX</code>  is enormous. <code>use Time::Piece &#39;localtime&#39;</code> and <code>my $time = localtime-&gt;hms</code>"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1520330343, "post_id": 49115756, "comment_id": 85260524, "body": "Your file becomes empty because <code>open(OUT, &#39;&gt;&#39; . $file)</code> destroys its contents before you read them."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1520330449, "post_id": 49115756, "comment_id": 85260590, "body": "Next time, please ask 1 question, and put that question in the title. That way, your question will be of much more help to other StackOverflow users."}], "answers": [{"comments": [{"owner": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "edited": false, "score": 0, "creation_date": 1520270509, "post_id": 49115958, "comment_id": 85237305, "body": "I have completed my answer"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "edited": false, "score": 1, "creation_date": 1520274739, "post_id": 49115958, "comment_id": 85239622, "body": "@EnricAgudPique: Confused. I don&#39;t see an answer from you,"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1520270053, "creation_date": 1520270053, "answer_id": 49115958, "question_id": 49115756, "link": "https://stackoverflow.com/questions/49115756/modify-a-string-in-a-file/49115958#49115958", "title": "Modify a string in a file", "body": "<p>The code that I've been able to test works exactly as expected. So it looks like the problem is in the bits that I haven't been able to test.</p>\n\n<ul>\n<li>I don't know what <code>escriu()</code> does.</li>\n<li>I don't know what <code>run_unipost.bak</code> does.</li>\n</ul>\n"}], "owner": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1520280852, "answer_count": 1, "score": -5, "last_activity_date": 1520281163, "creation_date": 1520269362, "last_edit_date": 1520281163, "question_id": 49115756, "link": "https://stackoverflow.com/questions/49115756/modify-a-string-in-a-file", "closed_reason": "Not suitable for this site", "title": "Modify a string in a file", "body": "<p>The following code tries to change nhours for 24, but it fails, and the original file after the execution becomes empty...and the out file doesn't get 24, still mantains nhours</p>\n\n<pre><code>rename($file, $file . '.bak');\n\nopen(IN, '&lt;' . $file . '.bak') or die $!;\n\nopen(OUT, '&gt;' . $file) or die $!;\n\nwhile ( &lt;IN&gt; ) {\n\n    s/nhours/24/g;\n    print OUT $_;\n\n    @args = (\"$rundir/upp/run_unipost.bak\");\n    escriu(@args);\n    system(@args) == 0 or die \"system @args failed: $?\";\n}\n\nclose(IN);\nclose(OUT);\n\nsub escriu {\n    my @missatge = @_;\n    chomp (my $hora = `date |awk '{print \\$4}'`);\n    print \"-----&gt;  $hora @missatge\\n\";\n}\n</code></pre>\n\n<p>and <code>run_unipost.bak</code> executes a process.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1520266905, "post_id": 49114089, "comment_id": 85234892, "body": "<code>[@a]</code> is the same as <code>do { my @anon = @a; \\@anon }</code>. You want <code>\\@a</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9446496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af754e504864fed9776c13ef3a289710?s=128&d=identicon&r=PG&f=1", "display_name": "Alfredo gonzalo", "link": "https://stackoverflow.com/users/9446496/alfredo-gonzalo"}, "edited": false, "score": 0, "creation_date": 1520283800, "post_id": 49114140, "comment_id": 85244307, "body": "thank you you just answered my question and resolving my problem I&#39;m feeling good :)  thanks"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 7, "last_activity_date": 1520264501, "creation_date": 1520264501, "answer_id": 49114140, "question_id": 49114089, "link": "https://stackoverflow.com/questions/49114089/variable-cant-be-updated-in-this-way/49114140#49114140", "title": "Variable can&#39;t be updated in this way", "body": "<p>You aren't storing @A in @B, you're storing an anonymous array <code>[]</code>, originally populated by the contents of @A (i.e. empty). You can store a reference to @A, though:</p>\n\n<pre><code>@B = ( 'test', \\@A );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 6, "last_activity_date": 1520269055, "last_edit_date": 1520269055, "creation_date": 1520266172, "answer_id": 49114717, "question_id": 49114089, "link": "https://stackoverflow.com/questions/49114089/variable-cant-be-updated-in-this-way/49114717#49114717", "title": "Variable can&#39;t be updated in this way", "body": "<p>You're getting burnt by the difference between <code>[ @A ]</code> and <code>\\@A</code>.</p>\n\n<ul>\n<li><p><code>[ @A ]</code> means \"copy the contents of <code>@A</code> into a <strong>new</strong> anonymous array and return a reference to that new array\".</p></li>\n<li><p><code>\\@A</code> means \"return a reference to the array <code>@A</code>\".</p></li>\n</ul>\n\n<p>In your first example, you copy the contents of <code>@A</code> before putting anything into it. So your new array is empty. Rewrite your first example like this and it will work.</p>\n\n<pre><code>my @A;\nmy @B;\n@B = (\"test\", \\@A);\n@A = (\"aaa\", \"bbb\", \"ccc\");\nprint $B[1][1];\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9446496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af754e504864fed9776c13ef3a289710?s=128&d=identicon&r=PG&f=1", "display_name": "Alfredo gonzalo", "link": "https://stackoverflow.com/users/9446496/alfredo-gonzalo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 49114140, "answer_count": 2, "score": 0, "last_activity_date": 1520269055, "creation_date": 1520264379, "question_id": 49114089, "link": "https://stackoverflow.com/questions/49114089/variable-cant-be-updated-in-this-way", "title": "Variable can&#39;t be updated in this way", "body": "<p>I'm currently writing a Perl script, so i have an array @A in another array @B, but when the array @A is updated, the array @B don't take this update in consideration.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>my @A;my @B;\n@B=(\"test\",[@A]);\n@A=(\"aaa\",\"bbb\",\"ccc\");\nprint $B[1][1];\n</code></pre>\n\n<p>It work only when i change the order of lines in this way:</p>\n\n<pre><code>my @A;my @B;\n@A=(\"aaa\",\"bbb\",\"ccc\");\n@B=(\"test\",[@A]);\nprint $B[1][1];\n</code></pre>\n\n<p>The problem is I need to keep the order of lines as the first example?</p>\n\n<p>Any help please ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1520260697, "post_id": 49112789, "comment_id": 85230671, "body": "<code>!=~</code> should be <code>!~</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1520260712, "post_id": 49112789, "comment_id": 85230686, "body": "Remove the semicolon at the end of the if condition."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520260848, "post_id": 49112789, "comment_id": 85230763, "body": "@choroba: That will send it hunting for <code>&lt;h2&gt;</code> until it finds <i>any</i> <code>&lt;&#47;h2&gt;</code> within an intervening <code>$search</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520260990, "post_id": 49112789, "comment_id": 85230843, "body": "<code>if ( $content =~ m|&lt;h2&gt;(.*?)&lt;&#47;h2&gt;| and $1 !~ m|$search| ) { ... }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 0, "last_activity_date": 1520261172, "creation_date": 1520261172, "answer_id": 49113024, "question_id": 49112789, "link": "https://stackoverflow.com/questions/49112789/perl-search-in-a-string/49113024#49113024", "title": "Perl - search in a string", "body": "<p><code>&lt;/h2&gt;</code> doesn't immediately follow <code>$search</code>. But adding <code>.*</code> or <code>.*?</code> after <code>$search</code> in the regex still doesn't fix it fully, e.g. it thinks the following is \"inside\":</p>\n\n<pre><code>my $content=\"&lt;h2&gt;Is it inside this tag?&lt;/h2&gt;&lt;p&gt;Thank you Hello World&lt;/h2&gt;\";\n</code></pre>\n\n<p>This might be what you want:</p>\n\n<pre><code>my $inside;\nwhile ($content =~ m{(&lt;h2&gt;.*?&lt;/h2&gt;)}g) {\n    my $h2 = $1;\n    $inside = 1 if -1 != index $h2, $search;\n}\nsay $inside ? 'yes' : 'no';\n</code></pre>\n\n<p>But it would be even better to parse the content by an HTML parser.</p>\n"}, {"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 0, "last_activity_date": 1520261863, "creation_date": 1520261863, "answer_id": 49113251, "question_id": 49112789, "link": "https://stackoverflow.com/questions/49112789/perl-search-in-a-string/49113251#49113251", "title": "Perl - search in a string", "body": "<p>I'd strongly suggest using a proper HTML parser; here I'm using <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\"><code>Mojo::DOM</code></a> because it has a fairly modern interface, but there are several other modules available.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Mojo::DOM;\n\nmy $search=\"Hello World\";\nmy $content=\"&lt;p&gt;Hello World&lt;h2&gt;Is Hello World inside this tag?&lt;/h2&gt;&lt;p&gt;Thank you\";\n\nmy $dom = Mojo::DOM-&gt;new($content);\nmy $found = defined($dom-&gt;find('h2')-&gt;map('all_text')-&gt;first(qr/\\Q$search\\E/));\n\nprint $found ? \"Found it\\n\" : \"Didn't find it\\n\";\n\n__END__\n\nFound it\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4281327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WZpQM.jpg?s=128&g=1", "display_name": "ClubCola", "link": "https://stackoverflow.com/users/4281327/clubcola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 49113024, "answer_count": 2, "score": 0, "last_activity_date": 1520261863, "creation_date": 1520260414, "last_edit_date": 1520261425, "question_id": 49112789, "link": "https://stackoverflow.com/questions/49112789/perl-search-in-a-string", "title": "Perl - search in a string", "body": "<p>I would like to know, if <code>$search</code> is not in the <code>$content</code>. The search string should not be in the h2 tag. </p>\n\n<pre><code>my $search=\"Hello World\";\nmy $content=\"&lt;p&gt;Hello World&lt;h2&gt;Is Hello World inside this tag?&lt;/h2&gt;&lt;p&gt;Thank you\";\n\nif ($content !~ /&lt;h2&gt;.*?($search \\&lt;\\/h2\\&gt;)/;) {}\n</code></pre>\n\n<p>This works not. Has anybody an idea?</p>\n"}, {"tags": ["perl", "loops", "mojolicious", "hypnotoad"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1520275903, "post_id": 49111717, "comment_id": 85240223, "body": "<code>sleep</code> can be interrupted, say, by signals. Check <code>$!</code> and <code>$!{EINTR}</code> after the sleep call to see if that happened and check the return value of <code>sleep</code> for the number of seconds actually slept."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1520286951, "post_id": 49111717, "comment_id": 85245773, "body": "multiple server forks are involved for same recurring (go with morbo first)"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1520286988, "post_id": 49111717, "comment_id": 85245788, "body": "<a href=\"https://metacpan.org/pod/Mojo::IOLoop::ReadWriteFork\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojo::IOLoop::ReadWriteFork</a> for sleep() and hw communication"}, {"owner": {"reputation": 43, "user_id": 7937152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4943b982eeb1287c9b4a9f27c01594c?s=128&d=identicon&r=PG&f=1", "display_name": "hurikan", "link": "https://stackoverflow.com/users/7937152/hurikan"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1520349896, "post_id": 49111717, "comment_id": 85273259, "body": "@mob My sleep duration is between 35 and 36 seconds for a <code>sleep 50;</code>   And about <code>$!</code> and <code>$!{EINTR}</code>: Can you add more details? Directly from my bash terminal? If yes, <code>$!</code> return an empty variable and $!{EINTR}` return <code>!{EINTR}: event not found</code>   @\u0421\u0443\u0445\u043e\u043927 I don&#39;t think it&#39;s my actual problem. When i use hypnotoad with 2 worker, i can see the recurring loop called and logged twice, but i have the same problem."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1520356772, "post_id": 49111717, "comment_id": 85277976, "body": "<code>$!</code> and <code>$!{EINTR}</code> are perl variables."}, {"owner": {"reputation": 43, "user_id": 7937152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4943b982eeb1287c9b4a9f27c01594c?s=128&d=identicon&r=PG&f=1", "display_name": "hurikan", "link": "https://stackoverflow.com/users/7937152/hurikan"}, "edited": false, "score": 0, "creation_date": 1520414579, "post_id": 49111717, "comment_id": 85300900, "body": "So <code>$!</code> content is <code>Interrupted system call</code> and <code>$!{EINTR}</code> is <code>4</code>, just after my <code>sleep 50</code>. And the real sleep duration is 36 seconds. So, the problem come from Debian? It interrupt a too long blocking code?"}], "owner": {"reputation": 43, "user_id": 7937152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4943b982eeb1287c9b4a9f27c01594c?s=128&d=identicon&r=PG&f=1", "display_name": "hurikan", "link": "https://stackoverflow.com/users/7937152/hurikan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1520257004, "creation_date": 1520257004, "question_id": 49111717, "link": "https://stackoverflow.com/questions/49111717/mojolicious-long-subroutine-have-no-effect-on-my-variable", "title": "Mojolicious: long subroutine have no effect on my variable", "body": "<p>I have some trouble with very long subroutine with hypnotoad.\nI need to run 1 minute subroutine (hardware connected requirements).</p>\n\n<p>Firsly, i discover this behavior with:</p>\n\n<pre><code>my $var = 0;\nMojo::IOLoop-&gt;recurring(60 =&gt; sub {\n    $log-&gt;debug(\"starting loop: var: $var\");\n    if ($var == 0) {\n        #...\n        #make some long (30 to 50 seconds)   communication with external hardware\n        sleep 50; #fake reproduction of this long communication\n        $var = 1;\n    }\n    $log-&gt;debug(\"ending loop: var: $var\");\n}) \n</code></pre>\n\n<p>Log:</p>\n\n<pre><code>14:13:45 2018 [debug] starting loop: var: 0\n14:14:26 2018 [debug] ending loop: var: 1 #duration: 41 seconds\n14:14:26 2018 [debug] starting loop: var: 0\n14:15:08 2018 [debug] ending loop: var: 1 #duration: 42 seconds\n14:15:08 2018 [debug] starting loop: var: 0\n14:15:49 2018 [debug] ending loop: var: 1 #duration: 42 seconds\n14:15:50 2018 [debug] starting loop: var: 0\n14:16:31 2018 [debug] ending loop: var: 1 #duration: 41 seconds\n...\n</code></pre>\n\n<p>3 problems:<br>\n1) Where do these 42 seconds come from? (yes, i know, 42 seconds is the answer of the universe...)<br>\n2) Why the IOLoop recuring loses his pace?<br>\n3) Why my variable is setted to 1, and just one second after, the if get a variable equal to 0?    </p>\n\n<p>When looped job needs 20 seconds or 25 seconds, no problem.<br>\nWhen looped job needs 60 secondes and used with morbo, no problem.<br>\nWhen looped job needs more than 40 seconds and used with hypnotoad (1 worker), this is the behavior explained here.</p>\n\n<p>If i increase the \"not needed\" time (e.g. 120 seconds IOLoop for 60 seconds jobs, the behaviour is always the same.</p>\n\n<p>It's not a problem about IOLoop, i can reproduce the same behavior outside loop.<br>\nI suspect a problem with worker killed and heart-beat, but i have no log about that.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1520250987, "post_id": 49109965, "comment_id": 85224773, "body": "<code>if(condition) { ... }</code>?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1520251184, "post_id": 49109965, "comment_id": 85224890, "body": "@el.pescado It fixes <b>execution</b> of the &quot;code part&quot;.  It does not fix <b>compilation</b> of the &quot;code part&quot;."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1520252322, "post_id": 49109965, "comment_id": 85225640, "body": "Can you quantify whether the compilation overhead is relevant? Is it really a 10k+ line script? Does the compilation/BEGIN phase (<code>perl -c ...</code>) really take multiple seconds? If not, how are you sure this kind of optimization is relevant?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1520257657, "post_id": 49109965, "comment_id": 85228780, "body": "The script is intended to be operated so frequently and for so long (years) that IMHO it will make difference over full script lifetime."}], "answers": [{"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1520252469, "post_id": 49110365, "comment_id": 85225745, "body": "<code>eval read_file($filename)</code> would usually be expressed as <a href=\"https://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\"><code>do $filename</code> (+ error handling)</a>, which has the immense advantage of using the correct file name and line numbers in error messages."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1520253546, "post_id": 49110365, "comment_id": 85226391, "body": "I would not recommend <code>File::Slurp</code>, it has too many <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=File-Slurp\" rel=\"nofollow noreferrer\">issues</a>."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520260086, "post_id": 49110365, "comment_id": 85230300, "body": "Sorry to pile on, but I see additional issues in regards to error handling: <code>eval `cat second-script.pl`;</code> - what e.g. if the file isn&#39;t found? Also, <code>eval ...; if ($@) {...}</code> <a href=\"https://www.perlmonks.org/?node_id=1153468\" rel=\"nofollow noreferrer\">has issues</a>, and as already pointed out the whole thing can be replaced by <code>do FILE</code>, which however needs <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\">its own error handling</a>. OTOH you make a good point in regards to using a daemon."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520273078, "post_id": 49110365, "comment_id": 85238730, "body": "@haukex, I am trying to give options. <code>do</code> does not see lexicals from the enclosing scope, which may be the whole point of using <code>eval</code>. All options may be valid. The good thing about people commenting is that lots of ideas come up for someone having the same problem to use."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520273336, "post_id": 49110365, "comment_id": 85238875, "body": "I&#39;m all for TIMTOWTDI :-) I wasn&#39;t saying the options are bad or should not have been presented, just that they require some modifications/additions to handle errors."}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1520253270, "last_edit_date": 1520253270, "creation_date": 1520252314, "answer_id": 49110365, "question_id": 49109965, "link": "https://stackoverflow.com/questions/49109965/perl-two-stage-conditional-compilation/49110365#49110365", "title": "perl - two stage conditional compilation", "body": "<p>I see two ways of achieving what you want. The simple one would be to divide the script in two parts. The first part will do the simple tests. Then, if you need to do more complicated tests you may \"add\" the second part. The way to do this is using <code>eval</code> like this:</p>\n\n<pre><code>&lt;first-script.pl&gt;\n...\neval `cat second-script.pl`;\nif( $@ ) {\n  print STDERR $@, \"\\n\";\n  die \"Errors in the second script.\\n\";\n}\n</code></pre>\n\n<p>Or using <code>File::Slurp</code> in a more robust way:</p>\n\n<pre><code>eval read_file(\"second-script.pl\", binmode =&gt; ':utf8');\n</code></pre>\n\n<p>Or following @amon suggestion and <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\"><code>do</code></a>:</p>\n\n<pre><code>do \"second-script.pl\";\n</code></pre>\n\n<p>Only beware that <code>do</code> is different from <code>eval</code> in this way:</p>\n\n<blockquote>\n  <p>It also differs in that code evaluated with do FILE cannot see lexicals in the enclosing scope; eval STRING does. It's the same, however, in that it does reparse the file every time you call it, so you probably don't want to do this inside a loop.</p>\n</blockquote>\n\n<p>The <code>eval</code> will execute in the context of the first script, so any variables or initializations will be available to that code.</p>\n\n<p>Related to this, there is this question: <a href=\"https://stackoverflow.com/questions/46931348/best-way-to-add-dynamic-code-to-a-perl-application\">Best way to add dynamic code to a perl application</a>, which I asked some time ago (and answered myself with the help of the comments provided and some research.) I took some time to document everything I could think of for anyone (and myself) to refer to.</p>\n\n<p>The second way I see would be to turn your testing script into a daemon and have the crontab bit call this daemon as necessary. The daemon remains alive so any data structures that you may need will remain in memory. On the down side, this will take resources in a continuos way as the daemon process will always be running.</p>\n"}, {"comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 1, "creation_date": 1520452714, "post_id": 49110680, "comment_id": 85325862, "body": "The compilation take &gt;100ms extra - the script uses pretty big external  modules.  I would like to include the feature with minimal code/script changes."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 2, "last_activity_date": 1520254019, "last_edit_date": 1520254019, "creation_date": 1520253411, "answer_id": 49110680, "question_id": 49109965, "link": "https://stackoverflow.com/questions/49109965/perl-two-stage-conditional-compilation/49110680#49110680", "title": "perl - two stage conditional compilation", "body": "<p>First, you should measure how long the compilation really takes, to see if this \"optimization\" is even necessary. If it does happen to be, then since you said you'd prefer a one-file solution, one possible solution is using the <code>__DATA__</code> section for code like so:</p>\n\n<pre><code>use warnings;\nuse strict;\n\n# measure compliation and execution time\nuse Time::HiRes qw/ gettimeofday tv_interval /;\nmy $start;\nBEGIN { $start = [gettimeofday] }\nINIT  { printf \"%.06f\\n\", tv_interval($start) }\nEND   { printf \"%.06f\\n\", tv_interval($start) }\n\nmy $condition = 1; # dummy for testing\n# conditionally compile and run the code in the DATA section\nif ($condition) {\n    eval do { local $/; &lt;DATA&gt;.'; 1' } or die $@;\n}\n\n__DATA__\n# ... lots of code here ...\n</code></pre>\n"}], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 49110680, "answer_count": 2, "score": 1, "last_activity_date": 1520254019, "creation_date": 1520250877, "last_edit_date": 1520251416, "question_id": 49109965, "link": "https://stackoverflow.com/questions/49109965/perl-two-stage-conditional-compilation", "title": "perl - two stage conditional compilation", "body": "<p>I have pretty big perl script executed quite frequently (from cron).<br>\nMost executions require pretty short &amp; simple tests.</p>\n\n<p>How to split <strong>single file</strong> script into two parts with \"part two\" compiled based on \"part 1\" decision?</p>\n\n<hr>\n\n<p>Considered solution:</p>\n\n<ol>\n<li>using <code>BEGIN{ \u2026; exit if \u2026; }</code> block for <strong>trivial</strong> test.</li>\n<li>two file solution with file_1 using <code>require</code> to compile&amp;execute file_2.<br>\nI would prefer single file solution to ease maintenance if the cost is reasonable.  </li>\n</ol>\n"}, {"tags": ["regex", "perl", "spam-prevention", "email-spam", "spamassassin"], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 7619305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de30ee100e2c9b84ff729f1b496d0421?s=128&d=identicon&r=PG", "display_name": "JohnTheWalker", "link": "https://stackoverflow.com/users/7619305/johnthewalker"}, "edited": false, "score": 0, "creation_date": 1520249348, "post_id": 49108830, "comment_id": 85223745, "body": "Thanks for the support @Chris!"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1520247327, "creation_date": 1520247327, "answer_id": 49108830, "question_id": 49107269, "link": "https://stackoverflow.com/questions/49107269/spammassassin-filter-names-that-match-a-specific-pattern/49108830#49108830", "title": "Spammassassin filter names that match a specific pattern", "body": "<p>Syntax is almost right. It should be:</p>\n\n<pre><code>header NAME_SPACE_LETTER_POINT From =~ /((?:[a-z][a-z]+))(\\s+)([a-z])(\\.)/\n</code></pre>\n\n<p>Also the regex is wrong as they're case sensitive by default so it needs the <code>i</code> option added on the end. It also seems to have way too many brackets so I've trimmed them down a bit.</p>\n\n<pre><code>/([a-z][a-z]+\\s+[a-z]\\.)/i\n</code></pre>\n\n<p>It probably needs further restricting as it'll match \"Name S.\" at any point in the From field, so would match the perfectly valid name \"Samuel L. Jackson\", for example.</p>\n\n<p>I think the 3rd part of your question is a bit subjective. Personally I wouldn't give this particular rule a very high score as even if you did further restrict the regex, it still might hit some false positives. If the rule were targeting specific words/phrases that always are spam, then sure, giving it such a high score as to always mark them as spam is fine in my opinion.</p>\n"}], "owner": {"reputation": 502, "user_id": 7619305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de30ee100e2c9b84ff729f1b496d0421?s=128&d=identicon&r=PG", "display_name": "JohnTheWalker", "link": "https://stackoverflow.com/users/7619305/johnthewalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 49108830, "answer_count": 1, "score": 0, "last_activity_date": 1520247327, "creation_date": 1520242666, "last_edit_date": 1520242982, "question_id": 49107269, "link": "https://stackoverflow.com/questions/49107269/spammassassin-filter-names-that-match-a-specific-pattern", "title": "Spammassassin filter names that match a specific pattern", "body": "<p>I've been getting a lot of spam lately from many domains (too many to blacklist) where the sender name follows this pattern: <code>Name S.</code> so the name followed by a white space, then by a single letter and finally a point. I was wondering if I could implement this in Spamassassin. With that in mind, here are my questions:</p>\n\n<ol>\n<li><p>Which part of the header contains the sender name? I'm guessing the <code>from</code> header, but then postfix only shows me Email adresses in the logs so I'm a little confused there.</p></li>\n<li><p>Assuming the answer to 1. is yes, is this a correct Spamassassin rule / correct regexp for what I want to achieve:</p></li>\n</ol>\n\n<p><code>header NAME_SPACE_LETTER_POINT=~/((?:[a-z][a-z]+))(\\s+)([a-z])(\\.)/\n score NAME_SPACE_LETTER_POINT 5.0\n</code></p>\n\n<ol start=\"3\">\n<li>Is it considered a good practise to mark mails as spam based only on a single rule? (the spam threshold of the server is 5, so the above rule would mark any mail as spam immediately)</li>\n</ol>\n\n<p>Thanks in advance for any suggestions / answers to these questions!</p>\n"}, {"tags": ["perl", "loops", "foreach", "arguments", "subroutine"], "comments": [{"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1520239277, "post_id": 49105847, "comment_id": 85217668, "body": "Within your <code>foreach()</code> block, should you not be using <code>$elem</code> instead of <code>$str</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1520239219, "creation_date": 1520239219, "answer_id": 49106381, "question_id": 49105847, "link": "https://stackoverflow.com/questions/49105847/perform-the-same-operation-to-all-the-variables-but-first-variable-passed-in-a-p/49106381#49106381", "title": "Perform the same operation to all the variables but first variable passed in a Perl function", "body": "<p>You are modifying <code>@_</code>, whose elements are the scalars passed as arguments. For this reason, modifying the elements of <code>@_</code> isn't safe. That's why we copy the elements of <code>@_</code> and the modify copies instead.</p>\n\n<pre><code>sub printCSVRowData {\n    my ($csv, $fh, @fields) = @_;\n    @fields = map { defined($_) &amp;&amp; /\\S/ ? $_ : \"NA\" } @fields;\n    $csv-&gt;say($fh, \\@fields);\n}\n</code></pre>\n\n<p>You should be using Text::CSV_XS or similar. </p>\n\n<pre><code>my $csv = Text::CSV_XS-&gt;new({\n    auto_diag =&gt; 2,\n    binary    =&gt; 1,\n});\n</code></pre>\n"}], "owner": {"reputation": 2382, "user_id": 3615862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rjMyq.jpg?s=128&g=1", "display_name": "ThisaruG", "link": "https://stackoverflow.com/users/3615862/thisarug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 49106381, "answer_count": 1, "score": 0, "last_activity_date": 1520239850, "creation_date": 1520236925, "last_edit_date": 1520239850, "question_id": 49105847, "link": "https://stackoverflow.com/questions/49105847/perform-the-same-operation-to-all-the-variables-but-first-variable-passed-in-a-p", "title": "Perform the same operation to all the variables but first variable passed in a Perl function", "body": "<p>I am using a Perl function to dump a CSV file, where I pass certain values, and indie this function, I want to perform same operation for these passed variables except for the first variable, which is the file handle.\nWhat I want to do is to check whether a passed argument (<code>string</code>) has commas in it, if so, make enclose them in quotation mark (<code>\"</code>) s.</p>\n\n<p>But I need to assign these values to variable names, as I have to use them later for different purposes.</p>\n\n<p>Following is my subroutine:</p>\n\n<pre><code>sub printCSVRowData\n{\n    my $CSVFileHandle = shift;\n\n    foreach my $str (@_) {\n        if ($str eq \"\" or not defined $str or $str =~ /^ *$/) {\n            $str = \"NA\";\n        }\n        $str =~ s/\\\"//g;\n    }\n\n    my $firstCol = shift;\n    my $secondCol = shift;\n    my $thirdCol = shift;\n\n    # Do some modifications\n\n    print $CSVFileHandle \"$firstCol, $secondCol, $thirdCol\";\n}\n</code></pre>\n\n<p>Now the issue is when I values to this subroutine, I get the following error message:</p>\n\n<blockquote>\n  <p>Modification of a read-only value attempted at  line  (where <code>$str =~ s/\\\"//g;</code> is called).</p>\n</blockquote>\n\n<p>Can anyone help me on this ? What am I doing wrong here ? Is there any other way around for this ?</p>\n"}, {"tags": ["perl", "http", "oauth", "spotify"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520210153, "post_id": 49101468, "comment_id": 85209174, "body": "1) <code>encode_json</code> already encode using UTF-8, so <code>encode_utf8</code> shouldn&#39;t be there."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520210186, "post_id": 49101468, "comment_id": 85209179, "body": "2) You claim the content is <code>application&#47;x-www-form-urlencoded</code>, but you provide JSON. What does the API actually expect?"}, {"owner": {"reputation": 801, "user_id": 5388567, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d0171125d3261a31e3ab7792913f74c8?s=128&d=identicon&r=PG", "display_name": "Valkyrie", "link": "https://stackoverflow.com/users/5388567/valkyrie"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520210381, "post_id": 49101468, "comment_id": 85209215, "body": "@ikegami I tried omitting <code>encode_utf8</code> and got the same result. The API expects <code>application&#47;x-www-form-urlencoded</code>, but if I try to pass a plain hash to <code>HTTP::Request::new</code> I get an error complaining that it&#39;s a non-scalar reference."}], "answers": [{"comments": [{"owner": {"reputation": 801, "user_id": 5388567, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d0171125d3261a31e3ab7792913f74c8?s=128&d=identicon&r=PG", "display_name": "Valkyrie", "link": "https://stackoverflow.com/users/5388567/valkyrie"}, "edited": false, "score": 0, "creation_date": 1520210830, "post_id": 49102048, "comment_id": 85209306, "body": "I wasn&#39;t aware that I could pass <code>Content</code> as a header, thanks. Marked as accepted."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 801, "user_id": 5388567, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d0171125d3261a31e3ab7792913f74c8?s=128&d=identicon&r=PG", "display_name": "Valkyrie", "link": "https://stackoverflow.com/users/5388567/valkyrie"}, "edited": false, "score": 0, "creation_date": 1520286037, "post_id": 49102048, "comment_id": 85245393, "body": "Fixed a bug. /// I prefer to use <code>Content</code> since it allows me to put the data &quot;in order&quot;, but there&#39;s an alternate calling convention that doesn&#39;t make it look like a header. I&#39;ve added it to the answer so you can choose the one you prefer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1520285859, "last_edit_date": 1520285859, "creation_date": 1520210505, "answer_id": 49102048, "question_id": 49101468, "link": "https://stackoverflow.com/questions/49101468/spotify-api-unsupported-grant-type/49102048#49102048", "title": "Spotify API unsupported_grant_type", "body": "<p>The API expects <code>application/x-www-form-urlencoded</code> (<code>grant_type=client_credentials</code>) as you claim you provide, but you're providing JSON (<code>{\"grant_type\":\"client_credentials\"}</code>).</p>\n\n<p><a href=\"http://search.cpan.org/perldoc?HTTP::Request::Common\" rel=\"nofollow noreferrer\">HTTP::Request::Common</a>'s <code>POST</code> makes it easy to build a <code>application/x-www-form-urlencoded</code> response.</p>\n\n<pre><code>use HTTP::Request::Common qw( POST );\n\nmy $req = POST(AUTH_TOKEN_URL,\n    [\n        grant_type =&gt; \"client_credentials\",\n    ],\n    Authorization =&gt; \"Basic $ENV{SPOTIFY_CLIENT_B64}\",\n    Content_Type  =&gt; 'application/x-www-form-urlencoded',\n);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use HTTP::Request::Common qw( POST );\n\nmy $req = POST(AUTH_TOKEN_URL,\n    Authorization =&gt; \"Basic $ENV{SPOTIFY_CLIENT_B64}\",\n    Content_Type  =&gt; 'application/x-www-form-urlencoded',\n    Content =&gt; [\n        grant_type =&gt; \"client_credentials\",\n    ],\n);\n</code></pre>\n"}], "owner": {"reputation": 801, "user_id": 5388567, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d0171125d3261a31e3ab7792913f74c8?s=128&d=identicon&r=PG", "display_name": "Valkyrie", "link": "https://stackoverflow.com/users/5388567/valkyrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1249, "favorite_count": 0, "accepted_answer_id": 49102048, "answer_count": 1, "score": 0, "last_activity_date": 1520285859, "creation_date": 1520204772, "question_id": 49101468, "link": "https://stackoverflow.com/questions/49101468/spotify-api-unsupported-grant-type", "title": "Spotify API unsupported_grant_type", "body": "<p>I'm using the <a href=\"https://beta.developer.spotify.com/documentation/general/guides/authorization-guide/#client-credentials-flow\" rel=\"nofollow noreferrer\">client credentials flow</a> for authentication to the Spotify API. I have everything I need set as it should be, but I still get the following error whenever I send the rquest.</p>\n\n<pre><code>400 Bad Request: {\"error\":\"unsupported_grant_type\",\"error_description\":\"grant_type must be client_credentials, authorization_code or refresh_token\"}\n</code></pre>\n\n<p>Pertinent code is the following:</p>\n\n<pre><code>sub get_spotify_token{\n    my $data={grant_type =&gt; \"client_credentials\"};\n\n    my $req=HTTP::Request-&gt;new(\"POST\",AUTH_TOKEN_URL,[\n        \"Content-Type\" =&gt; \"application/x-www-form-urlencoded\",\n        \"Authorization\" =&gt; \"Basic $ENV{SPOTIFY_CLIENT_B64}\",\n    ],encode_utf8 encode_json $data);\n\n    # send request\n    my $res=$ua-&gt;request($req);\n\n    # return token or die on error\n    if($res-&gt;is_success){\n        return %{decode_json $res-&gt;content}{\"access_token\"};\n    }else{\n        die $res-&gt;status_line.\": \".$res-&gt;content.\"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520195395, "post_id": 49100022, "comment_id": 85205391, "body": "<code>\\\\|</code> should be <code>\\|</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520195417, "post_id": 49100022, "comment_id": 85205402, "body": "I&#39;d use <code>[^|]*</code> rather than being so precise."}, {"owner": {"reputation": 2223, "user_id": 5480409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ySDx0.png?s=128&g=1", "display_name": "Francesco B.", "link": "https://stackoverflow.com/users/5480409/francesco-b"}, "edited": false, "score": 0, "creation_date": 1520247880, "post_id": 49100022, "comment_id": 85222831, "body": "Did you solve this?"}], "answers": [{"tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 2, "last_activity_date": 1520195746, "last_edit_date": 1520195746, "creation_date": 1520195409, "answer_id": 49100107, "question_id": 49100022, "link": "https://stackoverflow.com/questions/49100022/i-am-removing-timestamps-from-text-file/49100107#49100107", "title": "I am removing timestamps from text file", "body": "<p>No need to read the whole file with <code>-0777</code> :</p>\n\n<pre><code>$ perl -pe 's/.*\\|//g' file\nMir wurde ganz schwer ums Herz.\nIch hoffte und betete,\n</code></pre>\n\n<p>Or if you need to be more specific :</p>\n\n<pre><code>$ perl -pe 's/^(\\d{14}\\.\\d{3}\\|)+[A-Z]{2}\\d+\\|//g' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2223, "user_id": 5480409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ySDx0.png?s=128&g=1", "display_name": "Francesco B.", "link": "https://stackoverflow.com/users/5480409/francesco-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1520368929, "last_edit_date": 1520368929, "creation_date": 1520197053, "answer_id": 49100393, "question_id": 49100022, "link": "https://stackoverflow.com/questions/49100022/i-am-removing-timestamps-from-text-file/49100393#49100393", "title": "I am removing timestamps from text file", "body": "<p>I would do:</p>\n\n<pre><code>perl -0777 -pe 's/([^CC1|]+)$//gm'  clean.txt \n</code></pre>\n\n<p>Live demo <a href=\"https://regex101.com/r/1v1plG/1/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Brief explanation:</p>\n\n<ul>\n<li><code>([^CC1|])</code>\nMatch a single character not present in brackets</li>\n<li><code>\\+</code> Quantifier \u2014 Matches between one and unlimited times</li>\n<li><code>$</code> asserts position at the end of a line</li>\n<li><code>g</code> modifier: global. All matches (don't return after first match)</li>\n<li><code>m</code> modifier: multi line. Causes ^ and $ to match the begin/end of each\nline (not only begin/end of string)</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 8657501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcdf1a9638894a53282d6181c159dd47?s=128&d=identicon&r=PG", "display_name": "wkranti", "link": "https://stackoverflow.com/users/8657501/wkranti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520368929, "creation_date": 1520194971, "last_edit_date": 1520196349, "question_id": 49100022, "link": "https://stackoverflow.com/questions/49100022/i-am-removing-timestamps-from-text-file", "title": "I am removing timestamps from text file", "body": "<p>text file contains</p>\n\n<p>name of file is <code>clean.txt</code> and contents are</p>\n\n<pre><code>20170524201630.600|20170524201632.760|CC1|Mir wurde ganz schwer ums Herz.\n20170524201633.280|20170524201634.600|CC1|Ich hoffte und betete,\n</code></pre>\n\n<p>i want to remove time stamps and output should be</p>\n\n<pre><code>          Mir wurde ganz schwer ums Herz.\n          Ich hoffte und betete,\n</code></pre>\n\n<p>i tried running on command line </p>\n\n<pre><code>perl -0777 -pe 's/^[1-9]\\d{13}\\.\\d{3}\\\\|^[1-9]\\d{13}\\.\\d{3}\\|[A-Z]{2}[0-9]\\|//g'  clean.txt \n</code></pre>\n\n<p>but I got result as it is.what is problem here ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1520170568, "post_id": 49095967, "comment_id": 85196894, "body": "remove the linebreaks and most of the spaces and wrap it into <code>perl -wle&#39;...&#39;</code>"}, {"owner": {"reputation": 2289, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 1, "creation_date": 1520180303, "post_id": 49095967, "comment_id": 85200059, "body": "May I ask why would you want that?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1520229302, "last_edit_date": 1520229302, "creation_date": 1520177776, "answer_id": 49097067, "question_id": 49095967, "link": "https://stackoverflow.com/questions/49095967/perl-one-liner-to-find-the-line-having-greater-date-time-stamp-of-two-lines/49097067#49097067", "title": "Perl one liner to find the line having greater date time stamp of two lines.", "body": "<p>You don't need to use Time::Piece for this. Date/times in your format are easily sortable, so you can just compare them as strings.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nchomp(my @lines = &lt;DATA&gt;);\n\nif ($lines[0] gt $lines[1]) {\n  say \"First line has the later timestamp\";\n} elsif ($lines[0] lt $lines[1]) {\n  say \"Second line has the later timestamp\";\n} else {\n  say \"Timestamps are the same\";\n}\n\n__DATA__\n2018-02-15 06:10:55-05;2BBB519037;2.1.575017;YY990;Company1;0;0;0;0;0;0;0;0;0;1;1;0;0;4498\n2018-02-15 15:40:12-05;2BBB1519037;2.1.575017;YY990;Company1;0;0;0;0;0;0;0;0;0;1;1;0;0;5401\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520196938, "post_id": 49097157, "comment_id": 85205922, "body": "I hate Daylight Saving Time too :-) [I edited my answer]"}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 0, "last_activity_date": 1520243610, "last_edit_date": 1520243610, "creation_date": 1520178277, "answer_id": 49097157, "question_id": 49095967, "link": "https://stackoverflow.com/questions/49095967/perl-one-liner-to-find-the-line-having-greater-date-time-stamp-of-two-lines/49097157#49097157", "title": "Perl one liner to find the line having greater date time stamp of two lines.", "body": "<p>Perl oneliner embedded in shell script for tests: </p>\n\n<pre><code>#!/bin/sh\nperl -MDate::Parse -ne '$h{$t}=$_ if /^(.*?);/ and $t=str2time($1);END{print $h{shift @K} if @K=sort{$a&lt;=&gt;$b}keys %h}' &lt;&lt;END\n2018-02-15 06:10:55-05;2BBB519037;2.1.575017;YY990;Company1;0;0;0;0;0;0;0;0;0;1;1;0;0;4498\n2018-02-15 15:40:12-05;2BBB1519037;2.1.575017;YY990;Company1;0;0;0;0;0;0;0;0;0;1;1;0;0;5401\nEND\n</code></pre>\n\n<p>Standard version of the above perl one-liner:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Date::Parse;\n\nmy %h; # has mapping unix-time number to full line content\nLINE: while (defined($_ = readline ARGV)) {\n    my $t; # unix-time number extracted from the line\n    $h{$t} = $_ if /^(.*?);/ and $t = str2time($1);\n}\nEND {\n    my @K; # keys of %h - unix-time found in the file  \n    print $h{shift @K} if @K = (sort {$a &lt;=&gt; $b} keys %h);\n}\n</code></pre>\n\n<hr>\n\n<p>Short version for dates in exactly the same format in the same time zone without <a href=\"https://en.wikipedia.org/wiki/Daylight_saving_time\" rel=\"nofollow noreferrer\">Daylight Saving Time</a> and year from 1000 to 9999.</p>\n\n<pre><code>#!/bin/sh\nperl '$h{$t}=$_ if /^(.*?);/;END{print $h{shift @K} if @K=sort keys %h}' &lt;&lt;END\n2018-02-15 06:10:55-05;2BBB519037;2.1.575017;YY990;Company1;0;0;0;0;0;0;0;0;0;1;1;0;0;4498\n2018-02-15 15:40:12-05;2BBB1519037;2.1.575017;YY990;Company1;0;0;0;0;0;0;0;0;0;1;1;0;0;5401\nEND\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 8267952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b2ef54d99c06b6bf90bfe866cd939f2b?s=128&d=identicon&r=PG&f=1", "display_name": "ran1n", "link": "https://stackoverflow.com/users/8267952/ran1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1520243610, "creation_date": 1520170322, "question_id": 49095967, "link": "https://stackoverflow.com/questions/49095967/perl-one-liner-to-find-the-line-having-greater-date-time-stamp-of-two-lines", "title": "Perl one liner to find the line having greater date time stamp of two lines.", "body": "<p>Need perl one liner to find the line having greater date time stamp of two lines.<br>\nThe below two sample lines in csv format contains first field as date time stamp:    </p>\n\n<pre><code>2018-02-15 06:10:55-05;2BBB519037;2.1.575017;YY990;Company1;0;0;0;0;0;0;0;0;0;1;1;0;0;4498\n2018-02-15 15:40:12-05;2BBB1519037;2.1.575017;YY990;Company1;0;0;0;0;0;0;0;0;0;1;1;0;0;5401\n</code></pre>\n\n<p>I have the below perl code to identify the date time stamp that is greater of the two, but need a compressed one liner. </p>\n\n<pre><code>use Time::Piece;\nmy $dateformat = \"%Y-%m-%d %H:%M:%S\";\n\nmy $date1 = \"2018-02-15 06:10:55\";\nmy $date2 = \"2018-02-15 15:40:12\";\nmy $diff = $date2 - $date1;\n\n$date1 = Time::Piece-&gt;strptime($date1, $dateformat);\n$date2 = Time::Piece-&gt;strptime($date2, $dateformat);\n\nif ($date2 &gt; $date1) {\n    print \"$date2 is greater\";\n} else {\n    print \"$date1 is greater\";\n}\n</code></pre>\n"}, {"tags": ["perl", "character-encoding"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520167248, "post_id": 49094348, "comment_id": 85195929, "body": "I&#39;d suggest debugging issues like these with <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>Data::Dumper</code></a> with its <code>Useqq</code> option turned on, <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\"><code>Data::Dump</code></a>, or even <a href=\"http://perldoc.perl.org/Devel/Peek.html\" rel=\"nofollow noreferrer\"><code>Devel::Peek</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520166488, "post_id": 49094376, "comment_id": 85195759, "body": "See also the <a href=\"http://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">open</a> pragma, e.g. <code>use open qw&#47;:std :utf8&#47;;</code> (although note that its effect is broader)"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1520174318, "post_id": 49094376, "comment_id": 85198050, "body": "That is definitely not true. Perl was (and still is) used to process raw binary data long before it was used to handle character set encoding. The default layer is <code>:raw</code> (<code>:crlf</code> for text-mode files on Windows) and changing that would be backwards-incompatible."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1520188350, "post_id": 49094376, "comment_id": 85203016, "body": "Or <code>use open OUT =&gt; &#39;:utf8&#39;;</code> see <a href=\"https://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">open pragma</a>"}], "tags": [], "owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "is_accepted": false, "score": 5, "last_activity_date": 1520159333, "creation_date": 1520159333, "answer_id": 49094376, "question_id": 49094348, "link": "https://stackoverflow.com/questions/49094348/why-doesnt-perls-encoding-layer-have-any-effect/49094376#49094376", "title": "Why doesn&#39;t Perl&#39;s encoding layer have any effect?", "body": "<p>I was assuming that file handles not declared with a specific encoding use the utf-8 encoding by default, but apparently that isn't true.</p>\n\n<p>Adding an explicit</p>\n\n<pre><code>binmode(STDOUT, \":utf8\");\n</code></pre>\n\n<p>fixes the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "edited": false, "score": 0, "creation_date": 1520268363, "post_id": 49100147, "comment_id": 85235857, "body": "This doesn&#39;t seem accurate. What does it even mean to print a non-encoded Unicode code point? It seems to me that Perl is using its <a href=\"https://perldoc.perl.org/perlunifaq.html#I-lost-track%3B-what-encoding-is-the-internal-format-really%3F\" rel=\"nofollow noreferrer\">internal encoding</a>, which happens also to be Latin1 in this case."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "edited": false, "score": 0, "creation_date": 1520268911, "post_id": 49100147, "comment_id": 85236252, "body": "A string is a just a sequence of number. In a string containing decoded text, those number are Unicode Code points. <code>decode(&quot;iso-8859-1&quot;, &quot;\\xA3&quot;)</code> therefore returns <code>&quot;\\xA3&quot;</code>. <code>print(&quot;\\xA3&quot;)</code> on a file handle with no encoding layers produces the byte <code>A3</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "edited": false, "score": 0, "creation_date": 1520268945, "post_id": 49100147, "comment_id": 85236286, "body": "The internal representation is irrelevant. In fact, the internal representation of <code>decode(&quot;iso-8859-1&quot;, &quot;\\xA3&quot;)</code> isn&#39;t <code>A3,UTF8=0</code>; it&#39;s <code>C2.A3,UTF8=1</code>"}, {"owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "edited": false, "score": 0, "creation_date": 1520269068, "post_id": 49100147, "comment_id": 85236365, "body": "If your theory was correct, <code>perl -le &#39;use Encode; print(decode(&quot;utf-8&quot;, &quot;\u044b&quot;));&#39;</code> would result in something like <code>04 4b</code> (0x044b is the unicode code point for \u044b); but instead it gives <code>d1 8b</code>, the utf-8 encoding of &#39;\u044b&#39;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "edited": false, "score": 1, "creation_date": 1520269122, "post_id": 49100147, "comment_id": 85236409, "body": "My answer simply doesn&#39;t cover what happens when you provide an invalid input. When faced with an invalid input (<code>0x44b &gt; 0xFF</code>), <code>print</code> warns (&quot;wide character&quot;), and guesses that you meant to encode using utf8."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1520286125, "last_edit_date": 1520286125, "creation_date": 1520195622, "answer_id": 49100147, "question_id": 49094348, "link": "https://stackoverflow.com/questions/49094348/why-doesnt-perls-encoding-layer-have-any-effect/49100147#49100147", "title": "Why doesn&#39;t Perl&#39;s encoding layer have any effect?", "body": "<p>A string is a sequence of (32-bit or 64-bit) numbers.</p>\n\n<p>In a string containing decoded text, those numbers are Unicode Code Points. Since byte <code>A3</code> represents Unicode Code Point <code>U+00A3</code> under iso-8859-1, <code>decode(\"iso-8859-1\", \"\\xA3\")</code> therefore returns <code>\"\\xA3\"</code>.</p>\n\n<p>You proceeded to print that string, and <code>print(\"\\xA3\")</code> on a file handle with no encoding layers produces the byte <code>A3</code> (since it expects a strings of bytes).</p>\n\n<hr>\n\n<p>You didn't specify what you wanted to do, but I'm guessing you wanted the program to produce convert the input from iso-8859-1 to UTF-8. To achieve that,</p>\n\n<p>Add</p>\n\n<pre><code>use open ':std', ':encoding(locale)';\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use open ':std', ':encoding(UTF-8)';\n</code></pre>\n\n<p>These add an encoding layer to STDIN, STDOUT and STDERR (using <code>binmode</code>), and they set the default encoding layer for <code>open</code> in scope.</p>\n"}], "owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 49100147, "answer_count": 2, "score": 4, "last_activity_date": 1520286125, "creation_date": 1520159163, "question_id": 49094348, "link": "https://stackoverflow.com/questions/49094348/why-doesnt-perls-encoding-layer-have-any-effect", "title": "Why doesn&#39;t Perl&#39;s encoding layer have any effect?", "body": "<p>I need to read a file encoded in iso-8859-1.</p>\n\n<p>For some reason I can't get the encoding layer (as described in <code>PerlIO::encoding</code>) to work. Here's a minimal example of what I am doing.</p>\n\n<p><code>test.txt</code> contains a single pound sign encoded in iso-8859-1.</p>\n\n<pre><code>% iconv -f iso-8859-1 test.txt\n\u00a3\n\n% hexdump -C test.txt\n00000000  a3 0a                                             |..|\n00000002\n</code></pre>\n\n<p>My Perl script:</p>\n\n<pre><code>#!/bin/perl\n\nuse warnings;\nuse strict;\n\nopen my $f, \"&lt;:encoding(iso-8859-1)\", $ARGV[0] or die qq{Could not open $ARGV[0]: $!};\n\nwhile (&lt;$f&gt;) {\n  print;\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>% ./script.pl test.txt | hexdump -C\n00000000  a3 0a                                             |..|\n00000002\n</code></pre>\n\n<p>So the script prints the exact byte sequence it reads, with no\nconversion performed.</p>\n"}, {"tags": ["linux", "perl", "locale"], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 8380968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe2d1bbc3e52bfba34fcb21d16d3ec9f?s=128&d=identicon&r=PG", "display_name": "Nuvanda", "link": "https://stackoverflow.com/users/8380968/nuvanda"}, "is_accepted": true, "score": 6, "last_activity_date": 1520110353, "creation_date": 1520110353, "answer_id": 49089100, "question_id": 49089099, "link": "https://stackoverflow.com/questions/49089099/perl-fails-to-set-locale-even-though-it-is-installed/49089100#49089100", "title": "Perl fails to set locale even though it is installed", "body": "<p>Found the answer while writing the question:</p>\n\n<p>The culprit is <code>LC_CTYPE=UTF-8</code>, which is apparently perfectly valid in macOS (and Perl will accept it there), but not on Linux. To avoid it, one can override <code>LC_CTYPE</code> as follows:</p>\n\n<pre><code>root@Box:~# update-locale LC_CTYPE=en_US.UTF-8\n</code></pre>\n\n<p>After logging out and back in again, Perl will no longer complain.</p>\n\n<pre><code>user@Box:~# perl -e 'print \"Hack the Planet!\\n\"'\nHack the Planet!\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 8380968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe2d1bbc3e52bfba34fcb21d16d3ec9f?s=128&d=identicon&r=PG", "display_name": "Nuvanda", "link": "https://stackoverflow.com/users/8380968/nuvanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3995, "favorite_count": 0, "accepted_answer_id": 49089100, "answer_count": 1, "score": 2, "last_activity_date": 1520110353, "creation_date": 1520110353, "question_id": 49089099, "link": "https://stackoverflow.com/questions/49089099/perl-fails-to-set-locale-even-though-it-is-installed", "title": "Perl fails to set locale even though it is installed", "body": "<p>I am having trouble running Perl on a Linux system (Ubuntu):</p>\n\n<pre><code>user@Box:~$ perl -e exit\nperl: warning: Setting locale failed.\nperl: warning: Please check that your locale settings:\n    LANGUAGE = \"en_US:en\",\n    LC_ALL = (unset),\n    LC_CTYPE = \"UTF-8\",\n    LANG = \"en_DK.UTF-8\"\nare supported and installed on your system.\nperl: warning: Falling back to a fallback locale (\"en_DK.UTF-8\").\n</code></pre>\n\n<p>Googling showed, that this is usually related to environment variables referring to a missing locale, however all locales seem to be there:</p>\n\n<pre><code>user@Box:~$ locale -a\nlocale: Cannot set LC_CTYPE to default locale: No such file or directory\nC\nen_DK.utf8\nen_GB.utf8\nen_US\nen_US.iso88591\nen_US.utf8\nPOSIX\n</code></pre>\n\n<p>I have tried installing all of en, but that does not seem to affect anything.</p>\n"}, {"tags": ["arrays", "json", "perl"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 2, "creation_date": 1520109054, "post_id": 49088472, "comment_id": 85183271, "body": "But that isn&#39;t valid JSON.  Can you fix the code that is producing broken JSON instead?"}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1520115742, "last_edit_date": 1520115742, "creation_date": 1520115105, "answer_id": 49089774, "question_id": 49088472, "link": "https://stackoverflow.com/questions/49088472/how-to-put-double-quotes-for-every-array-element-in-json-with-perl/49089774#49089774", "title": "How to put double quotes for every array element in json with perl", "body": "<p>Why don't you just produce valid JSON in the first place?</p>\n\n<p>E.g.</p>\n\n<pre><code>use JSON::MaybeXS;\n...\nmy $new_constraint = encode_json({\n    categoryIds   =&gt; ['0c5401a4-7d96-44f8-a229-7403453512e8'],\n    enforcedAt    =&gt; $availableAtVar,\n    enforcedUntil =&gt; $availableUntilVar,\n});\n</code></pre>\n\n<p>This way you don't have \"almost JSON\" that you need to fix up later.</p>\n"}], "owner": {"reputation": 1, "user_id": 9439447, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "N. Nageswara Rao", "link": "https://stackoverflow.com/users/9439447/n-nageswara-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1520115742, "creation_date": 1520106207, "last_edit_date": 1520114383, "question_id": 49088472, "link": "https://stackoverflow.com/questions/49088472/how-to-put-double-quotes-for-every-array-element-in-json-with-perl", "title": "How to put double quotes for every array element in json with perl", "body": "<p>Please help me how to add double quotes to each element for the following JSOn: </p>\n\n<pre><code>$new_constraint='{categoryIds:[0c5401a4-7d96-44f8-a229-7403453512e8],enforcedAt:'.$availableAtVar.',enforcedUntil:'.$availableUntilVar.'}';\n</code></pre>\n\n<p>Finally it should look like bellow:</p>\n\n<pre><code>{\"categoryIds\":[\"0c5401a4-7d96-44f8-a229-7403453512e8\"],\"enforcedAt\":\"2007-22-08.00:00:000\",\"enforcedUntil\":\"2007-22-08.00:00:000\"}\n</code></pre>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1520091687, "post_id": 49085869, "comment_id": 85177180, "body": "Inside sql package create a function <code>get_query { my ($id)=@_; %query=...}</code>. Call it <code>my $query_main=sql::get_query($id);</code>"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 4, "creation_date": 1520091934, "post_id": 49085869, "comment_id": 85177268, "body": "please read <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">bobby-tables.com</a> and use placeholders instead of inserting variables directly into the query."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1520092411, "post_id": 49085869, "comment_id": 85177421, "body": "@wolfrevokcats  Thank you for the quick reply, it helped, but I have many more (50+) that depend on various foreach/ifs etc. Would there be a more easy way without having to declare every variable in the module? Im thinking if there would be possible to export all variables from main.pl and import them into sql.pm"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1520092736, "post_id": 49085869, "comment_id": 85177537, "body": "@rooger global variables are almost always a bad idea. you&#39;ll loose control over it. I had to fight a lot with existing programs using global variables like that in several jobs I had. if you have many variables, you should use a hash and pass that to the function(s), at least"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1520093226, "post_id": 49085869, "comment_id": 85177723, "body": "@tinita Thank you for the quick reply, if its possible can you provide me an simple example?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520113005, "post_id": 49085869, "comment_id": 85184481, "body": "Always use <code>use strict; use warnings qw( all );</code>!!!!"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1520098638, "post_id": 49086649, "comment_id": 85179688, "body": "Thank you, I will do it like this!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1520095635, "creation_date": 1520095635, "answer_id": 49086649, "question_id": 49085869, "link": "https://stackoverflow.com/questions/49085869/perl-variable-to-module/49086649#49086649", "title": "perl variable to module", "body": "<p>There is no lexical <code>$id</code> variable in the scope of your <code>sql</code> package, so it is evaluated as <code>undef</code> which is stringified to the empty string</p>\n\n<p>You will have seen warning messages when you tried to run your program. Please don't ignore them, especially when you're asking for help: they are very important</p>\n\n<p>Please name your modules sensibly. A name like <code>sql</code> denotes a <em>pragma</em>, and affects all of the following code. A module will use <code>Capital::Letters</code> and should be very different from anything in CPAN</p>\n\n<p>I think you should restrict your library to subroutines only, which may include constants, and you should avoid interpolating values into an SQL query string</p>\n\n<p>For instance</p>\n\n<pre><code>package My::Sql;\n\nuse Exporter 'import';\n\nour @EXPORT = qw/\n    QUERY_ONE\n/;\n\nuse constant {\n    QUERY_ONE =&gt; \"SELECT isnull(BusinessEntityID, '') as BusinessEntityID,\n       isnull(Title, '') as Title,\n       isnull(FirstName, '') as FirstName,\n       isnull(LastName, '') as LastName,\n       isnull(Suffix, '') as Suffix,\n       isnull(JobTitle, '') as JobTitle\n\nFROM HumanResources.vEmployee\nwhere BusinessEntityID = ?\norder by BusinessEntityID\"\n\n);\n\n1;\n</code></pre>\n\n<p>If you then</p>\n\n<pre><code>use My::Sql;\n\nmy $sth = $dbh-&gt;prepare(QUERY_ONE);\n$sth-&gt;execute(42);\n</code></pre>\n\n<p>then your code should at least function, but the design is still very lacking</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1520098674, "post_id": 49086810, "comment_id": 85179711, "body": "Thank you for the help! I will follow you&#39;re advice and use Borodin&#39;s answer because I have to run the query many times."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 1, "last_activity_date": 1520096608, "creation_date": 1520096608, "answer_id": 49086810, "question_id": 49085869, "link": "https://stackoverflow.com/questions/49085869/perl-variable-to-module/49086810#49086810", "title": "perl variable to module", "body": "<p>Of course, it is possible in Perl to access global variables of a package from another package.<br>\nBut that means you would have to turn all your <code>local</code> and <code>my</code> variables into globals.<br>\nIt would be a mess.<br>\nI strongly advise against that.  </p>\n\n<p>One of the methods to simplify management of placeholder variables is using Template Toolkit, as shown below:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Template;\n\nmy $template = &lt;&lt;'CUT';\nSELECT isnull(BusinessEntityID, '') as BusinessEntityID,\n       isnull(Title, '') as Title,\n       isnull(FirstName, '') as FirstName,\n       isnull(LastName, '') as LastName,\n       isnull(Suffix, '') as Suffix,\n       isnull(JobTitle, '') as JobTitle\n\nFROM HumanResources.vEmployee\nwhere BusinessEntityID = [% id %]\norder by BusinessEntityID\nCUT\n;\n\nmy $id=100;\nmy ($param1,$paramN);\nmy $vars = {\n    'id'=&gt;$id,\n    'param1'=&gt;$param1,\n     #...\n    'paramN'=&gt;$paramN,\n};\n\nmy $tp = Template-&gt;new();\nmy $out;\n$tp-&gt;process(\\$template, $vars, \\$out)\n    || die $template-&gt;error();\nprint($out);\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>SELECT isnull(BusinessEntityID, '') as BusinessEntityID,\n       isnull(Title, '') as Title,\n       isnull(FirstName, '') as FirstName,\n       isnull(LastName, '') as LastName,\n       isnull(Suffix, '') as Suffix,\n       isnull(JobTitle, '') as JobTitle\n\nFROM HumanResources.vEmployee\nwhere BusinessEntityID = 100\norder by BusinessEntityID\n</code></pre>\n\n<p>But if you are going run the same query many times with different parameters you should use parameter binding as shown in Borodin's answer, to avoid performance penalties.</p>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 49086649, "answer_count": 2, "score": 0, "last_activity_date": 1520096608, "creation_date": 1520091309, "question_id": 49085869, "link": "https://stackoverflow.com/questions/49085869/perl-variable-to-module", "title": "perl variable to module", "body": "<p>I'm trying to execute a query that is stored in a module, but the query has some variables that are read from the main file and is not working. </p>\n\n<p>The variable from the main file is not accessible (its blank) inside the module.</p>\n\n<p>Here is the code:</p>\n\n<p><strong>sql.pm</strong></p>\n\n<pre><code>package sql;\n\nuse parent 'Exporter'; \n\nour @EXPORT = qw(%query);\n\nour %query = (\n    one =&gt; \"SELECT isnull(BusinessEntityID, '') as BusinessEntityID,\n       isnull(Title, '') as Title,\n       isnull(FirstName, '') as FirstName,\n       isnull(LastName, '') as LastName,\n       isnull(Suffix, '') as Suffix,\n       isnull(JobTitle, '') as JobTitle\n\nFROM HumanResources.vEmployee\nwhere BusinessEntityID = \".$id.\"\norder by BusinessEntityID\"\n\n);\n\n1;\n</code></pre>\n\n<p><strong>main.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse sql;\n\nmy $id = 273;\nmy $query_main = \"$query{one}\";\n\nprint $query_main;\n</code></pre>\n\n<p>This prints the query with where BusinessEntityID =  instead of where BusinessEntityID = 273</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "for-loop"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1520074790, "post_id": 49083387, "comment_id": 85171938, "body": "Could you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1520076609, "post_id": 49083387, "comment_id": 85172423, "body": "Your <code>for</code> loop goes from 0 to 5, which is 6 iterations. Maybe you mean <code>for( $i = 0; $i &lt; 5; $i++ )</code>"}, {"owner": {"reputation": 59, "user_id": 4281327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WZpQM.jpg?s=128&g=1", "display_name": "ClubCola", "link": "https://stackoverflow.com/users/4281327/clubcola"}, "edited": false, "score": 0, "creation_date": 1520077008, "post_id": 49083387, "comment_id": 85172534, "body": "<code>for( $i = 0; $i &lt; 5; $i++ )</code>  is for 4 elements. I have 5. The  <code>$i&lt;5</code>  means 1 to 4"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1520079498, "post_id": 49083387, "comment_id": 85173258, "body": "@Club: <code>for (  $i = 0; $i &lt; 5; $i++ )</code> is <code>0 .. 4</code> which is five elements. If you really mean <code>1 .. 4</code> then write <code>for my $i ( 1 .. 4 )</code> but remember that array indices are zero-based."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1520079980, "post_id": 49083387, "comment_id": 85173400, "body": "A better way to write your corrected <code>for</code> loop is: <code>for my $i (1 .. 5)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4281327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WZpQM.jpg?s=128&g=1", "display_name": "ClubCola", "link": "https://stackoverflow.com/users/4281327/clubcola"}, "edited": false, "score": 0, "creation_date": 1520080158, "post_id": 49084019, "comment_id": 85173452, "body": "<code>if (!$zeit_[1]) </code>is the validation for &quot;the first input&quot; must be filled. If this is correct then check the value with <code>if ($zeit_[$i] =~ &#47;\\D&#47;) </code>. I&#180;ve perl self-educated - so on I have to learn a lot. Thanks"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 59, "user_id": 4281327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WZpQM.jpg?s=128&g=1", "display_name": "ClubCola", "link": "https://stackoverflow.com/users/4281327/clubcola"}, "edited": false, "score": 0, "creation_date": 1520080251, "post_id": 49084019, "comment_id": 85173481, "body": "@ClubCola: You probably don&#39;t want to test <code>$zeit_[1]</code> each time round the loop then."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1520081377, "last_edit_date": 1520081377, "creation_date": 1520079485, "answer_id": 49084019, "question_id": 49083387, "link": "https://stackoverflow.com/questions/49083387/perl-problems-to-validate-a-param-in-a-for-loop/49084019#49084019", "title": "Perl - problems to validate a param in a for loop", "body": "<p>My guess is that this is a simple typo. But you don't show us the input data you're expecting so it's impossible to do anything other than guess.</p>\n\n<p>(I'm also guessing that this is a CGI program written using CGI.pm - it would be better if you could point that out in your question.)</p>\n\n<p>Inside your validation, you have:</p>\n\n<pre><code>if (!$zeit_[1]) \n</code></pre>\n\n<p>But on other validation lines, you have:</p>\n\n<pre><code>if ($zeit_[$i] =~ /\\D/) \n</code></pre>\n\n<p>It doesn't seem to make sense to check <code>$zeit_[1]</code> in one case and <code>$zeit_[$i]</code> in the others. In any case, <code>$zeit_[1]</code> is not going to be set on the first iteration of the loop (where <code>$i</code> is 0 and therefore <code>$zeit_[1]</code> won't have been given a value yet).</p>\n\n<p>A couple of other Perl tips:</p>\n\n<ul>\n<li><code>for ($i=0;$i&lt;6;$i++)</code> is far easier to understand if you write it as <code>for my $i (0 .. 5)</code>.</li>\n<li>There is no need to use <code>&amp;</code> on subroutine calls. <code>error(...)</code> works just as well as <code>&amp;error(...)</code> (and has the bonus of not confusing non-Perl programmers).</li>\n<li>If you're using CGI.pm (and the calls to <code>$q-&gt;param(...)</code> imply that you are) then you can use <code>$q-&gt;header(...)</code> to create the CGI header.</li>\n</ul>\n\n<p><strong>Update:</strong> Taking into account everything we've learned, I'd write it more like this:</p>\n\n<pre><code>for my $i (0 .. 5) {\n\n  $zeit_[$i] = $q-&gt;param(\"zeit_[$i]\");\n  $tatigkeit_[$i] = $q-&gt;param(\"tatigkeit_[$i]\");\n\n  ##validation\n\n  if ($i == 1 and !$zeit_[$i]) {\n    error('Bitte geben Sie mindestens eine Aktivit\u00e4t an!');\n  }\n\n  if ($zeit_[$i] =~ /\\D/) {\n    # Interpolate variables in double-quoted strings\n    error(\"Die Zeitangabe zur Aktivit\u00e4t '$tatigkeit_[$i]' enth\u00e4lt ein unzul\u00e4ssiges Zeichen! Bitte geben Sie nur ganze Zahlen an!\");\n  }\n\n  if ($tatigkeit_[$i] =~ /[^A-Za-z0-9\u00f6\u00e4\u00fc\u00d6\u00c4\u00dc\u00df-\\s]/) {\n    error(\"Die T\u00e4tigkeit '$tatigkeit_[$i]' enth\u00e4lt ein unzul\u00e4ssiges Zeichen!\");\n  }\n\n  #prepare the output\n  if ($zeit_[$i]) {\n    $ausgabe.= \"$zeit_[$i] mit $tatigkeit_[$i] ID: $i&lt;br&gt;\";\n  }\n}\n\nprint $q-&gt;header;\nprint $ausgabe;\nexit();\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4281327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WZpQM.jpg?s=128&g=1", "display_name": "ClubCola", "link": "https://stackoverflow.com/users/4281327/clubcola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 49084019, "answer_count": 1, "score": -1, "last_activity_date": 1520081377, "creation_date": 1520074578, "last_edit_date": 1592644375, "question_id": 49083387, "link": "https://stackoverflow.com/questions/49083387/perl-problems-to-validate-a-param-in-a-for-loop", "title": "Perl - problems to validate a param in a for loop", "body": "<p>The script catch 5x2 input fields.</p>\n<pre><code>for ($i=0;$i&lt;6;$i++) {\n\n   $zeit_[$i] = $q-&gt;param(&quot;zeit_[$i]&quot;);\n   $tatigkeit_[$i] = $q-&gt;param(&quot;tatigkeit_[$i]&quot;);\n\n   ##validation\n\n   if (!$zeit_[1]) \n      {&amp;error('Bitte geben Sie mindestens eine Aktivit\u00e4t an!');}\n   if ($zeit_[$i] =~ /\\D/) \n      {&amp;error('Die Zeitangabe zur Aktivit\u00e4t &quot;'. $tatigkeit_[$i] . '&quot;enth\u00e4lt ein unzul\u00e4ssiges Zeichen! Bitte geben Sie nur ganze Zahlen an!');}\n   if ($tatigkeit_[$i] =~ /[^A-Za-z0-9\u00f6\u00e4\u00fc\u00d6\u00c4\u00dc\u00df-\\s]/) \n      {&amp;error('Die T\u00e4tigkeit &quot;' . $tatigkeit_[$i] . '&quot; enth\u00e4lt ein unzul\u00e4ssiges Zeichen!');}\n\n   #prepare the output\n   if ($zeit_[$i]) {$ausgabe.= $zeit_[$i] . &quot; mit &quot; . $tatigkeit_[$i] . &quot; ID: $i&lt;br&gt;&quot;;}\n\n}\nprint &quot;Content-type: text/html\\n\\n&quot;;\nprint $ausgabe; exit();\n</code></pre>\n<p>My problem is this validation (the first input must be filled):</p>\n<pre><code>if (!$zeit_[1]) \n  {&amp;error('Bitte geben Sie mindestens eine Aktivit\u00e4t an!');}\n</code></pre>\n<p>The validation subroutine <code>error</code> occurs in all cases. Empty input and also with one or all five inputs filled.</p>\n<p>When I negatively the validation into</p>\n<pre><code>if ($zeit_[1]) \n  {&amp;error('Bitte geben Sie mindestens eine Aktivit\u00e4t an!');}\n</code></pre>\n<p>the <code>error</code> occurs also. I think the problem ist the var <code>$zeit_[1]</code></p>\n<p>When I disable the validation with <code>#</code> - the script works fine. The output show all 10 elements.</p>\n<p>May somebody a tip for me?</p>\n<h1>This update fixed the problem</h1>\n<p>Changed <code>for ($i=0;$i&lt;6;$i++)</code> into <code>for ($i=1;$i&lt;6;$i++)</code>. Right code:</p>\n<pre><code>for ($i=1;$i&lt;6;$i++) {\n\n   $zeit_[$i] = $q-&gt;param(&quot;zeit_[$i]&quot;);\n   $tatigkeit_[$i] = $q-&gt;param(&quot;tatigkeit_[$i]&quot;);\n\n   ##validation\n\n   if (!$zeit_[1]) \n     {&amp;error('Bitte geben Sie mindestens eine Aktivit\u00e4t an!');}\n   if ($zeit_[$i] =~ /\\D/) \n     {&amp;error('Die Zeitangabe zur Aktivit\u00e4t &quot;'. $tatigkeit_[$i] . '&quot;enth\u00e4lt ein unzul\u00e4ssiges Zeichen! Bitte geben Sie nur ganze Zahlen an!');}\n   if ($tatigkeit_[$i] =~ /[^A-Za-z0-9\u00f6\u00e4\u00fc\u00d6\u00c4\u00dc\u00df-\\s]/) \n     {&amp;error('Die T\u00e4tigkeit &quot;' . $tatigkeit_[$i] . '&quot; enth\u00e4lt ein unzul\u00e4ssiges Zeichen!');}\n\n   #prepare the output\n   if ($zeit_[$i]) {$ausgabe.= $zeit_[$i] . &quot; mit &quot; . $tatigkeit_[$i] . &quot; ID: $i&lt;br&gt;&quot;;}\n\n}\nprint &quot;Content-type: text/html\\n\\n&quot;;\nprint $ausgabe; exit();\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 2, "creation_date": 1520070991, "post_id": 49082816, "comment_id": 85170987, "body": "Your code does move each output to another array. Did you mean that you want to store <i>all</i> the outputs in a single array?"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1520071450, "post_id": 49082816, "comment_id": 85171122, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34891472/adding-elements-to-an-array-in-perl\">Adding elements to an array in Perl</a>"}, {"owner": {"reputation": 3, "user_id": 9437648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9437648", "link": "https://stackoverflow.com/users/9437648/user9437648"}, "edited": false, "score": 0, "creation_date": 1520071513, "post_id": 49082816, "comment_id": 85171141, "body": "yes i want to move all the output in single array , when i run the above code it over writes the previously stored value . My objective is store all values in array and print as  A - 2 B -3"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 4, "creation_date": 1520071748, "post_id": 49082816, "comment_id": 85171197, "body": "@user9437648 You would probably benefit from reading a Perl tutorial; this is fairly basic stuff."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1520071973, "post_id": 49082816, "comment_id": 85171244, "body": "So ... have you tried anything? What kind of answer are you looking for? Just some piece of code you can copy/paste in your program?"}, {"owner": {"reputation": 3, "user_id": 9437648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9437648", "link": "https://stackoverflow.com/users/9437648/user9437648"}, "edited": false, "score": 0, "creation_date": 1520073304, "post_id": 49082816, "comment_id": 85171589, "body": "open my $handle, &#39;&lt;&#39;, $path_to_file; foreach  $line (&lt;$handle&gt;) {   my @output  = <code>cmd</code>;  print $output[1];   it does not print anything , when i print $output[0] it prints 2 values as below 2 3  when i ask to print $output[1]  i need 3"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520079134, "post_id": 49083881, "comment_id": 85173158, "body": "Perhaps <code>push @output, scalar qx&#47;cmd&#47;</code> or <code>push @output, [ qx&#47;cmd&#47; ]</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520079786, "post_id": 49083881, "comment_id": 85173351, "body": "@Borodin: Thanks for the suggestions. Updated my answer."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1520079768, "last_edit_date": 1520079768, "creation_date": 1520078549, "answer_id": 49083881, "question_id": 49082816, "link": "https://stackoverflow.com/questions/49082816/unable-store-all-the-outputs-to-array-in-perl/49083881#49083881", "title": "Unable store all the outputs to array in Perl", "body": "<pre><code>open my $handle, '&lt;', $path_to_file;\nforeach  $line (&lt;$handle&gt;) {\n  my @output  = `cmd`;\n} # I added this closing brace.\n</code></pre>\n\n<p>You have a couple of problems here.</p>\n\n<p>Firstly, each time around the loop, you are declaring a new, empty, instance of <code>@output</code>. So declare the variable outside of the loop.</p>\n\n<pre><code>my @output;\nopen my $handle, '&lt;', $path_to_file;\nforeach  $line (&lt;$handle&gt;) {\n  @output  = `cmd`;\n}\n</code></pre>\n\n<p>There's still a problem here though. You're overwriting the whole of <code>@output</code> in each iteration of your loop. You want to add your data to the end of <code>@output</code>. So instead of assigning a value to the array, you should <code>push()</code> a new element to the end of the array.</p>\n\n<pre><code>my @output;\nopen my $handle, '&lt;', $path_to_file;\nforeach  $line (&lt;$handle&gt;) {\n  push @output, `cmd`;\n} \n</code></pre>\n\n<p><strong>Update:</strong> As Borodin points out in a comment, <code>push()</code> imposes list context on the backticks, so they'll return a list where each element is a single line from the output of your command. You might want to tame that behaviour by either ensuring that each execution of the command returns a single string (perhaps with embedded newlines):</p>\n\n<pre><code>push @output, scalar `cmd`;\n</code></pre>\n\n<p>Or create a two-dimensional array where each element of <code>@array</code> is a reference to another array containing all of the lines of output from a single execution of the command:</p>\n\n<pre><code>push @output, [ `cmd` ];\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9437648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9437648", "link": "https://stackoverflow.com/users/9437648/user9437648"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 49083881, "answer_count": 1, "score": 0, "last_activity_date": 1520079768, "creation_date": 1520070295, "last_edit_date": 1520074663, "question_id": 49082816, "link": "https://stackoverflow.com/questions/49082816/unable-store-all-the-outputs-to-array-in-perl", "title": "Unable store all the outputs to array in Perl", "body": "<p>I am reading the lines from a file and input it to commands.</p>\n\n<pre><code>open my $handle, '&lt;', $path_to_file;\nforeach  $line (&lt;$handle&gt;) {\n  my @output  = `cmd`;\n</code></pre>\n\n<p>I want to store each output to array. But unable to store it , it overwrites the previous value</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520068946, "post_id": 49082560, "comment_id": 85170481, "body": "I can&#39;t reproduce this with the sample data you showed. Have you inspected your <i>actual</i> data for <code>undef</code> values, nonexistent <code>foobar</code> keys, etc.?"}], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520069852, "post_id": 49082722, "comment_id": 85170696, "body": "String comparisons may actually be preferable in some cases, e.g. for some kinds of <a href=\"http://perldoc.perl.org/perlvar.html#%24%5D\" rel=\"nofollow noreferrer\">version numbers</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520078945, "post_id": 49082722, "comment_id": 85173096, "body": "@haukex: That&#39;s why I wrote <i>probably</i>. It is very rare that numeric values should be treated as non-decimal, and the idea is distracting and confusing for most people."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520069514, "creation_date": 1520069514, "answer_id": 49082722, "question_id": 49082560, "link": "https://stackoverflow.com/questions/49082560/sorting-a-hash-of-hash-refs/49082722#49082722", "title": "Sorting a hash of hash refs", "body": "<p>Your <code>sort</code> code works fine with the data you have shown, except that <code>cmp</code> should probably be <code>&lt;=&gt;</code></p>\n\n<p>In future, please dump a <em>reference</em> to aggregate variables:</p>\n\n<pre><code>print Dumper \\%test\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 801, "user_id": 802058, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b43ccddcc2ea9a956b42bd3ae8618929?s=128&d=identicon&r=PG", "display_name": "Toru", "link": "https://stackoverflow.com/users/802058/toru"}, "is_accepted": false, "score": 1, "last_activity_date": 1520090051, "creation_date": 1520090051, "answer_id": 49085631, "question_id": 49082560, "link": "https://stackoverflow.com/questions/49082560/sorting-a-hash-of-hash-refs/49085631#49085631", "title": "Sorting a hash of hash refs", "body": "<p>I've found the mistake. I had defined two variables <code>$a</code> and <code>$b</code> in top of the script and assigned the value \"0\" to them. In the case above this leads Perl's <code>sort</code> to this error message. In case of using</p>\n\n<pre><code>my @sorted = sort { $a cmp $b } keys %test;\n</code></pre>\n\n<p>the error message becomes more clearer:</p>\n\n<pre><code>\"my $a\" used in sort comparison at ...\n\"my $b\" used in sort comparison at ...\n</code></pre>\n\n<p>This error message was the hint to the mistake.</p>\n"}], "owner": {"reputation": 801, "user_id": 802058, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b43ccddcc2ea9a956b42bd3ae8618929?s=128&d=identicon&r=PG", "display_name": "Toru", "link": "https://stackoverflow.com/users/802058/toru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1520090051, "creation_date": 1520068352, "last_edit_date": 1520069435, "question_id": 49082560, "link": "https://stackoverflow.com/questions/49082560/sorting-a-hash-of-hash-refs", "title": "Sorting a hash of hash refs", "body": "<p>I have a hash (<code>test</code>) of hash refs:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy %test = (\n    110 =&gt; { 'foobar' =&gt; '3.09' },\n    119 =&gt; { 'foobar' =&gt; '2.08' },\n    118 =&gt; { 'foobar' =&gt; '2.18' },\n);\n\nfor my $key ( keys %test ) {\n    print( \"$key, $test{$key}-&gt;{'foobar'}\\n\" );\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>110, 3.09\n119, 2.08\n118, 2.18\n</code></pre>\n\n<p>But sorting is a problem:</p>\n\n<pre><code>my @sorted = sort { $test{$a}-&gt;{'foobar'} cmp $test{$b}-&gt;{'foobar'} } keys %test;\n\nUse of uninitialized value in string comparison (cmp) at ...\n</code></pre>\n\n<p>What's wrong?</p>\n\n<pre><code>$ perl -version\nThis is perl 5, version 24, subversion 1 (v5.24.1) built for i386-openbsd\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1520032200, "post_id": 49078594, "comment_id": 85163463, "body": "<code>$Hash{$_}=keys %Hash for (@line);</code>"}, {"owner": {"reputation": 727, "user_id": 2059832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8oSY3.gif?s=128&g=1", "display_name": "drmrgd", "link": "https://stackoverflow.com/users/2059832/drmrgd"}, "edited": false, "score": 0, "creation_date": 1520032307, "post_id": 49078594, "comment_id": 85163493, "body": "What about using the index of the array as the value?  Something like this: <code>perl -MData::Dump -e &#39;@line = qw(apple banana cherry tree); $hash{$line[$_]} = $_ for 0..$#line; END {dd \\%hash}&#39; { apple =&gt; 0, banana =&gt; 1, cherry =&gt; 2, tree =&gt; 3 }</code>.  Otherwise can maybe set up a counter variable, but not sure if you can do it without a loop."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1520037526, "creation_date": 1520037526, "answer_id": 49079436, "question_id": 49078594, "link": "https://stackoverflow.com/questions/49078594/perl-array-to-hash/49079436#49079436", "title": "Perl Array to Hash", "body": "<p>You can iterate over the array indices and use those to populate the hash values.  Perl arrays start at index <code>0</code>.  The last index of array <code>@foo</code> is <code>$#foo</code>.  So you can use the range operator <code>..</code> to get all of the indices as <code>0..$#foo</code>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\n$Data::Dumper::Sortkeys++;\n\nmy @letters = 'a'..'g';\nmy %hash = map { $letters[ $_ ] =&gt; $_ } 0..$#letters;\n\nprint Dumper(\\%hash);\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; 0,\n          'b' =&gt; 1,\n          'c' =&gt; 2,\n          'd' =&gt; 3,\n          'e' =&gt; 4,\n          'f' =&gt; 5,\n          'g' =&gt; 6\n        };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "is_accepted": false, "score": 2, "last_activity_date": 1520043167, "last_edit_date": 1520043167, "creation_date": 1520040660, "answer_id": 49079733, "question_id": 49078594, "link": "https://stackoverflow.com/questions/49078594/perl-array-to-hash/49079733#49079733", "title": "Perl Array to Hash", "body": "<p>Based on the other question, your input is <code>@array</code> and your output is <code>%hash</code> where the values of the hash are offset in the array of the hash's keys in the array.  If so, I think you want this:</p>\n\n<pre><code>$hash{$array[$_]} = $_ for (0 .. $#array);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1520077551, "creation_date": 1520077551, "answer_id": 49083771, "question_id": 49078594, "link": "https://stackoverflow.com/questions/49078594/perl-array-to-hash/49083771#49083771", "title": "Perl Array to Hash", "body": "<p>I think that you want to turn all elements of array <code>@line</code> into hash keys of hash <code>%hash</code> with hash values going from 0 on. In that case:</p>\n\n<pre><code>use Data::Dumper;\n\nmy @line = qw( Val1 Val2 Val3 );\nmy %hash;\n\nmy $n = 0;\n$hash{$_} = $n++ for(@line);\n\nprint Dumper(\\%hash), \"\\n\";\n</code></pre>\n\n<p>Note that <code>Dumper</code> will dump all the hash keys and their values, but not in the order they were created.</p>\n"}], "owner": {"reputation": 345, "user_id": 3880362, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/42e3eaa9029285b2071ee9c314125164?s=128&d=identicon&r=PG&f=1", "display_name": "Sharki", "link": "https://stackoverflow.com/users/3880362/sharki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1520077551, "creation_date": 1520031140, "question_id": 49078594, "link": "https://stackoverflow.com/questions/49078594/perl-array-to-hash", "title": "Perl Array to Hash", "body": "<p>I was taking inspiration from this post <a href=\"https://stackoverflow.com/a/16157433/3880362\">https://stackoverflow.com/a/16157433/3880362</a>. The only thing that it did not do was increment the value of each key as it was populated. I.e.</p>\n\n<p>I have:</p>\n\n<pre><code>$Hash =&gt; {\n      'Val1' =&gt; 1,\n      'Val2' =&gt; 1,\n      'Val3' =&gt; 1\n };\n</code></pre>\n\n<p>When I want </p>\n\n<pre><code>$Hash =&gt; {\n      'Val1' =&gt; 0,\n      'Val2' =&gt; 1,\n      'Val3' =&gt; 2\n };\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>$Hash{$_}++ for (@line);\n</code></pre>\n"}, {"tags": ["perl", "excel-writer-xlsx"], "comments": [{"owner": {"reputation": 13, "user_id": 2410812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1212c9e6e3400aca97ad94cb37ef2f?s=128&d=identicon&r=PG", "display_name": "GMC", "link": "https://stackoverflow.com/users/2410812/gmc"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1520024907, "post_id": 49076165, "comment_id": 85160686, "body": "In the code:  The collapse symbol is placed in row 1.and the outline bar is set to span rows 2 and 3. .In the resulting spreadsheet: The  collapse symbol is in row 2 (one row below where I put it, row 1).  the outline bar spans rows 3 and 4. (also 1 row below the span of 2 and 3). The outline bar is spanning a row that was never even mentioned in the code (row 4)"}, {"owner": {"reputation": 13, "user_id": 2410812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1212c9e6e3400aca97ad94cb37ef2f?s=128&d=identicon&r=PG", "display_name": "GMC", "link": "https://stackoverflow.com/users/2410812/gmc"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1520025051, "post_id": 49076165, "comment_id": 85160770, "body": "My question is: What am I missing to make the outline span the rows that I want it to span?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2410812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1212c9e6e3400aca97ad94cb37ef2f?s=128&d=identicon&r=PG", "display_name": "GMC", "link": "https://stackoverflow.com/users/2410812/gmc"}, "edited": false, "score": 0, "creation_date": 1520265137, "post_id": 49082236, "comment_id": 85233692, "body": "That was the issue. Thanks!!"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 1, "last_activity_date": 1520067623, "last_edit_date": 1520067623, "creation_date": 1520065766, "answer_id": 49082236, "question_id": 49076165, "link": "https://stackoverflow.com/questions/49076165/perl-excelwriterxlsx-generates-outline-that-is-offset-by-1-row/49082236#49082236", "title": "perl Excel::Writer::XLSX generates outline that is offset by 1 row", "body": "<p>If you look at the <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX\" rel=\"nofollow noreferrer\"><code>Excel::Writer::XLSX</code></a> documentation for the <a href=\"https://metacpan.org/pod/Excel::Writer::XLSX#set_row(-$row,-$height,-$format,-$hidden,-$level,-$collapsed-)\" rel=\"nofollow noreferrer\"><code>set_row</code></a> method, you will see:</p>\n\n<pre><code>$worksheet-&gt;set_row( 0, 20 );    # Row 1 height set to 20\n</code></pre>\n\n<p>Which means that the index is 0-based, but you are giving it <code>$idx+1</code>. Change that line into the following and it should work as you expect (it worked for me when I tested it on my end):</p>\n\n<pre><code>$worksheet1-&gt;set_row( $idx, undef, undef, $hidden[$idx], $level[$idx], $collapsed[$idx] );\n#                      ^^^\n</code></pre>\n\n<p>(There does appear to be a mistake a little later on in the documentation, where one of the examples shows a 1-based index. <a href=\"https://github.com/jmcnamara/excel-writer-xlsx/pull/204\" rel=\"nofollow noreferrer\">Issue reported.</a>)</p>\n"}], "owner": {"reputation": 13, "user_id": 2410812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1212c9e6e3400aca97ad94cb37ef2f?s=128&d=identicon&r=PG", "display_name": "GMC", "link": "https://stackoverflow.com/users/2410812/gmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 49082236, "answer_count": 1, "score": 0, "last_activity_date": 1598211352, "creation_date": 1520019362, "last_edit_date": 1598211352, "question_id": 49076165, "link": "https://stackoverflow.com/questions/49076165/perl-excelwriterxlsx-generates-outline-that-is-offset-by-1-row", "title": "perl Excel::Writer::XLSX generates outline that is offset by 1 row", "body": "<p>I am trying to build a spreadsheet with outlined rows using perl module Excel::Writer::XLSX. I need the row outline symbol to appear above the outline level bar. When I run the script below, the outline symbols and level bars are correctly generated, but shifted down one row.</p>\n<pre><code>use strict;\nuse Excel::Writer::XLSX;\n\nmy $visible = 1;\nmy $symbols_below = 0;\nmy $symbols_right = 0;\nmy $auto_style = 0;\n\nmy $output_rpt = 'report.xlsx';\nmy $color1 = &quot;#CBBEA0&quot;;\nmy $color2 = &quot;#DDD7C5&quot;;\n\nmy $workbook   = Excel::Writer::XLSX-&gt;new( $output_rpt );\nmy $worksheet1 = $workbook-&gt;add_worksheet( 'report' );\n$worksheet1-&gt;outline_settings($visible, $symbols_below, $symbols_right, $auto_style);\n\nmy $format1  = $workbook-&gt;add_format( bold =&gt; 1, bg_color =&gt; $color1, align =&gt; 'center' );\nmy $format2  = $workbook-&gt;add_format( bold =&gt; 1, bg_color =&gt; $color1, align =&gt; 'left'  );\nmy $format3  = $workbook-&gt;add_format( bold =&gt; 1, bg_color =&gt; $color2, align =&gt;'left'  );\nmy $format4  = $workbook-&gt;add_format( align =&gt; 'center'  );\n\nmy @last = qw( Smith Jones Panglossian );\nmy @first = qw( Algonquin Mephibosheth Noah );\nmy @age = (24, 42, 962);\nmy @hidden    = (0, 0, 0);\nmy @level     = (0, 1, 1);\nmy @collapsed = (1, 0, 0);\n\nfor my $idx (0..2) {\n    my $row = $idx+1;\n    $worksheet1-&gt;set_row( $row, undef, undef, $hidden[$idx], $level[$idx], \n$collapsed[$idx] );\n$worksheet1-&gt;write( 'A' . $row, $first[$idx], $format2);\n$worksheet1-&gt;write( 'B' . $row, $last[$idx], $format3);\n$worksheet1-&gt;write( 'C' . $row, $age[$idx], $format4);\n}\n$workbook-&gt;close();\n</code></pre>\n<p>The output spreadsheet is in the image below. Note that the outline bar is offset by 1 row</p>\n<p><img src=\"https://i.stack.imgur.com/EEhP2.png\" alt=\"output spreadsheet\" /></p>\n"}, {"tags": ["perl", "mojolicious", "strawberry-perl"], "comments": [{"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 2, "creation_date": 1519993227, "post_id": 49068844, "comment_id": 85142861, "body": "<code>user</code> is supposed to be a method of a class.    It should be called  like  <code>$class_instance-&gt;user(...)</code>"}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 2, "creation_date": 1519993244, "post_id": 49068844, "comment_id": 85142870, "body": "Your error message tells you, that the parameter of the sub, <code>$self</code>, is not the object you expect it to be, but a string containing a mail address."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1519993399, "post_id": 49068844, "comment_id": 85142976, "body": "@nlu           How can I instantiate the object. All the examples shows <code>my $self = shift;</code>"}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1519994774, "post_id": 49068844, "comment_id": 85143749, "body": "@user1690835: This depends on how you use Mojolicious. I believe with <code>Mojolicious::Lite</code> the object containing <code>app</code> is being created for you. You should show us more context."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1519994980, "post_id": 49068844, "comment_id": 85143869, "body": "@nlu           I am new to Perl. So didn&#39;t understand what you meant by context."}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 1, "creation_date": 1519995401, "post_id": 49068844, "comment_id": 85144106, "body": "@user1690835: This has nothing to do with Perl. I just meant, where <code>user</code> is called, when and how the main mojolicious object is instantiated etc. If you do not understand, what I mean by this, you should revoke this question and first try to understand how Perl works, how OO in Perl works and then how your framework (mojolicious) works."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1519995981, "post_id": 49068844, "comment_id": 85144429, "body": "@nlu           I am calling <code>user</code> from another subroutine. In <code>user</code> I am checking the username and password are correct and return true or false."}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1519996551, "post_id": 49068844, "comment_id": 85144784, "body": "@user1690835: What about the object you pass to user?"}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1519997100, "post_id": 49068844, "comment_id": 85145100, "body": "@nlu           It is <code>email</code> and <code>password</code> which I get from login form. <code>my $username = $self-&gt;param(&#39;username&#39;);    my $password = $self-&gt;param(&#39;password&#39;);user($username, $password);</code>"}, {"owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1519998520, "post_id": 49068844, "comment_id": 85145976, "body": "So <code>user</code> should be a method of <code>$self</code> - then you should call it `$self-&gt;user(...). See first comment of user wolfrevokcats."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "edited": false, "score": 0, "creation_date": 1520228569, "post_id": 49068844, "comment_id": 85213342, "body": "@nlu           I am returning a hash from the method <code>user</code>, and I am assigning it as <code>my %userDetails = user($username, $password)</code> so when I call the method using <code>$self-&gt;user(...)</code> the program is not working as expected."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1520229465, "post_id": 49068844, "comment_id": 85213616, "body": "Those two things are unrelated. You can assign the return value of a method call just like you can the one from a function call. Please show more of your code and be very specific. Not working is a completely useless description of an error. A device that is not turned on is not working, just like a device that is broken. I can&#39;t tell anything from that statement."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1520232040, "post_id": 49068844, "comment_id": 85214502, "body": "@simbabque     I have updated the question. Not working means login always fails."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1520232490, "post_id": 49068844, "comment_id": 85214692, "body": "In what file did you put the <code>user</code> method? You are not telling me enough. It&#39;s like asking me to diagnose why your car doesn&#39;t start without showing me the car."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1520234466, "post_id": 49068844, "comment_id": 85215487, "body": "@simbabque     Everything is in the same file."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1520234833, "post_id": 49068844, "comment_id": 85215645, "body": "Please edit again and remove code that you don&#39;t actually have in your program. Then include the full code of the <code>user</code> method and the full code of the method where you call it. Also include the top ten lines of your file. Do not alter anything in the code. Show me exactly what you have in your editor. Copy and paste it in here please."}, {"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1520317685, "post_id": 49068844, "comment_id": 85254090, "body": "@simbabque     I have updated the question."}], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "edited": false, "score": 0, "creation_date": 1520228992, "post_id": 49075689, "comment_id": 85213476, "body": "When I use <code>$self-&gt;user($username, $password);</code> program is not working correctly. See the comment I added to question. So instead I passed the <code>$self</code> variable as a parameter <code>user_exists($self,$username, $password);</code> and is working correctly."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1520017233, "creation_date": 1520017233, "answer_id": 49075689, "question_id": 49068844, "link": "https://stackoverflow.com/questions/49068844/cant-read-from-app-conf-file-in-perl/49075689#49075689", "title": "Can&#39;t read from app.conf file in Perl", "body": "<blockquote>\n<pre><code>my $username = $self-&gt;param('username'); \nmy $password = $self-&gt;param('password');\nuser($username, $password);\n</code></pre>\n</blockquote>\n\n<p>You are using your <code>user</code> sub as a <em>function</em>, and not as a <em>method</em>. Perl is a very flexible programming language that allows you to mix functional, procedural and object oriented programming styles in the same program. Sometimes that can get confusing.</p>\n\n<p>You can recognize OOP (<em>object oriented programming</em>) in Perl when a sub has <code>$self</code> as the first argument because there is a convention to always name the object itself like that. Other languages use <code>this</code> instead. Another giveaway is when there is a variable followed by an arrow <code>-&gt;</code> followed by an identifier.</p>\n\n<pre><code>$obj-&gt;method(@args);\n</code></pre>\n\n<p>You've already done that in your code when you got the parameters from <code>$self</code>. I suspect you are using this in a Mojolicious::Controller, and you've put your <code>sub user</code> in the same file.</p>\n\n<p>The error message you are seeing is because your first argument to the function is the email address in <code>$username</code>. You left out the <code>$self-&gt;</code> part, which tells Perl to call this as a method on <code>$self</code>. Under the hood, it will look into the identifier on the left (which is <code>$self</code>) to see what class that thing has. It will then look into the <em>namespaces</em> (called <em>packages</em> in Perl) of all the things in the inheritance tree of that class to find the identifier on the right (which is <code>user</code>). In our case, it will find a sub <code>user</code> right in this same package. It then calls that function <code>user</code> and passes the thing on the left (<code>$self</code>) as the first argument, and <code>$username</code> and <code>$password</code> as the second and third arguments.</p>\n\n<p>So what you need to do is:</p>\n\n<pre><code>$self-&gt;user($username, $password);\n</code></pre>\n\n<p>The code in your sub is correct (but does not actually use the two arguments).</p>\n"}], "owner": {"reputation": 960, "user_id": 1690835, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c614449df29422a914209c7d600e351?s=128&d=identicon&r=PG", "display_name": "Akhilesh", "link": "https://stackoverflow.com/users/1690835/akhilesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1520318592, "creation_date": 1519992506, "last_edit_date": 1520318592, "question_id": 49068844, "link": "https://stackoverflow.com/questions/49068844/cant-read-from-app-conf-file-in-perl", "title": "Can&#39;t read from app.conf file in Perl", "body": "<p>I have subroutine in perl that accepts parameters. Now I am trying to read from the config file using the below code.</p>\n\n<pre><code>sub user{\n    my $self = shift;\n    my $apiBaseUrl = $self-&gt;app-&gt;config-&gt;{\"apiBaseUrl\"};\n    my $apiToken = $self-&gt;app-&gt;config-&gt;{\"apiToken\"};\n}\n</code></pre>\n\n<p>But I am getting the error </p>\n\n<blockquote>\n  <p>Can't locate object method \"app\" via package \"test@example.com\" (perhaps you forgot to load \"test@example.com\"?)</p>\n</blockquote>\n\n<p>The parameters I am passing to the subroutine are <code>$username</code> and <code>$password</code></p>\n\n<p>This is how I am calling that subroutine, with an email and password  which I get from login form. </p>\n\n<pre><code>my $username = $self-&gt;param('username'); \nmy $password = $self-&gt;param('password');\nuser($username, $password);\n</code></pre>\n\n<p>Below is the full code in the file.</p>\n\n<pre><code>    use Mojo::Base 'Mojolicious::Controller';\n    use Mojo::UserAgent;\n\nsub is_logged_in {\n    my $self = shift;\n\n    return 1 if $self-&gt;session('logged_in');\n\n    $self-&gt;render(\n        inline =&gt; \"&lt;h2&gt;Forbidden&lt;/h2&gt;&lt;p&gt;You're not logged in. &lt;%= link_to 'Go to login page.' =&gt; 'login_form' %&gt;\",\n        status =&gt; 403\n    );\n}\n\n\nsub user {\n    my ($username, $password) = @_;\n    my $self = shift;\n    my %returnResult;\n    my $apiBaseUrl = $self-&gt;app-&gt;config-&gt;{'apiBaseUrl'};\n    my $apiToken = $self-&gt;app-&gt;config-&gt;{'apiToken'};\n    my $url = $apiBaseUrl.'/auth/login/check?email='.$username.'&amp;password='.$password.'';\n    my $header = {'api-token' =&gt; $apiToken};\n\n    my $ua = Mojo::UserAgent-&gt;new;\n    my $res = $ua-&gt;post( $url =&gt; $header )-&gt;result;\n    if($res-&gt;is_success)\n    {\n        my $content= $res -&gt; json;\n        my $decoded_email = $content-&gt;{'email'};\n\n        $returnResult{'fn'} = $content-&gt;{'fn'};\n        $returnResult{'ln'} = $content-&gt;{'ln'};\n        $returnResult{'roles'} = $content-&gt;{'roles'};\n        if($username eq $decoded_email)\n        {$returnResult{'logged_in'} = 1;}\n        else\n        {$returnResult{'logged_in'} = 0;}\n        return %returnResult;\n\n    }\n    else\n    {\n        return $res-&gt;status_line;\n    }\n}\n\n\nsub on_user_login {\n\n    my $self = shift;\n    my $username = $self-&gt;param('username');\n    my $password = $self-&gt;param('password');\n    my %userDetails = user($username, $password);\n\n        if ($userDetails{'logged_in'} == 1) {\n\n        $self-&gt;session(logged_in =&gt; 1);\n        $self-&gt;session(username =&gt; $username);\n        $self-&gt;session(userDetails =&gt; \\%userDetails);\n        $self-&gt;redirect_to('restricted');\n    } else {\n        $self-&gt;flash(message =&gt; 'Incorrect username/password!');\n        $self-&gt;redirect_to('/');\n    }\n}\n\n1;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl", "file-handling"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1519989307, "post_id": 49067103, "comment_id": 85140926, "body": "As an aside, calling subroutines using a leading <code>&amp;</code> hasn&#39;t been necessary since Perl 4."}], "answers": [{"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 4, "last_activity_date": 1519987324, "creation_date": 1519987324, "answer_id": 49067487, "question_id": 49067103, "link": "https://stackoverflow.com/questions/49067103/perl-print-output-of-subroutine-to-file/49067487#49067487", "title": "perl: print output of subroutine to file", "body": "<p>Open a filehandle that outputs into a variable, and select it.<br>\nAfter that all output going into STDOUT will be caught in the variable.<br>\nHere is an example:</p>\n\n<pre><code>sub output {\n    print \"test\\n\";\n}\n\nmy $out;\nopen VAROUT, '&gt;', \\$out;\nselect VAROUT;\noutput();\nselect STDOUT;\nprintf \"output: %s\\n\", $out;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "is_accepted": false, "score": 1, "last_activity_date": 1519999752, "last_edit_date": 1519999752, "creation_date": 1519999396, "answer_id": 49070719, "question_id": 49067103, "link": "https://stackoverflow.com/questions/49067103/perl-print-output-of-subroutine-to-file/49070719#49070719", "title": "perl: print output of subroutine to file", "body": "<p>Is it really necesssary, that the subroutine, whose output you want to pass actually prints something?</p>\n\n<p>Usually you should simply make your sub <em>return</em> a string and have the caller decide where to output it.</p>\n\n<pre><code>my $logfile=\"C:/Test/report_p3.txt\";\nopen(my $tt, \"&gt;\",$logfile) or die \"Can not open file\";\n\nsub get_log {\n  return \"some text to log\";\n}\n\nsub log_write {\n  my $log_fh = shift;\n\n  print $log_fh get_log() . \"\\n\";\n}\n\nlog_write($tt);       # prints to file handle from $tt\nlog_write(STDOUT);    # prints to STDOUT\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9433460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8bb4869797b3c1c0823720661b0499ca?s=128&d=identicon&r=PG&f=1", "display_name": "steba", "link": "https://stackoverflow.com/users/9433460/steba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1519999752, "creation_date": 1519985927, "question_id": 49067103, "link": "https://stackoverflow.com/questions/49067103/perl-print-output-of-subroutine-to-file", "title": "perl: print output of subroutine to file", "body": "<p>How to write the output of a subroutine to file?</p>\n\n<pre><code>my $logfile=\"C:/Test/report_p3.txt\";\nopen(my $tt, \"&gt;\",$logfile) or die \"Can not open file\";\n\nforeach (@files)\n{\nif (($_ ne \".\") &amp;&amp; ($_ ne \"..\"))\n{\n    &amp;getinfo($logdir.\"/\".$_);\n    print $tt &amp;getinfo; #Here, I wanna pass the output to the handler\n}\n}\n\nclose $tt;\n</code></pre>\n\n<p>on standard output, &amp;getinfo prints correctly the output.</p>\n"}, {"tags": ["perl", "sockets"], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 5033701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gAzqe.jpg?s=128&g=1", "display_name": "fuser", "link": "https://stackoverflow.com/users/5033701/fuser"}, "edited": false, "score": 0, "creation_date": 1520006855, "post_id": 49067067, "comment_id": 85151504, "body": "ah!so easy. thnx a lot for help."}, {"owner": {"reputation": 263, "user_id": 5033701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gAzqe.jpg?s=128&g=1", "display_name": "fuser", "link": "https://stackoverflow.com/users/5033701/fuser"}, "edited": false, "score": 0, "creation_date": 1520116811, "post_id": 49067067, "comment_id": 85185439, "body": "I played around code and found out that changing <code>print Dumper($struct)</code> to ==&gt; <code>print $struct -&gt;[0];</code> gave result without displaying <code>VAR</code> and brackets from Dumper, more user-friendly output. Maybe useful for somebody."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 3, "last_activity_date": 1519985809, "creation_date": 1519985809, "answer_id": 49067067, "question_id": 49065956, "link": "https://stackoverflow.com/questions/49065956/serialization-usage-for-array-in-perl/49067067#49067067", "title": "serialization usage for array in perl", "body": "<p>Calling <a href=\"http://p3rl.org/IO::Socket#accept%28%5BPKG%5D%29\" rel=\"nofollow noreferrer\"><code>accept</code></a> is the problem. Get rid of the inner <code>while</code> loop and simply read from the socket. In client.pl, you did this with the &lt;> (a.k.a. <a href=\"http://p3rl.org/readline\" rel=\"nofollow noreferrer\">readline</a>) operator, in new_client.pl, <code>fd_retrieve</code> will do that implicitly for you.</p>\n\n<pre><code>while (1) {\n    my $msg = &lt;STDIN&gt;;\n    $socket-&gt;send($msg);\n    my $struct = fd_retrieve($socket);\n    print Dumper($struct);\n}\n</code></pre>\n\n<p>PS: Upgrade to <a href=\"http://p3rl.org/IO::Socket::IP\" rel=\"nofollow noreferrer\">IO::Socket::IP</a> so you get IPv6 support. Upgrade to <a href=\"http://p3rl.org/Sereal\" rel=\"nofollow noreferrer\">Sereal</a> for <a href=\"https://stackoverflow.com/a/10684780/46395\">serialisation</a> because Storable is not compatible across different Perl versions.</p>\n"}], "owner": {"reputation": 263, "user_id": 5033701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gAzqe.jpg?s=128&g=1", "display_name": "fuser", "link": "https://stackoverflow.com/users/5033701/fuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 49067067, "answer_count": 1, "score": 2, "last_activity_date": 1519985809, "creation_date": 1519981939, "question_id": 49065956, "link": "https://stackoverflow.com/questions/49065956/serialization-usage-for-array-in-perl", "title": "serialization usage for array in perl", "body": "<p>I have perl client and server. I use IO::Socket to send data between them.</p>\n\n<p>client can send any command to the server, server runs it and send the response back to the client  - monitoring like behavior approach.</p>\n\n<p><strong>client.pl stuff:</strong></p>\n\n<pre><code># !/usr/bin/perl\nuse 5.022;\nuse strict;\nuse warnings;\n\n#tcpclient.pl\n\nuse IO::Socket::INET;\n\nmy $addr = shift @ARGV;\nmy $port = shift @ARGV;\n\n# flush after every write\n$| = 1;\n\nmy ($socket,$client_socket);\n\n# creating object interface of IO::Socket::INET modules which \ninternally creates \n# socket, binds and connects to the TCP server running on the specific \nport.\n$socket = new IO::Socket::INET  (\nPeerHost =&gt; $addr,\nPeerPort =&gt; $port,\nProto =&gt; 'tcp',\n) or die \"ERROR in Socket Creation : $!\\n\";\n\nprint \"TCP Connection Success.\\n\";\n\nwhile (1) {\nmy $msg = &lt;STDIN&gt;;\n$socket-&gt;send ($msg);\n\nmy $res = &lt;$socket&gt;;\nprint $res;\n\n}\n\n$socket-&gt;close();\n</code></pre>\n\n<p><strong>server.pl stuff:</strong></p>\n\n<pre><code># !/usr/bin/perl\nuse 5.022;\nuse strict;\nuse warnings;\n\n#tcpserver.pl\n\nuse IO::Socket::INET;\n\n# flush after every write\n$| = 1;\n\nmy ( $socket,      $client_socket );\nmy ( $peeraddress, $peerport );\n\n# creating object interface of IO::Socket::INET modules which \ninternally does\n# socket creation, binding and listening at the specified port \naddress.\n\n$socket = new IO::Socket::INET-&gt;new(\nLocalHost =&gt; '0.0.0.0',\nLocalPort =&gt; '55555',\nProto     =&gt; 'tcp',\nListen    =&gt; SOMAXCONN,\nReuse     =&gt; 1\n) or die \"ERROR in Socket Creation : $! \\n\";\n\n\nprint \"server waiting for client connection on port 55555\\n\";\n\nwhile ( $client_socket = $socket-&gt;accept() ) {\n\n# waiting for new client connection.\n\n# get the host and port number of newly connected client.\n$peeraddress = $client_socket-&gt;peerhost();\n$peerport    = $client_socket-&gt;peerport();\n\n#print \"Accepted New Client Connection From : $peeraddress, \n$peerport\\n \";\n\nwhile (&lt;$client_socket&gt;) {\n\n    print \"[$peeraddress $peerport] $_\";\n    my $data = `$_`;\n    print $data;\n\n    $client_socket-&gt;send($data);\n\n}\n\n}\n\n    $socket-&gt;close();\n</code></pre>\n\n<p>Everything is ok in case the output of the command is one string (commands like <code>uptime</code>, <code>uname</code>, <code>pwd</code>). \nIf the output contains more strings for e.g. <code>ip a</code> I get only one string on the client side.</p>\n\n<p>I find out that in order to resolve the issue we can use serialization approach. In this way we can use array that can be send from the server side with all strings in it. </p>\n\n<p>I've parsed through StackOverflow and found a lot of such approaches:</p>\n\n<blockquote>\n  <p><a href=\"https://stackoverflow.com/questions/3896599/how-can-i-send-an-array-in-client-server-program-in-perl\">How can I send an array in client server program in Perl?</a></p>\n  \n  <p><a href=\"https://stackoverflow.com/questions/22521399/how-do-i-encode-a-simple-array-into-json-in-perl\">How do I encode a simple array into JSON in Perl?</a></p>\n  \n  <p><a href=\"https://stackoverflow.com/questions/13697856/perl-socket-sending-hash\">Perl socket sending hash</a></p>\n</blockquote>\n\n<p>here is the way I tried to change the client and server side in case <code>Storable</code> module usage:</p>\n\n<p><strong>new server.pl stuff with \"Storable\":</strong></p>\n\n<pre><code> # !/usr/bin/perl\n use 5.022;\n use strict;\n use warnings;\n\n #tcpserver.pl\n\n use IO::Socket::INET;\n use Storable qw(nstore_fd);\n\n\n # flush after every write\n $| = 1;\n\n my ( $socket,      $client_socket );\n my ( $peeraddress, $peerport );\n\n # creating object interface of IO::Socket::INET modules which \n internally does\n # socket creation, binding and listening at the specified port \n address.\n\n $socket = new IO::Socket::INET-&gt;new(\n LocalHost =&gt; '0.0.0.0',\n LocalPort =&gt; '55555',\n Proto     =&gt; 'tcp',\n Listen    =&gt; SOMAXCONN,\n Reuse     =&gt; 1\n ) or die \"ERROR in Socket Creation : $! \\n\";\n\n\n print \"server waiting for client connection on port 55555\\n\";\n\n while ( $client_socket = $socket-&gt;accept() ) {\n\n # waiting for new client connection.\n\n # get the host and port number of newly connected client.\n $peeraddress = $client_socket-&gt;peerhost();\n $peerport    = $client_socket-&gt;peerport();\n\n#print \"Accepted New Client Connection From : $peeraddress, \n$peerport\\n \";\n\nwhile (&lt;$client_socket&gt;) {\n\n    print \"[$peeraddress $peerport] $_\";\n\n    #serialization approach\n    #save command output in array\n    my @data = `$_`;\n    print @data;\n\n    #store and send the whole array\n    nstore_fd( \\@data, $client_socket );\n\n}\n\n}\n\n$socket-&gt;close();\n</code></pre>\n\n<p><strong>new client.pl stuff with \"Storable\":</strong></p>\n\n<pre><code> # !/usr/bin/perl\n use 5.022;\n use strict;\n use warnings;\n\n #tcpclient.pl\n\n use IO::Socket::INET;\n use Data::Dumper;\n use Storable qw(fd_retrieve);\n\n my $addr = shift @ARGV;\n my $port = shift @ARGV;\n\n # flush after every write\n $| = 1;\n\n my ($socket,$client_socket);\n\n # creating object interface of IO::Socket::INET modules which \n internally creates \n # socket, binds and connects to the TCP server running on the \n specific port.\n $socket = new IO::Socket::INET  (\n PeerHost =&gt; $addr,\n PeerPort =&gt; $port,\n Proto =&gt; 'tcp',\n ) or die \"ERROR in Socket Creation : $!\\n\";\n\n print \"TCP Connection Success.\\n\";\n\nwhile (1) {\nmy $msg = &lt;STDIN&gt;;\n$socket-&gt;send ($msg);\n\n   #serialization approach\n   #retrieve the array \n   while(my $s = $socket -&gt;accept){\n    my $struct = fd_retrieve($s);\n    print Dumper($struct);\n   }\n\n}\n\n$socket-&gt;close();\n</code></pre>\n\n<p>But the aforementioned did not work for me.</p>\n\n<p>Could someone advise me how my client side can reflect the multiple output from the server side using serialization in the proper way.</p>\n"}, {"tags": ["regex", "perl", "optional-values"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1519947075, "post_id": 49060375, "comment_id": 85125842, "body": "Are you trying do to this <a href=\"https://regex101.com/r/4Uij4s/1\" rel=\"nofollow noreferrer\"><code>&#47;(?:([^@\\s]+)@)?([^\\s:]*):.*\\&#47;(.*)&#47;</code></a>?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1519989994, "post_id": 49060375, "comment_id": 85141204, "body": "@revo Actually I didn&#39;t see your comment before my answer finally both are same :)"}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 1479753, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/266109da369a0ee7f7c9585a2631bcb9?s=128&d=identicon&r=PG", "display_name": "new_linux_user", "link": "https://stackoverflow.com/users/1479753/new-linux-user"}, "edited": false, "score": 0, "creation_date": 1519947671, "post_id": 49060441, "comment_id": 85126022, "body": "interesting..will look into this!"}], "tags": [], "owner": {"reputation": 38158, "user_id": 2707792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hjDjB.png?s=128&g=1", "display_name": "Andrey Tyukin", "link": "https://stackoverflow.com/users/2707792/andrey-tyukin"}, "is_accepted": false, "score": 1, "last_activity_date": 1519947068, "creation_date": 1519947068, "answer_id": 49060441, "question_id": 49060375, "link": "https://stackoverflow.com/questions/49060375/optional-character-match-regex/49060441#49060441", "title": "Optional character match regex", "body": "<p>This here will always match the optional part as group 1, sometimes either <code>$1</code> or <code>$3</code> will be empty:</p>\n\n<pre><code>(?:(\\w+)@)?(\\w+):(?:\\/\\w+){2}\\/((?:\\w|\\.)*)\n</code></pre>\n\n<p>Demo: <a href=\"https://regex101.com/r/s2ONxR/1\" rel=\"nofollow noreferrer\">regex101</a></p>\n\n<p>If you want to skip more subdirectories, replace the <code>{2}</code> by <code>*</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1519993093, "creation_date": 1519993093, "answer_id": 49069005, "question_id": 49060375, "link": "https://stackoverflow.com/questions/49060375/optional-character-match-regex/49069005#49069005", "title": "Optional character match regex", "body": "<p>More maintainable solution:</p>\n\n<pre><code>use URI qw();\nfor my $str (qw(\n    test23@testbee:/var/bee/\n    testbee:/var/bee/test.html\n)) {\n    my $u = URI-&gt;new(\"ssh://$str\");\n    printf \"user: %s  host: %s  path: %s\\n\",\n        $u-&gt;user, $u-&gt;host, $u-&gt;path;\n}\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1479753, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/266109da369a0ee7f7c9585a2631bcb9?s=128&d=identicon&r=PG", "display_name": "new_linux_user", "link": "https://stackoverflow.com/users/1479753/new-linux-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519993093, "creation_date": 1519946755, "question_id": 49060375, "link": "https://stackoverflow.com/questions/49060375/optional-character-match-regex", "title": "Optional character match regex", "body": "<p>I have a condition where my string could look like: </p>\n\n<ol>\n<li>test23@testbee:/var/bee/</li>\n</ol>\n\n<p>or </p>\n\n<ol start=\"2\">\n<li>testbee:/var/bee/test.html</li>\n</ol>\n\n<p>I need to extract three string here: test23 (if it is available) , testbee and test.html</p>\n\n<p>So, in Perl,</p>\n\n<pre><code>($user, $sys, $file) = ($source =~ /(\\S*?)\\@?(\\S+?):?[^:]*?([^\\/]+)$/);\n</code></pre>\n\n<p>for 1. this gives, $user = , $sys = test@testbee, $file = test.html\nfor 2. this gives, $user = , $sys = test, $file = test.html</p>\n\n<p>Is there a way, I can just use one expression to get the user 'test' if it exists and nothing if it doesnt.  </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7927, "user_id": 5214807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq31b.jpg?s=128&g=1", "display_name": "Saleem", "link": "https://stackoverflow.com/users/5214807/saleem"}, "edited": false, "score": 0, "creation_date": 1519946083, "post_id": 49060221, "comment_id": 85125524, "body": "What do you want to match, word with in parentheses or one without?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1519946129, "post_id": 49060221, "comment_id": 85125547, "body": "What about <code>(?&lt;!\\S)apple(?!\\S)</code>?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1519946146, "post_id": 49060221, "comment_id": 85125553, "body": "I think you ask for whitespace boundaries, use <code>m&#47;(?&lt;!\\S)apple(?!\\S)&#47;</code>"}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1519946245, "post_id": 49060221, "comment_id": 85125586, "body": "@revo Thanks for you quick answer. It works!!!"}, {"owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1519946305, "post_id": 49060221, "comment_id": 85125605, "body": "@WiktorStribi\u017cew Awesome, It works. Thanks for telling me the whitespace boundaries. :)"}], "owner": {"reputation": 338, "user_id": 5426961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsX3K.gif?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5426961/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1519946251, "answer_count": 0, "score": 0, "last_activity_date": 1519946145, "creation_date": 1519945971, "last_edit_date": 1519946145, "question_id": 49060221, "link": "https://stackoverflow.com/questions/49060221/perl-regex-match-the-exact-word", "closed_reason": "Duplicate", "title": "Perl regex match the exact word", "body": "<p>I have two strings, one is without parentheses, the other is with parentheses.</p>\n\n<p><strong>apple</strong></p>\n\n<p><strong>(apple)</strong></p>\n\n<p>What I am going to match is <strong>apple</strong> (without parentheses) rather than <strong>(apple)</strong></p>\n\n<pre><code>$string =~ m/\\bapple\\b/\n</code></pre>\n\n<p>didn't work. It matches both. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1519944494, "post_id": 49059893, "comment_id": 85124964, "body": "(1) With <code>*</code> quantifier in <code>[^.]*</code> you allow &#39;nothing&#39; to match as well.  You don&#39;t say how you use that so I can&#39;t tell how it works out but it&#39;s probably wrong.  (Btw, in a straight-up match it works.)  (2) The <code>\\S</code> is not-a-space, so it matches <code>:</code> as well. It will surely work if you limit it (make non-greedy) as <code>\\@(\\S+?):</code> (while it may work otherwise as well, if there are no more <code>:</code>)"}, {"owner": {"reputation": 601, "user_id": 1479753, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/266109da369a0ee7f7c9585a2631bcb9?s=128&d=identicon&r=PG", "display_name": "new_linux_user", "link": "https://stackoverflow.com/users/1479753/new-linux-user"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519944717, "post_id": 49059893, "comment_id": 85125039, "body": "Thank you so much. Yes it did work. I mean making it non-greedy (\\@(\\S+?):) Thanks a lot!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519944727, "post_id": 49059893, "comment_id": 85125041, "body": "PLease show your whole regex and how you use it"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519945102, "post_id": 49059893, "comment_id": 85125147, "body": "(Also, the <code>[^.]*</code> attempt should use <code>[^:]</code>, to exclude <code>:</code> and not <code>.</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": false, "score": 1, "last_activity_date": 1519945379, "last_edit_date": 1519945379, "creation_date": 1519944658, "answer_id": 49059969, "question_id": 49059893, "link": "https://stackoverflow.com/questions/49059893/regex-get-string-between-two-characters/49059969#49059969", "title": "Regex: get string between two characters", "body": "<p>You only need to use a referrer to <a href=\"https://stackoverflow.com/questions/2259784/how-can-i-store-captures-from-a-perl-regular-expression-into-separate-variables\">capturing group</a> you just constructed or you can use <code>\\K</code> token. You don't need to escape <code>@</code> character and <code>[^.]*</code> means greedily match everything except a literal dot <code>.</code> which is better to be changed to <code>[^:]+</code>:</p>\n\n<pre><code>@\\K[^:]+\n</code></pre>\n\n<p>or more strictly:</p>\n\n<pre><code>@\\K[^:]++(?=:)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7927, "user_id": 5214807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aq31b.jpg?s=128&g=1", "display_name": "Saleem", "link": "https://stackoverflow.com/users/5214807/saleem"}, "is_accepted": false, "score": 0, "last_activity_date": 1519945638, "creation_date": 1519945638, "answer_id": 49060158, "question_id": 49059893, "link": "https://stackoverflow.com/questions/49059893/regex-get-string-between-two-characters/49060158#49060158", "title": "Regex: get string between two characters", "body": "<p>Try <code>(?&lt;=@).*(?=:)</code>. I'm using positive lookbehind and positive lookahead.</p>\n\n<p>It will match anything starting with (but excluding) <code>@</code> character and ending with (excluding) <code>:</code></p>\n\n<p>for detail, please see <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">https://www.regular-expressions.info/lookaround.html</a></p>\n\n<p>see demo at <a href=\"https://regex101.com/r/jIIB9Q/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/jIIB9Q/1</a></p>\n"}], "owner": {"reputation": 601, "user_id": 1479753, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/266109da369a0ee7f7c9585a2631bcb9?s=128&d=identicon&r=PG", "display_name": "new_linux_user", "link": "https://stackoverflow.com/users/1479753/new-linux-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4797, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1519945638, "creation_date": 1519944286, "last_edit_date": 1519945170, "question_id": 49059893, "link": "https://stackoverflow.com/questions/49059893/regex-get-string-between-two-characters", "title": "Regex: get string between two characters", "body": "<p>I am trying to extract a string between the two characters <code>@</code> and <code>:</code> for the string:</p>\n\n<pre><code>test23@server:/var/\n</code></pre>\n\n<p>So, when I try to do something like,\n<code>@([^.]*):</code>\nor even \n<code>\\@(\\S+):</code>\nI get <code>@server:</code></p>\n\n<p>I just want both <code>@</code> and <code>:</code> removed so I can get just the word <code>server</code>. Please help!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519948674, "post_id": 49058514, "comment_id": 85126305, "body": "Why not write that wrapper carefully and do as in mob&#39;s answer?"}], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 1130401, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f4bd20c5f7b3291fec720097cbcaa811?s=128&d=identicon&r=PG&f=1", "display_name": "mswanberg", "link": "https://stackoverflow.com/users/1130401/mswanberg"}, "edited": false, "score": 0, "creation_date": 1520027336, "post_id": 49058608, "comment_id": 85161763, "body": "$cmd[0] HAS to be a fully-path&#39;ed executable for Win32::Process::Create to work.  So, a command like &quot;something.pl arg1 arg2&quot; will not run because something.pl is not a Windows executable (nor is it a complete explicit path to something.pl.  When run in system, a command line is passed to the OS, which looks up .pl, sees that it requires the perl executable, and reconstructs its own $cmd[0].  I have, since this post, tried to look into doing that lookup myself, using <code>ftype</code> and <code>assoc</code>.  It&#39;s a hodge-podge in there so it&#39;s not easy to parse out successfully for all scenarios."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1519938349, "last_edit_date": 1519938349, "creation_date": 1519938024, "answer_id": 49058608, "question_id": 49058514, "link": "https://stackoverflow.com/questions/49058514/true-and-useful-process-detachment-in-windows/49058608#49058608", "title": "True and useful process detachment in Windows", "body": "<p>It's been a while since I skinned this cat, but my notes say the workflow is something like</p>\n\n<pre><code>use Win32::Process;\n@cmd = (...);    # I think it's ok to begin with START or CMD\nmy $procObj;\nWin32::Process::Create( $procObj, $cmd[0], join(' ',@cmd), 0,\n                        &amp;Win32::Process::DETACHED_PROCESS, \"/\" )\n    or die \"failed to create detached proc: \",\n           Win32::FormatMessage( Win32::GetLastError() );\n</code></pre>\n\n<p>That <code>join(' ',@cmd)</code> is a trap if your command has spaces or other metacharacters, so let's just say that issue is beyond the scope of this answer.</p>\n"}, {"comments": [{"owner": {"reputation": 1225, "user_id": 1130401, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f4bd20c5f7b3291fec720097cbcaa811?s=128&d=identicon&r=PG&f=1", "display_name": "mswanberg", "link": "https://stackoverflow.com/users/1130401/mswanberg"}, "edited": false, "score": 0, "creation_date": 1520264498, "post_id": 49113686, "comment_id": 85233196, "body": "The downside to this approach is that if I WANT to wait on the process and get the return exit code, I can&#39;t.  This is because the START returns almost immediately, so whatever is being START&#39;ed is not the real process being watched.  OTOH, if I want to wait on the process, I can just use the <code>system</code> command."}], "tags": [], "owner": {"reputation": 1225, "user_id": 1130401, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f4bd20c5f7b3291fec720097cbcaa811?s=128&d=identicon&r=PG&f=1", "display_name": "mswanberg", "link": "https://stackoverflow.com/users/1130401/mswanberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1520263201, "creation_date": 1520263201, "answer_id": 49113686, "question_id": 49058514, "link": "https://stackoverflow.com/questions/49058514/true-and-useful-process-detachment-in-windows/49113686#49113686", "title": "True and useful process detachment in Windows", "body": "<p>This is where I am at... does anyone have a better idea?</p>\n\n<p>So, the command I want to run is in $cmdline, the code becomes:</p>\n\n<pre><code>my $pgm=$ENV{COMSPEC};\n$cmdline='/c start /min cmd /c '.$cmdline;\nmy $flags=DETACHED_PROCESS;\nWin32::Process::Create(my $ProcessObj,\n    $pgm,\n    $cmdline,\n    0, # setting this to 1 will make this script wait on this process to end\n    $flags,\n    '.', # working dir\n);\n</code></pre>\n\n<p>And then, if I want to capture output from a command, I have to \"escape\" the '>' and '&amp;' characters thusly:</p>\n\n<pre><code>$cmdline='pl2 E:\\\\scripts\\\\PERLDO_Stuff\\\\Sums2.perldo ^&gt;e:\\\\pl2.log 2^&gt;^&amp;1'\n</code></pre>\n\n<p>(Note: pl2.pl is a perl script in my PATH)</p>\n\n<p>Note how the <code>&gt;file.ext</code> is now <code>^&gt;file.ext</code> and the <code>2&gt;&amp;1</code> becomes <code>2^&gt;^&amp;1</code>.  This is, so far, the only way I've gotten this to work.</p>\n\n<p>Does anyone else have any other ideas on this?</p>\n"}], "owner": {"reputation": 1225, "user_id": 1130401, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f4bd20c5f7b3291fec720097cbcaa811?s=128&d=identicon&r=PG&f=1", "display_name": "mswanberg", "link": "https://stackoverflow.com/users/1130401/mswanberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1520263201, "creation_date": 1519937607, "question_id": 49058514, "link": "https://stackoverflow.com/questions/49058514/true-and-useful-process-detachment-in-windows", "title": "True and useful process detachment in Windows", "body": "<p>I am trying to write a distribution program that runs command lines at various intervals.  Think cron, here.  Ideally, this would be cross-platform, but cron already exists in *nix, so this is mainly for Windows.</p>\n\n<p>Given the many issues of trying to spawn and keep a daemon-like perl script running robustly, my thought was to have the OS's scheduler kick off the script every minute and have the script determine which command lines are to be run and then do so.  Some of you can already see the issues...</p>\n\n<p>The Windows Scheduler will not run a job if it's already running.  So, to run the cron-ish perl script, it will have to be finished in less than a minute, or else some scheduled command lines may be skipped.  For example, something run hourly that takes more than a minute will keep something from running that's scheduled for 1 minute past the hour.  For example, try a perl program that runs this command:</p>\n\n<pre><code>system 1,'perl -e \"sleep 10\"';\n</code></pre>\n\n<p>You'd think the program would return to the command prompt immediately with the \"sleep 10\" running in Windows' background... but nope, the parent script waits 10 seconds before exiting.</p>\n\n<p>My current solution is to actually loop the program until all the commands finish... and each minute, re-enter the loop that reads the crontab-like input.  This is a nightmare for a variety of reasons, not the least of which is that my scheduler script becomes beholden to the commands it starts.</p>\n\n<p>One might think forking the system call to run each command would work, but in Windows the parent script will not exit until the children are finished.  And for some odd reason, this is still the case even if the command line uses the Windows 'start' command.</p>\n\n<p>I tried Win32::Process but that has some oddball limitations, mainly that it requires an explicit Windows program to be identified.  I wrote a wrapper around Win32::Process that ferrets out the program being run in a command line, finds it in the path (also looking for the type of program by using $ENV{PATHEXT}... for example, Win32::Process wouldn't accept 'notepad' so I have to determine that 'notepad.exe' is what it wants, and then find that in the path).  If the program isn't found, I assume the program is $ENV{COMSPEC} and add '/c'.  All of that works pretty well... until...</p>\n\n<p>If I use this approach, every time some commands come up in the schedule, windows start popping up on my screen.  That can really be a pain if you're typing an email and the window focus bounces around so you are typing into other windows all of a sudden.  Productivity killer!</p>\n\n<p>Enter start.  Using START /MIN will start the new processes minimized, so they don't pop on top of whatever I am doing.  But START isn't a true program, so trying to find it for my Win32::Process wrapper then defaults it to $ENV{COMSPEC}.  All well and fine here... so a command such as \"dosomething.pl arg1 arg2\" can be re-tuned to \"cmd /c start /MIN dosomething.pl arg1 arg2\".  Which works great... until...</p>\n\n<p>... I try a command like \"domsomething.pl arg1 arg2 >out.txt\".  Changing that to \"cmd /c start /MIN dosomething.pl arg1 arg2 >out.txt\" sends the output of start to out.txt... which is generally nothing (start is pretty quiet that way).</p>\n\n<p>Additionally, my Win32::Process wrapper isn't savvy enough (if I avoid the cmd and start stuff) to know that a command such as \"dosomething.pl arg1 arg2\" needs to be \"perl -S dosomething.pl arg1 arg2\"... which then perl could be found as perl.exe in the path.  It's Windows that recognizes the .pl extension and runs perl.  Win32::Process doesn't ask Windows for such information, depending on me to figure it out on my own.  I imagine there is a Win32 module somewhere that could get this for me.  Anyone know if that is true?</p>\n\n<p>So, here I am.  No 100% good way to detach a process... fork() and \"system 1,$cmd\" both keep the parent running until the children have finished.  Win32::Process is a nightmare to automatically try and gather everything it needs to work properly.</p>\n\n<p>Has anyone skinned this cat?  Any suggestions?  Thanks tons, y'all.</p>\n"}, {"tags": ["perl", "post"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1519934641, "post_id": 49056894, "comment_id": 85120266, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/608254/why-am-i-having-trouble-comparing-lines-from-input-in-perl\">Why am I having trouble comparing lines from input in Perl?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1519931284, "creation_date": 1519931284, "answer_id": 49057012, "question_id": 49056894, "link": "https://stackoverflow.com/questions/49056894/perl-why-doesnt-post-work-when-the-variable-is-set-by-rather-than-directly-a/49057012#49057012", "title": "Perl Why doesn&#39;t POST work when the variable is set by &lt;&gt; rather than directly assigned?", "body": "<p>When you hardcoded <code>$connection_name</code>, you probably didn't include a line feed as you do now. Add</p>\n\n<pre><code>chomp($connection_name);\n</code></pre>\n\n<p>And please use a proper JSON generator.</p>\n\n<pre><code>use JSON::XS qw( encode_json );\n\nmy $post_data = encode_json({\n   name            =&gt; $connection_name,\n   origin_country  =&gt; \"us\",\n   datasource_type =&gt; \"cfdcb449-1204-44ba-baa6-9a8a878e6aa7\",\n});\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7077433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s_xHRV7JzA0/AAAAAAAAAAI/AAAAAAAAADg/3FbII3aNS1M/photo.jpg?sz=128", "display_name": "Jabe Hickey", "link": "https://stackoverflow.com/users/7077433/jabe-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 49057012, "answer_count": 1, "score": 1, "last_activity_date": 1519931284, "creation_date": 1519930897, "question_id": 49056894, "link": "https://stackoverflow.com/questions/49056894/perl-why-doesnt-post-work-when-the-variable-is-set-by-rather-than-directly-a", "title": "Perl Why doesn&#39;t POST work when the variable is set by &lt;&gt; rather than directly assigned?", "body": "<p>When I directly assign a name to the variable $connection_name, this script works, but I would like to take a user input and assign that to the variable.  When I do that, it doesn't work.  I get an error 400 bad request. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse LWP;\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $server_endpoint = \"XXXX\"\n\n# Get name for connection\nprint \"Connection Name?\";\nmy $connection_name= &lt;&gt;;\nprint $connection_name;\n\n# HTTP request header fields\nmy $req = HTTP::Request-&gt;new(POST =&gt; $server_endpoint);\n$req-&gt;header('content-type' =&gt; 'application/json');\n\n# POST data in the HTTP request body\nmy $post_data = \"{\n    \\\"name\\\":\\\"$connection_name\\\",\n    \\\"origin_country\\\":\\\"us\\\",\n    \\\"datasource_type\\\":\\\"cfdcb449-1204-44ba-baa6-9a8a878e6aa7\\\"\n}\"\n$req-&gt;content($post_data);\n\nmy $resp = $ua-&gt;request($req);\nif ($resp-&gt;is_success) {\n    my $message = $resp-&gt;decoded_content;\n    print \"Received reply: $message\\n\";\n}\nelse {\n    print \"HTTP POST error code: \", $resp-&gt;code, \"\\n\";\n    print \"HTTP POST error message: \", $resp-&gt;message, \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "unix", "awk"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1519927562, "post_id": 49055942, "comment_id": 85116550, "body": "StackOverflow expects you to <a href=\"http://meta.stackoverflow.com/questions/261592\">try to solve your own problem first</a>. Please update your question to show what you have already tried in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For further information, please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and take the <a href=\"https://stackoverflow.com/tour\">tour</a> :)"}, {"owner": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1519928759, "post_id": 49055942, "comment_id": 85117179, "body": "@ Barmar and @ Matt. I am newbie to scripting. Although I have spend couple of hours on libre office-calc to solve this problem. But it didn&#39;t go my way. So at the end I had to post it here."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1519930369, "post_id": 49055942, "comment_id": 85118035, "body": "@Parthpatel Posting here is fine, but you need to follow the rules. And since you&#39;re asking a question about code, where&#39;s the code?"}, {"owner": {"reputation": 874, "user_id": 6535641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa91de216e37b552d355915aa73e4c16?s=128&d=identicon&r=PG&f=1", "display_name": "ULick", "link": "https://stackoverflow.com/users/6535641/ulick"}, "edited": false, "score": 0, "creation_date": 1519941198, "post_id": 49055942, "comment_id": 85123545, "body": "Check questions under <code>Related</code>, for example <a href=\"https://stackoverflow.com/questions/18471084/split-a-file-based-on-the-string-from-the-other-file?rq=1\" title=\"split a file based on the string from the other file\">stackoverflow.com/questions/18471084/&hellip;</a>.  Then show your effort and where you are stuck"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1519982558, "post_id": 49061879, "comment_id": 85137245, "body": "Hellow @xxfelixxx, Thank you for your help. However, If this perl script will work if i have multiple column to find from in second file? because file 2 has multiple column (any column can have a ID which I am looking for). Regards"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1519984812, "post_id": 49061879, "comment_id": 85138573, "body": "It checks every column but the first for a possible match, so yes, it should work, try it out!"}, {"owner": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1519985254, "post_id": 49061879, "comment_id": 85138797, "body": "It should work but pardon me. when i run command. it ends up with error. &quot;Duplicated field &#39;12&#39; at hi.perl line 46, &lt;$fh&gt; line 11&quot;... Can u tell me what does this indicates?.. Kind Regards"}, {"owner": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1519985914, "post_id": 49061879, "comment_id": 85139172, "body": "I should have mentioned earlier that, My file can contain duplicate values in first column of file 1 (ID which I am searching in 2nd file).. Is there any way to deal with this?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1519986051, "post_id": 49061879, "comment_id": 85139245, "body": "Of course, but you need to decide how to deal with that situation, should the first match win, should the lowest/highest id win, something else?  etc."}, {"owner": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1519986606, "post_id": 49061879, "comment_id": 85139527, "body": "Can the same ID be assigned for every duplicate matches. because it will search every time from file 1. For your reference I have edited my question example. That might give u more idea. Because script will take a word from file 1 and search it against file 2. can we leave duplicate value as it is?"}, {"owner": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1519987000, "post_id": 49061879, "comment_id": 85139754, "body": "Its okay if first id win.. that will also work for me"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "edited": false, "score": 0, "creation_date": 1520054502, "post_id": 49061879, "comment_id": 85167504, "body": "Your welcome.  If the answer works, you should accept it."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1520038858, "last_edit_date": 1520038858, "creation_date": 1519957732, "answer_id": 49061879, "question_id": 49055942, "link": "https://stackoverflow.com/questions/49055942/extract-first-entry-from-a-file-based-on-its-corresponding-id-list-in-second-fil/49061879#49061879", "title": "extract first entry from a file based on its corresponding ID list in second file?", "body": "<p>When trying to match up records from one file with records in another, the idea is to use a <code>hash ( also known as an associative array, set of key-value pairs, or dictionaries )</code> to store the relationship between the first column and the rest of the columns.  In effect, create the following relationships:</p>\n\n<pre><code>file1: ABCD     -&gt; 0\n       ABDF     -&gt; 3\n       ACGFR    -&gt; 4\n       FGHTRSS  -&gt; 6\n       GFHTRSFS -&gt; 7\n\nfile2: AB    -&gt; ID001\n       ACGFR -&gt; ID001\n       DF    -&gt; ID001\n       ...\n       ANH   -&gt; ID001\n       DFR   -&gt; ID002\n       AG    -&gt; ID002\n       ...\n       KUH   -&gt; ID004\n       KOOL  -&gt; ID004\n</code></pre>\n\n<p>The actual matching up of records between the files amounts to determining\nif both hashes, here file1 and file2 both have keys defined for each file1 record.  Here we can see that <code>ACGFR</code> is a key for both, therefore we can match up <code>4</code> and <code>ID001</code>, and so on for the rest of the keys.</p>\n\n<p>In perl, we can create a hash by assigning pairs of values: </p>\n\n<pre><code>my %hash = ( foo =&gt; 1, bar =&gt; 2 );\n</code></pre>\n\n<p>A hash can also be created using references:</p>\n\n<pre><code>my $hash_ref = { foo =&gt; 1, bar =&gt; 2 };\n</code></pre>\n\n<p>Keys can be found using the <code>keys</code> function, and individual values can be extracted: </p>\n\n<pre><code>my $val1 = $hash{ foo };       # regular hash\nmy $val2 = $hash_ref-&gt;{ foo }; # hash reference\n</code></pre>\n\n<p>Whether a particular key is a member of a hash can be tested using the <code>exists</code> function.</p>\n\n<p>With that background out of the way, here is one way to do this in perl:</p>\n\n<p><strong>matchup_files.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy $usage = \"usage: $0 file1 file2\\n\";\n\nmy ($file1, $file2) = @ARGV;\nfor my $file ($file1, $file2) {\n    die $usage unless defined $file &amp;&amp; -f $file; # -f checks whether $file is an actual file\n}\n\n# Create mappings col2 -&gt; col1\n#                 col3 -&gt; col1\n#                 col4 -&gt; col1\nmy $h1 = inverted_hash_file_on_first_column( $file1 );\nmy $h2 = hash_file_on_first_column( $file2 );\n\n# Try to find matching pairs\nmy $matches = {};\nfor my $h1_key ( keys %$h1 ) {\n    my $h1_val = $h1-&gt;{$h1_key};\n    if ( exists $h2-&gt;{ $h1_val } ) {\n        # We have a match!\n        my $num = $h1_key;\n        my $id  = $h2-&gt;{ $h1_val };\n        $matches-&gt;{ $num } = $id;\n    }\n}\n\n# Print them out in numerical order\nfor my $num ( sort { $a &lt;=&gt; $b } keys %$matches ) {\n    my $id = $matches-&gt;{$num};\n    print join(\"  \", $num, $id) . \"\\n\";\n}\n\nexit 0; # Success\n\nsub inverted_hash_file_on_first_column {\n    my ($file) = @_;\n    return _hash_file($file, 1);\n}\n\nsub hash_file_on_first_column {\n    my ($file) = @_;\n    return _hash_file($file, 0);\n}\n\nsub _hash_file {\n    my ($file, $inverted) = @_;\n\n    my $fhash = {};\n    open my $fh, \"&lt;\", $file or die \"Unable to open $file : $!\";\n    while ( my $line = &lt;$fh&gt; ) {\n        my @fields = split /\\s+/, $line; # Split line on whitespace\n        my $key = shift @fields; # First column\n        for my $field ( @fields ) {\n            if ( $inverted ) {\n                die \"Duplicated field '$field'\" if exists $fhash-&gt;{ $key };                \n                $fhash-&gt;{ $key } = $field;\n            } else {\n                die \"Duplicated field '$field'\" if exists $fhash-&gt;{ $field };\n                $fhash-&gt;{ $field } = $key;\n            }\n        }\n    }\n    return $fhash;\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>matchup_files.pl input1 input2\n0  ID003\n3  ID002\n4  ID001\n6  ID003\n7  ID004\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6155765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7435ea11535e97c762f8e9192a00e8?s=128&d=identicon&r=PG", "display_name": "Parth patel", "link": "https://stackoverflow.com/users/6155765/parth-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1520038858, "creation_date": 1519927214, "last_edit_date": 1519986377, "question_id": 49055942, "link": "https://stackoverflow.com/questions/49055942/extract-first-entry-from-a-file-based-on-its-corresponding-id-list-in-second-fil", "title": "extract first entry from a file based on its corresponding ID list in second file?", "body": "<p>I have a 2 text file. <strong>file1</strong> contains IDs:</p>\n\n<pre><code>0   ABCD  \n3   ABDF\n4   ACGFR\n6   ABCD\n7   GFHTRSFS\n</code></pre>\n\n<p>And <strong>file2</strong>:  </p>\n\n<pre><code>ID001  AB  ACGFR  DF  FD  GF  TYFJ  ANH  \nID002  DFR  AG  ABDF  HGT  MNJ  POI  YUI\nID003  DGT  JHY  ABCD  YTRE  NHYT  PPOOI  IUYNB\nID004  GFHTRSFS  MJU  UHY  IUJ  POL  KUH  KOOL\n</code></pre>\n\n<p>If the second column of file 1 matches to any entry in file 2 then the first column of file 2 should be the answer for it.</p>\n\n<p>The output should be like:</p>\n\n<pre><code>0   ID003\n3   ID002\n4   ID001\n6   ID003\n7   ID004\n</code></pre>\n\n<p>(2nd column of file1 (ABCD) found match to 3rd row of file 2 which has ID003. So, ID003 should be the answer to it). </p>\n\n<p>I have tried examples form other posts too, but somehow they are not matching to this.</p>\n\n<p>Any help will be grateful. </p>\n\n<p>Kind Regards</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1519915465, "post_id": 49052136, "comment_id": 85108753, "body": "Which distro ??"}, {"owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "reply_to_user": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1519915626, "post_id": 49052136, "comment_id": 85108851, "body": "Centos7, Perl 5.26.1"}], "answers": [{"comments": [{"owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "edited": false, "score": 0, "creation_date": 1519918783, "post_id": 49053123, "comment_id": 85111176, "body": "I have no experience with using patches. Please advise."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "edited": false, "score": 2, "creation_date": 1519919079, "post_id": 49053123, "comment_id": 85111385, "body": "You could search the Web to learn how to apply a patch. You could look at the patch and figure out what the <code>+</code> and <code>-</code> in the first column mean, and edit the file manually."}, {"owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "edited": false, "score": 0, "creation_date": 1519920056, "post_id": 49053123, "comment_id": 85112052, "body": "It wan&#39;t that hard. I made it. Thank you!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1519923550, "post_id": 49053123, "comment_id": 85114368, "body": "No need to apply the patch. Since this is a bug in the test (as opposed to a bug in the module), this is one of the few times it&#39;s safe to force-install the module."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 4, "last_activity_date": 1519918262, "creation_date": 1519918262, "answer_id": 49053123, "question_id": 49052136, "link": "https://stackoverflow.com/questions/49052136/couldnt-install-filepath-library-with-cpan/49053123#49053123", "title": "Couldn&#39;t install File::Path library with cpan", "body": "<p>This test failure is a known problem on centos 7, try the patch on RT.</p>\n\n<p><a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=121967\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Public/Bug/Display.html?id=121967</a></p>\n"}], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 49053123, "answer_count": 1, "score": 0, "last_activity_date": 1519918262, "creation_date": 1519915395, "last_edit_date": 1519916615, "question_id": 49052136, "link": "https://stackoverflow.com/questions/49052136/couldnt-install-filepath-library-with-cpan", "title": "Couldn&#39;t install File::Path library with cpan", "body": "<p></p>\n\n<p>I am unable to install <code>File::Path</code> library using <code>cpan</code>. What is wrong?</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># perl -v\n\nThis is perl 5, version 26, subversion 1 (v5.26.1) built for x86_64-linux\n\nCopyright 1987-2017, Larry Wall\n\nPerl may be copied only under the terms of either the Artistic License or the\nGNU General Public License, which may be found in the Perl 5 source kit.\n\nComplete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at http://www.perl.org/, the Perl Home Page.\n\n# cpan -v\n/usr/bin/cpan script version 1.66, CPAN.pm version 2.18\n</code></pre>\n\n<p>Is there some other way how to make it installed or is there some workaround?</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># cpan install File::Path\nReading '/root/.cpan/Metadata'\n  Database was generated on Thu, 01 Mar 2018 13:17:03 GMT\nRunning install for module 'File::Path'\nCPAN: Digest::SHA loaded ok (v6.01)\nCPAN: Compress::Zlib loaded ok (v2.074)\nChecksum for /root/.cpan/sources/authors/id/J/JK/JKEENAN/File-Path-2.15.tar.gz ok\nCPAN: YAML loaded ok (v1.24)\nCPAN: CPAN::Meta::Requirements loaded ok (v2.140)\nCPAN: Parse::CPAN::Meta loaded ok (v2.150010)\nCPAN: CPAN::Meta loaded ok (v2.150010)\nCPAN: Module::CoreList loaded ok (v5.20180220)\nConfiguring J/JK/JKEENAN/File-Path-2.15.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for File::Path\nWriting MYMETA.yml and MYMETA.json\n  JKEENAN/File-Path-2.15.tar.gz\n  /root/localperl/bin/perl Makefile.PL -- OK\nRunning make for J/JK/JKEENAN/File-Path-2.15.tar.gz\ncp lib/File/Path.pm blib/lib/File/Path.pm\nManifying 1 pod document\n  JKEENAN/File-Path-2.15.tar.gz\n  /usr/bin/make -- OK\nRunning make test\nPERL_DL_NONLAZY=1 \"/root/localperl/bin/perl\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/Path-Class.t .. ok     \nt/Path.t ........ ok       \nt/Path_root.t ... 1/11 \n#   Failed test 'created a directory not owned by 1:inpuu...'\n#   at t/Path_root.t line 77.\n#                   'unable to map inpuu to a gid, group ownership not changed:  at t/Path_root.t line 72.\n# '\n#     doesn't match '(?^s:unable to map 1 to a uid, ownership not changed:)'\n# Looks like you failed 1 test of 11.\nt/Path_root.t ... Dubious, test returned 1 (wstat 256, 0x100)\nFailed 1/11 subtests \nt/Path_win32.t .. skipped: not win32\nt/taint.t ....... ok   \n\nTest Summary Report\n-------------------\nt/Path_root.t (Wstat: 256 Tests: 11 Failed: 1)\n  Failed test:  8\n  Non-zero exit status: 1\nFiles=5, Tests=214,  2 wallclock secs ( 0.05 usr  0.01 sys +  0.36 cusr  0.09 csys =  0.51 CPU)\nResult: FAIL\nFailed 1/5 test programs. 1/214 subtests failed.\nmake: *** [test_dynamic] Error 255\n  JKEENAN/File-Path-2.15.tar.gz\n  /usr/bin/make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports JKEENAN/File-Path-2.15.tar.gz\n</code></pre>\n"}, {"tags": ["regex", "perl", "smartmatch"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1519914769, "post_id": 49051880, "comment_id": 85108253, "body": "Can you show how you retrieve the <code>$regexFromFile</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1519918430, "post_id": 49051880, "comment_id": 85110919, "body": "Worse, smartmatch is known to be broken. <b>It&#39;s useless to ask why broken code behaves as it does.</b>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1519920408, "post_id": 49052436, "comment_id": 85112309, "body": "@amon: Your comment is confusing people. My post says <i>&quot;Smartmatch has been experimental since v5.18&quot;</i>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1519917334, "last_edit_date": 1519917334, "creation_date": 1519916306, "answer_id": 49052436, "question_id": 49051880, "link": "https://stackoverflow.com/questions/49051880/why-is-this-regex-from-a-text-file-not-working-with-smartmatch/49052436#49052436", "title": "Why is this regex from a text file not working with smartmatch?", "body": "<p><em>Smartmatch</em> has been <em>experimental</em> since v5.18 and should never have been used in live production software</p>\n\n<p>It has always required</p>\n\n<pre><code>use feature 'switch';\n</code></pre>\n\n<p>And unless you are someone who consciously or explicitly ignores warnings, with</p>\n\n<pre><code>no warnings qw/ experimental::smartmatch /;\n</code></pre>\n\n<p>then you will have had ample warning of its demise</p>\n\n<p>You have made an informed choice that was clearly wrong from the start</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1519920249, "post_id": 49053293, "comment_id": 85112199, "body": "Who is downvoting any negative comments about <i>smartmatching</i>? From its inception in Perl v5.10 it was a bad idea, and <a href=\"https://perldoc.perl.org/5.10.1/perldelta.html#Smart-match-changes\" rel=\"nofollow noreferrer\">perldelta v5.10.1</a> started the backslide with <code>~~</code> becoming non-commutative, together with consideration of the range operators. It was always a mess, with hope and imagination overruling pragmatism. It was never very Perlish and it has stayed alive for far too long."}, {"owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 2, "creation_date": 1519930865, "post_id": 49053293, "comment_id": 85118289, "body": "My point is that <code>$str ~~ $regexFromFile</code> is not the same as <code>$str ~~ $regex</code>, even though <code>$regexFromFile eq $regex</code> is true..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1519931025, "post_id": 49053293, "comment_id": 85118388, "body": "<code>$regexFromFile eq $regex</code> compares the stringification of its operands, so <code>$regexFromFile eq $regex</code> being true only dictates that <code>$str ~~ &quot;$regexFromFile&quot;</code> (false) and <code>$str ~~ &quot;$regex&quot;</code> (false) should be the same."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1520112895, "last_edit_date": 1520112895, "creation_date": 1519918706, "answer_id": 49053293, "question_id": 49051880, "link": "https://stackoverflow.com/questions/49051880/why-is-this-regex-from-a-text-file-not-working-with-smartmatch/49053293#49053293", "title": "Why is this regex from a text file not working with smartmatch?", "body": "<p>Smartmatching is broken. Please avoid using it.<sup>[1]</sup></p>\n\n<p><code>$str</code> is a string, and <code>$regexFromFile</code> is a string, so <code>$str ~~ $regexFromFile</code> is equivalent to <code>$str eq $regexFromFile</code>.</p>\n\n<p>If you wanted <code>$str ~~ $regexFromFile</code> to be equivalent to <code>$str =~ $regexFromFile</code>, you'd have to convert the misnamed <code>$regexFromFile</code> from a string into a regex (e.g. using <code>qr//</code>). Of course, the far better solution is to simply use <code>=~</code>.</p>\n\n<hr>\n\n<ol>\n<li>Many years ago, it was made experimental as a form of deprecation so it could be fixed. Continued use of this broken feature actually prevented a recent effort to fix it.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 8487873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c450a467599dbfa3fd9080e8a4638c5b?s=128&d=identicon&r=PG&f=1", "display_name": "user8487873", "link": "https://stackoverflow.com/users/8487873/user8487873"}, "is_accepted": true, "score": 2, "last_activity_date": 1520036706, "last_edit_date": 1520036706, "creation_date": 1520034827, "answer_id": 49079139, "question_id": 49051880, "link": "https://stackoverflow.com/questions/49051880/why-is-this-regex-from-a-text-file-not-working-with-smartmatch/49079139#49079139", "title": "Why is this regex from a text file not working with smartmatch?", "body": "<p>The result of <code>qr//</code> is actually a <strong>precompiled regular expression</strong>. Copy-pasting the printed regular expression to a file, as you did, then reading it from the file, is not the problem. You would experience the same behavior had you written this line directly in your code:</p>\n\n<pre><code>my $regexFromFile = '(?^:^\\d+, some text\\.$)';\n</code></pre>\n\n<p>If you want to use smatmatch here, I would advise you to do something like the following:</p>\n\n<pre><code>my $str   = '123456, some text.';\nmy $regex = '^\\d+, some text\\.$';\n\n# Manually store this in the file: ^\\d+, some text\\.$\n# Read $regexFromFile from the file\n\nprint 'Does str match regex         using =~ ? ' . ($str =~ /$regex/)         . \"\\n\";\nprint 'Does str match regexFromFile using =~ ? ' . ($str =~ /$regexFromFile/) . \"\\n\";\nprint 'Does str match regex         using ~~ ? ' . ($str ~~ /$regex/)         . \"\\n\";\nprint 'Does str match regexFromFile using ~~ ? ' . ($str ~~ /$regexFromFile/) . \"\\n\";\n</code></pre>\n\n<p>Note the additional <code>/.../</code>. Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Does str match regex         using =~ ? 1\nDoes str match regexFromFile using =~ ? 1\nDoes str match regex         using ~~ ? 1\nDoes str match regexFromFile using ~~ ? 1\n</code></pre>\n"}], "owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 49079139, "answer_count": 3, "score": 0, "last_activity_date": 1520112895, "creation_date": 1519914619, "last_edit_date": 1519992497, "question_id": 49051880, "link": "https://stackoverflow.com/questions/49051880/why-is-this-regex-from-a-text-file-not-working-with-smartmatch", "title": "Why is this regex from a text file not working with smartmatch?", "body": "<p>I use\n<a href=\"https://perlmaven.com/smart-matching-in-perl-5.10\" rel=\"nofollow noreferrer\"><em>smartmatch</em></a>\nto check whether a string matches a regex pattern. It stopped working after I decided to store the regex in a text file.</p>\n\n<pre><code>my $str   = '123456, some text.';\nmy $regex = qr/^\\d+, some text\\.$/;\nprint \"Regex: $regex\\n\";\n</code></pre>\n\n<p>At this point, the printed regex is <code>(?^:^\\d+, some text\\.$)</code>. I copy-paste it into a file, then I make the code read the file and retrieve the regex, which is stored in <code>$regexFromFile</code>.</p>\n\n<p>The following line confirms that <code>$regex</code> and <code>$regexFromFile</code> are the same, then I proceed to test <code>$str</code> against the regex in various ways.</p>\n\n<pre><code>print 'Is regex equal to regexFromFile? ' . ($regex eq $regexFromFile) . \"\\n\";\n\nprint 'Does str match regex         using =~ ? ' . ($str =~ $regex)         . \"\\n\";\nprint 'Does str match regexFromFile using =~ ? ' . ($str =~ $regexFromFile) . \"\\n\";\nprint 'Does str match regex         using ~~ ? ' . ($str ~~ $regex)         . \"\\n\";\nprint 'Does str match regexFromFile using ~~ ? ' . ($str ~~ $regexFromFile) . \"\\n\";\n</code></pre>\n\n<p>The last line of that code does not behave the same as the previous three lines.</p>\n\n<p>Here is the complete output of the code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Regex: (?^:^\\d+, some text\\.$)\nIs regex equal to regexFromFile? 1\nDoes str match regex         using =~ ? 1\nDoes str match regexFromFile using =~ ? 1\nDoes str match regex         using ~~ ? 1\nDoes str match regexFromFile using ~~ ? \n</code></pre>\n\n<p>(Note the absence of <code>1</code> at the end.)</p>\n\n<p>Edit: To answer a comment, here is how the file is read.</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>open(my $FILEHANDLE, 'file.txt') or die \"Error: Could not open file.\\n\";\nmy @content = &lt;$FILEHANDLE&gt;;\nclose($FILEHANDLE) or print \"Could not close file.\\n\";\nmy @content_woEol = ();\nforeach my $line (@content){\n    $line =~ s/\\s*$//;\n    push(@content_woEol, $line);\n}\nmy $regexFromFile = $content_woEol[0];\n</code></pre>\n"}, {"tags": ["perl", "sha", "mason"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1519915117, "post_id": 49051130, "comment_id": 85108474, "body": "This is a comment rather than an answer because I am guessing. But it&#39;s a very informed guess, and I am sure that anything outside <i>Mason</i> markup <code>&lt;%tag&gt; ... &lt;&#47;%tag&gt;</code> is copied literally, just like PHP. I&#39;m unsure whether it&#39;s possible to <code>use</code> modules from within a Mason template, but it seems wrong in every way even if it works. Try moving <code>use Digest::SHA qw(sha256_hex)</code> to your Perl code."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1519923171, "post_id": 49051130, "comment_id": 85114130, "body": "@Borodin: Your assumptions are all correct. And you can use Perl modules within Mason templates and it&#39;s a terrible idea for all the obvious reasons. But it&#39;s how Mason systems seem to be written. I&#39;m speaking as someone who is currently working on a huge Mason codebase that powers one of the UK&#39;s best-known web sites."}], "answers": [{"comments": [{"owner": {"reputation": 574, "user_id": 5254764, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/e8d856f7cdd8b174b25e13a4db1b4d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjiban Bairagya", "link": "https://stackoverflow.com/users/5254764/sanjiban-bairagya"}, "edited": false, "score": 0, "creation_date": 1519979593, "post_id": 49054770, "comment_id": 85135694, "body": "Doing that, my previous error goes away. But I&#39;m still getting a different error now. It says &#39;Can&#39;t locate Digest/SHA.pm in @INC&quot; : <a href=\"https://paste.kde.org/pcm80yyvl\" rel=\"nofollow noreferrer\">paste.kde.org/pcm80yyvl</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 574, "user_id": 5254764, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/e8d856f7cdd8b174b25e13a4db1b4d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjiban Bairagya", "link": "https://stackoverflow.com/users/5254764/sanjiban-bairagya"}, "edited": false, "score": 0, "creation_date": 1519980094, "post_id": 49054770, "comment_id": 85135934, "body": "@SanjibanBairagya: If you have a new question, then you should ask it in a new post. But the error message is pretty clear. It looks like Digest::SHA isn&#39;t installed on your system. Digest::SHA was added to the standard Perl distribution for Perl 5.10. You are using Perl 5.8. I don&#39;t know why you&#39;re using such an old version of Perl, but if you want to stick with that version, then you&#39;ll need to install Digest::SHA from CPAN."}, {"owner": {"reputation": 574, "user_id": 5254764, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/e8d856f7cdd8b174b25e13a4db1b4d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjiban Bairagya", "link": "https://stackoverflow.com/users/5254764/sanjiban-bairagya"}, "edited": false, "score": 0, "creation_date": 1519981705, "post_id": 49054770, "comment_id": 85136756, "body": "Okay. I just called the function directly (without &quot;use&quot;-ing in the beginning) and it worked without having to install any modules. Thanks for your answer."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1519923014, "creation_date": 1519923014, "answer_id": 49054770, "question_id": 49051130, "link": "https://stackoverflow.com/questions/49051130/how-to-create-a-sha-256-hash-of-a-string-in-mason-code/49054770#49054770", "title": "How to create a SHA-256 hash of a string in Mason code?", "body": "<p>In Mason, your Perl code needs to be inside your tags. Anything outside of a tag is just content to be included in the output. So you want something like:</p>\n\n<pre><code>&lt;%init&gt;\n  use Digest::SHA qw(sha256_hex);\n  my $message = 'random content';\n  my $encryptedMsg = sha256_hex($message);\n&lt;/%init&gt;\n</code></pre>\n"}], "owner": {"reputation": 574, "user_id": 5254764, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/e8d856f7cdd8b174b25e13a4db1b4d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjiban Bairagya", "link": "https://stackoverflow.com/users/5254764/sanjiban-bairagya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 49054770, "answer_count": 1, "score": 1, "last_activity_date": 1519981882, "creation_date": 1519912225, "last_edit_date": 1519981882, "question_id": 49051130, "link": "https://stackoverflow.com/questions/49051130/how-to-create-a-sha-256-hash-of-a-string-in-mason-code", "title": "How to create a SHA-256 hash of a string in Mason code?", "body": "<p>I am trying to create a SHA-256 hash of a string in\n<a href=\"https://metacpan.org/pod/Mason\" rel=\"nofollow noreferrer\"><code>Mason</code></a>\nby following the answers to the <em>Stack Overflow</em> question\n<a href=\"https://stackoverflow.com/questions/9991757/sha256-digest-in-perl\"><em>SHA256 digest in perl</em></a>\nand using the\n<a href=\"https://metacpan.org/pod/Digest::SHA\" rel=\"nofollow noreferrer\"><code>Digest::SHA</code></a> module</p>\n\n<p>These are the contents of the file <code>abc.mi</code> that contains that code:</p>\n\n<pre><code>use Digest::SHA qw(sha256_hex);\n&lt;%init&gt;\n    my $message = 'random content';\n    my $encryptedMsg = sha256_hex($message);\n&lt;/%init&gt;\n</code></pre>\n\n<p>But it's throwing the following error:</p>\n\n<pre><code>Undefined subroutine &amp;Safe::Root0::HTML::Mason::Commands::sha256_hex called\n</code></pre>\n\n<p>Any idea why it is considering <code>sha256_hex</code> as undefined even though I defined it at the beginning of the file itself?</p>\n\n<p>Has this got something to do with the fact this is Mason code with extension <code>.mi</code>?</p>\n\n<p>========== EDIT ==========</p>\n\n<p>Here is the solution to my query, after going through the answers posted for this question.</p>\n\n<pre><code>&lt;%init&gt;\n    my $message = 'random content';\n    my $encryptedMsg = Digest::SHA::sha256_hex($message);\n&lt;/%init&gt;\n</code></pre>\n"}, {"tags": ["mysql", "database", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1519894412, "post_id": 49045609, "comment_id": 85096259, "body": "Please indent your code properly so that it is readable. Thanks"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1519912520, "post_id": 49045609, "comment_id": 85106822, "body": "@Mojo: I have cleaned up the formatting of your code to make it easier to follow. You&#39;re welcome, but please do it yourself in the future."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "edited": false, "score": 0, "creation_date": 1519897656, "post_id": 49046202, "comment_id": 85098185, "body": "But my variables are from different subroutines? How can I pass it in a single call?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1519895354, "creation_date": 1519895354, "answer_id": 49046202, "question_id": 49045609, "link": "https://stackoverflow.com/questions/49045609/calculations-cannot-be-performed-by-passed-value-from-two-different-subroutines/49046202#49046202", "title": "Calculations cannot be performed by passed value from two different subroutines to a new subroutine: Perl", "body": "<p>You are making two <em>separate</em> calls to <code>perc</code>, each with only one of the required values in the hash. You can't do that: the subroutine won't \"remember\" a value passed to it across separate calls unless you write the code to do that</p>\n\n<p>You need to collect all the values and pass them in a <em>single</em> call to <code>perc</code></p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1519993670, "last_edit_date": 1519993670, "creation_date": 1519991346, "answer_id": 49068509, "question_id": 49045609, "link": "https://stackoverflow.com/questions/49045609/calculations-cannot-be-performed-by-passed-value-from-two-different-subroutines/49068509#49068509", "title": "Calculations cannot be performed by passed value from two different subroutines to a new subroutine: Perl", "body": "<p>There are rather a lot of misunderstandings here. Let's go through your code.</p>\n\n<pre><code>use CGI;\n</code></pre>\n\n<p>Using CGI.pm is a bit dated, but it's not a terrible idea if you're writing a CGI program. But this isn't a CGI program, so this isn't necessary.</p>\n\n<pre><code>print \"Enter sequence\";\nmy $seq = &lt;STDIN&gt;;\nchomp $seq;\n$len = length $seq;\nmy $f = nuc($seq);\n</code></pre>\n\n<p>This looks OK. You prompt the user, get some input, remove the newline from the end of the input, get the length of the input and then pass your input into <code>nuc()</code>.</p>\n\n<p>So, let's look at <code>nuc()</code> - which could probably have a better name!</p>\n\n<pre><code>sub nuc {\n  my ($c) = @_;\n  chomp $c;\n  my $len = length $c;\n  for (my $i = 0; $i&lt; = $len; $i++) {\n    my $seq2 = substr($c, $i, 1);\n    $nuc=$nuc . $seq2;\n    chomp $nuc; \n  }\n  my $l = perc({nuc =&gt; $nuc});\n}\n</code></pre>\n\n<p>You get the parameter that has been passed in and remove the newline from the end of it (which does nothing as this is <code>$seq</code> which has already had its newline removed). You then get the length of this string (again!)</p>\n\n<p>Then it gets very strange. Firstly, there's a syntax error (<code>&lt; =</code> should be <code>&lt;=</code>). Then you use a C-style for loop together with <code>substr()</code> too... well, basically you just copy <code>$c</code> to <code>$nuc</code> in a really inefficient manner. So this subroutine could be written as:</p>\n\n<pre><code>sub nuc {\n  my ($c) = @_;\n  $nuc = $c;\n  my $l = perc({ nuc =&gt; $nuc });\n}\n</code></pre>\n\n<p>Oh, and I don't know why you <code>chomp($nuc)</code> each time round the loop.</p>\n\n<p>Two more strange things. Firstly, you don't declare <code>$nuc</code> anywhere, and you have <code>use strict</code> in your code. Which means that this code doesn't even compile. (Please don't waste our time with code that doesn't compile!) And secondly, you don't explicitly return a value from <code>nuc()</code>, but you store the return value in <code>$f</code>. Because of the way Perl works, this subroutine will return the value in <code>$l</code>. But it's best to be explicit.</p>\n\n<p>Then there's your <code>perc()</code> subroutine.</p>\n\n<pre><code>sub perc {\n  my $params = shift;\n  my $k = $params-&gt;{nuc};\n  my $w = $params-&gt;{len};\n  my $db = \"hnf1a\";\n  my $user = \"root\";\n  my $password = \"\";\n  my $host = \"localhost\";\n  my $dbh = DBI-&gt;connect(\"DBI:mysql:database=$db:$host\",$user,$password);\n  my $sth = $dbh-&gt;prepare('SELECT COUNT(*) FROM mody where nm = ?');\n  for (1..100) {\n    $sth-&gt;execute(int(rand(10)));\n  }\n  chomp (my $input = $k);\n  my @num = split /':'/, $input;\n  for my $num(@num)  {\n    say \"rows matching input nuc &lt;$num&gt;:\";\n    $sth-&gt;execute($num);\n    my $count = $sth-&gt;fetchrow_array;\n    say \"$count\";\n    $u += $count;\n  }\n}\n</code></pre>\n\n<p>You get the hash ref which is passed in an store that in <code>$params</code>. You then extract the <code>nuc</code> and <code>len</code> values from that hash and store them in variables called <code>$k</code> and <code>$w</code> (you really need to improve your variable and subroutine names!) But each call to <code>perc</code> only has one of those values set - so only one of your two variables get a value, the other will  be <code>undef</code>.</p>\n\n<p>So then you connect to the database. And you run a select query a hundred times passing in random integers between 0 and 9. And ignore the value returned from the select statement. Which is bizarre and pointless.</p>\n\n<p>Eventually, you start doing something with one of your input parameters, <code>$k</code> (the other, <code>$w</code>, is completely ignored). You copy it into another scalar variable before splitting it into an array. You then run the same SQL select statement once for each element in that array and add the number you get back to the running total in <code>$u</code>. And <code>$u</code> is another variable that you never declare, so (once again) this code doesn't compile.</p>\n\n<p>Outside of your subroutines, you then do some simple maths with <code>$u</code> (an undeclared variable) and <code>$w</code> (a variable that was declared in a different scope) and store the result in <code>$h</code> (another undeclared variable).</p>\n\n<p>I really don't understand what this code is supposed to do. And, to be honest, I don't think you do too. If you're at school, then you need to go back to your teacher and say that you have no idea what you are doing. If you're in a job, you need to tell your boss that you're not the right person for this task.</p>\n\n<p>Either way, if you want to be a programmer, you need to go right back to the start and cover the very basics again.</p>\n"}], "owner": {"reputation": 1, "user_id": 9417894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7c248b842a66afa447d21436634bc?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/9417894/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1519993670, "creation_date": 1519893360, "last_edit_date": 1519912466, "question_id": 49045609, "link": "https://stackoverflow.com/questions/49045609/calculations-cannot-be-performed-by-passed-value-from-two-different-subroutines", "title": "Calculations cannot be performed by passed value from two different subroutines to a new subroutine: Perl", "body": "<p>I used an anonymous hash to pass value from two different subroutines to a new subroutine. But, now I'm not able to perform calculations using the passed variables.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse DBI;\nuse autodie;\nuse Data::Dumper;\nuse CGI;\n\nprint \"Enter sequence\";\nmy $seq = &lt;STDIN&gt;;\nchomp $seq;\n$len = length $seq;\nmy $f = nuc($seq);\nperc({ len =&gt; $len });\n\nsub nuc {\n  my ($c) = @_;\n  chomp $c;\n  my $len = length $c;\n  for (my $i = 0; $i&lt; = $len; $i++) {\n    my $seq2 = substr($c, $i, 1);\n    $nuc=$nuc . $seq2;\n    chomp $nuc; \n  }\n  my $l = perc({nuc =&gt; $nuc});\n} \n\nsub perc {\n  my $params = shift;\n  my $k = $params-&gt;{nuc};\n  my $w = $params-&gt;{len};\n  my $db = \"hnf1a\";\n  my $user = \"root\";\n  my $password = \"\";\n  my $host = \"localhost\";\n  my $dbh = DBI-&gt;connect(\"DBI:mysql:database=$db:$host\",$user,$password);\n  my $sth = $dbh-&gt;prepare('SELECT COUNT(*) FROM mody where nm = ?');\n  for (1..100) {\n    $sth-&gt;execute(int(rand(10)));\n  }\n  chomp (my $input = $k);\n  my @num = split /':'/, $input;\n  for my $num(@num)  {\n    say \"rows matching input nuc &lt;$num&gt;:\";\n    $sth-&gt;execute($num);\n    my $count = $sth-&gt;fetchrow_array;\n    say \"$count\";\n    $u += $count;\n  }\n} \n$h = $u / $w;\nprint $h;\n</code></pre>\n\n<p>I passed the variables : $nuc and $len to the last subroutine 'perc' by declaring an anonymous hash. \nWhen I use these variables to perform calculations I don't get a proper answer.\nFor the above division performed I got a statement as 'Illegal division'.</p>\n\n<p>Please help me out. Thanks in advance.</p>\n"}, {"tags": ["regex", "linux", "perl"], "comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 1, "creation_date": 1519898314, "post_id": 49045418, "comment_id": 85098529, "body": "because of  variable length lookbehind other workarounds to use multiple negative lookbehind <code>s&#47;(?&lt;!AA)(?&lt;!\\n)$&#47;\\$&#47;</code>, or use negative lookahead <code>s&#47;(?&lt;!AA)(?!\\z)$&#47;\\$&#47;</code>"}, {"owner": {"reputation": 145, "user_id": 2208483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/NYoWe.png?s=128&g=1", "display_name": "Adze", "link": "https://stackoverflow.com/users/2208483/adze"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1519900374, "post_id": 49045418, "comment_id": 85099695, "body": "@NahuelFouilleul, why does that work? Are multiple lookbehinds naturally ORed?"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1519901029, "post_id": 49045418, "comment_id": 85100123, "body": "each lookbehind adds a new constraint so is more restricive like <code>and</code> condition : when cursor position matches <code>$</code> the first lookbehind tells engine to check the two last char are not <code>AA</code>, the second checks that the last char is not <code>\\n</code>, about the other workaround the second check is a lookahead to check it&#39;s not anchored to the very end of input"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1519901503, "post_id": 49045418, "comment_id": 85100384, "body": "otherwise as <code>$</code> doesn&#39;t match exactly what is expected it can just be changed to <code>(?=\\n)</code> : <code>echo -e &quot;AA\\nBB\\nCC\\nDD&quot; | perl -pe &#39;s&#47;(?&lt;!AA)(?=\\n)&#47;\\$&#47;&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 0, "creation_date": 1519893357, "post_id": 49045574, "comment_id": 85095738, "body": "I have tried your command but it still gives me:  <code>echo -e &quot;hello\\nworld&quot; | perl -pe &#39;s&#47;\\z&#47;\\$&#47;g&#39;                                                                                                 hello\\n $world\\n $</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 1, "creation_date": 1519893795, "post_id": 49045574, "comment_id": 85095954, "body": "Yes, it is expected since it matches the end of string after <code>\\n</code>. I updated the answer."}, {"owner": {"reputation": 145, "user_id": 2208483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/NYoWe.png?s=128&g=1", "display_name": "Adze", "link": "https://stackoverflow.com/users/2208483/adze"}, "edited": false, "score": 0, "creation_date": 1519895333, "post_id": 49045574, "comment_id": 85096783, "body": "Okay now I&#39;m on the right track. Thanks for removing the confusion."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1519893807, "last_edit_date": 1519893807, "creation_date": 1519893226, "answer_id": 49045574, "question_id": 49045418, "link": "https://stackoverflow.com/questions/49045418/regex-eol-replace-with-perl-is-giving-unexpected-results/49045574#49045574", "title": "Regex EOL replace with perl is giving unexpected results", "body": "<p>The point is that <code>$</code> is a zero-width assertion and it can match before a final newline. Perl reads a line with a trailing <code>\\n</code>, so <code>$</code> matches twice: before and after that.</p>\n\n<p>Your string basically goes to Perl as two lines:</p>\n\n<pre><code>hello\\n\nworld\\n\n</code></pre>\n\n<p>And the <code>$</code> can match both before a final newline and at the very end of the string. Thus, there are two matches in both lines (\"strings\" in this context).</p>\n\n<p>If you want to match the very end of string, use <code>\\z</code>:</p>\n\n<pre><code>perl -pe 's/\\z/\\$/g'\n</code></pre>\n\n<p>since <code>\\z</code> only matches the <em>very</em> end of the string, but it is not likely anyone would want to use that since it will effectively insert a <code>$</code> at the <em>start</em>  of the second and subsequent lines, adding it as the final line as well.</p>\n\n<p>To only insert <code>$</code> before the last <code>\\n</code> and stop, use your <code>perl -pe 's/$/\\$/'</code>, with no <code>g</code> modifier.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 2208483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/NYoWe.png?s=128&g=1", "display_name": "Adze", "link": "https://stackoverflow.com/users/2208483/adze"}, "edited": false, "score": 0, "creation_date": 1519894314, "post_id": 49045654, "comment_id": 85096202, "body": "Yes, there are other ways to do it, but my question is why that is happening? Because it&#39;s not just creating problem for this case, it&#39;s also creating problem in the other cases. I&#39;ll add other cases in my post. Also, your second solution will break if you do: echo -ne &quot;hello\\nworld&quot;"}], "tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": false, "score": 0, "last_activity_date": 1519893993, "last_edit_date": 1519893993, "creation_date": 1519893494, "answer_id": 49045654, "question_id": 49045418, "link": "https://stackoverflow.com/questions/49045418/regex-eol-replace-with-perl-is-giving-unexpected-results/49045654#49045654", "title": "Regex EOL replace with perl is giving unexpected results", "body": "<p>If you really want to use it with the global replace, you can use the following command:</p>\n\n<pre><code>echo -e \"hello\\nworld\" | perl -pe 's/^(.*)$/\\1\\$/g'                                                                                          \nhello$\nworld$\n</code></pre>\n\n<p>or without back-references you can use:</p>\n\n<pre><code>echo -e \"hello\\nworld\" | perl -pe 's/\\n$/\\$\\n/g'\nhello$\nworld$\n</code></pre>\n\n<p>you might need to replace <code>\\n</code> by <code>\\r\\n</code> if you manipulate a file from windows or just use <code>dos2unix</code> to remove Windows EOL chars <code>\\r</code>.</p>\n"}], "owner": {"reputation": 145, "user_id": 2208483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/NYoWe.png?s=128&g=1", "display_name": "Adze", "link": "https://stackoverflow.com/users/2208483/adze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 49045574, "answer_count": 2, "score": 3, "last_activity_date": 1519896294, "creation_date": 1519892648, "last_edit_date": 1519896294, "question_id": 49045418, "link": "https://stackoverflow.com/questions/49045418/regex-eol-replace-with-perl-is-giving-unexpected-results", "title": "Regex EOL replace with perl is giving unexpected results", "body": "<p><strong>Why is there a dollar sign at the starting of line 2 and line 3?</strong>  </p>\n\n\n\n<pre class=\"lang-bash prettyprint-override\"><code>\u279c echo -e \"hello\\nworld\" | perl -pe 's/$/\\$/g'\nhello$\n$world$\n$%\n</code></pre>\n\n<p>Above, I am trying to add a dollar sign at the end of each line, but somehow it's appending a dollar sign at the beginning too. It does that when global flag is enabled. But when I remove the global flag, it works fine:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>\u279c echo -e \"hello\\nworld\" | perl -pe 's/$/\\$/'\nhello$\nworld$\n</code></pre>\n\n<p>Can anyone explain what's happening? Maybe it has something to do with '\\r\\n' characters?</p>\n\n<p><strong>EDIT : Adding the lookbehind case</strong>  </p>\n\n<p>It's not just breaking in this cases, but other cases as well. Consider the following:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>\u279c echo -e \"A\\nB\\nC\\nD\" | perl -pe 's/(?&lt;!A)$/\\$/'\nA\n$B$\nC$\nD$\n</code></pre>\n\n<p>Above, I want to mark rows which don't end in \"A\" with $.\nThe extra dollar sign in line 2 shouldn't be there. I'm not even using global flag.</p>\n\n<hr>\n\n<p><strong>SOLUTION</strong> : Okay got it now. The solution for second one is like this (for explanation, refer to <a href=\"https://stackoverflow.com/a/49045574/2208483\">Wiktor Stribi\u017cew's answer</a>)</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>\u279c echo -e \"A\\nB\\nC\\nD\" | perl -pe 's/(?&lt;!A|\\n)$/\\$/'\nA\nB$\nC$\nD$\n</code></pre>\n\n<p>But <strong>beware</strong>, if you try with more than single characters, it will throw\n<code>Variable length lookbehind not implemented in regex</code>. For example:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>\u279c echo -e \"AA\\nBB\\nCC\\nDD\" | perl -pe 's/(?&lt;!AA|\\n)$/\\$/'\nVariable length lookbehind not implemented in regex m/(?&lt;!AA|\\n)$/ at -e line 1.\n</code></pre>\n\n<p>To solve this, add the appropriate number of <code>.</code> before newline.</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>\u279c echo -e \"AA\\nBB\\nCC\\nDD\" | perl -pe 's/(?&lt;!AA|.\\n)$/\\$/'\nAA\nBB$\nCC$\nDD$\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1519886216, "post_id": 49043824, "comment_id": 85092674, "body": "Please include the text instead of an image, and please do show your code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519887108, "post_id": 49043824, "comment_id": 85092975, "body": "Thank you for the code, but there is still an image of <code>standard.p.config</code>.  Can you please include plain text instead, that can be copied?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1519887143, "post_id": 49043824, "comment_id": 85092991, "body": "<code>switch</code> and <code>case</code> aren&#39;t standard in Perl. Where do they come from?"}, {"owner": {"reputation": 49, "user_id": 9396900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd387abbfe6618dc71844c1b1d20649?s=128&d=identicon&r=PG&f=1", "display_name": "ray", "link": "https://stackoverflow.com/users/9396900/ray"}, "edited": false, "score": 0, "creation_date": 1519888234, "post_id": 49043824, "comment_id": 85093427, "body": "This is a part of an old code that i am trying to use, but execution is not giving me desired results."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1519905889, "post_id": 49043824, "comment_id": 85102828, "body": "This code looks like it should just use a <code>hash</code> and be done with it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519913866, "post_id": 49043824, "comment_id": 85107663, "body": "<i>&quot;This is a part of an old code that i am trying to use&quot;</i> Maybe, but you have also hacked it before showing the result without really knowing what you are doing. At no point does your code write anything to an output file apart from the (presumably diagnostic) <code>Data::Dumper</code> output. This isn&#39;t rocket science: you clearly don&#39;t have any idea what you&#39;re doing so you should employ someone who does, or spend the time to become familiar with the language. <i>Stack Overflow</i> will not give you step-by-step instructions to hack your system into life."}], "answers": [{"comments": [{"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1519904632, "post_id": 49045237, "comment_id": 85102078, "body": "To add a minor comment in the analytical answer ot zdim. Do not open, write and close your file in your while loop, do it after. You have your hash defined correctly outside of the loop then simply finish your loop and dump the data as you do after! Currently you wright again and again on your file after every single line."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1519914030, "post_id": 49045237, "comment_id": 85107776, "body": "@Thanos: I don&#39;t think overwriting the debug file is a major consideration, it just underlines that the OP hasn&#39;t a clue what they&#39;re doing. There is no code shown here that influences the problematic output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519914229, "post_id": 49045237, "comment_id": 85107912, "body": "<i>&quot;I suggest to switch to using simple <code>if-elsif</code> instead&quot;</i> @zdim: Or even just a <i>hash</i>, or <a href=\"https://metacpan.org/pod/String::Interpolate\" rel=\"nofollow noreferrer\"><code>String::Interpolate</code></a>? Honestly, I&#39;m surprised at you: you know much better than this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1519942290, "post_id": 49045237, "comment_id": 85123996, "body": "@Thanos  Thank you, edited (along with a considerable expansion)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519942616, "post_id": 49045237, "comment_id": 85124142, "body": "@Borodin 1. Thank you for the criticism, edited (rewritten, rather).  2. Please refrain from qualifications like &quot;<i>cheap and irresponsible</i>&quot;.  I thought that I did address the main point (honestly missing a couple of others) and I don&#39;t know what being (more) &quot;responsible&quot; would imply.  I don&#39;t know what &quot;<i>cheap</i>&quot; even means, except that it sure seems offensive.  You mean like a cheap shot for points?  Seriously?  On this question?  (You should know me better than that, btw.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519942818, "post_id": 49045237, "comment_id": 85124242, "body": "@Borodin As for other approaches -- sure, there are many, but <i>I chose to suggest the cascading <code>if</code> specifically</i>.  What does that choice (of mine) have to do with &quot;knowing better than this&quot;?  Btw, a hash wouldn&#39;t help much since they need to deal with each particular tag.  And while that module seems very interesting I don&#39;t see how it relates to this question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1519942959, "post_id": 49045237, "comment_id": 85124314, "body": "@Borodin Btw, I did address their concern that indentation be kept (by commenting that <code>split &#47;:&#47;</code> preserved it). While the original post did need more work, thank you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519948809, "post_id": 49045237, "comment_id": 85126343, "body": "@ray Re-written the answer.  It prints the correct output in my tests, judged by what I can infer from the question and with literal strings instead of (undefined) variables, but please let me know how it works for you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 9396900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd387abbfe6618dc71844c1b1d20649?s=128&d=identicon&r=PG&f=1", "display_name": "ray", "link": "https://stackoverflow.com/users/9396900/ray"}, "edited": false, "score": 0, "creation_date": 1520370512, "post_id": 49045237, "comment_id": 85285230, "body": "@ray Great :)   Let me know if things/questions pop up"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1520014156, "last_edit_date": 1520014156, "creation_date": 1519891837, "answer_id": 49045237, "question_id": 49043824, "link": "https://stackoverflow.com/questions/49043824/populating-a-configuration-file/49045237#49045237", "title": "Populating a configuration file", "body": "<p>There are a few direct errors and they are addressed first. A few comments are at the end.</p>\n\n<p><strong>The <code>case</code> statement</strong></p>\n\n<p>When you use <code>case</code> value under quotes (<code>\"...\"</code>) it is tested for equality to the <code>switch</code> value, and in this case it is tested for string equality with <code>eq</code>. </p>\n\n<p>But all of your <code>$word1</code> have leading spaces, preserved by <code>split /:/</code>. This satisfies your requirement to keep them, but none of the <code>case</code> values have leading space so the tests fail. </p>\n\n<p>You want to use a regex match instead</p>\n\n<pre><code>switch ($word1) {\n    case /\\bLPAR_LPAR1_NAME\\b/ { $word2 = $host1 }\n    ...\n}\n</code></pre>\n\n<p>which means <code>$word1 =~ m/\\bLPAR_LPAR1_NAME\\b/</code> and will match, according to your file.  </p>\n\n<p>The <em>word boundary</em>  anchor <code>\\b</code> is needed to distinguish strings containing each other, like <code>host</code> and <code>host1</code> and <code>host1_test_slot</code>.  Thanks to <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> for a comment. See <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> for starters.</p>\n\n<p>It seems that you are using the <a href=\"https://perldoc.perl.org/5.8.9/Switch.html\" rel=\"nofollow noreferrer\">Switch</a> module.  Please note that it is a source filter with very complex behavior. I suggest choosing other constructs.  Below I use a simple cascading <code>if-elsif</code> instead, as the most direct match for <code>switch</code> functionality. </p>\n\n<p><strong>The output file</strong> </p>\n\n<p>is opened and written each time through the loop, each time overwriting the one written in the previous iteration. Write the output file after the loop completes.  Thanks to <a href=\"https://stackoverflow.com/users/2418001/thanos\">thanos</a> for a comment.</p>\n\n<p><strong>Data structure chosen to assemble results</strong></p>\n\n<p>The configuration file clearly relies on the order of lines. In the output the line <code>AUTO_PROVISIONED:</code> must be followed by the same lines that follow it in the input.  However, using a hash to assemble tag-value pairs denies this since the hash in Perl is inherently unordered.  You could use modules keeping order for a hash but it is far simpler to use an array to collect output lines.</p>\n\n<p>Another question in this regard is of what exactly you need to do. Supply only the missing values? There are other ways to do the processing but since the goal is not stated in the question I can only raise the point. I merely replace the <code>switch</code> with its most direct alternative.</p>\n\n<p>You \"dump\" diagnostic output to disk without stating what module is used and I'd rather not guess what provides the <code>Dump</code> function (it's not <a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a>). Instead, why not write a config file?</p>\n\n<p>The variables providing values are undefined so I include only a few cases using string literals.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = 'standard.p.config';\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\"; \n\nmy $outfile = $file . '.new';  \n\nmy @out_lines;\n\nwhile (my $line = &lt;$fh&gt;) { \n    chomp($line);\n\n    (my $word1, my $word2) = split /:/, $line;    #/ preserves indentation\n\n    $_ = $word1;  # for cleaner regex below\n\n    if    (/\\bLPAR_LPAR1_NAME\\b/)     { $word2 = 'host1' } # $host1 not given..\n    elsif (/\\bLPAR_LPAR2_NAME\\b/)     { $word2 = 'host' }\n    elsif (/\\bhost1_test_slot\\b/)     { $word2 = 'host1_test_slot' }\n    ...    \n    elsif (/\\bunicast_test_mac\\b/)    { $word2 = '0x00:11:22:22:33:33' }\n\n    push @out_lines, \"$word1: $word2\";\n}\nclose $fh;\n\nopen my $fh_out, '&gt;', $outfile or die \"Can't open $outfile: $!\";\n\nsay $fh_out $_  for @out_lines;\n\nclose $fh_out;\n</code></pre>\n\n<p>Consider more descriptive variable names instead of <code>$wordN</code> (say, <code>tag</code> and <code>value</code>).  Please replace strings (<code>'host'</code>) with your variables (<code>$host</code>), once they are defined.</p>\n\n<p>Comments</p>\n\n<ul>\n<li><p>Always have <code>use warnings;</code> and <code>use strict;</code> at the top of the program</p></li>\n<li><p>There is no reason to double-quote a variable (<code>$word2 = \"$host1\"</code>); it is evaluated for the assignment anyway. It can only be misleading and even lead to subtle problems</p></li>\n<li><p>Lexical filehandles (<code>my $fh</code>) in <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a> are plain better than globs (<code>FILE1</code>)</p></li>\n<li><p>When using <code>die</code> print the actual error, at least as <code>die $!</code>.\nSee <a href=\"https://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">Error variables in perlvar</a></p></li>\n</ul>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> for comments.</p>\n"}], "owner": {"reputation": 49, "user_id": 9396900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd387abbfe6618dc71844c1b1d20649?s=128&d=identicon&r=PG&f=1", "display_name": "ray", "link": "https://stackoverflow.com/users/9396900/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 49045237, "answer_count": 1, "score": -1, "last_activity_date": 1520273935, "creation_date": 1519885753, "last_edit_date": 1520273935, "question_id": 49043824, "link": "https://stackoverflow.com/questions/49043824/populating-a-configuration-file", "title": "Populating a configuration file", "body": "\n\n<p>I am reading a file <code>standard.p.config</code> whose lines have indentations.</p>\n\n<p>The file contains the fields that must be filled from the servers.</p>\n\n<p>After retrieving the values, the programs create an output file, with field values populated for the fields.</p>\n\n<p>But the output file does not get populated with the correct values when the standard file has indentations.</p>\n\n<p>I require these indentations in the output file for further processing.</p>\n\n<p>The <code>standard.p.config</code> file</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>DESCRIPTION: Config for lddfvt testcases\nAUTO_PROVISIONED:\n  HMC_HMC1_NAME:\n  HMC_HMC1_PASS:abc123\n  MANAGEDMC_MANAGEDMC_NAME:p9zzd-fsp\n  LPAR_LPAR1_NAME:\n  LPAR_LPAR1_PASSWD:passw0rd\n  LPAR_LPAR2_NAME:\n  LPAR_LPAR2_PASSWD:passw0rd\n os_env:AIX\n nodecount:2\n default_host:host1\n default_con_mode:telnet\n host1:$LPAR_LPAR1_NAME\n host1_login:root\n host1_password:$LPAR_LPAR1_PASSWD\n host1_test_slot:\n host1_test_slot1:\n host1_test_slot2:\n exact_match_mcast_counter:32\n host2:$LPAR_LPAR2_NAME\n host2_login:root\n host2_password:$LPAR_LPAR2_PASSWD\n host2_pp_slot:\n host2_pp_slot1:\n back_to_back_setup:\n switch1:\n switch1_vendor:BNT\n switch1_login:admin\n switch1_password:admin\n host1_switch1_port1:\n host1_switch1_port2:\n host2_switch1_port1:\n host1_test_ip1:\n host2_test_ip1:\n host1_test_ip2:\n host2_test_ip2:\n ip_netmask:255.255.255.0\n mcast_ip1:225.1.2.6\n mcast_ip2:225.1.2.7\n unicast_test_mac:0x00:11:22:22:33:33\n vlan_tag_id:\n vlan_tag_id2:\n long_run_duration:1\n eid_run_duration:1\n FIRING_NODE:$LPAR_LPAR3_NAME\nSCRIPTS: ~\n</code></pre>\n\n<p>Until <code>LPAR_LPAR2_PASSWD</code> it has two indentations, and after that one indentation per line.</p>\n\n<p>This the code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>open FILE1, \"/home/jenkins/config/standard.p.config\" or die;\n\nmy %hash;\n\nwhile ( my $line = &lt;FILE1&gt; ) {\n    chomp( $line );\n\n    ( my $word1, my $word2 ) = split /:/, $line;    #/\n    my $config_filename = \"/home/jenkins/config/$filename\";\n\n    # write a switch to match your variable and fill in place of word2;\n    # if paattn matches then $word2=$var;\n\n    # $hash{$word1} = $word2;\n\n    switch ( $word1 ) {\n        case \"LPAR_LPAR1_NAME\"     { $word2 = \"$host1\" }\n        case \"LPAR_LPAR2_NAME\"     { $word2 = \"$host2\" }\n        case \"host1_test_slot\"     { $word2 = \"$host1_test_slot\" }\n        case \"host1_test_slot1\"    { $word2 = \"$host1_test_slot1\" }\n        case \"host1_test_slot2\"    { $word2 = \"$host1_test_slot2\" }\n        case \"host2_pp_slot\"       { $word2 = \"$host2_pp_slot\" }\n        case \"host2_pp_slot1\"      { $word2 = \"$host2_pp_slot1\" }\n        case \"switch1\"             { $word2 = \"$Switch_IP\" }\n        case \"host1_switch1_port1\" { $word2 = \"$host1_switch1_port1\" }\n        case \"host1_switch1_port2\" { $word2 = \"$host1_switch1_port2\" }\n        case \"host2_switch1_port1\" { $word2 = \"$host2_switch1_port1\" }\n        case \"host1_test_ip1\"      { $word2 = \"$host1_test_ip1\" }\n        case \"host1_test_ip2\"      { $word2 = \"$host1_test_ip2\" }\n        case \"host2_test_ip1\"      { $word2 = \"$host2_test_ip1\" }\n        case \"host2_test_ip2\"      { $word2 = \"$host2_test_ip2\" }\n        case \"vlan_tag_id\"         { $word2 = \"$vlan_tag_id\" }\n        case \"vlan_tag_id2\"        { $word2 = \"$vlan_tag_id2\" }\n        case \"back_to_back_setup\"  { $word2 = \"$back_to_back_setup\" }\n        case \"vlan_tag_id2\"        { $word2 = \"$vlan_tag_id2\" }\n        case \"back_to_back_setup\"  { $word2 = \"$back_to_back_setup\" }\n        case \"HMC_HMC1_NAME\"       { $word2 = \"$HMC_HMC1_NAME\" }\n        case \"unicast_test_mac\"    { $word2 = \"0x00:11:22:22:33:33\" }\n    }\n\n    $hash{$word1} = $word2;\n\n    open( my $fh, '&gt;', $config_filename ) or die \"Could not open file '$config_filename' $!\";\n    print $fh Dump \\%hash;\n    close $fh;\n}\n</code></pre>\n"}, {"tags": ["windows", "postgresql", "perl", "database-backups", "pg-dump"], "answers": [{"comments": [{"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "edited": false, "score": 0, "creation_date": 1519889880, "post_id": 49044048, "comment_id": 85094135, "body": "What about schemas?"}], "tags": [], "owner": {"reputation": 18956, "user_id": 473770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yU6Hb.jpg?s=128&g=1", "display_name": "Wes Hardaker", "link": "https://stackoverflow.com/users/473770/wes-hardaker"}, "is_accepted": false, "score": -1, "last_activity_date": 1519886856, "creation_date": 1519886856, "answer_id": 49044048, "question_id": 49043542, "link": "https://stackoverflow.com/questions/49043542/perl-script-that-does-a-pg-dumpall-of-postgres/49044048#49044048", "title": "perl script that does a pg_dumpall of postgres", "body": "<p>You should be able to do this using a select statement to the tables:</p>\n\n<pre><code>$tableh = $dbh-&gt;prepare(\"SELECT tablename FROM pg_catalog.pg_tables\");\n$tables = $tableh-&gt;fetchall_arrayref();\n$tableh-&gt;finish();\n</code></pre>\n\n<p>This will give you a list of tables from postgres, which you can thin modify your foreach loop as follows:</p>\n\n<pre><code>foreach $table_ref (@$tables) {\n    my $table = $table_ref-&gt;[0];\n</code></pre>\n\n<p>And continue on from there.</p>\n\n<p>Note that this probably isn't the correct way to back up a database and you probably should use <code>pg_dumpall</code> instead.  But I don't know what your requirements are so...  here ya go!</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9363407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5483f5a119ba7410624ba000e22642d?s=128&d=identicon&r=PG&f=1", "display_name": "mk2000", "link": "https://stackoverflow.com/users/9363407/mk2000"}, "is_accepted": false, "score": 0, "last_activity_date": 1520831259, "creation_date": 1520831259, "answer_id": 49228435, "question_id": 49043542, "link": "https://stackoverflow.com/questions/49043542/perl-script-that-does-a-pg-dumpall-of-postgres/49228435#49228435", "title": "perl script that does a pg_dumpall of postgres", "body": "<p>After some thinking and the feedback here I decided to just start new with a batch script using the pg_dump command since this would allow a binary dump format and restoration with pg_restore. </p>\n\n<p>To not overfill my drive and to keep a max of 31 days of backups I have the script name each backup with the day of the month only (i.e. \"10.dump\", \"21.dump\", \"31.dump\", etc). </p>\n\n<p>Subsequent backups of the same name would simply be overwritten.</p>\n\n<p>Windows Task Scheduler would take care of launching the script:</p>\n\n<pre><code>@echo OFF\nREM Script that does a pg_dump binary backup of the commerce database\n\nREM passes the password to the pg_dump command\nSET PGPASSWORD=password1\n\nREM switch to Z drive\nZ:\n\nREM switch to bin directory where pg_dump lives\ncd Z:\\PostgreSQL\\9.6\\bin\n\nREM pg_dump command which names dump backup of commerce db as the day of the month 1-31. This way we only keep 31 days of backup and do not overfill Z drive\n\npg_dump.exe -U someadmin -F c -d commerce &gt; \"Z:\\PostgreSQL\\Backups_pg_dump\\%DATE:~-7,2%.dump\"\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9363407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5483f5a119ba7410624ba000e22642d?s=128&d=identicon&r=PG&f=1", "display_name": "mk2000", "link": "https://stackoverflow.com/users/9363407/mk2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520831259, "creation_date": 1519884370, "question_id": 49043542, "link": "https://stackoverflow.com/questions/49043542/perl-script-that-does-a-pg-dumpall-of-postgres", "title": "perl script that does a pg_dumpall of postgres", "body": "<p>Not sure if this script is original or from an internet source but I inherited this for a Windows system that's running PostgreSQL.</p>\n\n<p>However this script only backs up individual tables. I would like to modify it so that it does a pg_dumpall of the Postgres so that everything is included (such as user accounts, etc). </p>\n\n<p>Is this possible to do with the existing script?</p>\n\n<pre><code>#\nuse DBI;\nuse Time::Piece;\n\n$t = localtime;\nchomp($todays_date = $t-&gt;mday);\n@tables = ('orders', 'customer', 'rates');\n$dir = \"Z:\\\\PostgreSQL\\\\Backups\";\n$dbh = DBI-&gt;connect(\"dbi:Pg:dbname=commerce\", \"someadmin\", \"password1\") || die \"$DBI::errstr\";\n\nforeach $table(@tables)\n{\n    $file = \"$dir\\\\$table.dump_$todays_date\";\n#    $type = ( -d $file) ? \"dir\" : \"file\";\n    if( -e $file)\n    {\n        print \"Deleting $file\\n\";\n        unlink($file);\n    }\n    print \"Dumping $table\\n\";\n    $file =~ s/\\\\/\\//g;\n    $sth = $dbh-&gt;prepare(\"COPY $table to '$file'\");\n    $sth-&gt;execute();\n}\n$dbh-&gt;disconnect();\n</code></pre>\n"}]