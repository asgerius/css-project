[{"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1511974361, "post_id": 47555148, "comment_id": 82073217, "body": "Look into Try::Tiny and consider putting that section into a &quot;try&quot; block, then you can add your own error handling on top of it later if you want."}], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "edited": false, "score": 0, "creation_date": 1511970375, "post_id": 47556466, "comment_id": 82070578, "body": "Excellent. Thank you. I should&#39;ve thought about localize it as RaiseError attribute."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1511969783, "creation_date": 1511969783, "answer_id": 47556466, "question_id": 47555148, "link": "https://stackoverflow.com/questions/47555148/perl-disable-dbi-handleerror-in-certain-sections/47556466#47556466", "title": "PERL - Disable DBI HandleError in certain sections", "body": "<p>The <a href=\"https://metacpan.org/pod/DBI#HandleError\" rel=\"noreferrer\"><code>HandleError</code> attribute</a> can be changed at all times. Since you access it directly by going into the hash reference inside your <code>$dbh</code>, you can simply <a href=\"http://perldoc.perl.org/functions/local.html\" rel=\"noreferrer\"><code>local</code></a>ize it.</p>\n\n<pre><code>for my $table (@db_tables){\n    local $dbh-&gt;{HandleError}; # it's now undef\n    $dbh-&gt;do(\"delete from $table\") \n          or do{ Log(\"ERROR: Delete failed\"); next };\n\n    Log(\"Table [$table] content was deleted\");\n}\n</code></pre>\n\n<p>A better implementation would be to handle the error properly, and to only set the localization once. For that, create an outer scope around your loop.</p>\n\n<pre><code>{\n    local $dbh-&gt;{HandleError} = sub {\n        my (undef, $error) = @_\n        Log(\"ERROR: Delete failed ($error)\");\n    };\n\n    for my $table (@db_tables){\n        $dbh-&gt;do(\"delete from $table\") \n            and Log(\"Table [$table] content was deleted\");\n    }\n}\n</code></pre>\n\n<p>In both cases, the value will only be overridden while code in this scope and any scopes inside it is run. Once the scope is over, it will automatically be restored.</p>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 47556466, "answer_count": 1, "score": 1, "last_activity_date": 1511970674, "creation_date": 1511965733, "last_edit_date": 1511970674, "question_id": 47555148, "link": "https://stackoverflow.com/questions/47555148/perl-disable-dbi-handleerror-in-certain-sections", "title": "PERL - Disable DBI HandleError in certain sections", "body": "<p>Is there a way to \"turn off\" the DBI HandleError attribute in Perl in some sections of a script just like RaiseError can be turned off?</p>\n\n<p>Example:</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\"DBI:SQLite:dbname=file.db\",\"\",\"\",{ PrintError =&gt; 0, RaiseError =&gt; 0, \n                                                           HandleError =&gt; sub{ Log(\"ERROR: Something failed in db\"); exit 1 } }) \n        or die \"Couldn't connect\";\n\nfor my $table (@db_tables){\n  $dbh-&gt;do(\"delete from $table\") \n          or do{ Log(\"ERROR: Delete failed\"); next };\n\n  Log(\"Table [$table] content was deleted\");\n}\n\nexit 0;\n</code></pre>\n\n<p>Here I don't want the HandleError to kill the script just because the content of one of those tables could not be deleted. I want to manually handle the error.</p>\n"}, {"tags": ["regex", "perl", "initialization", "regex-group"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 2, "creation_date": 1511964955, "post_id": 47554748, "comment_id": 82066486, "body": "Can you please try to create a simple test case that shows the behaviour? I don&#39;t see anything wrong with this code."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1511965562, "post_id": 47554748, "comment_id": 82066903, "body": "OK, I knew that this would happen ... I&#39;ll try to strip down my real code. Please give me an hour or so ..."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 1, "creation_date": 1511966924, "post_id": 47554748, "comment_id": 82067889, "body": "I now have updated the question with an MCVE."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 3, "creation_date": 1511967320, "post_id": 47554748, "comment_id": 82068212, "body": "It&#39;s clear now. The last <code>$1 =~ ...</code> resets <code>$1</code>, so it&#39;s gone. You probably need to split the condition up and save <code>$1</code> in an extra var"}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1511967384, "post_id": 47554748, "comment_id": 82068267, "body": "@tinita Thanks and +1, but why? There are no parentheses in the second RegEx, so I would not expect <code>$1</code> to be re-assigned."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 3, "creation_date": 1511967716, "post_id": 47554748, "comment_id": 82068549, "body": "Any matching regex will reset the <code>$1, ...</code> variables, which is a good thing, otherwise you would end up with a mixture of digit variables from previous matches..."}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1511968862, "post_id": 47554748, "comment_id": 82069426, "body": "@tinita You were the first to see the problem (although I came to the same idea nearly at the same time :-)). If you make your comment an answer, I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 9, "last_activity_date": 1511969383, "creation_date": 1511969383, "answer_id": 47556335, "question_id": 47554748, "link": "https://stackoverflow.com/questions/47554748/warning-about-uninitailized-variable-despite-check-for-undef/47556335#47556335", "title": "Warning about uninitailized variable despite check for undef", "body": "<p><a href=\"http://perldoc.perl.org/perlvar.html#%24%3C_digits_%3E-%28%241%2C-%242%2C-...%29\" rel=\"noreferrer\">perldoc perlvar</a>:</p>\n\n<blockquote>\n  <p>Contains the subpattern from the corresponding set of capturing parentheses from the last successful pattern match, not counting patterns matched in nested blocks that have been exited already.</p>\n</blockquote>\n\n<p>Since the second match is the last successful pattern match, inside the if block <code>$1</code> is undef.</p>\n\n<p>You could do:</p>\n\n<pre><code>my ($match) = ($String =~ m/^([^\\ ]+).*$/s);\nif (defined $match &amp;&amp; $match =~ m/^.*$Pattern$/s) {\n    print $match.\"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 8, "last_activity_date": 1512065296, "last_edit_date": 1512065296, "creation_date": 1511970000, "answer_id": 47556529, "question_id": 47554748, "link": "https://stackoverflow.com/questions/47554748/warning-about-uninitailized-variable-despite-check-for-undef/47556529#47556529", "title": "Warning about uninitailized variable despite check for undef", "body": "<p>I'm creating an answer from my comments above:</p>\n\n<pre><code>if (($String =~ m/^([^\\ ]+).*$/s) &amp;&amp; # If matching, this will set $1\n    defined($1) &amp;&amp;                   # Here $1 is still defined\n    ($1 =~ m/^.*$Pattern$/s)         # If matching, will reset all $1, .. vars\n) {\n</code></pre>\n\n<p>So, whenever a regex matches, it will reset all digit variables (and other regex related variables).</p>\n\n<p>The only solution I see is to split the condition up and save <code>$1</code> in an extra variable. Which is usually a good thing, anyway.</p>\n\n<pre><code>if ($String =~ m/^([^\\ ]+).*$/s and defined $1) {\n    my $match = $1;\n    if ($match =~ m/^.*$Pattern$/s) { ... }\n}\n</code></pre>\n\n<p>Note that in this case you don't even have to check for <code>defined $1</code> because if this pattern matches, <code>$1</code> will be always defined. It depends on the pattern.</p>\n\n<p><a href=\"https://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perldoc perlvar</a>:</p>\n\n<pre><code>$&lt;digits&gt; ($1, $2, ...)\n        Contains the subpattern from the corresponding set of capturing\n        parentheses from the last successful pattern match [...]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 0, "last_activity_date": 1512046005, "creation_date": 1512046005, "answer_id": 47573882, "question_id": 47554748, "link": "https://stackoverflow.com/questions/47554748/warning-about-uninitailized-variable-despite-check-for-undef/47573882#47573882", "title": "Warning about uninitailized variable despite check for undef", "body": "<p>If you don't know what a complex statement is doing, break it into parts.</p>\n\n<pre><code>if( $String =~ m/^([^\\ ]+).*$/s ){\n    if( defined($1) ){\n        if( $1 =~ m/^.*$Pattern$/s ){\n</code></pre>\n"}], "owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 47556529, "answer_count": 3, "score": 4, "last_activity_date": 1512065296, "creation_date": 1511964566, "last_edit_date": 1511970620, "question_id": 47554748, "link": "https://stackoverflow.com/questions/47554748/warning-about-uninitailized-variable-despite-check-for-undef", "title": "Warning about uninitailized variable despite check for undef", "body": "<p>I seem to be very silly today, or I have a very weird problem. Please consider the following code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse warnings::unused;\nuse warnings FATAL =&gt; 'uninitialized';\n\nmy ($String, $Pattern);\n\n$Pattern = \"pattern\";\n$String = \"pattern\\n\";\n\nif (($String =~ m/^([^\\ ]+).*$/s) &amp;&amp;\n    defined($1) &amp;&amp;\n    ($1 =~ m/^.*$Pattern$/s)) {\n\n  print $1.\"\\n\";\n}\n</code></pre>\n\n<p>This code produces the following warning (and then stops because of <code>use warnings FATAL =&gt; 'uninitialized';</code>):</p>\n\n<pre><code>Use of uninitialized value $1 in concatenation (.) or string at [...]\n</code></pre>\n\n<p>I really don't understand this because I am testing if <code>$1</code> is defined (initialized) before using it. The culprit seems to be the last condition line (i.e. <code>($1 =~ m/^.*$Pattern$/s)</code>). If I leave this away, the warning is gone.</p>\n\n<p>But why? According to my understanding, that line should just <em>test</em> <code>$1</code>, but not change its value (<code>$Pattern</code> and the rest of that RegEx don't contain parentheses, so <code>$1</code> should not be re-assigned a possible match).</p>\n\n<p>Hmmm ... while thinking about it, it comes to my mind that Perl might set <code>$1</code> and its colleagues in <em>every</em> case when a RegEx is matching, whether or not there are parentheses in the RegEx. This would explain the behavior. Is it true?</p>\n"}, {"tags": ["perl", "numbers"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 6, "creation_date": 1511960886, "post_id": 47553501, "comment_id": 82063736, "body": "Comments in Perl are with a <code>#</code>, not with <code>&#47;&#47;</code>. The variables <code>$a</code> and <code>$b</code> are special global variables for <code>sort</code>, please don&#39;t use them."}], "owner": {"reputation": 129, "user_id": 3935366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003286904438/picture?type=large", "display_name": "Artem  Bardachov", "link": "https://stackoverflow.com/users/3935366/artem-bardachov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1511960937, "answer_count": 0, "score": 1, "last_activity_date": 1511960424, "creation_date": 1511960424, "question_id": 47553501, "link": "https://stackoverflow.com/questions/47553501/how-to-convert-number-to-one-type-in-perl", "closed_reason": "Duplicate", "title": "How to convert number to one type in perl", "body": "<p>I have two numbers. One income from web form and one fetched form DB.</p>\n\n<pre><code>my $a = 3701.12 // from DB\nmy $b = 3701.12 // from web form\n</code></pre>\n\n<p>when I try to operate <code>$a - $b</code> result is <code>-9.09494701772928e-13</code>\nI've tried operate like this</p>\n\n<pre><code>my $a = int($a * 100) / 100;\nmy $b = int($b * 100) / 100;\n</code></pre>\n\n<p>result is <code>$a = 3701.11; $b = 3701.12</code></p>\n\n<p>How I should operate with them to get <code>$a - $b == 0</code></p>\n"}, {"tags": ["perl", "unix", "operating-system", "cpu-usage", "multicore"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1512036703, "creation_date": 1512036703, "answer_id": 47570844, "question_id": 47551855, "link": "https://stackoverflow.com/questions/47551855/multi-core-machine-cpu-load-metric/47570844#47570844", "title": "Multi core machine - cpu load metric", "body": "<p>The reason the answer isn't easy to find, is that it depends on the nature of your processes, and which system constraint is your limiting factor.</p>\n\n<p>For CPU intensive work, then the metric to look at is load average - load average is a measure of processes in a runnable state - very roughly if LA is the same as number of cores, then you're running your CPUs at maximum.</p>\n\n<p>However, it's increasingly the case that CPU is not the limiting factor - you may have a finite amount of memory, and memory hungry processes will consume it. 'spare' memory is used for caching, so filling the whole lot up actually starts to slow things down (because you have a smaller cache). Over spilling the available will either cause swapping or OOMkiller. </p>\n\n<p>But as you mention apache and web, then chances are pretty good that your network pipe is a limiting factor - controlling bandwidth from the local host is actually surprisingly hard. </p>\n\n<p>And then there's disk IO - which may also be a factor - I think that's unlikely for a web server, because your outbound network will usually be a tighter limit. </p>\n\n<p>It all depends what your processes are doing - if they're lightweight 'helpers' that are mostly idle, or heavyweight 'grinders' that all introduce noticeable load. </p>\n\n<p>So the best answer I can give is a very vague estimate - if your processes are CPU intensive, cap them at 2 per core. If your processes are memory, aim to consume about 50% of your system RAM. If your processes are IO intensive, aim to consume about 50% of your IO (either network or disk). </p>\n"}], "owner": {"reputation": 3153, "user_id": 7707677, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9af5b483632716d4cc95bfed423161f?s=128&d=identicon&r=PG&f=1", "display_name": "Lokesh Agrawal", "link": "https://stackoverflow.com/users/7707677/lokesh-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 47570844, "answer_count": 1, "score": 1, "last_activity_date": 1512036703, "creation_date": 1511955295, "last_edit_date": 1512017279, "question_id": 47551855, "link": "https://stackoverflow.com/questions/47551855/multi-core-machine-cpu-load-metric", "title": "Multi core machine - cpu load metric", "body": "<p>In a multi core machine what is the best metric to understand whether cpu is loaded or not ?</p>\n\n<p>I have a web application that sends a post request to apache CGI server. CGI server loops over the post data and launches perl process for each of the item in the loop. Since requests from clients ends up hitting a single endpoint, I am concerned if I end up creating lots of processes which my server can't handle. Hence I wanted to understand what system metric should I check before launching a new process from loop.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lxbiu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lxbiu.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note: I have a 20 core machine.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1511949998, "post_id": 47549993, "comment_id": 82056606, "body": "Please <a href=\"https://stackoverflow.com/posts/47549993/edit\">edit</a> your question and include your code as text. We cannot copy code to try to run it from an image. The users here are professional programmers that volunteer their time for free to help you, and you cannot expect them to waste time retyping your program. Thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511950475, "post_id": 47549993, "comment_id": 82056940, "body": "I guess there is a typo somewhere. <code>print XML::Simple-&gt;new-&gt;XMLin(\\*DATA, KeyAttr =&gt; &#39;ns1&#39;)-&gt;{&quot;repairStationId&quot;};</code> with your XML in the <code>__DATA__</code> section produces the correct output."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511950823, "post_id": 47549993, "comment_id": 82057208, "body": "You are also clearly on Windows, so your Linux style shebang is unneeded, and I find it odd that you run your program from <code>D:\\work\\stuff\\stuff&#47;test1.pl</code>. Where is that forward slash <code>&#47;</code> coming from? By the way, please always use <code>use strict</code> and <code>use warnings</code> in your Perl programs and make sure they compile with those. I am pretty sure <code>strict</code> will catch your problem."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511951183, "post_id": 47549993, "comment_id": 82057491, "body": "You&#39;re very good at OCR, @simbabque! ;-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1511951295, "post_id": 47549993, "comment_id": 82057564, "body": "@PerlDuck we practiced speed-typing at the pub after London Perl Workshop with a phone app where you needed to retype some weird text. After a few beers, that gives good practice. ;)"}, {"owner": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511951621, "post_id": 47549993, "comment_id": 82057784, "body": "@simbabque I used the &quot;use warnings&quot; and got the error as follow:use of uninitialized value in print , so what should i do, I am new for perl"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1511953164, "post_id": 47549993, "comment_id": 82058868, "body": "Please <a href=\"https://stackoverflow.com/posts/47549993/edit\">edit</a> your question and <i>copy in your REAL code</i>. I retyped half of it and it worked for me, so you must have a typo in there that we don&#39;t see. The error means exactly what it says. The value you are trying to print in the last line is undefined. That&#39;s probably because of a typo. But without being able to COPY the ACTUAL code I cannot help you spot it. Or you could copy it from my comment above, which works. When I search for the difference between something, besides using a diff tool, I like to copy the other version on a line above mine and indent so they line up. Easy to read."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1511956971, "post_id": 47549993, "comment_id": 82061218, "body": "Vote to close because the picture of the output indicates that <code>$data</code> contains an element <code>repairStationID</code>. The picture of the code shows correct syntax of the two print statements. When retyping the code it works for all of us, so the actual code that produces the error MUST be different from the picture of the code shown. Did you photoshop\u2122 the picture of the code? The problem is not reproducable."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511962648, "post_id": 47551350, "comment_id": 82064899, "body": "It&#39;s not actually 40k yet! But it&#39;s close :D"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511962761, "post_id": 47551350, "comment_id": 82064982, "body": "@simbabque: I know. I noticed that. It definitely passed 40k last week but over the weekend I lost about 50 points for some unexplained reason."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511962912, "post_id": 47551350, "comment_id": 82065098, "body": "Maybe some low-rep user who voted for you got deleted. Look at the positive side. You get to celebrate the 40k twice! :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511973800, "post_id": 47551350, "comment_id": 82072842, "body": "Losing that much is usually due to a user getting deleted."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511975845, "post_id": 47551350, "comment_id": 82074124, "body": "Double celebration sounds good :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511975892, "post_id": 47551350, "comment_id": 82074152, "body": "Looks like I just broke through 40k again. Thanks for the votes people :-)"}, {"owner": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "edited": false, "score": 0, "creation_date": 1512021681, "post_id": 47551350, "comment_id": 82091270, "body": "Thanks a lot @Dave"}, {"owner": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "edited": false, "score": 0, "creation_date": 1512022096, "post_id": 47551350, "comment_id": 82091414, "body": "Thanks a lot, uses your code it work fine now,,and  I will  try to uses XML::LibXML @DaveCross"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "edited": false, "score": 0, "creation_date": 1512026461, "post_id": 47551350, "comment_id": 82093257, "body": "@user: As I said, there&#39;s no effective difference between my code and your original code. If it&#39;s now working, then that&#39;s because you fixed a typo while retyping it."}, {"owner": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "edited": false, "score": 0, "creation_date": 1512035282, "post_id": 47551350, "comment_id": 82097930, "body": "@DaveCross, I met an new issue for it, could you help to have a check for it? thanks a lot."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "edited": false, "score": 0, "creation_date": 1512035648, "post_id": 47551350, "comment_id": 82098154, "body": "@user: If you have a new problem, then post a new question."}, {"owner": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "edited": false, "score": 0, "creation_date": 1512036342, "post_id": 47551350, "comment_id": 82098607, "body": "similar issue, because new issue need 5 days later@DaveCross"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1512036787, "post_id": 47551350, "comment_id": 82098888, "body": "Asking a new question is still the way to go. This one is done with."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "edited": false, "score": 2, "creation_date": 1512037090, "post_id": 47551350, "comment_id": 82099077, "body": "@user: If you contribute usefully to the site - by answering questions to help others, then you will quickly gain the 10 points needed to remove the new user restrictions (which include the bar on posting questions too quickly). If you want to get anything out of the site, you need to put something into it. It&#39;s a lot like life :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1511955910, "last_edit_date": 1511955910, "creation_date": 1511953683, "answer_id": 47551350, "question_id": 47549993, "link": "https://stackoverflow.com/questions/47549993/perl-xmlsimple-print-issue/47551350#47551350", "title": "perl XML::Simple print issue", "body": "<p>Your code works when I try it on my machine. Of course, because you posted a picture of your code rather than posting it as text (I have no idea why people think that is useful - you're just annoying people who you are asking to help you!), I had to re-type your code and it's possible that I \"accidentally\" fixed whatever typo is causing your problem - I suspect a mis-match in capitalisation of the key you are trying to print.</p>\n\n<p>It would also help to know which version of XML::Simple you are using. It's possible that you are running up against a bug that has been fixed in a more recent version.</p>\n\n<p>It's worth pointing out a few things. Firstly, the documentation for <a href=\"https://metacpan.org/pod/XML::Simple\" rel=\"nofollow noreferrer\">XML::Simple</a> contains this text:</p>\n\n<blockquote>\n  <p><strong>STATUS OF THIS MODULE</strong></p>\n  \n  <p>The use of this module in new code is discouraged. Other modules are\n  available which provide more straightforward and consistent\n  interfaces. In particular, <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a> is highly recommended and\n  <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\">XML::Twig</a> is an excellent alternative.</p>\n  \n  <p>The major problems with this module are the large number of options\n  (some of which have unfortunate defaults) and the arbitrary ways in\n  which these options interact - often producing unexpected results.</p>\n  \n  <p>Patches with bug fixes and documentation fixes are welcome, but new\n  features are unlikely to be added.</p>\n</blockquote>\n\n<p>Given the clarity of that statement, I can't understand why anyone would still be using that module for new development.</p>\n\n<p>You should always have <code>use strict</code> and <code>use warnings</code> in your code. The first of those will force you to declare you variables (with <code>my</code>). And your future maintenance programmers will thank you if you avoid the <code>new Class</code> syntax and use <code>Class-&gt;new</code> instead.</p>\n\n<p>Given all of those things (well, except I haven't replaced XML::Simple), your code would look like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::Simple;\nuse Data::Dumper;\n\nmy $xml = XML::Simple-&gt;new;\n\nmy $data = $xml-&gt;XMLin('data.xml', KeyAttr =&gt; 'ns1');\n\nprint Dumper $data;\nprint $data-&gt;{repairStationId};\n</code></pre>\n\n<p>This code works as expected for me (but, then, so did your original code).</p>\n"}], "owner": {"reputation": 1, "user_id": 9024673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc85049431474e355788d0fdfb81250f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/9024673/user"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "closed_date": 1511976021, "answer_count": 1, "score": -6, "last_activity_date": 1512035028, "creation_date": 1511949840, "last_edit_date": 1512035028, "question_id": 47549993, "link": "https://stackoverflow.com/questions/47549993/perl-xmlsimple-print-issue", "closed_reason": "Not suitable for this site", "title": "perl XML::Simple print issue", "body": "<p>This my xml file :</p>\n\n<p>data.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ns1:BoardTestXMLExport numberOfIndictedComponents=\"6\" testerTestStartTime=\".00000:00\" testTime=\".00000:00\" repairStationId=\"vvts03\" testStatus=\"Reviewed Passed\" testerTestEndTime=\".00000:00\" xmlns:ns1=\"http://tempuri.org/BoardTestXMLExport.xsd\" numberOfIndictedPins=\"0\" numberOfComponentsTested=\"113\" numberOfJointsTested=\"0\" numberOfDefects=\"6\" repairStatus=\"Reviewed Passed\"&gt;\n          &lt;ns1:StationXML testerName=\"huaemsaoi004\" stage=\"V510\"/&gt;\n          &lt;ns1:TestXML name=\"d1\"&gt;\n                    &lt;ns1:IndictmentXML algorithm=\"bep-3a98730h01l-lf\" indictmentType=\"OCV Fail\"&gt;\n                              &lt;ns1:RepairActionXML repairOperator=\"1066689\" repairTime=\"2017-11-24T11:35:32.000+08:00\" repairActionType=\"-\" indictmentType=\"OCV Fail\" comment=\"-\" repairStatus=\"False Call\"/&gt;\n                              &lt;ns1:ComponentXML packageId=\"EP-3A98730H01L-LF\" partId=\"EP-3A98730H01L-LF\" designator=\"d1\"/&gt;\n                    &lt;/ns1:IndictmentXML&gt;\n          &lt;/ns1:TestXML&gt;\n          &lt;ns1:TestXML name=\"r2\"&gt;\n                    &lt;ns1:IndictmentXML algorithm=\"rep-as30112h42l-lf\" indictmentType=\"Right off\"&gt;\n                              &lt;ns1:RepairActionXML repairOperator=\"1066689\" repairTime=\"2017-11-24T11:35:32.000+08:00\" repairActionType=\"-\" indictmentType=\"Right off\" comment=\"-\" repairStatus=\"False Call\"/&gt;\n                              &lt;ns1:ComponentXML packageId=\"EP-AS30112H42L-LF\" partId=\"EP-AS30112H42L-LF\" designator=\"r2\"/&gt;\n                    &lt;/ns1:IndictmentXML&gt;\n          &lt;/ns1:TestXML&gt;\n&lt;/ns1:BoardTestXMLExport&gt;\n</code></pre>\n\n<p>I used follow code to print the \"IndictmentType\"and \"name\", but it fail to print them, code as below:</p>\n\n<pre><code># use module\n use strict;\n use warnings;\n use XML::Simple;\n use Data::Dumper;\n # create object\n my $xml = XML::Simple-&gt;new;\n# read XML file\n my $data = $xml-&gt;XMLin(\"data.xml\",KeyAttr=&gt;\"ns1\");\n print Dumper($data);\n print $data -&gt;{\"ns1:TestXML\"}-&gt;{\"ns1:IndictmentXML\"}-&gt;{\"IndictmentType\"};\n print $data -&gt;{\"ns1:TestXML\"}-&gt;{\"ns1:IndictmentXML\"};\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1511948300, "post_id": 47549154, "comment_id": 82055445, "body": "Awesome champ... +1"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1583656599, "last_edit_date": 1583656599, "creation_date": 1511947369, "answer_id": 47549154, "question_id": 47548897, "link": "https://stackoverflow.com/questions/47548897/need-to-add-prefix-to-captured-names-based-on-given-lists/47549154#47549154", "title": "Need to add prefix to captured names, based on given lists", "body": "<p>A simple take</p>\n\n<pre><code>my $mr_re  = join '|', @Mister;\nmy $mrs_re = join '|', @Mrs;\n\n$str =~ s/\\b($mr_re)\\b/Mr. $1/g;\n$str =~ s/\\b($mrs_re)\\b/Ms. $1/g;\n</code></pre>\n\n<p>(note that I used the neutral <code>Ms</code> above instead of <code>Mrs</code>)</p>\n\n<p>However, when we consider the bewildering complexity of names, the <code>\\b</code> doesn't take care of all ways for a name to contain another. An easy example: the <code>-</code> is readily found in names and <code>\\b</code> is an anchor between <code>\\w</code> and <code>\\W</code>, where <code>\\w</code> does <em>not</em> include <code>-</code>. </p>\n\n<p>Thus <code>Name-Another</code> would be matched by <code>Name</code> alone as well.</p>\n\n<p>If there are characters other than alphanumeric (plus <code>_</code>) that can be inside names consider</p>\n\n<pre><code>my $w_re = /[a-z-]/i;  # list all characters that can be in a name\n\n$str =~ s/(?&lt;!$w_re)($mr_re)(?!$w_re)/Mr. $1/g;  # same for Ms.\n</code></pre>\n\n<p>where negative <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">lookarounds</a> <code>?&lt;!</code> and <code>?!</code> are assertions that match your non-name characters (those not listed in <code>$w_re</code>) but do not consume them. Thus they delimit acceptable names.</p>\n\n<p>The same holds for accents, and yet many other characters used in names in various cultures. The task of forming a satisfactory <code>$w_re</code> may be a tricky one even for one particular use case.</p>\n\n<p>If names can come in multiple words (with spaces), in order to handle names within others you would have to parse them in general. That is a complex task; seek modules as little regex won't cut it.</p>\n\n<p>A simple fix would be to preprocess lists to check for names with multiple words that contain other names from your lists, and to handle that case by case.</p>\n\n<hr>\n\n<p>For your example with hard coded and verifiable names the above works. However, in general, when assembling a regex from strings make sure that all (ascii) non-word chars are escaped so that you actually have the intended literal characters without a special meaning</p>\n\n<pre><code>my $mr_re  = join '|', map { quotemeta } @Mister;\nmy $mrs_re = join '|', map { quotemata } @Mrs;\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a>; inside a regex use <code>\\Q</code>, see it <a href=\"https://perldoc.perl.org/perlrebackslash.html#Modifiers\" rel=\"nofollow noreferrer\">in perlbackslash</a> and <a href=\"https://perldoc.perl.org/perlre.html#Quoting-metacharacters\" rel=\"nofollow noreferrer\">in perlre</a>.</p>\n\n<hr>\n\n<p>Note that this problem critically relies on sensible input.</p>\n\n<p>If names are duplicated in lists the problem is ill-posed: If they repeat in the sentence  it is unknown which is which, if they don't it is unknown whether it is Mr. or Ms.  Thus the name lists should be first checked for duplicates.</p>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 1, "last_activity_date": 1512404603, "creation_date": 1512404603, "answer_id": 47637698, "question_id": 47548897, "link": "https://stackoverflow.com/questions/47548897/need-to-add-prefix-to-captured-names-based-on-given-lists/47637698#47637698", "title": "Need to add prefix to captured names, based on given lists", "body": "<p>\"Could someone simplify the way I am doing and whats wrong in this code.\"</p>\n\n<p>The first part is addressed by zdim in a way I would do it too, but the \"what's wrong\" part could get some more addressing, in my opinion (just nitpicking, but maybe useful for someone):</p>\n\n<p><code>if(grep ($_ eq $str), @Mister)\n { $str =~ s/($_)/Mr. $1/g; }</code></p>\n\n<ul>\n<li>Your list entries will never equal the $str, I think you meant <code>$str =~/$_/</code></li>\n<li>Either use an additional pair of parenthesis around both condition and @list or use the block form of grep (<code>grep { $str =~ /$_/ } @Mister</code>) - otherwise grep will miss the list as argument, since it takes the one existing pair as limiter for it's argument list right now.</li>\n<li>the $_ used in the grep command is not available outside of the command, so the $str-substitution would use whatever the value of $_ is currently. In the example it would most likely be <code>undef</code>, so that between each character in the former $str 'Mr. ' is inserted.</li>\n</ul>\n\n<p>Like I said: A perfectly good solution to your problem is given in zdim's answer, but you also asked \"what's wrong in this code\".</p>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1512559394, "post_id": 47648606, "comment_id": 82305085, "body": "I Understood your concern. Thanks we will check."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1512895697, "post_id": 47648606, "comment_id": 82434727, "body": "Good thoughts, but: (1) names within others in the scope of your example are readily solved, see edits to my answer (should&#39;ve been there to start with, true). (2) Duplicated names simply mark an ill-posed problem. So yes, the lists should be compared for duplicates first. But having full names solves that as they are not duplicates then; which is Mr./Ms. is given, no need to guess. (3) On the other hand, the real problem starts when we consider names with multiple words (commented on in my answer)"}, {"owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513005158, "post_id": 47648606, "comment_id": 82472543, "body": "@zdim: we are not in disagreement, but experience has taught me not to assume &quot;... having full names solves that as they are not duplicates then;&quot; -- in languages I work with (mainly English and Spanish) full names can still be ambiguous as to gender, and a dataset more than trivially small may have duplicate names. One Sydney Smith uses &#39;Ms.&quot; for their title, another Sydney Smith uses &quot;Dr.&quot;, and a third Sydney Smith uses &quot;Mr.&quot;. I say &quot;lacks enough information&quot;, same as you say &quot;the problem is ill-posed.&quot; One hopes IRL each record has a unique identifier not based only on names."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1513016479, "post_id": 47648606, "comment_id": 82479199, "body": "Agreed, names are hard to get right in general, no question.  I am saying that these are distinct points: If names are duplicated then the problem is just ambiguous (under-determined, more information needed, ill-posed ... :) -- otherwise it&#39;s all well and doable. Except for the bad situation, in an otherwise well-defined problem, when there are names with multiple words that may also contain each other."}], "tags": [], "owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "is_accepted": false, "score": 1, "last_activity_date": 1512460398, "creation_date": 1512460398, "answer_id": 47648606, "question_id": 47548897, "link": "https://stackoverflow.com/questions/47548897/need-to-add-prefix-to-captured-names-based-on-given-lists/47648606#47648606", "title": "Need to add prefix to captured names, based on given lists", "body": "<p>@ssr1012 and other readers: Be careful! It's tempting to think there is a universal solution for this problem. But, unfortunately, even @zdim's approach will give undesirable results if the same name appears in both arrays, and it is still tricky if a name in one array is the same as a name in the other array except for a few additional characters at the start or end.\nHere's your example using slightly different names:</p>\n\n<pre><code>my @Mister = qw(Parasuram Mahan Srivatsan);\nmy @Mrs = qw(Kalai Padmini Maha);\n...\n\n# I was invited the doctor Mr. Parasuram and Ms. Kalai and civil Engineer Mr. Ms. Mahan and Ms. Padmini and finally Advocate Mr. Srivatsan and Ms. Maha\n</code></pre>\n\n<p>See the \"Mr. Ms. Mahan\"? You don't have enough information for a universal solution. This is only reliable if your names are hard-coded and checked first to avoid collisions. </p>\n\n<p>Even if you added first names, you might not have enough information - guessing gender from first names is unreliable in many language cultures.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 47549154, "answer_count": 3, "score": 1, "last_activity_date": 1583656759, "creation_date": 1511946572, "last_edit_date": 1583656759, "question_id": 47548897, "link": "https://stackoverflow.com/questions/47548897/need-to-add-prefix-to-captured-names-based-on-given-lists", "title": "Need to add prefix to captured names, based on given lists", "body": "<p>I have two arrays @Mister and @Mrs and need to add prefix based on the   values.</p>\n\n<pre><code>@Mister = qw(Parasuram Raghavan Srivatsan);\n@Mrs = qw(Kalai Padmini Maha);\n\nmy $str = \"I was invited the doctor Parasuram and Kalai and civil Engineer Raghavan and Padmini and finally Advocate Srivatsan and Maha\";\n\n#Mr. Parasuram Mr. Raghavan Mr. Srivatsan\nif(grep ($_ eq $str), @Mister)\n{ $str=~s/($_)/Mr. $1/g; }\n\n#Mrs. Kalai Mrs. Padmini Mrs. Maha` \nif(grep ($_ eq $str), @Mrs)\n{ $str=~s/($_)/Mrs. $1/g; }\n</code></pre>\n\n<p>Output Should be:</p>\n\n<p><code>I was invited the doctor Mr. Parasuram and Mrs. Kalai and civil Engineer Mr. Raghavan and Mrs. Padmini and finally Advocate Mr. Srivatsan and Mrs. Maha</code></p>\n\n<p>Could someone simplify the way I am doing and whats wrong in this code.</p>\n"}, {"tags": ["regex", "perl", "cisco"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1511942968, "post_id": 47547744, "comment_id": 82052192, "body": "<code>grep -B1 &#39;shutdown&#39; file | awk NR==1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "is_accepted": true, "score": 0, "last_activity_date": 1511942902, "creation_date": 1511942902, "answer_id": 47547881, "question_id": 47547744, "link": "https://stackoverflow.com/questions/47547744/regex-match-line-above-perl/47547881#47547881", "title": "Regex match line above (Perl)", "body": "<p>Turn multiline option on and use this:</p>\n\n<pre><code>^.+$(?=\\s+shutdown)\n</code></pre>\n\n<p>That will match the line before the word <code>shutdown</code>.</p>\n\n<p>It's basically looking for a line of any characters <code>^.+$</code>, looking ahead for some whitespace followed by <code>shutdown</code>.</p>\n\n<p>Try it here: <a href=\"https://regex101.com/r/WFqX5A/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/WFqX5A/1</a></p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 7721288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84c0027fe74ff46653272559bbeb22a?s=128&d=identicon&r=PG&f=1", "display_name": "jon doe", "link": "https://stackoverflow.com/users/7721288/jon-doe"}, "is_accepted": false, "score": 0, "last_activity_date": 1576147845, "creation_date": 1576147845, "answer_id": 59302923, "question_id": 47547744, "link": "https://stackoverflow.com/questions/47547744/regex-match-line-above-perl/59302923#59302923", "title": "Regex match line above (Perl)", "body": "<p>You can match also all after \"interface\" by adding few letters to above</p>\n\n<pre><code>^interface\\s\\K.*$(?=\\s+shutdown)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9024338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12017ea903369d8528f1b8631d69784?s=128&d=identicon&r=PG&f=1", "display_name": "HalloBallo_123", "link": "https://stackoverflow.com/users/9024338/halloballo-123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 47547881, "answer_count": 2, "score": -3, "last_activity_date": 1576147845, "creation_date": 1511942472, "question_id": 47547744, "link": "https://stackoverflow.com/questions/47547744/regex-match-line-above-perl", "title": "Regex match line above (Perl)", "body": "<p>I want to write a simple script which gives me from a Cisco Configuration every Port which is not in use (shutdown). The shutdown Ports looks always the same like:</p>\n\n<pre><code>interface Ethernet100/1/40\n  shutdown\n</code></pre>\n\n<p>Which Regex can I use to get always the line above 'shutdown' ?\nI want to write this script in Perl, please help me.</p>\n"}, {"tags": ["bash", "perl", "unix", "sh"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511943540, "post_id": 47547690, "comment_id": 82052500, "body": "Do you mean that &quot;<i>do some action</i>&quot; needs to wait? So that the action is done after the <code>foreach</code> loop ... ?"}, {"owner": {"reputation": 135, "user_id": 5940213, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-3oyKaXyQSOg/AAAAAAAAAAI/AAAAAAAABzk/-JV5VmC-xW4/photo.jpg?sz=128", "display_name": "sampath", "link": "https://stackoverflow.com/users/5940213/sampath"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511943883, "post_id": 47547690, "comment_id": 82052668, "body": "yes &quot;do some action&quot; need to wait and execute based on status of last executed command in foreach loop. @zdim"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1511943988, "post_id": 47547690, "comment_id": 82052721, "body": "Then just do it after the <code>foreach</code>.  For every iteration save the status in a variable (declared before the loop so that it exists after it), so after the loop the variable will have the status of the last command.  Is that what you have in mind?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1512156785, "last_edit_date": 1512156785, "creation_date": 1511944630, "answer_id": 47548330, "question_id": 47547690, "link": "https://stackoverflow.com/questions/47547690/how-to-find-the-last-executed-command-status-in-foreach-loop-in-perl/47548330#47548330", "title": "how to find the last executed command status in foreach loop in perl", "body": "<p>The <a href=\"https://perldoc.perl.org/perlvar.html#$?\" rel=\"nofollow noreferrer\"><code>$?</code> variable</a> in this case contains the status of <code>system</code>, but <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> itself returns that as well. Then assign its return to a variable and check it after the loop</p>\n\n<pre><code>my $exit_status;\nforeach my $server_name (@servers)\n{\n     my $command = qq(sudo /bin/su - jenkins -c \"ssh scm\\@$server_name ' /bin/sh ${SCRIPT_HOME}/startService.sh'\");\n     print \"$command\\n\";\n     $exit_status = system($command);\n}\n\nif ($exit_status == 0) { ... }\n</code></pre>\n\n<p>I'd like to also comment</p>\n\n<ul>\n<li><p>We don't know what you need from errors but consider  whether <code>$?</code> is enough; if you only check <em>for</em> errors it's fine but otherwise all you get from <code>system</code> is the last <code>wait</code> call's status. Various <code>IPC</code> modules provide for better error reporting</p></li>\n<li><p>A  command in a string for <code>system</code> can be unsafe as it may get passed to the shell to interpret first. If the shell isn't actually needed it is better to use the LIST form of <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a>, where the shell isn't involved; also see <a href=\"https://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\">exec</a> for discussion of the LIST form</p></li>\n<li><p>To prepare a string for the command it is better to use <a href=\"http://search.cpan.org/~rosch/String-ShellQuote-1.03/ShellQuote.pm\" rel=\"nofollow noreferrer\">String::ShellQuote</a></p></li>\n</ul>\n"}], "owner": {"reputation": 135, "user_id": 5940213, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-3oyKaXyQSOg/AAAAAAAAAAI/AAAAAAAABzk/-JV5VmC-xW4/photo.jpg?sz=128", "display_name": "sampath", "link": "https://stackoverflow.com/users/5940213/sampath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 47548330, "answer_count": 1, "score": 1, "last_activity_date": 1512156785, "creation_date": 1511942270, "last_edit_date": 1511942376, "question_id": 47547690, "link": "https://stackoverflow.com/questions/47547690/how-to-find-the-last-executed-command-status-in-foreach-loop-in-perl", "title": "how to find the last executed command status in foreach loop in perl", "body": "<p>I have a piece of logic it will execute the start service one by one based on the list of servers now question is after successful execution of <strong>last server</strong> I need to do some action based on status. how to handle the command to wait until the last sever to perform </p>\n\n<p>Kindly suggest </p>\n\n<p>sample code.</p>\n\n<pre><code>    foreach my $Server_name(@servers)\n    {\n     my $command =qq(sudo /bin/su - jenkins -c \"ssh scm\\@$Server_name ' /bin/sh ${SCRIPT_HOME}/startService.sh'\");\n    print \"$command\\n\";\n    system($command);\n            if ($?== 0)\n            {\n             do some action\n\n             }\n}\n</code></pre>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1511940975, "post_id": 47547152, "comment_id": 82051187, "body": "check this <a href=\"https://stackoverflow.com/questions/18124792/how-to-return-a-sorted-lists-index-in-perl\">question</a>. Sort the array and get the index then arrange the other array item with sorted index."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1511941173, "post_id": 47547152, "comment_id": 82051303, "body": "Or create hash like , first array elements as a key and second array values as a values. Then sort it by a keys"}, {"owner": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1511941289, "post_id": 47547152, "comment_id": 82051377, "body": "@mkHun Thank you so much for your reply. I feel, creating the hash is the best choice."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511945878, "post_id": 47547152, "comment_id": 82053835, "body": "Perhaps it is just sloppy typing, but <code>((&#39;a1&#39;, &#39;a2&#39;), (&#39;b1&#39;, &#39;b2&#39;))</code> is <i>not</i> a list with two elements being lists; it all gets flattened and it is just one list, <code>(&#39;a1&#39;, &#39;a2&#39;, &#39;b1&#39;, &#39;b2&#39;)</code>.  For what you show  you need arrayrefs as elements, <code>( [&#39;a1&#39;, &#39;a2&#39;], [&#39;b1&#39;, &#39;b2&#39;] )</code>."}], "owner": {"reputation": 57, "user_id": 4030161, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-MdFYaPQ8rDM/AAAAAAAAAAI/AAAAAAAAALY/KE28Zun_0mY/photo.jpg?sz=128", "display_name": "nandeesh v", "link": "https://stackoverflow.com/users/4030161/nandeesh-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "closed_date": 1511943822, "answer_count": 0, "score": 0, "last_activity_date": 1511944193, "creation_date": 1511940148, "last_edit_date": 1511944193, "question_id": 47547152, "link": "https://stackoverflow.com/questions/47547152/sorting-two-arrays-simultaneously-in-perl", "closed_reason": "Duplicate", "title": "sorting two arrays simultaneously in Perl", "body": "<p>I have two arrays.</p>\n\n<pre><code>1. @store_chromosomes( This is an array of arrays)\n2. @fitness_values of the same length.\n\n@store_chromosomes = ( (\"attr1\", \"attr2\", \"attr3\"), (\"attr4\", \"attr5\", \"attr6\"),  (\"attr_m\", \"attr_n\", \"attr_o\")); #Just an example\n@fitness_values=(-0.3456, -0.6789, 0.5678); #just an example\n</code></pre>\n\n<p>Elements in <code>@fitness_values</code> corresponding to elements in <code>@store_chromosomes</code>, i.e., <code>-0.3456</code> is generated for <code>(\"attr1\", \"attr2\", \"attr3\")</code> attribute and so on.</p>\n\n<p>I need to arrange the elements in <code>@fitness_values</code> in descending order, i.e., <code>(-0.6789, -0.3456, 0.5678)</code> at the same time I need to arrange the elements of <code>@store_chromosomes</code> corresponding to the order of <code>@fitness_values</code>, i.e., <code>((\"attr4\", \"attr5\", \"attr6\"), (\"attr1\", \"attr2\", \"attr3\"), (\"attr_m\", \"attr_n\", \"attr_o\") )</code>.</p>\n\n<p>For <code>@fitness_values</code>, I can do it by <code>@fitness_values = sort{4b&lt;=&gt;$a} @fitness_values</code>. But how to do it simultaneously for the array <code>@store_chromosomes</code>.</p>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 4, "creation_date": 1511925734, "post_id": 47544385, "comment_id": 82045931, "body": "Why? This sounds awfully like you think they interfere with the CSV parsing process, but as long as they are inside quoted strings they won&#39;t cause a problem unless you are attempting to use a simple &quot;split on comma&quot; parsing technique.  I smell an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>.  Tell us why you want to do this."}, {"owner": {"reputation": 147, "user_id": 8469861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qMnAc.jpg?s=128&g=1", "display_name": "bailey.bailey", "link": "https://stackoverflow.com/users/8469861/bailey-bailey"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1511926463, "post_id": 47544385, "comment_id": 82046145, "body": "Yes i am splitting on comma, after the data is parsed each line is put into a hash where the Keys are the data from the first line, and the Values are the corresponding data from every other line E.G. &quot;   hash = ( person_id =&gt; &#39;0001&#39;, person_name =&gt;&quot;bailey&quot; etc...)"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1511926563, "post_id": 47544385, "comment_id": 82046172, "body": "You already have a really nice CSV parser package that will handle all the gory details of successfully parsing CSV, including dealing with quoted strings that contain commas.  Why are you not using it?  What you are doing is similar to being given a turkey and a nice sharp carving set, but deciding to use a sledgehammer to smash the turkey and pick off the meat with your bare hands."}, {"owner": {"reputation": 147, "user_id": 8469861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qMnAc.jpg?s=128&g=1", "display_name": "bailey.bailey", "link": "https://stackoverflow.com/users/8469861/bailey-bailey"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1511926800, "post_id": 47544385, "comment_id": 82046242, "body": "I don&#39;t know how to use the CSV parser, im still reading the documentation and i know it could be done with regex but i dont know much regex. i dont want to smash my turkey."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 8469861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qMnAc.jpg?s=128&g=1", "display_name": "bailey.bailey", "link": "https://stackoverflow.com/users/8469861/bailey-bailey"}, "edited": false, "score": 0, "creation_date": 1511928448, "post_id": 47544848, "comment_id": 82046644, "body": "Thank you, okay i will not try to remove the commas"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1512612605, "last_edit_date": 1512612605, "creation_date": 1511928147, "answer_id": 47544848, "question_id": 47544385, "link": "https://stackoverflow.com/questions/47544385/removing-extra-commas-from-csv-file-in-perl/47544848#47544848", "title": "Removing extra commas from csv file in perl", "body": "<p>Let's get this out of the way: <strong><em>you cannot read a CSV by just splitting on commas</em></strong>. You've just demonstrated why; commas might be escaped or inside quotes. Those commas are totally valid, they're part of the data. Discarding them mangles the data in the CSV.</p>\n\n<p>For this reason, and others, CSV files must be read using a CSV parsing library. To find which commas are data and which commas are structural also requires parsing the CSV using a CSV parsing library. So you won't be saving yourself any time by trying to remove the commas from inside quotes. Instead you'll give yourself more work while mangling the data. You'll have to use a CSV parsing library.</p>\n\n<p><a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> is a very good, very fast CSV parsing library. It has a ton of features, most of which you do not need. Fortunately <a href=\"https://metacpan.org/pod/Text::CSV_XS#EXAMPLES\" rel=\"nofollow noreferrer\">it has examples for doing most common actions</a>.</p>\n\n<p>For example, here's how you read and print each row from a file called <code>file.csv</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\nuse v5.10;   # for `say`\n\nuse Text::CSV_XS;\n\n# Open the file.\nopen my $fh, \"&lt;\", \"file.csv\";\n\n# Create a new Text::CSV_XS object.\n# allow_whitespace allows there to be whitespace between the fields\nmy $csv = Text::CSV_XS-&gt;new({\n    allow_whitespace =&gt; 1\n});\n\n# Read in the header line so it's not counted as data.\n# Then you can use $csv-&gt;getline_hr() to read each row in as a hash.\n$csv-&gt;header($fh);\n\n# Read each row.\nwhile( my $row = $csv-&gt;getline($fh) ) {\n    # Do whatever you want with the list of cells in $row.\n    # This prints them separated by semicolons.\n    say join \"; \", @$row;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1511977778, "last_edit_date": 1511977778, "creation_date": 1511928162, "answer_id": 47544851, "question_id": 47544385, "link": "https://stackoverflow.com/questions/47544385/removing-extra-commas-from-csv-file-in-perl/47544851#47544851", "title": "Removing extra commas from csv file in perl", "body": "<p>A good CSV parser will have no trouble with this since commas are inside the quoted fields, so you can simply parse the file with it.  </p>\n\n<p>A really nice module is <a href=\"http://search.cpan.org/~hmbrand/Text-CSV_XS-1.34/CSV_XS.pm\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>, which is loaded by default when you use the wrapper <a href=\"http://search.cpan.org/~ishigaki/Text-CSV-1.95/lib/Text/CSV.pm\" rel=\"nofollow noreferrer\">Text::CSV</a>.  The only thing to address in your data is the spaces between fields since they aren't in CSV specs, so I use the option for that in the example below.</p>\n\n<p>If you indeed must remove commas for further work do that as the parser hands you lines.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Text::CSV;\n\nmy $file = 'commas_in_fields.csv';\n\nmy $csv = Text::CSV-&gt;new( { binary =&gt; 1, allow_whitespace =&gt; 1 } ) \n    or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag (); \n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy @headers = @{ $csv-&gt;getline($fh) };   # if there is a separate header line\n\nwhile (my $line = $csv-&gt;getline($fh)) {  # returns arrayref\n    tr/,//d for @$line;                  # delete commas from each field\n    say \"@$line\";\n}\n</code></pre>\n\n<p>This uses <code>tr</code> on <code>$_</code> in the <code>for</code> loop, changing the elements of the array, for conciseness.</p>\n\n<hr>\n\n<p>I'd like to repeat and emphasize what others have explained: do not parse CSV by hand, since only trouble awaits; use a library.  This is very much akin to parsing XML and similar formats: no regex please, but libraries.</p>\n"}], "owner": {"reputation": 147, "user_id": 8469861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qMnAc.jpg?s=128&g=1", "display_name": "bailey.bailey", "link": "https://stackoverflow.com/users/8469861/bailey-bailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "accepted_answer_id": 47544851, "answer_count": 2, "score": 2, "last_activity_date": 1512612605, "creation_date": 1511924827, "question_id": 47544385, "link": "https://stackoverflow.com/questions/47544385/removing-extra-commas-from-csv-file-in-perl", "title": "Removing extra commas from csv file in perl", "body": "<p>I have a multiple CSV files each with a different amount of entries each with roughly 300 lines each.</p>\n\n<p>The first line in each file is the Data labels </p>\n\n<pre><code>Person_id, person_name, person_email, person_address, person_recruitmentID, person_comments... etc\n</code></pre>\n\n<p>The Rest of the lines in each file contain the data</p>\n\n<pre><code>\"0001\", \"bailey\", \"123 fake, street\", \"bailey@mail.com\", \"0001\", \"this guy doesnt know how to get rid of, commas!\"... etc\n</code></pre>\n\n<p>I want to get rid of commas that are in between quotation marks.\nI'm currently going through the Text::CSV documentation but its a slow process.</p>\n"}, {"tags": ["regex", "perl", "match"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1511909734, "post_id": 47542273, "comment_id": 82041719, "body": "If you&#39;re doing the exercises in <i>Learning Perl</i>, you should do them yourself."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8927778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2c2f9226899473f40bf77b949b3e20?s=128&d=identicon&r=PG&f=1", "display_name": "SKS", "link": "https://stackoverflow.com/users/8927778/sks"}, "edited": false, "score": 0, "creation_date": 1511914954, "post_id": 47542379, "comment_id": 82043292, "body": "can it done using purely regexp?                                  $_=&quot;fredwilliamwilma&quot;; if(/regexp/) {print &quot;there is only one fred in the string&quot;}"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3, "user_id": 8927778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2c2f9226899473f40bf77b949b3e20?s=128&d=identicon&r=PG&f=1", "display_name": "SKS", "link": "https://stackoverflow.com/users/8927778/sks"}, "edited": false, "score": 0, "creation_date": 1511915501, "post_id": 47542379, "comment_id": 82043420, "body": "@SKS you mean you want to put all the logic into the pattern? Fred and negative look ahead for nothing or anything followed by fred, I guess. Don&#39;t have a computer now. You&#39;ll have to try yourself."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1511947648, "post_id": 47542379, "comment_id": 82054984, "body": "<code>= () =</code> is also known as the &#39;goatse operator&#39; :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1511910068, "creation_date": 1511910068, "answer_id": 47542379, "question_id": 47542273, "link": "https://stackoverflow.com/questions/47542273/how-do-i-match-for-only-one-instance-of-a-word-in-a-string/47542379#47542379", "title": "How do I match for only one instance of a word in a string?", "body": "<p>You can count the number of matches by using the <code>/g</code> flag in list context, and converting that into scalar context.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nfor my $string (qw(fredwilmawilliamjohn fredwilmawilliamfred) ) {\n    my $count = () = $string =~ m/(fred)/g;\n    if ( $count  == 1 ) {\n        say $string;\n    }\n}\n</code></pre>\n\n<p>The most relevant part is the <code>= () =</code>, which forces the match into <em>list context</em>. The <code>my $count</code> will then force that list of matches into scalar context, which gives you the number of items in the list. That's your number of matches.</p>\n"}, {"comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1511917518, "post_id": 47543345, "comment_id": 82044000, "body": "This won&#39;t work because the regexp will try to make the negative lookahead succeed. If it can find anything in the string not matching the second fred, the regex succeeds. <code>!m&#47;fred(?=.*fred)&#47;</code> would work here."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1511921231, "post_id": 47543345, "comment_id": 82044839, "body": "@ChrisCharley correct in principle, but you aren&#39;t quite saying it right.  this regex will keep it from matching the first fred, but the beginning of the regex will be  it tried further on in the string and match the second fred (which doesn&#39;t have a fred after it)"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1511925541, "post_id": 47543345, "comment_id": 82045878, "body": "@ysth Thank you for clarifying my error. I see exactly now how the regexp functions."}], "tags": [], "owner": {"reputation": 301, "user_id": 8710996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d0ba52c671f247dd883b1e18c217f5?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Corston-Oliver", "link": "https://stackoverflow.com/users/8710996/simon-corston-oliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1511916677, "creation_date": 1511916677, "answer_id": 47543345, "question_id": 47542273, "link": "https://stackoverflow.com/questions/47542273/how-do-i-match-for-only-one-instance-of-a-word-in-a-string/47543345#47543345", "title": "How do I match for only one instance of a word in a string?", "body": "<p>It sounds like you want to match the pattern and verify that it doesn't occur subsequently in the string. How about this, using negative lookahead</p>\n\n<pre><code>m/fred(?!.*fred)/\n</code></pre>\n\n<p>Breaking it down:</p>\n\n<p>?! -- not followed by</p>\n\n<p>.* -- zero or more characters</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1511969874, "last_edit_date": 1511969874, "creation_date": 1511921724, "answer_id": 47543972, "question_id": 47542273, "link": "https://stackoverflow.com/questions/47542273/how-do-i-match-for-only-one-instance-of-a-word-in-a-string/47543972#47543972", "title": "How do I match for only one instance of a word in a string?", "body": "<pre><code>/fred(*COMMIT)(?!.*?fred)/s\n</code></pre>\n\n<p><code>(*COMMIT)</code> (added in perl 5.10) says after matching <code>fred</code>, don't backtrack and try matching it again if the remainder of the regex fails.  The rest of the regex says don't match if <code>.*?fred</code> (any number of any characters followed by fred) matches at that point, after the first fred, i.e. there is no further fred.</p>\n\n<p>Before 5.10, you would need to force the first fred in the regex to only match the first fred in the string like so:</p>\n\n<pre><code>/^(?:(?!fred).)*+fred(?!.*?fred)/s\n</code></pre>\n\n<p>(match any number of characters so long as they aren't the beginning of fred before matching the fred that cannot then be followed by another fred).</p>\n\n<p>Or</p>\n\n<pre><code>/^(?&gt;.*?fred)(?!.*?fred)/s\n</code></pre>\n\n<p>(start at the beginning of the string and, without allowing backtracking, find the first fred, and assert that there is not a fred after it)</p>\n\n<p>(Throughout, /s is used to make <code>.</code> match any character, not just any non-newline character.)</p>\n"}], "owner": {"reputation": 3, "user_id": 8927778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2c2f9226899473f40bf77b949b3e20?s=128&d=identicon&r=PG&f=1", "display_name": "SKS", "link": "https://stackoverflow.com/users/8927778/sks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1511969874, "creation_date": 1511909507, "question_id": 47542273, "link": "https://stackoverflow.com/questions/47542273/how-do-i-match-for-only-one-instance-of-a-word-in-a-string", "title": "How do I match for only one instance of a word in a string?", "body": "<p>How do I match for only one instance of a word in a string?\nAs an example, with \"fred\" as my test word, match should be TRUE for the string \"fredwilmawilliamjohn\" but should be FALSE for \"fredwilmawilliamfred\"?</p>\n"}, {"tags": ["perl", "file-handling"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1511871579, "post_id": 47531445, "comment_id": 82019212, "body": "Your question would fit better on <a href=\"https://codereview.stackexchange.com\">Code Review</a>. You&#39;ve got working code already and want to improve it. In any case, please <a href=\"https://stackoverflow.com/posts/47531445/edit\">edit</a> and include a couple of full lines of log to test against, and show us the list of patterns. If you don&#39;t want to disclose that information, write a new, full program with example data that shows the same problem, and include that. This is called a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1511873806, "post_id": 47531445, "comment_id": 82020698, "body": "<i>when you help me with the new code/idea.</i> &quot;when&quot; means"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511896768, "post_id": 47531445, "comment_id": 82035533, "body": "<code>for ( my $i = 0; $i &lt; $num_pat; $i = $i + 1 ) { ... }</code> is normally written <code>for my $i ( 0; $i ... $num_pat-1 ) { ... }</code> or <code>for my $i ( 0; $i ... $#pat_array ) { ... }</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511897315, "post_id": 47531445, "comment_id": 82035855, "body": "<i>&quot;But I was thinking of a way to feed oneself on batter, and so go on from day to day getting a little fatter&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511882369, "post_id": 47534467, "comment_id": 82026736, "body": "This is fun. Your solution is about 8 times faster than choroba&#39;s on Perl Monks. But you don&#39;t allow to use the index of the pattern, like he did."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1511886714, "post_id": 47534467, "comment_id": 82029781, "body": "Those <code>\\b</code> won&#39;t work since it assumes the patterns start and end with word chars, but at least one of the patterns (<code>(Not available) 77%</code>) both starts and ends with a non-word."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1511947295, "last_edit_date": 1511947295, "creation_date": 1511880719, "answer_id": 47534467, "question_id": 47531445, "link": "https://stackoverflow.com/questions/47531445/multiple-patterns-match-in-a-big-file-and-track-the-counts-of-each-pattern-match/47534467#47534467", "title": "Multiple patterns match in a big file and track the counts of each pattern matched in perl", "body": "<p>The reason it takes so long, is because of loop nesting.  You're reading a list of patterns, and then trying each one, for each line. </p>\n\n<p>That's very inefficient. </p>\n\n<p>Something like this will do the same thing:</p>\n\n<pre><code>use Data::Dumper;\n\nmy @pat_array = split( '@@@', $InListOfPatterns );\n\nmy $match_regex = join '|', map { quotemeta } @pat_array;\n   $match_regex = qr/($match_regex)/; \n\nprint \"Using match regex of: \", $match_regex,\"\\n\";\n\nmy %count_of;    \nopen my $log_read, '&lt;', $InLogFilePath or die \"can not open file :$!\";\nwhile (&lt;$log_read&gt;) {\n   next unless $. &gt; $InStartLineNumber; \n   chomp;\n   m/$match_regex/ &amp;&amp; $count_of{$1}++; \n}\nclose($log_read);\n\nprint Dumper \\%count_of;\n</code></pre>\n\n<p>It complies a single capturing regex, and runs it once per line, capturing the match in the <code>%count_of</code> hash.  But it works on the <em>captured result</em> not the regex (unlike your example). This shouldn't be significant given we <code>quotemeta</code> (which works similarly to <code>\\Q\\E</code> to give literal patterns). </p>\n\n<p>Also - there's an error with your <code>open</code> line - the precedence of <code>||</code> is too high, so it won't work. Your code functions as:</p>\n\n<pre><code>open LOG_READ, '&lt;', (\"$InLogFilePath\" || die \"can not open file :$!\");\n</code></pre>\n\n<p>Which means  the <code>die</code> will happen if - and only if - <code>$InLogFilePath</code> is false (undefined or empty). </p>\n\n<p>Use <code>or</code> instead, and you don't have this issue. Or add brackets. </p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1511882322, "last_edit_date": 1511882322, "creation_date": 1511881969, "answer_id": 47534872, "question_id": 47531445, "link": "https://stackoverflow.com/questions/47531445/multiple-patterns-match-in-a-big-file-and-track-the-counts-of-each-pattern-match/47534872#47534872", "title": "Multiple patterns match in a big file and track the counts of each pattern matched in perl", "body": "<p>This answer will teach you how you can profile your script to see why and where it's slow. It will use the Perl profiler <a href=\"https://metacpan.org/pod/Devel::NYTProf\" rel=\"nofollow noreferrer\">Devel::NYTProf</a>, which you will have to install from CPAN.</p>\n\n<p>Before you do this yourself, watch <a href=\"http://perltv.org/v/performance-profiling-with-develnytprof\" rel=\"nofollow noreferrer\">this talk</a> by the author about profiling. It's important to know that this should only be done in rare cases. Your is such a case.</p>\n\n<p>First, create test input with the following command, using <a href=\"https://baconipsum.com/json-api/\" rel=\"nofollow noreferrer\">the JSON API of baconipsum.com</a>:</p>\n\n<pre><code>$ curl -s \\\n  'https://baconipsum.com/api/?type=meat-and-filler&amp;format=text&amp;sentences=100' \\\n  | perl -nE 'for $i ( 1 .. 10_000 ) { say for map lc, split /\\. / }' &gt;log.txt\n</code></pre>\n\n<p>This file will be about 70MB and have 1 million rows. That's enough for testing.</p>\n\n<pre><code>$ ls -lah\n-rw-rw-r--  1 simbabque simbabque 69M Nov 28 13:36 log.txt\n$ tail log.txt\nNisi magna pig pastrami, in chicken elit meatball\nConsequat laborum rump kevin beef ham hock proident tempor ex strip steak\nShankle kielbasa in nulla\nConsectetur picanha pork belly, drumstick tail tempor alcatra pariatur eiusmod\nTongue tail meatloaf cupim ut do sed, cillum kevin id ex dolore t-bone\nUt cow nulla brisket ball tip ipsum ham strip steak culpa cillum\nDoner chicken sint duis in, andouille labore eiusmod\nBacon tempor nostrud, short loin occaecat cow nulla ipsum strip steak pastrami corned beef turducken\nBall tip labore chicken pancetta cupim\nHam leberkas pastrami, exercitation id porchetta tri-tip beef voluptate shoulder ipsum meatloaf sunt ea.\n</code></pre>\n\n<p>Next, we prepare your script. I've made a couple of changes to make it more modern Perl, like the three-argument <code>open</code> and lexical file handles.</p>\n\n<pre><code>$ cat patterns.pl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $InListOfPatterns = 'bacon@@@loin@@@steak';\nmy $InStartLineNumber = 2;\n\nmy @pat_array = split( '@@@', $InListOfPatterns );\nmy $num_pat = @pat_array;\nmy @match_count;\nfor ( my $i = 0; $i &lt; $num_pat; $i = $i + 1 ) {\n    $match_count[$i] = 0;\n}\n\nopen my $fh,'&lt;','log.txt' or die \"can not open file :$!\";\nwhile (&lt;$fh&gt;) {\n    chomp;\n    if ( $. &gt; $InStartLineNumber ) {\n        for ( my $j = 0; $j &lt; $num_pat; $j = $j + 1 ) {\n            if ( $_ =~ m/\\Q$pat_array[$j]\\E/ ) {\n                $match_count[$j] = ( $match_count[$j] + 1 );\n            }\n        }\n    }\n}\n\nprint Dumper \\@match_count;\n</code></pre>\n\n<p>This takes something like 6 seconds on my machine, and will print the number of matches for each pattern at the end.</p>\n\n<p>Now let's look at how we can profile this with <a href=\"https://metacpan.org/pod/Devel::NYTProf\" rel=\"nofollow noreferrer\">Devel::NYTProf</a>. You just need to run this command. The <code>-d</code> flag tells Perl to use a debugger interface, and the <code>:NYTProf</code> says to use the <code>Devel::NYTProf</code> debugger.</p>\n\n<pre><code>$ perl -d:NYTProf patterns.pl \n$VAR1 = [\n          20000,\n          300000,\n          90000\n        ];\n</code></pre>\n\n<p>There is now a file called <code>nytprof.out</code> in your directory.</p>\n\n<pre><code>$ nytprofhtml --no-flame --open\nReading nytprof.out\nProcessing nytprof.out data\nWriting line reports to nytprof directory\n 100% ... \n</code></pre>\n\n<p>It will open a browser window or a new tab in your existing browser, and show you something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GUhIr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GUhIr.png\" alt=\"NYTProf index\"></a></p>\n\n<p>We want to go to the <em>line</em> report of <em>patterns.pl</em>. The red lines are the ones NYTProf deems very slow.</p>\n\n<p>The most obvious one is the <code>chomp</code> in line 17. It is called even on lines that are discarded. Of course in our example it only skipped one line, but in your case that might be more. Move that <code>chomp</code> after the <code>if</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QBXfu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QBXfu.png\" alt=\"NYTProf original patterns.pl\"></a></p>\n\n<p>We can also see that the most significant time is spent on the <code>if</code>. As <a href=\"http://www.perlmonks.org/?node_id=1204414\" rel=\"nofollow noreferrer\">chorboa says in his answer on your cross-posted Perlmonks question</a>, you can use a single pattern with named capture groups. I will demonstrate this in two steps so you see why he did what he did.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $InListOfPatterns  = 'bacon@@@loin@@@steak';\nmy $InStartLineNumber = 2;\n\nmy @pat_array = split( '@@@', $InListOfPatterns );\n\nopen my $fh, '&lt;', 'log.txt' or die \"can not open file :$!\";\nmy %matched;\nwhile (&lt;$fh&gt;) {\n    if ( $. &gt; $InStartLineNumber ) {\n        chomp;\n\n        # these two are inside the loop, which is bad\n        my $i;\n        my $regex = join '|', map +( $i++, \"(?&lt;m$i&gt;$_)\" )[1], map quotemeta, @pat_array;\n\n        $matched{ (grep defined $-{$_}[0], keys %-)[0] }++ if /$regex/;\n    }\n}\n\nprint Dumper \\%matched;\n</code></pre>\n\n<p>Let's rerun the profiler, and check the results. It now takes longer, because it does a more complex operation inside of the loop. That's bad.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PoQ5N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PoQ5N.png\" alt=\"NYTProf patterns.pl first round\"></a></p>\n\n<p>It spent almost 2 seconds inside that loop on line 18, compiling the same pattern anew for every single of the almost 1 million lines. </p>\n\n<p>So you obviously want to move this out of the loop, like choroba had in his post.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $InListOfPatterns  = 'bacon@@@loin@@@steak';\nmy $InStartLineNumber = 2;\n\nmy @pat_array = split( '@@@', $InListOfPatterns );\nmy $i;\nmy $regex = join '|', map +( $i++, \"(?&lt;m$i&gt;$_)\" )[1], map quotemeta, @pat_array;\n\nopen my $fh, '&lt;', 'log.txt' or die \"can not open file :$!\";\nmy %matched;\nwhile (&lt;$fh&gt;) {\n    if ( $. &gt; $InStartLineNumber ) {\n        chomp;\n\n        $matched{ (grep defined $-{$_}[0], keys %-)[0] }++ if /$regex/;\n    }\n}\n\nprint Dumper \\%matched;\n</code></pre>\n\n<p>If we rerun this through the profiler, it reports this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UcZRW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UcZRW.png\" alt=\"NYTProf patterns.pl second round\"></a></p>\n\n<p>The call for the pattern generation is now only called once. That's significantly faster. </p>\n\n<p>Unfortunately the overall win is not very high, at least with this file size. We had 12.4 seconds + 1.1 seconds for the <code>for</code> loop in the original code, and now have 12.2. Those 1.3 seconds are not quite significant with only 1 million rows. But then your file might have a lot more rows, and it will become a bit faster in total, especially if you add more possible patterns.</p>\n\n<p>If we increase the patterns to five, it will be 23.6s with the new implementation, and 1.78s + 23.6s with the original one. That's a difference of 1.78s. </p>\n\n<p>The benefit of having one match in the loop instead of three is very clear, but the capture group to figure out which pattern matched has its price, and the named capture group with the lookup hash created every time is even more expensive.</p>\n\n<p>If we compare this instead to the solution <a href=\"https://stackoverflow.com/a/47534467/1331451\">in Sobrique's answer</a>, we get 3.69s vs the original 1.78s + 23.6s. This difference is now almost one order of magnitude, which is very significant. To get the patterns with their ordinal number, you'd have to write one or two lines of additional code outside of your loop, which is negligible. </p>\n\n<hr>\n\n<p>Please note that all measurements vary heavily from machine to machine, and are also influenced by other processes running at the same time. On your computer they might be completely different. Benchmarking is hard, and often not very accurate.</p>\n"}], "owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1511947295, "creation_date": 1511871485, "last_edit_date": 1511897251, "question_id": 47531445, "link": "https://stackoverflow.com/questions/47531445/multiple-patterns-match-in-a-big-file-and-track-the-counts-of-each-pattern-match", "title": "Multiple patterns match in a big file and track the counts of each pattern matched in perl", "body": "<p>I have one <code>@pat_array</code> that has the user given patterns and contains special characters. Let's say <code>Error 78?</code>,  <code>(Not available) 77%</code> etc.</p>\n\n<p>I need to match the patterns in the 1GB+ log file, from a particular line number to the end. I also need to keep a count of how many times each pattern was found. The code below works but it takes too long: close to 2 mins for 3 patterns.</p>\n\n<p>I was thinking of a way to avoid the extra for loop while matching the patterns and do it in one shot. (Here for 3 patterns, I match $_ with three different patterns from pat_array, as you can see).</p>\n\n<pre><code>my @pat_array = split( '@@@', $InListOfPatterns );\nmy $num_pat   = @pat_array;\n\nmy @match_count;\nfor ( my $i = 0; $i &lt; $num_pat; $i = $i + 1 ) {\n    $match_count[$i] = 0;\n}\n\nopen LOG_READ, '&lt;', \"$InLogFilePath\" || die \"can not open file :$!\";\n\nwhile ( &lt;LOG_READ&gt; ) {\n    chomp;\n\n    if ( $. &gt; $InStartLineNumber ) {\n\n        for ( my $j = 0; $j &lt; $num_pat; $j = $j + 1 ) {\n\n            if ( $_ =~ m/\\Q$pat_array[$j]\\E/ ) {\n                $match_count[$j] = ( $match_count[$j] + 1 );\n            }\n        }\n    }\n}\n\nclose(LOG_READ);\n</code></pre>\n"}, {"tags": ["string", "perl", "if-statement"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1511817853, "post_id": 47520007, "comment_id": 81996460, "body": "Because you have <code>admin\u240a</code> (<code>admin</code> and a line feed). Use <code>chomp</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9016701, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/5F9ev.jpg?s=128&g=1", "display_name": "Matea\u0219 Mario", "link": "https://stackoverflow.com/users/9016701/matea%c8%99-mario"}, "edited": false, "score": 0, "creation_date": 1511818163, "post_id": 47520041, "comment_id": 81996620, "body": "If I use chomp I will have to remove the &#39;Username: &#39; message and I don&#39;t want that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511818329, "post_id": 47520041, "comment_id": 81996712, "body": "@Mateas: That isn&#39;t true. Why do you say so?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 77, "user_id": 9016701, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/5F9ev.jpg?s=128&g=1", "display_name": "Matea\u0219 Mario", "link": "https://stackoverflow.com/users/9016701/matea%c8%99-mario"}, "edited": false, "score": 0, "creation_date": 1511818879, "post_id": 47520041, "comment_id": 81996967, "body": "@Matea\u0219: The prompt <i>output</i> has nothing to do with the typed <i>input</i>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1511817927, "creation_date": 1511817927, "answer_id": 47520041, "question_id": 47520007, "link": "https://stackoverflow.com/questions/47520007/how-can-i-get-if-else-to-work/47520041#47520041", "title": "How can I get if .. else to work?", "body": "<p>The comparison never succeed because you don't remove the line feed created by pressing Enter. Use <code>chomp</code>!</p>\n"}, {"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 8, "last_activity_date": 1511818269, "creation_date": 1511818269, "answer_id": 47520115, "question_id": 47520007, "link": "https://stackoverflow.com/questions/47520007/how-can-i-get-if-else-to-work/47520115#47520115", "title": "How can I get if .. else to work?", "body": "<p>Whenever you are not sure why a comparison fails, make sure you know what's in your variable:</p>\n\n<pre><code>use Data::Dumper;\nlocal $Data::Dumper::Useqq = 1;\nprint Dumper $variable;\n# print Dumper \\@array;\n# print Dumper \\%hash;\n</code></pre>\n\n<p>like @ikegami suggested, you need to use chomp:</p>\n\n<pre><code>chomp $username;\n</code></pre>\n\n<p><a href=\"https://perldoc.perl.org/functions/chomp.html\" rel=\"noreferrer\">perldoc -f chomp</a></p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 9016701, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/5F9ev.jpg?s=128&g=1", "display_name": "Matea\u0219 Mario", "link": "https://stackoverflow.com/users/9016701/matea%c8%99-mario"}, "edited": false, "score": 0, "creation_date": 1511819902, "post_id": 47520206, "comment_id": 81997485, "body": "Thanks. It looks like I didn&#39;t actually know what chomp does."}, {"owner": {"reputation": 919, "user_id": 2751668, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3b16074a6edb7025c871e0d2ae7d7fc6?s=128&d=identicon&r=PG&f=1", "display_name": "Ilan Kleiman", "link": "https://stackoverflow.com/users/2751668/ilan-kleiman"}, "reply_to_user": {"reputation": 77, "user_id": 9016701, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/5F9ev.jpg?s=128&g=1", "display_name": "Matea\u0219 Mario", "link": "https://stackoverflow.com/users/9016701/matea%c8%99-mario"}, "edited": false, "score": 1, "creation_date": 1511822653, "post_id": 47520206, "comment_id": 81998704, "body": "@Matea\u0219Mario a little shortcut to make it a 1 liner is: chomp(my $user_name = &lt;STDIN&gt;);"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 5, "last_activity_date": 1511819020, "last_edit_date": 1511819020, "creation_date": 1511818601, "answer_id": 47520206, "question_id": 47520007, "link": "https://stackoverflow.com/questions/47520007/how-can-i-get-if-else-to-work/47520206#47520206", "title": "How can I get if .. else to work?", "body": "<p>The empty <code>&lt;&gt;</code> operator is usually the best choice for input. It will read data from any files named on the command line, or from the keyboard if there were none</p>\n\n<p>Your <code>$username = &lt;STDIN&gt;</code> will read from the keyboard, and if you enter <code>admin</code> and the <em>enter</em> key it will contain <code>\"admin\\n\"</code>. So you need to <code>chomp</code> the LF character from the end of the input</p>\n\n<p>You should also <code>use strict</code> and <code>use warnings 'all'</code> at the start of every Perl program</p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nprint \"Username: \";\nmy $user_name = &lt;&gt;;\nchomp $user_name;\n\nif ( $user_name eq 'admin' ) {\n    print \"Welcome, admin!\\n\";\n}\nelse {\n    print \"The username is incorrect\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1511850249, "last_edit_date": 1511850249, "creation_date": 1511849553, "answer_id": 47525042, "question_id": 47520007, "link": "https://stackoverflow.com/questions/47520007/how-can-i-get-if-else-to-work/47525042#47525042", "title": "How can I get if .. else to work?", "body": "<p>As everyone else already mentioned, you have a line feed and <code>chomp</code> will sort that out. In the rare event however where a user perhaps types a space before <code>admin</code>, it will still fail. You can therefore use left and right <code>trim</code></p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nprint \"Username: \";\nmy $user_name = &lt;&gt;;\n$user_name =~ s/^\\s+|\\s+$//g;\n\nif ( $user_name eq 'admin' ) {\n     print \"Welcome, admin!\\n\";\n}\nelse {\n    print \"The username is incorrect\\n\";\n}\n</code></pre>\n\n<p>which will match <code>admin</code> followed by newline, space or tab before and space or tab after <code>admin</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1511853389, "creation_date": 1511853389, "answer_id": 47525955, "question_id": 47520007, "link": "https://stackoverflow.com/questions/47520007/how-can-i-get-if-else-to-work/47525955#47525955", "title": "How can I get if .. else to work?", "body": "<p>You are missing to use <code>chomp</code>. When user has entered admin, it translated to <code>admin\\n</code>, so we need to remove that <code>\\n</code>. <br><code>chomp</code> is used to remove the <code>$/</code> variable (line feed character) which is set to mostly <code>\\n</code> (new line). <code>$/</code> is the input record separator, newline by default. </p>\n\n<pre><code>use utf8;\n\nprint \"Username: \";\n\n$username = &lt;STDIN&gt;;\nchomp $username;\nif ( $username eq \"admin\" ) {\n    print \"Welcome, admin!\";\n}\nelse {\n    print \"The username is incorrect.\";\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9016701, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/5F9ev.jpg?s=128&g=1", "display_name": "Matea\u0219 Mario", "link": "https://stackoverflow.com/users/9016701/matea%c8%99-mario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1511853389, "creation_date": 1511817753, "last_edit_date": 1511818968, "question_id": 47520007, "link": "https://stackoverflow.com/questions/47520007/how-can-i-get-if-else-to-work", "title": "How can I get if .. else to work?", "body": "<p></p>\n\n<p>I wrote a Perl program where the user should type in a user name. If they enter <code>admin</code>, they should see the message</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Welcome, admin!\n</code></pre>\n\n<p>Otherwise the console output should be</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The username is incorrect\n</code></pre>\n\n<p>Here is my code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use utf8;\n\nprint \"Username: \";\n\n$username = &lt;STDIN&gt;;\n\nif ( $username eq \"admin\" ) {\n    print \"Welcome, admin!\";\n}\nelse {\n    print \"The username is incorrect.\";\n}\n</code></pre>\n\n<p>But whatever the user inputs the program goes on to the <code>else</code> branch.</p>\n\n<p>Why does this happen?</p>\n"}, {"tags": ["perl", "stanford-nlp"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1511817112, "post_id": 47519790, "comment_id": 81996108, "body": "You&#39;ll need to implement this more robustly if you&#39;re dealing with non-trivial amounts of data. Most TCP sockets have a write buffer limit and if you blow it you&#39;ll run the risk of data being ignored or your program crashing out on an error condition. Normally you use <a href=\"http://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\"><code>select</code></a> to test if your socket can be written to, as well as if any data is available to read. This goes inside a loop that polls repeatedly until you&#39;re done sending and/or reading."}, {"owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1511817982, "post_id": 47519790, "comment_id": 81996532, "body": "Interesting! How might I &quot;poll repeatedly&quot; because I&#39;m pretty sure the server is getting the whole of the request."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1511818014, "post_id": 47519790, "comment_id": 81996550, "body": "That&#39;s what <code>select</code> does. It tells you when there&#39;s data to read or buffer space to write. If you put it inside a loop you&#39;re half way there."}, {"owner": {"reputation": 8451, "user_id": 4793732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e1a4315cc882fa2cdc281a4a2f96d3?s=128&d=identicon&r=PG&f=1", "display_name": "StanfordNLPHelp", "link": "https://stackoverflow.com/users/4793732/stanfordnlphelp"}, "edited": false, "score": 0, "creation_date": 1511819551, "post_id": 47519790, "comment_id": 81997328, "body": "Some questions...do you want to submit all of the text of a file for annotation as if it were a document?  Or do you want to submit each line as a separate sentence?  Also, what do you mean by &quot;small&quot; file vs. &quot;large&quot; file."}, {"owner": {"reputation": 8451, "user_id": 4793732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e1a4315cc882fa2cdc281a4a2f96d3?s=128&d=identicon&r=PG&f=1", "display_name": "StanfordNLPHelp", "link": "https://stackoverflow.com/users/4793732/stanfordnlphelp"}, "edited": false, "score": 0, "creation_date": 1511819666, "post_id": 47519790, "comment_id": 81997383, "body": "And just to be clear, you&#39;re using the Stanford CoreNLP server: <a href=\"https://stanfordnlp.github.io/CoreNLP/corenlp-server.html\" rel=\"nofollow noreferrer\">stanfordnlp.github.io/CoreNLP/corenlp-server.html</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511838143, "post_id": 47519790, "comment_id": 82002809, "body": "See <a href=\"http://perldoc.perl.org/IO/Select.html\" rel=\"nofollow noreferrer\">IO::Select</a> for easier <code>select</code>. There&#39;s a full example there as well."}, {"owner": {"reputation": 8451, "user_id": 4793732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e1a4315cc882fa2cdc281a4a2f96d3?s=128&d=identicon&r=PG&f=1", "display_name": "StanfordNLPHelp", "link": "https://stackoverflow.com/users/4793732/stanfordnlphelp"}, "edited": false, "score": 0, "creation_date": 1511839690, "post_id": 47519790, "comment_id": 82003192, "body": "I do not know much about Perl.  But by googling around it looked like people use LWP for this kind of thing.  For instance, review this answer: <a href=\"https://stackoverflow.com/questions/4199266/how-can-i-make-a-json-post-request-with-lwp\" title=\"how can i make a json post request with lwp\">stackoverflow.com/questions/4199266/&hellip;</a>"}, {"owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "edited": false, "score": 0, "creation_date": 1511881705, "post_id": 47519790, "comment_id": 82026270, "body": "StanfordNLPHelp, yes, I desire to submit an entire document, just as a whole book -- about .5 MB of data. And no, I&#39;m not really using the CoreNLP, but instead the individual NER and POS jars."}, {"owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "edited": false, "score": 0, "creation_date": 1511881770, "post_id": 47519790, "comment_id": 82026312, "body": "Yes, thank you. I am aware of the Perl interface to CoreNLP, but it seems like a lot of overhead, considering my implementation below. Thanks anyway."}, {"owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "edited": false, "score": 0, "creation_date": 1511882042, "post_id": 47519790, "comment_id": 82026504, "body": "IO::Select looks interesting. I will investigate. Thank you."}, {"owner": {"reputation": 8451, "user_id": 4793732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e1a4315cc882fa2cdc281a4a2f96d3?s=128&d=identicon&r=PG&f=1", "display_name": "StanfordNLPHelp", "link": "https://stackoverflow.com/users/4793732/stanfordnlphelp"}, "edited": false, "score": 0, "creation_date": 1511946681, "post_id": 47519790, "comment_id": 82054331, "body": "I strongly recommend not sending .5 MB of data in a single call to the server.  The typical case is to send a document of size 2.3K.  You should divide the text into document size blocks and send each document separately."}], "answers": [{"tags": [], "owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1511881576, "creation_date": 1511881576, "answer_id": 47534739, "question_id": 47519790, "link": "https://stackoverflow.com/questions/47519790/how-can-i-write-a-perl-script-that-connects-to-the-various-stanford-nlp-applicat/47534739#47534739", "title": "how can I write a perl script that connects to the various stanford nlp applications?", "body": "<p>I believe I have resolved my issue; tadman was correct. I needed to: 1) work more robustly with \"non-trivial amounts of data\", and 2) I needed to implement some sort of waiting technique using select. Here is my solution which seems to work quite well:</p>\n\n<pre><code># robustly read from a socket; see http://www.perlmonks.org/?node_id=54146\n\n# initialize\nmy $text     = &amp;slurp( $cgi-&gt;tmpFileName( $input ) );\nmy $rbits    = '';\nmy $timeout  = 20;\nmy $buffer   = 10240;\nmy $host     = 'localhost';\nmy $port     = '8081';\nmy $protocol = 'tcp';\n\n# open the socket and write the text; needs error checking\nmy $socket = IO::Socket::INET-&gt;new( PeerAddr =&gt; $host, PeerPort =&gt; $port, Proto =&gt; $protocol );\n$socket-&gt;write( \"$text\\n\" );\n\n# loop, forever\nwhile ( 1 ) {\n\n    # set the bit flag; ???\n    vec( $rbits, $socket-&gt;fileno, 1 ) = 1;\n\n    # wait; magic happens here\n    if ( select( $rbits, undef, undef, $timeout ) &gt;= 0 &amp;&amp; vec( $rbits, $socket-&gt;fileno, 1 ) ) {\n\n        # re-initialize, read and update the response\n        my $stream  = '';\n        my $result  = $socket-&gt;read( $stream, $buffer );\n        $response  .= $stream;\n\n        # done, maybe\n        last unless $result;\n\n    }\n\n    else { last }\n\n}\n\n# done\nprint \"$response\\n\";\n</code></pre>\n\n<p>I found the lower-level interface confusing. For example, I don't really understand vec nor the parameters to select. They seem very C-like?</p>\n\n<p>In any event, I'm much further along than I used to be. Thank you.</p>\n"}], "owner": {"reputation": 203, "user_id": 7691778, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b246bdde6c00ae62856305819c7002d5?s=128&d=identicon&r=PG&f=1", "display_name": "ericleasemorgan", "link": "https://stackoverflow.com/users/7691778/ericleasemorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1511881576, "creation_date": 1511816775, "question_id": 47519790, "link": "https://stackoverflow.com/questions/47519790/how-can-i-write-a-perl-script-that-connects-to-the-various-stanford-nlp-applicat", "title": "how can I write a perl script that connects to the various stanford nlp applications?", "body": "<p>How can I write a Perl script that connects to the various Stanford NLP applications? </p>\n\n<p>I have invoked both the Stanford part-of-speech and named-entity applications as servers, and when I send them requests from the command line, I get the sorts of responses I expect. Here is an example command-line invocation:</p>\n\n<pre><code>cat file.txt | nc localhost 8081\n</code></pre>\n\n<p>I now want to write both a Perl-based command line script as well as a Perl-based CGI script to do the same work, but I am having problems getting back the full response. Here are the most salient lines in my script(s):</p>\n\n<pre><code># initialize\nmy $text     = '';\nmy $response = '';\n\n# get the text to process and normalize it for xml\n$text =  &amp;slurp( $file );\n$text =~ s/\\&amp;/\\&amp;amp;/g;\n$text =~ s/&lt;/\\&amp;lt;/g;\n$text =~ s/&gt;/\\&amp;gt;/g;\n$text =~ s/\\W+/ /g;\n\n# open a connection, send the data, and get the response\nmy $socket = new IO::Socket::INET( PeerHost =&gt; HOST, PeerPort =&gt; PORT, Proto =&gt; PROTOCOL );\nif ( ! $socket ) { die \"Cannot connect to the server $!\\n\" }\n$socket-&gt;send( \"$text\\n\" );\n$socket-&gt;recv( $response, 10240000 );\n$socket-&gt;close();\n</code></pre>\n\n<p>This works fine for smaller files, but often does not for larger files, no matter how large I seem to increase the buffer (10240000). Moreover, the amount of data return by the server (or more specifically received by the client) is never the same size. Sometimes the response is bigger or smaller than other times.</p>\n\n<p>When does recv know to stop... receiving?</p>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["windows", "multithreading", "perl", "encoding", "thread-safety"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1511889000, "last_edit_date": 1511889000, "creation_date": 1511887922, "answer_id": 47536884, "question_id": 47519665, "link": "https://stackoverflow.com/questions/47519665/how-can-i-thread-safely-set-stdout-encoding-in-perl/47536884#47536884", "title": "How can I thread-safely set STDOUT encoding in Perl?", "body": "<p>I replicated the problem with ActivePerl 5.16.3 x64 on Win7</p>\n\n<p>I was able to resolve it by upgrading to ActivePerl 5.24.2 x64.</p>\n\n<p>Cleaned up code:</p>\n\n<pre><code>use utf8;\nuse open ':std', ':encoding(cp866)';\nuse threads;\n\nmy $thr = async {\n    print \"\u043f\u043e\u0442\u043e\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\";\n};\n\nprint \"\u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0442\u043e\u043a \u0442\u0430\u043a\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\";\n$thr-&gt;join();\n</code></pre>\n\n<hr>\n\n<p>Workaround: You could encode manually instead of using PerlIO layers.</p>\n\n<pre><code>use utf8;\nuse threads;\n\nuse Encode qw( encode );\n\nmy $thr = async {\n    print encode('cp866', \"\u043f\u043e\u0442\u043e\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\");\n};\n\nprint encode('cp866', \"\u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0442\u043e\u043a \u0442\u0430\u043a\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\");\n$thr-&gt;join();\n</code></pre>\n\n<hr>\n\n<p>Workaround: Clone STDOUT in each thread, and apply the encoding layer to the non-shared clone.</p>\n\n<pre><code>use utf8;\nuse threads;\n\nmy $thr = async {\n    open(my $fh, '&gt;&amp;=:encoding(cp866)', \\*STDOUT) or die $!;\n    *STDOUT = $fh;\n\n    print \"\u043f\u043e\u0442\u043e\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\";\n};\n\nopen(my $fh, '&gt;&amp;=:encoding(cp866)', \\*STDOUT) or die $!;\n*STDOUT = $fh;\n\nprint \"\u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0442\u043e\u043a \u0442\u0430\u043a\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\";\n$thr-&gt;join();\n</code></pre>\n\n<p>(This doesn't clone the underlying file descriptor, so the change is very transparent.)</p>\n"}], "owner": {"reputation": 485, "user_id": 4108542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Qflfs.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/4108542/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511892283, "creation_date": 1511816207, "last_edit_date": 1511892283, "question_id": 47519665, "link": "https://stackoverflow.com/questions/47519665/how-can-i-thread-safely-set-stdout-encoding-in-perl", "title": "How can I thread-safely set STDOUT encoding in Perl?", "body": "<p>According to the documentation it`s not thread safe for use <code>encoding</code> module with <code>threads</code> and it`s deprecated since perl 1.18. I use perl 5.16 on windows 7 machine. I need to covert output to windows 866 encoding. With the below code interpreter crash when try to run thread.</p>\n\n<pre><code>use utf8;\nbinmode(STDOUT, ':encoding(cp866)');\nuse threads;\n\n\nmy $thr = threads-&gt;create(sub {\n    print \"\u043f\u043e\u0442\u043e\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\";\n})-&gt;detach();\n\nsleep 1;\nprint \"\u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043f\u043e\u0442\u043e\u043a \u0442\u0430\u043a\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\";\n</code></pre>\n\n<p>Without <code>binmode(STDOUT, ':cp866');</code>, I have \"Wide characters in print\" error and text shows in incorrect charset. So how should I correctly set encoding?</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1511816367, "post_id": 47519644, "comment_id": 81995707, "body": "Colorized in what context?  Shell output to a virtual terminal?  That depends totally on the shell and terminal emulator being used, what support the emulator has for color, and the mechanism for embedding color attributes in the output text stream.  Many terminal emulators support ANSI escape sequences, so you would need to insert those yourself when processing lines that need to be colorized."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 1, "creation_date": 1511816398, "post_id": 47519644, "comment_id": 81995722, "body": "Have you checked perl&#39;s module <code>Term::ANSIColor</code>?"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1511818951, "post_id": 47519644, "comment_id": 81997010, "body": "Without color: <code>less -p &#39;.*Critical$|.*Yes$|$&#39; file</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 2, "creation_date": 1511902279, "post_id": 47519750, "comment_id": 82038517, "body": "The ack command also has a <code>--passthru</code> option to print all lines regardless of whether they matched.  The highlighting of course will only apply to matched lines."}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 5, "last_activity_date": 1511816940, "last_edit_date": 1511816940, "creation_date": 1511816585, "answer_id": 47519750, "question_id": 47519644, "link": "https://stackoverflow.com/questions/47519644/can-you-colorize-specific-lines-that-are-grepped-from-a-file/47519750#47519750", "title": "Can you colorize specific lines that are grepped from a file?", "body": "<p>You could try <a href=\"/questions/tagged/ack\" class=\"post-tag\" title=\"show questions tagged &#39;ack&#39;\" rel=\"tag\">ack</a>, a very nice alternative to grep:</p>\n\n<pre><code>% ack '(Critical|Yes)$' file\n# Or to colorize the whole line:\n% ack '(.*(Critical|Yes))$' file\n</code></pre>\n\n<p>See <a href=\"https://beyondgrep.com/\" rel=\"noreferrer\">Beyond grep</a></p>\n\n<p>Or if you want to see all lines and only colorize specific ones:</p>\n\n<pre><code>use Term::ANSIColor qw/ colored /;\nwhile (&lt;$fh&gt;) {\n    s/(.*)(Critical|Yes)$/colored([\"yellow bold\"], $1.$2)/e;\n    print;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 0, "creation_date": 1512099567, "post_id": 47519806, "comment_id": 82130211, "body": "This solution didn&#39;t work for me.  Perl gives the output but without any color.  I am on a Mac running 10.12.6 and Perl 5.18."}], "tags": [], "owner": {"reputation": 109227, "user_id": 641955, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Hg2nO.jpg?s=128&g=1", "display_name": "janos", "link": "https://stackoverflow.com/users/641955/janos"}, "is_accepted": false, "score": 2, "last_activity_date": 1511816851, "creation_date": 1511816851, "answer_id": 47519806, "question_id": 47519644, "link": "https://stackoverflow.com/questions/47519644/can-you-colorize-specific-lines-that-are-grepped-from-a-file/47519806#47519806", "title": "Can you colorize specific lines that are grepped from a file?", "body": "<p>You could use <code>Term::ANSIColor</code> module of Perl:</p>\n\n<pre><code>... | perl -pne 'BEGIN { use Term::ANSIColor } /: (Yes|Critical)$/ &amp;&amp; { $_ = color(\"red\") . \"$_\" . color(\"reset\") }'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": false, "score": 4, "last_activity_date": 1511817881, "last_edit_date": 1511817881, "creation_date": 1511816899, "answer_id": 47519817, "question_id": 47519644, "link": "https://stackoverflow.com/questions/47519644/can-you-colorize-specific-lines-that-are-grepped-from-a-file/47519817#47519817", "title": "Can you colorize specific lines that are grepped from a file?", "body": "<p>To see all lines but have the lines that end in <code>Critical</code> or <code>Yes</code> colorized, try:</p>\n\n<pre><code>awk -v on=\"$(tput smso)\" -v off=\"$(tput rmso)\" '/(Critical|Yes)$/{$0=on $0 off} 1' logfile\n</code></pre>\n\n<p>This uses <code>tput</code> to create codes suitable for your terminal.  For demonstration purposes, I chose the <code>smso</code>/<code>rmso</code> to set and reset the \"standout mode.\"  You can use any other feature that <code>tput</code> supports.</p>\n\n<h3>Variation</h3>\n\n<p>If we want the text in red instead of \"standout mode\":</p>\n\n<pre><code>awk -v on=\"$(tput setaf 1)\" -v off=\"$(tput sgr0)\" '/(Critical|Yes)$/{$0=on $0 off} 1' logfile\n</code></pre>\n\n<p><code>tput setaf 1</code> is the code to create red.  <a href=\"http://linuxcommand.org/lc3_adv_tput.php\" rel=\"nofollow noreferrer\">(In <code>tput</code>, red is 1, green is 2, etc.)</a>.  <code>tput sgr0</code> is the code to turn off all attributes.</p>\n\n<h3>How it works</h3>\n\n<ul>\n<li><p><code>-v on=\"$(tput smso)\" -v off=\"$(tput rmso)\"</code></p>\n\n<p>This defines two awk variables, <code>on</code> and <code>off</code> that turn on and turn off whatever color effect we prefer.</p></li>\n<li><p><code>/(Critical|Yes)$/{$0=on $0 off}</code></p>\n\n<p>For any line that ends with <code>Critical</code> or <code>Yes</code>, we add the <code>on</code> code to the front of the line and the <code>off</code> code to the end.</p></li>\n<li><p><code>1</code></p>\n\n<p>This is awk's cryptic shorthand for print-the-line.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "edited": false, "score": 1, "creation_date": 1511817655, "post_id": 47519837, "comment_id": 81996367, "body": "oh man, you are right. The ending <code>|$</code> makes the difference- all lines are kept but only lines matching pattern get colorized. But honestly i hit my head on the wall to understand why this solution works... Brilliant. <code>+1</code>"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "reply_to_user": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "edited": false, "score": 0, "creation_date": 1511818436, "post_id": 47519837, "comment_id": 81996761, "body": "@GeorgeVasiliou: This expression shows every line completely colored containing <code>Yes</code> or <code>Critical</code> at the end and shows every line containing a newline."}, {"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "edited": false, "score": 0, "creation_date": 1511818608, "post_id": 47519837, "comment_id": 81996836, "body": "The strange thing is that every line containing a new line (<code>$</code>) is NOT colorized. I was expecting your command ending with <code>|$</code> to colorize all the lines. Anyway, we learnt something new today."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "edited": false, "score": 2, "creation_date": 1511818649, "post_id": 47519837, "comment_id": 81996852, "body": "@GeorgeVasiliou: The zero bytes leading up to the newline are coloured invisibly :D"}, {"owner": {"reputation": 22991, "user_id": 1169096, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d93e08b2830786a7992e8af35514c6?s=128&d=identicon&r=PG", "display_name": "uml&#228;ute", "link": "https://stackoverflow.com/users/1169096/uml%c3%a4ute"}, "edited": false, "score": 0, "creation_date": 1511818695, "post_id": 47519837, "comment_id": 81996877, "body": "that&#39;s because the actual match is colorized; the line-ending is just to &quot;small&quot; to actually see the color; the <code>.*</code> before <code>Yes</code> resp. <code>Critical</code> colors the entire line in these matches."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "reply_to_user": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "edited": false, "score": 0, "creation_date": 1511818838, "post_id": 47519837, "comment_id": 81996954, "body": "@GeorgeVasiliou: If you replace <code>|$</code> with <code>|.*$</code>, then what you describe happens."}, {"owner": {"reputation": 5309, "user_id": 3988526, "user_type": "registered", "profile_image": "https://graph.facebook.com/568589813/picture?type=large", "display_name": "George Vasiliou", "link": "https://stackoverflow.com/users/3988526/george-vasiliou"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1511819248, "post_id": 47519837, "comment_id": 81997164, "body": "@JonathanLeffler Yes, that explains this grep behavior. Meanwhile i noticed that this behavior is explained in grep info pages (info grep) , Chapter 4 - Usage , and instead of <code>|$</code> someone can use <code>|^</code> with same results."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1511824165, "post_id": 47519837, "comment_id": 81999260, "body": "A tweak to reduce duplicated constructs: <code>grep --color -E &#39;(.*(Yes|Critical))?$&#39; file</code>"}], "tags": [], "owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "is_accepted": false, "score": 9, "last_activity_date": 1511847594, "last_edit_date": 1511847594, "creation_date": 1511816989, "answer_id": 47519837, "question_id": 47519644, "link": "https://stackoverflow.com/questions/47519644/can-you-colorize-specific-lines-that-are-grepped-from-a-file/47519837#47519837", "title": "Can you colorize specific lines that are grepped from a file?", "body": "<p>With GNU grep:</p>\n\n<pre><code>grep --color -E \".*Yes$|.*Critical$|$\" file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 7109979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/wpQUK.jpg?s=128&g=1", "display_name": "PCnetMD", "link": "https://stackoverflow.com/users/7109979/pcnetmd"}, "is_accepted": true, "score": 0, "last_activity_date": 1516732093, "creation_date": 1516732093, "answer_id": 48408490, "question_id": 47519644, "link": "https://stackoverflow.com/questions/47519644/can-you-colorize-specific-lines-that-are-grepped-from-a-file/48408490#48408490", "title": "Can you colorize specific lines that are grepped from a file?", "body": "<p>Thank you for all of your responses. I ended up piping the original grep results to another grep <code>| grep --color=auto '.*\\(Yes\\|Critical\\).*\\|$'</code>  and got the colorized results I wanted:</p>\n\n<pre><code>grep -i 'site\\|^ID\\|^State\\|^Status\\|^Failure Predicted\\|^##' /home/user/ddinfo/$DD_FILE | grep --color=auto '.*\\(Yes\\|Critical\\).*\\|$'\n</code></pre>\n\n<p>This the new sample output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WD1vE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WD1vE.png\" alt=\"Sample Output\"></a></p>\n"}], "owner": {"reputation": 157, "user_id": 7109979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/wpQUK.jpg?s=128&g=1", "display_name": "PCnetMD", "link": "https://stackoverflow.com/users/7109979/pcnetmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 1, "accepted_answer_id": 48408490, "answer_count": 5, "score": 4, "last_activity_date": 1516732093, "creation_date": 1511816095, "last_edit_date": 1512099257, "question_id": 47519644, "link": "https://stackoverflow.com/questions/47519644/can-you-colorize-specific-lines-that-are-grepped-from-a-file", "title": "Can you colorize specific lines that are grepped from a file?", "body": "<p>I run a weekly CRONTAB that collects hardware info from 40+ remote servers and creates a weekly log file on our report server at the home office. I have a script that I run against this weekly file to output only specific status lines to my display.</p>\n\n<pre><code>#!/bin/sh\n\n# store newest filename to variable\nDD_FILE=\"$(ls -t /home/user/ddinfo/|head -1)\"\n\n# List the site name, disk ID (virtual &amp; physical), Status and State of each ID, Failure Prediction for each physical disk, and the site divider\ngrep -w 'Site\\|^ID\\|^State\\|^Status\\|^Failure Predicted\\|^##' /home/user/ddinfo/$DD_FILE\necho \"/home/user/ddinfo/\"$DD_FILE\nexit 0\n</code></pre>\n\n<p>This is a sample output:</p>\n\n<pre><code>Accessing Site: site01\nID                            : 0\nStatus                        : Ok\nState                         : Ready\nID                              : 0:0:0\nStatus                          : Ok\nState                           : Online\nFailure Predicted               : No\nID                              : 0:0:1\nStatus                          : Ok\nState                           : Online\nFailure Predicted               : No\n################################################\nAccessing Site: site02\nID                            : 0\nStatus                        : Ok\nState                         : Ready\nID                              : 0:0:0\nStatus                          : Non-Critical\nState                           : Online\nFailure Predicted               : Yes\nID                              : 0:0:1\nStatus                          : Ok\nState                           : Online\nFailure Predicted               : No\n################################################\n</code></pre>\n\n<p>Is there a way to cat / grep / sed / awk / perl / this output so that any lines that end with either <code>Critical</code> or <code>Yes</code>, get colorized?</p>\n"}, {"tags": ["perl", "imagemagick", "gd", "wmf"], "comments": [{"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1511845905, "post_id": 47515985, "comment_id": 82004905, "body": "See the Batik Toolkit for wmf to svg conversion. It is not in perl but maybe is helpful."}, {"owner": {"reputation": 124, "user_id": 795916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b22ecbc83632b26e8ff855ad9d4e4b?s=128&d=identicon&r=PG", "display_name": "Gaspode", "link": "https://stackoverflow.com/users/795916/gaspode"}, "reply_to_user": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1511864659, "post_id": 47515985, "comment_id": 82014645, "body": "Nah, it&#39;s wmf I need, not svg. (svg is vector-only)"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1511865316, "post_id": 47515985, "comment_id": 82015114, "body": "On <a href=\"http://search.cpan.org/dist/Image-WMF/WMF.pm\" rel=\"nofollow noreferrer\">search.cpan.org/dist/Image-WMF/WMF.pm</a> there is a very clean example on how create a .wmf file. Do Have you tried?"}, {"owner": {"reputation": 631, "user_id": 6252353, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-g5fley8sHyg/AAAAAAAAAAI/AAAAAAAAAeg/R_WrMAny8wg/photo.jpg?sz=128", "display_name": "Andre Carneiro", "link": "https://stackoverflow.com/users/6252353/andre-carneiro"}, "edited": false, "score": 0, "creation_date": 1511892573, "post_id": 47515985, "comment_id": 82033339, "body": "Have you tried to put &quot;-file_format&quot; inside &#39;new&#39; ?   $image = Image::Base::GD-&gt;new (-file =&gt; &#39;/some/filename.jpg&#39;,                                                         -file_format =&gt; &quot;wmf&quot;                                                        );"}], "owner": {"reputation": 124, "user_id": 795916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b22ecbc83632b26e8ff855ad9d4e4b?s=128&d=identicon&r=PG", "display_name": "Gaspode", "link": "https://stackoverflow.com/users/795916/gaspode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511801434, "creation_date": 1511801434, "question_id": 47515985, "link": "https://stackoverflow.com/questions/47515985/convert-image-to-wmf-format-in-perl", "title": "Convert image to WMF format in perl", "body": "<p>I have a website on a Ubuntu server and I need to be able to allow images to be downloaded in WMF format (they're stored as JPGs). ImageMagick can read WMF but not write. UniConvertor doesn't work properly (sk1libs error) so I thought I'd have a go at doing the conversion with GD but I'm having a little difficulty, mainly because I'm a bear of very little brain..</p>\n\n<p>I've found the Image::WMF module so I can create a new image and save it in the right format, but how can I copy the image data into the new image object? Despite having a GD-like interface, it doesn't have a 'copy' function..</p>\n\n<p>Image::Base::GD's man page says it can save as WMF but, if I try, I get an error when I call save()..</p>\n\n<pre><code>use Image::WMF;\nuse Image::Base::GD;\nuse GD::Image;\n\n$file=\"test.jpg\";\n\n$wmf = Image::Base::GD-&gt;new(-file =&gt; $file);\n$wmf-&gt;set(-file_format =&gt; 'wmf');\n$wmf-&gt;save('test.wmf');\n</code></pre>\n\n<p>.. gives me <code>Can't locate object method \"wmf\" via package \"GD::Image\"</code></p>\n\n<p>I'm probably just being really stupid but if someone could point out the correct way (or a better way!) it'd be appreciated.</p>\n"}, {"tags": ["perl", "gnu-parallel", "parallelism-amdahl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1511795788, "post_id": 47513226, "comment_id": 81984081, "body": "Why do you want to parallelize this?"}, {"owner": {"reputation": 23, "user_id": 4169500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e881ec301439112974074f389dbd972a?s=128&d=identicon&r=PG&f=1", "display_name": "Ifa", "link": "https://stackoverflow.com/users/4169500/ifa"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511798272, "post_id": 47513226, "comment_id": 81985708, "body": "I have two large data sets and this is the part of the application which takes the most time. I was hoping to make this run faster."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511798314, "post_id": 47513226, "comment_id": 81985739, "body": "Have you considered that your existing implementation might be inefficient?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1511804717, "post_id": 47513226, "comment_id": 81989711, "body": "How big is <code>words</code> compared to <code>phrases</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511795902, "post_id": 47514232, "comment_id": 81984158, "body": "Did you want to make sure they won&#39;t miss that link? :D"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511795984, "post_id": 47514232, "comment_id": 81984211, "body": "Absolutely :o)    You confirm that you did not, did you?"}, {"owner": {"reputation": 23, "user_id": 4169500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e881ec301439112974074f389dbd972a?s=128&d=identicon&r=PG&f=1", "display_name": "Ifa", "link": "https://stackoverflow.com/users/4169500/ifa"}, "edited": false, "score": 0, "creation_date": 1511798805, "post_id": 47514232, "comment_id": 81986053, "body": "So you are saying this can&#39;t be done in parallel? Because in both my files every line is unique, i thought that if every parallel process only modifies one (unique) line, they will not get in the way of each other. Maybe i thought this wrong?"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1511799747, "post_id": 47514232, "comment_id": 81986690, "body": "My man, there is not any file representation, which would have one line independent of the following one -- just take a HEX-editor, open the disk file and see what happens with the following line, if you start to modify the &quot;current&quot; line tail, by &quot;adding&quot; a &quot;white_space&quot; + &quot;*&quot; characters on the physical level representation of the file. It had nothing to do with any (non)-uniqueness ( which could be, but need not be a file-content property ( this was not a core feature of the objection, the [SEQ]-nature of the rows-to-process, that was requested to be preserved + the fileIO-[SEQ]-process, was"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1511800137, "post_id": 47514232, "comment_id": 81986947, "body": "If it were so that a physical-representation of the file would have been a linked-list-of-char, which is not the case, there might be some chance to &quot;modify&quot; the graph-of-char-s in some other manner, but the files used to be roughly a linked-list-of-{ 4KB | other-sized }-atomic-storage-containers, that gets some BIOS-gymnastics to get put-to / read-from the HDD:CYL:HEAD:SECTOR 4D rotating <b>storage-device physical address space on the real spinning drive</b> ( not taking into account the { FileAllocationTable | other FS inventory-table } maintenance reads/writes during the flow of [SEQ]-time )."}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1511800578, "post_id": 47514232, "comment_id": 81987208, "body": "Real devices operations might remain hidden from user-perspective, once HDD-drive controllers may and do perform theirs lowest-level caching, read-ahead-s + deferred writes and latency masking tricks, the O/S HDD-device-drivers introduces many smarter tricks for additional system-level pre-fetches, caching, fileIO-re-ordering, at last but not least, the O/S itself presents the highest level of abstraction ( way different, from the hard life of the file-representation on the actual physical device(s) ), so even as we have departed from magnetic-tapes, the files are still [SEQ]-of-atomic-records"}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": false, "score": 1, "last_activity_date": 1512756387, "last_edit_date": 1592644375, "creation_date": 1511795785, "answer_id": 47514232, "question_id": 47513226, "link": "https://stackoverflow.com/questions/47513226/how-to-replace-multiple-patterns-in-the-same-file-based-on-the-lines-first-wor/47514232#47514232", "title": "How to replace multiple patterns in the same file, based on the line&#39;s first word?", "body": "<hr />\n<h1>Why this problem is not a parallel process-scheduling?</h1>\n<p>Just imagine the internal dependency-chain of values, that are required to become output in a given, strict <code>[SEQ]</code>-controlled way at the very process-output end.</p>\n<p><strong>Fact No. 1</strong> )<br> while it is very easy to spin-off more than one process by using the <strong><a href=\"/questions/tagged/gnu-parallel\" class=\"post-tag\" title=\"show questions tagged &#39;gnu-parallel&#39;\" rel=\"tag\">gnu-parallel</a></strong> syntax to make this imperatively executed at a shell level, it does not mean at all that each and every case of such co-existing processes does allow for a smooth and smart &quot;just&quot;-by-coincidence-<strong><code>[CONCURRENT]</code></strong> or even the true-<strong><code>[PARALLEL]</code></strong> process-scheduling for free.</p>\n<p><strong>Fact No. 2</strong> )<br> the <strong><code>file:phrases</code></strong> must be processed in a pure-<strong><code>[SERIAL]</code></strong> manner, as the natural order ( <strong><code>SEQ</code></strong> ) matters and must be preserved, even for the resulting file-based output.</p>\n<p><strong>Fact No. 3</strong> )<br> every file-based is, by design, a pure-<code>[SERIAL]</code> process, <strong>neither</strong> &quot;just&quot;-<strong><code>[CONCURRENT]</code></strong>, <strong>nor</strong> true-<strong><code>[PARALLEL]</code></strong>, until one invents a way, how to make harddisk-reading-device heads to be at one moment in time at multiple locations ( which is well beyond even a quantum entanglement and superposition tricks and magic on a subatomic scale ).</p>\n<p><strong>Fact No. 4</strong> )<br>sure, one can imagine some sort of a space for concurrent processing, once a <code>[SEQ]</code>-read-input from a <code>file:phrases</code> is known, where some speedup might occur, if more than one ( <code>[SEQ]</code>-operated ) lookup would be processed -- but, again, based on a condition, that there are both resources ( for the multiple lookups to take place concurrently, without any adverse impact on the process-flow in case not all concurrent-processes get executed seamlessly ) and all these must have &quot;pre-cached&quot; the whole-&quot;known-to-be&quot;-static-content of <strong><code>file:words</code></strong> ( otherwise it will not help ), so as to become somewhat able to escape from the next ( <strong><code>[SEQ]</code></strong>-again ) pure-<strong><code>[SERIAL]</code></strong> <code>fileIO</code>-<code>[SEQ]</code>-ordered and concurrent-capacity restricted re-processing of the first-word match-finding, now imperatively required by some form of the <a href=\"/questions/tagged/gnu-parallel\" class=\"post-tag\" title=\"show questions tagged &#39;gnu-parallel&#39;\" rel=\"tag\">gnu-parallel</a> syntax to happen from more than one <code>words</code>-crawling processes.</p>\n<hr />\n<h2>One could easily pay way more than could ever receive from:</h2>\n<p>Improper or even naive process-scheduling may and does introduce add-on costs, that were never seen before in a pure-<code>[SERIAL]</code> code execution. Even the most light-weight concurrency-frameworks add-on costs ( and these costs do scale with N, if many concurrent-code executions appear to become imperatively materialised, <strong>literally at any cost</strong> )</p>\n<p>Kindly <a href=\"https://stackoverflow.com/revisions/18374629/3\"><strong>read thoroughly details</strong> about Amdahl's Law, best altogether with its modern criticism, including the modern re-formulation with having both the overhead-strict add-on costs included and with atomic-units in-divisibility of code-execution, independent of number of processors available. In spite of its inital formulation as far as 50 years ago, the modern massive-parallel code-execution ecosystems still cannot learn better from this principal law's dependencies that no one can ever escape from.</a></p>\n<p>So, always check for all <strong><code>[SEQ]</code></strong>-dependencies in a problem dependency-chains.<br />\nSo, always check for all <strong><code>[PAR]</code></strong>-add-on overheads, before even dreaming about performance.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1511804358, "post_id": 47514809, "comment_id": 81989501, "body": "Not sure the replace quite works - that&#39;ll replace the target word with a <code>*</code>, and the OP just seems to want the line to be suffixed by a <code>*</code> when the word is present."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1511804455, "post_id": 47514809, "comment_id": 81989555, "body": "@Sobrique  Did you notice <code>\\K</code> in regex?  It drops all matches so <code>s&#47;&#47;&#47;</code> just adds <code>*</code>. (It could only make use of an extra space as well?)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1511804680, "post_id": 47514809, "comment_id": 81989688, "body": "Ah, sorry yes. Was looking at the substitution regex. Never mind then :)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1511807012, "last_edit_date": 1511807012, "creation_date": 1511797662, "answer_id": 47514809, "question_id": 47513226, "link": "https://stackoverflow.com/questions/47513226/how-to-replace-multiple-patterns-in-the-same-file-based-on-the-lines-first-wor/47514809#47514809", "title": "How to replace multiple patterns in the same file, based on the line&#39;s first word?", "body": "<pre><code>perl -i -pe'\n    BEGIN {\n       my $words_qfn = shift(@ARGV);\n       open(my $words_fh, \"&lt;\", $words_qfn) or die $!;\n       chomp( my @words = &lt;$words_fh&gt; );\n       my $alt = join \"|\", map quotemeta, @words;\n       $re = qr/^(?:$alt)\\b.*\\K/;\n    }\n    s/$re/ */;\n' words phrases\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1511805229, "creation_date": 1511805229, "answer_id": 47517020, "question_id": 47513226, "link": "https://stackoverflow.com/questions/47513226/how-to-replace-multiple-patterns-in-the-same-file-based-on-the-lines-first-wor/47517020#47517020", "title": "How to replace multiple patterns in the same file, based on the line&#39;s first word?", "body": "<p>This is not a good fit for parallel processing, because by far the most expensive operation you can do - usually - is reading from disk. CPU is much much faster. </p>\n\n<p>Your problem is not CPU intensive, and so you won't gain much advantage to running in parallel. And worse - as you've found - you induce a race condition that can lead to file clobbering. </p>\n\n<p>Practically speaking disk IO is done in chunks - multiple K - from the disk, that's fetched into cache and then fed to the OS in such a way that you can pretend that <code>read</code> works byte-by-byte. </p>\n\n<p>If you read a file sequentially, predictive fetch allows the OS to be even more efficient about it, and just pull the whole file into cache as fast as possible, massively speeding up the processing. </p>\n\n<p>Trying to parallelise and interleave this process at best has no effect, and can make things worse.</p>\n\n<p>So with that in mind, you'd be better off <em>not</em> trying to parallel, and instead:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nopen ( my $words_fh, '&lt;', 'words' ) or die $!; \nmy $words = join '|', map { s/\\n//r } &lt;$words_fh&gt;;\n   $words = qr/\\b(?:$words)\\b/;\nclose ( $words_fh );\n\nprint \"Using match regex of: \", $words, \"\\n\";\n\nopen ( my $phrases_fh, '&lt;', 'phrases' ) or die $!;\nwhile ( &lt;$phrases_fh&gt; ) { \n  if (m/$words/) {\n      s/$/ */;\n  }\n  print;\n} \n</code></pre>\n\n<p>Redirect output to the desired location. </p>\n\n<p>The most expensive bit is the reading of files - it does this once and one only. Invoking the regex engine repeatedly for the same line for each search term would also be expensive, because you'd be doing it N * M times, where N is the number of words, and M is the number of lines. </p>\n\n<p>So instead we compile a single regex, and match that, using the zero width <code>\\b</code> word boundary marker (so it won't substring match). </p>\n\n<p>Note - we don't quote the contents of <code>words</code> - that may be a bug or a feature, because it means you could add regex into the mix. (And that might break when we compile our regex). </p>\n\n<p>If you want to ensure it's 'literal', then:</p>\n\n<pre><code>my $words = join '\"', map { quotemeta } map { s/\\n//r } &lt;$words_fh&gt;; \n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4169500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e881ec301439112974074f389dbd972a?s=128&d=identicon&r=PG&f=1", "display_name": "Ifa", "link": "https://stackoverflow.com/users/4169500/ifa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 2, "accepted_answer_id": 47517020, "answer_count": 3, "score": 1, "last_activity_date": 1512756387, "creation_date": 1511792771, "last_edit_date": 1511796044, "question_id": 47513226, "link": "https://stackoverflow.com/questions/47513226/how-to-replace-multiple-patterns-in-the-same-file-based-on-the-lines-first-wor", "title": "How to replace multiple patterns in the same file, based on the line&#39;s first word?", "body": "<p>I have a list of phrases in a single file ( \"<strong><code>phrases</code></strong>\" ), each being on its own line.</p>\n\n<p>I also have another file, which contains a list of words, each on a line (\"<strong><code>words</code></strong>\").</p>\n\n<p>I wish to append an asterisk at the end of every phrase in \"<code>phrases</code>\", which begins with a word listed in \"<code>words</code>\".   </p>\n\n<p>For example:</p>\n\n<p>File \"<code>phrases</code>\":</p>\n\n<pre><code>gone are the days\nhello kitty\nfive and a half\nthese apples are green\n</code></pre>\n\n<p>File \"<code>words</code>\":</p>\n\n<pre><code>five\ngone\n</code></pre>\n\n<p>Expected result in \"<code>phrases</code>\" after the operation:</p>\n\n<pre><code>gone are the days *\nhello kitty\nfive and a half *\nthese apples are green\n</code></pre>\n\n<p>What I have done so far is this:</p>\n\n<pre><code>parallel -j0 -a words -q perl -i -ne 'print \"$1 *\" if /^({}\\s.*)$/' phrases\n</code></pre>\n\n<p>But this truncates the file and sometimes (not always) gives me this error:</p>\n\n<blockquote>\n  <p>Can't remove phrases: No such file or directory, skipping\n  file.</p>\n</blockquote>\n\n<p>Because the edits will be made in concurrently, my intention is for it to search and replace ONLY those lines which start with the word while leaving the other ones intact. Otherwise the <code>parallel</code> concurrent execution will overwrite each other.</p>\n\n<p>I am open to other concurrent methods as well.</p>\n"}, {"tags": ["perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511788793, "post_id": 47511895, "comment_id": 81979582, "body": "Please show the code that isn&#39;t working for you."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511788953, "post_id": 47511895, "comment_id": 81979675, "body": "Your output is from Data::Dumper, which just dumps out a representation of the hash reference. Hashes in Perl are never sorted. You can sort a list of keys, by values if needed, and then print the key and value pairs. But Data::Dumper has nothing to do with that."}, {"owner": {"reputation": 1, "user_id": 9014516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f270ff414bbd346c966e521b6b16f52?s=128&d=identicon&r=PG&f=1", "display_name": "Tag_DL", "link": "https://stackoverflow.com/users/9014516/tag-dl"}, "edited": false, "score": 0, "creation_date": 1511788958, "post_id": 47511895, "comment_id": 81979678, "body": "my @sorted_keys = sort { $hash{$a} &lt;=&gt; $hash{$b} } keys %hash;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511789125, "post_id": 47511895, "comment_id": 81979777, "body": "Your code sorts them by value, lowest value first. If you want them the other way around, switch <code>$a</code> and <code>$b</code> or use <code>reverse</code>. But it&#39;s not clear what your question is yet. Does your <code>%hash</code> contain  <code>( Level1_a =&gt; { Level2_B =&gt; 1071, ... }, ... )</code>? Please <a href=\"https://stackoverflow.com/posts/47511895/edit\">edit</a> your question, inlcude your code there, and amend the actual data structure."}, {"owner": {"reputation": 1, "user_id": 9014516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f270ff414bbd346c966e521b6b16f52?s=128&d=identicon&r=PG&f=1", "display_name": "Tag_DL", "link": "https://stackoverflow.com/users/9014516/tag-dl"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511789135, "post_id": 47511895, "comment_id": 81979784, "body": "@simbabque, Actually I posted the dumper output to show the layers of hash. I want to sort the hash so that I can pick up the keys corresponding to the highest values"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511789168, "post_id": 47511895, "comment_id": 81979803, "body": "So you want the 2nd level key with the highest value?"}, {"owner": {"reputation": 1, "user_id": 9014516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f270ff414bbd346c966e521b6b16f52?s=128&d=identicon&r=PG&f=1", "display_name": "Tag_DL", "link": "https://stackoverflow.com/users/9014516/tag-dl"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511789445, "post_id": 47511895, "comment_id": 81979981, "body": "yes you are right @simbabque, I want the second level keys to be sorted by the highest value. Sorry that I am not able to pose my question correctly."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1511789404, "creation_date": 1511789404, "answer_id": 47512145, "question_id": 47511895, "link": "https://stackoverflow.com/questions/47511895/sorting-keys-which-are-also-values-on-the-basis-of-values-in-hashes-in-perl/47512145#47512145", "title": "sorting keys (which are also values) on the basis of values in hashes in perl", "body": "<p></p>\n\n<p>Hashes are inherently unordered and there is no way to sort them. However, you can find the <em>maximum</em> of the values of a hash and it is best to use a module to help</p>\n\n<p><a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow noreferrer\"><code>List::UtilsBy</code></a> provides <code>max_by</code> and will allow you to find the hash key corresponding to the maximum numeric value</p>\n\n<p>Like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse List::UtilsBy 'max_by';\n\nmy $data = {\n    'Level1_A' =&gt; {\n        'Level2_A' =&gt; 1071,\n        'Level2_B' =&gt; 3429,\n        'Level2_C' =&gt; 3297,\n    },\n    'Level1_B' =&gt; {\n        'Level2_A' =&gt; 702,\n        'Level2_B' =&gt; 726\n    },\n};\n\nfor my $k1 ( sort keys %$data ) {\n\n    my $v1 = $data-&gt;{$k1};\n\n    my $k2 = max_by { $v1-&gt;{$_} } keys %$v1;\n\n    printf \"%s %s %s\\n\", $k1, $k2, $v1-&gt;{$k2};\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Level1_A Level2_B 3429\nLevel1_B Level2_B 726\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9014516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f270ff414bbd346c966e521b6b16f52?s=128&d=identicon&r=PG&f=1", "display_name": "Tag_DL", "link": "https://stackoverflow.com/users/9014516/tag-dl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1511868334, "creation_date": 1511788603, "question_id": 47511895, "link": "https://stackoverflow.com/questions/47511895/sorting-keys-which-are-also-values-on-the-basis-of-values-in-hashes-in-perl", "title": "sorting keys (which are also values) on the basis of values in hashes in perl", "body": "<p>For example, this is my hash </p>\n\n<pre><code>     'Level1_A' =&gt; {\n                                  'Level2_A' =&gt; 1071,\n                                  'Level2_B' =&gt; 3429,\n                                  'Level2_C' =&gt; 3297\n                    },\n      'Level1_B' =&gt; {\n                                  'Level2_A' =&gt; 702,\n                                  'Level2_B' =&gt; 726\n                    },\n</code></pre>\n\n<p>And I want an output which should look like</p>\n\n<pre><code>  'Level1_A' =&gt; {\n                              'Level2_B' =&gt; 3429,\n                              'Level2_C' =&gt; 3297,\n                              'Level2_A' =&gt; 1071\n\n                },\n  'Level1_B' =&gt; {\n                              'Level2_B' =&gt; 726,\n                              'Level2_A' =&gt; 702\n                },\n</code></pre>\n\n<p>Ultimately, I want to the keys corresponding to the highest values.</p>\n\n<p>Level1_A___Level2_B___3429</p>\n\n<p>Level1_B___Level2_A____726</p>\n"}, {"tags": ["mysql", "bash", "shell", "perl", "security"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511783302, "post_id": 47509688, "comment_id": 81976096, "body": "This is a bit short for an answer. It&#39;s not really a comment either though. I suggest you <a href=\"https://stackoverflow.com/posts/47509688/edit\">edit</a> and include some examples, even if it&#39;s just a quote of the doc synopsis, and an explanation of why it&#39;s a useful tool."}], "tags": [], "owner": {"reputation": 483, "user_id": 6654100, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IAoOZ.png?s=128&g=1", "display_name": "Penguine", "link": "https://stackoverflow.com/users/6654100/penguine"}, "is_accepted": true, "score": 3, "last_activity_date": 1511784787, "last_edit_date": 1511784787, "creation_date": 1511781363, "answer_id": 47509688, "question_id": 47509531, "link": "https://stackoverflow.com/questions/47509531/testing-script-find-open-mysql-ports-and-check-database/47509688#47509688", "title": "Testing Script - Find open MySQL Ports and check Database", "body": "<p>You can use <a href=\"https://nmap.org/\" rel=\"nofollow noreferrer\">NMAP</a> for all port scanning tasks.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Lets asssume an example: mysql-vuln-cve2012-2122(This vulnerability tries to access the MySql server through open ports by bypassing authentication, if possible, also dumps the MySQL usernames and password hashes.)</p>\n\n<p>Pre-requisite: You need the '<a href=\"https://nmap.org/nsedoc/lib/vulns.html\" rel=\"nofollow noreferrer\">Vulns</a>' library to be installed separately. Please read the documentation, to know more about how to install and other details, since it would be too tedious to explain it here.</p>\n\n<pre><code>mysql-vuln-cve2012-2122.pass\nMySQL password. Default: nmapFTW.\n\nmysql-vuln-cve2012-2122.user\nMySQL username. Default: root.\n\nmysql-vuln-cve2012-2122.iterations\nConnection retries. Default: 1500.\n\nmysql-vuln-cve2012-2122.socket_timeout\nSocket timeout. Default: 5s.\n</code></pre>\n\n<p>Please leave the password blank to check for non-password vulnerabilities.</p>\n\n<p>Command to run:</p>\n\n<pre><code>nmap -p3306 --script mysql-vuln-cve2012-2122 &lt;target&gt;\n</code></pre>\n\n<p>Here  is your MySql instance</p>\n\n<p>This will give an output, something like this:</p>\n\n<pre><code>PORT     STATE SERVICE REASON\n3306/tcp open  mysql   syn-ack\nmysql-vuln-cve2012-2122:\nVULNERABLE:\nAuthentication bypass in MySQL servers.\nState: VULNERABLE\n IDs:  CVE:CVE-2012-2122\n  Description:\n    When a user connects to MariaDB/MySQL, a token (SHA\n    over a password and a random scramble string) is calculated and \ncompared\n    with the expected value. Because of incorrect casting, it might've\n    happened that the token and the expected value were considered \nequal,\n    even if the memcmp() returned a non-zero value. In this case\n   MySQL/MariaDB would think that the password is correct, even while \nit is\n    not.  Because the protocol uses random strings, the probability of\n    hitting this bug is about 1/256.\n    Which means, if one knows a user name to connect (and \"root\" \nalmost\n    always exists), she can connect using *any* password by repeating\n    connection attempts. ~300 attempts takes only a fraction of \nsecond, so\n    basically account password protection is as good as nonexistent.\n\n  Disclosure date: 2012-06-9\n  Extra information:\n  Server granted access at iteration #204\n  root:*9CFBBC772F3F6C106020035386DA5BBBF1249A11\n  debian-sys-maint:*BDA9386EE35F7F326239844C185B01E3912749BF\n  phpmyadmin:*9CFBBC772F3F6C106020035386DA5BBBF1249A11\n</code></pre>\n\n<p>For more and detailed info, please refer the above link.</p>\n\n<p>The NMAP tools will not only help you in getting the list of port related vulnerabilities. It can also be used to search for other vulnerabilities like MySql injection,DDOS, brute force vulnerabilities and lot more. Though you need to download separate libraries for those. </p>\n"}], "owner": {"reputation": 11, "user_id": 9014292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edfd650968180d361aabfc679d217a79?s=128&d=identicon&r=PG&f=1", "display_name": "OPe", "link": "https://stackoverflow.com/users/9014292/ope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 47509688, "answer_count": 1, "score": 0, "last_activity_date": 1511784787, "creation_date": 1511780919, "question_id": 47509531, "link": "https://stackoverflow.com/questions/47509531/testing-script-find-open-mysql-ports-and-check-database", "title": "Testing Script - Find open MySQL Ports and check Database", "body": "<p>following Problem:</p>\n\n<p>I want to Check all Open MySQL Ports in a network and give myself a list of them. </p>\n\n<ul>\n<li>After this i want to check if i can get access to the MySQL database from the open ports. </li>\n</ul>\n\n<p>It Would be just a security check script to avoid other people getting access to the databases.</p>\n\n<p>Bash/perl/Powershell... maybe someone can give me a hint?</p>\n"}, {"tags": ["java", "linux", "perl", "ssh", "automation"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511786033, "post_id": 47509180, "comment_id": 81977829, "body": "perhaps you should create the <code>su - user</code> string as well, just as you did with <code>su - root</code>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511786050, "post_id": 47509180, "comment_id": 81977840, "body": "also, is this the same user you are logging on as, or a different user?"}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511786707, "post_id": 47509180, "comment_id": 81978275, "body": "i tried it that way too , i.e creating string to it , but it is not working ."}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511786769, "post_id": 47509180, "comment_id": 81978323, "body": "first logging on as root , and then as other user."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511786778, "post_id": 47509180, "comment_id": 81978329, "body": "can you replace <code>su - user</code> with something like &#39;ls` and confirm if that works?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511787355, "post_id": 47509180, "comment_id": 81978709, "body": "<i>first logging on as root</i> Not being offensive at all, but allowing direct logon with root is extremely bad practice."}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511787619, "post_id": 47509180, "comment_id": 81978877, "body": "i tried changing it to &quot;ls &quot; , i am getting the same error .. please look into this, i just referred this &quot; <a href=\"http://www.ganymed.ethz.ch/ssh2/FAQ.html#sessioncommands\" rel=\"nofollow noreferrer\">ganymed.ethz.ch/ssh2/FAQ.html#sessioncommands</a> &quot; , it seems like this exec command can be used only once .. if so , is there any other similar function to execute multiple command sequentially for one session?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511787826, "post_id": 47509180, "comment_id": 81978991, "body": "well, you can try and chain the commands. <code>Session.execCommand(&quot;su - root &amp;&amp; ls -l &amp;&amp; df -h&quot;)</code>"}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511788049, "post_id": 47509180, "comment_id": 81979115, "body": "Actually , that&#39;s perfect which you said , but after connecting to the server , to obtain the  functionality needed , i need to login as root first , and then as different &quot;user&quot; , and then need to execute the set of instructions under that respective user. please see the perl script , i need execution in that manner. , sub commands are the commands used under &quot;user&quot;"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511788140, "post_id": 47509180, "comment_id": 81979164, "body": "indeed, but perhaps look into giving a specific user sudo rights instead so it can run commands and disable direct login for root. :) Did you attempt the chaining?"}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511788412, "post_id": 47509180, "comment_id": 81979321, "body": "no , i don&#39;t have much idea about it (chaining) , you mean method chaining? , could you please show how? in this case?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511788442, "post_id": 47509180, "comment_id": 81979340, "body": "no, see my second last comment."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511788740, "post_id": 47509180, "comment_id": 81979539, "body": "as example do <code>Session.execCommand(&quot;su - root &amp;&amp; ls -l &amp;&amp; df -h&quot;)</code>"}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511788815, "post_id": 47509180, "comment_id": 81979602, "body": "Oh sorry , yes that i had thought of , but root needs to be authenticated with password, may be in execution, it can be tried like, in this format  &quot;session.execCommand(tempCommand + Pswd + &quot;su - user&quot;);&quot; ? , but again i need to execute the further commands, with 1 second delay each and execCommand can be used only once"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511789339, "post_id": 47509180, "comment_id": 81979913, "body": "That won&#39;t work, you can try this however. <code>session.execCommand(tempCommand + Pswd &amp;&amp; &quot;su - user &amp;&amp; whoami&quot;);</code>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511794814, "post_id": 47509180, "comment_id": 81983475, "body": "Additionally you can setup ssh keys and get rid of the password as you are storing root&#39;s password in a script."}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511847872, "post_id": 47509180, "comment_id": 82005549, "body": "Sure, i will try that way:) thank you.."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511847991, "post_id": 47509180, "comment_id": 82005593, "body": "ok let me know."}, {"owner": {"reputation": 631, "user_id": 6252353, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-g5fley8sHyg/AAAAAAAAAAI/AAAAAAAAAeg/R_WrMAny8wg/photo.jpg?sz=128", "display_name": "Andre Carneiro", "link": "https://stackoverflow.com/users/6252353/andre-carneiro"}, "edited": false, "score": 0, "creation_date": 1511893888, "post_id": 47509180, "comment_id": 82034007, "body": "Why you&#180;re not using the Perl script? Java is not good to do this kind of task anyways."}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "edited": false, "score": 0, "creation_date": 1511935905, "post_id": 47509180, "comment_id": 82049034, "body": "actually , i want to merge complete operations in single workspace using java, for which i don&#39;t need to maintain separate perl script  , and there are packages in java specifically for these operations , that will make it more simpler then perl .. but am unaware of their proper usage :("}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511949735, "post_id": 47509180, "comment_id": 82056423, "body": "@GerhardBarnard could you please show me , how that can be done? , i tried but not getting proper out , i tried chaining as in your last second comment , only su - root is getting executed and warning is given on &quot;Pswd &quot; saying that the string is never used ..  i.e the commands except &quot;su -root &quot; (the first one)  are not being executed."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511951060, "post_id": 47509180, "comment_id": 82057393, "body": "<a href=\"https://docs.joyent.com/public-cloud/getting-started/ssh-keys/generating-an-ssh-key-manually/manually-generating-your-ssh-key-in-windows\" rel=\"nofollow noreferrer\">here</a> as well as <a href=\"https://confluence.atlassian.com/bitbucketserver/creating-ssh-keys-776639788.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "edited": false, "score": 0, "creation_date": 1513940130, "post_id": 47509180, "comment_id": 82849757, "body": "i tried another way , integrated perl with eclipse (EPIC) , installed cygwin (since new version of Expect module in above perl script needs cygwin to get installed on windows) , changed interpreter to cygwin on eclipse.. and ran perl script .. tadaa.. it worked !"}], "owner": {"reputation": 83, "user_id": 9013966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d43193cd79adf3dfcf725f321af357?s=128&d=identicon&r=PG&f=1", "display_name": "SomeOne", "link": "https://stackoverflow.com/users/9013966/someone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1511865318, "creation_date": 1511779884, "last_edit_date": 1511865318, "question_id": 47509180, "link": "https://stackoverflow.com/questions/47509180/log-into-a-linux-machine-and-execute-multiple-commands", "title": "Log into a Linux machine and execute multiple commands", "body": "<p>I am trying to login and execute a set of commands through java from my remote computer (windows 7) into linux machine,</p>\n\n<p>(Distributor ID: RedHatEnterpriseServer<br>\nDescription:    Red Hat Enterprise Linux Server release 5.10<br>\nRelease:        5.10 )  </p>\n\n<p>Please look into the Perl script , which is working perfectly, same functionality needs to be achieved.  </p>\n\n<pre><code>use strict;  \nuse warnings; \n\nuse Net::SSH::Expect; \n\nmy $ssh = Net::SSH::Expect-&gt;new(   \n    host     =&gt; \"host123\",  \n    password =&gt; \"passwd\",  \n    user     =&gt; \"username\",  \n    raw_pty  =&gt; 1,  \n    timeout  =&gt; 1, \n);\n$ssh-&gt;login();\n\n$ssh-&gt;exec(\"su - root\");  \n$ssh-&gt;exec(\"passwd\");  \n$ssh-&gt;exec(\"su - user\");  \n$ssh-&gt;exec(\"command1\");  \n$ssh-&gt;exec(\"subcommand\"); \n\nmy $output = $ssh-&gt;exec(\"subcommand 2\");  \nwarn \"$output\\n\";  \n$ssh-&gt;exec(\"\\n\");\n\nmy $output2 = $ssh-&gt;exec(\"subcommand 3\");  \nwarn \"$output2\\n\";  \n$ssh-&gt;exec(\"\\n\")\n</code></pre>\n\n<p>similar function need to be executed with the help of java..\ncurrently i have written the following java code</p>\n\n<pre><code>import java.io.InputStreamReader;\nimport ch.ethz.ssh2.Connection;\nimport ch.ethz.ssh2.SCPClient;\nimport ch.ethz.ssh2.Session;\nimport ch.ethz.ssh2.StreamGobbler;\nimport java.util.concurrent.TimeUnit;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\npublic void sshExecute() throws Exception {\n\n    String username = \"username\";\n    String password = \"passwd\";\n    String hostname = \"host123\";\n    logger.setLevel(Level.INFO);\n\n    Object lastCommandOutput = null;\n    logger.info(\"starting connection with \" + hostname);\n\n    Connection connection = new Connection(hostname);\n    logger.info(\"connection object created..\");\n\n    connection.connect();\n    connection.authenticateWithPassword(username, password);\n\n    Session session = connection.openSession();\n    InputStream stdout = new StreamGobbler(session.getStdout());\n    BufferedReader stdoutReader = new BufferedReader(new InputStreamReader(stdout));\n    logger.info(\"connected\");\n\n    String tempCommand = \"su - root\";\n    String Pswd = \"passwd\";\n    logger.info(\"sending command: \" + tempCommand);\n\n    session.execCommand(tempCommand + Pswd);\n    TimeUnit.SECONDS.sleep(5);\n\n    session.execCommand(\"su - user\");\n\n    // Get output\n    StringBuffer sb = new StringBuffer();\n\n    while (true) {\n        String line = stdoutReader.readLine();\n        if (line == null)\n            break;\n        sb.append(line + \"\\n\");\n    }\n\n    String output = sb.toString();\n    lastCommandOutput = output;\n    logger.info(\"got output: \" + output);\n\n    stdoutReader.close();\n}\n</code></pre>\n\n<p>This is working fine till line <code>session.execCommand(\"su - user\");</code>. There,\nit gives an error as :  </p>\n\n<pre><code>java.io.IOException: A remote execution has already started.  java.lang.Error: java.io.IOException: A remote execution has already started at com.user1.test.Assert.fail(Assert.java:35)\n</code></pre>\n\n<p>How to login twice, i.e su -root and then su - user, and also why can't we use <code>execCommand</code> more than once for a session? Is there any other way to achieve this instead of <code>execCommand</code>, to achieve the above functionality?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 11, "user_id": 8426522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61dd0a73696152f0d6d290be3db100b6?s=128&d=identicon&r=PG&f=1", "display_name": "Harvey.X", "link": "https://stackoverflow.com/users/8426522/harvey-x"}, "edited": false, "score": 0, "creation_date": 1511767443, "post_id": 47505643, "comment_id": 81967208, "body": "I am writing a script to verify or change about 100+ unix servers&#39; password"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8426522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61dd0a73696152f0d6d290be3db100b6?s=128&d=identicon&r=PG&f=1", "display_name": "Harvey.X", "link": "https://stackoverflow.com/users/8426522/harvey-x"}, "edited": false, "score": 0, "creation_date": 1511772415, "post_id": 47506550, "comment_id": 81969399, "body": "&quot;Once an ssh connection was started using the connect() method it will remain open until you call the close() method.&quot; This is copied from description, or any misunderstanding ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 8426522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61dd0a73696152f0d6d290be3db100b6?s=128&d=identicon&r=PG&f=1", "display_name": "Harvey.X", "link": "https://stackoverflow.com/users/8426522/harvey-x"}, "edited": false, "score": 0, "creation_date": 1511772886, "post_id": 47506550, "comment_id": 81969661, "body": "@Harvey: I can see how that could be confusing but it is an error and no <code>connect</code> method is documented. How can you write a call to <code>connect</code> if the parameters are undocumented?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1511771185, "creation_date": 1511771185, "answer_id": 47506550, "question_id": 47505643, "link": "https://stackoverflow.com/questions/47505643/connect-method-not-found-in-perl-module-netsshexpect/47506550#47506550", "title": "connect() method not found in perl module &quot;Net::SSH::Expect&quot;", "body": "<blockquote>\n  <p>the module description told the method\u00a0<code>connect()</code>\u00a0will remain the connection until method\u00a0<code>close()</code>\u00a0called</p>\n</blockquote>\n\n<p>You need to read <a href=\"https://metacpan.org/pod/Net::SSH::Expect\" rel=\"nofollow noreferrer\">the documentation</a> again. It doesn't say that at all</p>\n\n<p>There is no <code>connect</code> method; you need to call</p>\n\n<pre><code>my $ssh = Net::SSH::Expect-&gt;new( ... )\n</code></pre>\n\n<p>with the appropriate parameters</p>\n"}], "owner": {"reputation": 11, "user_id": 8426522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61dd0a73696152f0d6d290be3db100b6?s=128&d=identicon&r=PG&f=1", "display_name": "Harvey.X", "link": "https://stackoverflow.com/users/8426522/harvey-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 47506550, "answer_count": 1, "score": -2, "last_activity_date": 1511777023, "creation_date": 1511767126, "last_edit_date": 1511777023, "question_id": 47505643, "link": "https://stackoverflow.com/questions/47505643/connect-method-not-found-in-perl-module-netsshexpect", "title": "connect() method not found in perl module &quot;Net::SSH::Expect&quot;", "body": "<p>I need to use some perl function in module <code>Net::SSH::Expect</code> the module description told the method <code>connect()</code> will remain the connection until method <code>close()</code> called. But I get an error</p>\n\n<blockquote>\n  <p>perl can't locate object method connect\" via package <code>Net::SSH::Expect</code></p>\n</blockquote>\n"}, {"tags": ["r", "excel", "perl"], "answers": [{"tags": [], "owner": {"reputation": 882, "user_id": 4282688, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/oI6t5.jpg?s=128&g=1", "display_name": "Carson", "link": "https://stackoverflow.com/users/4282688/carson"}, "is_accepted": true, "score": 1, "last_activity_date": 1511790487, "creation_date": 1511790487, "answer_id": 47512465, "question_id": 47502961, "link": "https://stackoverflow.com/questions/47502961/r-error-cannot-read-in-xls-spreadsheet-in-r-gives-error-in-file-existstfn/47512465#47512465", "title": "R Error: Cannot read in xls spreadsheet in R, gives &quot;Error in file.exists(tfn) : invalid &#39;file&#39; argument&quot;", "body": "<p>Restarting R studio from scratch fixed the issue.</p>\n"}], "owner": {"reputation": 882, "user_id": 4282688, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/oI6t5.jpg?s=128&g=1", "display_name": "Carson", "link": "https://stackoverflow.com/users/4282688/carson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 809, "favorite_count": 0, "accepted_answer_id": 47512465, "answer_count": 1, "score": 0, "last_activity_date": 1511790487, "creation_date": 1511747563, "question_id": 47502961, "link": "https://stackoverflow.com/questions/47502961/r-error-cannot-read-in-xls-spreadsheet-in-r-gives-error-in-file-existstfn", "title": "R Error: Cannot read in xls spreadsheet in R, gives &quot;Error in file.exists(tfn) : invalid &#39;file&#39; argument&quot;", "body": "<p>I'm trying to do an exercise from the Doing Data Science book, and at this code I keep erroring out. </p>\n\n<pre><code>mt &lt;- read.xls(\"rollingsales_manhattan.xls\", perl=\"C:\\\\Perl64\\\\bin\\\\perl.exe\", pattern=\"BOROUGH\",stringsAsFactors=FALSE)\n</code></pre>\n\n<p>With this error...</p>\n\n<pre><code>Error in xls2sep(xls, sheet, verbose = verbose, ..., method = method,  : \n  Intermediate file 'C:\\Users\\carson\\AppData\\Local\\Temp\\RtmpMjMWfI\\file267c48c84956.csv' missing!\nError in file.exists(tfn) : invalid 'file' argument\n</code></pre>\n\n<p>I've added that perl value to my method call, to specify where the Perl interpreter is on my machine. I've made sure the working directory is correct and the file name is correct...doing the following command to verify...</p>\n\n<pre><code>&gt; list.files()\n [1] \"Capture.PNG\"                        \"dds_ch2_rollingsales\"              \n [3] \"gross_sqft_vs_price.png\"            \"gross_sqft_vs_price_with_trend.png\"\n [5] \"load_cleandata.r\"                   \"model1 vs index.png\"               \n [7] \"model2 vs index.png\"                \"model2a vs index.png\"              \n [9] \"model3 vs index.png\"                \"model4 vs index.png\"               \n[11] \"rollingsales_manhattan.xls\"  \n</code></pre>\n\n<p>Any help?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511726086, "post_id": 47500346, "comment_id": 81956166, "body": "<code>push(@resultarray, @linearray)</code> : You probably want <code>push(@resultarray, \\@linearray)</code> or else <code>@resultarray</code> will be 1D ( and not 2D)"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511726458, "post_id": 47500346, "comment_id": 81956300, "body": "printed out in final output: ARRAY(0x1c3cf00) ARRAY(0x1c98708) ARRAY(0x1c289c8) ARRAY(0x1b0e120) ARRAY(0x1b0e090) ARRAY(0x1b0e198) ARRAY(0x1b0e1b0)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511726647, "post_id": 47500346, "comment_id": 81956366, "body": "I think you could do this also by storing the lines in a hash with field 0 on each line as the key and the array reference as the value. Then, update the hash only if key is not present, or if field 1 is greater than the current value of field 1. Then after you have read the file only the correct rows will be present in the hash"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511728413, "post_id": 47500346, "comment_id": 81957003, "body": "@ Hakon. i&#39;ve tried your method and updated the code above. Please suggest how to get finish the code that it removes rows that are now blank in the first column. thanks"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511728993, "post_id": 47500346, "comment_id": 81957197, "body": "i take it back ...the method i used doesn&#39;t sort by the second column. so still need help with sorting by the second column and then removing the duplicates.  Could you please come up with code examples. thanks"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511731371, "post_id": 47500346, "comment_id": 81958013, "body": "can&#39;t get it to work. please help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1511736315, "post_id": 47500346, "comment_id": 81959338, "body": "Is there really a mixture of spaces and underscores after <code>sample1</code> etc. at the start of each line?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511736781, "post_id": 47500346, "comment_id": 81959458, "body": "The layout of your code is dreadful, making it very difficult to read. You are welcome to make your own life as hard as you like, but this is very impolite when you are asking for free help and advice from strangers."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1511751508, "post_id": 47500346, "comment_id": 81962528, "body": "Sorry, I&#39;ve improved the readability of the code. thanks"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1511752302, "post_id": 47500346, "comment_id": 81962687, "body": "Your example data is space-delimited, not tab-delimited. Please modify your question to clarify which it is."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1511754041, "post_id": 47500346, "comment_id": 81963065, "body": "I did the best I could to insert tabs in the original data set. I feel like I&#39;m being discouraged from asking questions on this forum. This is the last time I will ask for help here.  If you don&#39;t want to help don&#39;t, but there is no need to belittle any one because they are not as good a programmer as you are."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1511754443, "post_id": 47500346, "comment_id": 81963153, "body": "We aren&#39;t trying to belittle you, it&#39;s just very difficult to answer questions when the examples aren&#39;t consistent with the description of the problem. It&#39;s like pulling into the shop with a car other than the one you want them to fix (or no car at all). We want to help, but you have to meet us halfway."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1511794828, "post_id": 47500346, "comment_id": 81983483, "body": "@mwp is &lt;&gt;; the same as while (&lt;&gt;){ print; } ? thanks"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1511798180, "post_id": 47500346, "comment_id": 81985653, "body": "@user3781528 <code>&lt;&gt;</code> means &quot;read lines from stdin or the filename given by ARGV[0]&quot; (roughly) and can be used in a while-loop or in expressions like <code>my @lines = &lt;&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 1, "last_activity_date": 1511754346, "creation_date": 1511754346, "answer_id": 47503665, "question_id": 47500346, "link": "https://stackoverflow.com/questions/47500346/sort-array-and-remove-duplicates-in-specific-columns-perl/47503665#47503665", "title": "sort array and remove duplicates in specific columns Perl", "body": "<p>This is a fairly straightforward UNIX one-liner. Why the requirement to write it in Perl?</p>\n\n<pre><code>$ sort -k1,1 -k2,2rn /data/Test/output.txt | awk '!seen[$1]++' | tee /data/Test/output_changed.txt\nsample1_EGFR_19 53  exon19  ...\nsample1_EGFR_20 12  exon20  ...\nsample2_EGFR_19 25  exon12  ...\nsample3_EGFR_20 125 exon20  ...\n</code></pre>\n\n<p>This sorts it by the first column ascending and by the second column descending and numeric, then uses <code>awk</code> to select the first line from each group. If that <code>awk</code> statement is too confusing, it has the same function as <code>awk 'x != $1 { print; x = $1 }'</code>. (<code>tee</code> writes the lines to the file <strong>and</strong> displays the output to the terminal.)</p>\n\n<p>If you really must use Perl, here's a simple solution to the described problem:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nsub sort_func {\n  # sort by the first col asc and then by the second col desc and numeric\n  $a-&gt;[0] cmp $b-&gt;[0] || $b-&gt;[1] &lt;=&gt; $a-&gt;[1]\n}\n\nmy %seen;\nprint\n  map join(\"\\t\", @$_),     # re-join the fields with tabs into the original line\n  grep !$seen{$_-&gt;[0]}++,  # select the first line of each sorted group\n  sort sort_func           # sort lines using the above sort function\n  map [split /\\t/, $_, 3], # split by tabs so we can sort by the first two fields\n  &lt;&gt;;                      # read lines from stdin or the filename given by ARGV[0]\n</code></pre>\n\n<p>Mark the file executable and use it like so:</p>\n\n<pre><code>./sortlines.pl /data/Test/output.txt &gt;/data/Test/output_changed.txt\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 47503665, "answer_count": 1, "score": -4, "last_activity_date": 1511790181, "creation_date": 1511725850, "last_edit_date": 1511790181, "question_id": 47500346, "link": "https://stackoverflow.com/questions/47500346/sort-array-and-remove-duplicates-in-specific-columns-perl", "title": "sort array and remove duplicates in specific columns Perl", "body": "<p></p>\n\n<p>I would like to remove duplicates rows in col 0 of an array in such a way that only the max values in col 1 remain. Data is tab delimited. There are 16 columns.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sample1_EGFR_19 53  exon19 ...\nsample1_EGFR_19 12      exon20 ...\nsample2_EGFR_19 20      exon19 ...\nsample3_EGFR_20 65      exon20 ...\nsample2_EGFR_19 25      exon12 ...\nsample1_EGFR_20 12      exon20 ...\nsample3_EGFR_20 125 exon20 ...\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sample1_EGFR_19 53      exon19 ...\nsample1_EGFR_20 12      exon20 ...\nsample2_EGFR_19 25      exon12 ...\nsample3_EGFR_20 125 exon20 ...\n</code></pre>\n\n<p>I've started with tab delimited text files that I split and populated an array.  Then i use a hash and sort by keys. The final output I get the data correctly sorted, however, the duplicates are not removed. How do I remove lines that are now blank in the first column? Thanks</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sample1_EGFR_19 53 exon19 ...\n                 12 exon20 ...\n sample2_EGFR_19 25 exon12 ...\n                 20 exon19 ...\n sample3 EGFR_20 125 exon20 ...\n                 65 exon20 ...\n sample1 EGFR_20 12 exon20 ...\n</code></pre>\n\n<p>Please suggest a straight forward method to accomplish his. Thanks</p>\n\n<p>Here is the code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse List::MoreUtils qw(uniq);\nuse List::Util 'first';\nuse Data::Dumper;\n\nmy $filename        = \"/data/Test/output.txt\";\nmy $output_filename = \"/data/Test/output_changed.txt\";\n\nmy @resultarray;\nmy @sorted;\n\nopen( TXT2, \"$filename\" );\nwhile ( &lt;TXT2&gt; ) {\n    push( @resultarray, $_ );\n}\nclose( TXT2 );\n\nforeach ( @resultarray ) {\n    chop( $_ );\n}\n\nforeach ( @resultarray ) {\n    print( $_);\n    chomp( $_ );\n    my ( $key, $val ) = split /\\t/, $_, 2;\n    push @{ $result_hash{$key} }, $val;\n}\n\nforeach ( sort { $result_hash{$a} &lt;=&gt; $result_hash{$b} } keys %result_hash ) {\n    push( @final_array, $_ . \"\\t\" . join \"\\t\", @{ $result_hash{$_} } );\n}\n\nundef %{result_hash};\n\nforeach ( @final_array ) {\n    chomp( $_ );\n    print( $_);\n}\n\nfor ( 0 .. @final_array - 1 ) {\n\n    my $myuniquearray = $final_array[$_];\n    open( MYFILE, \"&gt;&gt;$output_filename\" );    ##opens files with header and adds the rest of the lines.\n\n    print MYFILE $myuniquearray . \"\\n\";\n    close( MYFILE );\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1511733935, "post_id": 47498322, "comment_id": 81958681, "body": "<code>@INC</code> is only used by <code>require</code> (which is used by <code>use</code>) and <code>do</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511733945, "post_id": 47498322, "comment_id": 81958685, "body": "<a href=\"https://pastebin.com/VRsQc0UZ\" rel=\"nofollow noreferrer\">Answer to your deleted question</a>"}], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1511713645, "creation_date": 1511713645, "answer_id": 47498361, "question_id": 47498322, "link": "https://stackoverflow.com/questions/47498322/perl-passing-folder-name-is-not-working-correctly/47498361#47498361", "title": "perl passing folder name is not working correctly", "body": "<ul>\n<li><code>-f</code> checks that you have a plain file. A directory is not a plain file.</li>\n<li>The check <code>-e</code> would test for existence of some file system object, including directories.</li>\n<li>The check <code>-d</code> would test that you have a directory.</li>\n</ul>\n\n<p>For details on the file test operators, read <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"noreferrer\"><code>perldoc -f -X</code></a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9010997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f88c39f7cdedf72ad2b0682c298becd3?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanNotion", "link": "https://stackoverflow.com/users/9010997/bram-vannotion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 47498361, "answer_count": 1, "score": -1, "last_activity_date": 1511733902, "creation_date": 1511713414, "last_edit_date": 1511733902, "question_id": 47498322, "link": "https://stackoverflow.com/questions/47498322/perl-passing-folder-name-is-not-working-correctly", "title": "perl passing folder name is not working correctly", "body": "<p>I am building a script that receives a folder path as an input.</p>\n\n<p>This is my folder structure:</p>\n\n<pre><code>X/bin/\nX/bin/myscript.pl\nX/data/\nX/data/myfolder\n</code></pre>\n\n<p>I open the terminal at the folder <code>bin</code> and call my script as this:</p>\n\n<p><code>perl myscript.pl ../data/myfolder</code></p>\n\n<p>so as you see, I give input which is the relative path to my folder</p>\n\n<p>but when I check if that directory exists (which it does) using this code:</p>\n\n<pre><code>-f $folderpath\n</code></pre>\n\n<p>I get false</p>\n\n<h3>my question</h3>\n\n<p>how can I enter the path to my folder?</p>\n\n<h3>Hint</h3>\n\n<p>In myscript.pl I already add the path to folder <code>X</code> to my @INC</p>\n\n<p>Thank you</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1511707752, "post_id": 47497195, "comment_id": 81949972, "body": "It&#39;s a bit unclear to me. You just want to pick the <code>20.2</code>, <code>22.4</code>, <code>23.4</code> from the line that starts with <code>Q</code>? Is that right? Or do you want to pick other lines/values as well? /// Do all your lines contain 4 space-separated columns?"}, {"owner": {"reputation": 103, "user_id": 8962300, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0f2296dc68ce17d502f58408462d61c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ububtunoob", "link": "https://stackoverflow.com/users/8962300/ububtunoob"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1511708160, "post_id": 47497195, "comment_id": 81950108, "body": "@PerlDuck yes all lines contain 4 space-separated columns. I do wan to just pick 20.2, 20.4 and 23.4 from the Q row. I do also want to pick other rows as well. For instance row F, I just want the second field ( gge0001x). There are other rows with different criteria, but once I figure out how to do it on one example, I should be able to implement it throughout"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1511729425, "post_id": 47497195, "comment_id": 81957365, "body": "A suggestion: when learning a new tool try not to emulate other tools that you know.  While this can help a little bit to get you going, the sooner you get to use the new tool with its native ways and idioms the better.  For instance, there is no need for reference to <code>awk</code> and <code>cut</code> here."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1511754770, "post_id": 47497195, "comment_id": 81963221, "body": "<code>&#47;\\bF|T|B|P|Q|R|H|O|C|K|W|L\\b&#47;</code> matches  <code>\\bF</code> or <code>T</code> or <code>B</code> or ... or <code>L\\b</code>.  You probably meant <code>&#47;\\b(?:F|T|B|P|Q|R|H|O|C|K|W|L)\\b&#47;</code> or <code>&#47;^(?:F|T|B|P|Q|R|H|O|C|K|W|L)&#47;</code> (which could also be written <code>&#47;\\b[FTBPQRHOCKWL]\\b&#47;</code> or <code>&#47;^[FTBPQRHOCKWL]&#47;</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 8962300, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0f2296dc68ce17d502f58408462d61c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ububtunoob", "link": "https://stackoverflow.com/users/8962300/ububtunoob"}, "edited": false, "score": 0, "creation_date": 1511708755, "post_id": 47497459, "comment_id": 81950312, "body": "I have removed the second loop and have added a new line that is somewhat working."}], "tags": [], "owner": {"reputation": 15, "user_id": 8928533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863f41de6f43ee5181643719ebec25a8?s=128&d=identicon&r=PG&f=1", "display_name": "Shane Landrum", "link": "https://stackoverflow.com/users/8928533/shane-landrum"}, "is_accepted": false, "score": -1, "last_activity_date": 1511708406, "creation_date": 1511708406, "answer_id": 47497459, "question_id": 47497195, "link": "https://stackoverflow.com/questions/47497195/use-perl-like-awk-to-cut-fields/47497459#47497459", "title": "Use Perl like awk to cut fields", "body": "<p>The fact that you have two separate <code>while(&lt;$fh&gt;)</code> loops is part of the problem. That second while loop is never running. I'd try combining the loops as the first step to solving the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 2, "last_activity_date": 1511709882, "creation_date": 1511709882, "answer_id": 47497711, "question_id": 47497195, "link": "https://stackoverflow.com/questions/47497195/use-perl-like-awk-to-cut-fields/47497711#47497711", "title": "Use Perl like awk to cut fields", "body": "<p>You can do it as oneliner, for example as:</p>\n\n<pre><code>perl -lanE 'print \"@F[1,2,3]\" if $F[0] eq \"Q\"' &lt; data.txt\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>20.2 22.3 23.4\n</code></pre>\n\n<p>for the meaning of the switches see <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">prelrun</a>.</p>\n\n<p>Or using script - one pass:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse Data::Dumper;\n\nwhile(&lt;&gt;) {\n    chomp;\n    my @cols = split /\\s+/;\n    if( $cols[0] eq 'Q' ) {\n        say \"for Q: @cols[1,2,3]\";\n    }\n}\n</code></pre>\n\n<p>Use it as <code>perl script.pl &lt; data.txt</code> (redirection). It prints</p>\n\n<pre><code>for Q: 20.2 22.3 23.4\n</code></pre>\n\n<p>If you want load the whole \"matrix\" beforehand</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n#use Data::Dumper;\n\nmy $matrixref;\nwhile(&lt;&gt;) {\n    chomp;\n    push @$matrixref, [split /\\s+/];\n}\n#say Dumper $matrixref;\n\nfor my $lineref (@$matrixref) {\n    if( $lineref-&gt;[0] eq 'Q' ) {\n        say \"for Q: @$lineref[1,2,3]\";\n    }\n}\n</code></pre>\n\n<p>again, using the <code>perl script.pl &lt; data.txt</code> prints:</p>\n\n<pre><code>for Q: 20.2 22.3 23.4\n</code></pre>\n\n<p>Of course, you can change the <code>while(&lt;&gt;)</code> to <code>while(&lt;$fh&gt;)</code> and open the file internally... etc.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1511727631, "post_id": 47497772, "comment_id": 81956730, "body": "Or <code>my ($first, $second, $third) = @{ $data{Q} };</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1511754660, "post_id": 47497772, "comment_id": 81963195, "body": "<code>split &#39; &#39;</code> is a special form of split; it doesn&#39;t split on space characters, it splits on any (or multiple) whitespace, like <code>split &#47;\\s+&#47;</code>, except that it also ignores any leading whitespace.  If you actually want to split on space characters, do <code>split &#47; &#47;</code>"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 1, "last_activity_date": 1511710290, "creation_date": 1511710290, "answer_id": 47497772, "question_id": 47497195, "link": "https://stackoverflow.com/questions/47497195/use-perl-like-awk-to-cut-fields/47497772#47497772", "title": "Use Perl like awk to cut fields", "body": "<p>I think the easiest way is to split each line at space characters and then put them into a hash with the first column as key and the remaining 3 columns as value (in an array ref):</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\n# hash which gets filled with { 'Q' =&gt; [ 20.2, 22.3, 23.4 ], ... }\nmy %data;\n\nwhile( &lt;DATA&gt; ) {\n    my @col = split(' ', $_ );\n    $data{ $col[0] } = [ $col[1], $col[2], $col[3] ];\n}\n\nprint Data::Dumper::Dumper(\\%data);\n\n__DATA__\nF gge0001x gge0001y gge0001z\nD 12-30-2006 12-30-2006 12-30-2006\nT 14:15:20 14:15:55 14:16:27\nS a69 a69 a69\nB 15.8 16.1 15\nM gge06001 gge06001 gge06001\nP 30.1 29.6 29.9\nQ 20.2 22.3 23.4\n</code></pre>\n\n<p><strong>Output</strong> (reduced):</p>\n\n<pre><code>$VAR2 = {\n  'B' =&gt; [\n    '15.8',\n    '16.1',\n    '15'\n  ],\n  'D' =&gt; [\n    '12-30-2006',\n    '12-30-2006',\n    '12-30-2006'\n  ],\n  ...\n  'Q' =&gt; [\n    '20.2',\n    '22.3',\n    '23.4'\n  ],\n  ...\n};\n</code></pre>\n\n<p>Now you can access the values for <code>Q</code> like this:</p>\n\n<pre><code>my $first  = $data{'Q'}[0];\nmy $second = $data{'Q'}[1];\nmy $third  = $data{'Q'}[2];\n</code></pre>\n\n<p>This assumes that you have only <em>one</em> row starting with <code>Q</code>.</p>\n"}], "owner": {"reputation": 103, "user_id": 8962300, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0f2296dc68ce17d502f58408462d61c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ububtunoob", "link": "https://stackoverflow.com/users/8962300/ububtunoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 47497772, "answer_count": 3, "score": 1, "last_activity_date": 1511710290, "creation_date": 1511706523, "last_edit_date": 1511708730, "question_id": 47497195, "link": "https://stackoverflow.com/questions/47497195/use-perl-like-awk-to-cut-fields", "title": "Use Perl like awk to cut fields", "body": "<p>I am new to perl and am attempting to extract data from a file like I would with awk. I have gathered the data from the file and stored it in the array \"array\". I want to grab the only certain columns and only certain rows. For example, I want to only select the index of 7 (Q) and select the three numbers to eventually make a subroutine to average them out. I also want to be able to grab just a single field from say D for the date. There are very easy ways to do this with awk and cut, but I am having a very difficult time figuring out how to do this with Perl. </p>\n\n<pre><code>Here is the data.txt file\nF gge0001x gge0001y gge0001z\nD 12-30-2006 12-30-2006 12-30-2006\nT 14:15:20 14:15:55 14:16:27\nS a69 a69 a69\nB 15.8 16.1 15\nM gge06001 gge06001 gge06001\nP 30.1 29.6 29.9\nQ 20.2 22.3 23.4\n</code></pre>\n\n<p>I can get it to where I can select the index that I want, I just cant cut the fields</p>\n\n<pre><code>Performance Data\nQ 20.2 22.4. 23.4\n</code></pre>\n\n<p>Here is my code so far... </p>\n\n<pre><code>use constant;\nuse strict;\nuse warnings;\nuse diagnostics;\n\nmy $my_file = 'data.txt';\nmy @array;\n\nopen my $fh, '&lt;', 'data.txt'\n        or die \"Cant open : \";\n\nprintf (\"%10s\", \"Performance Data\\n\");\n\nwhile(&lt;$fh&gt;)\n{\n\n        if( /\\bF|T|B|P|Q|R|H|O|C|K|W|L\\b/)\n        {\n                push @array, $_;\n\n        }\n}\n\n\nmy @tab = split(/\\s+/, $array[2]);\nprint $tab[-2], [-3],  \"\\n\";\n</code></pre>\n\n<p>Thank you for you help</p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511688476, "post_id": 47494090, "comment_id": 81944327, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/159833/discussion-between-hobbs-and-ikegami\">continue this discussion in chat</a>."}, {"owner": {"reputation": 631, "user_id": 6252353, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-g5fley8sHyg/AAAAAAAAAAI/AAAAAAAAAeg/R_WrMAny8wg/photo.jpg?sz=128", "display_name": "Andre Carneiro", "link": "https://stackoverflow.com/users/6252353/andre-carneiro"}, "edited": false, "score": 0, "creation_date": 1511893154, "post_id": 47494090, "comment_id": 82033655, "body": "You&#180;re presuming that exists some &quot;automatic&quot; method generator. This is not how Moose works! Please, read the docs!  <a href=\"https://www.google.com.br/search?q=metacpan+%2B+Moose&amp;oq=metacpan+%2B+Moose&amp;aqs=chrome..69i57j69i64.3064j0j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">google.com.br/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1511749390, "last_edit_date": 1511749390, "creation_date": 1511683655, "answer_id": 47494153, "question_id": 47494090, "link": "https://stackoverflow.com/questions/47494090/getting-error-for-reader-and-writer-accessor-method-of-moose-in-perl/47494153#47494153", "title": "Getting error for reader and writer accessor method of Moose in perl", "body": "<p>You misspelled <code>set_salary</code>.</p>\n\n<pre><code>writer =&gt; 'set_slalary'\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>writer =&gt; 'set_salary'\n</code></pre>\n\n<hr>\n\n<p>Note that</p>\n\n<pre><code>is =&gt; 'rw'\n</code></pre>\n\n<p>is just another way of writing</p>\n\n<pre><code>accessor =&gt; 'salary'\n</code></pre>\n\n<p>Usually. <code>is</code> is unreliable when <code>reader</code>, <code>writer</code> and/or <code>accessor</code> are also provided for the same attribute. For example, <code>is</code> is sometimes ignored when <code>reader</code>, <code>writer</code> and/or <code>accessor</code> are also provided for the same attribute. (Demonstration below.) This is the case for your program.</p>\n\n<p>As such, it's a bad idea to mix <code>is</code> with <code>reader</code>/<code>writer</code>/<code>accessor</code>. Use one style or the other, but not both for any given attribute. In your case, you should get rid of useless <code>is =&gt; 'rw'</code>.</p>\n\n<hr>\n\n<p>Demonstration of <code>is=&gt;'rw'</code>+<code>reader</code>+<code>writer</code> bug:</p>\n\n<p><code>Class.pm</code>:</p>\n\n<pre><code>package Class;\n\nuse Moose;\n\nhas attr1 =&gt; (\n   is =&gt; 'rw',\n   default =&gt; 'val1',\n);\n\nhas attr2 =&gt; (\n   is =&gt; 'rw',\n   reader =&gt; 'get_attr2',\n   writer =&gt; 'set_attr2',\n   default =&gt; 'val2',\n);\n\n1;\n</code></pre>\n\n<p><code>a.pl</code>:</p>\n\n<pre><code>use feature qw( say );\n\nuse FindBin qw( $RealBin );\nuse lib $RealBin;\n\nuse Class;\n\nmy $o = Class-&gt;new();\nsay $o-&gt;attr1();\nsay $o-&gt;attr2();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>val1\nCan't locate object method \"attr2\" via package \"Class\" at a.pl line 10.\n</code></pre>\n"}], "owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1511749390, "creation_date": 1511682945, "last_edit_date": 1511683268, "question_id": 47494090, "link": "https://stackoverflow.com/questions/47494090/getting-error-for-reader-and-writer-accessor-method-of-moose-in-perl", "title": "Getting error for reader and writer accessor method of Moose in perl", "body": "<p>I'm trying to use Moose <code>reader</code> and <code>writer</code> for setting and getting a value.</p>\n\n<p>The following is <code>employee.pm</code>:</p>\n\n<pre><code>package employee;\nuse Moose;\n\nhas 'firstName' =&gt; (is =&gt; 'ro' , isa =&gt; 'Str' , required =&gt; 1);\n\nhas 'salary' =&gt; (is =&gt; 'rw',\n         isa =&gt; 'Str',\n         writer =&gt; 'set_slalary',\n         reader =&gt; 'get_salary',\n         );\n\nhas 'department' =&gt; (is =&gt; 'rw' , default =&gt; 'support' );\nhas 'age' =&gt; (is =&gt; 'ro' , isa=&gt; 'Str');\n\nno Moose;\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n1;\n</code></pre>\n\n<p>The following is my script <code>1.pl</code> (which uses the above module):</p>\n\n<pre><code>use employee;\nuse strict;\nuse warnings;\n\nmy $emp = employee-&gt;new(firstName =&gt; 'Tom' , salary =&gt; 50000 , department =&gt; 'R&amp;D' , age =&gt; '27');\n\n$emp-&gt;set_salary(100000);\n\nprint $emp-&gt;firstName, \" works in \", $emp-&gt;department, \" and his salary is \",  $emp-&gt;get_salary() , \" and age is \", $emp-&gt;age ,\"\\n\" ;\n</code></pre>\n\n<p>In the script, I'm trying to update the <code>salary</code> attribute to <code>100000</code>. \nI'm getting the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate object method \"set_salary\" via package \"employee\" at 1.pl line 7\n</code></pre>\n\n<p>If I comment the line <code>$emp-&gt;set_salary(100000);</code> in <code>1.pl</code>, then I get proper output (without the updated value for the <code>salary</code> attribute, obviously).</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Tom works in R&amp;D and his salary is 50000 and age is 27\n</code></pre>\n\n<p>In <code>employee.pm</code>, I have given read and write permission for <code>salary</code> attribute. Can anyone suggest where I am going wrong? Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 1, "creation_date": 1511642865, "post_id": 47490298, "comment_id": 81936019, "body": "your packages need a <code>.pm</code> extension and usually follow the directory path for their name <code>X&#47;Pa2.pm</code> and <code>X&#47;Y&#47;Pa1.pm</code>"}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "reply_to_user": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 0, "creation_date": 1511645045, "post_id": 47490298, "comment_id": 81936610, "body": "@KeepCalmAndCarryOn I changed them to .pm but still the same error :("}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511645446, "post_id": 47490659, "comment_id": 81936703, "body": "that didn&#39;t change anything :( I changed the extension to .pm and the packages are already as the file name but stil the same error"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511645668, "post_id": 47490659, "comment_id": 81936756, "body": "Please provide the actual error message returned, and the complete path to the file you are trying to load."}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511645894, "post_id": 47490659, "comment_id": 81936817, "body": "ikegmai: the files are like this: <code>X(folder)-&gt;Y.pm</code>, <code>X(folder)-&gt;Y(folder)-&gt;Z.pm</code> and inside Z.pm I do use X::Y and the message is X/Y.pm is not in @INC, INC doen&#39;t contains the base folder (which is X) but I am using <code>use lib (&#39;.&#39;);</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511645982, "post_id": 47490659, "comment_id": 81936833, "body": "<code>use lib (&#39;.&#39;);</code> is incorrect and different than what I said you should use. Start by fixing that. Then, if you still get the error, please provide the actual error message returned, and the complete path to the file you are trying to load."}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646290, "post_id": 47490659, "comment_id": 81936902, "body": "<code>Can&#39;t locate X&#47;Y.pm in @INC (you may need to install the X::Y module) (@INC contains: . &#47;Library&#47;Perl&#47;5.18&#47;darwin-thread-multi-2level &#47;Library&#47;Perl&#47;5.18 &#47;Network&#47;Library&#47;Perl&#47;5.18&#47;darwin-thread-multi-2level &#47;Network&#47;Library&#47;Perl&#47;5.18 &#47;Library&#47;Perl&#47;Updates&#47;5.18.2&#47;darwin-thread-multi-2level &#47;Library&#47;Perl&#47;Updates&#47;5.18.2 &#47;System&#47;Library&#47;Perl&#47;5.18&#47;darwin-thread-multi-2level &#47;System&#47;Library&#47;Perl&#47;5.18 &#47;System&#47;Library&#47;Perl&#47;Extras&#47;5.18&#47;darwin-thread-multi-2level &#47;System&#47;Library&#47;Perl&#47;Extras&#47;5.18) at X.pm line 12.</code> and the path to my file is:"}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646334, "post_id": 47490659, "comment_id": 81936911, "body": "<code>&#47;Users&#47;myname&#47;Documents&#47;blabla&#47;ccccc&#47;ggg&#47;x&#47;lib&#47;X&#47;Y</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646372, "post_id": 47490659, "comment_id": 81936923, "body": "Are these modules only used by one script?"}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646453, "post_id": 47490659, "comment_id": 81936945, "body": "so far yes, maybe later there will be a new moduel at the folder Y (so same folder as Z.pm) that will use the module X::Y"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646522, "post_id": 47490659, "comment_id": 81936963, "body": "That&#39;s not actually relevant. What&#39;s the full path to the script (Is it <code>&#47;Users&#47;myname&#47;Documents&#47;blabla&#47;ccccc&#47;ggg&#47;x&#47;script.pl</code>?)"}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646647, "post_id": 47490659, "comment_id": 81936991, "body": "no, the full path is: <code>&#47;Users&#47;myname&#47;Documents&#47;blabla&#47;ccccc&#47;ggg&#47;x&#47;lib&#47;X&#47;Y&#47;Z.pm</code> indeed the Z.pm is a moduel but It is calling a subroutine inside it, and I am doing it because I am developing the moduel so it is easy just to call it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646668, "post_id": 47490659, "comment_id": 81936997, "body": "That&#39;s not a script. What&#39;s the full path to the script you&#39;ve asked <code>perl</code> to execute? (If you&#39;re not sure, place the following before the <code>use</code>: <code>BEGIN { print &quot;$0\\n&quot;; }</code>)"}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646765, "post_id": 47490659, "comment_id": 81937013, "body": "I don&#39;t have a script yet, I am calling <code>perl Z.pm</code> :) should I create a script that calls a subrotine from Z.pm ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511646873, "post_id": 47490659, "comment_id": 81937039, "body": "Never pass a .pm directly to <code>perl</code>. Use <code>perl -e&#39;use X::Y::Z;&#39;</code> instead, although you actually need <code>perl -e&#39;use lib &quot;&#47;Users&#47;myname&#47;Documents&#47;blabla&#47;ccccc&#47;ggg&#47;x&#47;lib&quot;; use X::Y::Z;&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511647016, "post_id": 47490659, "comment_id": 81937074, "body": "If you create the script in <code>x</code>, you need <code>use FindBin 1.51 qw( $RealBin ); use lib &quot;$RealBin&#47;lib&quot;;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511647035, "post_id": 47490659, "comment_id": 81937077, "body": "If you create the script in <code>x&#47;lib</code>, you need <code>use FindBin 1.51 qw( $RealBin ); use lib $RealBin;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511647051, "post_id": 47490659, "comment_id": 81937080, "body": "If you create the script in <code>x&#47;bin</code>, you need <code>use FindBin 1.51 qw( $RealBin ); use lib &quot;$RealBin&#47;..&#47;lib&quot;;</code>."}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511647246, "post_id": 47490659, "comment_id": 81937129, "body": "adding use lib &quot;/Users/myname/Documents/blabla/ccccc/ggg/x/lib solved the issue. let me try your FindBin solution as well"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511647324, "post_id": 47490659, "comment_id": 81937153, "body": "You could do that, but most people would prefer not using an absolute path like that."}, {"owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511647580, "post_id": 47490659, "comment_id": 81937211, "body": "sad  I don&#39;t have permission to upvote your soution :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "edited": false, "score": 0, "creation_date": 1511647720, "post_id": 47490659, "comment_id": 81937242, "body": "No worries. It didn&#39;t work because the base dir wasn&#39;t in <code>@INC</code>. (<code>.</code> wasn&#39;t the base dir.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1511646973, "last_edit_date": 1511646973, "creation_date": 1511645135, "answer_id": 47490659, "question_id": 47490298, "link": "https://stackoverflow.com/questions/47490298/perl-how-to-import-my-package-from-another-package/47490659#47490659", "title": "Perl how to import my package from another package?", "body": "<p>Modules should have the <code>.pm</code> extension, and the name of the file should match the name of the package.</p>\n\n<p>To fix:</p>\n\n<pre><code>mkdir -p X\nmv XFolder/package2.pl X/Pa2.pm\n\nmkdir -p X/Y\nmv XFolder/YFolder/package1.pl X/Y/Pa1.pm\n</code></pre>\n\n<hr>\n\n<p>These paths need to be relative to some path found in <code>@INC</code>.</p>\n\n<p>If these modules are used my multiple scripts, add the following to your login script:</p>\n\n<pre><code>export PERL5LIB=/path/to/lib\n</code></pre>\n\n<p>If these modules are only used by one script, and the base directory is the directory in which the script resides, add the following to your script:</p>\n\n<pre><code>use FindBin 1.51 qw( $RealBin );\nuse lib $RealBin;                    # Or maybe: use lib \"$RealBin/lib\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use Cwd qw( abs_path );\nuse File::Basename qw( dirname );\nuse lib dirname(abs_path($0));       # Or maybe: use lib dirname(abs_path($0)).\"/lib\";\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8929289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0412ba1621f3a0480906bb9916c80f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bram vanDem", "link": "https://stackoverflow.com/users/8929289/bram-vandem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 47490659, "answer_count": 1, "score": 0, "last_activity_date": 1511646973, "creation_date": 1511642259, "last_edit_date": 1511645619, "question_id": 47490298, "link": "https://stackoverflow.com/questions/47490298/perl-how-to-import-my-package-from-another-package", "title": "Perl how to import my package from another package?", "body": "<p>This is my folder structure:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>XFolder/\nXFolder/YFolder/\nXFolder/YFolder/package1.pl\nXFolder/package2.pl\n</code></pre>\n\n<p>In <code>package2.pl</code>, I have:</p>\n\n<pre><code>package X::Pa2\n</code></pre>\n\n<p>In <code>package1.p1</code>, I have:</p>\n\n<pre><code>package X::Y::Pa1\n</code></pre>\n\n<p>In <code>package1.pl</code>, when I do this:</p>\n\n<pre><code>use X::Pa2;\n</code></pre>\n\n<p>I get</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Can't locate X/PA2.pm in @INC (you may need to install the X::Pa2 module)\n</code></pre>\n\n<p>How to fix it please?</p>\n\n<p>I know  where the problem is and I tried to use google to help but I couldn't add my <code>X::Pa2</code> to my <code>@INC</code> and I don't know if there is a more standard solution from Perl experts</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511648450, "post_id": 47490189, "comment_id": 81937425, "body": "You can invoke <b>GNU Parallel</b> as <code>sem -j N</code> and it will only allow <code>N</code> instances to run in parallel <a href=\"https://stackoverflow.com/a/46206137/2836621\">stackoverflow.com/a/46206137/2836621</a> and <a href=\"https://www.gnu.org/software/parallel/sem.html\" rel=\"nofollow noreferrer\">gnu.org/software/parallel/sem.html</a>"}, {"owner": {"reputation": 1414, "user_id": 7314180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZkLQ.png?s=128&g=1", "display_name": "YenForYang", "link": "https://stackoverflow.com/users/7314180/yenforyang"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511728567, "post_id": 47490189, "comment_id": 81957055, "body": "@Mark Ah yes, totally forgot about that useful program, and it&#39;s written in Perl too. Do you know if the semaphore functionality works if the command is called multiple times, with each time in a <i>different</i> script? That is---using the toilet analogy----does each script instance have its own &quot;room of toilets&quot; which no other script instances can access, or do all script instances use the same &quot;room&quot;?"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1511728941, "post_id": 47490189, "comment_id": 81957183, "body": "Yes, as long as the different programs all give the same <code>--id</code> like in the answer I linked."}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 0, "creation_date": 1511880317, "post_id": 47490189, "comment_id": 82025270, "body": "If server freezing is an issue, you can use <code>--timeout</code> to kill <code>rclone</code> if it takes much longer than expected."}], "answers": [{"tags": [], "owner": {"reputation": 878, "user_id": 916833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f79bf0fe2f6431150b17c1ac43b4fb?s=128&d=identicon&r=PG", "display_name": "Colin Phipps", "link": "https://stackoverflow.com/users/916833/colin-phipps"}, "is_accepted": true, "score": 4, "last_activity_date": 1511644118, "creation_date": 1511644118, "answer_id": 47490532, "question_id": 47490189, "link": "https://stackoverflow.com/questions/47490189/limiting-the-number-of-simultaneous-instances-of-a-program-executed-within-a-per/47490532#47490532", "title": "Limiting the number of simultaneous instances of a program executed within a Perl script (to &gt;1)", "body": "<p>I'll assume for a moment that your script is the only thing running <code>rclone</code>. If you wanted only 1 copy running, <a href=\"http://world.std.com/~swmcd/steven/tech/flock.html\" rel=\"nofollow noreferrer\">you would just use a lockfile</a>.</p>\n\n<p>For N instances (for small N), I would just have N lockfiles - have the program try each lock in turn, in a loop; pause if all the locks are already held and retry 1s later, in a loop. Once it has a lock, run <code>rclone</code> then release the lock when it is done.</p>\n\n<hr>\n\n<p>A more sound approach would be to use SysV semaphores but, unless you want a large N, really care about response times or are worried about fairness between callers, it is not likely to be worth the time learning them.</p>\n\n<hr>\n\n<p>If your script is not the only program calling <code>rclone</code>, then would need to intercept all calls - instead of putting this code in your program, could replace <code>rclone</code> by wrapper that implements the parallelism constraint as above and then calls the real program.</p>\n"}, {"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": false, "score": 2, "last_activity_date": 1511881015, "creation_date": 1511881015, "answer_id": 47534569, "question_id": 47490189, "link": "https://stackoverflow.com/questions/47490189/limiting-the-number-of-simultaneous-instances-of-a-program-executed-within-a-per/47534569#47534569", "title": "Limiting the number of simultaneous instances of a program executed within a Perl script (to &gt;1)", "body": "<p>GNU Parallel can work on a job queue <a href=\"https://www.gnu.org/software/parallel/man.html#EXAMPLE:-GNU-Parallel-as-queue-system-batch-manager\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/parallel/man.html#EXAMPLE:-GNU-Parallel-as-queue-system-batch-manager</a></p>\n\n<pre><code>true &gt;jobqueue; tail -n+0 -f jobqueue | parallel -j10 --timeout 1h rclone\n</code></pre>\n\n<p>And then run <code>&lt;A&gt;</code> as this:</p>\n\n<pre><code>&lt;A&gt; &gt;&gt; jobqueue\n</code></pre>\n\n<p>You will now and then have to clean up <code>jobqueue</code>. But unless <code>&lt;A&gt;</code> produces an insane amount of data, then it will typically be enough simply to zero it (<code>true &gt;jobqueue</code>) at every reboot.</p>\n"}], "owner": {"reputation": 1414, "user_id": 7314180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OZkLQ.png?s=128&g=1", "display_name": "YenForYang", "link": "https://stackoverflow.com/users/7314180/yenforyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 47490532, "answer_count": 2, "score": 3, "last_activity_date": 1511881015, "creation_date": 1511641399, "last_edit_date": 1511642153, "question_id": 47490189, "link": "https://stackoverflow.com/questions/47490189/limiting-the-number-of-simultaneous-instances-of-a-program-executed-within-a-per", "title": "Limiting the number of simultaneous instances of a program executed within a Perl script (to &gt;1)", "body": "<p>I'm using a resource-intensive program in a Perl script [specifically <code>rclone</code> to transfer files to Google Drive]. </p>\n\n<p>I have yet to figure out how I want to call <code>rclone</code>, as I need to limit the number of instances of <code>rclone</code> based on some condition (<em>anything</em> relevant to preventing server overload, freezing, crashing, etc.). I would like for the script to wait for the apt system \"conditions\" (this can be for some long or indefinite amount of time) before it executes <code>rclone</code>.</p>\n\n<p>Some details:</p>\n\n<ul>\n<li>The script itself is essentially passed a file or directory path containing (possibly numerous) files by another program (this program written in Python--call this program <code>&lt;A&gt;</code> for reference).</li>\n<li><code>&lt;A&gt;</code> only returns a value to a script and thus knows nothing about the script or <code>rclone</code>, other than that it accepts input.</li>\n<li><code>&lt;A&gt;</code> cannot be altered (i.e. changing <code>&lt;A&gt;</code> is  beyond my ken)</li>\n<li><code>&lt;A&gt;</code> fires at varying intervals [i.e. sometimes it will execute the script many times rapidly in succession (creating multiple instances), other times it might only fire once every few hours, minutes, etc.]</li>\n<li>Assume that <code>rclone</code> can't be altered directly either (i.e. again, beyond my ken).</li>\n<li>If absolutely necessary, the number of instances of the script can be limited instead of <code>rclone</code> (though I'd prefer it only be <code>rclone</code>, as the processing done by the script is rather light and needs no limitation).</li>\n<li>Modules are fine to use.</li>\n<li>I would like to avoid using Unix-like operating system commands like <code>pgrep</code> and <code>ps</code> (unless absolutely necessary).</li>\n</ul>\n\n<p>Currently, I'm using a rather poorly written bash script in place of the Perl script. The bash script implements a rudimentary (poorly designed) \"check/sleep loop\" using <code>pgrep -wc</code>, <code>sleep</code>, <code>while</code> loops and <code>if</code> statements. (To be honest, I don't even think the bash script really works/helps atm.)</p>\n"}, {"tags": ["macos", "perl", "safari", "gif", "macos-high-sierra"], "comments": [{"owner": {"reputation": 9698, "user_id": 111036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4d7fd4b3ed484fc72aa50e4abf323393?s=128&d=identicon&r=PG", "display_name": "mivk", "link": "https://stackoverflow.com/users/111036/mivk"}, "edited": false, "score": 0, "creation_date": 1576417414, "post_id": 47489808, "comment_id": 104885597, "body": "I don&#39;t have High Sierra around for testing, but I would guess it&#39;s because you used the old 87a format. You could check with ImageMagick, which &quot;<i>produce a GIF 89a image format file, unless the user specifically asks for the older &quot;GIF87:&quot; output format.</i>&quot; ( quoted from <a href=\"http://www.imagemagick.org/Usage/formats/#gif87\" rel=\"nofollow noreferrer\">IM site</a> )"}], "owner": {"reputation": 94161, "user_id": 594235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eef15424cd8fedae90eb33394b99cef1?s=128&d=identicon&r=PG", "display_name": "Sparky", "link": "https://stackoverflow.com/users/594235/sparky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1556900207, "creation_date": 1511638566, "last_edit_date": 1556900207, "question_id": 47489808, "link": "https://stackoverflow.com/questions/47489808/dynamically-generated-gif-is-a-broken-image-in-osx-high-sierra-and-safari", "title": "Dynamically generated GIF is a broken image in OSX High Sierra and Safari", "body": "<p>I have a Perl function that dynamically generates a captcha as a GIF image.  This is an actual GIF file generated by this function...</p>\n\n<p><a href=\"https://i.stack.imgur.com/pZgWz.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pZgWz.gif\" alt=\"GIF file\"></a></p>\n\n<p>In the latest Safari (and Safari Technology Preview) v12 in High Sierra (Mac OS X version 10.13.x), this same GIF appears as a broken image icon:  </p>\n\n<p><a href=\"https://i.stack.imgur.com/r42wG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r42wG.png\" alt=\"enter image description here\"></a></p>\n\n<p>It also will not display in High Sierra's version of the Preview application or within the \"preview\" pane of the \"Get Info\" window.</p>\n\n<p>This Perl has been in place for many years and, until now, working on all browsers.  Firefox and Chrome in High Sierra have no problem properly displaying this GIF.  </p>\n\n<p>Perl:</p>\n\n<pre><code>sub image {\n  my ($key) = @_;\n  $key =~ s/\\D//g;\n  my $buff;\n  my $bpx = 7;\n  my $pal = \"\\x33\\x33\\x33\" .\n            \"\\xff\\xff\\xff\" .\n            \"\\x66\\x66\\x66\" .\n            \"\\x00\\x00\\x00\";\n\n  initcmx();\n\n  my $dh = int(length($dot) / $dw);\n  my $ch = int(length($cmx{0}) / $cw);\n  my $len = length($key);\n  my $w = $len * $cw * $dw;\n  my $h = $ch * $dh;\n  my $blmt = 2**$bpx - 3;\n\n# GIF header\n  $buff .= 'GIF87a';\n  $buff .= pack 'v2', $w, $h;\n  $buff .= pack 'C', 0xF0 + $bpx - 1;\n  $buff .= \"\\0\";\n  $buff .= \"\\0\";\n  $buff .= $pal;\n  $buff .= \"\\0\" x ((2**$bpx * 3) - length $pal);\n  $buff .= ',';\n  $buff .= \"\\0\\0\\0\\0\";\n  $buff .= pack 'v2', $w, $h;\n  $buff .= \"\\0\";\n  $buff .= pack 'C', $bpx;\n#\n# Build image\n#\n  my $img;\n  for (my $y = 0; $y &lt; $h; $y++) {\n    my $cy = int($y / $dh) % $ch;\n    my $dy = $y % $dh;\n    for (my $x = 0; $x &lt; $w; $x += $dw) {\n      my $cx = int($x / $dw) % $cw;\n      my $i = int($x / $dw / $cw);\n      my $c = substr $key, $i, 1;\n      my $d = substr $cmx{$c}, $cy * $cw + $cx, 1;\n      my $di = ($d eq 'X') ? $dot : $nodot;\n      $di = substr $di, $dy * $dw, $dw;\n      for ($i = 0; $i &lt; length $di; $i++) {\n        $c = ord substr $di, $i, 1;\n        $c = chr $c;\n        $img .= $c;\n      }\n    }\n  }\n#\n# Pack image\n#\n  my $cnt;\n  for (my $i = 0; $i &lt; length $img; $i += $cnt) {\n    $cnt = (length $img) - $i;\n    if ($cnt &gt; $blmt) {\n      $cnt = $blmt;\n    }\n    $buff .= pack 'C', $cnt + 1;\n    $buff .= substr $img, $i, $cnt;\n    $buff .= pack 'C', 2**$bpx;\n  }\n  $buff .= pack 'C', 2**$bpx + 1;\n  $buff .= \"\\0\";\n  $buff .= ';';\n  return \"Content-type: image/gif\\nExpires: Wed, 05-Jan-2007 01:01:01 GMT\\n\\n\".$buff;\n}\n# ====================================================================== initcmx\n#\n# Quick and dirty solution. The matrix must be loadable\n#\n\nsub initcmx {\n\n  $cw = 6;\n\n$cmx{'0'} = qq~\n......\n.XXX..\nX...X.\nX...X.\nX...X.\nX...X.\nX...X.\n.XXX..\n......\n~;\n$cmx{'1'} = qq~\n..X...\n.XX...\n..X...\n..X...\n..X...\n..X...\n.XXX..\n......\n......\n~;\nif (rand() &lt; 0.5) {\n$cmx{'1'} = qq~\n......\n...X..\n..XX..\n...X..\n...X..\n...X..\n...X..\n...X..\n..XXX.\n~;\n}\n$cmx{'2'} = qq~\n......\n......\n.XXX..\nX...X.\n....X.\n..XX..\n.X....\nX.....\nXXXXX.\n~;\nif (rand() &lt; 0.3) {\n$cmx{'2'} = qq~\n.XXX..\nX...X.\n....X.\n..XX..\n.X....\nX.....\nXXXXX.\n......\n......\n~;\n}\nif (rand() &gt; 0.7) {\n$cmx{'2'} = qq~\n......\nXXXX..\n....X.\n....X.\n.XXX..\nX.....\nX.....\nXXXXX.\n......\n~;\n}\n$cmx{'3'} = qq~\nXXXXX.\n....X.\n...X..\n..XX..\n....X.\nX...X.\n.XXX..\n......\n......\n~;\n$cmx{'4'} = qq~\n......\n...X..\n..XX..\n.X.X..\nX..X..\nXXXXX.\n...X..\n...X..\n......\n~;\nif (rand() &lt; 0.5) {\n$cmx{'4'} = qq~\n....X.\n...XX.\n..X.X.\n.X..X.\nXXXXX.\n....X.\n....X.\n......\n......\n~;\n}\n$cmx{'5'} = qq~\n......\n......\nXXXXX.\nX.....\nXXXX..\n....X.\n....X.\nX...X.\n.XXX..\n~;\n$cmx{'6'} = qq~\n..XXX.\n.X....\nX.....\nXXXX..\nX...X.\nX...X.\n.XXX..\n......\n......\n~;\nif (rand() &lt; 0.5) {\n$cmx{'6'} = qq~\n......\n......\n..XXX.\n.X....\nX.....\nXXXX..\nX...X.\nX...X.\n.XXX..\n~;\n}\n$cmx{'7'} = qq~\n......\nXXXXX.\n....X.\n...X..\n..X...\n.X....\n.X....\n.X....\n......\n~;\nif (rand() &lt; 0.5) {\n$cmx{'7'} = qq~\n......\n......\nXXXXXX\n.....X\n....X.\n...X..\n..X...\n.X....\nX.....\n~;\n}\n$cmx{'8'} = qq~\n.XXX..\nX...X.\nX...X.\n.XXX..\nX...X.\nX...X.\n.XXX..\n......\n......\n~;\n$cmx{'9'} = qq~\n......\n......\n.XXX..\nX...X.\nX...X.\n.XXXX.\n....X.\n...X..\nXXX...\n~;\n  for (my $i = 0; $i &lt; 10; ++$i) {\n    $cmx{$i} =~ s/\\n//g;\n    $cmx{$i} =~ s/\\r//g;\n  }\n  $dot = qq~\n\\1\\2\\1\n\\2\\3\\2\n\\1\\2\\1\n~;\n  $nodot = qq~\n\\0\\0\\0\n\\0\\0\\0\n\\0\\0\\0\n~;\n $dot =~ s/\\n//g;\n $dot =~ s/\\r//g;\n $nodot =~ s/\\n//g;\n $nodot =~ s/\\r//g;\n $dw = 3;\n}\n</code></pre>\n\n<p>Does High Sierra have a problem with GIF87a in general or is there something wrong with the way this particular file is being generated?  Google searching has been fruitless as most people are only reporting various issues with animated GIFs.</p>\n\n<hr>\n\n<p><strong>EDIT</strong>:  I've since rewrote my Perl to create PNG instead of GIF files.  However, I'm leaving this question in place as I'm still curious about what causes this issue.</p>\n"}, {"tags": ["perl", "unit-testing", "testing", "test-more"], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 3, "last_activity_date": 1511627785, "creation_date": 1511627785, "answer_id": 47488249, "question_id": 47487839, "link": "https://stackoverflow.com/questions/47487839/report-only-failed-tests-in-testmore/47488249#47488249", "title": "Report only failed tests in Test::More", "body": "<p>You can use the <code>fail</code> routine. Make your checks outside of any Test::More code and use that result to decide if you output test messages.</p>\n\n<pre><code>foreach my $element ( @randomly_generated_data ) {\n    my $result = ...; # your checks here\n    next if $result;\n    fail( 'Some message' );\n    }\n</code></pre>\n"}], "owner": {"reputation": 485, "user_id": 4108542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Qflfs.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/4108542/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 47488249, "answer_count": 1, "score": 1, "last_activity_date": 1511627785, "creation_date": 1511625437, "question_id": 47487839, "link": "https://stackoverflow.com/questions/47487839/report-only-failed-tests-in-testmore", "title": "Report only failed tests in Test::More", "body": "<p>I have a lot of checks for random generated data. How can I get report message only for failed tests and show nothing if check is ok?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511655124, "post_id": 47486620, "comment_id": 81938793, "body": "Why do you have the sleep in there?"}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511900376, "post_id": 47486620, "comment_id": 82037491, "body": "@simbabque  - I should have taken it out. Sometimes I like watching the output print line by line. rather than having the whole thing print out one by one. This was one of those times."}], "answers": [{"comments": [{"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 0, "creation_date": 1511628386, "post_id": 47486742, "comment_id": 81931519, "body": "You might want to escape <code>&#47;</code> by preceding it with \\"}, {"owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "reply_to_user": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 2, "creation_date": 1511629652, "post_id": 47486742, "comment_id": 81931940, "body": "No, that&#39;s the beauty of using a different delimiter. In this case, you&#39;d have to escape !, but not /, and that makes it much more readable when you&#39;re dealing with path names, dates etc pp."}, {"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 1, "creation_date": 1511629707, "post_id": 47486742, "comment_id": 81931958, "body": "Ohh. Didn&#39;t know that. Thanks for clarifying"}], "tags": [], "owner": {"reputation": 2496, "user_id": 2469275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7EZh.png?s=128&g=1", "display_name": "janh", "link": "https://stackoverflow.com/users/2469275/janh"}, "is_accepted": false, "score": 3, "last_activity_date": 1511621741, "last_edit_date": 1511621741, "creation_date": 1511618040, "answer_id": 47486742, "question_id": 47486620, "link": "https://stackoverflow.com/questions/47486620/perl-parsing-online-bank-statement-wells-fargo/47486742#47486742", "title": "Perl parsing online bank statement wells fargo", "body": "<p>I'm a big fan of using <code>.*</code> in regexps as little as possible, because it makes it much easier to read and understand. Also, you can use other delimiters than <code>/</code>, which will allow you to use / in your regexp without escaping it.</p>\n\n<p>I'd suggest something like this:</p>\n\n<pre><code>if ($row =~ m!(\\d\\d/\\d\\d/\\d\\d) (PURCHASE) \\w+ ON \\d\\d/\\d\\d (.*) \\w+ CARD \\d+\\s+\\$(\\d+\\.\\d+)$!) {\n</code></pre>\n\n<p>I've also taken the liberty to change \\d{2} to \\d\\d - I find that much easier to read, because my brain doesn't have to go into \"hey, there has to be a certain number of \\d here, the { is important\" mode.</p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511621741, "creation_date": 1511617320, "question_id": 47486620, "link": "https://stackoverflow.com/questions/47486620/perl-parsing-online-bank-statement-wells-fargo", "title": "Perl parsing online bank statement wells fargo", "body": "<p>I am parsing out the Wells Fargo online banking statement. The card number is truncated and the number starting with a P or an S is a unique transaction identifier. I changed out the unique identifier and last four digits of card number. I consider myself safe from any privacy concerns. I parse, or filter each line through a long ugly regex - which I am not sure you are supposed to do. There might be a better way, I don't know.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n#my $filename = 'wellsfargo_balanceStatement.txt';\n#open(my $fh, '&lt;:encoding(UTF-8)', $filename)\n#  or die \"Could not open file '$filename' $!\";\n\n#while (my $row = &lt;$fh&gt;)  {\nwhile (my $line = &lt;DATA&gt;) {\n  chomp $row;\n  if ($row =~ /(\\d{2}\\/\\d{2}\\/\\d{2})\\s(PURCHASE).*\\d{2}\\/\\d{2}(.*)\\w\\d{10}\\d+.*\\$(\\d+\\.\\d+)/) {\n      my $date=$1;\n      my $purchs=$2;\n      my $pur_plce=$3;\n      my $pur_amt=$4;\n      print \"$date $purchs $pur_plce $pur_amt\\n\";\n      }\n  sleep .5 ;\n}\n\n\n\n__DATA__\n\n  09/18/17 PURCHASE AUTHORIZED ON 09/17 CVS/PHARM 06062--200 W Manhattan NY P00000000032583371 CARD 4184   $4.87\n  09/18/17 PURCHASE AUTHORIZED ON 09/16 JUBILEE MARKET NEW YORK NY S467259862756690 CARD 4184   $8.78\n  09/18/17 PURCHASE AUTHORIZED ON 09/16 LOWE'S #3292 NEW YORK NY P00307259724475616 CARD 6029   $23.39\n  09/18/17 PURCHASE AUTHORIZED ON 09/16 NYSC WEST END NEW YORK NY S587259513187673 CARD 4184   $39.00\n  09/18/17 PURCHASE AUTHORIZED ON 09/16 JUBILEE MARKET NEW YORK NY S587259468801533 CARD 4184   $21.73\n  09/18/17 PURCHASE AUTHORIZED ON 09/15 7-ELEVEN NEW YORK NY P00000000840668487 CARD 4184   $12.75\n  09/18/17 PURCHASE AUTHORIZED ON 09/15 DUNKIN #351200 NEW YORK NY S307258635156794 CARD 4184   $2.82\n  09/18/17 PURCHASE AUTHORIZED ON 09/15 DUNKIN #351200 NEW YORK NY S587258634843803 CARD 4184   $2.82\n</code></pre>\n\n<p>The transaction identifier beginning with the consonant S or P which is followed by an number anywhere from 10 to 17 digits. I thought I was pretty crafty with the regex  \\w\\d{10}\\d+ however when the first consonant of the unique identifier is a 'P' it prints out 5 characters, and when it is an 'S' it prints out 3. Frankly, I don't even want the unique identifier, and do not know how it is getting in there.</p>\n\n<pre><code>09/18/17 PURCHASE  CVS/PHARM 06062--200 W Manhattan NY P00000 4.87\n09/18/17 PURCHASE  JUBILEE MARKET NEW YORK NY S467 8.78\n09/18/17 PURCHASE  LOWE'S #3292 NEW YORK NY P00307 23.39\n09/18/17 PURCHASE  NYSC WEST END NEW YORK NY S587 39.00\n09/18/17 PURCHASE  JUBILEE MARKET NEW YORK NY S587 21.73\n09/18/17 PURCHASE  7-ELEVEN NEW YORK NY P00000 12.75\n09/18/17 PURCHASE  DUNKIN #351200 NEW YORK NY S307 2.82\n09/18/17 PURCHASE  DUNKIN #351200 NEW YORK NY S587 2.82\n</code></pre>\n\n<p>Eventually I am going to add comma delimit the file and enter it into excel.\nSo I can create bar graphs, circle charts and whatever. This is what I want</p>\n\n<pre><code>09/18/17 PURCHASE  CVS/PHARM 06062--200 W Manhattan NY 4.87\n09/18/17 PURCHASE  JUBILEE MARKET NEW YORK NY 8.78\n09/18/17 PURCHASE  LOWE'S #3292 NEW YORK NY 23.39\n09/18/17 PURCHASE  NYSC WEST END NEW YORK NY 39.00\n09/18/17 PURCHASE  JUBILEE MARKET NEW YORK NY 21.73\n09/18/17 PURCHASE  7-ELEVEN NEW YORK NY 12.75\n09/18/17 PURCHASE  DUNKIN #351200 NEW YORK NY 2.82\n09/18/17 PURCHASE  DUNKIN #351200 NEW YORK NY 2.82\n</code></pre>\n"}, {"tags": ["perl", "sorting", "ubuntu"], "comments": [{"owner": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1511559492, "post_id": 47480053, "comment_id": 81915386, "body": "Thank you for the quick response, let me try that out and I will update. Edit: Tried this, and it pushed the data into the array properly; however, I am still getting the same error."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1511559747, "post_id": 47480053, "comment_id": 81915474, "body": "Is your input a fixed file? I mean: it&#39;s presumably the output of some <code>df</code> command. There are ways (i.e. command line parameters to <code>df</code>) to format that output to make sorting easier. Is that possible in your case?"}, {"owner": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 0, "creation_date": 1511560632, "post_id": 47480053, "comment_id": 81915738, "body": "The columns are fixed, but the data could be different. Basically, this is one generated instance of the system, but the script should be able to sort any generated reports of similar format."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 0, "creation_date": 1511562049, "post_id": 47480578, "comment_id": 81916131, "body": "Thanks for the response. When you say there&#39;s only one line of text in @data, did you mean the $data[0] hold all the data? I used Dumper to extract all the information, and it seems like it is in different indexes."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 1, "creation_date": 1511562430, "post_id": 47480578, "comment_id": 81916223, "body": "@Andrew: I&#39;m sorry, I was wrong. Your program reads three lines into three scalar variables. Then <code>while ( &lt;$DATA&gt; )</code> reads a line and puts it into <code>$_</code> which you never use. If that line was <i>true</i> then <code>@data = (&lt;$DATA&gt;)</code> reads all of the rest of the file into <code>@data</code>. The next iteration of the <code>while</code> loop is at end of file so it exits and continues with your substitutions."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1511562470, "last_edit_date": 1511562470, "creation_date": 1511561357, "answer_id": 47480578, "question_id": 47480053, "link": "https://stackoverflow.com/questions/47480053/sorting-5th-column-in-descending-order-error-message/47480578#47480578", "title": "Sorting 5th column in descending order error message", "body": "<p>In addition to skipping the fourth line of the file, this line is wrong</p>\n\n<pre><code>my @sorted = sort { $b-&gt;[5] &lt;=&gt; $a-&gt;[5] } @data\n</code></pre>\n\n<p>But presumably you knew that as the error message says</p>\n\n<blockquote>\n  <p>at ./netapp.pl line 20</p>\n</blockquote>\n\n<p><code>$a</code> and <code>$b</code> are lines of text from the array <code>@data</code>, but you're treating them as array references. It looks like you need to extract the fifth \"field\" from both variables before you compare them, but no one can tell you how to do that</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 0, "creation_date": 1511563108, "post_id": 47480726, "comment_id": 81916409, "body": "Thank you very much! I will look over what you sent and study it to better understand PERL. EDIT: While the code provided did not sort, it is more than enough information for me to get this working. Marking as solved! Thanks again."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 1, "creation_date": 1511563336, "post_id": 47480726, "comment_id": 81916473, "body": "No problem. Also, check other people&#180;s comments. Some of them make a lot of sense. You probably need to review some kind of Perl introduction to understand all of this. Good luck!"}, {"owner": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 0, "creation_date": 1511563560, "post_id": 47480726, "comment_id": 81916536, "body": "Yeah, this was for a Linux class I&#39;m taking. Before Thanksgiving break, we only had one solid lecture session to prepare us for this assignment. I am studying on my own through guides, but was just stuck on that error."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 0, "creation_date": 1511563752, "post_id": 47480726, "comment_id": 81916600, "body": "If you don&#180;t have a book, you may want to start with this introduction, <a href=\"http://perldoc.perl.org/perlintro.html\" rel=\"nofollow noreferrer\">perlintro</a>."}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1511563482, "last_edit_date": 1511563482, "creation_date": 1511562489, "answer_id": 47480726, "question_id": 47480053, "link": "https://stackoverflow.com/questions/47480053/sorting-5th-column-in-descending-order-error-message/47480726#47480726", "title": "Sorting 5th column in descending order error message", "body": "<p>You code is quite far from what you want. Trying to change it as little as possible, this works:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen (my $fh, \"&lt;\", \"raw_info.txt\") or die \"$!\";\n\nmy $systemName = &lt;$fh&gt;;\nmy $systemSN = &lt;$fh&gt;;\nmy $header = &lt;$fh&gt;;\n\nmy @data;\nwhile( my $d = &lt;$fh&gt; ) {\n  chomp $d;\n  my @fields = split '\\s{2,}', $d;\n  if( scalar @fields &gt; 4 ) {\n    $fields[4] = $fields[4] =~ /(\\d+)/ ? $1 : 0;\n    push @data, [ @fields ];\n  }\n}\n\nforeach my $i ( @data ) {\n  print join(\"\\t\", @$i), \"\\n\";\n}\n\nmy @sorted = sort { $b-&gt;[4] &lt;=&gt; $a-&gt;[4] } @data;\n\nforeach my $i ( @sorted ) {\n  $i-&gt;[4] .= '%';\n  print join(\"\\t\", @$i), \"\\n\";\n}\n\nclose($fh);\n</code></pre>\n\n<p>Let\u00b4s make a few things clear:</p>\n\n<ol>\n<li>If using the <code>$</code> notation, it is customary to define file variables in lower case as <code>$fd</code>. It is also typical to name the <em>file descriptor</em> as \"fd\".</li>\n<li>You define but not use the first three variables. If you don\u00b4t apply <code>chomp</code> to them, the final CR will be added to them. I have not done it as they are not used.</li>\n<li>You are defining a list with a line in each element. But then you need a list ref inside to separate the fields.</li>\n<li>The separation is done using <code>split</code>.</li>\n<li>Empty lines are skipped by counting the number of fields.</li>\n<li>I use something more compact to get rid of the <code>%</code> and transform the <code>---</code> into a <code>0</code>.</li>\n<li>Lines are added to list <code>@data</code> using <code>push</code> and turning the list to add into a list ref with <code>[ @list ]</code>.</li>\n<li>A list of list refs needs two loops to get printed. One traverses the list (<code>foreach</code>), another (implicit in <code>join</code>) the columns.</li>\n<li>Now you can sort the list and print it out in the same way. By the way, Perl lists (or arrays) start at index 0, so the 5th column is 4.</li>\n</ol>\n\n<p>This is not the way I would have coded it, but I hope it is clear to you as it is close to your original code.</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 0, "creation_date": 1511642497, "post_id": 47490173, "comment_id": 81935899, "body": "Wow! I haven&#39;t gotten to tables yet on my tutorial, but will look into this. Thank you for your input! +1"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "edited": false, "score": 1, "creation_date": 1511718523, "post_id": 47490173, "comment_id": 81953544, "body": "@Andrew Nguyen I have added some explanation of how the code works. Hope it clears up some of the more difficult parts. Also provided a solution that doesn&#39;t use Text::Table."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 2, "last_activity_date": 1511718292, "last_edit_date": 1511718292, "creation_date": 1511641296, "answer_id": 47490173, "question_id": 47480053, "link": "https://stackoverflow.com/questions/47480053/sorting-5th-column-in-descending-order-error-message/47490173#47490173", "title": "Sorting 5th column in descending order error message", "body": "<p>Here is an approach using <a href=\"https://metacpan.org/pod/Text::Table\" rel=\"nofollow noreferrer\">Text::Table</a> which will nicely align your output into neat columns.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Text::Table;\n\nopen my $DATA, '&lt;', 'file1' or die $!;\n\n&lt;$DATA&gt; for 1 .. 2; # throw away first two lines\nchomp(my $hdr = &lt;$DATA&gt;); # header\n\nmy $tbl = Text::Table-&gt;new( split ' ', $hdr, 6 );\n\n$tbl-&gt;load( map [split /\\s{2,}/], sort by_percent &lt;$DATA&gt; );\nprint $tbl;\n\nsub by_percent {\n    my $keya = $a =~ /(\\d+)%/ ? $1 : '0';\n    my $keyb = $b =~ /(\\d+)%/ ? $1 : '0';\n    $keyb &lt;=&gt; $keya\n}\n</code></pre>\n\n<p>The output generated is:</p>\n\n<pre><code>Filesystem                              total  used   avail capacity Mounted on                             \n/vol/vfiler_PROD1_SF_isci_15K01/        2048GB 1653GB 394GB 81%      /vol/vfiler_PROD1_SF_isci_15K01/       \n/vol/vfiler_PROD1_SF_NFS15K01/          1638GB 735GB  903GB 45%      /vol/vfiler_PROD1_SF_NFS15K01/         \n/vol/vfiler_PROD1_SF_NFS15K01/.snapshot 409GB  105GB  303GB 26%      /vol/vfiler_PROD1_SF_NFS15K01/.snapshot\nsnap reserve                            0TB    0TB    0TB   ---%     /vol/vfiler_PROD1_SF_isci_15K01/..     \n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>To explain some of the <em>advanced</em> parts of the program.</p>\n\n<pre><code>my $tbl = Text::Table-&gt;new( split ' ', $hdr, 6 );\n</code></pre>\n\n<p>This creates the Text::Table object with the header split into 6 columns. Without the limit of 6 columns, it would have created 7 columns (because the last field, 'mounted on', also contains a space. It would have been incorrectly split into 2 columns for a total of 7).</p>\n\n<pre><code>$tbl-&gt;load( map [split /\\s{2,}/], sort by_percent &lt;$DATA&gt; );\n</code></pre>\n\n<p>The statement above 'loads' the data into the table. The <code>map</code> applies a transformation to each line from <code>&lt;$DATA&gt;</code>. Each line is split into an anonymous array, (created by <code>[....]</code>). The split is on 2 or more spaces, <code>\\s{2,}</code>. If that wasn't specified, then the data `snap reserve' with 1 space would have been incorrectly split.</p>\n\n<p>I hope this makes whats going on more clear.</p>\n\n<p>And a simpler example that doesn't align the columns like Text::Table, but leaves them in the form they originally were read might be:</p>\n\n<pre><code>open my $DATA, '&lt;', 'file1' or die $!;\n\n&lt;$DATA&gt; for 1 .. 2; # throw away first two lines\nmy $hdr = &lt;$DATA&gt;; # header\n\nprint $hdr;\nprint sort by_percent &lt;$DATA&gt;;\n\nsub by_percent {\n    my $keya = $a =~ /(\\d+)%/ ? $1 : '0';\n    my $keyb = $b =~ /(\\d+)%/ ? $1 : '0';\n    $keyb &lt;=&gt; $keya\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5518551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bd8c4fe528b5da5d18c8f4e3faef672?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/5518551/andrew-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 47490173, "answer_count": 3, "score": 0, "last_activity_date": 1511718292, "creation_date": 1511557819, "last_edit_date": 1511561057, "question_id": 47480053, "link": "https://stackoverflow.com/questions/47480053/sorting-5th-column-in-descending-order-error-message", "title": "Sorting 5th column in descending order error message", "body": "<p>The text file I am trying to sort:</p>\n\n<pre><code>MYNETAPP01-NY\n700000123456\nFilesystem               total       used      avail capacity  Mounted on\n/vol/vfiler_PROD1_SF_NFS15K01/     1638GB      735GB      903GB      45%  /vol/vfiler_PROD1_SF_NFS15K01/\n/vol/vfiler_PROD1_SF_NFS15K01/.snapshot      409GB      105GB      303GB      26%  /vol/vfiler_PROD1_SF_NFS15K01/.snapshot\n/vol/vfiler_PROD1_SF_isci_15K01/     2048GB     1653GB      394GB      81%  /vol/vfiler_PROD1_SF_isci_15K01/\nsnap reserve               0TB        0TB        0TB     ---%  /vol/vfiler_PROD1_SF_isci_15K01/..\n</code></pre>\n\n<p>I am trying to sort this text file by its 5th column (the <code>capacity</code> field) in descending order.</p>\n\n<p>When I first started this there was a percentage symbol mixed with the numbers. I solved this by substituting the the value like so: <code>s/%/ %/g for @data;</code>. This made it easier to sort the numbers alone. Afterwards I will change it back to the way it was with <code>s/ %/%/g</code>.</p>\n\n<p>After running the script, I received this error:</p>\n\n<blockquote>\n  <p>@ACI-CM-L-53:~$ ./netapp.pl<br>\n  Can't use string (\"/vol/vfiler_PROD1_SF_isci_15K01/\"...) as an ARRAY ref while \"strict refs\" in use at ./netapp.pl line 20,  line 24 (#1)  </p>\n</blockquote>\n\n\n\n<blockquote>\n<pre><code>   (F) You've told Perl to dereference a string, something which  \n   use strict blocks to prevent it happening accidentally.  See  \n   \"Symbolic references\" in perlref.  This can be triggered by an @ or $  \n   in a double-quoted string immediately before interpolating a variable,  \n   for example in \"user @$twitter_id\", which says to treat the contents  \n   of $twitter_id as an array reference; use a \\ to have a literal @  \n   symbol followed by the contents of $twitter_id: \"user \\@$twitter_id\".  \n</code></pre>\n</blockquote>\n\n<pre><code>Uncaught exception from user code:  \n        Can't use string (\"/vol/vfiler_PROD1_SF_isci_15K01/\"...) as an ARRAY ref while \"strict refs\" in use at ./netapp.pl line 20, &lt;$DATA&gt; line 24.\n</code></pre>\n\n\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse diagnostics;\n\nopen (my $DATA, \"&lt;raw_info.txt\") or die \"$!\";\n\nmy $systemName = &lt;$DATA&gt;;\nmy $systemSN   = &lt;$DATA&gt;;\nmy $header     = &lt;$DATA&gt;;\n\nmy @data;\nwhile ( &lt;$DATA&gt; ) {\n    @data = (&lt;$DATA&gt;);\n}\n\ns/%/ %/g   for @data;\ns/---/000/ for @data;\n\nprint @data;\n\nmy @sorted = sort { $b-&gt;[5] &lt;=&gt; $a-&gt;[5] } @data;\nprint @sorted;\n\nclose($DATA);\n</code></pre>\n"}, {"tags": ["regex", "perl", "sas"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1511535810, "post_id": 47475729, "comment_id": 81906199, "body": "Not really sure this is a <code>perl</code> question at all. I&#39;d suggest this isn&#39;t a job for a &#39;magic regex&#39; and rather you&#39;re looking at some equivalent of <code>split</code>."}, {"owner": {"reputation": 8926, "user_id": 5331061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g1Sv2.jpg?s=128&g=1", "display_name": "Gurmanjot Singh", "link": "https://stackoverflow.com/users/5331061/gurmanjot-singh"}, "edited": false, "score": 1, "creation_date": 1511535928, "post_id": 47475729, "comment_id": 81906256, "body": "<a href=\"https://regex101.com/r/Ts05tl/1\" rel=\"nofollow noreferrer\"><code>.+?(?=$|(?:\\d{2}\\&#47;){2}\\d{4}\\s*\\d{2}(?::\\d{2}){2})</code></a> ?"}, {"owner": {"reputation": 21, "user_id": 8746436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b04c3959eece702b5c6428da6210773?s=128&d=identicon&r=PG&f=1", "display_name": "TechGuy", "link": "https://stackoverflow.com/users/8746436/techguy"}, "edited": false, "score": 0, "creation_date": 1511536160, "post_id": 47475729, "comment_id": 81906403, "body": "It is a regex, basically I need a regex to identify the start/end of the string."}, {"owner": {"reputation": 35496, "user_id": 4965549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2fd3fbe1a522cea4792ee16c718872?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/4965549/tom"}, "edited": false, "score": 0, "creation_date": 1511538322, "post_id": 47475729, "comment_id": 81907613, "body": "What do you want to do if the comment itself contains a date time string in the same format?"}, {"owner": {"reputation": 366, "user_id": 8628395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230e9b6bb0fb8f698f46380c13063f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Petr", "link": "https://stackoverflow.com/users/8628395/petr"}, "edited": false, "score": 0, "creation_date": 1511538415, "post_id": 47475729, "comment_id": 81907671, "body": "Lazy repetition factor &amp; positive lookahead that Gurman suggests is the best solution IMO. His assumption of <code>text</code> starting with a datetime is easy to check if needed."}], "answers": [{"tags": [], "owner": {"reputation": 21516, "user_id": 1249962, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/rHCpd.gif?s=128&g=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/1249962/richard"}, "is_accepted": false, "score": 2, "last_activity_date": 1511572777, "creation_date": 1511572777, "answer_id": 47481816, "question_id": 47475729, "link": "https://stackoverflow.com/questions/47475729/perl-reg-ex-expression-extract-patterns-and-text-after-them/47481816#47481816", "title": "Perl Reg Ex Expression - Extract patterns and text after them", "body": "<p>Here is a variation that focuses on the much simpler pattern that looks for only the 'landmark' <code>mm/dd/yyyy</code> within the text.  The prxnext loop tracks the prior landmark and extracts <code>found</code> based on that.  </p>\n\n<pre><code>data extracts(keep=line found);\n  if _n_ = 1 then do;\n    rxid = PRXPARSE('/\\d{2}\\/\\d{2}\\/\\d{4} /');  * nominally mm/dd/yyyy followed by at least one space;\n    retain rxid;\n  end;\n\n  line = _n_;\n\n  infile cards _infile_=text;\n  input;\n\n  start = 1;\n  stop = length(text);\n  position = 0;\n  length = 0;\n\n  /* Use PRXNEXT to find the first instance of the pattern, */\n  /* then use DO WHILE to find all further instances.       */\n  /* PRXNEXT changes the start parameter so that searching  */\n  /* begins again after the last match.                     */\n\n  call prxnext(rxid, start, stop, text, position, length);\n\n  lastpos = 0;\n  do while (position &gt; 0);\n    if lastpos then do; \n      length found $200;\n      found = substr(text,lastpos,position-lastpos);\n      put found=;\n      output;\n    end;\n    lastpos = position;\n\n    call prxnext(rxid, start, stop, text, position, length);\n  end;\n\n  if lastpos then do;\n    found = substr(text,lastpos);\n    put found=;\n    output;\n  end;\n\ndatalines4;\n01/04/2017 03:45:32 Some Comment - abc 05/04/2017 16:32:41 Some other Comment 06/07 at something\nSome fakery 01/04 /2017 03:45:32 /11/11/1967. yo 01/02/1102 Some Comment - abc 05/04/2017 16:32:41 Some other Comment 06/07 at something\n\naabbccdd\n01/02/1903 abc def\n01/02/1903 abc def sas does have trouble matching a patterns having a trailing space 02/03/1904\n;;;;\nrun;\n</code></pre>\n\n<p>A simpler pattern is sensible when dealing with SAS code that will be around a long time.</p>\n"}], "owner": {"reputation": 21, "user_id": 8746436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b04c3959eece702b5c6428da6210773?s=128&d=identicon&r=PG&f=1", "display_name": "TechGuy", "link": "https://stackoverflow.com/users/8746436/techguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512806595, "creation_date": 1511535337, "last_edit_date": 1511594930, "question_id": 47475729, "link": "https://stackoverflow.com/questions/47475729/perl-reg-ex-expression-extract-patterns-and-text-after-them", "title": "Perl Reg Ex Expression - Extract patterns and text after them", "body": "<p>I am working in SAS and have been trying to figure out a perl reg ex that will correctly work with this string\n(where src is the string and txt is the lines I would like...and there may be any number of output lines)</p>\n\n<pre><code>src='01/04/2017 03:45:32 Some Comment - abc 05/04/2017 16:32:41 Some other Comment 06/07 at something'\ntxt='01/04/2017 03:45:32 Some Comment - abc'\ntxt='05/04/2017 16:32:41 Some other Comment 06/07 at something'\n</code></pre>\n\n<p>Below is the SAS code I was using to try and attempt this...</p>\n\n<pre><code>data _null_;\n  ExpressionID = PRXPARSE('/(\\d{2}\\/\\d{2}\\/\\d{4}) (\\s) (\\d{2}\\:\\d{2}\\:\\d{2}) /xio');\n  text = '01/04/2017 03:45:32 Some Comment - abc 05/04/2017 16:32:41 Some other Comment 06/07 at something';\n\n  start = 1;\n  stop = length(text);\n\n  /* Use PRXNEXT to find the first instance of the pattern, */\n  /* then use DO WHILE to find all further instances.       */\n  /* PRXNEXT changes the start parameter so that searching  */\n  /* begins again after the last match.                     */\n\n  call prxnext(ExpressionID, start, stop, text, position, length);      \n     do while (position &gt; 0);\n        found = substr(text, position, length);\n        put found= position= length=;\n        call prxnext(ExpressionID, start, stop, text, position, length);\n     end;\nrun;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1511521411, "post_id": 47471848, "comment_id": 81898125, "body": "What does <code>&#47;n</code> mean?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1511521567, "post_id": 47471848, "comment_id": 81898210, "body": "It seems it&#39;s a new thing in 5.22, that prevents  groups from capturing. But given the OP has no groups, I&#39;d assume it&#39;s a typo."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1511522071, "post_id": 47471848, "comment_id": 81898483, "body": "Could you please <a href=\"https://stackoverflow.com/posts/47471848/edit\">edit</a> the question to show some examples of lines that should and shouldn&#39;t be matched?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511522664, "post_id": 47471848, "comment_id": 81898820, "body": "I have edited your code to add indentation. You&#39;re welcome, but please do it yourself in the future. Sensible indentation is an important tool to help people to understand your code, and it you are asking a large group of strangers to read and understand your code, it is surely only polite to make it as easy as possible for them."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1511522797, "post_id": 47471848, "comment_id": 81898892, "body": "By far the easiest way to format code is using <code>perltidy -pbp</code>. This is a tool worth using anyway, but doubly so if you want to post code somewhere :)"}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 0, "creation_date": 1511522817, "post_id": 47471848, "comment_id": 81898908, "body": "In regex: <code>&#47;^123$&#47;</code> but <code>eq</code> as in the answer seems more appropriate."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1511526066, "post_id": 47471848, "comment_id": 81900853, "body": "Only if it&#39;s &#39;exact match on the whole line&#39; rather than &#39;match numbers on the line&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1511522566, "post_id": 47471941, "comment_id": 81898770, "body": "<code>\\b</code> matches a word boundary; the regex <code>&#47;\\b123\\b&#47;</code> matches the line &quot;123 is the new 456&quot;."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1511538425, "post_id": 47471941, "comment_id": 81907681, "body": "@tripleee: And, looking at the (now added) sample input, that&#39;s the behaviour the OP is looking for."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1511540388, "last_edit_date": 1511540388, "creation_date": 1511521508, "answer_id": 47471941, "question_id": 47471848, "link": "https://stackoverflow.com/questions/47471848/check-whether-a-field-from-a-line-of-text-line-matches-a-value/47471941#47471941", "title": "Check whether a field from a line of text line matches a value", "body": "<p>I suggest that you take a look at <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\"><code>perldoc perlre</code></a>. </p>\n\n<p>You need to anchor your regex pattern. The easiest way is probably using <code>\\b</code> which is a zero-width boundary between alphanumerics and non-alphanumerics.</p>\n\n<pre><code>#!/perl/bin/perl\nuse warnings;\nuse strict;\n\nforeach my $file ( glob \"c:/perl64/files/*\" ) {\n   open( my $input, '&lt;', $file ) or die $!;\n   while (&lt;$input&gt;) {\n      print \"$file $_\" if m/\\b123\\b/;\n   }\n   close $input;\n}\n</code></pre>\n\n<p>Note - you should use three-argument <code>open</code> with lexical file handles as above, because it is better practice. </p>\n\n<p>I've also removed the <code>n</code> pattern modifier, as it appears redundant. </p>\n\n<p>Following your edit though, to give us some source data. I'd suggest the solution is <em>not</em> to use a regex - your source data looks space delimited. (Maybe those are tabs?).</p>\n\n<p>So I'd suggest you're better off using <code>split</code> and selecting the field you want, and testing it numerically, because you mention matching ranges. This is not a good fit for regexes because they don't understand the numeric content.</p>\n\n<p>Instead:</p>\n\n<pre><code>while ( &lt;$input&gt; ) {\n   print if (split)[-4] == 129;\n}\n</code></pre>\n\n<p>Note - I use <code>-4</code> in the <code>split</code>, which indexes from the <em>end</em> of the list.\nThis is because column 3 contains spaces, so splitting on whitespace is going to produce the wrong result unless we count down from the end of the array. Using a negative index we get the right field each time. </p>\n\n<p>If your data is tab separated then you could use <code>chomp</code> and <code>split /\\t/</code>. Or potentially split on <code>/\\s{2,}/</code> to split on 2-or-more spaces  </p>\n\n<p>But by selecting the field, you can do numeric tests on it, like</p>\n\n<pre><code>if $fields[-4] &gt; 100 and $fields[-4] &lt; 200\n</code></pre>\n\n<p>etc.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 0, "creation_date": 1512057615, "post_id": 47472519, "comment_id": 82112137, "body": "Hello Dave,  many thanks for the reply your are correct that I need to match the string within a row / line but print the whole line..   I have tried this code and it works very well.  it does however add what appears to be an additional line between the print output."}, {"owner": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 0, "creation_date": 1512057904, "post_id": 47472519, "comment_id": 82112357, "body": "I want to ask an additional question related to this, but not sure whether or not to ask a new question as I appear to be in trouble on this site.  I need to also start matching more than 1 value on each row:  i.e. search and match value 1 &amp; 2 before printing the line."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 0, "creation_date": 1512057985, "post_id": 47472519, "comment_id": 82112409, "body": "@normbeef: Yes, there&#39;s no need to explicitly print a newline as the <code>$_</code> will already have a newline in it. Sorry about that, but it&#39;s a simple enough fix."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 0, "creation_date": 1512058298, "post_id": 47472519, "comment_id": 82112586, "body": "@normbeef: If you have a new question to ask, then post a new question. But try to solve the problem yourself first."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1511523468, "creation_date": 1511523468, "answer_id": 47472519, "question_id": 47471848, "link": "https://stackoverflow.com/questions/47471848/check-whether-a-field-from-a-line-of-text-line-matches-a-value/47472519#47472519", "title": "Check whether a field from a line of text line matches a value", "body": "<p>Your question is unclear. When you say:</p>\n\n<blockquote>\n  <p>What I need is to match numbers in the on each line exactly</p>\n</blockquote>\n\n<p>That could mean a couple of things. It could mean that each line contains nothing but a single number which you want to match. In that case, using <code>==</code> is probably better than using a regular expression. Or it could mean that you have lots of text on a line and you only want to match complete numbers. In that case you should use <code>\\b</code> (the \"word boundary\" anchor) - <code>/\\b123\\b/</code>.</p>\n\n<p>If you're clearer in your questions (perhaps by giving us sample input) then people won't have to guess at your meaning.</p>\n\n<p>A few more points on your code:</p>\n\n<ul>\n<li>Always include both <code>use strict</code> and <code>use warnings</code>.</li>\n<li>Always check the return value from <code>open()</code> and take appropriate action on failure.</li>\n<li>Use lexical filehandles and 3-arg version of <code>open()</code>.</li>\n<li>No need to quote <code>$file</code> in your <code>open()</code> call.</li>\n<li>Using <code>$_</code> can simplify your code.</li>\n<li><code>/n</code> on the match operator has no effect unless your regex contains parentheses.</li>\n</ul>\n\n<p>Putting that all together (and assuming my second interpretation of your question is correct), your code could look like this:</p>\n\n<pre><code>#!/perl/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @files = &lt;c:/perl64/files/*&gt;;\n\nforeach my $file (@files) {\n  open my $file_h, '&lt;', $file\n    or die \"Can't open $file: $!\";\n\n  while (&lt;$file_h&gt;) {\n    print \"$file $_\\n\" if /\\b123\\b/;\n  }\n\n  # No need to close $file_h as it is closed\n  # automatically when the variable goes out\n  # of scope.\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 0, "creation_date": 1511540992, "post_id": 47476790, "comment_id": 81908860, "body": "tried your code.. didn&#39;t work...  thanks for the telling off by the way really helpful on   a free web site...       &quot;if you don&#39;t know how to do a job then you should hire someone who does know and pay them for the work&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 3, "creation_date": 1511547326, "post_id": 47476790, "comment_id": 81911371, "body": "@normbeef: Then your description of the problem is lacking. I demonstrated that my code works with the <i>two lines</i> of data that you provide, and it&#39;s clearly impossible to do better unless you&#39;re more forthcoming. <i>&quot;Didn&#39;t work&quot;</i> is completely useless for diagnostic purposes, but I am not surprised: as I said, it is very unclear how your data is delimited, and I wrote was something that worked for your erroneous example."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 1, "creation_date": 1511547403, "post_id": 47476790, "comment_id": 81911404, "body": "@normbeef:  It&#39;s far from obvious why you quoted my <i>&quot;if you don&#39;t know how to do a job then you should hire someone who does know and pay them for the work&quot;</i>. Do you disagree with me? What do you do when you can&#39;t fix your car, or your house is falling down? Do you think a software engineering task is worthless?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 0, "creation_date": 1511547918, "post_id": 47476790, "comment_id": 81911594, "body": "@normbeef: The error can only be in the format of the data. If you want to pursue this then you can copy and paste some <i>real</i> data onto something like <a href=\"https://pastebin.com\" rel=\"nofollow noreferrer\">pastebin.com</a> and share the link here, but showing lines of characters that look something like what you really have is useless. It&#39;s my guess that the fields are tab-separated, but there are no tabs in the data that you have posted. There&#39;s also a possibility that the records have fixed-width fields, in which case <code>unpack</code> is the tool of choice. Getting arrogant and self-important about being criticised won&#39;t fix things."}, {"owner": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 0, "creation_date": 1511775062, "post_id": 47476790, "comment_id": 81970918, "body": "Please lets get this straight.. I certainly do not think software engineering is not important or worthless, but this website is an open forum, it is far from that I promise you. I cannot understand the depth of the answers that might seem second nature to you, I have cobbled this together (as you can see) and I am aware that I need to explain the job better. my script is poor but its all I have that works for me.  I was really hoping to just get away it, as this project doesn&#39;t really require 1000% accuracy, its more of a management report.  I will try to go back over it and clarify again."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "edited": false, "score": 0, "creation_date": 1511775547, "post_id": 47476790, "comment_id": 81971238, "body": "@normbeef: Stack Overflow is <i>not</i> a forum. Its primary function is as a repository of solutions to software engineering problems, and it is best to think of writing a question as being equivalent to creating a Wikipedia page, which I think you would take much more care over. I realise that you are here just to get a solution to your own problem, but the rest of the world sees it very differently. It is inappropriate to ask us to regurgitate the appropriate part of the language documentation for you, and to request low-quality answers within your own custom parameters."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1511540680, "last_edit_date": 1511540680, "creation_date": 1511539659, "answer_id": 47476790, "question_id": 47471848, "link": "https://stackoverflow.com/questions/47471848/check-whether-a-field-from-a-line-of-text-line-matches-a-value/47476790#47476790", "title": "Check whether a field from a line of text line matches a value", "body": "\n\n<p>I hope you don't get the answers you're asking for, which discard best practice because of your unfamiliarity with Perl. It is inappropriate to ask how to write an ugly solution because <em>proper Perl</em> is beyond your reach</p>\n\n<p>As has been said repeatedly on this site, if you don't know how to do a job then you should hire someone who does know and pay them for their work. No other profession that I know has the expectation of getting quality work done for free</p>\n\n<p>Here's a few notes on your code. Wherever you have learned your techniques, you have been looking at a very outdated resource</p>\n\n<ul>\n<li><p>Do you <em>really</em> have a root directory <code>perl</code>, so that your compiler is <code>/perl/bin/perl</code>? That's very unusual, and there is no need to use a <em>shebang</em> line in Windows</p></li>\n<li><p>You <em>must always</em> add <code>use strict</code> and <code>use warnings 'all'</code> at the top of <em>every</em> Perl program you write, and declare all of your variables using <code>my</code> as close as possible to their first point of use. For some reason you do this with <code>@files</code> but not with <code>$file</code></p></li>\n<li><p>It is better to replace <code>&lt;c:/perl64/files/*&gt;</code> with <code>glob 'C:/perl64/files/*'</code>. Otherwise the code is less clear because Perl overloads the <code>&lt;&gt;</code> operator</p></li>\n<li><p>Don't put variable names inside double quotes. It is unnecessary at best, and may cause bugs. So <code>\"$file\"</code> should be <code>$file</code></p></li>\n<li><p>Always use the three-parameter version of <code>open</code>, so that the second parameter is the open mode</p></li>\n<li><p>Don't use global file handles. And <em>always</em> test whether the file has been opened correctly, dying with a message including <code>$!</code>\u2014the <em>reason</em> for the failure\u2014if the <code>open</code> fails</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>open( FILE, \"$file\" )\n</code></pre>\n\n<p>should be something like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!}\n</code></pre></li>\n<li><p>Don't rely on regex patterns for everything. In this case it looks like <code>split</code> would be a better option, or perhaps <code>unpack</code> if your records have fixed-width fields. In my solution below I have used <code>split</code> on \"more than one space\", but if your real data is different from what you have shown (tab-delimited?) then this is not going to work</p>\n\n<p>Note that <code>Fa0/129</code> will also be matched by your current approach</p></li>\n</ul>\n\n<p>This Perl program filters your data, printing lines where the fourth field <code>$lines[3]</code> (delineated by more than one whitespace character) is numerically equal to <code>129</code></p>\n\n<p>The output shown is produced when the input is the single file <code>splitn.txt</code>, containing the data shown in your question</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nfor my $file ( glob 'C:/perl64/files/*' ) {\n\n    open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n\n    while ( my $line = &lt;$fh&gt; ) {\n        chomp;\n        my @fields = split /\\s\\s+/, $line;\n        print \"$file $line\" if $fields[3] == 129;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>splitn.txt Fa0/19    CUTExyz     notconnect   129         half    100 10/100BaseTX\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 8477211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e9d6da56a9fba1d331a7cdbb1834f?s=128&d=identicon&r=PG&f=1", "display_name": "normbeef", "link": "https://stackoverflow.com/users/8477211/normbeef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1511540762, "creation_date": 1511521246, "last_edit_date": 1511540762, "question_id": 47471848, "link": "https://stackoverflow.com/questions/47471848/check-whether-a-field-from-a-line-of-text-line-matches-a-value", "title": "Check whether a field from a line of text line matches a value", "body": "<p></p>\n\n<p>I have been using the following Perl code to extract text from multiple text files. It works fine. </p>\n\n<p>Example of a couple of lines in one of the input files:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Fa0/19    CUTExyz     notconnect   129         half    100 10/100BaseTX\nFa0/22    xyz MLS     notconnect   1293        half     10 10/100BaseTX\n</code></pre>\n\n<p>What I need is to match the numbers in each line exactly (i.e. <code>129</code> is not matched by <code>1293</code>) and print the corresponding lines. </p>\n\n<p>It would also be nice to match a range of numbers leaving specific numbers out i.e.  match 2 through 10 but not 11 the 12 through 20</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/perl/bin/perl\n\nuse warnings;\n\nmy @files = &lt;c:/perl64/files/*&gt;;\n\nforeach $file ( @files ) {\n\n    open( FILE, \"$file\" );\n\n    while ( $line = &lt;FILE&gt; ) {\n        print \"$file $line\" if $line =~ /123/n;\n    }\n\n    close FILE;\n}\n</code></pre>\n\n<p>Thank you for the suggestions, but can it can be done using the code structure above?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1, "user_id": 8626056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/853ce6c985852409defe1dc88a964542?s=128&d=identicon&r=PG&f=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/8626056/rama"}, "edited": false, "score": 0, "creation_date": 1511515905, "post_id": 47469973, "comment_id": 81894755, "body": "here is my manifestfile.xml file &#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;manifest xmlns:android=&quot;<a href=\"http://schemas.android.com/apk/res/android\" rel=\"nofollow noreferrer\">schemas.android.com/apk/res/android</a>&quot;     package=&quot;com.dev.mobile&quot;     android:versionCode=&quot;75&quot;     android:versionName=&quot;1.0.1.68&quot;&gt;      &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;     &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;&#39;"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1511518211, "post_id": 47469973, "comment_id": 81896198, "body": "Please do not ad code to the comments, it is unreadable. I edited the question accordingly."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511520067, "post_id": 47469973, "comment_id": 81897352, "body": "What have you tried? What problems are you having? Please show us your code. If you don&#39;t have any code, then Stack Overflow probably isn&#39;t the best place for your question."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1511521075, "post_id": 47471548, "comment_id": 81897946, "body": "Please don&#39;t recommend parsing XML with regular expressions. It works in this case, but it&#39;s a terrible habit to ger into."}, {"owner": {"reputation": 432, "user_id": 5168007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bdecacf38aba3f18a066bf056dc871?s=128&d=identicon&r=PG&f=1", "display_name": "asatsi", "link": "https://stackoverflow.com/users/5168007/asatsi"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511522106, "post_id": 47471548, "comment_id": 81898504, "body": "I agree you are right about it. But using extra XML module wasn&#39;t deemed necessary for this simple case IMHO.  @DaveCross you are right about it. Will edit it accordingly. Thanks."}], "tags": [], "owner": {"reputation": 432, "user_id": 5168007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27bdecacf38aba3f18a066bf056dc871?s=128&d=identicon&r=PG&f=1", "display_name": "asatsi", "link": "https://stackoverflow.com/users/5168007/asatsi"}, "is_accepted": false, "score": 0, "last_activity_date": 1511522167, "last_edit_date": 1511522167, "creation_date": 1511520226, "answer_id": 47471548, "question_id": 47469973, "link": "https://stackoverflow.com/questions/47469973/how-do-we-retrieve-the-android-versionname-value-from-manifest-file-using-perl-s/47471548#47471548", "title": "how do we retrieve the android versionName value from manifest file using perl script", "body": "<p>Looking at your use case the below code should work:</p>\n\n<pre><code>#!/usr/bin/perl -w \nopen FP, \"manifest.xml\"; \n$version=\"\"; \nwhile (&lt;FP&gt;) \n{ \n    if (( /android:versionName/) &amp;&amp; ( /versionName=(.*)\\&gt;/ )) \n    { \n        $version=$1; \n        last; \n    } \n} \nprint $version;    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1511523025, "creation_date": 1511523025, "answer_id": 47472398, "question_id": 47469973, "link": "https://stackoverflow.com/questions/47469973/how-do-we-retrieve-the-android-versionname-value-from-manifest-file-using-perl-s/47472398#47472398", "title": "how do we retrieve the android versionName value from manifest file using perl script", "body": "<p>I'd suggest for XML, the answer is almost always 'use a parser'. </p>\n\n<p><code>XML::Twig</code> is quite lightweight and simple. (<code>XML::LibXML</code> is more fully featured, and is a good alternative). </p>\n\n<p>And to do your thing:</p>\n\n<pre><code>#!/perl/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::Twig;\n\nmy $xml = XML::Twig -&gt; parsefile ( 'manifestfile.xml');\nprint $xml -&gt; root -&gt; att('android:versionName'),\"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8626056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/853ce6c985852409defe1dc88a964542?s=128&d=identicon&r=PG&f=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/8626056/rama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511523025, "creation_date": 1511515243, "last_edit_date": 1511518187, "question_id": 47469973, "link": "https://stackoverflow.com/questions/47469973/how-do-we-retrieve-the-android-versionname-value-from-manifest-file-using-perl-s", "title": "how do we retrieve the android versionName value from manifest file using perl script", "body": "<p>I am trying to get the android:versionName from manifest.xml file and set the value as environment variable using Perl script . as i am new to Perl can anyone help on this. \nHere is the my manifest file.</p>\n\n<p>I want to get android:versionName value and set the same value as environment variable using perl script. can you please anyone help on this.</p>\n\n<p><em><strong>manifestfile.xml</strong></em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"schemas.android.com/apk/res/android\"; package=\"com.dev.mobile\" android:versionCode=\"75\" android:versionName=\"1.0.1.68\"&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.RECORD_AUDIO\" /&gt;' \n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1511513773, "post_id": 47469527, "comment_id": 81893450, "body": "Did you read the error message? You seem to be missing a tool called <code>xcrun</code> that the build process needs."}, {"owner": {"reputation": 951, "user_id": 2375207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c7e47a1942f02ecd3c1a441d122f77c?s=128&d=identicon&r=PG", "display_name": "nicolallias", "link": "https://stackoverflow.com/users/2375207/nicolallias"}, "edited": false, "score": 0, "creation_date": 1511513800, "post_id": 47469527, "comment_id": 81893463, "body": "Have a look at this post: <a href=\"https://stackoverflow.com/a/32894314/2375207\">stackoverflow.com/a/32894314/2375207</a>"}, {"owner": {"reputation": 631, "user_id": 6252353, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-g5fley8sHyg/AAAAAAAAAAI/AAAAAAAAAeg/R_WrMAny8wg/photo.jpg?sz=128", "display_name": "Andre Carneiro", "link": "https://stackoverflow.com/users/6252353/andre-carneiro"}, "edited": false, "score": 0, "creation_date": 1511894918, "post_id": 47469527, "comment_id": 82034513, "body": "I hope you&#180;re trying to run this on Mac! If you are, just install xcode! Otherwise I guess you can&#180;t run this on Linux nor Windows until I know."}], "owner": {"reputation": 1, "user_id": 9002653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9b458b61116ac96d844b59d5175811?s=128&d=identicon&r=PG&f=1", "display_name": "Larisa", "link": "https://stackoverflow.com/users/9002653/larisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "closed_date": 1512754803, "answer_count": 0, "score": 0, "last_activity_date": 1511513876, "creation_date": 1511513516, "last_edit_date": 1511513876, "question_id": 47469527, "link": "https://stackoverflow.com/questions/47469527/installing-perl-modules-statisticsmulttest", "closed_reason": "Duplicate", "title": "installing Perl modules Statistics::Multtest", "body": "<p>I need to install:</p>\n\n<pre><code>cpan Statistics::Multtest\ncpan Text::NSP::Measures::2D::Fisher::twotailed\n</code></pre>\n\n<p>The response is the next:</p>\n\n<pre><code>Warning: Prerequisite 'List::Vectorize =&gt; 1.00' for 'JOKERGOO/Statistics-Multtest-0.14.tar.gz' failed when processing 'JOKERGOO/List-Vectorize-1.05.tar.gz' with 'make =&gt; NO'. Continuing, but chances to succeed are limited.\nxcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun\n  JOKERGOO/Statistics-Multtest-0.14.tar.gz\n  /usr/bin/make -- NOT OK\nRunning make test\n  Can't test without successful make\nRunning make install\n  Make had returned bad status, install seems impossible\n</code></pre>\n\n<p>Can you help me? I don not know what to do?</p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1511498608, "post_id": 47466430, "comment_id": 81887424, "body": "You never write your replacements to files, but just print to the console.  Need to write a new file (with changes) and then move it over the file which needs to be changed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511511457, "post_id": 47466430, "comment_id": 81892245, "body": "Don&#39;t need (and don&#39;t use) <code>+&lt;</code> mode; just <code>open my $fh, &#39;&lt;&#39;, $file ...</code> for reading."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511511528, "post_id": 47466430, "comment_id": 81892282, "body": "Can do <code>while (my $readline = &lt;$fh&gt;) { .. }</code> and <code>$readline</code> is assigned the line (what would&#39;ve been in <code>$_</code>) and exists (is seen) in the loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511511609, "post_id": 47466430, "comment_id": 81892323, "body": "Put <code>use feature &#39;say&#39;;</code> at the top and you can print as <code>say &quot;hi&quot;;</code> where newline gets appended. Then you can use <code>print</code> specifically when you don&#39;t want a newline, <code>say</code> otherwise."}], "answers": [{"tags": [], "owner": {"reputation": 2094, "user_id": 238047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef04756e5ea133ce029e8a375960cc9?s=128&d=identicon&r=PG", "display_name": "Hameed", "link": "https://stackoverflow.com/users/238047/hameed"}, "is_accepted": false, "score": 1, "last_activity_date": 1511559208, "last_edit_date": 1511559208, "creation_date": 1511502850, "answer_id": 47467115, "question_id": 47466430, "link": "https://stackoverflow.com/questions/47466430/how-to-change-the-contents-in-the-file-in-perl/47467115#47467115", "title": "how to change the contents in the file in perl?", "body": "<p>In your sub, when you are iterating the lines in your file, you should write it back to a file. The regex substitute doesn't automatically write it back to file.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie; # die if problem reading or writing a file\nuse File::Copy;\nmy $filename = 'compare.txt';\nopen(my $fh, '+&lt;', $filename) or die \"Could not open file '$filename' $!\";\n\n\n\nwhile(&lt;$fh&gt;){\n        my $readline= \"$_\";\n\n        print(\"\\n\");\n\n        my @arr=split(',',$readline);\n        print($arr[0].\"\\n\".$arr[1]);\n        replace($arr[0],$arr[1]);\n\n}\nclose $fh;\n\nsub replace\n{\n        my $search=shift(@_);\n        my $replace=shift(@_);\n\n        my $filename2 = 'replace.txt';\n        open(my $fh1, '+&lt;', $filename2) or die \"Could not open file '$filename' $!\";\n#open file to write to\n        open $newfile, '&gt;', 'replace_tmp.txt';\n        while(&lt;$fh1&gt;)\n        {\n                chomp;\n                my $readline2= \"$_\";\n                $readline2=~s/$search/$replace/g;\n                print( $newfile, $readline2);\n                print($newfile, \"\\n\");\n        }\n        close($fh1);\n        close($newfile);\n        move ('replaced.txt', 'replace.txt');\n}\n</code></pre>\n\n<p>This is simple way of doing it. You can use <a href=\"http://search.cpan.org/~toddr/Tie-File-1.00/lib/Tie/File.pm\" rel=\"nofollow noreferrer\">File::Tie</a> to write back to the same file and avoid renaming it, or refer to <a href=\"http://perldoc.perl.org/perlfaq5.html#How-do-I-change,-delete,-or-insert-a-line-in-a-file,-or-append-to-the-beginning-of-a-file?\" rel=\"nofollow noreferrer\">perldoc</a></p>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1511542316, "post_id": 47477143, "comment_id": 81909440, "body": "<i>Hey, how cool is this?</i> And it avoids the complete rewrite of the target file for every single replacement."}, {"owner": {"reputation": 2094, "user_id": 238047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef04756e5ea133ce029e8a375960cc9?s=128&d=identicon&r=PG", "display_name": "Hameed", "link": "https://stackoverflow.com/users/238047/hameed"}, "edited": false, "score": 0, "creation_date": 1511558970, "post_id": 47477143, "comment_id": 81915226, "body": "Awesome. +1 for succinctness"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 2, "last_activity_date": 1511541688, "last_edit_date": 1511541688, "creation_date": 1511541243, "answer_id": 47477143, "question_id": 47466430, "link": "https://stackoverflow.com/questions/47466430/how-to-change-the-contents-in-the-file-in-perl/47477143#47477143", "title": "how to change the contents in the file in perl?", "body": "<p>As a huge fan of the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> module, I would do the above as:</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Path::Tiny;\n\nmy %rep = map { split /,/ } path('compare.txt')-&gt;lines({chomp =&gt; 1});\npath(\"replace.txt\")-&gt;edit_lines( sub {\n    while(my($key,$val) = each(%rep)) {\n        s/$key/$val/g;\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511559208, "creation_date": 1511498156, "last_edit_date": 1511503089, "question_id": 47466430, "link": "https://stackoverflow.com/questions/47466430/how-to-change-the-contents-in-the-file-in-perl", "title": "how to change the contents in the file in perl?", "body": "<p>I am trying to open one file read oneline in it at a time then open the another file and try to search for some part of the line read from the first file in the second file and try to replace all instances with the other part of the line read from the first file.When i am executing it its getting executed and i am able to see the result on the console but the files are not getting modified. What could be the mistake. Can some one please suggest this.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie; # die if problem reading or writing a file\n\nmy $filename = 'compare.txt';\nopen(my $fh, '+&lt;', $filename) or die \"Could not open file '$filename' $!\";\n\n\n\nwhile(&lt;$fh&gt;){\n    my $readline= \"$_\";\n\n    print(\"\\n\");\n\n    my @arr=split(',',$readline);\n    print($arr[0].\"\\n\".$arr[1]);\n    replace($arr[0],$arr[1]);\n\n}\nclose $fh;\n\nsub replace\n{\n    my $search=shift(@_);\n    my $replace=shift(@_);\n\n    my $filename2 = 'replace.txt';\n    open(my $fh1, '+&lt;', $filename2) or die \"Could not open file '$filename' $!\";\n\n    while(&lt;$fh1&gt;)\n    {\n        my $readline2= \"$_\";\n        $readline2=~s/$search/$replace/g;\n        print($readline2);\n        print(\"\\n\");\n\n   }\n   close $fh1;\n\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "gnuplot", "sh"], "comments": [{"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1511491544, "post_id": 47465627, "comment_id": 81885996, "body": "Welcome to <a href=\"http://wiki.tcl.tk/1726\" rel=\"nofollow noreferrer\">quoting hell</a>. At a glance, it looks to me like you have an extra set of quotation marks around the variable. But you&#39;ve wrapped things up in so many layers of quoting that it&#39;s difficult to tell. I suggest trying a simpler string and then gently building up to this. It&#39;s very possible that it&#39;s a simple escaping typo."}], "answers": [{"comments": [{"owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 1, "creation_date": 1511536183, "post_id": 47465711, "comment_id": 81906423, "body": "Any idea why <code>system(&#39;bash&#39;, &#39;-c&#39;, $cmd)</code> works while <code>system(&#39;&#47;bin&#47;sh&#39;, &#39;-c&#39;, $cmd)</code> doesn&#39;t? I mean, both <code>bash -c</code> and <code>sh -c</code> read commands from the following command string operand."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 0, "creation_date": 1511539018, "post_id": 47465711, "comment_id": 81907974, "body": "As I already explained, it&#39;s because <code>$cmd</code> doesn&#39;t contain a valid <code>sh</code> command. <code>&lt;( ... )</code> is a <code>bash</code> feature."}, {"owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 0, "creation_date": 1511610741, "post_id": 47465711, "comment_id": 81926090, "body": "It seems to be working with single backslashes too: <code>my $cmd = q{gnuplot -p &lt;(echo -e &#39;plot &quot;-&quot;\\n1 1\\n2 3\\n3 1.7\\n4.5 5\\ne&#39;)};</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 0, "creation_date": 1511646181, "post_id": 47465711, "comment_id": 81936881, "body": "You can forgo escaping backslashes in single quotes when unambiguous. I don&#39;t."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1511539071, "last_edit_date": 1511539071, "creation_date": 1511492114, "answer_id": 47465711, "question_id": 47465627, "link": "https://stackoverflow.com/questions/47465627/how-to-call-a-gnuplot-one-liner-from-perl-using-system/47465711#47465711", "title": "How to call a gnuplot one-liner from Perl using system()?", "body": "<pre><code>system($shell_cmd)\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>system('/bin/sh', '-c', $shell_cmd)\n</code></pre>\n\n<p>But what you have there is not a valid <code>sh</code> command, but a <code>bash</code> command. That means you'll need to invoke <code>bash</code> instead.</p>\n\n<pre><code>my $cmd = q{gnuplot -p &lt;(echo -e 'plot \"-\"\\\\n1 1\\\\n2 3\\\\n3 1.7\\\\n4.5 5\\\\ne')};\nsystem('bash', '-c', $cmd)\n</code></pre>\n\n<p>It appears you could also use the following to avoid creating two shells:</p>\n\n<pre><code>my $program = &lt;&lt;'__EOS__';\nplot \"-\"\n1 1\n2 3\n3 1.7\n4.5 5\ne\n__EOS__\n\nopen(my $pipe, '|-', \"gnuplot\", \"-p\")\nprint($pipe $program);\nclose($pipe);\n</code></pre>\n"}], "owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 47465711, "answer_count": 1, "score": 2, "last_activity_date": 1511539071, "creation_date": 1511491160, "last_edit_date": 1511536243, "question_id": 47465627, "link": "https://stackoverflow.com/questions/47465627/how-to-call-a-gnuplot-one-liner-from-perl-using-system", "title": "How to call a gnuplot one-liner from Perl using system()?", "body": "<p>I would like a Perl script to display a simple gnuplot graph. I don't want to store any data in a file, I want to use a gnuplot one-liner such as:</p>\n\n<pre><code>gnuplot -p &lt;(echo -e 'plot \"-\"\\n1 1\\n2 3\\n3 1.7\\n4.5 5\\ne')\n</code></pre>\n\n<p>That displays the points (1, 1), (2, 3), (3, 1.7) and (4.5, 5).</p>\n\n<p>In a Perl script, I tried things like</p>\n\n<pre><code>$plotString  = \"\\\"&lt;(echo -e 'plot \\\\\\\"-\\\\\\\"\\\\n\";\n$plotString .= \"1 1\\\\n2 3\\\\n3 1.7\\\\n4.5 5\\\\ne')\\\"\";\nsystem('gnuplot -p ' . $plotString);\n</code></pre>\n\n<p>but I get the following error:</p>\n\n<pre><code>-e plot \"-\"\n^\n\"&lt;(echo -e 'plot \"-\"\\n1 1\\n2 3\\n3 1.7\\n4.5 5\\ne')\", line 1: invalid command\n</code></pre>\n\n<p>This error surprises me because the string passed to <code>system()</code>, as quoted in the error message, is apparently correct.</p>\n\n<p>Any idea how to modify <code>$plotString</code> so <code>system()</code> would correctly interpret the gnuplot command?</p>\n\n<p>Secondary question: how to draw the graph <code>with lines</code>? (I couldn't get the gnuplot one-liner to do it, even outside Perl.)</p>\n\n<p>Edit: My OS is Ubuntu 16.04.</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 2, "last_activity_date": 1511488629, "creation_date": 1511488629, "answer_id": 47465352, "question_id": 47465209, "link": "https://stackoverflow.com/questions/47465209/perl-printing-contents-of-two-separate-arrays-side-by-side/47465352#47465352", "title": "Perl Printing contents of two separate arrays side by side", "body": "<p>You could restructure your data, so that you can use Text::Table.\nIt also recognizes ANSI color escapes, for example</p>\n\n<p>But for this simple case this works fine. (depending on your data, don't forget to decode utf8 before calculating the string length)</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse List::Util qw / max /;\nmy @present = qw/ John Mary Jimmy Kumar Ling /;\nmy @absent = qw/ Joanne Charlotte Mei /;\nmy @columns = (\\@present, \\@absent);\nmy @headers = qw/ Present Absent /;\nmy @width;\n\nfor my $i (0 .. $#headers) {\n    unshift @{ $columns[ $i ] }, '=' x length $headers[ $i ];\n    unshift @{ $columns[ $i ] }, $headers[ $i ];\n    $width[ $i ] = max map { length } @{ $columns[ $i ] };\n}\n\nmy $rows = max map { $#$_ } @columns;\nfor my $i (0 .. $rows ) {\n    my $fmt = join '   ', map { '%-' . $width[ $_ ] . 's' } 0 .. $#headers;\n    my @col = map { $columns[ $_ ]-&gt;[ $i ] // '' } 0 ..$#headers;\n    printf \"$fmt\\n\", @col;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 8876275, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f28f67fb1073441d98d09480457dc87?s=128&d=identicon&r=PG&f=1", "display_name": "DSP", "link": "https://stackoverflow.com/users/8876275/dsp"}, "is_accepted": false, "score": 1, "last_activity_date": 1511507852, "creation_date": 1511507852, "answer_id": 47468142, "question_id": 47465209, "link": "https://stackoverflow.com/questions/47465209/perl-printing-contents-of-two-separate-arrays-side-by-side/47468142#47468142", "title": "Perl Printing contents of two separate arrays side by side", "body": "<p>THis code may help you:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse strict;\nuse warnings;\nmy $format = \"%-10s\\t%-10s\\n\";\nmy @present = (\"John\", \"Mary\", \"Jimmy\", \"Kumar\", \"Ling\");\nmy @absent = (\"Joanne\", \"Charlotte\", \"Mei\");\nmy $maxrows = $#present &gt; $#absent ?  $#present : $#absent; \nprintf($format,\"Present\",\"Absent\");\nprintf($format,\"=======\",\"======\");\nfor my $rownum ( 0..$maxrows ) { \n    printf ( $format, $present[$rownum] // '', $absent[$rownum] // '' );\n\n    }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Present     Absent    \n=======     ======    \nJohn        Joanne    \nMary        Charlotte \nJimmy       Mei       \nKumar                 \nLing      \n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 2538148, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/65f28a5fe96cca6e4afdc629db6e2ba5?s=128&d=identicon&r=PG", "display_name": "Jon J", "link": "https://stackoverflow.com/users/2538148/jon-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 47465352, "answer_count": 2, "score": 1, "last_activity_date": 1511511999, "creation_date": 1511487183, "question_id": 47465209, "link": "https://stackoverflow.com/questions/47465209/perl-printing-contents-of-two-separate-arrays-side-by-side", "title": "Perl Printing contents of two separate arrays side by side", "body": "<p>I am interested to print the content of two arrays side by side instead of one after the other.</p>\n\n<p>My arrays are:</p>\n\n<pre><code>my @present = (\"John\", \"Mary\", \"Jimmy\", \"Kumar\", \"Ling\");\nmy @absent = (\"Joanne\", \"Charlotte\", \"Mei\");\n</code></pre>\n\n<p>This is how the output should look like:</p>\n\n<pre><code>Present    Absent    \n=======    ======\nJohn       Joanne\nMary       Charlotte\nJimmy      Mei\nKumar\nLing\n</code></pre>\n\n<p>Looking at the examples using Text::Table seem to suggest that contents are printed row by row. Is there a way the contents are printed column by column? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 4, "creation_date": 1511471673, "post_id": 47463175, "comment_id": 81881399, "body": "Where/how are you running the script? It expects to be run in a terminal."}], "answers": [{"tags": [], "owner": {"reputation": 668, "user_id": 4322048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5pqyS.jpg?s=128&g=1", "display_name": "Sander W. van der Laan", "link": "https://stackoverflow.com/users/4322048/sander-w-van-der-laan"}, "is_accepted": false, "score": 0, "last_activity_date": 1512032455, "last_edit_date": 1592644375, "creation_date": 1512032455, "answer_id": 47569444, "question_id": 47463175, "link": "https://stackoverflow.com/questions/47463175/error-with-termreadkey/47569444#47569444", "title": "Error with Term::ReadKey", "body": "<p>Ah. So the question is sort of solved. It turns out the script in particular is expecting to be run in a terminal, which stays open. That is to say: it is not expecting to be run in a submission-system, which is what I was doing. In fact, I need to run it in a submission-system, because the computer cluster doesn't allow for big data to be run in a terminal, and because the data is just to big to keep waiting for the program to finish. Submitting it to a compute node with more power makes more sense.</p>\n<p>The developer of the script, <a href=\"http://www.well.ox.ac.uk/%7Ewrayner/tools/#Checking\" rel=\"nofollow noreferrer\">the HRC or 1000G Imputation preparation and checking tool</a>, has kindly provided a non-terminal-requiring script. He will put it online, and/or provide it via email.</p>\n<h1>solved</h1>\n"}], "owner": {"reputation": 668, "user_id": 4322048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5pqyS.jpg?s=128&g=1", "display_name": "Sander W. van der Laan", "link": "https://stackoverflow.com/users/4322048/sander-w-van-der-laan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 558, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512032528, "creation_date": 1511470739, "last_edit_date": 1512032528, "question_id": 47463175, "link": "https://stackoverflow.com/questions/47463175/error-with-termreadkey", "title": "Error with Term::ReadKey", "body": "<p>I\u2019m trying to run this script to check genotyped data for imputation with HRC or 1000G using an imputation server, it can be found <a href=\"http://www.well.ox.ac.uk/~wrayner/tools/#Checking\" rel=\"nofollow noreferrer\">here</a>. It is perl-based. It has these packages/libraries it is (trying) to load.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Basename;\nuse Getopt::Long;\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError);\nuse Term::ReadKey   qw/ GetTerminalSize /;\n</code></pre>\n\n<p>However, it throws an error <code>Unable to get Terminal Size. The TIOCGWINSZ ioctl didn't work. The COLUMNS and LINES environment variables didn't work. The resize program didn't work. at /usr/lib64/perl5/vendor_perl/Term/ReadKey.pm line 362.</code></p>\n\n<p>How do I solve this?</p>\n"}, {"tags": ["perl", "file", "operators"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1511469224, "post_id": 47462891, "comment_id": 81880620, "body": "Neither <code>-t</code> nor <code>-x</code> will help with what you&#39;re trying to do.  Is it possible to track the <code>ffmpeg</code> process? Presumably when that process exits the conversion is complete."}, {"owner": {"reputation": 43, "user_id": 5278779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5hLJa.jpg?s=128&g=1", "display_name": "Satch", "link": "https://stackoverflow.com/users/5278779/satch"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1511469678, "post_id": 47462891, "comment_id": 81880768, "body": "Unfortunately, I cannot install the <code>FFmpeg</code> perl module on this server... So the only way is to batch the converting process of the video which is becoming independant without any returns... I can&#39;t believe that Perl is unable to know if a file is still in writing mode!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511470314, "post_id": 47462891, "comment_id": 81880980, "body": "@Satch, Re &quot;<i>I can&#39;t believe that Perl is unable to know if a file is still in writing mode!</i>&quot;, Perl can tell. The answer is unconditionally &quot;no&quot;, because there is no such thing as &quot;a file in write mode&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511470427, "post_id": 47462891, "comment_id": 81881011, "body": "@Satch, &quot;<i>Unfortunately, I cannot install the FFmpeg perl module on this server</i>&quot;, You completely misunderstood Grant. He was suggesting you should check for the existence of the <code>ffmpeg</code> process that was launched to compress the video."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511472015, "post_id": 47462891, "comment_id": 81881511, "body": "...Otherwise, you&#39;ll need some system-dependent way of enumerating file handles. <code>lsof</code> could be used on linux."}, {"owner": {"reputation": 43, "user_id": 5278779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5hLJa.jpg?s=128&g=1", "display_name": "Satch", "link": "https://stackoverflow.com/users/5278779/satch"}, "edited": false, "score": 0, "creation_date": 1511475767, "post_id": 47462891, "comment_id": 81882627, "body": "Ok ok, I&#39;ll check the process. Thank you for your help!"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1511477831, "creation_date": 1511477831, "answer_id": 47464264, "question_id": 47462891, "link": "https://stackoverflow.com/questions/47462891/checking-if-a-file-is-still-open/47464264#47464264", "title": "Checking if a file is still open", "body": "<p>It's inadvisable to argue with people whose help you're getting for free</p>\n\n<p>It's quite possible to examine what file handles are open and by what processes, but the method varies according to the operating system. And it sounds like you're running <code>ffmpeg</code> on a remote system so it's even less straightforward</p>\n\n<p>The usual method would be cooperative locking, but <code>ffmpeg</code> doesn't do that</p>\n\n<p>If you're running a batch job, then the obvious way is for the job to create a flag file once the <code>ffmpeg</code> run is complete. Then you need only to wait for the existence of that file to be sure that <code>ffmpeg</code> has finished</p>\n\n<p>Please don't be overconfident in future, or you will get only the answers that you deserve</p>\n"}], "owner": {"reputation": 43, "user_id": 5278779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5hLJa.jpg?s=128&g=1", "display_name": "Satch", "link": "https://stackoverflow.com/users/5278779/satch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1511477831, "creation_date": 1511469018, "last_edit_date": 1511470254, "question_id": 47462891, "link": "https://stackoverflow.com/questions/47462891/checking-if-a-file-is-still-open", "title": "Checking if a file is still open", "body": "<p>I use <code>ffmpeg</code> to reduce size and convert a video file with a batch. Meanwhile, I'd like to check if the converting process of this video is done, using a Perl script.</p>\n\n<p>Is the <code>-t</code> operator checking that ?\nOr a simple executable check <code>-x</code> does the trick ? Or something else ?\nThank you !</p>\n"}, {"tags": ["performance", "perl", "hash", "populate"], "comments": [{"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1511453792, "post_id": 47459602, "comment_id": 81873897, "body": "What happens if you build a single array whose elements alternate between <code>$line</code> and <code>1</code>, and then write <code>%voc = @voc_keys_and_ones</code>?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1511453805, "post_id": 47459602, "comment_id": 81873906, "body": "I&#39;d suggest trying to benchmark with something like <code>Devel::NYTprof</code> because it&#39;s really hard to reproduce the problem for us to analyse. I would suggest that it <i>might</i> be the hash allocation, and you might get a bit of performance with <code>keys %hash = 564000;</code> File IO is usually one of the biggest culprits though, but that should be consistent between your two samples."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511454146, "post_id": 47459602, "comment_id": 81874088, "body": "Of course C# is going to be faster. (That said, the Perl code only takes 500 ms on my ancient Windows machine. The file consists of 20-character lines plus CRLF.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511459936, "post_id": 47459602, "comment_id": 81877078, "body": "@Yahla: It seems strange to engage the whole world with saving a few tenths of a second. As <b>toolic</b> says, please explain why a difference of 0.8 sec matters to you."}, {"owner": {"reputation": 667, "user_id": 3510400, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/613e642fa3392b5887a9f7a6aeeb6879?s=128&d=identicon&r=PG&f=1", "display_name": "Yahia", "link": "https://stackoverflow.com/users/3510400/yahia"}, "edited": false, "score": 0, "creation_date": 1511460466, "post_id": 47459602, "comment_id": 81877302, "body": "Simply, this part is only a step in a pipe of actions between the user request and the response, overall I am at 5 to 6 secs. So there is nothing wrong with optimizing the process at every level. My assumption was that it should be a way to populate a big hash within a fraction of time."}, {"owner": {"reputation": 667, "user_id": 3510400, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/613e642fa3392b5887a9f7a6aeeb6879?s=128&d=identicon&r=PG&f=1", "display_name": "Yahia", "link": "https://stackoverflow.com/users/3510400/yahia"}, "edited": false, "score": 0, "creation_date": 1511460506, "post_id": 47459602, "comment_id": 81877327, "body": "There is discussion where the hash load is instant but the lookup is slow using tied hash : <a href=\"https://stackoverflow.com/questions/43125309/fast-loading-of-large-hash-table-in-perl\" title=\"fast loading of large hash table in perl\">stackoverflow.com/questions/43125309/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511460723, "post_id": 47459602, "comment_id": 81877429, "body": "@Yahia: Then rather than attempting to optimise the disk-bound section, I would take a look at the rest, and probably remove the pipes and write the whole thing in Perl."}], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 3510400, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/613e642fa3392b5887a9f7a6aeeb6879?s=128&d=identicon&r=PG&f=1", "display_name": "Yahia", "link": "https://stackoverflow.com/users/3510400/yahia"}, "edited": false, "score": 0, "creation_date": 1511455688, "post_id": 47459831, "comment_id": 81874909, "body": "Seems like improvement of 100ms in average at populating the hash"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1511454674, "last_edit_date": 1511454674, "creation_date": 1511454304, "answer_id": 47459831, "question_id": 47459602, "link": "https://stackoverflow.com/questions/47459602/fastest-way-to-populate-a-hash-in-perl/47459831#47459831", "title": "Fastest way to populate a hash in perl", "body": "<p>Of course C# is going to be faster.</p>\n\n<p>You could save a little time and some memory by replacing</p>\n\n<pre><code>$voc{$line} = 1;  ...  if ($voc{$key}) { ... }  ...\n</code></pre>\n\n<p>with</p>\n\n<pre><code>undef $voc{$line};  ...  if (exists($voc{$key})) { ... }  ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48744, "user_id": 40468, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/43722cb1e955874a8eb721e9dfe101d1?s=128&d=identicon&r=PG", "display_name": "Ether", "link": "https://stackoverflow.com/users/40468/ether"}, "edited": false, "score": 0, "creation_date": 1511487911, "post_id": 47462607, "comment_id": 81885256, "body": "please don&#39;t use File::Slurp in SO answers.. it encourages people to keep using it! :)"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 3, "last_activity_date": 1511547657, "last_edit_date": 1511547657, "creation_date": 1511467221, "answer_id": 47462607, "question_id": 47459602, "link": "https://stackoverflow.com/questions/47459602/fastest-way-to-populate-a-hash-in-perl/47462607#47462607", "title": "Fastest way to populate a hash in perl", "body": "<p>Definitely avoiding storing 1's as the data and using exists can save time and memory.  You can eke out even more by removing the block from the loop:</p>\n\n<pre><code>my %voc;\nopen(F,\"&lt;$voc_file\");\nchomp, undef $voc{$_} while &lt;F&gt;;\nclose(F);\n</code></pre>\n\n<p>Benchmark results (using 20 character lines):</p>\n\n<pre><code>Benchmark: running ikegami, original, statementmodifier, statementmodifier_undef for at least 10 CPU seconds...\n   ikegami: 10 wallclock secs ( 9.54 usr +  0.46 sys = 10.00 CPU) @  2.10/s (n=21)\n  original: 10 wallclock secs ( 9.62 usr +  0.45 sys = 10.07 CPU) @  2.09/s (n=21)\nstatementmodifier: 10 wallclock secs ( 9.61 usr +  0.48 sys = 10.09 CPU) @  2.18/s (n=22)\nstatementmodifier_undef: 11 wallclock secs ( 9.85 usr +  0.48 sys = 10.33 CPU) @  2.23/s (n=23)\n</code></pre>\n\n<p>Benchmark: </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Benchmark 'timethese';\n\nmy $voc_file = 'rand.txt';\n\nsub check {\n    my ($voc) = @_;\n    unless (keys %$voc == 564000) {\n        warn \"bad number of keys \", scalar keys %$voc;\n    }\n    chomp(my $expected_line = `head -1 $voc_file`);\n    unless (exists $voc-&gt;{$expected_line}) {\n        warn \"bad data\";\n    }\n    return;\n}\n\ntimethese(-10, {\n    'statementmodifier' =&gt; sub {\n        my %voc;\n        open(F,\"&lt;$voc_file\");\n        chomp, $voc{$_} = 1 while &lt;F&gt;;\n        close(F);\n        #check(\\%voc);\n        return;\n    },\n    'statementmodifier_undef' =&gt; sub {\n        my %voc;\n        open(F,\"&lt;$voc_file\");\n        chomp, undef $voc{$_} while &lt;F&gt;;\n        close(F);\n        #check(\\%voc);\n        return;\n    },\n    'original' =&gt; sub {\n        my %voc;\n        open(F,\"&lt;$voc_file\");\n        while(defined(my $line=&lt;F&gt;)) {\n            chomp($line);\n            $voc{$line} = 1;\n        }\n        close(F);\n        #check(\\%voc);\n        return;\n    },\n    'ikegami' =&gt; sub {\n        my %voc;\n        open(F,\"&lt;$voc_file\");\n        while(defined(my $line=&lt;F&gt;)) {\n            chomp($line);\n            undef $voc{$line};\n        }\n        close(F);\n        #check(\\%voc);\n        return;\n    },\n});\n</code></pre>\n\n<p>(Original incorrect answer replaced with this.)</p>\n"}], "owner": {"reputation": 667, "user_id": 3510400, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/613e642fa3392b5887a9f7a6aeeb6879?s=128&d=identicon&r=PG&f=1", "display_name": "Yahia", "link": "https://stackoverflow.com/users/3510400/yahia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 47462607, "answer_count": 2, "score": 0, "last_activity_date": 1511547657, "creation_date": 1511453415, "last_edit_date": 1511453670, "question_id": 47459602, "link": "https://stackoverflow.com/questions/47459602/fastest-way-to-populate-a-hash-in-perl", "title": "Fastest way to populate a hash in perl", "body": "<p>I am trying filling a hash in perl from a file of around 564k lines, and the code is taking like 1.6~2.1 seconds to execute, while the equivalent in C# takes around 0.8 seconds to finish. Is there any better way to do it in Perl ? </p>\n\n<p>I have tried so far :</p>\n\n<pre><code># 1 - this version take ~ +1.6 seconds to fill the hash from file with ~ 564000\nmy %voc;\nopen(F,\"&lt;$voc_file\");\nwhile(defined(my $line=&lt;F&gt;)) {\n    chomp($line);\n    $voc{$line} = 1;\n}\nclose(F);\n</code></pre>\n\n<p>and this</p>\n\n<pre><code># 2 - this version take ~ +2.1 seconds to fill the hash from file with ~ 564000\nmy %voc;\nmy @voc_keys;\nmy @array_of_ones;\nopen(F,\"&lt;$voc_file\");\nmy $voc_keys_index = 0;\nwhile(defined(my $line=&lt;F&gt;)) {\n    chomp($line);\n    $voc_keys[$voc_keys_index] = $line;\n    $array_of_ones[$voc_keys_index] = 1;\n    $voc_keys_index ++;\n}\n@voc{@voc_keys} = @array_of_ones;\nclose(F);\n</code></pre>\n\n<p>In c#, I am using :</p>\n\n<pre><code>var voc = new Dictionary&lt;String, int&gt;();\nforeach (string line in File.ReadLines(pathToVoc_file))\n{\n    var trimmedline = line.TrimEnd(new char[] { '\\n' });\n    voc[trimmedline] = 1;\n}\n</code></pre>\n\n<p>And it takes only 700~800 ms</p>\n"}, {"tags": ["perl", "cron", "perlbrew"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 3, "creation_date": 1511449778, "post_id": 47457834, "comment_id": 81871506, "body": "Take a look and read about the <a href=\"https://metacpan.org/release/Ubic\" rel=\"nofollow noreferrer\">Ubic</a>. It is sure an overkill for your use-case, but you could get some ideas..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511451235, "post_id": 47457834, "comment_id": 81872391, "body": "You should be able to run something like `bash &#39;perlbrew use perl-5.28.0; perl $HOME/&lt;path to my perl script&gt;&#39; from cron. That will pick a specific Perl for that sub-shell and set everything automatically."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1511452736, "post_id": 47457834, "comment_id": 81873310, "body": "@simbabque Except that <code>perlbrew use</code> seems to exec into a new shell, so you&#39;d need to pipe commands into it: <code>perlbrew use perl-5.26 &lt;&lt;&lt;&#39;perl .&#47;some-script.pl&#39;</code> (Bash syntax). <code>perlbrew exec --with perl-5.26 &#39;perl .&#47;some-script.pl&#39;</code> would be equivalent, but prints an annoying header before the output."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1511457891, "post_id": 47457834, "comment_id": 81876088, "body": "@jm666, thank you for the suggestion. Ubic seems like overkill as you say, but it does look interesting for services management in general."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1511458110, "post_id": 47457834, "comment_id": 81876184, "body": "It doesn&#39;t make much sense to use local::lib with <code>perlbrew</code>, so you shouldn&#39;t be setting <code>PERL5LIB</code>."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511458401, "post_id": 47457834, "comment_id": 81876324, "body": "@ikegami, how then? It is what makes my simplistic way of running Perl scripts work. If I don&#180;t set <code>PERL5LIB</code> I only get some of the <code>@INC</code> directories in the running Perl script and then <code>use</code> will not consider certain libraries ending up in a compile-time error."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511460502, "post_id": 47457834, "comment_id": 81877323, "body": "Re &quot;<i>I only get some of the @INC directories in the running Perl script</i>&quot;, Right, and that&#39;s where the modules you should be installed. It makes no sense to install them elsewhere."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511463827, "post_id": 47457834, "comment_id": 81878648, "body": "@ikegami, I am using <code>cpanm &lt;module&gt;</code> to install modules and they end up in the <code>PERL5LIB</code> directory. <code>cpan</code> seems to do the same. Are you suggesting that they should be installed for each specific Perl version? I am using Perlbrew to have a local Perl (and libraries) for a user, not to use more than a single Perl version, so I was not paying attention to the place libraries were going."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511463931, "post_id": 47457834, "comment_id": 81878677, "body": "Re &quot;<i>and they end up in the PERL5LIB directory.</i>&quot;, That&#39;s because you are using install::lib and you shouldn&#39;t. It&#39;s likely to cause problems, and there&#39;s no reason to use it."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511465049, "post_id": 47457834, "comment_id": 81879127, "body": "@ikegami, ok, I think that now I see what you mean. <code>local::lib</code> is meant to have libraries local to a user but with the system-wide Perl. Perlbrew is meant to have a whole Perl + libraries environment local to a user. Am I right? But do you see a problem if I stick to a single Perlbrew interpreter? It would take some effort to go back..."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1511465887, "post_id": 47457834, "comment_id": 81879445, "body": "@amon --- to surprise that annoying message, you can tell perlbrew to be <code>--quiet</code>. I use it in some off my <code>~&#47;.bash_prfofile</code> aliases that require some perl modules. But I do not want to clutter my installed Perls like <code>alias minidoc=&#39;perlbrew exec --quiet --with  perl-5.26.1@minicpan  mcpandoc -MPod::Text::Color::Delight&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1511467114, "post_id": 47457834, "comment_id": 81879874, "body": "@amon, Re &quot;<i>Except that perlbrew use seems to exec into a new shell,</i>&quot;, Not if you have perlbrew properly setup. There&#39;s a file that needs to be <code>source</code>d at shell startup. You&#39;re describing the backup behaviour when that isn&#39;t done."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511467155, "post_id": 47457834, "comment_id": 81879887, "body": "Re &quot;<i>But do you see a problem if I stick to a single Perlbrew interpreter?</i>&quot;, I don&#39;t see how you can do that. Lots of things use the system <code>perl</code>, and you&#39;ll need to upgrade eventually."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511468488, "post_id": 47457834, "comment_id": 81880355, "body": "@ikegami, I don&#180;t see what you mean. I have a non-privileged user that uses <code>local::lib</code> so its <code>PERL5LIB</code> variable points to a directory of this user and then Perlbrew to have a different Perl version than the system&#180;s one. The libraries get installed under the <code>PERL5LIB</code> directory which is local to the user. The <code>crontab</code> file I refer to is also the user&#180;s."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511468815, "post_id": 47457834, "comment_id": 81880469, "body": "@ikegami, sorry, I have read my question and see I don&#180;t mention the user anywhere. I have edited it to make this clear."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511470655, "post_id": 47457834, "comment_id": 81881092, "body": "Re &quot;<i>I don&#180;t see what you mean.</i>&quot;, You said you could guarantee that the only <code>perl</code> a user would only use was a specific one installed using <code>perlbrew</code>. I said I don&#39;t believe you can guarantee that. Lots of stuff use the system <code>perl</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511471003, "post_id": 47457834, "comment_id": 81881200, "body": "Re &quot;<i>I have a non-privileged user that uses local::lib [with a <code>perl</code> installed in their home dir]</i>&quot;, I know that. They shouldn&#39;t be using local::lib. local::lib is a hack whose need was eliminated by the installation of a <code>perl</code> to which they have full access."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511473605, "post_id": 47457834, "comment_id": 81882005, "body": "@ikegami Re new shell: oh. oooh! That explains a lot. Thank you very very much for your pointer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511493041, "post_id": 47457834, "comment_id": 81886274, "body": "Re &quot;<i>Both cpan and cpanm will install under PERL5LIB</i>&quot;, That&#39;s not true. They don&#39;t use PERL5LIB."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1511525841, "post_id": 47457834, "comment_id": 81900719, "body": "It should be both <code>cpan</code> and <code>cpanm</code> install under <code>PERL5LIB</code> by default when you have <code>local::lib</code>. Fixed in the question. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1511471420, "post_id": 47463186, "comment_id": 81881320, "body": "++ this is exactly why Gugod introduced the <code>alias</code> feature after removing the &quot;current&quot; symlink. See: <a href=\"https://github.com/gugod/App-perlbrew/issues/142\" rel=\"nofollow noreferrer\">github.com/gugod/App-perlbrew/issues/142</a>"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1511472287, "post_id": 47463186, "comment_id": 81881588, "body": "I assume that you could use a <i>regular</i> shebang and invoke the right Perl interpreter from <i>crontab</i> as <code>0 2 * * * &#47;path&#47;to&#47;perl &#47;path&#47;to&#47;script arg1 ...</code>. This would let you move the script around without hardcoding the Perl interpreter that it needs. Am I right?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511472924, "post_id": 47463186, "comment_id": 81881792, "body": "Yes, you could hardcode it in the cron job and everywhere else you use it instead, but that&#39;s bad!!! It&#39;s supposed to be hardcoded in the script when you install it. That way, the script is only used with the <code>perl</code> under which it was tested and installed. The standard Perl installers even rewrite <code>#!&#47;usr&#47;bin&#47;perl</code> into the proper path automatically for you. It saves you from hardcoding it in a million places (e.g. the cron files), or from using an installation that&#39;s not wasn&#39;t setup for it. I stand by my answer."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1511473674, "post_id": 47463186, "comment_id": 81882022, "body": "@ikegami, thanks a lot for the explanation! It makes a lot of sense. My doubts come from the fact that I tend to code in Perl in a version-independent way. Probably because I tend to use the system&#180;s Perl interpreter in cPanel managed machines, which change it over time.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511473778, "post_id": 47463186, "comment_id": 81882046, "body": "I&#39;m not sure why you think that&#39;s different. Don&#39;t your scripts that use the system <code>perl</code> have <code>#!&#47;usr&#47;bin&#47;perl</code> as their first line?"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1511474639, "post_id": 47463186, "comment_id": 81882331, "body": "Well, you may not like it :-), but it is possible to use <code>&#47;usr&#47;bin&#47;env perl</code> to make sure the system finds a Perl interpreter for you in your <code>PATH</code>. You cannot guarantee which version but I guess <code>use &lt;version&gt;</code> was created for that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511474784, "post_id": 47463186, "comment_id": 81882374, "body": "It&#39;s not a question of liking or not. That&#39;s a horrible idea. It causes the script to break when you use <code>perlbrew</code> since it changes your path."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1511470783, "creation_date": 1511470783, "answer_id": 47463186, "question_id": 47457834, "link": "https://stackoverflow.com/questions/47457834/running-a-perl-script-from-crontab-when-you-use-perlbrew/47463186#47463186", "title": "Running a Perl script from crontab when you use Perlbrew", "body": "<p>The shebang (<code>#!</code>) line of the script should point to the (<code>perlbrew</code>-installed) <code>perl</code> it is meant to run under. (This should be done as part of installing the script.) That's all you need.</p>\n\n<pre><code>0 2 * * * /path/to/script arg1 ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1511471677, "post_id": 47463264, "comment_id": 81881402, "body": "There is also Tokuhirom&#39;s  <a href=\"https://github.com/tokuhirom/plenv\" rel=\"nofollow noreferrer\"><code>plenv</code></a> ;-)  Miyagawa has been adding the &quot;missing&quot; <code>perlbrew</code> commands to <code>plenv</code>: <a href=\"https://github.com/miyagawa/plenv-contrib\" rel=\"nofollow noreferrer\">github.com/miyagawa/plenv-contrib</a>"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1511516522, "post_id": 47463264, "comment_id": 81895167, "body": "I find your answer more complete, but ikegami&#180;s more correct. So I will mark his as correct but give you my upvote."}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 2, "last_activity_date": 1511471239, "creation_date": 1511471239, "answer_id": 47463264, "question_id": 47457834, "link": "https://stackoverflow.com/questions/47457834/running-a-perl-script-from-crontab-when-you-use-perlbrew/47463264#47463264", "title": "Running a Perl script from crontab when you use Perlbrew", "body": "<p>If you already have multiple perl installations managed with <code>perlbrew</code> the easiest approach is to just use <code>perlbrew exec</code> to run your script. The <code>-q</code> and <code>--with</code> options allow you to silence superfluous output and select the specific version of perl to run the script/job. Try something like:</p>\n\n<ul>\n<li><code>perlbrew exec perl -E 'say \"Hello from $]\\n\"'</code> (this will show errors from older versions (<code>&lt; 5.10</code>) of perl that don't have the <code>-E</code> switch enabled by default).</li>\n<li><code>perlbrew exec -q --with 5.26.1  perl -E 'say \"Hello from $]\\n\"'</code> (this will run the command and suppress informational output).</li>\n<li><code>perlbrew exec -q --with 5.26.1 perl ~/script_from_heaven.pl</code> (runs the script with the perl version requested).</li>\n<li><code>perlbrew exec -q --with 5.26.1 ~/script_from_heaven.pl</code> (runs the script with the perl version requested or hard-coded in the script's shebang line).</li>\n</ul>\n\n<p>I tend to explicitly set <code>PERL5LIB</code> and use <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\"><code>local::lib</code></a> <em>only</em> when I need them or for certain users or environments where I exclusively install <em>all</em> CPAN modules in <code>$HOME/perl5/lib/perl5</code> (a full application deployment, say). Otherwise I find running perl from <code>perlbrew</code> pretty convenient.</p>\n\n<hr>\n\n<p><strong>A couple of things I've found helpful</strong>: setting an <code>alias</code> for <code>perlbrew</code> environments that you want to keep stable for a particular use can be a useful way to manage multiple perls:</p>\n\n<pre><code> ~/$ perlbrew alias create perl-5.24.0 stable-cronperl\n ~/$ perlbrew list\n perl-5.8.9\n perl-5.10.1\n perl-5.24.0\n cperl-cperl-5.26.1\n stable-cronperl (5.24.0)\n perl-5.26.1\n</code></pre>\n\n<p><strong>NB</strong>: however the alias is only useful/useable as a stable <code>#!</code> shebang anchor for use at the top of your scripts if you want to make them executable:</p>\n\n<pre><code>#!/home/cronic/perl5/perlbrew/perls/stable-cronperl/bin/perl\n</code></pre>\n\n<p>You can't refer to an alias using <code>--with</code> for example: </p>\n\n<p><code>perlbrew exec --with stable-cronperl ~/smart_comments.pl</code></p>\n\n<p>Reporting this as either a documentation issue or a bug is on my to do list.</p>\n"}], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 3, "accepted_answer_id": 47463186, "answer_count": 2, "score": 7, "last_activity_date": 1511525678, "creation_date": 1511447509, "last_edit_date": 1511525678, "question_id": 47457834, "link": "https://stackoverflow.com/questions/47457834/running-a-perl-script-from-crontab-when-you-use-perlbrew", "title": "Running a Perl script from crontab when you use Perlbrew", "body": "<p>I have tried the following and find it to work. This is done with a non-privileged user. First find out where your <em>perl</em> command is:</p>\n\n<pre><code># which perl\n</code></pre>\n\n<p>Then check the value of <code>PERL5LIB</code>:</p>\n\n<pre><code># echo $PERL5LIB\n</code></pre>\n\n<p>Then, at the crontab file of the user, do something like:</p>\n\n<pre><code>MAILTO=&lt;my email address for the jobs output&gt;\nHOME=/home/myhome\nPERL5LIB=/home/myhome/perl5/lib/perl5\n\n0 2 * * * $HOME/&lt;rest of path to perl&gt;/perl $HOME/&lt;path to my perl script&gt; arg1 ...\n</code></pre>\n\n<p>This will run a job at 2am and seems to find all Perl libs correctly. My question is: is this complete and <em>portable</em>? Is there a better way?</p>\n\n<p>I have seen a number of <em>bash</em> and <em>perl</em> scripts out there that are supposed to prepare the environment for the execution of a Perl script, but this seems to suffice. Any advice will be welcome!</p>\n\n<p><strong>EDIT</strong>: From the comments to the question, it seems that I am using a \"bad\" mixture of Perlbrew and <code>local::lib</code>. The way to make sure libraries get installed inside a particular Perlbrew version is answered here: <a href=\"https://stackoverflow.com/questions/3733482/how-do-i-install-cpan-modules-while-using-perlbrew\">How do I install CPAN modules while using perlbrew?</a>. Both <code>cpan</code> and <code>cpanm</code> will install under <code>PERL5LIB</code> when you are using <code>local::lib</code> unless you explicitly tell them to do otherwise. Also <code>cpanm</code> seems to be better suited to working along with Perlbrew.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": true, "score": 5, "last_activity_date": 1511428724, "creation_date": 1511428724, "answer_id": 47451664, "question_id": 47451335, "link": "https://stackoverflow.com/questions/47451335/why-are-my-double-quotes-are-missing-in-the-output/47451664#47451664", "title": "Why are my double quotes are missing in the output?", "body": "<p><code>s/\\\"([^\"]*)\\\"/uc($1)/eg</code> - <code>$1</code> represents match <strong>inside</strong> brackets <code>()</code>. You have include double quotes in match to be replaced but <strong>outside</strong> brackets.</p>\n\n<p>Possible fix:\n<code>s/(\\\"[^\"]*\\\")/uc($1)/eg</code></p>\n"}, {"comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1511435691, "post_id": 47452674, "comment_id": 81862819, "body": "it may break also if there is some escaping character like <code>\\&quot;</code>"}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1511435974, "post_id": 47452674, "comment_id": 81862983, "body": "following regex may handle backslash escaping better <code>s&#47;&quot;(?:\\\\.|[^&quot;])*&quot;&#47;uc($&amp;)&#47;eg</code> note that using <code>$&amp;</code> instead of <code>$1</code> allows not using brakets arround match"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 6, "last_activity_date": 1511431412, "creation_date": 1511431412, "answer_id": 47452674, "question_id": 47451335, "link": "https://stackoverflow.com/questions/47451335/why-are-my-double-quotes-are-missing-in-the-output/47452674#47452674", "title": "Why are my double quotes are missing in the output?", "body": "<p>The quotes are all disappearing because they're outside the capture in your regex.  Changing it to <code>s/(\"[^\"]*\")/uc($1)/eg</code> gets us your desired output:</p>\n\n<pre><code>output = \"    AS  (10) PRINT \"it if achieved. print\" # THIS IS COMMENT.NUMBERS\"\n</code></pre>\n\n<p>Note that the inner section isn't mapped to all caps.  This is a hint to how the regex is actually matching things in your string - it finds two matches: <code>\"    as  (10) print \"</code> and <code>\" # This is comment.NUMBERS\"</code>.  The text inside the inner quotes isn't matched by the regex at all.  This is important, because it means that this solution is fragile and <em>it will break</em> on data which doesn't contain two nested sets of quotes and you want to capitalize only the text which is inside the outer quotes, but outside the inner quotes.</p>\n"}], "owner": {"reputation": 73, "user_id": 8876275, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f28f67fb1073441d98d09480457dc87?s=128&d=identicon&r=PG&f=1", "display_name": "DSP", "link": "https://stackoverflow.com/users/8876275/dsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47451664, "answer_count": 2, "score": 1, "last_activity_date": 1511452926, "creation_date": 1511427656, "last_edit_date": 1592644375, "question_id": 47451335, "link": "https://stackoverflow.com/questions/47451335/why-are-my-double-quotes-are-missing-in-the-output", "title": "Why are my double quotes are missing in the output?", "body": "<p>I tried to convert strings from lower case to upper case. While I achieved that, I found my double quotes were removed from the output. I want to be clear why the substitution fails here.</p>\n<h3>Perl code:</h3>\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @ar = &lt;DATA&gt;;\nmy $str = join '', @ar;\n\n#print $str;\n\nif ( $str =~ s/\\&quot;([^&quot;]*)\\&quot;/uc($1)/eg ) {\n    print $str;\n}\n__DATA__\noutput = &quot;    as  (10) print &quot;it if achieved. print&quot; # This is comment.NUMBERS&quot;\n</code></pre>\n<p>Obtained output:</p>\n<pre><code>output =     AS  (10) PRINT it if achieved. print # THIS IS COMMENT.NUMBERS\n</code></pre>\n<p>Expected output:</p>\n<pre><code>output = &quot;    AS  (10) PRINT &quot;it if achieved. print&quot; # THIS IS COMMENT.NUMBERS&quot;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 210, "user_id": 7684247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En7gm.jpg?s=128&g=1", "display_name": "L. O. van Ingen", "link": "https://stackoverflow.com/users/7684247/l-o-van-ingen"}, "edited": false, "score": 2, "creation_date": 1511429128, "post_id": 47451286, "comment_id": 81858392, "body": "Show the complete code. Your code errors at line 63, but there&#39;s no way to know what line 63 is in your code-snippet or what any of the other variables are or do..."}, {"owner": {"reputation": 109, "user_id": 7483001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0af3637528d19a9ec5ec82ea904e03ce?s=128&d=identicon&r=PG&f=1", "display_name": "Skif", "link": "https://stackoverflow.com/users/7483001/skif"}, "reply_to_user": {"reputation": 210, "user_id": 7684247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En7gm.jpg?s=128&g=1", "display_name": "L. O. van Ingen", "link": "https://stackoverflow.com/users/7684247/l-o-van-ingen"}, "edited": false, "score": 0, "creation_date": 1511430174, "post_id": 47451286, "comment_id": 81859112, "body": "if (not exists $hashtime{$arr[0]}{$date}{$hour}{$min}){ - this is line 63."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 7483001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0af3637528d19a9ec5ec82ea904e03ce?s=128&d=identicon&r=PG&f=1", "display_name": "Skif", "link": "https://stackoverflow.com/users/7483001/skif"}, "edited": false, "score": 0, "creation_date": 1511433248, "post_id": 47453226, "comment_id": 81861294, "body": "Thanks for help! $hashtime{$arr[0]} = ( $date, { $hour=&gt;{$min=&gt;[$sec]} } ); - error is here. You are write/ I have not written for perl more then 10 year."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 109, "user_id": 7483001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0af3637528d19a9ec5ec82ea904e03ce?s=128&d=identicon&r=PG&f=1", "display_name": "Skif", "link": "https://stackoverflow.com/users/7483001/skif"}, "edited": false, "score": 0, "creation_date": 1511433496, "post_id": 47453226, "comment_id": 81861459, "body": "@Skif  That appears to be the only error; and you got that same thing right everywhere else."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1511495005, "last_edit_date": 1511495005, "creation_date": 1511432889, "answer_id": 47453226, "question_id": 47451286, "link": "https://stackoverflow.com/questions/47451286/add-array-to-hash-in-perl/47453226#47453226", "title": "Add array to hash in perl", "body": "<p>You are using a list <code>( )</code> instead of a hash reference <code>{ }</code>, in all <code>if</code> blocks.</p>\n\n<p>When you say</p>\n\n<pre><code>$hashtime{$arr[0]} = ( $date =&gt; { $hour =&gt; { $min =&gt; [$sec] } } );\n</code></pre>\n\n<p>because of LIST <code>( )</code> being evaluated in scalar context what happens is equivalent to</p>\n\n<pre><code>$hashtime{$arr[0]} = ( $date, { $hour =&gt; { $min =&gt; [$sec] } } );\n</code></pre>\n\n<p>ending up as</p>\n\n<pre><code>$hashtime{$arr[0]} = { $hour =&gt; { $min =&gt; [$sec] } };\n</code></pre>\n\n<p>since the <code>,</code> operator evaluates and discards operands one at a time, returning the last one.</p>\n\n<p>The next <code>if</code> goes similarly and you then have either of (or both)</p>\n\n<pre><code>$hashtime{$arr[0]}{$date}{$min}{[$sec]}\n$hashtime{$arr[0]}{$hour}{$min}{[$sec]}\n</code></pre>\n\n<p>However, the code that draws the error</p>\n\n<pre><code>if (not exists $hashtime{$arr[0]}{$date}{$hour})\n</code></pre>\n\n<p>needs a hashref at both <code>$arr[0]</code> and <code>{$date}</code>, while it clearly doesn't have both.</p>\n\n<hr>\n\n<p>In both <code>if</code> blocks you need to assign a hash reference, obtained using <code>{ }</code></p>\n\n<pre><code>$hashtime{$arr[0]} = { $date =&gt; { $hour =&gt; { $min =&gt; [$sec] } } };\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$hashtime{$arr[0]}{$date} = { $hour =&gt; { $min =&gt; [$sec] } };\n</code></pre>\n\n<p>as well as in the last <code>if</code> block.</p>\n\n<hr>\n\n<p>Please indent your code properly.  It is very hard to work with it the way it was posted.</p>\n"}], "owner": {"reputation": 109, "user_id": 7483001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0af3637528d19a9ec5ec82ea904e03ce?s=128&d=identicon&r=PG&f=1", "display_name": "Skif", "link": "https://stackoverflow.com/users/7483001/skif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 47453226, "answer_count": 1, "score": 2, "last_activity_date": 1511495005, "creation_date": 1511427549, "last_edit_date": 1511453272, "question_id": 47451286, "link": "https://stackoverflow.com/questions/47451286/add-array-to-hash-in-perl", "title": "Add array to hash in perl", "body": "<p>I try to add array in hash.</p>\n\n<pre><code>if ( not exists $hashtime{ $arr[0] }{ $date }{ $hour }{ $min } ) {\n    print \"$min not exist\";\n    $hashtime{ $arr[0] }{ $date }{ $hour }{ $min } = [ $sec ];\n    $create++;\n};\n</code></pre>\n\n<p>And received the error:</p>\n\n<blockquote>\n  <p>Not a HASH reference at ./sort_log_by_ip.pl line 63,  line 1.</p>\n</blockquote>\n\n<p>Why is this code wrong?</p>\n\n<p>In <a href=\"http://perldoc.perl.org/perldsc.html#HASHES-OF-ARRAYS\" rel=\"nofollow noreferrer\"><code>perldoc perldsc</code></a> I see this construction, and I'm using something similar:</p>\n\n<pre><code>while ( &lt;&gt; ) {\n     next unless s/^(.*?):\\s*//;\n     $HoA{$1} = [ split ];\n}\n</code></pre>\n\n<h3>Update</h3>\n\n<p>Code before:</p>\n\n<pre><code>if ( not exists $hashtime{ $arr[0] } ) {\n    $hashtime{ $arr[0] } = ( $date =&gt; { $hour =&gt; { $min =&gt; [ $sec ] } } );\n    $create++; \n    print \"create for IP: $arr[0]\\n\";\n}\n\nif ( not exists $hashtime{ $arr[0] }{$date} ) {\n    $hashtime{ $arr[0] }{ $date } = ( $hour =&gt; { $min =&gt; [ $sec ] } );\n    $create++;\n    print \"create for IP: $arr[0] DATE: $date\\n\";\n}\n\nif ( not exists $hashtime{ $arr[0] }{$date}{$hour} ) {\n    $hashtime{ $arr[0] }{ $date }{ $hour } = ( $min =&gt; [$sec] );\n    $create++;\n    print \"create for IP: $arr[0] DATE: $date HOUR: $hour\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "mod-perl2"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 3, "creation_date": 1511425825, "post_id": 47450767, "comment_id": 81856326, "body": "You do realise this is 2017 right?"}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1511425879, "post_id": 47450767, "comment_id": 81856362, "body": "@GerhardBarnard I do :))"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511427103, "post_id": 47450767, "comment_id": 81857093, "body": "ok, where is the mod_perl portion you are experiencing the issues with?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511428736, "post_id": 47450767, "comment_id": 81858139, "body": "also, putting my answer on hold until I get clarity from you and will repost."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511428931, "post_id": 47450767, "comment_id": 81858263, "body": "@GerhardBarnard what do you mean by &quot;where is the mod_perl portion&quot;? I have placed my code in mod_perl directory and called it with a browser, it runs by mod_perl. but the statuses I have set do not work."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511429398, "post_id": 47450767, "comment_id": 81858569, "body": "that is what I mean, show me how you call it and your directory structure"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1511604350, "post_id": 47450767, "comment_id": 81924322, "body": "Can you run a <code>curl -v &lt;url&gt;</code> for the one where you expect 599 code and post the output that you get in your question? Status is the first thing that should go back, and I guess it might be a case of header order error"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1511604431, "post_id": 47450767, "comment_id": 81924345, "body": "You should try using <code>$cgi-&gt;$header-&gt;status(&#39;599 Some Issue&#39;);</code> before printing or setting any header"}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1511607051, "post_id": 47450767, "comment_id": 81925092, "body": "@TarunLalwani I did &#39;curl -v &lt;myUrl&gt;&#39; and I got 200 ok again. I cleared all the other header settings except status, and still have the same problem."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1511607112, "post_id": 47450767, "comment_id": 81925107, "body": "I think this is a mod_perl issue, there must be some other way to set header status in mod_perl, That is because I have no problem running the code in CGI mode."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1511607715, "post_id": 47450767, "comment_id": 81925258, "body": "@TarunLalwani I edited the question and added the response of <code>curl</code> too."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511607852, "post_id": 47450767, "comment_id": 81925290, "body": "Using mod_perl for writing web applications is not recommended. Have you considered something PSGI based?"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1511612305, "post_id": 47450767, "comment_id": 81926539, "body": "Works fine for me on <code>Apache&#47;2.4.18</code>, could it be because of older apache version? Can you try with latest one?"}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1511677761, "post_id": 47450767, "comment_id": 81942325, "body": "did you try it with mod_perl ??? @TarunLalwani"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1511678037, "post_id": 47450767, "comment_id": 81942360, "body": "I think i mixed CGI and mod perl. Let me try that out"}, {"owner": {"reputation": 1354, "user_id": 2122007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/563KL.jpg?s=128&g=1", "display_name": "Jim Black", "link": "https://stackoverflow.com/users/2122007/jim-black"}, "edited": false, "score": 0, "creation_date": 1511877953, "post_id": 47450767, "comment_id": 82023517, "body": "You could simply print the header that you want.  There isn&#39;t any real magic in what CGI-&gt;header is doing.  I would also recommend using a valid HTTP return code."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1511991489, "post_id": 47450767, "comment_id": 82082248, "body": "Do not use perl module CGI anymore, and do not invent new HTTP codes."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1512203350, "post_id": 47450767, "comment_id": 82170502, "body": "@melpomene Thank you for your suggestion, but at this time I need to make it work with mod_perl (not my choice). but I&#39;ll consider your advice for later apps. Thanks."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 1354, "user_id": 2122007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/563KL.jpg?s=128&g=1", "display_name": "Jim Black", "link": "https://stackoverflow.com/users/2122007/jim-black"}, "edited": false, "score": 0, "creation_date": 1512203517, "post_id": 47450767, "comment_id": 82170534, "body": "@JimBlack actually I have sent other valid codes and it still is not working. so I know that the problem is not with sending the HTTP valid code."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1512203711, "post_id": 47450767, "comment_id": 82170586, "body": "@PatrickMevzek I suggest you read the question thoroughly. I am using <b>mod_perl</b> and I need to use a <b>custom code</b>. if you had any solutions in mind I&#39;d be happy to hear it."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1512207162, "post_id": 47450767, "comment_id": 82171290, "body": "Do not invent new HTTP codes, whatever software you use. There is a standard, and it is not there to extend it personnally with any new codes... of course if you want interoperability and following standards. You nowhere gave any valid reason to create a new response value. Imagine if everyone does like you, how do you think the web could work?"}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1512209024, "post_id": 47450767, "comment_id": 82171729, "body": "There is no law against using a custom HTTP code. and there are no boundaries in programming. The way to do it is in the answers below. if I want to do sth I make it work. That is the way to push the limits. I like to have a growing mindset."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1512359662, "post_id": 47450767, "comment_id": 82210241, "body": "You are wrong, there is a &quot;law&quot;. HTTP is a protocol defined by IETF RFCs. They do not say you are free to decide unilateraly to create new status codes. This has nothing to do with a &quot;growing mindset&quot;."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1512371259, "post_id": 47450767, "comment_id": 82213826, "body": "@PatrickMevzek RFCs are not laws. they define some rules and protocols and standards. breaking these rules or standards does not put you in jail !!! plus it&#39;s doable. It&#39;s also acceptable to even create a custom protocol as long as your applications understand it, and works fine with it. I don&#39;t have information about your country/state laws, it may be a law in your region. but as long as I remember there is no such a thing written in RFC 2616."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1512392314, "post_id": 47450767, "comment_id": 82225386, "body": "Playing on words does not lead to anything fruitful. Standards are there for a reason, starting with interoperability. If you prefer to break everything and do your thing alone in your corner, you are right you are technically free to do so. But it does not mean it is a good idea at all. EOT."}], "answers": [{"comments": [{"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1511707239, "post_id": 47496862, "comment_id": 81949806, "body": "I have read this before but I don&#39;t know how to use this in my own code. @mikep"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1511735008, "post_id": 47496862, "comment_id": 81958967, "body": "The OP is not writing a mod_perl handler; they are writing a Registry script."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "reply_to_user": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1511803362, "post_id": 47496862, "comment_id": 81988951, "body": "@SarahAziziyan, it seems this cannot be done using a registry script. So the way you are doing it won&#39;t allow you to change the status. You will need to use a handler to make it work"}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1511805661, "post_id": 47496862, "comment_id": 81990264, "body": "@mikep I will try to use a handler as you mentioned, and I&#39;ll inform you if it worked. thanks."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1511805705, "post_id": 47496862, "comment_id": 81990293, "body": "@TarunLalwani I&#39;ll try to use a handler."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1511855726, "post_id": 47496862, "comment_id": 82008893, "body": "@mikep I tried to use a handler but as far as I read, handlers can handle requests from specific URLs. In my case (the code that I wrote in the question), I need to send an error msg to the user with some status (sth like 599) in the case when they don&#39;t send a parameter called &#39;method&#39;. but I don&#39;t want to send the same error status for all the requests coming to the <code>test.pl</code>."}, {"owner": {"reputation": 3613, "user_id": 6818284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1aa2b77c7bc15069e1013aba4d7104?s=128&d=identicon&r=PG&f=1", "display_name": "mikep", "link": "https://stackoverflow.com/users/6818284/mikep"}, "edited": false, "score": 0, "creation_date": 1511856432, "post_id": 47496862, "comment_id": 82009289, "body": "If you like, we can take this into chat."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1512208706, "post_id": 47496862, "comment_id": 82171660, "body": "Thank you for your time and energy @mikep. you were a huge help."}, {"owner": {"reputation": 3613, "user_id": 6818284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1aa2b77c7bc15069e1013aba4d7104?s=128&d=identicon&r=PG&f=1", "display_name": "mikep", "link": "https://stackoverflow.com/users/6818284/mikep"}, "reply_to_user": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1512214633, "post_id": 47496862, "comment_id": 82173335, "body": "@Sarah Aziziyan, happy to help :)"}, {"owner": {"reputation": 3208, "user_id": 2162673, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9XSFy.jpg?s=128&g=1", "display_name": "Francisco Zarabozo", "link": "https://stackoverflow.com/users/2162673/francisco-zarabozo"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 1, "creation_date": 1541653864, "post_id": 47496862, "comment_id": 93292070, "body": "@TarunLalwani Of course you can set the status using a registry script. You can get the request object with <code>my $r = Apache2::RequestUtil-&gt;request;</code>, or via an initial <code>$r = shift()</code> in the script. Of course it&#39;s better to enclose the whole script in a subroutine and then call that subroutine passing the request object as argument, similar to using the <code>handler</code> method in a perl handler module."}], "tags": [], "owner": {"reputation": 3613, "user_id": 6818284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1aa2b77c7bc15069e1013aba4d7104?s=128&d=identicon&r=PG&f=1", "display_name": "mikep", "link": "https://stackoverflow.com/users/6818284/mikep"}, "is_accepted": true, "score": 3, "last_activity_date": 1511728199, "last_edit_date": 1511728199, "creation_date": 1511704291, "answer_id": 47496862, "question_id": 47450767, "link": "https://stackoverflow.com/questions/47450767/how-to-send-a-custom-http-status-code-with-mod-perl/47496862#47496862", "title": "How to send a custom http status code with mod_perl", "body": "<p>From <a href=\"http://www.perlmonks.org/?node_id=826769\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=826769</a>, the way to set a status code is</p>\n\n<pre><code>package My::Handler;\n\nuse strict;\nuse warnings 'all';\nuse Apache2::RequestRec;\n\nsub handler : method {\n  my ($class, $r) = @_;\n\n  $r-&gt;status( 401 );\n  return 401;\n}\n\n1;# return true:\n</code></pre>\n\n<p>EDIT: Clarification</p>\n\n<p>From <a href=\"https://perl.apache.org/docs/2.0/user/handlers/intro.html\" rel=\"nofollow noreferrer\">https://perl.apache.org/docs/2.0/user/handlers/intro.html</a></p>\n\n<blockquote>\n  <p>What are Handlers?</p>\n  \n  <p>Apache distinguishes between numerous phases for which it provides hooks (because the C functions are called ap_hook_) where modules can plug various callbacks to extend and alter the default behavior of the webserver. mod_perl provides a Perl interface for most of the available hooks, so mod_perl modules writers can change the Apache behavior in Perl. These callbacks are usually referred to as handlers and therefore the configuration directives for the mod_perl handlers look like: PerlFooHandler, where Foo is one of the handler names. For example PerlResponseHandler configures the response callback.</p>\n  \n  <p>A typical handler is simply a perl package with a handler subroutine. For example:</p>\n</blockquote>\n\n<pre><code>file:MyApache2/CurrentTime.pm\n----------------------------\npackage MyApache2::CurrentTime;\n\nuse strict;\nuse warnings;\n\nuse Apache2::RequestRec ();\nuse Apache2::RequestIO ();\n\nuse Apache2::Const -compile =&gt; qw(OK);\n\nsub handler {\n  my $r = shift;\n\n  $r-&gt;content_type('text/plain');\n  $r-&gt;print(\"Now is: \" . scalar(localtime) . \"\\n\");\n\n  return Apache2::Const::OK;\n}\n1;\n</code></pre>\n\n<blockquote>\n  <p>This handler simply returns the current date and time as a response.</p>\n  \n  <p>Since this is a response handler, we configure it as a such in httpd.conf:</p>\n</blockquote>\n\n<pre><code>PerlResponseHandler MyApache2::CurrentTime\n</code></pre>\n\n<blockquote>\n  <p>Since the response handler should be configured for a specific location, let's write a complete configuration section:</p>\n</blockquote>\n\n<pre><code>PerlModule MyApache2::CurrentTime\n&lt;Location /time&gt;\n  SetHandler modperl\n  PerlResponseHandler MyApache2::CurrentTime\n&lt;/Location&gt;\n</code></pre>\n\n<blockquote>\n  <p>Now when a request is issued to <a href=\"http://localhost/time\" rel=\"nofollow noreferrer\">http://localhost/time</a> this response handler is executed and a response that includes the current time is returned to the client.</p>\n</blockquote>\n"}], "owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1686, "favorite_count": 0, "accepted_answer_id": 47496862, "answer_count": 1, "score": 8, "last_activity_date": 1512012844, "creation_date": 1511425717, "last_edit_date": 1511608053, "question_id": 47450767, "link": "https://stackoverflow.com/questions/47450767/how-to-send-a-custom-http-status-code-with-mod-perl", "title": "How to send a custom http status code with mod_perl", "body": "<p>I have written a <strong>CGI</strong> program and I send a status error with the HTTP header to the client. but when I tried to use <strong>mod_perl</strong> it only responds with 200 ok status. How can I send a custom status code?</p>\n\n<p>here is the code when I want to respond with the custom status error :</p>\n\n<pre><code>my $cgi      = new CGI;\nprint $cgi-&gt;header(-type=&gt;\"text/html\", -charset=&gt;'utf-8', -status=&gt;599);\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong> : <br>\nhere is the code :</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\nuse CGI;\nuse SessionManagement;\n\n\nmy $cgi      = new CGI;\nmy $method = $cgi-&gt;param(\"method\");\n\nmy $sessionManagement = new SessionManagement(cgi=&gt;$cgi);\nif($sessionManagement){\n\n  if (defined($method)) {\n    if($method eq \"authentication\") {\n        loginMethod($cgi,$sessionManagement);\n    } elsif ($method eq \"someMethod\"){\n        someMethod($cgi);\n    } else{\n        print $cgi-&gt;header(-type=&gt;\"text/xml\", -charset=&gt;'utf-8');\n        print \"&lt;html&gt;method does not exist&lt;/html&gt;\";\n    }\n\n  } else {\n      print $cgi-&gt;header(-type=&gt;\"text/html\", -charset=&gt;'utf-8' , -status=&gt;599);\n      print \"&lt;html&gt;blah blah&lt;/html&gt;\";\n  }\n\n}else{\n  print $cgi-&gt;header(-type=&gt;\"text/html\", -charset=&gt;'utf-8' , -status=&gt;599);\n  print \"&lt;html&gt;blah blah&lt;/html&gt;\";\n}\n</code></pre>\n\n<h2>-------------------------------------------</h2>\n\n<p><strong>EDIT 2</strong><br></p>\n\n<p>giving some more information:\nwhen I use <code>curl -v 192.168.1.212/mymodperl/test.pl</code> command in shell.<br>\nhere is the response : </p>\n\n<pre><code>* About to connect() to 192.168.1.212 port 80 (#0)\n*   Trying 192.168.1.212... connected\n* Connected to 192.168.1.212 (192.168.1.212) port 80 (#0)\n&gt; GET /mymodperl/test.pl HTTP/1.1\n&gt; User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.15.3 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n&gt; Host: 192.168.1.212\n&gt; Accept: */*\n&gt; \n&lt; HTTP/1.1 200 OK\n&lt; Date: Sat, 25 Nov 2017 11:04:18 GMT\n&lt; Server: Apache/2.2.15 (Red Hat)\n&lt; Connection: close\n&lt; Transfer-Encoding: chunked\n&lt; Content-Type: text/html; charset=ISO-8859-1\n&lt; \n&lt;html&gt;hi&lt;/html&gt;&lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt;\n&lt;html&gt;&lt;head&gt;\n&lt;title&gt;500 Internal Server Error&lt;/title&gt;\n&lt;/head&gt;&lt;body&gt;\n&lt;h1&gt;Internal Server Error&lt;/h1&gt;\n&lt;p&gt;The server encountered an internal error or\nmisconfiguration and was unable to complete\nyour request.&lt;/p&gt;\n&lt;p&gt;Please contact the server administrator,\n root@localhost and inform them of the time the error occurred,\nand anything you might have done that may have\ncaused the error.&lt;/p&gt;\n&lt;p&gt;More information about this error may be available\nin the server error log.&lt;/p&gt;\n&lt;hr&gt;\n&lt;address&gt;Apache/2.2.15 (Red Hat) Server at 192.168.1.212 Port 80&lt;/address&gt;\n&lt;/body&gt;&lt;/html&gt;\n* Closing connection #0\n</code></pre>\n"}]