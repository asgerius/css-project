[{"tags": ["javascript", "perl", "websocket", "mojolicious"], "owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511891526, "creation_date": 1511391178, "last_edit_date": 1511891526, "question_id": 47445079, "link": "https://stackoverflow.com/questions/47445079/websocket-connection-delayed-in-mojolicious", "title": "WebSocket connection delayed in Mojolicious", "body": "<p>I suppose I'm doing something dumb in my Mojolicious WebSocket and there is an easy solution.</p>\n\n<p>I have a form that when POSTed initiates a WebSocket for receiving progress text. The problem is that the connection doesn't complete until after I issue the finish() command. At that point, my browser actually opens the the socket and receives all of the messages.</p>\n\n<p>I assume that I'm doing something wrong on the server-side, but I can't rule out the javascript as the problem.</p>\n\n<p><strong>javascript</strong></p>\n\n<pre><code>$(document).ready(function() {\n  $(\"form.report_form\").submit(function(event) {\n    event.preventDefault();\n\n/* do the POSTy things */\n\n    var ws = new WebSocket($('#progress_url').val());\n    ws.onopen = function(){ alert('websocket is ready for business')};\n    ws.onmessage = function (event) {\n      console.log(event.data);\n    }           \n  });\n\n/* stuff to configure the form */\n\n});\n</code></pre>\n\n<p><strong>Mojolicious Controller</strong></p>\n\n<pre><code>package WebLOC::Controller::Progress;\nuse Mojo::Base 'Mojolicious::Controller';\n\nsub tail {\n    my $self = shift;\n\n    my ($guid)\n        = $self-&gt;url_for\n        =~ /([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12})/;\n\n    my $filename = \"/tmp/$guid.out\";\n\n    my $fh;\n    my $is_open = open( $fh, '&lt;', $filename );\n    unless ($is_open) {    # try one more time\n        sleep 1; \n        $is_open = open( $fh, '&lt;', $filename );\n    }\n\n    if ($is_open) {\n        $self-&gt;inactivity_timeout( 5 * 60 );\n\n        # shouldn't need a subscription, but...\n        $self-&gt;on( finish =&gt; sub { } );\n\n        while ( my $msg = &lt;$fh&gt; ) {\n            chomp $msg;\n\n            $self-&gt;send(\n                $msg =&gt; sub { $self-&gt;app-&gt;log-&gt;debug('I am drained') } );\n\n            $self-&gt;app-&gt;log-&gt;debug(\"read: $msg\");\n        }\n    }\n    else {\n        $self-&gt;app-&gt;log-&gt;error(\"Can't open file $filename: $!\");\n\n        return; \n    }\n\n    $self-&gt;finish;\n\n    return 0;\n}\n\n1;\n</code></pre>\n\n<p><strong>Sample Application</strong></p>\n\n<pre><code>select STDOUT;\n$|=1;\n\nsay \"1 of 3\";\nsleep 3;\nsay \"2 of 3\";\nsleep 3;\nsay \"3 of 3\";\nsleep 3;\nexit;\n</code></pre>\n\n<p><strong>Mojolicious Log</strong></p>\n\n<pre><code>[Wed Nov 22 14:35:31 2017] [debug] GET \"/progress/53898C2E-CFC8-11E7-B15D-BCDD6A63D34C\"\n[Wed Nov 22 14:35:31 2017] [debug] Routing to controller \"WebLOC::Controller::Auth\" and action \"check\"\n[Wed Nov 22 14:35:31 2017] [debug] Routing to controller \"WebLOC::Controller::Progress\" and action \"tail\"\n[Wed Nov 22 14:35:31 2017] [debug] 101 Switching Protocols (0.008343s, 119.861/s)\n[Wed Nov 22 14:35:33 2017] [debug] read: 1 of 3\n[Wed Nov 22 14:35:36 2017] [debug] read: 2 of 3\n[Wed Nov 22 14:35:39 2017] [debug] read: 3 of 3\n[Wed Nov 22 14:35:42 2017] [debug] I am drained\n[Wed Nov 22 14:35:42 2017] [debug] I am drained\n[Wed Nov 22 14:35:42 2017] [debug] I am drained\n</code></pre>\n\n<p>The log shows that the file reads (and WS sends) are happening in real-time, but the sends aren't drained until the end. I can also see that the WebSocket is not showing established(). On the client side, I don't get the onopen alert(), nor the onmessage console logs, until after the connection is closed on the server.</p>\n\n<p><strong>SOLVED</strong>\nThe best I can tell a WebSocket is not ready to be used until after your controller exits. I assume there is a way to force it to work prior to this, but I sure couldn't figure it out.</p>\n\n<p>I changed my design. Rather than trying to immediately send data to the socket, I store the tx() object in a stash hash. I then have the script's output do the the sends to that transaction.</p>\n\n<p><strong>Mojolicious Application</strong></p>\n\n<pre><code>$self-&gt;defaults( layout =&gt; 'default', websockets =&gt; {}, );\n...\n$auth-&gt;websocket('/progress/:guid')-&gt;to('progress#websocket');\n</code></pre>\n\n<p><strong>WebSocket Controller</strong></p>\n\n<pre><code>sub websocket {\n    my $self = shift;\n\n    my $guid = $self-&gt;stash('guid');\n\n    $self-&gt;on( finish =&gt; sub { delete $self-&gt;stash-&gt;{websockets}{$guid} } );\n\n    $self-&gt;stash-&gt;{websockets}{$guid} = $self-&gt;tx;\n}           \n</code></pre>\n\n<p><strong>Report Controller</strong></p>\n\n<pre><code>my $fork = Mojo::IOLoop::ReadWriteFork-&gt;new;\n\n$fork-&gt;on(\n    read =&gt; sub {\n        my ( undef, $msg ) = @_;\n\n        chomp $msg;\n\n        my $websocket = $self-&gt;stash-&gt;{websockets}{$key};\n\n        $websocket-&gt;send($msg) if $websocket;\n    }\n);\n\n$fork-&gt;on(\n    close =&gt; sub {\n        my ( undef, $err ) = @_;\n\n        my $websocket = $self-&gt;stash-&gt;{websockets}{$key};\n\n        $websocket-&gt;finish if $websocket;\n\n    }\n);\n</code></pre>\n"}, {"tags": ["regex", "perl", "substitution"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1511388814, "post_id": 47444658, "comment_id": 81844589, "body": "So what&#39;s @$row at that point in time?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 5, "creation_date": 1511389847, "post_id": 47444658, "comment_id": 81844990, "body": "Some of the columns probably contain NULL."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1511390233, "creation_date": 1511390233, "answer_id": 47444932, "question_id": 47444658, "link": "https://stackoverflow.com/questions/47444658/use-of-uninitialized-value-in-substitution-s/47444932#47444932", "title": "Use of uninitialized value $_ in substitution (s///)", "body": "<p>That means one of the values in <code>@$row</code> is <code>undef</code>, which happens if the column is <code>NULL</code>.</p>\n\n<p>This can be avoided by replacing</p>\n\n<pre><code>s/\\t/ /g for @$row;\nmy $line = join \"\\t\",  map { defined($_) ? $_ : '.' } @$row;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my $line = join \"\\t\",  map { defined($_) ? s/\\t/ /gr : '.' } @$row;   # 5.14+\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub tabs_to_spaces { ( my $s = shift ) =~ s/\\t/ /g; $s }\n\nmy $line = join \"\\t\",  map { defined($_) ? tabs_to_spaces($_) : '.' } @$row;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4129951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08962085be654ca24d0b6c2c0623bd46?s=128&d=identicon&r=PG&f=1", "display_name": "obsi", "link": "https://stackoverflow.com/users/4129951/obsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1013, "favorite_count": 0, "accepted_answer_id": 47444932, "answer_count": 1, "score": 2, "last_activity_date": 1511453394, "creation_date": 1511388696, "last_edit_date": 1511453394, "question_id": 47444658, "link": "https://stackoverflow.com/questions/47444658/use-of-uninitialized-value-in-substitution-s", "title": "Use of uninitialized value $_ in substitution (s///)", "body": "<p>I have a script that runs and downloads some data.\nEverything works fine for around 60 pulls and then suddenly I get the error:</p>\n\n<p>Use of uninitialized value $_ in substitution (s///)</p>\n\n<pre><code>while ( my $row = $ia_applicant_query-&gt;fetchrow_arrayref ) {\n\n    s/\\t/ /g for @$row;    # &lt;------- THIS IS WHAT THE ERROR POINTS TO\n    my $line = join \"\\t\", map { defined $_ ? $_ : '.' } @$row;\n    $mydb-&gt;func( \"$line\\n\", \"putline\" );\n}\n</code></pre>\n\n<p>The error is then just repeated for the remaining 800 pulls.\nAny Idea what could be going wrong?</p>\n"}, {"tags": ["mysql", "sql-server", "perl", "delimiter"], "comments": [{"owner": {"reputation": 15, "user_id": 5109166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc81a4ddf324462d1475fb65dc9753d1?s=128&d=identicon&r=PG&f=1", "display_name": "sahar04", "link": "https://stackoverflow.com/users/5109166/sahar04"}, "edited": false, "score": 0, "creation_date": 1511365868, "post_id": 47438793, "comment_id": 81835822, "body": "Check the syntax near <code>ON [PawnPayments[.[PaymentID] = [PawnPaymentDetails].[PaymentID]</code> and <code>WHERE [PawnPaymentDetails].[TicketID[ = &#39;$TicketID&#39;</code> Why you have open brackets here ?"}, {"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 3, "creation_date": 1511365875, "post_id": 47438793, "comment_id": 81832339, "body": "You are trying SQL-server syntax on a MySQL server. Brackets are SQL-server &#39;s escape method. And dbo is a object that only works in SQL-server... And your code look to be vulnerable to SQL injections"}, {"owner": {"reputation": 14163, "user_id": 6152400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/904d8468fdd073620942741e397706ff?s=128&d=identicon&r=PG&f=1", "display_name": "P.Salmon", "link": "https://stackoverflow.com/users/6152400/p-salmon"}, "edited": false, "score": 0, "creation_date": 1511365902, "post_id": 47438793, "comment_id": 81832357, "body": "Mysql does not have bracket notation it has back tick notation"}, {"owner": {"reputation": 33, "user_id": 7380010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3845c138562ea13c53c34af2b7fa376c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Nash", "link": "https://stackoverflow.com/users/7380010/nick-nash"}, "edited": false, "score": 0, "creation_date": 1511366068, "post_id": 47438793, "comment_id": 81835823, "body": "Thank you for sharing that insight. I completely overlooked that syntax issue. Unfortunately, this didn&#39;t fix the issue."}, {"owner": {"reputation": 33, "user_id": 7380010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3845c138562ea13c53c34af2b7fa376c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Nash", "link": "https://stackoverflow.com/users/7380010/nick-nash"}, "edited": false, "score": 0, "creation_date": 1511366174, "post_id": 47438793, "comment_id": 81832545, "body": "Would that necessitate that I rewrite the query with backticks?"}, {"owner": {"reputation": 14163, "user_id": 6152400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/904d8468fdd073620942741e397706ff?s=128&d=identicon&r=PG&f=1", "display_name": "P.Salmon", "link": "https://stackoverflow.com/users/6152400/p-salmon"}, "edited": false, "score": 3, "creation_date": 1511366206, "post_id": 47438793, "comment_id": 81832580, "body": "Only if you want it to work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1511366661, "post_id": 47438793, "comment_id": 81832902, "body": "Your error message clearly says MySQL. So whereever you think there is an MSSQL server involved, you are not talking to it. Also, don&#39;t put variables into your SQL. Use DBI&#39;s placeholders instead."}, {"owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 0, "creation_date": 1511366918, "post_id": 47438793, "comment_id": 81833092, "body": "See also <a href=\"https://stackoverflow.com/questions/9719869/what-is-the-difference-between-the-backtick-and-the-square-bracket-in-sql-statem\" title=\"what is the difference between the backtick and the square bracket in sql statem\">stackoverflow.com/questions/9719869/&hellip;</a>"}, {"owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 1, "creation_date": 1511366994, "post_id": 47438793, "comment_id": 81833151, "body": "If the 3rd party software you are using only supports Microsoft SQL Server, and can&#39;t be configured to use standard identifier delimiters (like with <a href=\"https://docs.microsoft.com/en-us/sql/t-sql/statements/set-quoted-identifier-transact-sql\" rel=\"nofollow noreferrer\">SET QUOTED IDENTIFIER</a>), then you can&#39;t use it with MySQL."}, {"owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 3, "creation_date": 1511367213, "post_id": 47438793, "comment_id": 81833299, "body": "Also I see your query has another Microsoft SQL Server feature: <code>[PawnSafeDBCE].[dbo].[PawnPayments]</code> uses the <code>Database.Schema.Table</code> notation (see <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/ownership-and-user-schema-separation-in-sql-server\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/&hellip;</a>)&zwnj;&#8203;, but MySQL doesn&#39;t support that. MySQL only supports <code>schema.table</code>. So your query won&#39;t work on MySQL even if you fix the square brackets."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1511367228, "last_edit_date": 1511367228, "creation_date": 1511366774, "answer_id": 47439152, "question_id": 47438793, "link": "https://stackoverflow.com/questions/47438793/sql-syntax-error-has-occurred/47439152#47439152", "title": "SQL syntax error has occurred", "body": "<p>You say you are querying a MS SQL database, but the error message clearly says you are using a MySQL database or a MySQL database driver.</p>\n\n<p>If you are querying a MS SQL database, fix your connection string.</p>\n\n<p>If you are querying a MySQL database, use a MySQL-compatible query. MySQL uses backticks to quote identifiers (not square brackets like MS SQL).</p>\n\n<pre><code>[PawnPayments].[CreationTimeDate]\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>`PawnPayments`.`CreationTimeDate`\n</code></pre>\n\n<hr>\n\n<p>Note that your code suffers from injection bugs due to incorrect quoting of value inserted into the SQL query. (It's not good enough just to put quotes around the values!) These can cause your code to fail, and they could make you vulnerable to injection attacks. Fix the quoting, or use replaceable parameters.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 7380010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3845c138562ea13c53c34af2b7fa376c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Nash", "link": "https://stackoverflow.com/users/7380010/nick-nash"}, "edited": false, "score": 0, "creation_date": 1511366987, "post_id": 47439163, "comment_id": 81833144, "body": "Thank you for informing me about the potential injection attacks. I have never been exposed to this information. I will try this method now."}, {"owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 1, "creation_date": 1511367343, "post_id": 47439163, "comment_id": 81833380, "body": "The <code>Database.Schema.Table</code> syntax is not supported by MySQL either."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 0, "creation_date": 1511367651, "post_id": 47439163, "comment_id": 81833609, "body": "@BillKarwin: Good point. I&#39;ve updated my answer. I think the OP is rather confused!"}, {"owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 0, "creation_date": 1511367980, "post_id": 47439163, "comment_id": 81833848, "body": "I think they&#39;re just using a Perl app that is clearly designed for Microsoft SQL Server, and they&#39;re trying to use it with MySQL."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1511367621, "last_edit_date": 1511367621, "creation_date": 1511366808, "answer_id": 47439163, "question_id": 47438793, "link": "https://stackoverflow.com/questions/47438793/sql-syntax-error-has-occurred/47439163#47439163", "title": "SQL syntax error has occurred", "body": "<p>I don't know why you have all those square brackets around your table and column names, but they aren't necessary and they aren't standard SQL. That's what is causing your syntax error.</p>\n\n<pre><code>my $SQLp = \"SELECT MAX(PawnPayments.CreationTimeDate) as MaxTransDate\n            FROM PawnSafeDBCE.dbo.PawnPayments\n            INNER JOIN PawnSafeDBCE.dbo.PawnPaymentDetails\n            ON PawnPayments.PaymentID = PawnPaymentDetails.PaymentID\n            WHERE PawnPaymentDetails.TicketID = '$TicketID'\n            AND PawnPaymentDetails.StoreID ='$StoreID'\";\n</code></pre>\n\n<p>I'll also add that having variables interpolated in your SQL statement like that is potentially leaving you open to <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">SQL injection attacks</a>. Far better to use bind points in your SQL and use extra arguments to <code>execute</code> to fill in the values (assuming you're using DBI).</p>\n\n<pre><code>my $SQLp = \"SELECT MAX(PawnPayments.CreationTimeDate) as MaxTransDate\n            FROM PawnSafeDBCE.dbo.PawnPayments\n            INNER JOIN PawnSafeDBCE.dbo.PawnPaymentDetails\n            ON PawnPayments.PaymentID = PawnPaymentDetails.PaymentID\n            WHERE PawnPaymentDetails.TicketID = ?\n            AND PawnPaymentDetails.StoreID = ?\";\n\nmy $sth = $dbh-&gt;prepare($SQLp);\n$sth-&gt;execute($TicketID, $StoreID);\n</code></pre>\n\n<p><strong>Update:</strong> As <a href=\"https://stackoverflow.com/users/20860/bill-karwin\">Bill Karwin</a> points out in a comment, the <code>database.schema.table</code> syntax makes no sense in a MySQL database. So I think you're a little confused. The error message you are getting definitely mentions MySQL, so you're connecting to a MySQL server, using DBD::MySQL - but perhaps you should be connecting to an MSSQL server instead.</p>\n\n<p>It might be useful if you showed us your database connection code - the call that sets up your <code>$dbh</code> (or equivalent) variable.</p>\n"}], "owner": {"reputation": 33, "user_id": 7380010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3845c138562ea13c53c34af2b7fa376c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Nash", "link": "https://stackoverflow.com/users/7380010/nick-nash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1511368483, "creation_date": 1511365660, "last_edit_date": 1511368483, "question_id": 47438793, "link": "https://stackoverflow.com/questions/47438793/sql-syntax-error-has-occurred", "title": "SQL syntax error has occurred", "body": "<p>Here is my simple query: </p>\n\n<pre><code>          my $SQLp = \"SELECT MAX([PawnPayments].[CreationTimeDate]) as MaxTransDate\n                FROM [PawnSafeDBCE].[dbo].[PawnPayments]\n                INNER JOIN [PawnSafeDBCE].[dbo].[PawnPaymentDetails]\n                ON [PawnPayments[.[PaymentID] = [PawnPaymentDetails].[PaymentID]\n                WHERE [PawnPaymentDetails].[TicketID[ = '$TicketID'\n                AND [PawnPaymentDetails].[StoreID] ='$StoreID'\n</code></pre>\n\n<p>Note that query is written on Perl engine. I keep receiving an error that says:</p>\n\n<p>\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[PawnPayments].[CreationTimeDate]) as MaxTransDate:\"</p>\n\n<p>I believe the error has to do with the bracket notation, but unfortunately, I am having to use this style due to a poorly constructed 3rd party table. Any help? Am I missing something obvious?</p>\n\n<p>Huge EDIT: The table I am querying is actually on a SQL server, not a MySQL server! My database runs on the MySQL server, but this 3rd party database runs on an older version of Microsoft SQL.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511362796, "post_id": 47437783, "comment_id": 81829973, "body": "What&#39;s your question?"}, {"owner": {"reputation": 56, "user_id": 2336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c072e048a831acd3da58c21a071aa6d9?s=128&d=identicon&r=PG", "display_name": "Goffredo Bosco", "link": "https://stackoverflow.com/users/2336392/goffredo-bosco"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511364224, "post_id": 47437783, "comment_id": 81831095, "body": "It&#39;s written there. How do you insert the keys?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1511363915, "creation_date": 1511363915, "answer_id": 47438217, "question_id": 47437783, "link": "https://stackoverflow.com/questions/47437783/enter-a-value-into-a-nested-hash-from-a-sequence-of-keys/47438217#47438217", "title": "Enter a value into a nested hash from a sequence of keys", "body": "<p>Is this what you mean?</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @keys = qw/ a b c /;\nmy $val = 99;\n\nmy $hash = { };\n\n{\n    my $h = $hash;\n\n    $h = $h-&gt;{ shift @keys } = {} while @keys &gt; 1;\n\n    $h-&gt;{ shift @keys } = $val;\n}\n\nuse Data::Dumper;\nprint Dumper $hash;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; {\n                   'b' =&gt; {\n                            'c' =&gt; 99\n                          }\n                 }\n        };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1511364465, "creation_date": 1511364465, "answer_id": 47438391, "question_id": 47437783, "link": "https://stackoverflow.com/questions/47437783/enter-a-value-into-a-nested-hash-from-a-sequence-of-keys/47438391#47438391", "title": "Enter a value into a nested hash from a sequence of keys", "body": "<pre><code>use Data::Diver qw( DiveVal );\n\nDiveVal($hash, map \\$_, $key1, @array) = $value;\n  -or-\nDiveVal($hash-&gt;{$key1}, map \\$_, @array) = $value;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub dive_val :lvalue { my $p = \\shift; $p = \\( $$p-&gt;{$_} ) for @_; $$p }\n\ndive_val($hash, $key1, @array) = $value;\n  -or-\ndive_val($hash-&gt;{$key1}, @array) = $value;\n</code></pre>\n"}], "owner": {"reputation": 56, "user_id": 2336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c072e048a831acd3da58c21a071aa6d9?s=128&d=identicon&r=PG", "display_name": "Goffredo Bosco", "link": "https://stackoverflow.com/users/2336392/goffredo-bosco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "closed_date": 1511364660, "answer_count": 2, "score": -1, "last_activity_date": 1511367713, "creation_date": 1511362722, "last_edit_date": 1511367713, "question_id": 47437783, "link": "https://stackoverflow.com/questions/47437783/enter-a-value-into-a-nested-hash-from-a-sequence-of-keys", "closed_reason": "Duplicate", "title": "Enter a value into a nested hash from a sequence of keys", "body": "<p>I have a set of keys stored in an array that I would like to splice into a nested hash. For example I might have:</p>\n\n<pre><code>$hash-&gt;{$key1} = $value;\n</code></pre>\n\n<p>And what I would like to do is add in additional dimensions to the hash, eg:</p>\n\n<pre><code>my @array = ( $key2, $key3 ) ;\n</code></pre>\n\n<p>to give</p>\n\n<pre><code>$hash-&gt;{$key1}-&gt;{$key2}-&gt;{$key3} = $value;\n</code></pre>\n\n<p>I do not know beforehand how many keys will be in the array.</p>\n"}, {"tags": ["perl", "hash", "base58"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511355384, "post_id": 47435250, "comment_id": 81824665, "body": "Where is the <code>decodebase58tohex</code>function from? Some module from CPAN? Or did you write that yourself? The error message is pretty clear. Your input is flawed."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511355506, "post_id": 47435250, "comment_id": 81824761, "body": "A bit of googling found me <a href=\"http://lenschulwitz.com/b58/base58perl.txt\" rel=\"nofollow noreferrer\">lenschulwitz.com/b58/base58perl.txt</a>, which implements a function with that name."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511355577, "post_id": 47435250, "comment_id": 81824804, "body": "Please <a href=\"https://stackoverflow.com/posts/47435250/edit\">edit</a> and include the content of <i>base58.txt</i> in your question."}, {"owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511355609, "post_id": 47435250, "comment_id": 81824837, "body": "@simbabque the code originally came from <a href=\"http://lenschulwitz.com/b58/base58perl.txt\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511355999, "post_id": 47435250, "comment_id": 81825104, "body": "Works for me. I was going to say you have to <code>chomp</code>, but I don&#39;t get the error message with a direct copy of your code, only adapted to read from <code>DATA</code>. Are you sure you provided the real data? The error message is from the 3rd line of <code>unbase58</code>. Just try adding <code>chomp $base58_encoded_address;</code> as the first line in the loop."}, {"owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511356758, "post_id": 47435250, "comment_id": 81825634, "body": "yes I just replace the bottom part to accept the base58.txt It&#39;s weird it&#39;s not working in my terminal."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511356903, "post_id": 47435250, "comment_id": 81825756, "body": "Did you try to add <code>chomp</code>?"}, {"owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511357062, "post_id": 47435250, "comment_id": 81825885, "body": "yeah but it but it returned compilation errors."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511357120, "post_id": 47435250, "comment_id": 81825937, "body": "Looks like you are not user to writing Perl code. Update the question please."}, {"owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511357231, "post_id": 47435250, "comment_id": 81825997, "body": "yeah it&#39;s my first time in Perl. I just needed to convert a bunch of base58 address that&#39;s why I bumped into this Perl code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511357290, "post_id": 47435250, "comment_id": 81826043, "body": "Well you did a good job of reading and writing files. Googled the right stuff I guess. ;-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511358605, "post_id": 47435250, "comment_id": 81826944, "body": "Nope. That&#39;s not what we do here. Sorry."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511360681, "post_id": 47435250, "comment_id": 81828375, "body": "Your Perl code is <i>not</i> what you are running: there is no <code>decodebase58tohex</code> defined and the program will simply die, without producing the output that you say it does, saying <code>Undefined subroutine &amp;main::decodebase58tohex called</code>. Furthermore, <i>Stack Overflow</i> is a site for professionals and accomplished hobbyists to ask for peer help with a specific programming problem. It isn&#39;t the best place for someone who has no idea what they&#39;re doing to get their work done for free, or to find a tutorial."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "edited": false, "score": 0, "creation_date": 1511360446, "post_id": 47436447, "comment_id": 81828213, "body": "Yes I included <code>chomp</code> yet it return the same error."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "edited": false, "score": 0, "creation_date": 1511360711, "post_id": 47436447, "comment_id": 81828398, "body": "@Quin Then your data contains something else. Is the file from a different operating system? Maybe it has Windows line endings, and you&#39;re on Linux? Copy/paste it manually into a new file file with a graphical editor. That often helps to fix line endings."}, {"owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "edited": false, "score": 0, "creation_date": 1511360831, "post_id": 47436447, "comment_id": 81828481, "body": "Will try to install Perl on Windows and check if it will return some good results."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "edited": false, "score": 0, "creation_date": 1511360867, "post_id": 47436447, "comment_id": 81828512, "body": "@QuinNoaj that&#39;s an aweful lot of work just for that. Instead, just see if you can covert the line endings."}, {"owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "edited": false, "score": 0, "creation_date": 1511362315, "post_id": 47436447, "comment_id": 81829593, "body": "sorry but what is line endings? I tried to run the script in cmd and I got a different error <code>Can&#39;t locate object method &quot;say&quot;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "edited": false, "score": 0, "creation_date": 1511362915, "post_id": 47436447, "comment_id": 81830072, "body": "@QuinNoaj you are clearly not familiar with how programming works. The first step after you get an error message that you do not understand is always to put that error message into Google. In your case, you will be pointed towards the Perl documentation for <code>say</code>, <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/say.html</a>. It will tell you what <code>say</code> does, and why you see that error message."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1511358793, "creation_date": 1511358793, "answer_id": 47436447, "question_id": 47435250, "link": "https://stackoverflow.com/questions/47435250/cannot-decode-invalid-base58-characters/47436447#47436447", "title": "Cannot decode! Invalid Base58 Character(s)!", "body": "<p>That error message comes from the <code>unbase58</code> function in the code you have linked.</p>\n\n<blockquote>\n<pre><code>die \"Cannot Decode! Invalid Base58 Character(s)!\\n\" unless $bitcoin_address =~ /^[1-9A-HJ-NP-Za-km-z]*$/;\n</code></pre>\n</blockquote>\n\n<p>That line checks if the input contains only characters of the character group <code>[1-9A-HJ-NP-Za-km-z]</code>. Since your input does, it must dislike something else.</p>\n\n<p>My guess is that it disliked the newline characters at the end of your lines. You need to <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code></a> them off before passing the value to <code>decodebase58tohex</code>.</p>\n\n<pre><code>while( my $base58_encoded_address = &lt;$fhSrc&gt;)  {   \n    chomp $base58_encoded_address;\n    my $binary_address = decodebase58tohex($base58_encoded_address);\n    say $fhDest $binary_address;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "edited": false, "score": 0, "creation_date": 1511365017, "post_id": 47438175, "comment_id": 81831712, "body": "Thanks this kinda worked (no error) but throws a single same hex output though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "edited": false, "score": 0, "creation_date": 1511365085, "post_id": 47438175, "comment_id": 81831761, "body": "Same output as what? Are you implying you think that output is wrong? Is that a question? I see you still haven&#39;t fixed your question to provide a minimal, runnable demonstration of the problem (See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511454030, "post_id": 47438175, "comment_id": 81874037, "body": "Each line in that file represents one record, and they want to convert each record separately I believe."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1511363785, "creation_date": 1511363785, "answer_id": 47438175, "question_id": 47435250, "link": "https://stackoverflow.com/questions/47435250/cannot-decode-invalid-base58-characters/47438175#47438175", "title": "Cannot decode! Invalid Base58 Character(s)!", "body": "<p>You probably need to remove whitespace. You appear to be passing only chunks of the string to the decode function at a time, which could also be a problem. Read the whole file into a var, remove any whitespace, then decode.</p>\n\n<pre><code>my $base58_encoded_address = do { local $/; &lt;$fhSrc&gt; };\n$base58_encoded_address =~ s/\\s+//g;\nmy $binary_address = decodebase58tohex($base58_encoded_address);\nsay $fhDest $binary_address;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1511766739, "last_edit_date": 1511766739, "creation_date": 1511438187, "answer_id": 47455003, "question_id": 47435250, "link": "https://stackoverflow.com/questions/47435250/cannot-decode-invalid-base58-characters/47455003#47455003", "title": "Cannot decode! Invalid Base58 Character(s)!", "body": "<p>The script is now working properly, the problem was the <code>base58.txt</code> the file was created using notepad. I created a new file using a different text editor. </p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 5023361, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MaXl4rZx29w/AAAAAAAAAAI/AAAAAAAAC20/p87flpEWEoo/photo.jpg?sz=128", "display_name": "Jacob Jarick", "link": "https://stackoverflow.com/users/5023361/jacob-jarick"}, "is_accepted": false, "score": 0, "last_activity_date": 1511500704, "creation_date": 1511500704, "answer_id": 47466780, "question_id": 47435250, "link": "https://stackoverflow.com/questions/47435250/cannot-decode-invalid-base58-characters/47466780#47466780", "title": "Cannot decode! Invalid Base58 Character(s)!", "body": "<pre><code>my $fileSrc = 'base58.txt';\nopen my $fhSrc, $fileSrc or die \"Could not open $fileSrc: $!\";\n\nmy $fileDest = 'hex.txt';\nopen( my $fhDest, '&gt;&gt;', $fileDest) or die \"Could not open file $fileDest: $!\";\n\nmy @tmp = &lt;$fhSrc&gt;;\nchomp @tmp;\nfor my $line (@tmp)  {   \n    print \"decoding '$line'\\n\";\n    my $binary_address = decodebase58tohex($line);\n    say $fhDest $binary_address;\n}\n\nclose $fhSrc;\nclose $fhDest;\n</code></pre>\n\n<p>As someone else mentioned I think your dealing with whitespaces.\nchomp will take care of that for you.</p>\n\n<p>The next thing to do is print the string you are trying to decode in quotes which will confirm your only decoding what you want to.</p>\n"}], "owner": {"reputation": 49, "user_id": 8904531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvpJE.jpg?s=128&g=1", "display_name": "Quin Noaj", "link": "https://stackoverflow.com/users/8904531/quin-noaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1547, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1511766739, "creation_date": 1511355130, "last_edit_date": 1511361056, "question_id": 47435250, "link": "https://stackoverflow.com/questions/47435250/cannot-decode-invalid-base58-characters", "title": "Cannot decode! Invalid Base58 Character(s)!", "body": "\n\n<p>I am trying to run\n<a href=\"http://lenschulwitz.com/b58/base58perl.txt\" rel=\"nofollow noreferrer\"><code>base58perl.pl</code></a>\nin my terminal using the following command:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl base58perl.pl\n</code></pre>\n\n<p>but I get the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Cannot decode! Invalid Base58 Character(s)!\n</code></pre>\n\n<p>Here's the code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $fileSrc = 'base58.txt';\nopen my $fhSrc, $fileSrc or die \"Could not open $fileSrc: $!\";\n\nmy $fileDest = 'hex.txt';\nopen( my $fhDest, '&gt;&gt;', $fileDest) or die \"Could not open file $fileDest: $!\";\n\nwhile ( my $base58_encoded_address = &lt;$fhSrc &gt;)  {   \n    my $binary_address = decodebase58tohex($base58_encoded_address);\n    say $fhDest $binary_address;\n}\n\nclose $fhSrc;\nclose $fhDest;\n</code></pre>\n\n<p>The content of <code>base58.txt</code> is a list of BTC address in base58 form.</p>\n\n<p>I also have tried</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>chmod a+x base58perl.pl\nperl base58perl.pl\n</code></pre>\n\n<p>base58.txt contents:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1E5PBfSaFawBy1RjBHkS6FDtCwXkYSsVTo\n1DCgptTS2uY2occbVdW1qcVT72T75RXbyg\n1CUNEBjYrCn2y1SdiUMohaKUi4wpP326Lb \n</code></pre>\n\n<p>I still get the same error.</p>\n"}, {"tags": ["c#", "regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1511342726, "post_id": 47430907, "comment_id": 81816298, "body": "Well, in Perl you <i>matched and captured</i>  <code>a</code>, and then printed it. In C#, you replaced <code>a</code> with <code>a</code> and certainly got <code>apple</code> unchanged."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 2, "creation_date": 1511345782, "post_id": 47430907, "comment_id": 81818305, "body": "Related info: In this particular example, you&#39;re not performing the same operation with both languages, so you get different results. But in broader terms, you may expect differences between different regex engines. Most regex features overlap between .NET and Perl, but each of these <i>flavors</i> also has its own features (ie Perl has recursion, .NET has variable-length lookbehind). See <a href=\"https://www.regular-expressions.info/reference.html\" rel=\"nofollow noreferrer\">here</a> for a comparison between regex flavors. If you need something that mimics the Perl flavor in .NET, see my profile."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 8987851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ed2ddd9d1c42d8459a16da257765fc?s=128&d=identicon&r=PG&f=1", "display_name": "progr", "link": "https://stackoverflow.com/users/8987851/progr"}, "edited": false, "score": 1, "creation_date": 1511357862, "post_id": 47430981, "comment_id": 81826421, "body": "Your answer was very helpful. Thanks a lot."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511363973, "post_id": 47430981, "comment_id": 81830895, "body": "Conversely, the Perl equivalent of the OP&#39;s C# code is <code>my $word = &quot;apple&quot; =~ s&#47;(?&lt;C&gt;a(?=pple)|b(?=anana)|c(?=herry))&#47;$+{C}&#47;gr;</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511364100, "post_id": 47430981, "comment_id": 81830992, "body": "@ikegami Yes, I also thought about adding a similar comment, just I see this sort of pointless to replace a value with itself :)."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 8, "last_activity_date": 1511342867, "creation_date": 1511342867, "answer_id": 47430981, "question_id": 47430907, "link": "https://stackoverflow.com/questions/47430907/why-c-and-perls-regex-result-is-different/47430981#47430981", "title": "Why C# and Perl&#39;s regex result is different?", "body": "<p>In Perl, you matched and captured the first <code>a</code> followed with <code>pple</code> into Group \"C\", and then printed it. In C#, you replaced <code>a</code> followed with <code>pple</code> with <code>a</code> and got <code>apple</code> unchanged as a result.</p>\n\n<p>Use matching instead:</p>\n\n<pre><code>var m = Regex.Match(\"apple\", \"(?&lt;C&gt;a(?=pple)|b(?=anana)|c(?=herry))\");\nif (m.Success)\n{\n    Console.WriteLine(\"fruit\\'s initial: {0}\", m.Groups[\"C\"].Value);\n}\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/uDjcap\" rel=\"noreferrer\">C# demo</a>.</p>\n\n<p>Here, the regex match is assigned to the <code>m</code> variable. If the match occurs (<code>if (m.Success)</code>), you may get Group \"C\" value using <code>m.Groups[\"C\"].Value</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 8987851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ed2ddd9d1c42d8459a16da257765fc?s=128&d=identicon&r=PG&f=1", "display_name": "progr", "link": "https://stackoverflow.com/users/8987851/progr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 47430981, "answer_count": 1, "score": 2, "last_activity_date": 1511346447, "creation_date": 1511342603, "last_edit_date": 1511343436, "question_id": 47430907, "link": "https://stackoverflow.com/questions/47430907/why-c-and-perls-regex-result-is-different", "title": "Why C# and Perl&#39;s regex result is different?", "body": "<p>Following C# code is I recreated perl code to C#.\nIt was same regex but its result is different.\nPerl code was captured \"a\" but C# code was captured \"apple\".\nWhat makes it different?</p>\n\n<p>C# code</p>\n\n<pre><code>string word = Regex.Replace(\"apple\", \"(?&lt;C&gt;a(?=pple)|b(?=anana)|c(?=herry))\", \"${C}\");\n\nConsole.WriteLine(\"fruit\\'s initial: {0}\", word); // result: \"fruit's initial: apple\"\n</code></pre>\n\n<p>Perl code</p>\n\n<pre><code>my $word = 'apple';\n\nif ($word =~ /(?&lt;C&gt;a(?=pple)|b(?=anana)|c(?=herry))/) {\nprint \"fruit\\'s initial: $+{C}\"; // result: \"fruit's initial: a\"\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511362676, "post_id": 47429278, "comment_id": 81829863, "body": "Please lay out your code properly so that it is readable"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8986603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034d1b5ecfcca49de513c0167f91a8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shivaram", "link": "https://stackoverflow.com/users/8986603/shivaram"}, "edited": false, "score": 0, "creation_date": 1511349954, "post_id": 47430033, "comment_id": 81821152, "body": "hi, it is already there, but still same, maybe be because of this find it include work directory too:$arc-&gt;add_files( $File::Find::name );"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 11, "user_id": 8986603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034d1b5ecfcca49de513c0167f91a8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shivaram", "link": "https://stackoverflow.com/users/8986603/shivaram"}, "edited": false, "score": 0, "creation_date": 1511359208, "post_id": 47430033, "comment_id": 81827386, "body": "What&#39;s the content of @tgzfiles?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 11, "user_id": 8986603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034d1b5ecfcca49de513c0167f91a8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shivaram", "link": "https://stackoverflow.com/users/8986603/shivaram"}, "edited": false, "score": 1, "creation_date": 1511361796, "post_id": 47430033, "comment_id": 81829211, "body": "Check the update. I had to guess a lot, next time please try to provide all the details."}, {"owner": {"reputation": 11, "user_id": 8986603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034d1b5ecfcca49de513c0167f91a8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shivaram", "link": "https://stackoverflow.com/users/8986603/shivaram"}, "edited": false, "score": 0, "creation_date": 1511458003, "post_id": 47430033, "comment_id": 81876137, "body": "Thank you, yes it is working, thanks for the find wanted.., sorry this is my first post and I tried to copy entire code, but somehow it was taking only this much."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1511361768, "last_edit_date": 1511361768, "creation_date": 1511339641, "answer_id": 47430033, "question_id": 47429278, "link": "https://stackoverflow.com/questions/47429278/perl-archivetar-how-to-exclude-root-directory/47430033#47430033", "title": "Perl Archive::Tar how to exclude root directory", "body": "<p>The following works for me. The initial <code>test.tgz</code> is located in the home folder.</p>\n\n<p>I used <a href=\"http://p3rl.org/chdir\" rel=\"nofollow noreferrer\">chdir</a> to switch to the working directory, but then I needed to provide the <code>no_chdir</code> option to the <code>wanted</code> function to prevent changing the directory into the subdirectories.</p>\n\n<p>Also, I guess the $tgzfolder should be the path to the extracted files, so it should be extracted from the archive contents, not from its name.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Archive::Tar;\nuse File::Find;\n\nmy @tgzfiles = \"$ENV{HOME}/test.tgz\";\n\nchdir 'd:/work';\n\nmy $tar = 'Archive::Tar'-&gt;new;\n$tar-&gt;read($tgzfiles[0]);\n$tar-&gt;extract;\n\n# Modify the contents.\n\nmy $tgzfolder = ($tar-&gt;list_files)[0];\n\nmy $arc = 'Archive::Tar'-&gt;new;\nfind({wanted   =&gt; sub { $arc-&gt;add_files($File::Find::name) },\n      no_chdir =&gt; 1},\n     $tgzfolder );\n$arc-&gt;write($tgzfiles[0], 9);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8986603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034d1b5ecfcca49de513c0167f91a8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shivaram", "link": "https://stackoverflow.com/users/8986603/shivaram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 47430033, "answer_count": 1, "score": 0, "last_activity_date": 1511361768, "creation_date": 1511336741, "last_edit_date": 1511338070, "question_id": 47429278, "link": "https://stackoverflow.com/questions/47429278/perl-archivetar-how-to-exclude-root-directory", "title": "Perl Archive::Tar how to exclude root directory", "body": "<p>I need to extract <code>.tgz</code> file ( contains directory tree/files) in <code>d:\\work</code> directory , make some changes and repack it again. \nThe extracted folder will be like <code>D:\\work\\123a\\...</code> ( so th <code>.tgz</code> contains folder <code>123a</code> and many <em>subfolders\\files</em>.\nNow I tried to use <code>Archive::Tar</code> and pack recursively, but the problem is \"work\" folder is also compressed.  - So it will be <code>\\work\\123a\\...</code>\nHow to exclude this \"work\" folder (cwd or root dir).\nAny help is appreciated. \nmy code:</p>\n\n<pre><code>my $tar = Archive::Tar-&gt;new;        \n    $tar-&gt;read(\"$tgzfiles[0]\");\n    $tar-&gt;extract();\n    (my $tgzfolder = $tgzfiles[0]) =~ s/\\.[^.]+$//;       \n\n       # Here I make some changes in content{.....}\n\n    our $arc = Archive::Tar-&gt;new();\n    find( \\&amp;archiveit, \"d:/work/$tgzfolder\" );\n    $arc-&gt;write(\"$tgzfiles[0]\", 9);\n\n\n    sub archiveit {\n             $arc-&gt;add_files( $File::Find::name );\n\n    }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1511339356, "post_id": 47428755, "comment_id": 81814341, "body": "I would recommend that you use a LaTeX parser. See for example <a href=\"https://metacpan.org/pod/LaTeX::TOM\" rel=\"nofollow noreferrer\">LaTeX::TOM</a>. Another option is to use <a href=\"https://docs.perl6.org/language/grammar_tutorial\" rel=\"nofollow noreferrer\">Perl 6 grammars</a>."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511358626, "post_id": 47428755, "comment_id": 81826962, "body": "@H&#229;konH&#230;gland: I need to install perl 6?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511359875, "post_id": 47428755, "comment_id": 81827818, "body": "@ssr1012 no, as he said, you can use Latex::TOM see his comment for a link to the module, with examples."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511359982, "post_id": 47428755, "comment_id": 81827869, "body": "@GerhardBarnard: Ok great. We will check."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511360108, "post_id": 47428755, "comment_id": 81827960, "body": "@ssr1012 Cool, I hope you manage! PS! I hope by <i>&quot;we&quot;</i> you are not referring to multiple personalities :)"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511418161, "post_id": 47428755, "comment_id": 81852565, "body": "@GerhardBarnard: Ok I will check..."}], "answers": [{"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 1, "last_activity_date": 1511426838, "creation_date": 1511426838, "answer_id": 47451074, "question_id": 47428755, "link": "https://stackoverflow.com/questions/47428755/how-to-use-pre-and-post-check-in-perl/47451074#47451074", "title": "How to use pre and post check in Perl?", "body": "<p><a href=\"https://metacpan.org/release/Pegex\" rel=\"nofollow noreferrer\">Pegex</a> is very useful if you are considering using a grammars. It gives Perl5 a good chunk of the basic Perl6 style grammar parsing. Pegex is an excellent and under-used module.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1511426838, "creation_date": 1511334541, "last_edit_date": 1511334596, "question_id": 47428755, "link": "https://stackoverflow.com/questions/47428755/how-to-use-pre-and-post-check-in-perl", "title": "How to use pre and post check in Perl?", "body": "<p>We have a <code>*.Tex</code> file contains lot of tables and have a keyword inside the table and which we have to fetch the tables having keyword.</p>\n\n<p>For Keyword Eg: <code>\\\\tobesplit</code></p>\n\n<p>Input File: </p>\n\n<pre><code>\\begin{table1} ....\\body1 .... \\tbody1 .... \\end{table1}\nsome text ... \n\\begin{table2} .... \\body2 .... \\\\tobesplit ... \\tbody2... \\end{table2}\nsome text ...\n\\begin{table3} ....\\body3... \\tbody3... \\end{table3}\nsome text ...\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>my ($tpre,$tmatchs,$tposts) = \"\";\nwhile($incnt=~m/\\\\tobesplit/gs)\n{\n    $tpre = $tpre.$`; $tmatchs = $&amp;; $tposts = $';\n    print \"hi...\\n\";\n    my ($headers,$footers) = \"\";\n</code></pre>\n\n<blockquote>\n  <p>Here we need to get the pre-content of table 2 from starting</p>\n</blockquote>\n\n<pre><code>    if($tpre=~m/(?&lt;!.*\\\\begin\\{table)\\\\body\\d+/g) {  $headers = $&amp;; }\n</code></pre>\n\n<blockquote>\n  <p>Here we need to get the post-content of table 2 to ending</p>\n</blockquote>\n\n<pre><code>    if($tposts=~m/\\\\tbody(.*?)\\\\end\\{table\\d+\\}/i) {  $footers = $&amp;; }\n    print \"-$headers-\\n\";\n    print \"-$footers-\\n\";\n}\n</code></pre>\n\n<blockquote>\n  <p>Note: table123 with numbers for identification purpose only...</p>\n</blockquote>\n\n<p>I don't how to use pre and post using lookbehind and lookafter functions in perl. Could you please someone help me on this one.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["regex", "perl", "split"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1511314271, "post_id": 47425412, "comment_id": 81805823, "body": "The input format is called CSV, and you should use one of the existing CSV parsing packages, which handle all those details for you."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 3, "creation_date": 1511314471, "post_id": 47425412, "comment_id": 81805859, "body": "Please <a href=\"https://stackoverflow.com/posts/47425412/edit\">edit</a> your question title to something more meaningful. Perl and regex are both available in the tags, so they&#39;re redundant and useless. That leaves <i>assistance please</i>, which is also useless - it&#39;s clear you need assistance, or you wouldn&#39;t be posting a question here. Your title should be descriptive enough to be of use to future readers here who see it in a list of search results."}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1511317584, "post_id": 47425412, "comment_id": 81806570, "body": "You have a classic <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1511326229, "post_id": 47425412, "comment_id": 81808586, "body": "Don&#39;t reinvent the wheel. Don&#39;t ask us to reinvent the wheel; that makes even less sense. Use Text::CSV_XS"}, {"owner": {"reputation": 32, "user_id": 8032186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210751165352860/picture?type=large", "display_name": "Billy Patton", "link": "https://stackoverflow.com/users/8032186/billy-patton"}, "edited": false, "score": 0, "creation_date": 1511816810, "post_id": 47425412, "comment_id": 81995953, "body": "I tried the Text::CSV for 1 file it took just over 30 seconds.  The same function that I have working with the search/sub takes just over 1.5 seconds.  I have to process @ 5,000 of these files per day.  That would put me at @ 41 hours to do 1 days files, That would put me at lease 1 day behind for every day."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1511340887, "creation_date": 1511340887, "answer_id": 47430379, "question_id": 47425412, "link": "https://stackoverflow.com/questions/47425412/perl-regular-expressions-assistance-please/47430379#47430379", "title": "perl regular expressions assistance please", "body": "<p>You want <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> (or, if installing CPAN modules is a problem for you, the core module <a href=\"https://metacpan.org/pod/Text::ParseWords\" rel=\"nofollow noreferrer\">Text::ParseWords</a> will fo pretty much the same thing).</p>\n"}], "owner": {"reputation": 32, "user_id": 8032186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210751165352860/picture?type=large", "display_name": "Billy Patton", "link": "https://stackoverflow.com/users/8032186/billy-patton"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1511350683, "answer_count": 1, "score": -7, "last_activity_date": 1511340887, "creation_date": 1511314020, "last_edit_date": 1511314237, "question_id": 47425412, "link": "https://stackoverflow.com/questions/47425412/perl-regular-expressions-assistance-please", "closed_reason": "Duplicate", "title": "perl regular expressions assistance please", "body": "<p>I have a line :</p>\n\n<pre><code>a,b,\"c,d,e\",f,g,\"h,i,\",k,l,m\n</code></pre>\n\n<p>Currently to split this line and not have the commas within the \".*\"\nI do the following: </p>\n\n<pre><code>$s =~ s/\"[^\"]*\"//g;\n@list = split ',' , $s;\n</code></pre>\n\n<p>I would like to do the split without removing the data included within the \"\"</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1511309451, "post_id": 47424780, "comment_id": 81804511, "body": "Depends on what exactly you&#39;re trying to do, but you could use e.g. <code>if ($url-&gt;scheme eq &#39;http&#39; || $url-&gt;scheme eq &#39;https&#39;)</code>."}, {"owner": {"reputation": 1954, "user_id": 110844, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4afd458cb202c0a2e566e569f753765?s=128&d=identicon&r=PG", "display_name": "Ecognium", "link": "https://stackoverflow.com/users/110844/ecognium"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511310248, "post_id": 47424780, "comment_id": 81804724, "body": "@melpomene thanks. Based on your comment, I presume I can rely on <code>$url-&gt;scheme</code> to figure out if it parsed properly. If I add ` (defined($url-&gt;scheme)` to your suggestion, it works fine. Any other edge case where this can fail? I am parse large file and don&#39;t want to fail in the middle."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 3, "creation_date": 1511311353, "post_id": 47424780, "comment_id": 81805061, "body": "consider <code>$uri-&gt;has_recognized_scheme</code> - check the docs for the (long) list of supported schemes. If you&#39;re only interested in http/https, you could either check the scheme after, or even use the regex provided in the module."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511352897, "post_id": 47424780, "comment_id": 81823038, "body": "Another useful tool, especially for the question in your title (which btw does not fit your question body), is <a href=\"https://metacpan.org/pod/Safe::Isa\" rel=\"nofollow noreferrer\">Safe::Isa</a>. <a href=\"https://www.youtube.com/watch?v=9aCsUxfRksE\" rel=\"nofollow noreferrer\">Here&#39;s a lightning talk by the author</a> explaining how it works and what it can do."}], "answers": [{"comments": [{"owner": {"reputation": 1954, "user_id": 110844, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4afd458cb202c0a2e566e569f753765?s=128&d=identicon&r=PG", "display_name": "Ecognium", "link": "https://stackoverflow.com/users/110844/ecognium"}, "edited": false, "score": 0, "creation_date": 1511313231, "post_id": 47425073, "comment_id": 81805575, "body": "This is great. This is what I was after. Thank you!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1511315786, "post_id": 47425073, "comment_id": 81806157, "body": "This is wrong. It works only because the module cannot extract the <i>host</i> field from the URI unless it recognises the <i>scheme</i>. It is far better, as <a href=\"https://stackoverflow.com/questions/47424780/how-to-check-if-an-object-exists#comment81805061_47424780\"><b>bytepusher</b> says in their comment</a>, to use <code>$url-&gt;has_recognized_scheme</code> to determine whether the string is a recognisable URI. The <a href=\"https://www.ietf.org/rfc/rfc3986.txt\" rel=\"nofollow noreferrer\">current specification for a URI</a> is very flexible. Most of the parts are optional, and the only mandatory part is the <i>scheme</i>."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1511314910, "last_edit_date": 1511314910, "creation_date": 1511311344, "answer_id": 47425073, "question_id": 47424780, "link": "https://stackoverflow.com/questions/47424780/how-to-check-if-an-object-exists/47425073#47425073", "title": "How to check if an object exists", "body": "<p>For the general case you can use <code>UNIVERSAL::can</code></p>\n\n<pre><code>if (ref($url) &amp;&amp; $url-&gt;can(\"host\")) { ... }\n</code></pre>\n\n<p>or exception handling</p>\n\n<pre><code>eval { print $url-&gt;host };\nif ($@) { warn \"\\$url wasn't what I thought it was\" }\n</code></pre>\n\n<p>but in most cases you would want to drill down into the error and find the mismatch between your expectations and the program's behavior.</p>\n"}], "owner": {"reputation": 1954, "user_id": 110844, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4afd458cb202c0a2e566e569f753765?s=128&d=identicon&r=PG", "display_name": "Ecognium", "link": "https://stackoverflow.com/users/110844/ecognium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 47425073, "answer_count": 1, "score": 2, "last_activity_date": 1511314910, "creation_date": 1511309076, "question_id": 47424780, "link": "https://stackoverflow.com/questions/47424780/how-to-check-if-an-object-exists", "title": "How to check if an object exists", "body": "<p>I am trying to extract the domain part of a URL and I want to cover the case where the input is invalid. </p>\n\n<pre><code> use strict;\n use warnings;\n use URI;\n use Data::Dumper;\n\n my $url = URI-&gt;new( \"garbled\" );\n # my $url = URI-&gt;new( \"http://www.google.com/\" ); # this works\n # print Dumper $url;\n print $url-&gt;host if defined($url-&gt;host) ;\n</code></pre>\n\n<p>Gives <code>Can't locate object method \"host\" via package \"URI::_generic\" at</code> </p>\n\n<p>How can check if the URL was parsed correctly? </p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 2, "last_activity_date": 1511311802, "creation_date": 1511311802, "answer_id": 47425135, "question_id": 47423872, "link": "https://stackoverflow.com/questions/47423872/how-to-create-subroutines-for-add-and-subtract/47425135#47425135", "title": "how to create subroutines for add and subtract", "body": "<p>Subroutines are declared via <code>sub</code> like so:</p>\n\n<pre><code>sub add {\n    my ($x,$y) = @_;\n\n    return $x + $y;\n}\n</code></pre>\n\n<p>consider looking at <a href=\"https://learn.perl.org/\" rel=\"nofollow noreferrer\">https://learn.perl.org/</a> or getting a book,\n\"Learning Perl\" is a great.</p>\n\n<p>I personally would not recommend using CGI, as it is ancient, by the way, there are many modern frameworks out there you can use that make life a lot easier. Mojolicious is a good place to start IMO.</p>\n"}], "owner": {"reputation": 1, "user_id": 8982667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d06b8930d18bc5261a67a76d31dc15?s=128&d=identicon&r=PG&f=1", "display_name": "Mimi", "link": "https://stackoverflow.com/users/8982667/mimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511311802, "creation_date": 1511303520, "last_edit_date": 1511303930, "question_id": 47423872, "link": "https://stackoverflow.com/questions/47423872/how-to-create-subroutines-for-add-and-subtract", "title": "how to create subroutines for add and subtract", "body": "<p>How to create subroutines for add and subtract in a form where users are ask two enter two different numbers and the sum is the first number they enter plus/subtract the second number they enter.\nso far i only have the form:</p>\n\n<pre><code>use CGI qw (:standard);\nprint header;\nprint start_html;\nif (!param)\n{ \n    print \"&lt;form action='$ENV{SCRIPT_NAME}' method=get&gt;\\n\",br;\n    print \"Enter the first number: &lt;input type='text' size='10' name='fnumber'&gt;\\n\",br;\n    print \"Enter the second number:&lt;input type='text' size='10' name='snumber'&gt;\\n\",br;\n    print \"&lt;input type='radio' name='sum' value='add'&gt;Add\\n\",br;\n    print \"&lt;input type='radio' name='sum' value='sub'&gt;Sub\\n\",br;\n    print \"&lt;input type='submit' value='Submit'&gt;\\n\",br;\n    print \"&lt;/form&gt;\";\n}\nprint end_html;\n</code></pre>\n"}, {"tags": ["linux", "bash", "perl"], "comments": [{"owner": {"reputation": 109227, "user_id": 641955, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Hg2nO.jpg?s=128&g=1", "display_name": "janos", "link": "https://stackoverflow.com/users/641955/janos"}, "edited": false, "score": 0, "creation_date": 1511287502, "post_id": 47419684, "comment_id": 81793708, "body": "The Perl script itself prints alert count. Why do you need grep at all?"}, {"owner": {"reputation": 747, "user_id": 2754236, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9897dc5266176260997e71942f152826?s=128&d=identicon&r=PG&f=1", "display_name": "Newbee", "link": "https://stackoverflow.com/users/2754236/newbee"}, "reply_to_user": {"reputation": 109227, "user_id": 641955, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Hg2nO.jpg?s=128&g=1", "display_name": "janos", "link": "https://stackoverflow.com/users/641955/janos"}, "edited": false, "score": 0, "creation_date": 1511287676, "post_id": 47419684, "comment_id": 81793806, "body": "O&#39;m setting up a auto scheduler job, so I need it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1511288156, "post_id": 47419684, "comment_id": 81794095, "body": "I may misunderstand (you want to get that number out of script&#39;s output, correct?), but how&#39;s the simple <code>myscript.pl | grep &#39;Found .* alerts!&#39;</code>  ...?"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6716357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df954b0e1782cdb375cd9b62f4980ac5?s=128&d=identicon&r=PG&f=1", "display_name": "G McIntire", "link": "https://stackoverflow.com/users/6716357/g-mcintire"}, "is_accepted": false, "score": 0, "last_activity_date": 1511302245, "creation_date": 1511302245, "answer_id": 47423602, "question_id": 47419684, "link": "https://stackoverflow.com/questions/47419684/grep-command-to-count-the-alerts-in-perl/47423602#47423602", "title": "grep command to count the alerts in perl", "body": "<p>Keep in mind that Perl has a built-in grep function that is quite flexible. You can embed any perl statements you like between curly braces like so:</p>\n\n<pre><code>#!/usr/bin/env perl\n\ngrep { \n# do something with regex or whatever.\n} `ps -ef` # can be any old command-line invocation\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 2754236, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9897dc5266176260997e71942f152826?s=128&d=identicon&r=PG&f=1", "display_name": "Newbee", "link": "https://stackoverflow.com/users/2754236/newbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511302245, "creation_date": 1511287134, "question_id": 47419684, "link": "https://stackoverflow.com/questions/47419684/grep-command-to-count-the-alerts-in-perl", "title": "grep command to count the alerts in perl", "body": "<p>I have the below script:</p>\n\n<pre><code>    # Find any connection alerts to report\n    for my $Alert (@Alerts)\n    {   \n        print \" $Alert-&gt;{type} alerts:\\n\";\n\n        print STDERR \"Query: [\\n$Alert-&gt;{query}]\\n\";\n        my $alertCur = $dbh-&gt;prepare($Alert-&gt;{query})\n          or die \"Unable to prepare cursor for [$Alert-&gt;{query}]: $DBI::errstr\\n\";      \n\n        $alertCur-&gt;execute() \n          or die \" Unable to execute cursor: $DBI::errstr\\n\";\n\n        while (my $rec = $alertCur-&gt;fetchrow_hashref())\n        {               \n            #already in alert, don't send\n            next if (defined $rec-&gt;{alert_id});     \n\n            print $fh \"Location Alert Notification: $Alert-&gt;{type} for Site $rec-&gt;{location_id}  elapsedTime(D HH:MM):  $rec-&gt;{diff_tm}\\n\";\n            print \"Location Alert Notification: $Alert-&gt;{type} for Site $rec-&gt;{location_id}  elapsedTime(D HH:MM):  $rec-&gt;{diff_tm}\\n\";\n            $dbh-&gt;do (\"($Alert-&gt;{alert_id}, $rec-&gt;{location_id}, $rec-&gt;{imperial_site_id}, current)\") or die \"Unable to insert alert: $DBI::errstr\\n\";                                                          \n            $alertCnt++;                                                                                                    \n        }\n    }\n\n    $dbh-&gt;disconnect();\n\n    if ($alertCnt &gt; 0)\n    {\n        print \"Found &lt;$alertCnt&gt; alerts!\\n\";\n    }\n    else\n    {\n        print \"No alerts found!\\n\"\n    }\n\n    print \"Finished processing, elapsed seconds &lt;\" . (time() - $startTime) . \"&gt;\\n\";\n\n    exit(0);\n</code></pre>\n\n<p>I've tried:</p>\n\n<pre><code>    ps -ef|grep myscript.pl|grep $alertCnt grep\n</code></pre>\n\n<p>which returned:</p>\n\n<pre><code>    52642 117527  0 11:15 pts/63   00:00:00 grep myscript.pl\n</code></pre>\n\n<p><code>$alertCnt</code> is the variable which stores the number of alerts that have occurred.I want to count the number of alerts which is given by the variable <code>$alertCnts</code>.What is the right usage of the command to get the number of alert counts here?.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 3, "creation_date": 1511285998, "post_id": 47419301, "comment_id": 81792789, "body": "Welcome to the site!  Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers.  You can <a href=\"https://stackoverflow.com/posts/47419301/edit\">edit your question</a> to include more information.  What have you tried so far?  Which regex are you using to grab the <code>INSTALLDATE</code> part?  Thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1511286336, "post_id": 47419301, "comment_id": 81792993, "body": "Please show the code that you do have"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1511286403, "post_id": 47419301, "comment_id": 81793027, "body": "Is it always UTC, or do you need to handle non-UTC timezones?"}, {"owner": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "edited": false, "score": 0, "creation_date": 1511286439, "post_id": 47419301, "comment_id": 81793046, "body": "thank you for help. this is my current regex :  ($string) = ($string =~ /INSTALLDATE=(.*)/);  I am not sure how to remove UTC from it."}, {"owner": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "edited": false, "score": 0, "creation_date": 1511286485, "post_id": 47419301, "comment_id": 81793073, "body": "it&#39;s always UTC, that&#39;s for sure."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1511286635, "post_id": 47419301, "comment_id": 81793185, "body": "Was thinking in terms of parse the TZ, but my first pass with <code>Time::Piece</code> doesn&#39;t like it."}, {"owner": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "edited": false, "score": 0, "creation_date": 1511286937, "post_id": 47419301, "comment_id": 81793365, "body": "oh I am not able to use any of these libraries :  use Date::Parse; use DateTime use Time::Piece"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1511287281, "post_id": 47419301, "comment_id": 81793579, "body": "Btw, why couldn&#39;t you use <code>Time::Piece</code>? It&#39;s core. (You&#39;d have to parse the string here in some other way first, anyway.)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511298604, "post_id": 47419301, "comment_id": 81800051, "body": "<code>s&#47;UTC\\s&#47;&#47;</code>, anyone? Does it have to be a single line of code? Sometimes more verbose is better."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "edited": false, "score": 0, "creation_date": 1511286556, "post_id": 47419430, "comment_id": 81793136, "body": "could you please explain the regex?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "edited": false, "score": 0, "creation_date": 1511287032, "post_id": 47419430, "comment_id": 81793436, "body": "@PushpinderSingh Added notes, please let me know if it isn&#39;t good enough"}, {"owner": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "edited": false, "score": 0, "creation_date": 1511287319, "post_id": 47419430, "comment_id": 81793601, "body": "Thank you for the explanation. It works! I can&#39;t upvote because of the low reputation for now."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1511338641, "last_edit_date": 1511338641, "creation_date": 1511286310, "answer_id": 47419430, "question_id": 47419301, "link": "https://stackoverflow.com/questions/47419301/remove-specific-characters-from-date-string/47419430#47419430", "title": "Remove specific characters from date string", "body": "<p>The year is a useful marker since it can't show anywhere else</p>\n\n<pre><code>$string =~ s/INSTALLDATE=(.*?)\\s\\w+(\\s[0-9]{4})/$1$2/;\n</code></pre>\n\n<p>The <code>.*?</code> matches non-greedily up to the last word before the four-digit pattern. </p>\n\n<p>Detail</p>\n\n<ul>\n<li><p>The <code>?</code> quantifier after <code>.*</code> makes it match until the <em>first</em> occurrence of the pattern that follows. Without <code>?</code> it would match as far as it can, globbing up everything in between </p></li>\n<li><p>That next pattern is: space&mdash;word (<code>\\w+</code>)&mdash;space&mdash;4 digits (<code>[0-9]{4}</code>); end of timestamp</p></li>\n<li><p>It replaces the whole pattern with what has been captured in <code>()</code>s, first in <code>$1</code> second in <code>$2</code></p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "edited": false, "score": 0, "creation_date": 1511287279, "post_id": 47419461, "comment_id": 81793578, "body": "I don&#39;t know why someone downvoted this. It works fine. Thanks."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "edited": false, "score": 0, "creation_date": 1511287334, "post_id": 47419461, "comment_id": 81793611, "body": "@PushpinderSingh Glad to hear it!"}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 0, "last_activity_date": 1511287124, "last_edit_date": 1511287124, "creation_date": 1511286388, "answer_id": 47419461, "question_id": 47419301, "link": "https://stackoverflow.com/questions/47419301/remove-specific-characters-from-date-string/47419461#47419461", "title": "Remove specific characters from date string", "body": "<h3>Another way</h3>\n\n<p>Partly inspired by @zdim, you can do:</p>\n\n<pre><code>$string =~ s/^.*?=(.*?)UTC\\s*(.*)$/\\1\\2/\n</code></pre>\n\n<p>This matches everything up to the first <code>=</code> (<code>^.*?=</code>), saves everything after the <code>=</code> and before <code>UTC</code> into <code>\\1</code> (<code>(.*?)</code>), skips the <code>UTC</code> and any following whitespace (<code>UTC\\s*</code>), and saves the rest of the line into <code>\\2</code> (<code>(.*)$</code>).  Then it replaces the string with <code>\\1\\2</code>, i.e., the first and second saved parts stuck together.  The result is that everything from the beginning through the first <code>=</code> is gone, and <code>UTC</code> followed by any space is also gone.  Example:</p>\n\n<pre><code>$ echo \"INSTALLDATE=Tue Nov 07 19:35:38 UTC 2017\" |  \n    perl -ne 's/^.*?=(.*?)UTC\\s*(.*)$/\\1\\2/; print;'\nTue Nov 07 19:35:38 2017\n</code></pre>\n\n<h3>Original answer</h3>\n\n<p>I only know a two-step for this, although there's probably a one-liner.  I used:</p>\n\n<pre><code>echo \"INSTALLDATE=Tue Nov 07 19:35:38 UTC 2017\" | \n  perl -ne 'if(/=(.*)$/) { my $rest = $1; $rest =~ s/UTC\\s+//; print $rest;}'\n</code></pre>\n\n<p>and got <code>Tue Nov 07 19:35:38 2017</code>.</p>\n\n<p>That is:</p>\n\n<pre><code>if(/=(.*)$/) {            # Grab everything after the = into $1\n    my $rest = $1;        # copy $1 to writeable variable $rest\n    $rest =~ s/UTC\\s+//;  # Remove \"UTC\" and any following whitespace from $rest\n    print $rest;          # Output to the console (you could do something else instead)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1511287031, "creation_date": 1511287031, "answer_id": 47419645, "question_id": 47419301, "link": "https://stackoverflow.com/questions/47419301/remove-specific-characters-from-date-string/47419645#47419645", "title": "Remove specific characters from date string", "body": "<p>I would prefer a positional approach</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = 'INSTALLDATE=Tue Nov 07 19:35:38 UTC 2017';\n\nmy $date = join ' ', ( $s =~ /[\\w:]+/g )[1,2,3,4,6];\n\nsay $date;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Tue Nov 07 19:35:38 2017\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": false, "score": 0, "last_activity_date": 1511287426, "creation_date": 1511287426, "answer_id": 47419774, "question_id": 47419301, "link": "https://stackoverflow.com/questions/47419301/remove-specific-characters-from-date-string/47419774#47419774", "title": "Remove specific characters from date string", "body": "<p>The regex must contain 2 capturing groups:</p>\n\n<ul>\n<li>Between <code>=</code> and <code>UTC</code>.</li>\n<li>Between <code>UTC</code> and the end of the string.</li>\n</ul>\n\n<p>So the regex can be as follows:</p>\n\n<pre><code>/=(.*) UTC (.*)$/\n</code></pre>\n\n<p>An elegant way to capture both groups is:</p>\n\n<pre><code>my @res = $txt =~ /=(.*) UTC (.*)$/;\n</code></pre>\n\n<p>Where <code>res</code> is an array catching all groups contained in the regex.</p>\n\n<p>Then you can e.g. print both capturing groups, separated with a space:</p>\n\n<pre><code>print \"Result: $res[0] $res[1]\\n\";\n</code></pre>\n\n<p>So the whole script can be as follows:</p>\n\n<pre><code>my $txt = \"INSTALLDATE=Tue Nov 07 19:35:38 UTC 2017\";\nprint \"Source: $txt\\n\";\nmy @res = $txt =~ /=(.*) UTC (.*)$/;\nprint \"Result: $res[0] $res[1]\\n\";\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 4492733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-C-qdEBmbhD4/AAAAAAAAAAI/AAAAAAAAANs/lb22xrEaUrw/photo.jpg?sz=128", "display_name": "Pushpinder Singh", "link": "https://stackoverflow.com/users/4492733/pushpinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 47419430, "answer_count": 4, "score": 1, "last_activity_date": 1511338641, "creation_date": 1511285865, "last_edit_date": 1511286763, "question_id": 47419301, "link": "https://stackoverflow.com/questions/47419301/remove-specific-characters-from-date-string", "title": "Remove specific characters from date string", "body": "<p>I have a string</p>\n\n<pre><code>INSTALLDATE=Tue Nov 07 19:35:38 UTC 2017\n</code></pre>\n\n<p>from which I want to extract the timestamp in this format</p>\n\n<pre><code>Tue Nov 07 19:35:38 2017\n</code></pre>\n\n<p>i.e. with the timezone removed.</p>\n\n<p>What is the correct regex for it?</p>\n\n<p>I am able to remove <code>INSTALLDATE</code> but I am not sure how to match <code>UTC</code> and remove it from my matched string. </p>\n\n<p>My current regex : </p>\n\n<pre><code>($string) = ($string =~ /INSTALLDATE=(.*)/);\n</code></pre>\n"}, {"tags": ["perl", "grep"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511285212, "post_id": 47416876, "comment_id": 81792308, "body": "(Heh, I just noticed &quot;cb&quot; has two valid interpretations: &quot;code block&quot; and &quot;callback&quot;.)"}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1511285484, "post_id": 47416876, "comment_id": 81792479, "body": "Dont know what about &quot;any&quot;, but &quot;first&quot; seems to be less effective than simple &quot;for&quot;: <a href=\"https://pastebin.com/8cWjf7Cx\" rel=\"nofollow noreferrer\">pastebin.com/8cWjf7Cx</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1511285579, "post_id": 47416876, "comment_id": 81792534, "body": "@drvtiny, I never said it was faster (for a list of a given size). That wasn&#39;t what you asked for. Subroutine calls are expensive, and your check is extremely cheap. /// <code>for (@a)</code> is specifically optimized. Try <code>for ((), @a)</code> instead."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1511285763, "post_id": 47416876, "comment_id": 81792656, "body": "Thanks for your answer (i voted for it and will mark as a resolution). Strange that first() in XS&#39;ed List::Util is so slow :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1511285816, "post_id": 47416876, "comment_id": 81792689, "body": "As I just mentioned, Perl subroutine calls are slow. Making the call from XS doesn&#39;t change that. (Well, technically, it actually does help, because it means MULTICALL can be used to speed up multiple calls to the same sub by delaying the freeing of temps. But only so much.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1511278955, "last_edit_date": 1511278955, "creation_date": 1511278548, "answer_id": 47416876, "question_id": 47416807, "link": "https://stackoverflow.com/questions/47416807/avoid-grepping-all-in-boolean-context/47416876#47416876", "title": "Avoid grepping all in boolean context", "body": "<p>Everyone seems to forget they can write subs to hide \"awful\" details.</p>\n\n<pre><code>sub any(&amp;@) { my $cb = shift; for (@_) { return 1 if $cb-&gt;() } 0 }\n\nsay \"match\" if any { say; $_ &amp; 1 } 1..31;\n</code></pre>\n\n<p>That said, <code>any</code> is already provided by <a href=\"http://search.cpan.org/perldoc?List::Util\" rel=\"nofollow noreferrer\">List::Util</a>. (Also check out <a href=\"http://search.cpan.org/perldoc?List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a>.)</p>\n\n<p>Note that the list of item over which to iterate will still be placed entirely on the stack before <code>any</code> is called. That's rather cheap compared to needlessly calling a sub multiple times, but it could still be an issue for you. I believe that's the problem <a href=\"http://search.cpan.org/perldoc?List::Gen\" rel=\"nofollow noreferrer\">List::Gen</a> tries to address.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 0, "last_activity_date": 1511286382, "creation_date": 1511286382, "answer_id": 47419457, "question_id": 47416807, "link": "https://stackoverflow.com/questions/47416807/avoid-grepping-all-in-boolean-context/47419457#47419457", "title": "Avoid grepping all in boolean context", "body": "<p>This sounds like a tool seeking a job rather than a job seeking a tool. If the task is to go through a list of numbers and stop when you find one that meets a condition, don't use something that by design wants to inspect every element:</p>\n\n<pre><code>foreach my $n ( @n ) {\n    say $n;\n    if( $n &amp; 1 ) {\n        say 'Matched!\";\n        last;\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1511300263, "creation_date": 1511300263, "answer_id": 47423161, "question_id": 47416807, "link": "https://stackoverflow.com/questions/47416807/avoid-grepping-all-in-boolean-context/47423161#47423161", "title": "Avoid grepping all in boolean context", "body": "<p>grep is able to cheat; the block that it executes isn't actually a subroutine and it is able to run it much faster than if it were, and non-grep alternatives are stuck doing a sub call.</p>\n\n<p>IMO unless you have a very long list and are likely to find the desired match towards the beginning, there's no reason not to just use grep.  Or at least, the reason of making your code more readable (which using \"any\" or such may do) outweighs any performance gain (or loss).</p>\n"}], "owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 2, "accepted_answer_id": 47416876, "answer_count": 3, "score": 0, "last_activity_date": 1511300263, "creation_date": 1511278324, "last_edit_date": 1511285015, "question_id": 47416807, "link": "https://stackoverflow.com/questions/47416807/avoid-grepping-all-in-boolean-context", "title": "Avoid grepping all in boolean context", "body": "<p>Its a pitty that grep function in perl cant recognize \"boolean\" context, because  in Perl there is no \"boolean\" context at all.</p>\n\n<p>So if i do something like this</p>\n\n<pre><code>print \"matched\\n\" if grep { print \"$_\\n\"; $_&amp;1 } 1..31\n</code></pre>\n\n<p>numbers from 1 to 31 will be printed instead of only \"1\" which is enough to get \"true\" result in \"if\".</p>\n\n<p>to avoid this behaviour i have to do something awful:</p>\n\n<pre><code>print \"matched\\n\" if do { my $fl; $_&amp;1 and $fl=1, last for 1..31; $fl }\n</code></pre>\n\n<p>Maybe it can be done in a simplest way? Is there some fast XS code implementing \"boolean grep\" on CPAN? </p>\n"}, {"tags": ["perl", "hash", "count"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511276668, "post_id": 47416192, "comment_id": 81786164, "body": "At the very least, you need to show us the structure of the hashes that you are using."}, {"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511276746, "post_id": 47416192, "comment_id": 81786214, "body": "I thought that is what I did..."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511276885, "post_id": 47416192, "comment_id": 81786325, "body": "It&#39;s really not very clear. Can you either show us the code that builds up <code>%counts</code> or use Data::Dumper to show us what the contents look like."}, {"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511277012, "post_id": 47416192, "comment_id": 81786407, "body": "Oh. Well, the contents is city, state....it is literally thousands of lines that are in that format...so isn&#39;t this the content? I have no idea how to show you this using Data::Dumper....???"}, {"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511277115, "post_id": 47416192, "comment_id": 81786495, "body": "I have no idea what I am doing."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1511277325, "post_id": 47416192, "comment_id": 81786639, "body": "We don&#39;t either."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1511277383, "post_id": 47416192, "comment_id": 81786685, "body": "You say you are parsing a list. Show us the code that does that parsing."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511283063, "post_id": 47416192, "comment_id": 81790849, "body": "What do you think <code>$counts = {$city, $state} {$count}++</code> is doing? There&#39;s nothing in the code you have shown that puts anything into <code>%counts</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511283217, "post_id": 47416192, "comment_id": 81790951, "body": "What are <code>$varc</code> and <code>$vars</code>? You really need to provide some code and data that we can run ourselves to reproduce the problem that you are seeing."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "edited": false, "score": 0, "creation_date": 1511278069, "post_id": 47416541, "comment_id": 81787148, "body": "I don&#39;t understand how you have [at]places = ( followed by the city and state.  I have code that when runs prints city and state but not with the [at]places and in this type of list so I have no idea how to get a list formatted after the ( in the [at]places... unless I copy paste all this and manually make the list but that seems to be completely defeating the purpose"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "edited": false, "score": 0, "creation_date": 1511278307, "post_id": 47416541, "comment_id": 81787322, "body": "You say that you &quot;parsed the list to get the city and state&quot; so it sounds like you&#39;ve already got a list containing those parsed items in an array. If so, then all you need to do is the rest of the code afterwards."}, {"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "edited": false, "score": 0, "creation_date": 1511278479, "post_id": 47416541, "comment_id": 81787452, "body": "Hmmm...so when I run the full code that is listed above and it hits the print $city, $state line (without the hash) it returns the following in my cmd window: city, state city, state city, state with a \\n between each pair ... so does that mean this is an array? I am sorry but I just don&#39;t understand. I thought I had made it through the hard part by get through the jumbled mess of information and pulling out the city, state.... all I need is the count but this seems to be way more difficult than I thought it would be."}, {"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "edited": false, "score": 0, "creation_date": 1511278742, "post_id": 47416541, "comment_id": 81787653, "body": "Can I create this by doing the following: [at]places=($city, $state);   ?"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "edited": false, "score": 0, "creation_date": 1511278752, "post_id": 47416541, "comment_id": 81787663, "body": "Ah ok, I just saw your updated question. If you&#39;ve got city and state in separate variables then you can just build a string containing them both and use similar code as above. I&#39;l update my answer...."}, {"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "edited": false, "score": 0, "creation_date": 1511279240, "post_id": 47416541, "comment_id": 81788017, "body": "Thank you, I will try this out."}, {"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "edited": false, "score": 0, "creation_date": 1511279699, "post_id": 47416541, "comment_id": 81788387, "body": "Ok, it&#39;s not throwing an error but it isn&#39;t working properly.... instead of returning city, state, number ... it is returning city, state =&gt;1 for each line with the city, state being correct but the number is =&gt;1 for all."}, {"owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "edited": false, "score": 0, "creation_date": 1511279795, "post_id": 47416541, "comment_id": 81788471, "body": "Ah, ok I figured out what the hangup was.  It is working, thank you!!!!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511280095, "post_id": 47416541, "comment_id": 81788675, "body": "Huh, I ended up reproducing your answer in different words because I didn&#39;t see your edit."}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 1, "last_activity_date": 1511278929, "last_edit_date": 1511278929, "creation_date": 1511277576, "answer_id": 47416541, "question_id": 47416192, "link": "https://stackoverflow.com/questions/47416192/counting-through-a-hash-perl/47416541#47416541", "title": "Counting through a hash - PERL", "body": "<p>Instead of printing city and state you can build a \"location\" string with both items and use the following counting code:</p>\n\n<pre><code># Declare this variable before starting to parse the locations.\nmy %counts = ();\n\n# Inside of the loop that parses the city and state, let's assume\n# that you've got $city and $state already...\n\n  my $location = \"$city, $state\";\n  $counts{$location} += 1;\n}\n\n# When you've processed all locations then the counts will be correct.\nforeach $location (keys %counts) {\n  print \"OK: $location =&gt; $counts{$location}\\n\";\n}\n\n# OK: New York, NY =&gt; 5\n# OK: Albuquerque, NM =&gt; 1\n# OK: Los Angeles, CA =&gt; 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511284134, "post_id": 47417392, "comment_id": 81791608, "body": "I think I&#39;d go with <code>$count{$city}{$state}++</code> instead of <code>$count{&quot;$city, $state&quot;}++</code>. It&#39;s not mentioned in the question, but I bet at some point he&#39;s going to want to report on cities by state."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1511284210, "post_id": 47417392, "comment_id": 81791655, "body": "@DaveCross I was going to mention that, but it was already long. And then I forgot. :D"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1511280024, "creation_date": 1511280024, "answer_id": 47417392, "question_id": 47416192, "link": "https://stackoverflow.com/questions/47416192/counting-through-a-hash-perl/47417392#47417392", "title": "Counting through a hash - PERL", "body": "<p>This is going to be a mix of an answer and a code review. I will start with <strong>a warning</strong> though.</p>\n\n<p>You are trying to parse what looks like XML with Regular Expressions. While <a href=\"https://stackoverflow.com/a/4234491/1331451\">this can be done</a>, <a href=\"https://stackoverflow.com/a/1732454/1331451\">it should probably not be done</a>. Use an existing parser instead.</p>\n\n<p>How do I know? Stuff that is between angle brackets looks like the format is XML, unless you have a very weird CSV file.</p>\n\n<pre><code>#             V            V\n$line =~ /(?:\\&gt;)(\\w+.*)(?:\\&lt;)/;\n</code></pre>\n\n<p>Also note that you don't need to escape <code>&lt;</code> and <code>&gt;</code>, they have no special meaning in regex.</p>\n\n<hr>\n\n<p>Now to your code.</p>\n\n<p>First, make sure you always <code>use strict</code> and <code>use warnings</code>, so you are aware of stuff that goes wrong. I can tell you're not because the <code>$count</code> in your loop has no <code>my</code>.</p>\n\n<p>What's <code>$vars</code> (with an <code>s</code>), and what's <code>$varc</code> (with a <code>c</code>). I am guessing that has to do with the <strong>s</strong>tate and the <strong>c</strong>ity. Is it the column number? In an XML file? Huh.</p>\n\n<blockquote>\n<pre><code>$line =~ /(?:\\&gt;)((\\w+.*))(?:\\&lt;)/;\n</code></pre>\n</blockquote>\n\n<p>Why are there two capture groups, both capturing the same thing?</p>\n\n<hr>\n\n<p>Anyway, you want to count how often each combination of state and city occurs. </p>\n\n<blockquote>\n<pre><code>foreach $count (keys %counts){\n$counts = {$city, $state} {$count}++;\nprint $counts;\n}\n</code></pre>\n</blockquote>\n\n<p>Have you run this code? Even without <code>strict</code>, it gives a syntax error. I'm not even sure what it's supposed to do, so I can't tell you how to fix it.</p>\n\n<p>To implement counting, you need a hash. You got that part right. But you need to declare that hash variable outside of your file reading loop. Then you need to create a key for your city and state combination in the hash, and increment it every time that combination is seen.</p>\n\n<pre><code>my %counts;    # declare outside the loop\nwhile ( my $line = &lt;$fh&gt; ) {\n    chomp $line;\n    if ( $varc == 3 ) {\n        $line =~ /(?:\\&gt;)(\\w+.*)(?:\\&lt;)/;\n        $city = $1;\n    }\n    if ( $vars == 5 ) {\n        $line =~ /(?:\\&gt;)((\\w+.*))(?:\\&lt;)/;\n        $state = $1;\n\n        print \"$city, $state\\n\";\n\n        $count{\"$city, $state\"}++;    # increment when seen\n    }\n}\n</code></pre>\n\n<p>You have to parse the whole file before you can know how often each combination is in the file. So if you want to print those together, you will have to move the printing outside of the loop that reads the file, and iterate the <code>%count</code> hash by keys at a later point.</p>\n\n<pre><code>my %counts;    # declare outside the loop\nwhile ( my $line = &lt;$fh&gt; ) {\n    chomp $line;\n    if ( $varc == 3 ) {\n        $line =~ /(?:\\&gt;)(\\w+.*)(?:\\&lt;)/;\n        $city = $1;\n    }\n    if ( $vars == 5 ) {\n        $line =~ /(?:\\&gt;)((\\w+.*))(?:\\&lt;)/;\n        $state = $1;\n\n        $count{\"$city, $state\"}++;    # increment when seen\n    }\n}\n\n# iterate again to print final counts\nforeach my $item ( sort keys %counts ) {\n    print \"$item $counts{$item}\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8750830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b41047cb4ff6072283dec29c5e018b1?s=128&d=identicon&r=PG&f=1", "display_name": "R.Stone", "link": "https://stackoverflow.com/users/8750830/r-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1511280024, "creation_date": 1511276451, "last_edit_date": 1511277774, "question_id": 47416192, "link": "https://stackoverflow.com/questions/47416192/counting-through-a-hash-perl", "title": "Counting through a hash - PERL", "body": "<p>I have a db of places people have ordered items from. I parsed the list to get the city and state so it prints like this -  city, state (New York, NY) etc....</p>\n\n<p>I use the variables $city and $state but I want to count how many times each city and state occur so it looks like this - city, state, count (Seattle, WA 8)</p>\n\n<p>I have all of it working except the count .. I am using a hash but I can't figure out what is wrong with this hash:</p>\n\n<pre><code>if ($varc==3) {\n        $line =~ /(?:\\&gt;)(\\w+.*)(?:\\&lt;)/;\n        $city = $1;\n    }\n    if ($vars==5) {\n        $line =~ /(?:\\&gt;)((\\w+.*))(?:\\&lt;)/;\n        $state = $1;\n\n        # foreach $count (keys %counts){\n        #   $counts = {$city, $state} {$count}++;\n        #   print $counts;\n        # }\n\n    print \"$city, $state\\n\";\n\n    }\n</code></pre>\n\n<hr>\n\n<pre><code>foreach $count (keys %counts){\n$counts = {$city, $state} {$count}++;\nprint $counts;\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "dereference"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511273505, "post_id": 47415070, "comment_id": 81783830, "body": "What exactly is your question? If you want us to review your code, please ask on <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511273830, "post_id": 47415070, "comment_id": 81784056, "body": "What are <code>$rid</code>, <code>$$cpe</code>, and <code>$dpe</code>? If they are relevant then include the code that defines them, if they are not then remove references to them."}, {"owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1511274716, "post_id": 47415070, "comment_id": 81784711, "body": "Removed the bits requested. This is not a code review its more of a &quot;need a  cleaner more readable way to do this&quot; as I appear to be building these kind of structures more frequently."}, {"owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1511275334, "post_id": 47415070, "comment_id": 81785153, "body": "The first cat is necessary to find a node that has that CPE ($c) attached to it. If it does then the second cat is to pull out a list of other CPEs for that customer on that same node. If done in one shot it would match general CPEs on nodes that do not have BGP MED set."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511278360, "post_id": 47415070, "comment_id": 81787368, "body": "Tip: <code>$cust</code> is already a scalar. No need to pass a reference to it to <code>Dumper</code>. Replacing <code>Dumper(\\$cust)</code> with <code>Dumper($cust)</code> for cleaner/clearer output."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1511290055, "post_id": 47415804, "comment_id": 81795112, "body": "That looks a little leaner. The structure of the data will need to stay the same for now. Thank you Borodin"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1511290446, "post_id": 47415804, "comment_id": 81795347, "body": "@Taranasaur: There always needs to be as many <code>for</code> loops as there are levels to your data structure; there&#39;s no way around that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1511290523, "post_id": 47415804, "comment_id": 81795395, "body": "@Taranasaur: Sorry, there were a couple of bugs. See my fixed answer."}, {"owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1511299625, "post_id": 47415804, "comment_id": 81800653, "body": "my repeating experiences and your solution has made it crystal clear. It&#39;s a niggling annoyance that you can create structures with such ease but then to get back at the data it&#39;s a grind! I&#39;m relatively new to Perl and have to bash out scripts in a matter of hours so stumble forwards best I can. Need a good book on Perl"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1511301397, "post_id": 47415804, "comment_id": 81801535, "body": "@Taranasaur: I highly recommend the biblical <a href=\"http://shop.oreilly.com/product/9780596004927.do\" rel=\"nofollow noreferrer\"><i>&quot;Camel Book&quot;</i></a>. It&#39;s very digestable, and if you read it through repeatedly from beginning to end, performing experiments where necessary to confirm your knowledge, then you will realise that you understand more and more each time. It&#39;s a far better way to learn than reading up on the new bits you need for each program, which results in very patchy knowledge."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "edited": false, "score": 0, "creation_date": 1511301551, "post_id": 47415804, "comment_id": 81801609, "body": "I don&#39;t see that your code to build the structure is at all simple. Ultimately you really should be writing Perl code to do the <code>grep</code> operations."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1511290487, "last_edit_date": 1511290487, "creation_date": 1511275305, "answer_id": 47415804, "question_id": 47415070, "link": "https://stackoverflow.com/questions/47415070/clean-way-to-access-a-nested-data-structure/47415804#47415804", "title": "Clean way to access a nested data structure", "body": "<p>You don't explain exactly what you find \"convoluted\" about the traversal code, but you have made it unnecessarily complex by duplicating data into <code>@intlist</code> and <code>%node</code>. The excessive and inconsistent indentation also makes it ungainly</p>\n\n<p>I would write something closer to this</p>\n\n<pre><code>for my $node ( @nodes ) {\n\n    for my $n ( keys %$node ) {\n\n        print \"\\nRouter is $n\\n\";\n\n        for my $cust ( keys %{ $node-&gt;{$n} } ) {\n\n            print \"Customer on $n is \\n\" . Dumper \\$cust;\n\n            my $med_cpe = $node-&gt;{$n}{$cust}[0];\n        }\n    }\n}\n</code></pre>\n\n<p>If you don't need the values of <code>$node</code> and <code>$n</code> except to access <code>$med_cpe</code> then you don't need a nested data structure at all: a simple array is fine. On the face of it, an array like this will do what you need</p>\n\n<pre><code>[\n    [\n        'router-xx-xx',\n        '50000',\n        'THXXXXVF_NLXXXX40_1121_2',\n        '10x.xx.x.50',\n    ],\n    [\n        'router-xx-xx',\n        '50000',\n        'THXXXPVF_NLXXXX66_1121_1',\n        '10x.xx.x.70',\n    ],\n    ...\n]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8913845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0PMjD.jpg?s=128&g=1", "display_name": "Taranasaur", "link": "https://stackoverflow.com/users/8913845/taranasaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 47415804, "answer_count": 1, "score": -2, "last_activity_date": 1511290487, "creation_date": 1511273216, "last_edit_date": 1511278387, "question_id": 47415070, "link": "https://stackoverflow.com/questions/47415070/clean-way-to-access-a-nested-data-structure", "title": "Clean way to access a nested data structure", "body": "<p>I have a segment of code that, although it works, does not look like a clean way to do things.</p>\n\n<p>I build the structure using:</p>\n\n<pre><code> foreach my $n (@node_list)\n {\n    chomp ($n);\n\n    foreach my $c (@cpes)\n    {\n            my @returned; #Interfaces to CPEs with MED settings\n            my @creturned; #General Customer Interfaces\n\n            my ($cust) = $c =~ /([a-zA-Z]+)[_-][a-zA-Z0-9]+/s;\n            print \"\\n\\t\\tCustomer is $cust\\n\";\n\n            chomp($c);\n            $c = uc $c;\n            my ($search) = $c;\n\n            (@returned) = `cat /curr/$n | grep \"$search\"`;\n            if (@returned)\n            {\n                    my $cust_match = 'interface \\\"' . $cust;\n                    (@creturned) = `cat /curr/$n | egrep -i \"$cust_match\" | grep -v \"$search\"`;\n\n            }\n            if (@creturned)   #Have we found other CPEs on the same router\n            {\n                    my ($nf) = $n =~ /([a-zA-Z0-9-]+).cfg/s;\n\n                    my (@interfaces) = map { /([A-Z0-9_]+)/s } @creturned;\n                    @interfaces = uniq(@interfaces);\n\n                    unshift  (@interfaces, $c);\n                    push (@new_out, {$nf =&gt; {$cust =&gt; [@interfaces]}});\n            }\n\n    }\n</code></pre>\n\n<p>This will return:</p>\n\n<pre><code> $VAR1 = [\n        {\n          'router-xx-xx' =&gt; {\n                              '50000' =&gt; [\n                                               [\n                                                 'THXXXXVF_NLXXXX40_1121_2',\n                                                 '10x.xx.x.50'\n                                               ],\n                                               [\n                                                 'THXXXPVF_NLXXXX66_1121_1',\n                                                 '10x.xx.x.70'\n                                               ],\n                                               [\n                                                 'THXXXXVF_NLXXXX67_1121_2',\n                                                 '10x.xx.x.78'\n                                               ],\n\n                            }\n        },\n</code></pre>\n\n<p>Each router can have a number of VPRNs and each VPRN can contain multiple interfaces. In the example above I've shown one router with one VPRN.</p>\n\n<p>However, when it comes to accessing elements in the above, I've written the following convoluted (but working) code:</p>\n\n<pre><code>  foreach my $candidate (@nodes)\n    {\n            my %node = %{ $candidate };\n\n            foreach my $n (keys %node)\n            {\n                    print \"\\nRouter is $n\\n\";\n\n                    foreach my $cust (keys %{ $node{$n} })\n                    {\n                            print \"Customer on $n is \\n\" . Dumper $cust;\n                            my @intlist = @{$node{$n}{$cust}};\n\n                            my $med_cpe = $intlist[0];      #the CPE that was used to find node\n\n                            {truncated}\n                            }\n                    }\n            }\n    }\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": false, "score": 4, "last_activity_date": 1511273016, "creation_date": 1511273016, "answer_id": 47414986, "question_id": 47414952, "link": "https://stackoverflow.com/questions/47414952/unexpected-behavior-with-eq-operator-in-a-perl-while-loop-while-loop-does-not-s/47414986#47414986", "title": "Unexpected behavior with eq operator in a perl while loop. while loop does not stop", "body": "<p>You redefine <code>$quit</code> in the Loop : <code>chomp (my $quit = &lt;STDIN&gt;);</code> remove <code>my</code> in this line</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nmy $quit = 'j';\n\nwhile ($quit eq 'j') {\n\n    print \"Enter whatever value you want and I bet I still continue.\\n\";\n    chomp ($quit = &lt;STDIN&gt;);\n    print \"quit equals: $quit\\n\";\n\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1511273044, "creation_date": 1511273044, "answer_id": 47415002, "question_id": 47414952, "link": "https://stackoverflow.com/questions/47414952/unexpected-behavior-with-eq-operator-in-a-perl-while-loop-while-loop-does-not-s/47415002#47415002", "title": "Unexpected behavior with eq operator in a perl while loop. while loop does not stop", "body": "<p>Inside the loop you are creating a new <code>$quit</code> variable with the <code>my</code> keyword:</p>\n\n<pre><code>chomp (my $quit = &lt;STDIN&gt;);\n</code></pre>\n\n<p>You actually want to assign to the existing variable:</p>\n\n<pre><code>chomp($quit = &lt;STDIN&gt;);\n</code></pre>\n\n<p>Note that a Perl linting program such as <a href=\"https://metacpan.org/pod/distribution/Perl-Critic/bin/perlcritic\" rel=\"noreferrer\">Perl::Critic</a> would have alerted you to this problem:</p>\n\n<blockquote>\n  <p>Reused variable name in lexical scope: $quit at line 9, column 12.  Invent unique variable names.  (Severity: 3)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 342, "user_id": 8938065, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ijKbe9w3guI/AAAAAAAAAAI/AAAAAAAAACg/nS-wwBnY9Kc/photo.jpg?sz=128", "display_name": "Jos", "link": "https://stackoverflow.com/users/8938065/jos"}, "is_accepted": false, "score": 1, "last_activity_date": 1511273227, "creation_date": 1511273227, "answer_id": 47415073, "question_id": 47414952, "link": "https://stackoverflow.com/questions/47414952/unexpected-behavior-with-eq-operator-in-a-perl-while-loop-while-loop-does-not-s/47415073#47415073", "title": "Unexpected behavior with eq operator in a perl while loop. while loop does not stop", "body": "<p>Because you define a new variable $quit inside your while loop. \nThis is what you want:</p>\n\n<pre><code>chomp ($quit = &lt;STDIN&gt;);\n</code></pre>\n\n<p>So, without 'my'.</p>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 47415002, "answer_count": 3, "score": 2, "last_activity_date": 1511273227, "creation_date": 1511272875, "last_edit_date": 1511273133, "question_id": 47414952, "link": "https://stackoverflow.com/questions/47414952/unexpected-behavior-with-eq-operator-in-a-perl-while-loop-while-loop-does-not-s", "title": "Unexpected behavior with eq operator in a perl while loop. while loop does not stop", "body": "<p>While loop below does not stop after scalar <code>$quit</code> clearly does not equal 'j'.\nWhy won't it stop?</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nmy $quit = 'j';\n\nwhile ($quit eq 'j') {\n\n    print \"Enter whatever value you want and I bet I still continue.\\n\";\n    chomp (my $quit = &lt;STDIN&gt;);\n    print \"quit equals: $quit\\n\";\n\n} \n</code></pre>\n"}, {"tags": ["perl", "file", "header", "cgi"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1511257488, "post_id": 47409708, "comment_id": 81773012, "body": "seems like CGI day today.."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1511257749, "post_id": 47409708, "comment_id": 81773218, "body": "@GerhardBarnard I should create a bookmarklet for that lightning talk to insert a comment directly."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511257816, "post_id": 47409708, "comment_id": 81773267, "body": "@simbabque sounds like a plan to me."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511257874, "post_id": 47409708, "comment_id": 81773308, "body": "@GerhardBarnard have you watched it? Sawyer says something about drinking to much lemonade that <i>that</i> guy gave to him. That&#39;s Club Mate, a high caffeine drink from Germany. And that guy is me. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1511257926, "post_id": 47409708, "comment_id": 81773346, "body": "Please feel free to post this code on <a href=\"https://codereview.stackexchange.com\">Code Review</a>. You&#39;re using a lot of very unperlish syntax, and I&#39;d like to give you some feedback."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511257946, "post_id": 47409708, "comment_id": 81773362, "body": "Ahh. yes I did, I never even thought that it is you. That is great! I saw you linked the video it in the previous CGI question as well."}, {"owner": {"reputation": 121, "user_id": 8978381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39410566e279b9e77a0ac7fc8112a5b?s=128&d=identicon&r=PG&f=1", "display_name": "amblabs", "link": "https://stackoverflow.com/users/8978381/amblabs"}, "edited": false, "score": 0, "creation_date": 1511261097, "post_id": 47409708, "comment_id": 81775449, "body": "Is this marked as duplicate to: <a href=\"https://stackoverflow.com/questions/6293893/how-to-force-files-to-open-in-browser-instead-of-download-pdf\" title=\"how to force files to open in browser instead of download pdf\">stackoverflow.com/questions/6293893/&hellip;</a>"}, {"owner": {"reputation": 121, "user_id": 8978381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39410566e279b9e77a0ac7fc8112a5b?s=128&d=identicon&r=PG&f=1", "display_name": "amblabs", "link": "https://stackoverflow.com/users/8978381/amblabs"}, "edited": false, "score": 0, "creation_date": 1511261124, "post_id": 47409708, "comment_id": 81775478, "body": "If so, I just tried to add print header(&quot;Content-Disposition: inline; filename=\\&quot;$f.pdf\\&quot;); but it still shows the file name as getpdf.cgi."}, {"owner": {"reputation": 121, "user_id": 8978381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39410566e279b9e77a0ac7fc8112a5b?s=128&d=identicon&r=PG&f=1", "display_name": "amblabs", "link": "https://stackoverflow.com/users/8978381/amblabs"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511262263, "post_id": 47409708, "comment_id": 81776234, "body": "@simbabque I posted the code on Code Review as you suggested: <a href=\"https://codereview.stackexchange.com/questions/180951/un-perl-ish-syntax\" title=\"un perl ish syntax\">codereview.stackexchange.com/questions/180951/&hellip;</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1511262672, "post_id": 47409708, "comment_id": 81776516, "body": "@GerhardBarnard I&#39;m the guy off-screen moderating the lightning talks in that conference. I ... urged Sawyer to give the talk. It was originally a 10 minute talk, which he did not actually change. All the caffeine helped to get it into a generous 6 minutes."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511263751, "post_id": 47409708, "comment_id": 81777223, "body": "@simbabque I think the start off the video proves the caffeine :) it is very intriguing though, the video should get more views."}, {"owner": {"reputation": 3870, "user_id": 2336725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a0b96a26cf233d752469445595f872?s=128&d=identicon&r=PG", "display_name": "Teepeemm", "link": "https://stackoverflow.com/users/2336725/teepeemm"}, "edited": false, "score": 0, "creation_date": 1511319465, "post_id": 47409708, "comment_id": 81806999, "body": "Does your solution apply to the marked duplicate?  That would be a better place to post it than to your question."}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1555421990, "post_id": 47409708, "comment_id": 98099854, "body": "Use a raw header: <code>header(-type =&gt; &quot;application&#47;pdf&quot;, -target =&gt; $file, &#39;-Content-Disposition&#39; =&gt; &quot;inline; filename=\\&quot;$file\\&quot;&quot;)</code>"}], "owner": {"reputation": 121, "user_id": 8978381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39410566e279b9e77a0ac7fc8112a5b?s=128&d=identicon&r=PG&f=1", "display_name": "amblabs", "link": "https://stackoverflow.com/users/8978381/amblabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 646, "favorite_count": 0, "closed_date": 1511257818, "answer_count": 0, "score": 2, "last_activity_date": 1511306281, "creation_date": 1511256950, "last_edit_date": 1511306281, "question_id": 47409708, "link": "https://stackoverflow.com/questions/47409708/perl-cgi-script-to-serve-up-pdf-files", "closed_reason": "Duplicate", "title": "Perl CGI script to serve up PDF files", "body": "<p>Rather than using a link like the following in a html page:</p>\n\n<pre><code>&lt;a href=\"http://www.somesite.com/path/to/file.pdf\"&gt;Display file&lt;/a&gt;\n</code></pre>\n\n<p>I would like to obfuscate the path to the file from the remote user.\nSo I wrote a Perl CGI script to do so, a simplified version is shown here:</p>\n\n<pre><code>#!/usr/bin/perl -T\n\nuse strict;\nuse warnings;\nuse CGI qw/:all/;\n\nmy $basepath = '/some/path/to';\nmy $f = param(\"f\") || '';\n\n($f eq '') &amp;&amp; die;\n\nmy $path = \"$basepath/$f.pdf\";\n\nopen(PATH, \"&lt;$path\") || die;\nbinmode PATH;\n\nprint header(-type =&gt; \"application/pdf\",\n             -target =&gt; \"$f\");\nprint;\n\nwhile (&lt;PATH&gt;) {\n    print($_);\n}\nclose(PATH);\n</code></pre>\n\n<p>I save this script as $htdoc/cgi-bin/getpdf.cgi, then use the following URL in the html file instead:</p>\n\n<pre><code>&lt;a href=\"http://www.somesite.com/cgi-bin/getpdf.cgi?f=file\"&gt;Display file&lt;/a&gt;\n</code></pre>\n\n<p>This script works, but the file name shown to the user is the name of the script (getpdf.cgi), not the name of the file being served (file.pdf). This is not very good because no matter what file is being served, the file name is getpdf.cgi. I would like it to be the actual file name (which is passed as the f= param in the URL, with the .pdf extension appended).</p>\n\n<p>I tried using the following header() instead of what's in the script above:</p>\n\n<pre><code>print header(-type =&gt; \"application/pdf\",\n             -target =&gt; \"$f\",\n             -attachment =&gt; \"$f.pdf\");\n</code></pre>\n\n<p>Note the added -attachment line. This does override the file name to file.pdf, but it causes the browser to open a \"Save as\" dialog window rather than just displaying the file.</p>\n\n<p>How to solve this problem?</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong> TUrns out I needed to have the following in my header:</p>\n\n<pre><code>Content-Type: application/pdf\nContent-Disposition: inline; filename=\"$f.pdf\"\n</code></pre>\n\n<p>The first header line is easily generated with CGI.pm's header() method:</p>\n\n<pre><code>print header(-type =&gt; 'application/pdf');\n</code></pre>\n\n<p>But CGI.pm does not give me a way to generate the second line, at least not the version that's on the server.  If I use the following code:</p>\n\n<pre><code>print header(-type =&gt; 'application/pdf', -attachment =&gt; \"$f.pdf\");\n</code></pre>\n\n<p>Then the generated header looks like this:</p>\n\n<pre><code>Content-Type: application/pdf\nContent-Disposition: attachment; filename=\"$f.pdf\"\n</code></pre>\n\n<p>Having \"attachment\" causes the browser to pop up a \"Save as\" dialog box which I don't want to be the default behavior.  I want \"inline\", but header() has no parameter for it.</p>\n\n<p>I also found that I cannot use multiple header() calls, that seems to cause everything after the first one to be ignored.</p>\n\n<p>So the solution is not to use header() at all, but just explicitly call print() to output the needed header lines, plus one blank line to signify end-of-header.</p>\n\n<p>I tested this on Chrome, Firefox and IE.  They work as intended in displaying the PDF file.  If I then try to download it, the correct file name is provided as default on Chrome and Firefox.  On IE it still shows the default file name as getpdf.cgi.</p>\n\n<p>At this point I think I'll just chalk it up to be yet another IE \"bug\" and leave it at that.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511257155, "post_id": 47409394, "comment_id": 81772769, "body": "Please provide a (minimal) example code that shows how you load <code>Tk</code> and <code>forks</code> modules, and how you you fork a process"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1511263428, "post_id": 47409394, "comment_id": 81777008, "body": "Perl/TK is not thread safe as far as I know, i.e. all Tk related things have to be done always from inside the same thread. But fork in Windows is emulated using threads."}, {"owner": {"reputation": 1102, "user_id": 22738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa6f9e355aa053f2f8d41db96d64e34c?s=128&d=identicon&r=PG", "display_name": "charlesbridge", "link": "https://stackoverflow.com/users/22738/charlesbridge"}, "edited": false, "score": 0, "creation_date": 1511275573, "post_id": 47409394, "comment_id": 81785325, "body": "Also, &quot;Using exit from a forked process will terminate both the child process and the parent process. As Tk::exit is imported by default one should use CORE::exit in the forked process instead.&quot;"}, {"owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "edited": false, "score": 0, "creation_date": 1511431000, "post_id": 47409394, "comment_id": 81859746, "body": "Thanks. I seem to understand there&#39;s a conflict between same fuctions defined into both thee aforementioned modules. Isn&#39;t there a way to remove (not importing) CORE::exit function from Tk or even Forks when declaring them at the beginning of the script?"}], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "edited": false, "score": 0, "creation_date": 1511430643, "post_id": 47420918, "comment_id": 81859462, "body": "Thanks mob. I just replaced the *CORE::GLOBAL::exit = $old_core_global_exit; line with the new one: $old_core_global_exit = sub (;$) { CORE::exit(@_) }; within the sub BEGIN. Unfortunately it doesn&#39;t work...the output it still the same. Reported bug seems the same as the Tk module one, included into the script. Any idea?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1511291586, "creation_date": 1511291586, "answer_id": 47420918, "question_id": 47409394, "link": "https://stackoverflow.com/questions/47409394/perl-tk-and-forks-mismatch-modules/47420918#47420918", "title": "PERL Tk and Forks Mismatch Modules", "body": "<p>It is a bug in the <code>forks</code> module. Not a terribly serious one, but the issue lies with the <code>forks</code> module.</p>\n\n<p>The perl builtin <code>exit</code> function should have a prototype</p>\n\n<pre><code>$ perl -E 'say prototype \"CORE::exit\"'\n;$\n</code></pre>\n\n<p>The <code>forks</code> module <a href=\"https://metacpan.org/source/RYBSKEJ/forks-0.36/lib/forks.pm#L551\" rel=\"nofollow noreferrer\">sometimes tries to redefine the <code>exit</code> function</a></p>\n\n<pre><code>{\n    no warnings 'redefine';\n    *CORE::GLOBAL::exit = $old_core_global_exit;\n}\n</code></pre>\n\n<p>but it does so with <a href=\"https://metacpan.org/source/RYBSKEJ/forks-0.36/lib/forks.pm#L496\" rel=\"nofollow noreferrer\">a subroutine that was not defined with a prototype</a></p>\n\n<pre><code># Keep reference to pre-existing exit function\nmy $old_core_global_exit;\nBEGIN {\n    $old_core_global_exit = sub { CORE::exit(@_) };\n}\n</code></pre>\n\n<p>Again, this is not a serious bug, but if you want to fix it, edit your copy of <code>forks.pm</code> to include a prototype in the sub definition</p>\n\n<pre><code>    $old_core_global_exit = sub (;$) { CORE::exit(@_) };\n</code></pre>\n\n<p>and if you want a permanent fix, <a href=\"https://metacpan.org/pod/release/RYBSKEJ/forks-0.36/lib/forks.pm#CURRENT-AUTHOR-AND-MAINTAINER\" rel=\"nofollow noreferrer\">contact the author</a> and make a bug report.</p>\n"}], "owner": {"reputation": 209, "user_id": 8516392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04539bf98f6da7d74908a7fae11df82e?s=128&d=identicon&r=PG&f=1", "display_name": "technoleap84", "link": "https://stackoverflow.com/users/8516392/technoleap84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511291586, "creation_date": 1511255991, "question_id": 47409394, "link": "https://stackoverflow.com/questions/47409394/perl-tk-and-forks-mismatch-modules", "title": "PERL Tk and Forks Mismatch Modules", "body": "<p>I'm developing a Perl multi-threading software for Windows and Linux, by using threads and forks modules respectively.\nEverything works fine with standard output directed to shell, however once i decide to produce a GUI by including Tk module into the script, just the Windows version of the app works fine (actually not really well, but the output is acceptable), as when i try to run it on Linux together with Forks module and a simple button starting the script, something went wrong.</p>\n\n<p>Below, you can find the error message associated with it:</p>\n\n<pre><code>***.button (1):\n 0 0x32bef88   IV f=00000001 undef(1)\nSV = IV(0x32bef78) at 0x32bef88\n  REFCNT = 1\n  FLAGS = ()\n  IV = 0\nPrototype mismatch: sub CORE::GLOBAL::exit (;$) vs none at /usr/local/lib/perl5/site_perl/5.26.0/x86_64-linux/forks.pm line 1509.***\n</code></pre>\n\n<p>The prototype mismatch could be linked with a common function embedded into both Tk and Forks modules, but honestly i don't know how to solve it.\nI've been trying to include specific 'forks' of 'Tk' functions, but no way to fix it.</p>\n\n<p>Thanks in advance for any help on this subject.</p>\n"}, {"tags": ["perl", "cgi", "lib"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1511255974, "post_id": 47409317, "comment_id": 81771940, "body": "What feature of .lib are you refering to?  Do you mean <code>use lib &quot;&#47;some&#47;path&quot;;</code> ?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1511256010, "post_id": 47409317, "comment_id": 81771967, "body": "<a href=\"http://perldoc.perl.org/lib.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/lib.html</a>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 3, "creation_date": 1511256029, "post_id": 47409317, "comment_id": 81771980, "body": "<i>&quot;, but the .cgi still doesn&#39;t work&quot;</i> that does not mean much, does not work how? it gives errors? It does not give errors? it does not stir the coffee?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511256271, "post_id": 47409317, "comment_id": 81772137, "body": "Welcome to Stack Overflow and the Perl tag. It seems you are learning Perl from a <i>very</i> out of date resource. Please take a look at the <a href=\"https://stackoverflow.com/tags/perl/info\">tag wiki</a>, where a lot of good, modern tutorials are mentioned. Next, please consider that CGI is an obsolete technology. It sure still works, but if you want to do something serious with the web, there are technologies that work better and make your life easier as a developer. I suggest to watch <a href=\"https://youtu.be/jKOqtRMT85s\" rel=\"nofollow noreferrer\">this talk</a> by the current release manager of the Perl programming language."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511256511, "post_id": 47409317, "comment_id": 81772307, "body": "To address the problem you are facing... as a debugging aid, try to run your script from the command line with <code>perl</code> (that&#39;s the interpreter, while <i>Perl</i> is the name of the language). The convention regarding library modules is to name them with a <i>.pm</i> ending, and put a <code>package</code> declaration inside, so your code <a href=\"http://perldoc.perl.org/perlmod.html\" rel=\"nofollow noreferrer\">in the module</a> has a different namespace. You <i>can</i> <code>require</code> other scripts, but that is a practice left over from Perl 4, which was 20 years ago. Don&#39;t do that. Write proper code instead."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511258285, "post_id": 47409317, "comment_id": 81773615, "body": "And as you seem to try to invent an implementation of your own CGI, look at <a href=\"http://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">the CGI module</a> on <a href=\"https://en.wikipedia.org/wiki/CPAN\" rel=\"nofollow noreferrer\">CPAN</a>. As <a href=\"https://youtu.be/jKOqtRMT85s\" rel=\"nofollow noreferrer\">the talk</a> mentioned above said, you shouldn&#39;t use it. But what you&#39;re doing is even worse."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511267592, "post_id": 47409317, "comment_id": 81779689, "body": "@simbabque you&#39;ve managed Sawyer to sound like <a href=\"https://www.youtube.com/watch?v=rLBehW71kAQ\" rel=\"nofollow noreferrer\">cartoon character</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511279389, "post_id": 47409317, "comment_id": 81788131, "body": "See <a href=\"https://stackoverflow.com/q/46549671/589924\">Doesn&#39;t Perl include current directory in @INC by default?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1511279254, "last_edit_date": 1592644375, "creation_date": 1511272162, "answer_id": 47414738, "question_id": 47409317, "link": "https://stackoverflow.com/questions/47409317/my-perl-code-does-not-seem-to-work-with-lib/47414738#47414738", "title": "My Perl code does not seem to work with .lib?", "body": "<p>Your descriptions of what the problem is are rather unclear.</p>\n<blockquote>\n<p>it doesn't work somehow</p>\n<p>the .cgi still doesn't work</p>\n</blockquote>\n<p>Without knowing what problems you're seeing, it's hard to know what the problem is. But I tried copying your code and running the program from the command line and I got this error message:</p>\n<blockquote>\n<p>Can't locate mysubs.lib in @INC (@INC contains: ...)</p>\n</blockquote>\n<p>So I think you are using a recent version of Perl and are running up against <a href=\"https://metacpan.org/pod/release/XSAWYERX/perl-5.26.0/pod/perldelta.pod#Removal-of-the-current-directory-(%22.%22)-from-@INC\" rel=\"nofollow noreferrer\">this change</a>:</p>\n<blockquote>\n<p><strong>Removal of the current directory (&quot;.&quot;) from @INC</strong></p>\n<p>The perl binary includes a default set of paths in @INC. Historically it has also included the current directory (&quot;.&quot;) as the final entry, unless run with taint mode enabled (perl -T). While convenient, this has security implications: for example, where a script attempts to load an optional module when its current directory is untrusted (such as /tmp), it could load and execute code from under that directory.</p>\n<p>Starting with v5.26, &quot;.&quot; is always removed by default, not just under tainting. This has major implications for installing modules and executing scripts.</p>\n</blockquote>\n<p>If this is the problem, then you can fix it by adding the script's directory to <code>@INC</code> as follows:</p>\n<pre><code>use FindBin qw( $RealBin );\nuse lib $RealBin;\n</code></pre>\n<p>before your call to <code>require</code>. If that doesn't solve your problem, perhaps you would consider sharing a little more detail about the problems that you are experiencing.</p>\n"}], "owner": {"reputation": 1, "user_id": 8306299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAuV.png?s=128&g=1", "display_name": "Blender Render Bend_Her", "link": "https://stackoverflow.com/users/8306299/blender-render-bend-her"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511279254, "creation_date": 1511255738, "last_edit_date": 1511258219, "question_id": 47409317, "link": "https://stackoverflow.com/questions/47409317/my-perl-code-does-not-seem-to-work-with-lib", "title": "My Perl code does not seem to work with .lib?", "body": "<p>I'm new to both Perl and its feature of .lib. </p>\n\n<p>I made this simple subroutine and saved it as a file with an extension of .lib</p>\n\n<pre><code>sub shorterline {   \nprint \"Content-type: text/html\\n\\n\";\n}\n\n1;\n</code></pre>\n\n<p>As I tried to insert the subroutine into the Perl file with an extension of .cgi below, it doesn't work somehow:</p>\n\n<pre><code>#!/usr/bin/perl\nrequire 'mysubs.lib'; \n\n\n&amp;shorterline; \nprint \"Hello, world!\";\n</code></pre>\n\n<p>I gave the .cgi the chmod permission, but the .cgi still doesn't work, what seem to be the problem ?</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1511240377, "post_id": 47405481, "comment_id": 81764480, "body": "<a href=\"https://stackoverflow.com/questions/44039354/how-to-create-table-for-my-perl-output-using-perl-cgi/44062497#44062497\">check this</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1511253741, "post_id": 47405481, "comment_id": 81770544, "body": "@mkHun: That answer demonstrates putting raw HTML into the Perl program. Surely, we&#39;re not still recommending that approach?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511258199, "post_id": 47405481, "comment_id": 81773560, "body": "Your question is very broad. You seem to have a list of value pairs, and you say you want to display that in a table. How do you want that to look? Should <code>$res[$ff]</code> be one column, and <code>$omg[$ff]</code> another column? Are there headings? Is there more data? Please <a href=\"https://stackoverflow.com/posts/47405481/edit\">edit</a> your question and include more details, so we know what to help you with. Please do <b>not</b> expect us to just write this code for you."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1511259418, "last_edit_date": 1511259418, "creation_date": 1511253658, "answer_id": 47408649, "question_id": 47405481, "link": "https://stackoverflow.com/questions/47405481/how-to-print-the-output-of-a-per-cgi-script-for-loop-in-table-format-using-html/47408649#47408649", "title": "how to print the output of a per CGI script for loop in table format using HTML tags", "body": "<p>I recommend creating a data structure that contains the data you're interested in.</p>\n\n<pre><code>my @rows;\n# Strange that you're getting the indexes from @phi\n# and the data from two different arrays, @res and @omg\nfor (0 .. $#phi) {\n  push @rows, {\n    res =&gt; $res[$_],\n    omg =&gt; sprintf('%0.2f', $omg[$_]),\n  };\n}\n</code></pre>\n\n<p>Then process that data using the <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow noreferrer\">Template Toolkit</a>.</p>\n\n<pre><code>use Template;\n\nmy $tt = Template-&gt;new;\n$tt-&gt;process('page.tt', { rows =&gt; \\%rows });\n</code></pre>\n\n<p>In <code>page.tt</code> you would have something like this:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Data Page&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Data Page&lt;/h1&gt;\n    &lt;table&gt;\n[% FOR row IN rows -%]\n      &lt;tr&gt;&lt;td&gt;[% rows.res %]&lt;/td&gt;&lt;td&gt;[% rows.omg %]&lt;/td&gt;&lt;/tr&gt;\n[% END -%]\n    &lt;/table&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Separating the presentation like this makes it far easier to change the way that your data is presented. You could even give the template to a front-end designer to make it look better - and they wouldn't need to know Perl.</p>\n"}], "owner": {"reputation": 3, "user_id": 8977088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7330d1910584158d33659697af401d31?s=128&d=identicon&r=PG&f=1", "display_name": "priya", "link": "https://stackoverflow.com/users/8977088/priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1511259418, "creation_date": 1511240084, "last_edit_date": 1511245932, "question_id": 47405481, "link": "https://stackoverflow.com/questions/47405481/how-to-print-the-output-of-a-per-cgi-script-for-loop-in-table-format-using-html", "title": "how to print the output of a per CGI script for loop in table format using HTML tags", "body": "<p>The following is my loop(written as a part of perl-CGI script). I want it to print in table in my webpage using html table tags. How shall I do that?</p>\n\n<pre><code>for($ff=0;$ff&lt;scalar @phi;$ff++)\n{\n\n    print $res[$ff],\"----&gt;\";\n    printf(\"%0.2f\",$omg[$ff]);\n   print \"&lt;br&gt;\";\n   print \"\\n\";\n\n\n}\n</code></pre>\n"}, {"tags": ["perl", "replace"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1511236905, "creation_date": 1511236905, "answer_id": 47404976, "question_id": 47404890, "link": "https://stackoverflow.com/questions/47404890/string-substitution-in-many-files/47404976#47404976", "title": "string substitution in many files", "body": "<p>Don't try to generate Perl code from a shell script! Use some other means (args, env, fd, file) to pass the information to the script.</p>\n\n<p>One solution:</p>\n\n<pre><code>for file in *.php; do\n    perl -i -pe'\n       BEGIN { local $/; $repl = &lt;STDIN&gt;; }\n       s/ReplaceThis/$repl/g;\n    ' \"$file\".txt &lt;\"$file\"\ndone\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 8340812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/963208ead237c9ef2c058263c5652d70?s=128&d=identicon&r=PG&f=1", "display_name": "Valerio", "link": "https://stackoverflow.com/users/8340812/valerio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 47404976, "answer_count": 1, "score": 1, "last_activity_date": 1511244572, "creation_date": 1511236305, "question_id": 47404890, "link": "https://stackoverflow.com/questions/47404890/string-substitution-in-many-files", "title": "string substitution in many files", "body": "<p>I am using the command</p>\n\n<pre><code>perl -pe 's/ReplaceThis/`cat T1.php`/ge' -i T1.php.txt\n</code></pre>\n\n<p>to substitute the string \"ReplaceThis\" in the file T1.php.txt with the content of the file T1.php, and it works fine. But I would like to do this for hundreds of files at once, Ti.php for 1&lt;=i&lt;=700. I am trying</p>\n\n<pre><code>for file in *.php; do perl -pe 's/ReplaceThis/`cat \"$file\"`/ge' -i \n\"$file\".txt ; done\n</code></pre>\n\n<p>but I get the error:\ncat: : No such file or directory<br>\nHow can I get this to work?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 2, "creation_date": 1511230529, "post_id": 47404094, "comment_id": 81762064, "body": "Do not link to external sites.  Provide a sample data set directly in the question, that we can try your script on and help you.  Also add an example of the output (you talk about it, but a visual output sample goes a long way)."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 0, "creation_date": 1511230927, "post_id": 47404094, "comment_id": 81762161, "body": "The dataset is very big..only three smallest entries are consisted of 2746 lines..thats why I put site to be clearer. But to make it simplified it looks like this: (just a second I will write it in next comment)"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 0, "creation_date": 1511231055, "post_id": 47404094, "comment_id": 81762193, "body": "ID   TNFA_HUMAN             Reviewed;         503 AA. AC   P37023; A6NGA8; DT   01-JUN-1994, integrated into UniProtKB/Swiss-Prot. DT   15-DEC-1998, sequence version 2. DT   25-OCT-2017, entry version 194. DE   RecName: Full=Serine/threonine-protein kinase receptor R3; DE            Short=SKR3; ... (and so on)..                                                                                        //                                                                                                                      ID   ERBB2_HUMAN       Reviewed;          567 AA..."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 0, "creation_date": 1511231484, "post_id": 47404094, "comment_id": 81762310, "body": "I cannot see the way of adding new line. It is much easier if You just click the link that is attached. Output should be a folder that has multiple files as. In the question I have descibred output in detail."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 4, "creation_date": 1511233364, "post_id": 47404094, "comment_id": 81762751, "body": "Do not add comments. Edit your question to clarify. Not all comments are always shown, and it is messy to find all the information digging through comments. Make it easy for people to help you."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1511256259, "post_id": 47409134, "comment_id": 81772126, "body": "Dave, thank You very much. I will go trough this book, I will take time and go trough it in detail. It&#39;s is better for me to learn in on right way from beginning then to struggle since I will have to deal with these kind of stuffs in the future. Thank You for this recommendation as well. Best!"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1511318086, "post_id": 47409134, "comment_id": 81806691, "body": "Dave, thank You once again for this book, it is nicely written book, with lots of interesting exercises. I cannot stop reading it. Thanks!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1511265869, "last_edit_date": 1511265869, "creation_date": 1511255160, "answer_id": 47409134, "question_id": 47404094, "link": "https://stackoverflow.com/questions/47404094/splitting-one-txt-file-into-multiple-txt-files-based-on-delimiter-and-naming-the/47409134#47409134", "title": "Splitting one txt file into multiple txt files based on delimiter and naming them with a specific character", "body": "<p>You still look like you're programming by guesswork. And you haven't made use of any of the advice you have been given in answers to your previous questions. I strongly recommend that you spend a week working through a good beginners book like <em>Learning Perl</em> and come back when you understand more about how Perl works.</p>\n\n<p>But here are some comments on your new code:</p>\n\n<pre><code>open (IDS, 'example.txt') or die \"Cannot open\";\n</code></pre>\n\n<p>You have been told that using lexical variables and the three-arg version of <code>open()</code> is a better approach here. You should also include <code>$!</code> in your error message, so you know what has gone wrong.</p>\n\n<pre><code>open my $ids_fh, '&lt;', 'example.txt'\n  or die \"Cannot open: $!\";\n</code></pre>\n\n<p>Then later on (I added the indentation in the while loop to make things clearer)...</p>\n\n<pre><code>my $i=0;\nwhile ($i eq $entry) {\n  print $ids[$i];\n};\n$i++;\n</code></pre>\n\n<p>The first time you enter this loop, <code>$i</code> is 1 and <code>$entry</code> is 25444. You compare them (as strings! You probably want <code>==</code>, not <code>eq</code>) to see if they are equal. Clearly they are different, so your while loop exits. Once the loop exits, you increment $i.</p>\n\n<p>This code bears no relation at all to the description of your problem. I'm not going to give you the answer, but here is the structure of what you need to do:</p>\n\n<pre><code>mkdir \"spliced_files\";\n\nlocal $/ = \"//\\n\"; # Always localise changes to special vars\n\nopen my $ids_fh, '&lt;', 'example.txt'\n  or die \"Cannot open: $!\";\n\n# No need to read the whole file in one go.\n# Process it a line at a time.\nwhile (&lt;$ids_fh&gt;) {\n  # Your record (the whole thing, not just the first line) is in $_.\n  # You need to extract the ID value from that string. Let's assume\n  # you've stored in it $id\n\n  # Open a file with the right name\n  open my $out_fh, '&gt;', \"spliced_files/$id\" or die $!;\n  # Print the record to the new file.\n  print $out_fh $_;\n}\n</code></pre>\n\n<p>But really, you need to take the time to learn about programming before you attack this task. Or, if you don't have the time for that, pay a programmer to do it for you.</p>\n"}], "owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 47409134, "answer_count": 1, "score": -4, "last_activity_date": 1511265869, "creation_date": 1511229933, "last_edit_date": 1511254111, "question_id": 47404094, "link": "https://stackoverflow.com/questions/47404094/splitting-one-txt-file-into-multiple-txt-files-based-on-delimiter-and-naming-the", "title": "Splitting one txt file into multiple txt files based on delimiter and naming them with a specific character", "body": "<p>I have a text file that looks like this <a href=\"http://www.uniprot.org/uniprot/?sort=score&amp;desc=&amp;compress=no&amp;query=id:P01375%20OR%20id:P04626%20OR%20id:P08238%20OR%20id:P06213&amp;format=txt\" rel=\"nofollow noreferrer\">http://www.uniprot.org/uniprot/?sort=score&amp;desc=&amp;compress=no&amp;query=id:P01375%20OR%20id:P04626%20OR%20id:P08238%20OR%20id:P06213&amp;format=txt</a>.   </p>\n\n<p>This file is contained of different entries that are divided with //. I think I have almost found the way how to divide txt file into multiple txt files whenever this specific pattern appears, but I still don't know how to name them after dividing and how to print them in specific directory. I would like that each file that is divided carries specific ID which is a first line nut second column in each entry. </p>\n\n<p>This is the code that I have wrote so far:                                                   </p>\n\n<pre><code>mkdir \"spliced_files\"; #directory where I would like to put all my splitted files\n$/=\"//\\n\";             # divide them whenever //appears and new line after this\nopen (IDS, 'example.txt') or die \"Cannot open\"; #example.txt is an input file\nmy @ids = &lt;IDS&gt;;\nclose IDS;\nmy $entry = 25444; #number of entries or //\\n characters\nmy $i=0;\nwhile ($i eq $entry) {\n  print $ids[$i];\n};\n$i++;\n</code></pre>\n\n<p>I am still having problem with finding how to split all entries from 'example.txt' file whenever \"//\\n\" and to print all this seperated files into directory spliced_files. In addition I would have to name all of these seperated files with the ID that is specific for each of these files or entries (which appears in the first row, but only a second column).</p>\n\n<p>So I expect output to be number of files in spliced_files directory, and each of them are named with their ID (first row, but only second column). For example name of the first file wiould be TNFA_HUMAN, od the second would be ERBB2_HUMAN and so on..)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1511227703, "post_id": 47403619, "comment_id": 81761321, "body": "What problem are you having? What does your data look like?"}, {"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511228047, "post_id": 47403619, "comment_id": 81761416, "body": "It seems that the code cannot add or subtract n,w,e,s from reading the file. I do not know if its the pattern or something else. Also the data looks somewhat like this: nnnwnsensnewsnsnswenswnesnweswneswesnwe"}, {"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 1, "creation_date": 1511228300, "post_id": 47403619, "comment_id": 81761482, "body": "Add a sample file to the question."}, {"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "edited": false, "score": 0, "creation_date": 1511228859, "post_id": 47403619, "comment_id": 81761621, "body": "The sample file (randwalk1) looks like this: ensweswewnnewwwsweenwsssssnewwennnesewewwewsnnewwwsewsenssns&zwnj;&#8203;newnwssswennesnseewn&zwnj;&#8203;wsnwnwnnwwwewes neesnwnsenwsnnnewwswnnneesswssnswenwsnnwewswwsnennneeeeswewe&zwnj;&#8203;wnwnswnnnssnnwnsnnns&zwnj;&#8203;enwwnsweeneeewn nswewnenwnesssnnsseswewensswnseessnwswwnesewnnnnweeensnweswn&zwnj;&#8203;sesnwwwneeeweswswsnn&zwnj;&#8203;wnsesnneensenen wnsswwnneswwsennsewswwwnewwwsnswnwweesewwwwsnnsenwewssssnsee&zwnj;&#8203;nwwsswneseswwnwwwwwn&zwnj;&#8203;esnesnwenesnwns ensweswewnnewwwsweenwsssssnewwennnesewewwewsnnewwwsewsenssns&zwnj;&#8203;newnwssswennesnseewn&zwnj;&#8203;wsnwnwnnwwwewes neesnwnsenwsnnnewwswnnneesswssnswenwsnnwewswwsnennneeeeswewe&zwnj;&#8203;wnwnswnnns"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 1, "creation_date": 1511233560, "post_id": 47403619, "comment_id": 81762794, "body": "Edit your answer to provide additional information, don&#39;t add comments. Not all comments are always shown, and formatting is poor in comments. Put everything in one place, make it easy to help you."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "edited": false, "score": 0, "creation_date": 1511233200, "post_id": 47403965, "comment_id": 81762695, "body": "Thank you soooo much. This really helps. I just have one more question related to this. Imagine if this program was a man walking according to this code in a grid going n,s,w,e. I want to find how many times the man would return to the origin. Thanks again."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1513092764, "last_edit_date": 1513092764, "creation_date": 1511229056, "answer_id": 47403965, "question_id": 47403619, "link": "https://stackoverflow.com/questions/47403619/program-is-based-on-a-man-walking-around-a-city-perl/47403965#47403965", "title": "Program is based on a man walking around a city (Perl)", "body": "<p>You check if the line has an <code>n</code>, you find one, then you ignore the rest of the line. You need to check each character of the line.</p>\n\n<pre><code>my $home_returns = 0;\nmy $ns = 0;\nmy $ew = 0;\nwhile (my $line = &lt;&gt;) {\n   chomp($line);\n   for my $char (split //, $line) {\n      if    ($char eq \"n\") { ++$ns; }\n      elsif ($char eq \"s\") { --$ns; }\n      elsif ($char eq \"e\") { ++$ew; }\n      elsif ($char eq \"w\") { --$ew; }\n\n      ++$home_returns if $ns == 0 &amp;&amp; $ew == 0;\n   }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $home_returns = 0;\nmy %counts = map { $_ =&gt; 0 } qw( n s e w );\nwhile (my $line = &lt;&gt;) {\n   chomp($line);\n   for my $char (split //, $line) {\n      ++$counts{$char};\n      ++$home_returns\n         if $counts{n} == $counts{s}\n         &amp;&amp; $counts{e} == $counts{w};\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8773945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-Q0_zSi4JhAg/AAAAAAAAAAI/AAAAAAAAABs/-Ayo_35458M/photo.jpg?sz=128", "display_name": "Mohammad Khalid", "link": "https://stackoverflow.com/users/8773945/mohammad-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 47403965, "answer_count": 1, "score": -1, "last_activity_date": 1513092764, "creation_date": 1511226250, "last_edit_date": 1511280113, "question_id": 47403619, "link": "https://stackoverflow.com/questions/47403619/program-is-based-on-a-man-walking-around-a-city-perl", "title": "Program is based on a man walking around a city (Perl)", "body": "<p>I am trying to read a file that contains the letters 'n', 's', 'e', 'w'.</p>\n\n<p>How do I look for these letters and add them to a variable called <code>$ns</code> and <code>$ew</code>,</p>\n\n<ul>\n<li><p><code>$ns</code> means to add 'n' or subtract 's'.</p></li>\n<li><p><code>$ew</code> means to add 'e' or subtract 'w'.</p></li>\n</ul>\n\n<p>This is what I have:</p>\n\n<pre><code>open (FILE, 'randwalk1')\n\nor die \"Could not open file\";\n\nmy $ns = 0;\n\nmy $ew = 0;\n\nwhile (my $file1 = &lt;FILE&gt;) {\n    if ($file1 =~ /n+/) {\n        $ns = $ns + 1;\n    } elsif ($file1 =~ /s/) {\n        $ns = $ns - 1;\n    } elsif ($file1 =~ /e/) {\n        $ew = $ew + 1;\n    } elsif ($file1 =~ /w/) {\n        $ew = $ew - 1;\n    }\n}\n</code></pre>\n\n<p>The input file (<code>randwalk1</code>) looks like:</p>\n\n<pre><code>ensweswewnnewwwsweenwsssssnewwennnesewewwewsnnewwwsewsenssns\u200c\nnewnwssswennesnseewn\u200c\u200bwsnwnwnnwwwewes\nneesnwnsenwsnnnewwswnnneesswssnswenwsnnwewswwsnennneeeeswewe\u200c\u200b  \n</code></pre>\n"}, {"tags": ["jquery", "perl", "named-pipes", "stdio", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511256050, "post_id": 47403095, "comment_id": 81771992, "body": "Your idea of a web socket sounds correct. But it&#39;s possible that your pipe doesn&#39;t flush often, so you only get the output into your web app once it&#39;s done. As an alternative, I believe that you can send chunked responses back through a regular request with Mojo. You&#39;d have to probably build some stuff yourself to make it send line data, and you would have to pick a content type that does not need the end of the data to deserialize, like plain text. However I&#39;m not aware of a jQuery plugin that can deal with this kind of stream. They are mostly meant for AJAX, so they define success callbacks."}, {"owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511276771, "post_id": 47403095, "comment_id": 81786229, "body": "Thanks for the reply, simbabque. I am fairly certain that the delay is at the writing end of the named pipe. I just can&#39;t seem to get it to do line buffering, so it doesn&#39;t write anything until it is closed. I&#39;m currently using Mojo::IOLoop-&gt;subprocess() and IPC::Run3/IPC::Run to execute the script, with output directed to the pipe. I am interested in your thinking of using chunked responses from Mojo. I might pursue that. I&#39;ve never been very good with the click-bang disconnect between web clients and servers."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511282176, "post_id": 47403095, "comment_id": 81790175, "body": "Good job about finding the buffering variable <code>$|</code>. I had assumed you already did that. Anyway, have you considered rewriting those scripts into Perl modules and using them in your Mojo app directly? If you still need them to be cronjobs, have the script just use the module, too. There are a lot of examples of how that looks in CPAN modules that bring shell utilities with them, like <a href=\"https://metacpan.org/source/SIMBABQUE/App-CGIThis-0.003/bin/cgi_this\" rel=\"nofollow noreferrer\">my <code>cgi_this</code> script</a>, that turns a directory into a temporary web server."}, {"owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511304257, "post_id": 47403095, "comment_id": 81802876, "body": "I was trying to get by without having to modify the scripts at all. Yes, I have considered putting the script logic into modules, but wanted to wait and see if that gave me any benefit. It still seems like I would need an IPC (such as named pipe) to pass the output of the report to the web socket, unless I can them to run as one. I can see that I could get around buffering issues (by using one of the IPC::* modules), but so far I don&#39;t have enough to push me into doing that."}], "owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511279329, "creation_date": 1511222164, "last_edit_date": 1511279329, "question_id": 47403095, "link": "https://stackoverflow.com/questions/47403095/pass-external-script-output-to-mojolicious-app", "title": "Pass external script output to Mojolicious app", "body": "<p>I have a suite of cron Perl scripts that generate spreadsheet files. I want to change these into on-demand Web forms that download the generated file. Some scripts can take more than a minute to run.</p>\n\n<p>I have created a Mojolicious app that that generates a form. Using jQuery, the POST runs the script and eventually prompts the user to download the generatted spreadsheet file. This is working fine.</p>\n\n<p>My problem is that I want the user to see the stdout that is generated from the script. I'm currently just using a dumb spinner while the script is running. What is the best design for doing this? I thought I would use a named pipe and a websocket, using a second thread, to receive the output and show it in the browser. I seem to be having a problem with buffering in this case. I get the output, but only after the script has completed. I'm very aware of line buffering, but I just can't seem to get Perl to do this.</p>\n\n<p>Is there a better way than this? Would I be able to push the data to the browser, using the same Mojolicious process that is controlling the script?</p>\n\n<p>I can supply my code, but since I'm not sure if it is even the correct design, I don't really want to steer you in the wrong direction. I'm not looking for code or fine details, but just general design help.</p>\n\n<p><strong>EDIT:</strong> I have been hitting my head against a wall, trying to get my script to do line buffering. No matter what an outside source says to do, it (Perl) will control the output. I will have to add this at the top of every script, if I want to force buffering:</p>\n\n<pre><code>select STDOUT;\n$|=1;\n</code></pre>\n"}, {"tags": ["javascript", "perl", "logical-operators"], "comments": [{"owner": {"reputation": 24739, "user_id": 1790644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1a2a40ddbc52508d5b53e9879961251?s=128&d=identicon&r=PG", "display_name": "Matt Clark", "link": "https://stackoverflow.com/users/1790644/matt-clark"}, "edited": false, "score": 1, "creation_date": 1511203934, "post_id": 47399077, "comment_id": 81751329, "body": "This is correct. <code>unless(expr) == if (!expr)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1511204872, "last_edit_date": 1511204872, "creation_date": 1511204415, "answer_id": 47399215, "question_id": 47399077, "link": "https://stackoverflow.com/questions/47399077/unless-in-perl-equivalent-to-in-javascript/47399215#47399215", "title": "unless in perl equivalent to ! in javascript?", "body": "<p>In Perl, <code>unless (EXPR)</code> is completely equivalent to <code>if ( !(EXPR) )</code>.</p>\n\n<p>The <code>EXPR</code> is an expression which is evaluated in scalar context, imposed by <code>if</code> (and <code>unless</code>). I've added parenthesis in <code>!(EXPR)</code> as a reminder to watch for precedence as <code>!</code> binds tightly.</p>\n\n<p>Note that you'll more often see <code>not</code> instead of <code>!</code> and that they <a href=\"https://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"nofollow noreferrer\">bind differently</a>, where <code>not</code> has very low precedence.</p>\n"}], "owner": {"reputation": 1480, "user_id": 2859926, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2713819bc9f55e03e9453eef1c58342e?s=128&d=identicon&r=PG&f=1", "display_name": "JoaoFilipeClementeMartins", "link": "https://stackoverflow.com/users/2859926/joaofilipeclementemartins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 47399215, "answer_count": 1, "score": 2, "last_activity_date": 1511246052, "creation_date": 1511203783, "last_edit_date": 1511246052, "question_id": 47399077, "link": "https://stackoverflow.com/questions/47399077/unless-in-perl-equivalent-to-in-javascript", "title": "unless in perl equivalent to ! in javascript?", "body": "<p>if I have an expression in perl:</p>\n\n<p><code>isOK</code> is a property of record. it is 1 or 0.</p>\n\n<pre><code>unless ( record.isOK )\n</code></pre>\n\n<p>My understanding is that is equivalent in javascript to:</p>\n\n<pre><code>if ( !record.isOK )\n</code></pre>\n\n<p>so <code>unless</code> corresponds in javascript to whatever the logical expression is with <code>!</code> before.</p>\n\n<p>Is this correct?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1511189635, "post_id": 47394705, "comment_id": 81742603, "body": "@toolic That&#39;s what I thought to use. But I was trying to search, if there is something built in available. I didn&#39;t find any, so posted."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "edited": false, "score": 0, "creation_date": 1511189864, "post_id": 47394821, "comment_id": 81742757, "body": "Mine is perl 5.10.1. I see : Type of arg 1 to each must be hash (not private array) at test.pl line 8, near &quot;@array ) &quot; Execution of test.pl aborted due to compilation errors."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "edited": false, "score": 0, "creation_date": 1511189916, "post_id": 47394821, "comment_id": 81742784, "body": "Damn. Bad luck. Then you have to use a separate <code>$index</code> variable."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511190299, "post_id": 47394821, "comment_id": 81743020, "body": "I wonder if that use of <code>each</code> has the same pitfalls regarding the internal counter as it does on hashes."}, {"owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "edited": false, "score": 0, "creation_date": 1511190350, "post_id": 47394821, "comment_id": 81743051, "body": "@PerlDuck Yeah, I am using something like that now. Thank you so much. Thanks Dave :)"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511190712, "post_id": 47394821, "comment_id": 81743293, "body": "@simbabque Interesting question. I&#39;ve no idea and only rarely used <code>each</code> with arrays. And when, it was as simple as above."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511191702, "post_id": 47394821, "comment_id": 81743976, "body": "The problem is that if you put that in a function and call it several times, the internal hash pointer might shoot you in the foot."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1511189662, "creation_date": 1511189662, "answer_id": 47394821, "question_id": 47394705, "link": "https://stackoverflow.com/questions/47394705/how-to-find-the-index-number-of-an-array-while-already-looping-through-it-in-pe/47394821#47394821", "title": "How to find the index number of an array, while already looping through it in perl?", "body": "<p>Since Perl 5.12 you can use <a href=\"https://perldoc.perl.org/functions/each.html\" rel=\"nofollow noreferrer\">each</a> for arrays (before it worked only with hashes).</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @array = qw(a b c);\n\nwhile( my ($idx, $val) = each @array ) {\n    print \"idx=$idx, val=$val\\n\";\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>idx=0, val=a\nidx=1, val=b\nidx=2, val=c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 8, "last_activity_date": 1511191785, "last_edit_date": 1511191785, "creation_date": 1511189980, "answer_id": 47394942, "question_id": 47394705, "link": "https://stackoverflow.com/questions/47394705/how-to-find-the-index-number-of-an-array-while-already-looping-through-it-in-pe/47394942#47394942", "title": "How to find the index number of an array, while already looping through it in perl?", "body": "<p>Don't loop over the array's elements; loop over the array's indexes instead.</p>\n\n<pre><code>for (0 .. $#array) {\n  print \"The value : $array[$_]\\n\";\n  print \"The current index : $_\\n\";\n}\n</code></pre>\n\n<p>Given an array called <code>@array</code>, the special variable <code>$#array</code> will contain the index of the last element in the array. Therefore the range <code>0 .. $#array</code> will produce a list of all of the indexes in the array.</p>\n"}], "owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1511191785, "creation_date": 1511189319, "last_edit_date": 1511190240, "question_id": 47394705, "link": "https://stackoverflow.com/questions/47394705/how-to-find-the-index-number-of-an-array-while-already-looping-through-it-in-pe", "title": "How to find the index number of an array, while already looping through it in perl?", "body": "<p>I have something similar to this:</p>\n\n<pre><code>for (@array) {\n    print \"The value : $_ \\n\";\n    print \"The current index : ???\";\n}\n</code></pre>\n\n<p>But I do not understand, how can I get the current index of <code>@array</code> when looping like this. Please help :)</p>\n"}, {"tags": ["linux", "perl", "memory-leaks", "tk"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1511201512, "post_id": 47394341, "comment_id": 81750014, "body": "Please lay out your code properly so that we can read it. It helps a lot to avoid tab characters."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511201824, "post_id": 47394341, "comment_id": 81750188, "body": "I can&#39;t find any reference to <code>packetForget</code> on the internet; certainly not in the <code>Tk</code> library. Where did you find this advice?"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1511202232, "post_id": 47394341, "comment_id": 81750394, "body": "You have to call. $widget-&gt;packForget() to &quot;unrealize&quot; your widget,  instead of packetForget()"}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1511202644, "post_id": 47394341, "comment_id": 81750611, "body": "I meant packForget() it does not work. [$mw=&gt;&#39;packForget&#39;] does nothing (the window does not close."}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 1, "creation_date": 1511202943, "post_id": 47394341, "comment_id": 81750765, "body": "The packForget() if i remember right is for widget within a window. For the main window or other toplevel see the metod withdraw()"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511210092, "post_id": 47394341, "comment_id": 81754707, "body": "I tested your code, and it works fine here (Ubuntu 17.04, perl version 5.26.1, Tk version 804.034)"}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511274638, "post_id": 47394341, "comment_id": 81784664, "body": "@H&#229;konH&#230;gland To make it so that you can reproduce the error I would need to post more code. Do you know if there is a way for me to edit and add to my original post?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511274848, "post_id": 47394341, "comment_id": 81784808, "body": "@gatorreina Yes you can add to or update your question by clicking the &quot;edit&quot; button below it.."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1511275912, "post_id": 47394341, "comment_id": 81785576, "body": "@H&#229;konH&#230;gland To reproduce this on a linux machine copy and paste. When you execute pick &quot;OCP Docs&quot; at the first window dialog box. It will then pull up a second check box window. At that second window select any combination and press ok. Continue doing this a few times and the memory leak occurs. Just reproduced it on a debian machine."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511289861, "post_id": 47394341, "comment_id": 81795012, "body": "Why do you think there&#39;s a memory leak?"}], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1511299360, "post_id": 47420893, "comment_id": 81800498, "body": "Thanks for the reply. Unfortunately, I get the same result and error message with -command =&gt; sub { check_sub( $mw ) })-&gt;pack(-side =&gt; &quot;left&quot;); Not sure how I can make it work without the named inner sub, but will try to figure it out."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1511327594, "post_id": 47420893, "comment_id": 81808963, "body": "Note that you must also modify <code>check_sub</code> to unpack the passed <code>$mw</code> argument. In the beginning of <code>check_sub</code> you do <code>my ($mw) = @_</code> to overwrite the closure of <code>$mw</code>."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1511363738, "post_id": 47420893, "comment_id": 81830717, "body": "Thank you. That indeed stopped the error on the subsequent executions. However, the $doc_string scalar does not get passed (returned) after the first time -- which is kinda of the whole point of the code -- any idea why?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1511369204, "post_id": 47420893, "comment_id": 81834660, "body": "@gatorreina Great! Now I would suggest you also pass a reference to <code>$doc_string</code> to <code>check_sub()</code> for the same reasons as before: to get the correct version of the variable. <a href=\"https://pastebin.com/yEZZgDH0\" rel=\"nofollow noreferrer\">Here</a> is an example that worked for me."}, {"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1511663117, "post_id": 47420893, "comment_id": 81940208, "body": "Your solution worked. Thank you very much for the help."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1511293134, "last_edit_date": 1511293134, "creation_date": 1511291482, "answer_id": 47420893, "question_id": 47394341, "link": "https://stackoverflow.com/questions/47394341/perk-tk-memory-leak/47420893#47420893", "title": "Perk Tk Memory leak", "body": "<p>Yes I can now reproduce the behavior you described. Seems like the problem is related to the inner sub named <code>check_sub</code> (located inside the <code>carr_docs_box</code> sub):</p>\n\n<pre><code>sub check_sub {\n    [...]\n\n    $mw-&gt;destroy;  # &lt;-- closure over the `$mw` variable\n}\n</code></pre>\n\n<p>Named inner subs are stored in a global namespace at compile time, see <a href=\"https://stackoverflow.com/q/10192228/2173773\">Nested subroutines and Scoping in Perl</a>. So when they are used as a closure over lexical variables in an outer sub, that might not be the variable that you expect. In your case, the <code>$mw</code> in the inner sub is not referring to the <code>$mw</code> in the outer sub in its second invocation. To fix it, you can pass the correct <code>$mw</code> explicitly in the <code>$ok_button</code>'s command. So instead of </p>\n\n<pre><code>my $ok_button = $button_frame-&gt;Button(\n    -text =&gt; 'OK',\n    -command =&gt; \\&amp;check_sub)-&gt;pack(-side =&gt; \"left\");\n</code></pre>\n\n<p>you can do:</p>\n\n<pre><code>my $ok_button = $button_frame-&gt;Button(\n    -text =&gt; 'OK',\n    -command =&gt; sub { check_sub( $mw ) })-&gt;pack(-side =&gt; \"left\");\n</code></pre>\n\n<p>Another option is to not used named inner subs in the first place, this will probably save you and future maintainers some confusion. This is what I would do.</p>\n\n<p>Also note that after Perl version 5.18, you can declare lexical subs, see <a href=\"https://perldoc.perl.org/perlsub.html#Lexical-Subroutines\" rel=\"nofollow noreferrer\"><code>perldoc perlsub</code></a> for more information. Then, defining <code>check_sub</code> as lexical (using <code>my sub check_sub { ... }</code> would also solve the problem with closure.</p>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 47420893, "answer_count": 1, "score": 2, "last_activity_date": 1511293134, "creation_date": 1511188092, "last_edit_date": 1511289522, "question_id": 47394341, "link": "https://stackoverflow.com/questions/47394341/perk-tk-memory-leak", "title": "Perk Tk Memory leak", "body": "<p>I have the perl Tk subroutine below that when run repeatedly on some of the Centos 6 machines on our small private LAN get the following error:</p>\n\n<pre><code> 0 0x95ac3b8 PVMG f=0008e507 {}(1)(3)\nSV = PVMG(0x9471dc0) at 0x95ac3b8\n  REFCNT = 3\n  FLAGS = (PADBUSY,PADMY,GMG,SMG,RMG,ROK)\n  IV = 0\n  NV = 0\n  RV = 0x95c2060\n  PV = 0x95c2060 \"\"\n  CUR = 0\n  LEN = 0\n  MAGIC = 0x95dfa38\n    MG_VIRTUAL = 0x28173c\n    MG_TYPE = PERL_MAGIC_ext(~)\n    MG_FLAGS = 0x02\n      REFCOUNTED\n    MG_OBJ = 0x95c239c\n        SV = PV(0x95d26bc) at 0x95c239c\n          REFCNT = 1\n          FLAGS = ()\n          PV = 0x95dfbf0 \"\"\n          CUR = 0\n          LEN = 16\nTk::Error: Usage $widget-&gt;destroy(...) at ./Tk_carr_docs_check_box.pl line 89.\n Tk callback for .frame1.button\n Tk::__ANON__ at /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/Tk.pm line 250\n Tk::Button::butUp at /usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/Tk/Button.pm line 175\n &lt;ButtonRelease-1&gt;\n (command bound to event)\n</code></pre>\n\n<p>I have read that this is caused because destroy is called and that I should use packForget() instead. However, I have not been able to understand how to substitute packForget() for destroy. I have tried various methods such as replacing 'destroy' with 'packForget', packForget(), pack->('forget'), in a subroutine with $mw->packForget() but none has worked. Does anyone know how I can replace destroy with packForget in this case to see if it cures my memory leak problem?</p>\n\n<p>To reproduce this on a linux machine copy and paste. When you execute pick \"OCP Docs\" at the first window dialog box. It will then pull up a second check box window. At that second window select any combination and press ok. Continue doing this a few times and the memory leak occurs. Just reproduced it on a debian machine.</p>\n\n<pre><code>#!/usr/bin/perl\n\n#####################\nsub choose_doc_type {\n#####################\n\nuse strict;\nuse Tk;\nuse Tk::LabFrame;\n\nmy $mw = MainWindow-&gt;new;\n# Mainwindow: sizex/y, positionx/y\n$mw-&gt;geometry(\"210x260-0+0\");\n\n# Default value\nmy $doc_type = \"\";\n\n    my $frame = $mw-&gt;LabFrame(\n        -label =&gt; \"Fax/Doc Type\",\n        -labelside =&gt; 'acrosstop',\n        -width =&gt; 180,\n        -height =&gt; 200,\n        )-&gt;place(-x=&gt;10,-y=&gt;10);\n\n    # Put these values into the frame\n    $frame-&gt;Radiobutton(\n        -variable =&gt; \\$doc_type,\n        -value =&gt; 'RC_SAVE',\n        -text =&gt; 'Docs for RC',\n        )-&gt;place( -x =&gt; 10, -y =&gt; 5 );\n    $frame-&gt;Radiobutton(\n        -variable =&gt; \\$doc_type,\n        -value =&gt; 'OCP_SAVE',\n        -text =&gt; 'OCP Docs',\n        )-&gt;place( -x =&gt; 10, -y =&gt; 30 );\n    $frame-&gt;Radiobutton(\n        -variable =&gt; \\$doc_type,\n        -value =&gt; 'NV_SAVE',\n        -text =&gt; 'New Vendor Docs.',\n        )-&gt;place( -x =&gt; 10, -y =&gt; 55 );\n        $frame-&gt;Radiobutton(\n        -variable =&gt; \\$doc_type,\n        -value =&gt; 'DELETE',\n        -text =&gt; 'Junk. Delete it',\n        )-&gt;place( -x =&gt; 10, -y =&gt; 80 );\n         $frame-&gt;Radiobutton(\n        -variable =&gt; \\$doc_type,\n        -value =&gt; 'NADA',\n        -text =&gt; 'Leave it.',\n        )-&gt;place( -x =&gt; 10, -y =&gt; 105 );\n         $frame-&gt;Radiobutton(\n                -variable =&gt; \\$doc_type,\n                -value =&gt; 'SAVE_FAX',\n                -text =&gt; 'Other - Save it',\n        )-&gt;place( -x =&gt; 10, -y =&gt; 130 );\n          $frame-&gt;Radiobutton(\n                -variable =&gt; \\$doc_type,\n                -value =&gt; 'AP_SAVE',\n                -text =&gt; 'AP Docs',\n                )-&gt;place( -x =&gt; 10, -y =&gt; 130 );\n\n\nmy $button_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; \"bottom\");\nmy $ok_button = $button_frame-&gt;Button(-text =&gt; 'OK',\n        -command =&gt; [$mw=&gt;'destroy']\n                 )-&gt;pack(-side =&gt; \"left\");      \nMainLoop;\n\n#print $doc_type . \"\\n\";\n#chomp (my $jj = &lt;STDIN&gt;);\nreturn $doc_type;\n\n############################\n} # end of sub choose doc type\n############################\n\n#####################\nsub carr_docs_box {\n#####################\n\n    my ($c_no) = @_;\n\nuse Tk;\nuse strict;\n\nmy $mw = MainWindow-&gt;new;\n$mw-&gt;geometry(\"180x270-0-30\");\n$mw-&gt;title(\"Check Button Select\");\n\nmy @check;\nmy $doc_string;\n\n$check[1];\n$check[2];\n$check[3];\n$check[4];\n$check[5];\n$check[6];\n$check[7];\n$check[8];\n$check[9];\n\n\nmy $check_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; \"top\");\n$check_frame-&gt;Label(-text=&gt;\"Select Included Documents.\")-&gt;pack(-side =&gt; \"top\")-&gt;pack();\n\nmy @chk;\n\n$chk[1] = $check_frame-&gt;Checkbutton(-text =&gt; 'BC Agrm',\n                                     -variable =&gt; \\$check[1],\n                                     -onvalue =&gt; '_BCA',\n                                     -offvalue =&gt; '')-&gt;pack();\n\n$chk[2] = $check_frame-&gt;Checkbutton(-text =&gt; 'Bond',\n                                     -variable =&gt; \\$check[2],\n                                     -onvalue =&gt; '_ATH',\n                                     -offvalue =&gt; '')-&gt;pack();\n\n$chk[3] = $check_frame-&gt;Checkbutton(-text =&gt; 'Gen Liab. Insr.',\n                                     -variable =&gt; \\$check[3],\n                                     -onvalue =&gt; '_INL',\n                                     -offvalue =&gt; '')-&gt;pack();\n\n$chk[4] = $check_frame-&gt;Checkbutton(-text =&gt; 'Auto Insr.',\n                                     -variable =&gt; \\$check[4],\n                                     -onvalue =&gt; '_INC',\n                                     -offvalue =&gt; '')-&gt;pack();\n\n$chk[5] = $check_frame-&gt;Checkbutton(-text =&gt; 'Indp. Contractor',\n                                     -variable =&gt; \\$check[5],\n                                     -onvalue =&gt; '_IND',\n                                     -offvalue =&gt; '')-&gt;pack();\n\n$chk[6] = $check_frame-&gt;Checkbutton(-text =&gt; 'Profile',\n                                     -variable =&gt; \\$check[6],\n                                     -onvalue =&gt; '_PRF',\n                                     -offvalue =&gt; '')-&gt;pack();\n\n$chk[7] = $check_frame-&gt;Checkbutton(-text =&gt; 'W9 Form',\n                                     -variable =&gt; \\$check[7],\n                                     -onvalue =&gt; '_W9',\n                                     -offvalue =&gt; '')-&gt;pack();\n\n$chk[8] = $check_frame-&gt;Checkbutton(-text =&gt; 'Rush Pay Agrm.',\n                                     -variable =&gt; \\$check[8],\n                                     -onvalue =&gt; '_RP',\n                                     -offvalue =&gt; '')-&gt;pack();\n\n$chk[9] = $check_frame-&gt;Checkbutton(-text =&gt; 'Other',\n                                     -variable =&gt; \\$check[9],\n                                     -onvalue =&gt; '_OTH',\n                                     -offvalue =&gt; '')-&gt;pack();\n\nmy $button_frame = $mw-&gt;Frame()-&gt;pack(-side =&gt; \"bottom\");\nmy $ok_button = $button_frame-&gt;Button(-text =&gt; 'OK',\n                                       -command =&gt; \\&amp;check_sub)-&gt;pack(-side =&gt; \"left\");\n\n# summary sub\nsub check_sub {\n\n    # check to see if they selected quick Pay\n    if ($check[8] eq '_RP') { # user says that recvd a Rush Pay agrm\n\n    # verify rush pay agrm and set up rush pay\n    rush_pay_set_up($c_no);\n\n    }\n\n      $doc_string = join \"\", @check;\n      #print \"Doc \" . $doc_string . \"\\n\";\n      #chomp (my $TT=&lt;STDIN&gt;);\n\n      $mw-&gt;destroy;\n}\n\nMainLoop;\n\nreturn $doc_string;\n\n#########      \n} # end of sub\n############\n\nmy $dt; # type of documents viewed\nmy $quit = 'n';\nmy $test_cno = 1111;\n\nwhile ($quit ne 'q') {\n\n    ($dt) = choose_doc_type();\n     print \"quit equals: $quit\\n\";\n    if ($dt eq 'OCP_SAVE') { # Classify vendor docs.\n\n    my $doc_string = carr_docs_box($test_cno);  \n    print \"Doc String would be: \" . $doc_string . \"\\n\";\n    sub { exit; }\n    }\n    print \"Press (q) to quit Enter to continue any other key to quit.\\n\";\n    chomp ($quit = &lt;STDIN&gt;);\n\n\n} \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1511185966, "post_id": 47393582, "comment_id": 81740161, "body": "Probably unrelated, but that <code>eq</code> should be <code>==</code> for comparing non-string values"}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 3, "last_activity_date": 1511193176, "last_edit_date": 1511193176, "creation_date": 1511186028, "answer_id": 47393674, "question_id": 47393582, "link": "https://stackoverflow.com/questions/47393582/scalar-found-where-operator-expected/47393674#47393674", "title": "Scalar found where operator expected", "body": "<p>See <code>perldoc perlsyn</code>:</p>\n\n<blockquote>\n<pre><code>if (EXPR) BLOCK\nif (EXPR) BLOCK else BLOCK\nif (EXPR) BLOCK elsif (EXPR) BLOCK ...\nif (EXPR) BLOCK elsif (EXPR) BLOCK ... else BLOCK\n</code></pre>\n</blockquote>\n\n<p>\u2026 an <code>if</code> statement must be followed by a <strong>block</strong>, not an expression.</p>\n\n<pre><code>if (($n%10)%2 eq 0) {\n    $k = $k+1;\n}\n$n = $n/10;\n</code></pre>\n\n<p>You could also use <code>if</code> as a statement modifier:</p>\n\n<blockquote>\n<pre><code>Any simple statement may optionally be followed by a SINGLE modifier, just\nbefore the terminating semicolon (or block ending). The possible modifiers\nare:\n\n    if EXPR\n</code></pre>\n</blockquote>\n\n<p>\u2026 in which case your code would look like:</p>\n\n<pre><code>$k = $k+1 if ($n%10)%2 eq 0;\n$n = $n/10;\n</code></pre>\n\n<p>\u2026 but <a href=\"http://search.cpan.org/dist/Perl-Critic/lib/Perl/Critic/Policy/ControlStructures/ProhibitPostfixControls.pm\" rel=\"nofollow noreferrer\">this usage is discouraged</a>.</p>\n\n<hr>\n\n<p>Aside: Compare numbers with <code>==</code> not <code>eq</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1511186743, "creation_date": 1511186743, "answer_id": 47393919, "question_id": 47393582, "link": "https://stackoverflow.com/questions/47393582/scalar-found-where-operator-expected/47393919#47393919", "title": "Scalar found where operator expected", "body": "<p>I'm guessing you have previous experience in a programming language where block markers are optional if an <code>if</code> block contains only a single statement. In Perl they are always required.</p>\n\n<pre><code>if (($n%10)%2 == 0) {\n    $k = $k+1;\n}\n$n = $n/10;\n</code></pre>\n\n<p>I've also changed <code>eq</code> to <code>==</code> - as it looks like you are comparing numbers, not strings.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1511195224, "creation_date": 1511195224, "answer_id": 47396656, "question_id": 47393582, "link": "https://stackoverflow.com/questions/47393582/scalar-found-where-operator-expected/47396656#47396656", "title": "Scalar found where operator expected", "body": "<p>You're using Perl to write Python code. It's much better for Perl code!</p>\n\n<pre><code>while ($n&gt;0)\n{\n   if (($n%10)%2 eq 0)\n   $k = $k+1;\n   $n = $n/10;\n}\n</code></pre>\n\n<p>You got the braces right for the <code>while</code>; the <code>if</code> needs the same treatment, like this</p>\n\n<pre><code>while ( $n &gt; 0 ) {\n\n    if ( ( $n % 10 ) % 2 eq 0 ) {\n\n        $k = $k + 1;\n        $n = $n / 10;\n    }\n}\n</code></pre>\n\n<p>But Perl has many more operators than Python, so I would write this, noting that <code>( $n % 10 ) % 2</code> is identical to <code>$n % 2</code> because 2 is a factor of 10, and you should be using <code>==</code> instead of <code>eq</code> for numeric equality</p>\n\n<pre><code>while ( $n ) {\n\n    next if $n % 2;\n\n    ++$k;\n    $n /= 10;\n}\n</code></pre>\n\n<p>And I think you should force <code>$n</code> to be an integer in both languages</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8825940"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1511195224, "creation_date": 1511185728, "question_id": 47393582, "link": "https://stackoverflow.com/questions/47393582/scalar-found-where-operator-expected", "title": "Scalar found where operator expected", "body": "<p>I don't think this is a duplicate 'cause I've been looking to all other subjects with the same title. So, here's my code:</p>\n\n<pre><code>while ($n&gt;0)\n{\n   if (($n%10)%2 eq 0)\n   $k = $k+1;\n   $n = $n/10;\n}\n</code></pre>\n\n<p>I made a program that would calculate how many even numbers are in the number n\nand when I try to run my program, this error is shown:</p>\n\n<pre><code>Scalar found where operator expected at script.pl line 7, near \")\n        $k\"\n        (Missing operator before $k?)\nsyntax error at script.pl line 7, near \")\n        $k \"\n</code></pre>\n\n<p>Line 7 would be that:</p>\n\n<pre><code>$k = $k+1;\n</code></pre>\n"}, {"tags": ["perl", "optimization"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1511170053, "post_id": 47388485, "comment_id": 81730309, "body": "We cannot help you optimize code we cannot see. Please <a href=\"https://stackoverflow.com/posts/47388485/edit\">edit</a> your question and include your code. Also tell us how large the input files are. You might want to look into <a href=\"https://metacpan.org/pod/Devel::NYTProf\" rel=\"nofollow noreferrer\">Devel::NYTProf</a>, which is a powerful profiling tool for Perl. It will tell you what parts of your program are inefficient."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1511170644, "post_id": 47388485, "comment_id": 81730618, "body": "Also, try searching SO for a solution, I&#39;ve replied to several similar questions already over the years."}, {"owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1511171376, "post_id": 47388485, "comment_id": 81731043, "body": "I added the script, I tried to search solution before posted @choroba but I did not find something relevant. Otherwise, there are 2.10^6 lines."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1511171938, "post_id": 47388485, "comment_id": 81731425, "body": "Have you thought of using a hash instead of an array?"}, {"owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1511172286, "post_id": 47388485, "comment_id": 81731630, "body": "Yes, I tried it but I think it is not the kind of structure but to use a data structure like an array or a hash."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1511175156, "post_id": 47388485, "comment_id": 81733469, "body": "I&#39;m not a bioinformatician, so I don&#39;t understand how the pairing works. Do you really need to search all the possible ends, including the ones for different <code>chr</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511178442, "post_id": 47388485, "comment_id": 81735447, "body": "What is <code>if ( $length&gt;43 &amp;&amp; $length &lt; 4000 ) { ... }</code> for?"}, {"owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1511178782, "post_id": 47388485, "comment_id": 81735651, "body": "Choroba, I do not want to search the ones for different <code>chr</code>. Borodin, this line is because I do not want to keep positions which are separate by more than 4000 and less than 43."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511179591, "post_id": 47388485, "comment_id": 81736147, "body": "@Leelouh: Okay, well I think my solution should work except for that. You didn&#39;t specify it in your question so I didn&#39;t implement it, although I did separate the chromosomes, which you didn&#39;t code for. I think you should be able to work from there."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1511188439, "post_id": 47391270, "comment_id": 81741870, "body": "Thank you for your help Borodin, it is working but I am sorry, I do not understand everything.   Do you think you can explain this : <code>$strand eq &#39;+&#39; ? [ $start, $strand ] : [ $end, $strand ];</code>  It is look like something like : if $strand eq &#39;+&#39;, keep $start, ifelse $strand eq &#39;-&#39;, keep $end. It is correct ?  I have a question about the for loop. What $#$data is...?  Thank you very much."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1511189175, "post_id": 47391270, "comment_id": 81742312, "body": "@Leelouh: The list of data for each element consists of a series of two-element arrays. If the current strand is a <code>+</code> strand then it keeps the start and the strand type, otherwise it keeps the end and the strand type. According to your algorithm there&#39;s no need to keep the rest of the data. Then each list is sorted so that we&#39;re only interested in <code>-</code> strands that appear <i>after</i> each <code>+</code> strand. <code>$data</code> is a <i>reference</i> to an array, so <code>$#$data</code> is the index of the <i>last element</i> of the array <code>@$data</code>. Unless you mess with Perl, that&#39;s one less than the number of elements in the array."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1511189336, "post_id": 47391270, "comment_id": 81742414, "body": "@Leelouh: I suggest that you install <code>Data::Dump</code> (<code>cpan Data::Dump</code> should do it) and take a look at the hash <code>%data</code> that is constructed (<code>use Data::Dump</code> and <code>dd \\%data</code>). If you can&#39;t install modules then you can make do with <code>Data::Dumper</code> (<code>use Data::Dumper</code> and <code>print Dumper \\%data</code>) but the output is much less nice to read."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "edited": false, "score": 0, "creation_date": 1511189808, "post_id": 47391270, "comment_id": 81742724, "body": "@Leelouh: I also suggest that you avoid using <code>Bio::SeqIO</code> if it&#39;s there only to calculate the length of the sequence, which is just <code>$end - $start + 1</code>. It will take a lot of time building and interrogating the object for such a simple calculation."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1511178299, "creation_date": 1511178299, "answer_id": 47391270, "question_id": 47388485, "link": "https://stackoverflow.com/questions/47388485/how-to-optimize-a-table-lookup/47391270#47391270", "title": "How to optimize a table lookup", "body": "\n\n<p>Your question isn't very clear, but I think this is what you mean. I assume you want to compare subsequences only within the same chromosome</p>\n\n<p>This code works by storing a hash of arrays which contain a list of the <code>start</code> or <code>end</code> values together with the <code>strand</code> indicator for each chromosome. Then each list is sorted by position, so that we're looking for all the <code>end</code> positions after each <code>start</code> position in the list</p>\n\n<p>The two <code>for</code> loops just print the required information for each chromosome</p>\n\n<p>This program expects the path to the input file on the command line, and writes the output to STDOUT</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy ( %data, @chr);\n\nwhile ( &lt;&gt; ) {\n    my ( $chr, $start, $end, $strand ) = split;\n    next if $start =~ /\\D/;\n\n    push @chr, $chr unless $data{$chr};\n\n    push @{ $data{$chr} }, $strand eq '+' ? [ $start, $strand ] : [ $end, $strand ];\n}\n\nfor my $chr ( @chr ) {\n\n    my $data = $data{$chr};\n\n    @$data = sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] } @$data;\n\n    for my $i ( 0 .. $#$data ) {\n        next unless $data-&gt;[$i][1] eq '+';\n\n        for my $j ( $i + 1 .. $#$data ) {\n            next unless $data-&gt;[$j][1] eq '-';\n\n            print join( ' ', $chr, $data-&gt;[$i][0], $data-&gt;[$j][0]), \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>chr1 11870 39930\nchr1 11870 43917\nchr1 28537 39930\nchr1 28537 43917\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7864686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e0a6a08ad6755d06feef19e65992d5?s=128&d=identicon&r=PG", "display_name": "Leelouh", "link": "https://stackoverflow.com/users/7864686/leelouh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1511189655, "creation_date": 1511169353, "last_edit_date": 1592644375, "question_id": 47388485, "link": "https://stackoverflow.com/questions/47388485/how-to-optimize-a-table-lookup", "title": "How to optimize a table lookup", "body": "\n<p>My Perl script parses a file like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    chr   start   end   strand\n    chr1  11870 11891   +\n    chr1  28537 28558   +\n    chr1  46502 46523   +\n    chr1  39909 39930   -\n    chr1  43896 43917   -\n    chr2  62774 62795   -\n</code></pre>\n<p>When <code>strand</code> is <code>+</code> it keeps the <code>start</code> and searches all the <code>end</code> of records with a <code>strand</code> <code>-</code> to pair up start and end values.</p>\n<p>The result is like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    11870   39930\n    11870   43917\n    28537   39930\n    28537   43917\n</code></pre>\n<p>To do this, I make two tables. I make a table with all the <code>start</code> of <code>+ strand</code> and another one with all the <code>end</code> of <code>- strand</code>. Then, for each <code>start</code> in my table of <code>start position</code> I search the <code>end</code> (in the table <code>end position</code>) which is bigger than my <code>start</code>.</p>\n<p>My issue is that it takes too much time and I try to think about something which do not need to make two tables or with a &quot;dynamic table&quot;.</p>\n<p>Do you have an idea to search without these two tables?</p>\n<h3>The script:</h3>\n<pre class=\"lang-none prettyprint-override\"><code>##################\n#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Bio::SeqIO;\nuse Data::Dumper;\n\nopen C, &quot;&lt;$ARGV[0]&quot; or die &quot;Impossible d'ouvrir le fichier&quot;;\n\nmy ( @pair_start, @pair_end );\n\nwhile ( my $ligne = &lt;C&gt; ) {\n    \n    chomp $ligne;\n    my @tab = ( split /\\t/, $ligne );\n\n    while ( $tab[0] =~ m/chr[0-9]/gi ) {\n\n        my $chr    = $tab[0];\n        my $start  = $tab[1];\n        my $end    = $tab[2];\n        my $strand = $tab[3];\n\n        if ( $strand eq &quot;+&quot; ) {\n            push @pair_start, $start;\n        }\n        elsif ( $strand eq &quot;-&quot; ) {\n            push @pair_end, $end;\n        }\n    }\n}\n\nmy $seqio_obj = Bio::SeqIO-&gt;new(\n    -file   =&gt; &quot;$ARGV[1]&quot;,\n    -format =&gt; &quot;fasta&quot;\n);\n\nmy $cpt_seq = 0;\nmy $seq_obj = $seqio_obj-&gt;next_seq;\n\nforeach my $pair_start ( @pair_start ) {\n\n    foreach my $pair_end ( @pair_end ) {\n\n        if ( $pair_start &lt; $pair_end ) {\n\n            my $sous_seq = $seq_obj-&gt;subseq( $pair_start, $pair_end );\n            my $length = length( $sous_seq );\n\n            if ( $length &gt; 43 &amp;&amp; $length &lt; 4000 ) {\n                $cpt_seq++;\n            }\n        }\n    }\n}\n\nprint &quot;il y a $cpt_seq s\u00e9quences\\n&quot;;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1998966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5443ba1d6b4719f182d8b641f3dfe8?s=128&d=identicon&r=PG", "display_name": "Jahnavi", "link": "https://stackoverflow.com/users/1998966/jahnavi"}, "edited": false, "score": 0, "creation_date": 1511181689, "post_id": 47388467, "comment_id": 81737438, "body": "Hi @simbabque.. Thank you very much! The solution gave is working.  One of the regex you gave    &quot;my ($firstname, $lastname) = &quot;Jane Doe&quot; =~ m/^(?:(\\w+.*?) +(\\w+)|(\\w+))$/;&quot; is not working though. Also is there anyway I can also handle special characters like you mentioned?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 11, "user_id": 1998966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5443ba1d6b4719f182d8b641f3dfe8?s=128&d=identicon&r=PG", "display_name": "Jahnavi", "link": "https://stackoverflow.com/users/1998966/jahnavi"}, "edited": false, "score": 0, "creation_date": 1511181793, "post_id": 47388467, "comment_id": 81737508, "body": "@Jahnavi Oh. I didn&#39;t test the first one with one arg. The first name only pattern will go into <code>$3</code>, my mistake. Sorry about that. I will amend."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1511181909, "last_edit_date": 1511181909, "creation_date": 1511169252, "answer_id": 47388467, "question_id": 47388266, "link": "https://stackoverflow.com/questions/47388266/perl-regex-to-handle-and-preserver-single-and-multiple-words-into-a-variable/47388467#47388467", "title": "perl regex to handle and preserver single and multiple words into a variable", "body": "<p>There is a syntax error in your Perl code. You terminated the pattern too early.</p>\n\n<pre><code>#    /                 /   /      /   \n#                      V\n    m/^(\\w+.*?) +(\\w+)$/|m/^(\\w+)$/\n</code></pre>\n\n<p>This will lead to the <code>|</code> being interpreted as a bit-wise or. Since there's another <code>m//</code> behind it, the <code>|</code> will take the return values of both <code>m//</code> operations and do its magic. The second <code>m//</code> will just match against the topic <code>$_</code>.</p>\n\n<p>What you actually want is to merge both patterns. </p>\n\n<pre><code>my ($firstname, $lastname) = \"Jane Doe\" =~ m/^(?:(\\w+.*?) +)?(\\w+)$/;\n</code></pre>\n\n<p>You need to make the first name optional with a non-capture group <code>(?:)</code>, followed by a <code>?</code> none-or-one quantifier.</p>\n\n<p>You cannot have three capture groups, like you probably intended, because the third one would go to <code>$3</code>, and not <code>$1</code>.</p>\n\n<p>However, the above solution uses the last name, which you then assign to the <code>$firstname</code> variable. Your full name pattern allows for names with any characters in them, like <em>Jean-Luc Picard</em>. But if you pass in just <em>Jean-Luc</em>, the match will fail. So if you want only the first name, you should use the correct pattern to make it consistent.</p>\n\n<p>A simple way of doing that is to make the last name optional instead.</p>\n\n<pre><code>my ($firstname, $lastname) = \"Jane\" =~ m/^(\\w+.*?)(?: +(\\w+))?$/;\n</code></pre>\n\n<p>Remember that this will set <code>$lastname</code> to <code>undef</code>, which doesn't matter so much in your command line example, but in a proper program with <code>strict</code> and <code>warnings</code> (which you of course have turned on, right?) it will complain if <code>$lastname</code> is used as a string while it's <code>undef</code>.</p>\n\n<hr>\n\n<p>I suggest you read <a href=\"http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/\" rel=\"nofollow noreferrer\">this article about names</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 1998966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5443ba1d6b4719f182d8b641f3dfe8?s=128&d=identicon&r=PG", "display_name": "Jahnavi", "link": "https://stackoverflow.com/users/1998966/jahnavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 47388467, "answer_count": 1, "score": 0, "last_activity_date": 1511181909, "creation_date": 1511168533, "question_id": 47388266, "link": "https://stackoverflow.com/questions/47388266/perl-regex-to-handle-and-preserver-single-and-multiple-words-into-a-variable", "title": "perl regex to handle and preserver single and multiple words into a variable", "body": "<p>I am writing a perl script to read the full name of a member and save it to variables firstname and lastname like below:</p>\n\n<pre><code>my ($firstname, $lastname) = $member =~ m/^(\\w+.*?) +(\\w+)$/;\nmy $member_name = $firstname.' '.$lastname;\n</code></pre>\n\n<p>The value for $member comes from an upstream service which would be like for example \"Jane Doe\"\nNow the code above cannot handle when the service sends $member value like \"Jane\". The regex fails to handle a single word in that code line. I need it to handle both multiple and single words. I cannot implement a new code functionality so I am looking to add to the existing regex so that there is minimal change and that it can handle both the conditions.</p>\n\n<p>So far this is what I am testing with in the command line but so far no luck:</p>\n\n<pre><code>perl -e 'my ($firstname, $lastname) = \"Jane Doe\" =~ m/^(\\w+.*?) +(\\w+)$/|m/^(\\w+)$/; print \"$firstname\\n$lastname\";'\n</code></pre>\n\n<p>When I substitute \"Jane Doe\" with \"Jane\", nothing prints. I want the code to be in this format though. like if the value is multiple words it should print them both, otherwise just the single word.</p>\n\n<p>Your help will be greatly appreciated. </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2234, "user_id": 1993474, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/t1jlt.jpg?s=128&g=1", "display_name": "zeetit", "link": "https://stackoverflow.com/users/1993474/zeetit"}, "edited": false, "score": 0, "creation_date": 1511166728, "post_id": 47387773, "comment_id": 81728614, "body": "thankyou sir but the above commented regex displays the entire file content and not in loops. thanks for the direction. i&#39;ll work that way"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2234, "user_id": 1993474, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/t1jlt.jpg?s=128&g=1", "display_name": "zeetit", "link": "https://stackoverflow.com/users/1993474/zeetit"}, "edited": false, "score": 0, "creation_date": 1511166841, "post_id": 47387773, "comment_id": 81728668, "body": "@zeetit: That&#39;s because you print <code>$data</code> in the commented code instead of the captured string in <code>$1</code>"}, {"owner": {"reputation": 2234, "user_id": 1993474, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/t1jlt.jpg?s=128&g=1", "display_name": "zeetit", "link": "https://stackoverflow.com/users/1993474/zeetit"}, "edited": false, "score": 0, "creation_date": 1511166875, "post_id": 47387773, "comment_id": 81728681, "body": "Aah.. thanks.. I found where I was going wrong. thanks for guiding. Can accept answer in 5 min. will do so"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1511166889, "last_edit_date": 1511166889, "creation_date": 1511166479, "answer_id": 47387773, "question_id": 47387726, "link": "https://stackoverflow.com/questions/47387726/perl-regex-match-and-loop-html-comments/47387773#47387773", "title": "Perl Regex Match and loop HTML Comments", "body": "<p>There is nothing in <code>$1</code>. You must add <em>capturing parentheses</em> to your regex pattern</p>\n\n<pre><code>$content =~ /&lt;!--(.*?)--&gt;/gs\n</code></pre>\n\n<p>You have done it correctly in the loop that you commented out!</p>\n"}], "owner": {"reputation": 2234, "user_id": 1993474, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/t1jlt.jpg?s=128&g=1", "display_name": "zeetit", "link": "https://stackoverflow.com/users/1993474/zeetit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 47387773, "answer_count": 1, "score": -1, "last_activity_date": 1511166889, "creation_date": 1511166283, "question_id": 47387726, "link": "https://stackoverflow.com/questions/47387726/perl-regex-match-and-loop-html-comments", "title": "Perl Regex Match and loop HTML Comments", "body": "<p>I have a log file with data in format : </p>\n\n<pre><code>&lt;!-- 12/15/16 01:02:27:950.125\n DATA1 --&gt;\n&lt;!-- 12/15/16 01:02:27:950.373\n DATA2 --&gt;\n&lt;!-- 12/15/16 01:02:27:950.921\n DATA3: Text1 --&gt;\n&lt;!-- 12/15/16 01:02:27:951.066\n DATA4: Text2 --&gt;\n</code></pre>\n\n<p>I need to extract and loop all the data inside the comments.\nI am reading the file and saving data as one string.\nI have tried a few solutions but getiing \"undef\" on match </p>\n\n<pre><code>use strict;\nuse Data::Dumper;\nuse File::Basename;\nuse Time::HiRes qw( usleep ualarm gettimeofday tv_interval );\nuse Date::Format;\nuse DateTime;    \nuse warnings;\n.\n.\n.\n       if ( open(ORIGFILE, $filepath) ) {\n\n            my @wrp_record_content = &lt;ORIGFILE&gt;;\n            # my $content = join('', @wrp_record_content);\n            # my @matches = $content =~ s/&lt;!--(.*)--&gt;//g;\n            # my $data;\n\n            # while ( &lt;ORIGFILE&gt; ) {\n            #     $data .= $_;\n            # }\n\n            # while ( $data =~ m/&lt;!--(.*)--&gt;/g ) {\n            #     print Dumper('===DATA===');\n            #     print Dumper($data);\n            # }\n\n            my $content = join('', @wrp_record_content);\n            #print Dumper('------CONTENT------');\n            #print Dumper($content);\n            #print Dumper('------ CONTENT ENDED ------');\n\n            my @matches;\n            while ($content =~ /&lt;!--.*?--&gt;/gs) {\n            push @matches, $1;\n            }\n\n            foreach my $m (@matches) {\n                print Dumper('===MATCH===', \"\\n\");\n                print Dumper($m);\n            }\n       }\n</code></pre>\n\n<p>Can someone please guide on where it is going wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1511165697, "post_id": 47384832, "comment_id": 81728123, "body": "<a href=\"https://stackoverflow.com/questions/12569570/command-print-all-lines-starting-with\" title=\"command print all lines starting with\">stackoverflow.com/questions/12569570/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1511166974, "post_id": 47384832, "comment_id": 81728734, "body": "Thank You very much for this answer, but I have to write a script in Perl instead of using command in terminal. Can You see what&#39; wrong in the script that I wrote?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1511172294, "post_id": 47388646, "comment_id": 81731638, "body": "Dear Sobrique, Thank You for spending Your time. I have never used Perl before, niether some other programming language, so I don&#39;t have any experience. I don&#39;t understand one thing. My $input should be a filehendler; and when I type, for example id, the output of this simple script is not what I am searching for, it does not prints me anly lines that are beginning with the pattern /ID/. What I have to do is from a file that looks like link I have attached to print out only lines (whole lines) that begin with ID and lines that begin with AC (but not whole line, only first column). Thanks!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 1, "creation_date": 1511172431, "post_id": 47388646, "comment_id": 81731717, "body": "That would be a different question. I&#39;d suggest you ask it as such."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1511172917, "post_id": 47388646, "comment_id": 81732044, "body": "Yes, I will do that. Thank You once again!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1511180786, "post_id": 47388646, "comment_id": 81736865, "body": "@sergio: You asked a second question, but you included your original (very broken!) code from this question. Let&#39;s get this fixed first, and only move on to the next stage when you understand this code. What don&#39;t you understand?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511181414, "post_id": 47388646, "comment_id": 81737245, "body": "@Dave Cross: Thanks Dave. I agree. So, as I said before, what I don&#39;t understand is the role of file handle my $input. By reading different examples I see that it is a file handle and that by  writing &quot;&lt;&quot; my file will be only read (not opening it in a writing mode, &quot;&gt;&quot;). I understood that file handle is just mentioning the way I want my file to be read (an undefined scalar variable), so I can put anything there (maybe I didn&#39;t understand it well). I used this script and changed $input to $ids. Therefore, obviously I have a problem with understanding this file handle."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1511182168, "post_id": 47388646, "comment_id": 81737739, "body": "@sergio: Sounds like you understand it well enough. Why do you think you don&#39;t understand it? Did something not work? What unexpected behaviour did you see? Were there any error messages?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511184080, "post_id": 47388646, "comment_id": 81738939, "body": "@Dave Cross: Well I think I don&#39;t understand it because, when I change all $input with $ids and when I run the script as an output I was given a randomly printed data and I don&#39;t know why, it seems to be simple and straightforward."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1511184287, "post_id": 47388646, "comment_id": 81739067, "body": "@sergio: Without seeing the changes, it&#39;s impossible for me to know what is going wrong. If you want more help, edit your question to include your latest code and some sample input."}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1511186124, "post_id": 47388646, "comment_id": 81740285, "body": "@Sobrique Did you just write a snippet for printing all lines that has <code>ID</code> in it?!"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1511187310, "post_id": 47388646, "comment_id": 81741098, "body": "@Sobrique your snippet prints all lines that has ID anywhere in it. But the question was pretty clear that the pattern should be in the start of the line. I think you need to modify your regex to this. <code>print if m&#47;^ID&#47; || m&#47;^AC&#47;;</code>"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1511225879, "post_id": 47388646, "comment_id": 81760894, "body": "@Bala: Yes that is the problem that I had. All lines that contain ID were printed. With adding ^ I got only those that are beginning with this specific /pattern/. Do You know what should I add to ^AC, to make only second column printed, or at least some kind of a hint, because I can not find that somebody else did something similar in previous questions."}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1511242028, "post_id": 47388646, "comment_id": 81765011, "body": "what do you mean by second column while printing lines starting with AC ? What exactly do you need from this line - <code>AC   P01375; O43647; Q9P1Q2; Q9UIV3;</code>"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1511242067, "post_id": 47388646, "comment_id": 81765016, "body": "@sergio You can maybe open a new question for this because in future, it may help somebody."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1511243644, "post_id": 47388646, "comment_id": 81765617, "body": "@Bala: I&#39;ve already opened new question for this which can be found in this link (<a href=\"https://stackoverflow.com/questions/47390656/printing-only-those-lines-with-a-specific-pattern-idac-and-only-first-column-o\" title=\"printing only those lines with a specific pattern idac and only first column o\">stackoverflow.com/questions/47390656/&hellip;</a>). Yes, I understand that there are no colums but I meant P01375. Thanks!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1511169892, "creation_date": 1511169892, "answer_id": 47388646, "question_id": 47384832, "link": "https://stackoverflow.com/questions/47384832/print-whole-line-that-begins-with-specific-pattern/47388646#47388646", "title": "Print whole line that begins with specific pattern", "body": "<p>Your problem is almost certainly this line:</p>\n\n<pre><code>  if (my @ids =~ my @IDS){    \n</code></pre>\n\n<p>because <code>my</code> is declaring a new variable, that 'hides' the one in the parent scope. Applying a regex match when both source and target are arrays is also going to behave in an odd sort of way - you're iterating <code>@ids</code> one element at a time, but then you're just matching the whole thing. And you're matching against another array, which ... actually works, but only because you're relying on casting the array to a string and back again. </p>\n\n<p>It's also pretty bad style to have upper case and lower case variables of the same name, and you're doing it 3 times with <code>@ids</code>, <code>@IDS</code>, and <code>IDS</code>. </p>\n\n<p>I'm also really not sure that <code>my @IDS = \"ID\";</code> is doing what you think it's doing, and neither is trying to treat <code>@IDS</code> as a pattern in the first place. </p>\n\n<p>Also - reading a file into an array then iterating it is less efficient that just iterating the file line by line. </p>\n\n<p>Your code could probably be simplified as:</p>\n\n<pre><code>open ( my $input, '&lt;', 'example.txt' ) or die $!; \nwhile ( &lt;$input&gt; ) { \n   print if m/ID/;\n}\nclose ( $input ); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "is_accepted": true, "score": -1, "last_activity_date": 1511249490, "creation_date": 1511249490, "answer_id": 47407558, "question_id": 47384832, "link": "https://stackoverflow.com/questions/47384832/print-whole-line-that-begins-with-specific-pattern/47407558#47407558", "title": "Print whole line that begins with specific pattern", "body": "<p>After long list list of comments, here you go! This snippet works for both of your cases!</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen ( my $input, '&lt;', 'printLinesStartingWithID.txt' ) or die $!; \nwhile ( &lt;$input&gt; ) { \n   if(/^ID/)\n   {\n        print \"Matched line starting with ID: $_\";\n   }\n   if(/^AC/)\n   {\n        my ($secondCol) = $_ =~ /^AC...(.*?)\\;/;    #The three dots is to chop off the three empty spaces followed by 'AC'.\n        print \"Matched line starting with AC. The second column of the line is: $secondCol \\n\";\n   }\n}\nclose ( $input );\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "accepted_answer_id": 47407558, "answer_count": 2, "score": 0, "last_activity_date": 1511249490, "creation_date": 1511149846, "last_edit_date": 1511162029, "question_id": 47384832, "link": "https://stackoverflow.com/questions/47384832/print-whole-line-that-begins-with-specific-pattern", "title": "Print whole line that begins with specific pattern", "body": "<p>I have a text file that looks like this <a href=\"http://www.uniprot.org/uniprot/?sort=score&amp;desc=&amp;compress=no&amp;query=id:P01375%20OR%20id:P04626%20OR%20id:P08238%20OR%20id:P06213&amp;format=txt\" rel=\"nofollow noreferrer\">http://www.uniprot.org/uniprot/?sort=score&amp;desc=&amp;compress=no&amp;query=id:P01375%20OR%20id:P04626%20OR%20id:P08238%20OR%20id:P06213&amp;format=txt</a></p>\n\n<p>I have to print only the lines in the text file that start with specific pattern (ID).</p>\n\n<p>I tried it this way but it doesn't working:</p>\n\n<pre><code>open (IDS, 'example.txt') or die \"Cannot open\";    \nmy @ids = &lt;IDS&gt;;    \nclose IDS;    \nmy @IDS= \"ID\";    \nforeach my $ids (@ids) {    \n  if (my @ids =~ my @IDS){    \n    print $ids;    \n  } \n}\n</code></pre>\n\n<p>There probably must be some problem in this line **if (my @ids =~ my @IDS){.</p>\n\n<p>If somebody can help me I would be very thankful.</p>\n\n<p>Best</p>\n"}, {"tags": ["perl", "proxy", "dns", "socks", "resolve"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 2683976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c81b797caa7064164f82157c94eb62?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/2683976/tiago"}, "edited": false, "score": 0, "creation_date": 1511308548, "post_id": 47385805, "comment_id": 81804262, "body": "Thanks for your explanation. So what you&#39;re saying is that it&#39;s a 2 step connection, is that right? The client connects to the SOCKS proxy and says &quot;please connect to this host and this port&quot; which the SOCKS proxy takes care of but never really tells the client any information about that second connection. Given this, it won&#39;t be possible to retrieve the IP resolved, is that what you are saying? Thanks"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1511157262, "creation_date": 1511157262, "answer_id": 47385805, "question_id": 47382894, "link": "https://stackoverflow.com/questions/47382894/dns-over-socks-proxy-with-perl/47385805#47385805", "title": "DNS over SOCKS proxy with Perl", "body": "<blockquote>\n  <p>This code allows me to connect to the SOCKS proxy and then resolve a hostname over SOCKS and connect to it after that.</p>\n</blockquote>\n\n<p>Not really. It connects to the SOCKS proxy and then connects to a given host by name. It does not resolve the hostname over SOCKS. Instead the resolving is done inside the SOCKS server only in order to connect to the given host and not done \"over  SOCKS\". In fact, the SOCKS server might even have an upstream SOCKS server where it just forwards the connect to without resolving the hostname by itself.</p>\n\n<p>Also, there is no back channel to let the SOCKS client know what the SOCKS server did resolve. This is not needed since this kind of connection detail is not needed for the task as proxy.</p>\n"}], "owner": {"reputation": 181, "user_id": 2683976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c81b797caa7064164f82157c94eb62?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/2683976/tiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511157262, "creation_date": 1511132080, "question_id": 47382894, "link": "https://stackoverflow.com/questions/47382894/dns-over-socks-proxy-with-perl", "title": "DNS over SOCKS proxy with Perl", "body": "<p>I'm trying to write a script that sends requests over a SOCKS5 proxy.\nSomething I wanted to do was to proxy the DNS requests over SOCKS. I manage to do this using the IO::Socket::Socks module. </p>\n\n<p>This code allows me to connect to the SOCKS proxy and then resolve a hostname over SOCKS and connect to it after that.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse IO::Socket::Socks;\n\nmy $sock = IO::Socket::INET-&gt;new(\"127.0.0.1:9050\") or die $@;\n$sock = IO::Socket::Socks-&gt;start_SOCKS($sock, ConnectAddr =&gt; \"example.com\", ConnectPort =&gt; 80) or die $SOCKS_ERROR;\n\n$sock-&gt;syswrite (\"GET / HTTP/1.1\\r\\nHost: example.com\\r\\n\\r\\n\");\n$sock-&gt;close();\n</code></pre>\n\n<p>This works fine. However I would like to show the user the IP resolved and I'm struggling to achieve this because for the <code>$sock</code> object, it seems to see the peer as the SOCKS proxy host rather than the real final host.</p>\n\n<p>Does anyone know how can I retrieve the IP resolved from this DNS performed over SOCKS?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "anyevent"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1511130785, "post_id": 47382478, "comment_id": 81718162, "body": "I think the easiest way is probably forking a child process."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1511131242, "post_id": 47382478, "comment_id": 81718273, "body": "One example of a forked process, timed in one of possible ways, is in <a href=\"https://stackoverflow.com/a/45250716/4653379\">this post</a> while one example of using an alarm in <a href=\"https://stackoverflow.com/questions/44533600/perl-host-to-ip-resolution/44535265#44535265\">this post</a>.  There is much more out there."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511171648, "post_id": 47382478, "comment_id": 81731238, "body": "How do you define <i>best</i>? Fastest to implement, most efficient, easiest to read? The way you have asked your question it&#39;s about personal opinion, and we consider that off-topic here. Please <a href=\"https://stackoverflow.com/posts/47382478/edit\">edit</a> and refine."}], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 328993, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3439e57fada8ef00182568a5f55f57b?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/328993/nilesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1512100028, "creation_date": 1512100028, "answer_id": 47586358, "question_id": 47382478, "link": "https://stackoverflow.com/questions/47382478/what-is-best-way-in-perl-to-set-a-timer-to-stop-long-running-process/47586358#47586358", "title": "What is best way in Perl to set a timer to stop long-running process?", "body": "<p>You have not mentioned the platform you are running this script on, but if it is running on *nix, you can use the SIGALRM signal, something like this:</p>\n\n<pre><code>my $run_flag = 1;\n\n$SIG{ALRM} = sub {\n    $run_flag = 0;\n}\n\nalarm (300);\n\nwhile ($run_flag) {\n    # do your stuff here\n    # note - you cannot use sleep and alarm at the same time\n}\n\nprint \"This will print after 300 seconds\";\n</code></pre>\n"}], "owner": {"reputation": 374, "user_id": 78367, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e299d3c8c7309344317669576e51f5f8?s=128&d=identicon&r=PG", "display_name": "scott8035", "link": "https://stackoverflow.com/users/78367/scott8035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 1, "accepted_answer_id": 47586358, "answer_count": 1, "score": 1, "last_activity_date": 1512100028, "creation_date": 1511129075, "last_edit_date": 1511231849, "question_id": 47382478, "link": "https://stackoverflow.com/questions/47382478/what-is-best-way-in-perl-to-set-a-timer-to-stop-long-running-process", "title": "What is best way in Perl to set a timer to stop long-running process?", "body": "<p>I've got an application that invokes a potentially long-running process. I want my program, the caller of this process, to cancel it at any given point and move on to the next entry when a time limit is exceeded. Using Perl's AnyEvent module, I tried something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse Modern::Perl '2017';\nuse Path::Tiny;\nuse EV;\nuse AnyEvent;\nuse AnyEvent::Strict;\n\nmy $cv = AE::cv;\n$cv-&gt;begin;  ## In case the loop runs zero times...\n\nwhile ( my $filename = &lt;&gt; ) {\n    chomp $filename;\n    $cv-&gt;begin;\n\n    my $timer = AE::timer( 10, 0, sub {\n        say \"Canceled $filename...\";\n        $cv-&gt;end;\n        next;\n    });\n\n    potentially_long_running_process( $filename );\n    $cv-&gt;end;\n}\n\n$cv-&gt;end;\n$cv-&gt;recv;\n\nexit 0;\n\nsub potentially_long_running_process {\n    my $html = path('foo.html')-&gt;slurp;\n    my @a_pairs = ( $html =~ m|(&lt;a [^&gt;]*&gt;.*?&lt;/a&gt;)|gsi );\n    say join(\"\\n\", @a_pairs);\n}\n</code></pre>\n\n<p>The problem is the long-running processes never time out and get canceled, they just keep on going. So my question is <strong>\"How do I use AnyEvent (and/or related modules) to time out a long-running task?\"</strong></p>\n"}, {"tags": ["perl", "photo", "exiftool", "organizer"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1511098814, "post_id": 47377478, "comment_id": 81707000, "body": "Can you please show your command line?"}, {"owner": {"reputation": 13, "user_id": 3985650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ead3de5384db27c18db316ddb8392d?s=128&d=identicon&r=PG&f=1", "display_name": "protocol", "link": "https://stackoverflow.com/users/3985650/protocol"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1511099877, "post_id": 47377478, "comment_id": 81707331, "body": "Actually I didn&#39;t find any clue to how to start with these. I referred exiftool command examples and available options, I can see possible options to frame output based on input and to have control over extension."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1511108221, "post_id": 47377478, "comment_id": 81710195, "body": "What do you need a regex for? A single file name is not a pattern."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1511108408, "post_id": 47377478, "comment_id": 81710246, "body": "Okay. Show the command that you would use to erroneously process both files."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1511108530, "post_id": 47377478, "comment_id": 81710266, "body": "In the example you give you can simply check whether the name contains an underscore. <code>_</code> is the pattern for that."}, {"owner": {"reputation": 13, "user_id": 3985650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ead3de5384db27c18db316ddb8392d?s=128&d=identicon&r=PG&f=1", "display_name": "protocol", "link": "https://stackoverflow.com/users/3985650/protocol"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511159747, "post_id": 47377478, "comment_id": 81725401, "body": "@simbabque: I have posted an example of my files. The same I have to do recursively over a directory to find the files. That purpose i need to specify the file name as regex."}], "answers": [{"tags": [], "owner": {"reputation": 3221, "user_id": 3525475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a3e5e7036697bc76954b0d02d71c15?s=128&d=identicon&r=PG&f=1", "display_name": "StarGeek", "link": "https://stackoverflow.com/users/3525475/stargeek"}, "is_accepted": true, "score": 2, "last_activity_date": 1511115362, "creation_date": 1511115362, "answer_id": 47380311, "question_id": 47377478, "link": "https://stackoverflow.com/questions/47377478/exiftool-process-only-regex-matched-source-file/47380311#47380311", "title": "exiftool process only regex matched source file", "body": "<p>As user @Borodin mentions, in your example you only want files that have an underscore, not a dash.  In that case you just would search for files with an underscore.</p>\n\n<p>But if that's a typo or if you need to recurse (wildcards don't work with exiftool's <code>-r</code> recurse option, see <a href=\"https://sno.phy.queensu.ca/~phil/exiftool/mistakes.html#M2\" rel=\"nofollow noreferrer\">Common mistake 2 &amp; 3</a>), then you can use exiftool's <code>-if</code> option to do a regex match on the filename.  In this case, you would add something like:<br>\n<code>-if \"$filename=~/IMG-\\d{8}-\\d{6}\\.jpg/\"</code><br>\nto you command (change double quotes to single quotes if on Mac/linux).  </p>\n"}], "owner": {"reputation": 13, "user_id": 3985650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ead3de5384db27c18db316ddb8392d?s=128&d=identicon&r=PG&f=1", "display_name": "protocol", "link": "https://stackoverflow.com/users/3985650/protocol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "accepted_answer_id": 47380311, "answer_count": 1, "score": 0, "last_activity_date": 1511115362, "creation_date": 1511098620, "last_edit_date": 1511099513, "question_id": 47377478, "link": "https://stackoverflow.com/questions/47377478/exiftool-process-only-regex-matched-source-file", "title": "exiftool process only regex matched source file", "body": "<p>I'm using <code>exiftool</code> to rename and organize the photos taken from a camera to a specified destination directory.</p>\n\n<p>How can I specify the input source file name using regex?</p>\n\n<p>Example:</p>\n\n<p>I have a directory with these two files:</p>\n\n<pre><code>IMG_20160716_121830.jpg\nIMG-20160716-121830-WA0004.jpg\n</code></pre>\n\n<p>I only want to process <strong>IMG_20160716_121830.jpg</strong></p>\n"}, {"tags": ["perl", "ksh", "clearcase", "cleartool"], "answers": [{"comments": [{"owner": {"reputation": 2102, "user_id": 30791, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/99bb8d07bd5989743472bbda9f22ba93?s=128&d=identicon&r=PG", "display_name": "pindare", "link": "https://stackoverflow.com/users/30791/pindare"}, "edited": false, "score": 0, "creation_date": 1511082878, "post_id": 47373347, "comment_id": 81702899, "body": "Thank you for helping. if it works i will vote your post tomorrow."}, {"owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 2102, "user_id": 30791, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/99bb8d07bd5989743472bbda9f22ba93?s=128&d=identicon&r=PG", "display_name": "pindare", "link": "https://stackoverflow.com/users/30791/pindare"}, "edited": false, "score": 0, "creation_date": 1511082944, "post_id": 47373347, "comment_id": 81702915, "body": "Great! which syntax did you chose?"}], "tags": [], "owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 4, "last_activity_date": 1511061085, "creation_date": 1511061085, "answer_id": 47373347, "question_id": 47373200, "link": "https://stackoverflow.com/questions/47373200/use-mkattr-in-perl-script-unix-env/47373347#47373347", "title": "Use mkattr in perl script (Unix env)?", "body": "<p>As mentioned in <a href=\"https://stackoverflow.com/a/47330424/6309\">this recent answer</a>:</p>\n\n<blockquote>\n  <p>If you want to execute a system command and don't have to use any shell syntax like redirects, it's usually better and safer to use the list form of system:</p>\n</blockquote>\n\n<pre><code>system(\n    'cleartool',  'mkattr', '-replace', 'BUGNUM ',\n    qq{\"$bug_num\"}, qq{clearcase_file}\n);\n# or, if you really want to pass both types of quotes:\nsystem(\n    'cleartool',  'mkattr', '-replace', 'BUGNUM ',\n    qq{'\"$bug_num\"'}, qq{clearcase_file}\n);\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>system(qq{cleartool mkattr -replace BUGNUM '\"$bug_num\"' clearcase_file});\n</code></pre>\n"}], "owner": {"reputation": 2102, "user_id": 30791, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/99bb8d07bd5989743472bbda9f22ba93?s=128&d=identicon&r=PG", "display_name": "pindare", "link": "https://stackoverflow.com/users/30791/pindare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 47373347, "answer_count": 1, "score": 1, "last_activity_date": 1511061085, "creation_date": 1511059231, "question_id": 47373200, "link": "https://stackoverflow.com/questions/47373200/use-mkattr-in-perl-script-unix-env", "title": "Use mkattr in perl script (Unix env)?", "body": "<p>Clearcase command line mkattr needs to wrap variable $bug_num between single quote + quote + $varible + quote + single quote, like this:</p>\n\n<pre><code>cleartool mkattr -replace BUGNUM '\"$bug_num\"' clearcase_file\n</code></pre>\n\n<p>How to make a call of the command cleartool mkattr in a Perl script in Unix env?\nEnv is Unix AIX and ksh</p>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511060424, "post_id": 47372689, "comment_id": 81699133, "body": "Please don&#39;t declare all your variables at the top of your program. They should be declared with the smallest possible scope, usually at the point where they are first defined as you have done with <code>my $t = ...</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511108978, "post_id": 47372689, "comment_id": 81710414, "body": "In particular, <code>$datetimeNow</code> should be declared within <code>showstatus</code> as <code>my $datetimeNow = localtime</code>. And you should avoid prototypes: both subroutines should be just <code>sub showstatus { ... }</code> etc."}, {"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511217750, "post_id": 47372689, "comment_id": 81758457, "body": "My habit of declaring variables at the top comes from other programming languages I use. I will try to pay attention to this when using perl. And I will also be more careful with my subs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511219344, "post_id": 47372689, "comment_id": 81758985, "body": "Yes, I assumed so. Presumably you&#39;re a C programmer? Either way, a big block of declarations is really just a way of getting the compilation errors to go away. Every modern language I can think of allows you to declare variables with a limited scope, and you should use the same principles everywhere."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511220087, "post_id": 47372689, "comment_id": 81759229, "body": "<b>mirod&#39;s</b> answer is not a solution; he was simply asking how removing the <code>purge</code> influenced the behaviour. However he is the author of <code>XML::Twig</code>, and if you want an explanation for the high memory usage then he is your best bet. You should show a sample of the XML you are dealing with, including at least a few <code>product</code> elements."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 1, "creation_date": 1511105307, "post_id": 47373294, "comment_id": 81709177, "body": "The twig_roots way seems to be the one I need. I modified the perl script the way you suggested (product in single-quotes and no comma tailing the pretty_print line) and it does what I originally expected it to do while memory usage does not go above 15M.   When I studied the XML::Twig documentation I did read the twig_roots section but I did not understand its purpose. More precisely, I did not recognize that this is the approach I need. Now I concluded that twig_roots does what I believed the twig handler to do.   Thanks for pointing me to the right direction!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 0, "creation_date": 1511107585, "post_id": 47373294, "comment_id": 81709989, "body": "@Keve: I&#39;m pleased to help. I agree that the documentation isn&#39;t the clearest. Has the three-minute gap also disappeared? And you do know that those quotes and the comma are unnecessary, right?"}, {"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 0, "creation_date": 1511218094, "post_id": 47373294, "comment_id": 81758585, "body": "Yes, the 3 minute gap vanished. I added the new results to my original post. I also have results on Mirod&#39;s suggestion, but cannot add to my post because of character limits ( makes my post too long).   No, I was not aware that the quotes are insignificant there, or the comma may be left there. So this is another new thing I learnt today. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 0, "creation_date": 1511219691, "post_id": 47373294, "comment_id": 81759092, "body": "@Keve: That sounds like the right behaviour! Is eight minutes sufficiently fast? There&#39;s no reason to put quotes around <code>product</code> because the &quot;fat comma&quot; implicitly quotes any string of &quot;word characters&quot; (alphanumeric and underscore) to its left. If you wanted something containing spaces or punctuation then it would need quotes. Otherwise <code>=&gt;</code> is identical to a normal comma. And Perl allows commas after the last element of a list so that you can easily add a new entry without modifying the original last line."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1511060264, "creation_date": 1511060264, "answer_id": 47373294, "question_id": 47372689, "link": "https://stackoverflow.com/questions/47372689/inefficient-use-of-memory-processing-large-file-with-perl-xmltwig-handlers/47373294#47373294", "title": "Inefficient use of memory processing large file with Perl XML::Twig handlers", "body": "<p>You're building a complete XML data structure except for <code>product</code> elements, only to discard it all at the end</p>\n\n<p>You don't say what you actually want to do with the data, but if you provide <code>twig_handlers</code> then <code>XML::Twig</code> is expecting to produce a filtered/modified version of the input data</p>\n\n<p>If you don't want any output XML at all, or you want to build your own rather than modifying the input, then I suggest you use <code>twig_roots</code> instead, like this</p>\n\n<p><strong><em>This is untested code. I'm travelling at present and nowhere near a PC system to test with</em></strong></p>\n\n<pre><code>my $t = XML::Twig-&gt;new(\n    twig_roots               =&gt; { product =&gt; \\&amp;do_what_needs_to_be_done_with_each_product },\n    twig_print_outside_roots =&gt; 0,\n    pretty_print             =&gt; 'indented',\n); \n</code></pre>\n\n<p>Note that <code>do_what_needs_to_be_done_with_each_product</code> (I hope that's not the real identifier) shouldn't contain <code>$t-&gt;purge</code> when working like this</p>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 0, "creation_date": 1511104653, "post_id": 47374541, "comment_id": 81708958, "body": "The memory usage is already increased (3780M instead of 15M) when the &quot;Parse finished&quot; text is shown. That is before the final Purge is called.   This suggests that the memory-use increase happens at/around the purge of the last product element.   I modified the perl script, first by commenting out the purge instruction, then also tried to skip the purge for the last product only."}, {"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 0, "creation_date": 1511218158, "post_id": 47374541, "comment_id": 81758607, "body": "Mirod, I also generated output using your suggestions, but I could not post it here because it makes my post too long."}, {"owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 0, "creation_date": 1511250659, "post_id": 47374541, "comment_id": 81768766, "body": "While I can no longer extend my original post with more output, it seems I could edit your answer and add the output there."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "edited": false, "score": 0, "creation_date": 1511251926, "post_id": 47374541, "comment_id": 81769423, "body": "Is there more data after the last <code>product</code> element? That would explain the behavior of the code: using <code>twig_handlers</code> the tree is built for the data after the element, with <code>twig_root</code> it isn&#39;t. If that&#39;s the case, and if you can identify when you&#39;re past the last <code>product</code> you could use a call to <code>finish</code> (finishes parsing without checking if a <code>product</code> is found) or <code>finish_now</code> (even faster since it just kills the parser,)"}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": false, "score": 2, "last_activity_date": 1511260171, "last_edit_date": 1511260171, "creation_date": 1511075724, "answer_id": 47374541, "question_id": 47372689, "link": "https://stackoverflow.com/questions/47372689/inefficient-use-of-memory-processing-large-file-with-perl-xmltwig-handlers/47374541#47374541", "title": "Inefficient use of memory processing large file with Perl XML::Twig handlers", "body": "<p>It looks like memory usage increases dramatically during the final purge, the one after the end of parsing. </p>\n\n<p>What happens when you don't purge?  </p>\n\n<hr>\n\n<p>Below is what happens when the <code>$twig-&gt;purge();</code> line is removed/commented-out.<br>\n<strong>Output of the perl script processing the XML</strong>:  </p>\n\n<pre><code>keve@deimos:DATA$ ./twigExample.pl product_db_extract.xml \nRes: 496  perl5.18 0.0  144M+ -&gt; item count: 2905 &lt;- time: Sun Nov 19 13:23:04 2017\nRes: 496  perl5.18 0.0  291M+ -&gt; item count: 6341 &lt;- time: Sun Nov 19 13:23:11 2017\nRes: 496  perl5.18 0.0  439M+ -&gt; item count: 9777 &lt;- time: Sun Nov 19 13:23:18 2017\nRes: 496  perl5.18 0.0  587M+ -&gt; item count: 12641 &lt;- time: Sun Nov 19 13:23:25 2017\nRes: 496  perl5.18 0.0  735M+ -&gt; item count: 15528 &lt;- time: Sun Nov 19 13:23:32 2017\nRes: 496  perl5.18 0.0  883M+ -&gt; item count: 18137 &lt;- time: Sun Nov 19 13:23:39 2017\nRes: 496  perl5.18 0.0  1032M+ -&gt; item count: 20852 &lt;- time: Sun Nov 19 13:23:46 2017\nRes: 496  perl5.18 0.0  1179M+ -&gt; item count: 23596 &lt;- time: Sun Nov 19 13:23:53 2017\nRes: 496  perl5.18 0.0  1328M+ -&gt; item count: 26297 &lt;- time: Sun Nov 19 13:24:00 2017\nRes: 496  perl5.18 0.0  1476M+ -&gt; item count: 28929 &lt;- time: Sun Nov 19 13:24:07 2017\nRes: 496  perl5.18 0.0  1624M+ -&gt; item count: 31752 &lt;- time: Sun Nov 19 13:24:14 2017\nRes: 496  perl5.18 0.0  1772M+ -&gt; item count: 34536 &lt;- time: Sun Nov 19 13:24:21 2017\nRes: 496  perl5.18 0.0  1920M+ -&gt; item count: 37019 &lt;- time: Sun Nov 19 13:24:28 2017\nRes: 496  perl5.18 0.0  2068M+ -&gt; item count: 39566 &lt;- time: Sun Nov 19 13:24:35 2017\nRes: 496  perl5.18 0.0  2216M+ -&gt; item count: 42246 &lt;- time: Sun Nov 19 13:24:42 2017\nRes: 496  perl5.18 0.0  2365M+ -&gt; item count: 44976 &lt;- time: Sun Nov 19 13:24:49 2017\nRes: 496  perl5.18 0.0  2513M+ -&gt; item count: 47722 &lt;- time: Sun Nov 19 13:24:56 2017\nRes: 496  perl5.18 0.0  2662M+ -&gt; item count: 50389 &lt;- time: Sun Nov 19 13:25:03 2017\nRes: 496  perl5.18 0.0  2810M+ -&gt; item count: 53083 &lt;- time: Sun Nov 19 13:25:10 2017\nRes: 496  perl5.18 0.0  2958M+ -&gt; item count: 55745 &lt;- time: Sun Nov 19 13:25:17 2017\nRes: 496  perl5.18 0.0  3106M+ -&gt; item count: 57955 &lt;- time: Sun Nov 19 13:25:24 2017\nRes: 496  perl5.18 0.0  3253M+ -&gt; item count: 59924 &lt;- time: Sun Nov 19 13:25:31 2017\nRes: 496  perl5.18 0.0  3402M+ -&gt; item count: 61742 &lt;- time: Sun Nov 19 13:25:38 2017\nRes: 496  perl5.18 0.0  3550M+ -&gt; item count: 63373 &lt;- time: Sun Nov 19 13:25:45 2017\nRes: 496  perl5.18 0.0  3698M+ -&gt; item count: 64954 &lt;- time: Sun Nov 19 13:25:52 2017\nRes: 496  perl5.18 0.0  3845M+ -&gt; item count: 66589 &lt;- time: Sun Nov 19 13:25:59 2017\nRes: 496  perl5.18 0.0  3993M+ -&gt; item count: 68165 &lt;- time: Sun Nov 19 13:26:06 2017\nRes: 496  perl5.18 0.0  4141M+ -&gt; item count: 69717 &lt;- time: Sun Nov 19 13:26:13 2017\nRes: 496  perl5.18 0.0  4289M+ -&gt; item count: 71320 &lt;- time: Sun Nov 19 13:26:20 2017\nRes: 496  perl5.18 0.0  4380M+ -&gt; item count: 73202 &lt;- time: Sun Nov 19 13:26:27 2017\nRes: 496  perl5.18 0.0  4384M+ -&gt; item count: 75413 &lt;- time: Sun Nov 19 13:26:34 2017\nRes: 496  perl5.18 0.0  4280M+ -&gt; item count: 77457 &lt;- time: Sun Nov 19 13:26:41 2017\nRes: 496  perl5.18 0.0  4181M+ -&gt; item count: 79444 &lt;- time: Sun Nov 19 13:26:48 2017\nRes: 496  perl5.18 0.0  4094M+ -&gt; item count: 81443 &lt;- time: Sun Nov 19 13:26:55 2017\nRes: 496  perl5.18 0.0  3939M+ -&gt; item count: 83351 &lt;- time: Sun Nov 19 13:27:02 2017\nRes: 496  perl5.18 0.0  3839M+ -&gt; item count: 85322 &lt;- time: Sun Nov 19 13:27:09 2017\nRes: 496  perl5.18 0.0  3727M+ -&gt; item count: 87307 &lt;- time: Sun Nov 19 13:27:16 2017\nRes: 496  perl5.18 0.0  3629M+ -&gt; item count: 89305 &lt;- time: Sun Nov 19 13:27:23 2017\nRes: 496  perl5.18 0.0  3521M+ -&gt; item count: 91275 &lt;- time: Sun Nov 19 13:27:30 2017\nRes: 496  perl5.18 0.0  3418M+ -&gt; item count: 93298 &lt;- time: Sun Nov 19 13:27:37 2017\nRes: 496  perl5.18 0.0  3299M+ -&gt; item count: 95339 &lt;- time: Sun Nov 19 13:27:44 2017\nRes: 496  perl5.18 0.0  3189M+ -&gt; item count: 97398 &lt;- time: Sun Nov 19 13:27:51 2017\nRes: 496  perl5.18 0.0  3141M+ -&gt; item count: 99449 &lt;- time: Sun Nov 19 13:27:58 2017\nRes: 496  perl5.18 0.0  2977M+ -&gt; item count: 101543 &lt;- time: Sun Nov 19 13:28:05 2017\nRes: 496  perl5.18 0.0  2857M+ -&gt; item count: 103519 &lt;- time: Sun Nov 19 13:28:12 2017\nRes: 496  perl5.18 0.0  2748M+ -&gt; item count: 105574 &lt;- time: Sun Nov 19 13:28:19 2017\nRes: 496  perl5.18 0.0  2643M+ -&gt; item count: 107550 &lt;- time: Sun Nov 19 13:28:26 2017\nRes: 496  perl5.18 0.0  2591M+ -&gt; item count: 109574 &lt;- time: Sun Nov 19 13:28:33 2017\nRes: 496  perl5.18 0.0  2506M+ -&gt; item count: 111562 &lt;- time: Sun Nov 19 13:28:40 2017\nRes: 496  perl5.18 0.0  2389M+ -&gt; item count: 113485 &lt;- time: Sun Nov 19 13:28:47 2017\nRes: 496  perl5.18 0.0  2280M+ -&gt; item count: 115455 &lt;- time: Sun Nov 19 13:28:54 2017\nRes: 496  perl5.18 0.0  2100M+ -&gt; item count: 117391 &lt;- time: Sun Nov 19 13:29:01 2017\n(Parse finished)\nRes: 496  perl5.18 0.0  893M+ -&gt; item count: 119335 &lt;- time: Sun Nov 19 13:31:41 2017\n(Purge finished)\nRes: 496  perl5.18 0.0  5144M+ -&gt; item count: 119335 &lt;- time: Sun Nov 19 13:32:27 2017\n\nJOB COMPLETE.\n119335 items processed.\nkeve@deimos:DATA$\n</code></pre>\n\n<p><strong>Output of the shell script monitoring the memory usage of the perl script</strong>:  </p>\n\n<pre><code>keve@deimos:DATA$ ./monitorTWIGprocess.sh 496\n2017 Nov 19 Vas 13:23:11 CET ::&gt; 496  perl5.18 0.0  291M+ 0B   N/A  \n2017 Nov 19 Vas 13:23:17 CET ::&gt; 496  perl5.18 0.0  434M+ 0B   N/A  \n2017 Nov 19 Vas 13:23:23 CET ::&gt; 496  perl5.18 0.0  559M+ 0B   N/A  \n2017 Nov 19 Vas 13:23:30 CET ::&gt; 496  perl5.18 0.0  684M+ 0B   N/A  \n2017 Nov 19 Vas 13:23:36 CET ::&gt; 496  perl5.18 0.0  810M+ 0B   N/A  \n2017 Nov 19 Vas 13:23:42 CET ::&gt; 496  perl5.18 0.0  936M+ 0B   N/A  \n2017 Nov 19 Vas 13:23:48 CET ::&gt; 496  perl5.18 0.0  1061M+ 0B   N/A  \n2017 Nov 19 Vas 13:23:54 CET ::&gt; 496  perl5.18 0.0  1185M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:00 CET ::&gt; 496  perl5.18 0.0  1328M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:06 CET ::&gt; 496  perl5.18 0.0  1463M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:12 CET ::&gt; 496  perl5.18 0.0  1589M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:18 CET ::&gt; 496  perl5.18 0.0  1715M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:24 CET ::&gt; 496  perl5.18 0.0  1840M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:30 CET ::&gt; 496  perl5.18 0.0  1964M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:36 CET ::&gt; 496  perl5.18 0.0  2090M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:43 CET ::&gt; 496  perl5.18 0.0  2216M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:49 CET ::&gt; 496  perl5.18 0.0  2365M+ 0B   N/A  \n2017 Nov 19 Vas 13:24:55 CET ::&gt; 496  perl5.18 0.0  2494M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:01 CET ::&gt; 496  perl5.18 0.0  2620M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:07 CET ::&gt; 496  perl5.18 0.0  2745M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:13 CET ::&gt; 496  perl5.18 0.0  2870M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:19 CET ::&gt; 496  perl5.18 0.0  2996M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:25 CET ::&gt; 496  perl5.18 0.0  3121M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:31 CET ::&gt; 496  perl5.18 0.0  3253M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:37 CET ::&gt; 496  perl5.18 0.0  3399M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:43 CET ::&gt; 496  perl5.18 0.0  3524M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:50 CET ::&gt; 496  perl5.18 0.0  3649M+ 0B   N/A  \n2017 Nov 19 Vas 13:25:56 CET ::&gt; 496  perl5.18 0.0  3774M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:02 CET ::&gt; 496  perl5.18 0.0  3899M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:08 CET ::&gt; 496  perl5.18 0.0  4024M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:14 CET ::&gt; 496  perl5.18 0.0  4149M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:20 CET ::&gt; 496  perl5.18 0.0  4289M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:26 CET ::&gt; 496  perl5.18 0.0  4370M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:32 CET ::&gt; 496  perl5.18 0.0  4409M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:38 CET ::&gt; 496  perl5.18 0.0  4319M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:44 CET ::&gt; 496  perl5.18 0.0  4231M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:51 CET ::&gt; 496  perl5.18 0.0  4152M+ 0B   N/A  \n2017 Nov 19 Vas 13:26:57 CET ::&gt; 496  perl5.18 0.0  4079M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:03 CET ::&gt; 496  perl5.18 0.0  3934M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:09 CET ::&gt; 496  perl5.18 0.0  3839M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:15 CET ::&gt; 496  perl5.18 0.0  3741M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:21 CET ::&gt; 496  perl5.18 0.0  3654M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:27 CET ::&gt; 496  perl5.18 0.0  3566M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:33 CET ::&gt; 496  perl5.18 0.0  3473M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:39 CET ::&gt; 496  perl5.18 0.0  3377M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:45 CET ::&gt; 496  perl5.18 0.0  3286M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:51 CET ::&gt; 496  perl5.18 0.0  3189M+ 0B   N/A  \n2017 Nov 19 Vas 13:27:58 CET ::&gt; 496  perl5.18 0.0  3141M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:04 CET ::&gt; 496  perl5.18 0.0  2987M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:10 CET ::&gt; 496  perl5.18 0.0  2881M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:16 CET ::&gt; 496  perl5.18 0.0  2796M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:22 CET ::&gt; 496  perl5.18 0.0  2707M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:28 CET ::&gt; 496  perl5.18 0.0  2615M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:34 CET ::&gt; 496  perl5.18 0.0  2597M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:40 CET ::&gt; 496  perl5.18 0.0  2499M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:46 CET ::&gt; 496  perl5.18 0.0  2395M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:53 CET ::&gt; 496  perl5.18 0.0  2310M+ 0B   N/A  \n2017 Nov 19 Vas 13:28:59 CET ::&gt; 496  perl5.18 0.0  2208M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:05 CET ::&gt; 496  perl5.18 0.0  2052M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:11 CET ::&gt; 496  perl5.18 0.0  1943M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:17 CET ::&gt; 496  perl5.18 0.0  1832M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:23 CET ::&gt; 496  perl5.18 0.0  1761M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:29 CET ::&gt; 496  perl5.18 0.0  1669M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:35 CET ::&gt; 496  perl5.18 0.0  1563M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:41 CET ::&gt; 496  perl5.18 0.0  1452M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:47 CET ::&gt; 496  perl5.18 0.0  1340M+ 0B   N/A  \n2017 Nov 19 Vas 13:29:54 CET ::&gt; 496  perl5.18 0.0  1275M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:00 CET ::&gt; 496  perl5.18 0.0  1231M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:06 CET ::&gt; 496  perl5.18 0.0  1142M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:12 CET ::&gt; 496  perl5.18 0.0  1082M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:18 CET ::&gt; 496  perl5.18 0.0  1042M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:24 CET ::&gt; 496  perl5.18 0.0  1000M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:30 CET ::&gt; 496  perl5.18 0.0  958M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:36 CET ::&gt; 496  perl5.18 0.0  977M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:42 CET ::&gt; 496  perl5.18 0.0  941M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:48 CET ::&gt; 496  perl5.18 0.0  924M+ 0B   N/A  \n2017 Nov 19 Vas 13:30:55 CET ::&gt; 496  perl5.18 0.0  956M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:01 CET ::&gt; 496  perl5.18 0.0  895M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:07 CET ::&gt; 496  perl5.18 0.0  911M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:13 CET ::&gt; 496  perl5.18 0.0  895M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:19 CET ::&gt; 496  perl5.18 0.0  876M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:25 CET ::&gt; 496  perl5.18 0.0  825M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:31 CET ::&gt; 496  perl5.18 0.0  812M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:37 CET ::&gt; 496  perl5.18 0.0  812M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:43 CET ::&gt; 496  perl5.18 0.0  987M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:49 CET ::&gt; 496  perl5.18 0.0  2058M+ 0B   N/A  \n2017 Nov 19 Vas 13:31:56 CET ::&gt; 496  perl5.18 0.0  2947M+ 0B   N/A  \n2017 Nov 19 Vas 13:32:02 CET ::&gt; 496  perl5.18 0.0  3178M+ 0B   N/A  \n2017 Nov 19 Vas 13:32:08 CET ::&gt; 496  perl5.18 0.0  3301M+ 0B   N/A  \n2017 Nov 19 Vas 13:32:14 CET ::&gt; 496  perl5.18 0.0  3429M+ 0B   N/A  \n2017 Nov 19 Vas 13:32:20 CET ::&gt; 496  perl5.18 0.0  4247M+ 0B   N/A  \n2017 Nov 19 Vas 13:32:26 CET ::&gt; 496  perl5.18 0.0  4674M+ 0B   N/A  \n2017 Nov 19 Vas 13:32:32 CET ::&gt; 496  perl5.18 0.0  5362M+ 0B   N/A  \n2017 Nov 19 Vas 13:32:38 CET ::&gt; \n^C\nkeve@deimos:DATA$\n</code></pre>\n\n<p>It did not surprise me that the memory usage is constantly increasing. But the output still showed some unexpected results. I don't understand why memory allocation stops at 13:26:57 and why it starts to release memory from that point on until it goes down to 987M while the script is actually reading and processing more and more product tags. Also, why does memory usage go back up again when the code finally reaches the <code>$t-&gt;purge();</code> line?</p>\n\n<p><strong>Note:</strong> I also tested the script with the line modified as <code>$twig-&gt;purge() unless ($product_counter &gt; 119334);</code>, which would NOT purge the last (119335th) product, but would still purge all the others before it. I am intentionally not posting that output as it is almost identical to my original output.  </p>\n"}], "owner": {"reputation": 199, "user_id": 1159460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L0Qk9.png?s=128&g=1", "display_name": "Keve", "link": "https://stackoverflow.com/users/1159460/keve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 47373294, "answer_count": 2, "score": 4, "last_activity_date": 1511260171, "creation_date": 1511052897, "last_edit_date": 1511217445, "question_id": 47372689, "link": "https://stackoverflow.com/questions/47372689/inefficient-use-of-memory-processing-large-file-with-perl-xmltwig-handlers", "title": "Inefficient use of memory processing large file with Perl XML::Twig handlers", "body": "<p>I occasionally need to extract data from a large XML database export. The file size is between 600 and 700 MBs. With a few days of research I concluded that <code>XML::Twig</code> is the way to go, because its handlers allow me to process the file chunk-by-chunk.</p>\n\n<p>I followed the examples, and with some hours of trial and error I wrote the Perl code that performed the job I needed to do. The code worked, it extracted the data I wanted and calculated the details I needed. But while running the script (took about 15 minutes to process the 620MBs XML) I noticed in Activity Monitor that towards the end the memory usage quickly increases to an unreasonably high level.</p>\n\n<p>I removed the Perl code that processes the XML tag I was interested in and replaced it with a single instruction to increment a variable, simply counting how many of <code>product</code> elements had been found. The memory usage was similar. First normal, then towards the final few elements it started to rapidly increase and eat up everything I have.</p>\n\n<p>I added some code to monitor time, the number of items processed, and how much memory my Perl process is using. This code is shown here:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse utf8;\n\nuse XML::Twig;\n\nbinmode STDOUT, \":encoding(UTF-8)\";\nbinmode STDERR, \":encoding(UTF-8)\";\n\nmy $my_processID = $$;\nmy ($xml_file_name, $second_arg) = @ARGV;\nunless (defined($xml_file_name)) { die \"Please provide XML filename as 1st argument.\"; }\n\nmy $product_counter = 0;\nmy @shell_command_output_text;\nmy $resource_usage_status;\nmy $reference_timestamp;\nmy $datetimeNow;\n\nmy $t = XML::Twig-&gt;new(\n    twig_handlers =&gt; { 'product' =&gt; \\&amp;do_what_needs_to_be_done_with_each_product },\n    pretty_print  =&gt; 'indented'\n);\n\n$reference_timestamp = time();\n\n$t-&gt;parsefile( $xml_file_name, ErrorContext =&gt; 2 );\nprint \"(Parse finished)\\n\"; \nshowstatus();\n$t-&gt;purge;\n\nprint \"(Purge finished)\\n\"; \nshowstatus();\nprint \"\\nJOB COMPLETE.\\n$product_counter items processed.\\n\";\n\nexit 0;\n\nsub do_what_needs_to_be_done_with_each_product() {\n    my( $twig, $product)= @_;\n\n    $product_counter++;\n\n    ## Display status every 5 seconds:\n    if ( ( time()-$reference_timestamp ) &gt; 5 ) {\n        showstatus();\n        $reference_timestamp = time();\n    }\n\n    $twig-&gt;purge;\n} ## end-sub\n\n\nsub showstatus() {\n\n    @shell_command_output_text = `top -l 1 -pid $my_processID -stats pid,command,cpu,mem`;\n\n    ## I only need the last line of that output.\n    $resource_usage_status = $shell_command_output_text[$#shell_command_output_text];\n    $datetimeNow = localtime();\n    chomp $resource_usage_status;\n\n    print \"Res: $resource_usage_status -&gt; item count: $product_counter &lt;- time: $datetimeNow\\n\";\n} ## end-sub\n</code></pre>\n\n<p>And here is what was shown on the screen when I run the above script.  </p>\n\n<pre><code>keve@deimos:DATA$ ./twigExample.pl product_db_extract.xml \nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 3086 &lt;- time: Sat Nov 18 23:45:48 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 6521 &lt;- time: Sat Nov 18 23:45:55 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 9909 &lt;- time: Sat Nov 18 23:46:02 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 12751 &lt;- time: Sat Nov 18 23:46:09 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 15570 &lt;- time: Sat Nov 18 23:46:16 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 18151 &lt;- time: Sat Nov 18 23:46:23 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 20828 &lt;- time: Sat Nov 18 23:46:30 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 23561 &lt;- time: Sat Nov 18 23:46:37 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 26230 &lt;- time: Sat Nov 18 23:46:44 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 28861 &lt;- time: Sat Nov 18 23:46:51 2017\nRes: 3237  perl5.18 0.0  12M+ -&gt; item count: 31665 &lt;- time: Sat Nov 18 23:46:58 2017\nRes: 3237  perl5.18 0.0  13M+ -&gt; item count: 34443 &lt;- time: Sat Nov 18 23:47:05 2017\nRes: 3237  perl5.18 0.0  13M+ -&gt; item count: 36952 &lt;- time: Sat Nov 18 23:47:12 2017\nRes: 3237  perl5.18 0.0  13M+ -&gt; item count: 39461 &lt;- time: Sat Nov 18 23:47:19 2017\nRes: 3237  perl5.18 0.0  13M+ -&gt; item count: 42113 &lt;- time: Sat Nov 18 23:47:26 2017\nRes: 3237  perl5.18 0.0  13M+ -&gt; item count: 44794 &lt;- time: Sat Nov 18 23:47:33 2017\nRes: 3237  perl5.18 0.0  13M+ -&gt; item count: 47510 &lt;- time: Sat Nov 18 23:47:40 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 50154 &lt;- time: Sat Nov 18 23:47:47 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 52869 &lt;- time: Sat Nov 18 23:47:54 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 55497 &lt;- time: Sat Nov 18 23:48:01 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 57725 &lt;- time: Sat Nov 18 23:48:08 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 59754 &lt;- time: Sat Nov 18 23:48:15 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 61600 &lt;- time: Sat Nov 18 23:48:22 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 63244 &lt;- time: Sat Nov 18 23:48:29 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 64801 &lt;- time: Sat Nov 18 23:48:36 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 66448 &lt;- time: Sat Nov 18 23:48:43 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 68022 &lt;- time: Sat Nov 18 23:48:50 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 69561 &lt;- time: Sat Nov 18 23:48:57 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 71180 &lt;- time: Sat Nov 18 23:49:04 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 73009 &lt;- time: Sat Nov 18 23:49:11 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 75259 &lt;- time: Sat Nov 18 23:49:18 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 77331 &lt;- time: Sat Nov 18 23:49:25 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 79344 &lt;- time: Sat Nov 18 23:49:32 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 81389 &lt;- time: Sat Nov 18 23:49:39 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 83345 &lt;- time: Sat Nov 18 23:49:46 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 85346 &lt;- time: Sat Nov 18 23:49:53 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 87350 &lt;- time: Sat Nov 18 23:50:00 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 89359 &lt;- time: Sat Nov 18 23:50:07 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 91374 &lt;- time: Sat Nov 18 23:50:14 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 93451 &lt;- time: Sat Nov 18 23:50:21 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 95542 &lt;- time: Sat Nov 18 23:50:28 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 97635 &lt;- time: Sat Nov 18 23:50:35 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 99764 &lt;- time: Sat Nov 18 23:50:42 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 101914 &lt;- time: Sat Nov 18 23:50:49 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 103896 &lt;- time: Sat Nov 18 23:50:56 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 105982 &lt;- time: Sat Nov 18 23:51:03 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 108023 &lt;- time: Sat Nov 18 23:51:10 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 110090 &lt;- time: Sat Nov 18 23:51:17 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 112033 &lt;- time: Sat Nov 18 23:51:24 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 114039 &lt;- time: Sat Nov 18 23:51:31 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 116038 &lt;- time: Sat Nov 18 23:51:38 2017\nRes: 3237  perl5.18 0.0  15M+ -&gt; item count: 118031 &lt;- time: Sat Nov 18 23:51:45 2017\n(Parse finished)\nRes: 3237  perl5.18 0.0  3780M+ -&gt; item count: 119335 &lt;- time: Sat Nov 18 23:54:21 2017\n(Purge finished)\nRes: 3237  perl5.18 0.0  2634M+ -&gt; item count: 119335 &lt;- time: Sat Nov 18 23:54:27 2017\n\nJOB COMPLETE.\n119335 items processed.\nkeve@deimos:DATA$\n</code></pre>\n\n<p>Notice the 3 minutes gap where \"Parse finished\" is printed.</p>\n\n<p>I expected to see the memory usage go up for the final few product tags, just like I have seen it in Activity Monitor. But the memory usage printed\u2014up to the very last product tag\u2014was a perfectly acceptable 15 MB. The tricky part is not shown in this output: only the missing 3 minutes time and the 3780M indicates that something odd happens right after the final product tag.  </p>\n\n<p>So I wrote a shell script to keep track of memory usage during those missing 3 minutes at the end too. Here is what I was running in a separate window while the perl script was processing the XML in its own window.  </p>\n\n<pre><code>#!/bin/bash\nwhile true\ndo\n  perlStat=`top -l 1 -pid $1 -stats pid,command,cpu,mem,purg,vsize | grep perl5`\n  echo \"`date` ::&gt; $perlStat\"\n  sleep 5\ndone\n</code></pre>\n\n<p>And here is the output of that shell script running while the perl script was processing the XML:  </p>\n\n<pre><code>keve@deimos:DATA$ ./monitorTWIGprocess.sh 3237\n2017 Nov 18 Szo 23:45:53 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:00 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:06 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:12 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:18 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:24 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:30 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:36 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:42 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:48 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:46:54 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:01 CET ::&gt; 3237  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:07 CET ::&gt; 3237  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:13 CET ::&gt; 3237  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:19 CET ::&gt; 3237  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:25 CET ::&gt; 3237  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:31 CET ::&gt; 3237  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:37 CET ::&gt; 3237  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:43 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:49 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:47:56 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:02 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:08 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:14 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:20 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:26 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:32 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:38 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:44 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:51 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:48:57 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:03 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:09 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:15 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:21 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:27 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:33 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:39 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:46 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:52 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:49:58 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:04 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:10 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:16 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:22 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:28 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:35 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:41 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:47 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:53 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:50:59 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:05 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:11 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:17 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:23 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:29 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:36 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:42 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:48 CET ::&gt; 3237  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 18 Szo 23:51:54 CET ::&gt; 3237  perl5.18 0.0  125M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:00 CET ::&gt; 3237  perl5.18 0.0  278M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:06 CET ::&gt; 3237  perl5.18 0.0  430M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:12 CET ::&gt; 3237  perl5.18 0.0  584M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:18 CET ::&gt; 3237  perl5.18 0.0  737M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:24 CET ::&gt; 3237  perl5.18 0.0  889M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:31 CET ::&gt; 3237  perl5.18 0.0  1042M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:37 CET ::&gt; 3237  perl5.18 0.0  1195M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:43 CET ::&gt; 3237  perl5.18 0.0  1349M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:49 CET ::&gt; 3237  perl5.18 0.0  1502M+ 0B   N/A  \n2017 Nov 18 Szo 23:52:55 CET ::&gt; 3237  perl5.18 0.0  1656M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:01 CET ::&gt; 3237  perl5.18 0.0  1809M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:07 CET ::&gt; 3237  perl5.18 0.0  1961M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:13 CET ::&gt; 3237  perl5.18 0.0  2114M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:19 CET ::&gt; 3237  perl5.18 0.0  2267M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:26 CET ::&gt; 3237  perl5.18 0.0  2420M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:32 CET ::&gt; 3237  perl5.18 0.0  2573M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:38 CET ::&gt; 3237  perl5.18 0.0  2726M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:44 CET ::&gt; 3237  perl5.18 0.0  2879M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:50 CET ::&gt; 3237  perl5.18 0.0  3032M+ 0B   N/A  \n2017 Nov 18 Szo 23:53:56 CET ::&gt; 3237  perl5.18 0.0  3186M+ 0B   N/A  \n2017 Nov 18 Szo 23:54:02 CET ::&gt; 3237  perl5.18 0.0  3339M+ 0B   N/A  \n2017 Nov 18 Szo 23:54:08 CET ::&gt; 3237  perl5.18 0.0  3492M+ 0B   N/A  \n2017 Nov 18 Szo 23:54:15 CET ::&gt; 3237  perl5.18 0.0  3646M+ 0B   N/A  \n2017 Nov 18 Szo 23:54:21 CET ::&gt; 3237  perl5.18 0.0  3786M+ 0B   N/A  \n2017 Nov 18 Szo 23:54:27 CET ::&gt; 3237  perl5.18 0.0  3502M+ 0B   N/A  \n2017 Nov 18 Szo 23:54:33 CET ::&gt; \n^C\nkeve@deimos:DATA$\n</code></pre>\n\n<p>Notice the increase of memory usage at 23:51:54. That is when the 3-minute gap in the other output starts. And memory usage is rapidly going up from there.</p>\n\n<p>I am puzzled as to what causes this rapid increase of memory usage at the end of processing the last (119,335th) product tag. And whatever it is, why does it use so much memory? 3.5G instead of the 15M, that is not OK.</p>\n\n<p>Am I doing something wrong?</p>\n\n<p>Any suggestion on how to avoid the memory usage increase?</p>\n\n<hr>\n\n<p>Added later, in response to the answers my original post received.  </p>\n\n<p><strong>Supplement</strong><br>\nSwitching to twig_roots.<br>\nI modified the twig handler block by commenting out the handler definition and adding its twig_roots variety instead, as shown here:  </p>\n\n<pre><code>my $t = XML::Twig-&gt;new(\n        ##twig_handlers =&gt; { 'product' =&gt; \\&amp;do_what_needs_to_be_done_with_each_product },\n        twig_roots =&gt; { 'product' =&gt; \\&amp;do_what_needs_to_be_done_with_each_product },\n        twig_print_outside_roots =&gt; 0,\n        pretty_print =&gt; 'indented'\n        );\n</code></pre>\n\n<p>I left the <code>$twig-&gt;purge();</code> instruction inside my sub.</p>\n\n<p>Here is the output of the perl script:  </p>\n\n<pre><code>keve@deimos:DATA$ ./twigExample.pl product_db_extract.xml \nRes: 1591  perl5.18 0.0  12M+ -&gt; item count: 2852 &lt;- time: Sun Nov 19 15:20:51 2017\nRes: 1591  perl5.18 0.0  12M+ -&gt; item count: 6106 &lt;- time: Sun Nov 19 15:20:58 2017\nRes: 1591  perl5.18 0.0  12M+ -&gt; item count: 9341 &lt;- time: Sun Nov 19 15:21:05 2017\nRes: 1591  perl5.18 0.0  12M+ -&gt; item count: 12141 &lt;- time: Sun Nov 19 15:21:12 2017\n.\n.\n.\nRes: 1591  perl5.18 0.0  15M+ -&gt; item count: 112293 &lt;- time: Sun Nov 19 15:26:41 2017\nRes: 1591  perl5.18 0.0  15M+ -&gt; item count: 114255 &lt;- time: Sun Nov 19 15:26:48 2017\nRes: 1591  perl5.18 0.0  15M+ -&gt; item count: 116171 &lt;- time: Sun Nov 19 15:26:55 2017\nRes: 1591  perl5.18 0.0  15M+ -&gt; item count: 118099 &lt;- time: Sun Nov 19 15:27:02 2017\n(Parse finished)\nRes: 1591  perl5.18 0.0  15M+ -&gt; item count: 119335 &lt;- time: Sun Nov 19 15:27:56 2017\n(Purge finished)\nRes: 1591  perl5.18 0.0  15M+ -&gt; item count: 119335 &lt;- time: Sun Nov 19 15:27:57 2017\n\nJOB COMPLETE.\n119335 items processed.\nkeve@deimos:DATA$\n</code></pre>\n\n<p>And here is the output of the monitoring shell script:  </p>\n\n<pre><code>keve@deimos:DATA$ ./monitorTWIGprocess.sh 1591\n2017 Nov 19 Vas 15:20:57 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:03 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:09 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:16 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:22 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:28 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:34 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:40 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:46 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:52 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:21:58 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:04 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:10 CET ::&gt; 1591  perl5.18 0.0  12M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:16 CET ::&gt; 1591  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:22 CET ::&gt; 1591  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:28 CET ::&gt; 1591  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:35 CET ::&gt; 1591  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:41 CET ::&gt; 1591  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:47 CET ::&gt; 1591  perl5.18 0.0  13M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:53 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:22:59 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:05 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:11 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:17 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:23 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:29 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:35 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:41 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:47 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:23:54 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:00 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:06 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:12 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:18 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:24 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:30 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:36 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:42 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:48 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:24:54 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:00 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:06 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:13 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:19 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:25 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:31 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:37 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:43 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:49 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:25:55 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:01 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:07 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:13 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:19 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:26 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:32 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:38 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:44 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:50 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:26:56 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:02 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:08 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:14 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:20 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:26 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:32 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:38 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:44 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:51 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:27:57 CET ::&gt; 1591  perl5.18 0.0  15M+ 0B   N/A  \n2017 Nov 19 Vas 15:28:03 CET ::&gt; \n^C\nkeve@deimos:DATA$\n</code></pre>\n\n<p>The good news is that using the twig_roots approach instead of a twig handler makes my perl code behave as I wanted it. It goes through a giant XML file end extracts data from each product (the extracted data is not in XML format) while the amount of memory used stays below 20 megabytes. Splendid!<br>\nThe bad news is that I am still unable to explain why using the handler ate up that much memory, and why it did that after the last product was read. Up to the last product, memory usage was perfectly fine. What made it go out of control at that point? I will make some more tests to try and satisfy my curiosity, but that is no longer tied to the issue of how my XML-processing perl code development moves forward. I am marking the twig_roots suggestion as an accepted answer, but I very much appreciate the other answer too as that one was equaly educational to work with.</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1511094777, "post_id": 47368729, "comment_id": 81705828, "body": "Actually I also wonder why <i>your</i> post isn&#39;t upvoted some more. It is one of the few questions a day with a clear problem statement <b>and</b> a nice <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>! I wish there were more of them."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "edited": false, "score": 0, "creation_date": 1511083212, "post_id": 47369056, "comment_id": 81702970, "body": "@BioRod Glad to hear. I have no idea and wondered myself. Perhaps someone misclicked."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "edited": false, "score": 1, "creation_date": 1511094084, "post_id": 47369056, "comment_id": 81705612, "body": "@BioRod If it worked, shouldn&#39;t you accept this answer?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "edited": false, "score": 2, "creation_date": 1511121976, "post_id": 47369056, "comment_id": 81715311, "body": "@BioRod Tickle the gray hook below the downvote arrow with your mouse. If you agree with the hover-help, then click. But don&#39;t hurry. Take your time. It&#39;s ok if you decide later."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 7, "last_activity_date": 1511093833, "last_edit_date": 1511093833, "creation_date": 1511026613, "answer_id": 47369056, "question_id": 47368729, "link": "https://stackoverflow.com/questions/47368729/perl-one-liner-inside-python-script/47369056#47369056", "title": "perl one liner inside python script", "body": "<p>Python interprets the <code>\\1</code> in your replacement string as the character 0x01 (which often renders as <code>^A</code>).</p>\n\n<p>Moreover, using <code>\\1</code>, <code>\\2</code> etc. in Perl regexes is reserved to the left hand side of the <code>s///</code> operator, i.e. to the <em>pattern</em>. On the right hand side (the replacement string) you should use <code>$1</code>, <code>$2</code> etc. instead.</p>\n\n<p>From the <a href=\"http://perldoc.perl.org/perlop.html#Gory-details-of-parsing-quoted-constructs\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<blockquote>\n  <p>... It is at this step that <code>\\1</code> is begrudgingly converted to <code>$1</code> in\n  the replacement text of <code>s///</code>, in order to correct the incorrigible\n  sed hackers who haven't picked up the saner idiom yet. A warning is\n  emitted if the <code>use warnings</code> pragma or the <code>-w</code> command-line flag\n  (that is, the <code>$^W</code> variable) was set.</p>\n</blockquote>\n\n<p>So:</p>\n\n<pre><code>s.sendline('perl -pi.bak -e \\'s/^(AllowUsers.*)/$1 boy857sr xxxxxxx/g;\\' /etc/ssh/sshd_config')\n</code></pre>\n\n<p>should do the trick.</p>\n\n<hr>\n\n<p><strong>Update</strong>: Eventually I found the <a href=\"http://perldoc.perl.org/perlre.html#Warning-on-%5c1-Instead-of-%241\" rel=\"nofollow noreferrer\">reference page</a> for <code>\\1</code> vs. <code>$1</code> (thanks to <a href=\"https://stackoverflow.com/q/1068840/5830574\">this post</a>).</p>\n"}], "owner": {"reputation": 497, "user_id": 5429268, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1d8fb81137e25eb9629f65eb1b3f2a14?s=128&d=identicon&r=PG&f=1", "display_name": "BioRod", "link": "https://stackoverflow.com/users/5429268/biorod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 47369056, "answer_count": 1, "score": 3, "last_activity_date": 1511093833, "creation_date": 1511024870, "question_id": 47368729, "link": "https://stackoverflow.com/questions/47368729/perl-one-liner-inside-python-script", "title": "perl one liner inside python script", "body": "<p>I have a perl one liner that appends a string at the end of a particular line and it works when I run the one liner on the host. For instance, I'm looking to append 'boy857sr xxxxxxx' at the end of a line that starts with 'AllowUsers'</p>\n\n<pre><code>perl -pi.bak -e 's/^(AllowUsers.*)/\\1 boy857sr xxxxxxx/g;' /etc/ssh/sshd_config\n</code></pre>\n\n<p>Works perfectly!</p>\n\n<pre><code>AllowUsers boy857bt soladmin svc-Orion_SAM solarw boy857lj boy806nk boy806sk   boy857sr xxxxxxx\n</code></pre>\n\n<p>But when I run it inside a python script, it wipes out the 'AllowUsers' line and add another line, look below:  </p>\n\n<pre><code>#RSAAuthentication yes\n^A kn857sr xxxxxxx\n</code></pre>\n\n<p>Here is the python script.</p>\n\n<pre><code>import pxssh\n\nmy_list=[\n\"server121\"\n]\n\n\nfor i in my_list:\n    s = pxssh.pxssh(timeout=15, maxread=2000000)\n    s.SSH_OPTS += \"-o StrictHostKeyChecking=no\"\n    s.SSH_OPTS += \"-o UserKnownHostsFile=/dev/null\"\n    s.login(i,'username','password')\n    print (i)\n\n    s.sendline('/usr/local/bin/sudo su -')\n    s.expect('Password: ')\n    s.sendline('xxxxxxx')\n\n    s.prompt()\n    print s.before\n    s.sendline('perl -pi.bak -e \\'s/^(AllowUsers.*)/\\1 boy857sr xxxxxxx/g;\\' \n/etc/ssh/sshd_config')\n    s.prompt()\n    print s.before\n\n    s.sendline('exit')\n    s.logout()\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "casting"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1511023472, "post_id": 47368366, "comment_id": 81689291, "body": "Your code does not compile. Also always use warnings and strict. <code>%hash{key}</code> should issue a warning <code>%hash{&quot;key&quot;} in scalar context better written as $hash{&quot;key&quot;}</code>"}, {"owner": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1511038003, "post_id": 47368366, "comment_id": 81694312, "body": "Sorry. Copied this from memory. Original code used $hash. Fixed."}], "answers": [{"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 5, "last_activity_date": 1511023545, "creation_date": 1511023545, "answer_id": 47368528, "question_id": 47368366, "link": "https://stackoverflow.com/questions/47368366/perl-list-context-as-hash-key/47368528#47368528", "title": "Perl List context as hash key", "body": "<p>There's no need to create an array reference.</p>\n\n<pre><code>my $out = $hash{ ($var =~ m/(^[a-z]+)/)[0] }; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1511041313, "last_edit_date": 1511041313, "creation_date": 1511031211, "answer_id": 47369817, "question_id": 47368366, "link": "https://stackoverflow.com/questions/47368366/perl-list-context-as-hash-key/47369817#47369817", "title": "Perl List context as hash key", "body": "<p>There's no need to cram everything into a single statement</p>\n\n<pre><code>my ($key) = $var =~ /(^[a-z]+)/;\nmy $out   = $hash{ $key };\n</code></pre>\n\n<p>but something like this would be okay</p>\n\n<pre><code>my $out;\n$out = $hash{$1} if $var =~ /(^[a-z]+)/;\n</code></pre>\n\n<p>or possibly</p>\n\n<pre><code>my $out = $var =~ /(^[a-z]+)/ &amp;&amp; $hash{$1};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1511041349, "post_id": 47370555, "comment_id": 81695361, "body": "You shouldn&#39;t use the value of <code>$1</code> unless you know that the pattern match succeeded. <code>$out = $hash{$1} if $var =~ &#47;(^[a-z]+)&#47;</code> as I wrote in my own answer."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511041979, "post_id": 47370555, "comment_id": 81695549, "body": "I agree with you for the most general case. But then, how would you know you can use the value of <code>$out</code> after that? A more general case would use <code>if( $var =~ &#47;^([a-z]+)&#47; ) { my $out = $hash{$1}; ... }</code>, don&#180;t you think?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511045649, "post_id": 47370555, "comment_id": 81696575, "body": "If you&#39;re talking about my answer then the intention was to follow up with <code>if ( $out ) { ... }</code>. It may be better to base the whole thing on the regex, or it may not. We have only a tiny view on the OP&#39;s application. It may even be better to <code>die qq{Malformed data &quot;$var&quot;} unless $var =~ &#47;(^[a-z]+)&#47;</code> but we cannot tell."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1511059401, "post_id": 47370555, "comment_id": 81698946, "body": "@JavierElices your first code might end up with a wrong result, if the regex doesn&#39;t match, and <code>$1</code> still contains something from a previous regex. That&#39;s why one shouldn&#39;t do that, like @Borodin said. And your second code is a copy of mine :-/"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1511087961, "post_id": 47370555, "comment_id": 81704068, "body": "Sorry, @tinita, I had not seen your answer when I wrote mine. Also, regarding safety, that line <code>my $out = $hash{ ($var =~ &#47;^([a-z]+)&#47;)[0] };</code> will also fail if the regex does not match."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1511093539, "post_id": 47370555, "comment_id": 81705459, "body": "@JavierElices in case the regex doesn&#39;t match, the oneliner will produce a warning <code>Use of uninitialized value in hash element</code>, and <code>$out</code> will be left undef (unless there&#39;s an empty key in the hash for that purpose). IMHO that&#39;s much safer than quietly producing the wrong result!"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1511101006, "post_id": 47370555, "comment_id": 81707719, "body": "@tinita, I have edited the answer to reflect your suggestion and Borodin&#39;s. Thank you both!"}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1511100906, "last_edit_date": 1511100906, "creation_date": 1511035852, "answer_id": 47370555, "question_id": 47368366, "link": "https://stackoverflow.com/questions/47368366/perl-list-context-as-hash-key/47370555#47370555", "title": "Perl List context as hash key", "body": "<p>What\u00b4s wrong with?</p>\n\n<pre><code>$var =~ /^([a-z]+)/;\nmy $out = $hash{$1};\n</code></pre>\n\n<p>It is useful to use the output of <code>=~</code> in list context for more than one match, but for a single one?</p>\n\n<p>If you are expecting the regex to not match (as suggested by other people), it will be better to check first. For instance:</p>\n\n<pre><code>if( $var =~ /^([a-z]+)/ ) {\n  my $out = $hash{$1};\n  ...\n}\n</code></pre>\n\n<p>If you want a one-liner, you may use:</p>\n\n<pre><code>my $out = $hash{ ($var =~ /^([a-z]+)/)[0] };\n</code></pre>\n\n<p>This will give a warning if the regex does not match. It was suggested first by @tinita.</p>\n"}], "owner": {"reputation": 261, "user_id": 6411120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12cb89f52df40db97b55b861f636838a?s=128&d=identicon&r=PG&f=1", "display_name": "Prgrm.celeritas", "link": "https://stackoverflow.com/users/6411120/prgrm-celeritas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 47369817, "answer_count": 3, "score": 0, "last_activity_date": 1511100906, "creation_date": 1511022676, "last_edit_date": 1511037771, "question_id": 47368366, "link": "https://stackoverflow.com/questions/47368366/perl-list-context-as-hash-key", "title": "Perl List context as hash key", "body": "<p>I have a variable which I want to take the first capture and use that as the key for a hash. I found a solution but it seems suboptimal. </p>\n\n<pre><code>My $out  = $hash{[$var =~ /(^[a-z]+)/]-&gt;[0]};\n</code></pre>\n\n<p>It\u2019s seems like there has to be a better way then going list->array->scalar. Maybe just list->scalar. I know that I could also capture in another variable and then use that as a key, but I want to avoid that. Is there a better way to do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1511016274, "post_id": 47367179, "comment_id": 81687020, "body": "Your syntax is completely wrong. Have you tried running this code? You are also talking about a single string in your first code block, and suddenly have an array of probably strings in the second."}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511016440, "post_id": 47367179, "comment_id": 81687059, "body": "I just want to try to write the code. I know it may not be correct."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1511016551, "post_id": 47367179, "comment_id": 81687102, "body": "Then you should probably try to run it, too. Usually code-writing involves running it. At least for me. ;) And if you don&#39;t want to run it, you can still syntax-check it with <code>perl -c</code>."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511016504, "post_id": 47367307, "comment_id": 81687081, "body": "And <code>fc</code> is only available in 5.16+."}, {"owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1511016587, "post_id": 47367307, "comment_id": 81687114, "body": "I think I won&#39;t use regex for this work. I want to find a substring match. Both strings are plain text and the pattern is a whole word."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1511016681, "post_id": 47367307, "comment_id": 81687142, "body": "@simbabque 5.16 has been out for 5 years. I&#39;m OK with that. :-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "edited": false, "score": 0, "creation_date": 1511016683, "post_id": 47367307, "comment_id": 81687144, "body": "@mahmood your code has a regex pattern match. melpomene is just correcting your bugs. And their last example is a pure substring match. <code>index</code> is similar to <code>substr</code>, but stops at the first occurance and returns the position, not the string."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1511016463, "last_edit_date": 1511016463, "creation_date": 1511016357, "answer_id": 47367307, "question_id": 47367179, "link": "https://stackoverflow.com/questions/47367179/substring-match-in-perl-yes-or-no/47367307#47367307", "title": "substring match in perl, yes or no", "body": "<p>It's not correct because it doesn't even compile: <code>if</code> / <code>else</code> are always followed by a <code>{</code> <code>}</code> block in Perl. Also, <code>if (match_found)</code> is missing the <code>$</code> sigil on the variable.</p>\n\n<p>If you really want case insensitive matching (i.e. to ignore the differences between uppercase and lowercase letters), you need to add the <code>i</code> flag to the regex.</p>\n\n<p>Finally, your code doesn't define a <code>@big_string</code> array, only a <code>$big_string</code> scalar.</p>\n\n<p>So:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util 'any';\n\nmy $big_string = \"Hello Good World\";\nmy $pat = \"world\";\n\nmy $match_found = any { /$pat/i } $big_string;\nif ($match_found) {\n   print \"yes\\n\";\n} else {\n   print \"no\\n\";\n}\n</code></pre>\n\n<p>This code would work, but it can be improved.</p>\n\n<p>First off, why use <code>any</code> at all? We don't have a list of multiple strings to check:</p>\n\n<pre><code>my $match_found = $big_string =~ /$pat/i;\n</code></pre>\n\n<p>Second, <code>$pat</code> doesn't look like it's supposed to be a regex. It's a plain string. This doesn't make any difference for alphanumeric characters (such as <code>world</code>), but in general we should escape all regex metacharacters in strings that aren't intended to be interpreted as regexes. This can be done with the <code>quotemeta</code> function (or its <code>\\Q</code> <code>\\E</code> short form):</p>\n\n<pre><code>my $match_found = $big_string =~ /\\Q$pat\\E/i;\n</code></pre>\n\n<p>This is our improved version:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $big_string = \"Hello Good World\";\nmy $pat = \"world\";\n\nmy $match_found = $big_string =~ /\\Q$pat\\E/i;\nif ($match_found) {\n   print \"yes\\n\";\n} else {\n   print \"no\\n\";\n}\n</code></pre>\n\n<p>Finally, we don't even need a regex for a simple substring search. Instead we can do this:</p>\n\n<pre><code>use feature 'fc';\nmy $match_found = index(fc($big_string), fc($pat)) &gt;= 0;\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/perlfunc#fc-EXPR\" rel=\"nofollow noreferrer\"><code>fc</code></a> implements full Unicode case folding.</p>\n"}], "owner": {"reputation": 18934, "user_id": 859227, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2fd61c62e97e72a9dc6b0b58d60a3da1?s=128&d=identicon&r=PG", "display_name": "mahmood", "link": "https://stackoverflow.com/users/859227/mahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 47367307, "answer_count": 1, "score": -1, "last_activity_date": 1511016463, "creation_date": 1511015517, "question_id": 47367179, "link": "https://stackoverflow.com/questions/47367179/substring-match-in-perl-yes-or-no", "title": "substring match in perl, yes or no", "body": "<p>With perl, I want to find a substring in a string. The result is a True/False and then I will decide what to do. There is good post <a href=\"https://stackoverflow.com/a/2925834/859227\">here</a>, but the usage is vague for me. </p>\n\n<pre><code>my $big_string = \"Hello Good World\";\nmy $pat = \"world\";\n</code></pre>\n\n<p>While the capital/non-capital letters are not important, I want to get True.</p>\n\n<pre><code>use List::Util 'any';\nmy $match_found = any { /$pat/ } @big_string;\nif (match_found)\n   print \"yes\\n\";\nelse\n   print \"no\\n\";\n</code></pre>\n\n<p>Is that correct? Is there any better API for this purpose?</p>\n"}, {"tags": ["bash", "perl", "cgi"], "comments": [{"owner": {"reputation": 109227, "user_id": 641955, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Hg2nO.jpg?s=128&g=1", "display_name": "janos", "link": "https://stackoverflow.com/users/641955/janos"}, "edited": false, "score": 0, "creation_date": 1511013075, "post_id": 47366787, "comment_id": 81686035, "body": "What is your web serve and how did you configure it to execute <code>.sh</code> scripts?"}, {"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1511013522, "post_id": 47366787, "comment_id": 81686197, "body": "Does your file contain the closing double quote (what you&#39;ve pasted doesn&#39;t)?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511016573, "post_id": 47366787, "comment_id": 81687112, "body": "&quot;not able to execute&quot; isn&#39;t a very useful description of your problem. Exactly what unexpected behaviour are you seeing? What is written to the web server error log?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511016811, "post_id": 47366787, "comment_id": 81687190, "body": "What does this have to do with Perl?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511018144, "post_id": 47366787, "comment_id": 81687579, "body": "@simbabque: <b>All</b> CGI has something to do with Perl. I&#39;m surprised you don&#39;t know that :-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511018549, "post_id": 47366787, "comment_id": 81687701, "body": "@simbabque: Unfortunately, I&#39;m otherwise engaged on Friday evening. But catch me on Saturday for sure."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511018717, "post_id": 47366787, "comment_id": 81687752, "body": "@DaveCross I&#39;ll be there until Sunday evening, and I&#39;m planning to do a walking tour of the greater area around the venue (read: play Ingress) on Sunday. I&#39;m open to lunch, pub, having a private guide or anything else really in that time if you&#39;re interested. :)"}, {"owner": {"reputation": 11, "user_id": 8962533, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10154861142277307/picture?type=large", "display_name": "Jay Winfrey", "link": "https://stackoverflow.com/users/8962533/jay-winfrey"}, "edited": false, "score": 0, "creation_date": 1511027583, "post_id": 47366787, "comment_id": 81690816, "body": "@janosI am using apache, sorry for leaving that out."}, {"owner": {"reputation": 11, "user_id": 8962533, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10154861142277307/picture?type=large", "display_name": "Jay Winfrey", "link": "https://stackoverflow.com/users/8962533/jay-winfrey"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1511027640, "post_id": 47366787, "comment_id": 81690847, "body": "@simbabque ...what Dave Cross said. ; )"}], "answers": [{"tags": [], "owner": {"reputation": 109227, "user_id": 641955, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Hg2nO.jpg?s=128&g=1", "display_name": "janos", "link": "https://stackoverflow.com/users/641955/janos"}, "is_accepted": false, "score": 2, "last_activity_date": 1511013835, "creation_date": 1511013835, "answer_id": 47366957, "question_id": 47366787, "link": "https://stackoverflow.com/questions/47366787/server-errors-or-blank-pages-with-cgi-scripts/47366957#47366957", "title": "server errors or blank pages with CGI scripts", "body": "<p>The <code>echo</code> command that prints the content is missing a closing <code>\"</code> in the posted code.\nIn any case,\nthe double-quote character is very common in HTML content and this way of printing is likely to cause headaches later.\nIt will be easier to use a here-document:</p>\n\n<pre><code>#!/bin/bash\n\ncat &lt;&lt;EOF\nContent-type: text/html\n\n... (HTML content here)\n\nEOF\n</code></pre>\n\n<p>Note also that to be able to run this,\nthe file must be executable (<code>chmod +x script.sh</code>),\nand the web server must be configured to execute the script,\ninstead of printing its content, which is a common default.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8963293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e0307bfd0f0df85084e636c5fcfa8e?s=128&d=identicon&r=PG&f=1", "display_name": "masterlir", "link": "https://stackoverflow.com/users/8963293/masterlir"}, "is_accepted": false, "score": 0, "last_activity_date": 1511026013, "creation_date": 1511026013, "answer_id": 47368938, "question_id": 47366787, "link": "https://stackoverflow.com/questions/47366787/server-errors-or-blank-pages-with-cgi-scripts/47368938#47368938", "title": "server errors or blank pages with CGI scripts", "body": "<p>Why echo???!</p>\n\n<p>print \"Content-type: text/html\\n\\n\";</p>\n\n<p>print \"blah blah\", and remember of second \" you dont have it.</p>\n"}], "owner": {"reputation": 11, "user_id": 8962533, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10154861142277307/picture?type=large", "display_name": "Jay Winfrey", "link": "https://stackoverflow.com/users/8962533/jay-winfrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511059036, "creation_date": 1511012717, "last_edit_date": 1511059036, "question_id": 47366787, "link": "https://stackoverflow.com/questions/47366787/server-errors-or-blank-pages-with-cgi-scripts", "title": "server errors or blank pages with CGI scripts", "body": "<p>I have this tiny bit of code, that for some reason, is not able to execute when run from <a href=\"http://localhost/cgi-bin/sysinfo.sh\" rel=\"nofollow noreferrer\">http://localhost/cgi-bin/sysinfo.sh</a>. I'm on a VM of CentOS 7. I'll take all the help I can get. I can\u2019t seem to get these indenions right but they are correct in Vi. </p>\n\n<pre><code>#!/bin/bash\necho -e \"Content-type: text/html\\r\\n\\n\"\necho \"\n&lt;html&gt;\n&lt;head&gt;\n     &lt;title&gt;Bash as CGI&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3&gt;General system information for host $(hostname -s).             &lt;/h3&gt;\n&lt;h4&gt;Memory Info&lt;/h4&gt;\n&lt;pre&gt; $(free -m) &lt;/pre&gt;\n&lt;h4&gt;Disk Info:&lt;/h4&gt;\n&lt;pre&gt; $(df -h) &lt;/pre&gt;\n&lt;h4&gt;Logged in user&lt;/h4&gt;\n&lt;pre&gt; $(w) &lt;/pre&gt;\n&lt;hr&gt;\nInformation generated on $(date)\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When I run it as a shell script...the html tags all show up along with the output of the commands.</p>\n\n<p>Content-type: text/html</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Bash as CGI&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3&gt;General system information for host localhost&lt;/h3&gt;\n&lt;h4&gt;Memory Info&lt;/h4&gt;\n&lt;pre&gt;               total        used        free      shared  \nbuff/cache   available\nMem:           1775         994         137          20         643         \n540\nSwap:          2047           0        2047 &lt;/pre&gt;\n&lt;h4&gt;Disk Info:&lt;/h4&gt;\n&lt;pre&gt; Filesystem               Size  Used Avail Use% Mounted on\n/dev/mapper/centos-root   47G  9.7G   38G  21% /\ndevtmpfs                 873M     0  873M   0% /dev\ntmpfs                    888M  4.2M  884M   1% /dev/shm\ntmpfs                    888M  9.1M  879M   2% /run\ntmpfs                    888M     0  888M   0% /sys/fs/cgroup\n/dev/sda1               1014M  235M  780M  24% /boot\ntmpfs                    178M  4.0K  178M   1% /run/user/42\ntmpfs                    178M   44K  178M   1% /run/user/0 &lt;/pre&gt;\n&lt;h4&gt;Logged in user&lt;/h4&gt;\n&lt;pre&gt;  21:33:21 up  2:01,  3 users,  load average: 0.06, 0.04, 0.05\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\nroot     pts/0    :0               20:45    1.00s  0.14s  0.00s w\nroot     :0       :0               20:45   ?xdm?   1:11   0.11s\n/usr/libexec/gnome-session-binary --session gnome-classic &lt;/pre&gt;\n&lt;hr&gt;\nInformation generated on Sat Nov 18 21:33:21 EST 2017\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510969454, "post_id": 47361487, "comment_id": 81676238, "body": "@ikegami I&#39;m pretty sure &quot;Word&quot; is not a Unicode property."}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1510969679, "post_id": 47361487, "comment_id": 81676278, "body": "Thank you very much for your detailed explanation. I didn&#39;t expect that it can related to so much things. But anyway, can we simply print out <code>\\pM</code> and <code>\\p{Pc}</code>. At the moment, I still don&#39;t get any sense what a character belong to <code>\\pM</code> or <code>\\p{PC}</code> looks like"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1510969434, "last_edit_date": 1510969434, "creation_date": 1510967746, "answer_id": 47361487, "question_id": 47361430, "link": "https://stackoverflow.com/questions/47361430/about-the-meaning-of-perl-w/47361487#47361487", "title": "About the meaning of perl \\w", "body": "<p>Your quote is from <a href=\"http://perldoc.perl.org/perlre.html#Character-Classes-and-other-Special-Escapes\" rel=\"nofollow noreferrer\"><code>perldoc perlre</code></a>. The corresponding footnote says:</p>\n\n<blockquote>\n  <ul>\n  <li>[3]<br>\n  See <a href=\"http://perldoc.perl.org/perlrecharclass.html#Backslash-sequences\" rel=\"nofollow noreferrer\">Backslash sequences in perlrecharclass</a> for details.</li>\n  </ul>\n</blockquote>\n\n<p>Which says:</p>\n\n<blockquote>\n  <p>A <code>\\w</code> matches a single alphanumeric character (an alphabetic character, or a decimal digit); or a connecting punctuation character, such as an underscore (\"_\"); or a \"mark\" character (like some sort of accent) that attaches to one of those. It does not match a whole word. To match a whole word, use <code>\\w+</code>. This isn't the same thing as matching an English word, but in the ASCII range it is the same as a string of Perl-identifier characters.</p>\n</blockquote>\n\n<p>It also says that (if Unicode rules are in effect), <code>\\w</code> is equivalent to <code>\\p{Word}</code>. <a href=\"http://perldoc.perl.org/perluniprops.html#Properties-accessible-through-%5cp%7b%7d-and-%5cP%7b%7d\" rel=\"nofollow noreferrer\"><code>perldoc perluniprops</code></a>:</p>\n\n<blockquote>\n<pre><code>\\p{Word}                \\p{XPosixWord}\n</code></pre>\n</blockquote>\n\n<p>I.e. <code>\\p{Word}</code> is an alias for <code>\\p{XPosixWord}</code>.</p>\n\n<blockquote>\n<pre><code>\\p{XPosixWord}          \\w, including beyond ASCII; = \\p{Alnum} + \\pM + \\p{Pc} (Short: \\p{Word})\n</code></pre>\n</blockquote>\n\n<p>I.e. <code>\\p{XPosixWord}</code> is the union of <code>\\p{Alnum}</code>, <code>\\pM</code>, and <code>\\p{Pc}</code>.</p>\n\n<p>Here <code>\\p{Alnum}</code> matches any \"<em>Alphabetic and (decimal) Numeric</em>\" character, <code>\\pM</code> matches any character whose general category is \"Mark\", and <code>\\p{Pc}</code> matches any character whose general category is \"Connector Punctuation\".</p>\n\n<p>For a complete list of characters in those categories I'll have to defer to Unicode.</p>\n"}, {"comments": [{"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1510990253, "post_id": 47361944, "comment_id": 81680175, "body": "Hi, @ikegami. Where is <code>unichars</code>? I can not install it using apt. Then I download Unicode::Tussle., there is a unichars script. But <code>unichars -a -u &#39;\\w&#39;</code> doesn&#39;t work"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511042289, "post_id": 47361944, "comment_id": 81695655, "body": "The documentation is fixed in blead: <a href=\"https://perl5.git.perl.org/perl.git/commitdiff/9b79e9e3431d11e79a4f85268f70130b7b4369f6\" rel=\"nofollow noreferrer\">perl5.git.perl.org/perl.git/commitdiff/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1511069611, "post_id": 47361944, "comment_id": 81700553, "body": "@user15964, What do you mean by &quot;doesn&#39;t work&quot;? Keep in mind that <code>unichars</code> can be slow, especially with <code>-a</code> and <code>-u</code>. It literally applies the regex argument against each of the 0x110000 possible Unicode characters."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511069664, "post_id": 47361944, "comment_id": 81700561, "body": "@melpomene, Thanks"}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1511082047, "post_id": 47361944, "comment_id": 81702746, "body": "@ikegami Oh, I understand what is going on. it really works. Thank you"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1511158531, "last_edit_date": 1511158531, "creation_date": 1510973109, "answer_id": 47361944, "question_id": 47361430, "link": "https://stackoverflow.com/questions/47361430/about-the-meaning-of-perl-w/47361944#47361944", "title": "About the meaning of perl \\w", "body": "\n\n<p>There are 119,821 matching characters in Unicode 9.0.0 (included in Perl 5.26.0):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ unichars -a -u '\\w' | wc -l\n119821\n</code></pre>\n\n<p>You can use <code>unichars</code> to list the characters matching a property, and you can use <code>uniprops</code> to list the properties that match a character. Both are provided by <a href=\"http://search.cpan.org/perldoc?Unicode::Tussle\" rel=\"nofollow noreferrer\">Unicode::Tussle</a>.</p>\n\n<hr>\n\n<p><a href=\"http://perldoc.perl.org/perluniprops.html\" rel=\"nofollow noreferrer\">perluniprops</a> documents <code>\\p</code>, and <code>\\w</code> is short for <code>\\p{XPosixWord}</code><sup>[1]</sup>, so this is the document one should consult to find out more about <code>\\w</code> and other properties.</p>\n\n<p>A sufficiently-recent perluniprops<sup>[2]</sup> documents that <code>\\w</code> consists of the union of the following properties:</p>\n\n<ul>\n<li><code>XPosixWord</code>:\n\n<ul>\n<li><code>XPosixAlnum</code>: Alphabetic and decimal digits.\n\n<ul>\n<li><code>Alphabetic</code></li>\n<li><code>Decimal_Number</code>: Decimal digits.</li>\n</ul></li>\n<li><code>Mark</code></li>\n<li><code>Connector_Punctuation</code></li>\n<li><code>Join_Control</code></li>\n</ul></li>\n</ul>\n\n<p>Verification:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ diff -u \\\n   &lt;( unichars -a -u '\\w' ) \\\n   &lt;( unichars -a -u '[\\p{Alphabetic}\\p{Decimal_Number}\\p{Mark}\\p{Connector_Punctuation}\\p{Join_Control}]' ) \\\n      &amp;&amp; echo \"No difference.\"\nNo difference.\n</code></pre>\n\n<hr>\n\n<p>In detail:</p>\n\n<ul>\n<li>Custom derived property <code>XPosixWord</code>:\n\n<ul>\n<li>Custom derived property <code>XPosixAlnum</code>: Alphabetic and decimal digits.\n\n<ul>\n<li>Derived property <code>Alphabetic</code>:\n\n<ul>\n<li>Derived property <code>Uppercase</code>:\n\n<ul>\n<li>General category <code>Uppercase_Letter</code> (<code>Lu</code>)</li>\n<li><code>Other_Uppercase</code><sup>[3]</sup></li>\n</ul></li>\n<li>Derived property <code>Lowercase</code>:\n\n<ul>\n<li>General category <code>Lowercase_Letter</code> (<code>Ll</code>)</li>\n<li><code>Other_Lowercase</code><sup>[3]</sup></li>\n</ul></li>\n<li>General category <code>Titlecase_Letter</code> (<code>Lt</code>)</li>\n<li>General category <code>Modifier_Letter</code> (<code>Lm</code>)</li>\n<li>General category <code>Other_Letter</code> (<code>Lo</code>)</li>\n<li>General category <code>Letter_Number</code> (<code>Nl</code>)</li>\n<li><code>Other_Alphabetic</code><sup>[3]</sup></li>\n</ul></li>\n<li>General category <code>Decimal_Number</code> (<code>Nd</code>): Decimal digits.</li>\n</ul></li>\n<li>General category <code>Mark</code> (<code>M</code>):\n\n<ul>\n<li>General category <code>Spacing_Mark</code> (<code>Mc</code>)</li>\n<li>General category <code>Enclosing_Mark</code> (<code>Me</code>)</li>\n<li>General category <code>Nonspacing_Mark</code> (<code>Mn</code>)</li>\n</ul></li>\n<li>General category <code>Connector_Punctuation</code> (<code>Pc</code>)</li>\n<li><code>Join_Control</code></li>\n</ul></li>\n</ul>\n\n<hr>\n\n<ol>\n<li>When using <code>/u</code> or <code>use feature qw( unicode_strings );</code>.</li>\n<li>5.28 will be the first version that documents <code>XPosixWord</code> correctly (since <code>Join_Control</code> characters were added to it in 5.18).</li>\n<li>Not exposed by Perl.</li>\n</ol>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 0, "accepted_answer_id": 47361944, "answer_count": 2, "score": 1, "last_activity_date": 1511158531, "creation_date": 1510967127, "last_edit_date": 1510967764, "question_id": 47361430, "link": "https://stackoverflow.com/questions/47361430/about-the-meaning-of-perl-w", "title": "About the meaning of perl \\w", "body": "<p>according to the doc</p>\n\n<blockquote>\n  <p>\\w        [3]  Match a \"word\" character (alphanumeric plus \"_\", plus\n  other connector punctuation chars plus Unicode marks)</p>\n</blockquote>\n\n<p>I don't understand what is \"plus other connector punctuation chars plus Unicode marks\", the doc seems doesn't say. What is <code>\\w</code> really?</p>\n"}, {"tags": ["mysql", "apache", "perl", "cgi", "dbi"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510950451, "post_id": 47357845, "comment_id": 81670184, "body": "As a first test, I&#39;d copy the working <code>perltest.cgi</code> to <code>test.cgi</code> (overwriting it) and see whether <code>test.cgi</code> then works. If it works, then I&#39;d replace the <code>print</code> lines with the content of <code>test.cgi</code> and again, see whether it works. Don&#39;t touch the first line (the so called &quot;she-bang line&quot;). Make sure there&#39;s no empty line before it. The very first line must be <code>#!...</code>."}, {"owner": {"reputation": 63, "user_id": 6324271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0dc71cd464c79e200584c9dcb0656e?s=128&d=identicon&r=PG&f=1", "display_name": "hungryhippo", "link": "https://stackoverflow.com/users/6324271/hungryhippo"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510952483, "post_id": 47357845, "comment_id": 81671138, "body": "Tried it two ways:  1) Copied the entire contents of test.cgi into perltest.cgi. That resulted in the same error  2) Copied everything but the first line into perltest.cgi. That resulted in a prompt <code>the program can&#39;t start because libmysql_.dll is missing from your computer</code>. (The underscore is not a typo).  There was no line before the <code>#!...</code>, but there was a space. Erased that to no avail."}, {"owner": {"reputation": 63, "user_id": 6324271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0dc71cd464c79e200584c9dcb0656e?s=128&d=identicon&r=PG&f=1", "display_name": "hungryhippo", "link": "https://stackoverflow.com/users/6324271/hungryhippo"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510952602, "post_id": 47357845, "comment_id": 81671198, "body": "Update: Turns out whitespace <i>was</i> the problem. Deleted all the whitespace from the beginning of each line and now test.cgi <i>also</i> says libmysql_.dll missing."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510953410, "post_id": 47357845, "comment_id": 81671554, "body": "That&#39;s (kinda) good news. So you are lacking the MySQL libraries on your computer but in general your script works."}, {"owner": {"reputation": 63, "user_id": 6324271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0dc71cd464c79e200584c9dcb0656e?s=128&d=identicon&r=PG&f=1", "display_name": "hungryhippo", "link": "https://stackoverflow.com/users/6324271/hungryhippo"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510955899, "post_id": 47357845, "comment_id": 81672601, "body": "I fixed it! Downloaded Strawberry Perl and used it&#39;s libmysql_.dll (<a href=\"https://stackoverflow.com/questions/20990786/perl-mysql-error-libmysql-dll\" title=\"perl mysql error libmysql dll\">stackoverflow.com/questions/20990786/&hellip;</a>), which did not work. Finally gave up and used Strawberry Perl&#39;s exe file instead of the xampp one. Still can&#39;t get it to print each row in a newline, but I&#39;ll take what I can get"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1510956789, "post_id": 47357845, "comment_id": 81672940, "body": "Glad to hear. Now you have to combine both scripts. Print your DB results in a &lt;pre&gt;...&lt;/pre&gt; section."}], "owner": {"reputation": 63, "user_id": 6324271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0dc71cd464c79e200584c9dcb0656e?s=128&d=identicon&r=PG&f=1", "display_name": "hungryhippo", "link": "https://stackoverflow.com/users/6324271/hungryhippo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 781, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1510947183, "creation_date": 1510946493, "question_id": 47357845, "link": "https://stackoverflow.com/questions/47357845/perl-cgi-error-when-using-xampp-to-connect-to-mysql", "title": "Perl CGI Error when using XAMPP to connect to MySQL", "body": "<p>I have very limited knowledge about server-side development. I am trying to do a project for school. I have to use perl to write a script that will access a table in MySQL. Using XAMPP on windows 7 for server.</p>\n\n<p>The client is just a simple button for now</p>\n\n<pre><code>&lt;html&gt;\n  &lt;body&gt;\n    &lt;form method=\"POST\" action=\"/cgi-bin/perltest.cgi\"&gt;\n       &lt;input type=\"submit\" value=\"Test\"&gt;\n    &lt;/form&gt; \n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>If I use XAMPP's default perltest.cgi which is</p>\n\n<pre><code>#!\"C:\\xampp\\perl\\bin\\perl.exe\"\n\nprint \"Content-type: text/html\\n\\n\";\nprint '&lt;html&gt;';\nprint '&lt;head&gt;';\nprint '&lt;meta name=\"author\" content=\"Kay Vogelgesang\"&gt;';\nprint '&lt;link href=\"/xampp/xampp.css\" rel=\"stylesheet\" type=\"text/css\"&gt;';\nprint '&lt;/head&gt;';\nprint \"&lt;body&gt;&amp;nbsp;&lt;p&gt;&lt;h1&gt;GCI with MiniPerl&lt;/h1&gt;\";\nprint  \"CGI with MiniPerl is ready ...&lt;/body&gt;&lt;/html&gt;\";\n</code></pre>\n\n<p>it works fine. The problem starts when I write my own test.cgi to try to use DBI module to connect to my database.</p>\n\n<p>The sample code for the database connection was provided by my teacher.</p>\n\n<pre><code>#!\"C:\\xampp\\perl\\bin\\perl.exe\"\n\n use DBI;\n\n $dbh = DBI-&gt;connect('dbi:mysql:perltest','root','')\n     or die \"Connection Error: $DBI::errstr\\n\";\n $sql = \"select * from test\";\n $sth = $dbh-&gt;prepare($sql);\n $sth-&gt;execute\n    or die \"SQL Error: $DBI::errstr\\n\";\n while (@row = $sth-&gt;fetchrow_array) {\n     print \"@row\\n\";\n } \n</code></pre>\n\n<p>Whenever I try to run this, I get the error</p>\n\n<pre><code>Server error!\n\nThe server encountered an internal error and was unable to complete your request. Either the server is overloaded or there was an error in a CGI script.\n\nIf you think this is a server error, please contact the webmaster.\n\nError 500\n\n127.0.0.1\nApache/2.4.29 (Win32) OpenSSL/1.0.2l PHP/7.1.11\n</code></pre>\n\n<p>Apache's error log gives me the following message</p>\n\n<pre><code>[Sat Nov 18 00:36:56.126755 2017] [win32:error] [pid 7420:tid 1620] [client 127.0.0.1:50370] AH02102: C:/xampp/cgi-bin/test.cgi is not executable; ensure interpreted scripts have \"#!\" or \"'!\" first line, referer: http://127.0.0.1/test.html\n[Sat Nov 18 00:36:56.126755 2017] [cgi:error] [pid 7420:tid 1620] (9)Bad file descriptor: [client 127.0.0.1:50370] AH01222: don't know how to spawn child process: C:/xampp/cgi-bin/test.cgi, referer: http://127.0.0.1/test.html\n</code></pre>\n\n<p>As you can see I have used <code>#!</code>. I have no idea where I am going wrong. </p>\n"}, {"tags": ["perl", "return-value", "function-call"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1510946049, "post_id": 47357562, "comment_id": 81667985, "body": "Or use commas, <code>print &quot;value is &quot;, (code), &quot;\\n&quot;</code>, by <a href=\"https://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">print LIST</a>"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1510952354, "post_id": 47357562, "comment_id": 81671070, "body": "Or use expression interpolation: <code>print &quot;ref \\$book_ref is a ${\\ ref $book_ref }\\n&quot;</code>"}], "tags": [], "owner": {"reputation": 3751, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1511543258, "last_edit_date": 1511543258, "creation_date": 1510945259, "answer_id": 47357562, "question_id": 47357561, "link": "https://stackoverflow.com/questions/47357561/why-cant-i-concatenate-and-print-the-value-returned-by-a-function/47357562#47357562", "title": "Why can&#39;t I concatenate and print the value returned by a function?", "body": "<p>The reason is that the function <code>ref</code> is called without parentheses, and this causes the line to be parsed incorrectly.</p>\n\n<ul>\n<li>When <code>ref</code> is called inside the <code>if</code>, the condition is clearly delimited by parentheses, which means that <code>ref</code> knows perfectly well what its argument is: <code>$book_ref</code>. There's no ambiguity.</li>\n<li><p>Instead, when printing the result, the lack of parentheses means that Perl will parse the line in a way that was not intended:</p>\n\n<ol>\n<li>First it will concatenate <code>$book_ref</code> and <code>\"\\n\"</code>. In scalar context, <code>$book_ref</code> evaluates to a string like <code>HASH(0x1cbef70)</code>, therefore the result is the string <code>\"HASH(0x1cbef70)\\n\"</code></li>\n<li>Then, <code>ref</code> will be called on the string <code>\"HASH(0x1cbef70)\\n\"</code>, <a href=\"https://perldoc.perl.org/perlfunc.html#ref-EXPR\" rel=\"nofollow noreferrer\">producing as output an empty string</a>: <code>''</code>.</li>\n<li>At this point, <code>print</code> prints the empty string, that is, nothing, and stops there. The newline character <code>\\n</code> is skipped because it has already been consumed by <code>ref</code>, so <code>print</code> doesn't even see it. And there are no errors.</li>\n</ol></li>\n</ul>\n\n<p>All of this descends from <a href=\"https://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"nofollow noreferrer\">Perl's operator precedence</a>: from the table,</p>\n\n<pre><code>(...)\n\n 8.    left         + - .\n 9.    left         &lt;&lt; &gt;&gt;\n10.    nonassoc     named unary operators\n11.    nonassoc     &lt; &gt; &lt;= &gt;= lt gt le ge\n12.    nonassoc     == != &lt;=&gt; eq ne cmp ~~\n\n(...)\n</code></pre>\n\n<p>where the \"function call\" is actually a \"named unary operator\" (the unary operator being <code>ref</code>). So the <code>.</code> operator at line 8 has higher precedence than the function call at line 10, which is why the result of <code>print</code> is not the expected one. On the other hand, the function call has higher precedence than <code>eq</code> (at line 12), which is why inside the <code>if</code> everything works as expected.</p>\n\n<p>The solution to precedence problems is to use .  </p>\n\n<ul>\n<li><p>A possibility is to use parentheses to emphasize the function call:</p>\n\n<pre><code>print \"ref \\$book_ref is a \" . ref($book_ref) . \"\\n\";\n</code></pre></li>\n<li><p>Another one, which I like less but nevertheless works, is to use parentheses to isolate the string that must be concatenated, by putting the opening bracket just before <code>ref</code>:</p>\n\n<pre><code>print \"ref \\$book_ref is a \" . (ref $book_ref) . \"\\n\";\n</code></pre></li>\n<li><p>Another possible approach, suggested by zdim in a comment, is to use commas:</p>\n\n<pre><code>print \"ref \\$book_ref is a \", ref $book_ref, \"\\n\";\n</code></pre></li>\n</ul>\n\n<p>When I first wrote the <code>if</code> I decided to avoid the parentheses to make the code more readable. Then I copied it and didn't notice the problem. I ended up wasting 2 hours to find the bug.</p>\n\n<p>The best solution seems to be the first one, because if you copy it to another place (like another <code>print</code>) you are guaranteed to also copy the parentheses that prevent the problem. With the second one I probably wouldn't realize how important the parentheses are and wouldn't copy them. And the third one works only if you remember that you have to always use commas and not dots, which is not obvious and therefore error prone. So, although they work, I consider them less safe.</p>\n\n<p>Other comments have also suggested to use <code>printf</code>, which requires dealing with format specifiers, or expression interpolation, like <code>print \"ref \\$book_ref is a ${\\ ref $book_ref }\\n\";</code>, which I find harder to read.</p>\n\n<p>Bottom line: <strong>always use the parentheses</strong>.</p>\n"}], "owner": {"reputation": 3751, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 47357562, "answer_count": 1, "score": 1, "last_activity_date": 1511543258, "creation_date": 1510945259, "last_edit_date": 1510946730, "question_id": 47357561, "link": "https://stackoverflow.com/questions/47357561/why-cant-i-concatenate-and-print-the-value-returned-by-a-function", "title": "Why can&#39;t I concatenate and print the value returned by a function?", "body": "<p>I have a Perl program that calls a function, in this case <code>ref</code>, and checks the result. Specifically, I am testing that a variable is a hash reference. In that case, <code>ref</code> will return <code>'HASH'</code>. I tested it and it worked.</p>\n\n<p>Then I decided to log it, adding a <code>print</code> that displays the result of the same call, but it didn't work correctly. Here is a reduced version:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $book_ref = {};\n$book_ref-&gt;{'title'} = 'The Lord of the Rings';\n\nif (ref $book_ref eq 'HASH') {\n    print \"ref \\$book_ref is a \" . ref $book_ref . \"\\n\";\n}\n\nprint \"Program is over\\n\";\n</code></pre>\n\n<p>To my surprise, this was the output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ref $book_ref is a Program is over\n</code></pre>\n\n<p>And despite using <code>strict</code> and <code>warnings</code> there were neither errors nor warnings.<br>\nThe call to <code>ref</code> is exactly the same (it's a copy and paste), but while it works correctly inside the <code>if</code> condition, <code>print</code> doesn't display anything, and actually seems to be interrupted, as the newline character is clearly skipped. Why does the behaviour change?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1031, "user_id": 2563449, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/08823daac701d0d77d4c5f35f268fe51?s=128&d=identicon&r=PG", "display_name": "PazO", "link": "https://stackoverflow.com/users/2563449/pazo"}, "edited": false, "score": 0, "creation_date": 1510943986, "post_id": 47357045, "comment_id": 81666999, "body": "@Pri - Generally speaking: RAM operations (hence - array) will always be much faster then I/O operations (file)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510944305, "post_id": 47357045, "comment_id": 81667137, "body": "Some notes: <code>@array;</code> is <b>not</b> a declaration. It is also not global. It creates a package variable if you do not have strict, but it doesn&#39;t really declare it during runtime, like <code>my</code> or <code>our</code> would. You cannot name subs <code>1</code> or <code>2</code>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510951615, "post_id": 47357165, "comment_id": 81670725, "body": "Best to avoid Tie::File, especially if you have memory issues. It&#39;s a huge memory hog. You could easily end up using more memory than the size of the file!"}, {"owner": {"reputation": 957, "user_id": 5671807, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qb8_mT2Zau8/AAAAAAAAAAI/AAAAAAAAAcg/SZsZss91bdw/photo.jpg?sz=128", "display_name": "AnouarZ", "link": "https://stackoverflow.com/users/5671807/anouarz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510952967, "post_id": 47357165, "comment_id": 81671366, "body": "@ikegami what module you can advise to deal with files ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1510953527, "post_id": 47357165, "comment_id": 81671596, "body": "I would work to avoid being in that situation in the first place (e.g. by re-ordering the data, by loading the data into a db, etc)."}], "tags": [], "owner": {"reputation": 957, "user_id": 5671807, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qb8_mT2Zau8/AAAAAAAAAAI/AAAAAAAAAcg/SZsZss91bdw/photo.jpg?sz=128", "display_name": "AnouarZ", "link": "https://stackoverflow.com/users/5671807/anouarz"}, "is_accepted": false, "score": 0, "last_activity_date": 1510944067, "last_edit_date": 1510944067, "creation_date": 1510943766, "answer_id": 47357165, "question_id": 47357045, "link": "https://stackoverflow.com/questions/47357045/perl-use-of-array-vs-file/47357165#47357165", "title": "Perl use of array vs file", "body": "<p><em>It depends on what you are going to do inside those subs</em></p>\n\n<p>The first example never makes sense in the given form ( wroten some operation on the array! you need to be specific). </p>\n\n<p>If you are processing stuff sequentially, from beginning to end, it makes sense to use the file iterator instead of slurping it into memory, as by that way, you will not use as much system memory and perls buffering will handle the reading from the file in a relatively efficient manner.</p>\n\n<p><strong><em>You should always process files line by line unless you can't otherwise avoid it</strong>.</em></p>\n\n<p>As soon as you need to go back and forth between lines, and jump backwards in the files, then the first approach of reading the whole file into memory makes the algorithm much easier to write (at the cost of some system memory). </p>\n\n<p>If system memory is scarce and you are able to trade a bit of time against memory, take a look at <a href=\"http://search.cpan.org/search?mode=module&amp;query=Tie%3A%3AFile\" rel=\"nofollow noreferrer\">Tie::File</a>, which lets you access a file on disk just like an array in memory.</p>\n"}], "owner": {"reputation": 15, "user_id": 8948091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84d189b1b7ba48ff82bc5d3e43369d7?s=128&d=identicon&r=PG&f=1", "display_name": "Pri", "link": "https://stackoverflow.com/users/8948091/pri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1510944923, "creation_date": 1510943304, "last_edit_date": 1510944923, "question_id": 47357045, "link": "https://stackoverflow.com/questions/47357045/perl-use-of-array-vs-file", "title": "Perl use of array vs file", "body": "<p>Which of the following is a better way to write the code, considering impact on performance/time taken etc -\n(Following is a pseudo code, please ignore syntax issues. Idea here is to understand under what circumstances to use an array vs a file )\nCase 1::</p>\n\n<pre><code>@array; # globally accessible\nsub 1 {\n    #some operations on @array\n}\n.\n.\n.\nsub 2 {\n    #print @array info\n}\n</code></pre>\n\n<p>Case 2 :: #instead of using array, use file </p>\n\n<pre><code> sub 1 {\n   #open file1\n    #write to file1\n    #close file\n} \n.\n.\n.\nsub 2 {\n    #open file1\n    #read file1\n    #print file1 info\n    #close file1\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1510942821, "post_id": 47356896, "comment_id": 81666460, "body": "What&#39;s the extra little <code>t</code> in there for?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 6, "creation_date": 1510943269, "post_id": 47356896, "comment_id": 81666690, "body": "What really is meant with <a href=\"http://search.cpan.org/~leejo/CGI-4.37/lib/CGI.pod#HTML_Generation_functions_should_no_longer_be_used\" rel=\"nofollow noreferrer\"><i>HTML Generation functions should no longer be used</i></a> is: don&#39;t use CGI functions like <code>$q-&gt;start_html(...)</code> at all. These are the functions generating HTML. ;-) Have a look at the <a href=\"http://search.cpan.org/~leejo/CGI-Alternatives-0.15/lib/CGI/Alternatives.pm\" rel=\"nofollow noreferrer\">Alternatives</a> to CGI, such as <a href=\"http://mojolicious.org/\" rel=\"nofollow noreferrer\">Mojolicious</a> or <a href=\"http://perldancer.org/\" rel=\"nofollow noreferrer\">Dancer2</a> or <a href=\"http://www.catalystframework.org/\" rel=\"nofollow noreferrer\">Catalyst</a>. Once you start with them, you&#39;ll love it. Promised."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1510944771, "post_id": 47356896, "comment_id": 81667363, "body": "Your first script writes HTML directly. That&#39;s <i>not</i> using the HTML generation functions. The second one uses them. I would prefer the first version, but it&#39;s still ugly. I suggest you watch <a href=\"https://www.youtube.com/watch?v=jKOqtRMT85s\" rel=\"nofollow noreferrer\">this lightning talk</a> by SawyerX."}, {"owner": {"reputation": 39, "user_id": 4784283, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206083396834083/picture?type=large", "display_name": "Stephen St", "link": "https://stackoverflow.com/users/4784283/stephen-st"}, "edited": false, "score": 0, "creation_date": 1511002507, "post_id": 47356896, "comment_id": 81683218, "body": "I dont got any usefull answer to my problem, but thanks Perlduck for the Explikation about the cgi policy and the &quot;HTML Generation functions should no longer be used&quot;."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1511003651, "post_id": 47356896, "comment_id": 81683527, "body": "If you get an &quot;internal server error&quot; message in your browser, then there will be more information about the error in your web server error log. Without knowing what it says in there, we would just be guessing at the cause of your problem - and that would be a waste of everyone&#39;s time. Please <a href=\"https://stackoverflow.com/posts/47356896/edit\">edit your question</a> to add the messages from the error log."}, {"owner": {"reputation": 39, "user_id": 4784283, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206083396834083/picture?type=large", "display_name": "Stephen St", "link": "https://stackoverflow.com/users/4784283/stephen-st"}, "edited": false, "score": 0, "creation_date": 1511021974, "post_id": 47356896, "comment_id": 81688760, "body": "Thanks for that. The log says: &quot;(8)Exec format error: exec of &#39;/Library/WebServer/perling/mycgi.pl&#39; failed&quot;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1511026552, "post_id": 47356896, "comment_id": 81690412, "body": "@StephenSt: Important information like that can get lost in if it&#39;s put in comments. Why not <a href=\"https://stackoverflow.com/posts/47356896/edit\">edit your question</a> and put it up there?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4784283, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206083396834083/picture?type=large", "display_name": "Stephen St", "link": "https://stackoverflow.com/users/4784283/stephen-st"}, "edited": false, "score": 0, "creation_date": 1511034088, "post_id": 47369090, "comment_id": 81693070, "body": "The codes are listet on my thread above. But how I sad, from the command line comes an expected outcome. It is the browser site that doesn&#39;t load the code from the mycgi.pl."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 39, "user_id": 4784283, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206083396834083/picture?type=large", "display_name": "Stephen St", "link": "https://stackoverflow.com/users/4784283/stephen-st"}, "edited": false, "score": 1, "creation_date": 1511038989, "post_id": 47369090, "comment_id": 81694618, "body": "@StephenSt: Of course, running your code as <code>perl mycgi,pl</code> won&#39;t use the shebang line. So you&#39;re just strengthening my theory that there is something wrong with it. If you were to answer my other questions, then we might be able to help you."}, {"owner": {"reputation": 39, "user_id": 4784283, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206083396834083/picture?type=large", "display_name": "Stephen St", "link": "https://stackoverflow.com/users/4784283/stephen-st"}, "edited": false, "score": 1, "creation_date": 1511044667, "post_id": 47369090, "comment_id": 81696348, "body": "That&#39;s embarrassing, sorry. It was a space on begin of the shebang line. Neverless, thank you for your patience."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1511026815, "creation_date": 1511026815, "answer_id": 47369090, "question_id": 47356896, "link": "https://stackoverflow.com/questions/47356896/perl-avoiding-of-the-html-generation-function/47369090#47369090", "title": "perl avoiding of the &quot;HTML Generation function&quot;", "body": "<p>From your comment:</p>\n\n<blockquote>\n  <p>(8)Exec format error: exec of '/Library/WebServer/perling/mycgi.pl' failed</p>\n</blockquote>\n\n<p>That usually indicates a problem with your shebang line. Is the shebang on the first line of your program? Does it point to an executable that really exists? Are there spurious invisible characters at the end of the line (this is sometimes the case when a program is written on Windows and run on a Unix system).</p>\n"}], "owner": {"reputation": 39, "user_id": 4784283, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206083396834083/picture?type=large", "display_name": "Stephen St", "link": "https://stackoverflow.com/users/4784283/stephen-st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511026815, "creation_date": 1510942642, "last_edit_date": 1510944258, "question_id": 47356896, "link": "https://stackoverflow.com/questions/47356896/perl-avoiding-of-the-html-generation-function", "title": "perl avoiding of the &quot;HTML Generation function&quot;", "body": "<p>The avoiding of the \"HTML Generation functions\" doesnt work for me.<br>\nIf I start on my localhost the perlscript</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Content-type:text/html\\r\\n\\r\\n\";\nprint '&lt;html&gt;';\nprint '&lt;head&gt;';\nprint '&lt;title&gt;Hello Perl&lt;/title&gt;';\nprint '&lt;/head&gt;';\nprint '&lt;body&gt;';\nprint '&lt;h2&gt;Hello perl&lt;/h2&gt;';\nprint '&lt;/body&gt;';\nprint '&lt;/html&gt;';\n</code></pre>\n\n<p>My browser print it out as expected:<br>\n<br>\n\"Hello perl\"</p>\n\n<p>But perldoc advices: \"HTML Generation functions should no longer be used\".<br> So I tried the object oriented cgitutorial-script (perl, v5.10.0).</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse CGI; \n$q = new CGI; \nprint $q-&gt;header,\n$q-&gt;start_html('hello world'), \n$q-&gt;h1('hello world'), \n$q-&gt;end_html; \n</code></pre>\n\n<p>The browser shows<br> \n<br> \n\"Internal Server Error\"</p>\n\n<p>If I load the above script on the terminal with </p>\n\n<pre><code>$perl mycgi.pl\n</code></pre>\n\n<p>it shows an expected outcome</p>\n\n<pre><code>Content-Type: text/html; charset=ISO-8859-1\n\n&lt;!DOCTYPE html\nPUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;\n&lt;head&gt;\n&lt;title&gt;hello world&lt;/title&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;hello world&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["perl", "parsing", "multiline"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1510935675, "post_id": 47354717, "comment_id": 81662438, "body": "\u201c<i>but I guess it&#39;s not possible to handle multiline parsing properly</i>\u201d \u2013 if you were to show more of your actual code, maybe that problem could be solved? There is probably a simple solution without having to use complicated regexes. \u201c<i>Now I am thinking to parse the file at once but wasn&#39;t successful so far...</i>\u201d \u2013 Can you clarify how this doesn&#39;t work for you? There are a number of problems in that snippet, but they are all unrelated to the problem in your title (regexes with lookbehind). See also <a href=\"https://perlmaven.com/slurp\" rel=\"nofollow noreferrer\">perlmaven.com/slurp</a> for valuable pointers."}], "answers": [{"comments": [{"owner": {"reputation": 1189, "user_id": 2622293, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/siKFs.jpg?s=128&g=1", "display_name": "EverythingRightPlace", "link": "https://stackoverflow.com/users/2622293/everythingrightplace"}, "edited": false, "score": 0, "creation_date": 1511165004, "post_id": 47355338, "comment_id": 81727807, "body": "I also tried that regex approach with <code>&#47;s</code> before but thought the <code>.</code> would match &quot;as much as possible&quot; between the two keywords. If I would search for header1 - var2, then it would match header2 - var2 again? Or isn&#39;t this the case?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1189, "user_id": 2622293, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/siKFs.jpg?s=128&g=1", "display_name": "EverythingRightPlace", "link": "https://stackoverflow.com/users/2622293/everythingrightplace"}, "edited": false, "score": 0, "creation_date": 1511166442, "post_id": 47355338, "comment_id": 81728468, "body": "You&#39;re right. It only works by accident - because <code>header2</code> is the last header in your file. My second solution still works though."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1510937871, "last_edit_date": 1510937871, "creation_date": 1510936620, "answer_id": 47355338, "question_id": 47354717, "link": "https://stackoverflow.com/questions/47354717/parsing-string-in-multiline-data-with-positive-lookbehind/47355338#47355338", "title": "Parsing string in multiline data with positive lookbehind", "body": "<blockquote>\n<pre><code>while (&lt;FILE&gt;){ @Input = &lt;FILE&gt;; }\n</code></pre>\n</blockquote>\n\n<p>This doesn't make much sense. \"While you can read a record from FILE, read all of the data on FILE into <code>@Input</code>\". I think what you actually want is just:</p>\n\n<pre><code>my @Input = &lt;FILE&gt;;\n</code></pre>\n\n<blockquote>\n<pre><code>if (@Input =~ /header2/){ \n</code></pre>\n</blockquote>\n\n<p>This is quite strange too. The binding operator (<code>=~</code>) expects scalar operands, so it evaluates both operands in scalar context. That means <code>@Input</code> will be evaluated as the number of elements in <code>@Input</code>. That's an integer and will never match \"header2\".</p>\n\n<p>A couple of approaches. Firstly a regex approach.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $file = 'file';\n\nopen my $fh, '&lt;', $file or die $!;\n\nmy $data = join '', &lt;$fh&gt;;\n\nif ($data =~ /header2.+var3 (.+?)\\n/s) {\n  say $1;\n} else {\n  say 'Not found';\n}\n</code></pre>\n\n<p>The key to this is the <code>/s</code> on the <code>m//</code> operator. Without it, the two dots in the regex won't match newlines.</p>\n\n<p>The other approach is more of a line by line parser.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $file = 'file';\n\nopen my $fh, '&lt;', $file or die $!;\n\nmy $section = '';\n\nwhile (&lt;$fh&gt;) {\n  chomp;\n  # if the line all word characters,\n  # then we've got a section header.\n  if ($_ !~ /\\W/) {\n    $section = $_;\n    next;\n  }\n\n  my ($key, $val) = split;\n  if ($section eq 'header2' and $key eq 'var3') {\n    say $val;\n    last;\n  }\n}\n</code></pre>\n\n<p>We read the file a line at a time and make a note of the section headers. For data lines, we split on whitespace and check to see if we're in the right section and have the right key.</p>\n\n<p>In both cases, I've switched to using a more standard approach (lexical filehandles, 3-arg <code>open()</code>, <code>or die $!</code>) for opening the file.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1510963347, "last_edit_date": 1510963347, "creation_date": 1510937191, "answer_id": 47355517, "question_id": 47354717, "link": "https://stackoverflow.com/questions/47354717/parsing-string-in-multiline-data-with-positive-lookbehind/47355517#47355517", "title": "Parsing string in multiline data with positive lookbehind", "body": "<p>The easier way to handle this is \"paragraph mode\".</p>\n\n<pre><code>local $/ = \"\";\nwhile (&lt;&gt;) {\n    my ($header, $body) =~ /^([^\\n]*)\\n-+\\n(.*)/s\n       or die(\"Bad data\");\n\n    my @data = map [ split ], split /\\n/, $body;\n\n    # ... Do something with $header and @data ...\n}\n</code></pre>\n\n<p>The same can be achieved without messing with <code>$/</code> as follows:</p>\n\n<pre><code>my @buf;\nwhile (1) {\n    my $line = &lt;&gt;;\n    $line =~ s/\\s+\\z// if !defined($line);\n    if (!length($line)) {\n       if (@buf) {\n          my $header = shift(@buf);\n          shift(@buf);\n          my @data = map [ split ], splice(@buf);\n\n          # ... Do something with $header and @data ...\n       }\n\n       last if !defined($line);\n       next;\n    }\n\n    push @buf, $line;\n}\n</code></pre>\n\n<p>(In fact, the second snippet includes a couple of small improvements over the first.)</p>\n\n<p>Quick comments on your attempt:</p>\n\n<ul>\n<li>The <code>while</code> loop is useless because <code>@Input = &lt;FILE&gt;</code> places the remaining lines of the file in <code>@Input</code>.</li>\n<li><code>@Input =~ /header2/</code> matches <code>header2</code> against the stringification of the array, which is the stringification of the number of elements in <code>@Input</code>. If you want to check of an element of <code>@Input</code> contains <code>header2</code>, will you will need to loop over the elements of <code>@Inputs</code> and check them individually.</li>\n</ul>\n"}], "owner": {"reputation": 1189, "user_id": 2622293, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/siKFs.jpg?s=128&g=1", "display_name": "EverythingRightPlace", "link": "https://stackoverflow.com/users/2622293/everythingrightplace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510963347, "creation_date": 1510934627, "question_id": 47354717, "link": "https://stackoverflow.com/questions/47354717/parsing-string-in-multiline-data-with-positive-lookbehind", "title": "Parsing string in multiline data with positive lookbehind", "body": "<p>I am trying to parse data like:</p>\n\n<pre><code>header1\n-------\nvar1 0\nvar2 5\nvar3 9\nvar6 1\n\nheader2\n-------\nvar1 -3\nvar3 5\nvar5 0\n</code></pre>\n\n<p>Now I want to get e.g. var3 for header2. Whats the best way to do this?</p>\n\n<p>So far I was parsing my files line-by-line via</p>\n\n<pre><code>open(FILE,\"&lt; $file\");\nwhile (my $line = &lt;FILE&gt;){\n    # do stuff\n}\n</code></pre>\n\n<p>but I guess it's not possible to handle multiline parsing properly.</p>\n\n<p>Now I am thinking to parse the file at once but wasn't successful so far...</p>\n\n<pre><code>my @Input;\nopen(FILE,\"&lt; $file\");\nwhile (&lt;FILE&gt;){ @Input = &lt;FILE&gt;; }\nif (@Input =~ /header2/){ \n    #...\n}\n</code></pre>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 3, "creation_date": 1510929967, "post_id": 47353189, "comment_id": 81658618, "body": "The error message says \u201cyou may need to install the DBI module\u201d \u2013 have you done that? If the documentation of that software doesn&#39;t specify its prerequisites, that&#39;s an issue with that software and not with Perl or DBI. Compare also this recent bug report: <a href=\"https://github.com/rjust/defects4j/issues/125\" rel=\"nofollow noreferrer\">github.com/rjust/defects4j/issues/125</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8958233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d010bdd7a962923fe9b99c4c2793f19c?s=128&d=identicon&r=PG&f=1", "display_name": "Luisa", "link": "https://stackoverflow.com/users/8958233/luisa"}, "edited": false, "score": 0, "creation_date": 1510975848, "post_id": 47353311, "comment_id": 81677299, "body": "The operating system is Windows, I was download ActivePerl 5.24.2 for Windows(64-bit) in <a href=\"https://www.activestate.com/activeperl/downloads.Then\" rel=\"nofollow noreferrer\">activestate.com/activeperl/downloads.Then</a> one click install. I used git bash to running &quot;$ perldoc -l DBI&quot;,It&#39;s wrong with&quot;No documentation found for &quot;DBI&quot;. But I used cmd to running it ,it&#39;s right with&quot;C:\\Perl64\\lib\\DBI.pm&quot;"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 8958233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d010bdd7a962923fe9b99c4c2793f19c?s=128&d=identicon&r=PG&f=1", "display_name": "Luisa", "link": "https://stackoverflow.com/users/8958233/luisa"}, "edited": false, "score": 0, "creation_date": 1510990465, "post_id": 47353311, "comment_id": 81680235, "body": "@Luisa: Well, as I said, DBI isn&#39;t included as part of the standard Perl installation. You&#39;ll need to install it separately. As you&#39;re using ActivePerl, you can probably install it with PPM."}, {"owner": {"reputation": 23, "user_id": 8958233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d010bdd7a962923fe9b99c4c2793f19c?s=128&d=identicon&r=PG&f=1", "display_name": "Luisa", "link": "https://stackoverflow.com/users/8958233/luisa"}, "edited": false, "score": 0, "creation_date": 1511007898, "post_id": 47353311, "comment_id": 81684614, "body": "Thank you for your attention.I really appreciate it. Now I try to use the PPM install DBI like &quot;ppm install DBI&quot;, but it&#39;s wrong with :$ ppm install DBI Can&#39;t locate ActivePerl/PPM/limited_inc.pm in @INC (you may need to install the ActivePerl::PPM::limited_inc module) (@INC contains: /usr/lib/perl5/site_perl /usr/share/perl5/site_perl /usr/lib/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl /usr/share/perl5/core_perl .) at /c/Perl64/bin/ppm line 4. BEGIN failed--compilation aborted at /c/Perl64/bin/ppm line 4."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 8958233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d010bdd7a962923fe9b99c4c2793f19c?s=128&d=identicon&r=PG&f=1", "display_name": "Luisa", "link": "https://stackoverflow.com/users/8958233/luisa"}, "edited": false, "score": 0, "creation_date": 1511011326, "post_id": 47353311, "comment_id": 81685555, "body": "@Luisa: I&#39;m afraid I&#39;m completely the wrong person to help you with ActiveState questions. I never use Perl on Windows."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1510932951, "last_edit_date": 1510932951, "creation_date": 1510930016, "answer_id": 47353311, "question_id": 47353189, "link": "https://stackoverflow.com/questions/47353189/cant-locate-dbi-pm-in-inc-you-may-need-to-install-the-dbi-module/47353311#47353311", "title": "Can&#39;t locate DBI.pm in @INC (you may need to install the DBI module)", "body": "<p><a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a> is the most commonly-used Perl database interface library. It is not included as part of the standard Perl distribution. You will, therefore, need to install this module (as the error message says).</p>\n\n<p>If you update your question to give more information about your environment (what operating system, what version of Perl, how Perl was installed) then we will be able to help you install it.</p>\n"}], "owner": {"reputation": 23, "user_id": 8958233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d010bdd7a962923fe9b99c4c2793f19c?s=128&d=identicon&r=PG&f=1", "display_name": "Luisa", "link": "https://stackoverflow.com/users/8958233/luisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3234, "favorite_count": 0, "closed_date": 1510932595, "accepted_answer_id": 47353311, "answer_count": 1, "score": 0, "last_activity_date": 1510934634, "creation_date": 1510929666, "last_edit_date": 1510934634, "question_id": 47353189, "link": "https://stackoverflow.com/questions/47353189/cant-locate-dbi-pm-in-inc-you-may-need-to-install-the-dbi-module", "closed_reason": "Duplicate", "title": "Can&#39;t locate DBI.pm in @INC (you may need to install the DBI module)", "body": "<p>I want to use the Defects4j dataset,when I do this follow the page of github: \n <a href=\"https://github.com/rjust/defects4j\" rel=\"nofollow noreferrer\">https://github.com/rjust/defects4j</a></p>\n\n<pre><code>$ defects4j checkout Lang\nCan't locate DBI.pm in @INC\n   (you may need to install the DBI module)\n   (@INC contains:\n   /c/Users/Liu Fang/defects4j/framework/lib\n   /c/Users/Liu Fang/defects4j/framework\n   /c/Users/Liu Fang/defects4j/framework/core\n   /c/Users/Liu Fang/defects4j/framework/core\n   /usr/lib/perl5/site_perl\n   /usr/share/perl5/site_perl\n   /usr/lib/perl5/vendor_perl\n   /usr/share/perl5/vendor_perl \n   /usr/lib/perl5/core_perl\n   /usr/share/perl5/core_perl .\n   ) at /c/Users/Liu Fang/defects4j/framework/core/DB.pm line 43.\n</code></pre>\n\n<p>[Added line breaks for readability]</p>\n"}, {"tags": ["perl", "pattern-matching"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510931056, "post_id": 47352677, "comment_id": 81659426, "body": "To be able to give a meaningful answer as to why your pattern doesn&#39;t match, we&#39;d need some example data, and then we might be able to tell you. I&#39;d say probably because you&#39;re quoting <code>$pat_array[$j]</code> but it might be cause you&#39;re not escaping meta characters properly."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1510938111, "post_id": 47352677, "comment_id": 81663947, "body": "The example you&#39;ve given is definitely not a valid regex - <code>**</code> is definitely not allowed without being escaped"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510938951, "post_id": 47352677, "comment_id": 81664427, "body": "I&#39;m voting to close this question as unclear because what you have there is not a &quot;complex unknown regex pattern&quot;, it&#39;s simply not a valid regex. It&#39;s not clear what you&#39;re trying to do with this or what you want to happen."}, {"owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "edited": false, "score": 0, "creation_date": 1511190562, "post_id": 47352677, "comment_id": 81743191, "body": "Thanks everyone. My bad, I used the term regex."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1510938788, "post_id": 47355940, "comment_id": 81664325, "body": "Or if you&#39;re just looking for a substring, <code>index</code>."}, {"owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "edited": false, "score": 0, "creation_date": 1511157749, "post_id": 47355940, "comment_id": 81724723, "body": "Thank you so much tinita :)"}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 2, "last_activity_date": 1510938661, "creation_date": 1510938661, "answer_id": 47355940, "question_id": 47352677, "link": "https://stackoverflow.com/questions/47352677/how-to-match-complex-unknown-patterns-in-perl-when-the-pattern-is-in-a-variable/47355940#47355940", "title": "How to match complex unknown patterns in perl, when the pattern is in a variable?", "body": "<p>You need to quote the special characters.\nSee <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">perldoc -f quotemeta</a></p>\n\n<p>You can also use the shorthand <code>\\Q$variable\\E</code> syntax like that:</p>\n\n<pre><code>if ($string =~ m/\\Q$pattern\\E/) { ... }\n</code></pre>\n\n<p>Any special char will be matched literally now.</p>\n"}], "owner": {"reputation": 87, "user_id": 6295322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/FHUF2.jpg?s=128&g=1", "display_name": "Ansh007", "link": "https://stackoverflow.com/users/6295322/ansh007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1510938883, "accepted_answer_id": 47355940, "answer_count": 1, "score": -2, "last_activity_date": 1511190490, "creation_date": 1510928149, "last_edit_date": 1511190490, "question_id": 47352677, "link": "https://stackoverflow.com/questions/47352677/how-to-match-complex-unknown-patterns-in-perl-when-the-pattern-is-in-a-variable", "closed_reason": "Not suitable for this site", "title": "How to match complex unknown patterns in perl, when the pattern is in a variable?", "body": "<p>There is a config file, that contains patterns, provided by user. Basically the pattern could be anything, a combination of alphabets,numbers, spaces, braces that too not necessarily closed, and special characters.\nPatterns For Example: <code>&lt;Error my (error** fail&amp; 345% ?+[+?&gt;</code></p>\n\n<p>I am very new to perl and struggling to handle this.</p>\n\n<p>my piece of code:</p>\n\n<pre><code>for (&lt;FH&gt;) {\n    for ( my $j = 0 ; $j &lt; $num_pat ; $j = $j + 1 ) {\n        print \"This is the pattern : $pat_array[$j] \\n\";\n        if ( $_ =~ m/'$pat_array[$j]'/ ) {\n            print \"$_ : match found for $pat_array[$j] \\n\";\n            #print \"KPI for the pattern is : $kpi_array[$match] : array style \\n\";\n            $match_count[$j] = ( $match_count[$j] + 1 );\n        }\n    }\n}\n</code></pre>\n\n<p>Pattern array has multiple patterns.\nI am trying to find matches using : if <strong>($_ =~ m/'$pat_array[$j]'/)</strong>\nIt works for simple patterns, but not for the ones in example.</p>\n\n<p>Please help me to proceed further.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "edited": false, "score": 0, "creation_date": 1510916062, "post_id": 47348844, "comment_id": 81649762, "body": "Thank you very much. This is simple and effective."}, {"owner": {"reputation": 78, "user_id": 4688132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xrxTt.png?s=128&g=1", "display_name": "ettore26", "link": "https://stackoverflow.com/users/4688132/ettore26"}, "edited": false, "score": 0, "creation_date": 1551201050, "post_id": 47348844, "comment_id": 96550502, "body": "But also using Here Strings: <code>perl -pe &#39;s&#47;key&#47;replace&#47;g&#39; &lt;&lt;&lt; &#39;string&#39;</code>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 7, "last_activity_date": 1510915600, "creation_date": 1510915600, "answer_id": 47348844, "question_id": 47348704, "link": "https://stackoverflow.com/questions/47348704/perl-command-line-substitute-of-strings/47348844#47348844", "title": "perl command line substitute of strings", "body": "<p>You can use <code>echo</code> (or your operating system's equivalent) to send your string into your command-line Perl program.</p>\n\n<pre><code>$ echo hello | perl -pe 's/hello/goodbye/'\ngoodbye\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510916304, "post_id": 47348961, "comment_id": 81649937, "body": "But keeping the <code>-p</code> and slightly abusing the <code>while</code> loop makes the code so much simpler :-)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1510917232, "post_id": 47348961, "comment_id": 81650500, "body": "@DaveCross true, but I thought it&#39;d be useful to explain what the <code>-p</code> does and why the OP code would never work as is."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 4, "last_activity_date": 1510915945, "creation_date": 1510915945, "answer_id": 47348961, "question_id": 47348704, "link": "https://stackoverflow.com/questions/47348704/perl-command-line-substitute-of-strings/47348961#47348961", "title": "perl command line substitute of strings", "body": "<p>You probably want to remove the <code>-p</code> option as that is wrapping your code up inside a <code>while(&lt;&gt;)</code> loop. For perl <code>&lt;&gt;</code> means read in files specified on the command line or STDIN if there aren't any. So your \"string\" (which I'm guessing was \"ppp\" when you tried it) is being treated like a filename.</p>\n\n<p>Instead if you want to pass in non-filenames you probably want something like:</p>\n\n<pre><code>perl -e 'print join(\" \",map{ s/key/replace/g; $_ } @ARGV),\"\\n\"' string\n</code></pre>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3772, "favorite_count": 1, "accepted_answer_id": 47348844, "answer_count": 2, "score": 2, "last_activity_date": 1510915945, "creation_date": 1510915166, "question_id": 47348704, "link": "https://stackoverflow.com/questions/47348704/perl-command-line-substitute-of-strings", "title": "perl command line substitute of strings", "body": "<p>perl has convenient command line syntax for substitution of files</p>\n\n<pre><code>perl -pe 's/key/replace/g' file\n</code></pre>\n\n<p>I am wondering what is the one liner syntax for substitution of string?</p>\n\n<pre><code>perl -pe 's/key/replace/g' string\n</code></pre>\n\n<p>doesn't work. It will complain</p>\n\n<blockquote>\n  <p>Can't open ppp: No such file or directory.</p>\n</blockquote>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510913040, "post_id": 47344038, "comment_id": 81647671, "body": "What&#39;s the <code>1 while</code> for? And why are you trying to make a single magic regex here, when it&#39;s much simpler to unroll the problem"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1510914805, "post_id": 47344038, "comment_id": 81648956, "body": "How is (for example) &quot;0we23-1&quot; ending up quoted when your pattern has <code>(0\\d*)</code> picking up the strings?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8936555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8ce7ef6b6a388dcb5f7434d825d63e?s=128&d=identicon&r=PG&f=1", "display_name": "Anil Kumar", "link": "https://stackoverflow.com/users/8936555/anil-kumar"}, "edited": false, "score": 0, "creation_date": 1511154638, "post_id": 47348188, "comment_id": 81723732, "body": "your solution works absolutely fine in my scenario. Just one thing how can we pass the variable or data  from any text file instead of scalar value &lt;DATA&gt;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 9, "user_id": 8936555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8ce7ef6b6a388dcb5f7434d825d63e?s=128&d=identicon&r=PG&f=1", "display_name": "Anil Kumar", "link": "https://stackoverflow.com/users/8936555/anil-kumar"}, "edited": false, "score": 0, "creation_date": 1511169328, "post_id": 47348188, "comment_id": 81729911, "body": "Use <code>&lt;&gt;</code> instead, and it&#39;ll read STDIN or file on command line - the same way as <code>grep</code>/<code>sed</code>/<code>awk</code> function."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1510913617, "creation_date": 1510913617, "answer_id": 47348188, "question_id": 47344038, "link": "https://stackoverflow.com/questions/47344038/perl-command-not-giving-expected-output/47348188#47348188", "title": "Perl command not giving expected output", "body": "<p>This appears to do what you want:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings; \n\nwhile ( &lt;DATA&gt; ) {\n   my @fields = split;\n   s/^(0[^\\.\\/]+)$/\"$1\"/ for @fields;\n   print join \" \", @fields, \"\\n\";\n}\n\n__DATA__\n1234 012345 0\n0.000 01234 0\n01/02/03 5467 0abc\n01234 0123\n0000 000054\n0asdf 0we23-1\n</code></pre>\n\n<p>Note - it doesn't strictly preserve whitespace like you asked though - it just removes it and reinserts a single space. That seems to meet your spec, but you could instead:</p>\n\n<pre><code>my @fields = split /(\\s+)/; \n</code></pre>\n\n<p>as this would capture the spaces too. </p>\n\n<pre><code>join \"\", @fields;\n</code></pre>\n\n<p>This is reducible to a one liner using <code>-a</code> for autosplitting:</p>\n\n<pre><code>perl -lane 's/^(0[^\\.\\/]+)$/\"$1\"/ for @F; print join \" \", @F'\n</code></pre>\n\n<p>If you wanted to do the second bit (preserving whitespace strictly) then you'd need to drop the <code>-a</code> and use <code>split</code> yourself. </p>\n"}], "owner": {"reputation": 9, "user_id": 8936555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8ce7ef6b6a388dcb5f7434d825d63e?s=128&d=identicon&r=PG&f=1", "display_name": "Anil Kumar", "link": "https://stackoverflow.com/users/8936555/anil-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510913617, "creation_date": 1510897571, "last_edit_date": 1510901505, "question_id": 47344038, "link": "https://stackoverflow.com/questions/47344038/perl-command-not-giving-expected-output", "title": "Perl command not giving expected output", "body": "<p><strong>Command:</strong> </p>\n\n<pre><code>perl -lpe '1 while (s/(^|\\s)(0\\d*)(\\s|$)/$1\"$2\"$3/)' test5\n</code></pre>\n\n<p><strong>Input:</strong></p>\n\n<blockquote>\n  <p>1234      012345               0</p>\n  \n  <p>0.000             01234     0</p>\n  \n  <p>01/02/03          5467        0abc</p>\n  \n  <p>01234           0123   </p>\n  \n  <p>0000           000054</p>\n  \n  <p>0asdf           0we23-1</p>\n</blockquote>\n\n<p><strong>Current Output:</strong></p>\n\n<pre><code>perl -lpe '1 while (s/(^|\\s)(0\\d*)(\\s|$)/$1\"$2\"$3/)' test5\n</code></pre>\n\n<blockquote>\n  <p>1234      \"012345\"            \"0\"</p>\n  \n  <p>0.000             \"01234\"     \"0\"</p>\n  \n  <p>01/02/03          5467       \"0abc\"  </p>\n  \n  <p>\"01234\"           \"0123\"</p>\n  \n  <p>\"0000\"           \"000054\"</p>\n  \n  <p>0asdf           0we23-1</p>\n</blockquote>\n\n<p><strong>Excepted Output:</strong></p>\n\n<blockquote>\n  <p>1234      \"012345\"              0</p>\n  \n  <p>0.000             \"01234\"       0</p>\n  \n  <p>01/02/03          5467        \"0abc\"</p>\n  \n  <p>\"01234\"           \"0123\"</p>\n  \n  <p>\"0000\"           \"000054\"</p>\n  \n  <p>\"0asdf\"           \"0we23-1\"</p>\n</blockquote>\n\n<p><strong>Conditions to follow in output:</strong></p>\n\n<ol>\n<li><p>All strings starting with 0 having alphanumeric character except / and . should be double quoted.</p></li>\n<li><p>if string starting with 0 have only 0 character should not be quoted.</p></li>\n<li><p>Spacing between strings should be preserved.</p></li>\n</ol>\n"}, {"tags": ["sql", "perl", "sql-like"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1510901839, "post_id": 47344022, "comment_id": 81641612, "body": "Your prepared statement is stored in <code>$query</code>. <code>$sth</code> was never defined, so the error message is telling you exactly what is wrong."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1510990538, "post_id": 47344022, "comment_id": 81680260, "body": "<i>The error im getting now is <code>DBI::st=HASH(0x2a9a480)</code></i> - That&#39;s not an error. That&#39;s the output from your <code>print $sth</code> statement."}], "answers": [{"tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 3, "last_activity_date": 1510902168, "creation_date": 1510902168, "answer_id": 47345030, "question_id": 47344022, "link": "https://stackoverflow.com/questions/47344022/perl-user-input-into-sql-like-statement/47345030#47345030", "title": "Perl user input into SQL Like statement", "body": "<p>In your code:</p>\n\n<pre><code>my $query = $dbh-&gt;prepare(\"SELECT TOP 20 Id\n      ,Created\n      ,Updated\n      ,Message\n      FROM sdada.ada.asd\n      where Message  like ?                             \n      and Created &gt;= DATEADD(day, -10, GETDATE())\n      order by Created desc\");\nmy $sth-&gt;bind_param(1, \"%$input%\");\n</code></pre>\n\n<p>Notice the prepared statement is stored in a variable named <code>$query</code>, but you attempt to bind using <code>$sth</code> which was never set and is undefined.  That is what the error message was telling you.</p>\n\n<p>Use the same variable name both places (and later when you execute the statement) to fix the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1510922980, "post_id": 47347141, "comment_id": 81654073, "body": "give a man a beer, ad he will learn to drink, teach him how to brew and he will never work again."}, {"owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1510927171, "post_id": 47347141, "comment_id": 81656670, "body": "Jim, Dave,thanks very much.My code looks like this: my $sth = $dbh-&gt;prepare(&quot;SELECT TOP 20 Id ,Created,Updated,Message FROM FrameworkDEV3.Log.Entry \t where Message  like ?                              \t and Created &gt;= DATEADD(day, -10, GETDATE()) \t\torder by Created desc&quot;);   $sth-&gt;bind_param(1, &quot;%$input%&quot;);     #or die &quot;Couldn&#39;t prepare statement: &quot; . $dbh-&gt;errstr; print $sth; $sth-&gt;execute; while( my @data = $sth-&gt;fetchrow_array()) {     foreach(@data) {     print &quot;[$_]&quot;;     }     print &quot;\\n\\n&quot;; } $sth-&gt;finish;  And. error Im getting is :  DBI::st=HASH(0x29da480)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1510928823, "post_id": 47347141, "comment_id": 81657859, "body": "@dbanerje: Please don&#39;t dump code in a comment like that. No-one is going to read it. Far better to <a href=\"https://stackoverflow.com/posts/47344022/edit\">edit your question</a> to add the new information (or even to add a completely new question)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1510990360, "post_id": 47347141, "comment_id": 81680209, "body": "@dbanerje: You&#39;ve edited the code to replace the original version. That&#39;s not a very good idea, is it? Now my answer makes no sense. Please put back the original code and then add the new version at the bottom."}, {"owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1511008473, "post_id": 47347141, "comment_id": 81684764, "body": "Sorry again Dave"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "edited": false, "score": 0, "creation_date": 1511011709, "post_id": 47347141, "comment_id": 81685657, "body": "@dbanerje: See my comment on your question. You&#39;re not getting an error now. Your code includes <code>print $sth</code> and that&#39;s what generating the &quot;DBI::st=HASH(0x2a9a480)&quot; that you&#39;re seeing. It&#39;s not an error, just expected output from the program. Your error now seems to be that you&#39;re getting no output from your fetch loop - which would imply that there is no matching data in your database. Given that we&#39;ve answered your original question, I think it makes sense to accept one of the answers and ask this as a new question."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1510910558, "creation_date": 1510910558, "answer_id": 47347141, "question_id": 47344022, "link": "https://stackoverflow.com/questions/47344022/perl-user-input-into-sql-like-statement/47347141#47347141", "title": "Perl user input into SQL Like statement", "body": "<p>You've already been given a fish. Perhaps we can show you how to catch your own in the future.</p>\n\n<p>This is your error:</p>\n\n<blockquote>\n  <p>Can't call method \"bind_param\" on an undefined</p>\n</blockquote>\n\n<p>You call <code>bind_param()</code> on this line:</p>\n\n<pre><code>my $sth-&gt;bind_param(1, \"%$input%\");\n</code></pre>\n\n<p>So you're defining a variable (called <code>$sth</code>) and immediately expecting that variable to be an object that you can call a method on. When you define a variable with <code>my</code> the variable is initialised to <code>undef</code> unless you assign something to it like this:</p>\n\n<pre><code>my $var = 'something';\n</code></pre>\n\n<p>Your code is the equivalent of this.</p>\n\n<pre><code>my $sth = undef;\n$sth-&gt;my $sth-&gt;bind_param(1, \"%$input%\");\n</code></pre>\n\n<p>Do you see the problem now?</p>\n\n<p>In DBI code you'll often see the the variable <code>$sth</code> used to store the statement handle that we use to execute a statement. I suspect you've copied this from some example DBI code and taken the variable name from there. If <code>$sth</code> was a statement handle then you could certainly call the <code>bind_param()</code> method on it.</p>\n\n<p>So <code>$sth</code> needs to be a statement handle. And we create one of those by calling the <code>prepare()</code> method on a database handle.</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare($some_sql);\n</code></pre>\n\n<p>Oh, but wait.... you already have a line that looks a lot like that:</p>\n\n<pre><code>my $query = $dbh-&gt;prepare(\"SELECT ...\");\n</code></pre>\n\n<p>So it looks to me like you started writing your own code, using <code>$query</code> as the variable to hold the statement handle. You then copied the <code>bind_param()</code> line from some sample code. That didn't compile, because it used <code>$sth</code>, which you hadn't declared, so you just stuck a <code>my</code> in front of it to get around that problem? Does that sound at all accurate?</p>\n\n<p>What you really wanted was to call <code>bind_param()</code> on the statement handle that you had already created.</p>\n\n<pre><code>$query-&gt;bind_param(1, \"%$input%\");\n</code></pre>\n\n<p>But, to be honest, I think it's a good idea to stick with the \"standard\" names for DBi-related variables. It's what your maintenance programmer (which might well be you in six months time!) will expect to see.</p>\n\n<p>So I'd change the <code>prepare()</code> line to:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"SELECT ...\");\n</code></pre>\n\n<p>And leave the <code>bind_param()</code> call as it is. You'll need to change the <code>fetchrow_array()</code> to be called on <code>$sth</code> as well.</p>\n"}], "owner": {"reputation": 49, "user_id": 8955670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be51bea20a6bf87fe36fef3999819e45?s=128&d=identicon&r=PG&f=1", "display_name": "dbnoob", "link": "https://stackoverflow.com/users/8955670/dbnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521222265, "creation_date": 1510897487, "last_edit_date": 1521222265, "question_id": 47344022, "link": "https://stackoverflow.com/questions/47344022/perl-user-input-into-sql-like-statement", "title": "Perl user input into SQL Like statement", "body": "<p>Im trying to get user input and send it through to the SQL Like statement. But Im getting error: Can't call method \"bind_param\" on an undefined.\nMy Original code :</p>\n\n<pre><code>#!/usr/bin/perl\nuse DBI;\n#use DBD::Oracle;\nuse strict;\nuse warnings;\nuse CGI;\n\n\nprint \"Enter INCD number : \";\n\nmy $input = &lt;&gt;;\nchomp $input;    \n\nmy $DSN = 'driver={SQL Server};Server=ddsfs1; database=sdfds;TrustedConnection=Yes'; \nmy $dbh = DBI-&gt;connect(\"dbi:ODBC:$DSN\") \n    #print \"connected..\"\n    or die \"$DBI::errstr\\n\";\n\nmy $query = $dbh-&gt;prepare(\"SELECT TOP 20 Id\n      ,Created\n      ,Updated\n      ,Message\n      FROM FrameworkDEV3.Log.Entry\n     where Message  like ?                             \n     and Created &gt;= DATEADD(day, -10, GETDATE())\n        order by Created desc\");\n$sth-&gt;bind_param(1, '%$input%');\n\nprint $sth;\n$sth-&gt;execute;\n#DBI::dump_results($sth);\n\nwhile( my @data = $query-&gt;fetchrow_array())\n{\n    foreach(@data) {\n    print \"[$_]\";\n    }\n    print \"\\n\\n\";\n}\n\n$sth-&gt;finish;\n$dbh-&gt;disconnect;\n#print \"Connected..\";\nprint \"\\n\";\n</code></pre>\n\n<p>Following code is fixed as per comments from Dave and Jim :</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"SELECT TOP 20 Id\n      ,Created\n      ,Updated\n      ,Message\n      FROM FrDEVsd.Log.Entry\n     where Message  like ?                             \n     and Created &gt;= DATEADD(day, -10, GETDATE())\n        order by Created desc\");\n  $sth-&gt;bind_param(1, \"%$input%\");\nprint $sth;\n$sth-&gt;execute;\n#DBI::dump_results($sth);\nwhile( my @data = $sth-&gt;fetchrow_array())\n{\n    foreach(@data) {\n    print \"[$_]\";\n    }\n    print \"\\n\\n\";\n}\n\n$sth-&gt;finish;\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>print \"\\n\";</p>\n\n<p>The error im getting now is </p>\n\n<blockquote>\n  <p>DBI::st=HASH(0x2a9a480)</p>\n</blockquote>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 1, "creation_date": 1510931362, "post_id": 47343580, "comment_id": 81659629, "body": "You would get some hints from the module if you enable warnings! Also, ensure you are using the latest module version"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 504, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510895870, "creation_date": 1510894795, "question_id": 47343580, "link": "https://stackoverflow.com/questions/47343580/retrieve-output-of-a-command-using-netssh2", "title": "Retrieve output of a command using Net::SSH2", "body": "<p>I am trying to connect and execute commands on a network device using Perl module Net::SSH2 from Windows host using Strawberry Perl.The script is able to connect and authenticate, also executes the command, but while reading the channel it is getting stuck at <strong>while()</strong> line(The prompt keeps on blinking), it neither comes out of the channel, nor prints the channel data.</p>\n\n<p>I have to kill the process using Ctrl+C each time. When I kill the process I get the below error on the prompt.</p>\n\n<p>Can'UNKNOWN to string in concatenation (.) or string at C:/Strawberry/perl/vendor/lib/Net/SSH2/Channel.pm line 132</p>\n\n<p><strong>Also the same code works for the other hosts, whereas it fails for a few hosts. I am unable to identify whats the issue.</strong></p>\n\n<pre><code>use Net::SSH2;\nuse strict;\n\nmy $ssh = Net::SSH2-&gt;new();\n\n$ssh-&gt;connect('xx.xx.xx.xx');\n\n$ssh-&gt;auth(username =&gt; 'xxxxxx', password =&gt; 'xxxxx');\n\nmy  $channel = $ssh-&gt;channel() or do { print\" [LOG ERROR]: Failed to create channel. Exiting ...\\n\"};\n\n$channel-&gt;blocking(0);\n\n$channel-&gt;shell() ;\n\nsleep(5);\n\nmy $cmd='df -h';\n\nprint $channel \"$cmd\\n\";        \n\nsleep(5);      \n\nwhile(&lt;$channel&gt;)\n  {\n     print $_;\n  }\n\n\n$channel-&gt;close(); \n\n$ssh-&gt;disconnect();\n</code></pre>\n"}, {"tags": ["perl", "warnings", "stack-trace"], "answers": [{"tags": [], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "is_accepted": false, "score": 4, "last_activity_date": 1510880768, "creation_date": 1510880768, "answer_id": 47341717, "question_id": 47341579, "link": "https://stackoverflow.com/questions/47341579/how-to-get-stack-trace-for-all-warnings/47341717#47341717", "title": "How to get stack trace for all warnings?", "body": "<p><code>perl -d:Confess script.pl</code></p>\n\n<p>from <a href=\"http://search.cpan.org/~haarg/Devel-Confess-0.006001/lib/Devel/Confess.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~haarg/Devel-Confess-0.006001/lib/Devel/Confess.pm</a></p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "closed_date": 1510944813, "answer_count": 1, "score": -2, "last_activity_date": 1510880768, "creation_date": 1510879770, "question_id": 47341579, "link": "https://stackoverflow.com/questions/47341579/how-to-get-stack-trace-for-all-warnings", "closed_reason": "Not suitable for this site", "title": "How to get stack trace for all warnings?", "body": "<p>Is it possible to get a stack trace printed for all warnings?</p>\n\n<p>I can get it for all errors with: <code>perl -MCarp::Always my_script.pl</code></p>\n\n<p>But how can I get it for warnings?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1510883575, "post_id": 47341500, "comment_id": 81636358, "body": "Regarding your regular expression, you should have no need for the enclosing <code>(?^:...)</code> which is primarily for writing a pattern that will be embedded within another. It resets all options to the defaults for the contents of the parentheses. You are also using dots\u2014which will match any character\u2014to match literal dots in the target string. Please don&#39;t copy code from the internet without understanding what it does."}], "answers": [{"tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": false, "score": 0, "last_activity_date": 1510879802, "creation_date": 1510879802, "answer_id": 47341582, "question_id": 47341500, "link": "https://stackoverflow.com/questions/47341500/sorting-array-according-to-string-dates-in-a-complex-filename/47341582#47341582", "title": "Sorting array according to string dates in a complex filename", "body": "<p>Try</p>\n\n<pre><code>sort { substr($b, 3) cmp substr($a, 3) } @files;\n</code></pre>\n\n<p>This assumes <code>@files</code> contains strings. If it contains something else, you need to explain that.  It retains the document version at the end of the sort key, so this will break ties.</p>\n"}, {"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 3, "last_activity_date": 1510879888, "creation_date": 1510879888, "answer_id": 47341591, "question_id": 47341500, "link": "https://stackoverflow.com/questions/47341500/sorting-array-according-to-string-dates-in-a-complex-filename/47341591#47341591", "title": "Sorting array according to string dates in a complex filename", "body": "<p>You want to sort by the substrings matching the date part:</p>\n\n<pre><code>sub rev_by_date {\n  substr($b, 3, 8) &lt;=&gt; substr($a, 3, 8);\n}\n\nmy @sorted_files = sort rev_by_date @files;\n</code></pre>\n\n<p>...as long as the filenames match the format that you've described.</p>\n"}], "owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 47341591, "answer_count": 2, "score": 0, "last_activity_date": 1510890220, "creation_date": 1510879286, "last_edit_date": 1510879898, "question_id": 47341500, "link": "https://stackoverflow.com/questions/47341500/sorting-array-according-to-string-dates-in-a-complex-filename", "title": "Sorting array according to string dates in a complex filename", "body": "<p>I have a set of strings:</p>\n\n<blockquote>\n  <p>20120160323001.z1.xml<br>\n     20120160324001.z1.xml<br>\n     20120160322001.z1.xml  </p>\n  \n  <p># The file format is XXXYYYYMMDDVVV.z1.xml where XXX is a<br>\n     # medical code, YYYYMMDD is a date and VVV is a document<br>\n     # version number      </p>\n</blockquote>\n\n<p>I want to sort the strings according to the date in descending order. So, the above strings after sorting will be:</p>\n\n<blockquote>\n  <p>20120160324001.z1.xml<br>\n     20120160323001.z1.xml<br>\n     20120160322001.z1.xml   </p>\n</blockquote>\n\n<p>I know how to sort arrays in Perl but given the complex file name I'm confused how I can sort these strings by date? Is it possible?</p>\n\n<pre><code># The below sort function is not going to work for these filenames\nsub rev_by_date  { \n    $b-&gt;[9+1] &lt;=&gt; $a-&gt;[9+1] \n}\n\nmy @sorted_files = sort rev_by_date @files;\n</code></pre>\n\n<p><strong>Edit</strong> I use this regular expression to find these files: <code>(?^:^201.*.z1.xml)</code> but its not that useful for the date sorting function. In the date sorting function I dont know if comparing date strings will even work?</p>\n"}, {"tags": ["perl", "ssl", "openssl", "lwp"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1510879163, "post_id": 47340354, "comment_id": 81635217, "body": "As a completely separate approach, have a service that does all the talking to the device"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1510895769, "creation_date": 1510895769, "answer_id": 47343721, "question_id": 47340354, "link": "https://stackoverflow.com/questions/47340354/how-can-i-share-openssl-sessions-between-perl-processes/47343721#47343721", "title": "How can I share OpenSSL sessions between Perl processes?", "body": "<p>I don't think there is a way to use IO::Socket::SSL/Net::SSLeay or Crypt::SSLeay (which are the newer and older SSL backend for LWP) between processes. </p>\n\n<p>The session cache you are trying to use in your code references SESSION objects which are internal to the OpenSSL library. Serializing the cache at the Perl level will not serialize the parts from inside the OpenSSL library but will just include the pointers to the internal structures. Since these pointers are only valid for the current state of the process, deserializing this again inside a different process or process state will thus result in dangling pointers pointing into nowhere in the best case or to some other data in the worst case and will thus result in segmentation faults or corruption of internal data.</p>\n\n<p>In Net::SSLeay there are i2d_SSL_SESSION and d2i_SSL_SESSION functions which could in theory be used to properly serialize a SESSION object. But I doubt that there are usable in the current implementation.</p>\n"}], "owner": {"reputation": 6965, "user_id": 77782, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/037ab6c705d1668ce5e1c49a8bb6e3aa?s=128&d=identicon&r=PG", "display_name": "wes", "link": "https://stackoverflow.com/users/77782/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 47343721, "answer_count": 1, "score": 3, "last_activity_date": 1510895769, "creation_date": 1510872142, "question_id": 47340354, "link": "https://stackoverflow.com/questions/47340354/how-can-i-share-openssl-sessions-between-perl-processes", "title": "How can I share OpenSSL sessions between Perl processes?", "body": "<p>I'm using Perl to connect to some (very) low-powered hardware devices with TLS. The first handshake can take around 10-15 seconds to complete! Reusing the session (from the same Perl process) is much faster but when the next job comes around to connect to the same device the new process has to establish a new session with the same delay. I'd like to <strong>share a session cache between my processes</strong> but I'm running into problems (and segfaults!).</p>\n\n<p>I have a test script (connecting to <code>openssl s_server -www</code>) with a <code>IO::Socket::SSL::Session_Cache</code> wrapper that uses Sereal to write the cache object out to disk. Despite finding the existing sessions in the cache, <strong>it does not reuse them</strong> and sometimes segfaults when trying to add additional entries to the cache.</p>\n\n<pre><code>use 5.20.1; use warnings;\n\nuse LWP::UserAgent;\nuse IO::Socket::SSL;\n# $IO::Socket::SSL::DEBUG = 2;\n\nrequest_with_new_ua();\nrequest_with_new_ua();\nrequest_with_new_ua();\n\nsub request_with_new_ua {\n   say \"make request\";\n   my $ua = LWP::UserAgent-&gt;new;\n   $ua-&gt;ssl_opts(\n      verify_hostname =&gt; 0,\n      SSL_session_cache =&gt; Inline::SessionStore-&gt;new,\n   );\n   process_response($ua-&gt;get('https://localhost:4433'));\n}\n\nsub process_response {\n   my $res = shift;\n   say \"&gt; $_\" for grep /Session|Master/, split /\\n/, $res-&gt;as_string;\n}\n\nBEGIN {\n   package Inline::SessionStore;\n\n   use 5.20.1; use warnings;\n   use Moo;\n   use experimental qw(signatures);\n   use Sereal::Encoder;\n   use Sereal::Decoder;\n   use Try::Tiny;\n   use Path::Tiny;\n\n   has session_cache =&gt; ( is =&gt; 'rw' );\n\n   my $encoder = Sereal::Encoder-&gt;new;\n   my $decoder = Sereal::Decoder-&gt;new;\n   my $file = path('/tmp/ssl-session-cache');\n\n   sub get_session ($self, $key) {\n      say \"get session $key\";\n      my $cache;\n      try {\n         $cache = $decoder-&gt;decode($file-&gt;slurp_raw);\n         say \"got cache from file, \".ref $cache;\n      } catch {\n         say $_ unless /No such file/;\n         $cache = IO::Socket::SSL::Session_Cache-&gt;new(128);\n         say \"made new cache\";\n      };\n      $self-&gt;session_cache($cache);\n\n      my $ret = $cache-&gt;get_session($key);\n      say \"found session $ret\" if $ret;\n      return $ret;\n   }\n\n   sub add_session {\n      my $self = shift;\n      say\"add session \" . join ' - ', @_;\n      my $session = $self-&gt;session_cache-&gt;add_session(@_);\n\n      $file-&gt;spew_raw($encoder-&gt;encode($self-&gt;session_cache));\n      return $session;\n   }\n\n   sub del_session {\n      my $self = shift;\n      say \"del session \" . join ' - ', @_;\n      $self-&gt;session_cache-&gt;del_session(@_);\n\n      $file-&gt;spew_raw($encoder-&gt;encode($self-&gt;session_cache));\n   }\n\n   1;\n}\n</code></pre>\n\n<p>And output:</p>\n\n<pre>\n rm -f /tmp/ssl-session-cache && perl wes.swp/workbench.pl\nmake request\nget session localhost:4433\nmade new cache\nadd session localhost:4433 - 23864624\n> SSL-Session:\n>     Session-ID: \n>     Session-ID-ctx: 01000000\n>     Master-Key: DDF335492BFE2A7BA7674A656E72005865859D89249D597302F338D01C5776E2C94B61E6BCBED6114DFDA5AAEECD22EA\nmake request\nget session localhost:4433\ngot cache from file, IO::Socket::SSL::Session_Cache\nfound session 23864624\nadd session localhost:4433 - 23864624  # trying to re-add the session??\n> SSL-Session:\n>     Session-ID: \n>     Session-ID-ctx: 01000000\n>     Master-Key: 4FE17B7FE9B4DE0A711C659FC333F686AD41840740B9D10E67A972D5A27D1720F0470329DA63DE65C1B023A1E2F0CC89\nmake request\nget session localhost:4433\ngot cache from file, IO::Socket::SSL::Session_Cache\nfound session 23864624\nadd session localhost:4433 - 23864624\n> SSL-Session:\n>     Session-ID: \n>     Session-ID-ctx: 01000000\n>     Master-Key: C76C52E5ECC13B0BB4FA887B381779B6F686A73DDFBEA06B33336537EC6AE39290370C07505BCD8B552CA874CD6E4089\n</pre>\n\n<p>I feel like I'm close to getting this to work but I'm missing something.</p>\n"}, {"tags": ["perl", "encoding"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510939125, "post_id": 47339485, "comment_id": 81664543, "body": "As phrased, this question is primarily opinion-based. Please provide the criteria which define what solution would be best for you rather than asking us for our preferred ways of doing something."}], "answers": [{"comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1510939335, "post_id": 47341602, "comment_id": 81664679, "body": "I say in the question that I&#39;m looking to reencode a file (something on disk). <code>Encode::from_to</code> requires the whole file to be in memory (not accepting file handles). It looks like I can use PerlIO to avoid that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1510940115, "post_id": 47341602, "comment_id": 81665094, "body": "<i>&quot;<code>Encode::from_to</code> requires the whole file to be in memory&quot;</i> Where did you get that idea? It isn&#39;t true at all, and the documentation certainly doesn&#39;t say so. You can convert a character at a time if you wish. There would be a problem if you were converting from a multi-byte encoding and you attempt to translate a chunk that ends part-way through a character, but if your record separator is set to a single-byte character (normally LF) then that can&#39;t happen with either IS0-8859-1 or UTF-8. I don&#39;t know what you mean by <i>&quot;not accepting file handles&quot;</i>."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1510940302, "post_id": 47341602, "comment_id": 81665196, "body": "Ahh I see it does take octets so it can work the same way. Nifty. I stand corrected. My own misconception. (the downvote wasn&#39;t me, upvote was). I guess it&#39;s just a matter of style then."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1510943406, "post_id": 47341602, "comment_id": 81666755, "body": "@EvanCarroll: It accepts <i>only</i> octets, but even if it used characters there would be no requirement to process the whole file. It&#39;s just that characters have no encoding\u2014they are decoded octets\u2014so it is impossible to decode them again."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1510944597, "post_id": 47341602, "comment_id": 81667270, "body": "Well, the PerlIO method opens the file in character mode for the desired input locale, right? Where as encode <code>from_to</code> requires the file opened in bytes mode and expects the encoding of the octet stream in the call?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 1, "creation_date": 1510945253, "post_id": 47341602, "comment_id": 81667592, "body": "This is about encodings, not locales. But I don&#39;t see what point you&#39;re making. <code>from_to</code> requires an encoded octet stream, which may come from a file opened with <code>:raw</code> but that isn&#39;t necessary. It decodes the octets into characters according to one scheme and then reencodes them to another sequence of octets according to another scheme. You would need to open an output file, again with <code>:raw</code>, to write those bytes to disk. I think we agree with one-another but you seem to think there are differences."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1510943448, "last_edit_date": 1510943448, "creation_date": 1510879971, "answer_id": 47341602, "question_id": 47339485, "link": "https://stackoverflow.com/questions/47339485/reencoding-a-file-with-encodefrom-to-or-perlioencoding/47341602#47341602", "title": "Reencoding a file with &quot;Encode::from_to&quot; or &quot;PerlIO::encoding&quot;", "body": "<p>You don't show what you intend to do with <a href=\"https://metacpan.org/pod/Encode\" rel=\"nofollow noreferrer\"><code>Encode</code></a>, but the generally-accepted best practice is to work with Perl's internal coding (basically UTF-8, but you don't need to know) and apply the conversions to input and output file handles accordingly</p>\n\n<p>I don't understand where you got the idea that using a PerlIO layer would affect slurping a file. Maybe you're getting confused with line endings, but even so there should be little difference</p>\n\n<p>If you think you must read the entire file into memory then you should think again. It is almost always best to keep state variables across single lines, or perhaps to modify Perl's input record separator <code>$/</code> to read multi-line records</p>\n\n<p>Nothing will affect the decoding or encoding of file data unless you are misusing it</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 47341602, "answer_count": 1, "score": -1, "last_activity_date": 1510943448, "creation_date": 1510868136, "last_edit_date": 1510940062, "question_id": 47339485, "link": "https://stackoverflow.com/questions/47339485/reencoding-a-file-with-encodefrom-to-or-perlioencoding", "title": "Reencoding a file with &quot;Encode::from_to&quot; or &quot;PerlIO::encoding&quot;", "body": "<p>Between <code>Encode::from_to</code> and <code>PerlIO::encoding</code>, what's the preferred way to reencode a file within a perl script?</p>\n\n<p>This uses <a href=\"http://perldoc.perl.org/PerlIO/encoding.html\" rel=\"nofollow noreferrer\"><code>PerlIO::encoding</code></a></p>\n\n<pre><code>use warnings FATAL =&gt; 'utf8';\nopen(my $f1, \"&lt;:encoding(iso-8859-1)\", \"infile\");\nopen(my $f2, \"&gt;:encoding(utf-8)\", \"outfile\");\nprint $f2 $_ while &lt;$f1&gt;;\n</code></pre>\n\n<p>Or, should I use <a href=\"https://perldoc.perl.org/Encode.html\" rel=\"nofollow noreferrer\"><code>Encode::from_to</code></a> or is there a better way?</p>\n\n<p>It seems that the first option, with <code>PerlIO::encoding</code>, would support not-slurping the file into memory. </p>\n\n<p>Are there any downsides to using that method?</p>\n"}, {"tags": ["excel", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "edited": false, "score": 0, "creation_date": 1510899999, "post_id": 47339457, "comment_id": 81640827, "body": "Thanks, that was it. It seems logical when you say it but I feel like I would have had more succes brute forcing random strings of $, @ and {}"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": true, "score": 1, "last_activity_date": 1510868031, "creation_date": 1510868031, "answer_id": 47339457, "question_id": 47338142, "link": "https://stackoverflow.com/questions/47338142/writing-to-excel/47339457#47339457", "title": "Writing to Excel", "body": "<p>$mat is an array reference. You need to dereference it:</p>\n\n<pre><code>$$mat[1][1] = \"x\";\n</code></pre>\n"}], "owner": {"reputation": 1080, "user_id": 3681671, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001141388575/picture?type=large", "display_name": "turoni", "link": "https://stackoverflow.com/users/3681671/turoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 47339457, "answer_count": 1, "score": 0, "last_activity_date": 1510868031, "creation_date": 1510862457, "question_id": 47338142, "link": "https://stackoverflow.com/questions/47338142/writing-to-excel", "title": "Writing to Excel", "body": "<p>I'm testing out how to fill in info to my excel sheet and wrote a simple test program</p>\n\n<pre><code>use Win32::OLE qw(in);\nuse Win32::OLE::Const \"Microsoft Excel\";\n\n$Win32::OLE::Warn = 3;\n\nmy $excel = Win32::OLE-&gt;new(\"Excel.Application\", \"Quit\");\nmy $book = $excel-&gt;Workbooks-&gt;Add();\nmy $sheet = $book-&gt;Worksheets(1);\nmy $range = $sheet-&gt;Range($sheet-&gt;Cells(1,1), $sheet-&gt;Cells(5,5));\n\nmy $mat = $range-&gt;{Value};\n$mat[1][1] = \"x\";\n#for my $row (@$mat){\n#   print \"$i\\n\";\n#   for my $cel (@{$row}){\n#       $cel = \"x\";\n#   }\n#}\n\n$range-&gt;{Value} = $mat;\n\n\nmy $fso = Win32::OLE-&gt;new(\"Scripting.FileSystemObject\");\nmy $map = $fso-&gt;GetAbsolutePathName(\".\");\nmy $padnaam = $map . \"\\\\test.xlsx\";\n$book-&gt;SaveAs($padnaam);\n</code></pre>\n\n<p>When I use the commented out code, there is a nice square of \"x\"s but when I just try to assign an x by index nothing appears.\nI'm guessing I'm not referencing the array correctly but after looking trough the perlreftut and all questions I could find about 2D arrays I can't really figure out the correct sequence that should be used instead.</p>\n\n<p>So, how can I add values to the range by index?</p>\n"}, {"tags": ["perl", "time"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1510870432, "post_id": 47333485, "comment_id": 81632312, "body": "Unix or Windows?"}, {"owner": {"reputation": 429, "user_id": 5730240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/G0Ybl.gif?s=128&g=1", "display_name": "Firefly", "link": "https://stackoverflow.com/users/5730240/firefly"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1510893252, "post_id": 47333485, "comment_id": 81638704, "body": "The system is Unix"}, {"owner": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "edited": false, "score": 0, "creation_date": 1510894818, "post_id": 47333485, "comment_id": 81639091, "body": "There&#39;s no way in a single threaded program that get_entities() will not be done by the time you get to the next statement."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1510853575, "post_id": 47333610, "comment_id": 81623264, "body": "If you are looking for &#39;more sophisticated&#39; - <code>alarm</code> and a signal handler could be the answer."}, {"owner": {"reputation": 429, "user_id": 5730240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/G0Ybl.gif?s=128&g=1", "display_name": "Firefly", "link": "https://stackoverflow.com/users/5730240/firefly"}, "edited": false, "score": 0, "creation_date": 1510862740, "post_id": 47333610, "comment_id": 81628426, "body": "@Dave Cross It is more more sophisticated, I edited my question, to give you an idea I&#39;m working on a webhook"}, {"owner": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "edited": false, "score": 1, "creation_date": 1510894842, "post_id": 47333610, "comment_id": 81639097, "body": "Also, Time::HiRes may be useful if more granular timing is needed."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 5, "last_activity_date": 1510846588, "creation_date": 1510846588, "answer_id": 47333610, "question_id": 47333485, "link": "https://stackoverflow.com/questions/47333485/measure-the-execution-time-of-a-function-call-in-perl/47333610#47333610", "title": "Measure the execution time of a function call in Perl", "body": "<p>Have you tried this?</p>\n\n<pre><code>my $start = time;\nget_entities();\nmy $duration = time - $start;\n</code></pre>\n\n<p>Or were you looking for something more sophisticated?</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1510918852, "creation_date": 1510918852, "answer_id": 47349851, "question_id": 47333485, "link": "https://stackoverflow.com/questions/47333485/measure-the-execution-time-of-a-function-call-in-perl/47349851#47349851", "title": "Measure the execution time of a function call in Perl", "body": "<p>Your edit made the question considerably more complicated.</p>\n\n<p>As I'm sure you'll know - as a standard, perl runs sequentially - if a command takes 25s, then the rest of the code just waits until it's ready.</p>\n\n<p>But sometimes, you want to build in a timeout yourself for various reasons. There's a number of ways you can do this:</p>\n\n<p><strong><code>alarm</code> and a signal handler</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings; \n\n$SIG{'ALRM'} = \\&amp;handle_alarm; \n\nmy $we_are_snoozing = 1;\n\nsub handle_alarm {\n\n   print \"Caught SIGALRM\\n\";\n   $we_are_snoozing = 0;\n}\n\nsub have_a_snooze {\n   while ( $we_are_snoozing ) {\n       print \"Zzzz\\n\";\n       sleep 10;\n   }\n}\n\n\nalarm 25;\nhave_a_snooze;\nprint \"Done\\n\";\n</code></pre>\n\n<p>You're limited in what you can do inside your handler - keep it minimal. But <code>alarm</code> generates a <code>SIGALRM</code> (which can also be generated by <code>kill</code>) and the process can trap and handle it. </p>\n\n<p><strong><code>threads</code></strong></p>\n\n<p>Threads allow you to spin off part of your code to run in parallel or asynchronously. This is handy for both resource usage, but also when you're faced with a thing that's not worth waiting indefinitely for. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings; \n\nuse threads; \nuse threads::shared;\n\nmy $we_are_snoozing : shared;\n$we_are_snoozing = 1; \n\nsub have_a_snooze {\n   while ( $we_are_snoozing ) {\n       print \"Zzzz\\n\";\n       sleep 10;\n   }\n}\n\n\nmy $thr = threads -&gt; create (\\&amp;have_a_snooze);\n\nsleep 5;\n\nif ($thr -&gt; is_joinable) { \n   print \"Thread exited normally\\n\";\n   $thr -&gt; join;\n }\n else {\n    print \"Thread still running, detaching it\\n\"; \n    $we_are_snoozing = 0;\n    $thr -&gt; detach;\n}\n</code></pre>\n\n<p><strong><code>IO::Socket</code> and <code>can_read</code></strong></p>\n\n<p>One of the more common reasons for wanting a timeout, is simply waiting for IO. </p>\n\n<p>This is quite easy to handle with <code>IO::Socket</code> and a timeout:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $pid = open ( my $input, '-|', \"some_command\" );\nmy $select = IO::Select -&gt; new ( $input ); \nwhile ( $select -&gt; can_read(10) ) { \n  my $line = &lt;$input&gt;;\n  print $line; \n}\n</code></pre>\n\n<p>This will timeout 10s after the <em>last</em> result, not the first. But that may be useful too. </p>\n"}], "owner": {"reputation": 429, "user_id": 5730240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/G0Ybl.gif?s=128&g=1", "display_name": "Firefly", "link": "https://stackoverflow.com/users/5730240/firefly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1162, "favorite_count": 0, "accepted_answer_id": 47349851, "answer_count": 2, "score": 0, "last_activity_date": 1510918852, "creation_date": 1510846207, "last_edit_date": 1510893727, "question_id": 47333485, "link": "https://stackoverflow.com/questions/47333485/measure-the-execution-time-of-a-function-call-in-perl", "title": "Measure the execution time of a function call in Perl", "body": "<p>Is it possible to execute staff only if the previous function is not over yet and the time is over\nSomething like:</p>\n\n<pre><code>my $timeout = 10; # seconds\nsub get_entities {\n    # do staff ...\n}\nget_entities();\n\nif (time == $timeout and get_entities is not over yet) {\n    # do staff...\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "ref"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1510842494, "post_id": 47332111, "comment_id": 81615203, "body": "Did you make a call like <code>bless $obj,$val</code> somewhere where you meant to say <code>bless $obj,ref($val)</code> ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510842990, "post_id": 47332111, "comment_id": 81615567, "body": "Perl 5.10.0 <a href=\"http://perldoc.perl.org/perlhist.html\" rel=\"nofollow noreferrer\">has been around for almost ten years</a> and there has been one minor release 5.10.1 in 2009. It&#39;s quite unlikely that something like this is a bug in Perl itself. It&#39;s way more likely you made a convoluted mistake. ;)"}], "answers": [{"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1510843597, "post_id": 47332216, "comment_id": 81616040, "body": "I found the problem: Actually some subroutine was returning an array reference, and the <code>ref()</code> function was not applied to that return value before being checked for individual cases. <i>mea culpa!</i>, sorry!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1510842525, "creation_date": 1510842525, "answer_id": 47332216, "question_id": 47332111, "link": "https://stackoverflow.com/questions/47332111/when-does-perl-refsomething-return-array0x913310/47332216#47332216", "title": "When does Perl ref($something) return &quot;ARRAY(0x913310)&quot;?", "body": "<p>When <code>$something</code> is an object of class <code>ARRAY(0x913310)</code>.</p>\n\n<pre><code>$ perl -E'\n   my $class = \"\".[];\n   say $class;\n   my $o = bless({}, $class);\n   say ref($o);\n'\nARRAY(0x115e360)\nARRAY(0x115e360)\n</code></pre>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 47332216, "answer_count": 1, "score": -1, "last_activity_date": 1510842525, "creation_date": 1510842207, "question_id": 47332111, "link": "https://stackoverflow.com/questions/47332111/when-does-perl-refsomething-return-array0x913310", "title": "When does Perl ref($something) return &quot;ARRAY(0x913310)&quot;?", "body": "<p>I have some complex Perl code that tests the value of <code>$val = ref($something)</code>. Unfortunately my code fails, because there is a situation where <code>$val</code> is <code>\"ARRAY(0x913310)\"</code> and not <code>\"ARRAY\"</code> (according to the Perl debugger).</p>\n\n<p>Reading the documentation of <code>ref()</code>, such a value is not listed as one of the possible return values. Also, when trying to reproduce interactively in the debugger, I only see valid return values.</p>\n\n<p>Could this be a bug in the Perl base?\nI'm using Perl 5.10.0 from SLES 11 SP 4 on x86_64...</p>\n"}, {"tags": ["performance", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1510838347, "post_id": 47330541, "comment_id": 81612052, "body": "How often do you do this that the difference actually matters?"}, {"owner": {"reputation": 383, "user_id": 636635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qFPpL.jpg?s=128&g=1", "display_name": "xsigndll", "link": "https://stackoverflow.com/users/636635/xsigndll"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510838453, "post_id": 47330541, "comment_id": 81612131, "body": "Around 100k :-) It&#39;s a difference of 30-40ms (which is quite a lot for my current scenarios)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510838615, "post_id": 47330541, "comment_id": 81612249, "body": "Import the values into the current namespace perhaps? What&#39;s the issue with just referring to <code>$Test::ABC</code>?"}, {"owner": {"reputation": 383, "user_id": 636635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qFPpL.jpg?s=128&g=1", "display_name": "xsigndll", "link": "https://stackoverflow.com/users/636635/xsigndll"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510838830, "post_id": 47330541, "comment_id": 81612410, "body": "Using $Test::ABC would require to rewrite several hundred files. So I&#39;d like to try the &quot;easy way&quot; first."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1510838949, "post_id": 47330541, "comment_id": 81612503, "body": "Well, one of my thoughts would be copy into the local namespace using typeglobs, something like <code>our $newABC; *newABC = \\*Test::ABC;</code> but that&#39;ll have the same problem. Otherwise <code>use constant;</code> might do the trick, as that more or less does the same thing."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510839773, "post_id": 47330541, "comment_id": 81613091, "body": "I find it curious that you are talking about such a deep down level of language features, and yet you used wrong comment syntax in your code example. ;)"}, {"owner": {"reputation": 383, "user_id": 636635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qFPpL.jpg?s=128&g=1", "display_name": "xsigndll", "link": "https://stackoverflow.com/users/636635/xsigndll"}, "edited": false, "score": 1, "creation_date": 1510840195, "post_id": 47330541, "comment_id": 81613441, "body": "olol indeed :D <i>fixed</i>"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 636635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qFPpL.jpg?s=128&g=1", "display_name": "xsigndll", "link": "https://stackoverflow.com/users/636635/xsigndll"}, "edited": false, "score": 0, "creation_date": 1510846434, "post_id": 47332973, "comment_id": 81618193, "body": "Thanks for the very good answer. My 5.12.3-multi doesn&#39;t allow writing that variable either... I tried several hours with different things now without any luck. Search&amp;Replace the method call in all packages is the best answer here (at least for now)"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 5, "last_activity_date": 1510844707, "creation_date": 1510844707, "answer_id": 47332973, "question_id": 47330541, "link": "https://stackoverflow.com/questions/47330541/perl-alias-sub-to-variable/47332973#47332973", "title": "Perl, Alias sub to variable", "body": "<p>There is no way to turn a variable into an accessor sub, or to replace a sub with a variable access. You will have to live with the overhead.</p>\n\n<p>Non-solutions:</p>\n\n<ul>\n<li><p>Using a <code>()</code> prototype does not turn calls into your sub to constant accesses because that prototype merely makes a sub <em>potentially eligible</em> for inlining. Since the body of the sub is not itself constant, this sub cannot be a constant.</p></li>\n<li><p>The overhead is per-call as perl has to do considerable bookkeeping for each call. Therefore, rewriting that accessor in XS won't help much.</p></li>\n<li><p>Creating a <code>constant</code> won't help because the constant will be a copy, not an  alias of your variable.</p></li>\n</ul>\n\n<p>But looking at the <a href=\"https://metacpan.org/source/RJBS/constant-1.33/lib/constant.pm\" rel=\"noreferrer\"><code>constant.pm</code> source code</a> seems to open up an interesting solution. Note that <strong>this a hack</strong>, and may not work in all versions of Perl: When we assign a scalar ref to a symbol table entry directly where that entry does not yet contain a typeglob, then an inlineable sub springs into place:</p>\n\n<pre><code>package Foo;\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $x = 7;\nBEGIN { $Foo::{GetX} = \\$x }  # don't try this at home\nsay GetX; #=&gt; 7\n$x = 3;\nsay GetX; #=&gt; 3\n</code></pre>\n\n<p>This currently works on most of my installed perl versions (5.14, 5.22, 5.24, 5.26). However, my 5.22-multi and 5.26-multi die with \u201cModification of a read-only value attempted\u201d. This is not a problem for the constant module since it makes the reference target readonly first and (more importantly) never modifies that variable.</p>\n\n<p><strong>So not only doesn't this work reliably, this will also completely mess up constant folding.</strong></p>\n\n<hr>\n\n<p>If the function call overhead is indeed unbearable (e.g. takes a double-digit percentage of your processing time), then <strong>doing the inlining yourself in the source code is going to be your best bet</strong>. Even if you have a lot of call locations, you can probably create a simple script that fixes the easy cases for you: select all files that import your module and only have a single <code>package</code> declaration. Within such files, replace calls to <code>GetABC</code> (with or without parens) to fully qualified variable accesses. Hopefully that token is not mentioned within any strings. Afterwards, you can manually inspect the few remaining occurrences of these calls.</p>\n"}], "owner": {"reputation": 383, "user_id": 636635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qFPpL.jpg?s=128&g=1", "display_name": "xsigndll", "link": "https://stackoverflow.com/users/636635/xsigndll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510844707, "creation_date": 1510837809, "last_edit_date": 1510840204, "question_id": 47330541, "link": "https://stackoverflow.com/questions/47330541/perl-alias-sub-to-variable", "title": "Perl, Alias sub to variable", "body": "<p>I'm currently doing micro-optimization of a perl program and like to optimize some getters.</p>\n\n<p>I have a package with this getter-structure:</p>\n\n<pre><code>package Test;\n\nour $ABC;\n\nsub GetABC { $ABC } # exported sub...\n</code></pre>\n\n<p>Calling GetABC() creates a lot of sub-related overhead. Accessing the variable directly via $Test::ABC is insanely faster.</p>\n\n<p>Is there a way to alias the getter to the variable to gain the same performanceboost as if I would call the variable directly? Inlining hint with \"()\" doesn seem to work...</p>\n"}, {"tags": ["regex", "perl", "pcre"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1510837103, "post_id": 47330247, "comment_id": 81611207, "body": "no, it&#39;s impossible since <code>.*</code> will also matches your password."}], "answers": [{"comments": [{"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 3, "creation_date": 1510837691, "post_id": 47330389, "comment_id": 81611618, "body": "The input to Regexp::Assemble are regular expressions, not the strings that match.  You would have to do something like <code>$ra-&gt;add(quotemeta($matched))</code>."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 0, "creation_date": 1510837886, "post_id": 47330389, "comment_id": 81611753, "body": "@GuidoFlohr Of course. Strings are regular expressions too."}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 1, "creation_date": 1510839005, "post_id": 47330389, "comment_id": 81612544, "body": "Regexp::Assemble expects strings with regular expression <i>semantics</i>.  If somebody uses &quot;x++x&quot; as the password, you have a regular expression that cannot match anything, and the system is broken.  And that is avoided by piping the strings through <code>quotemeta()</code> first."}, {"owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "edited": false, "score": 2, "creation_date": 1510842404, "post_id": 47330389, "comment_id": 81615153, "body": "In fact, the OP probably wants to do something like <code>$ra-&gt;add(&#39;^&#39; . quotemeta($matched) . &#39;$&#39;)</code> assuming that he wants to match the entire string."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 1, "last_activity_date": 1510837396, "creation_date": 1510837396, "answer_id": 47330389, "question_id": 47330247, "link": "https://stackoverflow.com/questions/47330247/predicting-proper-regular-expression-from-seeing-target-string/47330389#47330389", "title": "predicting proper regular expression from seeing target string", "body": "<p><a href=\"https://metacpan.org/pod/Regexp::Assemble\" rel=\"nofollow noreferrer\"><code>Regexp::Assemble</code></a> will create regular expressions from strings. The more strings you give it, the more precise the regex it generates.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1510853659, "post_id": 47330816, "comment_id": 81623321, "body": "<code>&#47;&#47;</code> in Perl will <i>not</i> match everything, because if a pattern is empty then the most recent successful pattern is used instead."}], "tags": [], "owner": {"reputation": 1448, "user_id": 5464233, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208326386304302/picture?type=large", "display_name": "Guido Flohr", "link": "https://stackoverflow.com/users/5464233/guido-flohr"}, "is_accepted": false, "score": 0, "last_activity_date": 1510842819, "last_edit_date": 1510842819, "creation_date": 1510838583, "answer_id": 47330816, "question_id": 47330247, "link": "https://stackoverflow.com/questions/47330247/predicting-proper-regular-expression-from-seeing-target-string/47330816#47330816", "title": "predicting proper regular expression from seeing target string", "body": "<p>The problem is that there is an infinite number of regular expressions that have matched your string.  Even simpler than <code>/.*/</code> is <code>//</code> which also matches everything.</p>\n\n<p>Still, you can find a practical solution for your problem if you describe more precisely what your regular expression should look like.  For the type of regexes that you used in your example, the following will do the job:</p>\n\n<pre><code>my @strings = ('myp4ssw0rd', 'my-us3r_n4m3');\n\nmy %characters;\nmy ($min, $max) = map { length } $strings[0], $strings[0];\n\nforeach my $string (@strings) {\n    my $l = length $string;\n    if ($l &lt; $min) {\n        $min = $l;\n    } elsif ($l &gt; $max) {\n        $max = $l;\n    }\n    map { $characters{$_} = 1 } split //, $string;\n}\n\nmy $range = join '', map { quotemeta $_ } keys %characters;\nprint \"[$range]{$min,$max}\\n\";\n</code></pre>\n\n<p>But that is very generic.  It pretty much answers three questions:</p>\n\n<ul>\n<li>which characters were used in the passwords?</li>\n<li>what was the minimum length?</li>\n<li>what was the maximum length?</li>\n</ul>\n\n<p>Not really rocket science but you can maybe use it as a starting point to a solution of the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "is_accepted": false, "score": 0, "last_activity_date": 1510895590, "creation_date": 1510895590, "answer_id": 47343701, "question_id": 47330247, "link": "https://stackoverflow.com/questions/47330247/predicting-proper-regular-expression-from-seeing-target-string/47343701#47343701", "title": "predicting proper regular expression from seeing target string", "body": "<p>The problem is defining what is \"proper\". If you simply mean well-formed, then as mentioned by someone else <code>.*</code> will match anything, end of story. Furthermore, there's an infinite number of other possible regular expressions that will match your string. The two constrains that you may want to place on your problem to get meaningful solution is:</p>\n\n<ol>\n<li>The regular expression should match the given examples and nothing else</li>\n<li>The regular expression should be simple (\"parsimonious\") in some way.</li>\n</ol>\n\n<p>If you loosen the first requirement so that you accept approximate answers, the problem becomes a classic sequence classification problem. Then, one possible way to handle is to train a hidden markov model with a limited vocabulary (in terms of what is available in the language of regular expressions) and convert it to a regular expression. </p>\n"}], "owner": {"reputation": 525, "user_id": 7474000, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/471a8c4f91d729f716782c6d1e472d0b?s=128&d=identicon&r=PG&f=1", "display_name": "semenbari", "link": "https://stackoverflow.com/users/7474000/semenbari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1510895590, "creation_date": 1510837008, "last_edit_date": 1510837053, "question_id": 47330247, "link": "https://stackoverflow.com/questions/47330247/predicting-proper-regular-expression-from-seeing-target-string", "title": "predicting proper regular expression from seeing target string", "body": "<p>I want to know it is possible to predict proper regular expression by seeing several strings. For example, regex <code>^[a-z0-9_-]{3,16}$</code> will match <code>my-us3r_n4m3</code> and <code>^[a-z0-9_-]{6,18}$</code> match <code>myp4ssw0rd</code>. But after seeing <code>my-us3r_n4m3</code>, is it possible output <code>^[a-z0-9_-]{3,16}$</code> or <code>^[a-z0-9_-]{6,18}$</code>from seeing <code>myp4ssw0rd</code>.</p>\n\n<p>I guess this would be stupid question, and I don't want to predict exact regular expression.</p>\n\n<p>Anyone who has idea for this, pls let me know.\nThanks.</p>\n"}, {"tags": ["shell", "perl", "ksh", "cleartool"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 4, "creation_date": 1510836586, "post_id": 47329964, "comment_id": 81610858, "body": "The shown Perl code with <code>system(\u2026)</code>  shouldn&#39;t even compile since the <code>&quot;</code> before the <code>$attribute</code> variable should terminate the previous string. Are you sure that&#39;s the code you are using?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1510836603, "post_id": 47329964, "comment_id": 81610872, "body": "How are you not getting a runtime error?  Are you sure it&#39;s not <code>system(&quot;clear ... BUTE &#39;&quot; . $attribute ...</code>  You can&#39;t concatenate strings with no operator like that."}, {"owner": {"reputation": 67, "user_id": 8912747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7e3321e594be74fc6b2c12e727252dee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/8912747/martin"}, "edited": false, "score": 0, "creation_date": 1510846961, "post_id": 47329964, "comment_id": 81618592, "body": "It&#39;s not clear from my question I WANT TO pass  &#39;&quot;XYZ&quot;&#39; not &quot;XYZ&quot;."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510848344, "post_id": 47329964, "comment_id": 81619640, "body": "I have to wonder if you <i>do</i> have to send that exact string. It looks like you are trying to build up a command line, and confusing literal quotes with syntactic quotes. <code>system(&quot;cleartool&quot;, &quot;mkattr&quot;, &quot;-replace&quot;, &quot;ATTRIBUTE&quot;, $attribute, &quot;lbtype$label&quot;)</code> is probably what you want."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8912747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7e3321e594be74fc6b2c12e727252dee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/8912747/martin"}, "edited": false, "score": 0, "creation_date": 1510846492, "post_id": 47330305, "comment_id": 81618228, "body": "I learned a lot from your answer, thanks a lot. But the result is always the same. I lose the character: &#39;     , it is replaced by: &quot;    , I tested many other possibilities... escape the quote, the double quote, both... qq keeps everything even back slash but not the single quote."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 67, "user_id": 8912747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7e3321e594be74fc6b2c12e727252dee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/8912747/martin"}, "edited": false, "score": 0, "creation_date": 1510854169, "post_id": 47330305, "comment_id": 81623550, "body": "@Martin: That isn&#39;t true. <code>qq&#47;&#47;</code> doesn&#39;t retain backslashes and won&#39;t remove single quotes. Try printing the values before you pass them to <code>system</code>."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1510837491, "last_edit_date": 1510837491, "creation_date": 1510837131, "answer_id": 47330305, "question_id": 47329964, "link": "https://stackoverflow.com/questions/47329964/a-perl-system-call-must-send-exactly-both-characters-single-double-quote/47330305#47330305", "title": "A Perl system call must send exactly both characters single &amp; double quote &#39; &quot;", "body": "<p>See <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">\"Quote and Quote like Operators\"</a> and use <code>qq{...}</code>:</p>\n\n<pre><code>system(qq{cleartool mkattr -replace ATTRIBUTE '\"$attribute\"' lbtype:$label});\n</code></pre>\n\n<p><code>qq{...}</code> is exactly like <code>\"...\"</code> except you can then use double quotes <code>\"</code> in your string <em>without escaping</em> them.</p>\n\n<p>You can use any character directly after the <code>qq</code> and must then use the same character to denote the end-of-string, i.e. <code>qqX...X</code> would work the same way. You would run into problems if your string contains Xes, so don't do that.</p>\n\n<p>You can also use <em>paired</em> characters as delimiter (<code>{}</code>, <code>()</code>, <code>&lt;&gt;</code>) which is what you usually will see.</p>\n"}, {"comments": [{"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1510837531, "post_id": 47330424, "comment_id": 81611510, "body": "<code>qq{&quot;$attribute&quot;}</code> can be replaced with <code>$attribute</code>."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 4, "creation_date": 1510837591, "post_id": 47330424, "comment_id": 81611550, "body": "@shawnhcorey that would be something different. It depends if the OP really wants to pass the quotes to the program or not"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1510838466, "post_id": 47330424, "comment_id": 81612141, "body": "@shawnhcorey It is pretty clear. The heading says <i>system call must send exactly both characters &#39;&quot;</i> Later in the actual body, he also states <i>except both uses of the quote character:</i>"}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1510839428, "post_id": 47330424, "comment_id": 81612838, "body": "@GerhardBarnard the OP says <code>&#39;&quot;XYZ&quot;&#39;</code> should be passed to the <i>shell</i>. but it&#39;s not clear (at least to me) what <code>cleartool</code> should end up with."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1510841393, "post_id": 47330424, "comment_id": 81614379, "body": "@tinita Agreed. When a string of quotes appear in a shell command, I suspect an XY problem."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1510842294, "post_id": 47330424, "comment_id": 81615060, "body": "Both uses of the quote character means exactly that, both single and double quotes, just as mentioned in the heading and twice in the actual answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1510854032, "post_id": 47330424, "comment_id": 81623495, "body": "@shawncorey: The question may be unclear, but <code>qq{&quot;$attribute&quot;}</code> is certainly not equivalent to <code>$attribute</code>. Your comment is incorrect."}], "tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 7, "last_activity_date": 1510839740, "last_edit_date": 1510839740, "creation_date": 1510837484, "answer_id": 47330424, "question_id": 47329964, "link": "https://stackoverflow.com/questions/47329964/a-perl-system-call-must-send-exactly-both-characters-single-double-quote/47330424#47330424", "title": "A Perl system call must send exactly both characters single &amp; double quote &#39; &quot;", "body": "<p>If you want to execute a system command and don't have to use any shell syntax like redirects, it's usually better and safer to use the list form of <code>system</code>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>system(\n    'cleartool',  'mkattr', '-replace', 'ATTRIBUTE',\n    qq{\"$attribute\"}, qq{lbtype:$label}\n);\n# or, if you really want to pass both types of quotes:\nsystem(\n    'cleartool',  'mkattr', '-replace', 'ATTRIBUTE',\n    qq{'\"$attribute\"'}, qq{lbtype:$label}\n);\n</code></pre>\n\n<p>See <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"noreferrer\">perldoc -f system</a></p>\n\n<p>It's not clear from your question if you want to pass <code>'\"XYZ\"'</code> or <code>\"XYZ\"</code>.</p>\n"}], "owner": {"reputation": 67, "user_id": 8912747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7e3321e594be74fc6b2c12e727252dee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/8912747/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 1, "accepted_answer_id": 47330424, "answer_count": 2, "score": 1, "last_activity_date": 1510839740, "creation_date": 1510836206, "last_edit_date": 1510839649, "question_id": 47329964, "link": "https://stackoverflow.com/questions/47329964/a-perl-system-call-must-send-exactly-both-characters-single-double-quote", "title": "A Perl system call must send exactly both characters single &amp; double quote &#39; &quot;", "body": "<p>A Perl system call must send the following string to the <code>UnixShell</code>:</p>\n\n<pre><code>'\"XYZ\"'\n</code></pre>\n\n<p>In my Perl script I have used the following command:</p>\n\n<pre><code>system(\"cleartool mkattr -replace ATTRIBUTE '\"$attribute\"' lbtype:$label\");\n</code></pre>\n\n<p>Everything is well passed to the <code>Shell Unix</code>, except both uses of the quote character:</p>\n\n<pre><code>'\n</code></pre>\n\n<p>Indeed,</p>\n\n<pre><code>cleartool mkattr -replace ATTRIBUTE\n</code></pre>\n\n<p>The above command is passed as it is exactly what I want.\nThe Perl variables $attribute and $label are well interpreted.\nBut I don't know what to do to obtain exactly:</p>\n\n<pre><code>'\"XYZ\"'\n</code></pre>\n\n<p>Here <code>XYZ</code> is the value of the Perl variable $attribute\nOS is <code>AIX (Unix)</code> and <code>Shell</code> is <code>ksh</code>. cleartool is the command line interface of Clearcase but <strong>no Clearcase skill is necessary</strong> to fix my problem.</p>\n"}, {"tags": ["python", "linux", "bash", "shell", "perl"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1510825466, "post_id": 47326257, "comment_id": 81603205, "body": "A strong magnetic field? :D"}, {"owner": {"reputation": 20893, "user_id": 118587, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8d5f94f9183aadaf92fb191f77e3f827?s=128&d=identicon&r=PG", "display_name": "Grzegorz Oledzki", "link": "https://stackoverflow.com/users/118587/grzegorz-oledzki"}, "edited": false, "score": 2, "creation_date": 1510825490, "post_id": 47326257, "comment_id": 81603223, "body": "<a href=\"https://stackoverflow.com/questions/257844/quickly-create-a-large-file-on-a-linux-system\" title=\"quickly create a large file on a linux system\">stackoverflow.com/questions/257844/&hellip;</a>"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1510825514, "post_id": 47326257, "comment_id": 81603241, "body": "Like the one with Magneto ? ;)"}, {"owner": {"reputation": 179, "user_id": 8817900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uBuzb.jpg?s=128&g=1", "display_name": "Lucky", "link": "https://stackoverflow.com/users/8817900/lucky"}, "edited": false, "score": 1, "creation_date": 1510825775, "post_id": 47326257, "comment_id": 81603433, "body": "Installing Windows..."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1510826100, "post_id": 47326257, "comment_id": 81603686, "body": "Why do you want this? A much better way to test disk low conditions is to create a very small partition."}], "answers": [{"tags": [], "owner": {"reputation": 422, "user_id": 8577085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nhongh2SRgk/AAAAAAAAAAI/AAAAAAAAAJM/2nMWIXl9YJk/photo.jpg?sz=128", "display_name": "abhishek phukan", "link": "https://stackoverflow.com/users/8577085/abhishek-phukan"}, "is_accepted": false, "score": 5, "last_activity_date": 1510825547, "creation_date": 1510825547, "answer_id": 47326320, "question_id": 47326257, "link": "https://stackoverflow.com/questions/47326257/what-is-the-fastest-way-to-fill-up-disk-space/47326320#47326320", "title": "What is the fastest way to fill up disk space", "body": "<pre><code>  fallocate -l 25G file\n</code></pre>\n\n<p>Try this </p>\n"}, {"tags": [], "owner": {"reputation": 4294, "user_id": 804409, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/52840f12b18e63af6e43815f5c678075?s=128&d=identicon&r=PG", "display_name": "omu_negru", "link": "https://stackoverflow.com/users/804409/omu-negru"}, "is_accepted": false, "score": 1, "last_activity_date": 1510825630, "creation_date": 1510825630, "answer_id": 47326351, "question_id": 47326257, "link": "https://stackoverflow.com/questions/47326257/what-is-the-fastest-way-to-fill-up-disk-space/47326351#47326351", "title": "What is the fastest way to fill up disk space", "body": "<p>Try a <a href=\"https://en.wikipedia.org/wiki/Zip_bomb\" rel=\"nofollow noreferrer\">zip bomb</a> \nYou can probably download it from various places online</p>\n"}], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2103, "favorite_count": 0, "closed_date": 1510826043, "answer_count": 2, "score": 2, "last_activity_date": 1510828538, "creation_date": 1510825347, "last_edit_date": 1510828538, "question_id": 47326257, "link": "https://stackoverflow.com/questions/47326257/what-is-the-fastest-way-to-fill-up-disk-space", "closed_reason": "Duplicate", "title": "What is the fastest way to fill up disk space", "body": "<p>I've got a big disk worth few TBs ( <code>5 TBs</code> ) and i need fill up this disk space to about <code>95%</code>, this is a <code>linux centos</code> box.</p>\n\n<p>I've tried dd as in</p>\n\n<pre><code>dd if=/dev/zero of=o_File1.img bs=209715200 count=1000\n</code></pre>\n\n<p>even tried running in a loop like </p>\n\n<pre><code>#!/bin/bash\n\ncount_=0\nparallel_=10\n\nBS=2097152000\nCOUNT=100\nwhile [ $count_ -lt $parallel_ ]\ndo\n        file=\"Dummy_DD_BS_\"$BS\"_$(date +%Y%M%d%H%m%s)_$count_.img\"\n        echo $file\n        `dd if=/dev/zero of=$file bs=$BS count=$COUNT &gt; /dev/null 2&gt;&amp;1 &amp;`\n        count_=$((count_+1))\ndone\n</code></pre>\n\n<p>but 5 TB seems like a hell lot. </p>\n\n<p>is there a faster method, I'm Okay with any scripts python/perl/bash or anything, I'm looking for a fast optimized solution</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Okay so following the <a href=\"https://stackoverflow.com/questions/257844/quickly-create-a-large-file-on-a-linux-system\">quickly-create-a-large-file-on-a-linux-system\n</a> did not really solve much anything</p>\n\n<blockquote>\n  <p>case 1 : <code>dd</code></p>\n</blockquote>\n\n<pre><code> time dd if=/dev/zero of=filename10 bs=1G count=10\n    10+0 records in\n    10+0 records out\n    10737418240 bytes (11 GB) copied, 34.0468 s, 315 MB/s\n\n    real    0m34.108s\n    user    0m0.000s\n    sys     0m13.498s\n</code></pre>\n\n<p>so an estimated around 3 - 4  hours to fill this 5 TB </p>\n\n<blockquote>\n  <p>Case 2 : <code>fallocate</code></p>\n</blockquote>\n\n<pre><code> fallocate failed: Operation not supported \n   its a custom file system not the popular ext* \n</code></pre>\n\n<blockquote>\n  <p>Case 3 : <code>truncate</code></p>\n</blockquote>\n\n<pre><code>   this is the weirdest ones\n   it doesn't really fill the disk this seems to be just reserving the space for the file so definitely not suiting my requirements\n</code></pre>\n\n<p>so is there a better solution or I have to live with <code>dd</code> or create <code>smaller partition</code> to test this </p>\n"}, {"tags": ["excel", "perl", "excel-2013"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510826430, "post_id": 47324596, "comment_id": 81603928, "body": "Welcome to Stack Overflow and the Perl tag. Can you please <a href=\"https://stackoverflow.com/posts/47324596/edit\">edit</a> your question and include a small program to create a workbook with a chart and some example data in it, so we can help you play around with it? This is called a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and makes helping you easier. Feel free to also take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510827072, "post_id": 47324596, "comment_id": 81604405, "body": "Could you also maybe include a screenshot of how that looks when you do it in Excel, including the dialog? It&#39;s possible that this is simply not implemented yet. I&#39;m sure JMCNAMARA will take patches. He also passes by here once in a while. Maybe he will see your question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510827732, "post_id": 47324596, "comment_id": 81604849, "body": "I don&#39;t seem to be able to do <i>Value From Cells</i> with Excel 2010. Must be a newer feature, or I can&#39;t find it because the German translation is something completely different."}, {"owner": {"reputation": 23, "user_id": 8283724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef9f6db1a25667aa53ad3fb37965578?s=128&d=identicon&r=PG&f=1", "display_name": "Hanfresco", "link": "https://stackoverflow.com/users/8283724/hanfresco"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1510829943, "post_id": 47324596, "comment_id": 81606422, "body": "Hi simbabque, I added an imgur link to the original post with the option in Excel 2013 to select labels. Thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510831458, "post_id": 47324596, "comment_id": 81607397, "body": "Thanks. I will edit your question for you, since you&#39;re new. This is not a forum, so you don&#39;t need to mark things as edits or updates. The question is more like a living thing, and the target group are people that will find this page later when they search for a solution on Google. We are more like a huge FAQ database. Images are best hosted directly on Stack Exchange. In fact, they cooperate with imgur. I will reupload your image for you now."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510831597, "post_id": 47324596, "comment_id": 81607487, "body": "Also, to highlight and ping someone in comments, use the name with an <code>@</code> like <code>@simbabque</code> so they get a notification."}, {"owner": {"reputation": 23, "user_id": 8283724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef9f6db1a25667aa53ad3fb37965578?s=128&d=identicon&r=PG&f=1", "display_name": "Hanfresco", "link": "https://stackoverflow.com/users/8283724/hanfresco"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510952184, "post_id": 47324596, "comment_id": 81670988, "body": "If any high reputation person comes by, may I ask you to create a new tag: excel-writer-xlsx? :)"}], "owner": {"reputation": 23, "user_id": 8283724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef9f6db1a25667aa53ad3fb37965578?s=128&d=identicon&r=PG&f=1", "display_name": "Hanfresco", "link": "https://stackoverflow.com/users/8283724/hanfresco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512540097, "creation_date": 1510819963, "last_edit_date": 1510831526, "question_id": 47324596, "link": "https://stackoverflow.com/questions/47324596/excelwriterxlsx-data-label-value-from-cells-option", "title": "Excel::Writer::XLSX - Data Label &quot;Value From Cells&quot; option", "body": "<p>I'm using Excel 2013 and within \"Format Data Labels\" there is a \"Value From Cells\" option that lets me select any cells to use as labels.</p>\n\n<p>I've looked at options in chart <code>-&gt; add_series -&gt; data_labels</code> and don't seem to see it there. So I'm wondering if there is some way I can use custom labels?</p>\n\n<p><a href=\"https://i.stack.imgur.com/CNWXX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CNWXX.png\" alt=\"Screenshot of Excel 2013\"></a></p>\n\n<p>As you can see in the image, there is a \"Format Data Labels...\" and when selected, you can see \"Value From Cells\" on the right hand side, with \"Select Range...\" as an option.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1510812301, "post_id": 47321285, "comment_id": 81596141, "body": "Nothing...the code does not get executed...there is no alternate universe where $data is pre-defined without the if block getting evaluated first."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1510813008, "creation_date": 1510813008, "answer_id": 47322865, "question_id": 47321285, "link": "https://stackoverflow.com/questions/47321285/does-perl-initialize-variables-in-a-sub-that-returns-nothing-before-the-declarat/47322865#47322865", "title": "Does Perl initialize variables in a sub that returns nothing before the declaration of the variables", "body": "<p>[<em>You ask when the initialization of the variable occurs, but I think you are talking about the assignment of the string <code>Hello, World!</code> to <code>$data</code>. I'm answering that.</em>]</p>\n\n<p>The assignment occurs when the assignment is evaluated, which is never if the sub returns before reaching the assignment.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510843313, "post_id": 47330682, "comment_id": 81615828, "body": "That is incorrect. <code>$data</code> is created when <code>my</code> is compiled, and it was either cleared or re-created the last time its scope (the sub) was exited (depending on its value). This is why <code>{ my $x; sub foo { ... $x ... } }</code> works."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510860727, "post_id": 47330682, "comment_id": 81627402, "body": "No, it&#39;s not. Perl is much more complex than that. Each sub has its own symbol table and a variable does not exist until its <code>my</code> statement is encountered. There was a bug in older perls that caused variables to be retained. This bug has been changed to a feature using the <code>state</code> keyword. Space for non-<code>state</code> variables are kept between sub calls but they are marked as not existing. Closures work because a reference to the sub, which contains a reference to its symbol table, keep its symbol table around. Subs must be able to dynamically create their symbol tables or recursion will not work."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510862486, "post_id": 47330682, "comment_id": 81628296, "body": "Re &quot;<i>There was a bug in older perls that caused variables to be retained.</i>&quot;, No, variables being retained wasn&#39;t a bug. That implementation was intentional, it&#39;s still being used today, and there&#39;s no plans to remove it. <code>state</code> was introduced to replace buggy code (in programs, not <code>perl</code>) that used a variable without first evaluating its <code>my</code>, which has always been undefined behaviour."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510862512, "post_id": 47330682, "comment_id": 81628310, "body": "(You can see the variable persisting between calls to a sub using <code>perl -MDevel::Peek -e&#39;sub f { my $x; Dump($x); $x = &quot;abc&quot;; $x .= &quot;d&quot;; } f() for 1..2;&#39;</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510862517, "post_id": 47330682, "comment_id": 81628312, "body": "Re &quot;<i>Closures work because a reference to the sub, which contains a reference to its symbol table, keep its symbol table around.</i>&quot;, Pretty much spot on. (It&#39;s not a symbol table, but a list of arrays called &quot;PAD&quot;. PADs are indexed by number, and can contain things that don&#39;t map to symbols.) In these PADs are where lexical var exists when the sub isn&#39;t being executed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510864135, "post_id": 47330682, "comment_id": 81629154, "body": "Re &quot;<i>Subs must be able to dynamically create their symbol tables or recursion will not work.</i>&quot;, That&#39;s why there&#39;s a list of PADs. A sub has a PAD for each level of recursion ever attained."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1510878397, "post_id": 47330682, "comment_id": 81635003, "body": "Re: &quot;A sub has a PAD for each level of recursion ever attained.&quot; Sounds like a memory leek to me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1511285424, "post_id": 47330682, "comment_id": 81792440, "body": "No, leaked memory is unreachable memory. This memory is still reachable. Future calls to the sub will use those PADs. Furthermore, deallocatng the sub will also deallocate the PADs. Think of it like a buffer; you might not be using it all currently, but that doesn&#39;t mean there&#39;s no reason for the extra space."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": -2, "last_activity_date": 1510838249, "creation_date": 1510838249, "answer_id": 47330682, "question_id": 47321285, "link": "https://stackoverflow.com/questions/47321285/does-perl-initialize-variables-in-a-sub-that-returns-nothing-before-the-declarat/47330682#47330682", "title": "Does Perl initialize variables in a sub that returns nothing before the declaration of the variables", "body": "<p>When the <code>if</code> condition is true, <code>Thing()</code> returns <code>undef</code>. The variable <code>$data</code> is not even created.</p>\n"}], "owner": {"reputation": 147, "user_id": 8469861, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qMnAc.jpg?s=128&g=1", "display_name": "bailey.bailey", "link": "https://stackoverflow.com/users/8469861/bailey-bailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 47322865, "answer_count": 2, "score": 1, "last_activity_date": 1510838249, "creation_date": 1510804269, "question_id": 47321285, "link": "https://stackoverflow.com/questions/47321285/does-perl-initialize-variables-in-a-sub-that-returns-nothing-before-the-declarat", "title": "Does Perl initialize variables in a sub that returns nothing before the declaration of the variables", "body": "<pre><code>sub Thing {\n  my $self = shift;\n  if ($self-&gt;{validationTest} != 1) {return;}     \n\n  my $data = 'Hello, World!';\n  return $data;    \n}\n</code></pre>\n\n<p>What happens to $data if the IF conditional is true and the sub is returned early?</p>\n"}]