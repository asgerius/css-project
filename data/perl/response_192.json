[{"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 11, "creation_date": 1536783214, "post_id": 52302737, "comment_id": 91553337, "body": "Beware of <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problems</a>. How did you get the data in this format in the first place? Rather than fixing it after the fact, can you fix the source?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 7, "creation_date": 1536783609, "post_id": 52302737, "comment_id": 91553466, "body": "It really would be much better to get the source to generate correct data in the first place. It is bad design to write software that &quot;patches&quot; the output of a preceding layer just to get it working."}, {"owner": {"reputation": 386, "user_id": 3051610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f21449803566e280765e6546a98d821f?s=128&d=identicon&r=PG", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/3051610/tanzeel"}, "edited": false, "score": 1, "creation_date": 1536783902, "post_id": 52302737, "comment_id": 91553606, "body": "Source was removing double quotes, Thats a good point. I should escape double quotes in the source. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 3, "creation_date": 1536785140, "post_id": 52302974, "comment_id": 91554109, "body": "You would also need to quote <code>time</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1536787092, "post_id": 52302974, "comment_id": 91554839, "body": "This will work with the specific data shown in the question but it scales very badly. I suspect you have added stuff to the character class until you got the right result."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1536813310, "post_id": 52302974, "comment_id": 91560613, "body": "@Borodin &quot;Scale&quot; is the wrong word. This has nothing to do with scale. It&#39;s <i>fragile</i>, bit I said it&#39;s not production code. It&#39;s not true that every program in the world needs to be industrial strength to be useful."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1536823883, "post_id": 52302974, "comment_id": 91564426, "body": "<code>perl -pe&#39;s&#47;([\\w\\-]+)&#47;&quot;$1&quot;&#47;g&#39;</code> will handle <code>time</code> as well. <code>perl -pe&#39;s&#47;(?:^|[{,])\\s*\\K([\\w\\-](?:\\s+[\\w\\-]*))(?=\\s+(?:[,}]|$)&#47;&zwnj;&#8203;&quot;$1&quot;&#47;gm&#39;</code> should be more robust and more easily extensible"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536831015, "post_id": 52302974, "comment_id": 91568387, "body": "(There&#39;s a missing paren at the end of my last pattern.)"}], "tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": true, "score": 1, "last_activity_date": 1536823690, "last_edit_date": 1536823690, "creation_date": 1536784049, "answer_id": 52302974, "question_id": 52302737, "link": "https://stackoverflow.com/questions/52302737/regular-expression-add-double-quotes-around-values-and-keys-in-bash/52302974#52302974", "title": "regular expression add double quotes around values and keys in bash", "body": "<p>Ideally you'd want to produce proper JSON from the start, or at least write a proper parse for what you have. But it you just need to do this once, it might be faster to use the following and fix up any problems manually:</p>\n\n<pre><code>$ echo \"{ \ntime:  { \n      from:now-60d,\n      mode:quick,\n      to:now } \n}\" | perl -p -e 's/(\\w+):([^{, ]+)/\"$1\":\"$2\"/'\n{ \ntime:  { \n      \"from\":\"now-60d\",\n      \"mode\":\"quick\",\n      \"to\":\"now\" } \n}\n</code></pre>\n"}], "owner": {"reputation": 386, "user_id": 3051610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f21449803566e280765e6546a98d821f?s=128&d=identicon&r=PG", "display_name": "Tanzeel", "link": "https://stackoverflow.com/users/3051610/tanzeel"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1536789076, "accepted_answer_id": 52302974, "answer_count": 1, "score": -1, "last_activity_date": 1536823690, "creation_date": 1536783038, "question_id": 52302737, "link": "https://stackoverflow.com/questions/52302737/regular-expression-add-double-quotes-around-values-and-keys-in-bash", "closed_reason": "Needs more focus", "title": "regular expression add double quotes around values and keys in bash", "body": "<p>i need a valid JSON format to request ES.\ni have a string like </p>\n\n<pre><code>{ \ntime:  { \n          from:now-60d,\n          mode:quick,\n          to:now } \n}\n</code></pre>\n\n<p>should be something like</p>\n\n<pre><code> { \ntime:  { \n          \"from\":\"now-60d\",\n          \"mode\":\"quick\",\n          \"to\":\"now\" } \n}\n</code></pre>\n\n<p>so my question, there is any solution to add double quotes around keys and values of my string in bash ??</p>\n\n<p>thanks</p>\n"}, {"tags": ["perl", "templates", "text-xslate"], "answers": [{"tags": [], "owner": {"reputation": 20037, "user_id": 340355, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f51f5727d7f23b8b111a8f007d683f31?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/340355/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1546588798, "last_edit_date": 1592644375, "creation_date": 1546588798, "answer_id": 54035072, "question_id": 52296553, "link": "https://stackoverflow.com/questions/52296553/how-to-cascade-included-templates-in-textxslate/54035072#54035072", "title": "How to cascade included templates in Text::Xslate?", "body": "\n<p>Try <a href=\"https://metacpan.org/pod/release/SKAJI/Text-Xslate-v3.5.6/lib/Text/Xslate/Syntax/Kolon.pm#Template-cascading\" rel=\"nofollow noreferrer\"><code>cascade ... with</code></a>:</p>\n<h3>template/some.tx</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>: cascade main with included\n: around some -&gt; {\nsome text 1\n: include included;\nsome text 2\n: }\n</code></pre>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1546588798, "creation_date": 1536759418, "last_edit_date": 1536772602, "question_id": 52296553, "link": "https://stackoverflow.com/questions/52296553/how-to-cascade-included-templates-in-textxslate", "title": "How to cascade included templates in Text::Xslate?", "body": "\n\n<p>In <a href=\"https://metacpan.org/pod/Text::Xslate\" rel=\"nofollow noreferrer\">Text::Xslate</a> is great way to <code>cascade</code> (or wrap, in some other templating engine) specific template into main template. There is also possible to <code>include</code> common chunks into template. </p>\n\n<p>I'd like to <code>include</code> chunks into specific template which <code>cascade</code>s into main template, but in a way that <code>include</code>d template has parts which replace (<code>around</code> keyword) some named-parts in main.</p>\n\n<p>Simplified test case</p>\n\n<h3>main.pl</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nuse FindBin qw($Bin);\nuse Text::Xslate;\n\nmy $tx = Text::Xslate-&gt;new(\n    path =&gt; [ \"$Bin/template\" ],\n);\n\nprint $tx-&gt;render( 'some.tx' );\n</code></pre>\n\n<h3>template/some.tx</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>: cascade main\n\n: around some -&gt; {\n\nsome text 1\n\n: include included;\n\nsome text 2\n: }\n</code></pre>\n\n<h3>template/main.tx</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>MAIN template\n\n: block main -&gt; { \n  main DEFAULT text, should replaced with included.tx one\n: } # \n\n: block some -&gt; { \n: } # \n</code></pre>\n\n<h3>template/included.tx</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>: around main -&gt; { \n  this should come from included but does not\n: }  \n\nincluded successfully into some.tx\n</code></pre>\n\n<h3>Desired output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>MAIN template\n\n  this should come from included but does not\n\n\nsome text 1\n\n\nincluded successfully into some.tx\n\n\nsome text 2\n</code></pre>\n\n<p>So the third line in the output is not right, if I use it in <code>some.tx</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>: around main -&gt; { \n  this should come from included but does not\n: }  \n</code></pre>\n\n<p>it works.</p>\n\n<p>But how to include chunks, which should cascade into main-template?</p>\n"}, {"tags": ["python", "django", "perl", "subprocess", "out-of-memory"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1536733783, "post_id": 52288631, "comment_id": 91525254, "body": "That quoted passage is quite misleading. &quot;A call to os.fork() temporarily doubles the memory of the parent process&quot; means &quot;The child process created by os.fork() will temporarily use as much memory as the parent process&quot;, but even that is misleading because it doesn&#39;t actually use up any memory at all; it&#39;s all shared with the parent process."}, {"owner": {"reputation": 6188, "user_id": 784648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ce12343afb67ff0bf132f30b0ca9c5?s=128&d=identicon&r=PG", "display_name": "A. J. Parr", "link": "https://stackoverflow.com/users/784648/a-j-parr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536734576, "post_id": 52288631, "comment_id": 91525660, "body": "I think &quot;A call to os.fork() temporarily doubles the memory of the parent process (the memory of the parent process must be available to the child process),&quot; describes exactly what you&#39;re saying at &quot;it doesn&#39;t actually use up any memory at all; it&#39;s all shared with the parent process.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1536734628, "post_id": 52288631, "comment_id": 91525680, "body": "No, the size of the memory of the parent process doesn&#39;t change at all, but that passage makes it sound like it does. If the size of the parent is 50 MiB before the fork, you end up with a 50 MiB parent and a 50 MiB child that use 50 MiB total combined. After the exec, the child&#39;s usage could drop (say to 10 MiB), though the total will increase (to 60 MiB in our example)."}, {"owner": {"reputation": 6188, "user_id": 784648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ce12343afb67ff0bf132f30b0ca9c5?s=128&d=identicon&r=PG", "display_name": "A. J. Parr", "link": "https://stackoverflow.com/users/784648/a-j-parr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536734821, "post_id": 52288631, "comment_id": 91525791, "body": "Ah, I think I understand your meaning now.  The child process requires as much memory as the parent process, however the parent process does not allocate extra memory for itself?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1536734836, "post_id": 52288631, "comment_id": 91525805, "body": "fork doesn&#39;t allocate any memory at all."}, {"owner": {"reputation": 6188, "user_id": 784648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ce12343afb67ff0bf132f30b0ca9c5?s=128&d=identicon&r=PG", "display_name": "A. J. Parr", "link": "https://stackoverflow.com/users/784648/a-j-parr"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536735055, "post_id": 52288631, "comment_id": 91525926, "body": "You are being very nit picky and I&#39;m happy to improve my answer, but why do you say no memory is allocated?"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1536735143, "post_id": 52288631, "comment_id": 91525972, "body": "@ARJMP - The memory used by the child is (initially) the <i>exact same memory</i> used by the parent. The linux kernel supports &quot;copy on write&quot; memory, in which multiple processes can reference the same physical memory and it is only copied when one of them writes to that memory. As long as it&#39;s only being read, no additional memory is required."}, {"owner": {"reputation": 6188, "user_id": 784648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ce12343afb67ff0bf132f30b0ca9c5?s=128&d=identicon&r=PG", "display_name": "A. J. Parr", "link": "https://stackoverflow.com/users/784648/a-j-parr"}, "edited": false, "score": 0, "creation_date": 1536735888, "post_id": 52288631, "comment_id": 91526413, "body": "Ah I understand what your saying a bit better, thanks for that.  The system does still need to check there is enough memory when you fork the process though, so I suppose it may not be allocated permanently, but without enough available memory the system will raise an OOM error when trying to fork the process?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1536739302, "post_id": 52288631, "comment_id": 91528312, "body": "It&#39;s not possible for there to not be enough available memory as forking takes no memory."}], "tags": [], "owner": {"reputation": 6188, "user_id": 784648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ce12343afb67ff0bf132f30b0ca9c5?s=128&d=identicon&r=PG", "display_name": "A. J. Parr", "link": "https://stackoverflow.com/users/784648/a-j-parr"}, "is_accepted": false, "score": -1, "last_activity_date": 1536736300, "last_edit_date": 1536736300, "creation_date": 1536733184, "answer_id": 52288631, "question_id": 52288485, "link": "https://stackoverflow.com/questions/52288485/how-can-i-decrease-the-memory-usage-of-my-web-server-which-forks-processes-to-ru/52288631#52288631", "title": "How can I decrease the memory usage of my web server which forks processes to run an executable?", "body": "<p><em>There's been some great comments from people more knowledgable of the specifics of kernels and processes and memory than I!  Check them out.</em> </p>\n\n<p>I don't really have a definitive answer for you but I can hopefully shed some light here:</p>\n\n<p>The cause of the memory usage, and hence the out of memory exception, is explained at this SO anwer:  <a href=\"https://stackoverflow.com/a/42902777/784648\">Python memory allocation error using subprocess.Popen</a>.</p>\n\n<blockquote>\n  <p>this is a very common problem in Unix, and actually has nothing to do with python or bioinformatics. A call to os.fork() temporarily doubles the memory of the parent process (the memory of the parent process must be available to the child process), before throwing it all away to do an exec().  While this memory isn't always actually copied, the system must have enough memory to allow for it to be copied, and thus if you're parent process is using more than half of the system memory and you subprocess out even \"wc -l\", you're going to run into a memory error.</p>\n</blockquote>\n\n<p>You should look at implementing this perl script in Python and using that module/package in your view, avoid using another thread/process in your request-response cycle to handle this.  </p>\n\n<p>Another thing that may or may not be relevant, if this is a long running job or CPU intensive task, you should consider processing this in a background job using something like <a href=\"http://www.celeryproject.org/\" rel=\"nofollow noreferrer\">Celery</a> or <a href=\"http://python-rq.org/\" rel=\"nofollow noreferrer\">Python RQ</a>. This keeps your server responding to requests fast and avoids a backlog of requests, so to avoid a situation where 20 requests are still being worked on because this long running task is doing its job and hence no-one else can access the server.  The choice of using workers would depend on your needs, deadlines, etc.</p>\n"}], "owner": {"reputation": 280, "user_id": 5463582, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/917e7ab5d4f2b9f72b2fa9f76211a702?s=128&d=identicon&r=PG&f=1", "display_name": "Solomon", "link": "https://stackoverflow.com/users/5463582/solomon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536736300, "creation_date": 1536732462, "question_id": 52288485, "link": "https://stackoverflow.com/questions/52288485/how-can-i-decrease-the-memory-usage-of-my-web-server-which-forks-processes-to-ru", "title": "How can I decrease the memory usage of my web server which forks processes to run an executable?", "body": "<p>I have a Django web server running on an AWS EC2 instance with 1GB of RAM. When a certain request is made to the web server, I need to run an executable using <code>subprocess.call('./executable')</code>. The executable runs a Perl script which does some file I/O and then some computations on the data parsed from the files, nothing too crazy.</p>\n\n<p>I began running into memory allocation issues which caused my web server to crash, so I messed around setting hard limits on the virtual memory allocated to each subprocess using <code>ulimit -v some_value</code>. I discovered that each subprocess requires around 100MB to run without erroring out, so it's no surprise that I'm running into memory issues with only 1GB of RAM.</p>\n\n<p>I'm wondering, though, why this memory usage is so high. Is a lot of extra memory being allocated because I'm calling <code>subprocess.call</code> from a process that's running a web server which is memory-intensive? Is running an executable that runs a Perl script necessarily memory intensive because Perl has some overhead or something? Would it use much less memory if the Perl script were re-written in Python and run directly in the Django web server?</p>\n\n<p>Would greatly appreciate any and all help on this one. Thanks!</p>\n"}, {"tags": ["file", "perl", "text"], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 1, "creation_date": 1536699311, "post_id": 52284031, "comment_id": 91516347, "body": "@Minimalist Note that you could still use all CAPS: <code>open my $TEXT...</code>, but all caps for Perl variables is kind of a non-enforced way of defining <a href=\"https://perldoc.perl.org/constant.html\" rel=\"nofollow noreferrer\">constant</a> variables"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 8, "last_activity_date": 1536699001, "creation_date": 1536699001, "answer_id": 52284031, "question_id": 52283899, "link": "https://stackoverflow.com/questions/52283899/perl-definition-for-text-in-an-open-function/52284031#52284031", "title": "Perl Definition for TEXT in an Open Function", "body": "<p><code>TEXT</code> is what's known as a global file handle. It can be used anywhere, and any time within any code whilst your program is running.</p>\n\n<p>Best practices say to use both the three-argument form of <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"noreferrer\">open()</a>, along with a lexical file handle. In the following case, the lexical file handle (<code>$fh</code>) is confined to its own scope, and is closed when that scope finishes:</p>\n\n<pre><code>use warnings;\nuse strict;\n\n{\n    open my $fh, '&lt;', 'test.txt' or die $!;\n    while (&lt;$fh&gt;){\n        chomp;\n        print \"$_\\n\";\n    }\n}\n</code></pre>\n\n<p>If you used a global file handle there (<code>TEXT</code>), then it would be accessible after the block finished, potentially allowing other parts of code far away to clobber stuff.</p>\n\n<p>Using 3-arg <code>open</code> along with lexical file-handles ensures tight confines of your codebase.</p>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 52284031, "answer_count": 1, "score": 1, "last_activity_date": 1536699001, "creation_date": 1536698416, "question_id": 52283899, "link": "https://stackoverflow.com/questions/52283899/perl-definition-for-text-in-an-open-function", "title": "Perl Definition for TEXT in an Open Function", "body": "<p>In Perl, what is the purpose of the capitalize TEXT for the function open? Is it a module or built-in function?  </p>\n\n<p>Here is the code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse v5.10.0;\nuse warnings;\n\n\nmy $filename = \"&lt;file.txt\";\n\nopen(TEXT, $filename) or die \"Can't open file.\\n\";\n</code></pre>\n"}, {"tags": ["perl", "eof"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536691512, "post_id": 52282246, "comment_id": 91512832, "body": "1) So what do you actually get? 2) at a glance there are too many <code>next</code>s 3) Please indent that code. //  You re-read the other file for <i>every line</i> of the <code>15inv.txt</code>! That&#39;s very inefficient, and prohibitively so for large files. Instead, populate a hash with data of interest from <code>15inv.txt</code> -- for each <code>$active_item</code> make it a key with a value <code>1</code>. Then go <i>once</i> through the other file, checking all items you need."}, {"owner": {"reputation": 21, "user_id": 7965228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb8f65d159f08d7815b03937e545ffdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sandwick", "link": "https://stackoverflow.com/users/7965228/sandwick"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536692203, "post_id": 52282246, "comment_id": 91513198, "body": "I am not familiar with hashes, My out put is duplicated, after it matches my if statement ( $inv_item eq $active_item ) it prints out to my file and then again on the last print statement line for EOF.  The first next is looping through the active file trying to match the item numbers, then second next is looping back to top of file because the 15inv file an multiple entries, the third next if when it never finds the item number"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536692675, "post_id": 52282246, "comment_id": 91513438, "body": "Your last line seems to print unconditionally, so it will of course print.  The posted code is broken, with an extra <code>}</code> and seemingly meaningless statement after an unconditional <code>next</code>.  <i>Can you please fix the post</i> so to show what you <i>are</i> running?  You can hit the &quot;edit&quot; (gray, shaded) link right under the post."}, {"owner": {"reputation": 21, "user_id": 7965228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb8f65d159f08d7815b03937e545ffdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sandwick", "link": "https://stackoverflow.com/users/7965228/sandwick"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536692795, "post_id": 52282246, "comment_id": 91513478, "body": "Yes 26817\t1\t108\t108\tIN  26817\t1\t108\t108\t EOF  29301\t3\t185\t555\t EOF  26524\t1\t805\t805\t EOF  26823\t2\t180\t360\t EOF  R061-20\t1\t1585\t1585\t EOF  26850\t1\t208\t208\t EOF  26503\t1\t230\t230\t EOF"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536693093, "post_id": 52282246, "comment_id": 91513623, "body": "This looks almost like perl4 code (except I don&#39;t think perl4 had <code>chomp</code> yet). You should always start with <code>use strict; use warnings;</code> (and <code>perl -w</code> has been mostly obsolete since 2000)."}, {"owner": {"reputation": 21, "user_id": 7965228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb8f65d159f08d7815b03937e545ffdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sandwick", "link": "https://stackoverflow.com/users/7965228/sandwick"}, "edited": false, "score": 0, "creation_date": 1536693265, "post_id": 52282246, "comment_id": 91513688, "body": "it is perl v5.18.2"}, {"owner": {"reputation": 21, "user_id": 7965228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb8f65d159f08d7815b03937e545ffdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sandwick", "link": "https://stackoverflow.com/users/7965228/sandwick"}, "edited": false, "score": 0, "creation_date": 1536693683, "post_id": 52282246, "comment_id": 91513861, "body": "I have updated the code and matched up the &quot;}&quot; did not find any extras."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536693931, "post_id": 52282246, "comment_id": 91513961, "body": "@Sandwick Yes, which is why you should start every Perl file with <code>use strict; use warnings;</code> and not use <code>-w</code> anymore. Next steps would be: Use 3-argument <code>open</code>, use lexical variables instead of globals, use lexical variables instead of bareword filehandles, properly indent your code, mention the filename and error reason (<code>$!</code>) in your error messages, etc."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536694767, "post_id": 52282246, "comment_id": 91514323, "body": "You split the lines from <code>15inv.txt</code> into twelve variables, but the sample of your data has only six fields. How is that supposed to work?  Are there always just  three lines in <code>active.txt</code>? Do all three contain item numbers?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536695576, "post_id": 52282246, "comment_id": 91514742, "body": "@Sandwick: I have tidied your Perl code so that I could understand it properly. It is essential that you do this for yourself in future, especially before asking for help to fix it. Comments that mark the end of code blocks are generally a sign that your program needs to be organised better: now that it&#39;s indented it&#39;s easy to see which closing brace belongs to which opening brace. As <b>melpomene</b> has said, Perl v5.8 was released sixteen years ago, and best practice has been to <code>use strict</code> and <code>use warnings</code> and lexical file handles ever since. You should find a more modern Perl tutorial."}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1536768813, "post_id": 52282246, "comment_id": 91546737, "body": "Once opened where do you close ACTIVE ?"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 2, "last_activity_date": 1536692808, "creation_date": 1536692808, "answer_id": 52282661, "question_id": 52282246, "link": "https://stackoverflow.com/questions/52282246/check-eof-while-looping-through-file/52282661#52282661", "title": "Check EOF while looping through file", "body": "<p>I think you're asking about how to print something if you don't find it in the other file. Typically I use a flag variable for this. It's false until you find the thing. If it's still false when you've gone through the whole file, you didn't find it:</p>\n\n<pre><code>my $look_for = ...;\nmy $found = 0;\n\nwhile( &lt;$fh&gt; ) {\n    chomp;\n    $_ eq $look_for ? $found = 1 : next;\n    ...\n    }\n\nunless( $found ) {\n    print \"Not found!\";\n    }\n</code></pre>\n\n<p>One way to detect these problems is to reduce your program to the smallest thing that can show the problem (rather than the entire working script). Try it in the small then build on that.</p>\n"}], "owner": {"reputation": 21, "user_id": 7965228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb8f65d159f08d7815b03937e545ffdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sandwick", "link": "https://stackoverflow.com/users/7965228/sandwick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 52282661, "answer_count": 1, "score": 0, "last_activity_date": 1536694316, "creation_date": 1536691016, "last_edit_date": 1536694316, "question_id": 52282246, "link": "https://stackoverflow.com/questions/52282246/check-eof-while-looping-through-file", "title": "Check EOF while looping through file", "body": "\n\n<p>I am reading file <code>15inv.txt</code> line by line. I get the \"item number\" from each line and then open another file <code>active.txt</code> and search for a matching item number.</p>\n\n<p>If I find a match, I want to print it out to <code>results.txt</code> with \"matched\" attached. If I get to the end of the file and do not find it print out \"No match EOF reached\".</p>\n\n<p>I am trying to find whether the item number in <code>15inv.txt</code> is in <code>active.txt</code>.</p>\n\n<p>The <code>15inv.txt</code> file looks like this. The file can have multiple item numbers.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1 5,I413858,O313071 ,2015-5-11 12:01:01,10033,WHITE HOUSE FURNITURE                   ,FAIRFIELD           ,NJ,29562,1,460,460\n</code></pre>\n\n<p>The <code>active.txt</code> file has the item number in it and it only shows up once.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>30-18\n30-46\n26817\n</code></pre>\n\n<p>Where am I going wrong in my code? </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl -w\n\n$inv = '15inv.txt';\nopen INV, \"&lt;$inv\" or die \"Unable to open the file\\n\";\n\n$inv_out = '15inv-OBS.csv';\nopen INVOUT, \"&gt;$inv_out\" or die \"Unable to open the file\\n\";\n\n$count = 0;\nprint INVOUT \"Item #, Qty, Cost, Ext Cost, Status \\n\";\n\nwhile ( &lt;INV&gt; ) {\n\n    $inv_line = $_;\n    chomp($inv_line);\n    $count++;\n\n    ($inv_rep, $inv_invoice, $inv_order, $inv_date, $inv_account, $inv_name, $inv_city, $inv_state, $inv_item, $inv_qty, $inv_cost, $inv_ecost)  = split(/,/, $inv_line);\n\n    $inv_item =~ s/\\s+//;  # remove spaces\n\n    $active = 'active.txt'; # active items\n    open ACTIVE, \"&lt;$active\" or die \"Unable to open the file\\n\";\n\n    while ( &lt;ACTIVE&gt; ) {\n\n        $the_active = $_;\n        chomp($the_active);\n\n        $active_item = substr($the_active, 0,10);\n\n        $active_item =~ s/\\s+//;\n        next if ( $inv_item ne $active_item );\n\n        if ( $inv_item eq $active_item ) {\n            print INVOUT \"$inv_item, $inv_qty, $inv_cost,$inv_ecost,IN \\n\";\n            next;\n        } # end of if \n\n    } # end of ACTIVE while loop\n\n    print INVOUT \"$inv_item, $inv_qty, $inv_cost,$inv_ecost, EOF \\n\";\n\n} # end of INV while loop\n\nprint \"Done!!! \\n\";\n\nclose FILE;\nclose INV;\nclose INVOUT;\n\nexit;\n</code></pre>\n"}, {"tags": ["windows", "perl", "utf-8", "decode", "encode"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1536677870, "post_id": 52278250, "comment_id": 91505551, "body": "You can&#39;t use UTF-8 for the file names when the filing system itself uses something else."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1536680081, "post_id": 52278250, "comment_id": 91506982, "body": "See <a href=\"https://stackoverflow.com/a/6163129\">this answer</a> for one suggestion."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1536715158, "post_id": 52278250, "comment_id": 91520489, "body": "@brian d foy, <a href=\"https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default\">The linked answer</a> doesn&#39;t even address the OP&#39;s example. Reopening."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1536715224, "post_id": 52278250, "comment_id": 91520498, "body": "1) Perl&#39;s support for Unicode on Windows is abysmal. For dealing with files, Perl builtins use the &quot;(A)NSI&quot; interface, but you need to use the &quot;(W)ide&quot; interface to use arbitrary Unicode characters. To do that, you want <a href=\"https://metacpan.org/release/Win32-Unicode\" rel=\"nofollow noreferrer\">Win32-Unicode</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536715228, "post_id": 52278250, "comment_id": 91520499, "body": "2) I can&#39;t think of anything exposing the Wide interface of <code>CreateProcess</code>, so you might have to use Win32::API to do so for a Unicode version of <code>system</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536715234, "post_id": 52278250, "comment_id": 91520500, "body": "3) For STDIN/STDOUT/STDERR, you want to use <code>chcp 65001</code> from the concole, and use <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code> as a on a UTF-8 unix system"}, {"owner": {"reputation": 355, "user_id": 2165807, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c0d631209d1a810305c2d597d07fdb00?s=128&d=identicon&r=PG", "display_name": "toshniba", "link": "https://stackoverflow.com/users/2165807/toshniba"}, "edited": false, "score": 0, "creation_date": 1536736636, "post_id": 52278250, "comment_id": 91526782, "body": "thanks for your contributions. Please see my answer post below."}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 2165807, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c0d631209d1a810305c2d597d07fdb00?s=128&d=identicon&r=PG", "display_name": "toshniba", "link": "https://stackoverflow.com/users/2165807/toshniba"}, "edited": false, "score": 0, "creation_date": 1536682475, "post_id": 52278584, "comment_id": 91508358, "body": "unfortunately neither the <code>chcp</code> nor the <code>utf-16le</code> stuff work for me!?"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 1, "last_activity_date": 1536677108, "last_edit_date": 1592644375, "creation_date": 1536677108, "answer_id": 52278584, "question_id": 52278250, "link": "https://stackoverflow.com/questions/52278250/using-utf8-everywhere-in-with-perl-script/52278584#52278584", "title": "Using utf8 everywhere in/with perl script", "body": "<p>First set the codepage of your command prompt to 65001</p>\n<pre><code>chcp 65001\n</code></pre>\n<p>This will allow you to use and display utf8 characters in the command prompt.\nFile names are dependent on the file system being used. NTFS stores file names using the UTF-16LE encoding. See <a href=\"https://stackoverflow.com/questions/5992460/how-do-you-create-unicode-file-names-in-windows-using-perl\">this</a> question on how to create and access files with Unicode file names on Windows.</p>\n<p>System() commands need to be encoded in the same codepage as the command prompt so after doing a <code>chcp 65001</code> you can encode the <code>system()</code> command in utf8</p>\n"}, {"comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1536739621, "post_id": 52289492, "comment_id": 91528508, "body": "Error: Failed to open PDF file: is caused I think because the file name is encoded in UTF-8 and the file system expects UTF-16LE."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536743750, "post_id": 52289492, "comment_id": 91531025, "body": "<code>open</code> expects cp1252 or whatever your system&#39;s ANSI code page is. You can use <code>CreateFileW</code> from Win32API::File instead. The name is a bit confusing. This is the system call for creating <i>file handles</i> (i.e. opening files), not creating files."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1536743841, "post_id": 52289492, "comment_id": 91531085, "body": "CAM::PDF&#39;s constructor accepts the contents of the a file (<code>$self = CAM::PDF-&gt;new(content | filename | &#39;-&#39;)</code>). You should read the file yourself (with <code>:raw</code>!) and pass what you read to CAM::PDF instead of the file name"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536743908, "post_id": 52289492, "comment_id": 91531134, "body": "As previously mentioned, you&#39;ll need to use <code>CreateProcessW</code> to pass the file name to <code>pdftk</code> (and hope that <code>pdftk</code> uses Wide system calls!)"}], "tags": [], "owner": {"reputation": 355, "user_id": 2165807, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c0d631209d1a810305c2d597d07fdb00?s=128&d=identicon&r=PG", "display_name": "toshniba", "link": "https://stackoverflow.com/users/2165807/toshniba"}, "is_accepted": false, "score": 0, "last_activity_date": 1536737009, "last_edit_date": 1536737009, "creation_date": 1536736545, "answer_id": 52289492, "question_id": 52278250, "link": "https://stackoverflow.com/questions/52278250/using-utf8-everywhere-in-with-perl-script/52289492#52289492", "title": "Using utf8 everywhere in/with perl script", "body": "<p>As there is no suitable answering post for now, I'll try to write down a working sample here. Hopefully one time it will have no more errors in it. Until then please post your suggestions/solutions which I'll test and update that code on success.</p>\n\n<p>Currently unsolved problems:</p>\n\n<ul>\n<li>opening the pdf file by <code>open</code></li>\n<li>opening the pdf file by <code>CAM::PDF-&gt;new</code></li>\n<li>processing the pdf file by <code>system</code> call</li>\n</ul>\n\n<p>test.pl:</p>\n\n<pre><code>$| = 1;\nuse strict;\nuse warnings;\nuse utf8;\nuse CAM::PDF;\nuse open ':std', ':encoding(UTF-8)';\nBEGIN {\n  if ($^O eq \"MSWin32\") {\n    require Win32::Unicode::File;\n    Win32::Unicode::File-&gt;import();\n  }\n}\n\nmy $file = 'T\u00e4st.pdf';\nprint \"FILENAME: $file\\n\";\n\nunlink(\"file2.pdf\");\ncopyW($file, \"file2.pdf\") or print \"cannot copy file: $!\\n\";\n\nif (!open(FH, $file)) {\n  print \"cannot open file by open '$file': $!\\n\";\n}\nelse {close FH}\n\nmy $pdf = CAM::PDF-&gt;new($file) or print \"cannot open file by CAM::PDF: $!\\n\";\nprint \"\\n\";\n\nsystem(\"pdftk.exe $file cat 2 4 output out.pdf\") or print \"cannot run command: $!\\n\";\nprint \"\\n\";\n</code></pre>\n\n<p>test.cmd:</p>\n\n<p>Requires Font \"Lucida Console\" to be set for the commandline window.</p>\n\n<pre><code>@echo off\nchcp 65001 &gt;nul\ncall perl.exe test.pl\nchcp 850 &gt;nul\npause\n</code></pre>\n\n<p>Output under Windows:</p>\n\n<pre><code>FILENAME: T\u00e4st.pdf\n\ncannot open file by open 'T\u00e4st.pdf': No such file or directory\n\ncannot open file by CAM::PDF: No such file or directory\n\nError: Unable to find file.\nError: Failed to open PDF file:\n   T\u00c3\u00a4st.pdf\nDr\u00fccken Sie eine beliebige Taste . . .\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 428, "user_id": 1626653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36RNP.jpg?s=128&g=1", "display_name": "khw", "link": "https://stackoverflow.com/users/1626653/khw"}, "edited": false, "score": 2, "creation_date": 1537392535, "post_id": 52410671, "comment_id": 91772605, "body": "This question and answer have spurred an effort to improve the situation in Perl 5.30"}], "tags": [], "owner": {"reputation": 2342, "user_id": 145119, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2e8c9bda08fde339f0dc2110d9ddd5c9?s=128&d=identicon&r=PG", "display_name": "Mithaldu", "link": "https://stackoverflow.com/users/145119/mithaldu"}, "is_accepted": false, "score": 4, "last_activity_date": 1537375605, "creation_date": 1537375605, "answer_id": 52410671, "question_id": 52278250, "link": "https://stackoverflow.com/questions/52278250/using-utf8-everywhere-in-with-perl-script/52410671#52410671", "title": "Using utf8 everywhere in/with perl script", "body": "<p>Here's the real, concrete and definite answer by someone who just recently went through this exact problem:</p>\n\n<p>You cannot, on windows, have Perl 5.28.0 or below use UTF8 for everything.</p>\n\n<p>This is the why: As of Perl 5.28.0 the perl core file handling functions are fatally fucked for this. Windows stores filenames as (simply put) UTF16, and the windows api wide character functions return file names as wide chars, similar to what Perl already operates with internally. However when getting these from the file system, the perl core converts them into bytes in the encoding of the local system. Vice versa when writing file names. So, morally, you have this kind of flow, paraphrased as Perl:</p>\n\n<pre><code>use utf8;\n\nsub readdir_perl {\n    my $dir = shift;\n    my $fn = readdir $dir;\n    $fn = encode $fn, CP_ACP;\n    return $fn;\n}\n\nsub open_perl {\n    my $fn = shift;\n    $fn = decode $fn, CP_ACP;\n    open my $FH, $fn;\n    return $FH;\n}\n</code></pre>\n\n<p>Two important notes:</p>\n\n<ul>\n<li>All of the stuff above is paraphrased. It's roughly how the perl core implements these functions in C, and you cannot usefully change them, nor CP_ACP, for the duration of a program.</li>\n<li>The conversion from wide chars to CP_ACP is forced through. It doesn't bail on errors. If there are wide chars that cannot be represented usefully, it converts them to a <code>?</code> character, leaving you with a handful of garbage.</li>\n</ul>\n\n<p>That said, what can you do?</p>\n\n<ol>\n<li>Use <a href=\"https://metacpan.org/pod/Win32::LongPath\" rel=\"nofollow noreferrer\">Win32::LongPath</a>. It handles most of what you need internally. For files. Be aware that it only works reliably on volumes with shortpaths configured on, which is usually C: and nothing else. Use <code>system</code> as normal, but ensure you treat everything as bytes and decode/encode appropiately. Some <a href=\"https://www.perlmonks.org/?node_id=1220286\" rel=\"nofollow noreferrer\">example code</a> exists. You'll also need to implement ALL filehandling manually, and you can't usefully monkeypatch other code to use the LongPath functions.</li>\n<li>Wait until the perl core is fixed. As far as i know there currently are not any plans to do this anytime soon, as any kind of simple fix is likely to break legacy scripts that rely on the UTF16 to system codepage conversion to usefully munge unicode umlauts into \u00e4\u00f6\u00fc on german systems, etc.</li>\n<li>Use a different language. Maybe PowerShell.</li>\n</ol>\n"}], "owner": {"reputation": 355, "user_id": 2165807, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c0d631209d1a810305c2d597d07fdb00?s=128&d=identicon&r=PG", "display_name": "toshniba", "link": "https://stackoverflow.com/users/2165807/toshniba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1537375605, "creation_date": 1536676094, "question_id": 52278250, "link": "https://stackoverflow.com/questions/52278250/using-utf8-everywhere-in-with-perl-script", "title": "Using utf8 everywhere in/with perl script", "body": "<p>I'm running latest perl under german Windows 7 and I want to use utf8 everywhere in my perl programs (for the script, the file contents, file names, mail texts, etc.).</p>\n\n<p>All works fine, but I'm facing problems when trying to process files having special characters in filename. Even <code>system</code> calls do not work well. So (how) can I tell perl to use <code>utf8</code> <strong>everywhere</strong>?</p>\n\n<p>I tried a while with <code>encode</code> and <code>decode</code> but it's very unclear why that works as it works... Also I need to <code>encode('cp850', TEXT)</code> for a correct display in the command prompt window.</p>\n\n<p>Examples:</p>\n\n<p>When I need to copy a file, it only works when I use <code>File::copy(encode(\"iso-8859-1\", $filename), ...)</code> and when I want to work with pdf file contens the successful command is <code>system(encode('cp850', sprintf('pdftk.exe %s...', decode('utf8', $file))));</code></p>\n\n<p>Why is that (especially the decode in the system call) and is there a more easy way? Maybe something with <code>use open ':encoding...'</code>, but I had no luck so far.</p>\n"}, {"tags": ["perl", "vim", "indentation", "mason"], "answers": [{"comments": [{"owner": {"reputation": 153428, "user_id": 813602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1844cebf36374d83a83c0e69003cd42?s=128&d=identicon&r=PG", "display_name": "Ingo Karkat", "link": "https://stackoverflow.com/users/813602/ingo-karkat"}, "edited": false, "score": 3, "creation_date": 1536684466, "post_id": 52280216, "comment_id": 91509294, "body": "Please don&#39;t downvote without leaving a comment. I can understand if you don&#39;t like the proposed solution (because it&#39;s a lot of effort), but don&#39;t shoot the messenger!"}], "tags": [], "owner": {"reputation": 153428, "user_id": 813602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1844cebf36374d83a83c0e69003cd42?s=128&d=identicon&r=PG", "display_name": "Ingo Karkat", "link": "https://stackoverflow.com/users/813602/ingo-karkat"}, "is_accepted": true, "score": 3, "last_activity_date": 1536736185, "last_edit_date": 1536736185, "creation_date": 1536682604, "answer_id": 52280216, "question_id": 52277951, "link": "https://stackoverflow.com/questions/52277951/make-vim-ignore-first-character-in-line-while-indenting/52280216#52280216", "title": "Make Vim ignore first character in line while indenting", "body": "<p>This is Perl code embedded inside HTML, so the indenting comes from <code>$VIMRUNTIME/indent/html.vim</code>. This defines an <code>'indentexpr'</code>, implemented by <code>HtmlIndent()</code>.</p>\n\n<p>You need to modify that implementation to ignore <code>%</code> in the first column; whenever it accesses the buffer (<code>getline()</code>, <code>prevnonblank()</code>, <code>shiftwidth()</code>), you need to intercept, find the previous line that does have such <code>%</code> sigil, and return the value for that instead. (If those special lines can also contain HTML tags, you may have to extract those from the Perl code and return only those.) That gets you the indenting you desire.</p>\n\n<p>Unfortunately, it's not trivial, and you have to fork the original implementation. However, if you manage to implement a clean solution, you could suggest adding integration points to the author of <code>indent/html.vim</code>. If there are other languages apart from Mason that use these prefixes on top of HTML, that would be an additional argument for adding such support (and maybe even your wrapper functions).</p>\n"}], "owner": {"reputation": 584, "user_id": 328204, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/lyVln.jpg?s=128&g=1", "display_name": "Andr&#233; Gil", "link": "https://stackoverflow.com/users/328204/andr%c3%a9-gil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 52280216, "answer_count": 1, "score": 5, "last_activity_date": 1536736185, "creation_date": 1536675189, "question_id": 52277951, "link": "https://stackoverflow.com/questions/52277951/make-vim-ignore-first-character-in-line-while-indenting", "title": "Make Vim ignore first character in line while indenting", "body": "<p>Whenever I have to edit Perl Mason files, I always have problems indenting lines due to Perl code starting with <code>%</code>. For example:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;div&gt;\n%       if( !$something ) {\n            &lt;strong&gt;&lt;% $title %&gt;&lt;/strong&gt;\n%       }\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Any idea how I can tell Vim to ignore the <code>%</code> at the beginning of the line and indent like it wasn't there?</p>\n\n<p>I'm using <a href=\"https://github.com/aming/vim-mason\" rel=\"noreferrer\">https://github.com/aming/vim-mason</a> to support the mixed Perl/HTLM syntax, but I don't think it changes anything.</p>\n"}, {"tags": ["perl", "nslookup"], "comments": [{"owner": {"reputation": 141, "user_id": 6277637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b75bd241571946bd8060b505d56ec4b?s=128&d=identicon&r=PG&f=1", "display_name": "James E Keenan", "link": "https://stackoverflow.com/users/6277637/james-e-keenan"}, "edited": false, "score": 0, "creation_date": 1536708678, "post_id": 52277566, "comment_id": 91519171, "body": "Note that <code>perldoc -f gethostbyname</code> tells us: <i>&quot;Make sure &quot;gethostbyname&quot; is called in SCALAR context and that its return value is checked for definedness.&quot;</i>  Your code sample does neither."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 141, "user_id": 6277637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b75bd241571946bd8060b505d56ec4b?s=128&d=identicon&r=PG&f=1", "display_name": "James E Keenan", "link": "https://stackoverflow.com/users/6277637/james-e-keenan"}, "edited": false, "score": 1, "creation_date": 1536708916, "post_id": 52277566, "comment_id": 91519214, "body": "@JamesEKeenan That&#39;s for resolving a hostname to a single IP address when you don&#39;t care about all the other information a list context <code>gethostbyname</code> returns."}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 1, "creation_date": 1536695487, "post_id": 52283101, "comment_id": 91514696, "body": "That gives you all of the IPs that nameserver hands out, which is probably what OP wanted, but it&#39;s not the same as all IP addresses of a hostname."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 1, "creation_date": 1536696012, "post_id": 52283101, "comment_id": 91514936, "body": "@CupcakeProtocol <code>cnn.com</code>&#39;s authoritative name server hands out the same IP addresses. Please clarify what you&#39;re getting at."}, {"owner": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 0, "creation_date": 1536698963, "post_id": 52283101, "comment_id": 91516190, "body": "I get completely different answers for www.cnn.com querying from California and New York. What I mean is DNS tricks can be used to direct you to a particular instance or set of instances, and an exhaustive list of IP addresses is not practical to determine as an outsider."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 0, "creation_date": 1536700242, "post_id": 52283101, "comment_id": 91516707, "body": "@CupcakeProtocol Examples are desired."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 0, "creation_date": 1536700297, "post_id": 52283101, "comment_id": 91516729, "body": "@CupcakeProtocol Test against authoritative sources; not against ad-placing, DNS hijacking ISPs."}, {"owner": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 0, "creation_date": 1536701165, "post_id": 52283101, "comment_id": 91517061, "body": "Look at the first example in the section called &quot;stupid dns tricks&quot;: <a href=\"https://queue.acm.org/detail.cfm?id=1647302\" rel=\"nofollow noreferrer\">queue.acm.org/detail.cfm?id=1647302</a>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 0, "creation_date": 1536701311, "post_id": 52283101, "comment_id": 91517110, "body": "I understand. I&#39;ve met Paul Vixie at ARIN conferences. There&#39;s many ambiguities. If you have a better answer for OP, write one ;)"}, {"owner": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 3, "creation_date": 1536701468, "post_id": 52283101, "comment_id": 91517163, "body": "I think your answer is what OP wanted, but OP&#39;s question is vague and for posterity I wanted to point that out."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 601, "user_id": 9058096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49044ab07fe9808b72ce58dcc999adcd?s=128&d=identicon&r=PG&f=1", "display_name": "Cupcake Protocol", "link": "https://stackoverflow.com/users/9058096/cupcake-protocol"}, "edited": false, "score": 0, "creation_date": 1536701584, "post_id": 52283101, "comment_id": 91517200, "body": "Personally, I would like to see your digression. Look at my <a href=\"https://metacpan.org/author/STEVEB\" rel=\"nofollow noreferrer\">CPAN</a> page for my email address. This is a Perl-esque question, but I&#39;m still interested (although kind of detached) from DNS stuff. Love to discuss."}, {"owner": {"reputation": 5832, "user_id": 3019105, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/efrpY.png?s=128&g=1", "display_name": "tonix", "link": "https://stackoverflow.com/users/3019105/tonix"}, "edited": false, "score": 0, "creation_date": 1601122999, "post_id": 52283101, "comment_id": 113310506, "body": "How many IP addresses do companies like Facebook or Google have (indicatively) in order to serve billions of requests? Thank you!"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 5832, "user_id": 3019105, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/efrpY.png?s=128&g=1", "display_name": "tonix", "link": "https://stackoverflow.com/users/3019105/tonix"}, "edited": false, "score": 1, "creation_date": 1602353970, "post_id": 52283101, "comment_id": 113696160, "body": "@tonix Billions of requests can be served from a single IP address..."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 8, "last_activity_date": 1536696450, "last_edit_date": 1536696450, "creation_date": 1536694754, "answer_id": 52283101, "question_id": 52277566, "link": "https://stackoverflow.com/questions/52277566/getting-all-ip-addresses-of-a-hostname/52283101#52283101", "title": "Getting all IP addresses of a hostname", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Net::DNS::Resolver\" rel=\"noreferrer\">Net::DNS::Resolver</a> to get the IPv4 addresses (A records) for a hostname:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse feature 'say';\n\nuse Net::DNS::Resolver;\n\nmy $res = Net::DNS::Resolver-&gt;new;\n\nmy $name = 'stackoverflow.com';\nmy $q = $res-&gt;query($name);\n\nif ($q){\n    print \"$name has the following IPv4 addresses:\\n\";\n    for ($q-&gt;answer){\n        say $_-&gt;address if $_-&gt;type eq 'A';\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>stackoverflow.com has the following IPv4 addresses:\n151.101.65.69\n151.101.193.69\n151.101.1.69\n151.101.129.69\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "is_accepted": false, "score": 0, "last_activity_date": 1612959357, "creation_date": 1612959357, "answer_id": 66136718, "question_id": 52277566, "link": "https://stackoverflow.com/questions/52277566/getting-all-ip-addresses-of-a-hostname/66136718#66136718", "title": "Getting all IP addresses of a hostname", "body": "<p>Simple pure perl to print the IP of the domain  <code>stackoverflow.com</code> :</p>\n<pre><code>use Socket;\nprint join'.',unpack('C4',inet_aton('stackoverflow.com'));\nprint &quot;\\n&quot;;\n</code></pre>\n"}], "owner": {"reputation": 3517, "user_id": 8069748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9ZD9.png?s=128&g=1", "display_name": "Navid Zarepak", "link": "https://stackoverflow.com/users/8069748/navid-zarepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4079, "favorite_count": 1, "accepted_answer_id": 52283101, "answer_count": 2, "score": 5, "last_activity_date": 1612959357, "creation_date": 1536673938, "question_id": 52277566, "link": "https://stackoverflow.com/questions/52277566/getting-all-ip-addresses-of-a-hostname", "title": "Getting all IP addresses of a hostname", "body": "<p>I'm trying to get all the IP addresses for a host.</p>\n\n<p>This is the nslookup output:</p>\n\n<pre><code>&gt;&gt;nslookup site.com\n\nServer:         8.8.8.8\nAddress:        8.8.8.8#53\n\nNon-authoritative answer:\nName:   site.com\nAddress: 1.1.1.1\nName:   site.com\nAddress: 2.2.2.2\n</code></pre>\n\n<p>I tried this code:</p>\n\n<pre><code>use Socket;\nuse Data::Dumper;\nmy $name = \"site.com\";\n@addresses = gethostbyname($name)   or die \"Can't resolve $name: $!\\n\";\n@addresses = map { inet_ntoa($_) } @addresses[4 .. $#addresses];\nprint Dumper(\\@addresses);\n</code></pre>\n\n<p>And this is the output:</p>\n\n<pre><code>['1.1.1.1'];\n</code></pre>\n\n<p>Anyway to get both <code>1.1.1.1</code> and <code>2.2.2.2</code>?</p>\n"}, {"tags": ["perl", "unit-testing", "mocking"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1536652392, "post_id": 52268514, "comment_id": 91489511, "body": "I think the problem is that you mock the <code>new</code> method and it returns an empty hash <code>{}</code> into <code>$ssh</code>. I think this will confuse the mocker, and it will forget about the <code>pipe_out()</code> method in the original <code>Net::OpenSSH</code> package.."}], "answers": [{"tags": [], "owner": {"reputation": 2776, "user_id": 137948, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/69ede0d2d1b8ef65b841c031a7bac2e5?s=128&d=identicon&r=PG", "display_name": "Will Sheppard", "link": "https://stackoverflow.com/users/137948/will-sheppard"}, "is_accepted": true, "score": 1, "last_activity_date": 1536925496, "last_edit_date": 1536925496, "creation_date": 1536924967, "answer_id": 52331159, "question_id": 52268514, "link": "https://stackoverflow.com/questions/52268514/unable-to-mock-netopenssh-pipe-out-module-in-perl/52331159#52331159", "title": "Unable to mock Net::OpenSSH pipe_out module in perl", "body": "<p>Instead of having <code>new</code> return empty object using <code>bless( {}, 'Net::OpenSSH' )</code> you need to have <code>new</code> return a second mock object that has a <code>pipe_out</code> method, like this:</p>\n\n<pre><code>use Test::MockModule;\nuse Test::MockObject;\n\nmy $obj = Test::MockObject-&gt;new();\n$obj-&gt;mock( 'pipe_out', sub { return 1 } );\n$obj-&gt;set_isa('Net::OpenSSH');\n\n$mockOpenSSH = Test::MockModule-&gt;new('Net::OpenSSH');\n    $mockOpenSSH-&gt;mock(\n        new =&gt; sub {\n            my $ObjectName = shift;\n            my $hostIp     = shift;\n            is $hostIp, \"&lt;My IP&gt;\";\n            print \"Fake OpenSSH::new\\n\";\n            return $obj;\n        },\n    );\n</code></pre>\n\n<p>Read more about <a href=\"https://metacpan.org/pod/Test::MockObject\" rel=\"nofollow noreferrer\">Test::MockObject</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 3488708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7487222cd496938b0d02e8ed16e360e7?s=128&d=identicon&r=PG&f=1", "display_name": "dheemanth", "link": "https://stackoverflow.com/users/3488708/dheemanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 52331159, "answer_count": 1, "score": 2, "last_activity_date": 1536925496, "creation_date": 1536638946, "question_id": 52268514, "link": "https://stackoverflow.com/questions/52268514/unable-to-mock-netopenssh-pipe-out-module-in-perl", "title": "Unable to mock Net::OpenSSH pipe_out module in perl", "body": "<p>I'm trying to mock the Net::OpenSSH pipe_out subroutine. My code is as follows</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Test::More;\nuse Test::Exception;\nuse Test::MockModule;\n</code></pre>\n\n<p>And My Begin method is </p>\n\n<pre><code>use_ok('Net::OpenSSH');\n</code></pre>\n\n<p>And I'm mocking the new method as follows.</p>\n\n<pre><code>$mockOpenSSH = Test::MockModule-&gt;new('Net::OpenSSH');\n    $mockOpenSSH-&gt;mock(\n        new =&gt; sub {\n            my $ObjectName = shift;\n            my $hostIp     = shift;\n            is $hostIp, \"&lt;My IP&gt;\";\n            print \"Fake OpenSSH::new\\n\";\n            return bless( {}, 'Net::OpenSSH' );\n        },\n    );\n</code></pre>\n\n<p>But when I try to mock the pipe_out like this</p>\n\n<pre><code>$mockOpenSSH-&gt;mock( 'pipe_out' =&gt; sub {return 1} );\n</code></pre>\n\n<p>I'm getting the error from my main perl module where im calling the pipe_out as</p>\n\n<pre><code>$ssh-&gt;pipe_out('ls');\n</code></pre>\n\n<p>Im getting the error</p>\n\n<p><strong>#   Failed test ''\n    #   at test_abc_config.t line 148.\n    # died: Can't locate object method \"pipe_out\" via package \"Test::MockModule\" at abc.pm line 166.</strong></p>\n\n<p>Can someone help me please ?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "edited": false, "score": 0, "creation_date": 1536618735, "post_id": 52264796, "comment_id": 91480597, "body": "Indeed, vim changes the inode. I checked other console editors: mcedit, nano they like cat edit the existing file and not replace it with a new one. Why does vim behave this way? I wanted to use <code>Linux::Inotify2</code> to track the modification of the file, but if the file is ruled in vim then it is without meaning."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "edited": false, "score": 1, "creation_date": 1536619358, "post_id": 52264796, "comment_id": 91480772, "body": "Re &quot;<i>Why does vim behave this way?</i>&quot;, I&#39;m guessing it saves to a temporary file, then renames the temporary file. This way, you don&#39;t risk losing both the new and the old file."}, {"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "edited": false, "score": 0, "creation_date": 1536620232, "post_id": 52264796, "comment_id": 91480923, "body": "If adding <code>set backupcopy=yes</code> to <code>~&#47;.vimrc</code> file, then <code>vim</code> will not replace the file"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "edited": false, "score": 1, "creation_date": 1536638306, "post_id": 52264796, "comment_id": 91484397, "body": "You can get notified of the file creation if you monitor the directory, right?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "edited": false, "score": 0, "creation_date": 1536643919, "post_id": 52264796, "comment_id": 91485795, "body": "@Dmitriy Also, there are yet other flags which can detect metadata change, along with a good selection of other events of interest. You want to add them anyway. While a directory monitor on its own can be used to handle (nearly?) all of that, too."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1536610725, "last_edit_date": 1536610725, "creation_date": 1536610155, "answer_id": 52264796, "question_id": 52264373, "link": "https://stackoverflow.com/questions/52264373/reading-a-file-when-someone-writes-to-it/52264796#52264796", "title": "Reading a file when someone writes to it", "body": "<p>The shell's <code>&gt;&gt;</code> directive opens the existing file, while <code>vim</code> creates a new file with the same name as the old one, leaving your program reading an a now-anonymous file.</p>\n\n<pre><code>$ touch a\n\n$ perl -MFile::stat -e'my $qfn = $ARGV[0]; my $s = stat($qfn) or die $!; printf \"%s:%s\\n\", $s-&gt;dev, $s-&gt;ino' a\n2065:1084527165\n\n$ cat &gt;&gt;a\nfoo\n\n$ perl -MFile::stat -e'my $qfn = $ARGV[0]; my $s = stat($qfn) or die $!; printf \"%s:%s\\n\", $s-&gt;dev, $s-&gt;ino' a\n2065:1084527165\n\n$ vim a\n\n$ perl -MFile::stat -e'my $qfn = $ARGV[0]; my $s = stat($qfn) or die $!; printf \"%s:%s\\n\", $s-&gt;dev, $s-&gt;ino' a\n2065:1084520254\n</code></pre>\n\n<p>You need to re-open the file.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse AnyEvent;\nuse Fcntl qw( SEEK_SET );\n\nmy $cv = AE::cv;\n\nmy $qfn = $ARGV[0];\nmy $last_pos = 0;\n\nmy $timer = AE::timer 0, 10, sub {\n    open(my $fh, '&lt;', $qfn)\n        or die(\"Can't open file: $!\\n\");\n    seek($fh, $last_pos, SEEK_SET)\n        or die(\"Can't seek: $!\\n\");\n\n    printf \"TELL: %s EOF: %s\\n\", tell $fh, eof $fh;\n\n    print while &lt;$fh&gt;;\n\n    ( $last_pos = tell($fh) ) &gt;= 0\n        or die(\"Can't tell: $!\\n\");\n};\n\n$cv-&gt;recv;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>$ echo foo &gt;a\n\n$ perl a.pl a\nTELL: 0 EOF:\nfoo\nTELL: 4 EOF: 1\nTELL: 4 EOF: 1        echo bar &gt;&gt;foo\nTELL: 4 EOF:\nbar\nTELL: 8 EOF: 1\nTELL: 8 EOF: 1        Used vim to change the file to \"The quick brown fox\"\nTELL: 8 EOF:\nk brown fox\nTELL: 20 EOF: 1\n^C\n</code></pre>\n"}], "owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "accepted_answer_id": 52264796, "answer_count": 1, "score": 7, "last_activity_date": 1536610725, "creation_date": 1536608139, "question_id": 52264373, "link": "https://stackoverflow.com/questions/52264373/reading-a-file-when-someone-writes-to-it", "title": "Reading a file when someone writes to it", "body": "<p>The script reads the lines from the file, here's the code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse AnyEvent;\n\nopen my $fh, '&lt;', 'input.txt' or die \"Can't open file: $!\";\n\nmy $cv = AE::cv;\n\nmy $timer = AE::timer 0, 10, sub {\n    printf \"TELL: %s EOF: %s\\n\", tell $fh, eof $fh;\n    print while &lt;$fh&gt;;\n};\n\n$cv-&gt;recv;\n</code></pre>\n\n<p>If I add lines through cat, then the script reads the new lines. But if I edit the file through a vim editor, then the script does not see any new lines in the file and issues an EOF. Why does the script behave this way and do not see new lines?</p>\n\n<p>Output of the script:</p>\n\n<pre><code>$ perl test.pl\nTELL: 0 EOF:\nrow_1\nrow_2\nrow_3\nTELL: 18 EOF: 1\nTELL: 18 EOF: 1\nTELL: 18 EOF:\nrow_4\nTELL: 24 EOF:\nrow_5\nTELL: 30 EOF: 1\nTELL: 30 EOF: 1\nTELL: 30 EOF: 1\nTELL: 30 EOF: 1\n</code></pre>\n\n<p>The initial content of the input.txt:</p>\n\n<pre><code>row_1\nrow_2\nrow_3\n</code></pre>\n\n<p>Added via cat:</p>\n\n<pre><code>$ cat &gt;&gt; input.txt\nrow_4\nrow_5\n</code></pre>\n\n<p>Added via vim:</p>\n\n<pre><code>$ vim input.txt\nrow_6\nrow_7\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1536610330, "post_id": 52263688, "comment_id": 91477654, "body": "As an aside, I think you want sprintf there rather than printf. Or combine the sprintf and print into a single printf."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536649182, "post_id": 52263688, "comment_id": 91487894, "body": "Don&#39;t forget that a module must return a <i>true</i> value when it is run on its own, so you will normally need to add <code>1;</code> to the end of the file."}, {"owner": {"reputation": 244, "user_id": 1246239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51qQE.jpg?s=128&g=1", "display_name": "Christopher Hunter", "link": "https://stackoverflow.com/users/1246239/christopher-hunter"}, "edited": false, "score": 0, "creation_date": 1537393185, "post_id": 52263688, "comment_id": 91772822, "body": "Thanks, I had seen the &#39;1&#39; before but did not know why it was there"}], "answers": [{"comments": [{"owner": {"reputation": 244, "user_id": 1246239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51qQE.jpg?s=128&g=1", "display_name": "Christopher Hunter", "link": "https://stackoverflow.com/users/1246239/christopher-hunter"}, "edited": false, "score": 0, "creation_date": 1537393290, "post_id": 52263748, "comment_id": 91772866, "body": "This fixed it, thanks. I had seen a couple of examples so was not sure of the syntax for EXPORT"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 8, "last_activity_date": 1536736513, "last_edit_date": 1536736513, "creation_date": 1536605229, "answer_id": 52263748, "question_id": 52263688, "link": "https://stackoverflow.com/questions/52263688/perl-function-definition-fails-with-uninitialized-value/52263748#52263748", "title": "perl function definition fails with uninitialized value", "body": "<p>That's because you're accidentally populating @EXPORT_OK with a call to fail_with_error: <code>&amp;fail_with_error</code>, instead of the function name.  This calls <code>fail_with_errors</code> with the arguments populated from the current <code>@_</code> which happens to be empty - so naturally both the variables are uninitialized (and also your function doesn't get exported). The correct assignment uses just the subroutine name:</p>\n\n<pre><code>our @EXPORT_OK = qw( fail_with_error );\n</code></pre>\n"}], "owner": {"reputation": 244, "user_id": 1246239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51qQE.jpg?s=128&g=1", "display_name": "Christopher Hunter", "link": "https://stackoverflow.com/users/1246239/christopher-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 52263748, "answer_count": 1, "score": 0, "last_activity_date": 1536736513, "creation_date": 1536604954, "question_id": 52263688, "link": "https://stackoverflow.com/questions/52263688/perl-function-definition-fails-with-uninitialized-value", "title": "perl function definition fails with uninitialized value", "body": "<p>My perl chops are a little stale so I'm probably missing something really obvious here, but I've added a small module to some older code CGI code to refactor common functions. Here is an excerpt of the module with the part that is giving me problems:</p>\n\n<pre><code>package Common;\n\nuse strict;\nuse warnings;\nuse base 'Exporter';\nour @EXPORT_OK = (&amp;fail_with_error);\n\nsub fail_with_error {\n    my ($errmsg, $textcolor) = @_;\n    my $output = printf(\"&lt;p&gt;&lt;font color=\\\"%s\\\"&gt;ERROR: %s &lt;/font&gt;/&lt;p&gt;\", $textcolor, $errmsg);\n    print($output);\n    exit(1);\n}\n</code></pre>\n\n<p>When I execute this module directly with <code>perl Common.pm</code> (or when I just import the function in test code, without even calling it) what I get is an uninitialized value error for <code>$errmsg</code> and <code>$textcolor</code> like this:</p>\n\n<pre><code>$ perl Common.pm\nUse of uninitialized value $textcolor in printf at Common2.pm line 10.\nUse of uninitialized value $errmsg in printf at Common2.pm line 10.\n&lt;p&gt;&lt;font color=\"\"&gt;ERROR:  &lt;/font&gt;/&lt;p&gt;1\n</code></pre>\n\n<p>It would seem that perl is giving the warning because it is executing the subroutine code literally, but the nature of a subroutine is that it is abstracted so different values can be passed in correct? It would stand to reason these shouldn't have to be populated to pass interpreter warnings, but nonetheless something is wrong. </p>\n\n<p>I've searched around, but this error is very common because in most cases the variable really is uninitialized. I can't seem to find anything that applies to this type of case.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1536587210, "post_id": 52258505, "comment_id": 91465861, "body": "I think what you want to do is add one column at a time instead of one row at a time. The module does not have that functionality. You will have to reach in and add it. Or store the data somewhere else, then add it all at the same time, i.e. transpose yourself"}], "answers": [{"tags": [], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1536830598, "creation_date": 1536830598, "answer_id": 52310606, "question_id": 52258505, "link": "https://stackoverflow.com/questions/52258505/dynamically-increase-the-column-size-in-texttabulardisplay/52310606#52310606", "title": "Dynamically increase the column size in Text::TabularDisplay", "body": "<p>As far I understand, you can't render your table out without gathering all cols together anyway. After that it is not so hard to iterate over cols:</p>\n\n<pre><code>use strict; use warnings; use 5.010;\nuse Text::TabularDisplay;\n\nmy $cols = [\n  [ qw/1 2 3 4 5 6 7 8 9/ ],\n  [ qw/a b c d e f g h i/ ],\n  [ qw/j k l m n o p q r/ ],\n  [ qw/s t u v w x y z @/ ],\n];\n\nmy $table = Text::TabularDisplay-&gt;new( qw/foo bar baz fod / );\n\n# transpose columns to rows\n# expect first column has max number of elements over all the columns\nfor ( my $row = 0; $row &lt; scalar @{ $cols-&gt;[0] }; $row++ ) {\n  $table-&gt;add(  map { $_-&gt;[ $row ] } @$cols );\n}\n\nsay $table-&gt;render;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5576822, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/37c7ca48cbfdb35b372c84cab8d46726?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Federer", "link": "https://stackoverflow.com/users/5576822/roger-federer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536830598, "creation_date": 1536584749, "last_edit_date": 1536655344, "question_id": 52258505, "link": "https://stackoverflow.com/questions/52258505/dynamically-increase-the-column-size-in-texttabulardisplay", "title": "Dynamically increase the column size in Text::TabularDisplay", "body": "<p>Currently I am using <a href=\"https://metacpan.org/pod/Text::TabularDisplay\" rel=\"nofollow noreferrer\">Text::TabularDisplay</a>\nmodule in Perl.</p>\n\n<p>I want to dynamically increase the number of columns in the table I have already created.</p>\n\n<p>What I mean is, I want to populate the first column with data in first iteration and expand the table with second column and fill the contents in the second column and then again expand the table size until N<sup>th</sup> element dynamically.</p>\n\n<p>At the end I want to render the table after N iterations.</p>\n\n<p>Does any one know how to do this?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "edited": false, "score": 0, "creation_date": 1536585806, "post_id": 52258628, "comment_id": 91464917, "body": "In other words, the word &quot;package&quot; has too meanings: namespace, where functions and variables are declared, and unit of distribution?"}], "tags": [], "owner": {"reputation": 26141, "user_id": 38207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e2c3bc8e5b3f634cc9a77606e983226?s=128&d=identicon&r=PG", "display_name": "James Anderson", "link": "https://stackoverflow.com/users/38207/james-anderson"}, "is_accepted": false, "score": 3, "last_activity_date": 1536585198, "creation_date": 1536585198, "answer_id": 52258628, "question_id": 52258215, "link": "https://stackoverflow.com/questions/52258215/whats-the-name-of-perl-distribution-units/52258628#52258628", "title": "What&#39;s the name of Perl distribution units?", "body": "<p>When you download a package with a name like \"UseFull::Munger\"</p>\n\n<p>You will at the very least get a file UseFull/Munger.pm installed in your perl library. </p>\n\n<p>You could also get a set of modules used to implement the main module: \"/UseFull/Munger/dyslexic.pm\". </p>\n\n<p>The module may be a wrapper around a C library (like LibXML) in which case you will get some binaries installed such as  \"auto/XML/LibXML/LibXML.so\".</p>\n\n<p>If cpan needs to build a wrapper for a library you will get some \"UseFull/Munger/SlickClib/SlikClib.xs\" files which tell CPAN how to build the perl wrapper.</p>\n\n<p>In addition, if the developer is nice, you may get lots of \".pod\" document ion on how to use the module.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1536586566, "creation_date": 1536586566, "answer_id": 52259018, "question_id": 52258215, "link": "https://stackoverflow.com/questions/52258215/whats-the-name-of-perl-distribution-units/52259018#52259018", "title": "What&#39;s the name of Perl distribution units?", "body": "<p>I call these <em>Perl modules</em> or <em>CPAN modules</em>. The individual .pm building blocks are <em>Perl modules</em> too, but you rarely use them directly.</p>\n\n<p>When talking about the archive file that you upload to CPAN, you can use the word <em>distribution</em>. When talking about all the other files that are in there and that you can view on metacpan, taking a look <em>at the dist(ribution)</em> works well, too.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1536657409, "last_edit_date": 1536657409, "creation_date": 1536622544, "answer_id": 52266805, "question_id": 52258215, "link": "https://stackoverflow.com/questions/52258215/whats-the-name-of-perl-distribution-units/52266805#52266805", "title": "What&#39;s the name of Perl distribution units?", "body": "<p>Distribution (or \"dist\" for short).</p>\n\n<p>The name for a Perl distribution unit is <em>distribution</em>, so <code>cpanm XML::LibXML</code> installs the XML-LibXML <em>distribution</em>, because it includes the specified XML::LibXML <em>module</em>.</p>\n\n<p><strong><em>Example 1</em></strong></p>\n\n<p><a href=\"https://metacpan.org/pod/distribution/XML-LibXML/LibXML.pod\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jm0Ut.png\" alt=\"Screenshot of meta::cpan using the word &quot;distribution&quot;\"></a></p>\n\n<p><strong><em>Example 2</em></strong></p>\n\n<p><a href=\"https://metacpan.org/author/IKEGAMI\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YNI9J.png\" alt=\"Screenshot of meta::cpan using the word &quot;distribution&quot;\"></a></p>\n\n<p>Note that linux distributions usually have a package manager such as <code>apt</code> or <code>yum</code>, and many Perl distributions are made available as <em>packages</em> for those package managers. Someone using those package managers might refer to Perl distributions as packages, but that's not standard Perl jargon.</p>\n"}], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 52266805, "answer_count": 3, "score": 4, "last_activity_date": 1584056733, "creation_date": 1536583810, "last_edit_date": 1584056733, "question_id": 52258215, "link": "https://stackoverflow.com/questions/52258215/whats-the-name-of-perl-distribution-units", "title": "What&#39;s the name of Perl distribution units?", "body": "<p>Package is a namespace. Module is a file with Perl code. <code>cpan</code> and <code>cpanm</code> are probably package managers. When I do <a href=\"https://metacpan.org/release/XML-LibXML\" rel=\"nofollow noreferrer\"><code>cpanm XML::LibXML</code></a> I install what exactly?</p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1536588584, "post_id": 52256281, "comment_id": 91466748, "body": "Does <code>&quot;password&quot;</code> contain any metacharacters (<code>@</code>, <code>$</code>, <code>\\ </code>, <code>&quot;</code>) that need to be escaped inside double quotes?"}, {"owner": {"reputation": 1779, "user_id": 7617020, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1481465205198656/picture?type=large", "display_name": "Red Bottle", "link": "https://stackoverflow.com/users/7617020/red-bottle"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1536645105, "post_id": 52256281, "comment_id": 91486165, "body": "@mob yes it does contain an <code>@</code> symbol"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1536679817, "post_id": 52256281, "comment_id": 91506833, "body": "Next question: are you escaping the <code>@</code> symbol correctly inside double quotes? <code>$password=&quot;qwer@345&quot;</code> is wrong (will set <code>$password</code> to <code>qwer</code> and emit a warning if you <code>use warnings</code>), it should be <code>$password=&quot;qwer\\@345&quot;</code>, or use single quotes <code>$password=&#39;qwer@345&#39;</code> ."}, {"owner": {"reputation": 1779, "user_id": 7617020, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1481465205198656/picture?type=large", "display_name": "Red Bottle", "link": "https://stackoverflow.com/users/7617020/red-bottle"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1536730805, "post_id": 52256281, "comment_id": 91523910, "body": "@mob That was the problem. It fixed it. Can you post it as an answer? lemme accept it."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1536755431, "creation_date": 1536755431, "answer_id": 52295228, "question_id": 52256281, "link": "https://stackoverflow.com/questions/52256281/netsshperl-received-disconnect-message-too-many-authentication-failures-f/52295228#52295228", "title": "Net::SSH::Perl : Received disconnect message: Too many authentication failures for username", "body": "<p>Your password is specified inside double quotes, and Perl will interpolate scalar and array variables inside double quotes. </p>\n\n<pre><code>$password = \"qwer@345\"; print $password;    #   \"qwer\"\n</code></pre>\n\n<p>If you use double quotes to enclose a string, you must escape any special characters in that string such as <code>$</code>, <code>@</code>, <code>\"</code>, or <code>\\</code>. </p>\n\n<pre><code>$password = \"qwer\\@345\"; print $password;    #   \"qwer@345\"\n</code></pre>\n\n<p>or use single quotes -- Perl does not do interpolation inside single quotes.</p>\n\n<pre><code>$password = 'qwer@345'; print $password;    #   \"qwer@345\"\n</code></pre>\n\n<p>If you <code>use warnings</code> (you always <code>use warnings</code>, don't you?), sometimes Perl will warn you when something you write in double quotes might get misinterpreted.</p>\n"}], "owner": {"reputation": 1779, "user_id": 7617020, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1481465205198656/picture?type=large", "display_name": "Red Bottle", "link": "https://stackoverflow.com/users/7617020/red-bottle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 52295228, "answer_count": 1, "score": 1, "last_activity_date": 1536755431, "creation_date": 1536576943, "question_id": 52256281, "link": "https://stackoverflow.com/questions/52256281/netsshperl-received-disconnect-message-too-many-authentication-failures-f", "title": "Net::SSH::Perl : Received disconnect message: Too many authentication failures for username", "body": "<p>I am trying to connect to a remote server and run ssh commands in my Perl script. I have provided the correct port, host, username and password. Using the same credentials I can properly login through terminal. When I provide the same in my code I get error response. Please help.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>use strict;\n\nuse Net::SSH::Perl;\n\nmy $hostname = \"xxx.zzz.ccc.vvv\";\nmy $username = \"username\";\nmy $password = \"password\";\n\nmy $cmd = \"aws --version\";\n\nmy $ssh = Net::SSH::Perl-&gt;new(\"$hostname\", debug=&gt;0, port=&gt; 56789);\n$ssh-&gt;login(\"$username\",\"$password\");\nmy ($stdout,$stderr,$exit) = $ssh-&gt;cmd(\"$cmd\");\nprint $stdout;\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>Received disconnect message: Too many authentication failures for username\nat /usr/local/lib/x86_64-linux-gnu/perl/5.26.0/Net/SSH/Perl/AuthMgr.pm line 157.\n</code></pre>\n"}, {"tags": ["perl", "mod-perl"], "comments": [{"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1536577446, "post_id": 52255482, "comment_id": 91459976, "body": "@SteffenUllrich It does not have any syntax error, otherwise I wouldn&#39;t be able to run it. please read the question."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1536577719, "post_id": 52255482, "comment_id": 91460124, "body": "@SteffenUllrich, by the way, it is <code>myModule;</code> I just wrote a sample for my code, so I made a mistake here. On my code everything is ok. I have edited the question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1536578182, "post_id": 52255482, "comment_id": 91460389, "body": "The convention for naming modules in Perl is to use camel case with the first letter being upper case, so it would be better to name this <code>MyModule</code>. I&#39;ve looked at the Perl code you have on your github account. If you would like some feedback, feel free to post some of it on <a href=\"https://codereview.stackexchange.com\">Code Review</a>. :)"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1536578399, "post_id": 52255482, "comment_id": 91460521, "body": "@SarahAziziyan: it is not clear what your <code>myModule</code> does. But maybe it does not return true in specific situations although it should do this when used within <code>use ...</code>."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1536578543, "post_id": 52255482, "comment_id": 91460598, "body": "@simbabque yes sure, but that code is a sample. I have used Uppercase for my modules in my real code."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1536578612, "post_id": 52255482, "comment_id": 91460637, "body": "@SteffenUllrich what do you mean by thant? I will Edit the question and put the code of MyModule.pm ."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1536578933, "post_id": 52255482, "comment_id": 91460796, "body": "A very important skill to learn in IT is to always say what you mean. Don&#39;t come up with examples that are like your problem. Come up with examples that are the same as your problem. If you change code to make it generic, make sure you use the same conventions and the same level of quality you always do. Being precise is very important, or it gets really hard to help because we don&#39;t understand you properly."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1536579796, "post_id": 52255482, "comment_id": 91461233, "body": "@SarahAziziyan: See also <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>. It does not help if you show code which does not trigger the problem. If you try to show only what you think is the relevant part of the code in a simplified way you might actually omit the real cause."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1536581114, "post_id": 52255482, "comment_id": 91461949, "body": "@simbabque thank you for your advice. I have edited the question."}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1536581184, "post_id": 52255482, "comment_id": 91461987, "body": "@SteffenUllrich I have posted my code and edited the question."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1536581434, "post_id": 52255482, "comment_id": 91462143, "body": "@SarahAziziyan: And there are no other messages in the web servers log file than the ones you&#39;ve included in the question? Also, what do the modules PDBC, Request and Response actually do, i.e. failures in these modules might cause the problem too. And, could you please simplify your code as much as possible (while it should still trigger the problem)  - I&#39;ve already pointed out <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1536581673, "post_id": 52255482, "comment_id": 91462310, "body": "@SarahAziziyan: <i>&quot;This not All of it because I can&#39;t post it all. so I have edited it:&quot;</i> - and how do you know that the problem still exists with this edited version?"}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1536581680, "post_id": 52255482, "comment_id": 91462312, "body": "@SteffenUllrich sure I&#39;ll simplify it. (PDBC,Request and Response are others modules we have written and use here and in other codes)"}, {"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1536582023, "post_id": 52255482, "comment_id": 91462512, "body": "@SteffenUllrich you say simplify it and then you say I should post all of it. what should I do? :)))"}], "answers": [{"comments": [{"owner": {"reputation": 2776, "user_id": 137948, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/69ede0d2d1b8ef65b841c031a7bac2e5?s=128&d=identicon&r=PG", "display_name": "Will Sheppard", "link": "https://stackoverflow.com/users/137948/will-sheppard"}, "edited": false, "score": 1, "creation_date": 1536925885, "post_id": 52271120, "comment_id": 91609437, "body": "Thank you for posting the solution you found :)"}], "tags": [], "owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "is_accepted": true, "score": 2, "last_activity_date": 1536658623, "last_edit_date": 1536658623, "creation_date": 1536652122, "answer_id": 52271120, "question_id": 52255482, "link": "https://stackoverflow.com/questions/52255482/attempt-to-reload-module-pm-aborted-compilation-failed/52271120#52271120", "title": "Attempt to reload module.pm aborted.Compilation failed", "body": "<p>My problem has been solved.\nThe <code>Log::Log4perl</code> module was causing this error. It was used in <code>MyModule.pm</code>. I have used it before (in other projects) without problems. but this time it seemed like it couldn't create a log file in the directory specified, although <strong>it didn't give me any errors</strong> in <code>/var/log/httpd/error_log</code> related to <code>Log::Log4perl</code>! sooooo annoying.\nI tried everything. and when I deleted <code>Log::Log4perl</code> from my project it worked without problem even under pressure of thousands of users.</p>\n\n<p><strong>For those who have the same issue:</strong> you have to look into your code and see if there are any other modules used in your code (this might be modules inside modules) that is not working properly.</p>\n"}, {"tags": [], "owner": {"reputation": 409, "user_id": 2324547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66cd1a348b3f8da120d4f967731e3c86?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/2324547/frank"}, "is_accepted": false, "score": 2, "last_activity_date": 1594415403, "creation_date": 1594415403, "answer_id": 62842326, "question_id": 52255482, "link": "https://stackoverflow.com/questions/52255482/attempt-to-reload-module-pm-aborted-compilation-failed/62842326#62842326", "title": "Attempt to reload module.pm aborted.Compilation failed", "body": "<p>In an error case of &quot;Attempt to reload Scalar/Util.pm aborted&quot;, the reason is finally found due to some dll is missing. When DBI.pm call &quot;use Scalar::Util ();&quot; and its dependances, it actually will need to load &quot;\\perl\\site\\lib\\auto\\List\\Util\\Util.xs.dll&quot;. Even process monitor will miss this dependence: it shows Perl want to load &quot;\\perl\\site\\lib\\auto\\List\\Util\\Util.ds&quot;. So the reload error message here is completely missleading, as well as the acompaning information on %INC or suggestions on using require or eval.</p>\n"}], "owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2594, "favorite_count": 1, "accepted_answer_id": 52271120, "answer_count": 2, "score": 4, "last_activity_date": 1594415403, "creation_date": 1536574180, "last_edit_date": 1556488210, "question_id": 52255482, "link": "https://stackoverflow.com/questions/52255482/attempt-to-reload-module-pm-aborted-compilation-failed", "title": "Attempt to reload module.pm aborted.Compilation failed", "body": "<p>I have a Perl script that is executing with <code>mod_perl</code> and works as an <code>HTTP server</code>. <code>myServer.pl</code> uses a <code>module.pm</code>. Everything looks fine when I use it with one user. but when I put it under pressure of hundreds of users it gives me this weird error.</p>\n\n<blockquote>\n  <p>[error] Attempt to reload MyModule.pm aborted.\\nCompilation\n  failed in require at /var/www/mod_perl/myServer.pl line 36.\\nBEGIN\n  failed--compilation aborted at /var/www/mod_perl/myServer.pl line\n  36.</p>\n</blockquote>\n\n<p>Here is a <strong>sample</strong> of the beginning of my code for <strong>myServer.pl</strong>:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse CGI;\n#other use\nuse lib \"/var/www/lib/receipt/pos\";\nuse lib \"/var/www/lib/common\";\nuse MyModule;\n\nmy $q   = new CGI;\nmy $myM = new MyModule(requestParams=&gt;$q);\nif($myM){\n  my $requestId = $myM-&gt;requestId;\n  #do sth\n}else{\n    #do sth\n}\n\n#other codes\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>Here is a code for <strong>MyModule.pm</strong></p>\n\n<p>This not all of it because I can't post it all. so I have edited it:</p>\n\n<pre><code>package MyModule;\nuse strict;\nuse CGI;\nuse DBI;\nuse lib \"/var/www/lib/common\";\nuse lib \"/var/www/lib/receipt/pos\";\nuse PDBC;\nuse Request;\nuse Response;\n\nuse Log::Log4perl qw(get_logger);\nmy $Log4PerlConf_myLoggerP = q(\n        log4perl.category.myLoggerP    = WARN, myLoggerPLogfile\n        log4perl.appender.myLoggerPLogfile           = Log::Log4perl::Appender::File\n        log4perl.appender.myLoggerPLogfile.filename  = /var/www/logs/myLoggerP.Log\n        log4perl.appender.myLoggerPLogfile.layout = \\\n            Log::Log4perl::Layout::PatternLayout\n        log4perl.appender.myLoggerPLogfile.layout.ConversionPattern = (%d) %L&gt; %m %n\n);\nLog::Log4perl-&gt;init_once(\\$Log4PerlConf_myLoggerP);\nmy $loggermyLoggerP = get_logger(\"myLoggerP\");\n\nuse constant TRUE  =&gt; 1;\nuse constant FALSE =&gt; 0;\n\nuse constant D_VERSION  =&gt; \"6.00\";\n\nmy $myCode;\nmy $myMsg;\n\nmy $_init;\n\n\n##-----------------------getter setters-----------------------------##\nsub requestId       {$_[0]-&gt;{requestId}=$_[1]       if defined $_[1]; $_[0]-&gt;{requestId}}\nsub requestParams   {$_[0]-&gt;{requestParams}=$_[1]   if defined $_[1]; $_[0]-&gt;{requestParams}}\nsub reqID           {$_[0]-&gt;{reqID}=$_[1]           if defined $_[1]; $_[0]-&gt;{reqID}}\n##--------------------end getter setters-----------------------------##\n\nsub code {\n    my ($self,$code) = @_;\n    if (ref $self) { $self-&gt;{code}=$code if defined $code; return $self-&gt;{code} }\n    else { $myCode=$code if defined $code; return $myCode; }\n}\n\nsub msg {\n    my ($self,$msg) = @_;\n    if (ref $self) { $self-&gt;{msg}=$msg if defined $msg; return $self-&gt;{msg} } \n    else {$myMsg=$msg if defined $msg; return $myMsg; }\n}\n\nsub new {\n    my $class=shift;\n    my $self={@_};\n    bless $self,$class;\n    if ($self-&gt;$_init) {\n        return $self;\n    } else {\n        $myCode      = $self-&gt;code;\n        $myMsg       = $self-&gt;msg;\n    return FALSE;\n    }\n}\n\nsub addToDB{\n    my $self = shift;\n    my $q    = shift;\n    my $type = shift;\n\n    my $database = new PDBC(name=&gt;\"schemaName\");\n    if($database){\n        my $response = new Response(responseParams=&gt;$q,database=&gt;$database,type=&gt;$type);\n        if($response){\n            $self-&gt;code(0);\n            $self-&gt;msg(\"\");\n            return (0,\"\",\"\");\n        }else{\n            $self-&gt;code(Response::code);\n            $self-&gt;msg(Response::msg);\n        }\n    }else{\n        $self-&gt;code(PDBC::code);\n        $self-&gt;msg(PDBC::msg);\n        $loggermyLoggerP-&gt;error(\"database connection error - code=\".$self-&gt;code.\",msg=\".$self-&gt;msg);\n    }\n}\n\nsub recoverLost{\n    my $self = shift;\n    my $line = \"\";\n\n    for(my $i=0;$i&lt;10;$i++){\n        my $recordName = \"record\".$i;\n        my $temp = $self-&gt;requestParams-&gt;param($recordName);\n        if(defined($temp)){\n            addToDB($temp,\"recover\");\n        }else{\n            last;\n        }\n    }\n}\n\n$_init = sub {\n    my $self        = shift;\n    my $code        = 0;\n    my $msg         = \"\";\n    my $farsiMsg    = \"no error\";    \n    my $response;\n    my $requestId   = \"\";\n    $self-&gt;reqID(1);\n\n    my $functionName   = $self-&gt;requestParams-&gt;param('functionName');\n\n    if(defined $functionName){\n        if($functionName eq \"addToDB\"){\n            $self-&gt;addToDB($self-&gt;requestParams,\"indirect\");\n        }\n        elsif($functionName eq \"recoverLost\"){\n            $self-&gt;recoverLost();\n        }else{\n            $self-&gt;code(1019);\n            $self-&gt;msg(\"method undefined\");\n        }\n    }else{\n        $self-&gt;code(1019);\n        $self-&gt;msg(\"method undefined\");\n    }\n\n    if($self-&gt;code==0){     \n        return TRUE;\n    }else{\n        return FALSE;\n    }   \n\n};\n\n1;\n</code></pre>\n\n<p>This may have syntax errors, but it doesn't in my real code (this is a sample code I've edited the names and some other codes). It works except when hundreds of users send request at the same time it crashes.</p>\n"}, {"tags": ["javascript", "perl", "mojolicious", "mojo-useragent"], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 4, "last_activity_date": 1536688884, "creation_date": 1536688884, "answer_id": 52281717, "question_id": 52254228, "link": "https://stackoverflow.com/questions/52254228/mojouseragent-and-javascript/52281717#52281717", "title": "Mojo::UserAgent and JavaScript", "body": "<p>It's almost always possible but the actual question is the amount of work you'd do to accomplish it. Part of this particular answer is how you'd want to intercept requests. That's the easy part because you can wrap the <code>start</code> method (as <a href=\"https://metacpan.org/pod/Mojo::UserAgent::Role::Queued\" rel=\"nofollow noreferrer\">Mojo::UserAgent::Role::Queued</a> does).</p>\n\n<p>After you intercept the request, do whatever you like. Get the raw response and have Mojo parse it and build that part of the transaction. After that you re-enter the normal progression. </p>\n\n<p>For awhile people would recommend the headless browser <a href=\"http://phantomjs.org\" rel=\"nofollow noreferrer\">phantomjs</a> but it looks like that project has stalled. There's Joel Berger's <a href=\"https://metacpan.org/pod/Mojo::Phantom\" rel=\"nofollow noreferrer\">Mojo::Phantom</a> but that's not quite what you want.</p>\n\n<p>Lastly, remember that almost everyone would like this to exist but it doesn't. That's important information there. ;)</p>\n\n<p>If you still want to work on this, asking more narrowly-scoped questions along the way are likely to help more.</p>\n\n<p>Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 3946, "user_id": 65706, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6e0652a12b8a5b2577f91f0e192ea3f9?s=128&d=identicon&r=PG", "display_name": "Yordan Georgiev", "link": "https://stackoverflow.com/users/65706/yordan-georgiev"}, "is_accepted": false, "score": 0, "last_activity_date": 1575209585, "creation_date": 1575209585, "answer_id": 59126308, "question_id": 52254228, "link": "https://stackoverflow.com/questions/52254228/mojouseragent-and-javascript/59126308#59126308", "title": "Mojo::UserAgent and JavaScript", "body": "<p>Not exactly what you asked, but probably close enough could be achieved by:</p>\n\n<ul>\n<li>installing chrome-headless</li>\n<li>setting up nodejs + couple of modules </li>\n<li>getting the loaded and parsed with client side events outerHTML</li>\n<li>reading from perl code the outerHTML</li>\n</ul>\n\n<p>as follows:</p>\n\n<pre><code># just a perl oneliner, parsing the scrapped html and passing it to Mojo::DOM\nperl -MMojo::DOM -e '$s=`node scrap-html.js`; for my $e (Mojo::DOM-&gt;new($s)-&gt;find(\"html body a.scroll\")-&gt;each){ print $e-&gt;text}';\n</code></pre>\n\n<p>where the code for the scrap-html.js </p>\n\n<pre><code>  // file: scrap-html.js src: https://gist.github.com/magician11/a979906401591440bd6140bd14260578\n  const CDP = require('chrome-remote-interface');\n  const chromeLauncher = require('chrome-launcher');\n\n  (async function() {\n    const launchChrome = () =&gt;\n      chromeLauncher.launch({ chromeFlags: ['--disable-gpu', '--headless','--blink-settings=imagesEnabled=false'] });\n\n    const chrome = await launchChrome();\n    const protocol = await CDP({ port: chrome.port });\n    const timeout = ms =&gt; new Promise(resolve =&gt; setTimeout(resolve, ms));\n\n    // See API docs: https://chromedevtools.github.io/devtools-protocol/\n    const { Page, Runtime, DOM } = protocol;\n    await Promise.all([Page.enable(), Runtime.enable(), DOM.enable()]);\n\n    uri = 'https://qto.fi/qto/view/readme_doc'\n    Page.navigate({ url: uri });\n\n    // wait until the page says it's loaded...\n    Page.loadEventFired(async () =&gt; {\n      try {\n        await timeout(4000); // give the JS some time to load\n\n        // get the page source\n        const rootNode = await DOM.getDocument({ depth: -1 });\n        const pageSource = await DOM.getOuterHTML({\n          nodeId: rootNode.root.nodeId\n        });\n        protocol.close();\n        chrome.kill();\n        console.log ( pageSource.outerHTML)\n      } catch (err) {\n        console.log(err);\n      }\n    });\n  })();\n  //eof file: scrap-html.js\n</code></pre>\n\n<p>example for the whole setup on ubuntu:</p>\n\n<pre><code>  # start install chromium-headless\n  sudo apt-get update\n  sudo apt-get install -y software-properties-common\n  sudo apt-get install -y chromium-browser\n  sudo apt-get update\n\n  wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb\n  sudo dpkg -i google-chrome-stable_current_amd64.deb\n  apt --fix-broken install\n  # stop install chromium-headless\n  # start installing the nodejs + node modules\n  sudo apt install nodejs\n  sudo npm install -g chrome-remote-interface\n  sudo npm install -g chrome-launcher\n  export NODE_PATH=/usr/local/lib/node_modules\n  # stop installing the nodejs + modules\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 2, "answer_count": 2, "score": 8, "last_activity_date": 1575209905, "creation_date": 1536569664, "last_edit_date": 1575209905, "question_id": 52254228, "link": "https://stackoverflow.com/questions/52254228/mojouseragent-and-javascript", "title": "Mojo::UserAgent and JavaScript", "body": "<p>I wondering if something like the below could be possible to do with Mojo::UserAgent :</p>\n\n<p>let's say i have the below code :</p>\n\n<pre><code>my $ua  = Mojo::UserAgent-&gt;new;\nmy $res = $ua-&gt;get('mojolicious.org/perldoc')-&gt;result;\n</code></pre>\n\n<p>is it possible to intercept Mojo::UserAgent request and send it to other web client which know javascript where its result sent back as as Mojo::Transaction::HTTP  ($res above ),where the user can continue use Mojo::UserAgent interface results .</p>\n\n<p>i.e i want the following :</p>\n\n<p>Mojo::UserAgent-> HTTP request -> intercept the HTTP Request -> Send the HTTP Request to web client support javascript like  WWW::Chrome::Mechanize or FireFox::Marionette -> the JavaScript Web Client  do the request -> the returned result intercepted and changed to Mojo::Transaction::HTTP</p>\n\n<p>or </p>\n\n<p>Mojo::UserAgent -> non blocking HTTP request ->non blocking HTTP response -> send to embedded web browser like webkit -> get the result as Mojo::Transaction::HTTP</p>\n\n<p>Any ideas /examples how to let Mojo::UserAgent work with javascript?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1536538195, "post_id": 52249606, "comment_id": 91447359, "body": "You want the keys to be the elements of <code>@one</code> and the values the corresponding elements of <code>@two</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536540475, "post_id": 52249606, "comment_id": 91447663, "body": "To use your approach, you <i>could</i> iterate over the index (of equal-length arrays) and add hash elements one at a time: <code>for my $i (0..$#one) { $hash{$one[$i]} = $two[$i] }</code>.  But there are much better ways, like in @Shawn&#39;s answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1536540662, "post_id": 52249606, "comment_id": 91447693, "body": "Please <i>always</i> have <code>use warnings;</code> and <code>use strict;</code> at the beginning of programs."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 14, "last_activity_date": 1536538780, "creation_date": 1536538780, "answer_id": 52249651, "question_id": 52249606, "link": "https://stackoverflow.com/questions/52249606/how-can-i-map-two-arrays-into-one-perl-hash/52249651#52249651", "title": "How can I map two arrays into one Perl hash?", "body": "<p>Assuming the answer to my question in the comment is \"yes\", here's a couple of approaches.</p>\n\n<p>Given:</p>\n\n<pre><code>my @one = qw/A B C/;\nmy @two = qw/1 2 3/;\n</code></pre>\n\n<p>Using hash slices:</p>\n\n<pre><code>my %hash;\n@hash{@one} = @two;\n</code></pre>\n\n<p>Using the <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"noreferrer\">List::MoreUtils</a> module from CPAN:</p>\n\n<pre><code>use List::MoreUtils qw/zip/;\nmy %hash = zip @one, @two;\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 10339452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/625048a83aacd5650bfaac55f512c856?s=128&d=identicon&r=PG&f=1", "display_name": "Sayed Sabry", "link": "https://stackoverflow.com/users/10339452/sayed-sabry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 0, "accepted_answer_id": 52249651, "answer_count": 1, "score": 6, "last_activity_date": 1536540489, "creation_date": 1536538081, "last_edit_date": 1536540489, "question_id": 52249606, "link": "https://stackoverflow.com/questions/52249606/how-can-i-map-two-arrays-into-one-perl-hash", "title": "How can I map two arrays into one Perl hash?", "body": "<p>I am new to perl. I need to understand how can I map one array (as keys) to another (as values) to result in a hash using foreach loop:</p>\n\n<pre><code>@one = (\"A\", \"B\", \"C\");\n@two = (\"a\", \"b\", \"c\");\n</code></pre>\n\n<p>I wrote the following code but it does not work when I slice the hash??</p>\n\n<pre><code>%hash;\nforeach $i (one) {\n  print $i, \"=&gt;\" , $ii = shift @two, \"\\n\"\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "mojo-useragent"], "comments": [{"owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1536536328, "post_id": 52249194, "comment_id": 91447082, "body": "i revisted the qeustion"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 1, "last_activity_date": 1536540189, "creation_date": 1536540189, "answer_id": 52249748, "question_id": 52249194, "link": "https://stackoverflow.com/questions/52249194/mojouseragent-non-blocking-vs-blocking-performance/52249748#52249748", "title": "Mojo::UserAgent non-blocking vs blocking performance", "body": "<p>The first thing to check when things happened. I couldn't get the same delay. Remember to try each way several times to spot outliers where there's a network hiccup. Note that the second argument to the non-blocking sub is a transaction object, normally written as <code>$tx</code>, where the response object is normally written <code>res</code>:</p>\n\n<pre><code>use Mojo::Util qw(steady_time);\n\nsay \"Begin: \" . steady_time();\nEND { say \"End: \" . steady_time() }\n\nmy $ua = Mojo::UserAgent-&gt;new ();\n\nmy @ids = qw(id1 id2 id3);\n\nforeach (@ids) {\n    my $input = $_;\n    my $res = $ua-&gt;get(\n        $url =&gt;\n        sub {\n            my ($ua, $tx) = @_;\n            print \"Fetched\\n\";\n            }\n        );\n    }\n</code></pre>\n\n<p>One possibility is that keep-alive is holding an open connection. What happens if you turn that off?</p>\n\n<pre><code>    my $res = $ua-&gt;get(\n        $url =&gt;\n        { Connection =&gt; 'close' }\n        sub {\n            my ($ua, $tx) = @_;\n            print \"Fetched\\n\";\n            }\n        );\n</code></pre>\n\n<p>Here's a version that uses <a href=\"https://mojolicious.io/blog/2017/12/14/day-14-you-promised-to-call/\" rel=\"nofollow noreferrer\">promises</a>, which you'll want to get used to as more Mojo stuff moves to it:</p>\n\n<pre><code>use feature qw(signatures);\nno warnings qw(experimental::signatures);\n\nuse Mojo::Promise;\nuse Mojo::Util qw(steady_time);\nuse Mojo::UserAgent;\nmy $ua = Mojo::UserAgent-&gt;new;\n\nsay \"Begin: \" . steady_time();\nEND { say \"End: \" . steady_time() }\n\nmy @ids = qw(id1 id2 id3);\n\nmy @gets = map {\n    $ua-&gt;get_p( 'http://www.perl.com' )-&gt;then(\n        sub ( $tx ) { say \"Fetched: \" . steady_time() },\n        sub { print \"Error: @_\" }\n        );\n    } @ids;\n\nMojo::Promise-&gt;all( @gets )-&gt;wait;\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 52249748, "answer_count": 1, "score": 0, "last_activity_date": 1536540189, "creation_date": 1536533122, "last_edit_date": 1536537278, "question_id": 52249194, "link": "https://stackoverflow.com/questions/52249194/mojouseragent-non-blocking-vs-blocking-performance", "title": "Mojo::UserAgent non-blocking vs blocking performance", "body": "<p>I have the following code:</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new ();\n\nmy @ids = qw(id1 id2 id3);\n\nforeach (@ids) {    \n    my $input = $_;\n    my $res = $ua-&gt;get('http://my_site/rest/id/'.$input.'.json' =&gt; sub {\n        my ($ua, $res) = @_;\n        print \"$input =&gt;\" . $res-&gt;result-&gt;json('/net/id/desc'), \"\\n\";\n    });    \n}\n\nMojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;\n</code></pre>\n\n<p>Why when I run the above code (non-blocking) does it take about 6 seconds while when running the code as blocking, i.e. inside the loop something like:</p>\n\n<pre><code> my $res = $ua-&gt;get('http://my_site/rest/id/'.$input.'.json');\n print \"$input =&gt;\" . $res-&gt;result-&gt;json('/net/id/desc'), \"\\n\";\n</code></pre>\n\n<p>without the latest line it takes about 1 second?</p>\n\n<p>Why is the blocking code faster than the non-blocking code?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536511463, "post_id": 52246532, "comment_id": 91441289, "body": "use <code>$noparenthesis =~ s&#47;\\(.*$&#47;&#47;g</code> do you have any other words in parenthesis??"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536511859, "post_id": 52246532, "comment_id": 91441402, "body": "I suggest you look over the tutorial <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>, or a regex tutorial from a good book."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536512367, "post_id": 52246532, "comment_id": 91441524, "body": "Alright, I seemed so. It will be <i>much</i> easier to first read over a topic, in particular when it comes to regex.  It&#39;s a mini-language, and while you can start using it effectively with very little there is a structure and rules to it.  Not knowing those basics makes it <i>much</i> harder."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536525311, "post_id": 52246532, "comment_id": 91444830, "body": "@Onyambu: No: that&#39;s very misleading. All your pattern does is remove <i>everything</i> from the first opening parenthesis to the end of the string. That&#39;s not what was asked for."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536525501, "post_id": 52246532, "comment_id": 91444869, "body": "@Borodin it seems thats how Op\u2019s data was stuctured. Anyway there can be various things to look at. And i did address them in the comment section of the answer i provided"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536526005, "post_id": 52246532, "comment_id": 91445018, "body": "@Onyambu: <i>&quot;it seems thats how Op\u2019s data was stuctured&quot;</i> The OP&#39;s <i>only example</i> has a string at the end of the line that they want to remove. It&#39;s not appropriate to assume that they will <i>always</i> want to remove everything after the first opening parenthesis. Your &quot;answer&quot; should be a comment asking more about the expected format of the data."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536526227, "post_id": 52246532, "comment_id": 91445076, "body": "@Borodin Well my answer does include a regex that just delete just the last paranthesis after using a simple regex. I do have that option in the answer.. does that not satisfy you? Well, if at all my answer seems not to answer the question at hand, please go ahead and provide an answer too"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536512100, "post_id": 52246658, "comment_id": 91441471, "body": "Now this will not touch nested parens, what is probably OK for the purpose but it is good to mention.  Also, how about allowing spaces next to parens?"}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536512285, "post_id": 52246658, "comment_id": 91441511, "body": "@zim, if I were to complicate things, then I could use <code>(\\(([^()]*)(?:(?1)(?2))*\\))$</code> which will take  everything you want into consideration"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536512487, "post_id": 52246658, "comment_id": 91441556, "body": "Yeah, it gets messier ... i didn&#39;t mean to suggest complicating things, but only perhaps mentioning restrictions, special cases if any, etc.  I would add <code>\\s*</code> where suitable as that is a simple and realistic possiblity that can throw it off."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536512622, "post_id": 52246658, "comment_id": 91441588, "body": "@zdim gotcha. Will take that into consideration. I hope <code>(\\(([^()]*)(?:(?1)(?2))*\\))$</code> does solve everything though"}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536512687, "post_id": 52246658, "comment_id": 91441602, "body": "@zim but <code>\\s*</code> is part of <code>[^()]*</code> so why include it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536512779, "post_id": 52246658, "comment_id": 91441625, "body": "While it seems unneeded here, the question of nested delims is anything but simple -- really need be specified as a separate requirement (what to do if there is nesting). That may, or may not, also be suitable to (just) mention.  Such basic questions are hard to gauge right because of so many cases and contexts of all kinds.  I am not suggesting to expand!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536512847, "post_id": 52246658, "comment_id": 91441643, "body": "after the closing paren <code>\\)\\s*$</code>.  Then, do we want to leave trailing spaces?  Probably not, so <code>\\s*\\(</code> as well"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536525586, "post_id": 52246658, "comment_id": 91444895, "body": "@Onyambu: Please don&#39;t write half-answers and solicit edits in the comments. Any answer you write should be complete and demonstrably correct."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536525721, "post_id": 52246658, "comment_id": 91444938, "body": "@Onyambu: <i>&quot;read through the comments before you downvote&quot;</i> That is very rude, and I shouldn&#39;t have to read through comments. An answer should be <i>demonstrably correct</i> and <i>self-contained</i>. You&#39;re not posting on a chat forum here."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536525920, "post_id": 52246658, "comment_id": 91444995, "body": "@Borodin. Usually a simple regex is required depending on the structure of the data. Why complecate things when just a simple regex can work? According to Op\u2019s data structure, the provided solition will work.. and it is the most simplified solution. We only complecate things to take ito consideration all the conditions required."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536526146, "post_id": 52246658, "comment_id": 91445055, "body": "@Onyambu: <i>&quot;Usually a simple regex is required depending on the structure of the data&quot;</i> That doesn&#39;t really say anything. Sometimes a simple pattern will suffice, and other times it must be more complex. Since you have never seen the OP&#39;s real data you have no idea what is appropriate. It&#39;s very likely that <i>&quot;all the conditions required&quot;</i> aren&#39;t part of the question."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536526289, "post_id": 52246658, "comment_id": 91445091, "body": "@Borodin in that case OP woukd not have accepted the answer before even i edited it"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536526432, "post_id": 52246658, "comment_id": 91445117, "body": "@Onyambu: &quot;Lucking out&quot; isn&#39;t a responsible software development tactic."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536530576, "post_id": 52246658, "comment_id": 91446037, "body": "Edited, and added a comment about nested parens; please test such a case, for instance with:  <code>word (with (nested) parens)</code>.  If you don&#39;t like it please by all means roll it back :)"}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536530675, "post_id": 52246658, "comment_id": 91446056, "body": "@zdim <code>(\\(([^()]*)(?:(?1)(?2))*\\))\\s*$</code> can be used to delete the last parenthesis whether nested or not"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536531050, "post_id": 52246658, "comment_id": 91446133, "body": "How about more levels of nesting? Then, once you reach for a module to deal with the serious problem of nested delims -- do we want to blow away all of it, or just the outer ones -- or just the inner ones? But, do we want to touch that in the first place?  That&#39;s why I said that there should be a requirement specifying this.  In this case, it seems that the OP has in their data a parenthetical remark of some sort and a simple solution is likely suitable. Still, nested parens could just happen with any such data so I suggested leaving a note on it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536531278, "post_id": 52246658, "comment_id": 91446183, "body": "@Onyambu: I agree with <b>zdim</b> (please stop calling him &quot;zim&quot;): there is no way of writing an answer until you know the full requirements. All of this should have been established in comments on the question, but you chose to escalate it by publishing your guess as an <i>answer</i>, which it doesn&#39;t deserve."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536532115, "post_id": 52246658, "comment_id": 91446345, "body": "Let&#39;s elaborate our guessing game a little more.  Imagine the OP comes along and says &quot;<i>well, a pair of parens at the end goes, no matter what&#39;s inside</i>&quot;.  OK, so ... <code>\\(.*\\)\\s*$</code> ? ... well, <b>no</b> -- that would match from the <i>first</i> <code>(</code> in the string since <code>.*</code> is greedy. It may also backtrack a lot.  It&#39;s actually not so simple.  I think that it&#39;s &quot;OK&quot; (to an extent) to pick a simple and perhaps obvious case in a question like this, but then we should absolutely also state kinds of things that are unaccounted for.  That was my point.  This isn&#39;t critique, just talking :)"}], "tags": [], "owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "is_accepted": true, "score": 3, "last_activity_date": 1536531153, "last_edit_date": 1536531153, "creation_date": 1536511674, "answer_id": 52246658, "question_id": 52246532, "link": "https://stackoverflow.com/questions/52246532/apply-perl-regexp-to-remove-parenthesis-and-text-at-end-of-string/52246658#52246658", "title": "Apply Perl RegExp to Remove Parenthesis and Text at End of String", "body": "<pre><code>#! /usr/bin/perl\nuse v5.10.0;\nuse warnings;\n\nmy $noparenthesis = \"Potatoes Rice (Meat)\";\n$noparenthesis =~ s/\\(.*$//g;\nsay $noparenthesis;\n</code></pre>\n\n<p>If there are other words in parenthesis that you would like to keep since they are not in the end of the sentence then you can use the expression:</p>\n\n<pre><code> $noparenthesis =~ s/\\s*\\([^()]+\\)\\s*$//g;\n</code></pre>\n\n<p>This will only delete the parenthesis at the end of the string, and possible trailing spaces, as well as spaces preceding them (so no trailing spaces stay in the string). Since <code>(</code> and <code>)</code> characters are disallowed inside the matched parentheses, by the negated character class, this won't match nested parentheses, should the string have that.</p>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 52246658, "answer_count": 1, "score": 0, "last_activity_date": 1536531153, "creation_date": 1536510788, "question_id": 52246532, "link": "https://stackoverflow.com/questions/52246532/apply-perl-regexp-to-remove-parenthesis-and-text-at-end-of-string", "title": "Apply Perl RegExp to Remove Parenthesis and Text at End of String", "body": "<p>I have a string which includes parenthesis with text inside the parenthesis.  How do I remove the parenthesis with text at the end of the string while keeping the other words in string?</p>\n\n<p>Input:</p>\n\n<pre><code>   Potatoes Rice (Meat)\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>   Potatoes Rice\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#! /usr/bin/perl\nuse v5.10.0;\nuse warnings;\n\nmy $noparenthesis = \"Potatoes Rice (Meat)\";\n$noparenthesis =~ s/^/$1/gi;\nsay $noparenthesis;\n</code></pre>\n"}, {"tags": ["perl", "anyevent"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536512965, "post_id": 52246371, "comment_id": 91441667, "body": "Um, explain that better please -- do you mean to catch events of file change and read what&#39;s been done to it? Or something else? And please show the (relevant parts of the) &quot;program.&quot;"}, {"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536522316, "post_id": 52246371, "comment_id": 91443994, "body": "there is a text file (accept.txt) on the file system, at start perl script reads the lines from it and continues working. Sometimes new lines can be added to the file. Once these lines are added they must be read in the program."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1536530413, "post_id": 52246371, "comment_id": 91446003, "body": "@Dmitriy You could try <a href=\"https://metacpan.org/pod/AnyEvent::Inotify::Simple\" rel=\"nofollow noreferrer\"><code>AnyEvent::Inotify::Simple</code></a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536530777, "post_id": 52246371, "comment_id": 91446084, "body": "OK, that would be a job for <code>Linux::Inotify2</code> to detect the change; see <a href=\"https://stackoverflow.com/a/41206434/4653379\">this post</a> for example.  I may or may not be able to post an answer within a reasonable time frame.  You really should post the relevant parts of your code."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536819837, "post_id": 52249632, "comment_id": 91562634, "body": "@Dmitriy Edited further, with a comment on the possible context of monitoring"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1539909577, "last_edit_date": 1539909577, "creation_date": 1536538520, "answer_id": 52249632, "question_id": 52246371, "link": "https://stackoverflow.com/questions/52246371/monitoring-and-reading-new-lines-in-a-file/52249632#52249632", "title": "Monitoring and reading new lines in a file?", "body": "<p>One way is to \"watch\" the file with a tool that tracks and reports events on filesystem objects.</p>\n\n<p>An example using <a href=\"https://metacpan.org/pod/release/MLEHMANN/Linux-Inotify2-1.22/Inotify2.pm\" rel=\"nofollow noreferrer\">Linux::Inotify2</a>, based on the synopsis in module's documentation</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse AnyEvent;\nuse Linux::Inotify2;\n\nmy $file = shift @ARGV || 'growing.txt';\ndie \"Usage: $0 file-to-watch\\n\" if not $file;\n\nsay '';\nopen my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\nprint while &lt;$fh&gt;;\n\nmy $inotify = Linux::Inotify2-&gt;new or die \"Can't create inotify object: $!\";\n\n$inotify-&gt;watch( $file, IN_MODIFY, sub {\n    my $e = shift;\n    if ($e-&gt;IN_MODIFY) {\n        print while &lt;$fh&gt;;\n    }\n});\n\nmy $inotify_w = AnyEvent-&gt;io (\n    fh =&gt; $inotify-&gt;fileno, poll =&gt; 'r', cb =&gt; sub { $inotify-&gt;poll }\n);\n\n1 while $inotify-&gt;poll;\n</code></pre>\n\n<p>The monitor can be used with many major event handling tools. This example uses <a href=\"https://metacpan.org/pod/AnyEvent\" rel=\"nofollow noreferrer\">AnyEvent</a>.</p>\n\n<p>First create the file <code>growing.txt</code>, presumably with some content. Then start the program and put it in the background (<code>watcher.pl &amp;</code>), when its lines are printed. Then add to the file</p>\n\n<pre><code>echo \"new line\\nanother\" &gt;&gt; growing.txt\n</code></pre>\n\n<p>and the watcher prints</p>\n\n<pre>\nnew line\nanother\n</pre>\n\n<p>Please see <a href=\"https://stackoverflow.com/a/41206434/4653379\">this post</a> for a little more and some general comments, and study the module's docs and <code>man inotify</code> on your system.</p>\n\n<p>To do this along with other things you can put it in a forked process and send changes to the parent as they come (via <code>pipe</code>, <code>socketpair</code>, or files). Any events that happen during the processing are still detected, and delivered as new events once the control returns.</p>\n\n<p>The parent can deal with the question of <em>when</em> to read by doing its other work in a loop with a non-blocking <code>IO::Select::can_read</code>, or with a signal handler for a user signal (<code>SIGUSR1</code>) which the child sends after writing to its pipe end.</p>\n\n<p>This is an outline of something that isn't quite simple.  There are also ready solutions. Some options from the <code>AnyEvent</code> ecosystem are <a href=\"https://metacpan.org/pod/AnyEvent::Fork\" rel=\"nofollow noreferrer\">AnyEvent::Fork</a> and friends, <a href=\"https://metacpan.org/pod/AnyEvent::Subprocess\" rel=\"nofollow noreferrer\">AnyEvent::Subprocess</a> with its \"delegates\" mechanism, <a href=\"https://metacpan.org/pod/AnyEvent::Handle\" rel=\"nofollow noreferrer\">AnyEvent::Handle</a> to watch that pipe for when it can be read.</p>\n\n<p>All these require an event loop as well, in which case all work is done in handlers (callbacks). Then the main work can be done in an \"idle watcher,\" for instance, but this may turn out a bit convoluted and in this particular case the outlined manual approach for the child management may end up being clearer. </p>\n\n<p>The most suitable management of the monitor depends on the details of your program.</p>\n\n<hr>\n\n<p>If the file is changed in a way that changes the inode, the code above won't be able to detect that. This can happen with many common tools, like <code>zip</code>, <code>rsync</code>, etc. To secure against that, along with possible file disappearance, you can use other flags so to detect those events.</p>\n\n<pre><code>$inotify-&gt;watch( $file, \n    IN_MODIFY |IN_ATTRIB | IN_MOVE_SELF | IN_DELETE_SELF,  \n    sub {\n        my $e = shift;\n        my $name = $e-&gt;fullname;\n        if ($e-&gt;IN_MODIFY) {\n            print while &lt;$fh&gt;;\n        }\n        if ($e-&gt;IN_ATTRIB)      { say \"$name meatadata changed\" }\n        if ($e-&gt;IN_MOVE_SELF)   { say \"$name was moved\" }\n        if ($e-&gt;IN_DELETE_SELF) { say \"$name was deleted\" }\n});\n</code></pre>\n\n<p>For the inode change it is <code>IN_ATTRIB</code> that is fired.</p>\n\n<p>Then you may need to re-open the file (and perhaps first find it). A separate directory monitor would be very helpful here. All this can also be done by using a directory monitor alone.</p>\n"}], "owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 52249632, "answer_count": 1, "score": 2, "last_activity_date": 1539909577, "creation_date": 1536509680, "question_id": 52246371, "link": "https://stackoverflow.com/questions/52246371/monitoring-and-reading-new-lines-in-a-file", "title": "Monitoring and reading new lines in a file?", "body": "<p>The program uses the AnyEvent event loop. The program should read new lines that sometimes (rarely) appear in a text file on the local file system. As I understood, AnyEvent::io can not be used. What can I advise to read new lines from a file?</p>\n"}, {"tags": ["perl", "mojolicious", "mojo-useragent"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1536539586, "post_id": 52243719, "comment_id": 91447547, "body": "Or simply <code>for my $id (@ids) { ...</code>, then you don&#39;t need to copy <code>$_</code> around."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 5, "last_activity_date": 1536490370, "last_edit_date": 1536490370, "creation_date": 1536490063, "answer_id": 52243719, "question_id": 52243566, "link": "https://stackoverflow.com/questions/52243566/use-of-uninitialized-value-warning-with-a-mojouseragent-non-blocking-requ/52243719#52243719", "title": "&quot;Use of uninitialized value $_&quot; warning with a Mojo::UserAgent non-blocking request", "body": "<p><code>$_</code> is a special kind of variable where the value depends on the context. Inside the <code>foreach (@ip)</code> context it is set as an alias of specific item in the <code>@ip</code> array. But, the callback for <code>$ua-&gt;get(...)</code> gets not executed within the <code>foreach (@ip)</code> context and thus <code>$_</code> no longer is an alias into the <code>@ip</code> array.</p>\n\n<p>Instead of using this special variable you need to use a normal variable scoped inside the <code>foreach (@ip)</code> loop, so that it can be bound to the subroutine (see also <a href=\"https://perldoc.perl.org/perlfaq7.html#What&#39;s-a-closure%253f\" rel=\"noreferrer\">What's a closure</a> in perlfaq7):</p>\n\n<pre><code>foreach (@ip) {\n   my $THIS_IS_A_NORMAL_VARIABLE = $_;\n   my $res= $ua-&gt;get( ...  =&gt; sub {\n      my ($ua, $res) = @_;\n      print  \"$THIS_IS_A_NORMAL_VARIABLE =&gt;\" . $res-&gt;result-&gt;json('/net/id/desc'),\"\\n\";\n   });\n}\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 52243719, "answer_count": 1, "score": 0, "last_activity_date": 1536564184, "creation_date": 1536488824, "last_edit_date": 1536564184, "question_id": 52243566, "link": "https://stackoverflow.com/questions/52243566/use-of-uninitialized-value-warning-with-a-mojouseragent-non-blocking-requ", "title": "&quot;Use of uninitialized value $_&quot; warning with a Mojo::UserAgent non-blocking request", "body": "<p>I am trying to make a non-blocking request with\n<a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\"><code>Mojo::UserAgent</code></a>\nbut when I run the code below I get</p>\n\n<blockquote>\n  <p>Use of uninitialized value $_ in concatenation (.) or string </p>\n</blockquote>\n\n<p>on the <code>print</code> line.</p>\n\n<p>How can I access <code>$_</code> inside the callback?</p>\n\n<pre><code>my $ua = Mojo::UserAgent-&gt;new();\n\nmy @ids = qw( id1  id2 id3 );\n\nforeach ( @ids ) {\n\n    my $res = $ua-&gt;get('http://my_site/rest/id/'.$_.'.json' =&gt; sub {\n        my ($ua, $res) = @_;\n        print \"$_ =&gt; \" . $res-&gt;result-&gt;json('/net/id/desc'), \"\\n\";\n    });\n}\n\nMojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;\n</code></pre>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1536482902, "post_id": 52242799, "comment_id": 91433963, "body": "Hello, please always try to show us the code you&#39;ve tried. We can help you make it work or suggest different solutions. Questions with no research effort are generally frowned upon here. Also, take a look at: <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1536482955, "post_id": 52242799, "comment_id": 91433975, "body": "Please add your desired output for that sample input to your question."}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536484559, "post_id": 52242799, "comment_id": 91434348, "body": "I have added the expected output and tried code, thank you guys!"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536484906, "post_id": 52242799, "comment_id": 91434432, "body": "Yeah I was able to do that, but record starting and ending are still having double quotes. If you notice closely, that column value have a string in a separate line with double quotes. So if I change the double quotes value of start and end of the record, that string also changing. that is my problem"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536489011, "post_id": 52242799, "comment_id": 91435484, "body": "Your input format is ambiguous. How do you know where a record ends?"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536491496, "post_id": 52242799, "comment_id": 91436158, "body": "I dont know the end of records in my file, thats the tricky part!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536495006, "post_id": 52242799, "comment_id": 91437087, "body": "That&#39;s not &quot;tricky&quot;, that&#39;s just unsolvable."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1536500436, "post_id": 52242799, "comment_id": 91438405, "body": "1. do you know how many fields per record you have? 2. can you fix the process that creates the output to generate well-formed CSV (i.e. properly escape the interior quotes)?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536502458, "post_id": 52242799, "comment_id": 91438926, "body": "Do your lines end with <code>\\r\\n</code> and the mid-field &quot;newlines&quot; are actually just <code>\\n</code>s alone, as would be output by Windows tools like Excel? Do <code>cat -v</code> on your file and look for <code>^M</code>s to represent <code>\\r</code>s if you aren&#39;t sure. When you have a file containing multiple records, only providing 1 record for sample input is of limited use - provide at least 2 records and show/tell us what characters separate the records."}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536646329, "post_id": 52242799, "comment_id": 91486628, "body": "@melpomene you are absolutely correct, it is unsolvable. I tried to find a solution for this issue over the last one completed week and ended up with nothing."}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1536646407, "post_id": 52242799, "comment_id": 91486656, "body": "@glennjackman Yeah we know how many records will be there in the file, but still we cant process it based on that record count as column size varies depending upon the user input."}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536646528, "post_id": 52242799, "comment_id": 91486703, "body": "@EdMorton No, lines are not ending with \\r\\n, it is just ending with /n. Actual file is not generated out of windows tools,  using a simple java code to export the data."}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536646690, "post_id": 52242799, "comment_id": 91486771, "body": "As I was not able to find the solution for this issue, I am left with no option other than changing the qualifier. So I have requested my client changed it to a non-keyboard special character (like delta). In this case, I am able to escape the double qoutes using simple sed command and load the data to Data Warehouse. Thanks everyone!"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1536664359, "post_id": 52242799, "comment_id": 91496419, "body": "What you should be asking is for the client to send you well-formed CSV. They need to properly escape the quotes so you can parse the file. It doesn&#39;t matter what the quoting character is, it needs to be properly escaped"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536486108, "post_id": 52243161, "comment_id": 91434733, "body": "As I mentioned before, double quotes in the column value(line 2 in the data) is also changing when I tried with this perl script"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536486515, "post_id": 52243161, "comment_id": 91434836, "body": "Sorry I cannot see what you are referring to. Can you be more specific, what double quote exactly is the problem?"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536486750, "post_id": 52243161, "comment_id": 91434886, "body": "|&quot;...&quot;Live Your Dreams&quot;...&quot;| is string present in the column 4, when we run data through the perl script.  The above string is converted like this |~...~Live Your Dreams~...~| thats a problem"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536486997, "post_id": 52243161, "comment_id": 91434969, "body": "Ok, so this is for the new data.. Is there supposed to be two lines of data or one line. From your question, there seems to be a new line starting after <code>&quot;Live Your Dreams&quot;</code>? I can think of a reason you got the problem is that you split what should be one line, into three parts? I suggest you reduce the length of the lines in your question, so it will be easier to avoid this type of problems"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536487707, "post_id": 52243161, "comment_id": 91435157, "body": "Actually consider that column as comments or reviews from User. so single column value will extend to multiple lines just like the sample record which I showed. this is where I am facing the issue. Unfortunately, I can not change the data, so I have to process this way. Any advice on this?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536488182, "post_id": 52243161, "comment_id": 91435265, "body": "Ok, so if there is only a single column it should not be changed? So we just leave it alone, but if there is more than one column on a line we do the substitutions?"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536488667, "post_id": 52243161, "comment_id": 91435394, "body": "Let say we have a single column with multi-line records with double quotes jute like the show sample record, I am not suppose to change the data in anyway. In this scenario, what you would suggest? Could you clarify on the substitution part?"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536488769, "post_id": 52243161, "comment_id": 91435411, "body": "Problem here is that, if double quotes inside the values are changed to the qualifier ~ symbol, as you already know, I would face issue in ETL processing like loading or any kind of processing."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536488971, "post_id": 52243161, "comment_id": 91435469, "body": "Just to clarify, can a column contain a newline character? I think this might be the part where I am confused :)"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536489753, "post_id": 52243161, "comment_id": 91435692, "body": "Yes Hakon, it can contain newline character"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536490235, "post_id": 52243161, "comment_id": 91435837, "body": "Ok, then I missed that part. I will have to propose a new solution to you.. First, how do you then know the end of a line? That is, how many columns will there be on a line. Is it predetermined or do you check for something special, like a <code>&quot;</code> followed by a new line character?"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536490959, "post_id": 52243161, "comment_id": 91436018, "body": "Answer is we can&#39;t judge the end of line. For each line, columns count may vary depending on the column value size. For one file, columns are fixed But still it may vary from file to file. We can not check for &quot; followed by the new line character, because in one column we have multi-line records with double quotes and newline characters."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536491038, "post_id": 52243161, "comment_id": 91436041, "body": "@Prabhu Then your problem has no solution. You simply don&#39;t know where each record ends or where your column boundaries are within a record."}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536491702, "post_id": 52243161, "comment_id": 91436206, "body": "@H&#229;konH&#230;gland Perl script which you provided second seems working, let me check with different files and confirm in an hour! Many thanks for your support!"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536494396, "post_id": 52243161, "comment_id": 91436883, "body": "@H&#229;konH&#230;gland I am still confused with how you skipped the double quotes within the values, could you please explain the second perl statement?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1536494841, "post_id": 52243161, "comment_id": 91437015, "body": "For the second Perl statement (actually it is better to call it a command which consists of some statements), I just check the number of fields <code>if (@F == 1)</code>. If the number of fields equal to one, we do no substitutions. Instead we simply print the line as we read it.. If you need more explanation, please let me know"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536494926, "post_id": 52243161, "comment_id": 91437054, "body": "@melpomene My requirement was like that and files are auto generated, so I don&#39;t have an option except to find the solution.  To clarify on your statement,  you are correct I don&#39;t know the column boundaries within the column or ending of the record in terms of file processing. If file processing is not possible, then I have to think In terms of data, as number of columns are fixed, I believe I could with Text:CSV_XS processing in perl!"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536495129, "post_id": 52243161, "comment_id": 91437124, "body": "@H&#229;konH&#230;gland Thank you for the explanation, I got it. But if we have more than one multi-line column values with double quotes, then this solution will not work, Kindly correct me if I am wrong!"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536495866, "post_id": 52243161, "comment_id": 91437342, "body": "@H&#229;konH&#230;gland Thank you for your support, I will mark this answer as correct after confirming with multiple data loads. Thanks again!"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536646075, "post_id": 52243161, "comment_id": 91486524, "body": "@H&#229;konH&#230;gland as you said it is not working if double quoted values are present in more than one column, thanks for you help!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": -1, "last_activity_date": 1536488507, "last_edit_date": 1536488507, "creation_date": 1536485524, "answer_id": 52243161, "question_id": 52242799, "link": "https://stackoverflow.com/questions/52242799/replacing-a-double-quotes-qualifier-of-data-using-sed-or-awk-or-perl/52243161#52243161", "title": "Replacing a double quotes qualifier of data using sed or awk or perl", "body": "<p>In Perl you can try this one liner:</p>\n\n<pre><code>perl -anF'\\|' -E 'for (@F) {s/^\"/~/;s/\"$/~/} print join \"|\", @F' file.txt\n</code></pre>\n\n<p>This will split each line on <code>|</code> then substitute a <code>\"</code> at the beginning or end of each field with a <code>~</code>.</p>\n\n<p>According to new information in the comments: If you want to leave lines with a single column (field) unchanged:</p>\n\n<pre><code>perl -anF'\\|' -E 'if (@F == 1) {print; next} for (@F) {s/^\"/~/;s/\"$/~/} print join \"|\", @F' file.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536567206, "post_id": 52245060, "comment_id": 91454572, "body": "I have tried this approach of escaping the double quotes inside the column value, it is not working for all scenarios. Consider the double quotes string present at the end of column, in such case, while escaping the string&#39;s double quotes, I am facing issue with double quotes not detecting as it is present just before the qualifier."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536585350, "post_id": 52245060, "comment_id": 91464614, "body": "Did you end up with 3 double quotes before the pipe?"}, {"owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536646197, "post_id": 52245060, "comment_id": 91486572, "body": "No whenever it encounters the double quotes at the end of the column value, script is considering that already escapes (|&quot;BookStore processing &quot;Validation &quot;&quot;|) as it is present along with qualifier"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "edited": false, "score": 0, "creation_date": 1536664562, "post_id": 52245060, "comment_id": 91496559, "body": "To be parsed as CSV, you <b>must</b> be given <code>|&quot;BookStore processing &quot;&quot;validation&quot;&quot;&quot;|</code>"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1536500292, "creation_date": 1536500292, "answer_id": 52245060, "question_id": 52242799, "link": "https://stackoverflow.com/questions/52242799/replacing-a-double-quotes-qualifier-of-data-using-sed-or-awk-or-perl/52245060#52245060", "title": "Replacing a double quotes qualifier of data using sed or awk or perl", "body": "<p>What you actually have is mal-formed CSV data, where the separator char is <code>|</code>.</p>\n\n<p>It is malformed because the \"interior\" quotes are not escaped: In a CSV field that contains quotes, the quotes should be duplicated, like this</p>\n\n<pre><code>1,2,\"field,with,commas\",\"this field \"\"contains quotes\"\" that are duplicated\"\n# ..................................^^...............^^\n</code></pre>\n\n<p>If it possible to fix your input data to look like this:</p>\n\n<pre><code>\"Live Your Dreams: Be You\"|\"20 Feb 2018\"|\"2 formats and editions\"|\"Are you being swept away by life being busy? Are things seemingly out of your control? Do you want to calm the chaos in your life? Are you ready to transform your life? In \n\"\"Live Your Dreams\"\"\nnow AMAZON BESTSELLER, readers are shown how to take immediate control of their mental, emotional, physical and entrepreneurial destiny.\"|\"All this and more as you immerse yourself in the story that opens up like scenes from \"\"a Bollywood movie\"\"\"|\"Indian Edition\"\n</code></pre>\n\n<p>where the interior quotes on lines 2 and 3 are properly escaped, then you can use a CSV parser to transform the output quotations. Perl's csv parser can handle fields containing newlines:</p>\n\n<pre><code>perl -MText::CSV -e '\n    open my $fh, \"&lt;:encoding(UTF-8)\", shift(@ARGV);\n    my $csv_in = Text::CSV-&gt;new({ quote_char =&gt; \"\\\"\", sep_char =&gt; \"|\", binary =&gt; 1 });\n    my $csv_out = Text::CSV-&gt;new({ quote_char =&gt; \"~\", escape_char =&gt; \"~\", sep =&gt; \"|\", binary =&gt; 1 });\n    while (my $row = $csv_in-&gt;getline($fh)) {\n        $csv_out-&gt;say(STDOUT, $row);\n    }\n    $csv_in-&gt;eof or $csv_in-&gt;error_diag();\n' file.csv\n</code></pre>\n\n\n\n<pre><code>~Live Your Dreams: Be You~|~20 Feb 2018~|~2 formats and editions~|~Are you being swept away by life being busy? Are things seemingly out of your control? Do you want to calm the chaos in your life? Are you ready to transform your life? In \n\"Live Your Dreams\"\nnow AMAZON BESTSELLER, readers are shown how to take immediate control of their mental, emotional, physical and entrepreneurial destiny.~|~All this and more as you immerse yourself in the story that opens up like scenes from \"a Bollywood movie\"~|~Indian Edition~\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10300521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bV54sjRdI0c/AAAAAAAAAAI/AAAAAAAAFtw/UpHTd-FSNf4/photo.jpg?sz=128", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/10300521/prabhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1536500292, "creation_date": 1536482498, "last_edit_date": 1536485922, "question_id": 52242799, "link": "https://stackoverflow.com/questions/52242799/replacing-a-double-quotes-qualifier-of-data-using-sed-or-awk-or-perl", "title": "Replacing a double quotes qualifier of data using sed or awk or perl", "body": "<p>I have txt file with <code>|</code> delimiter and <code>\"</code> qualifier. I would like to change the qualifier to <code>~</code> symbol, problem which I have is actual column value text have double quotes. </p>\n\n<p>I need to change the qualifier without removing the double quotes within the column values. I have provided the sample one record:</p>\n\n<pre><code>\"Live Your Dreams: Be You\"|\"20 Feb 2018\"|\"2 formats and editions\"|\"Are you being swept away by life being busy? Are things seemingly out of your control? Do you want to calm the chaos in your life? Are you ready to transform your life? In \n\"Live Your Dreams\"\nnow AMAZON BESTSELLER, readers are shown how to take immediate control of their mental, emotional, physical and entrepreneurial destiny.\"|\"All this and more as you immerse yourself in the story that opens up like scenes from \"a Bollywood movie\"\"|\"Indian Edition\"\n</code></pre>\n\n<p>I have already tried with <code>sed</code> and <code>awk</code> by referring the content in stack overflow and unix.com, but double quotes inside the column is creating issues.</p>\n\n<p>Desired Output:</p>\n\n<pre><code>~Live Your Dreams: Be You~|~20 Feb 2018~|~2 formats and editions~|~Are you being swept away by life being busy? Are things seemingly out of your control? Do you want to calm the chaos in your life? Are you ready to transform your life? In \n\"Live Your Dreams\"\nnow AMAZON BESTSELLER, readers are shown how to take immediate control of their mental, emotional, physical and entrepreneurial destiny.~|~All this and more as you immerse yourself in the story that opens up like scenes from \"a Bollywood movie\"~|~Indian Edition~\n</code></pre>\n\n<p>Code Tried:\nsed 's_\"([^*])\"_~\\1~_g' data.txt > tdata.txt</p>\n\n<p>Results as per the above sed:</p>\n\n<pre><code>\"Live Your Dreams: Be You~|~20 Feb 2018~|~2 formats and editions~|~Are you being swept away by life being busy? Are things seemingly out of your control? Do you want to calm the chaos in your life? Are you ready to transform your life? In \n\"Live Your Dreams\"\nnow AMAZON BESTSELLER, readers are shown how to take immediate control of their mental, emotional, physical and entrepreneurial destiny.~|~All this and more as you immerse yourself in the story that opens up like scenes from \"a Bollywood movie\"~|~Indian Edition~\n</code></pre>\n\n<p>Any help with <code>awk</code> or <code>sed</code> or <code>Perl</code> script would be very much appreciated.</p>\n\n<p>Thanks in advance,\nPrabhu</p>\n"}, {"tags": ["perl", "selenium", "firefox", "jquery-ui-autocomplete"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1536506915, "post_id": 52242695, "comment_id": 91440040, "body": "<i>&quot;How can i turn on the warnings instead of killing the script?&quot;</i>: you encapsulate the statement in an <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval</code></a> block.."}, {"owner": {"reputation": 21, "user_id": 3473966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc1b53718dde9b56c36cb8816ba5daf5?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten", "link": "https://stackoverflow.com/users/3473966/karsten"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1536658276, "post_id": 52242695, "comment_id": 91492861, "body": "Thanks for the Tip! But i think in the description something other should be done: &quot;If you wish for a warning instead, use the parameterized version of the finders&quot; It&#39; really good that the parameter are not explained ..."}], "owner": {"reputation": 21, "user_id": 3473966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc1b53718dde9b56c36cb8816ba5daf5?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten", "link": "https://stackoverflow.com/users/3473966/karsten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536658378, "creation_date": 1536481730, "last_edit_date": 1536658378, "question_id": 52242695, "link": "https://stackoverflow.com/questions/52242695/how-to-get-autocomplete-result-with-seleniumremotedriver", "title": "How to get autocomplete result with Selenium::Remote::Driver", "body": "<p>i want to write a little script to grab and play around with the results of the autocomplete of an input field.<br>\nSo I find a principal solution with Selenium::Firefox, that base on module <a href=\"https://metacpan.org/pod/Selenium::Remote::Driver\" rel=\"nofollow noreferrer\">Selenium::Remote::Driver</a>, but the description of the methods is without any examples.</p>\n\n<p>I have this basic example, that is able to open google and insert a search string.\nThen you can see that a result list is suggested and i want to get this list.\nBut i have no idea how this can be obtained?</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Selenium::Firefox;\n\nmy $mech = Selenium::Firefox-&gt;new( \n    startup_timeout =&gt; 20,\n    firefox_binary =&gt; '/srv/bin/firefox.62.0/firefox',\n    binary =&gt; '/usr/local/bin/geckodriver',\n    marionette_enabled =&gt; 1\n);\n\nmy $search = \"perl\";\nmy $url = \"https://www.google.com/\";\n\n$mech-&gt;get($url);\n\n$mech-&gt;find_element_by_name(\"q\");\n\nsleep(3);\nmy $result = $mech-&gt;get_active_element();\n$result-&gt;send_keys($search);\n\nsleep (10);\n\n$mech-&gt;shutdown_binary;\nexit 0;\n</code></pre>\n\n<p>I could find no examples to use this Perl module - and there are more questions for it.<br>\nAs for instance: <a href=\"https://metacpan.org/pod/Selenium::Remote::Driver#find_element\" rel=\"nofollow noreferrer\">find_element</a> \nHow can i turn on the warnings instead of killing the script?<br>\nOr how can i step through the objects of the wep page?<br>\nIs it possible to connect to an already opened browser?</p>\n\n<p>The description of the module is not understandable for people who are not experts and the authors did not answer to questions so far.<br>\nBut my hope is that experts here can give me a hint?</p>\n"}, {"tags": ["perl", "loops", "foreach", "syntax", "iterator"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536481572, "post_id": 52242644, "comment_id": 91433662, "body": "<code>each</code> isn&#39;t even a loop."}, {"owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536490309, "post_id": 52242644, "comment_id": 91435858, "body": "@melpomene Good point, I&#39;ve updated the post to put <code>each</code> on the same footing as <code>splice</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536490370, "post_id": 52242644, "comment_id": 91435880, "body": "<code>for each %h</code> already does something else: <code>each</code> returns a two-element list (key, value) and <code>for</code> iterates over it."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1536509112, "post_id": 52242644, "comment_id": 91440662, "body": "By &quot;statement modifier&quot;, do you mean a <code>do_something(...)</code> function that modifies the values of <code>$_[0]</code> and <code>$_[1]</code>?"}, {"owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1536535228, "post_id": 52242644, "comment_id": 91446901, "body": "@mob: By &quot;statement modifier&quot; I mean the Perl syntax described here: <a href=\"http://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsyn.html#Statement-Modifiers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1536492580, "post_id": 52243820, "comment_id": 91436420, "body": "Ah, List::Util, I should&#39;ve known :) I also came up with the following that works too: <code>do_something($_-&gt;[0], $_-&gt;[1]) for map { CORE::state @bob; push @bob, $_; @bob % 2 ? () : do {my @tmp = @bob; @bob = (); \\@tmp} } %h</code> (Maybe List::Utils::pairs does something similar behind the scenes?) I just want to see what others come up with so I&#39;ll leave it open another day. Otherwise your answer seems acceptable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 1, "creation_date": 1536521167, "post_id": 52243820, "comment_id": 91443677, "body": "@textral, <code>do {my @tmp = @bob; @bob = (); \\@tmp}</code> is a long way of writing <code>[splice(@bob)]</code>. And your solution fails hard (i.e. poorly) if an odd number of arguments is provided."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 2, "last_activity_date": 1536490820, "creation_date": 1536490820, "answer_id": 52243820, "question_id": 52242644, "link": "https://stackoverflow.com/questions/52242644/statement-modifier-iteration-over-a-hash/52243820#52243820", "title": "&quot;Statement modifier&quot; iteration over a hash?", "body": "<p>There are some great functions in <a href=\"https://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> and <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a> to help with situations like this. In particular, take a look at <code>pairs</code>:</p>\n\n<pre><code>use List::Util qw{pairs};\n\ndo_something($_-&gt;[0], $_-&gt;[1]) foreach pairs %h;\n</code></pre>\n\n<p>Or if you can stomach a map in void context:</p>\n\n<pre><code>use List::Util qw{pairmap};\n\npairmap { do_something($a, $b) } %h;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1536627567, "post_id": 52247883, "comment_id": 91482381, "body": "Oh that&#39;s right: I&#39;ve used your first form before... don&#39;t know why I didn&#39;t think of it this time. And even though it&#39;s probably the best way, I think I have to accept @mwp&#39;s answer because my original question (even though I worded it poorly) was more about how to consume more than one element at a time off a list using looping statement modifiers. I understand that technically Perl doesn&#39;t (currently?) allow that, but at least <code>List::Util::pairs</code> gives the &quot;impression&quot; of exactly that (and @mwp posted about <code>List::Util::pairs</code> first)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 1, "creation_date": 1536637632, "post_id": 52247883, "comment_id": 91484253, "body": "Note that you can still use <code>each</code> like you always do"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1536637790, "post_id": 52247883, "comment_id": 91484279, "body": "And I&#39;m not sure why you say that using <code>pairs</code> is mwp&#39;s solution; I also proposed it, and I even provided a simpler way of using it."}, {"owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1536650065, "post_id": 52247883, "comment_id": 91488292, "body": "@mwp posted <code>pairs</code> as an answer 8 hours before you did.  But yes your <code>@$_</code> expansion of the arrayref returned by <code>pairs</code> is easier on the eye than mwp&#39;s usage"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1536650171, "post_id": 52247883, "comment_id": 91488342, "body": "Re &quot;<i>posted pairs as an answer 8 hours before you did.</i>&quot;, I was aware of that. I simply pointed out that twice you posted you were accepting mwp&#39;s answer because they used <code>pairs</code>, which makes no sense."}, {"owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1536672618, "post_id": 52247883, "comment_id": 91501970, "body": "a minor improvement to your <code>while</code> solution: <code>do_something(@_) while @_ = each %h</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 1, "creation_date": 1536694283, "post_id": 52247883, "comment_id": 91514105, "body": "That&#39;s very dangerous and should be avoided"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1536733881, "post_id": 52247883, "comment_id": 91525304, "body": "Ok, while setting elements of <code>@_</code> is dangerous, setting <code>@_</code> as a whole like that is not. Still, messing with global variables --especially one so special-- is not the way to go."}, {"owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1537104002, "post_id": 52247883, "comment_id": 91653688, "body": "is this safer? <code>do_something(@_) while local @_ = each %h</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 1, "creation_date": 1537107217, "post_id": 52247883, "comment_id": 91654527, "body": "The <code>local</code> doesn&#39;t do anything there because there are no curlies to limit it"}, {"owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1588257195, "post_id": 52247883, "comment_id": 108834365, "body": "sorry to dig up an old post, but I have since tested <code>do_something(@_) while local @_ = each %h</code> and it works: anything assigned to <code>@_</code> before the command was run remains preserved in <code>@_</code> after the command has run"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "edited": false, "score": 0, "creation_date": 1588257541, "post_id": 52247883, "comment_id": 108834602, "body": "@textral, Ok, but it still unreadable (unintuitive, unexpected behaviour), and it still uses <code>each</code> which doesn&#39;t handle problems well."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1536637860, "last_edit_date": 1536637860, "creation_date": 1536520701, "answer_id": 52247883, "question_id": 52242644, "link": "https://stackoverflow.com/questions/52242644/statement-modifier-iteration-over-a-hash/52247883#52247883", "title": "&quot;Statement modifier&quot; iteration over a hash?", "body": "<p>The cleanest solution is the following:</p>\n\n<pre><code>do_something($_, $h{$_}) for keys %h;\n</code></pre>\n\n<p>If you want to save memory, you could use <code>each</code> as usual.</p>\n\n<pre><code>{ my ($k, $v);  do_something($k, $v) while ($k, $v) = each(%h); }\n</code></pre>\n\n<p>Of course, it's much cleaner without using a statement modifier.</p>\n\n<pre><code>while (my ($k, $v) = each(%h)) { do_something($k, $v); }\n</code></pre>\n\n<p>Finally, if you aren't actually dealing with a hash, could use <code>pairs</code> from <a href=\"http://search.cpan.org/perldoc?List::Util\" rel=\"nofollow noreferrer\">List::Util</a>.</p>\n\n<pre><code>use List::Util qw( pairs );\n\ndo_something(@$_) for pairs %h;\n</code></pre>\n\n<p>This last approach is very wasteful as it inefficiently creates a multitude of arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10688008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iSbm8.jpg?s=128&g=1", "display_name": "jo-37", "link": "https://stackoverflow.com/users/10688008/jo-37"}, "is_accepted": false, "score": 0, "last_activity_date": 1542834068, "creation_date": 1542834068, "answer_id": 53420419, "question_id": 52242644, "link": "https://stackoverflow.com/questions/52242644/statement-modifier-iteration-over-a-hash/53420419#53420419", "title": "&quot;Statement modifier&quot; iteration over a hash?", "body": "<p>You may shorten</p>\n\n<pre><code>{my ($k, $v);  do_something($k, $v) while ($k, $v) = each(%h); }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>do_something($a, $b) while ($a, $b) = each %h;\n</code></pre>\n\n<p>as $a and $b are already declared for sort.</p>\n"}], "owner": {"reputation": 935, "user_id": 1206102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5642c5824b5fae788e541ba8a5451d7?s=128&d=identicon&r=PG", "display_name": "textral", "link": "https://stackoverflow.com/users/1206102/textral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 52243820, "answer_count": 3, "score": 2, "last_activity_date": 1542834068, "creation_date": 1536481322, "last_edit_date": 1536490373, "question_id": 52242644, "link": "https://stackoverflow.com/questions/52242644/statement-modifier-iteration-over-a-hash", "title": "&quot;Statement modifier&quot; iteration over a hash?", "body": "<p>I find myself wanting to use statement-modifier forms of iteration over hashes in Perl (v5):</p>\n\n<pre><code>my %h = (...);\ndo_something($_[0], $_[1]) for each %h;  ### $_[0] =&gt; key, $_[1] =&gt; val\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>my %h = (...);\nmy @ary = %h;\ndo_something($_[0], $_[1]) for splice(@ary, 0, 2);\n</code></pre>\n\n<p>Of course neither of these forms exist. Just curious if there has been any work to support the use of <code>splice</code> or <code>each</code> with the statement-modifier form of <code>for</code>?  In either Perl 6 or, via backport, v5?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536474305, "post_id": 52241739, "comment_id": 91432318, "body": "@revo The answer in the reference you give is wrong in Perl as it&#39;s only a match operator. Trivial to adjust but perhaps not for those who need this question."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536474705, "post_id": 52241739, "comment_id": 91432389, "body": "@zdim OP just need to copy the regex into the corresponding pattern space. Questions aren&#39;t supposed to be exact duplicates and this one is asked many times before. If you have a better dupe please tell me. I&#39;ll add."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536474964, "post_id": 52241739, "comment_id": 91432442, "body": "@revo Yes and yes; these comments take care of what was itching (me).  Just a mention, for people who are new to regex (and across different tools)."}], "answers": [{"comments": [{"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536472495, "post_id": 52241749, "comment_id": 91432009, "body": "Great!  Thanks @CertainPerformance."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1536472989, "post_id": 52241749, "comment_id": 91432088, "body": "<code>A-z</code> contains six more characters that may not be needed."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 3, "creation_date": 1536473095, "post_id": 52241749, "comment_id": 91432103, "body": "This will also include  other characters like <code>_</code> which is considered in the range [A-z]. since you are ignoring the case ie using <code>i</code> why just not use <code>A-Z</code>??"}], "tags": [], "owner": {"reputation": 253862, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "is_accepted": true, "score": 1, "last_activity_date": 1536473737, "last_edit_date": 1536473737, "creation_date": 1536472421, "answer_id": 52241749, "question_id": 52241739, "link": "https://stackoverflow.com/questions/52241739/perl-regex-remove-double-characters-not-double-numbers-in-a-string/52241749#52241749", "title": "Perl RegEx Remove Double Characters Not Double Numbers in a String", "body": "<p>Instead of using <code>.</code>, which matches <em>nearly any character</em> (letters and numbers included), use <code>[a-z]</code> instead, which will match only alphabetical characters:</p>\n\n<pre><code>$double =~ s/([a-z])\\1/$1/gi;\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1536473048, "accepted_answer_id": 52241749, "answer_count": 1, "score": 0, "last_activity_date": 1536473737, "creation_date": 1536472274, "question_id": 52241739, "link": "https://stackoverflow.com/questions/52241739/perl-regex-remove-double-characters-not-double-numbers-in-a-string", "closed_reason": "Duplicate", "title": "Perl RegEx Remove Double Characters Not Double Numbers in a String", "body": "<p>I am using Perl RegExp that attempts to remove BOTH double characters and double numbers.\nHowever, I only want to remove double characters and leave double numbers present in the same string.</p>\n\n<p>Although there are several examples showing removing double characters, there are no examples showing removing double characters and keeping double numbers in a string.</p>\n\n<p>My Code:</p>\n\n<pre><code>#! /usr/bin/perl\nuse v5.10.0;\nuse warnings;\n\nmy $double = \"AAPPLES112233\";\n$double =~ s/(.)\\1/$1/gi;\nsay $double;\n</code></pre>\n\n<p>My code outputs APLES123.  However the goal is to output APLES112233, eliminating the double characters while keeping the double numbers in the same string.</p>\n"}, {"tags": ["excel", "perl", "format", "xls"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536469749, "post_id": 52241372, "comment_id": 91431557, "body": "I think that you don&#39;t need the <code>WriteExcel</code> module for what you are doing, but only the <code>Spreadsheet::ParseExcel::SaveParser</code>.  See for instance <a href=\"https://stackoverflow.com/a/3217450/4653379\">this post</a>.  That may preserve colors. If not, there is a range of options involving colors so should be able to read off what they are and then specify them again."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536469932, "post_id": 52241372, "comment_id": 91431590, "body": "@zdim thanks for the reference.  I&#39;ll try a few of the options and see if it preserves the color."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536470050, "post_id": 52241372, "comment_id": 91431608, "body": "OK. Note that at the same page there is another answer where they indeed use the combo you have.  But then, it&#39;s different modules; i am not sure I&#39;d bet that the writer will pick up <i>everything</i> from the reader."}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536470038, "creation_date": 1536467670, "last_edit_date": 1536470038, "question_id": 52241372, "link": "https://stackoverflow.com/questions/52241372/execute-perl-write-excel-xls-from-file1-to-file2-while-maintaning-the-color-form", "title": "Execute Perl Write Excel XLS From File1 To File2 while Maintaning the Color Format", "body": "<p>Using Perl Write Excel XLS, I am reading from File 1 and writing to File 2.\nWhile my code successfully writes the same data from File 1 and File 2, however the File 2 does not maintain the same color format as File 1 (File 1 Excel displays a blue and white format for every other row).  </p>\n\n<p>Is there an option in Perl Excel Parse/Write to maintain the same color code?  I've researched in CPAN and this site but I am unable to discover any options to be applied in the Perl script.</p>\n\n<p>My Code:</p>\n\n<pre><code>##! /usr/bin/perl\nuse v5.10.0;\nuse warnings;\n\n\nuse Spreadsheet::ParseExcel;\nuse Spreadsheet::ParseExcel::SaveParser;\nuse Spreadsheet::WriteExcel;\n\n\nmy $parser = Spreadsheet::ParseExcel::SaveParser-&gt;new();\nmy $workbook_R = $parser-&gt;parse('C:\\Perl\\databases\\File1.xls');\n\nmy $workbook_W = Spreadsheet::WriteExcel-&gt;new('C:\\Perl\\databases\\File2.xls');\nmy $worksheet_W = $workbook_W-&gt;add_worksheet();\n\nfor my $worksheet_R ($workbook_R-&gt;worksheets()) {\n\nmy ($row_min, $row_max ) = $worksheet_R-&gt;row_range();\nmy ($col_min, $col_max ) = $worksheet_R-&gt;col_range(); \n\n\n  for my $row ($row_min .. $row_max ) {\n  for my $col ($col_min .. $col_max ) {\n\n  my $value = $worksheet_R-&gt;get_cell($row, $col)-&gt;value;\n  $worksheet_W-&gt;write($row, $col, $value);\n   }\n  }\n }\n</code></pre>\n"}, {"tags": ["excel", "perl", "xls"], "comments": [{"owner": {"reputation": 16956, "user_id": 8112776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tj3MU.png?s=128&g=1", "display_name": "ashleedawg", "link": "https://stackoverflow.com/users/8112776/ashleedawg"}, "edited": false, "score": 0, "creation_date": 1536457334, "post_id": 52240003, "comment_id": 91430030, "body": "You mentioned you&#39;ve read other questions; have you attempted any solutions? I assume this is a homework assignment, correct? Obviously you didn&#39;t write this (or you&#39;d know the answer)... it&#39;s fine to ask about homework or to &#39;borrow&#39; code, but you do still need to show your attempt and explain the <i>*specific</i> problem you&#39;re having other than &quot;it&#39;s not working&quot;. See &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; as well as info at the <a href=\"https://stackoverflow.com/help/on-topic\">help center</a> and also how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  More good tips in this <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">checklist</a>.."}, {"owner": {"reputation": 16956, "user_id": 8112776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tj3MU.png?s=128&g=1", "display_name": "ashleedawg", "link": "https://stackoverflow.com/users/8112776/ashleedawg"}, "edited": false, "score": 0, "creation_date": 1536457996, "post_id": 52240003, "comment_id": 91430117, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/51767439/parse-excel-data-raises-file-error\">Parse Excel data raises &quot;File error&quot;</a>"}, {"owner": {"reputation": 16956, "user_id": 8112776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tj3MU.png?s=128&g=1", "display_name": "ashleedawg", "link": "https://stackoverflow.com/users/8112776/ashleedawg"}, "edited": false, "score": 0, "creation_date": 1536458161, "post_id": 52240003, "comment_id": 91430134, "body": "There are several posts on this site and others with answers to the <b>exact same question</b>.. Same sample data and everything. What a coincidence, eh? <a href=\"https://www.google.ca/search?tbs=li%3A1&amp;q=my+(%24row_min%2C+%24row_max+)+%3D+%24worksheet_R-&gt;row_range()++my+%24parser+%3D+Spreadsheet%3A%3AParseExcel%3A%3ASaveParser-&gt;new()\" rel=\"nofollow noreferrer\"><b>This will help you find them</b>.</a>"}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536458196, "post_id": 52240003, "comment_id": 91430138, "body": "I am the author of those posts."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536458242, "post_id": 52240003, "comment_id": 91430142, "body": "Read the questions.  They are asking totally different things.  There is more to a question than just the same variables."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536458277, "post_id": 52240003, "comment_id": 91430147, "body": "You look at these questions, and see apples, and then you think these are the same questions.  NO."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536458474, "post_id": 52240003, "comment_id": 91430172, "body": "You can ask 10000 different questions on the same data.  Read the questions, before marking it as duplicate."}, {"owner": {"reputation": 16956, "user_id": 8112776, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tj3MU.png?s=128&g=1", "display_name": "ashleedawg", "link": "https://stackoverflow.com/users/8112776/ashleedawg"}, "edited": false, "score": 0, "creation_date": 1536458748, "post_id": 52240003, "comment_id": 91430203, "body": "My main point is that you haven&#39;t shown any attempt on this question.  What have you tried, and why didn&#39;t it work?  Are you getting an error? Where?  have you tried reducing the code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536471733, "post_id": 52240003, "comment_id": 91431877, "body": "just run <code>perl -pe &quot;s&#47;(?&lt;!^)Apples(?!$)&#47;Peaches&#47;&quot; file.txt</code> this will change only column 2"}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536472078, "post_id": 52240003, "comment_id": 91431936, "body": "@Onyambu -- Thanks for the alternative.  Trying discover more efficient ways than the normal textbook solutions."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536472218, "post_id": 52240003, "comment_id": 91431960, "body": "fundamentals: if/else or something similar."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "edited": false, "score": 0, "creation_date": 1536472767, "post_id": 52240003, "comment_id": 91432055, "body": "Not at all.  I preferred NOT to use the if/else solution.  That is why I asked for help."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536473403, "post_id": 52240003, "comment_id": 91432154, "body": "Huh.. I might have misread your text.. I did not understand what you meant. Well let me know whether the code i provided helped you"}], "answers": [{"comments": [{"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536472872, "post_id": 52241142, "comment_id": 91432068, "body": "It works by writing the condition to only column 1 and writing all other data to the other columns."}, {"owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1536473300, "post_id": 52241142, "comment_id": 91432136, "body": "Counting starts at 0. 0, 1 = 2 column."}], "tags": [], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "is_accepted": true, "score": 0, "last_activity_date": 1536464414, "creation_date": 1536464414, "answer_id": 52241142, "question_id": 52240003, "link": "https://stackoverflow.com/questions/52240003/using-perl-excel-to-loop-through-a-single-column-and-not-every-columns/52241142#52241142", "title": "Using Perl Excel to Loop Through A Single Column and Not Every Columns", "body": "<p>Use the if/else statement for Column 2 and the other columns.</p>\n\n<p>Here is the solution:</p>\n\n<pre><code>my $value = $worksheet_R-&gt;get_cell($row, $col)-&gt;value;\n\n  if ($col ==1) {\n# Apples Replace Peaches for ONLY Column 2\n  $value =~ s/Apples/Peaches/g;\n  $worksheet_W-&gt;write($row, $col, $value);\n  }\n    else {\n      # Print the other data in other columns\n      $worksheet_W-&gt;write($row, $col, $value);\n  }\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 1608954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd1368f3b1b64bf10b40fddf19b7365d?s=128&d=identicon&r=PG", "display_name": "Minimalist", "link": "https://stackoverflow.com/users/1608954/minimalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 52241142, "answer_count": 1, "score": 0, "last_activity_date": 1536464657, "creation_date": 1536446980, "last_edit_date": 1536464657, "question_id": 52240003, "link": "https://stackoverflow.com/questions/52240003/using-perl-excel-to-loop-through-a-single-column-and-not-every-columns", "title": "Using Perl Excel to Loop Through A Single Column and Not Every Columns", "body": "<p>My current Perl code loops through every row and every column in a Excel worksheet.</p>\n\n<p>If I have 3 columns of data in Excel, how do I loop through only column 2 to read and write the specific data?  According to the data input below, the goal is to change the cell from Apples to Peaches.\nBelow is my code with the attempted solutions below the code.  I need Apples to be replaced with Peaches in Column 2, however Apples remain the same in column 1.</p>\n\n<p>Note:  I answered my own question, yet it would be really be a good learning lesson if someone had a better solution.  </p>\n\n<p>INPUT:</p>\n\n<pre><code>  1           2           3\nGrapes     Spinach     Mustard\nOranges    Apples      Ketchup\nApples     Potatoes    Horseradish\n</code></pre>\n\n<p>OUTPUT:   </p>\n\n<pre><code>   1           2           3\nGrapes     Spinach     Mustard\nOranges    Peaches     Ketchup\nApples     Potatoes    Horseradish\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#! /usr/bin/perl\nuse v5.10.0;\nuse warnings;\n\nuse Spreadsheet::ParseExcel;\nuse Spreadsheet::ParseExcel::SaveParser;\nuse Spreadsheet::WriteExcel;\n\nmy $parser = Spreadsheet::ParseExcel::SaveParser-&gt;new();\nmy $workbook_R = $parser-&gt;parse('C:\\Perl\\databases\\input.xls');\n\nmy $workbook_W = Spreadsheet::WriteExcel-&gt;new('C:\\Perl\\databases\\output.xls');\nmy $worksheet_W = $workbook_W-&gt;add_worksheet();\n\nfor my $worksheet_R ($workbook_R-&gt;worksheets()) {\n\nmy ($row_min, $row_max ) = $worksheet_R-&gt;row_range();\nmy ($col_min, $col_max ) = $worksheet_R-&gt;col_range(); \n\n  for my $row ($row_min .. $row_max ) {\n  for my $col ($col_min .. $col_max ) {\n\n  my $value = $worksheet_R-&gt;get_cell($row, $col)-&gt;value;\n\n# Testing if Apples Replace Peaches\n  $value =~ s/Apples/Peaches/g;\n  $worksheet_W-&gt;write($row, $col, $value);\n  }\n }\n}\n</code></pre>\n\n<p>Some of my solutions are:</p>\n\n<pre><code>   1)        my $value = $worksheet_R-&gt;get_cell($row, 2)-&gt;value;\n   2)        $worksheet_W-&gt;write($row, 2, $value);\n   3)        for my $col ($col == 2 ) {\n</code></pre>\n\n<p>All outcomes were incorrect data output.</p>\n"}, {"tags": ["c", "perl", "ld", "libxml2", "dynamic-loading"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536412201, "post_id": 52234414, "comment_id": 91419784, "body": "It&#39;s a common error to build libraries with the wrong 32/64 bit status. You must build an image that agrees with your version of Perl, which you can access using <code>perl -v</code>. You must also use a version of libxml that is compatible with <code>XML::LibXML</code> in every way; ideally the same version."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1536449428, "post_id": 52234414, "comment_id": 91429089, "body": "It is not uncommon to have multiple <code>libxml12.so.2</code> versions installed (especially if you have installed packages containing the file without the use of a package manager). It is worth running a <code>find</code> command on <code>&#47;lib</code>, <code>&#47;usr&#47;lib</code> (distro dependent) and on <code>&#47;usr&#47;local</code> to determine if multiple versions exist (or use <code>locate</code> if you have <code>mlocate</code> installed)"}, {"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1536450268, "post_id": 52234414, "comment_id": 91429209, "body": "@DavidC.Rankin What has it to do with the issue? It&#39;s not that wrong library getting loaded. But that <code>&#47;usr&#47;lib&#47;libxml2.so.2</code> getting loaded in spite of <code>LD_LIBRARY_PATH</code> being set to load other instance of the library. Anyways, I&#39;ve added output of <code>find</code> to the question. FYI, the reason has been found."}], "answers": [{"comments": [{"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "edited": false, "score": 0, "creation_date": 1536429378, "post_id": 52236556, "comment_id": 91424491, "body": "You were close, <code>ExtUtils::MakeMaker</code> does hardcode paths to the libraries in the binaries. But by means of <code>RPATH</code> entry in <code>.dynamic</code> section."}], "tags": [], "owner": {"reputation": 711, "user_id": 8890345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703664448de0eb2b1f67be5775aed66a?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Mills", "link": "https://stackoverflow.com/users/8890345/nathan-mills"}, "is_accepted": false, "score": -1, "last_activity_date": 1536419140, "creation_date": 1536419140, "answer_id": 52236556, "question_id": 52234414, "link": "https://stackoverflow.com/questions/52234414/ld-library-path-doesnt-take-effect-for-libxml-so/52236556#52236556", "title": "LD_LIBRARY_PATH doesn&#39;t take effect for LibXML.so", "body": "<p>If you install your custom built version of libxml in <code>/usr/local/lib</code>, I think the XML::LibXML module should load the custom one rather than the one in <code>/usr/lib</code> (Assuming you have sudoers or root permission to install it).</p>\n\n<p>I'm not sure why Python seems to use a different lookup path for libraries than Perl does, though. Maybe the full path to libxml library is hardcoded in XML::LibXML's LibXML.so? If the XML::LibXML module was linked with -l/usr/lib/libxml2.so instead of -lxml2 that would be the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536429608, "post_id": 52237860, "comment_id": 91424555, "body": "This is not an answer to the question and is likely to be deleted. It appears to be an attempt to add further information to the question. Please use the <a href=\"https://stackoverflow.com/posts/52234414/edit\"><b>edit</b></a> link beneath the tags on your question to alter its content."}, {"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536430451, "post_id": 52237860, "comment_id": 91424774, "body": "@Borodin How come it&#39;s not an answer? It explains why <code>LD_LIBRARY_PATH</code> doesn&#39;t work, and provides a way to overcome it. Please explain what exactly is wrong with my answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536432780, "post_id": 52237860, "comment_id": 91425374, "body": "I guess I owe you an apology. I read it quite carefully and it seemed to be a long list of things that don&#39;t work. I still don&#39;t see quite where the solution is, and I think you need to make sure that the English language part of your question explains what you are trying to say, as code and quotations are generally seen as citations."}, {"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536433590, "post_id": 52237860, "comment_id": 91425594, "body": "@Borodin Is it any better?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536516757, "post_id": 52237860, "comment_id": 91442578, "body": "No, not really. All you seem to have done is rename the blocks with bold <code>**</code> markup. You should be using <i>header</i> markup anyway, and I shouldn&#39;t have to play <i>find the difference</i> to discover your solution."}], "tags": [], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "is_accepted": true, "score": 3, "last_activity_date": 1536589440, "last_edit_date": 1536589440, "creation_date": 1536428845, "answer_id": 52237860, "question_id": 52234414, "link": "https://stackoverflow.com/questions/52234414/ld-library-path-doesnt-take-effect-for-libxml-so/52237860#52237860", "title": "LD_LIBRARY_PATH doesn&#39;t take effect for LibXML.so", "body": "<h3>tl;dr</h3>\n\n<p><code>ExtUtils::MakeMaker</code> hardcodes paths of the shared libraries in the binaries by means of <code>RPATH</code> entry in <code>.dynamic</code> section. But you can preload the needed library,</p>\n\n<pre><code>$ LD_PRELOAD=path/to/custom/libxml2/.libs/libxml2.so.2 ldd ./blib/arch/auto/XML/LibXML/LibXML.so\n</code></pre>\n\n<p>or make the loader ignore <code>RPATH</code> entry,</p>\n\n<pre><code>$ LD_LIBRARY_PATH=path/to/custom/libxml2/.libs /usr/lib/ld-linux-x86-64.so.2 --inhibit-rpath /abs/path/to/LibXML.so /abs/path/to/perl ./1.pl\n</code></pre>\n\n<p>or convert <code>RPATH</code> entry into <code>RUNPATH</code> one,</p>\n\n<pre><code>$ chrpath --convert blib/arch/auto/XML/LibXML/LibXML.so\n</code></pre>\n\n<p>or delete <code>RPATH</code> entry,</p>\n\n<pre><code>$ chrpath --delete blib/arch/auto/XML/LibXML/LibXML.so\n</code></pre>\n\n<p>or specify <code>XMLPREFIX</code> variable,</p>\n\n<pre><code>$ perl Makefile.PL XMLPREFIX=path/to/custom/libxml2/build\n</code></pre>\n\n<h3>Under the hood</h3>\n\n<p><code>ExtUtils::Liblist::ext()</code> takes a list of libraries to be linked with, like <code>-lxml2 -lz -llzma -licui18n -licuuc -licudata -lm -ldl</code>, and turns them it into <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/MM_Unix.pm#L1095\" rel=\"nofollow noreferrer\">four</a> or <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/Liblist.pm#L14\" rel=\"nofollow noreferrer\">five</a> <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/Liblist/Kid.pm#L219-L222\" rel=\"nofollow noreferrer\">variables</a>, that make their way into the generated <code>Makefile</code>. One of those is <code>LD_RUN_PATH</code>. It contains all the paths where the libraries where found.</p>\n\n<p><code>$is_dyna</code> is true if the library is dynamic (not <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/Liblist/Kid.pm#L213\" rel=\"nofollow noreferrer\">ends</a> with <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/Liblist/Kid.pm#L45\" rel=\"nofollow noreferrer\"><code>.a</code></a>). <code>$is_perl</code> is true if Perl was not <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/Liblist/Kid.pm#L214\" rel=\"nofollow noreferrer\">built</a> with <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/Liblist/Kid.pm#L44\" rel=\"nofollow noreferrer\">it</a>, and <code>%ld_run_path_seen</code> is to not duplicate values in <code>LD_RUN_PATH</code>.</p>\n\n<p>The part that <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/MM_Any.pm#L2437\" rel=\"nofollow noreferrer\">calculates</a> <code>LD_RUN_PATH</code>, that generates part of the Makefile with the <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/MM_Unix.pm#L382-L387\" rel=\"nofollow noreferrer\">variable</a>, and the part that passes it to the <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/blob/v7.35_06/lib/ExtUtils/MM_Unix.pm#L1060-L1070\" rel=\"nofollow noreferrer\">linker</a>.</p>\n\n<h3>Consequences</h3>\n\n<p><code>LD_RUN_PATH</code> and in its turn <code>RPATH</code> entry in the binary make the loader search for libraries (at runtime) in the directories where they where found (at compile time).</p>\n\n<blockquote>\n  <p>-rpath=dir\n  <strong>Add a directory to the runtime library search path.</strong> This is used when linking an ELF executable with shared objects. All -rpath arguments are concatenated and passed to the runtime linker, which uses them to locate shared objects at runtime. The -rpath option is also used when locating shared objects which are needed by shared objects explicitly included in the link; see the description of the -rpath-link option. <strong>If -rpath is not used when linking an ELF executable, the contents of the environment variable \"LD_RUN_PATH\" will be used if it is defined.</strong></p>\n</blockquote>\n\n<p><a href=\"https://jlk.fjfi.cvut.cz/arch/manpages/man/core/binutils/ld.1.en\" rel=\"nofollow noreferrer\">https://jlk.fjfi.cvut.cz/arch/manpages/man/core/binutils/ld.1.en</a></p>\n\n<blockquote>\n  <p>If a shared object dependency does not contain a slash, then it is searched for in the following order:</p>\n  \n  <p>o Using the directories specified in the <strong>DT_RPATH</strong> dynamic section attribute of the binary if present and DT_RUNPATH attribute does not exist. Use of DT_RPATH is deprecated.</p>\n  \n  <p>o Using the environment variable <strong>LD_LIBRARY_PATH</strong>, unless the executable is being run in secure-execution mode (see below), in which case this variable is ignored.</p>\n</blockquote>\n\n<p><a href=\"https://jlk.fjfi.cvut.cz/arch/manpages/man/core/man-pages/ld.so.8.en\" rel=\"nofollow noreferrer\">https://jlk.fjfi.cvut.cz/arch/manpages/man/core/man-pages/ld.so.8.en</a></p>\n\n<pre><code>$ perl Makefile.PL\n$ make\n</code></pre>\n\n<p>Result,</p>\n\n<pre><code>$ readelf --dynamic ./blib/arch/auto/XML/LibXML/LibXML.so | grep RPATH\n 0x000000000000000f (RPATH)              Library rpath: [/usr/lib]\n\n$ objdump -x ./blib/arch/auto/XML/LibXML/LibXML.so | egrep RPATH\n  RPATH                /usr/lib\n\n$ LD_LIBRARY_PATH=path/to/custom/libxml2/.libs ldd ./blib/arch/auto/XML/LibXML/LibXML.so | grep libxml2\n    libxml2.so.2 =&gt; /usr/lib/libxml2.so.2 (0x00007f6cfabb2000)\n</code></pre>\n\n<p><code>--dynamic</code> - display contents of the <code>.dynamic</code> section, <code>-x</code> - display all headers.</p>\n\n<h3>Solution</h3>\n\n<p>One way to remedy this is to preload needed instance of <code>libxml2</code>,</p>\n\n<pre><code>$ LD_PRELOAD=path/to/custom/libxml2/.libs/libxml2.so.2 ldd ./blib/arch/auto/XML/LibXML/LibXML.so | grep libxml2\n    path/to/custom/libxml2/build/lib/libxml2.so.2 (0x00007fe183aeb000)\n</code></pre>\n\n<p>Another is to tell <code>Makefile.PL</code> search for <code>libxml2</code> in the desired location (at compile time).</p>\n\n<pre><code>$ perl Makefile.PL XMLPREFIX=path/to/custom/libxml2/build\n$ make\n</code></pre>\n\n<p>Result,</p>\n\n<pre><code>$ readelf --dynamic ./blib/arch/auto/XML/LibXML/LibXML.so | grep RPATH\n 0x000000000000000f (RPATH)              Library rpath: [path/to/custom/libxml2/build/lib:/usr/lib]\n\n$ objdump -x ./blib/arch/auto/XML/LibXML/LibXML.so | egrep RPATH\n  RPATH                path/to/custom/libxml2/build/lib:/usr/lib\n\n$ ldd ./blib/arch/auto/XML/LibXML/LibXML.so | grep libxml2\n    libxml2.so.2 =&gt; path/to/custom/libxml2/build/lib/libxml2.so.2 (0x00007fe183aeb000)\n</code></pre>\n\n<h3>On a side note</h3>\n\n<p>Should you care to debug <code>XML::LibXML</code>, you can run make with <code>OPTIMIZE</code> variable (add <code>-B</code> to make make rebuild everything in case the library has already been built),</p>\n\n<pre><code>$ make OPTIMIZE='-g3 -O0'\n</code></pre>\n\n<p>There's also <code>-O2</code>, and no <code>-g</code> in <code>LDDLFLAGS</code>, but not sure if that matters much.</p>\n\n<p>Alternatively, <code>WriteMakeFile</code> takes <code>OPTIMIZE</code> parameter, so you can add a line <a href=\"https://github.com/shlomif/perl-XML-LibXML/blob/XML-LibXML-2.0132/Makefile.PL#L462\" rel=\"nofollow noreferrer\">here</a>,</p>\n\n<pre><code>'OPTIMIZE' =&gt; '-g3 -O0'\n</code></pre>\n\n<p>Or you can add the variable <a href=\"https://github.com/shlomif/perl-XML-LibXML/blob/XML-LibXML-2.0132/Makefile.PL#L107\" rel=\"nofollow noreferrer\">here</a>, and pass it to <code>Makefile.PL</code>,</p>\n\n<pre><code>$ perl Makefile.PL OPTIMIZE='-g3 -O0'\n</code></pre>\n"}], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 2, "accepted_answer_id": 52237860, "answer_count": 2, "score": 2, "last_activity_date": 1536589440, "creation_date": 1536402810, "last_edit_date": 1536449981, "question_id": 52234414, "link": "https://stackoverflow.com/questions/52234414/ld-library-path-doesnt-take-effect-for-libxml-so", "title": "LD_LIBRARY_PATH doesn&#39;t take effect for LibXML.so", "body": "<p><code>XML::LibXML</code> is a Perl library. <code>LibXML.so</code> is a part of the library. I'm trying to make <code>XML::LibXML</code> use custom built <code>libxml2</code>. But providing <code>LD_LIBRARY_PATH</code> doesn't make any difference:</p>\n\n<pre><code>$ ldd ./blib/arch/auto/XML/LibXML/LibXML.so | grep libxml2\n    libxml2.so.2 =&gt; /usr/lib/libxml2.so.2 (0x00007f66af5e9000)\n\n$ LD_LIBRARY_PATH=/home/yuri/_/libxml2/.libs ldd ./blib/arch/auto/XML/LibXML/LibXML.so | grep libxml2\n    libxml2.so.2 =&gt; /usr/lib/libxml2.so.2 (0x00007f2d26ae3000)\n\n$ ldd /usr/lib/python3.7/site-packages/libxml2mod.so | grep libxml2\n    libxml2.so.2 =&gt; /usr/lib/libxml2.so.2 (0x00007f878cbc8000)\n\n$ LD_LIBRARY_PATH=/home/yuri/_/libxml2/.libs ldd /usr/lib/python3.7/site-packages/libxml2mod.so | grep libxml2\n    libxml2.so.2 =&gt; /home/yuri/_/libxml2/.libs/libxml2.so.2 (0x00007f6f8f5d8000)\n</code></pre>\n\n<p>What am I doing wrong? Is there a way to handle it? The goal is to make Perl script use custom built <code>libxml2</code> (to investigate some issue).</p>\n\n<p><strong>UPD</strong></p>\n\n<pre><code>$ find /usr/lib -name libxml2.so.2\n/usr/lib/libxml2.so.2\n/usr/lib/vmware-installer/2.1.0/lib/lib/libxml2.so.2\n/usr/lib/vmware-installer/2.1.0/lib/lib/libxml2.so.2/libxml2.so.2\n/usr/lib/vmware-vmrc/5.5/lib/libxml2.so.2\n/usr/lib/vmware-vmrc/5.5/lib/libxml2.so.2/libxml2.so.2\n\n$ find /usr/local/lib -name libxml2.so.2\n</code></pre>\n"}, {"tags": ["regex", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536376459, "post_id": 52231582, "comment_id": 91412721, "body": "Is it really always (at most) just two slashes?"}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536377714, "post_id": 52231582, "comment_id": 91412895, "body": "There may be more, as seperators. For the moment I am interested in extracting first string surrounded by forward slashes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536378050, "post_id": 52231582, "comment_id": 91412946, "body": "What precisely do you consider to be &quot;special characters&quot;?"}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536380745, "post_id": 52231582, "comment_id": 91413353, "body": "Those would be !@#$%^&amp;*()+=~`"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536383023, "post_id": 52231582, "comment_id": 91413647, "body": "Remove <code>?</code> off lookahead and do <code>(?=\\&#47;[a-zA-Z0-9]*|$)</code> instead."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536383195, "post_id": 52231582, "comment_id": 91413665, "body": "For sed it would be <code>sed -r &#39;s~^test&#47;([[:alnum:]_-]*)(&#47;|$)~\\1~&#39;</code>"}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536385717, "post_id": 52231582, "comment_id": 91414017, "body": "@revo <code>echo &#39;test&#47;alpha_numer$ic-9034&#39; | sed -r &#39;s~^test&#47;([[:alnum:]_-]*)(&#47;|$)~\\1~&#39;</code> gives me <code>test&#47;alpha_numer$ic-9034</code>, I didn&#39;t get the first comment. Although I tried as <code>sed -r &#39;s|^.*(test)&#47;([[:alnum:]_-]*)(?=&#47;[a-zA-Z0-9]*$).*$|\\2|&#39;</code> is that what you meant?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536385883, "post_id": 52231582, "comment_id": 91414045, "body": "Your first command outputs the exact same input string because sed can&#39;t match anything. So it works as intended. Sed is a find / replace tool not a <i>match only</i> tool."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536385967, "post_id": 52231582, "comment_id": 91414062, "body": "You quantified lookahead as in <code>(?=\\&#47;[a-zA-Z0-9]*)?</code> (Watch the <code>?</code>). It shouldn&#39;t be there. Remove it and put <code>$</code> in an alternation inside e.g. <code>(?=\\&#47;[a-zA-Z0-9]*|$)</code>"}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536386215, "post_id": 52231582, "comment_id": 91414101, "body": "Ok got it, thanks a lot. Is there any way to return nothing if sed can&#39;t match anything? Also could you please post an answer to accept."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536389459, "post_id": 52231582, "comment_id": 91414716, "body": "Updated my answer with a pure bash solution (no external tools needed at all), following the clarification of desired &quot;<i>in bash with minimal tooling/lang support</i>&quot;"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536390018, "post_id": 52231582, "comment_id": 91414816, "body": "@RuwankaMadhushan You could work around it like this <code>echo &#39;test&#47;alpha_numer$ic-9034&#47;&#39; | sed -r &#39;s~^test&#47;([[:alnum:]_-]*)(&#47;|$)|.*~\\1~&#39;</code>. If other answers didn&#39;t solve your issue I&#39;ll post an answer."}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536390772, "post_id": 52231582, "comment_id": 91414963, "body": "@revo your last workaround works but misses <code>&#39;test&#47;alpha_numeric-9034&#39;</code>, Please if you could, since others are not exact solution but collective."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536390822, "post_id": 52231582, "comment_id": 91414976, "body": "Is <code>&#39;test&#47;alpha_numeric-9034&#39;</code> a desired match?"}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536390923, "post_id": 52231582, "comment_id": 91414993, "body": "yes it should give me <code>alpha_numeric-9034</code>, sorry If question doesn&#39;t reflect it. I&#39;ll try to update it more elaborately."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536391634, "post_id": 52231582, "comment_id": 91415124, "body": "Weird. It should match. I answered with a slightly different solution."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536430008, "post_id": 52231582, "comment_id": 91424666, "body": "I&#39;m not clear why you start with using <code>some_word&#47;...</code> and continue with <code>test&#47;...</code>. Do you want to include the specific word in your regex pattern?"}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536465430, "post_id": 52231582, "comment_id": 91430983, "body": "@Borodin yes <code>some_word</code> would be predetermined any word, <code>test</code> is just an example"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536507656, "post_id": 52231582, "comment_id": 91440253, "body": "@Ruwanka: That doesn&#39;t help much. How do you want to treat it in your code? Will you accept anything at all before the slash and the field you want, including stuff with slashes and perhaps newlines?"}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536567665, "post_id": 52231582, "comment_id": 91454798, "body": "@Borodin Ok, I want to start the string with word say &#39;test&#39;, yes I am doing something that word but it is not relevant to the problem. So first word is required, first slash is required, then string with alphanumerics and no special chars other than _,-, last slash is optional but if it is there some description should follow it.. Is that helping?"}], "answers": [{"comments": [{"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536380908, "post_id": 52231846, "comment_id": 91413374, "body": "I tagged it as perl since <code>grep -P</code> is used, Thanks for the idea of using path parsing tools, this is not path related but It could help. Would you be able to give me sample in grep or sed. I am trying to do this in bash with minimal tooling/lang support."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536388168, "post_id": 52231846, "comment_id": 91414461, "body": "@RuwankaMadhushan  Added to the answer a way to do this directly in bash, what should be optimal according to your comment"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1536389767, "post_id": 52231846, "comment_id": 91414756, "body": "Your vanila bash solution doesn&#39;t check if string starts with <code>test</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536389919, "post_id": 52231846, "comment_id": 91414797, "body": "@revo It discards what precedes the first slash, which is the requirement, I think. This is also easily adjusted.  I don&#39;t understand why the string would start with <code>test</code> ?"}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536390029, "post_id": 52231846, "comment_id": 91414820, "body": "@zdim Acctually first one should be test or some word, it is a requirement which I missed in my question. Sorry for inconvenience and I&#39;ll update it to reflect."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536391850, "post_id": 52231846, "comment_id": 91415167, "body": "@RuwankaMadhushan Added test for whether the string starts with <code>test&#47;</code>, and added a test of whether it matched to the bash example.  I don&#39;t know what flow control you need in the script, please adjust for that if it isn&#39;t what I used as an example."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536391954, "post_id": 52231846, "comment_id": 91415187, "body": "@revo Just how did you know that it need start with a specific string? :)  Updated."}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536392048, "post_id": 52231846, "comment_id": 91415206, "body": "Thanks for the answer, I picked @revo&#39;s one because of question is about sed, but this is another way of solving the problem."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536392309, "post_id": 52231846, "comment_id": 91415255, "body": "I just looked at the regular expressions in OP and wondered if <code>^test</code> - the caret specially - has no purpose."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1536476080, "last_edit_date": 1536476080, "creation_date": 1536378874, "answer_id": 52231846, "question_id": 52231582, "link": "https://stackoverflow.com/questions/52231582/extract-matching-group-between-slashes-using-sed-grep-breaks-for-special-chars/52231846#52231846", "title": "Extract Matching group between slashes using sed, grep breaks for special chars", "body": "<p><strong>Update</strong> &nbsp; Added a version for the last question edit.</p>\n\n<hr>\n\n<p>With Perl (as tagged), using your echo-ed lines of data in a file <code>data.txt</code></p>\n\n<pre><code>perl -wnE'@m = m{^test/([\\w-]+)(?=/)}g; say \"@m\" if @m' data.txt\n</code></pre>\n\n<p>This prints only the <code>alpha_numeric-9034</code> from the first line.</p>\n\n<p>I use <code>[\\w-]</code>, change to go via the <a href=\"https://perldoc.perl.org/perlrecharclass.html#POSIX-Character-Classes\" rel=\"nofollow noreferrer\">POSIX character class</a>, <code>[[:alnum:]_-]</code>, if you wish. The other option is to list forbidden characters along with <code>/</code> in a negated class,\n<code>[^/...]</code>.</p>\n\n<p>The code captures allowed characters after the <code>^test/</code> up to the next <code>/</code>, using a positive lookahead to assert that the <code>/</code> is there. The lookahead, being a \"<em>zero width assertion</em>,\" does not consume that slash, otherwise this would fail with more than two slashes.</p>\n\n<p>Assuming a path as the target the code captures between slashes only when there is something, discarding <code>//</code> but still matching the line. If you want the \"nothing\" between slashes change the <code>+</code> quantifier to <code>*</code> and you'll get an empty string for that <code>//</code> pair.</p>\n\n<p>It also works with any number of slashes, extracting what is in between consecutive ones. Tested by adding a line <code>test/first/yet/more/end</code> to the file used above, for</p>\n\n<pre>\nalpha_numeric-9034\nfirst yet more\n</pre>\n\n<hr>\n\n<p><strong>Note</strong> &nbsp; The last question edit allows <code>test/QR-9034</code>, so <em>without</em> the second slash. That contradicts the original statement and explicit early clarifications and the solutions above (Perl) and below (bash) weren't designed for it and won't work in that case. </p>\n\n<p>However, it is only (much) easier if we can only have at most two slashes</p>\n\n<pre><code>perl -wnE'say $1 if m{^test/([\\w-]+)/?}' data.txt\n</code></pre>\n\n<p>This matches what follows <code>^test/</code> as above, up to the next <em>optional</em> (<code>?</code>) slash.</p>\n\n<hr>\n\n<p>If this is indeed about parsing paths please use modules that do precisely that.</p>\n\n<hr>\n\n<p>It is clarified that the goal is to do this in bash, with <strong>\"minimal tool/lang support\"</strong>. Then this can be done directly in bash. That won't be concise as in Perl but no other tools are used. One way</p>\n\n<pre><code>#!/bin/bash\n\nstring='test/one/two/end'\n\n# Build array of fields using / for the separator\nIFS='/' read -ra ary &lt;&lt;&lt; \"$string\"\n\n# Note: don't know how the presumed bash script is organized\n# Use checks below (or alternatives) for flow control you need\n\n# Check for non :alnum: characters. Iterating is a bit slow but clear\nfor i in \"${ary[@]}\"; do\n    if [[ \"$i\" =~ [^[:alnum:]] ]]; then\n        echo \"Element $i has non-alnum\"\n        has_special=1\n        break\n    fi  \ndone\n\nif [[ ${#ary[@]} -le 1 || ${ary[0]} != \"test\" || $has_special ]]; then\n    echo \"No match\"\nelse\n    # Remove first and last elements\n    unset 'ary[${#ary[@]}-1]'\n    unset 'ary[${ary[0]}]'\n\n    echo \"${ary[@]}\"\n fi\n</code></pre>\n\n<p>This prints the line: &nbsp; <code>one two</code> &nbsp; (or <code>No match</code> if the string/<code>$IFS</code> is changed so to fail)</p>\n\n<p>All parts of the above can be done in other ways. Comments</p>\n\n<ul>\n<li><p>The checks (for non-alnum, <code>test/</code>, and overall match) are given simply as it is not specified what flow control is suitable. Restructure for nicer program organization</p></li>\n<li><p>The iteration used to check array elements is clear but slow; there are other ways. If there is interest in this please let me know and I'll edit. Also, the string itself can be checked but then we can't (simply) use <code>:alnum:</code> since it <em>does</em> contain <code>/</code></p></li>\n<li><p>The <code>read</code> is practically the most efficient way to break a string by separators into an array, with no forks or external tools or resources</p></li>\n<li><p>On newer bash (4.3+ ?) you can just do <code>unset 'array[-1]'</code> etc</p></li>\n<li><p>In recent bash the above changes <code>$IFS</code> only within the current command</p></li>\n<li><p>If there was no match the whole string is in the first element of <code>ary</code>, so I check size</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536392208, "post_id": 52232669, "comment_id": 91415242, "body": "This works great for optional /something is present,  without it for an example test/alpha_numeric-9034 any of these returns nothing. I am I missing something here?"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536393747, "post_id": 52232669, "comment_id": 91415549, "body": "@RuwankaMadhushan It counts the number of field separated by /, if its only two filed (one /) do not print, it need to be minimum 3 field (two /), then it prints second field if it is in correct format."}, {"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536410416, "post_id": 52232669, "comment_id": 91419357, "body": "Ok but I am also interested in scenario where there can be only two fields as per updated question"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 1, "creation_date": 1536555971, "post_id": 52232669, "comment_id": 91450247, "body": "@RuwankaMadhushan Just change <code>NF&gt;2</code> to <code>NF&gt;1</code>"}], "tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 1, "last_activity_date": 1536388576, "last_edit_date": 1536388576, "creation_date": 1536388131, "answer_id": 52232669, "question_id": 52231582, "link": "https://stackoverflow.com/questions/52231582/extract-matching-group-between-slashes-using-sed-grep-breaks-for-special-chars/52232669#52232669", "title": "Extract Matching group between slashes using sed, grep breaks for special chars", "body": "<p>Here is an <code>awk</code></p>\n\n<pre><code>awk -F\\/ 'NF&gt;2 &amp;&amp; $2 ~ /^[0-9a-zA-Z_-]+$/ {print $2}'\nalpha_numeric-9034\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>awk -F\\/ 'NF&gt;2 &amp;&amp; $2 ~ /^[[:alnum:]_-]+$/ {print $2}'\nalpha_numeric-9034\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>awk -F\\/ 'NF&gt;2 &amp;&amp; $2 !~ /[!@#$%^&amp;*()+=~]/ {print $2}'\nalpha_numeric-9034\n</code></pre>\n\n<p>It test if there are minimum 2 <code>/</code> and print the first data between <code>//</code> if it contains the correct value<br>\nPS I would say that <code>-</code> and <code>_</code> is special chars</p>\n"}, {"comments": [{"owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 0, "creation_date": 1536391858, "post_id": 52232999, "comment_id": 91415168, "body": "Works like charm, What is the perfect way to go? I&#39;m not familiar with bash stuff, hint would be great! As in @zdim answer I thought of using cut and do some ifs, is it a good one?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "edited": false, "score": 2, "creation_date": 1536392073, "post_id": 52232999, "comment_id": 91415212, "body": "Sed is short and so handy but not perfect in the sense that it is a find &amp; replace tool. Perl would be the way to go. Just have it in your environment."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536415877, "post_id": 52232999, "comment_id": 91420727, "body": "wrt <code>If someone has a hint</code> - the regexp matches the leftmost longest string so when the part after <code>|</code> is <code>.</code> the part before the <code>|</code> is longer and so <code>\\1</code> is populated but when it&#39;s <code>.*</code> THAT is always the longest and in that case there is no capture group being populated (since the 2 capture groups are only populated on the left side of the <code>|</code>) so <code>\\1</code> is not populated, hence the blank output lines."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536423903, "post_id": 52232999, "comment_id": 91422871, "body": "@EdMorton That&#39;s it. However, it&#39;s not the regexp that follows the leftmost longest rule. It&#39;s the engine."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536430099, "post_id": 52232999, "comment_id": 91424694, "body": "I didn&#39;t say the regexp did it (I&#39;m not even sure what that would mean), I said the regexp matches and yes, it&#39;s the regexp engine that is identifying the leftmost longest string that matches the given regexp."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536464534, "post_id": 52232999, "comment_id": 91430883, "body": "The <i>regexp matches</i> is so general that it would not be right in other similar contexts. Hence saying <i>engine</i> is more tied to this answer."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536466849, "post_id": 52232999, "comment_id": 91431170, "body": "Can you every say <code>the regexp matches the WHATEVER string</code> without that meaning that the engine interpreting the regexp is selecting the WHATEVER string from the input as a result of performing a match using that regexp? There is no ambiguity in what I said - <code>the regexp matches the leftmost longest string</code>. I don&#39;t see how it could be interpreted to mean anything other than that the regexp in question is matching the leftmost longest string in the input in question."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1536469494, "post_id": 52232999, "comment_id": 91431527, "body": "In fact, there is ambiguity. With the <i>regexp matches the leftmost longest string...</i> next time that I need to do a task in JS or PCRE or even if I wanted to go with Perl CLI instead of SED / AWK to perform the same exact match, I&#39;ll come to this point that <i>The leftmost longest match, huh?</i>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536500222, "post_id": 52232999, "comment_id": 91438358, "body": "You asked what might be wrong with your script. I told you what is wrong with your script. And you think people will now assume that what I told you is wrong with your script is also true of every other script in every other tool. I&#39;m trying to come up with a real world analogy to help you see how silly that sounds to me, best I can think of is - your car broke down and you asked what&#39;s wrong and I said &quot;the gas tank is empty&quot; and people then assume that the gas tank is empty on every car. idk if that really captures it but it&#39;s in the ballpark. Anyway - all the best with your programming."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1536507938, "post_id": 52232999, "comment_id": 91440321, "body": "<i>&quot;Works like charm&quot;</i> is probably the <i>worst</i> criterion you could apply to a program. Less awful, but still bad, are <i>&quot;is it fast?&quot;</i> and <i>&quot;does it minimise memory?&quot;</i>. Much more useful are <i>&quot;do you understand how it works?&quot;</i>, <i>&quot;could you alter this to fulfil a slightly different requirement?&quot;</i>, and <i>&quot;is it necessary to use several different languages?&quot;</i>"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536511522, "post_id": 52232999, "comment_id": 91441300, "body": "@EdMorton I should have thanked you earlier, my bad so thank you. But the helpful note and misused terminology have nothing in common."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1536511530, "post_id": 52232999, "comment_id": 91441302, "body": "@EdMorton Your example need to change a bit to hold true for this case: Your car broke down and you ask <i>&quot;What is wrong?&quot;</i> and I say, <i>&quot;Your gas tank implements the <b>leftmost-X</b> feature but it&#39;s running out&quot;</i>. Later, you decide to pull it off the car and have your beloved gas tank into another car. The same problem occurs and you come to me and ask again <i>&quot;What is wrong?&quot;</i> and I say, <i>&quot;Your gas tank implements the <b>rightmost-X</b> feature but it&#39;s running out.&quot;</i>. <i>&quot;Huh?&quot;</i> you say, <i>&quot;It&#39;s all because of the car&quot;</i>, I finish."}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": true, "score": 1, "last_activity_date": 1536391365, "creation_date": 1536391365, "answer_id": 52232999, "question_id": 52231582, "link": "https://stackoverflow.com/questions/52231582/extract-matching-group-between-slashes-using-sed-grep-breaks-for-special-chars/52232999#52232999", "title": "Extract Matching group between slashes using sed, grep breaks for special chars", "body": "<p>I'm going to add a sed solution however sed wouldn't be a perfect way to go:</p>\n\n<pre><code>sed -r 's~^test/([[:alnum:]_-]*)(/|$)|.~\\1~g'\n</code></pre>\n\n<p>This looks for an input string starting with <code>test</code>, following a <code>/[[:alnum:]_-]*</code> pattern up to a <code>/</code> or end of input string. The other side of alternation is a period which is supposed to match on failure. <code>g</code> flag is enabled as well. (I'm not sure why <code>sed -r 's~^test/([[:alnum:]_-]*)(/|$)|.*~\\1~'</code> didn't work. If someone has a hint he / she is welcome.)</p>\n\n<p>Test cases:</p>\n\n<pre><code>$ echo 'test/al_num-0$' | ...\n\n$ echo 'test/al_num-0' | ...\nal_num-0\n$ echo 'test/al_num-0/something' | ...\nal_num-0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536465149, "post_id": 52236060, "comment_id": 91430946, "body": "I can&#39;t help but ask: is this more &quot;<i>clear, simple, efficient, robust, portable</i>&quot; than the short(er) Perl line?  Any one of it?  I am only commenting on &quot;<i>just use awk</i>&quot;. Why not, say, &quot;<i>with awk</i>&quot; instead?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536466376, "post_id": 52236060, "comment_id": 91431112, "body": "Yes, absolutely it is. perl isn&#39;t installed on all UNIX machines while awk is hence portability. Anyone can see exactly what the awk script does whereas the perl script is a convoluted mess of arcane single-char options and instructions hence clarity and simplicity. awk is doing a string comparison plus small trivial regexp comparison using a non-PCRE engine hence efficiency. I don&#39;t have perl on my box to test with but it looks like it&#39;d need rework if &quot;test&quot; contained RE metachars plus the <code>$</code> needs to be replaced hence robustness. I listed the benefits because the OP may not realize them."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536470153, "post_id": 52236060, "comment_id": 91431622, "body": "Wow. I disagree with just about all of that, except indeed with portability. (I never timed them either but that can only be about tens of milliseconds, irrelevant in a one-liner.)  OK, I respect your opinion and surely didn&#39;t mean to attack your post (I didn&#39;t realize that you meant all that, actually.) I&#39;ll gladly remove the comment if you wish.  Note that it can be almost the same in Perl as yours, but the one I posted catches things between any number of <code>&#47;</code> pairs.  (It doesn&#39;t with just one <code>&#47;</code> (not a pair), what was added as a requirement later.)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536499316, "post_id": 52236060, "comment_id": 91438157, "body": "I understand that somehow people get used to it and manage to memorize all the single character perl instructions and syntax but the reality is that no-one creates cartoons like <a href=\"https://www.zoitz.com/archives/13\" rel=\"nofollow noreferrer\">zoitz.com/archives/13</a> about awk syntax and you might want to read <a href=\"https://swtch.com/~rsc/regexp/regexp1.html\" rel=\"nofollow noreferrer\">swtch.com/~rsc/regexp/regexp1.html</a> about perls regexp execution speed. I know people CAN write legible perl but for some reason they don&#39;t and instead idiomatic perl apparently favors brevity at the cost of everything else. I&#39;m fine whether you leave your comment or not - whatever you prefer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536532549, "post_id": 52236060, "comment_id": 91446438, "body": "Well, Perl&#39;s a tool like any other, with its rules and the good and the bad.  And it&#39;s a very different kind of a tool from awk.  I don&#39;t know what you refer to with &quot;<i>single character instructions</i>&quot; -- the one-liner&#39;s flags? I can accept those given that they avail me the power tool like Perl in a one-line program (not that I like those!)."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536532727, "post_id": 52236060, "comment_id": 91446464, "body": "Yes. <code>perl -wnE&#39;@m = m{...</code> - you&#39;ve got to admit that&#39;s pretty darn obscure! 3 more consonants and the batman symbol and it might summon Cthulhu! I&#39;m not asking for an explanation just pointing out that its intent, caveats, etc. are far from obvious."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536532735, "post_id": 52236060, "comment_id": 91446467, "body": "Yes, one can definitely write Perl that&#39;s easy to read (once readers can swallow the sigils); I have a hard-core Python developer at work (who knows no Perl) who reads my modules written for his server, with very little help. But I&#39;m OK with conciseness as well, if it&#39;s well crafted and comes with a well designed interface; becomes a little in-line library. As for regex, I consider it a feature that it is so well integrated in the language.  Like the addition of thread support to  C++  -- now I only use that, even as it is far from perfect."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536532884, "post_id": 52236060, "comment_id": 91446506, "body": "One-liner switches -- sure, one has to <i>know</i> what those are for.  But isn&#39;t it like that with any language?  I recall my first look at the &quot;clear and beautiful&quot; Python -- couldn&#39;t follow <i>anything</i>, and I did have some half a dozen or so languages/tools under my belt by then. (I like Python, again, it&#39;s a useful tool.)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536533868, "post_id": 52236060, "comment_id": 91446671, "body": "wrt <code>I&#39;m OK with conciseness as well</code> - everyone is, conciseness is a common goal when writing software. My point is that perl code is not concise, it&#39;s just brief. Perl has a million bells and whistles to encourage users to write brief code, most often at the expense of clarity. Awk deliberately, by design, does not have all those bells and whistles so the resulting code even when brief is still usually clear, i.e. it is concise. Anyway, this debates been had a million times, no-ones going to change their opinion on any of it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1536535066, "post_id": 52236060, "comment_id": 91446874, "body": "&quot;<i>this debates been had a million times</i>&quot; -- yes, and yes for what you say for Perl. I accept it as it is, with its good and bad. I indeed won&#39;t change my opinion suddenly (I&#39;ve been staring at all you say for years) but It&#39;s good to be reminded of the whole context."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1536417198, "last_edit_date": 1536417198, "creation_date": 1536415512, "answer_id": 52236060, "question_id": 52231582, "link": "https://stackoverflow.com/questions/52231582/extract-matching-group-between-slashes-using-sed-grep-breaks-for-special-chars/52236060#52236060", "title": "Extract Matching group between slashes using sed, grep breaks for special chars", "body": "<p>Keep it clear, simple, efficient, robust, portable, etc. and just use awk:</p>\n\n<pre><code>$ awk -F'/' '($1==\"test\") &amp;&amp; ($2~/^[[:alnum:]_-]+$/){print $2}' file\nalpha_numeric-9034\nalpha_numeric-9034\nQR-9034\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>$ awk -F'/' '{print (($1==\"test\") &amp;&amp; ($2~/^[[:alnum:]_-]+$/) ? $2 : \"\")}' file\nalpha_numeric-9034\n\nalpha_numeric-9034\nQR-9034\n</code></pre>\n\n<p>depending on if you want nothing or a blank line output given non-matching input.</p>\n"}], "owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 52232999, "answer_count": 4, "score": 1, "last_activity_date": 1536476080, "creation_date": 1536375266, "last_edit_date": 1536391518, "question_id": 52231582, "link": "https://stackoverflow.com/questions/52231582/extract-matching-group-between-slashes-using-sed-grep-breaks-for-special-chars", "title": "Extract Matching group between slashes using sed, grep breaks for special chars", "body": "<p>I want to extract string between two forward slashes with some word e.g. <code>test</code> as string start (before the first slash), <strong>but last slash and after content of it is optional</strong>. I am able to extract it correctly but if there is special chars in string I want to extract, it should fail.</p>\n\n<pre><code>some_word/part_i_want_to_extract/optional_string\n                                ^               \n                                | from here is optional (including /)\n</code></pre>\n\n<p>Also part I want extract should only contain alpha numerics, <code>_</code> and <code>-</code>.</p>\n\n<p>examples for sed:</p>\n\n<pre><code>echo 'test/alpha_numeric-9034/something' | sed -r 's|^.*(test)/([[:alnum:]_-]*)(/[[:alnum:]]*)?.*$|\\2|' // returns alpha_numeric-9034\n\necho 'test/alpha_numer$ic-9034/something' | sed -r 's|^.*(test)/([[:alnum:]_-]*)(/[[:alnum:]]*)?.*$|\\2|' // returns alpha_numer\n\necho 'test/alpha_numer$ic-9034' | sed -r 's|^.*(test)/([[:alnum:]_-]*)(/[[:alnum:]]*)?.*$|\\2|' // returns alpha_numer\n</code></pre>\n\n<p>I want to second/third to fail (should return nothing), How would I do that?</p>\n\n<p>same examples in grep:</p>\n\n<pre><code>echo 'test/alpha_numeric-9034/something' | grep -oP \"^(test)\\/\\K([a-zA-Z0-9_-]*)(?=\\/[a-zA-Z0-9]*)?\" // returns alpha_numeric-9034\n\necho 'test/alpha_numer$ic-9034/something' | grep -oP \"^(test)\\/\\K([a-zA-Z0-9_-]*)(?=\\/[a-zA-Z0-9]*)?\" // returns alpha_numer\n\necho 'test/alpha_numer$ic-9034' | grep -oP \"^(test)\\/\\K([a-zA-Z0-9_-]*)(?=\\/[a-zA-Z0-9]*)?\" // returns alpha_numer\n</code></pre>\n\n<p>Also in grep using <code>$</code> at end doesn't give anything. <a href=\"https://regex101.com/r/vw81v7/2\" rel=\"nofollow noreferrer\">Here is a demo</a> which works for php based regex, I couldn't find any working perl tool. Any help would be grateful.</p>\n\n<p>More examples about what should return</p>\n\n<pre><code>'test/alpha_numeric-9034/something' -&gt; alpha_numeric-9034\n'test/alpha_numer$ic-9034/something' -&gt; should be nothing (since it has $)\n'test/alpha_numeric-9034' -&gt; alpha_numeric-9034\n'test/QR-9034' -&gt; QR-9034\n</code></pre>\n"}, {"tags": ["mysql", "perl", "dbi", "perlbrew"], "comments": [{"owner": {"reputation": 417, "user_id": 168161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db1c27523043366c2ba1c9be1fa3fa23?s=128&d=identicon&r=PG", "display_name": "Dave Jacoby", "link": "https://stackoverflow.com/users/168161/dave-jacoby"}, "edited": false, "score": 0, "creation_date": 1536452624, "post_id": 52230926, "comment_id": 91429510, "body": "Do you have the MySQL libraries installed? I&#39;m thinking the dev libraries. Not the Perl module, but the from-MySQL dev libraries?"}], "answers": [{"tags": [], "owner": {"reputation": 150, "user_id": 9850416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHtZ9.png?s=128&g=1", "display_name": "Yehor Levchenko", "link": "https://stackoverflow.com/users/9850416/yehor-levchenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1536562975, "creation_date": 1536562975, "answer_id": 52252624, "question_id": 52230926, "link": "https://stackoverflow.com/questions/52230926/dbdmysql-installation-of-driver-failed/52252624#52252624", "title": "DBD::mysql installation of driver failed", "body": "<p>Fixed: for some reason DBI/DBD won't work with latest MySQL (8+) on mac. Downgrading to version 5 solves this problem.</p>\n"}], "owner": {"reputation": 150, "user_id": 9850416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHtZ9.png?s=128&g=1", "display_name": "Yehor Levchenko", "link": "https://stackoverflow.com/users/9850416/yehor-levchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1536563012, "creation_date": 1536365558, "last_edit_date": 1536563012, "question_id": 52230926, "link": "https://stackoverflow.com/questions/52230926/dbdmysql-installation-of-driver-failed", "title": "DBD::mysql installation of driver failed", "body": "<p>I'm trying to run Perl DBI on Mac OS and keep hitting into this error:</p>\n\n<blockquote>\n  <p>install_driver(mysql) failed: Can't load '/Library/Perl/5.18/darwin-thread-multi-2level/auto/DBD/mysql/mysql.bundle' for module DBD::mysql: dlopen(/Library/Perl/5.18/darwin-thread-multi-2level/auto/DBD/mysql/mysql.bundle, 1): Library not loaded: @rpath/libmysqlclient.21.dylib<br>\n  Referenced from: /Library/Perl/5.18/darwin-thread-multi-2level/auto/DBD/mysql/mysql.bundle\n      Reason: image not found at /System/Library/Perl/5.18/darwin-thread-multi-2level/DynaLoader.pm line 194.<br>\n      at (eval 4) line 3.<br>\n      Compilation failed in require at (eval 4) line 3.<br>\n      Perhaps a required shared library or dll isn't installed where expected\n      at test.pl line 12.  </p>\n</blockquote>\n\n<p>I've already tried to use perlbrew, ActivePerl, symlinks, but no luck.</p>\n\n<p><strong>Fixed: for some reason DBI/DBD won't work with latest MySQL (8+) on mac. Downgrading to version 5 solves this problem.</strong></p>\n"}, {"tags": ["json", "perl", "csv"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536365410, "post_id": 52230756, "comment_id": 91411348, "body": "So there are multiple parents in the file?  Why does <code>children:</code> also have <code>children:</code> -- are there multiple levels, so that some parents are children of other parents ...?  If so, is there any limit?"}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536365625, "post_id": 52230756, "comment_id": 91411380, "body": "@zdim you can view it as a family tree of process. Each process can have a one or more children. Also , There are process without children. It can be multi level. Each process has only one perent (except root)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536374745, "post_id": 52230756, "comment_id": 91412501, "body": "How big is this whole thing? Say, how many lines in a file, roughly how many hierarchy levels?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536376545, "post_id": 52230756, "comment_id": 91412738, "body": "Can you provide a (short but consistent) sample of input data? So that everybody is on the same page."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536399278, "post_id": 52230756, "comment_id": 91416704, "body": "@zdim Please check out my edit (I added a real-run example). it can be really long."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536517806, "post_id": 52230756, "comment_id": 91442851, "body": "@TTaJTa4: Please answer <i>&quot;how many lines in a file, roughly how many hierarchy levels?&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536513341, "post_id": 52235915, "comment_id": 91441769, "body": "This is excellent. I had considered something similar, but couldn&#39;t fathom a way to exclude all of the non-root elements of the hash. But of course the <i>value</i> of <code>$nodes{NA}</code> node is a reference to the root of the tree that we&#39;re interested in, and no other keys of <code>%nodes</code> are involved\u2014they were just a tool to build the tree. It&#39;s startling that this can be done with just a single hash. Am I now going to be told that this is a known algorithm? What happens if the data represents disconnected data?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536515559, "post_id": 52235915, "comment_id": 91442294, "body": "@Borodin I don&#39;t know if his algorithm has a name. I came up with it myself for this answer. If there are multiple roots (or nodes above <code>NA</code>), they&#39;re going to be ignored (we only care about stuff under <code>NA</code>). If there are any loops in the graph, we&#39;re going to leak memory (and probably get either an exception or an infinite loop in the JSON encoder)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536516957, "post_id": 52235915, "comment_id": 91442636, "body": "Yes, the check for self-consistent data, and the existence of a root are missing, but this is a fine basis. I normally reach for <a href=\"https://metacpan.org/pod/Graph\" rel=\"nofollow noreferrer\"><code>Graph</code></a>, and have written the vestiges of a plugin for it, but I never got as far as looking at how it worked."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536517073, "post_id": 52235915, "comment_id": 91442668, "body": "<i>&quot;I don&#39;t know if [t]his algorithm has a name&quot;</i> I doubt it: it&#39;s essentially building a hash tree, with the very neat result that the child of the root contains none of the intermediate data. I may write something that will find any roots (nodes with no parent) in the result, and check for circularity etc. Thank you."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1536414234, "creation_date": 1536414234, "answer_id": 52235915, "question_id": 52230756, "link": "https://stackoverflow.com/questions/52230756/convert-nested-csv-data-file-to-json/52235915#52235915", "title": "Convert nested CSV data file to JSON", "body": "<p>Here's one way to do it:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON::PP ();\n\nmy %nodes;\n$nodes{NA} = { number =&gt; 'NA', status =&gt; 0 };\n\nwhile (my $line = readline DATA) {\n    chomp $line;\n    my ($id, $parent_id, $status) = split /,/, $line;\n    my $node = $nodes{$id} //= {};\n    $node-&gt;{number} = 0 + $id;\n    $node-&gt;{status} = 0 + $status;\n    push @{ $nodes{$parent_id}{children} }, $node;\n}\n\nmy $jsonpp = JSON::PP-&gt;new-&gt;pretty-&gt;canonical;\nprint $jsonpp-&gt;encode($nodes{NA});\n\n__DATA__\n7,5,0\n5,NA,0\n3,5,1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n   \"children\" : [\n      {\n         \"children\" : [\n            {\n               \"number\" : 7,\n               \"status\" : 0\n            },\n            {\n               \"number\" : 3,\n               \"status\" : 1\n            }\n         ],\n         \"number\" : 5,\n         \"status\" : 0\n      }\n   ],\n   \"number\" : \"NA\",\n   \"status\" : 0\n}\n</code></pre>\n\n<p>The only reason</p>\n\n<pre><code>$nodes{NA} = { number =&gt; 'NA', status =&gt; 0 };\n</code></pre>\n\n<p>is there is to give the root node a <code>number</code> and <code>status</code> field. It doesn't otherwise exist in your CSV input, so without that line you'd get a root object containing only a <code>children</code> field.</p>\n\n<p>For every CSV record we extract its id, the corresponding parent id, and the status.</p>\n\n<p>If we've already created a node for this id (this happens if another node has already specified this node as its parent), we just use the existing node; otherwise we create a new empty node and store it in <code>%nodes</code>.</p>\n\n<p><code>%nodes</code> is our universe of nodes indexed by their id.</p>\n\n<p>We always set the <code>number</code> and <code>status</code> fields. The <code>0 +</code> part is to explicitly convert the values to numbers (otherwise they'd be quoted in the JSON output).</p>\n\n<p>We add our current node to the list of children of its parent (which is found in <code>$nodes{$parent_id}{children}</code>).</p>\n\n<p>At the end we simply pretty-print the tree under <code>$nodes{NA}</code>, including its children, their children-children, and so on.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1536517689, "creation_date": 1536363525, "last_edit_date": 1536517689, "question_id": 52230756, "link": "https://stackoverflow.com/questions/52230756/convert-nested-csv-data-file-to-json", "title": "Convert nested CSV data file to JSON", "body": "\n\n<p>I am trying to create a Perl function which converts CSV with a special format to JSON.</p>\n\n<p>I have a CSV file where every line has the following format</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>child_number,parent_number,status\n</code></pre>\n\n<p>The root parent (without a parent) has <code>parent_number</code> = <code>NA</code>.</p>\n\n<p>My goal is to convert into JSON format like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\nnumber:\nstatus:\nchildren: [\n    {\n        number: \n        status: \n        children: [\n            {\n                number: \n                status:\n            }\n        ]\n    },\n        number: \n        status: \n        children: [\n            {\n                number: \n                status:\n            }\n        ]\n     ]\n}\n</code></pre>\n\n<p>I inserted the contents of the CSV file into an array and found the line with no parent</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>foreach my $line ( @csv_arr ) {\n    ($child, $perent, $status) = split(/,/,$line);\n    last if ( $perent eq \"NA\" );\n}\n\nreturn 0 unless($perent eq \"NA\");\n</code></pre>\n\n<p>I would like to get the children for each <code>$perent</code> and insert them into the data structure. I could use the following</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>push @{ $json_struct-&gt;{usage} }, {\n    number   =&gt; $perent,\n    children =&gt; getChildren(),\n};\n\n...\n\nmy @json_arr = JSON::PP-&gt;new-&gt;encode($json_struct);\n</code></pre>\n\n<p>In order to explain myself better, please consider the following example</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt; cat ./csv_file\n7,5,0\n5,NA,0\n3,5,1\n</code></pre>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt; cat ./json_file\n{\n  number: NA\n  status: 0\n  children: [\n      {\n          number: 5\n          status: 0\n          children: [\n              {\n                  number: 3\n                  status: 1\n              },\n              {\n                  number: 7\n                  status: 0\n              }\n          ]\n      }\n  ]\n}\n</code></pre>\n\n<p>These are the contents of the CSV file after a real run</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>7696,44641,0                                                                                                \n44654,44641,0                                                                                              \n44646,44641,0                                                                                               \n44644,44641,0                                                                                               \n44651,44649,0                                                                                               \n7700,44641,0\n7691,44641,0\n44657,44641,0\n7699,7698,0\n7692,44641,0\n44650,44649,0\n44661,44660,0\n44656,44654,1\n44659,44641,0\n44648,44646,0\n7695,7694,0\n44662,44660,0\n44641,NA,0\n7701,7700,0\n7698,44641,0\n44653,44651,1\n44645,44644,0\n44647,44646,0\n44649,44641,0\n44660,44641,0\n7697,7696,0\n7689,7688,0\n7694,44641,0\n44658,44657,1\n7693,44641,0\n7688,44641,0\n</code></pre>\n\n<p>What is the proper way to implement this method in Perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1536336077, "post_id": 52225833, "comment_id": 91401544, "body": "For non sequential values, you need something like <a href=\"http://p3rl.org/Algorithm::Diff\" rel=\"nofollow noreferrer\">Algorithm::Diff</a> that finds the Longest Common Subsequence."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 2538857, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d200c37294f00a7699a69df5847b5ce0?s=128&d=identicon&r=PG", "display_name": "mbbxedh2", "link": "https://stackoverflow.com/users/2538857/mbbxedh2"}, "edited": false, "score": 0, "creation_date": 1536340249, "post_id": 52226493, "comment_id": 91403321, "body": "Thanks for the thought Chris (and a nice one to know of for the future)... but it won&#39;t help me here - as I expect non-sequential values really (its just sequential for the example). The definition of a hole or a gap is only if it&#39;s in arr1 and not arr2 - or vice-versa... and I need to figure this out in an iterative manner (as when there is a match I then do some more examination of those data objects)"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": -1, "last_activity_date": 1536338748, "last_edit_date": 1536338748, "creation_date": 1536337899, "answer_id": 52226493, "question_id": 52225833, "link": "https://stackoverflow.com/questions/52225833/perl-looping-through-two-arrays-to-find-gaps/52226493#52226493", "title": "Perl - looping through two arrays to find &quot;gaps&quot;", "body": "<p>I don't know if this solves your problem, but <a href=\"https://metacpan.org/pod/Set::IntSpan\" rel=\"nofollow noreferrer\">Set::IntSpan</a> can detect 'holes' in s sequence (even if unordered)</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Set::IntSpan;\n\nmy @arr1 = ( 0, 1, 3, 4);\n\nmy $set = Set::IntSpan-&gt;new(@arr1);\n\nprint $set-&gt;holes;\n</code></pre>\n\n<p>Prints: 2</p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1536345197, "creation_date": 1536345197, "answer_id": 52227979, "question_id": 52225833, "link": "https://stackoverflow.com/questions/52225833/perl-looping-through-two-arrays-to-find-gaps/52227979#52227979", "title": "Perl - looping through two arrays to find &quot;gaps&quot;", "body": "<blockquote>\n  <p>The definition of a hole or a gap is only if it's in arr1 and not arr2 - or vice-versa... and I need to figure this out in an iterative manner (as when there is a match I then do some more examination of those data objects)</p>\n</blockquote>\n\n<p>Hash tables are your friend. Something like this snippet:</p>\n\n<pre><code>use List::Util qw/max/;\nmy %hash1 = map { $_ =&gt; 1 } @arr1;\nmy %hash2 = map { $_ =&gt; 1 } @arr2;\nmy $len = max($arr1[$#arr1], $arr2[$#arr2]);\nfor my $n (0 .. $len) {\n  if (exists $hash1{$n} and exists $hash2{$n}) {\n    # n is in both lists\n  } elsif (exists $hash1{$n}) {\n    # n is only in the first one.\n  } elsif (exists $hash2{$n}) {\n    # n is only in the second one.\n  } else {\n    # Not in either one\n  }\n}\n</code></pre>\n\n<p>might do the trick for you.</p>\n"}], "owner": {"reputation": 137, "user_id": 2538857, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d200c37294f00a7699a69df5847b5ce0?s=128&d=identicon&r=PG", "display_name": "mbbxedh2", "link": "https://stackoverflow.com/users/2538857/mbbxedh2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1536345197, "creation_date": 1536335013, "question_id": 52225833, "link": "https://stackoverflow.com/questions/52225833/perl-looping-through-two-arrays-to-find-gaps", "title": "Perl - looping through two arrays to find &quot;gaps&quot;", "body": "<p>So my code setup is as per below</p>\n\n<pre><code>#!/usr/bin/perl -w\n# vim: set expandtab ts=2 bg=dark smartindent shiftwidth=2 softtabstop=2 :\n#\n\nuse strict;\nuse Data::Dumper;\nuse Getopt::Long qw(GetOptions);\n####use warnings;\nuse 5.010;\n\n\n####my @arr1 = ( \"0\", \"1\", \"2\", \"3\", \"4\");    # OK\nmy @arr1 = ( \"0\", \"1\", \"3\", \"4\");             # Gap-1... seq2\nmy $arr1_len = scalar @arr1;\n##\nmy @arr2 = ( \"0\", \"1\", \"2\", \"3\", \"4\");        # OK\n####my @arr2 = ( \"0\", \"1\", \"3\", \"4\");         # Gap-2... seq2\nmy $arr2_len = scalar @arr2;\n</code></pre>\n\n<p>I am trying to loop through each list and compare it with eachother and detect any gaps in the sequence (the values are seq numbers of each stream - at the moment they are sequential, but they dont need to be/ wont be in the real world example) </p>\n\n<p>EFFORT 1= if I use an inner for loop for arr2, it always starts at indx 0 - i.e. the pointer/ count doesn't tick on after we have a match </p>\n\n<p>EFFORT 2= if I do a fake inner/ arr2 loop then I can't go to the next j without increasing the i counter </p>\n\n<p>... I suspect there must be a simple way to do this - but I can't figure it out </p>\n\n<p><strong>EFFORT 1</strong></p>\n\n<pre><code>ARR1: for (my $i=0; $i &lt;= ($arr1_len-1); $i++) {\n  print \"i[$i]=$arr1[$i]\\n\";\n\n  ARR2: for (my $j=0; $j &lt;= ($arr2_len-1); $j++) {\n    print \"... j[$j]=$arr2[$j] -- ((i[$i]=$arr1[$i]))\\n\";\n\n    # seq num match\n    if ( $arr1[$i] eq $arr2[$j]){\n      print \"MATCH of seq_num [$arr1[$i]|$arr2[$j]]\\n\";\n      shift @arr2;\n      next ARR1;\n    } # end of seq num match\n\n    # gap in arr2\n    if ( $arr1[$i] &lt; $arr2[$j]){\n      print \"GAP in new [$arr1[$i]|$arr2[$j]]... New Missing $arr1[$i]\\n\";\n      next ARR1;\n    } # end of gap in arr2\n\n    # gap in arr1\n    if ( $arr2[$j] &lt; $arr1[$i]){\n      print \"GAP in old [$arr1[$i]|$arr2[$j]]... Old Missing $arr2[$j]\\n\";\n      next ARR2;\n    } # end of gap in arr1\n  } # end of j loop\n} # i loop\n</code></pre>\n\n<p><strong>EFFORT 2</strong></p>\n\n<pre><code>my $j = 0;\n\nARR1: for (my $i=0; $i &lt;= ($arr1_len-1); $i++) {\n  print \"i[$i]=$arr1[$i]\\n\";\n\n  if ( $j &lt;= ($arr2_len-1) ) {\n    print \"... j[$j]=$arr2[$j] -- ((i[$i]=$arr1[$i]))\\n\";\n\n    # seq num match\n    if ( $arr1[$i] eq $arr2[$j]){\n      print \"MATCH of seq_num [$arr1[$i]|$arr2[$j]]\\n\"; \n      $j++;\n      next ARR1;\n    } # end of seq_num match\n\n    # probable gap in arr2\n    if ( $arr1[$i] &lt; $arr2[$j]){\n      print \"GAP in new [$arr1[$i]|$arr2[$j]]... New Missing $arr1[$i]\\n\";\n      next ARR1;\n    } # end of gap in arr2\n\n    # probable gap in arr1\n    if ( $arr2[$j] &lt; $arr1[$i]){\n      print \"GAP in old [$arr1[$i]|$arr2[$j]]... arr1 Missing $arr2[$j]\\n\";\n      # CANT NEXT J WITHOUT INCREASING I  ?!?\n    } # end of gap in arr1\n\n  } # end of fake j loop!\n} # end of i loop\n</code></pre>\n"}, {"tags": ["perl", "bnf", "ebnf"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 1, "creation_date": 1536342487, "post_id": 52225492, "comment_id": 91404182, "body": "Welcome to stackoverflow. This is not a free code writing service. What did you try so far? Please <a href=\"https://stackoverflow.com/posts/52225492/edit\">edit</a> your question and post your code as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>! What happened when you ran it? What did you expect to happen instead? What specifically are you having problems with?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536359395, "post_id": 52225694, "comment_id": 91410233, "body": "Re &quot;<i>consider the differences between the expressions <code>$foo</code>, <code>$foo{bar}</code>, and <code>$foo-&gt;{bar}</code></i>&quot;,  That can actually easily handled be BNF. Two of the real problems are that 1) Perl has ambiguities (e.g. <code>{}</code> can be both a bare loop or a hash constructor), and 2) earlier parts of the program can affect how later parts are parsed (e.g. prototypes and <code>BEGIN</code> blocks)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536359821, "post_id": 52225694, "comment_id": 91410332, "body": "<code>&lt;lhs&gt; &quot;=&quot; &lt;rhs&gt;</code> should be <code>&lt;expr&gt; &quot;=&quot; &lt;expr&gt;</code>. Any expression is allowed on the LHS of an assignment. (An lvalue check performed by the parser may later result in an error, though)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536359968, "post_id": 52225694, "comment_id": 91410364, "body": "<code>;</code> is more a statement separator than a statement terminator; it&#39;s only required if followed by another statement."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536360063, "post_id": 52225694, "comment_id": 91410382, "body": "You appear to have attempted to list all sigils, but missed <code>&amp;</code>."}], "tags": [], "owner": {"reputation": 64541, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "is_accepted": false, "score": 4, "last_activity_date": 1536334406, "creation_date": 1536334406, "answer_id": 52225694, "question_id": 52225492, "link": "https://stackoverflow.com/questions/52225492/how-do-you-write-perl-statement-age-25-in-bnf-or-ebnf/52225694#52225694", "title": "How do you write Perl statement $age = 25; in BNF or EBNF", "body": "<p>I'd write a grammar perhaps something like</p>\n\n<pre><code>&lt;statement&gt; ::= &lt;assignment&gt; \";\"\n&lt;assignment&gt; ::= &lt;lhs&gt; \"=\" &lt;rhs&gt;\n&lt;lhs&gt; ::= &lt;var&gt;\n&lt;rhs&gt; ::= &lt;expr&gt;\n&lt;var&gt; ::= (\"@\" | \"$\" | \"%\" | \"*\") &lt;name&gt;\n&lt;expr&gt; ::= &lt;var&gt; | &lt;number&gt;\n</code></pre>\n\n<p>That would match a range of Perl-ish assignments (given suitable definitions for <code>&lt;name&gt;</code> and <code>&lt;number&gt;</code>); not just the one you wrote but also</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$age = 25;\n@foo = $bar;\n%baz = 9999999;\n</code></pre>\n\n<p>Perl has some syntactic complexities that make it hard to fully check at this level (consider the differences between the expressions <code>$foo</code>, <code>$foo{bar}</code>, and <code>$foo-&gt;{bar}</code>) but if you're willing to do a second pass of type checking than it should be a fairly typical statement-and-expression grammar.</p>\n"}], "owner": {"reputation": 11, "user_id": 8880586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eb4a4cd986f3a2230e27d6ac30894d7?s=128&d=identicon&r=PG&f=1", "display_name": "David Nunley", "link": "https://stackoverflow.com/users/8880586/david-nunley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536356347, "creation_date": 1536333554, "last_edit_date": 1536356347, "question_id": 52225492, "link": "https://stackoverflow.com/questions/52225492/how-do-you-write-perl-statement-age-25-in-bnf-or-ebnf", "title": "How do you write Perl statement $age = 25; in BNF or EBNF", "body": "<p>How do I convert the Perl statement $age = 25; to BNF or EBNF grammar?</p>\n"}, {"tags": ["perl", "fork", "tk", "inet"], "comments": [{"owner": {"reputation": 31, "user_id": 8840713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fa0fa21772edb000324dc8392e0f28?s=128&d=identicon&r=PG&f=1", "display_name": "ltstrom", "link": "https://stackoverflow.com/users/8840713/ltstrom"}, "edited": false, "score": 0, "creation_date": 1536291035, "post_id": 52214663, "comment_id": 91378841, "body": "Ah, since i am attempting to work out the forking i haven&#39;t added the 2nd half of the new port. But the overall idea was that a listening socket will be opened and a remote socket to another machine. All that data that comes in via the listening socket is sent out to the remote one. The idea is that multiple of these listening and sending pairs are setup and forked to multiple child process. So one pair per child process."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536291208, "post_id": 52214663, "comment_id": 91378874, "body": "OK, so my (now deleted) comment wasn&#39;t so much off the mark (are you responding to it?) I still suggest to do this without the gui first."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536291285, "post_id": 52214663, "comment_id": 91378890, "body": "Communication between parent and child would normally go via <code>socketpair</code> as mob shows you, what was the main point of my deleted comment.  If there are outside hosts involved then you can have another socket for that, presumably running inside the child process.  But then again, in that case there are various ways to do it."}, {"owner": {"reputation": 31, "user_id": 8840713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fa0fa21772edb000324dc8392e0f28?s=128&d=identicon&r=PG&f=1", "display_name": "ltstrom", "link": "https://stackoverflow.com/users/8840713/ltstrom"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536291288, "post_id": 52214663, "comment_id": 91378892, "body": "Sorry yes was trying to respond, currently on my phone. Happy to try without a gui as i have a non gui version one but it just does one pair."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536291457, "post_id": 52214663, "comment_id": 91378918, "body": "The <code>socketpair</code> provides for comms between a parent and a child; one child. If you have multiple then you&#39;ll need yet another component, <code>IO::Select</code> for instance, so that the parent can hop between those multiple forks (to talk to them) timely."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536312096, "post_id": 52214663, "comment_id": 91387143, "body": "@ltstrom: &quot;I personally have trouble with execution of the fork without syntax errors or not pushing the socket into a child process&quot;* You should show the forking code that you have written and describe carefully the problems you are having. Stack Overflow is about <i>specific</i> programming problems, and requests to write the code for you aren&#39;t generally well received."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8840713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fa0fa21772edb000324dc8392e0f28?s=128&d=identicon&r=PG&f=1", "display_name": "ltstrom", "link": "https://stackoverflow.com/users/8840713/ltstrom"}, "edited": false, "score": 0, "creation_date": 1536291802, "post_id": 52214810, "comment_id": 91378978, "body": "Hey mob, how would this work with my script above i guess i would add your code to the new_port sub?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536312143, "post_id": 52214810, "comment_id": 91387177, "body": "@mob: I&#39;ve always used <code>close</code> rather than <code>shutdown</code> and I&#39;m thinking <a href=\"http://perldoc.perl.org/functions/shutdown.html\" rel=\"nofollow noreferrer\"><code>shutdown</code></a> may be wrong as it <i>&quot;also disables the file descriptor in any forked copies in other processes&quot;</i>. This seems to suggest that the socket will be closed for both the parent and the child process, which <i>isn&#39;t</i> what you want."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1536290567, "creation_date": 1536290567, "answer_id": 52214810, "question_id": 52214663, "link": "https://stackoverflow.com/questions/52214663/forking-a-subroutine-that-opens-a-socket-pair/52214810#52214810", "title": "Forking a subroutine that opens a socket pair", "body": "<p>It's been a long time since I first tried this, so I forget if this is the way it has to be done or if it's just one of many ways that work, but the gist is:</p>\n\n<ol>\n<li>create a socket pair before the fork</li>\n<li>perform the fork</li>\n<li>use one socket in the parent and the other in the child</li>\n<li>if you want the socket to be unidirectional (from parent\nto child or child to parent only), call <code>shutdown</code> on the appropriate socket in both the parent and the child</li>\n</ol>\n\n<p>Since you want to send data from parent to child only, it looks like</p>\n\n<pre><code>($sock_child, $sock_par) = IO::Socket-&gt;socketpair(\n    Socket::AF_UNIX, Socket::SOCK_STREAM, Socket::PF_UNSPEC);\n$pid = fork;\nif ($pid) {\n    # parent\n    shutdown($sock_par, 0); # no more reading from parent\n    print $sock_par $data_to_pass_to_child;\n    ...\n } else {\n    # child\n    shutdown($sock_child, 1);  # no more writing in child\n    $data_from_parent = &lt;$sock_child&gt;;\n    ...\n }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8840713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fa0fa21772edb000324dc8392e0f28?s=128&d=identicon&r=PG&f=1", "display_name": "ltstrom", "link": "https://stackoverflow.com/users/8840713/ltstrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 52214810, "answer_count": 1, "score": 1, "last_activity_date": 1536312104, "creation_date": 1536289206, "last_edit_date": 1536312104, "question_id": 52214663, "link": "https://stackoverflow.com/questions/52214663/forking-a-subroutine-that-opens-a-socket-pair", "title": "Forking a subroutine that opens a socket pair", "body": "<p>I would like to fork a subroutine that opens a socket.</p>\n\n<p>I have written the code to open a socket, receive the data, and print its received data. The GUI is written using\n    <a href=\"https://metacpan.org/pod/Tk\" rel=\"nofollow noreferrer\"><code>Tk</code></a></p>\n\n<p>Below is the code, it does basically what I want to do, with the exception of not forking the <code>new_port</code> subroutine. Every time I click the <code>submit</code> button the <code>Tk</code> window gets stuck. I am looking for help with adding a <code>fork</code> to the <code>new_port</code> subroutine so it spawns a new child process. I personally have trouble with execution of the <code>fork</code> without syntax errors or not pushing the socket into a child process.</p>\n\n<p>The idea is that I can fill in a new port in the form and hit submit. The window closes, I then press new again put a new port in and now a second socket is open at the same time as the first. e.g. port 1234 and 5678 are being listened to at the same time.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse IO::Socket::INET;\nuse Tk;\n\n$myip = `ifconfig | grep -i inet | head -1 | cut -d \":\" -f2 | cut -d \" \" -f1`;\n\nsub new_port {\n\n    my $socket = new IO::Socket::INET(\n        LocalHost =&gt; \"$myip\",\n        LocalPort =&gt; \"$myport\",\n        Proto     =&gt; 'tcp' Reuse =&gt; 1\n   );\n\n    die \"Cannot create socket on local host\" unless $socket;\n    print \"Server waiting for client connection on port $myport\\n\";\n\n    while ( 1 ) {\n\n        my $client_socket  = $socket-&gt;accept();\n        my $client_address = $client_socket-&gt;peerhost();\n        my $client_port    = $client_socket-&gt;peerport();\n        my $input_data     = \"\";\n        my $received_data  = \"\";\n\n        do {\n            $client_socket-&gt;recv($received_data, 65536);\n            $input_data = $input_data . $received_data;\n        } while ( $received_data ne \"\" );\n\n        print \"INPUT----------------------------------\\n\";\n        print \"Data from $client_address on port $client_port\\n\";\n        print $input_data;\n        shutdown($client_socket, 1);\n    }\n}\n\nsub new_port_window {\n\n    my $sw = MainWindow-&gt;new;\n\n    $sw-&gt;geometry(\"200x100\");\n    $sw-&gt;title(\"port opener\");\n    $sw-&gt;Label(\n        -text \"Insert port #\"\n    )-&gt;place(\n        -anchor =&gt; 'center',\n        -relx =&gt; 0.5,\n        -rely =&gt; 0.2\n    );\n    $sw-&gt;Entry(\n        -bg =&gt; 'white',\n        -fg =&gt; 'black',\n        -textvariable =&gt; \\$myport\n    )-&gt;place(\n        -anchor =&gt; 'center',\n        -relx =&gt; 0.5,\n        -rely =&gt; 0.4\n    );\n    $sw-&gt;Button(\n        -text \"submit\",\n        -command =&gt; sub {new_port}\n    )-&gt;place(\n        width   =&gt; 100,\n        -anchor =&gt; \"center\",\n        -relx   =&gt; 0.5,\n        -rely   =&gt; 0.8\n    );\n}\n\nmy $mw = MainWindow-&gt;new;\n\n$mw-&gt;geometry(\"150x100\");\n$mw-&gt;title(\"GUI TEST NEW FUNCTION\");\n$mw-&gt;Label(\n    -text =&gt; \"click new\"\n)-&gt;place(\n    -anchor =&gt; \"center\",\n    -relx =&gt; 0.5,\n    -rely =&gt; 0.3\n);\n$mw-&gt;Button(\n    -text =&gt; \"NEW\",\n    -command =&gt; sub {new_port_window}\n)-&gt;place(\n    -width =&gt; 50,\n    -anchor =&gt; \"center\",\n    -relx =&gt; 0.5,\n    -rely =&gt; 0.8\n);\n\nMainLoop;\n</code></pre>\n"}, {"tags": ["file", "perl", "if-statement"], "comments": [{"owner": {"reputation": 881, "user_id": 9254404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17947ccbc8b0336e68ec69063d81789e?s=128&d=identicon&r=PG&f=1", "display_name": "leiyc", "link": "https://stackoverflow.com/users/9254404/leiyc"}, "edited": false, "score": 0, "creation_date": 1536283462, "post_id": 52214019, "comment_id": 91377500, "body": "What do you mean <code>sees the file</code>? What is your expectation about the output of your script?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1536283626, "post_id": 52214019, "comment_id": 91377530, "body": "Do those files actually exist?"}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1536283678, "post_id": 52214019, "comment_id": 91377541, "body": "I executed your test after touching 3 files <code>a.txt.new</code>, <code>a.txt</code>, and <code>b.txt.new</code>. The code responded by correctly saying <code>a.txt</code> existed but <code>b.txt</code> did not. I would think that if you <code>ls &#47;Users&#47;henry&#47;Desktop&#47;perltest&#47;templates</code> before you execute your perl script, then you&#39;ll see that the files actually do <i>not</i> exist, as @Shawn posits."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536290547, "post_id": 52214019, "comment_id": 91378753, "body": "I don&#39;t see any errors in the code either."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536290641, "post_id": 52214019, "comment_id": 91378771, "body": "Tip: you can do <code>foreach my $var (@ary) { ... }</code> -- declare the loop variable inside the <code>foreach</code> statement itself (same goes for <code>while</code> loop).  That way it&#39;s scoped to the loop (doesn&#39;t exist outside), and the code is much cleaner.  Unless, of course, you <i>need it</i> after the loop but that would be a tricky design."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536296400, "post_id": 52214019, "comment_id": 91379958, "body": "@zdim: <i>&quot;same goes for while loop&quot;</i> But <code>while</code> loops have no loop variable!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536299175, "post_id": 52214019, "comment_id": 91380810, "body": "@Borodin Good point. Clearly I was referring to <code>while (my $e = pop @ary) { say $e }</code> ... but that&#39;s not a &quot;<i>loop variable</i>&quot; and I don&#39;t know an obvious name for it"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536299583, "post_id": 52214019, "comment_id": 91380924, "body": "@zdim: Well that&#39;s just a local declaration, and has nothing to do with it being in a loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536299802, "post_id": 52214019, "comment_id": 91380999, "body": "@Borodin Yes, and that was my point, that one can declare a variable inside the loop condition, much like one can in the <code>foreach</code> statement (I see often that people don&#39;t realize this), which is thus local to the loop.  But I don&#39;t know how to refer to it with a single word/phrase (since as you say it indeed isn&#39;t a &quot;<i>loop variable</i>&quot;)"}, {"owner": {"reputation": 142, "user_id": 728044, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e042f7e4b007de2aba30c65ac09e4c96?s=128&d=identicon&r=PG", "display_name": "Tags", "link": "https://stackoverflow.com/users/728044/tags"}, "edited": false, "score": 0, "creation_date": 1536330757, "post_id": 52214019, "comment_id": 91398438, "body": "Ok, so it seems I just didnt understand my code well enough. I was missing the <code>.txt</code> files to complate my test run. Sorry about that."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536299317, "post_id": 52215373, "comment_id": 91380854, "body": "It seemed to me that their &quot;oldfile&quot; has <code>.new</code> and a new file just doesn&#39;t.  @Tags: the naming is really confusing, I had to read back and forth and am still not sure -- can you clarify? (Best by editing the question and at least adding a comment.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536299505, "post_id": 52215373, "comment_id": 91380902, "body": "@zdim: The OP does say <i>&quot;I basically have files with extension <code>.new</code> and <code>.old</code>&quot;</i>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536299635, "post_id": 52215373, "comment_id": 91380941, "body": "Ah, I see. Forgot about it with tracing through code. Hopefully they clarify/confirm. Somehow these names manage to really confuse it."}, {"owner": {"reputation": 142, "user_id": 728044, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e042f7e4b007de2aba30c65ac09e4c96?s=128&d=identicon&r=PG", "display_name": "Tags", "link": "https://stackoverflow.com/users/728044/tags"}, "edited": false, "score": 0, "creation_date": 1536330850, "post_id": 52215373, "comment_id": 91398485, "body": "I do have <code>.txt</code> files but I was missing them. I just didn&#39;t understand the process well enough."}, {"owner": {"reputation": 142, "user_id": 728044, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e042f7e4b007de2aba30c65ac09e4c96?s=128&d=identicon&r=PG", "display_name": "Tags", "link": "https://stackoverflow.com/users/728044/tags"}, "edited": false, "score": 0, "creation_date": 1536330944, "post_id": 52215373, "comment_id": 91398550, "body": "And yes the variables are confusing."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 142, "user_id": 728044, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e042f7e4b007de2aba30c65ac09e4c96?s=128&d=identicon&r=PG", "display_name": "Tags", "link": "https://stackoverflow.com/users/728044/tags"}, "edited": false, "score": 0, "creation_date": 1536331003, "post_id": 52215373, "comment_id": 91398585, "body": "@Tags: So you <i>do</i> have <code>a.txt</code> as well as <code>a.txt.new</code> and <code>a.txt.old</code> but your code is still reporting that files don&#39;t exist when they do?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 142, "user_id": 728044, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e042f7e4b007de2aba30c65ac09e4c96?s=128&d=identicon&r=PG", "display_name": "Tags", "link": "https://stackoverflow.com/users/728044/tags"}, "edited": false, "score": 0, "creation_date": 1536331047, "post_id": 52215373, "comment_id": 91398611, "body": "@Tags: So change the variable names!"}, {"owner": {"reputation": 142, "user_id": 728044, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e042f7e4b007de2aba30c65ac09e4c96?s=128&d=identicon&r=PG", "display_name": "Tags", "link": "https://stackoverflow.com/users/728044/tags"}, "edited": false, "score": 0, "creation_date": 1536332138, "post_id": 52215373, "comment_id": 91399304, "body": "I was missing the <code>a.txt</code> file. It has always worked. Im going to change the code up. Its confusing to read and I dont like the nested if statements."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1536296235, "last_edit_date": 1536296235, "creation_date": 1536295041, "answer_id": 52215373, "question_id": 52214019, "link": "https://stackoverflow.com/questions/52214019/if-statement-not-seeing-file/52215373#52215373", "title": "If statement not seeing file", "body": "<blockquote>\n  <p>I basically have files with extension <code>.new</code> and <code>.old</code></p>\n</blockquote>\n\n<p>So you have <code>a.txt.new</code> and <code>a.txt.old</code> but no <code>a.txt</code>, and the message <code>file does not exist</code> seems to be correct</p>\n\n<p>You seem to be confused over your variables: you have all the <code>*.txt.new</code> file names in an array called <code>@oldfiles</code> while <code>$newfile</code> has no <code>.new</code> or <code>.old</code> suffix at all. Did you perhaps mean something more like this?</p>\n\n<pre><code>my $dir      = \"/Users/henry/Desktop/perltest/templates\";\nmy @oldfiles = glob \"$dir/*.old\";\n\nprint \"Checking for new templates\\n\\n\";\n\nfor my $oldfile ( @oldfiles ) {\n\n    print \"Old file \\\"$oldfile\\\"\\n\";\n\n    my $newfile = $oldfile;\n    $newfile =~ s/\\.old$/.new/;\n\n    print \"New file \\\"$newfile\\\" \";\n\n    if ( -e $newfile ) {\n        print \"exists\\n\";\n    }\n    else {\n        print \"doesn't exist\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 728044, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e042f7e4b007de2aba30c65ac09e4c96?s=128&d=identicon&r=PG", "display_name": "Tags", "link": "https://stackoverflow.com/users/728044/tags"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536296235, "creation_date": 1536282915, "last_edit_date": 1536295239, "question_id": 52214019, "link": "https://stackoverflow.com/questions/52214019/if-statement-not-seeing-file", "title": "If statement not seeing file", "body": "\n\n<p>I am having an issue with the <code>if</code> statement in Perl.</p>\n\n<p>I am not able to get the <code>if</code> statement to see the file using <code>-e</code>. I basically have files with extension <code>.new</code> and <code>.old</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $dir      = \"/Users/henry/Desktop/perltest/templates\";\nmy @oldfiles = glob \"$dir/*.new\";\nmy $oldfile;\n\nprint \"checking for new templates\\n\";\n\nforeach $oldfile ( @oldfiles ) {\n\n    print \"$oldfile\\n\";\n\n    if ( $oldfile =~ /(\\S+)\\.new/ ) {\n\n        my $newfile = $1;\n        print \"$newfile\\n\";\n\n        if ( -e $newfile ) {\n            print \"file exist\\n\";\n        }\n        else {\n            print \"file does not exist\\n\";\n        }\n    }\n};\n</code></pre>\n\n<p>Here is my output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>checking for new templates\n/Users/henry/Desktop/perltest/templates/a.txt.new\n/Users/henry/Desktop/perltest/templates/a.txt\nfile does not exist\n/Users/henry/Desktop/perltest/templates/b.txt.new\n/Users/henry/Desktop/perltest/templates/b.txt\nfile does not exist\n/Users/henry/Desktop/perltest/templates/m.txt.new\n/Users/henry/Desktop/perltest/templates/m.txt\nfile does not exist\n/Users/henry/Desktop/perltest/templates/n.txt.new\n/Users/henry/Desktop/perltest/templates/n.txt\nfile does not exist\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "perl", "httpresponse"], "comments": [{"owner": {"reputation": 838, "user_id": 1632961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qVKGv.jpg?s=128&g=1", "display_name": "ibex", "link": "https://stackoverflow.com/users/1632961/ibex"}, "edited": false, "score": 0, "creation_date": 1536272909, "post_id": 52212660, "comment_id": 91375257, "body": "Can you post the JavaScript code you use to make the ajax request to perl?"}], "answers": [{"tags": [], "owner": {"reputation": 407, "user_id": 3352383, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000913691661/picture?type=large", "display_name": "Bogdan Condurache", "link": "https://stackoverflow.com/users/3352383/bogdan-condurache"}, "is_accepted": true, "score": -2, "last_activity_date": 1536272737, "creation_date": 1536272737, "answer_id": 52212859, "question_id": 52212660, "link": "https://stackoverflow.com/questions/52212660/print-server-response/52212859#52212859", "title": "Print Server Response", "body": "<p>I would recommend you to read the <a href=\"https://api.jquery.com/jquery.get/\" rel=\"nofollow noreferrer\">documentation</a>. I assume that's how you do the request to the server. You can provide a <code>fail()</code> callback that is documented <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\">here</a>. So, you should add after the call to get another one to <code>.fail(function(jqXHR, status, error){})</code> and inside that function do what you need with the error. Also, you can use status to treat different error types in different ways. The documentation for fail is:</p>\n\n<blockquote>\n  <p>A function to be called if the request fails. The function receives\n  three arguments: The jqXHR (in jQuery 1.4.x, XMLHttpRequest) object, a\n  string describing the type of error that occurred and an optional\n  exception object, if one occurred. Possible values for the second\n  argument (besides null) are \"timeout\", \"error\", \"abort\", and\n  \"parsererror\". When an HTTP error occurs, errorThrown receives the\n  textual portion of the HTTP status, such as \"Not Found\" or \"Internal\n  Server Error.\" As of jQuery 1.5, the error setting can accept an array\n  of functions. Each function will be called in turn. Note: This handler\n  is not called for cross-domain script and JSONP requests. This is an\n  Ajax Event.</p>\n</blockquote>\n"}], "owner": {"reputation": 157, "user_id": 3943543, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13a344060dd373f3cdac843a4e0c8c89?s=128&d=identicon&r=PG&f=1", "display_name": "user3943543", "link": "https://stackoverflow.com/users/3943543/user3943543"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1536291863, "accepted_answer_id": 52212859, "answer_count": 1, "score": -4, "last_activity_date": 1536280055, "creation_date": 1536271218, "last_edit_date": 1536280055, "question_id": 52212660, "link": "https://stackoverflow.com/questions/52212660/print-server-response", "closed_reason": "Not suitable for this site", "title": "Print Server Response", "body": "<p>I'm working with a form that validates in Perl. I'm able to see the response in chrome dev tools, under network, XHR. I would like to print the 'response' error. </p>\n\n<p>It looks like this : </p>\n\n<pre><code>{type: \"error\", message: \"Unable to located your account by this email address: tim@example.com\"}\nmessage:\"Unable to located your account by this email address: tim@example.com\"\ntype: \"error\"\n</code></pre>\n\n<p>and the header request looks like this : </p>\n\n<pre><code>/vsap/mail_id.html?email=tim%40example.com\n</code></pre>\n\n<p>Is there anyway I can access the error message with jQuery?</p>\n"}, {"tags": ["oracle", "perl", "dbi", "dbd"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1536256287, "post_id": 52209096, "comment_id": 91368726, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52206968/facing-issue-in-installing-dbd-oracle-1-23\" title=\"facing issue in installing dbd oracle 1 23\">stackoverflow.com/questions/52206968/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536257837, "post_id": 52209096, "comment_id": 91369433, "body": "@Prabir: Why are you and <b>kannan</b>, both from Bangalore, posting pretty much identical questions at the same time? Please decide between you which one should be deleted?"}, {"owner": {"reputation": 1, "user_id": 9256930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c5f4c5ab8fa58c05c1a61b57a01ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Prabir", "link": "https://stackoverflow.com/users/9256930/prabir"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536258919, "post_id": 52209096, "comment_id": 91369907, "body": "Hi @Borodin, I can see Kannan&#39;s question has been voluntarily removed. Actually we belong to the same team and it was coincidental that we posted same question at the same time.Sorry for that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1536268535, "post_id": 52209096, "comment_id": 91373881, "body": "<code>sv_yes</code> is part of Perl. It looks like it can&#39;t find Perl&#39;s header files."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536278080, "post_id": 52209096, "comment_id": 91376479, "body": "<code>sv_undef</code> is now called <code>PL_sv_undef</code>. Take a look at <a href=\"https://www.perlmonks.org/?node_id=227161\" rel=\"nofollow noreferrer\"><i>Old CPAN modules with sv_undef</i></a>. It&#39;s from 2003 but it may still be relevant as version 1.23 of <code>DBD::Oracle</code> is nine years old. It boils down to running <code>perl Makefile.PL POLLUTE=1</code> to add the old definitions to the build."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1536308932, "post_id": 52209096, "comment_id": 91385375, "body": "Please take a look at <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9256930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c5f4c5ab8fa58c05c1a61b57a01ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Prabir", "link": "https://stackoverflow.com/users/9256930/prabir"}, "edited": false, "score": 0, "creation_date": 1536304109, "post_id": 52213538, "comment_id": 91382791, "body": "Thanks @Borodin  I installed DBD-Oracle-1.74 and now its working."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 9256930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c5f4c5ab8fa58c05c1a61b57a01ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Prabir", "link": "https://stackoverflow.com/users/9256930/prabir"}, "edited": false, "score": 0, "creation_date": 1536309058, "post_id": 52213538, "comment_id": 91385467, "body": "@Prabir: Okay, I&#39;m glad to hear it. But you should <i>always</i> install the latest version of CPAN modules unless you have a good reason to need an older copy. I assumed there was a very good reason to be using v1.23 and I am surprised you got hold of a copy without a fair amount of work."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1536278227, "creation_date": 1536278227, "answer_id": 52213538, "question_id": 52209096, "link": "https://stackoverflow.com/questions/52209096/dbdoracle-make-error-undeclared-first-use-in-this-function/52213538#52213538", "title": "DBD::Oracle: make error : undeclared (first use in this function)", "body": "\n\n<p>Version 1.23 of <code>DBD::Oracle</code> is nine years old, and\n<code>sv_undef</code> is now called <code>PL_sv_undef</code></p>\n\n<p>Take a look at <a href=\"https://www.perlmonks.org/?node_id=227161\" rel=\"nofollow noreferrer\"><em>Old CPAN modules with sv_undef</em></a>. It's from 2003 but it may still be relevant</p>\n\n<p>It boils down to running</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl Makefile.PL POLLUTE=1\n</code></pre>\n\n<p>to add the old definitions <code>sv_undef</code>, <code>sv_yes</code>, and <code>sv_no</code> to the build</p>\n"}], "owner": {"reputation": 1, "user_id": 9256930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c5f4c5ab8fa58c05c1a61b57a01ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Prabir", "link": "https://stackoverflow.com/users/9256930/prabir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536278227, "creation_date": 1536253655, "question_id": 52209096, "link": "https://stackoverflow.com/questions/52209096/dbdoracle-make-error-undeclared-first-use-in-this-function", "title": "DBD::Oracle: make error : undeclared (first use in this function)", "body": "<p>I have been trying to install DBD::Oracle in Linux 7.4(x86_64 x86_64 x86_64 GNU/Linux) for past 2 days. This has become a roadblock for one of the critical projects. I have tried all possible ways I can think of, but with zero success.</p>\n\n<p>So far, I have done the following:</p>\n\n<blockquote>\n  <p>1) Installed DBI successfully.</p>\n  \n  <p>2) unzipped <em>instantclient-sdk-linux.x64-12.2.0.1.0.zip, instantclient-basic-linux.x64-12.2.0.1.0.zip, instantclient-sqlplus-linux.x64-12.2.0.1.0.zip</em> in a directory /home/netauto/oracle/ and set LD_LIBRARY_PATH and ORACLE_HOME to point to /home/netauto/oracle/instantclient_12_2</p>\n</blockquote>\n\n<pre><code>instantclient_12_2]# ls -ltr /home/netauto/oracle/instantclient_12_2\n\n-rwxrwxr-x. 1 netauto netauto 124771800 Jan 26  2017 libociei.so\n-rwxrwxr-x. 1 netauto netauto     57272 Jan 26  2017 genezi\n-rwxrwxr-x. 1 netauto netauto    240476 Jan 26  2017 uidrvci\n-rwxrwxr-x. 1 netauto netauto    116563 Jan 26  2017 liboramysql12.so\n-r-xr-xr-x. 1 netauto netauto    380996 Jan 26  2017 libons.so\n-r-xr-xr-x. 1 netauto netauto   6568149 Jan 26  2017 libnnz12.so\n-rw-rw-r--. 1 netauto netauto       363 Jan 26  2017 BASIC_README\n-rwxrwxr-x. 1 netauto netauto     44220 Jan 26  2017 adrci\n-rw-rw-r--. 1 netauto netauto     74230 Jan 26  2017 xstreams.jar\n-r--r--r--. 1 netauto netauto   4036257 Jan 26  2017 ojdbc8.jar\n-r-xr-xr-x. 1 netauto netauto    158543 Jan 26  2017 libocijdbc12.so\n-rwxrwxr-x. 1 netauto netauto   2218687 Jan 26  2017 libocci.so.12.1\n-r-xr-xr-x. 1 netauto netauto    539065 Jan 26  2017 libmql1.so\n-r-xr-xr-x. 1 netauto netauto   2981501 Jan 26  2017 libipc1.so\n-rwxrwxr-x. 1 netauto netauto  71638263 Jan 26  2017 libclntsh.so.12.1\n-rwxrwxr-x. 1 netauto netauto   8033199 Jan 26  2017 libclntshcore.so.12.1\n-rw-rw-r--. 1 netauto netauto       367 Jan 26  2017 SQLPLUS_README\n-r-xr-xr-x. 1 netauto netauto     22751 Jan 26  2017 sqlplus\n-r-xr-xr-x. 1 netauto netauto   1559466 Jan 26  2017 libsqlplus.so\n-r-xr-xr-x. 1 netauto netauto   1641005 Jan 26  2017 libsqlplusic.so\n-r-xr-xr-x. 1 netauto netauto       342 Jan 26  2017 glogin.sql drwxrwxr-x. 5 netauto netauto      4096 Jan 26  2017 sdk \n lrwxrwxrwx. 1 netauto netauto        64 Sep  4 13:07 libclntsh.so -&gt; /home/netauto/oracle/instantclient_12_2/libclntsh.so.12.1\n</code></pre>\n\n<p>Header files:</p>\n\n<pre><code>instantclient_12_2]# ls /home/netauto/oracle/instantclient_12_2/sdk/include\n-r-xr-xr-x. 1 netauto netauto  24778 Jan 26  2017 occiObjects.h\n-r-xr-xr-x. 1 netauto netauto   2115 Jan 26  2017 occi.h\n-r-xr-xr-x. 1 netauto netauto  39934 Jan 26  2017 occiData.h\n-r-xr-xr-x. 1 netauto netauto  72561 Jan 26  2017 occiControl.h\n-r-xr-xr-x. 1 netauto netauto  35604 Jan 26  2017 occiCommon.h\n-r-xr-xr-x. 1 netauto netauto 194752 Jan 26  2017 oci.h\n-r-xr-xr-x. 1 netauto netauto   8953 Jan 26  2017 ociextp.h\n-r-xr-xr-x. 1 netauto netauto  11782 Jan 26  2017 ocidfn.h\n-r-xr-xr-x. 1 netauto netauto   4048 Jan 26  2017 ocidem.h\n-r-xr-xr-x. 1 netauto netauto  43001 Jan 26  2017 ocidef.h\n-r-xr-xr-x. 1 netauto netauto   6204 Jan 26  2017 ociapr.h\n-r-xr-xr-x. 1 netauto netauto 438428 Jan 26  2017 ociap.h\n-r-xr-xr-x. 1 netauto netauto  10361 Jan 26  2017 oci8dp.h\n-r-xr-xr-x. 1 netauto netauto   7203 Jan 26  2017 oci1.h\n-r-xr-xr-x. 1 netauto netauto  11649 Jan 26  2017 occiAQ.h\n-r-xr-xr-x. 1 netauto netauto   9892 Jan 26  2017 xa.h\n-r-xr-xr-x. 1 netauto netauto 123766 Jan 26  2017 ort.h\n-r-xr-xr-x. 1 netauto netauto  42866 Jan 26  2017 oro.h\n-r-xr-xr-x. 1 netauto netauto 158261 Jan 26  2017 orl.h\n-r-xr-xr-x. 1 netauto netauto 102775 Jan 26  2017 ori.h\n-r-xr-xr-x. 1 netauto netauto  15083 Jan 26  2017 orid.h\n-r-xr-xr-x. 1 netauto netauto   6540 Jan 26  2017 oratypes.h\n-r-xr-xr-x. 1 netauto netauto  32313 Jan 26  2017 odci.h\n-r-xr-xr-x. 1 netauto netauto 111273 Jan 26  2017 ocixstream.h\n-r-xr-xr-x. 1 netauto netauto   8138 Jan 26  2017 ocixmldb.h\n-r-xr-xr-x. 1 netauto netauto   6494 Jan 26  2017 ocikpr.h\n-r-xr-xr-x. 1 netauto netauto  78862 Jan 26  2017 nzt.h\n-r-xr-xr-x. 1 netauto netauto  37493 Jan 26  2017 nzerror.h\n-r-xr-xr-x. 1 netauto netauto  44851 Jan 26  2017 ldap.h\n</code></pre>\n\n<p>perl MakeFile.PL went fine</p>\n\n<pre><code> DBD-Oracle-1.23]# perl Makefile.PL\nUsing DBI 1.641 (for perl 5.016003 on x86_64-linux) installed in /home/netauto/perl_modules/lib/auto/DBI/\n\nConfiguring DBD::Oracle for perl 5.016003 on linux (x86_64-linux)\n\nRemember to actually *READ* the README file! Especially if you have any problems.\n\nInstalling on a linux, Ver#3.10\nUsing Oracle in /home/netauto/oracle/instantclient_12_2\nDEFINE _SQLPLUS_RELEASE = \"1202000100\" (CHAR)\nOracle version 12.2.0.1 (12.2)\nLooks like an Instant Client installation, okay\nYour LD_LIBRARY_PATH env var is set to '/home/netauto/oracle/instantclient_12_2/'\nOracle sysliblist:\nFound header files in /home/netauto/oracle/instantclient_12_2/sdk/include.\n\nChecking for functioning wait.ph\n\n\nSystem: perl5.016003 linux ord12-p-noobprimt-firmsmt-01 3.10.0-693.11.6.el7.x86_64 #1 smp wed jan 3 18:59:47 pst 2018 x86_64 x86_64 x86_64 gnulinux\nCompiler:   cc -O2 -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64\nLinker:     /bin/ld\nSysliblist:\nLinking with -lclntsh.\n\n\nWARNING: If you have problems you may need to rebuild perl with threading enabled.\nLD_RUN_PATH=/home/netauto/oracle/instantclient_12_2\nUsing DBD::Oracle 1.23.\nUsing DBD::Oracle 1.23.\nUsing DBI 1.641 (for perl 5.016003 on x86_64-linux) installed in /home/netauto/perl_modules/lib/auto/DBI/\nGenerating a Unix-style Makefile\nWriting Makefile for DBD::Oracle\nWriting MYMETA.yml and MYMETA.json\n\n***  If you have problems...\n     read all the log printed above, and the README and README.help.txt files.\n     (Of course, you have read README by now anyway, haven't you?)\n</code></pre>\n\n<p>But, make command error out</p>\n\n<pre><code> DBD-Oracle-1.23]# make\nSkip blib/lib/DBD/Oracle.pm (unchanged)\nSkip blib/lib/oraperl.ph (unchanged)\nSkip blib/arch/auto/DBD/Oracle/dbdimp.h (unchanged)\nSkip blib/arch/auto/DBD/Oracle/ocitrace.h (unchanged)\nSkip blib/lib/Oraperl.pm (unchanged)\nSkip blib/arch/auto/DBD/Oracle/Oracle.h (unchanged)\nSkip blib/lib/DBD/Oracle/Object.pm (unchanged)\nSkip blib/lib/DBD/Oracle/GetInfo.pm (unchanged)\ncp mk.pm blib/arch/auto/DBD/Oracle/mk.pm\nRunning Mkbootstrap for Oracle ()\nchmod 644 \"Oracle.bs\"\n\"/home/netauto/program_files/perl/perl-5.16.3/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- Oracle.bs blib/arch/auto/DBD/Oracle/Oracle.bs 644\ncc -c  -I/home/netauto/oracle/instantclient_12_2/sdk/include -I/home/netauto/perl_modules/lib/auto/DBI -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\\\"1.23\\\" -DXS_VERSION=\\\"1.23\\\" -fPIC \"-I/home/netauto/program_files/perl/perl-5.16.3/lib/5.16.3/x86_64-linux/CORE\"  -Wall -Wno-comment -DUTF8_SUPPORT -DNEW_OCI_INIT -DORA_OCI_VERSION=\\\"12.2.0.1\\\" Oracle.c\nOracle.xs: In function \u2018XS_DBD__Oracle__st_ora_bind_param_inout_array\u2019:\nOracle.xs:175:6: error: \u2018sv_yes\u2019 undeclared (first use in this function)\n   ? &amp;sv_yes : &amp;sv_no;\n      ^\nOracle.xs:175:6: note: each undeclared identifier is reported only once for each function it appears in\nOracle.xs:175:16: error: \u2018sv_no\u2019 undeclared (first use in this function)\n   ? &amp;sv_yes : &amp;sv_no;\n                ^\nOracle.c: In function \u2018XS_DBD__Oracle__st_ora_execute_array\u2019:\nOracle.c:1679:14: error: \u2018sv_undef\u2019 undeclared (first use in this function)\n      cols = &amp;sv_undef;\n              ^\nOracle.xs: In function \u2018XS_DBD__Oracle__st_cancel\u2019:\nOracle.xs:253:41: error: \u2018sv_yes\u2019 undeclared (first use in this function)\n  ST(0) = dbd_st_cancel(sth, imp_sth) ? &amp;sv_yes : &amp;sv_no;\n                                         ^\nOracle.xs:253:51: error: \u2018sv_no\u2019 undeclared (first use in this function)\n  ST(0) = dbd_st_cancel(sth, imp_sth) ? &amp;sv_yes : &amp;sv_no;\n                                                   ^\nOracle.xs: In function \u2018XS_DBD__Oracle__db_reauthenticate\u2019:\nOracle.xs:289:59: error: \u2018sv_yes\u2019 undeclared (first use in this function)\n  ST(0) = ora_db_reauthenticate(dbh, imp_dbh, uid, pwd) ? &amp;sv_yes : &amp;sv_no;\n                                                           ^\nOracle.xs:289:69: error: \u2018sv_no\u2019 undeclared (first use in this function)\n  ST(0) = ora_db_reauthenticate(dbh, imp_dbh, uid, pwd) ? &amp;sv_yes : &amp;sv_no;\n                                                                     ^\nOracle.xs: In function \u2018XS_DBD__Oracle__db_ora_lob_write\u2019:\nOracle.xs:317:11: error: \u2018sv_undef\u2019 undeclared (first use in this function)\n  ST(0) = &amp;sv_undef;\n           ^\nOracle.xs:342:11: error: \u2018sv_yes\u2019 undeclared (first use in this function)\n  ST(0) = &amp;sv_yes;\n           ^\nOracle.xs: In function \u2018XS_DBD__Oracle__db_ora_lob_append\u2019:\nOracle.xs:373:11: error: \u2018sv_undef\u2019 undeclared (first use in this function)\n  ST(0) = &amp;sv_undef;\n           ^\nOracle.xs:396:14: error: \u2018sv_yes\u2019 undeclared (first use in this function)\n     ST(0) = &amp;sv_yes;\n              ^\nOracle.xs: In function \u2018XS_DBD__Oracle__db_ora_lob_read\u2019:\nOracle.xs:430:13: error: \u2018sv_undef\u2019 undeclared (first use in this function)\n  dest_sv = &amp;sv_undef;\n             ^\nOracle.xs: In function \u2018XS_DBD__Oracle__db_ora_lob_trim\u2019:\nOracle.xs:464:11: error: \u2018sv_undef\u2019 undeclared (first use in this function)\n  ST(0) = &amp;sv_undef;\n           ^\nOracle.xs:467:11: error: \u2018sv_yes\u2019 undeclared (first use in this function)\n  ST(0) = &amp;sv_yes;\n           ^\nOracle.xs: In function \u2018XS_DBD__Oracle__db_ora_lob_length\u2019:\nOracle.xs:482:11: error: \u2018sv_undef\u2019 undeclared (first use in this function)\n  ST(0) = &amp;sv_undef;\n           ^\nOracle.xs: In function \u2018XS_DBD__Oracle__db_ora_lob_chunk_size\u2019:\nOracle.xs:501:12: error: \u2018sv_undef\u2019 undeclared (first use in this function)\n   ST(0) = &amp;sv_undef;\n            ^\nmake: *** [Oracle.o] Error 1\n</code></pre>\n\n<p>To me, it looks like it is unable to find some header file, but, which file and what path I need to add to LD_LIBRARY_PATH(if needed), am clueless. I really cant get my head around it.</p>\n\n<p>Please let me know what I am doing wrong here. </p>\n\n<p>Thanks,\nPrabir</p>\n"}, {"tags": ["linux", "perl", "service", "ldap", "application-shutdown"], "answers": [{"comments": [{"owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "edited": false, "score": 0, "creation_date": 1536569011, "post_id": 52249679, "comment_id": 91455551, "body": "This does not close the child processes, I think we would need to signal TERM to each forked child to get the desired result"}], "tags": [], "owner": {"reputation": 711, "user_id": 8890345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703664448de0eb2b1f67be5775aed66a?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Mills", "link": "https://stackoverflow.com/users/8890345/nathan-mills"}, "is_accepted": false, "score": 0, "last_activity_date": 1536539217, "creation_date": 1536539217, "answer_id": 52249679, "question_id": 52206892, "link": "https://stackoverflow.com/questions/52206892/how-to-shutdown-netldapserver/52249679#52249679", "title": "How to shutdown Net::LDAP::Server", "body": "<p>Changing the <code>while (1)</code> loop to <code>while ($pidfile-&gt;running())</code> in <code>process_request</code> should do the trick. Setting <code>$continue</code> to zero prevents any more Listeners from running but from what I can tell, the <code>process_request</code> subroutine ignores that variable.</p>\n\n<p>Of course, this will need <code>$pidfile</code> to be declared earlier as it wouldn't be in scope in <code>process_request</code> since it was declared (and assigned) after the subroutine definition.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536818729, "post_id": 52300232, "comment_id": 91562222, "body": "@Andr&#233;Schild Updated with an explanation (and other minor edits)"}, {"owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "edited": false, "score": 0, "creation_date": 1536920270, "post_id": 52300232, "comment_id": 91606426, "body": "Removing the <code>sub server_close</code> code got the desired result, along with removing the loop in the <code>while ($continue)</code> loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "edited": false, "score": 0, "creation_date": 1537291931, "post_id": 52300232, "comment_id": 91728718, "body": "@Andr&#233;Schild Great.  That is the simplest way to let <code>Net::Server::server_close</code> be called, by not overriding it. (I didn&#39;t see the purpose of the <code>while ($continue)</code> loop either but didn&#39;t bring that up as there is clearly more code in reality.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1537291726, "last_edit_date": 1537291726, "creation_date": 1536771829, "answer_id": 52300232, "question_id": 52206892, "link": "https://stackoverflow.com/questions/52206892/how-to-shutdown-netldapserver/52300232#52300232", "title": "How to shutdown Net::LDAP::Server", "body": "<p>The shown code doesn't deal with the <code>Net::Server</code> itself, ie. its <code>::PreForkSimple</code> extension; the server itself need be closed if the program is terminated by a signal. We can't see the calling code and how you \"<em>shut the service down</em>,\" other than by the mentioned signal.</p>\n\n<p>There is a <code>server_close</code> method in <code>Net::Server</code> for this. But the method of the same name that the question refers to seems to be the one in your <code>Listener</code> class, which thus overrides the (grand)parent's method. It only stops further work in child processes and doesn't touch the server.</p>\n\n<p>So if that's the method called in the signal handler then the server never gets shut down properly and its existing children stay around. You need to call <code>server_close</code> on a <code>Net::Server</code> object, or to arrange in your own <code>server_close</code> method to call the parent's one. </p>\n\n<p>The <code>Net::Server</code> documentation under the <a href=\"https://metacpan.org/pod/distribution/Net-Server/lib/Net/Server.pod#PROCESS-FLOW\" rel=\"nofollow noreferrer\">Process Flow</a> explains</p>\n\n<blockquote>\n  <p>During the server shutdown phase (<code>$self-&gt;server_close</code>), the following represents the program flow:  </p>\n\n<pre><code>$self-&gt;close_children;  # if any  \n$self-&gt;post_child_cleanup_hook;  \nif (Restarting server) {\n    $self-&gt;restart_close_hook();  \n    $self-&gt;hup_server;  \n}\n\n$self-&gt;shutdown_sockets;  \n\n$self-&gt;server_exit;\n</code></pre>\n</blockquote>\n\n<p>If the call to <code>server_close</code> on a <code>Net::Server</code> object or on the parent of your <code>Listener</code> object for some reason doesn't do it then try with individual methods listed in the workflow.</p>\n\n<p>There are also signals listed in the\n<a href=\"https://metacpan.org/pod/Net::Server::PreForkSimple\" rel=\"nofollow noreferrer\">Net::Server::PreForkSimple</a> \"personality\" under <a href=\"https://metacpan.org/pod/distribution/Net-Server/lib/Net/Server.pod#SHUTDOWN\" rel=\"nofollow noreferrer\">Shutdown</a></p>\n\n<blockquote>\n  <p>Each of the Fork and PreFork personalities support graceful shutdowns via the QUIT signal. When a QUIT is received, the parent will signal the children and then wait for them to exit.</p>\n</blockquote>\n\n<p>and then under <a href=\"https://metacpan.org/pod/distribution/Net-Server/lib/Net/Server.pod#SHUTDOWN\" rel=\"nofollow noreferrer\">Hot Deploy</a></p>\n\n<blockquote>\n  <p>Since version 2.000, the PreForkSimple server has accepted the TTIN and TTOU signals. When a TTIN is received, the max_servers is increased by 1. If a TTOU signal is received the max_servers is decreased by 1</p>\n</blockquote>\n\n<p>But I'd hope that this shouldn't be needed for shutting it down, and certainly not the last one.</p>\n"}], "owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 52300232, "answer_count": 2, "score": 2, "last_activity_date": 1537291726, "creation_date": 1536245629, "last_edit_date": 1536247509, "question_id": 52206892, "link": "https://stackoverflow.com/questions/52206892/how-to-shutdown-netldapserver", "title": "How to shutdown Net::LDAP::Server", "body": "<p>I have a Perl LDAP server which is based on the use\n<a href=\"https://metacpan.org/pod/Net::LDAP::Server\" rel=\"nofollow noreferrer\"><code>Net::LDAP::Server</code></a>\nmodule.\nTo have it running as a service in Linux, I use the\n<a href=\"https://metacpan.org/pod/Net::Server::PreForkSimple\" rel=\"nofollow noreferrer\"><code>Net::Server::PreForkSimple</code></a>\nlibrary.</p>\n\n<p>So far everything works fine, but when I shut the service down the child processes don't close.</p>\n\n<p>What is the correct way to shut down all processes?</p>\n\n<p>When I send a <code>SIGTERM</code> signal, the <code>server_close</code> method is called but nothing else happens. From this point on, terminated children are no longer restarted, but the children waiting for work are not terminated.</p>\n\n<pre><code>#!/usr/bin/perl\n\n#chkconfig: 345 80 05\n#description: LDAP Server for Innovaphone\n\nuse strict;\nuse warnings;\n\npackage Listener;\n\nuse Net::Server;\nuse base 'Net::Server::PreForkSimple';\n\nmy $continue = 1;\n\n...\n\nsub process_request {\n    my $self = shift;\n\n    my $in  = *STDIN{IO};\n    my $out = *STDOUT{IO};\n\n    my $sock         = $self-&gt;{server}-&gt;{client};\n    my $peer_address = $sock-&gt;peerhost();\n    my $peer_port    = $sock-&gt;peerport();\n    logwarn( \"Connection accepted from $peer_address : $peer_port\" );\n\n    my $handler = InnoLdapServer-&gt;new($sock);\n\n    while ( 1 ) {\n        my $finished = $handler-&gt;handle;\n        return if $finished;\n    }\n}\n\n...\n\nsub server_close {\n    logmsg( \"Server close called\" );\n    $continue = 0;\n}\n\n# Start daemon\nProc::Daemon::Init();\n\nmy $pidfile = File::Pid-&gt;new({ file =&gt; \"/var/run/inno-ldap.pid\" });\n\nif ( $pidfile-&gt;running() ) {\n    die \"Already running\";\n}\n\n$pidfile-&gt;write();\n\nopen( STDOUT, '&gt;', \"$logpath/inno-ldap.$logName.log\" ) or die \"Can't open stdout log\";\nselect( ( select( STDOUT ), $| = 1 )[0] );    # make the log file \"hot\" - turn off buffering\n\nopen( STDERR, '&gt;', \"$logpath/inno-ldap.$logName.error.log\" ) or die \"Can't open error log\";\nselect( ( select( STDERR ), $| = 1 )[0] );    # make the log file \"hot\" - turn off buffering\n\nwhile ( $continue ) {\n\n    # package main;\n    $roothandler = Listener-&gt;run(\n        port          =&gt; [ 636, \"389/tcp\" ],\n        proto         =&gt; \"ssl\",   # use ssl as the default\n        ipv           =&gt; \"*\",     # bind both IPv4 and IPv6 interfaces\n        user          =&gt; \"daemon\",\n        group         =&gt; \"daemon\",\n        SSL_key_file  =&gt; \"/home/root/ssl_cert/server.pem\",\n        SSL_cert_file =&gt; \"/home/root/ssl_cert/server.pem\",\n        max_servers   =&gt; 10,\n        log_level     =&gt; 4\n    );\n}\n\n$pidfile-&gt;remove();\n\n1;\n</code></pre>\n"}, {"tags": ["linux", "apache", "perl", "cgi", "vlc"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1536258698, "post_id": 52206571, "comment_id": 91369805, "body": "<code>CGI::header()</code> won&#39;t cut it to serve an audio/video file. The output of <code>CGI::header()</code> is something like     <code>Content-type: text&#47;html; charset=ISO-8859-1</code>  which is not an appropriate header for video."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1536258843, "post_id": 52206571, "comment_id": 91369867, "body": "See also <a href=\"https://stackoverflow.com/questions/48648070/how-to-play-videos-on-apache-server\" title=\"how to play videos on apache server\">stackoverflow.com/questions/48648070/&hellip;</a>, <a href=\"http://swimminginthought.com/streaming-mp4-video-webserver-solved/\" rel=\"nofollow noreferrer\">swimminginthought.com/streaming-mp4-video-webserver-solved</a>"}, {"owner": {"reputation": 3, "user_id": 10093389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExVnw.png?s=128&g=1", "display_name": "Jack Brashier", "link": "https://stackoverflow.com/users/10093389/jack-brashier"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1536319946, "post_id": 52206571, "comment_id": 91391808, "body": "I just realized I didn&#39;t clarify this in my post - I need to click a link on a computer on the network and the <i>hosting machine</i> will natively play a video on loop. Preferably through VLC."}], "answers": [{"tags": [], "owner": {"reputation": 2776, "user_id": 137948, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/69ede0d2d1b8ef65b841c031a7bac2e5?s=128&d=identicon&r=PG", "display_name": "Will Sheppard", "link": "https://stackoverflow.com/users/137948/will-sheppard"}, "is_accepted": false, "score": 0, "last_activity_date": 1536926258, "creation_date": 1536926258, "answer_id": 52331527, "question_id": 52206571, "link": "https://stackoverflow.com/questions/52206571/playing-vlc-on-a-ubuntu-machine-running-an-apache-server-no-playback/52331527#52331527", "title": "Playing VLC on a Ubuntu machine running an Apache server, no playback", "body": "<p>I think you have set VLC to open a command line interface automatically.</p>\n\n<p>Reset the VLC preferences and it should work normally again.</p>\n"}], "owner": {"reputation": 3, "user_id": 10093389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExVnw.png?s=128&g=1", "display_name": "Jack Brashier", "link": "https://stackoverflow.com/users/10093389/jack-brashier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536926258, "creation_date": 1536244651, "question_id": 52206571, "link": "https://stackoverflow.com/questions/52206571/playing-vlc-on-a-ubuntu-machine-running-an-apache-server-no-playback", "title": "Playing VLC on a Ubuntu machine running an Apache server, no playback", "body": "<p>I've used xampp (lampp) to run an Apache2 server out of my Intel ComputeStick with Ubuntu 18.04.1 installed. I've written a .cgi script with perl: </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse CGI;\n\nprint CGI::header();\n\nsystem(\"vlc /home/jack/Desktop/ayni1.mp4\");\n</code></pre>\n\n<p>However, when I hop onto my laptop (Win10) and use Chrome to visit <a href=\"http://12.345.678.90:80/dashboard/perl/ayni1.cgi\" rel=\"nofollow noreferrer\">http://12.345.678.90:80/dashboard/perl/ayni1.cgi</a> (That's my server, and that directory does exist), <strong>nothing happens on the hosting machine.</strong> In the browser, this line is displayed:</p>\n\n<pre><code>VLC media player 3.0.3 Vetinari Command Line Interface initialized. Type `help' for help. &gt; Shutting down.\n</code></pre>\n\n<p>I'm afraid I don't quite understand what's happening. I thought cgi scripts interacted directly with the command line; i.e. they could issue commands to <em>Terminal</em> directly. Was I mistaken in that? What am I doing wrong?</p>\n\n<p>Sorry, I know this question is somewhat scattered. If needed, I'll try to provide clarification as best I can.</p>\n\n<p>I'm somewhat new to all of this.</p>\n"}, {"tags": ["javascript", "php", "regex", "perl", "abap"], "comments": [{"owner": {"reputation": 971, "user_id": 9976846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uxw7E.png?s=128&g=1", "display_name": "Nambi_0915", "link": "https://stackoverflow.com/users/9976846/nambi-0915"}, "edited": false, "score": 0, "creation_date": 1536231749, "post_id": 52202609, "comment_id": 91354048, "body": "try this <code>(?&lt;=&gt;).+?(?=})</code> if you want &gt; and } then <code>(&gt;).+?(})</code>"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1536235159, "post_id": 52202609, "comment_id": 91356175, "body": "Which language? javascript, php, perl, abap ?"}], "answers": [{"tags": [], "owner": {"reputation": 871299, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "is_accepted": false, "score": 3, "last_activity_date": 1536231906, "creation_date": 1536231906, "answer_id": 52202697, "question_id": 52202609, "link": "https://stackoverflow.com/questions/52202609/regular-expression-to-find-a-string-that-begins-with-and-ends-with/52202697#52202697", "title": "Regular expression to find a string that begins with &gt; and ends with }", "body": "<p>It's just <code>/&gt;[^}]+}/g</code>: <code>&gt;</code> to mark where to start, <code>[^}]+</code> to say \"anything that isn't a <code>}</code>\" one or more times, and <code>}</code> to mark where to stop:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const str = \"data&gt;/ab/cd/peter} ;gopal came prop&gt;/site/sing/perl};\";\r\nconst rex = /&gt;[^}]+}/g;\r\nlet match;\r\nwhile (!!(match = rex.exec(str))) {\r\n  console.log(match[0]);\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 2133769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1d4e0b6d92aa940bf9a80c690615d6?s=128&d=identicon&r=PG", "display_name": "rachamalla kiran", "link": "https://stackoverflow.com/users/2133769/rachamalla-kiran"}, "edited": false, "score": 0, "creation_date": 1536236326, "post_id": 52202866, "comment_id": 91356920, "body": "Thanks Worked as expected"}], "tags": [], "owner": {"reputation": 480, "user_id": 4098392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1633ee5a2f08b551ce64a4f75673c24c?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Rathod", "link": "https://stackoverflow.com/users/4098392/arif-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1536232567, "creation_date": 1536232567, "answer_id": 52202866, "question_id": 52202609, "link": "https://stackoverflow.com/questions/52202609/regular-expression-to-find-a-string-that-begins-with-and-ends-with/52202866#52202866", "title": "Regular expression to find a string that begins with &gt; and ends with }", "body": "<p>Try this regex of javascript :</p>\n\n<pre><code>var inputStr = \"data&gt;/ab/cd/peter} ;gopal came prop&gt;/site/sing/perl};\";\n\nvar outputStr = inputStr.match(/(\\&gt;)([^\\&gt;\\}]*)(\\})/g);\nconsole.log(outputStr);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8896, "user_id": 9150270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e89ef7ec2f93f949e76081bd9d1749?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra Rossi", "link": "https://stackoverflow.com/users/9150270/sandra-rossi"}, "is_accepted": false, "score": 0, "last_activity_date": 1536235520, "creation_date": 1536235520, "answer_id": 52203726, "question_id": 52202609, "link": "https://stackoverflow.com/questions/52202609/regular-expression-to-find-a-string-that-begins-with-and-ends-with/52203726#52203726", "title": "Regular expression to find a string that begins with &gt; and ends with }", "body": "<p>In ABAP, you must escape <code>}</code>. Converting the right answer by @T.J. Crowder, this gives:</p>\n\n<pre><code>FIND ALL OCCURRENCES OF REGEX '&gt;[^}]+\\}' IN 'data&gt;/ab/cd/peter} ;gopal came prop&gt;/site/sing/perl};' RESULTS DATA(results). \n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 2133769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1d4e0b6d92aa940bf9a80c690615d6?s=128&d=identicon&r=PG", "display_name": "rachamalla kiran", "link": "https://stackoverflow.com/users/2133769/rachamalla-kiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1536235520, "creation_date": 1536231672, "last_edit_date": 1536233192, "question_id": 52202609, "link": "https://stackoverflow.com/questions/52202609/regular-expression-to-find-a-string-that-begins-with-and-ends-with", "title": "Regular expression to find a string that begins with &gt; and ends with }", "body": "<p>May I know how to write regular expression to get the string that starts with <code>&gt;</code> and ends with <code>}</code>?</p>\n\n<p><strong>Example string</strong> : </p>\n\n<pre><code>data&gt;/ab/cd/peter} ;gopal came prop&gt;/site/sing/perl};\n</code></pre>\n\n<p>I want the following sub-strings:</p>\n\n<pre><code>&gt;/ab/cd/peter}\n&gt;site/sing/perl}\n</code></pre>\n\n<p>I tried with this but not knowing how place a condition that starts with <code>&gt;</code>\nmy findings:</p>\n\n<pre><code>(\\/(\\w+)\\/)*(\\w+)(@*)(\\w+)(~*)((\\w+)?)\\/(\\w+)\\}\n</code></pre>\n"}, {"tags": ["perl", "batch-file", "console", "environment-variables", "command-prompt"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1536225638, "post_id": 52200304, "comment_id": 91350487, "body": "Is the first command (with spaces in the path) actually running correctly? See <a href=\"https://stackoverflow.com/a/52049740/2766176\">my answer to Execute Windows command with spaces in Perl</a> for instance."}, {"owner": {"reputation": 8086, "user_id": 487356, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/faa4d2befdc2f080be1cf88af1448855?s=128&d=identicon&r=PG", "display_name": "Robert Hegner", "link": "https://stackoverflow.com/users/487356/robert-hegner"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1536225807, "post_id": 52200304, "comment_id": 91350589, "body": "Yes the first command seems to run fine. I can see that batch file printing some banner to the console."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1536226614, "post_id": 52200304, "comment_id": 91351050, "body": "You create a shell, execute a batch file which does stuff like change <b>that process&#39;s environment</b>, then exit the process you changed. You need to execute both commands in the same shell somehow."}, {"owner": {"reputation": 8086, "user_id": 487356, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/faa4d2befdc2f080be1cf88af1448855?s=128&d=identicon&r=PG", "display_name": "Robert Hegner", "link": "https://stackoverflow.com/users/487356/robert-hegner"}, "edited": false, "score": 0, "creation_date": 1536227246, "post_id": 52200304, "comment_id": 91351437, "body": "And how would I do that in a perl script?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1536229955, "creation_date": 1536229955, "answer_id": 52202091, "question_id": 52200304, "link": "https://stackoverflow.com/questions/52200304/set-environment-variables-by-batch-file-called-from-perl-script/52202091#52202091", "title": "Set environment variables by batch file called from perl script", "body": "<ul>\n<li>Your process has an associated environment which contains things like the search path.</li>\n<li>When a sub-process starts, the new process has a new, separate, environment which starts as a copy of the parent process's environment.</li>\n<li>Any process (including sub-processes) can change their own environment. They cannot, however, change their parent's process's environment.</li>\n<li>Running <code>system()</code> creates a new environment.</li>\n</ul>\n\n<p>So when you call <code>system()</code> to set up your environment, it starts a new sub-process with a new environment. Your batch program then changes this new environment. But then the sub-process exits and its environment ceases to exist - taking all of the changes with it.</p>\n\n<p>You need to run the batch file in a parent process, before running your Perl program.</p>\n"}], "owner": {"reputation": 8086, "user_id": 487356, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/faa4d2befdc2f080be1cf88af1448855?s=128&d=identicon&r=PG", "display_name": "Robert Hegner", "link": "https://stackoverflow.com/users/487356/robert-hegner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 52202091, "answer_count": 1, "score": 0, "last_activity_date": 1536229955, "creation_date": 1536224331, "question_id": 52200304, "link": "https://stackoverflow.com/questions/52200304/set-environment-variables-by-batch-file-called-from-perl-script", "title": "Set environment variables by batch file called from perl script", "body": "<p>Let's consider the following perl script:</p>\n\n<pre><code>#!/usr/bin/perl\nsystem(\"C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/Common7/Tools/VsDevCmd.bat\");\nsystem(\"msbuild\");\n</code></pre>\n\n<p>The batch file invoked with the first <code>system</code> call is supposed to set up some environment variables so that the <em>msbuild</em> executable in the second <code>system</code> call can be found.</p>\n\n<p>When I run this perl script I get the following error:</p>\n\n<blockquote>\n  <p>'msbuild' is not recognized as an internal or external command,\n  operable program or batch file.</p>\n</blockquote>\n\n<p>So it looks like the environment variables set in the batch file are not made available to the context of the perl script.  What can I do to make this work?</p>\n\n<p><strong>Note 1</strong></p>\n\n<p>Running first the batch file from a console window and then running <code>msbuild</code> works fine. So the batch file works as expected and <em>msbuild</em> is actually available.</p>\n\n<p><strong>Note 2</strong></p>\n\n<p>My real-world perl script is much longer. This example here is a massive simplification which allows to reproduce the problem. So I cannot easily replace the perl script with a batch file, for example.</p>\n\n<p><strong>Note 3</strong></p>\n\n<p>The funny thing is: I've been using this perl script for one or two years without any problems. Then suddenly it stopped working.</p>\n"}, {"tags": ["perl", "prepend"], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 8326488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hv1L3.jpg?s=128&g=1", "display_name": "Sanjit Prasad", "link": "https://stackoverflow.com/users/8326488/sanjit-prasad"}, "edited": false, "score": 0, "creation_date": 1536341430, "post_id": 52200358, "comment_id": 91403774, "body": "Thanks for answering. So, even if I had to add only single text then also I have to copy all content(old file) to another file and then copy the same to the new file."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1536224495, "creation_date": 1536224495, "answer_id": 52200358, "question_id": 52200180, "link": "https://stackoverflow.com/questions/52200180/prepend-text-at-beginning-of-file-in-perl/52200358#52200358", "title": "Prepend TEXT at beginning of file in Perl", "body": "<p>You don't want to <em>append</em>, you want to <em>prepend</em>. The only possible way it to create a new file, write the new content, then copy the rest of the old file, and rename the new file to the old file's name.</p>\n\n<pre><code>my $new_filename = 'newfile.txt';\nmy $old_filename = 'oldfile.txt';\nopen my $new, '&gt;', $new_filename or die \"$new_filename: $!\";\nopen my $old, '&lt;', $old_filename or die \"$old_filename: $!\";\nprint {$new} \"Prepending at the beginning of the file.\\n\";\nprint {$new} $_ while &lt;$old&gt;;\nclose $new;\nrename $new_filename, $old_filename or die \"rename: $!\";\n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 8326488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hv1L3.jpg?s=128&g=1", "display_name": "Sanjit Prasad", "link": "https://stackoverflow.com/users/8326488/sanjit-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "closed_date": 1536225752, "answer_count": 1, "score": 0, "last_activity_date": 1536341487, "creation_date": 1536223969, "last_edit_date": 1536341487, "question_id": 52200180, "link": "https://stackoverflow.com/questions/52200180/prepend-text-at-beginning-of-file-in-perl", "closed_reason": "Duplicate", "title": "Prepend TEXT at beginning of file in Perl", "body": "<p>I want to append text at beginning of \"input.txt\" file. Here is my code </p>\n\n<pre><code>#!/usr/bin/perl\nopen(FHR,\"&gt;&gt;input.txt\");\nseek(FHR,0,0);\nprint FHR \"Appending at beginning of input.txt file\";\n</code></pre>\n\n<p>But this code is appending data at end of the file. How can I modify the code!</p>\n"}, {"tags": ["arrays", "perl", "filter", "compare"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1536232447, "post_id": 52200279, "comment_id": 91354489, "body": "I tried to do like this before, but I become confused, because the table.txt is always changing, i need to loop the each directory that contains table.txt under a single parent directory. Would you care to explain the line #taking the 2nd element only. Thanks."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1536233695, "post_id": 52200279, "comment_id": 91355241, "body": "@DanialHaris it&#39;s because you said <code>the middle texts is the wanted path in table.txt</code> I assumed it was always the 2nd. the function <code>split</code> with no argument will split the line with a /\\s+/ separator on $_ (here, it is the current line). the split will create an array, here (a, b/c/d, B), i&#39;m then taking element at index 1, here b/c/d"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1536234005, "post_id": 52200279, "comment_id": 91355430, "body": "if you have several <code>table.txt</code> I guess you could first go through the parent directory to find the <code>table.txt</code>files and push every path in an array. After that run the <code>open(my $table .....); </code>while&lt;$table&gt;` loop, foreach path in the array"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1536234017, "post_id": 52200279, "comment_id": 91355437, "body": "yes you are correct, I wanted the middle texts. Oh I see, if I take element index 0, it means a, and 2, is B, correct? Regarding my script, how do you proposed if I need to loop different table.txt to compare with list.txt"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1536234289, "post_id": 52200279, "comment_id": 91355589, "body": "if you want to keep the printing of the path, I would suggest to build the <code>%table_paths</code> with path associated to key, instead of <code>1</code>, in the final print, you will then print <code>$table_path{$_};</code> instead of <code>$path</code>.  Try this and let me know if you succeed ;)"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1536234381, "post_id": 52200279, "comment_id": 91355652, "body": "but, with that method, you won&#39;t know if a path is present in several <code>table.txt</code>  I first chose this method because I didn&#39;t know you had several files"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1536234383, "post_id": 52200279, "comment_id": 91355658, "body": "how do you split the path in the list.txt? what if the path is so long and the wanted path is the end side, like this wqw/asf/asd/b/c/d/e and the other path in list.txt is aass/sewq/dasdq/ddd/b/c/d where the &quot;/&quot; is not constantly split, how you do that then?"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1536234681, "post_id": 52200279, "comment_id": 91355872, "body": "if you want to keep the printing of the path, I would suggest to build the %table_paths with path associated to key, instead of 1, in the final print, you will then print $table_path{$_}; instead of $path. Try this and let me know if you succeed ;)  - I don&#39;t understand, which path that I want to keep printing? the only thing that I want is that the unmatched path in the table.txt and the file location or directory of the table.txt after compared with list.txt"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1536234709, "post_id": 52200279, "comment_id": 91355894, "body": "I didn&#39;t know that, from what you posted in your question, it seemed that path in <code>list</code> file had always the same format. Maybe, don&#39;t split, just put the path directly as a key and then test if keys match between <code>list</code> and <code>table</code> to decide whether you delete key from <code>table_paths</code> or not"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1536234825, "post_id": 52200279, "comment_id": 91355981, "body": "you could try something with my code, adapt it and try to achieve what you want. I don&#39;t think it will need much work. I posted this code fitting with your original post. It&#39;s now your time to work ;)"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 1, "creation_date": 1536236345, "post_id": 52200279, "comment_id": 91356936, "body": "@DanialHaris ok I couldn&#39;t resist, I edited my code, tell me if that works ;)"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1536238121, "post_id": 52200279, "comment_id": 91358024, "body": "You are too awesome man! really, look how my code is? so long. you do it with a much simple way. Thanks man."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1536238127, "post_id": 52200279, "comment_id": 91358031, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/179547/discussion-between-danial-haris-and-flying-whale\">continue this discussion in chat</a>."}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1536304512, "post_id": 52200279, "comment_id": 91382985, "body": "how do i print for (my $i=1;$i&lt;=%table_hash;$i++) to get this outcome           1) unmatched: b/c/d/g      location      : some/location/table.txt"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1536309717, "post_id": 52200279, "comment_id": 91385796, "body": "@DanialHaris I don&#39;t understand, my code already prints this, no?"}, {"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1536311523, "post_id": 52200279, "comment_id": 91386803, "body": "yes, indeed, but how I can print the (number beside the unmatched: ...) , so everytime it prints , i know how many unmatched paths"}], "tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": 1, "last_activity_date": 1536236303, "last_edit_date": 1536236303, "creation_date": 1536224264, "answer_id": 52200279, "question_id": 52196496, "link": "https://stackoverflow.com/questions/52196496/save-all-data-in-array-filter-out-duplicated-data-compare-data-between-arrays/52200279#52200279", "title": "Save all Data in array, Filter out duplicated Data, Compare Data between arrays and Removed the matched Data", "body": "<p>I think using hashes is much simpler here<br>\nhere's what I tried:\nyou will have to replace <code>@all_path</code> with your array containing every path where table is present</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @all_path =(\"some/location/table.txt\",\"some/location_2/table.txt\");\nmy %table_paths;\nmy %list_paths;\n\nforeach my $path (@all_path)\n{\n    open (my $table, \"&lt;\", $path) or die (\"error opening file\");\n    #we create hash, each key is a path\n    while (&lt;$table&gt;)\n    {\n        chomp;\n        #only process lines starting with \"a\" as it seems to be the format of this file\n        $table_paths{(split)[1]}=$path if (/^a/); #taking the 2nd element in each line\n    }\n\n    close $table;\n}\n\nopen (my $list, \"&lt;\", \"list.txt\") or die (\"error opening file\");\n\n#we create hash, each key is a path\nwhile (&lt;$list&gt;)\n{\n    chomp;\n    $list_paths{$_}=1;\n}\n\nclose $list;\n\n#now we delete from table_paths common keys with list, that lefts unmathed\nforeach my $key (keys %table_paths)\n{\n    delete $table_paths{$key} if (grep {$_ =~ /$key$/} (keys %list_paths));\n}\n\n#printing unmatched keys\nprint \"unmatched :$_\\nlocation: $table_paths{$_}\\n\\n\" foreach keys %table_paths;\n</code></pre>\n\n<h1>inputs</h1>\n\n<p>in some/location/table.txt</p>\n\n<pre><code>##WHAT PATH IS_THAT,Backup\na   b/c/d   B\na   b/c/d/e  B\na   b/c/d/e/f  B\na   b/c/d/g  B\n</code></pre>\n\n<p>in some/location_2/table.txt</p>\n\n<pre><code>##WHAT PATH IS_THAT,Backup\na   b/c/d/j B\n</code></pre>\n\n<p>in list.txt</p>\n\n<pre><code>rty/b\nuio/b/c\nqwe/dummyName/b/c/d\nasd/b/c/d/e\nzxc/b/c/d/e/f\nvbn/c/d/e\nfgh/j/k/l\n</code></pre>\n\n<h1>output:</h1>\n\n<pre><code>unmatched: b/c/d/g\nlocation: some/location/table.txt\n\nunmatched: b/c/d/j\nlocation: some/location_2/table.txt\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536236303, "creation_date": 1536207988, "last_edit_date": 1536235203, "question_id": 52196496, "link": "https://stackoverflow.com/questions/52196496/save-all-data-in-array-filter-out-duplicated-data-compare-data-between-arrays", "title": "Save all Data in array, Filter out duplicated Data, Compare Data between arrays and Removed the matched Data", "body": "<p>I have some problems regarding my script.\nThe problems are:</p>\n\n<ol>\n<li>The value of $str or @matchedPath sometimes blank when I print out. It is not random, it happen only to certain Path in the table.txt file, which I can't figure it out, why?</li>\n<li>How to print like the outcome, because I can't find the correct file location or directory of table.txt file because I have put all the path location in an array, filtered it and compared with the matched correct file location of table.txt, because of this, some location is missing when printed out.</li>\n</ol>\n\n<p>Example path that the /home/is/latest/table.txt files contain, the bold texts is the wanted path in table.txt,</p>\n\n<pre><code>##WHAT PATH IS_THAT,Backup\na   b/c/d   B\na   b/c/d/e  B\na   b/c/d/e/f  B\na   b/c/d/g  B\n</code></pre>\n\n<p>Example path that the /home/are/latest/table.txt files contain, the middle texts is the wanted path in table.txt,</p>\n\n<pre><code>##WHAT PATH IS_THAT,Backup\na   b/c/d/j B\n</code></pre>\n\n<p>e.g. list.txt file contains,</p>\n\n<pre><code>rty/b\nuio/b/c\nqwe/b/c/d\nasd/b/c/d/e\nzxc/b/c/d/e/f\nvbn/c/d/e\nfgh/j/k/l\n</code></pre>\n\n<p>Expected outcome:</p>\n\n<pre><code>Unmatched Path         : b/c/d/g\ntable.txt file location: /home/is/latest/table.txt\n\nUnmatched Path         : b/c/d/j\ntable.txt file location: /home/are/latest/table.txt\n</code></pre>\n\n<p>Below is my detailed script,</p>\n\n<pre><code>#!/usr/perl/5.14.1/bin/perl \n\n# I want to make a script that automatically compare the path in table.txt with list.txt\n#table.txt files is located under a parent directory and it differs in the subdirectory.\n#There is about 10 table.txt files and each one of it need to compare with list.txt\n#The objective is to print out the path that are not in the list.txt\n\nuse strict;\nuse warnings;\nuse Switch;\nuse Getopt::Std;\nuse Getopt::Long;\nuse Term::ANSIColor qw(:constants);\nuse File::Find::Rule;\nuse File::Find;\nuse File::Copy;\nuse Cwd;\nuse Term::ANSIColor;\n\nmy $path1='/home';                                                      #Automatically search all table.txt file in this directory even in subdirectory\nmy $version='latest';                                                   #search the file specified subdirectory e.g. /home/is/latest/table.txt and /home/are/latest/table.txt\nmy $path2='/list.text';                                                 #there is about 10 table.txt files which contain specified paths in it.\n\n$path1 =~ s/^\\s+|\\s+$//g;\n$version =~ s/^\\s+|\\s+$//g;\n$path2 =~ s/^\\s+|\\s+$//g;\n\nmy @files = File::Find::Rule-&gt;file()\n                            -&gt;name( 'table.txt' )\n                            -&gt;in( \"$path1\" );\n\nmy @symlink_dirs = File::Find::Rule-&gt;directory-&gt;symlink-&gt;in($path1);      #If the directory is a symlink, in my case 'latest' is a symlink directory\nprint colored (sprintf (\"\\n\\n\\tSUMMARY REPORT\"),'bold','magenta');\nprint  \"\\n\\n_______________________________________________________________________________________________________________________________________________________\\n\\n\";\n\nif ($version eq \"latest\")\n{\n    foreach my $dir (@symlink_dirs) \n    {\n        my @filess = File::Find::Rule-&gt;file()\n                                     -&gt;name( 'table.txt' )\n                                     -&gt;in( \"$path1\" );\n        my $symDir=($dir.\"/\".\"table.txt\");\n        $symDir =~ s/^\\s+|\\s+$//g;\n        my $wantedPath=$symDir;\n        my $path_1 = $wantedPath;\n        function($path_1);      \n\n    }\n}\n\nelse \n{\n\n    for my $file (@files)   \n    {\n\n        if ($file =~ m/.*$version.*/)\n        {\n        my $wantedPath=$file;\n            my $path_1 = $wantedPath;\n            function($path_1);  \n        }\n    }\n}\n\nsub function\n    {\n\n    my $path_1 = $_[0];\n    open DATA, '&lt;', $path_1 or die \"Could not open $path_1: $!\";\n\n    my $path_2 = \"$path2\";\n    open DATA1, '&lt;', $path_2 or die \"Could not open $path_2: $!\";\n\n################# FOCUSED PROBLEM AREA ##############################       \n    my @matchedPath;\n    my @matched_File_Path;\n    my @unmatchedPath;\n    my @unmatched_File_Path;\n    my @s2 = &lt;DATA1&gt;;\n\n        while(&lt;DATA&gt;)\n        {\n\n        my $s1 = $_;\n\n            if ($s1 =~ /^#.*/) \n            {\n            next;\n            }\n\n            if ($s1 =~ /(.*)\\s+(.*)\\s+(.*)\\s+/) \n            {\n            my $str=($2);\n            $str =~ s/\\s+//g;\n\n                for my $s2 (@s2)\n                {\n\n                    if ($s2 =~ /.*$str/)\n                    {\n                    push @matchedPath,$str;                                      \n                    push @matched_File_Path,$path_1;                                \n                    print \"matched Path: $str\\n\\t$path_1\\n\"; #I don't understand, sometimes I get empty $str value in this. Can anyone help me?\n                    last;\n                    }\n                    else\n                    {\n                    #print \"unmatch:$str\\n\\t$path_1\\n\";                     \n                    push @unmatchedPath,$str;                                   \n                    @unmatched_File_Path,$path_1;\n                                        }\n                }\n            }\n        }\n        foreach (@unmatchedPath)\n        {print \"unmatch path: $_\\n\";}        \n        foreach (@matchedPath)\n        {print \"\\nmatch path: $_\\n\\n\";}     \n\n        foreach (@unmatched_File_Path)       \n        {print \"unmatch File Path: $_\\n\";}\n        foreach (@matched_File_Path)         \n        {print \"match File Path: $_\\n\";}\n\n        my @filteredUnmatchedPath = uniq(@unmatchedPath);                   \n        my @filteredUnmatched_IP_File_Path =uniq(@unmatched_IP_File_Path); \n         @filteredUnmatchedPath = grep {my $filteredPath = $_; not grep $_ eq $filteredPath, @matchedPath} @filteredUnmatchedPath;\n}\n        print \"@filteredUnmatchedPath\\n\";   \n        print \"@filteredUnmatched_IP_File_Path\\n\";\n\nsub uniq \n{\n    my %seen;\n    grep !$seen{$_}++, @_;\n}\n\n\n\nclose(DATA);\nclose(DATA1);\n\nprint  \"_________________________________________________________________________________________________________________________________________________________\\n\\n\";\n</code></pre>\n"}]