[{"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508356521, "post_id": 46818084, "comment_id": 80583692, "body": "hum, <code>flock</code> should always allow another thread to obtain a lock, not just &quot;under stress&quot;."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508357728, "post_id": 46818084, "comment_id": 80584317, "body": "Is it true in case each thread has its own file handle?"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1508358916, "post_id": 46818084, "comment_id": 80584942, "body": "<a href=\"https://linux.die.net/man/2/flock\" rel=\"nofollow noreferrer\">linux.die.net/man/2/flock</a> gives more details on how and when an flock can succeed within same process and same or different fd."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1508359545, "post_id": 46818084, "comment_id": 80585232, "body": "It is somewhat unclear: &#39;descriptors are treated independently by flock()&#39; and &#39;A process may only hold one type of lock (shared or exclusive) on a file. Subsequent flock() calls on an already locked file will convert an existing lock to the new lock mode&#39;."}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1508359986, "post_id": 46818084, "comment_id": 80585456, "body": "So, whithin the same process, is it supposed to block one thread when file was locked by another thread via separate file descriptor?"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1508414953, "post_id": 46818084, "comment_id": 80606358, "body": "Oh yes, <code>flock</code> works on open files specified by a file descriptor: &quot;Apply or remove an advisory lock on the open file specified by <i>fd</i>.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1508366292, "post_id": 46819735, "comment_id": 80588061, "body": "NFS is the bane of <code>flock</code>&#39;s existence, too."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1508366353, "post_id": 46819735, "comment_id": 80588081, "body": "@mob sigh ... I work over (under) NFS here :(.  There are good things about it of course (but those don&#39;t happen so often to me)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1508387062, "post_id": 46819735, "comment_id": 80592941, "body": "@AndyH  Added specific example for locking file access"}, {"owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "edited": false, "score": 0, "creation_date": 1508450507, "post_id": 46819735, "comment_id": 80626919, "body": "@zdim Thank you! Your solution does not provide exclusive/shared locks function, but I still can use it as a temporary fix and then create a read-write lock based on your code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "edited": false, "score": 0, "creation_date": 1510780764, "post_id": 46819735, "comment_id": 81585885, "body": "@mpersico  If you mean why I haven&#39;t presented it here as a module, it is to make it simpler.  If you referred to CPAN ... first, thank you for nice words.  For one, I am not sure how generally useful it is (at least, it would take more work to make it so); also, it takes work to prepare it for posting there.  But if this is deemed useful I&#39;ll be happy to do it!"}, {"owner": {"reputation": 472, "user_id": 1830614, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b045d60d744130d2f456a2525e50e933?s=128&d=identicon&r=PG", "display_name": "mpersico", "link": "https://stackoverflow.com/users/1830614/mpersico"}, "edited": false, "score": 0, "creation_date": 1510849014, "post_id": 46819735, "comment_id": 81620133, "body": "The latter. :-) Would have saved many, many people from reinventing the wheel and having it turn out square (me included).  As for &quot;generally useful&quot;, do an experiment - modulize it, post it and see how many downloads it gets (and how much email it generated for you)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 13, "last_activity_date": 1510780620, "last_edit_date": 1510780620, "creation_date": 1508363009, "answer_id": 46819735, "question_id": 46818084, "link": "https://stackoverflow.com/questions/46818084/read-write-lock-in-perl/46819735#46819735", "title": "Read-write lock in Perl", "body": "<p>The <code>flock</code> won't do what you want across threads.  </p>\n\n<p>You can implement your own locking using <a href=\"http://perldoc.perl.org/functions/sysopen.html\" rel=\"noreferrer\">sysopen</a>, which fails if the file exists when used with <code>O_EXCL|O_CREAT</code>. </p>\n\n<p>An example, with child processes competing for a lock</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse Fcntl;\nuse Time::HiRes qw(sleep);\n\nmy $lock_file = \".lock.$$\";\nsub get_lock {\n    my ($file, $pid) = @_; \n    my $fh;\n    while (not sysopen $fh, $file, O_WRONLY|O_EXCL|O_CREAT) {\n        say \"\\t($$: lock-file exists ..)\";\n        sleep 0.5;\n    }   \n    say $fh $pid;\n}\nsub release_lock {\n    my ($file, $pid) = @_; \n    unlink $file or die \"Error unliking $file: $!\";\n    say \"\\t($$: released lock)\";\n}\n\nmy @pids;\nfor (1..4) {\n    my $pid = fork // die \"Can't fork: $!\";\n    if ($pid == 0) {\n        sleep rand 1;\n        get_lock($lock_file, $$);\n        say \"$$, locked and processing\";\n        sleep rand 1;\n        release_lock($lock_file, $$);\n        say \"$$ completed.\";\n        exit\n    }   \n    push @pids, $pid;    \n}\nwait for @pids;\n</code></pre>\n\n<p>It is better use <a href=\"https://perldoc.perl.org/File/Temp.html\" rel=\"noreferrer\">File::Temp</a> for the lockfile name but read the docs carefully for subtleties.</p>\n\n<p>Sample output with 3 processes</p>\n\n<pre>\n3659, locked and processing\n        (3660: lock-file exists ..)\n        (3658: lock-file exists ..)\n        (3659: released lock)\n3659 completed.\n3660, locked and processing\n        (3658: lock-file exists ..)\n        (3658: lock-file exists ..)\n        (3660: released lock)\n3660 completed.\n3658, locked and processing\n        (3658: released lock)\n3658 completed.\n</pre>\n\n<hr>\n\n<p>The <code>O_EXCL</code> may be unsuppored under NFS: you must have at least 2.6 kernel and NFSv3 or there will be a race condition. If this is a problem the workaround is to use <code>link(2)</code> to obtain a lock. See <code>man 2 open</code> (also for other details since <code>sysopen</code> uses <code>open</code> syscall).</p>\n\n<hr>\n\n<p>To lock only file access, for example</p>\n\n<pre><code>sub open_with_lock {\n    my ($file, $mode) = @_; \n    get_lock($lock_file, $$);\n    open my $fh, $mode, $file or die \"Can't open $file: $!\";\n    return $fh;\n}\n\nsub close_and_release {\n    my ($fh) = @_; \n    close $fh;\n    release_lock($lock_file, $$);\n    return 1;\n}\n</code></pre>\n\n<p>These can be placed in a module along with <code>get_lock</code> and <code>release_lock</code>, with the lock-file name as a package global, for example.</p>\n\n<p>A simple test-driver</p>\n\n<pre><code># use statements as above\nuse Path::Tiny;           # only to show the file\n\nmy $lock_file = \".lock.file.access.$$\"; \nmy $file = 't_LOCK.txt';    \nmy @pids;\nfor (1..4) \n{\n    my $pid = fork // die \"Can't fork: $!\";\n\n    if ($pid == 0) {\n        sleep rand 1;\n        my $fh = open_with_lock($file, '&gt;&gt;');\n        say \"$$ (#$_) opening $file ..\";\n        say $fh \"this is $$ (#$_)\";\n        sleep rand 1;\n        close_and_release($fh);\n        say \"$$ (#$_) closed $file.\";\n        say '---';\n        exit;\n    }   \n    push @pids, $pid;\n}\nwait for @pids;\n\nprint path($file)-&gt;slurp;\nunlink $file;\n</code></pre>\n\n<p>With <code>use</code> statements from the first example and with 3 forks, a run</p>\n\n<pre>\n        (18956: \"lock\"-file exists ..)    # print out of order\n18954 (#1) opening t_LOCK.txt ...\n        (18955: \"lock\"-file exists ..)\n        (18956: \"lock\"-file exists ..)\n        (18955: \"lock\"-file exists ..)\n        (18954: released lock)\n18954 (#1) closed t_LOCK.txt.\n---\n18956 (#3) opening t_LOCK.txt ...\n        (18955: \"lock\"-file exists ..)\n        (18956: released lock)\n18956 (#3) closed t_LOCK.txt.\n---\n18955 (#2) opening t_LOCK.txt ...\n        (18955: released lock)\n18955 (#2) closed t_LOCK.txt.\n---\nthis is 18954 (#1)\nthis is 18956 (#3)\nthis is 18955 (#2)\n</pre>\n\n<p>(note that independent processes are fighting for <code>STDOUT</code>)</p>\n"}], "owner": {"reputation": 381, "user_id": 2528048, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b9849fb755adebf6cb4d0b734832762?s=128&d=identicon&r=PG", "display_name": "AndyH", "link": "https://stackoverflow.com/users/2528048/andyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1014, "favorite_count": 0, "accepted_answer_id": 46819735, "answer_count": 1, "score": 4, "last_activity_date": 1510780620, "creation_date": 1508356114, "question_id": 46818084, "link": "https://stackoverflow.com/questions/46818084/read-write-lock-in-perl", "title": "Read-write lock in Perl", "body": "<p>I am looking for a good way to implement read/write lock in Perl.\nThis is needed to synchronize file access from different Perl threads and/or processes on Windows and Unix.\nTried Fcntl::flock which would be perfect for me if it worked as expected. Unfortunately it looks like under stress flock allows to set lock on already locked file in another thread.\nLooked into some CPAN modules, but most are implemented with flock.\nNext I am planning to evaluate fcntl for Unix and Win32::Mutex for Windows.\nThis seems like a pretty common task and perhaps I am missing some simple solution.\nIf you are aware of any, could you please point it out for me?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "loops", "foreach"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1508358928, "post_id": 46818372, "comment_id": 80584951, "body": "@Iv&#225;nRodr&#237;guezTorres  Updated the answer, both by editing the first example and the explanation, and adding a better example.  The upshot is of course the same: <code>for</code> is wrong and one needs to use <code>while</code>.  But, as for explaining the behavior when <code>for</code> is used, there is a whole lot more.  Thank you for attribution."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "edited": false, "score": 0, "creation_date": 1508445743, "post_id": 46818372, "comment_id": 80624839, "body": "@Iv&#225;nRodr&#237;guezTorres  Glad it helped and thank you for saying that. It is a pleasure to interact with you :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1509057700, "last_edit_date": 1509057700, "creation_date": 1508357209, "answer_id": 46818372, "question_id": 46817839, "link": "https://stackoverflow.com/questions/46817839/different-results-iterating-over-a-hash-in-perl/46818372#46818372", "title": "Different results iterating over a hash in Perl", "body": "<p>The use of <code>foreach</code> with <code>each</code> is wrong</p>\n\n<pre><code>perl -wE'%h=(a=&gt;1,b=&gt;2,c=&gt;3); for (($k, $v) = each %h) { say \"$k =&gt; $v\" }'\n</code></pre>\n\n<p>prints</p>\n\n<pre>\nc => 3\nc => 3\n</pre>\n\n<p>With <code>while</code> instead of <code>foreach</code> we get the correct behaviour.</p>\n\n<p>That this is wrong can be seen from <a href=\"http://perldoc.perl.org/functions/each.html\" rel=\"nofollow noreferrer\">each</a> (my emphasis)</p>\n\n<blockquote>\n  <p>When called on a hash in list context, returns a 2-element list consisting of the key and value for the <strong>next element</strong> of a hash.</p>\n</blockquote>\n\n<p>So <code>each</code> iterates and since <code>foreach</code> first generates the whole list (to iterate over) <code>each</code> is made to iterate internally in a (clearly) ill-defined way; this may exhibit an undefined behavior. We end up with an incorrect list of key-value pair(s) for <code>foreach</code> to iterate over (formed internally using <code>each</code>).</p>\n\n<p>Read <code>each</code> page carefully for further subtleties in use of <code>keys</code>, <code>values</code>, and <code>each</code>. </p>\n\n<hr>\n\n<p>A more telling example</p>\n\n<pre><code>perl -wE'@h{(\"a\"..\"f\")} = (1..6); for (($k, $v) = each %h) { say \"$k =&gt; $v\" }'\n</code></pre>\n\n<p>prints on my system</p>\n\n<pre>\ne => 5\ne => 5\n</pre>\n\n<p>When run correctly with <code>while</code> the <code>e =&gt; 5</code> pair is returned <em>first</em>.  So we get that pair, twice.</p>\n\n<p>(<em>Still trying to figure out why twice ...</em>)</p>\n"}], "owner": {"reputation": 3703, "user_id": 2127296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kjm9H.png?s=128&g=1", "display_name": "Iv&#225;n Rodr&#237;guez Torres", "link": "https://stackoverflow.com/users/2127296/iv%c3%a1n-rodr%c3%adguez-torres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 46818372, "answer_count": 1, "score": 1, "last_activity_date": 1509057700, "creation_date": 1508355107, "question_id": 46817839, "link": "https://stackoverflow.com/questions/46817839/different-results-iterating-over-a-hash-in-perl", "title": "Different results iterating over a hash in Perl", "body": "<p>My problem is simple. I have to print some key-value pairs from a hash. I tried two different methods:</p>\n\n<p><strong>METHOD A</strong></p>\n\n<pre><code>#Fill hash from file ($fh has been defined previously)\n\nwhile(my $line = &lt;$fh&gt;) {\n    $counter{$line}++;\n}\n\nforeach (my($k, $v) = each %counter){\n    my ($p1, $p2) = split(/$;/o, $k);\n\n    chomp $p2;\n\n    if($v &gt; 0){\n      printf \"%s_down_%s %s %d\\n\", $prefix, $p1, $p2, $v;\n      printf \"%s_up_%s %s %d\\n\", $prefix, $p2, $p1, $v;\n    }\n}\n</code></pre>\n\n<p><strong>METHOD B</strong></p>\n\n<pre><code>#Fill hash from file ($fh has been defined previously)\n\nwhile(my $line = &lt;$fh&gt;) {\n    $counter{$line}++;\n}\n\nforeach $k (keys %counter) {\n    my ($p1, $p2) = split(/$;/o, $k);\n    my $v = $counter{$p1,$p2};\n\n    chomp $p2;\n\n    if($v &gt; 0){\n      printf \"%s_down_%s %s %d\\n\", $prefix, $p1, $p2, $v;\n      printf \"%s_up_%s %s %d\\n\", $prefix, $p2, $p1, $v;\n    }\n}\n</code></pre>\n\n<p>Reading the code, I would say both methods get the same result, but, after executing it, <strong>method B</strong>, got the right results and <strong>method A</strong> printed just two elements (4 lines). </p>\n\n<p>After running the <strong>method A</strong> several times, I can see that the elements printed change each execution. </p>\n\n<p>Anybody knows what is going on here? </p>\n"}, {"tags": ["html", "css", "perl", "mojo-dom"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1508351658, "post_id": 46816739, "comment_id": 80581146, "body": "Strategy: traverse all child nodes of the <code>&lt;td&gt;</code>. Filter out all <code>&lt;b&gt;</code> elements. Extract the text from the rest. But it seems you don&#39;t want to get rid of the bold text, but find a date. Extracting all text, then applying a regex to the plain text might be more sensible if that is your goal."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1508352807, "post_id": 46816739, "comment_id": 80581764, "body": "<i>&quot;I am able to use regular expressions to pull out the text but that is not an ideal solution at this point&quot;</i> I wonder why not? It seems that you want to extract the date from the <code>&lt;tr&gt;</code> element, and relying on that part of the text being unbolded is a strange approach. The bold tag is stylistic, not semantic, while an <code>mm&#47;dd&#47;yyyy</code> date sequence is very easy to extract precisely from the text."}, {"owner": {"reputation": 408, "user_id": 5754215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a25087206bb2bdb33835071f240453db?s=128&d=identicon&r=PG&f=1", "display_name": "Not a machine", "link": "https://stackoverflow.com/users/5754215/not-a-machine"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508353302, "post_id": 46816739, "comment_id": 80582050, "body": "@Boro   All the &lt;tr&gt; elements do not contain dates.   There are hundreds of elements and some with very complex formats."}, {"owner": {"reputation": 408, "user_id": 5754215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a25087206bb2bdb33835071f240453db?s=128&d=identicon&r=PG&f=1", "display_name": "Not a machine", "link": "https://stackoverflow.com/users/5754215/not-a-machine"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1508353424, "post_id": 46816739, "comment_id": 80582132, "body": "@amon To clarify, I do want to get ride of the bold text. I am unsure of how to filter out all the &lt;b&gt; elements using CSS selectors (or Mojo&#39;s version of CSS selectors)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508353492, "post_id": 46816739, "comment_id": 80582166, "body": "@Notamachine: Then <b>Pat&#39;s</b> <code>text</code> call should be exactly what you need."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1508353924, "post_id": 46816739, "comment_id": 80582388, "body": "@Notamachine: <i>&quot;or Mojo&#39;s version of CSS selectors&quot;</i> as far as I know, <code>Mojo::DOM::CSS</code> is a pretty much complete implementation of CSS3."}, {"owner": {"reputation": 408, "user_id": 5754215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a25087206bb2bdb33835071f240453db?s=128&d=identicon&r=PG&f=1", "display_name": "Not a machine", "link": "https://stackoverflow.com/users/5754215/not-a-machine"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508383549, "post_id": 46816739, "comment_id": 80592186, "body": "@Borodin  The coverage may be complete but the syntax is not always what you might expect if you are a jQuery user as I am."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508391182, "post_id": 46816739, "comment_id": 80594024, "body": "@Notamachine: I can&#39;t imagine what you may mean. The syntax of CSS is defined independently of both Mojolicious and jQuery, and if you find the implementation in <code>Mojo::DOM</code> unfamiliar then it is jQuery that is non-standard. I wonder if you may have been using CSS2 before, although CSS3 is a superset of previous editions and anything that worked before should still be correct. Either way, the point is that you are uncomfortable with CSS3 and I will bear that in mind."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508392407, "post_id": 46816739, "comment_id": 80594394, "body": "@Notamachine: I&#39;ve just discovered that jQuery provides a non-standard superset of CSS. In particular the <code>has</code> selector, which would be useful here, is not part of standard CSS. I believe it currently has <i>experimental</i> status for CSS4, and isn&#39;t supported by all browsers."}], "answers": [{"comments": [{"owner": {"reputation": 408, "user_id": 5754215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a25087206bb2bdb33835071f240453db?s=128&d=identicon&r=PG&f=1", "display_name": "Not a machine", "link": "https://stackoverflow.com/users/5754215/not-a-machine"}, "edited": false, "score": 0, "creation_date": 1508353741, "post_id": 46817056, "comment_id": 80582282, "body": "Thank you for this.  I tried -&gt;text but apparently didn&#39;t wrap it correctly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508391716, "post_id": 46817056, "comment_id": 80594173, "body": "The tidiest way to do this is to use <code>map</code> to call the <code>text</code> method on each matching element, and <code>each</code> without parameters to convert the collection into an ordinary list. <code>my @vals = $results_dom-&gt;find(&#39;...&#39;)-&gt;map(&#39;text&#39;)-&gt;each</code> will leave the array containing the required text strings."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508391964, "post_id": 46817056, "comment_id": 80594251, "body": "By the way, you may prefer to use <code>tr:last-child</code> in place of <code>tr:nth-child(3)</code> if the third row is always the last row in the table."}], "tags": [], "owner": {"reputation": 2363, "user_id": 5712587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac51f092cb5f486310ec3d66e1cecd59?s=128&d=identicon&r=PG&f=1", "display_name": "Pat", "link": "https://stackoverflow.com/users/5712587/pat"}, "is_accepted": true, "score": 2, "last_activity_date": 1508351979, "creation_date": 1508351979, "answer_id": 46817056, "question_id": 46816739, "link": "https://stackoverflow.com/questions/46816739/css-selection-using-mojodom/46817056#46817056", "title": "CSS selection using Mojo::DOM", "body": "<p>From the <a href=\"http://mojolicious.org/perldoc/Mojo/DOM#text\" rel=\"nofollow noreferrer\">Documentation</a>:</p>\n\n<blockquote>\n  <p><strong>text</strong> </p>\n  \n  <p>Extract text content from this element only (<strong>not including child\n  elements</strong>).</p>\n</blockquote>\n\n<p>Try giving this a shot:</p>\n\n<p>(Granted I don't really know perl, so if I got the syntax wrong... sorry)</p>\n\n<pre><code>$row_content = $results_dom-&gt;find('div#tabs-1 tr:nth-child(3) td')-&gt;each(sub { say $_-&gt;text})\n</code></pre>\n"}], "owner": {"reputation": 408, "user_id": 5754215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a25087206bb2bdb33835071f240453db?s=128&d=identicon&r=PG&f=1", "display_name": "Not a machine", "link": "https://stackoverflow.com/users/5754215/not-a-machine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 46817056, "answer_count": 1, "score": 0, "last_activity_date": 1508351979, "creation_date": 1508350700, "question_id": 46816739, "link": "https://stackoverflow.com/questions/46816739/css-selection-using-mojodom", "title": "CSS selection using Mojo::DOM", "body": "<p>This is a multidisciplinary question so the answer may not be purely CSS.</p>\n\n<p>I am parsing a large table and my goal is to retrieve only the text outside of the <code>&lt;b&gt;&lt;/b&gt;</code> tags.  I am able to select the rows but stuck on how to only select text outside of the bold tag.</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;div id=\"tab1\"&gt;\n&lt;table width='650' class='subtblfont'&gt;\n    &lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt; \n    &lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;        \n    &lt;tr&gt;\n        &lt;td&gt;&lt;b&gt;Check-in Date:&amp;nbsp;&lt;/b&gt;04/20/2013&lt;/td&gt;\n        &lt;td&gt;&lt;b&gt;Check-in Date:&amp;nbsp;&lt;/b&gt;04/25/2013&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>$row_content = $results_dom-&gt;find('div#tabs-1 tr:nth-child(3) td');\n\nforeach (@$row_content) {\n    print \"$_\\n\";\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>&lt;td&gt;&lt;b&gt;Check-in Date:&amp;nbsp;&lt;/b&gt;04/20/2013&lt;/td&gt;\n&lt;td&gt;&lt;b&gt;Check-in Date:&amp;nbsp;&lt;/b&gt;04/25/2013&lt;/td&gt;\n</code></pre>\n\n<p><strong>Desired Output</strong></p>\n\n<pre><code>04/20/2013\n04/25/2013\n</code></pre>\n\n<p>I am able to use regular expressions to pull out the text but that is not an ideal solution at this point.  Is there a way to select only the non-bold text?</p>\n"}, {"tags": ["json", "perl", "hash"], "comments": [{"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1508345743, "post_id": 46815320, "comment_id": 80578129, "body": "What about Sys::HostIP,  Net::Interface or other modules from CPAN? Would that work for you?"}, {"owner": {"reputation": 40, "user_id": 8254232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3889b74d17e78f1389b0cbe4ce2fe0c?s=128&d=identicon&r=PG&f=1", "display_name": "Yakup", "link": "https://stackoverflow.com/users/8254232/yakup"}, "reply_to_user": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1508370386, "post_id": 46815320, "comment_id": 80589143, "body": "Modules you suggest are good, but I wanted more general solution. With some tweaking I can now parse and encode in JSON also other types of config files, with a different syntax. Thanks for the advice anyway."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1508346421, "creation_date": 1508346421, "answer_id": 46815606, "question_id": 46815320, "link": "https://stackoverflow.com/questions/46815320/creating-hash-of-hashes-from-list-of-network-interface-config-files-in-perl/46815606#46815606", "title": "Creating hash of hashes from list of network interface config files in perl", "body": "<p>The problem is that <code>$configuration{$input}</code> always refers to the same hash <code>%temp_hash</code> because you have declared it at file level. You need to created a new hash for each config file by declaring <code>%temp_hash</code> inside the <code>for</code> loop</p>\n\n<p>Also note that <code>next if /^\\s*#/</code> can have no effect because you just deleted any hashes in the line. Your sanitisation should look like</p>\n\n<pre><code>s/#.*//;\nnext unless /\\S/;\n</code></pre>\n"}], "owner": {"reputation": 40, "user_id": 8254232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3889b74d17e78f1389b0cbe4ce2fe0c?s=128&d=identicon&r=PG&f=1", "display_name": "Yakup", "link": "https://stackoverflow.com/users/8254232/yakup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 46815606, "answer_count": 1, "score": 1, "last_activity_date": 1508370176, "creation_date": 1508345397, "last_edit_date": 1508370176, "question_id": 46815320, "link": "https://stackoverflow.com/questions/46815320/creating-hash-of-hashes-from-list-of-network-interface-config-files-in-perl", "title": "Creating hash of hashes from list of network interface config files in perl", "body": "<p>I'm trying to load the list of network interface configuration files on Linux into the hash of hashes and further encode them into JSON. This is the code that I'm using:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse diagnostics;\nuse JSON;\nuse Data::Dumper qw(Dumper);\n\n\nopendir (DIR, \"/etc/sysconfig/network-scripts/\");\nmy @configs =grep(/^ifcfg-*/, readdir(DIR));\nmy $output = \"metadata/json_no_comment\";\nmy %configuration;\n\nmy $key;\nmy $value;\nmy %temp_hash;\nforeach my $input ( @configs) {\n    $input= \"/var/tmp/rhel6.8/\" . $input;\n    open (my $JH, '&lt;', $input) or die \"Cannot open the input file $!\\n\";\n    while (&lt;$JH&gt;) {\n         s/#.*$//g;\n         next if /^\\s*#/;\n         next if /^$/;\n         for my $field (split ) {\n             ($key, $value) = split /\\s*=\\s*/, $field;\n             $temp_hash{$key} = $value;\n             }\n             $configuration{$input} = \\%temp_hash;\n         }\n     close $JH;\n}\nprint \"-----------------------\\n\";\nprint Dumper \\%configuration;\nprint \"-----------------------\\n\";\n\nmy $json = encode_json \\%configuration;\nopen (my $JNH, '&gt;', $output) or die \"Cannot open the output file $!\\n\";\n    print $JNH $json;\nclose $JNH;\n</code></pre>\n\n<p>The data structure, that I'm getting is following:</p>\n\n<pre><code>$VAR1 = {\n          '/etc/sysconfig/network-scripts/ifcfg-lo' =&gt; {\n                                           'BOOTPROTO' =&gt; 'dhcp',\n                                           'NAME' =&gt; 'loopback',\n                                           'TYPE' =&gt; 'Ethernet',\n                                           'IPV6INIT' =&gt; 'yes',\n                                           'HWADDR' =&gt; '\"52:54:00:65:e7:8c\"',\n                                           'DEVICE' =&gt; 'lo',\n                                           'NETBOOT' =&gt; 'yes',\n                                           'NETMASK' =&gt; '255.0.0.0',\n                                           'BROADCAST' =&gt; '127.255.255.255',\n                                           'IPADDR' =&gt; '127.0.0.1',\n                                           'NETWORK' =&gt; '127.0.0.0',\n                                           'ONBOOT' =&gt; 'yes'\n                                         },\n          '/etc/sysconfig/network-scripts/ifcfg-eth0' =&gt; $VAR1-&gt;{'/etc/sysconfig/network-scripts/ifcfg-lo'}\n        };\n</code></pre>\n\n<p>The data structure, I'm looking for is the following:</p>\n\n<pre><code>$VAR1 = {\n          '/etc/sysconfig/network-scripts/ifcfg-lo' =&gt; {\n                                           'BOOTPROTO' =&gt; 'dhcp',\n                                           'NAME' =&gt; 'loopback',\n                                           'TYPE' =&gt; 'Ethernet',\n                                           'IPV6INIT' =&gt; 'yes',\n                                           'HWADDR' =&gt; '\"52:54:00:65:e7:8c\"',\n                                           'DEVICE' =&gt; 'lo',\n                                           'NETBOOT' =&gt; 'yes',\n                                           'NETMASK' =&gt; '255.0.0.0',\n                                           'BROADCAST' =&gt; '127.255.255.255',\n                                           'IPADDR' =&gt; '127.0.0.1',\n                                           'NETWORK' =&gt; '127.0.0.0',\n                                           'ONBOOT' =&gt; 'yes'\n                                         },\n          '/etc/sysconfig/network-scripts/ifcfg-eth0' =&gt; {\n                                           'BOOTPROTO' =&gt; 'dhcp',\n                                           'NAME' =&gt; '\"eth0\"',\n                                           'TYPE' =&gt; 'Ethernet',\n                                           'IPV6INIT' =&gt; 'yes',\n                                           'HWADDR' =&gt; '\"52:54:00:65:e7:8c\"',\n                                           'NETBOOT' =&gt; 'yes',\n                                           'ONBOOT' =&gt; 'yes'\n                                         }\n};\n</code></pre>\n\n<p>Any idea what am I doing wrong? Why the first nested hash is created correctly and the second one is not? I suspect, that it has something to do with reading the files line by line, but I have to do it, because I need to filter out the commented lines before JSON conversion.\nThanks for any help.</p>\n\n<p>Edit: I have modified the script as suggested by Borodin and it works. Thanks!</p>\n"}, {"tags": ["perl", "rabbitmq", "mojolicious-lite"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1508346820, "post_id": 46815234, "comment_id": 80578656, "body": "<a href=\"https://github.com/inway/mojo-rabbitmq-client\" rel=\"nofollow noreferrer\">github.com/inway/mojo-rabbitmq-client</a> instead of Net::AMQP::RabbitMQ."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1508348517, "post_id": 46815234, "comment_id": 80579474, "body": "N::A::R is a blocking client. While you can poll by giving <code>recv</code> a timeout, this isn&#39;t ideal."}], "owner": {"reputation": 9501, "user_id": 55366, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/89489696e09f6d1307ce5726c35a2c3e?s=128&d=identicon&r=PG", "display_name": "Orjanp", "link": "https://stackoverflow.com/users/55366/orjanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1508345088, "creation_date": 1508345088, "question_id": 46815234, "link": "https://stackoverflow.com/questions/46815234/combining-a-rabbitmq-consumer-and-a-mojolicious-websocket-server", "title": "Combining a RabbitMQ consumer and a Mojolicious websocket server", "body": "<p>I've got a Mojolicious server inspired by <a href=\"https://github.com/kraih/mojo/wiki/Writing-websocket-chat-using-Mojolicious-Lite\" rel=\"nofollow noreferrer\">this</a> example, and a RabbitMQ consumer inspired by <a href=\"https://metacpan.org/pod/Net::AMQP::RabbitMQ#EXAMPLES\" rel=\"nofollow noreferrer\">this</a> example. My plan is to combine them, so that a webclient can access the Mojolicious server and subscribe to some kind of updates. The mojo server will from time to time check a rabbitmq queue, to see if there is some updates, and if it is, it will send the data to the connected websocket clients.</p>\n\n<p>I'm struggling to see how this can be done. Do I put the rabbitmq stuff inside the mojo server stuff, or the other way around. How do I prevent the rabbitmq consume from blocking incoming websocket connections. I guess I have to use a timeout on the consume, but then I might have to run it in a loop which might block the websocket. Or have I misunderstood something? Maybe Mojolicious is not the right library to use?</p>\n\n<p>I'm thinking that the server is checking the rabbitmq queue every 10 seconds, but at the same time accepting websocket connections.</p>\n\n<p>Anyone have some ideas on how to solve this? Some pseudo code or anything would be appreciated. </p>\n"}, {"tags": ["perl", "hash", "uri"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1508336032, "post_id": 46812236, "comment_id": 80571680, "body": "What have you tried? What problems are you having? Show us your code. If you don&#39;t have any code, then Stack Overflow is probably not the best place for your question."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508336167, "post_id": 46812236, "comment_id": 80571753, "body": "This is easily solved with a quick search of CPAN. And please at least include your query string so we know what you are talking about."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1508336188, "post_id": 46812236, "comment_id": 80571770, "body": "my $uriQuery = URI::Query-&gt;new($redirectQueryParams);         $qs = $uriQuery-&gt;hash;  Seems to blow up with Can&#39;t locate object method &quot;new&quot; via package &quot;URI::Query&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508336279, "post_id": 46812236, "comment_id": 80571828, "body": "And how is that not working? You already listed down the steps you need to take. Which ones of them do you need help with exactly? Certainly you do not expect us to do all the work for you."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1508336404, "post_id": 46812236, "comment_id": 80571922, "body": "It seems as though that URI::Query module doesn&#39;t exist for some reason, so thought there may be another way to approach this."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508336536, "post_id": 46812236, "comment_id": 80572000, "body": "Besides that your code is not strict, I could run it. I have a URI::Query 0.16 installed in my system. It&#39;s not part of the battle-tested URI distribution that&#39;s in turn part of the LWP, and it has not seen much development, but it&#39;s there on CPAN. <a href=\"https://metacpan.org/changes/distribution/URI-Query\" rel=\"nofollow noreferrer\">metacpan.org/changes/distribution/URI-Query</a>"}], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1508336706, "post_id": 46812439, "comment_id": 80572106, "body": "I appreciate the answer, but that&#39;s the opposite of what I need. I just want to convert a query string into a hash, add some more items to the hash and then use - <a href=\"https://stackoverflow.com/questions/30281332/perl-how-can-i-turn-a-hash-into-a-query-string\" title=\"perl how can i turn a hash into a query string\">stackoverflow.com/questions/30281332/&hellip;</a> to convert back to a query.  So the input should be:  foo=bar&amp;baz=qrr  and the output:  $data = {          &#39;foo&#39; =&gt; &#39;bar&#39;,          &#39;baz&#39; =&gt; &#39;qrr&#39;, };  I can then add:  $data-&gt;{more} = &#39;yes&#39;;  convert back to query using:  $url-&gt;query_form(%$data);"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 1, "creation_date": 1508336772, "post_id": 46812439, "comment_id": 80572149, "body": "@snakespan I understand that. But I&#39;m saying you don&#39;t need to. This module already does <b>all the work</b> for you. See my edit for how you can do the hard work yourself if you really need to."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1508336434, "creation_date": 1508336434, "answer_id": 46812439, "question_id": 46812236, "link": "https://stackoverflow.com/questions/46812236/turn-query-string-into-hash-perl/46812439#46812439", "title": "Turn Query String into Hash Perl", "body": "<p>The <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\">URI</a> module in conjunction with the drop-in addon <a href=\"https://metacpan.org/pod/URI::QueryParam\" rel=\"nofollow noreferrer\">URI::QueryParams</a> can do what you want.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse URI;\nuse URI::QueryParam;\n\nmy $uri = URI-&gt;new('https://example.org/?foo=bar&amp;baz=qrr');\n$uri-&gt;query_param_append(frobnication =&gt; 'yes, please');\n\nprint $uri;\n</code></pre>\n\n<p>This will print</p>\n\n<pre><code>https://example.org/?foo=bar&amp;baz=qrr&amp;frobnication=yes%2C+please\n</code></pre>\n\n<p>If you actually wanted a hash, you could call <a href=\"https://metacpan.org/pod/URI::QueryParam#$u-%3Equery_form_hash(-%5C%25new_form-)\" rel=\"nofollow noreferrer\">the <code>query_form_hash</code> method</a>.</p>\n\n<pre><code>$uri-&gt;query_form_hash\n</code></pre>\n\n<p>However, that doesn't make much sense considering that all the alterations you could think of are already implemented.</p>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 46812439, "answer_count": 1, "score": 0, "last_activity_date": 1508339034, "creation_date": 1508335851, "last_edit_date": 1508339034, "question_id": 46812236, "link": "https://stackoverflow.com/questions/46812236/turn-query-string-into-hash-perl", "title": "Turn Query String into Hash Perl", "body": "<p>I want to find out how to do the opposite of this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30281332/perl-how-can-i-turn-a-hash-into-a-query-string\">Perl - How can I turn a hash into a query string?</a></p>\n\n<p>I have a query string form that is stringified and want to convert it to a hash.</p>\n\n<p>With more context, a client is passing some URL params as a stringified query form which is base64 encoded, and I wanted to decode, turn into a hash, add some more custom URL parameters to the hash, then I have a method that already converts back to a string and appends to the URL.</p>\n\n<pre><code>my $uriQuery = URI::Query-&gt;new($redirectQueryParams);\n$qs = $uriQuery-&gt;hash;\n</code></pre>\n\n<p>Seems to blow up with</p>\n\n<blockquote>\n  <p>Can't locate object method \"new\" via package \"URI::Query\"</p>\n</blockquote>\n"}, {"tags": ["perl", "date"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1508334349, "post_id": 46811584, "comment_id": 80570496, "body": "The sorting strongly smells of one Mr Schwartz. :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508334395, "post_id": 46811584, "comment_id": 80570525, "body": "@simbabque I was certainly thinking along those lines."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508334691, "post_id": 46811584, "comment_id": 80570722, "body": "Perhaps the <a href=\"http://search.cpan.org/dist/DateTime-Format-Natural/lib/DateTime/Format/Natural.pm\" rel=\"nofollow noreferrer\"><code>DateTime::Format::Natural</code></a> module might also be an alternative. I haven&#39;t used it myself but they advertise that all the formats given <a href=\"http://search.cpan.org/~schubiger/DateTime-Format-Natural-1.05/lib/DateTime/Format/Natural/Lang/EN.pm\" rel=\"nofollow noreferrer\">here</a> would work. If that&#39;s true then it&#39;s incredibly cool!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508334917, "post_id": 46811584, "comment_id": 80570918, "body": "@PerlDuck: Feel free to try it, but I suspect that its <code>format</code> config option means that it couldn&#39;t parse both <code>MM&#47;DD&#47;YY</code> and <code>DD-MM-YYYY</code>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1508335898, "post_id": 46811584, "comment_id": 80571591, "body": "FYI: I tried DT:F:N with the given dates. It yielded <code>10.01.2092</code> (wrong), <code>18.07.1984</code> (correct), <code>&#39;Oct-20-17&#39; does not parse</code> (?), <code>04.01.2004</code> (correct) (all in <code>%d.%m.%Y</code>). So for the current input data it does its job roughly half the time. I&#39;d stick with your solution :-)."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1508333954, "creation_date": 1508333954, "answer_id": 46811584, "question_id": 46811266, "link": "https://stackoverflow.com/questions/46811266/how-to-identify-the-format-of-the-given-date-in-perl/46811584#46811584", "title": "How to identify the format of the given date in perl", "body": "<p><code>Time::Piece-&gt;strptime()</code> will <code>die()</code> if you give it a date string that can't be parsed using the given format. But we can use <code>eval</code> to get around that:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Time::Piece;\n\nmy @dates = qw[\n  10/01/92\n  18-07-1984\n  Oct-20-17\n  04-Jan-2004\n];\n\nmy @fmts = qw[\n  %m/%d/%y\n  %d-%m-%Y\n  %b-%d-%y\n  %d-%b-%Y\n];\n\nforeach (@dates) {\n  my $tp;\n\n  for my $fmt (@fmts) {\n    eval { $tp = Time::Piece-&gt;strptime($_, $fmt) };\n    last unless $@;\n  }\n  say $tp;\n}\n</code></pre>\n\n<p>In this code, we work our way through a list of formats until we find one that doesn't <code>die()</code>.</p>\n\n<p>That will give you a date in a Time::Piece object that you can store somewhere. Sorting those objects is left as an exercise for the reader :-)</p>\n\n<p><strong>Note:</strong> You need to be really sure that your users will only be using dates in those four formats. In general, this problem is insoluble because you might have someone who inputs 07/09/2000 to mean 7th September 2000 (dd/mm dates are far more common than mm/dd ones outside of the US).</p>\n"}], "owner": {"reputation": 73, "user_id": 8552553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/616678407750db059e356f93d0f16916?s=128&d=identicon&r=PG&f=1", "display_name": "Sheshang", "link": "https://stackoverflow.com/users/8552553/sheshang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 46811584, "answer_count": 1, "score": 2, "last_activity_date": 1508333954, "creation_date": 1508333033, "question_id": 46811266, "link": "https://stackoverflow.com/questions/46811266/how-to-identify-the-format-of-the-given-date-in-perl", "title": "How to identify the format of the given date in perl", "body": "<p>I have started learning perl and I am having on some problem. where there may be varity of dates in different formats can be as input. And I have to sort those dates in chronological order.<br>\nWhat I planned is to convert each date in single date format and store it in hash as date in common format (as key) and and date in origin given format (as value). Now run sort on that hash and print dates with original formats (values in hash) in output.  </p>\n\n<p>But how to do it? I found one way to convert date with one format in another format as below.  </p>\n\n<pre><code>use Time::Piece;\n\nmy $dt = Time::Piece-&gt;strptime('Sep 12 00:00:00 2012', '%b %e %T %Y');\nprint $dt-&gt;strftime('%d-%m-%Y');  \n</code></pre>\n\n<p>But in this case I have to be aware of what is the format of the date being inputted. Which I don't know at the time of execution because it depends on the users. So is there is any method to compare and decide that which format is of this date?</p>\n\n<pre><code>#This is my input file\n#only four formats will be there in input dates. (MM/DD/YY,\n#DD-MM-YYYY, MMM-DD-YY or DD-MMM-YYYY)\n\n10/01/92\n18-07-1984\nOct-20-17\n04-Jan-2004  \n\n#This is what I want in output\n18-07-1984\n10/01/92\n04-Jan-2004\nOct-20-17\n</code></pre>\n"}, {"tags": ["perl", "oop", "object"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1508348109, "post_id": 46809713, "comment_id": 80579267, "body": "Add <code>sub DESTROY { print &quot;Destroyed\\n&quot;; }</code> to the package and <code>&lt;&gt;;</code> after <code>Person-&gt;new</code> and see for yourself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3885596"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508398918, "post_id": 46809713, "comment_id": 80597317, "body": "@ikegami I tried and saw. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 9, "last_activity_date": 1508340350, "last_edit_date": 1508340350, "creation_date": 1508329857, "answer_id": 46810259, "question_id": 46809713, "link": "https://stackoverflow.com/questions/46809713/is-an-object-accessible-if-not-assigned-to-any-variable/46810259#46810259", "title": "Is an object accessible if not assigned to any variable?", "body": "<p><strong>No.</strong></p>\n\n<p>A call to <code>Person-&gt;new</code> is under the hood resolves as this:</p>\n\n<pre><code>Person::new('Person', 'Sebastian', 'Vettel', 30);\n</code></pre>\n\n<p>Functions in Perl always return scalar values. Sometimes there is an <code>undef</code>, and sometimes the number of scalars is zero (which is an empty list). If you assign those values to a variable, or make the function call inside something else that expects an expression, the values become accessible.</p>\n\n<pre><code>my $foo = frobnicate();\nprint frobnicate();\n</code></pre>\n\n<p>Perl has a warning that tells you if you use an expression in a place where it's return value is not useful.</p>\n\n<p>Consider this example.</p>\n\n<pre><code>use warnings;\n4;\n</code></pre>\n\n<p>This will give you a warning.</p>\n\n<blockquote>\n  <p>Useless use of a constant (4) in void context at ...</p>\n</blockquote>\n\n<p>But for a function call, Perl doesn't really know if there will be a return value, so it cannot warn about that. Sometimes function return something for convenience, like <code>open</code>, where you opt to ignore the return value, or you could use it for error checking. But ultimately, Perl doesn't know if you meant to do that.</p>\n\n<pre><code>Person-&gt;new;\n</code></pre>\n\n<p>The return value of that function call is simply discarded in <em>void context</em>, and Perl doesn't complain, because there is no reason to assume this was a mistake.</p>\n\n<p>You cannot access this object, it gets created and then thrown away.</p>\n\n<hr>\n\n<p>The only exception is if it's at the end of a sub, where Perl implicitly returns the return value of the last statement of the block, which makes things like this possible.</p>\n\n<pre><code>sub build { Foo-&gt;new }\n</code></pre>\n\n<p>But that's not something you need to concern yourself with in this context.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3885596"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 46810259, "answer_count": 1, "score": 3, "last_activity_date": 1508340350, "creation_date": 1508328075, "question_id": 46809713, "link": "https://stackoverflow.com/questions/46809713/is-an-object-accessible-if-not-assigned-to-any-variable", "title": "Is an object accessible if not assigned to any variable?", "body": "<p>While I was working on a Perl script, a question arose just for curiosity. I noticed that no warning or error appears when I create an object without assigning it to any variable (scalar/array/hash).</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>Person-&gt;new ('Sebastian', 'Vettel', 30);\n</code></pre>\n\n<p>An MCVE is as follows.</p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage Person;\nsub new {\n  my $class = shift;\n  my $self = {\n    FirstName =&gt; shift,\n    LastName  =&gt; shift,\n    Age       =&gt; shift,\n  };\n  print \"Created a Person object: $self-&gt;{FirstName} \",\n        \"$self-&gt;{LastName} ($self-&gt;{Age})\\n\";\n  bless  $self, $class;\n  return $self;\n}\n\nPerson-&gt;new ('Sebastian', 'Vettel', 30);\n</code></pre>\n\n<p>The output:</p>\n\n<blockquote>\n  <p>Created a Person object: Sebastian Vettel (30)</p>\n</blockquote>\n\n<p>My question is that. Is there a way to access the created object?</p>\n"}, {"tags": ["regex", "perl", "fasta"], "comments": [{"owner": {"reputation": 1738, "user_id": 5226582, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3599f10b53b2569616a4f00dccdab8a3?s=128&d=identicon&r=PG&f=1", "display_name": "user5226582", "link": "https://stackoverflow.com/users/5226582/user5226582"}, "edited": false, "score": 0, "creation_date": 1508316168, "post_id": 46806003, "comment_id": 80559083, "body": "What&#39;s wrong with your code? Does it give an error or incorrect result? If yes, which?"}, {"owner": {"reputation": 5, "user_id": 8794413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c2827533f2fe7ca75fa16de0fb60a3?s=128&d=identicon&r=PG&f=1", "display_name": "cara", "link": "https://stackoverflow.com/users/8794413/cara"}, "reply_to_user": {"reputation": 1738, "user_id": 5226582, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3599f10b53b2569616a4f00dccdab8a3?s=128&d=identicon&r=PG&f=1", "display_name": "user5226582", "link": "https://stackoverflow.com/users/5226582/user5226582"}, "edited": false, "score": 0, "creation_date": 1508316312, "post_id": 46806003, "comment_id": 80559168, "body": "it doesn&#39;t delete lines that dont have less then 3 unique characters."}, {"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1508317191, "post_id": 46806003, "comment_id": 80559717, "body": "Can you provide a short sample input file and the expected output file?"}, {"owner": {"reputation": 5, "user_id": 8794413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c2827533f2fe7ca75fa16de0fb60a3?s=128&d=identicon&r=PG&f=1", "display_name": "cara", "link": "https://stackoverflow.com/users/8794413/cara"}, "edited": false, "score": 0, "creation_date": 1508317696, "post_id": 46806003, "comment_id": 80560030, "body": "I added It at the end of the code"}, {"owner": {"reputation": 735, "user_id": 4166721, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cshnXqXB_Hc/AAAAAAAAAAI/AAAAAAAAZmo/Wl3QMUgam7M/photo.jpg?sz=128", "display_name": "Cash Lo", "link": "https://stackoverflow.com/users/4166721/cash-lo"}, "edited": false, "score": 0, "creation_date": 1508318121, "post_id": 46806003, "comment_id": 80560293, "body": "Just to clarify, you want to keep lines that has least 3 unique characters from [ATGC], and they don&#39;t have to be consecutive, right?"}, {"owner": {"reputation": 5, "user_id": 8794413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c2827533f2fe7ca75fa16de0fb60a3?s=128&d=identicon&r=PG&f=1", "display_name": "cara", "link": "https://stackoverflow.com/users/8794413/cara"}, "edited": false, "score": 0, "creation_date": 1508318230, "post_id": 46806003, "comment_id": 80560365, "body": "Yes thats correct."}], "answers": [{"tags": [], "owner": {"reputation": 1945, "user_id": 5669174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGSyr.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5669174/mike"}, "is_accepted": true, "score": 0, "last_activity_date": 1508320229, "creation_date": 1508320229, "answer_id": 46807343, "question_id": 46806003, "link": "https://stackoverflow.com/questions/46806003/perl-to-check-if-sequence-contains-at-least-3-unique-bases-and-if-not-delete/46807343#46807343", "title": "perl to check if sequence contains at least 3 unique bases and if not delete", "body": "<pre><code>while(my $head = &lt;FILE&gt;) {\n  next if($head !~ /^&gt;/);\n  $_=&lt;FILE&gt;;\n  if(!/N+/ &amp;&amp; /A/+/T/+/G/+/C/ &gt;= 3) {\n    print match_fh $head, $_;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8794413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c2827533f2fe7ca75fa16de0fb60a3?s=128&d=identicon&r=PG&f=1", "display_name": "cara", "link": "https://stackoverflow.com/users/8794413/cara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 46807343, "answer_count": 1, "score": 0, "last_activity_date": 1508320229, "creation_date": 1508315944, "last_edit_date": 1508318841, "question_id": 46806003, "link": "https://stackoverflow.com/questions/46806003/perl-to-check-if-sequence-contains-at-least-3-unique-bases-and-if-not-delete", "title": "perl to check if sequence contains at least 3 unique bases and if not delete", "body": "<p>I have a fasta file. I need to remove sequences containing \u201cN\u201d or did not contain at least 3 unique bases.\nThe code so far is below. Also how would I remove the sequence ID line as go along for sequences I delete.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen FILE, '&lt;', $ARGV[0] or die qq{Failed to open \"$ARGV[1]\" for input: $!\\n};\nopen match_fh, \"&gt;$ARGV[0]_trimmed.fasta\"\n    or die qq{Failed to open for output: $!\\n};\n\nwhile ( my $line = &lt;FILE&gt; ) {\n    chomp($line);\n\n    if ( $line =~ m/^&gt;/ ) {\n        print match_fh \"$line\\n\";\n\n        my @data = split( /\\|/, $line );\n\n        my $nextline = &lt;FILE&gt;;\n\n        if ( $nextline !~ /N+/g ) {\n\n            if ( $nextline =~ /[ATGC]{3}/g ) {\n\n            }\n            print match_fh \"$nextline\";\n        }\n    }\n}\n\nclose FILE;\nclose match_fh;\n\n\n\nINPUT\n&gt;seq1\nATGCGGGATGATCCGAACGTTTAATCTCGTATGCCGTCTTCTATCTCNNN\n&gt;seq2\nGATGAGCTTGACTCTAGTCCATCTCGTATGCCGTCTTCTGCTATCTCGTA\n&gt;seq3\nTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTC\n&gt;seq4\nTGGTACTGTAAGCATGAGAGTAATCTCGTATGCCGTCTTCTGCTTGAAAA\n\nOUTPUT\n&gt;seq2\nGATGAGCTTGACTCTAGTCCATCTCGTATGCCGTCTTCTGCTATCTCGTA\n&gt;seq4\nTGGTACTGTAAGCATGAGAGTAATCTCGTATGCCGTCTTCTGCTTGAAAA\n</code></pre>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1508310504, "post_id": 46804522, "comment_id": 80555915, "body": "<code>foreach my $value (sort {$a &lt;=&gt; $b} values %hey) {     say $value; }</code>. You can easily store them in an array by replacing <code>say $value</code> with <code>push(@array, $value);</code> ( dont forget to declare <code>@array</code> before the <code>foreach</code>."}, {"owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1508310921, "post_id": 46804522, "comment_id": 80556158, "body": "@JohnDoe I would add it as an answer"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1508311539, "post_id": 46804522, "comment_id": 80556481, "body": "As I see you want 2 methods of sorting which are nicely explained <a href=\"https://perlmaven.com/how-to-sort-a-hash-in-perl\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1508323858, "post_id": 46807293, "comment_id": 80563861, "body": "No packages required. Will need the hash name changed if it isn&#39;t <code>%hey</code> as per your question."}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1508324630, "post_id": 46807293, "comment_id": 80564283, "body": "Doesn&#39;t work for me..Does it require any explicit packages?  Because my error log shows that it is missing explicit package names.   But It&#39;s working fine in generalized examples.   what if I interchange keys and values in my hash? would your code work fine even then?"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1508324853, "post_id": 46807293, "comment_id": 80564406, "body": "Sorry My bad!! My hash is actually an reference,Can you modify your code accordingly?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1508332281, "post_id": 46807293, "comment_id": 80569071, "body": "Can you modify the question accordingly too? Otherwise my answer doesn&#39;t fit the question"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1508345520, "post_id": 46807293, "comment_id": 80578025, "body": "I did modify it a bit...and don&#39;t remove this answer.It&#39;s helping me in other things"}, {"owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1508392244, "post_id": 46807293, "comment_id": 80594339, "body": "Can I sort using exceptions? Like I want &quot;User&quot; to display on top always and the remaining pairs should be sorted accordingly"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "edited": false, "score": 0, "creation_date": 1508404031, "post_id": 46807293, "comment_id": 80600188, "body": "If you can express that exception as an expression, then yes; something like <code>($hey{$a} eq &quot;User&quot;) &lt;=&gt; ($hey{$b} eq &quot;User&quot;) </code> for example."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 3, "last_activity_date": 1508320086, "creation_date": 1508320086, "answer_id": 46807293, "question_id": 46804522, "link": "https://stackoverflow.com/questions/46804522/how-to-sort-an-hash-reference-in-perl-by-descending-ascending-values-and-ascendi/46807293#46807293", "title": "How to sort an hash Reference in perl by descending/ascending values and ascending/descending keys?", "body": "<p>Sort is using an expression to work out what order to sort things in, so it's not limited to just comparing one thing. In your case you want something like this...</p>\n\n<pre><code>my @sorted_values = map $hey{$_}, sort {$hey{$b} cmp $hey{$a} or $a &lt;=&gt; $b} keys %hey;\n</code></pre>\n\n<p>It firstly compares the values of the hash and sorts them in descending order. In the case where the two values are identical, it then compares the key values and sorts in ascending order.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1508393361, "creation_date": 1508393361, "answer_id": 46823706, "question_id": 46804522, "link": "https://stackoverflow.com/questions/46804522/how-to-sort-an-hash-reference-in-perl-by-descending-ascending-values-and-ascendi/46823706#46823706", "title": "How to sort an hash Reference in perl by descending/ascending values and ascending/descending keys?", "body": "<pre><code>values=[sort {$a&lt;=&gt;$b and $hey-&gt;{$a} cmp $hey-&gt;{$b}} keys  %$hey],\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8758040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4351c79044839484098208fcb9be9073?s=128&d=identicon&r=PG&f=1", "display_name": "Sherlock.H", "link": "https://stackoverflow.com/users/8758040/sherlock-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 46807293, "answer_count": 2, "score": -2, "last_activity_date": 1508393361, "creation_date": 1508310398, "last_edit_date": 1508331098, "question_id": 46804522, "link": "https://stackoverflow.com/questions/46804522/how-to-sort-an-hash-reference-in-perl-by-descending-ascending-values-and-ascendi", "title": "How to sort an hash Reference in perl by descending/ascending values and ascending/descending keys?", "body": "<p>my hash reference  to an hash  looks something like this</p>\n\n<pre><code>my %hey = (\n    144 =&gt; 'Abc_test1',\n    25  =&gt; 'sample2',\n    114 =&gt; 'User',\n    145 =&gt; 'abc_test2',\n);\n</code></pre>\n\n<p>I want output order as</p>\n\n<pre><code>Abc_test1  \nUser\nabc_test2\nsample2\n</code></pre>\n\n<p>which I should be able to store in some variable</p>\n\n<p>Any help?</p>\n"}, {"tags": ["perl", "automation", "automated-tests"], "comments": [{"owner": {"reputation": 241, "user_id": 6702357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9ccbd932fafec8065799a6138971039c?s=128&d=identicon&r=PG&f=1", "display_name": "joey", "link": "https://stackoverflow.com/users/6702357/joey"}, "edited": false, "score": 0, "creation_date": 1508305072, "post_id": 46803231, "comment_id": 80553514, "body": "Can anyone please answer this."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 6702357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9ccbd932fafec8065799a6138971039c?s=128&d=identicon&r=PG&f=1", "display_name": "joey", "link": "https://stackoverflow.com/users/6702357/joey"}, "edited": false, "score": 0, "creation_date": 1508306886, "post_id": 46803675, "comment_id": 80554231, "body": "Any libraries to be used? @Gerhard Barnard"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 241, "user_id": 6702357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9ccbd932fafec8065799a6138971039c?s=128&d=identicon&r=PG&f=1", "display_name": "joey", "link": "https://stackoverflow.com/users/6702357/joey"}, "edited": false, "score": 0, "creation_date": 1508307231, "post_id": 46803675, "comment_id": 80554361, "body": "no, that is standard perl <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">3 handle</a> file open functions."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508320210, "post_id": 46803675, "comment_id": 80561664, "body": "I have the impression this is an answer to a different question. The OP said <i>\u201cI want to read a config file and see if the first 10 lines of the file contents starts with # and have or not have some particular string to do some automation in Perl.\u201d</i> And the title says <i>\u201cfrom the command line\u201d</i>. I rather thought of something more like <code>perl -ne &#39;print if (\u2026)&#39; &lt; &#47;path&#47;.config</code>. But given that this answer is the accepted one, <code>open(my $fh,&#39;&lt;&#39;,&#39;filename&#39;);</code> seems to solve all those aforementioned problems."}, {"owner": {"reputation": 241, "user_id": 6702357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9ccbd932fafec8065799a6138971039c?s=128&d=identicon&r=PG&f=1", "display_name": "joey", "link": "https://stackoverflow.com/users/6702357/joey"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508325249, "post_id": 46803675, "comment_id": 80564650, "body": "@PerlDuck Yeah though it was not all the answer, I thought I can parse the file once I read it or save it. but got stuck again while parsing. I would be glad if you can give me some inputs for the approach."}, {"owner": {"reputation": 241, "user_id": 6702357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9ccbd932fafec8065799a6138971039c?s=128&d=identicon&r=PG&f=1", "display_name": "joey", "link": "https://stackoverflow.com/users/6702357/joey"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508326214, "post_id": 46803675, "comment_id": 80565248, "body": "@PerlDuck Also can you tell what does -ne do here?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 241, "user_id": 6702357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9ccbd932fafec8065799a6138971039c?s=128&d=identicon&r=PG&f=1", "display_name": "joey", "link": "https://stackoverflow.com/users/6702357/joey"}, "edited": false, "score": 1, "creation_date": 1508328084, "post_id": 46803675, "comment_id": 80566440, "body": "@joey <code>-e</code> means &quot;execute the Perl code given at the command line&quot; (and not a script), <code>-n</code> means &quot;execute that code for every single line of the input, but don&#39;t automatically print the line&quot;. See <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlrun.html#Command-Switches</a> for details. /// But I gave only an example, not actual code. You asked for a command line solution, and they <i>typically</i> involve the <code>-n -e</code> switches."}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 0, "last_activity_date": 1508306291, "creation_date": 1508306291, "answer_id": 46803675, "question_id": 46803231, "link": "https://stackoverflow.com/questions/46803231/how-to-read-a-config-file-from-a-command-line-using-perl-automation/46803675#46803675", "title": "How to read a config file from a command line using perl (automation)", "body": "<p>To open a file for reading use:</p>\n\n<pre><code>open(my $fh, \"&lt;\", \"/path/.config\") or die \"Can't open &lt; .config: $!\";\n</code></pre>\n\n<p>To open a file for writing</p>\n\n<pre><code>open(my $fh, \"&gt;\", \"/path/.config\") or die \"Can't open &gt; .config: $!\";\n</code></pre>\n\n<p>the content of the file is then assigned to <code>$fh</code></p>\n"}], "owner": {"reputation": 241, "user_id": 6702357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9ccbd932fafec8065799a6138971039c?s=128&d=identicon&r=PG&f=1", "display_name": "joey", "link": "https://stackoverflow.com/users/6702357/joey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 46803675, "answer_count": 1, "score": 0, "last_activity_date": 1508306967, "creation_date": 1508303541, "last_edit_date": 1508306967, "question_id": 46803231, "link": "https://stackoverflow.com/questions/46803231/how-to-read-a-config-file-from-a-command-line-using-perl-automation", "title": "How to read a config file from a command line using perl (automation)", "body": "<p>I am new to Perl and need help with this.</p>\n\n<p>I want to read a config file and see if the first 10 lines of the file contents starts with <code>#</code> and have or not have some particular string to do some automation in Perl.</p>\n\n<p>I was able to open the file using:</p>\n\n<pre><code> $obj-&gt;cmd(\"path\");\n $a = -&gt;obj(cat \"/path/.config\");\n</code></pre>\n\n<p>I don't know if we can save this to variable or is there any way I can copy it to the text file and search it.</p>\n\n<p>Also how do I edit this file like adding or removing file content.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508299969, "post_id": 46802396, "comment_id": 80552032, "body": "Thanks, that is good to hear. I guess I&#39;ll try to remove the module from my dependency tree at some point."}], "answers": [{"comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1508307341, "post_id": 46802756, "comment_id": 80554411, "body": "awesome answer."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1508338105, "post_id": 46802756, "comment_id": 80573129, "body": "Hah, &quot;<i>the level of reliability and support I have committed myself to</i>&quot; my posterior. At some point this author decided he didn&#39;t like some other module, so he put a check into <code>AnyEvent</code> that aborts your program if it detects that other module being loaded."}, {"owner": {"reputation": 385, "user_id": 571575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3cba07d36981d2364452feb57039dd7?s=128&d=identicon&r=PG", "display_name": "Xoanon93", "link": "https://stackoverflow.com/users/571575/xoanon93"}, "edited": false, "score": 0, "creation_date": 1534517793, "post_id": 46802756, "comment_id": 90747034, "body": "So this confirms my suspicions from when I first ran into this screed when installing from CPAN: it&#39;s merely a big, passive-aggressive temper-tantrum. Thank you for confirming."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 14, "last_activity_date": 1508339748, "last_edit_date": 1508339748, "creation_date": 1508300390, "answer_id": 46802756, "question_id": 46802396, "link": "https://stackoverflow.com/questions/46802396/is-this-canarystability-rant-a-legitimate-concern/46802756#46802756", "title": "Is this Canary::Stability rant a legitimate concern?", "body": "<p>p5p, the informal team that maintains Perl, takes backwards compatibility <em>very</em> seriously.<sup>[1]</sup> They have a formal policy concerning this in <a href=\"http://perldoc.perl.org/perlpolicy.html\" rel=\"noreferrer\">perlpolicy</a>.</p>\n\n<p>Let's put Canary::Stability into context.</p>\n\n<p>The author in question has a number of modules that use undocumented Perl internals that are subject to change. Using these internals is necessary to achieve what the modules do, but one has to realize these are subject to breaking.</p>\n\n<p>And yes, p5p have changed some internals in ways that broke this author's modules, but p5p checks what modules on CPAN their changes will affect, and p5p provide fixes for affected modules far ahead of releasing a new version of Perl.<sup>[2]</sup></p>\n\n<p>The author in question is extremely difficult to deal with, and would rather spend time taking stands rather than maintaining his modules or working with p5p towards exposing the internals to which he needs access.</p>\n\n<p>For example, difficulties in dealing with him has lead people to fork JSON::XS into Cpanel::JSON::XS. One of the problems is that he'd rather rant against threads than make JSON::XS thread-safe.</p>\n\n<p>For example, CPAN provides a means of specifying where bug reports should be submitted. The author would rather that you email him directly instead of using the default means of reporting a bug (the CPAN-provided bug tracker). The lack of visibility of using email instead of a public bug tracker is a problem in and of itself, but he compounds it by refusing to indicate in his distributions how he wants to be contacted. If you dare submit a bug through the CPAN bug tracker (which he de facto indicated you should use), he emails you a prepared rant longer than the one you posted.</p>\n\n<hr>\n\n<ol>\n<li><p>There have been hickups, but they learn from their mistakes. For example, this is how experimental features came to be.</p></li>\n<li><p>There are \"smokers\" that continually run the test suite of every module on CPAN against \"blead\", the development branch of Perl. Differences in test results between runs are manually examined to see if they were caused by a change in Perl. If so, a \"Blead Breaks CPAN\" (BBC) ticket is opened. Maybe it was a bug that was introduced. Maybe the module was doing something buggy. Maybe it is a backwards-incompatible change that needs to be reverted (and maybe a deprecation will be introduced). Or maybe it is a backwards-incompatible change to internals that needs to move forward, in which case they will help the broken modules.</p>\n\n<p>Modules in the DarkPAN (i.e. not on CPAN) obviously don't get the same level of support from these smokers as the modules on CPAN do. But you are free to test your modules against the dev branch or dev release if you are particularly concerned.</p></li>\n</ol>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 46802756, "answer_count": 1, "score": 5, "last_activity_date": 1508339748, "creation_date": 1508297891, "question_id": 46802396, "link": "https://stackoverflow.com/questions/46802396/is-this-canarystability-rant-a-legitimate-concern", "title": "Is this Canary::Stability rant a legitimate concern?", "body": "<p>I was installing new CPAN modules today, and it turns out that the JSON::XS module displays its own warning/rant about using it with Perls over 5.22. It seems the author got fed up with backward-incompatible changes allegedly introduced into Perl after that point, and decided to make a module dedicated to warning people about potential incompatibility, warning against Perl over 5.22, and promoting a separate branch of Perl dedicated to stability.</p>\n\n<p>As a humble average user, I am not sure how alarmed I should be. For example: Is it just this one user/module complaining, or is it bigger than that? Are there known serious issues with Perl backward-compatibility after 5.22?</p>\n\n<p>I guess this is a somewhat subjective question, but by doing this the author has made it everybody's problem (alternatively: has made the stability branch everybody's solution, depending on whose side you take). And since I need to choose a Perl version for a big porting project I'm working on, it's a pretty important question to me.</p>\n\n<p>Here is the warning:</p>\n\n<blockquote>\n  <h1> Canary::Stability COMPATIBILITY AND SUPPORT CHECK</h1>\n  \n  <p>Hi!</p>\n  \n  <p>I do my best to provide predictable and reliable software.</p>\n  \n  <p>However, in recent releases, P5P (who maintain perl) have been \n  introducing regressions that are sometimes subtle and at other times \n  catastrophic, often for personal preferences with little or no concern\n  for existing code, most notably CPAN.</p>\n  \n  <p>For this reason, it has become very hard for me to maintain the level\n  of reliability and support I have committed myself to in the past, at \n  least with some perl versions: I simply can't keep up working around\n  new  bugs or gratituous incompatibilities, and in turn you might\n  suffer from  unanticipated problems.</p>\n  \n  <p>Therefore I have introduced a support and compatibility check, the\n  results  of which follow below, together with a FAQ and some\n  recommendations.</p>\n  \n  <p>This check is just to let you know that there might be a risk, so you\n  can  make judgement calls on how to proceed - it will not keep the\n  module from  installing or working.</p>\n  \n  <p>The stability canary says: (nothing, it was driven away by harsh\n  weather)</p>\n  \n  <p>It seems you are running perl version 5.026000, likely the \"official\"\n  or  \"standard\" version. While there is nothing wrong with doing that, \n  standard perl versions 5.022 and up are not supported by JSON::XS. \n  While this might be fatal, it might also be all right - if you run\n  into  problems, you might want to downgrade your perl or switch to the\n  stability branch.</p>\n  \n  <p>If everything works fine, you can ignore this message.</p>\n  \n  <p>Stability canary mini-FAQ:</p>\n  \n  <p>Do I need to do anything?\n      With luck, no. While some distributions are known to fail\n      already, most should probably work. This message is here\n      to alert you that your perl is not supported by JSON::XS,\n      and if things go wrong, you either need to downgrade, or\n      sidegrade to the stability variant of your perl version,\n      or simply live with the consequences.</p>\n  \n  <p>What is this canary thing?\n      It's purpose is to check support status of JSON::XS with\n      respect to your perl version.</p>\n  \n  <p>What is this \"stability branch\"?\n      It's a branch or fork of the official perl, by schmorp, to\n      improve stability and compatibility with existing modules.</p>\n  \n  <p>How can I skip this prompt on automated installs?\n      Set PERL_CANARY_STABILITY_NOPROMPT=1 in your environment.\n      More info is in the Canary::Stability manpage.</p>\n  \n  <p>Long version of this FAQ: <a href=\"http://stableperl.schmorp.de/faq.html\" rel=\"noreferrer\">http://stableperl.schmorp.de/faq.html</a> \n  Stability Branch homepage: <a href=\"http://stableperl.schmorp.de/\" rel=\"noreferrer\">http://stableperl.schmorp.de/</a></p>\n</blockquote>\n"}, {"tags": ["regex", "perl", "substitution", "regex-greedy"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1508295447, "post_id": 46801480, "comment_id": 80550950, "body": "More efficient? <code>s{&#47;([^&#47;]*)(?=&#47;)}{.$1}g;</code>"}, {"owner": {"reputation": 309, "user_id": 2253972, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2d6e15a05dedc010b2238242425c9070?s=128&d=identicon&r=PG", "display_name": "Rancho", "link": "https://stackoverflow.com/users/2253972/rancho"}, "edited": false, "score": 0, "creation_date": 1508349449, "post_id": 46801480, "comment_id": 80579964, "body": "Thanks a lot. Both the options above seem to work. I went ahead with this one &quot;s{/([^/]*)(?=/)}{.$1}g;&quot; since it looks generic"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508351307, "post_id": 46801480, "comment_id": 80580981, "body": "@ikegami Turns out not (in my benchmark), thank you, added.  My guess for the reason: The <code>[^&#47;]</code> one also has to copy back what it captured while the other one does a single character overwrite (and <code>.*?</code> doesn&#39;t backtrack).  I am testing more with longer strings, just in case."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508351391, "post_id": 46801480, "comment_id": 80581019, "body": "@zdim, Captures add time. Didn&#39;t know if it would be more that matching against the string twice as yours does. Might also depend on the size of the string"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508352305, "post_id": 46801480, "comment_id": 80581514, "body": "@ikegami  Updated, with a comment and with longer path components -- it is more consistent over different perls and machines.  Thank you, this is interesting."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 309, "user_id": 2253972, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2d6e15a05dedc010b2238242425c9070?s=128&d=identicon&r=PG", "display_name": "Rancho", "link": "https://stackoverflow.com/users/2253972/rancho"}, "edited": false, "score": 0, "creation_date": 1508402423, "post_id": 46801480, "comment_id": 80599162, "body": "@Rancho  Glad it helped. I added the other way and the efficiency comparison."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1569102089, "last_edit_date": 1569102089, "creation_date": 1508290012, "answer_id": 46801480, "question_id": 46801422, "link": "https://stackoverflow.com/questions/46801422/substitute-all-but-the-last-occurrence-using-perl/46801480#46801480", "title": "Substitute all but the last occurrence using perl", "body": "<p>Replace all <code>/</code> for which there is a <code>/</code> further down the string; thus that excludes the last <code>/</code></p>\n\n<pre><code>perl -wE'$_ = q(a/b/c/d/e); s{/(?=.*?/)}{.}g; say'\n</code></pre>\n\n<p>This uses the <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">positive lookahead</a>, <code>(?=...)</code> to assert the presence of <code>/</code> further down (after <code>.*?</code>), without consuming anything.</p>\n\n<hr>\n\n<p>Another way is to capture with a negated character class pattern (and then put that back in the string) and use only the fixed string <code>/</code> in the lookahead</p>\n\n<pre><code>s{/([^/]*)(?=/)}{.$1}g;\n</code></pre>\n\n<p>The first approach above with a <code>/</code> match and a lookahead for the rest turns out to be faster.  The likely reason is the capturing in the <code>([^/]*)</code> approach  (and it has to copy that back in the string), whereby the first approach does a single character overwrite (the <code>.*?</code> doesn't backtrack).</p>\n\n<p>Benchmarked: 126% faster under v5.10.1 and v5.27.2 (desktop) and 110% with v5.16.1 (new server). Tested with 4-10 char long strings for four path components.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for noting this and prompting for, and commenting on, the comparison.</p>\n"}], "owner": {"reputation": 309, "user_id": 2253972, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2d6e15a05dedc010b2238242425c9070?s=128&d=identicon&r=PG", "display_name": "Rancho", "link": "https://stackoverflow.com/users/2253972/rancho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1569102089, "creation_date": 1508289530, "last_edit_date": 1508472407, "question_id": 46801422, "link": "https://stackoverflow.com/questions/46801422/substitute-all-but-the-last-occurrence-using-perl", "title": "Substitute all but the last occurrence using perl", "body": "<p>I have a string say <code>\"a/b/c/d/e\"</code> and I want to replace all except the last <code>/</code> to . i.e my output should be <code>a.b.c.d/e</code>. </p>\n\n<p>How do I modify my substitute command <code>s/\\//./g</code> to do the same? Also note the hierarchy doesn't always have  4 \"<code>/</code>\". It can be any number.</p>\n"}, {"tags": ["regex", "string", "perl", "random", "perl-module"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1508264702, "post_id": 46796737, "comment_id": 80540267, "body": "Show what you tried and what didn&#39;t work?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1508264722, "post_id": 46796737, "comment_id": 80540278, "body": "Why are you trying to do this?"}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1508265359, "post_id": 46796737, "comment_id": 80540646, "body": "What is the purpose of quantifiers such as <code>{6,6}</code> and <code>{3,3}</code>? <code>{0,1}</code> can be written as <code>?</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1508265548, "post_id": 46796737, "comment_id": 80540768, "body": "Read the chapter Regex String Generation in <a href=\"https://hop.perl.plover.com/book/\" rel=\"nofollow noreferrer\">Higher Order Perl</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508267559, "post_id": 46796737, "comment_id": 80541808, "body": "Tip: <code>a{6,6}</code> can be written <code>a{6}</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508267566, "post_id": 46796737, "comment_id": 80541812, "body": "Tip: <code>a{0,1}</code> can be written <code>?</code>"}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1508267656, "post_id": 46796737, "comment_id": 80541852, "body": "Thanks for all the comments, I just want only 1 combination, not all."}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1508267683, "post_id": 46796737, "comment_id": 80541869, "body": "About how to write these regex, it may look dull, but that&#39;s another topic. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508268839, "post_id": 46796737, "comment_id": 80542460, "body": "I think the <a href=\"https://en.wikipedia.org/wiki/Infinite_monkey_theorem\" rel=\"nofollow noreferrer\">infinite monkey theorem</a> could work here... ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508268892, "post_id": 46796737, "comment_id": 80542488, "body": "@simbabque, I&#39;m so posting a solution that uses that!"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508269080, "post_id": 46797708, "comment_id": 80542571, "body": "Is there a reason you put the search.cpan.org link instead of metacpan?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508269590, "post_id": 46797708, "comment_id": 80542826, "body": "Never used the latter."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508269935, "post_id": 46797708, "comment_id": 80543053, "body": "Oh, I never realized in your answers."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1508279223, "last_edit_date": 1508279223, "creation_date": 1508268225, "answer_id": 46797708, "question_id": 46796737, "link": "https://stackoverflow.com/questions/46796737/perl-to-generate-string-to-match-regex/46797708#46797708", "title": "perl to generate string to match regex", "body": "<p><a href=\"http://search.cpan.org/perldoc?String::Random\" rel=\"nofollow noreferrer\">String::Random</a> is exactly what you want. The only catch is that it doesn't support <code>(...)</code> (or <code>(?:...)</code>).</p>\n\n<p>Either work to get support for that added to String::Random for a general purpose solution, or write up a specific-purpose solution as follows:</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( say );\n\nmy $s = '';\n\nfor (1..6) {\n   $s .= ('A'..'Z')[rand(26)];\n}\n\n$s .= ('A'..'Z', '2'..'9')[rand(34)];\n\n$s .= ('A'..'N', 'P'..'Z', '0'..'9')[rand(35)];\n\nfor (1..rand(2)) {\n   for (1..3) {\n      $s .= ('A'..'Z', '0'..'9')[rand(36)];\n   }\n}\n\nsay $s;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508269330, "post_id": 46797926, "comment_id": 80542694, "body": "Maybe run with Parallel::ForkManager if you need more monkeys."}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 1, "creation_date": 1508330221, "post_id": 46797926, "comment_id": 80567792, "body": "This works, except that the speed is a bit lousy (~5sec or even longer per string generation), but at least it works! Thank you very much!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508338850, "post_id": 46797926, "comment_id": 80573648, "body": "Of course it&#39;s slow. Added some info to the answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1508339383, "last_edit_date": 1508339383, "creation_date": 1508269161, "answer_id": 46797926, "question_id": 46796737, "link": "https://stackoverflow.com/questions/46796737/perl-to-generate-string-to-match-regex/46797926#46797926", "title": "perl to generate string to match regex", "body": "<p>If you want a general solution and you aren't will to work towards fixing String::Random, you could use a <a href=\"https://en.wikipedia.org/wiki/Infinite_monkey_theorem\" rel=\"nofollow noreferrer\">large number of monkeys</a>.</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( say );\n\nmy $pattern = qr/^[A-Z]{6}[A-Z2-9][A-NP-Z0-9](?:[A-Z0-9]{3})?\\z/;\n\nmy $min_len =  0;\nmy $max_len = 15;\nmy @syms = map chr, 0x20..0x7E;\n\nmy $s;\nwhile (1) {\n   $s = join '', map { $syms[rand(@syms)] } 1..$min_len+rand($max_len-$min_len+1);\n   last if $s =~ $pattern;\n}\n\nsay $s;\n</code></pre>\n\n<p>This solution literally generates \"completely\" random strings until it find one that matches. <em>It's an awful approach</em>, and it can be quite slow.</p>\n\n<p>You can speed it up the solution by restricting the random string generator (via <code>$min_len</code>, <code>$max_len</code> and <code>@syms</code>). That said, the more you restrict these, the fewer patterns this solution will support. For example, using <code>$min_len = 8; $max_len = 11; @syms = ( 'A'..'Z', '0'..'9' );</code> will be insanely faster for the example pattern, but using those parameters might prevent it from working for other patterns.</p>\n\n<p>Also note that this approach skews the odds. Some matching strings are more likely to be generated than others. For example, the monkeys are incredibly more likely to produce <code>A</code> than <code>AAA</code> given <code>^[A-Z]{1,3}\\z</code>.</p>\n"}], "owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 46797926, "answer_count": 2, "score": 1, "last_activity_date": 1508339383, "creation_date": 1508264493, "last_edit_date": 1508267733, "question_id": 46796737, "link": "https://stackoverflow.com/questions/46796737/perl-to-generate-string-to-match-regex", "title": "perl to generate string to match regex", "body": "<p>I try to find a way to generate string that matches regex, for example, the following regex:</p>\n\n<pre><code>[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}\n</code></pre>\n\n<p>There are some perl modules on Cpan which I tried that doesn't work:\n-> String::Random\n-> Regexp::Genex</p>\n\n<p>The String::Random shows () is not supported.\nRegex::Genex reports error on strings($regex) with this one.</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "answers": [{"comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 1, "creation_date": 1508266290, "post_id": 46796764, "comment_id": 80541142, "body": "Much pretier than my solution!"}, {"owner": {"reputation": 87, "user_id": 2922264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89fa727e8343388a6357d11e468e97a?s=128&d=identicon&r=PG&f=1", "display_name": "frozenthorn", "link": "https://stackoverflow.com/users/2922264/frozenthorn"}, "edited": false, "score": 1, "creation_date": 1508329077, "post_id": 46796764, "comment_id": 80567088, "body": "Thanks! Simple solution, worked exactly as requested. Seeing what you did different highlighted why mine didn&#39;t make sense, appreciate your help."}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 4, "last_activity_date": 1508265015, "last_edit_date": 1508265015, "creation_date": 1508264580, "answer_id": 46796764, "question_id": 46796376, "link": "https://stackoverflow.com/questions/46796376/need-help-sorting-file-list-based-on-datestamp-in-filename/46796764#46796764", "title": "Need help sorting file list based on datestamp in filename", "body": "<p>This produces your desired output.  It splits each line on underscore or period into a list, then only keeps the \"columns\" you want, in the order you want them.  It keeps the year, followed by the month, day, etc.  Then it joins the list elements into a new date string, then sorts lines based on dates.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @list;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    push @list, $_;\n}\n\nmy @sorted = map  { $_-&gt;[0] }\n    sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }\n    map  { [$_, join '', (split /[_.]/)[3,1,2,4,5,6] ] }\n@list;\n\n__DATA__\n5CM00225_10_16_2017_10_54_42.xml\n5CM10538_10_16_2017_11_04_18.xml\n1ZM06004_10_16_2017_11_04_14.xml\n5XM10010_10_17_2017_08_00_47.xml\n5ZM05391_10_15_2017_08_51_07.xml\n5ZM05388_10_17_2017_08_01_06.xml\n5ZM00058_10_17_2017_08_00_49.xml\nNMC00166_10_15_2017_08_51_06.xml\n5CM10538_10_15_2017_08_51_06.xml\n</code></pre>\n\n<p>I believe your code fails because it returns the list in the order they appear on the line, namely month, day, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1508266753, "last_edit_date": 1508266753, "creation_date": 1508264979, "answer_id": 46796890, "question_id": 46796376, "link": "https://stackoverflow.com/questions/46796376/need-help-sorting-file-list-based-on-datestamp-in-filename/46796890#46796890", "title": "Need help sorting file list based on datestamp in filename", "body": "<p>Probably not the prettiest solution but it works:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy @list = (\n    '5CM00225_10_16_2017_10_54_42.xml',\n    '5CM10538_10_16_2017_11_04_18.xml',\n    '1ZM06004_10_16_2017_11_04_14.xml',\n    '5XM10010_10_17_2017_08_00_47.xml',\n    '5ZM05391_10_15_2017_08_51_07.xml',\n    '5ZM05388_10_17_2017_08_01_06.xml',\n    '5ZM00058_10_17_2017_08_00_49.xml',\n    'NMC00166_10_15_2017_08_51_06.xml',\n    '5CM10538_10_15_2017_08_51_06.xml'\n);\n\nmy @sorted = sort {\n    my ($mm1,$dd1,$yy1,$hh1,$min1,$ss1) = ($a =~ /_(\\d{2})_(\\d{2})_(\\d{4})_(\\d{2})_(\\d{2})_(\\d{2})\\.xml$/);\n    my ($mm2,$dd2,$yy2,$hh2,$min2,$ss2) = ($b =~ /_(\\d{2})_(\\d{2})_(\\d{4})_(\\d{2})_(\\d{2})_(\\d{2})\\.xml$/);\n    my $x = $yy1.$mm1.$dd1.$hh1.$min1.$ss1;\n    my $y = $yy2.$mm2.$dd2.$hh2.$min2.$ss2;\n    $x &lt;=&gt; $y;\n} @list;\n\nprint Dumper(\\@sorted);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1509318132, "last_edit_date": 1509318132, "creation_date": 1508267622, "answer_id": 46797560, "question_id": 46796376, "link": "https://stackoverflow.com/questions/46796376/need-help-sorting-file-list-based-on-datestamp-in-filename/46797560#46797560", "title": "Need help sorting file list based on datestamp in filename", "body": "<p>To parse and compare dates it also makes sense using a date-time module, <a href=\"http://perldoc.perl.org/Time/Piece.html\" rel=\"nofollow noreferrer\">Time::Piece</a> here.</p>\n\n<p>A naive version (see below for a more efficient one)</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Time::Piece;\n\nmy @orig = ( \n    '5CM00225_10_16_2017_10_54_42.xml',\n    '5CM10538_10_16_2017_11_04_18.xml',\n    '1ZM06004_10_16_2017_11_04_14.xml',\n    '5XM10010_10_17_2017_08_00_47.xml',\n    '5ZM05391_10_15_2017_08_51_07.xml',\n    '5ZM05388_10_17_2017_08_01_06.xml',\n    '5ZM00058_10_17_2017_08_00_49.xml',\n    'NMC00166_10_15_2017_08_51_06.xml',\n    '5CM10538_10_15_2017_08_51_06.xml',\n);\n\nmy $dt = Time::Piece-&gt;new;\n\nmy @sorted = sort {\n    my $a_dt = $dt-&gt;strptime($a =~ /_(.*)\\./, '%m_%d_%Y_%H_%M_%S');\n    my $b_dt = $dt-&gt;strptime($b =~ /_(.*)\\./, '%m_%d_%Y_%H_%M_%S');\n    $a_dt &lt;=&gt; $b_dt\n} @orig;\n\nsay for @sorted;\n</code></pre>\n\n<p>This runs a regex and <code>strptime</code> for every comparison. </p>\n\n<p>Instead, precompute them all</p>\n\n<pre><code>my @sorted =\n    map  { $_-&gt;[1] }\n    sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] }\n    map  { [ $dt-&gt;strptime(/_(.*)\\./, '%m_%d_%Y_%H_%M_%S'),  $_ ] }\n    @orig;\n</code></pre>\n\n<p>This extracts the date-time portion of the string and builds a date-time object from it with <code>strptime</code>, placing it in an arrayref together with the original string. It does this for the whole input using <code>map</code>.</p>\n\n<p>Then that list is passed to <code>sort</code> which sorts it by its first element, where the <code>Time::Piece</code> object's builtin comparison is used. Then the second <code>map</code> pulls the original strings out, for our result.</p>\n"}, {"tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1585258306, "last_edit_date": 1585258306, "creation_date": 1585257688, "answer_id": 60876313, "question_id": 46796376, "link": "https://stackoverflow.com/questions/46796376/need-help-sorting-file-list-based-on-datestamp-in-filename/60876313#60876313", "title": "Need help sorting file list based on datestamp in filename", "body": "<p>Timestamp combined with first 9 characters can be used as hash key.</p>\n\n<p>Then it is just a matter to sort hash on key and output data.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy %hash;\n\nwhile(&lt;DATA&gt;) {\n    chomp;\n    next unless /(.+?)_(.+?)\\.xml/;\n    $hash{\"$2_$1\"} = $_;\n}\n\nsay $hash{$_} for sort keys %hash;\n\n__DATA__\n5CM00225_10_16_2017_10_54_42.xml\n5CM10538_10_16_2017_11_04_18.xml\n1ZM06004_10_16_2017_11_04_14.xml\n5XM10010_10_17_2017_08_00_47.xml\n5ZM05391_10_15_2017_08_51_07.xml\n5ZM05388_10_17_2017_08_01_06.xml\n5ZM00058_10_17_2017_08_00_49.xml\nNMC00166_10_15_2017_08_51_06.xml\n5CM10538_10_15_2017_08_51_06.xml\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>5CM10538_10_15_2017_08_51_06.xml\nNMC00166_10_15_2017_08_51_06.xml\n5ZM05391_10_15_2017_08_51_07.xml\n5CM00225_10_16_2017_10_54_42.xml\n1ZM06004_10_16_2017_11_04_14.xml\n5CM10538_10_16_2017_11_04_18.xml\n5XM10010_10_17_2017_08_00_47.xml\n5ZM00058_10_17_2017_08_00_49.xml\n5ZM05388_10_17_2017_08_01_06.xml\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 2922264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89fa727e8343388a6357d11e468e97a?s=128&d=identicon&r=PG&f=1", "display_name": "frozenthorn", "link": "https://stackoverflow.com/users/2922264/frozenthorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 46796764, "answer_count": 4, "score": 2, "last_activity_date": 1585258306, "creation_date": 1508263226, "last_edit_date": 1585253924, "question_id": 46796376, "link": "https://stackoverflow.com/questions/46796376/need-help-sorting-file-list-based-on-datestamp-in-filename", "title": "Need help sorting file list based on datestamp in filename", "body": "<p>Unsorted data</p>\n\n<pre><code>5CM00225_10_16_2017_10_54_42.xml\n5CM10538_10_16_2017_11_04_18.xml\n1ZM06004_10_16_2017_11_04_14.xml\n5XM10010_10_17_2017_08_00_47.xml\n5ZM05391_10_15_2017_08_51_07.xml\n5ZM05388_10_17_2017_08_01_06.xml\n5ZM00058_10_17_2017_08_00_49.xml\nNMC00166_10_15_2017_08_51_06.xml\n5CM10538_10_15_2017_08_51_06.xml\n</code></pre>\n\n<p>Expected results</p>\n\n<pre><code>NMC00166_10_15_2017_08_51_06.xml\n5CM10538_10_15_2017_08_51_06.xml\n5ZM05391_10_15_2017_08_51_07.xml\n5CM00225_10_16_2017_10_54_42.xml\n1ZM06004_10_16_2017_11_04_14.xml\n5CM10538_10_16_2017_11_04_18.xml\n5XM10010_10_17_2017_08_00_47.xml\n5ZM00058_10_17_2017_08_00_49.xml\n5ZM05388_10_17_2017_08_01_06.xml\n</code></pre>\n\n<p>I use <code>Net::SFTP</code> to get a directory listing off a remote site and compare to a local file listing. I'd like to sort the list by date in the filename, but I'm running into issues due to there being other information in the string that I need to ignore.</p>\n\n<pre><code>my $sftp = Net::SFTP-&gt;new( $host,  %args);\n\nmy @list = $sftp-&gt;ls($path);\n\nopen(my $fh, '&gt;', $file); # open a log file to save remote directory listing\n\n    my @sorted = map  { $_-&gt;[0] }\n         sort { $a-&gt;[1] &lt;=&gt; $b-&gt;[1] }\n         map  { [$_, $_=~/(\\d{2})_(\\d{2})_(\\d{4})_(\\d{2})_(\\d{2})_(\\d{2})/] } # unsuccessful sorting attempt\n         @list;\n\n    foreach my $item (@sorted) {\n        $i = ${item}-&gt;{filename};                               \n        print $fh \"$1\\n\"; # prints each record to the open log file\n    }\nclose $fh;\n</code></pre>\n\n<p>I have done sorting before and plenty of regex but never at the same time, and I'm clearly bungling it up, because it isn't sorting anything, and not throwing any errors. </p>\n\n<p>I thought about extracting the DD_MM_YYYY_hh_mm_ss out of each string and trying to use it as a reference, but I didn't make any usable headway so I scrapped the idea. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1508259015, "post_id": 46795246, "comment_id": 80537043, "body": "What code? Can you include a sample here that demonstrates your problem?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1508259318, "post_id": 46795246, "comment_id": 80537235, "body": "Prototypes affect how a subroutine call is parsed \u2192 <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsub.html#Prototypes</a> \u2013 please explain what exactly you are confused about, for example by explaining what you already understand."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1508259556, "creation_date": 1508259556, "answer_id": 46795403, "question_id": 46795246, "link": "https://stackoverflow.com/questions/46795246/what-is-the-meaning-of-prototype-in-perl/46795403#46795403", "title": "what is the meaning of prototype in perl?", "body": "<p>You have something like</p>\n\n<pre><code>sub compareHashes(%$) { ... }\n</code></pre>\n\n<p><code>(%$)</code> is the prototype. <a href=\"http://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\">Prototypes</a> affects how the call to the sub is parsed.</p>\n\n<hr>\n\n<p>As for your the error you received, <a href=\"http://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a> provides the following explanation:</p>\n\n<blockquote>\n  <p>A character follows % or @ in a prototype. This is useless, since % and @ gobble the rest of the subroutine arguments.</p>\n</blockquote>\n\n<p>Whatever prototype you used makes no sense, and this is Perl's way of telling you that. You need to fix or remove <code>compareHashes</code>'s prototype.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508336290, "post_id": 46806697, "comment_id": 80571839, "body": "I think I partially understand your answer. It&#39;s an excellent one! Thank you for your time."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508336578, "post_id": 46806697, "comment_id": 80572024, "body": "If you only partially understand it then it&#39;s clearly not excellent. Feel free to ask for any clarification that you need."}, {"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508348307, "post_id": 46806697, "comment_id": 80579364, "body": "Sorry, I mean to understand it takes time. I think your answer is good enough. I just need some time."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1508318626, "last_edit_date": 1508318626, "creation_date": 1508318201, "answer_id": 46806697, "question_id": 46795246, "link": "https://stackoverflow.com/questions/46795246/what-is-the-meaning-of-prototype-in-perl/46806697#46806697", "title": "what is the meaning of prototype in perl?", "body": "<p>Looking at <a href=\"https://stackoverflow.com/questions/46781792/how-to-use-reference-of-hashes-in-perl\">your previous question</a>, your prototype is this:</p>\n\n<pre><code>sub compareHashes(%$hash1, %$hash2) { ... }\n</code></pre>\n\n<p>As a prototype, this is nonsense. Perhaps you should read <a href=\"https://perldoc.perl.org/perlsub.html#Prototypes\" rel=\"nofollow noreferrer\">the documentation on prototypes</a>.</p>\n\n<p>Prototypes in Perl are completely unlike prototypes in pretty any other language. Which is why expert Perl programmers do not recommend their use (outside of a tiny number of use cases where they are essential). Recent versions of Perl have added a new feature called <a href=\"https://perldoc.perl.org/perlsub.html#Signatures\" rel=\"nofollow noreferrer\">function signatures</a> which are far more like what most people expect prototypes to be - but they are currently marked as an experimental feature so not many people use them.</p>\n\n<p>But let's look at your prototype and see what's wrong with it.</p>\n\n<pre><code>sub compareHashes(%$hash1, %$hash2) { ... }\n</code></pre>\n\n<p>Firstly, it contains what look like variable names. And Perl prototypes don't contain variable names. They are just a string of symbols describing the types of the arguments you are going to pass to the subroutine.</p>\n\n<p>But the parser isn't complaining about the variable names. It doesn't get to the first variable name. It finds a problem before that. It doesn't like the <code>%$</code>. And that's because <code>%$</code> makes no sense as a prototype.</p>\n\n<p><code>%$</code> means \"this subroutine takes two arguments - a hash followed by a scalar. But we (should!) know that it makes no sense to pass a scalar to a subroutine <strong>after</strong> a hash. That's because hash assignments are greedy and will eat up all of the remaining arguments in <code>@_</code> - leaving nothing to go into the scalar.</p>\n\n<p>You are saying that you will call the subroutine like this:</p>\n\n<pre><code>some_sub(%hash, $scalar);\n</code></pre>\n\n<p>And within the subroutine, you'll do this:</p>\n\n<pre><code>my (%hash, $scalar) = @_;\n</code></pre>\n\n<p>And that just won't work. That's what the error is telling you. That your prototype is nonsense.</p>\n\n<p>Don't use prototypes. Prototypes don't work the way you think they do. They are an advanced Perl feature and should only be used in specific circumstances.</p>\n\n<p><strong>Update:</strong> I've just noticed this in your question:</p>\n\n<blockquote>\n  <p>I don't know what is a prototype</p>\n</blockquote>\n\n<p>The prototype is the bit in parentheses between the subroutine name and the subroutine block. In your subroutine definition:</p>\n\n<pre><code>sub compareHashes(%$hash1, %$hash2) { ... }\n</code></pre>\n\n<p>The prototype is <code>(%$hash1, %$hash2)</code>. I know why people use them - they look a lot like how subroutines work in other languages, but in Perl, they are usually far more trouble than they are worth. It's best to just drop them and just define the subroutine without a prototype:</p>\n\n<pre><code>sub compareHashes { ... }\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 46806697, "answer_count": 2, "score": -1, "last_activity_date": 1508318626, "creation_date": 1508258965, "question_id": 46795246, "link": "https://stackoverflow.com/questions/46795246/what-is-the-meaning-of-prototype-in-perl", "title": "what is the meaning of prototype in perl?", "body": "<p>I was writing a code and had an error as <code>Prototype after '%' for main::compareHashes</code>. I don't know what is a prototype, and I'm still confused after viewing numerous documents online. Can someone please explain?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1508258781, "creation_date": 1508258781, "answer_id": 46795202, "question_id": 46795165, "link": "https://stackoverflow.com/questions/46795165/what-does-s-w-1-g-do-in-perl/46795202#46795202", "title": "What does s/(\\W)/\\\\$1/g do in perl?", "body": "<p>It puts backslashes in front of non-word characters. Things like <code>\"untitled file\"</code> becomes <code>\"untitled\\ file\"</code>.</p>\n\n<p>As in most regular expression operations <code>$1</code> represents the first thing captured with <code>(...)</code> which in this case is the <code>(\\W)</code> representing a single non-word character.</p>\n\n<p>I think this is an unnecessary home-rolled version of <a href=\"http://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\"><code>quotemeta</code></a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8757355"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "closed_date": 1508259961, "accepted_answer_id": 46795202, "answer_count": 1, "score": -2, "last_activity_date": 1508258781, "creation_date": 1508258587, "question_id": 46795165, "link": "https://stackoverflow.com/questions/46795165/what-does-s-w-1-g-do-in-perl", "closed_reason": "Duplicate", "title": "What does s/(\\W)/\\\\$1/g do in perl?", "body": "<p>I went over a piece of code in which a subroutine takes <code>video filename</code> as argument, and then printing it's duration time. Here I'm only showing the snippet.</p>\n\n<pre><code>sub videoInfo {\n  my $file = shift;\n  $file =~ s/(\\W)/\\\\$1/g;\n}\n</code></pre>\n\n<p>So far I understood is that it is dealing with <code>whitespaces</code> but I'm not able to break the meaning of code, I mean what is <code>$1</code> and how it will work?</p>\n"}, {"tags": ["json", "multithreading", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1508254785, "post_id": 46793885, "comment_id": 80534650, "body": "My first thought would be it&#39;s something parser related. Either that, or the thread-invocation messes with the global state of the JSON module."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1508261160, "last_edit_date": 1592644375, "creation_date": 1508255093, "answer_id": 46794097, "question_id": 46793885, "link": "https://stackoverflow.com/questions/46793885/perl-json-fails-if-a-thread-is-started/46794097#46794097", "title": "Perl: JSON fails if a thread is started", "body": "<p>JSON(.pm) is just a front end for JSON::PP, JSON::XS or Cpanel::JSON::XS.</p>\n<p>You have found a bug in JSON::XS. About this, JSON::XS's documentation says:</p>\n<blockquote>\n<p>(I-)THREADS</p>\n<p>This module is not guaranteed to be ithread (or MULTIPLICITY-) safe and there are no plans to change this. Note that perl's builtin so-called theeads/ithreads are officially deprecated and should not be used.</p>\n</blockquote>\n<p><em>[Note that the last part is incorrect. The official position is actually: Threads are hard, so you should use something else instead. It's highly questionable since the alternatives are arguably just as hard.]</em></p>\n<p>Workaround: Use one of the other backends (directly or via JSON(.pm)).</p>\n<pre><code>$ PERL_JSON_BACKEND=JSON::XS 46793885 0\n{&quot;val&quot;:&quot;123&quot;}\n\n$ PERL_JSON_BACKEND=JSON::XS 46793885 1\nhash- or arrayref expected (not a simple scalar, use allow_nonref to allow this) at /home/ikegami/usr/perlbrew/perls/5.26.0t/lib/site_perl/5.26.0/JSON.pm line 170.\n\n$ PERL_JSON_BACKEND=Cpanel::JSON::XS 46793885 1\n{&quot;val&quot;:&quot;123&quot;}\n\n$ PERL_JSON_BACKEND=JSON::PP 46793885 1\n{&quot;val&quot;:&quot;123&quot;}\n</code></pre>\n<p>You can control this within the script by adding the following before loading JSON:</p>\n<pre><code>BEGIN { $ENV{PERL_JSON_BACKEND} = 'Cpanel::JSON::XS' }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1508255582, "post_id": 46794205, "comment_id": 80535147, "body": "Nooooo, Why contort yourself to continue using such a buggy module! Use the maintained Cpanel::JSON::XS instead of JSON::XS! Cpanel::JSON::XS is a fork of JSON::XS that was created because the maintainer of JSON::XS is a pain to deal with and refuses to fixes problems such as this one!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1508256585, "post_id": 46794205, "comment_id": 80535720, "body": "Was more offering the general workaround if there&#39;s no alternatives to be had."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508261058, "post_id": 46794205, "comment_id": 80538185, "body": "It&#39;s a really bad solution for this question, but it could be useful for others. You should create a self-answered Q&amp;A. (Example title: &quot;Thread-unsafe module with threads&quot;. Example leading line: &quot;Is it still possible to use a module that&#39;s not thread safe inside of a thread?&quot;)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1508255401, "last_edit_date": 1592644375, "creation_date": 1508255401, "answer_id": 46794205, "question_id": 46793885, "link": "https://stackoverflow.com/questions/46793885/perl-json-fails-if-a-thread-is-started/46794205#46794205", "title": "Perl: JSON fails if a thread is started", "body": "<p>This is definitely to do with JSON and global state.\nIf you <code>require</code> and <code>import</code> JSON, after the thread invocation, it 'works'.</p>\n<p>The warning in the module for <a href=\"http://search.cpan.org/%7Emlehmann/JSON-XS/XS.pm#(I-)THREADS\" rel=\"nofollow noreferrer\"><code>JSON::XS</code></a> includes:</p>\n<blockquote>\n<p>(I-)THREADS ^</p>\n<p>This module is not guaranteed to be ithread (or MULTIPLICITY-) safe and there are no plans to change this</p>\n</blockquote>\n<p>The 'workaround' for a not-thread-safe module is to <em>not</em> load it via <code>use</code> (which happens at 'compile' time) and instead <code>require</code> and <code>import</code> (at runtime) after the parallel instances of the program (threads) have been started.</p>\n<p>E.g.:</p>\n<pre><code>use strict;\nuse warnings;\n\nuse threads;\nuse threads::shared;\n\nsub th { }\n\nmy $th = threads-&gt;create( \\&amp;th )-&gt;join;\n\n## Just inside main thread\n##can do this within individual threads instead if desired\nrequire JSON;\nJSON-&gt;import;\n\n\nmy $json = to_json({ val =&gt; &quot;123&quot; });    # WTF?!?\nprint &quot;\\n$json\\n&quot;;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 2112521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4930949cdb14c12489dda296eb665c0?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/2112521/bill"}, "edited": false, "score": 0, "creation_date": 1533839389, "post_id": 48815571, "comment_id": 90506102, "body": "After using this solution in a number of places in our code, I&#39;ve run into one in another module that I can&#39;t simply modify. Reviewing ikegami&#39;s solution, I believe that is much more robust and it worked perfectly for me."}, {"owner": {"reputation": 127, "user_id": 1602262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/714a28e74a7f5a95c9afa698dddb7459?s=128&d=identicon&r=PG", "display_name": "chandu tangudu", "link": "https://stackoverflow.com/users/1602262/chandu-tangudu"}, "edited": false, "score": 0, "creation_date": 1614012404, "post_id": 48815571, "comment_id": 117247903, "body": "Thanks Bill for the fix. I spent 2 days for my issue in pycharm perl CamelDb plugin."}], "tags": [], "owner": {"reputation": 51, "user_id": 2112521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4930949cdb14c12489dda296eb665c0?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/2112521/bill"}, "is_accepted": false, "score": 3, "last_activity_date": 1518725923, "creation_date": 1518725923, "answer_id": 48815571, "question_id": 46793885, "link": "https://stackoverflow.com/questions/46793885/perl-json-fails-if-a-thread-is-started/48815571#48815571", "title": "Perl: JSON fails if a thread is started", "body": "<p>I ran into this as well (trying to use JSON with multi-threaded perl). Without launching a background thread, my code worked fine, but got the same error you are getting when there was a thread launched.</p>\n\n<p>Like you, I didn't find any help online specific to threading with regards to this error text. However, following the <code>allow_nonref</code> error text, I found the following in JSON::XS's documentation:</p>\n\n<blockquote>\n  <p><b>\"OLD\" VS. \"NEW\" JSON (RFC 4627 VS. RFC 7159)</b></p>\n  \n  <p>TL;DR: Due to security concerns, JSON::XS will not allow scalar data in JSON >texts by default - you need to create your own JSON::XS object and enable \n  <code>allow_nonref</code>:</p>\n\n<pre><code>my $json = JSON::XS-&gt;new-&gt;allow_nonref;\n\n$text = $json-&amp;gt;encode ($data);\n$data = $json-&amp;gt;decode ($text);\n</code></pre>\n</blockquote>\n\n<p>In your case, you are trying to call <code>to_json</code>, which internally creates a JSON object and calls <code>encode</code> on it. Unfortunately it doesn't specify <code>allow_nonref</code> in its constructor. So to make your code work, you can do something like this:</p>\n\n<pre><code>use JSON::XS;\n\nmy $json_obj = JSON::XS-&gt;new-&gt;allow_nonref;\nmy $json = $json_obj-&gt;encode({ val =&gt; \"123\"});\nprint \"$json\\n\";\n</code></pre>\n\n<p>I came up with this solution before reading the other responses here, so those may be better solutions, but this should at least get you past the issue with minimal changes.</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 0, "accepted_answer_id": 46794097, "answer_count": 3, "score": 8, "last_activity_date": 1518725923, "creation_date": 1508254341, "last_edit_date": 1508254913, "question_id": 46793885, "link": "https://stackoverflow.com/questions/46793885/perl-json-fails-if-a-thread-is-started", "title": "Perl: JSON fails if a thread is started", "body": "<p>Can someone please tell my why JSON is not working if some thread is started?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\nuse threads;\nuse threads::shared;\n\nsub th {   }\n\nthreads-&gt;create(\\&amp;th)-&gt;join() if $ARGV[0];\n\nmy $json = to_json({ val =&gt; \"123\"});           # WTF?!?\nprint \"$json\\n\";\n</code></pre>\n\n<p>Works fine and prints the JSON-string. But pass <code>1</code> as an argument to the script to create the thread and <code>to_json</code> will fail with </p>\n\n<pre><code>hash- or arrayref expected (not a simple scalar, use allow_nonref to allow this)\n</code></pre>\n\n<p>Same effect if I use encode_json insead.\nOn the manpage of JSON the word thread is not present and I see no reason why a thread should harm an outside string-conversion.</p>\n\n<p>???</p>\n"}, {"tags": ["perl", "printf", "average"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508254062, "post_id": 46793289, "comment_id": 80534212, "body": "Stack Overflow is here to help you get your code working. If you don&#39;t have any code then you&#39;ve missed out an important step!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508273462, "post_id": 46793289, "comment_id": 80544895, "body": "I see that I have misunderstood your question, but I am still no wiser. You say <i>&quot;What I want is another output text file (on the fly)&quot;</i> which sounds like you want real time output. But surely your simulation doesn&#39;t work in real time? And even if it does, asking for real time data in a text file is very odd, as text files can normally only be appended to. Also, your code fetches only 11 values from <code>DATA READER</code> and it seems odd to want real time data from such a small sample. If you can guarantee that the data will arrive in <code>distance</code> order then perhaps something can be done. Please advise."}, {"owner": {"reputation": 149, "user_id": 5682472, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ffddcbd204c00b640793a40a20ef9da3?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/5682472/emma"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508276987, "post_id": 46793289, "comment_id": 80546432, "body": "@Borodin Thank you a lot for your reply, and I&#39;m very sorry for the confusion. What I meant by <i>&quot;on the fly&quot;</i> is that I want to calculate the average values and save then in a new file within the code itself, without needing to import the data file and write a separate code for the averaging. I have almost zero experience in Perl. I have tried to run the code you provided, and write the output of average values to a new file <code>OUT2</code>, but for some reason it didn&#39;t work! I get an empty file.....(cont.)"}, {"owner": {"reputation": 149, "user_id": 5682472, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ffddcbd204c00b640793a40a20ef9da3?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/5682472/emma"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508277147, "post_id": 46793289, "comment_id": 80546491, "body": "I have used <code>OUT1</code> instead of <code>DATA</code>, since it is containing the data produced by the software (wonder if that is correct to use?)   <code>use strict; use warnings &#39;all&#39;; use Scalar::Util &#39;looks_like_number&#39;; use List::Util &#39;sum&#39;; my %data; while ( &lt;OUT1&gt; ) {     my ($t, $loc, $dist, $maxp) = split;     next unless looks_like_number($maxp);     push @{ $data{$dist} }, $maxp; } for my $dist ( sort { $a &lt;=&gt; $b } keys %data ) {     my $maxp = $data{$dist};     $maxp = sum(@$maxp) &#47; @$maxp;     printf OUT2 &quot;%-16d%-.3E\\n&quot;, $dist, $maxp; }</code> ...(cont)"}, {"owner": {"reputation": 149, "user_id": 5682472, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ffddcbd204c00b640793a40a20ef9da3?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/5682472/emma"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508277687, "post_id": 46793289, "comment_id": 80546682, "body": "I guess the software doesn&#39;t understand the used modules, but it does not produce any errors. Perhaps  there is a more direct way to avoid using modules?  I have few hundred of these data points, I&#39;m just now working with a sample of them to see if the code works :) Cheers!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508328377, "post_id": 46793289, "comment_id": 80566624, "body": "You need to <code>open</code> file handles before you use them: <code>open OUT1, &#39;&lt;&#39;, &#39;myfile.txt&#39; or die $!</code> (although <code>OUT1</code> is a bad name for an input file handle) and rather than opening an output file, you should write to <code>STDOUT</code> as my code does, and redirect the output on the bash command line."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508329874, "post_id": 46793289, "comment_id": 80567582, "body": "The modules are fine. Both of those are core modules that are part of Perl itself. Your worry about <i>&quot;I am not sure if they are compatible with the command language used in the software&quot;</i> I think is unfounded; the command language would have to be <i>very</i> strange to have an effect on the internals of Perl. Also, Perl open four standard file handles for you: <code>STDIN</code>, <code>STDOUT</code>, and <code>STDERR</code>, like most languages, and <code>DATA</code> which allows you to read from the program file itself. If you add a <code>__DATA__</code> marker at the end of your code then anything after it can be read from <code>DATA</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508329928, "post_id": 46793289, "comment_id": 80567616, "body": "Anything other than those must be opened explicitly within the program as I described."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 5682472, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ffddcbd204c00b640793a40a20ef9da3?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/5682472/emma"}, "edited": false, "score": 0, "creation_date": 1508838173, "post_id": 46793839, "comment_id": 80760973, "body": "The original answer that was posted works well. It just needed that the file containing the calculated output values be opened before manipulation of the code posted in the answer starts.  Also, this is a confirmation that modules work in CFD-Post session file. I have found that the Perl version used is perl-5.9.5-vs2k12 (Comes with ANSYS 17.0)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1508338450, "last_edit_date": 1508338450, "creation_date": 1508254205, "answer_id": 46793839, "question_id": 46793289, "link": "https://stackoverflow.com/questions/46793289/perl-cfd-post-calculating-the-average-of-a-sequence-of-numbers-on-the-fly-to/46793839#46793839", "title": "Perl &amp; CFD-Post: Calculating the average of a sequence of numbers on the fly to an output file using Perl", "body": "<h3>Update</h3>\n\n<p>Here's your code updated to do what I think you want. It writes two output files instead of one: <code>pressure.txt</code> and  <code>avg.txt</code>. I have also fixed a few instances of bad practice in your code; in particular you should have <code>use strict</code> and <code>use warnings 'all'</code> at the top of every Perl program (I've left them out here because I don't know what the top of your program looks like) and you need to declare all your variables at their first point of use with <code>my</code></p>\n\n<p>I've also changed the open mode for your output file from append. I presume you don't want each output added to the end of the file?</p>\n\n<p>I hope this helps</p>\n\n<pre><code>my ( $outputfile, $avg_file ) = qw/ pressure.txt avg.txt /;\n\nopen my $out_fh, '&gt;', $outputfile\" or die qq{Unable to open \"$outputfile\" for output: $!};;\nopen my $avg_fh, '&gt;', $avg_file\"   or die qq{Unable to open \"$avg_file\" for output: $!};;\n\nprint $out_fh \"time [s]  location    distance [mm]   Max Pressure [Pa]\\n\";\nprint $avg_fh \"Distance [mm]   Avg Pressure [Pa]\\n\";\n\nfor ( 0 .. 10 ) {\n\n    my $i = $_ * 10;  # $i = 0, 10, 20, ... 100\n\n    my $location = \"x$i\";\n\n    my $timestep_list = getValue( 'DATA READER', 'Timestep List' );\n    my @timesteps    = split /,\\s*/, $timestep_list;\n\n    my ($n, $total_maxp) = (0, 0);\n\n    for my $ts ( @timesteps ) {\n\n        my $time         = getValue( 'DATA READER', 'Current Timevalue' );\n        my $max_pressure = maxVal( 'Pressure', $location );\n\n        print $out_fh \"$time $location   $i  $max_pressure\\n\";\n\n        ++$n;\n        $total_maxp += $max_pressure;\n    }\n\n    printf $avg_fh \"%-16d%-.3e\\n\", $i, $total_maxp / $n;\n}\n\nclose $out_fh or die $!;\nclose $avg_fh or die $!;\n</code></pre>\n\n<h2><br/></h2>\n\n<h3>Original answer</h3>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Scalar::Util 'looks_like_number';\nuse List::Util 'sum';\n\nmy %data;\n\nwhile ( &lt;DATA&gt; ) {\n    my ($t, $loc, $dist, $maxp) = split;\n    next unless looks_like_number($maxp);\n    push @{ $data{$dist} }, $maxp;\n}\n\nfor my $dist ( sort { $a &lt;=&gt; $b } keys %data ) {\n    my $maxp = $data{$dist};\n    $maxp = sum(@$maxp) / @$maxp;\n    printf \"%-16d%-.3E\\n\", $dist, $maxp;\n}\n\n__DATA__\ntime [s]    location    distance [mm]   Max Pressure [Pa]\n1           x0          0               3.531e5\n2           x0          0               7.795e5\n3           x0          0               5.265e5\n..          ..          ..              ..\n..          ..          ..              ..\n10          x0          0               ..e5\n1           x10         10              4.267e5\n2           x10         10              9.987e5\n3           x10         10              1.443e5\n..          ..          ..              ..\n..          ..          ..              ..\n10          x10         10              ..e5\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>0               5.530E+005\n10              5.232E+005\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 5682472, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ffddcbd204c00b640793a40a20ef9da3?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/5682472/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 46793839, "answer_count": 1, "score": -1, "last_activity_date": 1542206506, "creation_date": 1508252484, "last_edit_date": 1508265112, "question_id": 46793289, "link": "https://stackoverflow.com/questions/46793289/perl-cfd-post-calculating-the-average-of-a-sequence-of-numbers-on-the-fly-to", "title": "Perl &amp; CFD-Post: Calculating the average of a sequence of numbers on the fly to an output file using Perl", "body": "<p>I\u2019m using a software called CFD-Post to manipulate simulation results. The software command language is based on Perl. So, I\u2019m writing a simple code which contains the software's own commands besides Perl commands to output a data file that contains pressure maximum values at different locations and time intervals. The simplified code example looks something like:</p>\n\n<pre><code># Output file for storing the pressure values from the software. The file is opened here to insert headings.\n!   $outputfile = \"pressure.txt\";\n!   open(FH,\"&gt;&gt; $outputfile\");\n#   Print headings\n!   print FH \"time [s]  location    distance [mm]   Max Pressure [Pa]\\n\";\n#########################################################################\n#   Loop for creating locations\n!   for ($i = 0; $i &lt; 101; $i += 10) {\n!   $location = \"x${i}\"; \n#   ......\n#   Code within CFD-Post software for creating the locations for \n    extracting \n    spatial data \n#   ......\n#   Code within CFD-Post software for loading different timesteps and \n    looping \n    over them at each location\n#   Get the timestep values from the current results file\n!   $timestepList = getValue(\"DATA READER\", \"Timestep List\");\n!   @timesteps = split(/, /, $timestepList );\n#   Loop over timesteps\n!   foreach $ts ( @timesteps ) {\n#   Load current timestep, \n&gt;   load timestep=$ts\n!   $time = getValue( \"DATA READER\", \"Current Timevalue\");\n#   ......\n#   Code within CFD-Post software for retrieving the pressure value at each \n    location\n!   $MaxPressure = maxVal(\u201cPressure\u201d , \"$location\");\n    ######################################################################\n#\n#   Perl code of concern in the current question \n    #   Tab delimited output\n!   print FH \"$time $location   $i  $MaxPressure\\n\";\n!   };\n!   };\n#   Close the output file \n!   close FH;\n</code></pre>\n\n<p>The ouput in the text file is something like this:</p>\n\n<pre><code>time [s]    location    distance [mm]   Max Pressure [Pa]\n1           x0          0               3.531e5\n2           x0          0               7.795e5\n3           x0          0               5.265e5\n..          ..          ..              ..\n..          ..          ..              ..\n10          x0          0               ..e5\n1           x10         10              4.267e5\n2           x10         10              9.987e5\n3           x10         10              1.443e5\n..          ..          ..              ..\n..          ..          ..              ..\n10          x10         10              ..e5\n</code></pre>\n\n<p>What I want is another output text file (on the fly) that <strong><em>averages the pressure</em></strong> over <strong><em>time</em></strong> at <strong><em>each fixed location</em></strong>, such that the output will look as:</p>\n\n<pre><code>Distance [mm]   Avg Pressure [Pa]\n0               x.xxxe5\n10              x.xxxe5\n20              x.xxxe5 \n..              ..e5\n</code></pre>\n\n<p>What will be the Perl code to accomplish this (without using modules?, as I am not sure if they are compatible with the command language used in the software). Of course it is possible to use Matlab to do this task, but I guess it shouldn't be a big issue in Perl? Note that I'm not familiar with Perl, it is the first week that I'm using it :)</p>\n\n<h2><br/></h2>\n\n<h3>Update</h3>\n\n<p>Here's the above code withe the intrusive comments removed and proper indentation added</p>\n\n<pre><code>$outputfile = \"pressure.txt\";\n\nopen( FH, \"&gt;&gt; $outputfile\" );\n\nprint FH \"time [s]  location    distance [mm]   Max Pressure [Pa]\\n\";\n\nfor ( $i = 0; $i &lt; 101; $i += 10 ) {\n\n    $location = \"x${i}\";\n\n    $timestepList = getValue( \"DATA READER\", \"Timestep List\" );\n    @timesteps    = split( /, /, $timestepList );\n\n    foreach $ts ( @timesteps ) {\n\n        $time        = getValue( \"DATA READER\", \"Current Timevalue\" );\n        $MaxPressure = maxVal( \"Pressure\", \"$location\" );\n\n        print FH \"$time $location   $i  $MaxPressure\\n\";\n    }\n}\n\nclose FH;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508250394, "post_id": 46792316, "comment_id": 80531615, "body": "Do you want to put one file after another, or consolidate them into one file where the log messages of all of them are interleaved and sorted according to the timestamps? The <code>cat</code> command obviously won&#39;t work. Maybe you should change that in the question to be a comment, or you will have someone point out that it&#39;s wrong syntax."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1508250415, "post_id": 46792316, "comment_id": 80531626, "body": "I don&#39;t see the point in concatenating the files, it just loses information. Why not simply zip them all as separate files into a single zip file?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1508252475, "post_id": 46792316, "comment_id": 80533176, "body": "<code>tar cvfz logs.tar.gz &#47;var&#47;log&#47;*log</code> is how I&#39;d do it. No need for &#39;perl&#39; at all. If you really need: <code>tar cvfz logs.tar.gz &#47;var&#47;log&#47;*log &amp;&amp; rm -f &#47;var&#47;log&#47;*log</code>. If the problem is log consolidation, then I wouldn&#39;t do it this way either, I&#39;d just look at changing the rsyslog.conf"}], "answers": [{"tags": [], "owner": {"reputation": 647, "user_id": 857156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66412a85a83783c2061838e1b44a9bbb?s=128&d=identicon&r=PG", "display_name": "Dave Gray", "link": "https://stackoverflow.com/users/857156/dave-gray"}, "is_accepted": false, "score": 0, "last_activity_date": 1508275427, "creation_date": 1508275427, "answer_id": 46799438, "question_id": 46792316, "link": "https://stackoverflow.com/questions/46792316/how-to-put-a-certain-number-of-files-in-one-master-file/46799438#46799438", "title": "How to put a certain number of files in one &#39;master&#39; file", "body": "<p>As noted in the comments, there are several less involved ways to do this. If you really need to roll your own, <a href=\"http://search.cpan.org/~phred/Archive-Zip-1.59/lib/Archive/Zip.pm\" rel=\"nofollow noreferrer\">Archive::Zip</a> will do whatever you tell it to.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse Archive::Zip ':ERROR_CODES';\nuse File::Temp;\nuse Carp;\n\n# don't remove \"temp\" files when filehandle is closed\n$File::Temp::KEEP_ALL = 1;\n# make a temp directory if not already present\nmy $dir = './tmp';\nif (not -d $dir) {\n  croak \"failed to create directory [$dir]: $!\" if not mkdir($dir);\n}\n\nmy $zip = Archive::Zip-&gt;new();\n\n# generate some fake log files to zip up\nfor my $idx (1 .. 10) {\n  my $tmp = File::Temp-&gt;new(DIR =&gt; $dir, SUFFIX =&gt; '.log');\n  my $fn = $tmp-&gt;filename();\n  print $tmp $fn, \"\\n\";\n}\n\n# combine the logs into one big one\nmy $combined = \"$dir/combined.log\";\nopen my $out, '&gt;', $combined or die \"couldn't write [$combined]: $!\";\nfor my $fn (&lt;$dir/*.log&gt;) {\n  open my $in, '&lt;', $fn or die \"couldn't read [$fn]: $!\";\n  # copy the file line by line so we don't use tons of memory for big files\n  print($out $_) for &lt;$in&gt;;\n}\nclose $out;\n\n$zip-&gt;addFile({ filename =&gt; $combined, compressionLevel =&gt; 9});\n\n# write out the zip file we made\nmy $rc = $zip-&gt;writeToFileNamed('tmp.zip');\nif ($rc != AZ_OK) {\n  croak \"failed to write zip file: $rc\";\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8729416, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-qh9LF4KrRQs/AAAAAAAAAAI/AAAAAAAAJ00/DdeI1LJZjGM/photo.jpg?sz=128", "display_name": "Glorksnork", "link": "https://stackoverflow.com/users/8729416/glorksnork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508275427, "creation_date": 1508249665, "last_edit_date": 1508272702, "question_id": 46792316, "link": "https://stackoverflow.com/questions/46792316/how-to-put-a-certain-number-of-files-in-one-master-file", "title": "How to put a certain number of files in one &#39;master&#39; file", "body": "<p>I want to take all my log files from <code>/var/log</code> and <code>cat</code> them into a master log file, then zip that master file. How exactly would I do that? </p>\n\n<p>I have <code>cat</code> in my code because that's what I know how to do in bash. How would I do it in Perl? </p>\n\n<pre><code>#!/usr/bin/perl\n\n\nuse strict;\nuse warnings;\n\nuse IO::Compress::Zip qw(zip $ZipError);\n\n# cat /var/log/*log &gt; /home/glork/masterlog.log\n\n\nmy @files = &lt;/var/log/*.log&gt;;\n    zip \\@files =&gt; 'glork.zip'\n            or die \"zip failed: $ZipError\\n\";\n\n\n@files = &lt;/var/log/*.log&gt;;\n\nif (@files) {\n unlink @files or warn \"Problem unlinking @files: $!\";\n   print \"The job is done\\n\";\n  } else {\n warn \"No files to unlink!\\n\";\n }\n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1508243797, "post_id": 46790226, "comment_id": 80526908, "body": "Your description doesn&#39;t match what your code does - it doesn&#39;t produce any output as none of the input strings match <code>&#47;ALVL&#47;</code>. Please update one or the other to bring them into line."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508243801, "post_id": 46790226, "comment_id": 80526913, "body": "Please note that ALLCAPS variable names are by convention reserved for package variables or globals in Perl."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1508244356, "last_edit_date": 1508244356, "creation_date": 1508243775, "answer_id": 46790284, "question_id": 46790226, "link": "https://stackoverflow.com/questions/46790226/mimic-linux-grep-w-in-perl-grep/46790284#46790284", "title": "mimic linux grep -w in perl grep", "body": "<p>If you want an exact match, you need to tell it. Your pattern <code>/LVLX/</code> matches strings that contain the pattern, because you have not anchored it.</p>\n\n<p>There are two ways to do this. Either you anchor your pattern like this</p>\n\n<pre><code>my @match = grep(/^ALVL$/, @FAMILY_MAP);\n</code></pre>\n\n<p>or you use the block form of <code>grep</code> and do an equality check, which is faster in older Perls (very new Perls have this optimized, but I don't remember in which version that was introduced)</p>\n\n<pre><code>my @match = grep { $_ eq 'ALVL' } @FAMILY_MAP;\n</code></pre>\n\n<p>Both will give you the same output.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508244498, "post_id": 46790374, "comment_id": 80527350, "body": "I was thinking I should have read the docs, I was sure mine wasn&#39;t quite right... ;)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1508244168, "last_edit_date": 1508244168, "creation_date": 1508244016, "answer_id": 46790374, "question_id": 46790226, "link": "https://stackoverflow.com/questions/46790226/mimic-linux-grep-w-in-perl-grep/46790374#46790374", "title": "mimic linux grep -w in perl grep", "body": "<p><code>grep -w</code> matches the string only when it appears as a whole word. For that, you need to use the word boundary (<code>\\b</code>) escape sequence in your regex.</p>\n\n<pre><code>my @family_map = (\"A2LVLX\",\"LVLX\",\"O2LVLX\");\nmy $search = 'LVLX';\nmy @match = grep (/\\b$search\\b/, @family_map);\nprint \"@match\";\n</code></pre>\n\n<p><strong>Update:</strong> Alternatively, if you know the elements of your array will all be individual words, then just use <code>eq</code>.</p>\n\n<pre><code>my @match = grep( $_ eq $search, @family_map);\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 686962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1b1adf8c34a1d1dda72b64e2096595ab?s=128&d=identicon&r=PG", "display_name": "monucool", "link": "https://stackoverflow.com/users/686962/monucool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 46790374, "answer_count": 2, "score": 0, "last_activity_date": 1508244356, "creation_date": 1508243567, "question_id": 46790226, "link": "https://stackoverflow.com/questions/46790226/mimic-linux-grep-w-in-perl-grep", "title": "mimic linux grep -w in perl grep", "body": "<p>Grep in perl gives me all the matched lines with the regular expression.</p>\n\n<p>For ex-</p>\n\n<pre><code>{\n    my @FAMILY_MAP= (\"A2LVLX\",\"LVLX\",\"O2LVLX\");\n    my $search=\"LVLX\";\n    my @match = grep (/ALVL/, @FAMILY_MAP);\n    print @match;\n }\n</code></pre>\n\n<p>Here my expected output is LVLX but i get all the three elements in the array.\nWhich is expected behaviour in the Linux terminal too(if grep LVLX is done on a file containing the three words). But i have to used grep -w \"LVLX\" in the terminal to get LVLX as the output.\nI need a way to replicate the same using perl grep. Any hints?</p>\n"}, {"tags": ["perl", "ssh"], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 1, "last_activity_date": 1508224757, "creation_date": 1508224757, "answer_id": 46784551, "question_id": 46784225, "link": "https://stackoverflow.com/questions/46784225/perl-script-to-check-if-possible-to-ssh-into-remote-server/46784551#46784551", "title": "Perl script to check if possible to ssh into remote server", "body": "<p>By far the most reliable way to determine whether you can ssh into a server or not is to actually attempt to ssh into it.  Just attempt to connect and, if it fails, report the failure and abort any further attempts:</p>\n\n<pre><code>use Try::Tiny;\n\n# Declaring them here so they don't disappear at the end of the try block\nmy ($xtrabk_check, $role_check, $error_log);\ntry {\n  $xtrabk_check = `ssh $hostname ps -ef |grep mysql | grep wsrep_sst_xtrabackup-v2`;\n  $role_check = `ssh $hostname ps -ef |grep mysql | grep donor`;\n  $error_log = `ssh $hostname ps -ef |grep mysql`;\n} catch {\n  die \"Failed to connect to ssh: $_\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 0, "last_activity_date": 1508227166, "creation_date": 1508227166, "answer_id": 46785270, "question_id": 46784225, "link": "https://stackoverflow.com/questions/46784225/perl-script-to-check-if-possible-to-ssh-into-remote-server/46785270#46785270", "title": "Perl script to check if possible to ssh into remote server", "body": "<p>Instead of running <code>ssh</code> directly, use any of the Perl modules supporting SSH (for instance, <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a>). That would allow you to connect to the remote host and run as many commands as you need over that single connection and it will detect any connection error and report it appropriately.</p>\n\n<p>You can also parallelize the operation using <a href=\"https://metacpan.org/pod/Net::OpenSSH::Parallel\" rel=\"nofollow noreferrer\">Net::OpenSSH::Parallel</a>.</p>\n"}], "owner": {"reputation": 845, "user_id": 2105790, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ded7e22588e7875f480ecfe5453d83f6?s=128&d=identicon&r=PG", "display_name": "The Georgia", "link": "https://stackoverflow.com/users/2105790/the-georgia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1508227166, "creation_date": 1508223479, "question_id": 46784225, "link": "https://stackoverflow.com/questions/46784225/perl-script-to-check-if-possible-to-ssh-into-remote-server", "title": "Perl script to check if possible to ssh into remote server", "body": "<p>I have a perl script in which i want to first check if it possible to ssh into the server before i actually do ssh. So if it possible to ssh, then go ahead and ssh into that server, otherwise handle this exception appropriately.</p>\n\n<p>So i have this script that goes through a textfile with a list of databases, and tries to ssh into each server to perform a bash command that checks if the server is performing MySQL SST or not:</p>\n\n<pre><code>    #!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n\nuse 5.010;\nuse DBI;\nuse Encode;\nuse IO::File;\nuse JSON;\nuse utf8;\n\nBEGIN {\n    binmode STDERR, ':utf8';\n    binmode STDIN, ':utf8';\n    binmode STDOUT, ':utf8';\n}\n\nmy $time = localtime();\nmy $file = '/opt/db-servers/db.txt';\nopen my $info, $file or die \"Could not open $file: $!\";\n\nwhile( my $hostname = &lt;$info&gt;)  {\n    chomp( $hostname );\n    my $xtrabk_check = `ssh $hostname ps -ef |grep mysql | grep wsrep_sst_xtrabackup-v2`;\n    my $role_check = `ssh $hostname ps -ef |grep mysql | grep donor`;\n    my $error_log = `ssh $hostname ps -ef |grep mysql`;\n        if ( $xtrabk_check ne \"\" ){\n            if ( $role_check ne \"\" ){\n                my $cmd =\"curl -vs -o /dev/null -X POST --data-urlencode 'payload={\\\"channel\\\": \\\"#db-wsrep-status-log\\\", \\\"username\\\": \\\"db-wsrep-status-log\\\", \\\"text\\\": \\\"$time: $hostname: --role Donor \\n```$error_log```\\\", \\\"icon_emoji\\\": \\\":scorpion:\\\"}' 2&gt;&amp;1 /dev/null https://hooks.slack.com/services/GVadasdd/B6LSMF5GV/BIApnzoIldfdsrw343wf\";\n                system($cmd);\n            }\n            else {\n                my $cmd =\"curl -vs -o /dev/null -X POST --data-urlencode 'payload={\\\"channel\\\": \\\"#db-wsrep-status-log\\\", \\\"username\\\": \\\"db-wsrep-status-log\\\", \\\"text\\\": \\\"$time: $hostname: State transfer in progress, setting sleep higher mysqld \\n```$error_log```\\\", \\\"icon_emoji\\\": \\\":scorpion:\\\"}' 2&gt;&amp;1 https://hooks.slack.com/services/GVadasdd/B6LSMF5GV/BIApnzoIldfdsrw343wf\";\n                system($cmd);\n            }\n       }\n}\nclose $info;\n</code></pre>\n\n<p>So probably before performing the three lines below, i want to be able to know if that server is down (hence cannot ssh into it) or not (then ssh into it with the commands below):</p>\n\n<pre><code>my $xtrabk_check = `ssh $hostname ps -ef |grep mysql | grep wsrep_sst_xtrabackup-v2`;\n    my $role_check = `ssh $hostname ps -ef |grep mysql | grep donor`;\n    my $error_log = `ssh $hostname ps -ef |grep mysql`;\n</code></pre>\n\n<p>How can i go about achieving this? By the way, the slack URL have been altered so security worries there.</p>\n"}, {"tags": ["linux", "perl", "unix", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 3154, "user_id": 8391698, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b857f1ae689854a47bbfd4f2b2d4fa20?s=128&d=identicon&r=PG&f=1", "display_name": "scamander", "link": "https://stackoverflow.com/users/8391698/scamander"}, "edited": false, "score": 0, "creation_date": 1508211437, "post_id": 46782026, "comment_id": 80510471, "body": "Note the output needs to be also TAB separated. How can I modify?"}, {"owner": {"reputation": 1489, "user_id": 2371840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f6ec83c6c9cc12729498b7902f3777?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Rourke", "link": "https://stackoverflow.com/users/2371840/michael-rourke"}, "reply_to_user": {"reputation": 3154, "user_id": 8391698, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b857f1ae689854a47bbfd4f2b2d4fa20?s=128&d=identicon&r=PG&f=1", "display_name": "scamander", "link": "https://stackoverflow.com/users/8391698/scamander"}, "edited": false, "score": 3, "creation_date": 1508211652, "post_id": 46782026, "comment_id": 80510525, "body": "Sorry missed that requirement... <code>awk  &#39;BEGIN { OFS=&quot;\\t&quot; } { $4 = substr($4, 8); print }&#39;</code>"}, {"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "edited": false, "score": 0, "creation_date": 1508219870, "post_id": 46782026, "comment_id": 80513045, "body": "or even more concise: <code>awk &#39;BEGIN{OFS=&quot;\\t&quot;}{$4 = substr($4,8)}1&#39;</code>"}, {"owner": {"reputation": 1489, "user_id": 2371840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f6ec83c6c9cc12729498b7902f3777?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Rourke", "link": "https://stackoverflow.com/users/2371840/michael-rourke"}, "edited": false, "score": 1, "creation_date": 1508232178, "post_id": 46782026, "comment_id": 80519731, "body": "I believe clarity is more important than conciseness."}], "tags": [], "owner": {"reputation": 1489, "user_id": 2371840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f6ec83c6c9cc12729498b7902f3777?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Rourke", "link": "https://stackoverflow.com/users/2371840/michael-rourke"}, "is_accepted": false, "score": 6, "last_activity_date": 1508210866, "creation_date": 1508210866, "answer_id": 46782026, "question_id": 46781900, "link": "https://stackoverflow.com/questions/46781900/how-to-remove-n-characters-from-a-specific-column-using-sed-awk-perl/46782026#46782026", "title": "How to remove n characters from a specific column using sed/awk/perl", "body": "<pre><code> awk  '{ $4 = substr($4, 8); print }'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3154, "user_id": 8391698, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b857f1ae689854a47bbfd4f2b2d4fa20?s=128&d=identicon&r=PG&f=1", "display_name": "scamander", "link": "https://stackoverflow.com/users/8391698/scamander"}, "edited": false, "score": 0, "creation_date": 1508211432, "post_id": 46782057, "comment_id": 80510468, "body": "Note the output needs to be also TAB separated. How can I modify?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3154, "user_id": 8391698, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b857f1ae689854a47bbfd4f2b2d4fa20?s=128&d=identicon&r=PG&f=1", "display_name": "scamander", "link": "https://stackoverflow.com/users/8391698/scamander"}, "edited": false, "score": 0, "creation_date": 1508213197, "post_id": 46782057, "comment_id": 80510902, "body": "@yaffle  Corrected.  Also removed the unneeded <code>^</code> anchor; matching starts there"}, {"owner": {"reputation": 360, "user_id": 404368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a897d60caedf5932405ad21691344c?s=128&d=identicon&r=PG", "display_name": "sborsky", "link": "https://stackoverflow.com/users/404368/sborsky"}, "edited": false, "score": 0, "creation_date": 1508213482, "post_id": 46782057, "comment_id": 80510979, "body": "alternatively: <code>perl -anE&#39;$&quot; = &quot;\\t&quot;; $F[3] =~ s&#47;^.{7}&#47;&#47;; say &quot;@F&quot;&#39; data.txt</code>"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1508522527, "last_edit_date": 1508522527, "creation_date": 1508211181, "answer_id": 46782057, "question_id": 46781900, "link": "https://stackoverflow.com/questions/46781900/how-to-remove-n-characters-from-a-specific-column-using-sed-awk-perl/46782057#46782057", "title": "How to remove n characters from a specific column using sed/awk/perl", "body": "<pre><code>perl -anE'$F[3] =~ s/.{7}//; say join \"\\t\", @F' data.txt\n</code></pre>\n\n<p>or </p>\n\n<pre><code>perl -anE'substr $F[3],0,7,\"\"; say join \"\\t\", @F' data.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1508215542, "creation_date": 1508215542, "answer_id": 46782638, "question_id": 46781900, "link": "https://stackoverflow.com/questions/46781900/how-to-remove-n-characters-from-a-specific-column-using-sed-awk-perl/46782638#46782638", "title": "How to remove n characters from a specific column using sed/awk/perl", "body": "<p>With <code>sed</code></p>\n\n<pre><code>$ sed -E 's/^(([^\\t]+\\t){3}).{7}/\\1/' myfile.txt\nchr1    3119713 3119728 Bach1Mafk   839 +\nchr1    3119716 3119731 MAFNFE2 860 +\nchr1    3120036 3120051 Nfe2l2  866 +\n</code></pre>\n\n<ul>\n<li><code>-E</code> use extended regular expressions, to avoid having to use <code>\\</code> for <code>(){}</code>. Some <code>sed</code> versions might need <code>-r</code> instead of <code>-E</code></li>\n<li><code>^(([^\\t]+\\t){3})</code> capture the first three columns, easy to change number of columns if needed</li>\n<li><code>.{7}</code> characters to delete from 4th column</li>\n<li><code>\\1</code> the captured columns</li>\n<li>Use <code>-i</code> option for <a href=\"https://stackoverflow.com/questions/5694228/sed-in-place-flag-that-works-both-on-mac-bsd-and-linux\">in-place editing</a></li>\n</ul>\n\n<p><br>\nWith <code>perl</code> you can use <code>\\K</code> for variable length positive lookbehind</p>\n\n<pre><code>perl -pe 's/^([^\\t]+\\t){3}\\K.{7}//' myfile.txt\n</code></pre>\n"}], "owner": {"reputation": 3154, "user_id": 8391698, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b857f1ae689854a47bbfd4f2b2d4fa20?s=128&d=identicon&r=PG&f=1", "display_name": "scamander", "link": "https://stackoverflow.com/users/8391698/scamander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2130, "favorite_count": 0, "accepted_answer_id": 46782057, "answer_count": 3, "score": 1, "last_activity_date": 1508522527, "creation_date": 1508209930, "last_edit_date": 1508211350, "question_id": 46781900, "link": "https://stackoverflow.com/questions/46781900/how-to-remove-n-characters-from-a-specific-column-using-sed-awk-perl", "title": "How to remove n characters from a specific column using sed/awk/perl", "body": "<p>I have the following tab delimited data:</p>\n\n<pre><code>chr1    3119713 3119728 MA05911Bach1Mafk    839 +\nchr1    3119716 3119731 MA05011MAFNFE2  860 +\nchr1    3120036 3120051 MA01502Nfe2l2   866 +\n</code></pre>\n\n<p>What I want to do is to remove 7 characters from 4th column. \nResulting in </p>\n\n<pre><code>chr1    3119713 3119728 Bach1Mafk   839 +\nchr1    3119716 3119731 MAFNFE2 860 +\nchr1    3120036 3120051 Nfe2l2  866 +\n</code></pre>\n\n<p>How can I do that?\nNote the output needs to be also TAB separated.</p>\n\n<p>I'm stuck with the following code, which replaces from the first\ncolumn onward, which I don't want</p>\n\n<pre><code>sed 's/^.\\{7\\}//' myfile.txt\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1508210320, "post_id": 46781792, "comment_id": 80510200, "body": "This is a duplicate of <i>your own</i> <a href=\"https://stackoverflow.com/a/46697927/4653379\">recent question</a>.  Can you explain why ask again what has been answered?"}, {"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1508210818, "post_id": 46781792, "comment_id": 80510325, "body": "I rewrote all the codes"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1508212780, "post_id": 46781792, "comment_id": 80510793, "body": "(1) Do you really mean to use prototypes?  Why not <code>sub compareHashes { ... }</code>? (2) Repeated mistake explained in the answer to your previous question, linked above (3) You compare the count of elements, using the wrong <code>ne</code> operator (should be <code>==</code>), <i>inside the loop</i> so it&#39;s calculated every time through for no reason (4) I don&#39;t know what <code>my $key1 (keys %$hash1)</code> is supposed to mean  (5) The comparison of values for one set keys isn&#39;t enough since one hash may have keys that the other doesn&#39;t; again, study the answer to your previous question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1508213079, "post_id": 46781792, "comment_id": 80510869, "body": "I strongly suggest to go over a nice book (like &quot;<i>Learning Perl</i>&quot;) or a well-regarded modern tutorial, first.  It should not take more than a few days or a week to get some basics in order."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1508241108, "post_id": 46782586, "comment_id": 80525159, "body": "<i>@_ is the default list</i> - well <code>@_</code> is the default argument for <code>shift()</code> and friends when called from within a subroutine. Is that what you meant? And it&#39;s not a list - it&#39;s an array."}, {"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508254019, "post_id": 46782586, "comment_id": 80534187, "body": "I have additional questions: 1. what does the code of line 41~46 do? I tried to delete this chunk of code, everything is the same except I get a warning &quot;use of uninitialized value $value2 in string ne at compareHashes.pl line 47.&quot; Why does it happen? 2. what is the purpose of &quot;return&quot;? Thanks! Sorry I can&#39;t figure out a way to put codes in comment"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508291896, "post_id": 46782586, "comment_id": 80550130, "body": "@WenjiaZhai, I added a bunch of comments to the code to answer your questions.  Generally it is a good practice to use the <code>return</code> statement in every function.  This saves you from performing unnecessary computation, here for example, once the hashes are different, you don&#39;t need to check further."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1508292080, "post_id": 46782586, "comment_id": 80550187, "body": "Also, adding an explicit return value allows you to rename your function to something like <code>hashes_are_equal</code> and then use your function as <code>if ( hashes_are_equal ) { ... } else { ... }</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1508292150, "post_id": 46782586, "comment_id": 80550202, "body": "To put code in these comments, use backticks `` around your code block without leading/trailing spaces."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1508292283, "post_id": 46782586, "comment_id": 80550231, "body": "FYI, if you are planing to determine if two more complicated data structures are equivalent, you should consider using the <code>is_deeply</code> function from Test::More"}, {"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508300896, "post_id": 46782586, "comment_id": 80552248, "body": "@xxfelixxx, thank you, I need some time to understand all of it, but it&#39;s a good lesson. :)"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 4, "last_activity_date": 1508291776, "last_edit_date": 1508291776, "creation_date": 1508215233, "answer_id": 46782586, "question_id": 46781792, "link": "https://stackoverflow.com/questions/46781792/how-to-use-reference-of-hashes-in-perl/46782586#46782586", "title": "how to use reference of hashes in perl", "body": "<p>I would recommend reading the following excellent perl documentation for the general idea:</p>\n\n<p><a href=\"https://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc perlreftut</a></p>\n\n<p>A slight simplification of your code, getting the references to work:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw(say);\n\n# { ... } creates a hash reference, you can pass this to a function directly\nmy $hash1_r = { ITALY =&gt; \"ROME\",  FRANCE =&gt; \"PARIS\" };\nmy $hash2_r = { ITALY =&gt; \"MILAN\", FRANCE =&gt; \"PARIS\" };\nmy $hash3_r = { ITALY =&gt; \"ROME\"                     };\nmy $hash4_r = { SPAIN =&gt; \"ROME\",  FRANCE =&gt; \"PARIS\" };\n\nsub compareHashes {\n    my ($hash1, $hash2) = @_;   # @_ is the default array\n\n    # You can just use hash references directly by prepending with a '%' symbol\n    # when you need the actual hash, such as when using 'keys', 'values', 'each', etc.\n    # You can access the elements by using an arrow: $hashref-&gt;{'key_name'}\n\n    say \"-\"x40;\n    say \"The first hash:\";\n    while ( my ($key, $value) = each %$hash1 ) {\n        say \"$key =&gt; $value\";\n    }\n\n    say \"The second hash:\";\n    while ( my ($key, $value) = each %$hash2 ) {\n        say \"$key =&gt; $value\";\n    }\n\n    my (@keys1) = keys %$hash1;\n    my ($nkey1) = scalar @keys1;\n\n    my (@keys2) = keys %$hash2;\n    my ($nkey2) = scalar @keys2;\n    if ($nkey1 != $nkey2) {\n        say \"=&gt; unequal number of keys: $nkey1 vs $nkey2\";\n        return 0;  # False, the hashes are different, we don't need to test any further\n    }\n\n    # Create a new hash using all of the keys from hash1 and hash2\n    # The effect is to eliminate duplicates, as repeated keys, i.e.\n    # common to both hash1 and hash2 will just produce one key in %uniq\n    # You can use the 'uniq' function from List::MoreUtils to achieve\n    # the same thing.      \n    # In perl, using a hash to eliminate duplicates, or test for set\n    # membership is a very common idiom.\n    # The 'map' function iterates over a list and performs the \n    # operation inside the curly braces {...}, returning all\n    # of the results.\n    # For example:  map { 2 * $_ } ( 1,2,3 )     # ( 2,4,6 )\n    # If you assign a list to a hash, it takes pairs of values\n    # and turns them into key/value pairs\n    # The '=&gt;' is equivalent to a ',' but makes the intent easier\n    # to understand\n    my %uniq = map { $_ =&gt; 1 } ( @keys1, @keys2 );\n    my $nuniqkey = scalar keys %uniq;\n    if ($nkey1 != $nuniqkey) {\n        say \"=&gt; unequal set of keys\";\n        return 0; # False, the hashes are different, we don't need to test any further\n    }\n\n    # Now test the values\n    # If we neglected to check for uniqueness in the above block,\n    # we would run into the situation where hash1 might have a key\n    # that hash2 doesn't have (and vice-versa).  This would trigger a\n    # 'use of uninitialized value' warning in the comparison operator\n    for my $key (@keys1) {\n        my ($value1) = $hash1-&gt;{$key};\n        my ($value2) = $hash2-&gt;{$key};\n        if ($value1 ne $value2) {\n            say \"=&gt; unequal values for key '$key' : $value1 vs $value2\";\n            return 0; # False, the hashes are different, we don't need to test any further\n        }\n    }\n\n    say \"=&gt; equal, yay!\";\n    return 1; # True, the hashes are equal after all!\n}\n\ncompareHashes($hash1_r, $hash1_r);\ncompareHashes($hash1_r, $hash2_r);\ncompareHashes($hash1_r, $hash3_r);\ncompareHashes($hash1_r, $hash4_r);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508248007, "post_id": 46787335, "comment_id": 80529927, "body": "OK first of all, thank you for your valuable advice. I&#39;m thinking that I use %$hash1 and %$hash2 to define the subroutine, then the subroutine will actually use the hashes in the call later. Is it wrong?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508248268, "post_id": 46787335, "comment_id": 80530131, "body": "As I mentioned in my answer, Perl has recently introduced <a href=\"https://www.effectiveperlprogramming.com/2015/04/use-v5-20-subroutine-signatures/\" rel=\"nofollow noreferrer\">function signatures</a> which do approximately what you want. But they aren&#39;t in very common use yet. What you should do is to define your sub without prototypes or signatures (<code>sub compareHashes { ... }</code>) and then use the standard Perl syntax to read the parameters inside the subroutine - <code>my ($hash1, $hash2) = @_;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1508248332, "post_id": 46787335, "comment_id": 80530180, "body": "But, really, the most important thing here is to find yourself a good tutorial and to take time out to study it. Because currently you seem to be learning Perl by trying random syntax - and that&#39;s really not a good idea."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1508233980, "creation_date": 1508233980, "answer_id": 46787335, "question_id": 46781792, "link": "https://stackoverflow.com/questions/46781792/how-to-use-reference-of-hashes-in-perl/46787335#46787335", "title": "how to use reference of hashes in perl", "body": "<p>You have a good answer that you have already accepted. But for people finding this question in the future, I think it's worth explaining some of the errors you have made.</p>\n\n<p>You start by defining some anonymous hashes. That's fine.</p>\n\n<pre><code>my $hash1_r = {\n  ITALY =&gt; \"ROME\",\n  FRANCE =&gt; \"PARIS\"\n};\nmy $hash2_r = {\n  ITALY =&gt; \"MILAN\",\n  FRANCE =&gt; \"PARIS\"\n};\nmy $hash3_r = {\n  ITALY =&gt; \"ROME\"\n};\nmy $hash4_r = {\n  SPAIN =&gt; \"ROME\",\n  FRANCE =&gt; \"PARIS\"\n};\n</code></pre>\n\n<p>I'm now going to skip to where you call your subroutine (I'll get back to the subroutine itself soon).</p>\n\n<pre><code>compareHashes (%$hash1_r, %$hash1_r);\ncompareHashes (%$hash1_r, %$hash2_r);\ncompareHashes (%$hash1_r, %$hash3_r);\ncompareHashes (%$hash1_r, %$hash4_r);\n</code></pre>\n\n<p>One of the most important uses for references is to enable you to pass multiple arrays and hashes into a subroutine without them being flattened into a single array. As you have hash references already, it would make sense to pass those references into the subroutine. But you don't do that. You dereference your hashes which means you send the actual hashes into the subroutine. That means that, for example, your first call passes in the list <code>('ITALY', 'ROME', 'FRANCE', 'PARIS', 'ITALY', 'MILAN', 'FRANCE', 'PARIS')</code>. And there is no way for the code inside your subroutine to separate that list into two hashes.</p>\n\n<p>Now, let's look at the subroutine itself. You start by defining a prototype for the subroutine. In most cases, prototypes are unnecessary. In many cases, they change the code behaviour in hard-to-understand ways. No Perl expert would recommend using prototypes in this code. And, as your error message says, you get the prototype wrong.</p>\n\n<pre><code>sub compareHashes(%$hash1, %$hash2){\n</code></pre>\n\n<p>I'm not sure what you were trying to do with this prototype. Perhaps it's not a prototype at all - perhaps it's a <a href=\"https://www.effectiveperlprogramming.com/2015/04/use-v5-20-subroutine-signatures/\" rel=\"nofollow noreferrer\">function signature</a> (but if it was, you would need to turn the feature on).</p>\n\n<p>On the next line, you declare two variables. Variables that you never give values to.</p>\n\n<pre><code>my $hash1; my $hash2;   \n</code></pre>\n\n<p>There are then two very confused <code>for</code> loops.</p>\n\n<pre><code>for (my $i =0; $i &lt; keys %$hash1; $i++){\n    say \"The first hash:\";\n    say \"keys %$hash1\\t, values %$hash1\";\n}\n</code></pre>\n\n<p><code>$hash1</code> has no value. So <code>%$hash1</code> is zero (the hash has no keys) and the loop isn't executed. But we're not missing much as the loop body just prints the same uninitialised values each time.</p>\n\n<p>And you could simplify your <code>for</code> loop by making it a <code>foreach</code>-style loop.</p>\n\n<pre><code>foreach my $i (0 .. keys %$hash1 - 1) { ... }\n</code></pre>\n\n<p>Or (given that you don't use <code>$i</code> at all:</p>\n\n<pre><code>foreach (1 .. keys %$hash1) { ... }\n</code></pre>\n\n<p>After another, equally ineffective, <code>for</code> loop for <code>$hash2</code>, you try to compare your two hashes.</p>\n\n<pre><code>for (keys %$hash1) {\n    if (keys %$hash1 ne keys %$hash2){\n        say \"Two above hashes are not equal\";\n    }elsif (my $key1 (keys %$hash1) ne my $key2 (keys %$hash2)){\n        say \"Two above hashes are not equal\";\n    }elsif (%$hash1-&gt;{$_} ne %$hash2-&gt;{$_}){\n        say \"Two above hashes are not equal\";\n    }else {\n        say \"Two above hashes are equal\";\n    }\n}\n</code></pre>\n\n<p>I have no idea at all why this is all in a <code>for</code> loop. but your comparisons do nothing to actually compare the values in the hash. All you are comparing is the <strong>number of keys</strong> in the hashes (which are always going to be equal here - as your hashes are always empty).</p>\n\n<p>All in all, this is the work who is extremely confused about how hashes, subroutines and references work in Perl. I would urge you to stop what you are doing and take the time to work through a good reference book like <em>Learning Perl</em> followed by <em>Intermediate Perl</em> before you continue down your current route and just confuse yourself more.</p>\n"}], "owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 46782586, "answer_count": 2, "score": 1, "last_activity_date": 1508291776, "creation_date": 1508208941, "question_id": 46781792, "link": "https://stackoverflow.com/questions/46781792/how-to-use-reference-of-hashes-in-perl", "title": "how to use reference of hashes in perl", "body": "<p>I'm trying to learn the reference function, but I can't figure out a way to put hashes in reference at the same time. I want to write a subroutine that will take two simple hash references as arguments and to check whether these two hashes are equal or not. My code is:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature qw(say);\n\nmy $hash1_r = {ITALY =&gt; \"ROME\",\n            FRANCE =&gt; \"PARIS\"};\nmy $hash2_r = {ITALY =&gt; \"MILAN\",\n            FRANCE =&gt; \"PARIS\"};\nmy $hash3_r = {ITALY =&gt; \"ROME\"};\nmy $hash4_r = {SPAIN =&gt; \"ROME\",\n            FRANCE =&gt; \"PARIS\"};\n\n\nsub compareHashes(%$hash1, %$hash2){\n    my $hash1; my $hash2;   \n    for (my $i =0; $i &lt; keys %$hash1; $i++){\n        say \"The first hash:\";\n        say \"keys %$hash1\\t, values %$hash1\";\n    }\n    for (my $i =0; $i &lt; keys %$hash2; $i++){\n            say \"The second hash:\";\n            say \"keys %$hash2\\t, values %$hash2\";\n    }\n\n    for (keys %$hash1) {\n        if (keys %$hash1 ne keys %$hash2){\n            say \"Two above hashes are not equal\";\n        }elsif (my $key1 (keys %$hash1) ne my $key2 (keys %$hash2)){\n            say \"Two above hashes are not equal\";\n        }elsif (%$hash1-&gt;{$_} ne %$hash2-&gt;{$_}){\n            say \"Two above hashes are not equal\";\n        }else {\n            say \"Two above hashes are equal\";\n        }\n    }\n}\n\ncompareHashes (%$hash1_r, %$hash1_r);\ncompareHashes (%$hash1_r, %$hash2_r);\ncompareHashes (%$hash1_r, %$hash3_r);\ncompareHashes (%$hash1_r, %$hash4_r);\n</code></pre>\n\n<p>However, I got those errors:</p>\n\n<pre><code>Prototype after '%' for main::compareHashes : %$hash1,%$hash2 at compareHashes2.pl line 16.\nIllegal character in prototype for main::compareHashes : %$hash1,%$hash2 at compareHashes2.pl line 16.\nsyntax error at compareHashes2.pl line 30, near \"$key1 (\"\nsyntax error at compareHashes2.pl line 32, near \"}elsif\"\nGlobal symbol \"$hash2\" requires explicit package name at compareHashes2.pl line 32.\n</code></pre>\n\n<p>Any solutions? Any help will be greatly appreciated!</p>\n"}, {"tags": ["perl", "nginx", "utf-8", "character-encoding"], "answers": [{"tags": [], "owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "is_accepted": true, "score": 1, "last_activity_date": 1508210142, "creation_date": 1508210142, "answer_id": 46781924, "question_id": 46781390, "link": "https://stackoverflow.com/questions/46781390/character-encoding-with-nginx-and-perl/46781924#46781924", "title": "Character encoding with nginx and perl", "body": "<p>OK, so I figured it out. After the string is url decoded, it needs to be encode as utf-8. First load the Encode module:</p>\n\n<pre><code>use Encode 'encode';\n</code></pre>\n\n<p>Then encode the string:</p>\n\n<pre><code>$from_url = encode('UTF-8', $from_url);\n</code></pre>\n\n<p>Easy peasy.</p>\n"}], "owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 46781924, "answer_count": 1, "score": 1, "last_activity_date": 1508210142, "creation_date": 1508205478, "question_id": 46781390, "link": "https://stackoverflow.com/questions/46781390/character-encoding-with-nginx-and-perl", "title": "Character encoding with nginx and perl", "body": "<p>I'm not sure if this is a Perl issue, an Nginx issue, or an HTTP issue. I know there are a bazillion questions about character encoding, but I just can't figure this out. Anyway, here's the problem.</p>\n\n<p>My web site pulls data from two different type of sources. Some of those sources are utf-8 files. Some of them are files which contain URL encoded data. The problem is that I can't figure out how to output the characters from both of those sources without getting funky characters in the web browser.</p>\n\n<p>The following Perl script demonstrates the problem. You can see this script live and in action at <a href=\"https://www.mikobiko.com/demo.pl\" rel=\"nofollow noreferrer\">https://www.mikobiko.com/demo.pl</a></p>\n\n<pre><code>#!/usr/bin/perl -wT\nuse strict;\nuse CGI;\n\n# variables\nmy ($in, $from_file, $from_url);\n\n# HTTP header\nprint qq|Content-type: text/html; charset=utf-8\\n\\n|;\n\n# from utf-8 file\nopen($in, '&lt;', './utf-8.txt');\n$in or die $!;\n($from_file) = &lt;$in&gt;;\nprint \"&lt;h1&gt;from utf-8 file&lt;/h1&gt;\\n\";\nprint \"&lt;p&gt;character: \", $from_file, \"&lt;/p&gt;\\n\";\nprint '&lt;p&gt;length: ', length($from_file), \"&lt;/p&gt;\\n\";\n\n# from url encoded\nprint \"&lt;h1&gt;from url encoded&lt;/h1&gt;\\n\";\n$from_url = '%F1';\n$from_url = CGI::unescape($from_url);\nprint \"&lt;p&gt;character: \", $from_url, \"&lt;/p&gt;\\n\";\nprint '&lt;p&gt;length: ', length($from_url), \"&lt;/p&gt;\\n\";\n</code></pre>\n\n<p>Here's what this script does. It outputs a standard Content-type header, including indicating that the character set is utf-8.</p>\n\n<p>Then it slurps in a utf-encoded file that contains the character \u00f1 (an \"n\" with a tilde over it). Then it outputs that character. You can see the source file itself at <a href=\"https://www.mikobiko.com/utf-8.txt\" rel=\"nofollow noreferrer\">https://www.mikobiko.com/utf-8.txt</a> . Here's the linux \"file\" command output for that file:</p>\n\n<pre><code>utf-8.txt: UTF-8 Unicode text, with no line terminators\n</code></pre>\n\n<p>Then the script decodes the URL character string for \u00f1, then outputs that.</p>\n\n<p>Here's a screen shot of what the browser shows. This screenshot is from Chrome, but Firefox does the same thing. The character that is from the utf-8 file is displayed with the little question mark symbol.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3oXrv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3oXrv.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I remove the \"charset=utf-8\" part of the Content-type, then the problem is reversed, and url decoded character is displayed funky.</p>\n\n<p>Here's some system info:</p>\n\n<p>nginx: nginx/1.10.3 (Ubuntu)</p>\n\n<p>Perl: perl 5, version 22, subversion 1 (v5.22.1)</p>\n\n<p>Linux on the server:</p>\n\n<pre><code>Distributor ID: Ubuntu\nDescription:    Ubuntu 16.04.2 LTS\nRelease:        16.04\nCodename:       xenial\n</code></pre>\n\n<p>Please let me know if there's any other info I can provide to help solve this problem. Thanks!</p>\n"}, {"tags": ["perl", "taint"], "comments": [{"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1508189267, "post_id": 46779239, "comment_id": 80504595, "body": "I will update the question to include those lines. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1508189430, "post_id": 46779283, "comment_id": 80504665, "body": "I do have <code>use lib</code>. What do I have to do? Just commenting out that line would cause problems."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1508189726, "post_id": 46779283, "comment_id": 80504795, "body": "@RedCricket it&#39;s probably the FindBin. You have to untaint <code>$Bin</code>."}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1508190781, "post_id": 46779283, "comment_id": 80505280, "body": "I guess I do not understand how to untaint $Bin. I have updated by question can you please take a look and let me know what I am doing wrong?"}], "tags": [], "owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "is_accepted": true, "score": 4, "last_activity_date": 1508188916, "last_edit_date": 1592644375, "creation_date": 1508188847, "answer_id": 46779283, "question_id": 46779239, "link": "https://stackoverflow.com/questions/46779239/i-dont-understand-the-perl-taint-mode-error-message/46779283#46779283", "title": "I don&#39;t understand the Perl Taint mode error message", "body": "<p>Do you have a <code>use lib</code> statement where an insecure variable is added to the include path?</p>\n<p><a href=\"https://perldoc.perl.org/perlsec.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlsec.html</a></p>\n<blockquote>\n<p>Note that if a tainted string is added to <code>@INC</code>, the following problem will be reported:</p>\n<pre><code>Insecure dependency in require while running with -T switch\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 46779283, "answer_count": 1, "score": 0, "last_activity_date": 1508190726, "creation_date": 1508188595, "last_edit_date": 1508190726, "question_id": 46779239, "link": "https://stackoverflow.com/questions/46779239/i-dont-understand-the-perl-taint-mode-error-message", "title": "I don&#39;t understand the Perl Taint mode error message", "body": "<p>I have some old Perl code I have been told is vulnerable to Cross site scripting attacks or SQL injection attacks.  I figured I'd turn on taint mode by changing the shebang from <code>#!/usr/local/bin/perl</code> to <code>#!/usr/local/bin/perl -T</code> and now I get this error message:</p>\n\n<pre><code>Insecure dependency in require while running with -T switch at &lt;big long path&gt;/main.cgi line 26.\n</code></pre>\n\n<p>The code looks like this:</p>\n\n<pre><code>  1 #!/usr/local/bin/perl  -T\n.\n.\n.\n 12 use strict;\n 13\n 14 use vars qw( %opt $VERSION );\n 15\n 16 use CGI qw/:standard *table start_ul/;\n 17 use CGI qw(:debug);\n 18 use CGI::Carp qw( fatalsToBrowser );\n 19 #use CGI::Pretty qw( :html3 );\n 20 $CGI::Pretty::INDENT = \"    \";\n 21 use Tie::IxHash;\n 22 use FindBin qw($Bin); \n 23 use lib \"$Bin/../../lib\";\n 24 use lib \"$Bin/../lib\";\n 25\n 26 use Common::Config;\n</code></pre>\n\n<p>The Common::Config is has this ownership and permissions:</p>\n\n<pre><code>$ ls -l lib/Common/Config.pm\n-r--r--r--. 1 someguy example 5840 Oct  9 20:08 lib/Common/Config.pm\n</code></pre>\n\n<p>I tried changing the ownership to <code>apache</code> but I still get the taint error message.</p>\n\n<p>UPDATE:</p>\n\n<p>I have tried to untaint my <code>$Bin</code> variable like so:</p>\n\n<pre><code>use FindBin qw($Bin);           # Where are we ?\nif ($Bin =~ /^([-\\@\\w.]+)$/) {\n        $Bin = $1;                      # $data now untainted\n} else {\n        die \"Bad data in '$Bin'\";       # log this somewhere\n}\n</code></pre>\n\n<p>But I still get the taint error about <code>use Common::Config;</code></p>\n"}, {"tags": ["regex", "perl", "vim", "sed"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1508187495, "post_id": 46778968, "comment_id": 80503795, "body": "@ikegami OP did say &quot;Linux regex&quot;. :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508187560, "post_id": 46778968, "comment_id": 80503824, "body": "I wasn&#39;t suggesting anything should be changed."}, {"owner": {"reputation": 132, "user_id": 5330756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b6fda795429c11368b81b376a18d9d?s=128&d=identicon&r=PG&f=1", "display_name": "rdbeni0", "link": "https://stackoverflow.com/users/5330756/rdbeni0"}, "edited": false, "score": 0, "creation_date": 1508187812, "post_id": 46778968, "comment_id": 80503946, "body": "thanks, it`s working. Last question - do you know how to do it in vim ? :) I have error:          E486: Pattern not found: (?&lt;!\\r)\\n"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1508187957, "last_edit_date": 1508187957, "creation_date": 1508187386, "answer_id": 46778968, "question_id": 46778928, "link": "https://stackoverflow.com/questions/46778928/linux-regex-remove-new-line-but-keep-cr-new-line/46778968#46778968", "title": "Linux regex - remove &quot;new line&quot;, but keep &quot;CR + new line&quot;?", "body": "<p>You can do both steps at once in Perl:</p>\n\n<pre><code>perl -pe 's/(?&lt;!\\r)\\n//; s/\\r$//'\n</code></pre>\n\n<p>(Remove newline if not preceeded by carriage return; remove carriage return at end of line.)</p>\n\n<p>Alternatively:</p>\n\n<pre><code>perl -pe 'chomp; s/\\r\\z/\\n/'\n</code></pre>\n\n<p>(Remove trailing newline; replace final carriage return by newline.)</p>\n\n<p>The first version can also be adapted to vim:</p>\n\n<pre><code>:%s/\\r\\@&lt;!\\n\n:%s/\\r$\n</code></pre>\n\n<p>(Disclaimer: I haven't tested this.)</p>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1508205812, "post_id": 46779636, "comment_id": 80509090, "body": "You should mention that&#39;s GNU awk only for multi-char RS."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 2, "last_activity_date": 1508237564, "last_edit_date": 1508237564, "creation_date": 1508190630, "answer_id": 46779636, "question_id": 46778928, "link": "https://stackoverflow.com/questions/46778928/linux-regex-remove-new-line-but-keep-cr-new-line/46779636#46779636", "title": "Linux regex - remove &quot;new line&quot;, but keep &quot;CR + new line&quot;?", "body": "<p>A solution with GNU awk (using the record separator):</p>\n\n<pre><code>awk 'BEGIN{RS=ORS=\"\\r\\n\"}{gsub(/\\n/,\"\")}1' test.txt\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 5330756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b6fda795429c11368b81b376a18d9d?s=128&d=identicon&r=PG&f=1", "display_name": "rdbeni0", "link": "https://stackoverflow.com/users/5330756/rdbeni0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 1, "accepted_answer_id": 46778968, "answer_count": 2, "score": 1, "last_activity_date": 1508237564, "creation_date": 1508187194, "last_edit_date": 1508187464, "question_id": 46778928, "link": "https://stackoverflow.com/questions/46778928/linux-regex-remove-new-line-but-keep-cr-new-line", "title": "Linux regex - remove &quot;new line&quot;, but keep &quot;CR + new line&quot;?", "body": "<p>cat -ev ./test.txt</p>\n\n<pre><code>1 line with \"carriage return \\r\" and \"new line \\n\"   ^M$\n2 line only with \"new line \\n\"   $\n3  ^M$\n4 line with \"carriage return \\r\" and \"new line \\n\"   ^M$\n5 line with \"carriage return \\r\" and \"new line \\n\"   ^M$\n6 line only with \"new line \\n\"  $\n7 line only with \"new line \\n\"  $\n8 line with \"carriage return \\r\" and \"new line \\n\"   ^M$\n</code></pre>\n\n<p>I would like to remove new line char \\n, but <strong>only in lines without CR</strong>.</p>\n\n<p>So output should be something like this:</p>\n\n<pre><code>1 line with \"carriage return \\r\" and \"new line \\n\"   ^M$\n2 line only with \"new line \\n\"   3  ^M$\n4 line with \"carriage return \\r\" and \"new line \\n\"   ^M$\n5 line with \"carriage return \\r\" and \"new line \\n\"   ^M$\n6 line only with \"new line \\n\"  7 line only with \"new line \\n\"  8 line with \"carriage return \\r\" and \"new line \\n\"   ^M$\n</code></pre>\n\n<p>And after that, it`s time for removing CR.\nFinal output:   </p>\n\n<pre><code>1 line with \"carriage return \\r\" and \"new line \\n\"   $\n2 line only with \"new line \\n\"   3  $\n4 line with \"carriage return \\r\" and \"new line \\n\"   $\n5 line with \"carriage return \\r\" and \"new line \\n\"   $\n6 line only with \"new line \\n\"  7 line only with \"new line \\n\"  8 line with \"carriage return \\r\" and \"new line \\n\"   $\n</code></pre>\n\n<p>Last point is easy, for example in vim: <strong>%s@\\r@@gc</strong> ... there is a lot of tips in internet \"how to remove CR\".</p>\n\n<p>But my problem is with beginng - how to remove \"\\n\" in perl and/or sed, but only with lines without CR ?</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 2498, "user_id": 120681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ea6102e2bc774423cc38cf9951cc3a63?s=128&d=identicon&r=PG", "display_name": "stephenmm", "link": "https://stackoverflow.com/users/120681/stephenmm"}, "edited": false, "score": 0, "creation_date": 1557341444, "post_id": 46778215, "comment_id": 98736158, "body": "For such a complicated set of answers I would expect the question to have more up-votes. Has the situation changed since the original answers or is all development now going to Perl6?"}, {"owner": {"reputation": 2498, "user_id": 120681, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ea6102e2bc774423cc38cf9951cc3a63?s=128&d=identicon&r=PG", "display_name": "stephenmm", "link": "https://stackoverflow.com/users/120681/stephenmm"}, "edited": false, "score": 0, "creation_date": 1557341978, "post_id": 46778215, "comment_id": 98736382, "body": "Update: Seems like cpan has been improved with <a href=\"http://www.cpan.org/modules/INSTALL.html\" rel=\"nofollow noreferrer\">cpanm</a> <code>cpan App::cpanminus</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1508187027, "post_id": 46778604, "comment_id": 80503570, "body": "Thanks, this is helpful. Regarding this: &quot;What people do instead is to configure ExtUtils::MakeMaker, Module::Build, etc to install into a user&#39;s home directory&quot; Does local::lib make this redundant?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1508187192, "post_id": 46778604, "comment_id": 80503657, "body": "@Stephen Well, most people use local::lib to do it. :-) local::lib is at its core just an automated way to create some directories and set a handful of environment variables correctly. So yes: if you use local::lib (by adding the magic line to your <code>.bashrc</code> or equivalent), you don&#39;t need to configure anything else by hand."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 5, "last_activity_date": 1508187057, "last_edit_date": 1508187057, "creation_date": 1508185773, "answer_id": 46778604, "question_id": 46778215, "link": "https://stackoverflow.com/questions/46778215/where-does-cpan-install-modules/46778604#46778604", "title": "Where does CPAN install modules?", "body": "<p>CPAN doesn't actually install files. It runs the install script embedded in each distribution, which then performs the actual install.</p>\n\n<p>For distributions using <a href=\"https://metacpan.org/pod/ExtUtils::MakeMaker\" rel=\"nofollow noreferrer\">ExtUtils::MakeMaker</a>, the defaults are documented here: <a href=\"https://metacpan.org/pod/ExtUtils::MakeMaker#make-install\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/ExtUtils::MakeMaker#make-install</a> (and the default value of <code>INSTALLDIRS</code> is <code>site</code>). For <a href=\"https://metacpan.org/pod/Module::Build\" rel=\"nofollow noreferrer\">Module::Build</a>, see <a href=\"https://metacpan.org/pod/Module::Build#INSTALL-PATHS\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Module::Build#INSTALL-PATHS</a>.</p>\n\n<p>When the documentation talks about <code>$Config{foo}</code> or <code>%Config</code>, it means the <code>%Config</code> variable provided by <a href=\"https://metacpan.org/pod/Config\" rel=\"nofollow noreferrer\">the Config module</a>. The value of <code>$Config{foo}</code> can also be inspected by running <code>perl -V:foo</code>.</p>\n\n<p>(If you think this seems unnecessarily complicated, you're right.)</p>\n\n<p>The short version is that perl has multiple \"system directories\", one of which is for \"site specific\" modules and thus used as the default installation target. You are right that this is a single directory (per perl install), which doesn't mesh well with a multi-user system: It is shared across all users, and you need root permissions to install modules (and doing so might upgrade/override modules from system packages, which is a bad idea).</p>\n\n<p>What people do instead is to configure ExtUtils::MakeMaker, Module::Build, etc to install into a user's home directory. This can be done with environment variables. Then they tell perl to add this directory to <code>@INC</code>, so modules can actually be found and loaded. This is done with another environment variable, <code>PERL5LIB</code>. (<code>PERL5LIB</code> doesn't affect installation, it's purely used for loading.)</p>\n\n<p>All of the above is automated and encapsulated in <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a>. (local::lib can also be used to e.g. create a per-project module subdirectory.)</p>\n\n<p>The CPAN documentation also says:</p>\n\n<blockquote>\n  <p>As of CPAN 1.9463, if you do not have permission to write the default perl library directories, CPAN's configuration process will ask you whether you want to bootstrap <code>local::lib</code>, which makes keeping a personal perl library directory easy.</p>\n</blockquote>\n\n<hr>\n\n<p>You can sidestep the whole issue by installing a private perl in your home directory (in which case the \"system\" directory is just another subdirectory under your <code>$HOME</code> and thus isn't shared with anyone and can be written to by you). This is very easy with e.g. <a href=\"https://metacpan.org/pod/perlbrew\" rel=\"nofollow noreferrer\">perlbrew</a>.</p>\n\n<hr>\n\n<p>Another note: You've just found a bug in the documentation for <code>PERL5LIB</code>. \"<em>and the current directory</em>\" is outdated: <code>.</code> has been removed from the default list of module locations for security reasons.</p>\n"}, {"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1508188445, "last_edit_date": 1508188445, "creation_date": 1508186570, "answer_id": 46778785, "question_id": 46778215, "link": "https://stackoverflow.com/questions/46778215/where-does-cpan-install-modules/46778785#46778785", "title": "Where does CPAN install modules?", "body": "<p>This is a complex question. You can tell where <em>core</em> libraries are located by seeking the place of one of them:</p>\n\n<pre><code>perldoc -l B\n</code></pre>\n\n<p>Will tell you where the <code>B</code> core module is located. And you may try others with different results...</p>\n\n<p>Also, <code>perl -V</code> will tell you all shell variables that matter along with the value of <code>@INC</code>, the places where it will look for libraries.</p>\n\n<p><em>Core</em> libraries are usually found in different places than <em>local</em> libraries. Also, if you are using <em>perlbrew</em> and <code>local::lib</code> you may have more things to consider. Regarding shell variables, along with <code>PERL5LIB</code>, you also have <code>PERL_LOCAL_LIB_ROOT</code>.</p>\n\n<p>Regarding your other question, I would say that <code>root</code> may install libraries system-wide. Any user will have those and then any local places included by means of shell variables or other means like command line options <code>perl -I &lt;lib location&gt;</code>, or within the code like <code>use lib &lt;lib location&gt;;</code>.</p>\n\n<p>There is also <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a> that along with <code>local::lib</code> allows a non-privileged user to install <em>Perl</em> and libraries in local directories.</p>\n\n<p>Regarding ways to install modules from CPAN, my favourite is <a href=\"http://search.cpan.org/~miyagawa/App-cpanminus-1.7043/lib/App/cpanminus.pm\" rel=\"nofollow noreferrer\">cpanminus</a>. It is invoked with <code>cpanm &lt;library to install&gt;</code>. It never fails...</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1508187634, "post_id": 46778964, "comment_id": 80503863, "body": "In addition to CPAN-the-repository, there&#39;s also CPAN-the-Perl-module (which is what the <code>cpan</code> command uses)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508245153, "post_id": 46778964, "comment_id": 80527813, "body": "Is the table sourced from somewhere or did you write that yourself?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1593283293, "post_id": 46778964, "comment_id": 110727740, "body": "@simbabque, It&#39;s based on the table under the heading <code>make intstall</code> in the docs for <a href=\"http://search.cpan.org/perldoc?ExtUtils::MakeMaker\" rel=\"nofollow noreferrer\">ExtUtils::MakeMaker</a> and on the list of variables provided by <code>perl -V:&#39;install.*&#39;</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 14, "last_activity_date": 1595113579, "last_edit_date": 1595113579, "creation_date": 1508187362, "answer_id": 46778964, "question_id": 46778215, "link": "https://stackoverflow.com/questions/46778215/where-does-cpan-install-modules/46778964#46778964", "title": "Where does CPAN install modules?", "body": "<p>Perl specifies three sets of installation locations.</p>\n<ul>\n<li><code>perl</code>, for modules included with Perl itself.</li>\n<li><code>vendor</code>, for modules installed by the provider of your <code>perl</code> binary.</li>\n<li><code>site</code>, for modules installed using <code>cpan</code>.</li>\n</ul>\n<p>Each of these sets provides installation locations for a number of files types.</p>\n<pre class=\"lang-none prettyprint-override\"><code>                        Installation location\n                        --------------------------------------------------------\nType of file            perl             vendor                 site\n----------------------  ---------------  ---------------------  -------------------\nBuild-specific modules  installarchlib   installvendorarch      installsitearch\nModules                 installprivlib   installvendorlib       installsitelib\nBinary programs         installbin       installvendorbin       installsitebin\nOther programs          installscript    installvendorscript    installsitescript\nman pages for scripts   installman1dir   installvendorman1dir   installsiteman1dir\nman pages for modules   installman3dir   installvendorman3dir   installsiteman3dir\nhtml docs for scripts   installhtml1dir  installvendorhtml1dir  installsitehtml1dir\nhtml docs for modules   installhtml3dir  installvendorhtml3dir  installsitehtml3dir\n</code></pre>\n<p>You can obtain the path for any of these locations using the following:</p>\n<pre><code>perl -V:{var}        # Substitute `{var}` for the var name.\n</code></pre>\n<p>You can obtain all the paths for these locations using the following:</p>\n<pre><code>perl -V:'install.*'\n</code></pre>\n<p>Those are the defaults use by the installers<sup>[1]</sup>. However, the two most commonly used installers allow the user doing to installation to override any and all of these. If a module is installed in a non-standard location, <code>PERL5LIB</code> can be used to let <code>perl</code> know where to find the module.</p>\n<hr />\n<ol>\n<li><p>CPAN doesn't install modules. It's a repository.</p>\n<p><code>cpan</code> doesn't install modules. <code>cpan</code> download distributions from CPAN and runs the installer provided within, be it <code>Makefile.PL</code> or <code>Build.PL</code>. (Same goes for <code>cpanm</code> and <code>cpanp</code>.)</p>\n<p>These scripts mostly use <a href=\"http://search.cpan.org/perldoc?ExtUtils::MakeMaker\" rel=\"nofollow noreferrer\">ExtUtils::MakeMaker</a> or <a href=\"http://search.cpan.org/perldoc?Module::Build\" rel=\"nofollow noreferrer\">Module::Build</a> install the distribution (though other installers exist).</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10968, "favorite_count": 1, "accepted_answer_id": 46778964, "answer_count": 3, "score": 14, "last_activity_date": 1595113579, "creation_date": 1508184221, "question_id": 46778215, "link": "https://stackoverflow.com/questions/46778215/where-does-cpan-install-modules", "title": "Where does CPAN install modules?", "body": "<p>I can't find an authoritative/comprehensive description of where CPAN installs its files. I assume there must be a set of rules and that it's not as simple as \"XYZ directory\" because, for example, multiple users on a Linux box can run CPAN even though there's a single Perl installation and it still somehow works. So, what are those rules?</p>\n\n<p>A second part of this question: The documentation for the PERL5LIB environment variable says that it is \"A list of directories in which to look for Perl library files before looking in the standard library and the current directory.\" </p>\n\n<p>I assume that CPAN doesn't install into the standard library location, since presumably that is fixed for a particular Perl version. So maybe CPAN installs into PERL5LIB?</p>\n\n<p>And finally, as I already alluded to, how does CPAN handle the fact that multiple users might be running the same Perl installation? Sorry if that's a separate question but it seems probably related.</p>\n"}, {"tags": ["perl", "oop"], "answers": [{"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 3, "creation_date": 1508170197, "post_id": 46774330, "comment_id": 80494839, "body": "\u2026 and if you want to be resilient against typos you can <code>delete $args{$key}</code> each argument so that you can afterwards check for unused args like <code>if (my @unknown = sort keys %args) { croak &quot;Unknown named arguments: @unknown&quot;;  }</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508181878, "post_id": 46774330, "comment_id": 80500993, "body": "<code>my $self = { @_ }</code>  breaks abstraction. I think you should mark it as being undesirable at least."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1508184011, "last_edit_date": 1508184011, "creation_date": 1508169255, "answer_id": 46774330, "question_id": 46774093, "link": "https://stackoverflow.com/questions/46774093/how-to-initialize-a-specific-class-variable-while-creating-an-object/46774330#46774330", "title": "How to initialize a specific class variable while creating an object?", "body": "<p>The original <code>Person</code> class constructor expects the arguments to contain values in a specific order, but you want to specify key-value pairs. This is easy enough by representing the input as a hash reference.</p>\n\n<pre><code>package Person;\nsub new {\n  my $class = shift;\n\n  # read @_ as list of key-value pairs; \n  # set $self as reference to hash of these pairs\n  my $self = { @_ };       \n  #my $self = { my %args = @_ };   # if you like your abstractions unbroken \n\n  bless  $self, $class;\n  return $self;\n}\n</code></pre>\n\n<p>If you want to restrict the keys that can be set to <code>FirstName</code>, <code>LastName</code>, and <code>Age</code>, you could do something like this.</p>\n\n<pre><code>package Person;\nsub new {\n  my $class = shift;\n  my %args = @_;\n  my $self = {\n    FirstName =&gt; $args{FirstName},\n    LastName  =&gt; $args{LastName},\n    Age       =&gt; $args{Age},\n  };\n  bless  $self, $class;\n  return $self;\n}\n</code></pre>\n\n<p>and as a further enhancement, you could provide default values where the caller has not specified all of the expected keys</p>\n\n<pre><code>package Person;\nsub new {\n  my $class = shift;\n  my %args = @_;\n  my $self = {\n    FirstName =&gt; $args{FirstName} // \"Fred\",\n    LastName  =&gt; $args{LastName} // \"Flinstone\",\n    Age       =&gt; $args{Age} // 42,\n  };\n  bless  $self, $class;\n  return $self;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3885596"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 46774330, "answer_count": 1, "score": 1, "last_activity_date": 1508184011, "creation_date": 1508168517, "question_id": 46774093, "link": "https://stackoverflow.com/questions/46774093/how-to-initialize-a-specific-class-variable-while-creating-an-object", "title": "How to initialize a specific class variable while creating an object?", "body": "<p>So far I always relied on the order of variables in a class, but now I'm trying to initialize those variables in a shuffled order.</p>\n\n<p>For example, this is what I normally do while creating an object.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $person1 = Person-&gt;new ('Fernando', 'Alonso', 36);\n</code></pre>\n\n<p>And this is what I'm trying to achieve.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $person2 = Person-&gt;new (Age =&gt; 36, FistName =&gt; 'Fernando', LastName =&gt; 'Alonso');\n</code></pre>\n\n<p>I tried <code>=&gt;</code> regarding to several documents (e.g. <a href=\"https://perldoc.perl.org/perlootut.html\" rel=\"nofollow noreferrer\">perldoc</a>) I saw, but they didn't return a complete example to me. However I don't actually work on the following script, it's a fair MCVE with the 'clich\u00e9' package <code>Person</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\npackage Person;\nsub new {\n  my $class = shift;\n  my $self = {\n    FirstName =&gt; shift,\n    LastName  =&gt; shift,\n    Age       =&gt; shift,\n  };\n  print \"First name : $self-&gt;{FirstName}\\n\";\n  print \"Last name  : $self-&gt;{LastName}\\n\";\n  print \"Age        : $self-&gt;{Age}\\n\\n\";\n  bless  $self, $class;\n  return $self;\n}\n\n# Works well\nmy $person1 = Person-&gt;new ('Fernando', 'Alonso', 36);\n\n# (?) How to assign 36 directly to $self-&gt;{Age}\nmy $person2 = Person-&gt;new (Age =&gt; 36, '', '');\n</code></pre>\n\n<p>The output is  as follows.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>First name : Fernando\nLast name  : Alonso\nAge        : 36\n\nFirst name : Age\nLast name  : 36\nAge        : \n</code></pre>\n\n<p>So, how should I create the object to make explicit assignments to the class variables? If necessary, how should I modify package <code>Person</code>?</p>\n\n<p>P.S. I avoid changing the variables after the object is created.</p>\n"}, {"tags": ["perl", "cygwin", "msys"], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 1912315, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/404561fb61ad88588a47a5e90b2809e4?s=128&d=identicon&r=PG", "display_name": "adrianN", "link": "https://stackoverflow.com/users/1912315/adriann"}, "edited": false, "score": 0, "creation_date": 1508167570, "post_id": 46773471, "comment_id": 80493233, "body": "MSys does have some provisions making working with Windows paths easier. For example <code>perl F:\\\\Temp\\\\test.pl</code> works perfectly fine, even though it&#39;s a windows path. I was hoping that MSys perl&#39;s library would also help a bit. Cwd::abs_path also touches the filesystem so it could figure out that what it returns is not a valid path and produce an error instead of an invalid path, as it normally does with non-existing paths."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1508166897, "last_edit_date": 1508166897, "creation_date": 1508166555, "answer_id": 46773471, "question_id": 46773095, "link": "https://stackoverflow.com/questions/46773095/cwdabs-path-broken-on-msys-cygwin/46773471#46773471", "title": "Cwd::abs_path broken on msys, cygwin", "body": "<p>You do not have an absolute path. msys and cygwin are unix emulation environments, and in unix, absolute paths start with <code>/</code>. <code>F:\\</code> is a valid relative path and file name in unix. </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Linux$ touch 'F:\\'\n\nLinux$ ls\nF:\\\n</code></pre>\n\n<p>In cygwin, <code>/cygdrive/f/</code> refers to your <code>F:</code>. You can use the command-line utility <code>cygpath</code> to convert between native and Windows paths.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cygwin$ cygpath -w /cygdrive/c/\nC:\\\n\ncygwin$ cygpath -u 'C:\\'\n/cygdrive/c/\n</code></pre>\n\n<p>msys should also have a way of accessing the Windows drive through its virtual unix file system.</p>\n"}], "owner": {"reputation": 397, "user_id": 1912315, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/404561fb61ad88588a47a5e90b2809e4?s=128&d=identicon&r=PG", "display_name": "adrianN", "link": "https://stackoverflow.com/users/1912315/adriann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508166897, "creation_date": 1508165286, "last_edit_date": 1508165791, "question_id": 46773095, "link": "https://stackoverflow.com/questions/46773095/cwdabs-path-broken-on-msys-cygwin", "title": "Cwd::abs_path broken on msys, cygwin", "body": "<p>I'm trying to get the absolute path to a file provided as a Windows path in Cygwin, respectively Msys (Git Bash) perl. I would like solutions that also work when the supplied path is a \"native\" Cygwin/MSys path.</p>\n\n<p>I tried using Cwd::abs_path, but that seems subtly broken. Here is a test:</p>\n\n<pre><code>user@MYPC MINGW64 /f/Temp\n$ perl\nuse Cwd;\nprint Cwd::abs_path(\"F:\\\\\") . \"\\n\";\nprint Cwd::abs_path(\"F:\\\\test.txt\") . \"\\n\";\nprint Cwd::abs_path(\"..\\\\test.txt\") . \"\\n\";\n/f\n/f/Temp/F:/test.txt\n/f/Temp/../test.txt\n</code></pre>\n\n<p>Directories work, relative paths \"work\" but don't give the result I'd expect (i.e. .. is not eliminated), but when I add a filename to an absolute path the result is wrong. I had hoped that Cwd would do the path translation for me.</p>\n\n<p>I need to later extract parts of the path (using the functions from File::Spec) and also want open the file. To continue working with the extracted part the path should be native to the perl version used. I want to avoid using cygpath, since I'd like the script to also work with ActivePerl, which understands Windows paths only. I could of course add some ifs to only call cygpath for the unix-y perls.</p>\n"}, {"tags": ["perl", "email", "office365"], "answers": [{"comments": [{"owner": {"reputation": 753, "user_id": 1721412, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d8659e561bb8aa7db911a50c530ea15d?s=128&d=identicon&r=PG", "display_name": "Doni Andri Cahyono", "link": "https://stackoverflow.com/users/1721412/doni-andri-cahyono"}, "edited": false, "score": 0, "creation_date": 1508165628, "post_id": 46772996, "comment_id": 80492029, "body": "I already followed and edited my code to add SSL=&gt;1 and use NET::SMTP(3.10) but still didn&#39;t work. What is the best way to send email to office365 then?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 753, "user_id": 1721412, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d8659e561bb8aa7db911a50c530ea15d?s=128&d=identicon&r=PG", "display_name": "Doni Andri Cahyono", "link": "https://stackoverflow.com/users/1721412/doni-andri-cahyono"}, "edited": false, "score": 0, "creation_date": 1508166551, "post_id": 46772996, "comment_id": 80492600, "body": "@DoniAndriCahyono: <code>SSL =&gt; 1</code> does not use explicit TLS (i.e. starttls) but implicit TLS. To cite myself: <i>&quot;Unfortunately, it looks like MIME::Lite does not support the use of starttls. See the anwers on MIME::Lite - Cannot send mail .... for alternatives</i>&quot;."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1508176710, "post_id": 46772996, "comment_id": 80498201, "body": "<code>MIME::Lite</code> does not pass <code>SSL</code> option to <code>Net::SMTP</code> - see <a href=\"https://stackoverflow.com/questions/45588971/mimelite-3-030-netsmtp-with-smtps-port-465\" title=\"mimelite 3 030 netsmtp with smtps port 465\">stackoverflow.com/questions/45588971/&hellip;</a>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1508179507, "post_id": 46772996, "comment_id": 80499727, "body": "@AnFi: and that&#39;s on top of <code>SSL =&gt; 1</code> not being the right option anyway :)"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "edited": false, "score": 0, "creation_date": 1508180193, "post_id": 46772996, "comment_id": 80500098, "body": "It looks like good fix for services supporting smtps (port 465, e.g. gmail) <b>BUT</b> MIME::Lite filters it out from options passed to <code>Net::SMTP</code> constructor (<code>new</code>)."}, {"owner": {"reputation": 753, "user_id": 1721412, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d8659e561bb8aa7db911a50c530ea15d?s=128&d=identicon&r=PG", "display_name": "Doni Andri Cahyono", "link": "https://stackoverflow.com/users/1721412/doni-andri-cahyono"}, "edited": false, "score": 0, "creation_date": 1508227645, "post_id": 46772996, "comment_id": 80516997, "body": "Thanks fellas, it brought me an idea to seek net::smtp with TLS and put it as my answer"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1508164968, "creation_date": 1508164968, "answer_id": 46772996, "question_id": 46772481, "link": "https://stackoverflow.com/questions/46772481/smtp-auth-command-not-supported-on-smtp-office365-com/46772996#46772996", "title": "SMTP auth() command not supported on smtp.office365.com", "body": "<pre><code>MIME::Lite-&gt;send('smtp',$mail_host,SSL=&gt;0,AuthUser=&gt;...,Port=&gt;587 ...\n                                   ^^^^^^  ^^^^^^\n</code></pre>\n\n<p>You are trying to use authentication without SSL. This is not supported by smtp.office365.com for security reasons as can be seen in the handshake. The response to EHLO after the initial connect shows no AUTH available:</p>\n\n<pre><code>&lt;&lt;&lt; 220 LNXP265CA0010.outlook.office365.com Microsoft ESMTP MAIL Service ready at Mon, 16 Oct 2017 14:36:53 +0000\n&gt;&gt;&gt; EHLO ...\n&lt;&lt;&lt; 250-LNXP265CA0010.outlook.office365.com Hello ...\n&lt;&lt;&lt; 250-SIZE 157286400\n&lt;&lt;&lt; 250-PIPELINING\n&lt;&lt;&lt; 250-DSN\n&lt;&lt;&lt; 250-ENHANCEDSTATUSCODES\n&lt;&lt;&lt; 250-STARTTLS\n&lt;&lt;&lt; 250-8BITMIME\n&lt;&lt;&lt; 250-BINARYMIME\n&lt;&lt;&lt; 250-CHUNKING\n&lt;&lt;&lt; 250 SMTPUTF8\n</code></pre>\n\n<p>Only when upgrading to TLS AUTH gets available:</p>\n\n<pre><code>&gt;&gt;&gt; STARTTLS\n&lt;&lt;&lt; 220 2.0.0 SMTP server ready\n&gt;&gt;&gt; EHLO localhost.localdomain\n&lt;&lt;&lt; 250-LNXP265CA0010.outlook.office365.com Hello ...\n&lt;&lt;&lt; 250-SIZE 157286400\n&lt;&lt;&lt; 250-PIPELINING\n&lt;&lt;&lt; 250-DSN\n&lt;&lt;&lt; 250-ENHANCEDSTATUSCODES\n&lt;&lt;&lt; 250-AUTH LOGIN XOAUTH2          &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; HERE\n&lt;&lt;&lt; 250-8BITMIME\n&lt;&lt;&lt; 250-BINARYMIME\n&lt;&lt;&lt; 250-CHUNKING\n&lt;&lt;&lt; 250 SMTPUTF8\n</code></pre>\n\n<p>Unfortunately, it looks like MIME::Lite does not support the use of starttls. See the anwers on <a href=\"https://stackoverflow.com/questions/28337178/mimelite-cannot-send-mail-smtp-auth-command-not-supported-on-smtp-gmail-c\">MIME::Lite - Cannot send mail [SMTP auth() command not supported on smtp.gmail.com]</a> for alternatives.</p>\n"}, {"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1508226080, "post_id": 46784638, "comment_id": 80516089, "body": "You might instead also use the Net::SMTP (core module) and just do a <code>$mailer-&gt;starttls()</code> after establishing the connection. One less module to install. Also, you could simply do <code>$mailer-&gt;data($msg-&gt;as_string)</code> and skip the <code>datesend</code> and <code>dataend</code>."}, {"owner": {"reputation": 753, "user_id": 1721412, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d8659e561bb8aa7db911a50c530ea15d?s=128&d=identicon&r=PG", "display_name": "Doni Andri Cahyono", "link": "https://stackoverflow.com/users/1721412/doni-andri-cahyono"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1508226401, "post_id": 46784638, "comment_id": 80516287, "body": "two thumbs up for you bro @SteffenUllrich"}], "tags": [], "owner": {"reputation": 753, "user_id": 1721412, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d8659e561bb8aa7db911a50c530ea15d?s=128&d=identicon&r=PG", "display_name": "Doni Andri Cahyono", "link": "https://stackoverflow.com/users/1721412/doni-andri-cahyono"}, "is_accepted": true, "score": 0, "last_activity_date": 1509071711, "last_edit_date": 1509071711, "creation_date": 1508225044, "answer_id": 46784638, "question_id": 46772481, "link": "https://stackoverflow.com/questions/46772481/smtp-auth-command-not-supported-on-smtp-office365-com/46784638#46784638", "title": "SMTP auth() command not supported on smtp.office365.com", "body": "<p>above all, I added</p>\n\n<pre><code>use Net::SMTP::TLS;\n</code></pre>\n\n<p>after MIME::Lite codes, I used below mailer:</p>\n\n<pre><code>my $mailer = new Net::SMTP::TLS(\n    \"smtp.office365.com\",\n    Hello   =&gt;      'smtp.office365.com',\n    Port    =&gt;      587,\n    User    =&gt;      'doni@home.com',\n    Password=&gt;      '******');\n$mailer-&gt;mail('doni@home.com');\n$mailer-&gt;to('doni@home.com');\n$mailer-&gt;data;\n$mailer-&gt;datasend($msg-&gt;as_string);\n$mailer-&gt;dataend;\n$mailer-&gt;quit;\n</code></pre>\n\n<p>It worked like a charm!</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2847995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a300d893240deea180855bea217c671?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/2847995/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1515052354, "creation_date": 1515052354, "answer_id": 48090899, "question_id": 46772481, "link": "https://stackoverflow.com/questions/46772481/smtp-auth-command-not-supported-on-smtp-office365-com/48090899#48090899", "title": "SMTP auth() command not supported on smtp.office365.com", "body": "<p>For me the above solution, using <code>Net::SMTP::TLS</code>, did not work for sending emails using <code>MIME::Lite</code> &amp; Office365. I received the following error message:</p>\n\n<pre><code>invalid SSL_version specified at /usr/share/perl5/IO/Socket/SSL.pm line 575.\n</code></pre>\n\n<p>However, the solution given <a href=\"http://www.skipser.com/p/2/p/send-email-using-perl-via-live.com.html\" rel=\"nofollow noreferrer\">here</a> using <code>Net::SMTPS</code>, worked like a charm.</p>\n\n<p>Here's the code snippet that worked for me:</p>\n\n<pre><code>my $email = MIME::Lite-&gt;new(From    =&gt; 'John Doe &lt;john.doe@example.com&gt;',\n                             To      =&gt; $to,\n                             Subject =&gt; $email_subject,\n                             Type    =&gt;'multipart/related' );\n\n$email-&gt;attach(Type =&gt; 'text/html',\n               Data =&gt; $email_body);\n\nmy $smtps = Net::SMTPS-&gt;new(\"smtp.office365.com\", Port =&gt; 587,  doSSL =&gt; 'starttls', SSL_version=&gt;'TLSv1');\n\nmy $username = 'john.doe@example.com';\nmy $password = 'myc0mpl1c4t3dpa55w0rd';\n\n$smtps-&gt;auth ( $username, $password ) or DIE(\"Nooooo..Could not authenticate with mail server!!\\n\");\n\n$smtps-&gt;mail($username);\n$smtps-&gt;to($to);\n$smtps-&gt;data();\n$smtps-&gt;datasend( $email-&gt;as_string() );\n$smtps-&gt;dataend();\n$smtps-&gt;quit;\n</code></pre>\n\n<p>Hope this helps someone.</p>\n"}], "owner": {"reputation": 753, "user_id": 1721412, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d8659e561bb8aa7db911a50c530ea15d?s=128&d=identicon&r=PG", "display_name": "Doni Andri Cahyono", "link": "https://stackoverflow.com/users/1721412/doni-andri-cahyono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2852, "favorite_count": 1, "accepted_answer_id": 46784638, "answer_count": 3, "score": 1, "last_activity_date": 1515052354, "creation_date": 1508163348, "last_edit_date": 1508164683, "question_id": 46772481, "link": "https://stackoverflow.com/questions/46772481/smtp-auth-command-not-supported-on-smtp-office365-com", "title": "SMTP auth() command not supported on smtp.office365.com", "body": "<pre><code>use warnings;\nuse MIME::Lite;\nuse Net::SMTP;\n\n### Adjust sender, recipient and your SMTP mailhost\nmy $from_address = 'doni@home.com';\nmy $to_address = 'doni@home.com';\nmy $mail_host = 'smtp.office365.com';\n\n### Adjust subject and body message\nmy $subject = 'A message with 2 parts ...';\nmy $message_body = \"Here's the attachment file(s) you wanted\";\n\n### Adjust the filenames\nmy $my_file_txt = 'C:\\Users\\Doni\\Documents';\nmy $your_file_txt = 'test1.txt';\n\n### Create the multipart container\n$msg = MIME::Lite-&gt;new (\n    From =&gt; $from_address,\n    To =&gt; $to_address,\n    Subject =&gt; $subject,\n    Type =&gt;'multipart/mixed'\n) or die \"Error creating multipart container: $!\\n\";\n\n### Add the text message part\n$msg-&gt;attach (\n    Type =&gt; 'TEXT',\n    Data =&gt; $message_body\n) or die \"Error adding the text message part: $!\\n\";\n\n### Add the TEXT file\n$msg-&gt;attach (\n    Type =&gt; 'text',\n    Encoding =&gt; 'base64',\n    Path =&gt; $my_file_txt,\n    Filename =&gt; $your_file_txt,\n    Disposition =&gt; 'attachment'\n) or die \"Error adding file_text: $!\\n\";\n\n##Send \nMIME::Lite-&gt;send('smtp',$mail_host,SSL=&gt;0,AuthUser=&gt;'doni@home.com',AuthPass=&gt;'******',Debug=&gt;1,Port=&gt;587,Timeout=&gt;60);\n$msg-&gt;send;\n</code></pre>\n\n<p>the output of the command is:</p>\n\n<pre><code>##Here's the output\n\nSMTP auth() command not supported on smtp.office365.com \n</code></pre>\n\n<p>How to resolve that issue? I'm stuck with that.</p>\n"}, {"tags": ["excel", "perl", "win32ole"], "comments": [{"owner": {"reputation": 27, "user_id": 7061050, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jY4m8.jpg?s=128&g=1", "display_name": "Laurent Zotto", "link": "https://stackoverflow.com/users/7061050/laurent-zotto"}, "edited": false, "score": 0, "creation_date": 1508156919, "post_id": 46770063, "comment_id": 80485981, "body": "I think I just found it out. The variable $Template uses &quot;../&quot; which gets redirected with the WIN32::OLE module to &quot;....AppData\\Roaming\\Microsoft\\Windows&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 7061050, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jY4m8.jpg?s=128&g=1", "display_name": "Laurent Zotto", "link": "https://stackoverflow.com/users/7061050/laurent-zotto"}, "is_accepted": false, "score": 0, "last_activity_date": 1508158202, "creation_date": 1508158202, "answer_id": 46770764, "question_id": 46770063, "link": "https://stackoverflow.com/questions/46770063/i-try-to-modify-an-excel-using-perl-and-win32ole/46770764#46770764", "title": "I try to modify an Excel using Perl and Win32::Ole", "body": "<p>I modified the code to (using the original \".xlsx\" file):</p>\n\n<pre><code>sub ExcelWriter {\n    my ($Volume, $Directory, $File) = File::Spec-&gt;splitpath(__FILE__);\n    my $Template = $Volume.$Directory.'..\\templates\\template.xlsx';\n    my $ExcelFile = $MyOutDir.'New_Excel_File.xlsx';\n    my $Excel = new Win32::OLE('Excel.Application');\n    my $WorkBook = $Excel-&gt;Workbooks-&gt;Open($Template);\n    my $WorkSheet = $WorkBook-&gt;Worksheets('Overview');\n    $WorkSheet-&gt;Cells(5,3)-&gt;{Value} = $Customer;\n    $WorkBook-&gt;SaveAs($ExcelFile);\n    $WorkBook-&gt;Close();\n    undef $WorkBook;\n    undef $Excel;\n}\n</code></pre>\n\n<p>...and it works fine!</p>\n"}], "owner": {"reputation": 27, "user_id": 7061050, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jY4m8.jpg?s=128&g=1", "display_name": "Laurent Zotto", "link": "https://stackoverflow.com/users/7061050/laurent-zotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 363, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508158202, "creation_date": 1508155975, "question_id": 46770063, "link": "https://stackoverflow.com/questions/46770063/i-try-to-modify-an-excel-using-perl-and-win32ole", "title": "I try to modify an Excel using Perl and Win32::Ole", "body": "<p>I'm struggling with this and have red a lot of articles showing how it should work, but I have no success:</p>\n\n<p>My system is a Windows 7 with Office 2016 installed and activated.\nI want to use an Excel files as template modify it and save it to a new location. Here is my code:</p>\n\n<pre><code>sub ExcelWriter {\n    my $Template = \"../templates/template.xls\";\n    my $ExcelFile = $MyOutDir.\"New_Excel_File.xls\";\n    my $Excel = new Win32::OLE('Excel.Application');\n    if (-f $Template) {\n        my $WorkBook = $Excel-&gt;Workbooks-&gt;Open($Template);\n        my $WorkSheet = $WorkBook-&gt;Worksheets('Overview');\n        $WorkSheet-&gt;Cells(5,3)-&gt;{Value} = $Customer;\n        $WorkBook-&gt;SaveAs($ExcelFile);\n        $WorkBook-&gt;Close();\n        undef $WorkBook;\n        undef $Excel;\n    }\n}\n</code></pre>\n\n<p>I'm getting \"<code>Can't call method \"Worksheets\" on an undefined value at...</code>\"\nWhen I use \"<code>Workbooks-&gt;Add</code>\" and \"<code>Worksheets-&gt;Add</code>\" to create a new Workbook I can write the cells. Even selecting Worksheets work here!</p>\n\n<p>For the experts this seem to be obvious, but I must have missed something here. I already saved my Workbook from \".xlsx\" to \".xls\" and removed all formulas etc... and even create a new blank Workbook!</p>\n\n<p>Thank you for your help</p>\n\n<p>Regards\nLaurent</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 7, "creation_date": 1508151114, "post_id": 46768556, "comment_id": 80482328, "body": "It would help if you explain how &#39;subway&#39;/&#39;line&#39;/&#39;carriage&#39; refers to your data, and how you would want your resultant structure to end up. But ideally, you&#39;ll give it a try yourself, and let us know what problems you&#39;re having, rather than ask someone to do your work for you."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1508155084, "post_id": 46768556, "comment_id": 80484727, "body": "What have you tried? What problems are you having? Please show us your code. If you don&#39;t have any code, then Stack Overflow probably isn&#39;t the best place for your question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508196447, "post_id": 46768556, "comment_id": 80506814, "body": "While you have two answers already, a lot depends on what you want to do with the final data structure. You say <i>&quot;I need to make a tree of them like <code>subway-&gt;line-&gt;carriage</code>&quot;</i> but it could be said that the data you have already does that. Both of your answers sort the data by dependency and show a tree structure as a result of that sort, but their results are very different. If you can describe better how you intend to use the resulting structure then you may get better answers."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1508173393, "last_edit_date": 1508173393, "creation_date": 1508163418, "answer_id": 46772505, "question_id": 46768556, "link": "https://stackoverflow.com/questions/46768556/perl-create-hash-of-hashes-tree-from-array-of-hashes/46772505#46772505", "title": "Perl, create hash of hashes tree from array of hashes", "body": "\n\n<h3>Update</h3>\n\n<p>My apologies. I missed your final paragraph that explained how an item may have a spurious parent \"1\" in addition to the real value. I've added some code to sanitise the original data and create a map <code>%parent</code> of every node to its true parent before building the graph</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Graph::Directed;\n\nmy @arr = (\n\n    #subways, \"0\" - superroot\n    { id =&gt; \"1\", parent_id =&gt; \"0\", name =&gt; \"subway 1\" },\n\n    #lines\n    { id =&gt; \"12642\", parent_id =&gt; \"1\", name =&gt; \"no category\" },\n    { id =&gt; \"12645\", parent_id =&gt; \"1\", name =&gt; \"line 1\" },\n\n    #cars\n    { id =&gt; \"12646\", parent_id =&gt; \"1\",     name =&gt; \"carriage 1\" },\n    { id =&gt; \"12646\", parent_id =&gt; \"12645\", name =&gt; \"carriage 1\" },\n    { id =&gt; \"12647\", parent_id =&gt; \"1\",     name =&gt; \"carriage 2\" },\n    { id =&gt; \"12647\", parent_id =&gt; \"12645\", name =&gt; \"carriage 2\" },\n    { id =&gt; \"12679\", parent_id =&gt; \"1\",     name =&gt; \"separate cars\" },\n    { id =&gt; \"12679\", parent_id =&gt; \"12642\", name =&gt; \"separate cars\" },\n    { id =&gt; \"12643\", parent_id =&gt; \"1\",     name =&gt; \"ungrouped\" },\n    { id =&gt; \"12643\", parent_id =&gt; \"12642\", name =&gt; \"ungrouped\" }\n);\n\n# Sanitise data to remove \"1\" parents\n#\nmy %parent;\n\nfor my $node ( @arr ) {\n    my ($id, $parent_id) = @{$node}{qw/ id parent_id /};\n    next unless $parent_id;\n    $parent{$id} = $parent_id unless $parent{$id} and $parent{$id} ne 1;\n}\n\n# Build the graph\n#\nmy $tree = Graph::Directed-&gt;new;\n\nfor my $node ( keys %parent ) {\n    $tree-&gt;add_edge( $parent{$node} =&gt; $node );\n}\n\n# Display the data\n#\nmy %names = map { @{$_}{qw/ id name /} } @arr;\n\nprint_tree($tree, $_) for $tree-&gt;predecessorless_vertices;\n\nsub print_tree {\n    my ($tree, $root, $indent) = @_;\n    $indent //= 0;\n\n    printf \"%s%s\\n\",  '    ' x $indent, $names{$root};\n\n    print_tree($tree, $_, $indent + 1) for $tree-&gt;successors($root);\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>subway 1\n    line 1\n        carriage 1\n        carriage 2\n    no category\n        separate cars\n        ungrouped\n</code></pre>\n\n<h2><br/></h2>\n\n<h3>Original answer</h3>\n\n<p>I suggest that you make use of the <a href=\"https://metacpan.org/pod/Graph\" rel=\"nofollow noreferrer\"><code>Graph</code></a> module. A tree is a <em>directed</em> graph, and all you need to do is create a graph, add the connections (\"edges\") and interrogate the result</p>\n\n<p>This program does exactly that. I have written a <code>print_tree</code> subroutine which displays the tree in indented lines from a given starting point. A call to <code>predecessorless_vertices</code> finds all the roots of the tree: nodes which no other node connects to. In this case there is just one root, as there should be</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Graph::Directed;\n\nmy @arr = (\n\n    #subways, \"0\" - superroot\n    { id =&gt; \"1\", parent_id =&gt; \"0\", name =&gt; \"subway 1\" },\n\n    #lines\n    { id =&gt; \"12642\", parent_id =&gt; \"1\", name =&gt; \"no category\" },\n    { id =&gt; \"12645\", parent_id =&gt; \"1\", name =&gt; \"line 1\" },\n\n    #cars\n    { id =&gt; \"12646\", parent_id =&gt; \"1\",     name =&gt; \"carriage 1\" },\n    { id =&gt; \"12646\", parent_id =&gt; \"12645\", name =&gt; \"carriage 1\" },\n    { id =&gt; \"12647\", parent_id =&gt; \"1\",     name =&gt; \"carriage 2\" },\n    { id =&gt; \"12647\", parent_id =&gt; \"12645\", name =&gt; \"carriage 2\" },\n    { id =&gt; \"12679\", parent_id =&gt; \"1\",     name =&gt; \"separate cars\" },\n    { id =&gt; \"12679\", parent_id =&gt; \"12642\", name =&gt; \"separate cars\" },\n    { id =&gt; \"12643\", parent_id =&gt; \"1\",     name =&gt; \"ungrouped\" },\n    { id =&gt; \"12643\", parent_id =&gt; \"12642\", name =&gt; \"ungrouped\" }\n);\n\n# Build the graph\n#\nmy $tree = Graph::Directed-&gt;new;\n\nfor my $node ( @arr ) {\n    $tree-&gt;add_edge( @{$node}{qw/ parent_id id /} ) if $node-&gt;{parent_id};\n}\n\n# Display the structure\n#\nmy %names = map { @{$_}{qw/ id name /} } @arr;\n\nprint_tree($tree, $_) for $tree-&gt;predecessorless_vertices;\n\nsub print_tree {\n    my ($tree, $root, $indent) = @_;\n    $indent //= 0;\n\n    printf \"%s%s\\n\",  '    ' x $indent, $names{$root};\n\n    print_tree($tree, $_, $indent + 1) for $tree-&gt;successors($root);\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>subway 1\n    no category\n        ungrouped\n        separate cars\n    carriage 2\n    carriage 1\n    separate cars\n    ungrouped\n    line 1\n        carriage 2\n        carriage 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1616545327, "last_edit_date": 1616545327, "creation_date": 1508171129, "answer_id": 46774885, "question_id": 46768556, "link": "https://stackoverflow.com/questions/46768556/perl-create-hash-of-hashes-tree-from-array-of-hashes/46774885#46774885", "title": "Perl, create hash of hashes tree from array of hashes", "body": "<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( current_sub say );\n\nmy @rows = (\n   #subways, &quot;0&quot; - superroot\n   {id =&gt; &quot;1&quot;,     parent_id =&gt; &quot;0&quot;,     name =&gt; &quot;subway 1&quot;},\n   #lines\n   {id =&gt; &quot;12642&quot;, parent_id =&gt; &quot;1&quot;,     name =&gt; &quot;no category&quot;},\n   {id =&gt; &quot;12645&quot;, parent_id =&gt; &quot;1&quot;,     name =&gt; &quot;line 1&quot;},\n   #cars\n   {id =&gt; &quot;12646&quot;, parent_id =&gt; &quot;1&quot;,     name =&gt; &quot;carriage 1&quot;},\n   {id =&gt; &quot;12646&quot;, parent_id =&gt; &quot;12645&quot;, name =&gt; &quot;carriage 1&quot;},\n   {id =&gt; &quot;12647&quot;, parent_id =&gt; &quot;1&quot;,     name =&gt; &quot;carriage 2&quot;},\n   {id =&gt; &quot;12647&quot;, parent_id =&gt; &quot;12645&quot;, name =&gt; &quot;carriage 2&quot;},\n   {id =&gt; &quot;12679&quot;, parent_id =&gt; &quot;1&quot;,     name =&gt; &quot;separate cars&quot;},\n   {id =&gt; &quot;12679&quot;, parent_id =&gt; &quot;12642&quot;, name =&gt; &quot;separate cars&quot;},\n   {id =&gt; &quot;12643&quot;, parent_id =&gt; &quot;1&quot;,     name =&gt; &quot;ungrouped&quot;},\n   {id =&gt; &quot;12643&quot;, parent_id =&gt; &quot;12642&quot;, name =&gt; &quot;ungrouped&quot;}\n);\n\nmy $tree = { name =&gt; &quot;[root]&quot;, children =&gt; [] };\n{\n   my %tree = ( 0 =&gt; $tree );\n\n   for my $row (@rows) {\n      my $node = $tree{ $row-&gt;{id} } //= { name =&gt; undef, children =&gt; [] };\n      $node-&gt;{name} = $row-&gt;{name};\n\n      my $parent_node = $tree{ $row-&gt;{parent_id} } //= { name =&gt; undef, children =&gt; [] };\n      push @{ $parent_node-&gt;{children} }, $node;\n   }\n}\n\n# Add depth to nodes.\n# use a breadth-first search so that the depth of nodes\n# at multiple depths are set to the node's deepest depth.\n{\n   my @todo = ( [ $tree, 0 ] );\n   while (@todo) {\n      my ($node, $depth) = @{ shift(@todo) };\n      $node-&gt;{depth} = $depth;\n\n      ++$depth;\n      push @todo, map { [ $_, $depth ] } @{ $node-&gt;{children} };\n   }\n}\n\n# Trim shortcuts to deeper nodes.\n{\n   my @todo = $tree;\n   while (@todo) {\n      my $node = shift(@todo);\n      my $depth = delete($node-&gt;{depth}) + 1;\n      @{ $node-&gt;{children} } = grep { $_-&gt;{depth} == $depth } @{ $node-&gt;{children} };\n      push @todo, @{ $node-&gt;{children} };\n   }\n}\n\n# Display tree\nmy $visitor = sub {\n   my ($node, $depth) = @_;\n   say &quot;  &quot; x $depth, $node-&gt;{name};\n   __SUB__-&gt;($_, $depth+1) for @{ $node-&gt;{children} };\n};\n\n$visitor-&gt;($_, 0) for @$tree;\n</code></pre>\n<p>Output:</p>\n<pre><code>subway 1\n  no category\n    separate cars\n    ungrouped\n  line 1\n    carriage 1\n    carriage 2\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 1, "accepted_answer_id": 46772505, "answer_count": 2, "score": 0, "last_activity_date": 1616545327, "creation_date": 1508151001, "last_edit_date": 1508154459, "question_id": 46768556, "link": "https://stackoverflow.com/questions/46768556/perl-create-hash-of-hashes-tree-from-array-of-hashes", "title": "Perl, create hash of hashes tree from array of hashes", "body": "<p>So, I have next array of hashes: </p>\n\n<pre><code>my @arr = (\n  #subways, \"0\" - superroot\n  {id =&gt; \"1\",     parent_id =&gt; \"0\",     name =&gt; \"subway 1\"},\n  #lines\n  {id =&gt; \"12642\", parent_id =&gt; \"1\",     name =&gt; \"no category\"},\n  {id =&gt; \"12645\", parent_id =&gt; \"1\",     name =&gt; \"line 1\"},\n  #cars\n  {id =&gt; \"12646\", parent_id =&gt; \"1\",     name =&gt; \"carriage 1\"},\n  {id =&gt; \"12646\", parent_id =&gt; \"12645\", name =&gt; \"carriage 1\"},\n  {id =&gt; \"12647\", parent_id =&gt; \"1\",     name =&gt; \"carriage 2\"},\n  {id =&gt; \"12647\", parent_id =&gt; \"12645\", name =&gt; \"carriage 2\"},\n  {id =&gt; \"12679\", parent_id =&gt; \"1\",     name =&gt; \"separate cars\"},\n  {id =&gt; \"12679\", parent_id =&gt; \"12642\", name =&gt; \"separate cars\"},\n  {id =&gt; \"12643\", parent_id =&gt; \"1\",     name =&gt; \"ungrouped\"},\n  {id =&gt; \"12643\", parent_id =&gt; \"12642\", name =&gt; \"ungrouped\"}\n);\n</code></pre>\n\n<p>and I heed to make a tree of them like:</p>\n\n<pre><code>subway-&gt;line-&gt;carriage\n</code></pre>\n\n<p>By the way, here's a problem. As you see - here's a \"1\" in doubling carriages, but I need line as parent_id. \nIs there a way to do this?</p>\n"}, {"tags": ["perl", "process", "global-variables", "system", "scribe"], "comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1508149389, "post_id": 46766880, "comment_id": 80481261, "body": "pass the variables as arguments and capture them with <code>my $var = shift;</code> or <code>my ($var1, $var2 ...) = $_;</code>"}, {"owner": {"reputation": 694, "user_id": 6528719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyH70.jpg?s=128&g=1", "display_name": "Dinesh Gowda", "link": "https://stackoverflow.com/users/6528719/dinesh-gowda"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1508155285, "post_id": 46766880, "comment_id": 80484848, "body": "yes I need to access my object in parent inside my child process"}, {"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 0, "creation_date": 1508156060, "post_id": 46766880, "comment_id": 80485375, "body": "You can achieve the same using the <code>eval</code> instead of <code>system</code> call. But it may not be a good  idea to use."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1508169147, "creation_date": 1508169147, "answer_id": 46774293, "question_id": 46766880, "link": "https://stackoverflow.com/questions/46766880/parent-process-variables-inside-child-process-in-perl/46774293#46774293", "title": "Parent process variables inside Child process in Perl", "body": "<p>No. <code>system</code> is a wrapper around <code>fork</code>+<code>exec</code>+<code>wait</code>. <code>exec</code> replaces the program executing in the process, including its heap (memory).</p>\n"}], "owner": {"reputation": 694, "user_id": 6528719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyH70.jpg?s=128&g=1", "display_name": "Dinesh Gowda", "link": "https://stackoverflow.com/users/6528719/dinesh-gowda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 46774293, "answer_count": 1, "score": 0, "last_activity_date": 1508169147, "creation_date": 1508145688, "last_edit_date": 1508154371, "question_id": 46766880, "link": "https://stackoverflow.com/questions/46766880/parent-process-variables-inside-child-process-in-perl", "title": "Parent process variables inside Child process in Perl", "body": "<ul>\n<li>I have a script <code>execute.pl</code> and it calls <code>child.pl</code> through <code>system</code> call.</li>\n<li>I am creating an object of <code>AppLogger</code> in execute.pl</li>\n<li>This <code>AppLogger</code> is package and an interface to my <code>Scribe</code> Logging server</li>\n<li><p>Now in this <code>AppLogger</code> I am establishing a connection to my Scribe\nLogging server and has various funtions like <code>sendlog</code> which sends logs to server.</p>\n\n<p><strong><code>execute.pl:</code></strong></p>\n\n<pre><code>use AppLogger;\nuse strict;\nuse warnings;\n\nmy $logger = new AppLogger;\nsystem(\"perl child.pl\")\n</code></pre></li>\n</ul>\n\n<p>As I know <code>system</code> is a <code>OS</code> call and <code>child.pl</code> will be completly different process but still Is there a way I can access <code>$logger</code> ie <code>AppLogger</code> object inside child.pl without re-creating an connection object each time I want to log.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508145411, "post_id": 46766709, "comment_id": 80478800, "body": "I don&#39;t think there are spaces in between. If that&#39;s your complete code, it should be <code>&#47;user&#47;manik&#47;A.csv&#47;user&#47;manik&#47;B.csv</code>. Maybe you have <code>print New &quot;@files&quot;</code>?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1508145515, "post_id": 46766709, "comment_id": 80478874, "body": "<code>\\n</code> is newline, not <code>&#47;n</code>"}, {"owner": {"reputation": 23, "user_id": 8680621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d44602a32f9b972e0155752e36a4551f?s=128&d=identicon&r=PG&f=1", "display_name": "Manik Sharma", "link": "https://stackoverflow.com/users/8680621/manik-sharma"}, "edited": false, "score": 0, "creation_date": 1508145738, "post_id": 46766709, "comment_id": 80479026, "body": "sorry for misprint actually i used \\n only"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1508145845, "post_id": 46766709, "comment_id": 80479088, "body": "Here&#39;s a quick code review First, you should always <code>use strict</code> and <code>use warnings</code> in your code, and declare all your variables lexically using <code>my</code>, i.e. <code>my $size = @files</code>. You should also use lexical file handles instead of the globals (your <code>New</code>, which by convention should have been all uppercase, so <code>NEW</code>). You should also use three-arg <code>open</code> to avoid security problems if your filename comes from a var and contains metachars at the front. Finally, check for errors: <code>open my $fh, &#39;&gt;&#39;, &#39;&#47;user&#47;manikxyz.txt&#39; or die $!</code>."}, {"owner": {"reputation": 23, "user_id": 8680621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d44602a32f9b972e0155752e36a4551f?s=128&d=identicon&r=PG&f=1", "display_name": "Manik Sharma", "link": "https://stackoverflow.com/users/8680621/manik-sharma"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508146065, "post_id": 46766709, "comment_id": 80479225, "body": "Thanks @simbabque I will keep that in mind next time"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1508146255, "post_id": 46766709, "comment_id": 80479333, "body": "I have fixed the indentation in your code sample. You&#39;re welcome, but please do it yourself next time. Consistent indentation is an important tool for understanding code and if you&#39;re asking a group of people to read and understand your code, it&#39;s only polite to make it as easy as possible for them"}, {"owner": {"reputation": 23, "user_id": 8680621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d44602a32f9b972e0155752e36a4551f?s=128&d=identicon&r=PG&f=1", "display_name": "Manik Sharma", "link": "https://stackoverflow.com/users/8680621/manik-sharma"}, "edited": false, "score": 0, "creation_date": 1508146520, "post_id": 46766709, "comment_id": 80479489, "body": "Thanks Dave for your help"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8680621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d44602a32f9b972e0155752e36a4551f?s=128&d=identicon&r=PG&f=1", "display_name": "Manik Sharma", "link": "https://stackoverflow.com/users/8680621/manik-sharma"}, "edited": false, "score": 0, "creation_date": 1508145900, "post_id": 46766877, "comment_id": 80479129, "body": "Thanks this is doing the trick. But I also need to remove that /user/manik/ from start of each entry"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 23, "user_id": 8680621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d44602a32f9b972e0155752e36a4551f?s=128&d=identicon&r=PG&f=1", "display_name": "Manik Sharma", "link": "https://stackoverflow.com/users/8680621/manik-sharma"}, "edited": false, "score": 0, "creation_date": 1508145975, "post_id": 46766877, "comment_id": 80479169, "body": "@ManikSharma if you have a new question, please ask a new question. But I suggest you try for yourself first."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508154720, "post_id": 46766877, "comment_id": 80484506, "body": "I have an irrational hatred of the <code>print join &quot;\\n&quot;, @foo</code> idiom! This is mainly because I think of <code>\\n</code> as a record <i>terminator</i>, and not a record separator. Accordingly I think <code>print &quot;$_\\n&quot; for @foo</code> (which is the same number of characters) or <code>say for @foo</code> is much better, but feel free to ignore me."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508155213, "post_id": 46766877, "comment_id": 80484802, "body": "@Borodin I see your point. In fact I was thinking about the <code>for</code> solution, but decided not to go with it because I thought it&#39;s more complicated."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 0, "last_activity_date": 1508145661, "creation_date": 1508145661, "answer_id": 46766877, "question_id": 46766709, "link": "https://stackoverflow.com/questions/46766709/perl-save-each-entry-in-file-at-new-line/46766877#46766877", "title": "Perl - Save each entry in file at new line", "body": "<p>If you want it to print newlines, you need to tell it that.</p>\n\n<pre><code>my @foo = (1, 2, 3);\nprint @foo;\n</code></pre>\n\n<p>This will print</p>\n\n<p>123</p>\n\n<p>That's because the array <code>@foo</code> is taken as the list of arguments to <code>print</code>, which will just output all the arguments one after another.</p>\n\n<pre><code>my @foo = (1, 2, 3);\nprint \"@foo\";\n</code></pre>\n\n<p>Now this will print</p>\n\n<pre><code>1 2 3\n</code></pre>\n\n<p>because an array inside a double quoted <code>\"\"</code> string is being interpolated using the <code>$,</code> <a href=\"https://perldoc.perl.org/perlvar.html#%24%2C\" rel=\"nofollow noreferrer\">output field separator</a>, which is a blank space <code></code> by default.</p>\n\n<p>If you want it to use newlines, the easiest way is to <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\"><code>join</code></a> your array with <code>\\n</code>, which produces a single string as the argument for <code>print</code>.</p>\n\n<pre><code>my @foo = ( 1, 2, 3 );\nprint join \"\\n\", @foo;\n</code></pre>\n\n<p>That will give you</p>\n\n<pre><code>1\n2\n3\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8680621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d44602a32f9b972e0155752e36a4551f?s=128&d=identicon&r=PG&f=1", "display_name": "Manik Sharma", "link": "https://stackoverflow.com/users/8680621/manik-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 1, "accepted_answer_id": 46766877, "answer_count": 1, "score": 0, "last_activity_date": 1508154344, "creation_date": 1508145105, "last_edit_date": 1508154344, "question_id": 46766709, "link": "https://stackoverflow.com/questions/46766709/perl-save-each-entry-in-file-at-new-line", "title": "Perl - Save each entry in file at new line", "body": "<p>I am working on a Perl script that checks the contents of a directory using <code>glob</code> and then writes the output to a new file. But the each entries in the file are separated using spaces and I need it to print each entry in new line. My code is like this</p>\n\n<pre><code>open(New, \"&gt;/u/smanik/xyz.txt\");\n\n@files = glob('/user/manik/*.csv');\n$size  = @files;\n\nprint \"Total no of files: $size \\n\";\n\nprint New @files;\n\nopen(New, \"/user/manik/xyz.txt\");\nwhile ( &lt;New&gt; ) {\n    print \"$_\";\n}\n\nclose(New);\n</code></pre>\n\n<p>This is giving output by printing in the file as</p>\n\n<pre><code>/user/manik/A.csv /user/manik/B.csv\n</code></pre>\n\n<p>But I need it to be printed in the file like this</p>\n\n<pre><code>A.csv\nB.csv\nC.csv\n</code></pre>\n\n<p>I tried by adding <code>\\n</code> in the fifth line but that didn't work.</p>\n"}, {"tags": ["perl", "websocket", "cgi", "infinite-loop"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1508112270, "post_id": 46761140, "comment_id": 80467748, "body": "I don&#39;t see why you think it matters that it was started from a CGI script. Stop the program that way you always do (sending it a signal?)"}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1508138283, "post_id": 46761140, "comment_id": 80474878, "body": "You want to stop it with an external process? For example you want to have an app that watches on the timestamp of the script and when it changes you want it to stop the script execution and run it again?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508176501, "post_id": 46766591, "comment_id": 80498072, "body": "Everything points to a program launched from the CGI script, so the apache process is not the parent as you claim, but <code>init</code> (after its previous parent, the CGI script, existed). Restarting apache won&#39;t help."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508176685, "post_id": 46766591, "comment_id": 80498184, "body": "@ikegami I took a quick look at <a href=\"https://metacpan.org/source/TOPAZ/Net-WebSocket-Server-0.003004/lib/Net/WebSocket/Server.pm\" rel=\"nofollow noreferrer\">the source of Net::WebSocket::Server</a> and I think that in fact the CGI script that apache started keeps running in an endless loop. What points you to the conclusion that it&#39;s a program launched from that script?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508176770, "post_id": 46766591, "comment_id": 80498238, "body": "CGI scripts can&#39;t run forever, and the OP says it runs in the background."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508176846, "post_id": 46766591, "comment_id": 80498276, "body": "@ikegami hmm. True, apache would kill it after 5 minutes or something. You&#39;re right."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1508144714, "creation_date": 1508144714, "answer_id": 46766591, "question_id": 46761140, "link": "https://stackoverflow.com/questions/46761140/terminate-running-perl-script-started-with-cgi/46766591#46766591", "title": "Terminate running perl script started with CGI", "body": "<p>You didn't say what operating system you are on, so we cannot give you specific advice on how to find and kill the process. But you can always restart the web server application. CGI scripts are children of the server process (probably an Apache) that starts them. If you simply restart the Apache server, they should all be terminated.</p>\n\n<p>Please don't put code that is supposed to run persistently in your cgi-bin directory. That's a bad idea, as you discovered.</p>\n"}], "owner": {"reputation": 4061, "user_id": 3393058, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/TmKho.png?s=128&g=1", "display_name": "Aloso", "link": "https://stackoverflow.com/users/3393058/aloso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508144714, "creation_date": 1508110951, "question_id": 46761140, "link": "https://stackoverflow.com/questions/46761140/terminate-running-perl-script-started-with-cgi", "title": "Terminate running perl script started with CGI", "body": "<p>I am creating a Perl script that creates a <code>Net::WebSocket::Server</code> on port 3000. Now I had the (not so brilliant) idea to start the script in the browser via CGI, so it runs in the background and can't be stopped. However, I have to restart the script whenever I modify it.</p>\n\n<p>Is it possible to stop a CGI script in an endless loop, except by restarting the computer?</p>\n"}, {"tags": ["regex", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 15789, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 0, "creation_date": 1508105094, "post_id": 46760439, "comment_id": 80466242, "body": "@randomir yes, forward-slash and an integer (see edit above; sorry about that)"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1508105456, "post_id": 46760439, "comment_id": 80466337, "body": "please check my solution once too on same."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1508140108, "post_id": 46760439, "comment_id": 80475824, "body": "<i>&quot;Is there another choice more efficient that sed?&quot;</i> -- what makes you think <code>sed</code> is not efficient?"}], "answers": [{"comments": [{"owner": {"reputation": 15789, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 0, "creation_date": 1508105168, "post_id": 46760476, "comment_id": 80466263, "body": "Now, just add <code>awk &#39;sub(&#47;\\&#47;[0-9]$&#47;,&quot;&quot;)&#39;</code>, and we&#39;re done here. :)"}, {"owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1508105217, "post_id": 46760476, "comment_id": 80466274, "body": "I&#39;m sorry, it should be forward-slash. See edit above. Sorry about that!"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1508105555, "post_id": 46760476, "comment_id": 80466361, "body": "Updated. My awk-fu is weak, is it <code>awk &#39;{sub(&quot;&#47;[0-9]$&quot;,&quot;&quot;);print}&#39;</code>?"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1508105833, "post_id": 46760476, "comment_id": 80466431, "body": "@choroba, that awk should fly sir."}, {"owner": {"reputation": 15789, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 0, "creation_date": 1508106177, "post_id": 46760476, "comment_id": 80466517, "body": "@choroba, either that, or the one above.. Which can be even shorter, yes, <code>awk &#39;sub(&quot;&#47;[0-9]$&quot;,&quot;&quot;)&#39;</code>.."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1508105511, "last_edit_date": 1508105511, "creation_date": 1508105059, "answer_id": 46760476, "question_id": 46760439, "link": "https://stackoverflow.com/questions/46760439/how-to-use-sed-to-remove-endings-on-strings-in-text-file/46760476#46760476", "title": "How to use sed to remove endings on strings in text file?", "body": "<p>Slash needs to be backslashed not to mean the substitution delimiter:</p>\n\n<pre><code>sed 's/\\/[0-9]$//'\n</code></pre>\n\n<p>You can use a different delimiter to avoid the need to backslash:</p>\n\n<pre><code>sed 's=/[0-9]$=='\n</code></pre>\n\n<p>For Perl, the substitution is exactly the same, you just need the <code>-p</code> flag to print the output, and <code>-e</code> to introduce the code to evaluate:</p>\n\n<pre><code>perl -pe 's=/[0-9]$=='\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1508105299, "creation_date": 1508105299, "answer_id": 46760510, "question_id": 46760439, "link": "https://stackoverflow.com/questions/46760439/how-to-use-sed-to-remove-endings-on-strings-in-text-file/46760510#46760510", "title": "How to use sed to remove endings on strings in text file?", "body": "<p>You haven't showed your sample Input_file for removing # at the last of the line so I edited your shown Input_file  bit. Let's say following is the Input_file.</p>\n\n<pre><code>cat Input_file\ntags\nrs:23269:DFDAB:18/21\nrs:10760:DFDAB:160/1\nrs:97759:DFDAB:0/2\nrs:17278:DFDAB:013/1\nrs:7323:DFDAB:548/2\nrs:1236:DFDAB:4336/1\nrs:1256:DFDAB:2373/1\nrs:1236:DFDAB:4336/#\nrs:1256:DFDAB:2373/#\n</code></pre>\n\n<p>Then following sed may help here to remove digits at last and # at last too.</p>\n\n<pre><code>sed 's/\\/[0-9]*$//;s/\\/#$//'   Input_file\ntags\nrs:23269:DFDAB:18\nrs:10760:DFDAB:160\nrs:97759:DFDAB:0\nrs:17278:DFDAB:013\nrs:7323:DFDAB:548\nrs:1236:DFDAB:4336\nrs:1256:DFDAB:2373\nrs:1236:DFDAB:4336\nrs:1256:DFDAB:2373\n</code></pre>\n\n<p>In case your Input_file doesn't have # in them then please use only following.</p>\n\n<pre><code>sed 's/\\/[0-9]*$//' Input_file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 8487363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a94a542ecd275fa20b9c60056e103037?s=128&d=identicon&r=PG&f=1", "display_name": "kart1657", "link": "https://stackoverflow.com/users/8487363/kart1657"}, "is_accepted": false, "score": 1, "last_activity_date": 1508172834, "creation_date": 1508172834, "answer_id": 46775323, "question_id": 46760439, "link": "https://stackoverflow.com/questions/46760439/how-to-use-sed-to-remove-endings-on-strings-in-text-file/46775323#46775323", "title": "How to use sed to remove endings on strings in text file?", "body": "<p>Below one liner will give you the desired output</p>\n\n<pre><code>perl -pi -e \"s/\\/[0-9]+$|\\/#+$//g\" file1.txt \n</code></pre>\n\n<p>out put:</p>\n\n<pre><code>rs:23269:DFDAB:18\nrs:10760:DFDAB:160\nrs:97759:DFDAB:0\nrs:17278:DFDAB:013\nrs:7323:DFDAB:548\nrs:1236:DFDAB:4336\nrs:1256:DFDAB:2373\n</code></pre>\n\n<p>where:</p>\n\n<pre><code>\\/[0-9]+$ : anything ending with '/' followed by [any number between 0-9]\n\n (or)\n\n#+$       : one or more '#'   \n</code></pre>\n"}], "owner": {"reputation": 12258, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 46760476, "answer_count": 3, "score": 0, "last_activity_date": 1508172834, "creation_date": 1508104845, "last_edit_date": 1508105171, "question_id": 46760439, "link": "https://stackoverflow.com/questions/46760439/how-to-use-sed-to-remove-endings-on-strings-in-text-file", "title": "How to use sed to remove endings on strings in text file?", "body": "<p>I have the following text file, which is one long column of strings:</p>\n\n<pre><code>$ cat file1.txt\n\ntags\nrs:23269:DFDAB:18/1\nrs:10760:DFDAB:160/1\nrs:97759:DFDAB:0/2\nrs:17278:DFDAB:013/1\nrs:7323:DFDAB:548/2\nrs:1236:DFDAB:4336/1\nrs:1256:DFDAB:2373/1\n</code></pre>\n\n<p>These strings need to have the ending <code>/1</code> or <code>/2</code> removed. I think <code>sed</code> would be the best for this (or perhaps another regex-friendly tool, e.g. perl)</p>\n\n<p>I think <code>sed 's/[0-9]+$//' file1.txt</code> will remove all integers at the end of each string, but how do I remove <code>/#</code>? </p>\n\n<p>Is there another choice more efficient that <code>sed</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1508090494, "post_id": 46757994, "comment_id": 80461746, "body": "rand(5) will return a number from 0 to 4.9999...; int makes it an integer from 0-4"}, {"owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "edited": false, "score": 0, "creation_date": 1508090659, "post_id": 46757994, "comment_id": 80461819, "body": "This might be a helpful resource: <a href=\"https://perldoc.perl.org/perlintro.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlintro.html</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508120197, "post_id": 46757994, "comment_id": 80469390, "body": "The keys (indexes) of <code>@numbers</code> are <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>, <code>5</code>, <code>6</code>, <code>7</code>, <code>8</code> and <code>9</code>. <code>a</code>, <code>b</code> and <code>c</code> aren&#39;t even valid keys (indexes) for an array."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8780445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d6015fbc7c59a2afdfc0d58bd3e440?s=128&d=identicon&r=PG&f=1", "display_name": "Slippy", "link": "https://stackoverflow.com/users/8780445/slippy"}, "edited": false, "score": 0, "creation_date": 1508096915, "post_id": 46758208, "comment_id": 80463958, "body": "It&#39;s not working for me when I try your code. Do I need to convert the hash into an array first?"}], "tags": [], "owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "is_accepted": false, "score": 0, "last_activity_date": 1508090501, "last_edit_date": 1508090501, "creation_date": 1508090189, "answer_id": 46758208, "question_id": 46757994, "link": "https://stackoverflow.com/questions/46757994/how-to-print-specific-key-in-an-array-perl/46758208#46758208", "title": "How to print specific key in an array (Perl)", "body": "<p>There's many ways to do it.  For example, declare \"numbers\" as a hash rather than an array.  Note that the keys come first in each key-value pair, and here you want to use your random int as the key:</p>\n\n<pre><code>my %numbers = ( 0 =&gt; 'a', 1 =&gt; 'b', 2 =&gt; 'c', 3 =&gt; 'd', 4 =&gt; 'e' );\n</code></pre>\n\n<p>Then you can look up the \"key\" as you call it using:</p>\n\n<pre><code>my $key = $numbers{$x};\n</code></pre>\n\n<p>Note that <a href=\"https://perldoc.perl.org/functions/rand.html\" rel=\"nofollow noreferrer\"><code>rand( $x );</code></a> returns a number greater than or equal to zero and <em>less than $x</em>.  So if you want integers in the range 1-5, you must add 1 in your code: at the moment you'll get 0-4, not 1-5.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1508174914, "post_id": 46759381, "comment_id": 80497248, "body": "@Slippy I added discussion of a more complex case, when values of some keys are the same."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 0, "last_activity_date": 1508180769, "last_edit_date": 1508180769, "creation_date": 1508097359, "answer_id": 46759381, "question_id": 46757994, "link": "https://stackoverflow.com/questions/46757994/how-to-print-specific-key-in-an-array-perl/46759381#46759381", "title": "How to print specific key in an array (Perl)", "body": "<p>It seems that you want to do a reverse lookup, key-by-value, opposite to what we get from a hash.  Since a hash is a list you can <a href=\"https://perldoc.perl.org/functions/reverse.html\" rel=\"nofollow noreferrer\">reverse</a> it and use the resulting hash to look up by number.</p>\n\n<p>A couple of corrections: you need a <a href=\"https://perldoc.perl.org/perlintro.html#Hashes\" rel=\"nofollow noreferrer\">hash variable</a> (not an array), and you need to add <code>1</code> to your <a href=\"https://perldoc.perl.org/functions/rand.html\" rel=\"nofollow noreferrer\">rand</a> integer generator so to have the desired <code>1..5</code> range</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy %numbers = (a =&gt; 1, b =&gt; 2, c =&gt; 3, d =&gt; 4, e =&gt; 5);\n\nmy %lookup_by_number = reverse %numbers;  # values need be unique\n\nmy $range = 5;\nmy $x = int(rand $range) + 1;\n\nsay $lookup_by_number{$x};\n</code></pre>\n\n<p>Without reversing the hash you'd need to iterate the hash <code>%numbers</code> over <a href=\"https://perldoc.perl.org/functions/values.html\" rel=\"nofollow noreferrer\">values</a>, testing each against <code>$x</code> so to find its key. </p>\n\n<p>If there are same values for various keys in your original hash then you have to do it by hand since <code>reverse</code>-ing would attempt to create a hash with duplicate keys, in which case only the last one assigned remains. So you'd lose some values. One way</p>\n\n<pre><code>my @at_num = grep { $x == $numbers{$_} } keys %numbers;\n</code></pre>\n\n<p>as in <a href=\"https://stackoverflow.com/questions/8221463/simple-hash-search-by-value\">the post</a> that this was marked as duplicate of.</p>\n\n<hr>\n\n<p>But then you should build a data structure for reverse lookup so to not search through the list every time information is needed. This can be a hash where keys are the list of unique numbers while their values are then array references (<em>arrayrefs</em>) with corresponding keys from the original hash</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy %num = (a =&gt; 1, b =&gt; 2, c =&gt; 1, d =&gt; 3, e =&gt; 2);  # with duplicate values\n\nmy %lookup_by_num;\n\nforeach my $key (keys %num) {\n    push @{ $lookup_by_num{$num{$key}} }, $key;\n}\n\nsay \"$_ =&gt; [ @{$lookup_by_num{$_}} ]\" for keys %lookup_by_num;\n</code></pre>\n\n<p>This prints</p>\n\n<pre>\n1 => [ c a ]\n3 => [ d ]\n2 => [ e b ]\n</pre>\n\n<p>A nice way to display complex data structures is via <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\">Data::Dumper</a>, or <a href=\"http://search.cpan.org/~gaas/Data-Dump-1.23/lib/Data/Dump.pm\" rel=\"nofollow noreferrer\">Data::Dump</a> (or others).</p>\n\n<p>The expression <code>@{ $lookup_by_num{ $num{$key} } }</code> extracts the value of <code>%lookup_by_num</code> for the key <code>$num{$key}</code>and dereferences it <code>@{ ... }</code>, so that it can then <code>push</code> the <code>$key</code> to it.  The critical part of this is that the first time it  encounters <code>$num{$key}</code> it <em>autovivifies</em> the arrayref and its corresponding key.  See <a href=\"https://stackoverflow.com/a/45872658/4653379\">this post</a> with its references for details.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1508145903, "creation_date": 1508145903, "answer_id": 46766947, "question_id": 46757994, "link": "https://stackoverflow.com/questions/46757994/how-to-print-specific-key-in-an-array-perl/46766947#46766947", "title": "How to print specific key in an array (Perl)", "body": "<p>Firstly, arrays don't have keys (well, they kind of do, but they're integers and not the values you want). So I think you want a hash, not an array.</p>\n\n<pre><code>my %numbers = (a =&gt;1, b=&gt; 2, c =&gt; 3, d =&gt;4, e =&gt; 5);\n</code></pre>\n\n<p>And if you want to get the letter, given the integer then you need the reverse of this hash:</p>\n\n<pre><code>my %rev_numbers = %numbers;\n</code></pre>\n\n<p>Note that reversing a hash like this only works if the values in your original hash are unique (because reversing a hash makes the values into keys and hash keys are always unique).</p>\n\n<p>Then, you can just look up an integer in your <code>%rev_hash</code> to get its associated letter.</p>\n\n<pre><code>my $integer = 3;\nsay $rev_numbers{$integer}; # prints 'c'\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8780445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d6015fbc7c59a2afdfc0d58bd3e440?s=128&d=identicon&r=PG&f=1", "display_name": "Slippy", "link": "https://stackoverflow.com/users/8780445/slippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1059, "favorite_count": 0, "closed_date": 1508163181, "accepted_answer_id": 46759381, "answer_count": 3, "score": 2, "last_activity_date": 1508180769, "creation_date": 1508088956, "question_id": 46757994, "link": "https://stackoverflow.com/questions/46757994/how-to-print-specific-key-in-an-array-perl", "closed_reason": "Duplicate", "title": "How to print specific key in an array (Perl)", "body": "<p>I recently started learning Perl, so I'm not too familiar with the functions and syntax.\nIf I have a Perl array and some variables,</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy @numbers = (a =&gt;1, b=&gt; 2, c =&gt; 3, d =&gt;4, e =&gt; 5);\nmy $x;\nmy $range = 5;\n$x = int(rand($range));\nprint \"$x\";\n</code></pre>\n\n<p>to generate a random number between 1-5, how can I get the program to print the actual key (a, b, c, etc.) instead of just the number (1, 2, 3, 4, 5)? </p>\n"}, {"tags": ["perl", "yaml"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508078124, "post_id": 46756066, "comment_id": 80457660, "body": "What is the <i>dumper</i> you are referring to? Please show the JSON output that matches your YAML input."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508078988, "post_id": 46756066, "comment_id": 80457917, "body": "Ok, and how do you read the <code>$configFile</code>? Please show your code, what it outputs and what you want it to output instead."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508080360, "post_id": 46756066, "comment_id": 80458347, "body": "I think there&#39;s a misunderstanding: The output of <a href=\"https://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>Data::Dumper</code></a> is <i><b>not</b></i> JSON. It&#39;s Perl&#39;s data representation of a given variable. \u2013 Although it often contains many <code>{}</code> and <code>[]</code> characters."}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1508081170, "post_id": 46756066, "comment_id": 80458619, "body": "Attached code above! There should be some newbie silly mistakes I guess :("}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1508082567, "post_id": 46756902, "comment_id": 80459062, "body": "Can you provide some explanation?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508082680, "post_id": 46756902, "comment_id": 80459108, "body": "Probably LoadFile returns different things when called in list vs. scalar context. I thougt the YAML isn&#39;t valid and has to be indented and preceeded with a dash for each record. But the <code>@conf</code> thingy is far cooler."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1508092701, "post_id": 46756902, "comment_id": 80462583, "body": "<code>YAML::LoadFile</code> returns a list of data structures represented by each independent YAML document inside the stream. In scalar context, as with any list being assigned, this will be the last element in that list. I think the OP has overlooked that when saying it was the first section (John&#39;s)."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1508093006, "post_id": 46756902, "comment_id": 80462685, "body": "The YAML file in the question is syntactically correct and valid. But I sincerely doubt the correctness off it, considering <code>- key1: value1</code> and <code>- key2: value2</code> is probably not what the OP wants. That is generating a list containing 2 elements, each a hashref like { key1 =&gt; &#39;value1&#39; }, { key2 =&gt; &#39;value2&#39; }<code>; Others</code> is <b>not</b> a single hash with two key/value pairs in it like <code>{ key1 =&gt; &#39;value1, key2 =&gt; </code>value2` }` -- of course, it could be what the OP wanted, but such construct usually is only required when the same key can be used within the same level, with different values, like CGI query"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1508134016, "post_id": 46756902, "comment_id": 80472883, "body": "Thanks all. Is there a way to pick a particular value from any of the document on demand without traversing all the documents? For example if I need to pick the age of Doe, is there a straight forward way?"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1508279116, "post_id": 46756902, "comment_id": 80547140, "body": "I&#39;ve added two solutions on my answer - based on the corrected YAML - for printing the employee age. There is a reason why in real-life, we use Social-Security numbers or other ways to uniquely identify people - and use ID&#39;s in databases etc. --- You can probably figure out how to hold my solution around the answers given by others. - The true nightmare starts when trying to do something with the info stored under <code>other:</code> and will see why I recommended to correct the YAML file - that is, that would be the right thing to do, if you are the creator of that file too"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1508113170, "last_edit_date": 1508113170, "creation_date": 1508082411, "answer_id": 46756902, "question_id": 46756066, "link": "https://stackoverflow.com/questions/46756066/perl-parsing-yaml-containing-multiple-documents-and-accessing-objects/46756902#46756902", "title": "Perl - Parsing YAML containing multiple documents and accessing objects", "body": "<p>The yaml presented offers 4 documents, not an array of 4 items, so you just need to dereference those.  Have a read of the docs:\n<a href=\"http://search.cpan.org/~tinita/YAML-LibYAML-0.66/lib/YAML/XS.pod\" rel=\"nofollow noreferrer\">perldoc YAML::XS</a></p>\n\n<p>Change:</p>\n\n<pre><code>my $config = LoadFile('input2.yml');\n</code></pre>\n\n<p>To: </p>\n\n<pre><code>my @conf = LoadFile('input2.yml');\nmy $config = \\@conf;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1508134046, "post_id": 46757389, "comment_id": 80472893, "body": "Thanks all. Is there a way to pick a particular value from any of the document on demand without traversing all the documents? For example if I need to pick the age of Doe, is there a straight forward way?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1508090704, "last_edit_date": 1508090704, "creation_date": 1508085456, "answer_id": 46757389, "question_id": 46756066, "link": "https://stackoverflow.com/questions/46756066/perl-parsing-yaml-containing-multiple-documents-and-accessing-objects/46757389#46757389", "title": "Perl - Parsing YAML containing multiple documents and accessing objects", "body": "<p>Unlike JSON, YAML may contain multiple documents. Each of them begins with <code>---</code> in the data stream, and the end of the last document is indicated by <code>...</code></p>\n\n<p>The YAML data that you are using contains four such documents, which are returned by <code>LoadFile</code> as a list of references. If you assign that list to a scalar variable then it will pick up the last element, so you need to put the result into an array (or a list of scalar variables)</p>\n\n<p>This code will do as you ask. It retrieves the YAML data into array <code>@config</code> and then uses <code>map</code> to extract the <code>emp_name</code> element of each hash</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse YAML::XS 'LoadFile';\n\nmy @config = LoadFile 'input2.yml';\n\nmy @names = map { $_-&gt;{emp_name} } @config;\n\nsay for @names;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>John\nDoe\nfoo\nBar\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": -1, "last_activity_date": 1508269783, "last_edit_date": 1508269783, "creation_date": 1508086436, "answer_id": 46757561, "question_id": 46756066, "link": "https://stackoverflow.com/questions/46756066/perl-parsing-yaml-containing-multiple-documents-and-accessing-objects/46757561#46757561", "title": "Perl - Parsing YAML containing multiple documents and accessing objects", "body": "<p>Let us first consider some basic knowledge about YAML, instead of the file itself.</p>\n\n<p>A file containing a <strong>YAML stream</strong> can contain multiple <em>unrelated</em> <strong>YAML documents</strong> of complete different data structure, separated by <code>---</code>.</p>\n\n<p>Your file seems to contain <em>records</em> of the same structure and you probably wanted only one document, containing a <strong>YAML sequence</strong> of <em>records</em>, each record being a <strong>YAML mapping</strong>.</p>\n\n<p>Below is what you SHOULD have had:</p>\n\n<pre><code>- emp_name: John\n  emp_age: 27\n  DOB: 1/1/1990\n  others:\n    key1: value1\n    key2: value2\n- emp_name: Doe\n  emp_age: 25\n  DOB: 1/1/1992\n  others:\n    key1: value1\n    key2: value2\n- emp_name: foo\n  emp_age: 22\n  DOB: 1/1/1995\n  others:\n    key1: value1\n    key2: value2\n- emp_name: Bar\n  emp_age: 21\n  DOB: 1/1/1996\n  others:\n    key1: value1\n    key2: value2\n</code></pre>\n\n<p><em>note the difference; 1 document; each record starts with the line containing the <code>-</code>; <code>others</code> is now a true <strong>mapping</strong> and not a <strong>sequence</strong> of single mappings (<code>- key: value</code>, removed the <code>-</code>)</em></p>\n\n<p>Now the following code would read the contents of the file, into a single variable, that holds an ArrayRef to the entire data structure of that <strong>single YAML document</strong>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse YAML;\n\nmy $data = YAML::LoadFile('input2_correct.yml');\n\nuse Data::Dumper;\nprint Dumper $data;\n</code></pre>\n\n<p>FYI: using <code>YAML::LoadFile</code> in list context reads all the seperate documents.</p>\n\n<p>Please fix your YAML file!</p>\n\n<p>From this point on, one can easily use <code>map</code> to manipulate the Perl data structure in a hash, if needed, or print the names:</p>\n\n<pre><code>print \"$_-&gt;{emp_name}\\n\" foreach @$data;\n</code></pre>\n\n<p>Or, if you want to print the age off all 'Doe' records ...</p>\n\n<pre><code>my $name = 'Doe';\n\nforeach my $emp_record ( @$data ) {\n    next unless $emp_record-&gt;{emp_name} eq $name;\n    # do what you like to do with the record\n    print \"$emp_record-&gt;{emp_age}\\n\";\n}\n</code></pre>\n\n<p>If there is only ever going to be 1 record 'Doe', the code below will print the age for the <em>first</em> 'Doe':</p>\n\n<pre><code>my ($found) = grep { $_-&gt;{emp_name} eq $name } @$data;\nprint \"$found-&gt;{emp_age}\\n\";\n</code></pre>\n\n<p><em><code>grep</code> will reduce the list to only those that evaluate true in the given expression. <code>my (found)</code> causes a list context for grep and will be assigned the first of the reduced list</em></p>\n"}], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 0, "accepted_answer_id": 46756902, "answer_count": 3, "score": 1, "last_activity_date": 1508380905, "creation_date": 1508077273, "last_edit_date": 1508380905, "question_id": 46756066, "link": "https://stackoverflow.com/questions/46756066/perl-parsing-yaml-containing-multiple-documents-and-accessing-objects", "title": "Perl - Parsing YAML containing multiple documents and accessing objects", "body": "<p>I am trying to get data from a YAML file for my perl script.</p>\n\n<p>Following is a similar sample scenario:</p>\n\n<p>Let us consider a YAML file for employee data.</p>\n\n<pre><code>---\nemp_name: John\nemp_age: 27\nDOB: 1/1/1990\nothers:\n  - key1: value1\n  - key2: value2\n---\nemp_name: Doe\nemp_age: 25\nDOB: 1/1/1992\nothers:\n  - key1: value1\n  - key2: value2\n---\nemp_name: foo\nemp_age: 22\nDOB: 1/1/1995\nothers:\n  - key1: value1\n  - key2: value2\n---\nemp_name: Bar\nemp_age: 21\nDOB: 1/1/1996\nothers:\n  - key1: value1\n  - key2: value2\n...\n</code></pre>\n\n<p>I have the above four set of values. I'm trying to get all employee names saved in an array. But I'm unable to get it. </p>\n\n<p>With dumper I am able to print only the first section (John's) file as a JSON, I'm not able to get individual values (eg. get all employee name in an array).</p>\n\n<pre><code>use strict;\nuse warnings;\nuse YAML::XS 'LoadFile';\nuse Data::Dumper;\nmy $config = LoadFile('input2.yml');\nprint Dumper($config), '\\n';\nprint \"Expected output:\\n\";\nprint \"John \\nDoe \\nfoo \\nBar\\n\";\nprint \"--- Actual Output --\";\nmy $empName;\nfor(my $i=0; $i&lt;4; $i++)\n{\n$empName = $config-&gt;[$i]-&gt;{emp_name};\n}\n</code></pre>\n\n<p>Any help?</p>\n\n<p>The above is the code. I would like to fetch list of employee names, but I get an error: <code>Not an ARRAY reference at yamlParser.pl line 15</code></p>\n"}, {"tags": ["javascript", "c#", "php", "regex", "perl"], "comments": [{"owner": {"reputation": 8997, "user_id": 8469069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dnh5z.jpg?s=128&g=1", "display_name": "ishegg", "link": "https://stackoverflow.com/users/8469069/ishegg"}, "edited": false, "score": 0, "creation_date": 1508051670, "post_id": 46752406, "comment_id": 80450984, "body": "Your intention is not all that clear. Do you mean something like <a href=\"https://3v4l.org/U9XUs\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "reply_to_user": {"reputation": 8997, "user_id": 8469069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dnh5z.jpg?s=128&g=1", "display_name": "ishegg", "link": "https://stackoverflow.com/users/8469069/ishegg"}, "edited": false, "score": 0, "creation_date": 1508052196, "post_id": 46752406, "comment_id": 80451103, "body": "I thought about named groups. But I would prefer it to have the arbitrary string in the (match) result. I do not want to achieve anything. I am just curious."}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1508052452, "post_id": 46752406, "comment_id": 80451152, "body": "Lookarounds come to my mind: you look for sth. which might or might not be there and could return other matched characters. Please be more precise on what you want though."}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1508052523, "post_id": 46752406, "comment_id": 80451175, "body": "@Jan. Sure, but if that arbitrary string is not in the test string?"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 2, "creation_date": 1508052638, "post_id": 46752406, "comment_id": 80451201, "body": "@wp78de: To make myself clear, I thought of this: <a href=\"https://regex101.com/r/2OMoO1/1\" rel=\"nofollow noreferrer\">regex101.com/r/2OMoO1/1</a> it returns Berlin or London with the same expression. In general though you cannot return sth. which is not there."}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1508053438, "post_id": 46752406, "comment_id": 80451365, "body": "@Jan I&#39;m afraid that&#39;s most likely the answer: It is not possible. Feel free to post this as an answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508061840, "post_id": 46752406, "comment_id": 80453315, "body": "@wp78de: Strictly, a regex pattern <i>returns</i> only a true/false result saying whether it matched. How do you expect this string to be returned?"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508058287, "post_id": 46753333, "comment_id": 80452474, "body": "But that&#39;s a substitution, not only a pattern."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508058512, "post_id": 46753333, "comment_id": 80452530, "body": "@simbabque It&#39;s a regex which returns an arbitrary string if a pattern matches. (Nearly a quotation of the question.) An &quot;only-a-pattern&quot; has a meaning only in the context of a regex of some sort; I think it doesn&#39;t matter that it is a substitution since it returns.  I am indeed not entirely clear on what exactly is desired but this does what I read in the question, I think."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508058817, "post_id": 46753333, "comment_id": 80452602, "body": "I agree with all your points, and I would have given the same answer. And yet, it bugged me that the actual regex is just the pattern. That <code>s&#47;&#47;&#47;</code> is actually the substitution operator. So if we allow colloquial use of the term <i>regex</i> I would say this answers perfectly. I&#39;m probably just splitting hairs. ;-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1508059423, "post_id": 46753333, "comment_id": 80452734, "body": "@simbabque  Right, it does (duly) get into semantics; what <i>exactly</i> is asked for? I&#39;d consider the pattern itself not to have an operable meaning in the code (it does for the engine); different things happen with <code>m&#47;</code> and <code>s&#47;</code> once it matches.  If we were to expect a (captured) pattern to &quot;return&quot;, it is the <code>m&#47;</code> that returns (well, or <code>s&#47;&#47;&#47;r</code>). Thus I&#39;d go with the wider meaning of &quot;regex.&quot;"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1508105573, "post_id": 46753333, "comment_id": 80466364, "body": "@zdim I have to agree. When I started out to explore my options here I also considered a regex replace but rejected it. After your answer, I am more inclined to regard it as the best, maybe only option."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1613621525, "last_edit_date": 1613621525, "creation_date": 1508057498, "answer_id": 46753333, "question_id": 46752406, "link": "https://stackoverflow.com/questions/46752406/regex-match-pattern-x-but-return-an-arbitrary-string-y-instead/46753333#46753333", "title": "Regex match pattern x but return an arbitrary string y instead", "body": "<p>The non-destructive <code>/r</code> <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">modifier</a> <em>returns</em> the changed string, if the pattern matched</p>\n<pre><code>my $arb_str =  $string =~ s/$pattern/arbitrary-string/r;\n</code></pre>\n<p>Available <a href=\"https://perldoc.perl.org/perl5140delta.html#Regular-Expressions\" rel=\"nofollow noreferrer\">since 5.14.0</a></p>\n"}, {"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 2, "last_activity_date": 1508057504, "creation_date": 1508057504, "answer_id": 46753335, "question_id": 46752406, "link": "https://stackoverflow.com/questions/46752406/regex-match-pattern-x-but-return-an-arbitrary-string-y-instead/46753335#46753335", "title": "Regex match pattern x but return an arbitrary string y instead", "body": "<p>Answer: you can not get anything out of a string with regular expressions which is not there. You may look for strings with lookaheads and can return other part of that string, e.g. with</p>\n\n<pre><code>\\b\\w+\\b(?=\\W*wp78de)\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/2OMoO1/1/\" rel=\"nofollow noreferrer\"><strong>a demo on regex101.com</strong></a>.<br>\n<hr>\nTo have what you want you'll most likely need some sort of programming language:</p>\n\n<pre><code>if ($match) {\n    return \"some string here\";\n} else {\n    return \"some other string\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1508086178, "creation_date": 1508086178, "answer_id": 46757517, "question_id": 46752406, "link": "https://stackoverflow.com/questions/46752406/regex-match-pattern-x-but-return-an-arbitrary-string-y-instead/46757517#46757517", "title": "Regex match pattern x but return an arbitrary string y instead", "body": "<p>No, this is not a thing that regular expressions do.  But then regular expression matches don't necessarily \"return\" anything.  What you are asking is going to have its answer, if anywhere, in the details of the language using the regular expression.  If you would explain your actual problem, and the context in which you are using a regular expression, you will have a much better chance of getting a helpful answer.</p>\n"}], "owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 46753333, "answer_count": 3, "score": 2, "last_activity_date": 1613621525, "creation_date": 1508049608, "last_edit_date": 1508106206, "question_id": 46752406, "link": "https://stackoverflow.com/questions/46752406/regex-match-pattern-x-but-return-an-arbitrary-string-y-instead", "title": "Regex match pattern x but return an arbitrary string y instead", "body": "<p>Is it possible to match a certain pattern but return a different, arbitrary string (that is not necessarily embodied in the test string)? I want the regex to return the arbitrary string.</p>\n\n<p>Embedded Perl code would do, or just handle the returning part with the surrounding programming language. But I am curious to know if it is possible to do just with a regex. Let me formulate it as a (wrong) if-statement pattern.</p>\n\n<pre><code>(?(?=test)\"true\"|\"false\")\n</code></pre>\n\n<p>I have no specific regex dialect in mind, but it would be great to be able to do this in a general-purpose language like C#, PHP, Perl, JavaScript or Python. So, please no dedicated software. </p>\n\n<hr>\n\n<p>My understanding of regex tells me that you cannot return something which is not there (as revived by Jan), and strictly, a regex pattern returns only a true/false result saying whether it matched (as pointed out by Borodin). But still.</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"comments": [{"owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "edited": false, "score": 0, "creation_date": 1508017148, "post_id": 46749474, "comment_id": 80445232, "body": "Thanks @simbabque. This helps my understanding a lot"}, {"owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "edited": false, "score": 0, "creation_date": 1508078251, "post_id": 46749474, "comment_id": 80457691, "body": "Hey @simbabque, just a follow up question. Why does the empty string need to be added? Won&#39;t that cause a mismatch in indicies of the two arrays? Or does the appending replace the empty string?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "edited": false, "score": 1, "creation_date": 1508080606, "post_id": 46749474, "comment_id": 80458431, "body": "@KyleWeise you need to add something so the last index goes one up. If you add the undefined value and then append you will get a warning about using an undefined value in a concatenation. If you use the empty string, you will not. Appending text to an empty string will give you essentially the text. It will not be replaced."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1508016224, "creation_date": 1508016224, "answer_id": 46749474, "question_id": 46749107, "link": "https://stackoverflow.com/questions/46749107/push-on-to-array-until-some-value/46749474#46749474", "title": "Push on to array until some value", "body": "<p>You don't need to <code>push</code> to <code>@data</code> when there is no header. That would add a new element. What you want to do is <em>append</em> to the last element. Perl allows you to use the index <code>[-1]</code> to get the last element of an array. So you can easily add a new element to <code>@data</code> at the same time you add one to <code>@headers</code>, because they correspond.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy (@headers, @data);\n\nwhile (&lt;DATA&gt;) {\n    chomp; # no need for $_ here\n\n    if ( m/^&gt;/ ) { # no need for $_ here either\n        push @headers, $_;\n        push @data, q{}; # the empty string\n    } else {\n        $data[-1] .= $_;\n    }\n}\n\n__DATA__\n&gt;Header 1\ndata1\ndata2\ndata3\n&gt;Header 2\ndata4\ndata5\ndata6\n&gt;Header 3\n</code></pre>\n\n<p>This will produce these to data structures (output with <a href=\"https://p3rl.org/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a>).</p>\n\n<pre><code>[\n    [0] \"&gt;Header 1\",\n    [1] \"&gt;Header 2\",\n    [2] \"&gt;Header 3\"\n]\n[\n    [0] \"data1data2data3\",\n    [1] \"data4data5data6\",\n    [2] \"\"\n]\n</code></pre>\n\n<p>Note that in most cases, you don't need to use <code>$_</code> explicitly because many operators use them by default if nothing else is given. You also do not need a capture group <code>()</code> in your pattern around the bracket. You're not using <code>$1</code>, so that's a waste of resources.</p>\n"}, {"comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1508031184, "post_id": 46749546, "comment_id": 80447665, "body": "unfortunately, both solutions do need to do &#39;something&#39; with <code>@data</code> when we&#39;re inside the <code>head</code> conditional-branch. But the nice thing with the <code>@sequences</code> is that we can do a <code>push @data, join &#39;, &#39;, @sequences</code> which makes that string a bit more readable"}, {"owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "edited": false, "score": 0, "creation_date": 1508033161, "post_id": 46749546, "comment_id": 80447948, "body": "Sorry for the confusion guys, <code>@sequences</code> and <code>@data</code>are actually the same array. In my actual code I have it as <code>@sequences</code> and thought <code>@data</code> would be more explicit in the context of my question. I edited this in my original question. Regardless, this is interesting solution nonetheless!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508058496, "post_id": 46749546, "comment_id": 80452523, "body": "When I saw the question there was no <code>@sequences</code> at all."}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 0, "last_activity_date": 1508016741, "creation_date": 1508016741, "answer_id": 46749546, "question_id": 46749107, "link": "https://stackoverflow.com/questions/46749107/push-on-to-array-until-some-value/46749546#46749546", "title": "Push on to array until some value", "body": "<p>Following your coding, we could have:</p>\n\n<pre><code>my (@data, @headers, @sequences);\n\nwhile( &lt;$fh&gt; ) {\n  chomp($_);\n\n  if( $_ =~ /(&gt;)/ ) {\n    push @headers, $_;\n    push @data, join @sequences;\n    @sequences = ();\n  }\n  else { \n    push @sequences, $_;   \n  }\n}\npush @data, join @sequences;\n</code></pre>\n\n<p>Every time a new header is found, the data is accummulated and the sequence starts anew. At the end of the loop you need to do the <em>final</em> accummulation.</p>\n\n<p>Also note @simbabque comments about not needing to use <code>$_</code> with most built ins. I have not changed the code to avoid confussion.</p>\n"}], "owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 46749474, "answer_count": 2, "score": 1, "last_activity_date": 1508016983, "creation_date": 1508013440, "last_edit_date": 1508016983, "question_id": 46749107, "link": "https://stackoverflow.com/questions/46749107/push-on-to-array-until-some-value", "title": "Push on to array until some value", "body": "<p>Say I'm looping through some data file that contains header lines. For example,</p>\n\n<pre><code>&gt;Header 1\ndata1\ndata2\ndata3\n&gt;Header 2\ndata4\ndata5\ndata6\n&gt;Header 3\n</code></pre>\n\n<p>I want to push all of the header lines into a <code>@headers</code> array, and then all of the data in a <code>@data</code> array. The relationship should be 1:1, i.e. so that the first element of <code>@headers</code> is \">Header 1\" and the first element of <code>@data</code> is \"data1data2data3\". How can I accomplish this?  So far, I have</p>\n\n<pre><code>my @data;\nmy @headers;\nwhile(&lt;$fh&gt;){\n  chomp($_);\n\n  if($_ =~ /(&gt;)/){\n      push @headers, $_;\n  }\n  else{ \n     push @data, $_;    \n\n  }\n}\n</code></pre>\n\n<p>Which puts each line of data into its own index in <code>@data</code>. Basically if the line begins with a \">\" push it to the <code>@headers</code> array, else push it to the <code>@data</code> array as long as the next line doesn't start with \">\". Not quite sure how to code that last part.</p>\n"}, {"tags": ["perl", "authentication", "dancer"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508015745, "post_id": 46746864, "comment_id": 80444836, "body": "I don&#39;t see why someone would downvote your question. It&#39;s well-written, shows <i>some</i> research (we coulld argue that reading the source shouldn&#39;t be expected, or there was no point in asking at all), it clearly states what you want to do and why, and having a code sample is not relevant here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1508029216, "post_id": 46746864, "comment_id": 80447379, "body": "I created a ticket to move this into the docs: <a href=\"https://github.com/PerlDancer/Dancer2-Plugin-Auth-Extensible-Provider-Database/issues/5\" rel=\"nofollow noreferrer\">github.com/PerlDancer/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1508001991, "post_id": 46746987, "comment_id": 80440684, "body": "Isn&#39;t it possible to create a <i>view</i> on the user table which simply excludes the locked records, and get the authentication to work off that? <code>DBIx::Class::ResultSource::View</code> is a subclass of <code>DBIx::Class::ResultSource</code> so the calling code shouldn&#39;t know any different, but you know far more about Dancer than I."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1508003916, "post_id": 46746987, "comment_id": 80441365, "body": "@Borodin that sounds like a great idea. I didn&#39;t think about it. If that thing uses DBIC under the hood. If not, a regular view would work too. I like it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508016733, "post_id": 46746987, "comment_id": 80445119, "body": "I&#39;m going to try this out @Borodin. If it works out, we can PR it into the docs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508017037, "post_id": 46746987, "comment_id": 80445194, "body": "&quot;PR&quot; == <i>patch request</i>? Yes that sounds great. I was just looking at <code>Dancer2::Plugin::Auth::Extensible::Provider::Database</code> which appears to be database agnostic. To be honest, for no particular reason I thought Dancer was inextricably tied with DBIC, but as you say it will work either way. Let me know how you get on."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508019421, "post_id": 46746987, "comment_id": 80445730, "body": "It&#39;s <i>pull request</i>. But you got the idea, yes. (Maybe you want to participate in <a href=\"https://hacktoberfest.digitalocean.com/\" rel=\"nofollow noreferrer\">hacktoberfest.digitalocean.com</a>, and the <a href=\"http://cpan-prc.org/?\" rel=\"nofollow noreferrer\">cpan-prc.org/?</a>) Dancer is not at all tied with DBIC. I think they use it in the examples, and it works well together, but you can have plain DBI without problems. I used to be closer to the Dancer people because one of them was in my local Perl monger group, but I since moved and I use Catalyst at $work. I want to do more Dancer. The community is awesome and I have friends there."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1508021777, "post_id": 46746987, "comment_id": 80446212, "body": "I&#39;ve been looking at the CPAN PRC but how does it work? I&#39;ve registered to receive messages, but the history shows only ten messages in Jan/Feb and nothing since. How do you pick something to work on, and how do you know someone else isn&#39;t already working on it?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508022036, "post_id": 46746987, "comment_id": 80446251, "body": "@Borodin the mailing list is only for discussion. You need to write Neil an email saying you&#39;d like to participate and include your github account name. If you do that now, you can ask for an assignment for this month. You will then receive a new assignment on every 1st of the month and you&#39;ll have that month to complete at least one PR. When you&#39;re done, you mail Neil &quot;I&#39;m done&quot; and that&#39;s it. The idea is that you don&#39;t pick. The challenge is that the dice pick for you. And then you end up with weird things you&#39;ve never heard of before. It&#39;s fun actually. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508022273, "post_id": 46746987, "comment_id": 80446302, "body": "Okay. I assume you mean Neil Bowers? How do you get an assignment that&#39;s suited to you? Where is all this described? There seems to be very little explanation, but I&#39;m likely being dumb :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1508027210, "post_id": 46746987, "comment_id": 80447089, "body": "@Borodin I&#39;ve written an answer with the view idea. It&#39;s really neat."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508028530, "post_id": 46746987, "comment_id": 80447301, "body": "@Borodin and here&#39;s the alternative. I&#39;m not sure which one is better. Both have pros and cons. But I&#39;ll go to bed now and let PerlDuck figure out what they like more."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508028656, "post_id": 46746987, "comment_id": 80447311, "body": "Also I just realised <a href=\"https://metacpan.org/release/Dancer2-Plugin-Auth-Extensible-Provider-DBIC\" rel=\"nofollow noreferrer\">metacpan.org/release/&hellip;</a> was my first assigned in the PRC. Related to the DBIC and D2 discussion."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508071822, "post_id": 46746987, "comment_id": 80455849, "body": "When watching the source of <a href=\"https://metacpan.org/source/HORNBURG/Dancer2-Plugin-Auth-Extensible-Provider-Database-0.620/lib/Dancer2/Plugin/Auth/Extensible/Provider/Database.pm#L327\" rel=\"nofollow noreferrer\"><code>authenticate_user</code></a> I saw a third approach: simply set the password for locked users to an empty string. The downside is that unlocking involves a password-reset."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508099008, "post_id": 46746987, "comment_id": 80464663, "body": "@Borodin I&#39;ve prepared a PR to add this to the documentation of the database provider, and your name came up. Please feel free to review it: <a href=\"https://github.com/simbabque/Dancer2-Plugin-Auth-Extensible-Provider-Database/commit/baad8e1dc7ed00ae9a85bbd5c0a734b6a2854ee7\" rel=\"nofollow noreferrer\">github.com/simbabque/&hellip;</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508099028, "post_id": 46746987, "comment_id": 80464672, "body": "@PerlDuck please feel free to also review my commit linked in the above comment before I create a PR."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1510837489, "post_id": 46746987, "comment_id": 81611484, "body": "I&#39;ve submitted that PR now."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1508028481, "last_edit_date": 1508028481, "creation_date": 1507999669, "answer_id": 46746987, "question_id": 46746864, "link": "https://stackoverflow.com/questions/46746864/how-to-handle-locked-disabled-user-accounts-with-dancer2pluginauthextensib/46746987#46746987", "title": "How to handle locked/disabled user accounts with Dancer2::Plugin::Auth::Extensible?", "body": "<p>You can subclass <a href=\"http://ttps://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible::Provider::Database\" rel=\"nofollow noreferrer\">Dancer2::Plugin::Auth::Extensible::Provider::Database</a> and wrap the <code>get_user_details</code> method to check if the user is active or not.</p>\n\n<p>Consider the same application I used <a href=\"https://stackoverflow.com/a/46750569/1331451\">in my other answer</a>. Add the following class.</p>\n\n<pre><code>package Provider::Database::ActiveOnly;\n\nuse Moo;\nextends 'Dancer2::Plugin::Auth::Extensible::Provider::Database';\n\naround 'get_user_details' =&gt; sub {\n    my $orig = shift;\n    my $self = shift;\n\n    # do nothing if we there was no user\n    my $user = $self-&gt;$orig(@_) or return;\n\n    # do nothing if the user is disabled\n    return if $user-&gt;{disabled};\n\n    return $user;\n};\n\n1;\n</code></pre>\n\n<p>The code is straightforward. After a user gets looked up, we have have the user data, so we can check the <code>disabled</code> column. If there is a anything in it, the user was disabled, and we abort.</p>\n\n<p>You also need to make the following changes to the <code>config.yml</code>.</p>\n\n<pre><code># config.yml\nplugins:\n    Auth::Extensible:\n        realms:\n            users:\n                provider: 'Provider::Database::ActiveOnly'\n                users_table: 'users'\n</code></pre>\n\n<p>Now the application should behave exactly as in the other answer.</p>\n\n<hr>\n\n<p>To understand why this works we need to look at the source. The authenticating happens in <a href=\"https://metacpan.org/source/HORNBURG/Dancer2-Plugin-Auth-Extensible-Provider-Database-0.620/lib/Dancer2/Plugin/Auth/Extensible/Provider/Database.pm#L327\" rel=\"nofollow noreferrer\"><code>authenticate_user</code></a>. Initially I thought that's what ought to be replaced, but this solution is smarter, because we only need to fetch the user data once.</p>\n\n<p>The <code>authenticate_user</code> method <a href=\"https://metacpan.org/source/HORNBURG/Dancer2-Plugin-Auth-Extensible-Provider-Database-0.620/lib/Dancer2/Plugin/Auth/Extensible/Provider/Database.pm#L333\" rel=\"nofollow noreferrer\">fetches the user data</a> with <a href=\"https://metacpan.org/source/HORNBURG/Dancer2-Plugin-Auth-Extensible-Provider-Database-0.620/lib/Dancer2/Plugin/Auth/Extensible/Provider/Database.pm#L372\" rel=\"nofollow noreferrer\">the <code>get_user_details</code> method</a>, so we can hook in there. Our <a href=\"https://metacpan.org/pod/Moo#around\" rel=\"nofollow noreferrer\"><code>around</code> wrapper</a> will inject the check for the activeness of the user transparently, and the rest of the code doesn't even know there is a difference.</p>\n\n<p>Inactive users will not show up in any interaction related to Plugin::Auth::Extensible.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508027841, "post_id": 46750569, "comment_id": 80447203, "body": "You might want to do something fancy to allow active user names that are duplicates of disabled ones. Perhaps a constraint on multiple columns? <code>CONSTRAINT unique_name UNIQUE (username, disabled)</code> may work but it&#39;s not very pretty."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508028011, "post_id": 46750569, "comment_id": 80447228, "body": "@Borodin I&#39;m not sure that allowing that would be such a good idea. Then the user is not unique any more. For an audit, that might be relevant."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508069081, "post_id": 46750569, "comment_id": 80455085, "body": "Wow! Thank you for both of your great answers. You even submitted a ticket for D2&#39;s FAQ. I think as a first shot I&#39;ll use the solution with the view because that&#39;s easier to implement. For the long term I&#39;ll perhaps dig deeper and write my own Provider which fully integrates the <code>state</code> column. My application also has an admin page with the possibility to lock and unlock users, so it would be cool if the <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible#update_user\" rel=\"nofollow noreferrer\"><code>update_user</code></a> function would work (including the <code>state</code> column) seamlessly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508069171, "post_id": 46750569, "comment_id": 80455108, "body": "@PerlDuck just remember that you cannot use the view for updating or adding users. That will fail because of the nature of views in databases. If you go with the alternative and create a provider, I don&#39;t think a lot of work is needed to for adding or updating. The state column is just another value that can be passed to <code>update_user</code> or <code>create_user</code>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508069445, "post_id": 46750569, "comment_id": 80455182, "body": "<i>Re: your warning about non-updateable views:</i> It actually <i>is</i> possible to insert into a view but certain restrictions apply. I&#39;m currently not sure whether they apply to my current design. Perhaps I can use <code>update_user</code> for the VIEW (all attributes except <code>state</code>) and then update the <code>state</code> in the TABLE with a separate SQL statement. However, I already have the statemtents to update and create users, and I can use them instead of the <code>update_user</code> call."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508069502, "post_id": 46750569, "comment_id": 80455202, "body": "@PerlDuck maybe. In my example it doesn&#39;t work. <i>users provider threw error: DBD::SQLite::db do failed: cannot modify active_users because it is a view at /home/simbabque/perl5/perlbrew/perls/perl-5.18.4/lib/site_pe&zwnj;&#8203;rl/5.18.4/Dancer/Plu&zwnj;&#8203;gin/Database/Core/Ha&zwnj;&#8203;ndle.pm line 310.</i>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1508069711, "post_id": 46750569, "comment_id": 80455250, "body": "Yes, sometimes it works, sometimes not. I haven&#39;t used it for years and cannot remember the exact prerequisites. Perhaps MySQL is more tolerant than SQLite in this case."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508070452, "post_id": 46750569, "comment_id": 80455463, "body": "Something else: you wrote <i>&quot;Or not, as in my case, where the redirect [to the <code>&#47;users</code> route] seems to be broken...).&quot;</i> I noticed the very same! Instead of redirecting to <code>&#47;...</code> it redirects to <code>&#47;&#47;...</code>. At first I thought I made something wrong or had an additional leading <code>&#47;</code> somewhere but that is not the case. I consider this a bug."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1508070928, "post_id": 46750569, "comment_id": 80455595, "body": "@PerlDuck yes. I was going to report it as well. Later today."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1508091136, "post_id": 46750569, "comment_id": 80461997, "body": "@PerlDuck there is already a ticket for that problem: <a href=\"https://github.com/PerlDancer/Dancer2-Plugin-Auth-Extensible/issues/74\" rel=\"nofollow noreferrer\">github.com/PerlDancer/Dancer2-Plugin-Auth-Extensible/issues/&zwnj;&#8203;74</a> and someone also already submitted a PR two months ago, but it hasn&#39;t been merged. I&#39;ll bug them about it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1508068559, "last_edit_date": 1508068559, "creation_date": 1508027183, "answer_id": 46750569, "question_id": 46746864, "link": "https://stackoverflow.com/questions/46746864/how-to-handle-locked-disabled-user-accounts-with-dancer2pluginauthextensib/46750569#46750569", "title": "How to handle locked/disabled user accounts with Dancer2::Plugin::Auth::Extensible?", "body": "<p><a href=\"https://stackoverflow.com/questions/46746864/how-to-handle-locked-disabled-user-accounts-with-dancer2pluginauthextensib#comment80440684_46746987\">Borodin suggested</a> to create a view and use that as the user table. I've done some testing and can say that that is indeed the easiest way to achieve this.</p>\n\n<p><strong>Warning</strong>: because of the nature of views, this makes it impossible for the application to modify or add users!</p>\n\n<p>Consider the following <a href=\"https://metacpan.org/pod/Dancer2\" rel=\"nofollow noreferrer\">Dancer2</a> application. I started with the <code>dancer2</code> create script.</p>\n\n<pre><code>$ dancer2 gen -a Foo\n$ cd Foo\n</code></pre>\n\n<p>I created the following simple sqlite database.</p>\n\n<pre><code>$ echo \"\nCREATE TABLE users (\n    id       INTEGER     PRIMARY KEY AUTOINCREMENT,\n    username VARCHAR(32) NOT NULL UNIQUE,\n    password VARCHAR(40) NOT NULL,\n    disabled TIMESTAMP   NULL\n);\n\nCREATE VIEW active_users (id, username, password) AS\n    SELECT id, username, password FROM users WHERE disabled IS NULL;\n\nINSERT INTO users ( username, password, disabled )\nVALUES  ( 'foo', 'test', null),\n        ( 'bar', 'test', '2017-10-01 10:10:10');\n\" | sqlite3 foo.sqlite\n</code></pre>\n\n<p>There is only a <code>users</code> table with the default columns as suggested by the plugin, plus a column <code>disabled</code>, which can be <code>NULL</code> or a timestamp. I thought it would be easier to illustrate with <em>disabled</em> than with <em>active</em>.</p>\n\n<p>Then I made the following changes to <code>lib/Foo.pm</code>. All of this is basically from the documentation of <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible\" rel=\"nofollow noreferrer\">Dancer2::Plugin::Auth::Extensible</a> and <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible::Provider::Database\" rel=\"nofollow noreferrer\">Dancer2::Plugin::Auth::Extensible::Provider::Database</a>.</p>\n\n<pre><code>package Foo;\nuse Dancer2;\nuse Dancer2::Plugin::Database;\nuse Dancer2::Plugin::Auth::Extensible;\n\nour $VERSION = '0.1';\n\nget '/' =&gt; sub {\n    template 'index' =&gt; { 'title' =&gt; 'Foo' };\n};\n\nget '/users' =&gt; require_login sub {\n    my $user = logged_in_user;\n    return \"Hi there, $user-&gt;{username}\";\n};\n\ntrue;\n</code></pre>\n\n<p>Next, the plugins needed to go into the config. Edit <code>config.yml</code> and replace it with this.</p>\n\n<pre><code>appname: \"Foo\"\nlayout: \"main\"\ncharset: \"UTF-8\"\ntemplate: \"simple\"\nengines:\n  session:\n    Simple:\n      cookie_name: testapp.session\n\n# this part is interesting\nplugins:\n    Auth::Extensible:\n        realms:\n            users:\n                provider: 'Database'\n\n############### here we set the view\n                users_table: 'active_users'\n    Database:\n        driver: 'SQLite'\n        database: 'foo.sqlite'\n        on_connect_do: ['PRAGMA foreign_keys = ON']\n        dbi_params:\n            PrintError: 0\n            RaiseError: 1\n</code></pre>\n\n<p>Now we're all set to try.</p>\n\n<pre><code>$ plackup bin/app.psgi\nHTTP::Server::PSGI: Accepting connections at http://0:5000/\n</code></pre>\n\n<p>Visit <a href=\"http://localhost:5000/users\" rel=\"nofollow noreferrer\">http://localhost:5000/users</a> in your browser. You'll see the default login form. </p>\n\n<p><a href=\"https://i.stack.imgur.com/SQh1t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SQh1t.png\" alt=\"login page\"></a></p>\n\n<p>Enter <code>foo</code> and <code>test</code>. This should work, and you should see the <code>/users</code> route. (Or not, as in my case, where the redirect seems to be broken...).</p>\n\n<p><a href=\"https://i.stack.imgur.com/mj5fP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mj5fP.png\" alt=\"foo is logged in\"></a></p>\n\n<p>Now go to <a href=\"http://localhost:5000/logout\" rel=\"nofollow noreferrer\">http://localhost:5000/logout</a> to get rid of foo's cookie and open <a href=\"http://localhost:5000/users\" rel=\"nofollow noreferrer\">http://localhost:5000/users</a> again. This time, enter <code>bar</code> and <code>test</code>.</p>\n\n<p>You will see that the login does not work.</p>\n\n<p><a href=\"https://i.stack.imgur.com/MiJAC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MiJAC.png\" alt=\"bar cannot log in\"></a></p>\n\n<p>To make a counter-test, replace the <code>users_table</code> in <code>config.yml</code> and restart the app.</p>\n\n<pre><code># config.yml\n                users_table: 'users'\n</code></pre>\n\n<p>Now the user <code>foo</code> will be able to log in.</p>\n\n<p>This method is not only easy to implement, it should also by far be the way with the highest performance, as the database handles all the logic (and has most likely already cached it). </p>\n\n<p>Your application, and especially the authentication plugin, do not need to know about the existence of the <em>active</em> or <em>disabled</em> fields at all. They don't need to care. Stuff will just work.</p>\n"}], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 46750569, "answer_count": 2, "score": 0, "last_activity_date": 1508068559, "creation_date": 1507998928, "question_id": 46746864, "link": "https://stackoverflow.com/questions/46746864/how-to-handle-locked-disabled-user-accounts-with-dancer2pluginauthextensib", "title": "How to handle locked/disabled user accounts with Dancer2::Plugin::Auth::Extensible?", "body": "<p>I'm currently migrating a CGI application to Dancer2. I previously used a \"hand-crafted\" authentication mechanism using MySQL and a user table with the attributes <code>email</code>, <code>password</code>, and a <code>state</code>. The <code>state</code> indicates whether the account is <code>active</code> or <code>locked</code>. <code>locked</code> means the account is disabled (logically deleted).</p>\n\n<p>I also have tables <code>roles</code> and <code>user_roles</code> to implement my two roles: admin and user.</p>\n\n<p>Everything works like a charm, with one exception:</p>\n\n<p>With my old \"hand-crafted\" mechanism I was able to <em>lock</em> users, i.e. logically delete them without removing them from the database. A login was only successful if email and hash_of(password) matched <em>and</em> the account was not locked.</p>\n\n<p>How do I implement that with <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible\" rel=\"nofollow noreferrer\"><code>Dancer2::Plugin::Auth::Extensible</code></a> and <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible::Provider::Database\" rel=\"nofollow noreferrer\"><code>Dancer2::Plugin::Auth::Extensible::Provider::Database</code></a>?</p>\n\n<p>I hoped that the hook <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Auth::Extensible#after_authenticate_user\" rel=\"nofollow noreferrer\"><code>after_authenticate_user</code></a> could return <code>true</code> or <code>false</code> to overwrite the result of <code>authenticate_user</code>, but that is not the case. At least, it is not documented.</p>\n\n<p>One thing I thought of was to have an additional role <code>active</code> and then \u2013 for every route \u2013 <code>require_role active</code> instead of just <code>require_login</code>.</p>\n\n<p>So my question is: How can I make <code>Dancer2::Plugin::Auth::Extensible</code> consider only <code>active</code> users?</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1507999565, "post_id": 46746844, "comment_id": 80439939, "body": "why the perl and sed tags if you want awk?"}, {"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 2, "creation_date": 1508000000, "post_id": 46746844, "comment_id": 80440061, "body": "Where is the data coming from? Could you convince the source to use JSON or something structured? The data you gave looks nearly JSON..."}, {"owner": {"reputation": 1, "user_id": 8776550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a175e75bf1cf7fe7f511e4037ba1aab?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Archer", "link": "https://stackoverflow.com/users/8776550/jason-archer"}, "edited": false, "score": 0, "creation_date": 1508000056, "post_id": 46746844, "comment_id": 80440077, "body": "The data is coming from an API query using curl to terminal"}, {"owner": {"reputation": 1, "user_id": 8776550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a175e75bf1cf7fe7f511e4037ba1aab?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Archer", "link": "https://stackoverflow.com/users/8776550/jason-archer"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1508000107, "post_id": 46746844, "comment_id": 80440094, "body": "@GerhardBarnard am looking to see if it can be done with awk or sed solely, this is the part I can&#39;t figure out."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1508001239, "post_id": 46746844, "comment_id": 80440456, "body": "Are there really no quotes around the items in the <code>result</code> array? Which API is this?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1508022246, "post_id": 46746844, "comment_id": 80446293, "body": "Did your data at some point pass a Word document or Outlook? The quotes look totally off."}], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "is_accepted": false, "score": -1, "last_activity_date": 1508024594, "creation_date": 1508024594, "answer_id": 46750367, "question_id": 46746844, "link": "https://stackoverflow.com/questions/46746844/parsing-between-fields/46750367#46750367", "title": "Parsing between fields", "body": "<p>with sed :</p>\n\n<pre><code>sed -n '/^.*mycheck\u201d: \u201c/{s//\\t/;s/\u201d,/:/;N;s/\\n[^[]*\\[/ /;N;N;s/]$//p}' infile\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8776550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a175e75bf1cf7fe7f511e4037ba1aab?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Archer", "link": "https://stackoverflow.com/users/8776550/jason-archer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1508024594, "creation_date": 1507998829, "last_edit_date": 1508000019, "question_id": 46746844, "link": "https://stackoverflow.com/questions/46746844/parsing-between-fields", "title": "Parsing between fields", "body": "<pre><code>    {\n        \u201cdocheck\u201d: {\n            \u201cmycheck\u201d: \u201capples\u201d,\n            \"result\": [macintosh\n                       washington\n                       red]\n    },\n</code></pre>\n\n<p>Am looking for an awk command to print the outcome as:</p>\n\n<pre><code>    apples: macintosh\n                washington\n                red\n</code></pre>\n\n<p>Unsure how to parse this (NR, FNR) and would appreciate any assistance or if awk is even the best solution for this. Semi solution:</p>\n\n<pre><code>$ more file\n{\n    \u201cdocheck\u201d: {\n        \u201cmycheck\u201d: \u201capples\u201d,\n        \"result\": [macintosh\n           washington\n           red]\n    },\n</code></pre>\n\n<p><strong>UPDATE</strong> (semi solution but there is likely a better way</p>\n\n<pre><code>$ more file\n{\n    \u201cdocheck\u201d: {\n        \u201cmycheck\u201d: \u201capples\u201d,\n        \"result\": [macintosh\n           washington\n           red]\n    },\n\n$ awk '/mycheck/{flag=1;next}/}/{flag=0}flag' file |\\\nsed 's#:##g;s#\\[##g;s#\\]##g;s#\"##g' | perl -p -e 's:\\n:,:g;s:\\t::g' |\\\nawk '{print $1\":\"$2,$3,$4}'\n</code></pre>\n\n<p>result:macintosh, washington, red,</p>\n"}, {"tags": ["sql", "oracle", "perl", "scripting"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507999783, "post_id": 46746694, "comment_id": 80439997, "body": "Can&#39;t you use a subquery instead of two separate database calls? Do you need the <code>value</code> column?"}, {"owner": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508000382, "post_id": 46746694, "comment_id": 80440181, "body": "@Borodin i need to print the name and values column data of table A database1"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1508000650, "post_id": 46746694, "comment_id": 80440270, "body": "<code>join(&quot;,&quot;, @var1)</code> =&gt; <code>qw(?) x @var1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1507999146, "post_id": 46746869, "comment_id": 80439786, "body": "It doesn&#39;t remove trailing whitespace; it specifically removes the text of the input record separator in <code>$&#47;</code> which is usually a single linefeed character but  can be set to anything you like."}, {"owner": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "edited": false, "score": 0, "creation_date": 1507999363, "post_id": 46746869, "comment_id": 80439862, "body": "@jira Thanks for the reply . i tried using s/^&lt;&gt;//  but  not able to put it in proper place in where condition with quotes .. if possible can u please tell me the syntax."}, {"owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "edited": false, "score": 0, "creation_date": 1507999828, "post_id": 46746869, "comment_id": 80440010, "body": "OP wants to remove leading chars, no? At least that was my reading. I tried to be short and gave a reference to perldoc for details."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1508000137, "post_id": 46746869, "comment_id": 80440105, "body": "Yes it seems so (but they actually want to remove <code>&lt;*&gt;</code>\u2014the star was swallowed by the markup); I was just correcting your explanation of what <code>chomp</code> does. It&#39;s not a big deal."}], "tags": [], "owner": {"reputation": 3604, "user_id": 436450, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0afd75178763cf41af43a103b95277ae?s=128&d=identicon&r=PG", "display_name": "jira", "link": "https://stackoverflow.com/users/436450/jira"}, "is_accepted": false, "score": 0, "last_activity_date": 1507998957, "creation_date": 1507998957, "answer_id": 46746869, "question_id": 46746694, "link": "https://stackoverflow.com/questions/46746694/how-to-chomp-the-value-of-an-array-while-in-where-condition-of-select-query/46746869#46746869", "title": "how to chomp the value of an array while in where condition of select query?", "body": "<p><code>chomp</code> removes trailing whitespace. See <code>perldoc -f chomp</code>. It cannot what you want.\nTo strip leading &lt;> you can use <code>s/^&lt;&gt;//</code></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1508000769, "creation_date": 1508000769, "answer_id": 46747166, "question_id": 46746694, "link": "https://stackoverflow.com/questions/46746694/how-to-chomp-the-value-of-an-array-while-in-where-condition-of-select-query/46747166#46747166", "title": "how to chomp the value of an array while in where condition of select query?", "body": "<p>If you want to remove <code>&lt;*&gt;</code> from the beginning of the strings in <code>@var1</code> then you can write</p>\n\n<pre><code>S/^&lt;\\*&gt;// for @var1\n</code></pre>\n\n<p>You also need to quote each element of the <code>IN</code> clause, otherwise the values will be treated as column names. You can use <code>$dbh1-&gt;quote</code> but it's better to use placeholders by building a string of question marks <code>?, ?, ?, ...</code> with as many placeholders as there are elements in <code>@var1</code></p>\n\n<p>This should work for you, but I'm not in position to test it at present. Note that it's much better to use upper case language words and a <em>heredoc</em> for SQL statements to improve readability</p>\n\n<pre><code>s/^&lt;\\*&gt;// for @var1;  # remove any indicators\n\nmy $pholds = join ', ', ('?') x @var1;  # \"?, ?, ?, ?, ?\"\n\nmy $sth3 = $dbh-&gt;prepare(&lt;&lt;END_SQL) or die \"Can't prepare statement: $DBI::errstr\";\nSELECT name, value FROM A.database1\nWHERE name IN ($pholds)\nEND_SQL\n\n$sth3-&gt;execute(@var1);\n\nwhile ( my @row = $sth3-&gt;fetchrow_array ) {\n    print join(\", \", @row), \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508000769, "creation_date": 1507997959, "last_edit_date": 1507998726, "question_id": 46746694, "link": "https://stackoverflow.com/questions/46746694/how-to-chomp-the-value-of-an-array-while-in-where-condition-of-select-query", "title": "how to chomp the value of an array while in where condition of select query?", "body": "<p>I am not able to find how  to chomp the &lt;*> of before value e the 5th value of array  var1.</p>\n\n<pre><code>my $sql2 = 'select name, value from A.Database2 minus select name, value from A.database1';\n\nmy $sth2 = $dbh1-&gt;prepare($sql2);\n$sth2-&gt;execute();\n\nwhile ( my @row = $sth2-&gt;fetchrow_array ) {\n\n    print join(',', @row), \"\\n\\n\";\n\n    chomp;    \n\n    push( @var1, $row[0] );\n}\n\nforeach ( @var1 ) {\n    print \"$_\\n\";\n}\n\nmy $sth3 = $dbh-&gt;prepare(\"select name, value from A.database1 where name in (\" . join(\",\", @var1) . \")\" ) or die \"Can't prepare statement: $DBI::errstr\";\n$sth3-&gt;execute(@var1);\n\nwhile ( my @row = $sth3-&gt;fetchrow_array ) {\n    print join(\", \", @row), \"\\n\";\n}\n</code></pre>\n\n<blockquote>\n  <p>DBD::Oracle::db prepare failed: ORA-00904: \"APR_IMDG_MODE_ENABLED\": invalid identifier (DBD ERROR: error possibly near &lt;*> indicator at char 144 in 'select name,value from A where name in (a,b,c,d,&lt;*>e)') [for Statement \"select name,value from A where name in (a,b,c,d,e)\"] at hello.pl line 102.</p>\n  \n  <p>Uncaught exception from user code:<br>\n          Can't prepare statement: ORA-00904: \"APR_IMDG_MODE_ENABLED\": invalid identifier (DBD ERROR: error possibly near &lt;*> indicator at char 144 in 'select name,value from  where name in (a,b,c,d,&lt;*>e)') at hello.pl line 102.  </p>\n</blockquote>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 2, "creation_date": 1507995356, "post_id": 46746040, "comment_id": 80438567, "body": "(Google is your friend here. This is a perfect example of something you could easily have looked up for yourself.)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 1, "creation_date": 1507999313, "post_id": 46746040, "comment_id": 80439844, "body": "@Mort I was going to say that, but for someone new it&#39;s not that easy to find. Sure <code>values</code> and <code>exists</code> can be easy enough, but the <code>reverse</code> trick is not that simple."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1507995957, "post_id": 46746114, "comment_id": 80438793, "body": "<i>&quot;You</i> <b><i>may</i></b> <i>lose some data&quot;</i>! And if <code>%reverse</code> is only used once then it&#39;s probably quicker to use <code>List::Util::any { $_ == 3 } values %foo</code>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1507999252, "last_edit_date": 1507999252, "creation_date": 1507994436, "answer_id": 46746114, "question_id": 46746040, "link": "https://stackoverflow.com/questions/46746040/check-if-randomly-generated-value-already-exists-in-hash/46746114#46746114", "title": "Check if randomly generated value already exists in hash", "body": "<p>Use the <a href=\"http://perldoc.perl.org/functions/exists.html\" rel=\"nofollow noreferrer\"><code>exists</code> built-in</a>.</p>\n\n<p>To check for keys:</p>\n\n<pre><code>my %foo = ( bar =&gt; 1 );\nif (exists $foo{foo}) {\n   print \"key foo exists\";\n}\nif (exists $foo{bar}) {\n   print \"key bar exists\";\n}\n</code></pre>\n\n<p>This code will print</p>\n\n<pre><code>key bar exists\n</code></pre>\n\n<p>To check for values, you need to <a href=\"http://perldoc.perl.org/functions/reverse.html\" rel=\"nofollow noreferrer\"><code>reverse</code></a> the hash first. Remember hashes are lists, so if they are reversed all the keys become values. You will may some data if a value exists more than once already, but if all you want to know is whether a value exists, that's not relevant.</p>\n\n<pre><code>my %foo = ( bar =&gt; 1, baz =&gt; 2, qrr =&gt; 1 );\nmy %reversed = reverse %foo;\nif (exists $reversed{1}) {\n   print \"value 1 exists\";\n}\nif (exists $reversed{3}) {\n   print \"value 3 exists\";\n}\n</code></pre>\n\n<p>This will print </p>\n\n<pre><code>value 1 exists\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8776261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6738761c912a7e75ffade5a797bba7?s=128&d=identicon&r=PG&f=1", "display_name": "Torke", "link": "https://stackoverflow.com/users/8776261/torke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1508028679, "accepted_answer_id": 46746114, "answer_count": 1, "score": -4, "last_activity_date": 1507999252, "creation_date": 1507994029, "question_id": 46746040, "link": "https://stackoverflow.com/questions/46746040/check-if-randomly-generated-value-already-exists-in-hash", "closed_reason": "Duplicate", "title": "Check if randomly generated value already exists in hash", "body": "<p>If I have a Perl hash, and I randomly generated a numeric value, how can I get my code to check if the randomly generated value already exists in the hash?</p>\n"}, {"tags": ["perl", "filehandle"], "answers": [{"comments": [{"owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "edited": false, "score": 0, "creation_date": 1507990712, "post_id": 46745552, "comment_id": 80437056, "body": "Ah, I knew it was something simple like that. Thanks @Dave Sherohman, still getting comfortable with Perl again. Being programming in R all summer"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 3, "last_activity_date": 1507990590, "creation_date": 1507990590, "answer_id": 46745552, "question_id": 46745502, "link": "https://stackoverflow.com/questions/46745502/return-file-handle-from-subroutine-and-pass-to-other-subroutine/46745552#46745552", "title": "Return file handle from subroutine and pass to other subroutine", "body": "<pre><code>my $fh = @_;\n</code></pre>\n\n<p>This line does not mean what you think it means.  It sets <code>$fh</code> to <em>the number of items in <code>@_</code></em> rather than the filehandle that is passed in - if you print the value of <code>$fh</code>, it will be <code>1</code> instead of a filehandle.</p>\n\n<p>Use <code>my $fh = shift</code>, <code>my $fh = $_[0]</code>, or <code>my ($fh) = @_</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "edited": false, "score": 1, "creation_date": 1507999537, "post_id": 46745907, "comment_id": 80439934, "body": "Thanks for the heads up @Borodin ! Greatly appreciated."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1508061331, "post_id": 46745907, "comment_id": 80453206, "body": "Thanks @Dave it&#39;s fixed"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1508061300, "last_edit_date": 1508061300, "creation_date": 1507993123, "answer_id": 46745907, "question_id": 46745502, "link": "https://stackoverflow.com/questions/46745502/return-file-handle-from-subroutine-and-pass-to-other-subroutine/46745907#46745907", "title": "Return file handle from subroutine and pass to other subroutine", "body": "<p>As has been pointed out, <code>my $fh = @_</code> will set <code>$fh</code> to 1, which is not a file handle. Use</p>\n\n<pre><code>my ($fh) = @_\n</code></pre>\n\n<p>instead to use list assignment</p>\n\n<p>In addition</p>\n\n<ul>\n<li><p><code>-e -f -r -w $file</code> will not do what you want. You need</p>\n\n<pre><code>-e $file and -f $file and -r $file and -w $file\n</code></pre>\n\n<p>And you can make this more concise and efficient by using underscore <code>_</code> in place of the file name, which will re-use the information fetched for the previous file test</p>\n\n<pre><code>-e $file and -f _ and -r _ and -w _\n</code></pre>\n\n<p>However, note that you will be rejecting a request if a file isn't <em>writeable</em>, which makes no sense if the request is to open a file for reading. Also, <code>-f</code> will return <em>false</em> if the file doesn't exist, so <code>-e</code> is superfluous</p></li>\n<li><p>It is good to include <code>$!</code> in your <code>die</code> strings as it contains the <em>reason</em> for the failure, but your first two tests don't set this value up, and so should be just <code>die \"Read or Write symbol not provided\";</code> etc.</p>\n\n<p>In addition, <code>die \"Cannot open $file\", $!</code> should probably be</p>\n\n<pre><code>die qq{Cannot open \"$file\": $!}\n</code></pre>\n\n<p>to make it clear if the file name is empty, and to add some space between the message and the value of <code>$!</code></p></li>\n<li><p>The lines read from the file will have a newline character at the end, so there is no need for <code>say</code>. Simply <code>print while &lt;$fh&gt;</code> is fine</p></li>\n<li><p>Perl variable names are conventionally <em>snake_case</em>, so <code>get_fh</code> and <code>do_something</code> is more usual</p></li>\n</ul>\n"}], "owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 46745552, "answer_count": 2, "score": 2, "last_activity_date": 1508061300, "creation_date": 1507990309, "last_edit_date": 1507992271, "question_id": 46745502, "link": "https://stackoverflow.com/questions/46745502/return-file-handle-from-subroutine-and-pass-to-other-subroutine", "title": "Return file handle from subroutine and pass to other subroutine", "body": "<p>I am trying to create a couple of functions that will work together. <code>getFH</code> should take in the mode to open the file (either <code>&gt;</code> or <code>&lt;</code> ), and then the file itself (from the command line). It should do some checking to see if the file is okay to open, then open it, and return the file handle. <code>doSomething</code> should take in the file handle, and loop over the data and do whatever. However when the program lines to the while loop, I get the error:</p>\n\n<blockquote>\n  <p>readline() on unopened filehandle 1    </p>\n</blockquote>\n\n<p>What am I doing wrong here? </p>\n\n<pre><code>#! /usr/bin/perl\n\nuse warnings;\nuse strict;\nuse feature qw(say);\n\nuse Getopt::Long;\nuse Pod::Usage;\n\n# command line param(s)\nmy $infile = '';\nmy $usage = \"\\n\\n$0 [options] \\n\nOptions\n-infile         Infile\n-help           Show this help message\n\\n\";\n\n# check flags\nGetOptions(\n    'infile=s' =&gt; \\$infile,\n    help       =&gt; sub { pod2usage($usage) },\n) or pod2usage(2);\n\nmy $inFH = getFh('&lt;', $infile);\n\ndoSomething($inFH);\n\n## Subroutines ##\n\n## getFH ##\n## @params:\n## How to open file: '&lt;' or '&gt;'\n## File to open\n\nsub getFh {\n    my ($read_or_write, $file) = @_;\n    my $fh;\n\n    if ( ! defined $read_or_write ) {\n        die \"Read or Write symbol not provided\", $!;\n    }\n\n    if ( ! defined $file ) {\n        die \"File not provided\", $!;\n    }\n\n    unless ( -e -f -r -w $file ) {\n        die \"File $file not suitable to use\", $!;\n    }\n\n    unless ( open( $fh, $read_or_write, $file ) ) {\n        die \"Cannot open $file\",$!;\n    }\n\n    return($fh);\n}\n\n#Take in filehandle and do something with data\n\nsub doSomething{\n    my $fh = @_;\n\n    while ( &lt;$fh&gt; ) {\n        say $_;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "winapi", "serial-port", "rfid", "catalyst"], "comments": [{"owner": {"reputation": 81, "user_id": 8674504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GD4ta.png?s=128&g=1", "display_name": "Njugu", "link": "https://stackoverflow.com/users/8674504/njugu"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508243165, "post_id": 46741972, "comment_id": 80526482, "body": "@ikegami C prototype is &quot;_cdecl&quot; port-handle returns handle for the port to be used in related functions and unfortunately the manufacturer does not have a public library i can link (its Chinese), only a pdf document that i am unable to attach here. the c# code works with the same dll."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1508438778, "last_edit_date": 1508438778, "creation_date": 1508437877, "answer_id": 46836603, "question_id": 46741972, "link": "https://stackoverflow.com/questions/46741972/calling-opencomport-using-win32api/46836603#46836603", "title": "Calling OpenComPort using Win32::API", "body": "<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( state );\n\nuse Win32::API qw( );\n\nuse constant {\n   COM1 =&gt; 1,\n   COM2 =&gt; 2,\n   COM3 =&gt; 3,\n   COM4 =&gt; 4,\n   COM5 =&gt; 5,\n   COM6 =&gt; 6,\n   COM7 =&gt; 7,\n   COM8 =&gt; 8,\n   COM9 =&gt; 9,\n   # etc\n\n   COM_ADR_BROADCAST =&gt; 0xFF,\n\n   BAUD_9600   =&gt; 0,\n   BAUD_19200  =&gt; 1,\n   BAUD_38400  =&gt; 2,\n   BAUD_57600  =&gt; 5,\n   BAUD_115200 =&gt; 6,\n};\n\nsub OpenComPort {\n   my ($port, $ComAdr_ref, $baud, $FrmHandle_ref) = @_;\n\n   state $OpenComPort = Win32::API::More-&gt;new('UHFReader288.dll', 'OpenComPort', 'iPCP', 'i', '_cdecl')\n      or die($^E);\n\n   my $ComAdr_buf    = pack('C', $$ComAdr_ref);\n   my $FrmHandle_buf = pack('i', -1);\n\n   my $rv = $OpenComPort-&gt;Call($port, $ComAdr_buf, chr($baud), $FrmHandle_buf);\n\n   $$ComAdr_ref    = unpack('C', $ComAdr_buf);\n   $$FrmHandle_ref = unpack('i', $FrmHandle_buf);\n\n   return $rv;\n}\n\n{\n   my $ComAdr = COM_ADR_BROADCAST;\n   my $FrmHandle;\n   OpenComPort(COM1, \\$ComAdr, BAUD_57600, \\$FrmHandle)\n      or die(\"Error\");\n\n   ...\n}\n</code></pre>\n\n<p>Untested.</p>\n"}], "owner": {"reputation": 81, "user_id": 8674504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GD4ta.png?s=128&g=1", "display_name": "Njugu", "link": "https://stackoverflow.com/users/8674504/njugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1508444820, "creation_date": 1507965669, "last_edit_date": 1508444820, "question_id": 46741972, "link": "https://stackoverflow.com/questions/46741972/calling-opencomport-using-win32api", "title": "Calling OpenComPort using Win32::API", "body": "<p>I am having trouble calling a third party dll to control an rfid reader.\nthis is my code:</p>\n\n<pre><code>use Win32::API;\nWin32::API::More-&gt;Import(\"kernel32\", \"int GetCurrentProcessId()\");\nWin32::API::More-&gt;Import(\"UHFReader288.dll\", \"OpenComPort\",\"IPPI\",\"I\",\"_cdecl\");\n\nsub OpenReader {\n    my $comport = 1;\n    my $comAddr = \" \" x 255;\n    my $baud = \"5\";\n    my $handle = -1;\n\n    my $result =  OpenComPort($comport,$comAddr,$baud ,$handle);\n\n    return $result;\n}\n</code></pre>\n\n<p>The following is the function's prototype:</p>\n\n<pre><code>int OpenComPort(int port, BYTE* ComAdr, BYTE baud, int* FrmHandle);\n</code></pre>\n\n<p>The function's documentation is provided by the following image (sorry):</p>\n\n<p><a href=\"https://i.stack.imgur.com/9XZgZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9XZgZ.png\" alt=\"Documentation for OpenComPort\"></a></p>\n\n<p>Can someone please show me what I am doing wrong? When I call the function, the Perl interpreter crashes!!</p>\n\n<p>I am running strawberry Perl 5.24 on Win10</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1507938007, "post_id": 46739301, "comment_id": 80425537, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/tour\">About</a> pages. Show some of the relevant translation table \u2014 you say there&#39;s no error, but Perl appears to disagree with you. Have you printed <code>$main_seq</code>? Have you printed the value of <code>$1</code> in the substitution? Do you need an <code>e</code> modifier in the replacement string? Have you tried showing us some minimal data (5 translation entries; 5 lines of data that should translate OK but don&#39;t, and preferably 1-5 lines that do translate OK, if you have any)?  Read about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), please, and add the missing information."}, {"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507939191, "post_id": 46739301, "comment_id": 80425749, "body": "Have added additional information"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1507939530, "post_id": 46739301, "comment_id": 80425812, "body": "You haven&#39;t read what I said carefully.  Minimal doesn&#39;t mean &quot;everything you currently have&quot;.  It means 5 lines of translations, not 40.  It means supply an input that, given your script as amended, produces the warning messages you&#39;re suffering from.  And it means show the output you get and the output you expect from the data that you provided.  And, unless there&#39;s a very good reason for it to be otherwise, the data should be 80-character lines or so, not massive long strings.  What you show needn&#39;t be biologically accurate; it merely needs to reproduce the warning messages."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507939852, "post_id": 46739301, "comment_id": 80425869, "body": "Your code is incomplete. You have strict turned on but you never declared your loop variable $a (which btw is reserved for sort blocks). Please show your complete code."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1507941171, "post_id": 46739301, "comment_id": 80426100, "body": "Because <code>$a</code> is used by <code>sort</code>, it doesn&#39;t have to be declared.  It&#39;s a gotcha.  See <a href=\"https://stackoverflow.com/questions/3575979/what-are-the-perl-equivalents-of-return-and-continue-keywords-in-c/3576015#3576015\">What are the Perl equivalents of <code>return</code> and <code>continue</code> keywords in C?</a> which contains a discussion of the issues around <code>$a</code> and <code>$b</code>."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1507943900, "post_id": 46739770, "comment_id": 80426547, "body": "Yes indeed, this is the problem! Thank you so much! But I still have a problem: the translation supposes to stop at the first UAG or UGA or UAA codon, but it seems to stop at the first UAA codon only (which means there shouldn&#39;t have &quot;_&quot; symbol in protein). How can I modify the code &quot;$main_seq =~ /(AUG(...)*(UAG|UGA|UAA))/&quot;?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1507944313, "post_id": 46739770, "comment_id": 80426615, "body": "That, my friend, is a different question.  Please ask it as a new question.  I don&#39;t understand the logic of what you&#39;re up to in the translation function.  You seem to be clobbering <code>$main_seq</code> in the <code>if</code> statement with <code>$main_seq = $1;</code> - after finding an AUG somewhere followed by zero or more triples (greedy \u2014 are you sure you wanted greedy matching?) and terminated by UAG, UGA or UAA.  So, you chuck away loads of material, then map the first triplet with the genetic code, and report what you&#39;ve got, then go back to your 1..3 (or 0..2) loop and have another go."}, {"owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "edited": false, "score": 0, "creation_date": 1507944751, "post_id": 46739770, "comment_id": 80426676, "body": "OK, Thank you very much for the help!"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 4, "last_activity_date": 1507942422, "creation_date": 1507942422, "answer_id": 46739770, "question_id": 46739301, "link": "https://stackoverflow.com/questions/46739301/tons-of-use-of-uninitialized-value-within-genetic-code-in-substitution-iterato/46739770#46739770", "title": "tons of &quot;Use of uninitialized value within %genetic_code in substitution iterator&quot;", "body": "<p>The problem seems to be that you invoke <code>translation()</code> before you've defined <code>%genetic_code</code>.  Simply moving <code>translation(my $sequence);</code> to after the definition of <code>%genetic_code</code> (and <code>&amp;translation</code>) resolves the problem.  Of course, you should remove the unused and uninitialized parameter too.  Hence, from:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse feature qw(say);\n\nmy %genetic_code = (\n    UCA =&gt; 'S', UCC =&gt; 'S', UCG =&gt; 'S', UCU =&gt; 'S',\n    UUC =&gt; 'F', UUU =&gt; 'F', UUA =&gt; 'L', UUG =&gt; 'L',\n    UAC =&gt; 'Y', UAU =&gt; 'Y', UAA =&gt; '_', UAG =&gt; '_',\n    UGC =&gt; 'C', UGU =&gt; 'C', UGA =&gt; '_', UGG =&gt; 'W',\n    CUA =&gt; 'L', CUC =&gt; 'L', CUG =&gt; 'L', CUU =&gt; 'L',\n    CCA =&gt; 'P', CCC =&gt; 'P', CCG =&gt; 'P', CCU =&gt; 'P',\n    CAC =&gt; 'H', CAU =&gt; 'H', CAA =&gt; 'Q', CAG =&gt; 'Q',\n    CGA =&gt; 'R', CGC =&gt; 'R', CGG =&gt; 'R', CGU =&gt; 'R',\n    AUA =&gt; 'I', AUC =&gt; 'I', AUU =&gt; 'I', AUG =&gt; 'M',\n    ACA =&gt; 'U', ACC =&gt; 'U', ACG =&gt; 'U', ACU =&gt; 'U',\n    AAC =&gt; 'N', AAU =&gt; 'N', AAA =&gt; 'K', AAG =&gt; 'K',\n    AGC =&gt; 'S', AGU =&gt; 'S', AGA =&gt; 'R', AGG =&gt; 'R',\n    GUA =&gt; 'V', GUC =&gt; 'V', GUG =&gt; 'V', GUU =&gt; 'V',\n    GCA =&gt; 'A', GCC =&gt; 'A', GCG =&gt; 'A', GCU =&gt; 'A',\n    GAC =&gt; 'D', GAU =&gt; 'D', GAA =&gt; 'E', GAG =&gt; 'E',\n    GGA =&gt; 'G', GGC =&gt; 'G', GGG =&gt; 'G', GGU =&gt; 'G',\n);\n\nsub translation {\n    say \"enter a RNA or DNA sequence: \";\n    my $sequence = &lt;STDIN&gt;;\n    chomp $sequence;\n    $sequence = uc ($sequence);\n    if ($sequence =~ /T/){\n        $sequence =~ tr/ATGC/UACG/;\n    }\n\n    say \"\\nThe result of translation is:\\n\\n\";  \n    foreach ($a = 0; $a &lt; 3; $a++) {\n        my $main_seq = substr($sequence, $a);\n        if ($main_seq =~ /(AUG(...)*(UAG|UGA|UAA))/){\n            $main_seq = $1;\n            $main_seq =~ s/(...)/$genetic_code{$1}/g;\n            say \"$main_seq\\n\";\n        }\n        else {\n            say \"No start or stop codon!\"\n        }\n    }\n}\n\ntranslation();\n</code></pre>\n\n<p>And given the first line of data as input, the output is:</p>\n\n<pre><code>enter a RNA or DNA sequence: \n\nThe result of translation is:\n\n\nM_VVW_RRLL_UYV_LGPRSLUYGSVGSVRCDW_LR_LSLCLLSWFCAKAUSKLPUFA_MSRRPLNFRV_FSVCPLICKFU_LLLUPFRKELRVSDF_VQSHVWFLAGIPUL_\n\nMSRRPLNFRV_FSVCPLICKFU_LLLUPFRKELRVSDF_VQSHVWFLAGIPUL_\n\nMSRRPLNFRV_FSVCPLICKFU_LLLUPFRKELRVSDF_VQSHVWFLAGIPUL_\n</code></pre>\n\n<p>With absolutely no warnings about uninitialized values.</p>\n"}], "owner": {"reputation": 61, "user_id": 8715949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1033927556749986/picture?type=large", "display_name": "Wenjia Zhai", "link": "https://stackoverflow.com/users/8715949/wenjia-zhai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 46739770, "answer_count": 1, "score": 2, "last_activity_date": 1507942422, "creation_date": 1507937669, "last_edit_date": 1507942126, "question_id": 46739301, "link": "https://stackoverflow.com/questions/46739301/tons-of-use-of-uninitialized-value-within-genetic-code-in-substitution-iterato", "title": "tons of &quot;Use of uninitialized value within %genetic_code in substitution iterator&quot;", "body": "<p>I want to translate a sequence of DNA or RNA to protein, but after run it, I have tons of \"Use of uninitialized value within %genetic_code in substitution iterator at translateRNAToProtein.pl line 95,  line 1.\" warning. I double checked the translation table and no error there. My code is following:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw(say);\n\ntranslation (my $sequence);\nmy %genetic_code = (\n    UCA =&gt; 'S',\nUCC =&gt; 'S',\nUCG =&gt; 'S',\nUCU =&gt; 'S',\nUUC =&gt; 'F',\nUUU =&gt; 'F',\nUUA =&gt; 'L',\nUUG =&gt; 'L',\nUAC =&gt; 'Y',\nUAU =&gt; 'Y',\nUAA =&gt; '_',\nUAG =&gt; '_',\nUGC =&gt; 'C',\nUGU =&gt; 'C',\nUGA =&gt; '_',\nUGG =&gt; 'W',\nCUA =&gt; 'L',\nCUC =&gt; 'L',\nCUG =&gt; 'L',\nCUU =&gt; 'L',\nCCA =&gt; 'P',\nCCC =&gt; 'P',\nCCG =&gt; 'P',\nCCU =&gt; 'P',\nCAC =&gt; 'H',\nCAU =&gt; 'H',\nCAA =&gt; 'Q',\nCAG =&gt; 'Q',\nCGA =&gt; 'R',\nCGC =&gt; 'R',\nCGG =&gt; 'R',\nCGU =&gt; 'R',\nAUA =&gt; 'I',\nAUC =&gt; 'I',\nAUU =&gt; 'I',\nAUG =&gt; 'M',\nACA =&gt; 'U',\nACC =&gt; 'U',\nACG =&gt; 'U',\nACU =&gt; 'U',\nAAC =&gt; 'N',\nAAU =&gt; 'N',\nAAA =&gt; 'K',\nAAG =&gt; 'K',\nAGC =&gt; 'S',\nAGU =&gt; 'S',\nAGA =&gt; 'R',\nAGG =&gt; 'R',\nGUA =&gt; 'V',\nGUC =&gt; 'V',\nGUG =&gt; 'V',\nGUU =&gt; 'V',\nGCA =&gt; 'A',\nGCC =&gt; 'A',\nGCG =&gt; 'A',\nGCU =&gt; 'A',\nGAC =&gt; 'D',\nGAU =&gt; 'D',\nGAA =&gt; 'E',\nGAG =&gt; 'E',\nGGA =&gt; 'G',\nGGC =&gt; 'G',\nGGG =&gt; 'G',\nGGU =&gt; 'G',\n);\n\nsub translation {\n    say \"enter a RNA or DNA sequence: \";\n    my $sequence = &lt;STDIN&gt;;\n    chomp $sequence;\n    $sequence = uc ($sequence);\n    if ($sequence =~ /T/){\n        $sequence =~ tr/ATGC/UACG/;\n    }\n\n    say \"\\nThe result of translation is:\\n\\n\";  \n    foreach ($a = 0; $a &lt; 3; $a++) {\n        my $main_seq = substr($sequence, $a);\n        if ($main_seq =~ /(AUG(...)*(UAG|UGA|UAA))/){\n            $main_seq = $1;\n\n            $main_seq =~ s/(...)/$genetic_code{$1}/g;       #Here is the warning place\n            say \"$main_seq\\n\";\n        }\n\n        else {\n            say \"No start or stop codon!\"\n        }\n\n    }\n}\n</code></pre>\n\n<p>Other parts work fine. For example, when I enter a 669 bp DNA:</p>\n\n<pre><code>TACATCCACCACACCATTTCCGCCAATGAAATTTGCATGCAAATCAATCCAGGTTCTTCAAACTGTATGCCCAGTCAACCCAGTCATGCAACACTGACCATTGAATCCATCAATTCAGAAACAGACGAAAGGACCAAGACACGGTTTCGCTGCAGGTTTGAAGGGTGCAAACGAACTTACAGCTCTGCTGGAAACTTGAAAGCACACACTAAAAGTCACACAGGGGAGTATACATTTAAATGTACTGAAGAAGAATGTGGGAAGGCATTTCTCAACTCCCACAGCCTAAAGATTCATGTCAGAGTACACACCAAAGATCGTCCCTATGGCTGTGACATTGGGGGATGTGACAAGAACTTCAACACACTCTACCGATTGAAAGCTCATCAGAGGGTACACAACGGCACCACCTTTAAATGTGAACAATCTGGATGTGTGAAATTCTTCACCACCCTCAGTGACTTACGGAAACACGAACGTGTCCATTCGGGAGACCGGCCATTCAAATGCGAGCACGAAGATTGCAACAAGTCATTTCGCAATAGCCATCATCTGAAATCGCACATGTTATCTCATACGGGTGAACGACCCTACACATGCAGTGATTCTGCATGTGGACGAACCTTCGCCAAGCGTAATTCGTGGAAGTTGCATCTATTGAAGCATGAA\n</code></pre>\n\n<p>it can correctly recognize it, convert it to RNA and find the sequences from start codon to stop codon:</p>\n\n<pre><code>AUGUAGGUGGUGUGGUAAAGGCGGUUACUUUAAACGUACGUUUAGUUAGGUCCAAGAAGUUUGACAUACGGGUCAGUUGGGUCAGUACGUUGUGACUGGUAACUUAGGUAGUUAAGUCUUUGUCUGCUUUCCUGGUUCUGUGCCAAAGCGACGUCCAAACUUCCCACGUUUGCUUGAAUGUCGAGACGACCUUUGAACUUUCGUGUGUGAUUUUCAGUGUGUCCCCUCAUAUGUAAAUUUACAUGACUUCUUCUUACACCCUUCCGUAAAGAGUUGAGGGUGUCGGAUUUCUAAGUACAGUCUCAUGUGUGGUUUCUAGCAGGGAUACCGACACUGUAA\nAUGUCGAGACGACCUUUGAACUUUCGUGUGUGAUUUUCAGUGUGUCCCCUCAUAUGUAAAUUUACAUGACUUCUUCUUACACCCUUCCGUAAAGAGUUGAGGGUGUCGGAUUUCUAAGUACAGUCUCAUGUGUGGUUUCUAGCAGGGAUACCGACACUGUAA\nAUGUCGAGACGACCUUUGAACUUUCGUGUGUGAUUUUCAGUGUGUCCCCUCAUAUGUAAAUUUACAUGACUUCUUCUUACACCCUUCCGUAAAGAGUUGAGGGUGUCGGAUUUCUAAGUACAGUCUCAUGUGUGGUUUCUAGCAGGGAUACCGACACUGUAA\n</code></pre>\n\n<p>However, when I try to use a short sequence \"uacauguauuaacag\" to test this code,\nit returns \"UACAUGUAUUAACAG\", \"AUGUAUUAA\"(which I add extra code to print out and get what I expected) and three warnings shown above. So clearly it's not an error from translation table. Any advice is appreciated!</p>\n"}, {"tags": ["regex", "bash", "perl", "awk", "grep"], "answers": [{"comments": [{"owner": {"reputation": 3857, "user_id": 6395388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1211707342181814/picture?type=large", "display_name": "Derek Brown", "link": "https://stackoverflow.com/users/6395388/derek-brown"}, "edited": false, "score": 0, "creation_date": 1507957043, "post_id": 46739256, "comment_id": 80428481, "body": "This is a generic bash answer.  While it would work in Ansible, I think filters are a better option."}, {"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "reply_to_user": {"reputation": 3857, "user_id": 6395388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1211707342181814/picture?type=large", "display_name": "Derek Brown", "link": "https://stackoverflow.com/users/6395388/derek-brown"}, "edited": false, "score": 0, "creation_date": 1507958220, "post_id": 46739256, "comment_id": 80428666, "body": "OP doesn&#39;t mention ansible version. Filters only start working from version 2.2. So, yes, my solution is generic. And no, it&#39;s not bash, it works on any shell."}, {"owner": {"reputation": 2003, "user_id": 5219302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f3d909580b0514f31f525eb59e6517?s=128&d=identicon&r=PG", "display_name": "Praveen Premaratne", "link": "https://stackoverflow.com/users/5219302/praveen-premaratne"}, "edited": false, "score": 0, "creation_date": 1507981061, "post_id": 46739256, "comment_id": 80434181, "body": "The output I get is this <code>100        stopped                 test                </code> for example, so when I try to filter this with either of the above methods; I get <code>syntax error at -e line 1, near \\&quot;+) for perl and </code>syntax error at or near [` for awk. For some reason I can&#39;t escape or I&#39;m doing something wrong."}, {"owner": {"reputation": 2003, "user_id": 5219302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f3d909580b0514f31f525eb59e6517?s=128&d=identicon&r=PG", "display_name": "Praveen Premaratne", "link": "https://stackoverflow.com/users/5219302/praveen-premaratne"}, "edited": false, "score": 0, "creation_date": 1507981364, "post_id": 46739256, "comment_id": 80434285, "body": "<code>pct list | grep -w test</code>. Perl <code>pct list | grep -w test | perl -n -e &#39;(d+)&#39;</code>"}, {"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "reply_to_user": {"reputation": 2003, "user_id": 5219302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f3d909580b0514f31f525eb59e6517?s=128&d=identicon&r=PG", "display_name": "Praveen Premaratne", "link": "https://stackoverflow.com/users/5219302/praveen-premaratne"}, "edited": false, "score": 0, "creation_date": 1507981629, "post_id": 46739256, "comment_id": 80434353, "body": "@PraveenM show the exact output of your <code>grep -w test</code>"}, {"owner": {"reputation": 2003, "user_id": 5219302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f3d909580b0514f31f525eb59e6517?s=128&d=identicon&r=PG", "display_name": "Praveen Premaratne", "link": "https://stackoverflow.com/users/5219302/praveen-premaratne"}, "edited": false, "score": 0, "creation_date": 1507981826, "post_id": 46739256, "comment_id": 80434413, "body": "@MarcLambrichs There are some bash outputs added to the question above"}, {"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "reply_to_user": {"reputation": 2003, "user_id": 5219302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f3d909580b0514f31f525eb59e6517?s=128&d=identicon&r=PG", "display_name": "Praveen Premaratne", "link": "https://stackoverflow.com/users/5219302/praveen-premaratne"}, "edited": false, "score": 0, "creation_date": 1507981841, "post_id": 46739256, "comment_id": 80434416, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/156729/discussion-between-marc-lambrichs-and-praveen-m\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "is_accepted": true, "score": 0, "last_activity_date": 1507937839, "last_edit_date": 1507937839, "creation_date": 1507937206, "answer_id": 46739256, "question_id": 46739176, "link": "https://stackoverflow.com/questions/46739176/bash-capture-all-numbers-in-sequence/46739256#46739256", "title": "Bash capture all numbers in sequence", "body": "<p>Using <strong>awk</strong>:</p>\n\n<pre><code>$ cat input.txt | awk 'match($0, /\"stdout\":\\s*\"([0-9]+)/,a){print a[1]}'\n100\n</code></pre>\n\n<p>Using <strong>perl</strong>:</p>\n\n<pre><code>$ cat input.txt | perl -n -e '/\"stdout\":\\s+\"(\\d+)/ &amp;&amp; print $1,\"\\n\"'\n100\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2003, "user_id": 5219302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f3d909580b0514f31f525eb59e6517?s=128&d=identicon&r=PG", "display_name": "Praveen Premaratne", "link": "https://stackoverflow.com/users/5219302/praveen-premaratne"}, "edited": false, "score": 0, "creation_date": 1507979822, "post_id": 46741021, "comment_id": 80433815, "body": "Unfortunately the filters doesn&#39;t help me here as it return ` &quot;101&quot;: &quot;101&quot;`, but thanks for the taking the time to answer."}], "tags": [], "owner": {"reputation": 3857, "user_id": 6395388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1211707342181814/picture?type=large", "display_name": "Derek Brown", "link": "https://stackoverflow.com/users/6395388/derek-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1507957019, "creation_date": 1507957019, "answer_id": 46741021, "question_id": 46739176, "link": "https://stackoverflow.com/questions/46739176/bash-capture-all-numbers-in-sequence/46741021#46741021", "title": "Bash capture all numbers in sequence", "body": "<p>I think you are looking for <a href=\"http://docs.ansible.com/ansible/latest/playbooks_filters.html#id26\" rel=\"nofollow noreferrer\">Ansible filters</a>.  This would allow you to get the value <code>100</code> using a Regex natively within Ansible. </p>\n"}], "owner": {"reputation": 2003, "user_id": 5219302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f3d909580b0514f31f525eb59e6517?s=128&d=identicon&r=PG", "display_name": "Praveen Premaratne", "link": "https://stackoverflow.com/users/5219302/praveen-premaratne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46739256, "answer_count": 2, "score": 0, "last_activity_date": 1507981790, "creation_date": 1507936429, "last_edit_date": 1507981790, "question_id": 46739176, "link": "https://stackoverflow.com/questions/46739176/bash-capture-all-numbers-in-sequence", "title": "Bash capture all numbers in sequence", "body": "<p>I have simple Ansible play that run <code>shell:</code> command on the remote machine, which return something like this</p>\n\n<pre><code>ok: [proxmox] =&gt; {\n    \"CONTAINER_INFO\": {\n        \"changed\": true,\n        \"cmd\": \"pct list | grep -w test\",\n        \"delta\": \"0:00:00.463029\",\n        \"end\": \"2017-10-13 22:21:22.428399\",\n        \"failed\": false,\n        \"rc\": 0,\n        \"start\": \"2017-10-13 22:21:21.965370\",\n        \"stderr\": \"\",\n        \"stderr_lines\": [],\n        \"stdout\": \"100        stopped                 test                \",\n        \"stdout_lines\": [\n            \"100        stopped                 test                \"\n        ]\n    }\n}\n</code></pre>\n\n<p>The only useful information I need is the number on the <code>stdout</code> in this case <code>100</code>.</p>\n\n<blockquote>\n  <p>Is there a way to filter this out like <code>grep</code> command that will return <code>100</code> only?</p>\n</blockquote>\n\n<p>So far best I got is this:</p>\n\n<pre><code>ok: [proxmox] =&gt; {\n    \"CONTAINER_INFO\": {\n        \"changed\": true,\n        \"cmd\": \"pct list | grep -w test | grep -Eo [[:digit:]]\",\n        \"delta\": \"0:00:00.477083\",\n        \"end\": \"2017-10-13 22:26:03.258617\",\n        \"failed\": false,\n        \"rc\": 0,\n        \"start\": \"2017-10-13 22:26:02.781534\",\n        \"stderr\": \"\",\n        \"stderr_lines\": [],\n        \"stdout\": \"1\\n0\\n0\",\n        \"stdout_lines\": [\n            \"1\",\n            \"0\",\n            \"0\"\n        ]\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Pure Bash</p>\n</blockquote>\n\n<pre><code>root@pve:~# pct list | grep -w \"test\"\n100        stopped                 test\nroot@pve:~# pct list | grep -w \"test2\"\n101        running                 test2\n</code></pre>\n\n<p>List doesn't really help me in this case.</p>\n\n<p>Any help is appreciated and thanks in advance.</p>\n"}, {"tags": ["perl", "memory-management", "shared-libraries", "perl-module", "xs"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1507947234, "post_id": 46738256, "comment_id": 80427022, "body": "You might be interested in the core Perl modules, AutoSplit, AutoLoader, and DynaLoader, which you could employ to load portions of modules you&#39;ve authored just in time, but once loaded and compiled-in, the memory is consumed."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1507949642, "post_id": 46738256, "comment_id": 80427339, "body": "@DavidO using POSIX requires 2 mb of rss. I want to release that after I no longer need POSIX."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1507950899, "post_id": 46738256, "comment_id": 80427533, "body": "Subs are reference counted too. Removing all reference to the sub (i.e. removing it from the sym tab) will free it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508070065, "post_id": 46738256, "comment_id": 80455361, "body": "@EvanCarroll: What sort of system are you using where you need to conserve 2MB of memory?"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508089474, "post_id": 46738256, "comment_id": 80461371, "body": "@Borodin imagine a multitenant service that has 5,000 clients running on the same server, and many many servers. In that case, it&#39;d be 2MB/server. Now imagine it not being multitenant. You can engineer around this problem in others ways, but I want to address it head on if possible."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1508090591, "post_id": 46738256, "comment_id": 80461787, "body": "So you have 5,000 or so identical Perl processes running? Is <code>POSIX</code> a specific problem? There are alternatives to most of the functions in that module. I would have thought  addressing the problem head on would involve removing duplicate data, rather than minimising a specific overhead within each one. Why do you want to avoid <code>fork</code>?"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1508091015, "post_id": 46738256, "comment_id": 80461955, "body": "Yes, POSIX is a specific problem, as are other modules that bloat the optree. We&#39;re talking about megs of growth here. As I said, I want to avoid fork. I don&#39;t to re-engineer the program. In Perl modules can be dynamically loaded. I want to dynamically unload them too."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508113547, "post_id": 46738256, "comment_id": 80468030, "body": "Your test appears to be broken because #1 and #2 does exactly what you asked."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508183419, "post_id": 46738256, "comment_id": 80501781, "body": "@ikegami no, they don&#39;t try it. See if you can get the resident size back to pre-POSIX import."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1508199309, "post_id": 46738256, "comment_id": 80507539, "body": "I&#39;m concerned with the RSS which I believe to be a result of the opcodes. I believe that because after I use all of the methods above the RSS does not return to pre-import levels. If it&#39;s not the opcodes bloating the RSS after I run those above, then please feel free to answer with an explanation. Perhaps I&#39;m not right in stating it&#39;s the opcodes?"}], "answers": [{"comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 6, "creation_date": 1508123845, "post_id": 46762436, "comment_id": 80470156, "body": "I&#39;ve compiled with <code>-Uusemymalloc</code> which is glibc and I&#39;ve confirmed that Perl does in fact free from the heap back to the OS. It just doesn&#39;t free opcodes."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1508595041, "post_id": 46762436, "comment_id": 80675589, "body": "This answer is slightly misleading: <code>free()</code> <i>may</i> very well release memory back to the OS and does so in many implementations. This is expected in particular when large pages are mmap&#39;ed. However, free() is not guaranteed to do this. If we do observe that subs do not appear to be freed, this either indicates that a freed sub does not result in a contiguous free memory region that could be released to the OS, or (and this is the problem in the question:) that Perl never frees the opcode structures."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 5, "last_activity_date": 1508123716, "creation_date": 1508123716, "answer_id": 46762436, "question_id": 46738256, "link": "https://stackoverflow.com/questions/46738256/can-i-use-a-module-and-later-unload-it-shrinking-the-optree/46762436#46762436", "title": "Can I use a module, and later unload it shrinking the optree?", "body": "<p>Generally speaking, no. The gritty details are that almost no one shrinks their own memory because almost everyone uses the C library <code>malloc</code> (and friends) call to allocate memory, either directly or indirectly.  And there is no (standard) way to tell the C library to deallocate memory (to send it back to the OS).  Perl is no different here - once <code>malloc</code>ed and <code>free</code>d, the C library upon which Perl depends keeps the memory for future use so that if you need to reuse the memory, no expensive kernel calls are required (specifically, <code>brk</code>), and it can simply be reused. In fact, this is what your unload scenarios are doing - when you come back and reuse that next 2MB in the rest of your server process, you'll be re-using the memory, not calling <code>brk</code>, and you'll be that much faster.</p>\n\n<p>It is possible to do if you take over memory allocation ownership and call <code>brk</code> yourself, but it's rarely worth it.  And getting perl to use that allocator would require some code changes to perl and recompilation. Probably not what you want to do.</p>\n\n<p>Other options are to either bite the bullet, load POSIX prior to forking off any servers (which should leave all of that in shared copy-on-write memory, and thus only take up 2MB of memory for 5k servers), or fork, load POSIX in the child, do the dirty work, exit the child, and continue in the parent. This seems to be relatively slow to me.</p>\n"}, {"comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1508622549, "post_id": 46866281, "comment_id": 80684116, "body": "<i>&quot;chances are it can be deleted fully&quot;</i> this is what I was thinking too. I tried both to clean up the exports into SIG and main that POSIX does, and I also tried to tell POSIX to export nothing. However, all of my attempts were fruitless. In this we go from 6.6mb, to 6.3mb RSS but perl without POSIX is 4.3MB rss. What accounts for the difference after we do all of this? BTW Great answer. And, you were the one person I thought could answer this. =)"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1508622686, "post_id": 46866281, "comment_id": 80684149, "body": "<i>symbols are just set to TEMP if undef&#39;d, so its memory is never freed.</i> this is exactly what I was suspicious of. Can Symbol.pm be modified/patched to clean up rather than set to TEMP, ie is that possible with XS? Or would that be a patch to perl? Is it possible? And, I&#39;m assuming <code>symbols</code> in this context is also referring to opcodes?"}, {"owner": {"reputation": 3676, "user_id": 414279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd8e859d8cf73f2d49eb640964605bb?s=128&d=identicon&r=PG", "display_name": "rurban", "link": "https://stackoverflow.com/users/414279/rurban"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1508657213, "post_id": 46866281, "comment_id": 80690257, "body": "Symbols hold GP slots to the <code>&amp;$%@</code> SV values. Those SV&#39;s are either freed or TEMP&#39;d, but a GV (Symbol) is never freed, it is just cleared. That&#39;s why the number of <code>%main::</code> keys stays that high. A Symbol is a GV. Opcodes are cleared by deleting the &amp; (the function), which will clear also all attached non-global SVs."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1508702441, "post_id": 46866281, "comment_id": 80704174, "body": "So we&#39;re essentially concluding that the arena isn&#39;t free because of GV (Symbols) so it can&#39;t be released back to the OS. I&#39;m guessing this is a patch to gv.c then if it is at all possible?"}, {"owner": {"reputation": 3676, "user_id": 414279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd8e859d8cf73f2d49eb640964605bb?s=128&d=identicon&r=PG", "display_name": "rurban", "link": "https://stackoverflow.com/users/414279/rurban"}, "reply_to_user": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 2, "creation_date": 1508702718, "post_id": 46866281, "comment_id": 80704257, "body": "No. The GVs can be freed by deleting it&#39;s hash entry. The problem is entirely in freeing the arena&#39;s, which hold the SV heads and bodies. I&#39;m currently working on this: <a href=\"https://github.com/perl11/cperl/issues/336\" rel=\"nofollow noreferrer\">github.com/perl11/cperl/issues/336</a> (see the attached commit with &quot;add Internals::gc() WIP&quot;) I now can delete all empty head arenas, but not yet the bodies. WIP"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1508703114, "post_id": 46866281, "comment_id": 80704368, "body": "You are seriously a god amongst men. Having you tackle this side of it, I wonder if I can hack DynaLoader to do something sensible with name =&gt; handle resolution so we can dynamically unload these? I&#39;ll give it a shot."}], "tags": [], "owner": {"reputation": 3676, "user_id": 414279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd8e859d8cf73f2d49eb640964605bb?s=128&d=identicon&r=PG", "display_name": "rurban", "link": "https://stackoverflow.com/users/414279/rurban"}, "is_accepted": false, "score": 4, "last_activity_date": 1509620467, "last_edit_date": 1509620467, "creation_date": 1508608454, "answer_id": 46866281, "question_id": 46738256, "link": "https://stackoverflow.com/questions/46738256/can-i-use-a-module-and-later-unload-it-shrinking-the-optree/46866281#46866281", "title": "Can I use a module, and later unload it shrinking the optree?", "body": "<p>Yes, you can.</p>\n\n<p>But there are dragons, and practically not.</p>\n\n<p>SV's and OP's are allocated in arenas. OP's hold pointers to their data, SV's. Those OP's and SV's can be freed via undef, with the malloc'ed parts being immediately freed and the arenas (~70 OPs) freed when all OPs therein are freed.</p>\n\n<p>Then you have the globals which can be easily freed also by walking the namespace. But beware of not destroying data for which references from somewhere else still exist, and it's DESTROY handler cannot deal with that. There's a lot of unsafe DESTROY code out there, because nobody does this.</p>\n\n<p>And sometimes to be deleted globals are referenced from somewhere else, so it will not be freed, just the refcount drops.</p>\n\n<p>And then you have the external XS code, for which you have to call <code>dl_unload_file()</code>.</p>\n\n<p>In your case <code>use POSIX</code> creates tons of imports into the main:: namespace, GV aliases of all the imported functions. They need to be deleted also.\n<code>use POSIX ();</code> will skip the import, so will need MUCH less memory, and chances are it can be deleted fully.</p>\n\n<p>To see what is not really undef'd see</p>\n\n<pre><code>#!/usr/bin/perl\n$|++;\nmy $s = shift // 3;\nsub rss { `ps -o \"comm,rss,vsize\" | grep perl` }\nprint \"BEGIN \",scalar keys %main::,\" \",rss;\nrequire Symbol;\n#require Class::Unload;\nrequire POSIX;\n\nprint \"GOT POSIX \",scalar keys %main::,\" \",rss;\nsleep($s);\n\nPOSIX-&gt;import;\nprint \"IMPORT POSIX \",scalar keys %main::,\" \",rss;\nsleep($s);\n\nPOSIX-&gt;unimport;\n#Class::Unload-&gt;unload('POSIX');\nSymbol::delete_package('POSIX');\n\nfor (keys %main::) {\n  #print \"$_\\n\";\n  undef ${$_} unless /^(STD|!|0|1|2|\\]|_)/;\n  undef &amp;{$_} unless /rss/;\n  undef @{$_};\n  # clear the GV\n  undef *{$_} unless /^(STD...?|rss|main::|DynaLoader::|_|!)$/;\n  # delete the GV\n  delete $main::{$_} unless /^(STD...?|rss|main::|DynaLoader::|_|!)$/;\n}\n#Symbol::delete_package('main::'); # needs a patched Symbol\nprint \"unloaded \",scalar keys %main::,\" \",rss;\n\nsleep($s);\n\nDynaLoader::dl_unload_file($_) for @DynaLoader::dl_librefs;\nundef *DynaLoader::;\nprint \"unload XS \",scalar keys %main::,\" \",rss;\n#print \"  $_\\n\" for keys %main::;\nprint \"POSIX::$_\\n\" for keys %POSIX::;\nprint \"freed \",scalar keys %main::,\" \",rss;\nsleep($s);\n</code></pre>\n\n<p>result,</p>\n\n<pre><code>=&gt;\n  BEGIN 45 /usr/src/perl/bl   3192  2451188\n  GOT POSIX 70 /usr/src/perl/bl   6112  2468844\n  IMPORT POSIX 645 /usr/src/perl/bl   6928  2468844\n  unloaded 8 /usr/src/perl/bl   7120  2468844\n  unload XS 8 /usr/src/perl/bl   7040  2468596\n  freed 8 /usr/src/perl/bl   7048  2468596\n</code></pre>\n\n<p>which shows that</p>\n\n<ol>\n<li>Symbol is unreliable deleting readonly, protected symbols, and</li>\n<li>the global symbols (in main::) are not freed by undef, but by deleting the stash entry.</li>\n<li>Do not import POSIX and such old import-heavy modules, rather use the full name. Purging these is hard.</li>\n<li>You cannot free SVs only OPs, memory will mostly increase, not shrink.</li>\n</ol>\n\n<p>SV head and body arena's are never freed, they are just reused. So you can only shrink the optree, not the data.</p>\n\n<p>The SV's behind the symbol are just set to TEMP if undef'd, so its memory is never freed, and the symbol itself (the GV) is only cleared with undef.\nOPs are deleted by undef'ing the CV, but system malloc rarely frees it, only if a full page is freed and with glibc with a call to <code>malloc_trim(0)</code>, and perl's memory is too sprinkled out. It's still a linked list with not much compaction after all.</p>\n\n<p>The rss goes a bit down from unload XS to freed, but it still higher than after the initial import.</p>\n\n<p>My watcher is <code>watch -n1 'ps -o \"comm,rss,vsize\" |grep perl;'</code> because this works also on BSD/darwin.</p>\n\n<p>I wrote a <code>Internals::gc()</code> for cperl to actually walk all arenas and free the empty ones, but it's pretty unstable and not recommended, as the VM can only \"properly\" deal with those free SVs during global destruction, not at run-time. See <a href=\"https://github.com/perl11/cperl/issues/336\" rel=\"nofollow noreferrer\">https://github.com/perl11/cperl/issues/336</a></p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 2, "answer_count": 2, "score": 9, "last_activity_date": 1509620467, "creation_date": 1507930028, "last_edit_date": 1508521140, "question_id": 46738256, "link": "https://stackoverflow.com/questions/46738256/can-i-use-a-module-and-later-unload-it-shrinking-the-optree", "title": "Can I use a module, and later unload it shrinking the optree?", "body": "<p><strong>Disclaimer</strong> I'm not sure I'm using the right terms. It may not be the optree responsible for the bloat mentioned below: it may be the symbols loaded by <code>DynaLoader</code> that are not freed.</p>\n\n<p>Is it possible to use a module, like <code>POSIX.pm</code>, unload it and lessen (shrink, or prune) the optree without either</p>\n\n<ol>\n<li>Rexecing perl</li>\n<li>Forking</li>\n</ol>\n\n<p>Things I've tried, </p>\n\n<ol>\n<li><a href=\"https://metacpan.org/pod/Class::Unload\" rel=\"nofollow noreferrer\"><code>Class::Unload-&gt;unload('POSIX');</code></a></li>\n<li><a href=\"https://metacpan.org/pod/Symbol\" rel=\"nofollow noreferrer\"><code>Symbol::delete_package('POSIX');</code></a></li>\n<li><a href=\"http://perldoc.perl.org/functions/no.html\" rel=\"nofollow noreferrer\"><code>no POSIX;</code></a></li>\n</ol>\n\n<p>Here is an easy test create a file test.pl</p>\n\n<pre><code>$|++;\nuse Symbol;\nuse Class::Unload;\nuse POSIX;\n\nprint \"GOT POSIX\";\nsleep(3);\n\nno POSIX;\nClass::Unload-&gt;unload('POSIX');\nSymbol::delete_package('POSIX');\nprint \"unloaded\";\n\nsleep(3);\n</code></pre>\n\n<p>Shell command</p>\n\n<pre><code>perl ./test.pl &amp; watch -n1 'ps -C perl -o \"cmd rss\";'\n</code></pre>\n\n<p>You may or may not be able to see the RSS size increase (POSIX may load before <code>watch</code> spawns <code>ps</code>). But, I want to see it shrink back down.</p>\n\n<p>Tracking down what exactly <a href=\"https://metacpan.org/source/SHAY/perl-5.26.1/ext/POSIX/lib/POSIX.pm\" rel=\"nofollow noreferrer\"><code>POSIX.pm</code></a> does I see it uses <a href=\"https://metacpan.org/source/XSLoader\" rel=\"nofollow noreferrer\"><code>XSLoader</code></a> which uses <a href=\"https://metacpan.org/source/DynaLoader\" rel=\"nofollow noreferrer\"><code>DynaLoader</code></a>.</p>\n\n<p>Doing some quick comparative checks in <code>/proc/$$/smaps</code> I've determined that using POSIX.pm causes a heap allocation that represents the difference in space. The first allocation on the heap, is massively bigger when using POSIX.pm:</p>\n\n<pre><code>56122fe4c000-561230040000 rw-p 00000000 00:00 0                          [heap]\nSize:               2000 kB\nRss:                1956 kB\nPss:                1956 kB\nShared_Clean:          0 kB\nShared_Dirty:          0 kB\nPrivate_Clean:         0 kB\nPrivate_Dirty:      1956 kB\nReferenced:         1956 kB\nAnonymous:          1956 kB\nAnonHugePages:         0 kB\nShmemPmdMapped:        0 kB\nShared_Hugetlb:        0 kB\nPrivate_Hugetlb:       0 kB\nSwap:                  0 kB\nSwapPss:               0 kB\nKernelPageSize:        4 kB\nMMUPageSize:           4 kB\nLocked:                0 kB\nVmFlags: rd wr mr mw me ac sd\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>560c9f6ba000-560c9f6fc000 rw-p 00000000 00:00 0                          [heap]\nSize:                264 kB\nRss:                 220 kB\nPss:                 220 kB\nShared_Clean:          0 kB\nShared_Dirty:          0 kB\nPrivate_Clean:         0 kB\nPrivate_Dirty:       220 kB\nReferenced:          220 kB\nAnonymous:           220 kB\nAnonHugePages:         0 kB\nShmemPmdMapped:        0 kB\nShared_Hugetlb:        0 kB\nPrivate_Hugetlb:       0 kB\nSwap:                  0 kB\nSwapPss:               0 kB\nKernelPageSize:        4 kB\nMMUPageSize:           4 kB\nLocked:                0 kB\nVmFlags: rd wr mr mw me ac sd\n</code></pre>\n\n<p>I've confirmed a few things, nuking the namespace does not drop the open file handle to <code>POSIX.so</code> and <code>Fnctl.so</code> -- I determined this with <code>lsof</code>. That is in itself somewhat concerning. I would think it would make sense to allocate the handle on the callee's package. <code>XSLoader</code> also obscures that you can release that file handle -- a feature available in <code>DynaLoader</code>. </p>\n\n<p>Further, it seems that in <code>libc</code> / <code>dlfcn.h</code> I have</p>\n\n<blockquote>\n  <p><code>dlclose()</code></p>\n  \n  <p>The function dlclose() decrements the reference count on the dynamically loaded shared object referred to by handle.  If the reference count drops to zero, then the object is unloaded.  All shared objects that were automatically loaded when dlopen() was invoked on the object referred to by handle are recursively closed in the same manner.</p>\n  \n  <p>A successful return from dlclose() does not guarantee that the symbols associated with handle are removed from the caller's address space. <strong>In addition to references resulting from explicit dlopen() calls,  a  shared  object may have been implicitly loaded (and reference counted) because of dependencies in other shared objects.  Only when all references have been released can the shared object be removed from the address space.</strong></p>\n</blockquote>\n\n<p>So I'm guessing that may be suspect, <code>DynaLoader::dl_unload_file</code> is calling <a href=\"https://github.com/Perl/perl5/blob/720c8c4f57a8be0960c9068d899e9d111e143382/ext/DynaLoader/dl_dlopen.xs#L211\" rel=\"nofollow noreferrer\"><code>dlclose</code></a> and it does seems to work.</p>\n\n<pre><code>foreach my $dlref ( @DynaLoader::dl_librefs ) {\n  print DynaLoader::dl_unload_file($dlref);\n}\n</code></pre>\n\n<p>After I nuked all files loaded with <code>DynaLoader</code> and <code>XSLoader</code> by doing the above the RSS still did not drop.</p>\n"}, {"tags": ["perl", "strftime"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1507924925, "post_id": 46737146, "comment_id": 80421301, "body": "Unrelated, but it&#39;s <code>$res[$i]-&gt;{&#39;signupdate&#39;}</code>. The sigil has to change if you get a scalar value out. Perl should give you a warning about that if you have <code>use warnings</code> turned on (which of course you do, right?)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507924987, "post_id": 46737146, "comment_id": 80421326, "body": "What happens when you do use the code that you said you&#39;ve tried? Do you get wrong output? Where did you get <code>strftime</code> from? POSIX?"}, {"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925039, "post_id": 46737146, "comment_id": 80421348, "body": "@simbabque look at update"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925068, "post_id": 46737146, "comment_id": 80421364, "body": "And what is the value of <code>$res[$i]-&gt;{&#39;signupdate&#39;}</code>?"}, {"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925101, "post_id": 46737146, "comment_id": 80421380, "body": "@simbabque 201710130915. i dont think thats a unix timestamp actually."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925149, "post_id": 46737146, "comment_id": 80421406, "body": "That does not look like a unit timestamp. It looks more like <code>2017-10-31T09:15</code>"}, {"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925170, "post_id": 46737146, "comment_id": 80421414, "body": "yeh so is there a formatting function i can use"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925229, "post_id": 46737146, "comment_id": 80421443, "body": "You can do simple string manipulation. But your assumption that it&#39;s a unix timestamp is wrong. If it was, it were the 10th of December 8361. Uhm. :P"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925255, "post_id": 46737146, "comment_id": 80421453, "body": "If you <i>had</i> a unix timestamp, you would have to pass it into <code>localtime</code> to get the list of arguments that <code>strftime</code> expects."}, {"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925276, "post_id": 46737146, "comment_id": 80421466, "body": "@simbabque i realize its not a unix timestamp now. do you have any code examples you can show for formatting this into a readable format?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925354, "post_id": 46737146, "comment_id": 80421511, "body": "Just let me write an answer. You have enough rep to know that things shouldn&#39;t be rushed..."}, {"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925390, "post_id": 46737146, "comment_id": 80421523, "body": "@simbabque sorry if you thought i was rushing you. please take as much time as you need."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925447, "post_id": 46737146, "comment_id": 80421548, "body": "You&#39;re going to go facepalm now. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507925494, "post_id": 46737146, "comment_id": 80421566, "body": "Oh, I see Perl is not your usual language. You should have said that. Let me know if you need any syntax explained."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1507925683, "post_id": 46737146, "comment_id": 80421644, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/156702/discussion-between-simbabque-and-jkushner\">continue this discussion in chat</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507926766, "post_id": 46737146, "comment_id": 80422104, "body": "You were just talking about <i>casting as int</i>. Perl does not have data types."}], "answers": [{"comments": [{"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1507925619, "post_id": 46737378, "comment_id": 80421615, "body": "all i get is 00-00-00"}, {"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1507925782, "post_id": 46737378, "comment_id": 80421683, "body": "I think it has to do with <code>@res[$i]-&gt;{&#39;signupdate&#39;}</code> which holds the time"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1507927795, "post_id": 46737378, "comment_id": 80422499, "body": "<code>my $date = join &#39;-&#39;, unpack &#39;A4A2A2&#39;, $time</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1507927983, "post_id": 46737378, "comment_id": 80422568, "body": "@Borodin that would have worked as an answer. Without explanation, also. This was not the learning kind of question."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1507925423, "creation_date": 1507925423, "answer_id": 46737378, "question_id": 46737146, "link": "https://stackoverflow.com/questions/46737146/print-strfitime-in-perl/46737378#46737378", "title": "print strfitime in perl", "body": "<p>The data you have looks like a string representation of a date.</p>\n\n<pre><code>YYYYMMDDhhmm\n201710130915\n</code></pre>\n\n<p>It can therefore easily be deconstructed with a pattern match and put back together in a different format.</p>\n\n<pre><code>my $time = \"201710130915\";\n\nmy ($year, $month, $day) = $time =~ m/^(....)(..)(..)/;\nmy $date = sprintf '%d-%02d-%02d', $year, $month, $day;\n\nprint $date;\n</code></pre>\n\n<p>This will print</p>\n\n<pre><code>2017-10-13\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1507978940, "creation_date": 1507978940, "answer_id": 46743773, "question_id": 46737146, "link": "https://stackoverflow.com/questions/46737146/print-strfitime-in-perl/46743773#46743773", "title": "print strfitime in perl", "body": "<p>I'm guessing you're running this code without <code>use strict</code> and <code>use warnings</code>. With those in your code (and you should always include those in your code) you would have got a pretty clear warning.</p>\n\n<p>Your code is basically this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse POSIX 'strftime';\n\nmy $input = '201710130915';\n\nmy $date = strftime('%Y-%m-%d', $input);\nprint $date;\n</code></pre>\n\n<p>And running that, gives this:</p>\n\n<blockquote>\n  <p>Usage: POSIX::strftime(fmt, sec, min, hour, mday, mon, year, wday = -1, yday = -1, isdst = -1)</p>\n</blockquote>\n\n<p>Your instinct to use <code>strftime()</code> was good. But you need to give it the right input. You're giving it a date/time string. When, actually, it wants individual inputs for all the different date/time values. Effectively, it needs the list of values that is returned by <code>localtime()</code>.</p>\n\n<p>You could do it by creating an array, adjusting them in the correct fashion, and then passing the bits of that array in the correct order:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse POSIX 'strftime';\n\nmy $input = '201710130915';\n\nmy @date_bits = $input =~ /(....)(..)(..)(..)(..)/;\n$date_bits[0] -= 1900;\n$date_bits[1]--;\n# The zero is for seconds.\nmy $date = strftime('%Y-%m-%d', 0, reverse @date_bits);\nprint $date;\n</code></pre>\n\n<p>But, frankly, by that point you're probably better off just treating it as a text manipulation problem.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse POSIX 'strftime';\n\nmy $input = '201710130915';\n\nmy $date = join '-', $input =~ /^(....)(..)(..)/;\nprint $date;\n</code></pre>\n"}], "owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 46737378, "answer_count": 2, "score": -1, "last_activity_date": 1507978940, "creation_date": 1507924458, "last_edit_date": 1507925213, "question_id": 46737146, "link": "https://stackoverflow.com/questions/46737146/print-strfitime-in-perl", "title": "print strfitime in perl", "body": "<p>Here is my current code:</p>\n\n<pre><code>print \"&lt;td class=resa&gt;@res[$i]-&gt;{'signupdate'}&lt;/td&gt;&lt;/tr&gt;\\n\";\n</code></pre>\n\n<p>I want to modify the variable <code>@res[$i]-&gt;{'signupdate'}</code> to be a <em>formatted date</em>. The data is <code>201710130915</code> for that variable.</p>\n\n<p>I've tried:</p>\n\n<pre><code>use POSIX qw(strftime);\nmy $date=strftime('%Y-%m-%d',@res[$i]-&gt;{'signupdate'});\nprint \"&lt;td class=resa&gt;$date&lt;/td&gt;&lt;/tr&gt;\\n\";\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["perl", "free", "glibc"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1507924674, "post_id": 46736924, "comment_id": 80421191, "body": "I thought that one can&#39;t do that?  The memory for lexicals is used by the interpreter as it pleases (retained for &quot;later needs&quot;).  Found <a href=\"https://stackoverflow.com/a/1242849/4653379\">this post</a> with an excellent quote so far.."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1507924714, "post_id": 46736924, "comment_id": 80421210, "body": "Afaik, It&#39;s <i>possible</i> if you&#39;re using glibc, I don&#39;t know how or the drawbacks."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1507925261, "post_id": 46736924, "comment_id": 80421457, "body": "I just tried the following one-liner under Ubuntu, with a perl-5.26 usemymalloc=n (a vanilla Perlbrew): <code>perl -E&#39;sub mem{system qq(ps u --pid $$)}; mem; { my $x = q(x)x(2**30); mem; undef $x; }; mem&#39;</code>. This allocates a 1GB string at compile time (constant folding), then copies the string, then releases the variable. Without the <code>undef</code> the memory is kept until the end, but with the <code>undef</code> the copied string is freed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1507925635, "post_id": 46736924, "comment_id": 80421621, "body": "@amon Just (bravely) tried that on a nice server here with v5.16.3 ... after <code>undef</code>-ing RSS did drop but it still kept a lot.  With your example it dropped by about a half (?), with <code>2**10</code> by about 25%."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1507925899, "post_id": 46736924, "comment_id": 80421738, "body": "@zdim The string exists twice: once as the string literal <code>q(x) x (2**30)</code> which was expanded by constant folding, then the copy. When the copy is <code>undef</code>ed, the copy is freed but the literal still resides in memory. So we&#39;ll see at most a 50% drop for that example. The <code>q(x) x (2**10)</code> is merely 1KB, so the few KB memory overhead of perl itself reduces the visibility of the effect."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1507926106, "post_id": 46736924, "comment_id": 80421832, "body": "@amon Good point, thanks.  So it does release it.  This is still at interpreter&#39;s mercy, no?  Don&#39;t know how more complex data structures would fare.  (Tried with a simple hashref and it worked.)"}], "answers": [{"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1508010016, "post_id": 46737680, "comment_id": 80443257, "body": "\u201cAlso, just dropping out of scope, without undef, gets the same memory relief.\u201d \u2013 No, the above experiment demonstrates that the memory is only released when the variable is undef&#39;d. Remove the <code>undef</code>, and the memory remains allocated until the Perl interpreter exits."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 2, "creation_date": 1508027632, "post_id": 46737680, "comment_id": 80447165, "body": "@amon  I did (would&#39;ve not written that just so). However, as I re-tested now I see that I tried without <code>undef</code> <i>with a hashref</i>. It drops the same w/ or w/o <code>undef</code>: <code>perl -we&#39;sub mem{system qq(ps u --pid $$)}; mem; { my $x = { k =&gt; q(x)x(2**30) }; mem } sleep 1; mem&#39;</code>. I tested on a combination of v5.10.1, v5.16.3, and v5.27.2 on a desktop, laptop and server.  With a scalar it indeed needs the <code>undef</code>. I am updating the misleading statement, thank you."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1508175322, "last_edit_date": 1592644375, "creation_date": 1507927075, "answer_id": 46737680, "question_id": 46736924, "link": "https://stackoverflow.com/questions/46736924/perl-freeing-to-os-with-glibc/46737680#46737680", "title": "Perl freeing to OS with glibc", "body": "<p>Going off of the Build and Installation guide <a href=\"http://search.cpan.org/%7Enwclark/perl-5.8.8/INSTALL\" rel=\"nofollow noreferrer\">Install</a>, under <a href=\"http://search.cpan.org/%7Enwclark/perl-5.8.8/INSTALL#Malloc_Issues\" rel=\"nofollow noreferrer\">Malloc issues</a> it says</p>\n<blockquote>\n<p>To build without perl's malloc, you can use the Configure command</p>\n<pre><code>sh Configure -Uusemymalloc\n</code></pre>\n</blockquote>\n<p>The build/test/install outline is given right at the top and this would replace its first line.</p>\n<p>There is also the module <a href=\"http://search.cpan.org/%7Emschilli/Perl-Configure-0.07/lib/Perl/Configure.pm\" rel=\"nofollow noreferrer\">Perl::Configure</a> to ease and automate the process.</p>\n<p>Also note experimentation by <a href=\"https://stackoverflow.com/users/1521179/amon\">amon</a> in comments, who found that the interpreter does release a good deal of memory from <code>undef</code>-ed variables. In a modified test with a hashref even just dropping out of scope, without <code>undef</code>, gets the same memory relief. (See a comment below.)</p>\n<p>I don't know whether (or how much) any of this can be relied on, in particular with complex data structures, as (in my understanding) lexicals' allocations are at the interpreter's mercy.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508175322, "creation_date": 1507923472, "last_edit_date": 1507925619, "question_id": 46736924, "link": "https://stackoverflow.com/questions/46736924/perl-freeing-to-os-with-glibc", "title": "Perl freeing to OS with glibc", "body": "<p>How can I tell Perl, built with glibc, to release the memory back to the operating system thus shrinking the resident size?</p>\n\n<p>I seem to recall the being possible, but do not remember how it was done.</p>\n\n<p>Can I for instance, nuke a typeglob and free all the space allocated inside it?</p>\n\n<p>Looking at the <a href=\"http://perldoc.perl.org/perlfaq3.html#How-can-I-free-an-array-or-hash-so-my-program-shrinks%3f\" rel=\"nofollow noreferrer\">perl faq</a> it says,</p>\n\n<blockquote>\n  <p>You usually can't. Memory allocated to lexicals (i.e. my() variables) cannot be reclaimed or reused even if they go out of scope. It is reserved in case the variables come back into scope. Memory allocated to global variables can be reused (within your program) by using undef() and/or delete().\n  On most operating systems, memory allocated to a program can never be returned to the system. That's why long-running programs sometimes re- exec themselves. Some operating systems <strong>(notably, systems that use mmap(2) for allocating large chunks of memory) can reclaim memory that is no longer used, but on such systems, perl must be configured and compiled to use the OS's malloc, not perl's.</strong></p>\n</blockquote>\n\n<p>So I want to make sure my perl is compiled with glibc and that I have the conditions to do it. The docs say <strong>\"you usually can't\"</strong>, well I have glibc and I want to be able to do it.</p>\n\n<pre><code>perl -V | grep -i malloc\n    usemymalloc=n, bincompat5005=undef\n                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "edited": false, "score": 0, "creation_date": 1507923001, "post_id": 46736767, "comment_id": 80420439, "body": "Can you share your specific regex and data for the case it isn&#39;t working?"}, {"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "reply_to_user": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "edited": false, "score": 0, "creation_date": 1507923101, "post_id": 46736767, "comment_id": 80420483, "body": "@FedericoPiazza The regex and data shown are exactly what I&#39;m using."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1507923125, "post_id": 46736767, "comment_id": 80420495, "body": "What output do you expect? It seems to work for me, it just doesn&#39;t populate wines and plates in the same iteration of the loop, as it processes just one key in each step."}, {"owner": {"reputation": 4233, "user_id": 1143387, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0b9a9c460593d77b3561075ef1889150?s=128&d=identicon&r=PG", "display_name": "sniperd", "link": "https://stackoverflow.com/users/1143387/sniperd"}, "edited": false, "score": 0, "creation_date": 1507923421, "post_id": 46736767, "comment_id": 80420615, "body": "regex is working properly for me.  I suspect you just need to throw debugging lines in, something else is wrong like your hash may be PlateName and not plateName, perl is case sensitive."}, {"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1507923598, "post_id": 46736767, "comment_id": 80420685, "body": "@choroba I added an expected versus actual output to the question"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1507924196, "post_id": 46736767, "comment_id": 80420952, "body": "There are serious issues with how this is supposed to be used. What do you want to do with <code>$string</code>? Half of it is uninitialized in each iteration, since only either wines or plates are set, never both.  You should probably edit the question to show enough of the context."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1507924295, "post_id": 46736767, "comment_id": 80421002, "body": "Alright, removing that comment -- and editing the one after it.  Please read it over in a few seconds."}, {"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1507924475, "post_id": 46736767, "comment_id": 80421098, "body": "@zdim I was looking to avoid a wall of text, but I&#39;ve updated it for the literal code, not just a condensed version. <a href=\"https://jsfiddle.net/hquop1ad/1/\" rel=\"nofollow noreferrer\">Here&#39;s the actual output</a>."}, {"owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "edited": false, "score": 0, "creation_date": 1507925559, "post_id": 46736767, "comment_id": 80421588, "body": "I going to delete the question in a day or two, as I figured out the problem. If <code>$in{$[wine|beer|plate]Name}</code> had any whitespace in it, I would replace them with a &#39;+&#39;. This seems to then be overwriting $1, thus making the other keys useless. Lesson learned."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1507928408, "post_id": 46736767, "comment_id": 80422735, "body": "Good catch, that substitution wipes out <code>$1</code>.  Another lesson, perhaps: too complicated? (For one, must you write HTML by hand?)  Only musing here, I don&#39;t know your problem and this may well be most suitable."}], "answers": [{"tags": [], "owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "is_accepted": true, "score": -1, "last_activity_date": 1507927088, "creation_date": 1507927088, "answer_id": 46737682, "question_id": 46736767, "link": "https://stackoverflow.com/questions/46736767/perl-simple-regex-capture-group-not-capturing/46737682#46737682", "title": "Perl simple regex capture group not capturing", "body": "<p>Based on your posted code, it looks like the problem is with:</p>\n\n<pre><code>$in{$plateName} =~ s/\\s/+/g;\n</code></pre>\n\n<p>where you have too many <code>/</code> in the pattern?</p>\n"}], "owner": {"reputation": 89, "user_id": 2708601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e295d1aaf101788673ab244bca76ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey H.", "link": "https://stackoverflow.com/users/2708601/geoffrey-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 46737682, "answer_count": 1, "score": -1, "last_activity_date": 1507927088, "creation_date": 1507922674, "last_edit_date": 1507924797, "question_id": 46736767, "link": "https://stackoverflow.com/questions/46736767/perl-simple-regex-capture-group-not-capturing", "title": "Perl simple regex capture group not capturing", "body": "<p>For the sake of data entry, I have a hash of variable size, with multiple elements having similar names. An example of what the hash might look like would be;  </p>\n\n<ul>\n<li>wineName0 => Chardonnay</li>\n<li>wineFull0 => 4.00</li>\n<li>wineHalf0 => 2.00</li>\n<li>wineName1 => Pinot Noir</li>\n<li>wineFull1 => 16.00</li>\n<li>wineHalf1 => 8.00</li>\n<li>plateName0 => Flank Steak</li>\n<li>plateCost0 => 14.00</li>\n<li>plateTemps0 => allow</li>\n</ul>\n\n<p>As for processing them, I am iterating through the keys, checking them with a regex, capturing their number, then using that number to grab similarly numbered elements, like so;</p>\n\n<pre><code>        foreach $key (sort keys %in){\n            if($key =~ /wineName(\\d+)/){\n                if($wineTable eq \"\"){\n                    $wineTable = qq{\n        &lt;tr&gt;\n            &lt;td colspan=3 class=\"label\"&gt;Wines&lt;/td&gt;\n        &lt;/tr&gt;\n                    };\n                }\n                $wineName = $key;\n                    $in{$wineName} =~ s/\\s/+/g;\n                $wineFull = \"wineFull$1\";\n                $wineHalf = \"wineHalf$1\";\n\n                $wineTable .= qq{\n        &lt;tr&gt;\n            &lt;!-- $key --&gt;\n            &lt;td&gt;$in{$wineName}&lt;/td&gt;\n            &lt;td&gt;\\$$in{$wineFull}&lt;/td&gt;\n            &lt;td&gt;\\$$in{$wineHalf}&lt;/td&gt;\n        &lt;/tr&gt;\n                };\n            }\n            if($key =~ /beerName(\\d+)/){\n                if($beerTable eq \"\"){\n                    $beerTable = qq{\n        &lt;tr&gt;\n            &lt;td colspan=3 class=\"label\"&gt;Beers&lt;/td&gt;\n        &lt;/tr&gt;\n                    };\n                }\n                $beerName = $key;\n                    $in{$beerName} =~ s/\\s/+/g;\n                $beerFull = \"beerFull$1\";\n                $beerHalf = \"beerHalf$1\";\n\n                $beerTable .= qq{\n        &lt;tr&gt;\n            &lt;!-- $key --&gt;\n            &lt;td&gt;$in{$beerName}&lt;/td&gt;\n            &lt;td&gt;\\$$in{$beerFull}&lt;/td&gt;\n            &lt;td&gt;\\$$in{$beerHalf}&lt;/td&gt;\n        &lt;/tr&gt;\n                };\n            }\n            if($key =~ /plateName(\\d+)/){\n                if($plateTable eq \"\"){\n                    $plateTable = qq{\n        &lt;tr&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th&gt;Cost&lt;/th&gt;\n            &lt;th&gt;Cook Temperatures&lt;/th&gt;\n        &lt;/tr&gt;\n                    };\n                }\n                my $plateName = $key;\n                    $in{$plateName} =~ s/\\s/+/g;\n                my $plateCost = \"plateCost$1\";\n                my $plateTemp = \"plateTemps$1\";\n\n                if($in{$plateTemp}){\n                    $in{$plateTemp} = 1;\n                }else{\n                    $in{$plateTemp} = 0;\n                }\n\n                $plateTable .= qq{\n        &lt;tr&gt;\n            &lt;!-- $key --&gt;\n            &lt;td&gt;$in{$plateName}&lt;/td&gt;\n            &lt;td&gt;\\$$in{$plateCost}&lt;/td&gt;\n            &lt;td&gt;$in{$plateTemp}&lt;/td&gt;\n        &lt;/tr&gt;\n                };\n            }\n        }\n</code></pre>\n\n<p>My problem is that for some reason, <code>/plateName(\\d+)/</code> is not capturing. so if <code>$key == \"plateName1\"</code>, <code>$plateCost</code> ends up equaling \"plateCost\", and not \"plateCost1.\" The hash keys I've given as examples are actual examples. With this in mind, I need help understanding why the regex for wines works, while the regex for plates does not work, considering they are nearly identical. </p>\n"}, {"tags": ["linux", "perl", "xdgutils"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 2588750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c2dba48e7bb16980bf31f951c818fa?s=128&d=identicon&r=PG", "display_name": "Mid&#39;", "link": "https://stackoverflow.com/users/2588750/mid"}, "is_accepted": false, "score": 3, "last_activity_date": 1518651635, "creation_date": 1518651635, "answer_id": 48797996, "question_id": 46736478, "link": "https://stackoverflow.com/questions/46736478/perl-wait-for-xdg-open-to-quit-before-continuing/48797996#48797996", "title": "Perl: wait for xdg-open to quit before continuing", "body": "<p><code>xdg-open</code> uses different ways to open files depending on the desktop environment you are using. It doesn't actually \"start the viewer\" but asks (at least in Gnome) the desktop environment to open your file (for example using <code>gio</code> in Gnome that in turn uses dbus).</p>\n\n<p>Therefore there is no simple way to know the PID of the viewer to wait for it to be exited, except by doing some non portable trickery.</p>\n\n<p>A solution could be to use the module <code>File::Temp</code> (included in the perl distribution) and create your temporary file / directory with the UNLINK / CLEANUP flag that makes it being deleted when the variable holding the object goes out of scope (thus calling the DESTROY method). This way, as long as your script runs (and the variable doesn't go out of scope) the temporary file is accessible in the filesystem.</p>\n"}], "owner": {"reputation": 256, "user_id": 733823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50855199f6184058d4c7150f84105413?s=128&d=identicon&r=PG", "display_name": "MTS", "link": "https://stackoverflow.com/users/733823/mts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1518651635, "creation_date": 1507921315, "question_id": 46736478, "link": "https://stackoverflow.com/questions/46736478/perl-wait-for-xdg-open-to-quit-before-continuing", "title": "Perl: wait for xdg-open to quit before continuing", "body": "<p>I have a Perl script that produces a pdf <code>$pdffile</code> in a temporary directory <code>$tempdir</code> and opens it using <code>xdg-open</code>. The script should then delete the working directory once the user is done looking at the file. Here's the part of the code that I'm having trouble with:</p>\n\n<pre><code>system \"xdg-open $pdffile\";\nremove_tree($tempdir);\n</code></pre>\n\n<p>My understanding of <code>system</code> is that it should wait until the command returns before continuing the program. However, when I execute this code, I get a message \"Could not open /tmp/diff14969/diffs.pdf\". If I replace <code>xdg-open</code> with <code>okular</code> (which is my system default) in the <code>system</code> command, it works as I want it to. (Similarly, it works if I hardcode any pdf viewer that lives on my system, but I don't want to do that for portability reasons.)</p>\n\n<p>My guess is that <code>xdg-open</code> is starting the viewer in a new process and that the <code>system</code> command only waits for <code>xdg-open</code> to finish. Once <code>xdg-open</code> returns successfully, the script removes the temp directory before the viewer can open the file. How can I make the script wait for the actual viewer to finish instead?</p>\n"}, {"tags": ["bash", "perl", "replace", "tcsh", "cd"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1507919839, "post_id": 46735931, "comment_id": 80418942, "body": "Write the python program you mentioned, but have it print out the dir name instead of trying to change the cwd. Then, you can use <code>tcsh</code> equivalent of the following <code>sh</code> command: <code>cd &quot;$( prog.py )&quot;</code>"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 2, "creation_date": 1507920033, "post_id": 46735931, "comment_id": 80419063, "body": "- and obviously you can create a shell function called <code>cd</code> to do that for you so that you can write <code>cd 0999</code> instead of <code>cd &quot;$(myprog 0999)&quot;</code> every time"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507925814, "post_id": 46735931, "comment_id": 80421703, "body": "Pick one shell. If you want a tcsh answer, don&#39;t tag bash at all -- they&#39;re <i>utterly and entirely</i> incompatible."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507926144, "post_id": 46735931, "comment_id": 80421857, "body": "BTW, an implementation of something like this in bash might look like <code>cd() { command cd &quot;$@&quot;; local subdir; IFS= read -r -d &#39;&#39; subdir &lt; &lt;(find . -name here -type d -print0 -exit); [[ $subdir ]] &amp;&amp; cd &quot;$subdir&quot;; }</code> -- though I strongly, <i>strongly</i>, <b>strongly</b> advise against it.  Doing something like this will break a <i>lot</i> of scripts and idioms, and also run extremely slowly when changing into a directory with a deep structure underneath."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1507920027, "post_id": 46736168, "comment_id": 80419056, "body": "More flexible if you use <code>print(&quot;foo&#47;bar&#47;baz&quot;)</code> instead of <code>print(&quot;cd foo&#47;bar&#47;baz&quot;)</code>. This also makes it easier to handle directories with spaces in their names."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507925931, "post_id": 46736168, "comment_id": 80421750, "body": "...otherwise, if you want to correctly handle interesting directory names (including ones with spaces, syntax, etc), you need to use <code>pipes.quote()</code> and ensure that the surrounding shell includes <code>eval</code>. And that escapes content for POSIX-y shells; if the OP&#39;s serious about wanting a csh answer, that&#39;s a completely different set of issues."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 0, "last_activity_date": 1507919913, "creation_date": 1507919913, "answer_id": 46736168, "question_id": 46735931, "link": "https://stackoverflow.com/questions/46735931/adding-search-and-replace-to-the-cd-command/46736168#46736168", "title": "Adding search and replace to the &quot;cd&quot; command", "body": "<p>Let <code>example.py</code> be a script that outputs some shell commands.</p>\n\n<pre><code>#!/usr/bin/python\n# example.py\nprint(\"cd foo/bar/baz\")\n</code></pre>\n\n<p>Then you can execute the output of that script, in the current shell, with backticks or the <code>$(...)</code> notation.</p>\n\n<pre><code>mob ~ $ $(./example.py)\nmob ~/foo/bar/baz $ echo $PWD\nmob ~/foo/bar/baz $ /home/mob/foo/bar/baz\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8772850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608ec4e1abb7899de1e9bc6e40712d9f?s=128&d=identicon&r=PG&f=1", "display_name": "D. Ostler", "link": "https://stackoverflow.com/users/8772850/d-ostler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 46736168, "answer_count": 1, "score": 2, "last_activity_date": 1507920313, "creation_date": 1507918952, "last_edit_date": 1507920313, "question_id": 46735931, "link": "https://stackoverflow.com/questions/46735931/adding-search-and-replace-to-the-cd-command", "title": "Adding search and replace to the &quot;cd&quot; command", "body": "<p>I'm trying to figure out a way to search and replace in the command line.  Preferably the solution would work in tcsh.  Here's what I want to do.</p>\n\n<pre><code>$ echo $PWD\n/projects/apples/001/0440/my/files/are/here/\n$ cd 0999\n/projects/apples/001/0999/my/files/are/here/\n$ cd oranges\n/projects/oranges/001/0999/my/files/are/here/\n$ cd were\n/projects/oranges/001/0999/my/files/were/here/\n</code></pre>\n\n<p>The script would search from the end of the line and find the first occurrence of a matching directory structure and then cd into that directory.</p>\n\n<p>I'm fluent in python and this script woulds be easy to write in this language but python runs in a process so changing the current directory of one process has no effect on the current work directory of other existing processes.</p>\n\n<p>What is the best way to write such a script?  What is the most efficient way of accomplishing this task?  My directory structures can get quite large with many thousands of folders so it needs to be quick.</p>\n"}, {"tags": ["sql", "oracle", "perl"], "comments": [{"owner": {"reputation": 3043, "user_id": 642201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f42Ub.jpg?s=128&g=1", "display_name": "gsiems", "link": "https://stackoverflow.com/users/642201/gsiems"}, "edited": false, "score": 0, "creation_date": 1507918691, "post_id": 46735688, "comment_id": 80418360, "body": "You aren&#39;t specifying the column that your values are to be in. That is, there should be some column name between the &quot;where&quot; and the &quot;in&quot;."}, {"owner": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "reply_to_user": {"reputation": 3043, "user_id": 642201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f42Ub.jpg?s=128&g=1", "display_name": "gsiems", "link": "https://stackoverflow.com/users/642201/gsiems"}, "edited": false, "score": 0, "creation_date": 1507920691, "post_id": 46735688, "comment_id": 80419417, "body": "@gsiems  updated the  code with column name .:-                               Error:                                                                                    DBD::Oracle::db prepare failed: ORA-00904: &quot;5&quot;: invalid identifier (DBD ERROR: error possibly near &lt;*&gt; indicator at char 143 in &#39;select name,value from B where name in(1,2,3,4,&lt;*&gt;5)&#39;) [for Statement &quot;select name,value from  B where name in(1,2,3,4,5)&quot;] at hello.pl line 99. Can&#39;t call method &quot;execute&quot; on an undefined value at hello.pl line 102."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1507920884, "post_id": 46735688, "comment_id": 80419495, "body": "&gt;&gt; <code>use strict; use warnings; use diagnostics;</code> &lt;&lt;"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "edited": false, "score": 0, "creation_date": 1507920254, "post_id": 46735888, "comment_id": 80419178, "body": "Now it is showing   DBD::Oracle::db prepare failed: ORA-00904: &quot;5&quot;: invalid identifier (DBD ERROR: error possibly near &lt;*&gt; indicator at char 143 in &#39;select name,value from B where name in(1,2,3,4,&lt;*&gt;5)&#39;) [for Statement &quot;select name,value from  B where name in(1,2,3,4,5)&quot;] at hello.pl line 99. Can&#39;t call method &quot;execute&quot; on an undefined value at hello.pl line 102."}, {"owner": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "edited": false, "score": 0, "creation_date": 1507923015, "post_id": 46735888, "comment_id": 80420444, "body": "the Error is still the same."}, {"owner": {"reputation": 1373, "user_id": 2524830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8747a131c11d0f535df92a8eaceb4550?s=128&d=identicon&r=PG", "display_name": "Valli", "link": "https://stackoverflow.com/users/2524830/valli"}, "reply_to_user": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "edited": false, "score": 0, "creation_date": 1507923822, "post_id": 46735888, "comment_id": 80420780, "body": "I think some extra characters is getting appended as you join. I read same problem in <a href=\"http://www.perlmonks.org/?node_id=753029\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=753029</a>. They are recommending to add chomp (I have no idea about perl or what does chomp does, Just trying to help you)"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1507969237, "post_id": 46735888, "comment_id": 80431039, "body": "Missing starting/ending &quot; (double quotes) in prepare. One at the very beginning before select and the second at the very end after the ) (closing parens) delimiting in args."}, {"owner": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "reply_to_user": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1507972368, "post_id": 46735888, "comment_id": 80431794, "body": "@ulix added the double quotes still the same problem."}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1507973633, "post_id": 46735888, "comment_id": 80432137, "body": "On first loop can you try this? defined($row[0]) and push @var1,$row[0];"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1507974638, "post_id": 46735888, "comment_id": 80432440, "body": "Also if name column is char/varchar maybe is better to quote args:  .. in (&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;)"}], "tags": [], "owner": {"reputation": 1373, "user_id": 2524830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8747a131c11d0f535df92a8eaceb4550?s=128&d=identicon&r=PG", "display_name": "Valli", "link": "https://stackoverflow.com/users/2524830/valli"}, "is_accepted": false, "score": 0, "last_activity_date": 1507918758, "creation_date": 1507918758, "answer_id": 46735888, "question_id": 46735688, "link": "https://stackoverflow.com/questions/46735688/dbdoracledb-prepare-failed-ora-00936-missing-expression-dbd-error-error/46735888#46735888", "title": "DBD::Oracle::db prepare failed: ORA-00936: missing expression (DBD ERROR: error possibly near &lt;*&gt; indicator at char", "body": "<p>The query you are using is incorrect</p>\n\n<pre><code>select name,value from A where in (1,2,3,4,5)\n</code></pre>\n\n<p>Add a column name between <em>Where and In</em> </p>\n\n<pre><code>select name,value from A where *column_you_checking* in (1,2,3,4,5)\n\nmy $sth3 = $dbh-&gt;prepare(select name,value from B where *column_you_checking* in(\".join(\",\",@var1).\"));   -  line 99\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8772179, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/125907211496420/picture?type=large", "display_name": "Nitin Punekar", "link": "https://stackoverflow.com/users/8772179/nitin-punekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 995, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507972322, "creation_date": 1507917935, "last_edit_date": 1507972322, "question_id": 46735688, "link": "https://stackoverflow.com/questions/46735688/dbdoracledb-prepare-failed-ora-00936-missing-expression-dbd-error-error", "title": "DBD::Oracle::db prepare failed: ORA-00936: missing expression (DBD ERROR: error possibly near &lt;*&gt; indicator at char", "body": "<p>I have 2 tables A and B. I'm taking the name value of each row of table A in the array <code>var1</code> and then put values of array <code>var1</code> in WHERE condition of a SELECT query of table B and print the result of SELECT query of table B.</p>\n\n<p>Code:</p>\n\n<pre><code>my $sql2 = 'select name,value from A';\n\nmy $sth2 = $dbh1 -&gt;prepare($sql2);\n$sth2 -&gt;execute();\nwhile (my @row = $sth2 -&gt;fetchrow_array)\n{\n    print join(',', @row), \"\\n\\n\";\n    push(@var1, $row[0]);\n}\n\nforeach(@var1 ) {\n    print \"$_\\n\";\n}\n\nprint \"\\n\";\n\nmy $sth3 = $dbh -&gt;prepare(\"select name, value from B where  name in (\".join(\", \",@var1).\")\"); -  line 99\n$sth3 -&gt;execute(@var1);\n\nwhile (my @row = $sth3 -&gt;fetchrow_array)    \n{\n    print join(\", \", @row), \"\\n\";\n}\n</code></pre>\n\n<p>But getting error:</p>\n\n<blockquote>\n  <p>DBD::Oracle::db prepare failed: ORA-00904: \"5\": invalid identifier\n  (DBD ERROR: error possibly near &lt;<em>> indicator at char 143 in 'select\n  name,value from B where name in(1,2,3,4,&lt;</em>>5)') [for Statement \"select\n  name,value from  B where name in(1,2,3,4,5)\"] at hello.pl line 99.\n  Can't call method \"execute\" on an undefined value at hello.pl line\n  102.</p>\n</blockquote>\n"}, {"tags": ["perl", "foreach", "io"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1507918241, "post_id": 46735664, "comment_id": 80418146, "body": "Yes, it does...  I&#39;m unsure how to elaborate on that!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507918305, "post_id": 46735664, "comment_id": 80418176, "body": "It&#39;s called list context and has nothing to do with arrays, but yes."}, {"owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 0, "creation_date": 1507918435, "post_id": 46735664, "comment_id": 80418238, "body": "thanks for the &quot;answers.&quot; (edited &quot;array context&quot; -&gt; &quot;list context&quot;)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1507919055, "post_id": 46735664, "comment_id": 80418553, "body": "I wouldn&#39;t call <code>for (&lt;$IN&gt;)</code> an idiom but rather bad practice. Even when one needs the whole file content upfront (legitimate) I think that it&#39;s better to read them into an array and <code>for</code> over that."}, {"owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 0, "creation_date": 1507919447, "post_id": 46735664, "comment_id": 80418731, "body": "I came across it in questions written by people who clearly don&#39;t know what they&#39;re doing."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507919630, "post_id": 46735664, "comment_id": 80418824, "body": "@flies: I think <b>zdim</b> is talking about your <i>&quot;I saw the following idiom&quot;</i>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1507918507, "creation_date": 1507918507, "answer_id": 46735815, "question_id": 46735664, "link": "https://stackoverflow.com/questions/46735664/does-foreach-in-slurp-the-file/46735815#46735815", "title": "does foreach (&lt;$IN&gt;) slurp the file?", "body": "<p>Yes.</p>\n\n<p>The list expressions of a foreach loop is evaluated in list context. There are a couple of optimizations (e.g. <code>for ($x..$y)</code> and <code>for (@a)</code> uses \"no\" memory), but <code>for (readline($FH))</code> is not optimized.</p>\n"}], "owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 46735815, "answer_count": 1, "score": 2, "last_activity_date": 1507919672, "creation_date": 1507917852, "last_edit_date": 1507919672, "question_id": 46735664, "link": "https://stackoverflow.com/questions/46735664/does-foreach-in-slurp-the-file", "title": "does foreach (&lt;$IN&gt;) slurp the file?", "body": "<p>Looking over some recent questions, I saw the following awkward construction:</p>\n\n<pre><code>open my $IN, \"&lt;\", 'file' or die \"can't read from 'file'. $!\";\nforeach my $line (&lt;$IN&gt;) {\n    ...\n}\n</code></pre>\n\n<p>(The idiom I'm familiar with is <code>while (my $line = &lt;$IN&gt;) {...}</code>.)</p>\n\n<p>My question is, does the <code>foreach</code> idiom force the <code>&lt;&gt;</code> into list context, and hence demand that the interpreter slurp the entire file?</p>\n"}, {"tags": ["perl", "file", "output"], "comments": [{"owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 0, "creation_date": 1507916494, "post_id": 46735206, "comment_id": 80417246, "body": "always <code>use strict</code> unless you have a <i>very</i> good reason."}], "answers": [{"comments": [{"owner": {"reputation": 1892, "user_id": 366628, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38bfcedf3f5c7488bd729549aaed712a?s=128&d=identicon&r=PG", "display_name": "flies", "link": "https://stackoverflow.com/users/366628/flies"}, "edited": false, "score": 2, "creation_date": 1507916476, "post_id": 46735272, "comment_id": 80417238, "body": "alternatively, open and close <code>TEMP</code> inside the <code>INFO</code> loop."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507996150, "post_id": 46735272, "comment_id": 80438863, "body": "alternatively, <code>seek TEMP, 0, 0</code> before reading from it each time"}, {"owner": {"reputation": 175, "user_id": 2672436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5008e35dbbf877d7e726c8259f5a5d?s=128&d=identicon&r=PG", "display_name": "CSY", "link": "https://stackoverflow.com/users/2672436/csy"}, "edited": false, "score": 0, "creation_date": 1508014134, "post_id": 46735272, "comment_id": 80444434, "body": "I honestly don&#39;t like the open/close TEMP inside INFO loop as this would create a lot of unnecessary processing (file access versus hash table). If INFO file contains thousands of lines, the code would open/close TEMP thousands of times."}, {"owner": {"reputation": 175, "user_id": 2672436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5008e35dbbf877d7e726c8259f5a5d?s=128&d=identicon&r=PG", "display_name": "CSY", "link": "https://stackoverflow.com/users/2672436/csy"}, "edited": false, "score": 0, "creation_date": 1508014406, "post_id": 46735272, "comment_id": 80444510, "body": "Borodin, your method would solve the OP&#39;s issue but it is still <b>reading</b> from TEMP file (file I/O is really not as optimal as hash table which is in memory). Anyway, JMHO."}], "tags": [], "owner": {"reputation": 175, "user_id": 2672436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5008e35dbbf877d7e726c8259f5a5d?s=128&d=identicon&r=PG", "display_name": "CSY", "link": "https://stackoverflow.com/users/2672436/csy"}, "is_accepted": false, "score": 0, "last_activity_date": 1507916305, "creation_date": 1507916305, "answer_id": 46735272, "question_id": 46735206, "link": "https://stackoverflow.com/questions/46735206/open-two-text-files-process-them-and-write-to-separate-files/46735272#46735272", "title": "Open two text files, process them and write to separate files", "body": "<p>Your problem is that the TEMP loop is <strong>inside</strong> the INPUT loop and so the TEMP loop will end while the INPUT loop is still on the first line of the INPUT file.</p>\n\n<p>Best to store TEMP file data into a hash table and work on the TEMP hash table inside the INPUT loop.</p>\n\n<p>Good luck.</p>\n"}, {"comments": [{"owner": {"reputation": 177, "user_id": 7594127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/965c731d858cdf1a15090769f9171075?s=128&d=identicon&r=PG&f=1", "display_name": "below_avg_st", "link": "https://stackoverflow.com/users/7594127/below-avg-st"}, "edited": false, "score": 0, "creation_date": 1507929640, "post_id": 46735436, "comment_id": 80423255, "body": "wow this solved it. This is my first Perl program, I knew I probably had some problems with my code, thanks for pointing them out and for the tips."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1507996056, "last_edit_date": 1507996056, "creation_date": 1507916918, "answer_id": 46735436, "question_id": 46735206, "link": "https://stackoverflow.com/questions/46735206/open-two-text-files-process-them-and-write-to-separate-files/46735436#46735436", "title": "Open two text files, process them and write to separate files", "body": "<p>As has been said, you need to open your template file again each time you read from it. There's a bunch of other issues with your code too</p>\n\n<ul>\n<li><p><em>Always</em> <code>use strict</code> and <code>use warnings 'all'</code> and declare every variable with <code>my</code> as close as possible to where it is first used</p></li>\n<li><p><code>$#ARGV</code> is the index of the last element of <code>@ARGV</code>, so <code>$#ARGV &lt; 0</code> is much better written as <code>@ARGV &lt; 1</code></p></li>\n<li><p>You should use <em>lexical</em> file handles, and the three-parameter form of <code>open</code>, so <code>open(INFO, \"p5Customer.txt\")</code> should be <code>open my $info_fh, '&lt;', \"p5Customer.txt\"</code></p></li>\n<li><p>You should use <code>while</code> instead of <code>for</code> to read from a file</p></li>\n<li><p>It is easier to use the default variable <code>$_</code> for short loops</p></li>\n<li><p>It is pointless to capture a substring in a regular expression if you're not going to use it, so <code>(NAME|FULLNAME)</code> should be <code>NAME|FULLNAME</code></p></li>\n<li><p>There is no point in closing input files before the end of your program</p></li>\n</ul>\n\n<p>It is also much better to use an existing template system, such as\n<a href=\"https://metacpan.org/pod/Template::Toolkit\" rel=\"nofollow noreferrer\"><code>Template::Toolkit</code></a></p>\n\n<p>This should work for you</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nif ( @ARGV &lt; 1 ) {\n    print \"Usage: proj5.pl &lt;mm/dd/yyyy&gt;\\n\";\n    exit;\n}\n\nmy $date = $ARGV[0];\n\nopen my $info_fh, '&lt;', 'p5Customer.txt' or die qq{Could not open \"p5Customer.txt\" file: $!};\n\nmy $directory = \"Emails\";\nmkdir $directory unless -e $directory;\n\nwhile ( &lt;$info_fh&gt; ) {\n\n    chomp;\n    my ($email, $fullname, $title, $payed, $owed) = split /,/;\n    next if $owed &lt; $payed;\n\n    open my $template_fh, '&lt;', 'template.txt' or die qq{Could not open \"template.txt\" file: $!};\n\n    my $filepath = \"$directory/$email\";\n    open my $out_fh, '&gt;', $filepath or die qq{Unable to create \"$filepath\": $!};\n\n    while ( &lt;$template_fh&gt; ) {\n\n        s/EMAIL/$email/g;\n        s/FULLNAME|NAME/$fullname/g;\n        s/TITLE/$title/g;\n        s/AMOUNT/$owed/g;\n        s/DATE/$date/g;\n\n        print $out_fh $_;\n    }\n\n    close($out_fh);\n}\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 7594127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/965c731d858cdf1a15090769f9171075?s=128&d=identicon&r=PG&f=1", "display_name": "below_avg_st", "link": "https://stackoverflow.com/users/7594127/below-avg-st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "accepted_answer_id": 46735436, "answer_count": 2, "score": -2, "last_activity_date": 1507996056, "creation_date": 1507915965, "last_edit_date": 1507916830, "question_id": 46735206, "link": "https://stackoverflow.com/questions/46735206/open-two-text-files-process-them-and-write-to-separate-files", "title": "Open two text files, process them and write to separate files", "body": "<p>I'm using with Perl to open two text files, process them and then write the output to another file.</p>\n\n<p>I have a file <code>INPUT</code> were every line is a customer. I will process each line into variables that will be used to substitute text in another file, <code>TEMP</code>. The result should be written into individual files for each customer, <code>OUTPUT</code>.</p>\n\n<p>My program seems to be working on only the first file. The rest of the files remain empty with no output.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nif ( $#ARGV &lt; 0) {\n    print \"Usage: proj5.pl &lt;mm/dd/yyyy&gt;\\n\";\n    exit;\n}\n\nmy $date = $ARGV[0];\n\nopen(INFO, \"p5Customer.txt\") or die(\"Could not open p5Customer.txt file\\n\");\nopen(TEMP, \"template.txt\")   or die(\"Could not open template.txt file\\n\");\n\nmy $directory = \"Emails\";\nmkdir $directory unless(-e $directory);\n\nforeach $info (&lt;INFO&gt;){\n\n    ($email, $fullname, $title, $payed, $owed) = split /,/, $info;\n    next if($owed &lt; $payed);\n    chomp($owed);\n\n    $filepath = \"$directory/$email\";\n    unless(open OUTPUT, '&gt;&gt;'.$filepath){\n        die \"Unable to create '$filepath'\\n\";\n    }\n\n    foreach $detail (&lt;TEMP&gt;){\n        $detail =~ s/EMAIL/$email/g;\n        $detail =~ s/(NAME|FULLNAME)/$fullname/g;\n        $detail =~ s/TITLE/$title/g;\n        $detail =~ s/AMOUNT/$owed/g;\n        $detail =~ s{DATE}{$date}g;\n        print OUTPUT $detail;\n    }\n\n    close(OUTPUT);\n}\n\nclose(INFO);\nclose(TEMP);\n</code></pre>\n"}, {"tags": ["perl", "scope", "packages", "exporter"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507906808, "post_id": 46732743, "comment_id": 80411967, "body": "Answered <a href=\"http://www.perlmonks.org/?node_id=778639\" rel=\"nofollow noreferrer\">here</a>. Personally, I&#39;d move <code>$VALID_NOTES</code> into Note where it belongs. You can always import it into Music and re-export it from Music."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1507906864, "post_id": 46732743, "comment_id": 80412012, "body": "Please don&#39;t use the smartmatch experimental feature; it will be removed from Perl or changed in a backwards incompatible manner."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1507906983, "post_id": 46732743, "comment_id": 80412088, "body": "Mixing Moose and Exporter? I&#39;d rather not."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1507907004, "post_id": 46732743, "comment_id": 80412109, "body": "@choroba, wut? Nothing wrong with that!"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507907005, "post_id": 46732743, "comment_id": 80412110, "body": "@ikegami, is there another clean way to search an array in a single line like this? Searching arrays of arrays gets rather complicated without smart-match."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1507907112, "post_id": 46732743, "comment_id": 80412185, "body": "@ikegami: With an OO module, I&#39;d rather use a package method to return the structure."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1507907157, "post_id": 46732743, "comment_id": 80412214, "body": "@choroba, Why would you want to disguise a constant as a method!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507907292, "post_id": 46732743, "comment_id": 80412295, "body": "@tjwrona1992, A <code>grep</code> can be used instead of <code>~~</code> here. If you need to hide the <code>grep</code>, you can use a sub instead of an experimental operator. That said, I would build a lookup hash from <code>$VALID_NOTES</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1507907358, "post_id": 46732743, "comment_id": 80412327, "body": "@ikegami: Well, it&#39;s much better to disguise it as a variable :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1507907489, "post_id": 46732743, "comment_id": 80412427, "body": "@choroba, Oh, I didn&#39;t notice. I would use actual constant instead of var."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1507907724, "post_id": 46732743, "comment_id": 80412559, "body": "good to note, I will change it to an actual constant"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507909014, "post_id": 46732743, "comment_id": 80413350, "body": "@ikegami, quick follow-up question. should I <code>use constant</code> or <code>use ReadOnly</code> to deal with constant variables?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507909142, "post_id": 46732743, "comment_id": 80413430, "body": "Personally, I&#39;d use <code>constant</code> and not worry about the fact that it&#39;s not actually constant. If you want to go all the way, that&#39;s fine too."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1507909255, "post_id": 46732743, "comment_id": 80413479, "body": "Actually I just tried <code>constant</code> and it doesn&#39;t seem to like when I try to dereference a constant array ref, the fact that <code>ReadOnly</code> keeps the sigil makes regular syntax work better."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507911029, "post_id": 46732743, "comment_id": 80414484, "body": "<code>${ +CONSTANT }[ ]</code> because <code>${ CONSTANT }[ ]</code> means <code>$CONSTANT[ ]</code>"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1507911098, "post_id": 46732743, "comment_id": 80414528, "body": "Thanks, good to know! I will stick with <code>ReadOnly</code> though because it makes the variable deeply constant and I already figured out how to get it to work. :)"}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1507907780, "post_id": 46733035, "comment_id": 80412597, "body": "I&#39;m getting <code>C</code> as the output."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1507907848, "post_id": 46733035, "comment_id": 80412637, "body": "interesting... I literally just copied and pasted it to make sure i didn&#39;t make a mistake and it&#39;s still failing for me."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1507907991, "post_id": 46733035, "comment_id": 80412711, "body": "Had a typo somewhere else! it works. Thanks. I think I might move the variable into the &quot;Notes&quot; module altogether to eliminate the problem entirely though."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1507907582, "creation_date": 1507907582, "answer_id": 46733035, "question_id": 46732743, "link": "https://stackoverflow.com/questions/46732743/exported-variable-is-still-not-visible-after-exporting/46733035#46733035", "title": "Exported variable is still not visible after exporting", "body": "<p>In <code>Music.pm</code>, populate the <code>@EXPORT_OK</code> in a BEGIN block <em>before</em> loading <code>Note</code>:</p>\n\n<pre><code>package Music;\nuse Moose;\nour @EXPORT_OK;\nBEGIN { @EXPORT_OK = qw($VALID_NOTES) }\nuse Exporter qw(import);\nuse Note;\n</code></pre>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 46733035, "answer_count": 1, "score": 2, "last_activity_date": 1507907582, "creation_date": 1507906588, "question_id": 46732743, "link": "https://stackoverflow.com/questions/46732743/exported-variable-is-still-not-visible-after-exporting", "title": "Exported variable is still not visible after exporting", "body": "<p>I am working on a simple Perl module to create and validate musical notes and to find enharmonically equivalent notes. I am storing an array reference containing all valid notes in a module and then exporting it so the <code>Note.pm</code> module can see which notes are valid and check against the list when it goes to create a <code>Note</code> object.</p>\n\n<p>The problem is, no matter what I try the Exported <code>$VALID_NOTES</code> array reference is not visible in <code>Note.pm</code>! I've read through the documentation on <a href=\"https://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\"><code>Exporter</code></a> about a thousand times and looked back at tons of my old Perl modules that use <code>Exporter</code> and I just cannot figure out what is wrong here...</p>\n\n<p>Here is the code:</p>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse Music;\n\nmy $m = Music-&gt;new();\n\nmy $note = $m-&gt;note('C');\n\nprint $note;\n</code></pre>\n\n<p><strong>Music.pm</strong></p>\n\n<pre><code>package Music;\n\nuse Moose;\nuse Note;\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw($VALID_NOTES);\n\nno warnings 'qw';\n\n# Valid notes\n# Enharmonic notes are in preferred (most common) order:\n#     Natural -&gt; Sharp -&gt; Flat -&gt; Double Sharp -&gt; Double Flat\nour $VALID_NOTES = [\n    [ qw(C B#        Dbb) ],\n    [ qw(  C# Db B##    ) ],\n    [ qw(D       C## Ebb) ],\n    [ qw(  D# Eb     Fbb) ],\n    [ qw(E    Fb D##    ) ],\n    [ qw(F E#        Gbb) ],\n    [ qw(  F# Gb E##    ) ],\n    [ qw(G       F## Abb) ],\n    [ qw(  G# Ab        ) ],\n    [ qw(A       G## Bbb) ],\n    [ qw(  A# Bb     Cbb) ],\n    [ qw(B    Cb A##    ) ],\n];\n\nsub note {\n    my $self = shift;\n    my $name = shift;\n    return Note-&gt;new(name =&gt; $name);\n}\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n</code></pre>\n\n<p><strong>Note.pm</strong></p>\n\n<pre><code>package Note;\n\nuse Moose;\nuse Music qw($VALID_NOTES);\nuse experimental 'smartmatch';\n\nhas 'name'  =&gt; (is =&gt; 'ro', isa =&gt; 'Str', required =&gt; 1);\nhas 'index' =&gt; (is =&gt; 'ro', isa =&gt; 'Int', lazy =&gt; 1, builder =&gt; '_get_index');\n\n# Overload stringification\nuse overload fallback =&gt; 1, '\"\"' =&gt; sub { shift-&gt;name() };\n\nsub BUILD {\n    my $self = shift;\n    if (!grep { $self ~~ @{$VALID_NOTES-&gt;[$_]} } 0..$#{$VALID_NOTES}) {\n        die \"Invalid note: '$self'\\n\";\n    }\n}\n\nsub _get_index {\n    my $self = shift;\n    my ($index) = grep { $self ~~ @{$VALID_NOTES-&gt;[$_]} } 0..$#{$VALID_NOTES};\n    return $index;\n}\n\nsub enharmonic_notes {\n    my $self = shift;\n    my $index = $self-&gt;index();\n    return map { Note-&gt;new($_) } @{$VALID_NOTES-&gt;[$index]};\n}\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n</code></pre>\n\n<p>When I run the code I get this output:</p>\n\n<pre><code>Global symbol \"$VALID_NOTES\" requires explicit package name at Note.pm line 15.\nGlobal symbol \"$VALID_NOTES\" requires explicit package name at Note.pm line 15.\nGlobal symbol \"$VALID_NOTES\" requires explicit package name at Note.pm line 22.\nGlobal symbol \"$VALID_NOTES\" requires explicit package name at Note.pm line 22.\nGlobal symbol \"$VALID_NOTES\" requires explicit package name at Note.pm line 29.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27, "user_id": 8771746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e7cafc9beae589458c99e96317675b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob_From_IT", "link": "https://stackoverflow.com/users/8771746/bob-from-it"}, "edited": false, "score": 0, "creation_date": 1507905515, "post_id": 46732029, "comment_id": 80411106, "body": "By experimental does that mean that it might not be included in newer versions?  Is there a better option?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507906048, "post_id": 46732029, "comment_id": 80411461, "body": "Re &quot;<i>By experimental does that mean that it might not be included in newer versions?</i>&quot;, Yes, or it might be changed in a backwards incompatible manner first."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507909637, "post_id": 46732029, "comment_id": 80413676, "body": "Please show the rest of your code. It won&#39;t compile as it is."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1507905114, "post_id": 46732207, "comment_id": 80410825, "body": "That&#39;s a very complicated was you walk the tied array. Why not something simpler like: <code>s&#47;line to be overwritten&#47;line has been overwritten&#47; for @testFile;</code>"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1507905283, "post_id": 46732207, "comment_id": 80410946, "body": "Looks better. Updating my answer. Thank you."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1507905383, "post_id": 46732207, "comment_id": 80411019, "body": "As a general rule, if you&#39;re using a C-style for loop - you&#39;re probably doing it wrong :-)"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": -1, "last_activity_date": 1507905305, "last_edit_date": 1507905305, "creation_date": 1507904909, "answer_id": 46732207, "question_id": 46732029, "link": "https://stackoverflow.com/questions/46732029/how-to-check-for-a-string-using-perl-given/46732207#46732207", "title": "How to check for a string using Perl given", "body": "<p>One way to do it is to use Tie::File module. It allows to replace data right in the file. You can make the backup same way you are currently doing, before changing the original file.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tie::File;\n\nmy $file = 'test.txt';\ntie my @textFile, 'Tie::File', $file, recsep =&gt; \"\\n\"  or die $!;\ns/line to be overwritten/line has been overwritten/ for @textFile;\nuntie @textFile;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": -1, "last_activity_date": 1507904995, "creation_date": 1507904995, "answer_id": 46732240, "question_id": 46732029, "link": "https://stackoverflow.com/questions/46732029/how-to-check-for-a-string-using-perl-given/46732240#46732240", "title": "How to check for a string using Perl given", "body": "<p>You seem to be making it way more complicated than it needs to be - a simple regex to check each line and act accordingly should do the job.</p>\n\n<pre><code>while(&lt;$INFILE&gt;)\n{\n     chomp($_);\n     if /^line to be overwritten$/ )\n     {\n          print $OUTFILE \"line has been overwritten\\n\";\n     }\n     else\n     {\n          print $OUTFILE \"$_\\n\";\n     }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507909541, "post_id": 46732438, "comment_id": 80413634, "body": "<code>if</code>/<code>else</code> isn&#39;t a loop"}, {"owner": {"reputation": 27, "user_id": 8771746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e7cafc9beae589458c99e96317675b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob_From_IT", "link": "https://stackoverflow.com/users/8771746/bob-from-it"}, "edited": false, "score": 0, "creation_date": 1507910795, "post_id": 46732438, "comment_id": 80414359, "body": "Thanks for this.  I have strict and warning at the very top of my code (this is just a snippet that I couldn&#39;t get to work).  I started reading up on Perl regex and this exactly what I needed!"}, {"owner": {"reputation": 665, "user_id": 2854144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6l9H.jpg?s=128&g=1", "display_name": "TBSliver", "link": "https://stackoverflow.com/users/2854144/tbsliver"}, "edited": false, "score": 0, "creation_date": 1507913242, "post_id": 46732438, "comment_id": 80415627, "body": "Oops, if/else certainly isn&#39;t a loop! I meant in a loop. Will fix in the post, ta"}], "tags": [], "owner": {"reputation": 665, "user_id": 2854144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6l9H.jpg?s=128&g=1", "display_name": "TBSliver", "link": "https://stackoverflow.com/users/2854144/tbsliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1507913267, "last_edit_date": 1507913267, "creation_date": 1507905576, "answer_id": 46732438, "question_id": 46732029, "link": "https://stackoverflow.com/questions/46732029/how-to-check-for-a-string-using-perl-given/46732438#46732438", "title": "How to check for a string using Perl given", "body": "<p>As highlighted in a comment on the original question, given/when is an experimental feature of perl. I would personally recommend using if/else in a loop, and then either use string equality or a regex to match the line(s) you want to replace. A quick example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile(my $line = &lt;DATA&gt;) {\n  if ( $line =~ /line to be overwritten/ ) {\n    print \"Overwritten\\n\";\n  } else {\n    print $line;\n  }\n}\n\n__DATA__\ntest line 1\ntest line 2\nline to be overwritten\ntest line 3\n</code></pre>\n\n<p>This will give the output:</p>\n\n<pre><code>test line 1\ntest line 2\nOverwritten\ntest line 3\n</code></pre>\n\n<p>You could also use the string equality if you aren't confident in your regex, or the string is guaranteed to be the same:</p>\n\n<pre><code>...\nif ($line eq 'line to be overwritten') {\n...\n</code></pre>\n\n<h2>Sidenotes</h2>\n\n<h3>open</h3>\n\n<p>On your initial open, it is recommended to use the 3 argument version of open to save from unexpected issues:</p>\n\n<pre><code>open(my $INFILE, '&lt;', $newFile) || die \"Unable to read $newFile\\n\";\n</code></pre>\n\n<p>(for more info on this, see here: <a href=\"http://modernperlbooks.com/mt/2010/04/three-arg-open-migrating-to-modern-perl.html\" rel=\"nofollow noreferrer\">http://modernperlbooks.com/mt/2010/04/three-arg-open-migrating-to-modern-perl.html</a>)</p>\n\n<h3>strict &amp; warnings</h3>\n\n<p>Also, it is recommended to use <code>strict</code> and <code>warnings</code> in your code file, as seen in my example above - this will save you from accidental mistakes like trying to use a variable which has not been declared, and syntax errors which may give you head-scratching results!</p>\n\n<h3>Experimental Features</h3>\n\n<p>Experimental features in perl are where there is no guarantee made for backwards compatibility to be maintained when a new release of perl comes out. Obviously if you are using the same version of perl everywhere it should be compatible, but things may break if you update to another major version of perl. <em>answered here as I dont have the reputation to answer in the comments...</em></p>\n"}], "owner": {"reputation": 27, "user_id": 8771746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e7cafc9beae589458c99e96317675b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob_From_IT", "link": "https://stackoverflow.com/users/8771746/bob-from-it"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 46732438, "answer_count": 3, "score": 1, "last_activity_date": 1507913267, "creation_date": 1507904357, "last_edit_date": 1507909603, "question_id": 46732029, "link": "https://stackoverflow.com/questions/46732029/how-to-check-for-a-string-using-perl-given", "title": "How to check for a string using Perl given", "body": "<p>I'm trying to replace a particular line in a file. I can get my program to run, but it doesn't actually do the replacing that I want it to.</p>\n\n<p>Here is my sample file:</p>\n\n<pre><code>test line 1\ntest line 2\nline to be overwritten\ntest line 3\n</code></pre>\n\n<p>Here is the code that I have:</p>\n\n<pre><code>my $origFile = $file_path . \"junk\\.file\";\nmy $newFile  = $file_path . \"junk\\.file\\.backup\";\n\n# system command to make a backup of the file\nsystem \"mv $origFile $newFile\";\n\n#opens the files\nopen( my $INFILE, $newFile )         || die \"Unable to read $newFile\\n\";\nopen( my $OUTFILE, '&gt;' . $origFile ) || die \"Unable to create $origFile\\n\";\n\n# While loop to read in the file line by line\nwhile ( &lt;$INFILE&gt; ) {\n\n    given ($_) {\n\n        when (\"line to be overwritten\") {\n            print $OUTFILE \"line has been overwritten\\n\";\n        }\n        default {\n            print $OUTFILE $_;\n        }\n    }\n}\n\nclose($INFILE);\nclose($OUTFILE);\n</code></pre>\n\n<p>I've tried to change the <code>when</code> statements several different ways to no avail:</p>\n\n<pre><code>when ($_ eq \"line to be overwritten\")\nwhen ($_ == \"line to be overwritten\")\nwhen ($_ cmp \"line to be overwritten\")\n</code></pre>\n\n<p>But those only generate errors. Anyone know what I'm doing wrong here?</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1507904470, "post_id": 46731826, "comment_id": 80410392, "body": "Your tiny snippets of code don&#39;t make it clear at all what you&#39;re doing. What is <code>$nome1json</code> for example? Please add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we might better be able to help you find a solution to your problem."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1507904512, "post_id": 46731826, "comment_id": 80410425, "body": "<a href=\"https://stackoverflow.com/questions/10708297/perl-convert-a-string-to-utf-8-for-json-decode\" title=\"perl convert a string to utf 8 for json decode\">stackoverflow.com/questions/10708297/&hellip;</a>"}, {"owner": {"reputation": 30, "user_id": 8037594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39ta7.jpg?s=128&g=1", "display_name": "edufgimenez", "link": "https://stackoverflow.com/users/8037594/edufgimenez"}, "edited": false, "score": 0, "creation_date": 1507905934, "post_id": 46731826, "comment_id": 80411394, "body": "Basically after doing the request for the API I want to save the contents in a variable already converting all \\ u2122 to their respective character (this is the part that I do not know how to do in Perl) and then using another variable to compare them names are equal to show the price. I&#39;m sorry if I left the question vague."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507915305, "post_id": 46731826, "comment_id": 80416662, "body": "How do you currently convert the JSON data to the Perl data structure that you have dumped? Why has the <code>\u2122</code> vanished?"}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1507911339, "post_id": 46733807, "comment_id": 80414641, "body": "Think that last <code>$name</code> should be <code>$match</code>?"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1507911505, "post_id": 46733807, "comment_id": 80414719, "body": "Yes, my mistake. Fixed. Thanks."}, {"owner": {"reputation": 30, "user_id": 8037594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39ta7.jpg?s=128&g=1", "display_name": "edufgimenez", "link": "https://stackoverflow.com/users/8037594/edufgimenez"}, "edited": false, "score": 0, "creation_date": 1507963480, "post_id": 46733807, "comment_id": 80429677, "body": "@JavierElices This worked fine, however the data of the variable I need to compare are in a txt encoded in UTF-8, the data in the txt already has the characters (\u2605, \u2122) some names are just pure texts with no characters, so the code that you passed can only assimilate the names when they are just pure texts, any tips?"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1507969803, "post_id": 46733807, "comment_id": 80431169, "body": "The converted text will be in UTF8. If your data is in UTF8 as well (a subset of Unicode), Perl should have no problem manipulating or comparing. Are you sure your data is in UTF8? If you print them to the same terminal, do they appear alike?"}, {"owner": {"reputation": 30, "user_id": 8037594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39ta7.jpg?s=128&g=1", "display_name": "edufgimenez", "link": "https://stackoverflow.com/users/8037594/edufgimenez"}, "edited": false, "score": 0, "creation_date": 1508006518, "post_id": 46733807, "comment_id": 80442262, "body": "The data that is in this txt is taken in another API, in this API the names that I need to compare are already &quot;converted&quot; with the symbols, that is, the variable my $name = &quot;nome1 \u2122&quot;; it actually comes from a txt as an array, but in this other API the names are already listed as follows: &quot;name&quot;: &quot;nome1 \u2122&quot;, not &quot;name&quot;: &quot;name \\ u2122&quot; as it is in the API case of the code you sent me , then when your code tries to compare the API data (if (defined $ var1 -&gt; {&#39;response&#39;} -&gt; {&#39;prices&#39;} -&gt; {$ name}) {) they do not match. If so, how can I edit my post to try to explain it better? Thanks for help."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1508012475, "post_id": 46733807, "comment_id": 80443963, "body": "A big trap in Perl is the way data enters and exits a script. The cure is to tell Perl explicitly what the format of the data is. If you are reading a text file, are you telling Perl that it is UTF8? Something like <code>open(my $fh, &quot;&lt;:encoding(UTF-8)&quot;, $filename)</code>."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1508012722, "post_id": 46733807, "comment_id": 80444030, "body": "If you need to make sure you are reading your data in UTF8, you may want to ask a specific question about that or edit your question to show the code you are using to read all data in your script."}, {"owner": {"reputation": 30, "user_id": 8037594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39ta7.jpg?s=128&g=1", "display_name": "edufgimenez", "link": "https://stackoverflow.com/users/8037594/edufgimenez"}, "edited": false, "score": 0, "creation_date": 1508073357, "post_id": 46733807, "comment_id": 80456249, "body": "@JavierElices It worked perfectly using <code>open(my $fh, &quot;&lt;:encoding (UTF-8)&quot;, $filename)</code>, before I was reading the txt using the module IO::All, <code>my @lines = io($filename)-&gt;slurp</code>, can I take advantage of you and ask you one last question? Although everything is working the program now appears with each request: &quot;Wide character in print at C: /Strawberry/perl/lib/IO/Handle.pm line 420. I tried to use &#39;utf8&#39; at the top of the program but it did not. Thanks again for all help."}, {"owner": {"reputation": 30, "user_id": 8037594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39ta7.jpg?s=128&g=1", "display_name": "edufgimenez", "link": "https://stackoverflow.com/users/8037594/edufgimenez"}, "edited": false, "score": 0, "creation_date": 1508073817, "post_id": 46733807, "comment_id": 80456350, "body": "I tried to use <code>no warnings &#39;utf8&#39;</code> at the top of the program but it did not work"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1508073939, "post_id": 46733807, "comment_id": 80456383, "body": "The error &quot;Wide character in print&quot; probably has to do with Perl not expecting your terminal to accept UTF8. As I said, you should tell Perl that all inputs and outputs are UTF8 explicitly. It is a pain because each type has its own trick. Try adding <code>binmode(STDOUT, &#39;:encoding(UTF-8)&#39;);</code> at the beginning of your script to tell Perl to consider STDOUT as UTF8."}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1508074006, "post_id": 46733807, "comment_id": 80456403, "body": "Also, consider asking different questions. The answers you get in comments not directly related to your question will not help anyone else."}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": true, "score": 0, "last_activity_date": 1507911490, "last_edit_date": 1507911490, "creation_date": 1507910373, "answer_id": 46733807, "question_id": 46731826, "link": "https://stackoverflow.com/questions/46731826/pass-data-from-json-to-variable-for-comparison/46733807#46733807", "title": "Pass data from JSON to variable for comparison", "body": "<p>If I understand correctly, you need to get the JSON that you receive in UTF8 format to an internal variable that you can process. For that, you may use <a href=\"http://search.cpan.org/~mlehmann/JSON-XS-3.02/XS.pm\" rel=\"nofollow noreferrer\">JSON::XS</a>:</p>\n\n<pre><code>use utf8;\nuse JSON::XS;\n\nmy $name = \"nome1\u2122\";\nmy $var1 = decode_json $utf8_encoded_json_text;\n\n# Compare with name in $name\nif( defined $var1-&gt;{'response'}-&gt;{'prices'}-&gt;{$name} ) {\n  # Do something with the name that matches\n  my $match = $var1-&gt;{'response'}-&gt;{'prices'}-&gt;{$name};\n\n  print $match-&gt;{'preco1'}, \"\\n\";\n}\n</code></pre>\n\n<p>Make sure you tell the Perl interpreter that your source is in UTF8 by specifying <code>use utf8;</code> at the beginning of the script. Then make sure you are editing the script with an editor that supports that format.</p>\n\n<p>The function <code>decode_json</code> will return a ref to the converted value. In this case a hash ref. From there you work your way into the JSON.</p>\n\n<p>If you know <code>$name</code> is going to be in the JSON you may omit the <code>defined</code> part. Otherwise, the <code>defined</code> clause will tell you whether the hash value is there. One you know, you may do something with it. If the hash values are a single word with no special characters, you may use <code>$var1-&gt;{response}-&gt;{prices}-&gt;{$name}</code>, but it is always safer to use <code>$var1-&gt;{'response'}-&gt;{'prices'}-&gt;{$name}</code>. Perl gets a bit ugly handling hash refs...</p>\n\n<p>By the way, in <code>JSON::XS</code> you will also find the <code>encode_json</code> function to do the opposite and also an object oriented interface.</p>\n"}], "owner": {"reputation": 30, "user_id": 8037594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39ta7.jpg?s=128&g=1", "display_name": "edufgimenez", "link": "https://stackoverflow.com/users/8037594/edufgimenez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 46733807, "answer_count": 1, "score": 0, "last_activity_date": 1507915202, "creation_date": 1507903731, "last_edit_date": 1507915202, "question_id": 46731826, "link": "https://stackoverflow.com/questions/46731826/pass-data-from-json-to-variable-for-comparison", "title": "Pass data from JSON to variable for comparison", "body": "<p>I have a request that I make in an API using GET\n<a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\"><code>LWP::UserAgent</code></a>,\nthe data is returned as JSON, with up to two results at most as follows:</p>\n\n<pre><code>{\n   \"status\":1,\n   \"time\":1507891855,\n   \"response\":{\n      \"prices\":{\n         \"nome1\\u2122\":{\n            \"preco1\":1111,\n            \"preco2\":1585,\n            \"preco3\":1099\n         },\n         \"nome2\":{\n            \"preco1\":519,\n            \"preco2\":731,\n            \"preco3\":491\n         }\n      }\n   }\n}\n</code></pre>\n\n<p>Dump: </p>\n\n<pre><code>$VAR1 = {\n  'status' =&gt; 1,\n  'time' =&gt; 1507891855,\n  'response' =&gt; {\n                  'prices' =&gt; {\n                                'nome1' =&gt; {\n                                             'preco1' =&gt; 1111,\n                                             'preco3' =&gt; 1099,\n                                             'preco2' =&gt; 1585\n                                           },\n                                'nome2' =&gt; {\n                                             'preco3' =&gt; 491,\n                                             'preco1' =&gt; 519,\n                                             'preco2' =&gt; 731\n                                           }\n                              }\n                }\n};\n</code></pre>\n\n<p>What I would like to do is:</p>\n\n<p>Take this data and save it in a variable to make a comparison using <code>if</code> with another variable that already has the name stored. The comparison would be with <code>name1</code> / <code>name2</code> and if it is true with the other variable it would get <code>preco2</code> and <code>preco3</code> to print everything</p>\n\n<p>My biggest problem in the case is that some of these names in JSON contain characters like (TradeMark) that comes as <code>\\u2122</code> (some cases are other characters), so I can not make the comparison with the name of the other variable that is already with the correct name</p>\n\n<pre><code>nome1\u2122\n</code></pre>\n\n<p>If I could only save the JSON already \"converted\" the characters would help me with the rest.</p>\n\n<p>Basically after doing the request for the API I want to save the contents in a variable already converting all <code>\\u2122</code> to their respective character (this is the part that I do not know how to do in Perl) and then using another variable to compare them names are equal to show the price</p>\n\n<p>Thanks for the help and any questions please tell me that I try to explain again in another way.</p>\n"}, {"tags": ["perl", "taskscheduler", "plack"], "comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1507915440, "post_id": 46731668, "comment_id": 80416715, "body": "Do you know what your <code>PATH</code> variable is like for scheduled processes? I would try <code>&lt;full path&gt;&#47;plackup E:&#47;Mojolicious_Server.pl</code>."}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "reply_to_user": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1507915536, "post_id": 46731668, "comment_id": 80416773, "body": "Hmm you know I&#39;m not sure. Definitely worth looking into though! I&#39;ll see what I can find. I&#39;ll be back with results. Thanks!"}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "reply_to_user": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1507916162, "post_id": 46731668, "comment_id": 80417092, "body": "@JavierElices Okay so I found my <code>plackup</code> path which is <code>c:\\strawberry\\perl\\site\\bin\\plackup</code> I can run <code>c:\\strawberry\\perl\\site\\bin\\plackup E:\\Mojolicious_server</code> from the command line and it works! But from the Task Scheduler I get a &quot;0x1&quot; error... seems like the right direction, thank you."}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "reply_to_user": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1507917578, "post_id": 46731668, "comment_id": 80417784, "body": "I&#39;m not sure what the difference was from the first time I tried it but you were exactly correct. Solved by making my argument <code>c:\\strawberry\\perl\\site\\bin\\plackup E:\\Mojolicious_server.pl</code>. Thank you!!!"}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "reply_to_user": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1507928520, "post_id": 46731668, "comment_id": 80422781, "body": "Oh I figured you would write an answer so you get your rep points ... :)"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1507928921, "post_id": 46731668, "comment_id": 80422961, "body": "I have added the answer you tried along with a brief explanation in order for other people to understand it."}], "answers": [{"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": true, "score": 2, "last_activity_date": 1507928848, "creation_date": 1507928848, "answer_id": 46738055, "question_id": 46731668, "link": "https://stackoverflow.com/questions/46731668/run-perl-plackup-script-from-scheduled-task/46738055#46738055", "title": "Run perl Plackup script from Scheduled Task", "body": "<p>As stated in the comments of the question, all it takes is to invoke the sequence <code>plackup E:/Mojolicious_Server.pl</code> making sure that you add the full path to the <code>plackup</code> script. In the case of @gregnnylf94, it was:</p>\n\n<pre><code>c:\\strawberry\\perl\\site\\bin\\plackup E:\\Mojolicious_server.pl\n</code></pre>\n\n<p>This is so because <em>cron</em> jobs do not have the same context as <em>shell</em> ones. The most frequent problem comes from the <code>PATH</code> variable that is key to finding what you want to execute.</p>\n\n<p>This is true in Windows and Linux systems alike.</p>\n"}], "owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 1, "accepted_answer_id": 46738055, "answer_count": 1, "score": 4, "last_activity_date": 1507928848, "creation_date": 1507903152, "last_edit_date": 1507909775, "question_id": 46731668, "link": "https://stackoverflow.com/questions/46731668/run-perl-plackup-script-from-scheduled-task", "title": "Run perl Plackup script from Scheduled Task", "body": "<p><strong>How can I call a script with that preceding argument before the script path using Task Scheduler or a batch file? <code>plackup E:\\Mojolicious_server.pl</code></strong></p>\n\n<p>So I have multiple Mojolicious applications.\nI have bundled them all into a psgi server using plack.</p>\n\n<p>My plack script looks like this...</p>\n\n<pre><code>use Plack::Builder;\nuse lib 'push_the_button/lib';\nuse lib 'Phone_Book/lib';\n\nuse Mojo::Server::PSGI;\nuse Plack::Session::Store;\nuse Data::Dumper;\nuse File::Basename;\n\nmy $current_directory = dirname(__FILE__);\n\nmy $push_the_button, $phone_book;\n\n\n{\n  my $server_1 = Mojo::Server::PSGI-&gt;new;\n  $server_1-&gt;load_app($current_directory.'/Phone_Book/script/application');\n  $phone_book = sub { $server_1-&gt;run(@_) }\n}\n\n{\n  my $server_2 = Mojo::Server::PSGI-&gt;new;\n  $server_2-&gt;load_app($current_directory.'/push_the_button/script/push_the_button.pl');\n  $push_the_button = sub { $server_2-&gt;run(@_) }\n}\n\nbuilder {\n\n  mount \"/phone_book\" =&gt; builder {$phone_book};\n  mount \"/push_the_button\" =&gt; builder {$push_the_button};\n};\n</code></pre>\n\n<p>Now I want to run this as a scheduled task at system startup.</p>\n\n<p>to run this script normally, I would go to cmd \n<code>pushd c:\\strawberry\\perl\\bin</code></p>\n\n<p>Then I would run this command</p>\n\n<p><code>plackup E:/Mojolicious_Server.pl</code></p>\n\n<p>My issue seems to be that <code>plackup</code> portion. \nI have tried adding <code>plackup E:/Mojolicious_Server.pl</code> to the Arguments portion. I have also tried adding <code>plackup</code> to the arguments portion and <code>E:/Mojolicious_Server.pl</code> in the start in portion. Of course <code>C:\\strawberry\\perl\\bin\\perl.exe</code> is the Program to start.</p>\n\n<p>Once I tried all the variations I could think of (including variations on double and single quotes), I wrote a very simple batch file to run (even just in the terminal for testing). It looks like this.</p>\n\n<pre><code>@echo off\n\ncall \"C:\\Strawberry\\perl\\bin\\perl.exe\" \"plackup E:\\Mojolicious_Server.pl\"\n</code></pre>\n\n<p>Which says \"Can't open perl script\".</p>\n\n<p>I went ahead and tried another route using another perl script to <strong>execute</strong> my command...</p>\n\n<pre><code>#! C:\\strawberry\\perl\\bin\\perl.exe\n\n`plackup E:\\\\Mojolicious_Server.pl`;\n</code></pre>\n\n<p>This at least completes successfully in the Task Scheduler, doesn't actually do anything though...</p>\n\n<p>Just as a last resort (obviously wouldn't work), I added <code>plackup E:\\\\Mojolicious_Server.pl</code>; at the end of my Mojolicious_Server.pl script and run that script. Didn't work as I expected (calling a script thats already running). </p>\n\n<p>This seems like it should be very easy, I'm sorry if I'm missing something simple. Any notion in the right direction would be appreciated.</p>\n\n<p>Also I am only doing it this way because I am strictly on a windows environment. If there is a better way, again, please just a nudge in the right direction.</p>\n"}, {"tags": ["perl", "fcntl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1507893413, "post_id": 46728588, "comment_id": 80403229, "body": "How do you use Fcntl to run only one instance of the script?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1507893574, "post_id": 46728588, "comment_id": 80403340, "body": "<a href=\"https://blog.booking.com/highlander-daemons-without-daemons.html\" rel=\"nofollow noreferrer\">blog.booking.com/highlander-daemons-without-daemons.html</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1507894037, "post_id": 46728588, "comment_id": 80403645, "body": "Can you give a reproducible example please? Is the &#39;same filesystem&#39; mean it&#39;s NFS mounted? Have you checked your NFS Lock manager is working properly?  There&#39;s a bunch of reasons why remote file locks might not be being honoured. Not least because - they&#39;re discretionary, not mandatory."}, {"owner": {"reputation": 13, "user_id": 6284788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05fcdbedc93cf0bf5ec37ce4dbda71a8?s=128&d=identicon&r=PG&f=1", "display_name": "gatemed", "link": "https://stackoverflow.com/users/6284788/gatemed"}, "edited": false, "score": 0, "creation_date": 1507895270, "post_id": 46728588, "comment_id": 80404396, "body": "I&#39;m using this : <a href=\"http://perltricks.com/article/2/2015/11/4/Run-only-one-instance-of-a-program-at-a-time/\" rel=\"nofollow noreferrer\">perltricks.com/article/2/2015/11/4/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 6284788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05fcdbedc93cf0bf5ec37ce4dbda71a8?s=128&d=identicon&r=PG&f=1", "display_name": "gatemed", "link": "https://stackoverflow.com/users/6284788/gatemed"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1507896623, "post_id": 46728588, "comment_id": 80405180, "body": "@Sobrique Yes NFS mounted, thanks for the answers. I didn&#39;t know about NFS lock manager, going to check this, and thanks for the link  choroba."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 0, "last_activity_date": 1507903833, "creation_date": 1507903833, "answer_id": 46731867, "question_id": 46728588, "link": "https://stackoverflow.com/questions/46728588/perl-using-fcntl-in-multi-server-context/46731867#46731867", "title": "Perl using Fcntl in multi server context", "body": "<p>File locking is notoriously hard over NFS but it is probably overkill for what you need. Just have the server instances coordinate on a network-accessible file that will contain information about the server with the \"lock\".</p>\n\n<pre><code>...\nif (-f \"/network/accessible/file.lock\") {\n    open my $fh, '&lt;', \"/network/accessible/file.lock\";\n    my $lockholder = &lt;$fh&gt;;\n    die \"Server lock held by $lockholder\";\n\n    # ... you could also examine $lockholder and verify that\n    #     the other server is still alive ...\n} else {\n    open my $fh, '&gt;', \"/network/accessible/file.lock\";\n    print $fh $ENV{HOSTNAME},\":$$\";\n    close $fh;\n}\n...\n\n# need to remove the lock when the current server finishes\nEND { unlink \"/network/accessible/file.lock\" }\n</code></pre>\n\n<p>This will be sufficient unless you start two servers within milliseconds of each other. If you are paranoid about that, you can have the server read the lockfile after it is created, and/or periodically throughout the program, to make sure that the lockfile information hasn't changed.</p>\n\n<pre><code>} else {\n    open my $fh, '&gt;', \"/network/accessible/file.lock\";\n    print $fh $ENV{HOSTNAME},\":$$\";\n    close $fh;\n\n    sleep 1;\n    open $fh, '&lt;', \"/network/accessible/file.lock\";\n    my $lockholder = &lt;$fh&gt;;\n    if ($lockholder ne \"$ENV{HOSTNAME}:$$\") {\n        die \"Server lock was stolen by $lockholder!\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6284788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05fcdbedc93cf0bf5ec37ce4dbda71a8?s=128&d=identicon&r=PG&f=1", "display_name": "gatemed", "link": "https://stackoverflow.com/users/6284788/gatemed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 46731867, "answer_count": 1, "score": 1, "last_activity_date": 1507903833, "creation_date": 1507893157, "question_id": 46728588, "link": "https://stackoverflow.com/questions/46728588/perl-using-fcntl-in-multi-server-context", "title": "Perl using Fcntl in multi server context", "body": "<p>I'm trying to use Fcntl library to run only one instance of a script at a time,</p>\n\n<p>It works when it's only one server who run the script (same server can't run another instance of the script), but if I have <strong>another</strong> server (who actually access the same filesystem) run the script, it doesn't work (he can actully run it).</p>\n\n<p>Anyone has an idea on how to handle this using Fcntl library (or another ?)</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1507893442, "post_id": 46728561, "comment_id": 80403257, "body": "We cannot really tell you what to use. If you want persistent processes, any PSGI/Plack solution will work. It doesn&#39;t sound like a web framework would help you, so no Dancer, Catalyst or Mojolicious. You can easily write vanilla PSGI. But you can also use Dancer and not use template. Anyway you will have to rework quote a bit because it sounds like your scripts are all one off things that will not just support persistence without changes. Look at the deployment guide for Plack to see how to get it running in prod, with or without Apache."}], "answers": [{"tags": [], "owner": {"reputation": 1604, "user_id": 2987926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720e7d8b7925f94e34d0291fa5bfdce9?s=128&d=identicon&r=PG&f=1", "display_name": "codnodder", "link": "https://stackoverflow.com/users/2987926/codnodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1507911378, "creation_date": 1507911378, "answer_id": 46734091, "question_id": 46728561, "link": "https://stackoverflow.com/questions/46728561/which-to-use-mod-perl-vs-mod-fcgi-vs-mod-proxy-fcgi/46734091#46734091", "title": "Which to use mod_perl vs mod_fcgi vs mod_proxy_fcgi", "body": "<p>Your post refers to a mix of technologies that serve a variety of purposes.</p>\n\n<p>It sounds like you have a straight CGI Perl script, and you want to improve its performance.</p>\n\n<p>Academic conversations aside, I would suggest you focus on mod_fcgi.</p>\n"}], "owner": {"reputation": 323, "user_id": 5766927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f4d26002541e3be3f418282d4f37c5?s=128&d=identicon&r=PG&f=1", "display_name": "Naga", "link": "https://stackoverflow.com/users/5766927/naga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1507911378, "creation_date": 1507893066, "last_edit_date": 1507893215, "question_id": 46728561, "link": "https://stackoverflow.com/questions/46728561/which-to-use-mod-perl-vs-mod-fcgi-vs-mod-proxy-fcgi", "title": "Which to use mod_perl vs mod_fcgi vs mod_proxy_fcgi", "body": "<p>In our web application we show job current status using a grid, the user can select multiple records and click on the action to change the state of jobs. On action click, we send the action to vanilla CGI for each job selected which spawn Perl script to change state. We do this because each job can be run as a different user the person taking action should have sudo privileges to take action.</p>\n\n<p>We are planning to improve performance by sending all selected jobs details and spawning process to take action on jobs. While exploring more for CGI I came across CGI, mod_perl, mod_fcgi, proxy_fcgi on Apache side and Starman, dancer, catalyst, and plack on Perl side. Now, I'm more confused which one to use.</p>\n"}, {"tags": ["mysql", "perl", "utf8mb4"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1507889890, "post_id": 46727362, "comment_id": 80401201, "body": "You should really use placeholders."}, {"owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507890644, "post_id": 46727362, "comment_id": 80401624, "body": "Are you referring to the prepare statements? I usually do, but that did not seem relevant here"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507891176, "post_id": 46727362, "comment_id": 80401909, "body": "it was relevant enough that I took the time to point to it out ;-)"}, {"owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507912571, "post_id": 46727362, "comment_id": 80415281, "body": "@simbabque, Please explain how using placeholders would resolve the issue with the utf8mb4 character set in the Perl client."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 2, "creation_date": 1507912629, "post_id": 46727362, "comment_id": 80415306, "body": "@Bill I never said it would. Just pointing out good style. We educate where we can. :)"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "edited": false, "score": 0, "creation_date": 1507902411, "post_id": 46731027, "comment_id": 80408954, "body": "Thanks for the suggestion, but unfortunately I would have to revisit more than 1k db queries in my application. And worse, they would have to be tested.."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1507901036, "creation_date": 1507901036, "answer_id": 46731027, "question_id": 46727362, "link": "https://stackoverflow.com/questions/46727362/perl-mysql-utf8mb4-issue-possible-bug/46731027#46731027", "title": "Perl MySQL utf8mb4 issue / possible bug", "body": "<p>The workaround is to let MySQL treat everything as bytes and to do the encoding in your application.</p>\n\n<pre><code>use Encode qw(encode decode);\n\nmy $object = \"\\x{1F600}\";\nmy $hd_db  = DBI-&gt;connect('DBI:mysql:mydb:localhost', 'user', 'password');\n$hd_db-&gt;do('SET NAMES latin1');\n\n...\n\nmy $insert = $hd_db-&gt;prepare(\"INSERT INTO mytable (object) VALUES ('\" . \n    encode(\"UTF-8\",$object) . \"')\"); # or equiv statement with placeholders\n$insert-&gt;execute;\n\n...\n\nmy $select = $hd_db-&gt;prepare(\"SELECT * FROM mytable\");\n$select-&gt;execute;\nmy $row    = $select-&gt;fetchrow_hashref;\nsay $object;\nsay decode(\"UTF-8\",$row-&gt;{'object'});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "edited": false, "score": 1, "creation_date": 1507981941, "post_id": 46733841, "comment_id": 80434441, "body": "I accepted this answer as it is the way to go for <code>DBI</code> versions &gt;= 4.041_01. Debian 8 ships with 3.0.17. For that version decoding works when opting for <code>mysql_enable_utf8 =&gt; 1</code>, see <a href=\"http://blogs.perl.org/users/mike_b/2016/12/dbdmysql-all-your-utf-8-bugs-are-belong-to-us.html\" rel=\"nofollow noreferrer\">this post</a>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1507910499, "creation_date": 1507910499, "answer_id": 46733841, "question_id": 46727362, "link": "https://stackoverflow.com/questions/46727362/perl-mysql-utf8mb4-issue-possible-bug/46733841#46733841", "title": "Perl MySQL utf8mb4 issue / possible bug", "body": "<p>You told MySQL to use UTF-8 for communication, but you also need to tell DBD::mysql to decode the data (or do it yourself).</p>\n\n<p>You want</p>\n\n<pre><code>my $dbh = DBI-&gt;connect('DBI:mysql:mydb:localhost', 'user', 'password', {\n   mysql_enable_utf8mb4 =&gt; 1,\n})\n   or die($DBI::errstr);\n</code></pre>\n\n<p>which is equivalent to</p>\n\n<pre><code>my $dbh  = DBI-&gt;connect('DBI:mysql:mydb:localhost', 'user', 'password')\n   or die($DBI::errstr);\n\n$dbh-&gt;do('SET NAMES utf8mb4')\n   or die($dbh-&gt;errstr);\n\n$dbh-&gt;{mysql_enable_utf8mb4} = 1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "edited": false, "score": 0, "creation_date": 1507982092, "post_id": 46738045, "comment_id": 80434496, "body": "It was console output and it worked out of the box with both Ubuntu and W10/Putty 0.7. Win7/Putty 0.7 does not work out of the box, though I have not tried <code>chcp</code>ing"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "reply_to_user": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "edited": false, "score": 0, "creation_date": 1507992742, "post_id": 46738045, "comment_id": 80437701, "body": "Compare <code>my.cnf</code>.  You may find different defaults.  What versions <i>of MySQL</i>?"}], "tags": [], "owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 0, "last_activity_date": 1507928762, "creation_date": 1507928762, "answer_id": 46738045, "question_id": 46727362, "link": "https://stackoverflow.com/questions/46727362/perl-mysql-utf8mb4-issue-possible-bug/46738045#46738045", "title": "Perl MySQL utf8mb4 issue / possible bug", "body": "<p><code>\"\\x{1F600}\";</code> is \"Unicode\", not \"utf8\".  They are related, but they are <em>not</em> the same encoding.</p>\n\n<p>You need <code>UTF-8</code> (as the non-mysql world calls it) and <code>utf8mb4</code> (as MySQL calls it).</p>\n\n<p><code>\ud83d\ude00</code> is hex <code>F09F9880</code> (in utf8mb4); it is <code>\u00f0\u0178\u02dc\u20ac</code> if you convert through <code>CHARACTER SET latin1</code> (\"Mojobake\")</p>\n\n<p>Please run <code>SELECT HEX(object) ...</code> to see whether you get those 4 hex bytes or something else.  Then we will know whether to focus on the <code>INSERT</code> or the <code>SELECT</code>.</p>\n\n<p>You say \"actual output\" -- but where is this?  A web page?  Is it configured for <code>UTF-8</code>?  Or something else?  If it is your commandline window, then make sure it is set for UTF-8.  In windows, that is done via <code>chcp 65001</code> .</p>\n\n<p>You mentioned</p>\n\n<pre><code>mysql&gt; SET SESSION CHARACTER_SET_CLIENT = utf8mb4;\nmysql&gt; SET SESSION CHARACTER_SET_RESULTS = utf8mb4;\n</code></pre>\n\n<p>That's only 2 of the 3 that need to be set.  Better to simply do</p>\n\n<pre><code>SET NAMES utf8mb4;\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 1694211, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f0d96d93667ec78bccb8ea1492837a25?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/1694211/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "accepted_answer_id": 46733841, "answer_count": 3, "score": 2, "last_activity_date": 1507928762, "creation_date": 1507888967, "last_edit_date": 1507892234, "question_id": 46727362, "link": "https://stackoverflow.com/questions/46727362/perl-mysql-utf8mb4-issue-possible-bug", "title": "Perl MySQL utf8mb4 issue / possible bug", "body": "<p>I am using Perl 5.20.2 and MySQL 5.5.57 on a Debian 8 machine. I recently discovered that MySQL's utf8 tables are limited to three-byte-characeters. As a consequence I can not store emojis.\nSo, I tried utfmb4 tables which are supposed to address the issue. I changed the table from utf8 to utf8mb4 from inside the mysql client:</p>\n\n<pre><code>ALTER DATABASE `mydb` CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\nALTER TABLE `mydb`.`mytable` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nALTER TABLE `mydb`.`mytable` CHANGE `object` `object` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n</code></pre>\n\n<p>Storing data in mytable seems to work, at least I can see the expected emoji in phpMyAdmin. However, when reading from the table I receive a 4-character result with 3 unprintable charaters. The following program is supposed to print the same emoji twice:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.10.1;\nuse warnings;\nuse strict;\nuse DBI;\n\nbinmode(STDOUT, ':utf8');\n\nmy $object = \"\\x{1F600}\";\nmy $hd_db  = DBI-&gt;connect('DBI:mysql:mydb:localhost', 'user', 'password');\n$hd_db-&gt;do('SET NAMES utf8mb4');\n\n# cleanup\nmy $delete = $hd_db-&gt;prepare(\"DELETE FROM mytable\");\n$delete-&gt;execute;\n\nmy $insert = $hd_db-&gt;prepare(\"INSERT INTO mytable (object) VALUES ('\" . $object . \"')\");\n$insert-&gt;execute;\nmy $select = $hd_db-&gt;prepare(\"SELECT * FROM mytable\");\n$select-&gt;execute;\nmy $row    = $select-&gt;fetchrow_hashref;\n\nsay $object;\nsay $row-&gt;{'object'};\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>\ud83d\ude00\n\ud83d\ude00\n</code></pre>\n\n<p>Actual output:</p>\n\n<pre><code>\ud83d\ude00\n\u00f0\ufffd\ufffd\ufffd\n</code></pre>\n\n<p>Seems like a bug to me. Any suggestion how to work around it?</p>\n\n<p><strong>EDIT</strong>: SELECTing the data from within the mysql client also shows the expected emoji</p>\n\n<pre><code>mysql&gt; SET SESSION CHARACTER_SET_CLIENT = utf8mb4;\nmysql&gt; SET SESSION CHARACTER_SET_RESULTS = utf8mb4;\nmysql&gt; SELECT * FROM mytable;\n+--------+\n| object |\n+--------+\n| \ud83d\ude00      |\n+--------+\n</code></pre>\n"}, {"tags": ["perl", "variables", "global-variables", "subroutine"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 4, "creation_date": 1507887157, "post_id": 46726653, "comment_id": 80399537, "body": "Add <code>return $string</code> inside your subroutine.  Also, you do not need the <code>&amp;</code> infront of the subroutine name, that is the (very) old way of calling a subroutine.  <code>my $strings = rand_Strings();</code> will do...the parens are optional."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1507890108, "post_id": 46726653, "comment_id": 80401328, "body": "Since Perl 5 was released in 1994, it has been unnecessary to use <code>&amp;</code> when calling subroutines."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507915767, "post_id": 46726653, "comment_id": 80416885, "body": "<i>&quot;it has been unnecessary to use <code>&amp;</code> when calling subroutines&quot;</i> Not only that, but it is <i>incorrect</i>, and <code>&amp;rand_Strings</code> should be <code>rand_Strings()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1507902044, "post_id": 46726895, "comment_id": 80408718, "body": "Dear @xxfelixxx, I found that the posted problem is not my real problem, however, your answer does solve the posted problem and I managed to work out on my real problem. Thank you all the same!"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 1, "creation_date": 1507902741, "post_id": 46726895, "comment_id": 80409172, "body": "Glad it worked out for you.  You can try running <code>perlcritic</code> on your code, and it will let you know about non-best practice perl code."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 11, "last_activity_date": 1507887431, "creation_date": 1507887431, "answer_id": 46726895, "question_id": 46726653, "link": "https://stackoverflow.com/questions/46726653/perl-call-subroutine-to-generate-random-strings-not-working/46726895#46726895", "title": "perl call subroutine to generate random strings not working", "body": "<p>You need to explicitly add a <code>return</code> statement inside your subroutine.\nThe automatic return of the last statement inside a subroutine does not work inside a loop construction, which in your example is a <code>for</code> loop.\nThe postfix version of the <code>for</code> loop is equivalent to the regular version with curly braces.</p>\n\n<p>From <a href=\"https://perldoc.perl.org/perlsub.html\" rel=\"noreferrer\">perldoc perlsub</a>:</p>\n\n<blockquote>\n  <p>If no \"return\" is found and if the last statement is an expression, its\n      value is returned. If the last statement is a loop control structure like\n      a \"foreach\" or a \"while\", the returned value is unspecified. The empty sub\n      returns the empty list.</p>\n</blockquote>\n"}], "owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 46726895, "answer_count": 1, "score": 1, "last_activity_date": 1507887431, "creation_date": 1507886790, "question_id": 46726653, "link": "https://stackoverflow.com/questions/46726653/perl-call-subroutine-to-generate-random-strings-not-working", "title": "perl call subroutine to generate random strings not working", "body": "<p>The script to generate random strings:</p>\n\n<pre><code>sub rand_Strings {\n   my @chars = (\"A\"..\"Z\", \"a\"..\"z\", \"0\"..\"9\");\n   my $string;\n   $string .= $chars[rand @chars] for 1..8;\n}\n\nmy $strings = &amp;rand_Strings;\nprint $strings;\n</code></pre>\n\n<p>However, it works when it is not in a subroutine. And also works if the $string is a global variable. What did I miss? Thanks,</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1507879626, "post_id": 46724524, "comment_id": 80395420, "body": "You should really not invent your own JSON parser. There are enough of those on CPAN already. ;-) it seems though as if the problem your are trying to solve is that there are multiple json objects in one variable. It looks as if they are delimited by line breaks. Why not just split on <code>&#47;\\}\\n&#47;</code>?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1507894281, "post_id": 46724524, "comment_id": 80403798, "body": "This is an XY problem - please give some example data and what you&#39;re trying to extract. It is <i>almost certainly</i> much easier and cleaner to use a JSON parser to accomplish this."}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "edited": false, "score": 0, "creation_date": 1508003217, "post_id": 46724524, "comment_id": 80441094, "body": "I&#39;d done that when I created the question"}], "answers": [{"tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 2, "last_activity_date": 1507879602, "creation_date": 1507879602, "answer_id": 46724645, "question_id": 46724524, "link": "https://stackoverflow.com/questions/46724524/regex-capture-everything-between-special-characters/46724645#46724645", "title": "regex capture everything between special characters", "body": "<p>You actually need to use a recursive matching pattern to match closing <code>{ .. }</code> like this:</p>\n\n<pre><code>\\{(?:[^{}]+|(?0))*}\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/eHeVnb/2\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n\n<p>Here <code>(?0)</code> recurses the entire pattern.</p>\n\n<p>Though if you are parsing a valid JSON string then it is better to use JSON parser.</p>\n"}], "owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 46724645, "answer_count": 1, "score": 0, "last_activity_date": 1507880713, "creation_date": 1507879262, "last_edit_date": 1507880713, "question_id": 46724524, "link": "https://stackoverflow.com/questions/46724524/regex-capture-everything-between-special-characters", "title": "regex capture everything between special characters", "body": "<p>I need to capture in perl everything between { and },{ in a string. Occurrences can exists from 0 to a finite number. </p>\n\n<p>I've tried to use:</p>\n\n<pre><code>my @tmp;\nmy $extract = \"\";                   \n$extract = $1 if $json =~ /\\{([^}]+)\\}/g;\npush @tmp, $extract;\n</code></pre>\n\n<p>Where $json is the string where I need to extract the content.</p>\n\n<p>Here is an example of two items of <em>$json</em>:</p>\n\n<blockquote>\n  <p>{\"id\":\"AAAAAAAAAA\",\"text\":\"AAAAAAAAAA\",\"icon\":\"jstree-folder\",\"li_attr\":{\"id\":\"AAAAAAAAAA\"},\"a_attr\":{\"href\":\"#\",\"id\":\"AAAAAAAAAA_anchor\"},\"state\":{\"loaded\":true,\"opened\":true,\"selected\":false,\"disabled\":false},\"data\":{\"Taginfo\":\"default\",\"Type\":\"\",\"Measure\":\"\",\"Scale\":\"default\",\"Filter\":\"\",\"Concept\":\"default\",\"Uso\":\"default\",\"Uso2\":\"default\",\"Parciales\":1},\"parent\":\"#\"},{\"id\":\"BBBBBBBBBBBBB\",\"text\":\"BBBBBBBBBBBBB\",\"icon\":\"jstree-folder\",\"li_attr\":{\"id\":\"BBBBBBBBBBBBB\"},\"a_attr\":{\"href\":\"AAAAAAAAAA\",\"id\":\"BBBBBBBBBBBBB_anchor\"},\"state\":{\"loaded\":true,\"opened\":false,\"selected\":true,\"disabled\":false},\"data\":{\"Taginfo\":\"BBBBBBBBBBBBB\",\"Type\":\"default\",\"Measure\":\"default\",\"Scale\":\"1000\",\"Filter\":\"1000\",\"Concept\":\"default\",\"Uso\":\"\",\"Uso2\":\"\",\"Parciales\":1},\"parent\":\"AAAAAAAAAA\"}</p>\n</blockquote>\n\n<p>Using the regex above, I'm not getting the correct string. i.e: In the first occurrence has to be:</p>\n\n<blockquote>\n  <p>{\"id\":\"AAAAAAAAAA\",\"text\":\"AAAAAAAAAA\",\"icon\":\"jstree-folder\",\"li_attr\":{\"id\":\"AAAAAAAAAA\"},\"a_attr\":{\"href\":\"#\",\"id\":\"AAAAAAAAAA_anchor\"},\"state\":{\"loaded\":true,\"opened\":true,\"selected\":false,\"disabled\":false},\"data\":{\"Taginfo\":\"default\",\"Type\":\"\",\"Measure\":\"\",\"Scale\":\"default\",\"Filter\":\"\",\"Concept\":\"default\",\"Uso\":\"default\",\"Uso2\":\"default\",\"Parciales\":1},\"parent\":\"#\"}</p>\n</blockquote>\n\n<p>So, I need to capture until the next:</p>\n\n<pre><code>},{\n</code></pre>\n\n<p>My question is how to ignore end the capture group with },{ instead of just with }? </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["linux", "perl", "sed"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "edited": false, "score": 0, "creation_date": 1507876865, "post_id": 46723567, "comment_id": 80394052, "body": "This is working fine,but its not changing the file but printing the output on STDOUT , do i have to write it in a temp file , then copy that file .Isn&#39;t there a shorter way to accomplish my objective?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "edited": false, "score": 0, "creation_date": 1507877853, "post_id": 46723567, "comment_id": 80394518, "body": "@confused  Edited -- let me know if more explanations would be helpful."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "edited": false, "score": 0, "creation_date": 1507882575, "post_id": 46723567, "comment_id": 80397012, "body": "@confused  Added a much shorter way."}, {"owner": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "edited": false, "score": 0, "creation_date": 1507883878, "post_id": 46723567, "comment_id": 80397655, "body": "Hey i have noticed that , there are also some strings like $(xyz) , i don&#39;t want to substitute them either. What change , i have to do in the present expression ?"}, {"owner": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "edited": false, "score": 0, "creation_date": 1507883996, "post_id": 46723567, "comment_id": 80397726, "body": "got it just added backslash before ("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "edited": false, "score": 0, "creation_date": 1507884380, "post_id": 46723567, "comment_id": 80397930, "body": "@confused  For <code>$(xyz)</code> just add the <code>(</code> to the not-these list, so <code>[^{(]</code>.  The <code>[^...]</code> means &quot;any character not listed&quot;, so <code>[^{(]</code> is any one character that is neither <code>{</code> nor <code>(</code>.  In general, if you have more such cases you can add to the list.  The <code>[^{([]</code> would be any char other than either of <code>{</code>, <code>(</code>, <code>[</code>.  The <i>right</i> <code>]</code> would have to be escaped of course (along with a few others)  The &quot;<i>character class</i>&quot; lists individual chars to match, so <code>[ab]</code> matches either <code>a</code> or <code>b</code> -- need not be the whole <code>ab</code>. Same for negated <code>[^..]</code>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1510304441, "last_edit_date": 1510304441, "creation_date": 1507875215, "answer_id": 46723567, "question_id": 46723250, "link": "https://stackoverflow.com/questions/46723250/sed-command-working-on-command-line-but-not-in-perl-script/46723567#46723567", "title": "sed command working on command line but not in perl script", "body": "<p>In a Perl script you need valid Perl language, just like you need valid C text in a C program. In the terminal <code>sed..</code> is understood and run by the shell as a command but in a Perl program it is just a bunch of words, and that line <code>sed..</code> isn't valid Perl.</p>\n\n<p>You would need this inside <code>qx()</code> (backticks) or <code>system()</code> so that it is run as an external command. Then you'd indeed need \"<em>some backslashes</em>,\" which is where things get a bit picky.  </p>\n\n<p>But why run a <code>sed</code> command from a Perl script? Do the job with Perl</p>\n\n<pre><code>use warnings;\nuse strict;\nuse File::Copy 'move';\n\nmy $file     = 'filename';\nmy $out_file = 'new_' . $file;\n\nopen my $fh,     '&lt;', $file     or die \"Can't open $file: $!\";\nopen my $fh_out, '&gt;', $out_file or die \"Can't open $out_file: $!\"; \n\nwhile (&lt;$fh&gt;) \n{\n    s/\\$( [^{] [a-z_]* )/\\${$1}/gix;\n    print $fh_out $_;\n}\nclose $fh_out;\nclose $fh;\n\nmove $out_file, $file or die \"Can't move $out_file to $file: $!\";\n</code></pre>\n\n<p>The regex uses a <em>negated character class</em>, <code>[^...]</code>, to match any character other than <code>{</code> following <code>$</code>, thus excluding already braced words. Then it matches a sequence of letters or underscore, as in the question (possibly none, since the first non-<code>{</code> already provides at least one).</p>\n\n<p>With 5.14+ you can use the <em>non-destructive</em> <code>/r</code> <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">modifier</a></p>\n\n<pre><code>print $fh_out s/\\$([^{][a-z_]*)/\\${$1}/gir;\n</code></pre>\n\n<p>with which the changed string is returned (and original is unchanged), right for the <code>print</code>.</p>\n\n<p>The output file, in the end moved over the original, should be made using <a href=\"https://perldoc.perl.org/File/Temp.html\" rel=\"nofollow noreferrer\">File::Temp</a>. Overwriting the original this way changes <code>$file</code>'s inode number; if that's a concern see <a href=\"https://stackoverflow.com/a/40269154/4653379\">this post</a> for example, for how to update the original inode.</p>\n\n<p>A one-liner (command-line) version, to readily test</p>\n\n<pre><code>perl -wpe's/\\$([^{][a-z_]*)/\\${$1}/gi' file\n</code></pre>\n\n<p>This only prints to console.  To change the original add <code>-i</code> (in-place), or <code>-i.bak</code> to keep backup.</p>\n\n<hr>\n\n<p>A reasonable question of \"<em>Isn't there a shorter way</em>\" came up. </p>\n\n<p>Here is one, using the handy <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a> for a file that isn't huge so we can read it into a string.</p>\n\n<pre><code>use warnings;\nuse strict; \nuse Path::Tiny;\n\nmy $file     = 'filename';\nmy $out_file = 'new_' . $file;\n\nmy $new_content = path($file)-&gt;slurp =~ s/\\$([^{][a-z_]*)/\\${$1}/gir;\n\npath($file)-&gt;spew( $new_content );\n</code></pre>\n\n<p>The first line reads the file into a string, on which the replacement runs; the changed text is returned and assigned to a variable. Then that variable with new text is written out over the original.</p>\n\n<p>The two lines can be squeezed into one, by putting the expression from the first instead of the variable in the second. But opening the same file twice in one (complex) statement isn't exactly solid practice and I wouldn't recommend such code.</p>\n\n<p>However, since module's version 0.077 you can nicely do</p>\n\n<pre><code>path($file)-&gt;edit_lines( sub { s/\\$([^{][a-z_]*)/\\${$1}/gi } );\n</code></pre>\n\n<p>or use <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm#edit,_edit_raw,_edit_utf8\" rel=\"nofollow noreferrer\">edit</a> to slurp the file into a string and apply the callback to it.  </p>\n\n<p>So this cuts it to one nice line after all.</p>\n\n<p>I'd like to add that shaving off lines of code mostly isn't worth the effort while it sure can lead to trouble if it disturbs the focus on the code structure and correctness even a bit. However, <code>Path::Tiny</code> is a good module and this is legitimate, while it does shorten things quite a bit.</p>\n"}], "owner": {"reputation": 79, "user_id": 6638110, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/YAtkh.png?s=128&g=1", "display_name": "confused", "link": "https://stackoverflow.com/users/6638110/confused"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 46723567, "answer_count": 1, "score": 0, "last_activity_date": 1510304441, "creation_date": 1507873580, "last_edit_date": 1507874136, "question_id": 46723250, "link": "https://stackoverflow.com/questions/46723250/sed-command-working-on-command-line-but-not-in-perl-script", "title": "sed command working on command line but not in perl script", "body": "<p>I have a file in which i have to replace  all the words like $xyz and for them i have to substitutions like these:</p>\n\n<pre><code>$xyz with ${xyz}.\n$abc_xbs with ${abc_xbc}\n$ab,$cd  with ${ab},${cd}\n</code></pre>\n\n<p>This file also have some words like ${abcd} which i don't have to change.\nI am using this command</p>\n\n<p>sed -i 's?\\$([A-Z_]+)?\\${\\1}?g' file</p>\n\n<p>its working fine on command line but not inside a perl script as</p>\n\n<p><code>sed -i 's?\\$\\([A-Z_]\\+\\)?\\$\\{\\1\\}?g' file</code>;</p>\n\n<p>What i am missing?\nI think adding some backslashes would help.I tried adding some but no success.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 5, "creation_date": 1507863488, "post_id": 46721142, "comment_id": 80390217, "body": "Good grief ... no wonder it&#39;s a struggle. Who&#39;s going to get all those escapes right. Why that <code>awk</code>? This way you shell out (with backticks), then run a command (awk, for which you need to escape things), run another program in a subshell of that shell (unzip, for which you need to escape things), with redirections ... why not just do all processing (of unzip&#39;s return) in Perl, if the script is in Perl?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1507866846, "post_id": 46721142, "comment_id": 80390929, "body": "<code>&lt;( ... )</code> is not valid <code>sh</code> syntax"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1507888591, "post_id": 46721142, "comment_id": 80400423, "body": "If you reframe your question as to exactly what your inputs and outputs are, we&#39;ll give you a perl only answer that&#39;s both simpler and less brittle. But why not instead use one of the various perl modules do to the job"}, {"owner": {"reputation": 11, "user_id": 8768472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xK-GzqnvE_M/AAAAAAAAAAI/AAAAAAAABAw/T4gmxF62dKI/photo.jpg?sz=128", "display_name": "Nainesh Vashi", "link": "https://stackoverflow.com/users/8768472/nainesh-vashi"}, "edited": false, "score": 0, "creation_date": 1507989514, "post_id": 46721142, "comment_id": 80436683, "body": "Thanks for your answers.  I do not want to add packages in perl"}, {"owner": {"reputation": 11, "user_id": 8768472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xK-GzqnvE_M/AAAAAAAAAAI/AAAAAAAABAw/T4gmxF62dKI/photo.jpg?sz=128", "display_name": "Nainesh Vashi", "link": "https://stackoverflow.com/users/8768472/nainesh-vashi"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1507989865, "post_id": 46721142, "comment_id": 80436799, "body": "Thanks for your answers so far.  @zdim - I do not want to add packages in perl as my client&#39;s environment does not allow that or at least it will take a few days and i need to work with this urgently."}, {"owner": {"reputation": 11, "user_id": 8768472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xK-GzqnvE_M/AAAAAAAAAAI/AAAAAAAABAw/T4gmxF62dKI/photo.jpg?sz=128", "display_name": "Nainesh Vashi", "link": "https://stackoverflow.com/users/8768472/nainesh-vashi"}, "edited": false, "score": 0, "creation_date": 1507989927, "post_id": 46721142, "comment_id": 80436819, "body": "@ikegamie - It works if I put the command in a shell script (just as it is, without backticks or system calls)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1508008336, "post_id": 46721142, "comment_id": 80442771, "body": "@NaineshVashi The construct <code>&lt;(..)</code> works in a shell at the terminal, likely <code>bash</code>. But Perl&#39;s backticks, it uses <code>sh</code>, as the error shows you <code>sh: -c: ...</code>.  In <i>that</i> shell it&#39;s not valid syntax."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1508008526, "post_id": 46721142, "comment_id": 80442825, "body": "@NaineshVashi  I didn&#39;t suggest to use packages. To repeat:  call <code>unzip</code> out of your (Perl) script and process its output in that (Perl) script.  Use Perl&#39;s (superb) native text-processing capabilities, instead of shelling out to use <code>awk</code>.  (I get the idea: you have a command-line with <code>awk</code> that works and you&#39;d like to &quot;just use it&quot; in the script; but that makes it really <i>much</i> harder, error-prone, and brittle. And awkward.)"}, {"owner": {"reputation": 11, "user_id": 8768472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xK-GzqnvE_M/AAAAAAAAAAI/AAAAAAAABAw/T4gmxF62dKI/photo.jpg?sz=128", "display_name": "Nainesh Vashi", "link": "https://stackoverflow.com/users/8768472/nainesh-vashi"}, "edited": false, "score": 0, "creation_date": 1508095758, "post_id": 46721142, "comment_id": 80463597, "body": "i can call unzip but the package has 10M lines x 3K fields per line of varying sizes.  And i have to process 100s such zips with a parallel degree. Unzipping will need a lot of space or memory depending on whether i output the unzipped to a file or hold in memory. Hence calling unzip separately is not an option for me."}, {"owner": {"reputation": 11, "user_id": 8768472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xK-GzqnvE_M/AAAAAAAAAAI/AAAAAAAABAw/T4gmxF62dKI/photo.jpg?sz=128", "display_name": "Nainesh Vashi", "link": "https://stackoverflow.com/users/8768472/nainesh-vashi"}, "edited": false, "score": 0, "creation_date": 1508096185, "post_id": 46721142, "comment_id": 80463711, "body": "Given the constraints, i saw awk to be faster to search if 237th field of each line is present in a list in another file or not.  With perl, I would do the same thing by creating an array using split i thought awk would be natively faster than what i woud write in perl.Most importantly,  i have to stream in from a zip as i have storage issue and without installing the perl zip modules.  Hence I researched to the above commadline."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1508099071, "post_id": 46721142, "comment_id": 80464685, "body": "Alright, so you do have a thought-out reason.  Still, I have a hard time believing that this approach is necessary for speed, or that it is faster really.  As for streaming, you can manage the <code>unzip</code>&#39;s piped extraction (<code>-p</code>) in Perl just fine."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1508099205, "post_id": 46721142, "comment_id": 80464717, "body": "But if you insist, one way is to use <code>system</code> so that you can ask for <code>bash</code> (this way you get <code>sh</code> shell which doesn&#39;t know of <code>&lt;(...</code> as ikegami told you).  So, <code>system(&#39;bash&#39;, &#39;-c&#39;, &#39;awk ...&#39;)</code>.  This doesn&#39;t return the output but you redirect it to a file anyway; just open thet file then. Then go through all those escapes carefully"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1508099843, "post_id": 46721142, "comment_id": 80464856, "body": "A quick search brings up <a href=\"https://stackoverflow.com/a/571383/4653379\">this post</a> for example, on how to use <code>bash</code> via <code>system</code>. Then you&#39;ll have to deal with escaping -- unless it&#39;s good as it stands?"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1507888393, "post_id": 46721611, "comment_id": 80400292, "body": "Or better yet   - don&#39;t inline awk, because you can do it all in perl and don&#39;t have escaping problems."}, {"owner": {"reputation": 11, "user_id": 8768472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xK-GzqnvE_M/AAAAAAAAAAI/AAAAAAAABAw/T4gmxF62dKI/photo.jpg?sz=128", "display_name": "Nainesh Vashi", "link": "https://stackoverflow.com/users/8768472/nainesh-vashi"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1507990089, "post_id": 46721611, "comment_id": 80436860, "body": "@sobrique - I cannot install unzip/zip packages in perl as it is my client&#39;s protected env or at least it will take days and i need it earlier."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1508064048, "post_id": 46721611, "comment_id": 80453924, "body": "Perl does most of it natively. The only thing you might need a module for is reading zip files. But perl modules can be installed in a user context too."}], "tags": [], "owner": {"reputation": 2685, "user_id": 293023, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96ae36cc4310f8658e2ef09730ac191d?s=128&d=identicon&r=PG&f=1", "display_name": "niry", "link": "https://stackoverflow.com/users/293023/niry"}, "is_accepted": false, "score": 0, "last_activity_date": 1507861891, "creation_date": 1507861891, "answer_id": 46721611, "question_id": 46721142, "link": "https://stackoverflow.com/questions/46721142/calling-awk-from-perl-does-not-work-with-unzip-redirect/46721611#46721611", "title": "calling awk from perl does not work with unzip redirect", "body": "<p>This is because the command line is most likely /bin/bash and perl's shell is /bin/sh which does not support this mean. Put the zip command before the awk with pipe (|). Something like this:</p>\n\n<pre><code>#Find contents of myFile in zipfile and output the matched records to output.txt\n$cmd = \"unzip -p $zipfile *XYZ* | awk -F\\\"|\\\" 'NR==FNR{hash[\\$0]=1;next} \\$237 in hash' $myFILE &gt;&gt; output.txt\";\n$result=`$cmd`;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8768472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xK-GzqnvE_M/AAAAAAAAAAI/AAAAAAAABAw/T4gmxF62dKI/photo.jpg?sz=128", "display_name": "Nainesh Vashi", "link": "https://stackoverflow.com/users/8768472/nainesh-vashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507861891, "creation_date": 1507857741, "last_edit_date": 1507860482, "question_id": 46721142, "link": "https://stackoverflow.com/questions/46721142/calling-awk-from-perl-does-not-work-with-unzip-redirect", "title": "calling awk from perl does not work with unzip redirect", "body": "<p>The below command works fine when I run it manually but when I call it from perl script using backticks or system command, it gives this error</p>\n\n<blockquote>\n  <p>sh: -c: line 0: syntax error near unexpected token `('</p>\n</blockquote>\n\n<p>Script snapshot:</p>\n\n<pre><code>#Find contents of myFile in zipfile and output the matched records to output.txt\n$cmd = \"awk -F\\\"|\\\" 'NR==FNR{hash[\\$0]=1;next} \\$237 in hash' $myFILE &lt;(unzip -p $zipfile *XYZ*) &gt;&gt; output.txt\";\n$result=`$cmd`;\n</code></pre>\n\n<p>It seems that we cannot call a subshell i.e. (unzip ...) within a system call through perl.  Please advise as I have been struggling since a couple of days.</p>\n"}, {"tags": ["arrays", "perl", "xs"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507844168, "post_id": 46719061, "comment_id": 80385099, "body": "<a href=\"https://www.nntp.perl.org/group/perl.xs/2011/06/msg2626.html\" rel=\"nofollow noreferrer\">nntp.perl.org/group/perl.xs/2011/06/msg2626.html</a> seems relevant"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2074102"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507849599, "post_id": 46719061, "comment_id": 80387019, "body": "@simbabque I&#39;ve seen that example before.  It&#39;s kind of a mess.  Hard to learn from."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1507879576, "post_id": 46719061, "comment_id": 80395396, "body": "Would you mind sharing some of the things you have already learned with the community? You could maybe add a chapter or two to <a href=\"https://github.com/xsawyerx/xs-fun\" rel=\"nofollow noreferrer\">github.com/xsawyerx/xs-fun</a>. :-)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2074102"}, "edited": false, "score": 2, "creation_date": 1507849361, "post_id": 46719397, "comment_id": 80386948, "body": "Excellent answer!  Thanks!"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1507877223, "post_id": 46719397, "comment_id": 80394229, "body": "Great answer! Note for Perl version &gt;= 5.16, you can also declare the typemap <code>AV*\tT_AVREF_REFCOUNT_FIXED</code> if you do not care about backwards compatibility, see the section <i>&quot;Returning SVs, AVs and HVs through RETVAL&quot;</i> in <a href=\"https://perldoc.perl.org/perlxs.html#Returning-SVs%2c-AVs-and-HVs-through-RETVAL\" rel=\"nofollow noreferrer\"><code>perlxs</code></a> for more information."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507906146, "post_id": 46719397, "comment_id": 80411514, "body": "Yeah, figured the answer was already long enough without introducing that."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 10, "last_activity_date": 1507906351, "last_edit_date": 1507906351, "creation_date": 1507844935, "answer_id": 46719397, "question_id": 46719061, "link": "https://stackoverflow.com/questions/46719061/perl-xs-return-perl-array-from-c-array/46719397#46719397", "title": "perl xs - return perl array from c array", "body": "<p>Perl subs can only return (0 or more) scalars. When you tried to return an array (impossible without crashing Perl!), the default typemap returned a reference to that array instead.</p>\n\n<p>Note that your program also leaks memory (because the default typemap for <code>AV*</code> should mortalize your array but doesn't).</p>\n\n<hr>\n\n<p><strong>Returning a reference, method 1</strong></p>\n\n<pre><code>AV* /* Returns: sv_2mortal(newRV(RETVAL)) */\nDoubleArray::getPerlArrayRef()\n    PREINIT:\n        size_t i;\n    CODE:\n        RETVAL = (AV*)sv_2mortal((SV*)newAV());\n        for (i=0; i &lt; THIS-&gt;count; ++i) {\n            av_push(RETVAL, newSVnv(THIS-&gt;data[i]));\n        }\n\n    OUTPUT:\n       RETVAL\n</code></pre>\n\n<p>Memory leak check:</p>\n\n<ul>\n<li>Array's refcnt: 1 (<code>newAV</code>) -1<sup>[delayed]</sup> (<code>sv_2mortal</code>) +1 (<code>newRV</code>) = 1<sup>[delayed]</sup> (owned by reference)</li>\n<li>Reference's refcnt: 1 (<code>newRV</code>) -1<sup>[delayed]</sup> (<code>sv_2mortal</code>) = 0<sup>[delayed]</sup></li>\n</ul>\n\n<p>Perl:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $array = $C-&gt;getPerlArrayRef();\nsay for @$array;\n</code></pre>\n\n<hr>\n\n<p><strong>Returning a reference, method 2</strong></p>\n\n<pre><code>SV* /* Returns: sv_2mortal(RETVAL) */\nDoubleArray::getPerlArrayRef()\n    PREINIT:\n        AV* av;\n        size_t i;\n    CODE:\n        av = newAV();\n        RETVAL = newRV_noinc((SV*)av);\n        for (i=0; i &lt; THIS-&gt;count; ++i) {\n            av_push(av, newSVnv(THIS-&gt;data[i]));\n        }\n\n    OUTPUT:\n       RETVAL\n</code></pre>\n\n<p>Memory leak check:</p>\n\n<ul>\n<li>Array's refcnt: 1 (<code>newAV</code>) +0 (<code>newRV_noinc</code>) = 1 (owned by reference)</li>\n<li>Reference's refcnt: 1 (<code>newRV_noinc</code>) -1<sup>[delayed]</sup> (<code>sv_2mortal</code>) = 0<sup>[delayed]</sup></li>\n</ul>\n\n<p>Perl: &lt;same as above></p>\n\n<hr>\n\n<p><strong>Returning a reference, method 3</strong></p>\n\n<pre><code>void\nDoubleArray::getPerlArrayRef()\n    PREINIT:\n        AV* av;\n        size_t i;\n    PPCODE:\n        av = newAV();\n        mXPUSHs(newRV_noinc((SV*)av));\n        for (i=0; i &lt; THIS-&gt;count; ++i) {\n            av_push(av, newSVnv(THIS-&gt;data[i]));\n        }\n</code></pre>\n\n<p>Memory leak check:</p>\n\n<ul>\n<li>Array's refcnt: 1 (<code>newAV</code>) +0 (<code>newRV_noinc</code>) = 1 (owned by reference)</li>\n<li>Reference's refcnt: 1 (<code>newRV_noinc</code>) -1<sup>[delayed]</sup> (<code>mXPUSHs</code>) = 0<sup>[delayed]</sup></li>\n</ul>\n\n<p>Perl: &lt;same as above></p>\n\n<hr>\n\n<p><strong>Returning scalars</strong></p>\n\n<p>We have to check context because we can't place more than one scalar on the stack outside of list context.</p>\n\n<pre><code>void\nDoubleArray::getElements()\n    PREINIT:\n        size_t i;\n        U8 gimme = GIMME_V;\n    PPCODE:\n        if (gimme == G_ARRAY) {\n            EXTEND(SP, THIS-&gt;count);\n            for (i=0; i &lt; THIS-&gt;count; ++i) {\n                mPUSHn(THIS-&gt;data[i]);\n            }\n        }\n        else if (gimme == G_SCALAR) {\n            mXPUSHu(THIS-&gt;count);\n        }\n</code></pre>\n\n<p>Perl:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $count = $C-&gt;getElements();\nsay $count;\n\nmy @array = $C-&gt;getElements();\nsay for @array;\n</code></pre>\n\n<hr>\n\n<p>Note: The refcnt decrement by <code>sv_2mortal</code> is delayed until the caller has a chance to increment the refcnt.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2074102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 5, "accepted_answer_id": 46719397, "answer_count": 1, "score": 9, "last_activity_date": 1507906351, "creation_date": 1507843165, "last_edit_date": 1507843280, "question_id": 46719061, "link": "https://stackoverflow.com/questions/46719061/perl-xs-return-perl-array-from-c-array", "title": "perl xs - return perl array from c array", "body": "<p>Using XS i am trying to pass values from a C array into a Perl array that can be used in the script.</p>\n\n<p>Here is the code from my xs file:</p>\n\n<pre><code>AV *\nDoubleArray::getPerlArray()\n    CODE:\n    r = newAV();\n    for(size_t i=0; i &lt; THIS-&gt;count; i++)\n    {\n        av_push(RETVAL,newSVnv(THIS-&gt;data[i]));\n    }\n    OUTPUT:\n    RETVAL\n</code></pre>\n\n<p>It compiles fine but when I run the following in perl:</p>\n\n<pre><code>my @d = $C-&gt;getPerlArray();\nforeach(@d)\n{\n    print \"$_\\n\";\n}\n</code></pre>\n\n<p>It just prints <code>ARRAY(0x1408cdc)</code> when I am expecting it to print a list of numbers.</p>\n\n<p>How can I modify my code to correctly pass back a perl array?</p>\n"}, {"tags": ["perl", "ubuntu"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 7, "creation_date": 1507832064, "post_id": 46716237, "comment_id": 80378869, "body": "Replacing the system Perl can lead to all kinds of trouble. It would make more sense to change all your scripts&#39; shebangs to <code>#!&#47;usr&#47;bin&#47;env perl</code> and then compile your own Perl. If you then move that Perl to the front of your PATH for the user that&#39;s running the application you should be good."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1507838971, "post_id": 46716237, "comment_id": 80382438, "body": "In <a href=\"https://unix.stackexchange.com/a/29620/10454\">my answer</a> to <a href=\"https://unix.stackexchange.com/q/29608/10454\">this question</a>, I discuss the pros and cons of the <code>#!&#47;usr&#47;bin&#47;env</code> trick."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507833112, "post_id": 46716493, "comment_id": 80379449, "body": "Re &quot;<i>I would also suggest using a more portable shebang</i>&quot;, Please don&#39;t!  <code>#!&#47;usr&#47;bin&#47;env perl</code> is bad! It&#39;s <i>less</i> portable because it breaks based on happens to be in the given user&#39;s PATH at a given moment! Before installation, the shebang should be <code>#!&#47;usr&#47;bin&#47;perl</code>, and after installation, the shebang line should point to the <code>perl</code> that installed the module. (This is done automatically by the ExtUtils::MakeMaker and Module::Build.)"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507833357, "post_id": 46716493, "comment_id": 80379591, "body": "The information I provided is probably not best crammed into a SO reply. You&#39;re right that hardcoding is typically more reliable. In the case of plenv, that might be something like <code>&#47;opt&#47;plenv&#47;shims&#47;perl</code>. For me, I like to be able to copy my perl scripts between my different servers without having to modify anything. On my various systems, the perl in use might be in 1 of 4 places. I make sure PATH is prepended in <code>profile</code> is the <code>env perl</code> works for me. YMMV"}, {"owner": {"reputation": 59, "user_id": 3287860, "user_type": "registered", "profile_image": "https://graph.facebook.com/1239020721/picture?type=large", "display_name": "Andrey Yumashev", "link": "https://stackoverflow.com/users/3287860/andrey-yumashev"}, "edited": false, "score": 0, "creation_date": 1507833417, "post_id": 46716493, "comment_id": 80379629, "body": "It seems that #!/usr/bin/env perl is the only way to solve the issue. Looking forward for a huge amount of job with editing cronjob-scripts and workers:) Thank you!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507833560, "post_id": 46716493, "comment_id": 80379711, "body": "Re &quot;<i>On my various systems, the perl in use might be in 1 of 4 places.</i>&quot;, that assumes there&#39;s only one Perl is use, but we&#39;re in exactly the opposite situation."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1507833567, "post_id": 46716493, "comment_id": 80379720, "body": "Audrey: No, as I said, don&#39;t rely on env in crontab. In fact I&#39;ve updated my comment to remove that suggestion. Unless you a good understanding of how shell environments are managed, probably best to hardcode your shebang"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507833589, "post_id": 46716493, "comment_id": 80379731, "body": "Re &quot;<i>It seems that #!/usr/bin/env perl is the only way to solve the issue.</i>&quot;, No, <i>changing your shebang lines</i>  is the only way to solve the issue. But that&#39;s easy to do. It&#39;s a simple one liner. <code>find ... -exec perl -i~ -pe&#39;s{^#!&#47;usr&#47;bin&#47;perl}{#!...}&#39; {} +</code>"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1507833899, "post_id": 46716493, "comment_id": 80379896, "body": "ikegami: I understand env is probably not good advice and I&#39;ve updated my reply accordingly. Re: my perls... some systems (the old unix/solaris ones) have it in <code>&#47;usr&#47;bin</code>, the linux ones have it there too, but on those systems I also have plenv, but in one of two locations. On my local dev system plenv is in home... and possibly on my mac is somewhere else. Syncing changes between systems is less of a hassle for me when I used the env shebang... but I understand that may not best for everyone."}, {"owner": {"reputation": 59, "user_id": 3287860, "user_type": "registered", "profile_image": "https://graph.facebook.com/1239020721/picture?type=large", "display_name": "Andrey Yumashev", "link": "https://stackoverflow.com/users/3287860/andrey-yumashev"}, "edited": false, "score": 0, "creation_date": 1507834143, "post_id": 46716493, "comment_id": 80380003, "body": "I think that env is a nice soultion because it would break nothing - as for my project i exactly know the cron-user that should run scripts and it would be easy to set PATH for him. As for manual script starts it also will be easy to control the environment. Why env is bad if the project environment is solid and once-setuped?  Also the env solution is perfect to test project with different perl versions (for example, when we need to update Perl again or to compile a new one with specials) - just one minor editing of env would give a possibility to test stability."}, {"owner": {"reputation": 59, "user_id": 3287860, "user_type": "registered", "profile_image": "https://graph.facebook.com/1239020721/picture?type=large", "display_name": "Andrey Yumashev", "link": "https://stackoverflow.com/users/3287860/andrey-yumashev"}, "edited": false, "score": 0, "creation_date": 1507834146, "post_id": 46716493, "comment_id": 80380008, "body": "So just to clarify all. There&#39;re 3 solutions. For all of them i need to modify all the scripts.  1. Using #!/usr/bin/env perl 2. Using straight new perl path at shebang 3. Totally remove shebang from scripts and use plain calls at cron and manual runs - like as /usr/bin/perl script.pl"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1507834402, "post_id": 46716493, "comment_id": 80380140, "body": "Audrey, for <i>any</i> users running your scripts in the shell, you would need to make sure &#39;/usr/local/` comes before <code>&#47;usr&#47;bin</code> in PATH, or is prepended manually (eg. <code>PATH=&quot;&#47;usr&#47;local&#47;bin:$PATH&quot;</code>). Only then will the env shebang work. You can test by running <code>perl -v</code> or <code>which perl</code>. If it&#39;s just you, you can update PATH in your local <code>.profile</code>, otherwise to affect all users it needs to be in the global profile."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1507834608, "post_id": 46716493, "comment_id": 80380244, "body": "If it&#39;s all cron jobs, just hardcode it fully (ie. <code>0 0 * * * &#47;usr&#47;local&#47;bin&#47;perl &#47;full&#47;path&#47;to&#47;script.pl</code>). This will ignore the shebang. Check your cron logs to ensure things are running successfully."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1507835128, "post_id": 46716493, "comment_id": 80380525, "body": "Ok, Audrey, but just to be certain! :D You said <i>&quot;i exactly know the cron-user that should run scripts and it would be easy to set PATH for him.&quot;</i>, but cron does not typically invoke a shell environment (unless you explicitly do so) so PATH may not be what you think. I would always recommend hardcoding paths in crontab."}, {"owner": {"reputation": 59, "user_id": 3287860, "user_type": "registered", "profile_image": "https://graph.facebook.com/1239020721/picture?type=large", "display_name": "Andrey Yumashev", "link": "https://stackoverflow.com/users/3287860/andrey-yumashev"}, "edited": false, "score": 0, "creation_date": 1507835719, "post_id": 46716493, "comment_id": 80380822, "body": "There&#39;s the way to set PATH exactly at crontab:) (Sorry for formatting)  $ crontab -l PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/us&zwnj;&#8203;r/bin */1 * * * * perl -v &gt; /tmp/perl_version */1 * * * * env &gt; /tmp/env  $ cat /tmp/perl_version This is perl 5, version 26  $ cat /tmp/env | grep PATH PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/us&zwnj;&#8203;r/bin  $ /usr/bin/perl -v This is perl 5, version 22"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 2, "creation_date": 1507836244, "post_id": 46716493, "comment_id": 80381047, "body": "aaaaaand, I&#39;ve just realised you&#39;re name is Andrey, not Audrey. My sincere apologies for that. If I could edit my old comments, I would."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 5, "last_activity_date": 1507834161, "last_edit_date": 1507834161, "creation_date": 1507832689, "answer_id": 46716493, "question_id": 46716237, "link": "https://stackoverflow.com/questions/46716237/replace-default-perl-on-ubuntu-16-04/46716493#46716493", "title": "Replace default perl on Ubuntu 16.04", "body": "<p>Do not replace system perl (or system binaries in general). You can build it to another location (as you suggested, <code>/usr/local</code> for example) and call it manually.</p>\n\n<p>My personal preference is to use <a href=\"https://github.com/tokuhirom/plenv\" rel=\"noreferrer\">plenv</a>. There's a nice guide <a href=\"http://www.dagolden.com/index.php/2390/setting-up-a-perl-development-environment-with-plenv/\" rel=\"noreferrer\">here</a> to get you started.</p>\n\n<p>If you admin the server and other users are logging in an using your scripts, you'll want to build plenv somewhere outside your home directory (eg. <code>/opt/plenv</code>) and ensure that all users $PATH is prepended with the bin path of your new perl. Without digressing too much, this can be done in <code>/etc/profile</code> or even better to declare you custom profile mods in a custom profile script (eg. <code>/etc/profile.d/custom.sh</code>).</p>\n\n<p><strike>I would also suggest using a more portable shebang such as <code>#!/usr/bin/env perl</code> which will use whichever perl is in a users <code>$PATH</code> first. The only exception to this is cron jobs, which I typically always hardcode full paths.</strike> (This is a personal preference based entirely how I admin my boxes and probably not a good idea to recommend unless you know the full repercussions. Administering a server is entirely subjective based on it's use-case, your use-case likely differs vastly from mine).</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1507838970, "post_id": 46717108, "comment_id": 80382436, "body": "In <a href=\"https://unix.stackexchange.com/a/29620/10454\">my answer</a> to <a href=\"https://unix.stackexchange.com/q/29608/10454\">this question</a>, I discuss the pros and cons of the <code>#!&#47;usr&#47;bin&#47;env</code> trick."}], "tags": [], "owner": {"reputation": 59, "user_id": 3287860, "user_type": "registered", "profile_image": "https://graph.facebook.com/1239020721/picture?type=large", "display_name": "Andrey Yumashev", "link": "https://stackoverflow.com/users/3287860/andrey-yumashev"}, "is_accepted": true, "score": 2, "last_activity_date": 1507835863, "last_edit_date": 1507835863, "creation_date": 1507835022, "answer_id": 46717108, "question_id": 46716237, "link": "https://stackoverflow.com/questions/46716237/replace-default-perl-on-ubuntu-16-04/46717108#46717108", "title": "Replace default perl on Ubuntu 16.04", "body": "<p>According to comments, there is no solution to replace system Perl without of destroying something but the're 3 solutions to solve the descibed problem. For all of them i need to modify all the scripts. </p>\n\n<ol>\n<li>Using #!/usr/bin/env perl (need to be very careful and place custom perl bin path before all at $PATH of user which runs the script. The nice solution would be to set PATH exactly at crontab.</li>\n<li>Using straight new perl path at shebang like as #!/usr/local/bin/perl5.26.1</li>\n<li>Totally remove shebang from scripts and use plain calls at cron and manual runs - like as /usr/bin/perl script.pl. Or just use plain calls - shebang would be ignored.</li>\n</ol>\n\n<p>Special thanks to @Joshua and @ikegami</p>\n"}], "owner": {"reputation": 59, "user_id": 3287860, "user_type": "registered", "profile_image": "https://graph.facebook.com/1239020721/picture?type=large", "display_name": "Andrey Yumashev", "link": "https://stackoverflow.com/users/3287860/andrey-yumashev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 1, "accepted_answer_id": 46717108, "answer_count": 2, "score": 2, "last_activity_date": 1507835863, "creation_date": 1507831727, "question_id": 46716237, "link": "https://stackoverflow.com/questions/46716237/replace-default-perl-on-ubuntu-16-04", "title": "Replace default perl on Ubuntu 16.04", "body": "<p>I got a huge project written on Perl, which contains many of scripts which starts with typical #!/usr/bin/perl</p>\n\n<p>For this project I need a custom-built Perl to be compiled from source.</p>\n\n<p>I tried just to replace /usr/bin/perl with my compiled one but OS becomes broken (for ex. module version mismatch etc).</p>\n\n<p>So is there any correct way to replace system perl with my own-built one or the easiest way would be to edit all tons of scripts and replace /usr/bin/perl with /usr/local/bin/perl or something like this?</p>\n"}, {"tags": ["perl", "compiler-errors", "apache2", "mod-perl2"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1507834244, "post_id": 46715652, "comment_id": 80380065, "body": "Did you really enter that command with curly quotes?"}, {"owner": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1507839467, "post_id": 46715652, "comment_id": 80382687, "body": "Yes. I entered with quotes"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1507839502, "post_id": 46715652, "comment_id": 80382708, "body": "No, I specifically mean <i>curly</i> quotes -- <code>\u201c</code> and <code>\u201d</code> instead of <code>&quot;</code>, for instance."}, {"owner": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1507839673, "post_id": 46715652, "comment_id": 80382790, "body": "Sorry i dont know what a curly quote means. I used double quotes. Stack overflow changes the font which is why it may look so."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507832058, "post_id": 46716241, "comment_id": 80378868, "body": "Error: Key apxs has no value"}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507832670, "post_id": 46716241, "comment_id": 80379223, "body": "I think <code>apxs</code> is not installed in your system. Do you have <code>apxs module</code> installed, if not <a href=\"https://stackoverflow.com/questions/18566774/how-to-install-apxs-module-on-apache-2-4-6\">follow this Q&amp;A</a>"}, {"owner": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507832920, "post_id": 46716241, "comment_id": 80379355, "body": "I dont have apxs installed. Apxs is apache xtension if am not wrong. I am trying to compile apache with static mod_perl. So xs should be compiled along with apache right"}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507833038, "post_id": 46716241, "comment_id": 80379409, "body": "it is a separate package and comes under apache development package."}, {"owner": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507841346, "post_id": 46716241, "comment_id": 80383666, "body": "MP_APXS and MP_AP_PREFIX are mutually exclusive"}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507874873, "post_id": 46716241, "comment_id": 80393207, "body": "No it&#39;s not. <code>MP_AP_PREFIX</code> must point to an extracted Apache 2.0 source tree, while <code>MP_APXS</code> must point to the <code>apxs</code> binaries."}, {"owner": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507876865, "post_id": 46716241, "comment_id": 80394051, "body": "[ Error ] You need to pass either MP_AP_PREFIX or MP_APXS but not both  @Prashant. I get this error if I use both."}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507879587, "post_id": 46716241, "comment_id": 80395401, "body": "Sorry my bad! . So I think apxs is not included with apache httpd source code."}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507959922, "post_id": 46716241, "comment_id": 80428987, "body": "instead of <code>static installation</code> did you try with <code>dynamic</code>"}, {"owner": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "edited": false, "score": 0, "creation_date": 1507967427, "post_id": 46716241, "comment_id": 80430587, "body": "Yes, I switched to dynamic compile and completed my installation. Thanks for your efforts."}], "tags": [], "owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1507976756, "last_edit_date": 1507976756, "creation_date": 1507831735, "answer_id": 46716241, "question_id": 46715652, "link": "https://stackoverflow.com/questions/46715652/issue-while-compiling-apache2-with-mod-perl/46716241#46716241", "title": "Issue while compiling apache2 with mod_perl", "body": "<p>Looks like the eval fails because of fatal warnings from the undef value.</p>\n\n<p>Can you try this patch in <strong>Apache-Test</strong> at <strong>loc 1100</strong> and report back the output?</p>\n\n<p><strong>Index: lib/Apache/TestRun.pm</strong> </p>\n\n<pre><code>my %args = @Apache::TestMM::Argv;\nwhile (my($k, $v) = each %args) {\n  unless (defined $v) {\n      die \"key $k has no value\";\n  }\n  $v =~ s/\\|/\\\\|/g;\n  $body .= \"\\n\\$Apache::TestConfig::Argv{'$k'} = q|$v|;\\n\";\n}\n</code></pre>\n\n<p>If it shows <code>key apxs has no value</code>, then it means either apxs module is not installed or script is not able to find the path where apxs module is installed.</p>\n\n<p>To check if <code>apxs module</code> is installed or not, run following command</p>\n\n<p><code>which apxs</code> --> shows path where it is installed</p>\n\n<p>If above command doesn't show anything, it means it is not installed, so you can installed it by running following command</p>\n\n<p><code>sudo apt-get install apache2-dev</code></p>\n\n<p>Now run <code>which apxs</code> command again and check where it is installed, most probably it will show <code>/usr/bin/apxs</code></p>\n\n<p>Now run <code>Makefile.PL</code> with addition of following line</p>\n\n<p><code>MP_APXS=/usr/bin/apxs</code></p>\n\n<p>So command should be like this</p>\n\n<pre><code>perl Makefile.PL MP_APXS=/usr/bin/apxs\n</code></pre>\n\n<p>Now it should go properly without any interruption. </p>\n"}], "owner": {"reputation": 11, "user_id": 8766803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJG96.jpg?s=128&g=1", "display_name": "Itsme", "link": "https://stackoverflow.com/users/8766803/itsme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507976756, "creation_date": 1507829577, "last_edit_date": 1507829938, "question_id": 46715652, "link": "https://stackoverflow.com/questions/46715652/issue-while-compiling-apache2-with-mod-perl", "title": "Issue while compiling apache2 with mod_perl", "body": "<pre><code>perl Makefile.PL MP_USE_STATIC=1 \\\nMP_AP_PREFIX=/tmp/https2.2.34 \\\nMP_AP_CONFIGURE=\u201c\u2014with-mpm=prefork \\\n\u2014prefix=/tmp/apache-2.2.34 \\\n-enable-modules=\u2018ssl rewrite info alias auth_basic usertrack so\u2019\u201d\n</code></pre>\n\n<p>ERROR from evaluation of /tmp/mod_perl-2.0.10/Apache-Reload/Makefile.PL: Use of uninitialized value in substitution (s///) at Apache-Test/lib/TestRun.pm line 1100.</p>\n\n<pre><code>Os: sun Os 5.10 sun4v sparc SUNW,T5240\ncc - /bin/cc\nmake - /usr/CORE/bin/make - GNU make 3.80\nPerl - /bin/perl - v5.8.4\nApache - 2.2.34\nMod_perl - 2.0.10\n</code></pre>\n"}, {"tags": ["perl", "class", "methods", "module"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1507824386, "post_id": 46714114, "comment_id": 80374692, "body": "I can think of several reasons, but if you give an example of one of these Perl modules it will be more useful; to explain in context."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1507824643, "post_id": 46714114, "comment_id": 80374833, "body": "The first thing that came to mind was the <code>CGI</code> module, but upon closer investigation it looks like it does store data in some circumstances."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1507824807, "post_id": 46714114, "comment_id": 80374916, "body": "One benefit is inheritance. You can use a subclass of <code>Module</code> only if it is object-oriented."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1507824953, "post_id": 46714114, "comment_id": 80374999, "body": "@mob, actually that may be technically untrue. I was digging through my Perl library directory and it looks like the <code>DB</code> module effectively uses inheritance without technically being object oriented. It is very strange though."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1507825320, "post_id": 46714114, "comment_id": 80375223, "body": "You can add attributes at runtime (unless the class is mutable).  See for instance <a href=\"https://stackoverflow.com/questions/3996067/how-can-i-flexibly-add-data-to-moose-objects\">posts here</a>. Quite possible to think of use cases."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1507826270, "last_edit_date": 1507826270, "creation_date": 1507825336, "answer_id": 46714505, "question_id": 46714114, "link": "https://stackoverflow.com/questions/46714114/when-and-why-would-you-use-a-class-with-no-data-members/46714505#46714505", "title": "When and why would you use a class with no data members?", "body": "<p>One benefit is inheritance. You can subclass behavior of an existing class if it supports the <code>-&gt;</code> style subroutine calls (which is a weaker statement than saying the class is <em>object-oriented</em>, as I said in a comment above).</p>\n\n<pre><code>package Class;\nsub new { bless \\__PACKAGE__,__PACKAGE__ }\nsub do_something { \"foo\" }\nsub do_something_else { 42 }\n1;\n\n\npackage Subclass;\n@Sublcass::ISA = qw(Class);\nsub new { bless \\__PACKAGE__,__PACKAGE__ }\nsub do_something_else { 19 }\n\n\npackage main;\nuse feature 'say';\n$o1 = Class-&gt;new;\n$o2 = Subclass-&gt;new;\n\nsay $o1-&gt;do_something;          # foo\nsay $o2-&gt;do_something;          # foo\nsay $o1-&gt;do_something_else;     # 42\nsay $o2-&gt;do_something_else;     # 19\n</code></pre>\n\n<hr>\n\n<p>A prominent use of this technique is the <code>UNIVERSAL</code> class, that all blessed references implicitly subclass. The methods defined in the <code>UNIVERSAL</code> namespace generally take a package name as the first argument (or resolve a reference in the first argument to its package name), are return some package information. The <code>DB</code> class also does something like this (though the <code>DB</code> package also maintains plenty of state).</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 46714505, "answer_count": 1, "score": 2, "last_activity_date": 1507826270, "creation_date": 1507824044, "last_edit_date": 1507824328, "question_id": 46714114, "link": "https://stackoverflow.com/questions/46714114/when-and-why-would-you-use-a-class-with-no-data-members", "title": "When and why would you use a class with no data members?", "body": "<p>I have noticed some Perl modules use a class based structure, but don't manage any data. The class is simply used to access the methods within and nothing more.</p>\n\n<p>Consider the following example:</p>\n\n<p><strong>Class.pm</strong></p>\n\n<pre><code>package Class;\n\nuse Moose;\n\nsub do_something {\n    print \"Hi!\\n\";\n}\n\n1;\n</code></pre>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>use Class;\n\n# Instantiate an object from the class\nmy $obj = Class-&gt;new();\n\n$obj-&gt;do_something();\n</code></pre>\n\n<p>In this example you can see that you would first instantiate an instance of the class, then call the method from the created object.</p>\n\n<hr>\n\n<p>The same end result can be achieved like so:</p>\n\n<p><strong>Module.pm</strong></p>\n\n<pre><code>package Module;\n\nuse strict;\nuse warnings;\n\nsub do_something {\n    print \"Hi!\\n\";\n}\n\n1;\n</code></pre>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>use Module;\n\nModule::do_something();\n</code></pre>\n\n<p>I am wondering why people write modules using the first approach, and if there is some benefit that it provides. To me it seems like it adds an extra step, because in order to use the methods, you first need to instantiate an object of the class.</p>\n\n<p>I don't understand why people would program like this unless it has some benefit that I am not seeing.</p>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1507809828, "post_id": 46709019, "comment_id": 80364554, "body": "<code>&lt;.*&gt;</code> it should be  <code>&lt;.*?&gt;</code> or <code>&lt;[^&gt;]*&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1507809808, "creation_date": 1507809808, "answer_id": 46709139, "question_id": 46709019, "link": "https://stackoverflow.com/questions/46709019/delete-string-between-two-strings-in-one-line/46709139#46709139", "title": "delete string between two strings in one line", "body": "<p>Following awk will be helpful to you.</p>\n\n<pre><code>echo \"hi, &lt;how&gt; are &lt;you&gt;? \"  | awk '{for(i=1;i&lt;=NF;i++){if($i~/&lt;.*&gt;/){$i=\"\"}}} 1'\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>echo \"1 &lt;a&gt; 2 &lt;b&gt; 3 &lt;c&gt; 4 &lt;d&gt; ...... 1000 &lt;n&gt;\"  | awk '{for(i=1;i&lt;=NF;i++){if($i~/&lt;.*&gt;/){$i=\"\"}}} 1'\n</code></pre>\n\n<p><strong><em>Explanation:</em></strong> Simply going through all the fields of the line(by starting a for loop which starts from <code>i=1</code> to till the value of <code>NF</code>(number of fields)), there I am checking if a field's value is satisfying regex <code>&lt;.*&gt;</code>(means it has ) then I am nullifying it.</p>\n"}, {"tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": true, "score": 2, "last_activity_date": 1507810025, "creation_date": 1507810025, "answer_id": 46709214, "question_id": 46709019, "link": "https://stackoverflow.com/questions/46709019/delete-string-between-two-strings-in-one-line/46709214#46709214", "title": "delete string between two strings in one line", "body": "<p>Using <code>awk</code>:</p>\n\n<pre><code># using gsub - recommended \n$ echo \"1 &lt;a&gt; 2 &lt;b&gt; 3 &lt;c&gt; 4 &lt;d&gt; ...... 1000 &lt;n&gt;\" | awk 'gsub(/&lt;[^&gt;]*&gt;/,\"\")' \n1  2  3  4  ...... 1000 \n\n# OR using FS and OFS\n$ echo \"1 &lt;a&gt; 2 &lt;b&gt; 3 &lt;c&gt; 4 &lt;d&gt; ...... 1000 &lt;n&gt;\" | awk -F'&lt;[^&gt;]*&gt;' -v OFS='' '$1=$1'\n1  2  3  4  ...... 1000 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1507812446, "last_edit_date": 1507812446, "creation_date": 1507810050, "answer_id": 46709224, "question_id": 46709019, "link": "https://stackoverflow.com/questions/46709019/delete-string-between-two-strings-in-one-line/46709224#46709224", "title": "delete string between two strings in one line", "body": "<p><code>*</code> matches zero or more times with greedy. use the negation character class <code>&lt;[^&gt;]*&gt;</code></p>\n\n<pre><code>echo \"hi, &lt;how&gt; are &lt;you&gt;? \" | sed 's/&lt;[^&gt;]*&gt;//g'\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 5969004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/913368825442957/picture?type=large", "display_name": "Robert Choy", "link": "https://stackoverflow.com/users/5969004/robert-choy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 46709214, "answer_count": 3, "score": 2, "last_activity_date": 1507812446, "creation_date": 1507809460, "question_id": 46709019, "link": "https://stackoverflow.com/questions/46709019/delete-string-between-two-strings-in-one-line", "title": "delete string between two strings in one line", "body": "<p>i am trying to delete everything between bracket &lt;>, i can do it if one line only has one &lt;>, but if a line has more than one, it seems to delete everything inside the outer &lt;>.</p>\n\n<pre><code>echo \"hi, &lt;how&gt; are you\" | sed 's/&lt;.*&gt;//' \nresult: hi,  are you\n\necho \"hi, &lt;how&gt; are &lt;you&gt;? \" | sed 's/&lt;.*&gt;//' \nresult: hi, ? \n</code></pre>\n\n<p>the first echo is working fine, but if one sentense has more than one &lt;>, it can not classify.</p>\n\n<pre><code>expected input: 1 &lt;a&gt; 2 &lt;b&gt; 3 &lt;c&gt; 4 &lt;d&gt; ...... 1000 &lt;n&gt;\nexpected out come: 1 2 3 4 .... 1000\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1507822204, "post_id": 46709010, "comment_id": 80373333, "body": "<code>my $object = !$test &amp;&amp; Class::create($args);</code>"}, {"owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1507828580, "post_id": 46709010, "comment_id": 80376980, "body": "@\u0421\u0443\u0445\u043e\u043927: To be honest that is very hard to understand exactly what&#39;s going on (at least for me)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1507839677, "post_id": 46709010, "comment_id": 80382792, "body": "@Jim  The <code>&amp;&amp;</code> (and <code>and</code>) in Perl short-circuit <i>and return the value</i> (not true/false).  So if <code>!$test</code> returns a falsey value (the criterion from your code) then the rest of the statement isn&#39;t evaluated and <code>!$test</code>&#39;s return is assigned to <code>$object</code> (presumably <code>undef</code>, emtpy string, etc -- depends on how your <code>$test</code> is designed).  If, however, <code>!$test</code> returns a truthy value <i>then</i> the rest goes.  This implements the 6 lines from your example, correctly.  Note that mob&#39;s answer has the advantage of setting <code>$object</code> specifically  to <code>undef</code> (and not relying on return from <code>!$test</code>)."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1507839720, "post_id": 46709010, "comment_id": 80382811, "body": "@\u0421\u0443\u0445\u043e\u043927: I considered that one, but it defined <code>$object</code> and sets it to the empty string on failure, which may or may not be a problem"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1507840128, "post_id": 46709010, "comment_id": 80383031, "body": "@Jim  <b>Correction</b> to my long comment above -- the <code>!$test</code> returns an empty string if <code>$test</code> is truthy.  That <b>doesn&#39;t</b> &quot;<i>depends on how your <code>$test</code> is designed</i>&quot; and it cannot return <code>undef</code>."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1507841055, "post_id": 46709010, "comment_id": 80383524, "body": "@mob since it is object in question I would not be bothered with definedness. Readability on the other hand is completely another issue."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1507812526, "last_edit_date": 1507812526, "creation_date": 1507811313, "answer_id": 46709618, "question_id": 46709010, "link": "https://stackoverflow.com/questions/46709010/conditional-initialization-definition-of-variable/46709618#46709618", "title": "Conditional initialization/definition of variable", "body": "<p>That syntax is ... <a href=\"https://stackoverflow.com/questions/20177827/what-is-wrong-in-my-foo-x-if-y-syntax\">fraught with peril</a>.</p>\n\n<pre><code>my $object = $test ? undef : Class::create($args);\n\nmy $object;\n$object = Class::create($args) unless $test;\n</code></pre>\n\n<p>are safer alternatives.</p>\n"}], "owner": {"reputation": 16982, "user_id": 1197249, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1bd14b525fbc9b28f6ff37248ddc9074?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/1197249/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 46709618, "answer_count": 1, "score": 1, "last_activity_date": 1507812526, "creation_date": 1507809438, "question_id": 46709010, "link": "https://stackoverflow.com/questions/46709010/conditional-initialization-definition-of-variable", "title": "Conditional initialization/definition of variable", "body": "<p>Can I define a variable only if a parameter is false?<br>\nI have something like:  </p>\n\n<pre><code>my $object = Class::create($args);  \nfor my $i (@input) {  \n  if ($test) {  \n     # print some info here     \n    next;  \n  }   \n\n#use of $object here    \n}  \n</code></pre>\n\n<p>If I do  something like:  </p>\n\n<pre><code>my $object = Class::create($args) unless ($test);  \n</code></pre>\n\n<p>is that a correct approach for the initialization?</p>\n"}, {"tags": ["multithreading", "perl"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1564605578, "last_edit_date": 1564605578, "creation_date": 1507798085, "answer_id": 46705209, "question_id": 46703949, "link": "https://stackoverflow.com/questions/46703949/perl-share-complex-data-structure-between-threads/46705209#46705209", "title": "Perl: share complex data-structure between threads", "body": "<p>Complex data structures can be shared using <a href=\"http://search.cpan.org/~jdhedden/threads-shared-1.57/lib/threads/shared.pm#shared_clone\" rel=\"nofollow noreferrer\"><code>shared_clone</code></a>. The components of the data structure need be cloned before being added to it.</p>\n\n<pre><code>use strict;\nuse feature 'say';\nuse Data::Dump qw(dd);\n\nuse threads;\nuse threads::shared;\n\nmy $cds = {\n    k1 =&gt; shared_clone( { k1_l2 =&gt; [ 1..2 ] } ),\n    k2 =&gt; shared_clone( { k2_l2 =&gt; [10..11] } )\n};\n\nmy @threads = map { async(\\&amp;proc_ds, $cds-&gt;{$_}) } keys %$cds;\n\n$_-&gt;join() for @threads;\n\ndd $cds;\n\nsub proc_ds {\n    my ($ds) = @_;\n    lock $ds;\n    push @{$ds-&gt;{$_}}, 10+threads-&gt;tid  for keys %$ds;\n}\n</code></pre>\n\n<p>Note that you don't want to allow autovivification when working with shared values, as it would create unshared (and empty) components in the structure.  Check explicitly for existence.</p>\n\n<p>A ready data structure needs to be cloned-and-shared</p>\n\n<pre><code>my $cds = { k =&gt; [ 5..7 ] };          # already built, need be shared\nmy $cds_share = shared_clone( $cds );\n\nmy @threads = map { async(\\&amp;proc_ds, $cds_share) } 1..3;\n$_-&gt;join() for @threads;\n</code></pre>\n\n<p>With the same <code>proc_ds()</code> as above this prints the structure (condensed output)</p>\n\n<pre>\n{ 'k' => [ '5', '6', '7', '11', '12', '13' ] };\n</pre>\n\n<p>When data structure is populated for sharing, as in the first example, then there is less overhead to pay. Otherwise there is a data copy involved, as in the second example, and whether that is OK depends on details (data size, how often a copy is made, etc).</p>\n\n<p>The idea of serializing data is workable as well, but how suitable it is again depends on details since in that case you'd not only copy data but would go to disks as well.</p>\n\n<p>In that case JSON is certainly one good way to go, being a data format that is simple and readable, and can also be shared between tools.  The Storable is binary, works directly with Perl data structures, and is supposed to be fast (what should show with larger data).</p>\n\n<p>One other option is to use a worker model and pass data over a message queue. Then you'd use <a href=\"https://perldoc.perl.org/Thread/Queue.html\" rel=\"nofollow noreferrer\">Thread::Queue</a>, or perhaps make use of <a href=\"https://metacpan.org/pod/Thread::Queue::Any\" rel=\"nofollow noreferrer\">Thread::Queue::Any</a>, for communication channels.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1508152889, "creation_date": 1508152889, "answer_id": 46769134, "question_id": 46703949, "link": "https://stackoverflow.com/questions/46703949/perl-share-complex-data-structure-between-threads/46769134#46769134", "title": "Perl: share complex data-structure between threads", "body": "<p>When dealing with this problem, I use <code>Thread::Queue</code> to pass my objects around, and usually use <code>Storable</code> to serialise. </p>\n\n<p>I haven't bothered doing performance comparisons, because <em>usually</em> my data-passing overhead isn't the limiting factor. </p>\n\n<p>Note - the key advantage of <code>Storable</code> is that it allows some limited object support (Not - be careful - it <em>only</em> works if your object is self contained):</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\npackage MyObject;\n\nsub new { \n   my ( $class, $id ) = @_; \n   my $self = {};\n   $self -&gt; {id} = $id; \n   $self -&gt; {access_count} = 0; \n   bless $self, $class;\n   return $self;\n}\n\nsub access_thing { \n   my ( $self ) = @_;\n   return $self -&gt; {access_count}++; \n}\n\nsub get_id { \n    my ( $self ) = @_;\n   return $self -&gt; {id}; \n}\n\npackage main; \n\nuse threads;\nuse Thread::Queue;\n\nuse Storable qw ( freeze thaw );\n\nmy $thread_count = 10;\n\nmy $work_q = Thread::Queue -&gt; new; \n\nsub worker  {\n   while ( my $item = $work_q -&gt; dequeue ) {\n      my $obj = thaw ( $item ); \n      print $obj -&gt; get_id, \": \", $obj -&gt; access_thing,\"\\n\";    \n\n   }\n}\n\nfor (1..$thread_count) {\n   threads -&gt; create (\\&amp;worker); \n}\n\nfor my $id ( 0..1000 ) {\n   my $obj = MyObject -&gt; new ( $id ); \n   $work_q -&gt; enqueue ( freeze ( $obj ) );\n}\n\n$work_q -&gt; end;\n\n$_ -&gt; join for threads -&gt; list; \n</code></pre>\n\n<p>If JSON would limit you to array/hash data structures - which may be fine for your use case. </p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 4, "accepted_answer_id": 46705209, "answer_count": 2, "score": 4, "last_activity_date": 1564605578, "creation_date": 1507793711, "last_edit_date": 1507798081, "question_id": 46703949, "link": "https://stackoverflow.com/questions/46703949/perl-share-complex-data-structure-between-threads", "title": "Perl: share complex data-structure between threads", "body": "<p>I like to share a complex-datastructure between threads.\nAs far I know that is not possible with threads:shared (only basic types are shareable).</p>\n\n<p>So I think about serialize/deserialize the structure with JSON or Storable so it is just a string that I can share perfectly. But I need to unpack it before use and pack it after a change.</p>\n\n<ul>\n<li><p>Is that a common way to work on that problem?</p></li>\n<li><p>Are there better ways?</p></li>\n<li><p>Whould you prefer JSON or Storable or something else?</p></li>\n</ul>\n\n<p>Thanks for help!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I just did some tests with Storable and JSON. JSON is quicker and produces smaller serialized strings. I did not expect that.</p>\n"}]