[{"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 3, "creation_date": 1566427472, "post_id": 57600004, "comment_id": 101657235, "body": "Do not use regex to parse and/or modify XML.  Use a real XML parser, in your case an XSLT processor would be able to do exactly what you need.  Perl has XSLT bindings, as described several places including <a href=\"https://www.oreilly.com/library/view/xslt-cookbook/0596003722/ch12s16.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1566427505, "post_id": 57600004, "comment_id": 101657240, "body": "I suggest to use an XML/HTML parser (xmlstarlet, e.g.)."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 2, "last_activity_date": 1566462884, "creation_date": 1566462884, "answer_id": 57605238, "question_id": 57600004, "link": "https://stackoverflow.com/questions/57600004/unable-to-figure-out-how-to-replace-a-tag-in-xml/57605238#57605238", "title": "Unable to figure out how to replace a tag in xml", "body": "<pre><code>use XML::LibXML qw();\nmy $config = XML::LibXML\n    -&gt;load_xml(location =&gt; 'config.txt');\nmy $replace = (XML::LibXML\n    -&gt;load_xml(location =&gt; 'replace-with-config.txt')\n    -&gt;findnodes('//localReplications')\n)[0];\nfor my $local_replications (\n    $config-&gt;findnodes('//localReplications')\n) {\n    # $local_replications-&gt;replaceNode($replace);\n    # this fails with HIERARCHY_REQUEST_ERR,\n    # so do it in two steps instead\n    $local_replications-&gt;addSibling($replace);\n    $local_replications-&gt;unbindNode;\n}\nprint $config-&gt;toString;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 3033412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b5b44cd67f48107daceefb22de2b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Light Of Heaven", "link": "https://stackoverflow.com/users/3033412/light-of-heaven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 57605238, "answer_count": 1, "score": -3, "last_activity_date": 1566462884, "creation_date": 1566427257, "question_id": 57600004, "link": "https://stackoverflow.com/questions/57600004/unable-to-figure-out-how-to-replace-a-tag-in-xml", "title": "Unable to figure out how to replace a tag in xml", "body": "<p>Need help to figure out correct regex for replacing xml tag with contents of a file. </p>\n\n<p>Tried basic things like escaping special characters but no luck. Open to using something else other than sed.</p>\n\n<p>config.txt</p>\n\n<pre><code>    &lt;localReplications/&gt;\n</code></pre>\n\n<p>replace-with-config.txt</p>\n\n<pre><code>    &lt;localReplications&gt;\n        &lt;localReplication&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;cronExp&gt;0 0 /5 * * ?&lt;/cronExp&gt;\n            &lt;syncDeletes&gt;true&lt;/syncDeletes&gt;\n            &lt;syncProperties&gt;true&lt;/syncProperties&gt;\n            &lt;repoKey&gt;some-repo-key&lt;/repoKey&gt;\n            &lt;url&gt;https://foo.bar/random&lt;/url&gt;\n            &lt;socketTimeoutMillis&gt;15000&lt;/socketTimeoutMillis&gt;\n            &lt;username&gt;foo&lt;/username&gt;\n            &lt;password&gt;bar&lt;/password&gt;\n            &lt;enableEventReplication&gt;true&lt;/enableEventReplication&gt;\n            &lt;syncStatistics&gt;false&lt;/syncStatistics&gt;\n        &lt;/localReplication&gt;\n    &lt;/localReplications&gt;\n</code></pre>\n\n<p><code>&lt;localReplications/&gt;</code> tag is part of really complicated xml file. I expect <code>&lt;localReplications/&gt;</code> to be replaced with contents in replace-with-config.txt</p>\n"}, {"tags": ["string", "perl"], "comments": [{"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1566394355, "post_id": 57592117, "comment_id": 101643108, "body": "I can write a script to do this, but how are you getting these strings, from an array, hash, or from a text file?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1566394879, "post_id": 57592117, "comment_id": 101643462, "body": "What have you tried? What problems are you having? Please show us your code."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1566396385, "creation_date": 1566396385, "answer_id": 57593554, "question_id": 57592117, "link": "https://stackoverflow.com/questions/57592117/compare-two-strings-and-find-mismatch-and-match-and-count-them-both-in-perl/57593554#57593554", "title": "Compare two strings and find mismatch and match and count them both in perl", "body": "<p>Solution that works for any amount of strings.</p>\n\n<pre><code>use List::Util qw(max);\nuse Perl6::Junction qw(all);\n\nmy @strings = qw(SEQUENCE SEKUEAEE);\nmy (%matches, %mismatches);\nfor my $i (0 .. -1 + max map { length } @strings) {\n    my @c = map { substr $_, $i, 1 } @strings;\n    if ($c[0] eq all @c) {\n        $matches{join '', @c}++;\n    } else {\n        $mismatches{join '', @c}++;\n    }\n}\nfor my $k (keys %matches) {\n    printf \"'%s' match %d\\n\", $k, $matches{$k};\n}\nfor my $k (keys %mismatches) {\n    printf \"'%s' mismatch %d\\n\", $k, $mismatches{$k};\n}\n__END__\n'SS' match 1\n'UU' match 1\n'EE' match 3\n'QK' mismatch 1\n'NA' mismatch 1\n'CE' mismatch 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 3, "last_activity_date": 1566433780, "last_edit_date": 1566433780, "creation_date": 1566428185, "answer_id": 57600097, "question_id": 57592117, "link": "https://stackoverflow.com/questions/57592117/compare-two-strings-and-find-mismatch-and-match-and-count-them-both-in-perl/57600097#57600097", "title": "Compare two strings and find mismatch and match and count them both in perl", "body": "<p>Here's a solution in old Perl. Also works with however many strings you want</p>\n\n<pre><code>use warnings;\nuse strict;\nuse List::AllUtils qw( mesh part count_by pairs );\n\nmy @strings = (\"SEQUENCES\", \"SEKUEAEES\", \"SEKUEAEES\"); \n\nmy $i = 0;\n\nprint join \"\",\n    map { $_-&gt;[0] . \" \" . ($_-&gt;[1] &gt; 1 ? 'match' : 'mismatch') . \" \" . $_-&gt;[1] .\"\\n\" }\n    pairs\n    count_by { $_ }\n    map { join \"\", @$_ }\n    part { int($i++/scalar @strings) } \n    &amp;mesh( @{[ map { [ split // ] } @strings ]} ) \n;\n</code></pre>\n\n<p>And here for comparison, analogous code in Perl 6.</p>\n\n<pre><code>my @strings = \"SEQUENCES\", \"SEKUEAEES\", \"SEKUEAEES\"; \n\n([Z] @strings&gt;&gt;.comb)\n    .map({ .join })\n    .Bag\n    .map({ \"{.key} { .value &gt; 1 ?? 'match' !! 'mismatch' } {.value}\\n\" })\n    .join\n    .say;\n</code></pre>\n\n<p>Isn't that just pretty?</p>\n"}, {"comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1566432151, "post_id": 57600488, "comment_id": 101658155, "body": "You may have more Utils, but I have ALL Utils. Hahaha. (see below)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1566432275, "post_id": 57600488, "comment_id": 101658170, "body": "@Holli That makes me want to make use of <code>List::EvenMoreUtils</code>."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1566431837, "creation_date": 1566431837, "answer_id": 57600488, "question_id": 57592117, "link": "https://stackoverflow.com/questions/57592117/compare-two-strings-and-find-mismatch-and-match-and-count-them-both-in-perl/57600488#57600488", "title": "Compare two strings and find mismatch and match and count them both in perl", "body": "<p>Useing the non-core but very handy <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\">List::MoreUtils</a> module.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse List::MoreUtils qw/each_array/;\n\nsub count_matches {\n  die \"strings must be equal length!\" unless length $_[0] == length $_[1];\n  my @letters1 = split //, $_[0];\n  my @letters2 = split //, $_[1];\n  my (%matches, %mismatches);\n  my $iter = each_array @letters1, @letters2;\n  while (my ($c1, $c2) = $iter-&gt;()) {\n    if ($c1 eq $c2) {\n      $matches{\"$c1$c2\"} += 1;\n    } else {\n      $mismatches{\"$c1$c2\"} += 1;\n    }\n  }\n  say \"'$_' match $matches{$_}\" for sort keys %matches;\n  say \"'$_' mismatch $mismatches{$_}\" for sort keys %mismatches;\n}\n\ncount_matches qw/SEQUENCE SEKUEAEE/;\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9177448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9549ba504f7628190cd9371a9ca6bdf?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9177448/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1566433780, "creation_date": 1566392035, "question_id": 57592117, "link": "https://stackoverflow.com/questions/57592117/compare-two-strings-and-find-mismatch-and-match-and-count-them-both-in-perl", "title": "Compare two strings and find mismatch and match and count them both in perl", "body": "<p>Compare two strings and find mismatch and mismatch and count them both</p>\n\n<pre><code>string1 = \"SEQUENCE\"\nstring2 = \"SEKUEAEE\"\n</code></pre>\n\n<p>I want output like. With the mismatch and match count.</p>\n\n<pre><code>'SS' match 1\n'EE' match 3\n'UU' match 1\n'QK' mismatch 1\n'NA' mismatch 1\n'CE' mismatch 1\n</code></pre>\n"}, {"tags": ["java", "perl", "ldap", "jndi"], "owner": {"reputation": 45, "user_id": 6788333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7631c775a921e10ada86f9e2de9933cd?s=128&d=identicon&r=PG&f=1", "display_name": "julie", "link": "https://stackoverflow.com/users/6788333/julie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1566383359, "creation_date": 1566383359, "question_id": 57589592, "link": "https://stackoverflow.com/questions/57589592/ldap-dircontext-search-perl-to-java-returns-different-object-models", "title": "LDAP DirContext search - Perl to Java, returns different object models", "body": "<p>I refer to this piece of code at CPAN to execute a search in LDAP. When I run this script, I am able to see the object model; also, the model is the same for every user I search for.\n<a href=\"https://metacpan.org/pod/Net::LDAP::Examples#OPERATION-Generating-a-SEARCH\" rel=\"nofollow noreferrer\">Net::LDAP::Examples</a>\n<p><strong>Object model retrieved using Perl script:</strong><br>\nobjectClass: top<br>\n             person<br>\n             organizationalPerson<br>\n             user<br>\ncn: someuser<br>\nsn: user<br>\ntitle: ENGINEER.SOFTWARE ENGINEERING<br>\nitDescription: Business Intelligence - DIS56<br>\nwhenCreated: 20130419212146.0Z<br>\nwhenChanged: 20190819042554.0Z<br></p>\n\n<p><p>\nNow I'm writing Java code to make the LDAP connection using JNDI, and here, I'm not able to see attributes like itDescription and title; also, the model is different between each user I search for - attributes missing or in excess. <br>\n<p><strong>Object model retrieved using JNDI:</strong><br>\n[objectCategory]=[CN=Person,CN=Schema,CN=Configuration,DC=tester,DC=com]<br>\n[whenCreated]=[20130419212146.0Z]<br></p>\n\n<p>Can someone please tell me why this is so? Here is my code to connect and search -</p>\n\n<pre><code>Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\n    env.put(Context.INITIAL_CONTEXT_FACTORY, \"com.sun.jndi.ldap.LdapCtxFactory\");\n    env.put(Context.PROVIDER_URL, \"ldap://ds.tester.com:3268\");\n    env.put(Context.SECURITY_AUTHENTICATION, \"simple\");\n    env.put(Context.SECURITY_PRINCIPAL, uName);\n    env.put(Context.SECURITY_CREDENTIALS, pwd);\n    DirContext context = new InitialDirContext(env);\n\n    SearchControls cons = new SearchControls();\n    cons.setSearchScope(SearchControls.SUBTREE_SCOPE);\n\n    NamingEnumeration &lt;SearchResult&gt; srch = context.search(\"ou=employees,dc=tester,dc=com\",\"sAMAccountName=someuser\",cons);   \n</code></pre>\n\n<p>This is the relevant Perl script -</p>\n\n<pre><code>$ldap = Net::LDAP-&gt;new(\"ds.tester.com\") or die \"$@\";\n    print \"User : \"; my $user = &lt;STDIN&gt;; chomp($user);\n    my $passwd = &lt;STDIN&gt;; chomp($passwd);\n    my $userToAuthenticate = \"cn=$user,ou=employees,dc=tester,dc=com\";\n    $mesg = $ldap-&gt;bind(\"$userToAuthenticate\",password =&gt; \"$passwd\",version =&gt; 3 );\n    my ($ldap,$searchString,$attrs,$base) = @_ ;\n    if (!$base ) { $base = \"DC=tester,DC=com\"; }\n    if (!$attrs ) { $attrs = ['sAMAccountName' ]; }\n\n    my $result = $ldap-&gt;search (base    =&gt; \"$base\",\n                    scope   =&gt; \"sub\",\n                    filter  =&gt; \"$searchString\",\n                    attrs   =&gt;  $attrs\n                    );\n\n    foreach $entry ($result-&gt;entries) { $entry-&gt;dump; }\n</code></pre>\n"}, {"tags": ["perl", "cpan", "macos-mojave", "cpanm", "vcftools"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566346836, "post_id": 57582920, "comment_id": 101624929, "body": "Apparently the whole distribution has been deleted from CPAN."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566346951, "post_id": 57582920, "comment_id": 101624952, "body": "You might want to look at <a href=\"https://github.com/vcftools/vcftools\" rel=\"nofollow noreferrer\">github.com/vcftools/vcftools</a>."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1566374925, "post_id": 57582920, "comment_id": 101631874, "body": "Perhaps you are looking for <a href=\"https://metacpan.org/pod/VCF\" rel=\"nofollow noreferrer\">VCF</a> (all capital letters). It installs without problems."}, {"owner": {"reputation": 15, "user_id": 11144849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f80c819b0807b3a3afa1cce8a3b837?s=128&d=identicon&r=PG&f=1", "display_name": "mcrepeau", "link": "https://stackoverflow.com/users/11144849/mcrepeau"}, "edited": false, "score": 0, "creation_date": 1566496229, "post_id": 57582920, "comment_id": 101684352, "body": "You guys were correct: the module is part of VCFtools, and it is actually called VCF.pm (capitals).  Not sure why the legacy program I got refers to it as Vcf.pm.  But CPAN found and installed VCF just fine and when I changed all references in the legacy code from Vcf to VCF the program compiled and ran.  Hooray!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566372456, "post_id": 57583688, "comment_id": 101630747, "body": "MetaCPAN lists deleted distributions, which is why it can be seen there. While <code>cpan</code> and <code>cpanm</code> won&#39;t find it, you can still <a href=\"https://cpan.metacpan.org/authors/id/A/AJ/AJPAGE/Bio-Pipeline-Comparison-1.123050.tar.gz\" rel=\"nofollow noreferrer\">download</a> it from MetaCPAN (and from <a href=\"http://backpan.cpantesters.org/authors/id/A/AJ/AJPAGE/\" rel=\"nofollow noreferrer\">the author&#39;s BackPAN page</a>) and install it manually."}, {"owner": {"reputation": 15, "user_id": 11144849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f80c819b0807b3a3afa1cce8a3b837?s=128&d=identicon&r=PG&f=1", "display_name": "mcrepeau", "link": "https://stackoverflow.com/users/11144849/mcrepeau"}, "edited": false, "score": 0, "creation_date": 1566496937, "post_id": 57583688, "comment_id": 101684658, "body": "Okay, cpan -f App::cpanminus worked.  Now the command cpanm functions.  Not sure why the install without -f failed to add the module to PATH.  I have my Mac set to automatically start in a conda environment when I open a new terminal window.  Could that have anything to do with it?  Interesting about the defunct distributions still showing up in MetaCPAN."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1566354457, "creation_date": 1566354457, "answer_id": 57583688, "question_id": 57582920, "link": "https://stackoverflow.com/questions/57582920/trouble-installing-perl-module-with-cpanm/57583688#57583688", "title": "trouble installing perl module with cpanm", "body": "<p>It appears that the Bio::Pipeline::Comparison distribution is not indexed by PAUSE, so CPAN does not know how to install it. It's listed on MetaCPAN, but it was released seven years ago. The GitHub repository is missing and it's not in the <a href=\"https://www.cpan.org/authors/id/A/AJ/AJPAGE/\" rel=\"nofollow noreferrer\">author's CPAN directory</a>. The module has disappeared. You might write to the author to ask where's it's gone if you are supporting legacy code. If you are doing new work, find something else to do the job.</p>\n\n<p>As for the missing <code>cpanm</code>, it's probably installed but not in your PATH. You can force install it to and see where it ends up:</p>\n\n<pre><code>% cpan -f App::cpan minus\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 11144849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f80c819b0807b3a3afa1cce8a3b837?s=128&d=identicon&r=PG&f=1", "display_name": "mcrepeau", "link": "https://stackoverflow.com/users/11144849/mcrepeau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566354457, "creation_date": 1566346405, "question_id": 57582920, "link": "https://stackoverflow.com/questions/57582920/trouble-installing-perl-module-with-cpanm", "title": "trouble installing perl module with cpanm", "body": "<p>I'm trying to install Vcf.pm from CPAN and am having no luck.  Part of the problem is that I can't get cpanm to work.</p>\n\n<p>This is where I started:</p>\n\n<p><a href=\"https://metacpan.org/pod/release/AJPAGE/Bio-Pipeline-Comparison-1.123050/lib/Vcf.pm\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/release/AJPAGE/Bio-Pipeline-Comparison-1.123050/lib/Vcf.pm</a></p>\n\n<p>The Install Instructions (at the lower left if that page) gives 2 options:</p>\n\n<pre><code>cpanm Vcf\n</code></pre>\n\n<p>and </p>\n\n<pre><code>perl -MCPAN -e shell\ninstall Vcf\n</code></pre>\n\n<p>For the second option, the first line goes okay but the second line returns:</p>\n\n<pre><code>Warning: Cannot install Vcf, don't know what it is.\n</code></pre>\n\n<p>Trying the first option, I get:</p>\n\n<pre><code>-bash: cpanm: command not found\n</code></pre>\n\n<p>That is strange, because I already installed cpanminus and it seemed to go okay, and when I give this command:</p>\n\n<pre><code>cpan App:cpanminus\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>App::cpanminus is up to date (1.7044).\n</code></pre>\n\n<p>Can anyone help me get one of the above 2 options working so I can get the module installed?  I'm just a humble dilettante where computer programming is concerned, but my understanding is that cpan is supposed to make installing modules easy, so I can't believe I've managed to fail at this!</p>\n"}, {"tags": ["perl", "soap"], "answers": [{"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": true, "score": 4, "last_activity_date": 1566361532, "creation_date": 1566361532, "answer_id": 57584421, "question_id": 57577636, "link": "https://stackoverflow.com/questions/57577636/how-to-fix-broken-xml-generated-by-soaplite/57584421#57584421", "title": "How to fix broken XML generated by SOAP::Lite", "body": "<blockquote>\n  <p>Is there any special option which I have to turn on; or do I have to do the XML escaping for myself before setting it in the value?</p>\n</blockquote>\n\n<p>You can do it like that:</p>\n\n<pre><code>SOAP::Data-&gt;name(\"company_name\")-&gt;value(SOAP::Utils::encode_data(\"ACME &amp; Co.\"))\n</code></pre>\n\n<p>Proof:</p>\n\n<pre><code>  DB&lt;3&gt; $m = SOAP::Data-&gt;name(\"company_name\")-&gt;value(SOAP::Utils::encode_data(\"ACME &amp; Co.\"));\n\n  DB&lt;6&gt; use Data::Dumper\n\n  DB&lt;7&gt; print Dumper $m\n$VAR1 = bless( {\n                 '_value' =&gt; [\n                               'ACME &amp;amp; Co.'\n                             ],\n                 '_attr' =&gt; {},\n                 '_name' =&gt; 'company_name',\n                 '_signature' =&gt; []\n               }, 'SOAP::Data' );\n</code></pre>\n"}], "owner": {"reputation": 547, "user_id": 3139440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bcdcc52365b9e8e997c54518fa2875d?s=128&d=identicon&r=PG&f=1", "display_name": "Torsten Fehre", "link": "https://stackoverflow.com/users/3139440/torsten-fehre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57584421, "answer_count": 1, "score": 4, "last_activity_date": 1566361532, "creation_date": 1566317253, "question_id": 57577636, "link": "https://stackoverflow.com/questions/57577636/how-to-fix-broken-xml-generated-by-soaplite", "title": "How to fix broken XML generated by SOAP::Lite", "body": "<p>currently I am experiencing with certain SOAP-based web services; and I want to use SOAP::Lite to communicate with these services.</p>\n\n<p>In the first test, everything worked fine; until I had an ampersand (<code>&amp;</code>) in my data.</p>\n\n<p>When performing the request, I do this with the following snippet:</p>\n\n<pre><code>my $or_client = SOAP::Lite-&gt;new(\n    proxy =&gt; '...',\n    readable =&gt; 1,\n    autotype =&gt; 0,\n);\nmy $or_response = $or_client-&gt;call(\n    'aMethod',\n    SOAP::Data-&gt;name('company_name')-&gt;value('ACME'),\n    ...\n);\n</code></pre>\n\n<p>When I enable tracing (add the line <code>SOAP::Lite-&gt;import(trace =&gt; 'debug');</code>), I can see the following data sent to the server:</p>\n\n<pre><code>&lt;soap:Envelope \nsoap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" \n...&gt;\n    &lt;soap:Body&gt;\n        &lt;ns:aMethod&gt;\n            &lt;company_name&gt;ACME&lt;/company_name&gt;\n            ...\n        &lt;/ns:aMethod&gt;\n    &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>This works without any problems. But when the value for my data object contains special characters:</p>\n\n<pre><code>SOAP::Data-&gt;name(\"company_name\")-&gt;value(\"ACME &amp; Co.\")\n</code></pre>\n\n<p>Then I get a 500 Internal Server error; with the faultstring \"Unexpected character ' ' (code 32) (missing name?) ...\"</p>\n\n<p>I inspected the XML sent to the SOAP service, and I noticed that my \"&amp;\" in \"ACME &amp; Co\" is not XML escaped in the right manner:</p>\n\n<pre><code>&lt;company_name&gt;ACME &amp; Co.&lt;/company_name&gt;\n</code></pre>\n\n<p>Is there any special option which I have to turn on; or do I have to do the XML escaping for myself before setting it in the <code>value</code>?</p>\n"}, {"tags": ["perl", "random", "random-seed"], "comments": [{"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 1, "creation_date": 1566306924, "post_id": 57573343, "comment_id": 101609287, "body": "Do you need repeatable &quot;randomness&quot; in your application?  How will the random numbers you will generate be used?"}, {"owner": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "reply_to_user": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 0, "creation_date": 1566310544, "post_id": 57573343, "comment_id": 101611535, "body": "No. To get repeatable &quot;randomness&quot; I can simply use the same seed."}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 1, "creation_date": 1566310909, "post_id": 57573343, "comment_id": 101611722, "body": "Can you answer my other question: How will the random numbers you generate be used?  If the numbers will further information security in any way (e.g., they serve as random passwords, nonces, or encryption keys), then you should simply use a cryptographic RNG (such as <code>Crypt::URandom</code> in Perl) and generate <i>random numbers</i> with it rather than <i>seeds</i>."}, {"owner": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "reply_to_user": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 0, "creation_date": 1566312405, "post_id": 57573343, "comment_id": 101612628, "body": "Using the random number I&#39;ll compose a &quot;user name&quot;: <code>$user_name_to_fetch = sprintf(&quot;name%015d&quot;, rand($max_user_id));</code>  to query from a database.  I&#39;d like to cover most database in a minimal time by running queries in multiple client processes.  How can I use <code>Crypt::URandom</code> to generate a random number? It generates random strings."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 2, "creation_date": 1566312522, "post_id": 57573343, "comment_id": 101612703, "body": "Crypt::Random::Seed. Try it, and benchmark / profile its performance using the TESHA2-strong method. It&#39;s probably plenty fast if you only call it when you need a seed. Once you&#39;ve seeded a RNG, you shouldn&#39;t have to seed it again for the foreseeable future."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "edited": false, "score": 0, "creation_date": 1566307271, "post_id": 57574051, "comment_id": 101609479, "body": "tnx. very interesting reference.  When I tested the code in <a href=\"https://www.nu42.com/2010/09/be-vary-of-using-built-in-rng-for.html\" rel=\"nofollow noreferrer\">documented rand weakness</a> It returned 1000000.  When I changes the mapping to: <code>my %r = map { int(rand(1_000_000)) =&gt; undef } 1 .. 1_000_000;</code>  it started returning values around 632K."}, {"owner": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "edited": false, "score": 0, "creation_date": 1566311505, "post_id": 57574051, "comment_id": 101612061, "body": "I looked at <a href=\"https://metacpan.org/pod/Crypt::URandom\" rel=\"nofollow noreferrer\">Crypt::URandom</a>. How do I convert a N bytes long sting to an integer number in the range of 00 .. X  ?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "edited": false, "score": 1, "creation_date": 1566315129, "post_id": 57574051, "comment_id": 101614250, "body": "Treat the bytes as a base 256 natural number with N digits. Divide by 256**N (max val) to get a rational between 0..1. Multiply by X to get a rational between 0..X. <code>use bignum qw(hex); use Crypt::URandom qw(urandom); my $N = 10; my $X = 10_000; my $bigint = hex unpack &#39;H*&#39;, urandom $N; my $smallrat = $bigint &#47; 256**$N; print $smallrat * $X;</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "edited": false, "score": 0, "creation_date": 1566315190, "post_id": 57574051, "comment_id": 101614292, "body": "@Yuval the &quot;rand weakness&quot; only applies to microsoft windows (actually, not true, but the weakness is considerably less for other built in rand implementations)"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 5, "last_activity_date": 1566305252, "creation_date": 1566305252, "answer_id": 57574051, "question_id": 57573343, "link": "https://stackoverflow.com/questions/57573343/how-to-generate-a-good-seed/57574051#57574051", "title": "How to generate a good seed", "body": "<blockquote>\n  <p>I'm picking random numbers very frequently and my cpu resources are very limited.</p>\n</blockquote>\n\n<p>You're worrying before you even have made a measurement.</p>\n\n<blockquote>\n  <p>Is there any better method to generate a seed for each of the processes?</p>\n</blockquote>\n\n<p><a href=\"https://sockpuppet.org/blog/2014/02/25/safely-generate-random-numbers/\" rel=\"noreferrer\">Yes.</a> You have to leave user space which is prone to manipulation. Simply use <a href=\"http://p3rl.org/Crypt::URandom\" rel=\"noreferrer\">Crypt::URandom</a>.</p>\n\n<ul>\n<li>It is safe for any purpose, including fetching a seed.</li>\n<li>It will use the kernel CSPRNG for each operating system (<a href=\"https://metacpan.org/release/Crypt-URandom/source/lib/Crypt/URandom.pm\" rel=\"noreferrer\">see source code</a>) and hence avoid the problems shown in the article above.</li>\n<li>It does not suffer from the <a href=\"https://www.nu42.com/2010/09/be-vary-of-using-built-in-rng-for.html\" rel=\"noreferrer\">documented <code>rand</code> weakness</a>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1566323025, "creation_date": 1566323025, "answer_id": 57579002, "question_id": 57573343, "link": "https://stackoverflow.com/questions/57573343/how-to-generate-a-good-seed/57579002#57579002", "title": "How to generate a good seed", "body": "<p>Don't generate a seed. Let Perl do it for you. Don't call <code>srand</code> (or call it without a parameter if you do).</p>\n\n<p>Quote <a href=\"https://perldoc.perl.org/functions/srand.html\" rel=\"nofollow noreferrer\"><code>srand</code></a>,</p>\n\n<blockquote>\n  <p>If srand is not called explicitly, it is called implicitly without a parameter at the first use of the rand operator</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>When called with a parameter, srand uses that for the seed; otherwise it (semi-)randomly chooses a seed.</p>\n</blockquote>\n\n<p>It doesn't simply use the time as the seed.</p>\n\n<pre><code>$ perl -M5.014 -E'say for srand, srand'\n2665271449\n1007037147\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1566332169, "creation_date": 1566332169, "answer_id": 57580994, "question_id": 57573343, "link": "https://stackoverflow.com/questions/57573343/how-to-generate-a-good-seed/57580994#57580994", "title": "How to generate a good seed", "body": "<p>Your goal seems to be how to generate <em>random numbers</em> rather than how to generate <em>seeds</em>.  In most cases, just use a cryptographic RNG (such as <code>Crypt::URandom</code> in Perl) to generate the random numbers you want, rather than generate seeds for another RNG.  (In general, cryptographic RNGs take care of seeding and other issues for you.) You should not use a weaker RNG unless&mdash;</p>\n\n<ul>\n<li>the random values you generate aren't involved in information security (e.g., the random values are neither passwords nor nonces nor encryption keys), and</li>\n<li>either&mdash;\n\n<ul>\n<li>you care about repeatable \"randomness\" (which is not the case here), or</li>\n<li>you have measured the performance of your application and find random number generation to be a performance bottleneck.</li>\n</ul></li>\n</ul>\n\n<p>Since you will generate random names for the purpose of querying a database, which may be in a remote location, it will be highly unlikely that the random number generation itself will be the performance bottleneck.</p>\n"}], "owner": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1566332169, "creation_date": 1566302976, "question_id": 57573343, "link": "https://stackoverflow.com/questions/57573343/how-to-generate-a-good-seed", "title": "How to generate a good seed", "body": "<p>I'm looking for a method to generate a good seed for generating different series of random numbers in processes that starts at the same time. \nI would like to avoid using one of the math or crypto libraries because I'm picking random numbers very frequently and my cpu resources are very limited. </p>\n\n<p>I found few example for setting seeds. I tested them using the following method:</p>\n\n<ol>\n<li>short program that picks 100 random numbers out of 5000 options. So each value has 2% chance to be selected. </li>\n<li>run this program 100 times, so in theory, in a truly random environment, all possible values should be picked at least once. </li>\n<li>count the number of values that were not selected at all. </li>\n</ol>\n\n<p>This is the perl code I used. In each test I opt in only one method for generating seed:</p>\n\n<pre><code>#!/usr/bin/perl\n#$seed=5432;\n#$seed=(time ^ $$);\n#$seed=($$ ^ unpack \"%L*\", `ps axww | gzip -f`);\n$seed=(time ^ $$ ^ unpack \"%L*\", `ps axww | gzip -f`);\n\nsrand ($seed);\n\nfor ($i=0 ; $i&lt; 100; $i++) {\n        printf (\"%03d \\n\", rand (5000)+1000);\n}\n\n</code></pre>\n\n<p>I ran the program 100 time and counted the values NOT selected using:</p>\n\n<pre><code># run the program 100 times\nfor i in `seq 0 99`; do /tmp/rand_test.pl ; done  &gt; /tmp/list.txt\n# test 1000 values (out of 5000). It should be good-enough representation.\nfor i in `seq 1000 1999`; do echo -n \"$i  \"; grep -c $i /tmp/list.txt; done   | grep \" 0\" | wc -l\n\n</code></pre>\n\n<p>The table shows the result of the tests (Lower value is better):</p>\n\n<pre><code>count      Seed generation method\n114    default - the line: \"srand ($seed);\" is commented ou\n986    constant seed (5432)\n122    time ^ $$\n125    $$ ^ unpack \"%L*\", `ps axww | gzip -f`\n163    time ^ $$ ^ unpack \"%L*\", `ps axww | gzip -f`\n</code></pre>\n\n<p>The constant seed method showed 986 or 1000 values not selected. In other words, only 1.4% of the possible values were selected. This is close enough to the 2% that was expected. </p>\n\n<p>However, I expected that the last option that was recommended in few places, would be significantly better than the default. </p>\n\n<p>Is there any better method to generate a seed for each of the processes?</p>\n"}, {"tags": ["perl", "image-processing", "imagemagick", "affinetransform", "perlmagick"], "comments": [{"owner": {"reputation": 27158, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1566319435, "post_id": 57571226, "comment_id": 101616406, "body": "What is the question? Do you want the background to be transparent? In place of setting the virtual-pixel to transparent, set the background color to transparent."}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 27158, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1566361061, "post_id": 57571226, "comment_id": 101627076, "body": "Yes I want the background to be transparent, but the Shear method doesnt accept the virtual-pixel argument"}, {"owner": {"reputation": 27158, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1566361183, "post_id": 57571226, "comment_id": 101627099, "body": "Try setting the background color not the virtual-pixel to transparent."}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 27158, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1566462654, "post_id": 57571226, "comment_id": 101666287, "body": "Shear method doesnt accept the virtual-pixel argument, <i>Shear\tgeometry=&gt;geometry, x=&gt;double, y=&gt;double fill=&gt;color name</i>"}, {"owner": {"reputation": 27158, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1566488652, "post_id": 57571226, "comment_id": 101681002, "body": "As I keep saying, the virtual pixel setting has no affect in shear. It is the background color that needs to be set. Use the color name argument or set the background color attribute before calling shear."}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 27158, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1566547836, "post_id": 57571226, "comment_id": 101698371, "body": "@fmw42 as I mentioned in my previous comment, there is no background parameter, but if I pass the available fill parameter as <i>fill =&gt; &#39;transparent&#39;</i> the background becomes black. I have solved the problem by creating a mask."}], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": 2, "last_activity_date": 1566465901, "creation_date": 1566465901, "answer_id": 57606084, "question_id": 57571226, "link": "https://stackoverflow.com/questions/57571226/shear-image-composite-on-another-image-using-perlmagick/57606084#57606084", "title": "Shear image, composite on another image, using PerlMagick", "body": "<p>I solved it by creating a mask ( by inverting alpha channel ). Here's the code, hope this helps someone:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Image::Magick;\n\nmy $im = Image::Magick-&gt;new;\n\n$im-&gt;Read('cake.jpg');\n\n$im-&gt;Scale('50%');\n\nmy $sh = Image::Magick-&gt;new;\n\n$im-&gt;Set( magick =&gt; 'png' );\n$sh-&gt;Set( magick =&gt; 'png' );\n\n$sh-&gt;Read('oo.jpg');\n$sh-&gt;Scale('50%');\n\n## create a copy\nmy $sh1 = $sh-&gt;Clone();\n\n## set alpha\n$sh-&gt;Set('alpha' =&gt; 'Transparent');\n\n## shear first\nmy $x = $sh-&gt;Shear( geometry =&gt; '290x270+0+0', x =&gt; -40, y =&gt; -30, fill =&gt; undef);\n\n## invert to get a mask\n$sh-&gt;Negate(channel =&gt; 'Alpha');\n\n## shear copy\n$x = $sh1-&gt;Shear( geometry =&gt; '290x270+0+0', x =&gt; -40, y =&gt; -30);\n\n## apply mask\n$sh1-&gt;Composite( compose =&gt; 'CopyOpacity', image =&gt; $sh);\n\n$im-&gt;Composite( image =&gt; $sh1, geometry =&gt; '+450+260', );\n\n$im-&gt;Write('test.jpg');\n</code></pre>\n\n<p>Final image:\n<a href=\"https://i.stack.imgur.com/tYgd7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tYgd7.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566465901, "creation_date": 1566295469, "question_id": 57571226, "link": "https://stackoverflow.com/questions/57571226/shear-image-composite-on-another-image-using-perlmagick", "title": "Shear image, composite on another image, using PerlMagick", "body": "<p>I am trying to shear an image and place on another image, like a photo on a cake, I am working in Perl and using Image::Magick Perl library.<a href=\"https://i.stack.imgur.com/KgNy4.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KgNy4.jpg\" alt=\"enter image description here\"></a> Here is the output I am able to generate, I am unable to make the background of the sheared image. Here's my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Image::Magick;\n\nmy $im = Image::Magick-&gt;new;\n\n$im-&gt;Read('cake.jpg');\n\n$im-&gt;Scale('50%');\n\nmy $sh = Image::Magick-&gt;new;\n\n$sh-&gt;Set( magick =&gt; 'png' );\n\n$sh-&gt;Read('oo.jpg');\n\n$sh-&gt;Resize(width =&gt; 580, height =&gt; 540);\n\n$sh-&gt;Shear( geometry =&gt; '580x540+0+0', x =&gt; -40, y =&gt; -30, 'virtual-pixel' =&gt; 'Transparent');\n\n$im-&gt;Composite( image =&gt; $sh, geometry =&gt; '+90+60');\n\n$im-&gt;Write('test.jpg');\n</code></pre>\n\n<p>Also, I have seen some posts using AffineTransform, but using those I am unable to achieve the shear.</p>\n"}, {"tags": ["arrays", "loops", "perl", "hash"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 6, "creation_date": 1566295409, "post_id": 57571160, "comment_id": 101602913, "body": "<code>use strict;</code> would have told you that the variable <code>$link</code> is never defined. From your code I&#39;m guessing you wanted to bind each element of <code>@array</code> to <code>$link</code> in turn, so try with  <code>for my $link (@array) { ... }</code> instead"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1566295600, "post_id": 57571160, "comment_id": 101603003, "body": "Unrelated: <code>$count++ + 1</code> is equivalent to <code>++$count</code>."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1566484715, "post_id": 57571160, "comment_id": 101678849, "body": "so $link is undefined, which in context of requiring a string as a key in the hashref, perl interprets as empty string. Therefore, on each iteration of the loop, it stores the current value in the hashref at key <code>&#39;&#39;</code>. Because it&#39;s quite likely that this is unintentional, perl also emits a warning that it has done that.  You&#39;ll end up with a hashref with one key (<code>&#39;&#39;</code>) and the latest value put there."}], "answers": [{"tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 2, "last_activity_date": 1566768502, "creation_date": 1566768502, "answer_id": 57649851, "question_id": 57571160, "link": "https://stackoverflow.com/questions/57571160/a-simple-hashing-array-loop-i-get-error-warnings-even-though-it-works-why-is-t/57649851#57649851", "title": "A simple hashing-array-loop, I get error warnings even though it works, why is that?", "body": "<p>It happens because you never assigned a value to $link so it's default value is undef.  Trying to use undef as a hash key generates a warning message because it's invalid.</p>\n\n<p>Read perldata <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perldata.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566771810, "post_id": 57650122, "comment_id": 101750785, "body": "Alternative explanation: <code>$string{$link}</code> was supposed to be <code>$link{$string}</code>, which would fit with the loop variable being <code>$string</code>."}, {"owner": {"reputation": 1694, "user_id": 599390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8440941c5a54f93db73dcb10c809ed6b?s=128&d=identicon&r=PG", "display_name": "htaccess", "link": "https://stackoverflow.com/users/599390/htaccess"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566772114, "post_id": 57650122, "comment_id": 101750838, "body": "True, but I think using descriptive names like <code>%count_for</code> and <code>$letter</code> is the real solution :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566772167, "post_id": 57650122, "comment_id": 101750850, "body": "Descriptive, but misleading, since <code>%count_for</code> doesn&#39;t really store word counts. In fact, the code as given doesn&#39;t need a hash at all."}, {"owner": {"reputation": 1694, "user_id": 599390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8440941c5a54f93db73dcb10c809ed6b?s=128&d=identicon&r=PG", "display_name": "htaccess", "link": "https://stackoverflow.com/users/599390/htaccess"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566772689, "post_id": 57650122, "comment_id": 101750925, "body": "Yea well I don&#39;t really get the intent of what the op is doing here. We could obviously play golf and reduce this to almost nothing. All I know is he is storing a number in association with a letter of the alphabet, so perhaps <code>%position_in_alphabet</code> and <code>$index</code> ... The point is to use best practices around variable and hash names such that the names make the intent clear."}, {"owner": {"reputation": 1694, "user_id": 599390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8440941c5a54f93db73dcb10c809ed6b?s=128&d=identicon&r=PG", "display_name": "htaccess", "link": "https://stackoverflow.com/users/599390/htaccess"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566772916, "post_id": 57650122, "comment_id": 101750957, "body": "But yea I think I will change it to your suggestion, its probably more like what was intended."}], "tags": [], "owner": {"reputation": 1694, "user_id": 599390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8440941c5a54f93db73dcb10c809ed6b?s=128&d=identicon&r=PG", "display_name": "htaccess", "link": "https://stackoverflow.com/users/599390/htaccess"}, "is_accepted": false, "score": 2, "last_activity_date": 1566772972, "last_edit_date": 1566772972, "creation_date": 1566771689, "answer_id": 57650122, "question_id": 57571160, "link": "https://stackoverflow.com/questions/57571160/a-simple-hashing-array-loop-i-get-error-warnings-even-though-it-works-why-is-t/57650122#57650122", "title": "A simple hashing-array-loop, I get error warnings even though it works, why is that?", "body": "<p>As noted in the other answers <code>$link</code> is undeclared and you should <code>use strict;</code> which would tell you this:</p>\n\n<pre><code>Global symbol \"$link\" requires explicit package name (did you forget to declare \"my $link\"?)\n</code></pre>\n\n<p>The following snippet is probably something like what you were after:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @array = qw(a b c d e);\n\nmy $count = 0;\n\nmy %link;\n\nforeach my $string (@array) {\n    $count++;\n    $link{$string} = $count;\n    print \"$string\\n\";\n    print \"$link{$string}\\n\";\n}\n</code></pre>\n\n<p>Although you should probably rename your hash and iteration variable to something that better reflects your intent, like for example using <code>%count_for</code> and <code>$letter</code> if you were doing letter counts.</p>\n"}], "owner": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1566772972, "creation_date": 1566295216, "last_edit_date": 1566769441, "question_id": 57571160, "link": "https://stackoverflow.com/questions/57571160/a-simple-hashing-array-loop-i-get-error-warnings-even-though-it-works-why-is-t", "title": "A simple hashing-array-loop, I get error warnings even though it works, why is that?", "body": "<p>I have prepared a short loop that looks like this: </p>\n\n<pre><code>@array = (\"a\", \"b\", \"c\", \"d\", \"e\");\n$count=0;\nprint \"@array\\n\";\nforeach $string(@array){\n    $number=$count++ +1 ;\n    $string{$link} = $number;\n    print \"$string\\n$string{$link}\\n\";\n}\n</code></pre>\n\n<p>It should come out as </p>\n\n<pre><code>a\n1\nb\n2\n</code></pre>\n\n<p>...\nand so on.\nIt works but when I print it out on the terminal, I get warning messages: </p>\n\n<pre><code>Use of uninitialized value $link in hash element at ./hashing_an_array.pl line 11.\nUse of uninitialized value $link in hash element at ./hashing_an_array.pl line 12.\na\n1\nUse of uninitialized value $link in hash element at ./hashing_an_array.pl line 11.\nUse of uninitialized value $link in hash element at ./hashing_an_array.pl line 12.\nb\n2\n\n...\n</code></pre>\n\n<p>etc</p>\n\n<p>Why do I get these messages? I just wanted to know so that even though it works, I am sure I know what I am doing.</p>\n"}, {"tags": ["mysql", "perl", "dbi"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1566288904, "post_id": 57566149, "comment_id": 101599320, "body": "Previous posts in this problem series: <a href=\"https://stackoverflow.com/q/57351361\">stackoverflow.com/q/57351361</a> <a href=\"https://stackoverflow.com/q/57470682\">stackoverflow.com/q/57470682</a> Normally I wouldn&#39;t point them out because they are evident from the account history, but here&#39;s an account switch involved. If you wish to, the accounts can be merged: <a href=\"https://stackoverflow.com/help/merging-accounts\">stackoverflow.com/help/merging-accounts</a>"}, {"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1566289246, "post_id": 57566149, "comment_id": 101599488, "body": "thats reading :U im asking how do i move the files &quot;after&quot; the script has done inserted into MySQL ..."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566292843, "post_id": 57569501, "comment_id": 101601405, "body": "i tried it but it only move 1 file at a time per execution"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1566289412, "creation_date": 1566289412, "answer_id": 57569501, "question_id": 57566149, "link": "https://stackoverflow.com/questions/57566149/how-to-create-a-loop-to-send-the-finished-files-into-a-diffrent-directory-close/57569501#57569501", "title": "How to create a loop to send the finished files into a diffrent directory (CLOSED)", "body": "<p>See <a href=\"http://p3rl.org/File::Copy#move\" rel=\"nofollow noreferrer\"><code>move</code> in File::Copy</a>.</p>\n\n<pre><code>use File::Copy qw(move);\n\u22ee\nmove($entry, $DONE_directory) or\n    warn \"Could not move file '$entry' into '$DONE_directory': $!\";\n</code></pre>\n\n<p>You could also choose to abort the program right away when moving fails, simply replace <a href=\"http://p3rl.org/warn\" rel=\"nofollow noreferrer\"><code>warn</code></a> with <a href=\"http://p3rl.org/die\" rel=\"nofollow noreferrer\"><code>die</code></a>.</p>\n\n<p>The loop is the <code>while</code> loop as shown in <a href=\"https://stackoverflow.com/a/57356096/46395\">https://stackoverflow.com/a/57356096/46395</a></p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566292422, "post_id": 57570102, "comment_id": 101601172, "body": "my bad Q_Q  i feel like thats the important in the script sorry again ... i used &quot;move&quot; but  it only move 1 file per execution .."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566292896, "post_id": 57570102, "comment_id": 101601446, "body": "@MiteMiteKyle: <i>it only move 1 file per execution</i> Yes, that&#39;s how it works. But why is that a problem? Just move each individual file after you&#39;ve finished with it."}, {"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566293065, "post_id": 57570102, "comment_id": 101601544, "body": "but my lecturer wants it to execute only once until all files are inside Done directory"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1566291532, "creation_date": 1566291532, "answer_id": 57570102, "question_id": 57566149, "link": "https://stackoverflow.com/questions/57566149/how-to-create-a-loop-to-send-the-finished-files-into-a-diffrent-directory-close/57570102#57570102", "title": "How to create a loop to send the finished files into a diffrent directory (CLOSED)", "body": "<blockquote>\n  <p>I just show the important line</p>\n</blockquote>\n\n<p>Actually, I think you've shown us the unimportant lines. You've shown us the bits that you know how to do, not the bits that you're having trouble with.</p>\n\n<blockquote>\n  <p>the problem i having now is how do i create a script to send the completed (the one that has already successfully insert data into the table ) file to a directory.</p>\n</blockquote>\n\n<p>You don't show us any of the code that deals with files. I assume that you're opening a file and using its contents to populate the <code>$dataRef</code> variable. Once you have finished processing that data, you can simply use <a href=\"https://perldoc.pl/File::Copy#move\" rel=\"nofollow noreferrer\">the <code>move()</code> function from File::Copy</a> to move your file.</p>\n"}], "owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1566356179, "creation_date": 1566269741, "last_edit_date": 1566356179, "question_id": 57566149, "link": "https://stackoverflow.com/questions/57566149/how-to-create-a-loop-to-send-the-finished-files-into-a-diffrent-directory-close", "title": "How to create a loop to send the finished files into a diffrent directory (CLOSED)", "body": "<p>So I have create a script where it will execute an insert statement into table \"Top\" for each file . so the problem i having now is how do i create a script to send the completed (the one that has already successfully insert data into the table ) file to a directory.</p>\n\n<p>I just show the important line :U</p>\n\n<p>Im still new so please bear with my stupidity Q_Q</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse DBI;    \nuse strict;\nuse autodie;\nuse Data::Dumper;\n\n\nour $DIR=\"/home/aimanhalim/LOG\";\nour $FILENAME_REGEX = \"server_performance_\";\n# mariaDB config hash\nour %db_config = ( \"username\"=&gt;\"root\", \"password\"=&gt; \"\", \"db\"=&gt;\"Top_Data\", \"ip\" =&gt; \"127.0.0.1\", \"port\" =&gt; \"3306\");\nmain();\n\nexit;\n\n..............................................................................\n my ($result) = insert_record($dataRef,\\%db_config);\n\n      #\n      # close file\n      close($file_hndlr);\n      #\n      # move file to DONE dir\n      #\n      # continue until file completed\n      last;\n   }\n\n..............................................................................\n\nsub insert_record(){\n\n my($data,$db_config)=@_;\n my $result = -1; # -1 fail;  0 - succ\n\n  # connect to db\n  # connect to MySQL database\n  my $dsn = \"DBI:mysql:database=\".$db_config-&gt;{'db'}.\";host=\".$db_config-&gt;{'ip'}.\";port=\".$db_config-&gt;{'port'};\nmy $username = $db_config-&gt;{'username'};\nmy $password = $db_config-&gt;{'password'};\n\nmy %attr = (PrintError=&gt;0,RaiseError=&gt;1 );\nmy $dbh = DBI-&gt;connect($dsn,$username,$password,\\%attr) or die $DBI::errstr;\n\nprint \"We Have Successfully Connected To The Database \\n\";\n\n..............................................................................\n\n  # execute insert\n  my $sql = 'insert into Top(Load_Average, CPU_User, CPU_ID, CPU_System, CPU_Waiting, Memory_Total, Memory_Used, Swap_Total, Swap_Available) values(?,?,?,?,?,?,?,?,?)';\n\n  my @param_bind = (); \n\n  my $stmt =$dbh-&gt;prepare($sql) or die \"Its A Fail\" . $dbh-&gt;errstr();\n  $param_bind[0] = $data-&gt;{'Average_Load'}-&gt;{'List_1'};\n  $param_bind[1] = $data-&gt;{'Cpu_List'}-&gt;{'User'};\n  $param_bind[2] = $data-&gt;{'Cpu_List'}-&gt;{'ID'};\n  $param_bind[3] = $data-&gt;{'Cpu_List'}-&gt;{'System'};\n  $param_bind[4] = $data-&gt;{'Cpu_List'}-&gt;{'Waiting'};\n  $param_bind[5] = $data-&gt;{'Memory_List'}-&gt;{'Total'};\n  $param_bind[6] = $data-&gt;{'Memory_List'}-&gt;{'Used'};\n  $param_bind[7] = $data-&gt;{'Swap_List'}-&gt;{'Total'};\n  $param_bind[8] = $data-&gt;{'Swap_List'}-&gt;{'Available'};\n  $stmt-&gt;execute(@param_bind);\n\n  $stmt-&gt;finish();\n    print \"The Data Has Been Inserted Successfully\\n\";\n  $result = 0;\n  return($result);\n\n\n  # commit\n  $dbh-&gt;commit();\n  # return succ / if fail rollback and return fail\n  $dbh-&gt;disconnect();\n\n\n}\n\n\n\nexit;\n</code></pre>\n"}, {"tags": ["sql", "sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 41, "user_id": 11396791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KENkyzQERjM/AAAAAAAAAAI/AAAAAAAAABU/uBIBvH8fvqU/photo.jpg?sz=128", "display_name": "Abhijeet Khandelwal", "link": "https://stackoverflow.com/users/11396791/abhijeet-khandelwal"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1566245028, "post_id": 57562923, "comment_id": 101588157, "body": "Still getting, invalid string attribute."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1566245195, "post_id": 57562923, "comment_id": 101588213, "body": "Do you have a literal newline and + in the DSN string your real code or is that just some strange copy &amp; paste error?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566245234, "post_id": 57562923, "comment_id": 101588230, "body": "And what is the exact error message you&#39;re getting?"}, {"owner": {"reputation": 41, "user_id": 11396791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KENkyzQERjM/AAAAAAAAAAI/AAAAAAAAABU/uBIBvH8fvqU/photo.jpg?sz=128", "display_name": "Abhijeet Khandelwal", "link": "https://stackoverflow.com/users/11396791/abhijeet-khandelwal"}, "edited": false, "score": 0, "creation_date": 1566246356, "post_id": 57562923, "comment_id": 101588662, "body": "failed: [Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not exist or access denied.  [Microsoft][ODBC SQL Server Driver][DBNETLIB]ConnectionOpen (Connect()). (SQL-01000) [state was 01000 now 01S00] [Microsoft][ODBC SQL Server Driver]Invalid connection string attribute (SQL-01S00) at perl.pl line 16. Couldn&#39;t open database +: [Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not exist or access denied. (SQL-08001) [state was 08001 now 01000] Invalid connection string attribute (SQL-01S00)"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566247328, "post_id": 57562923, "comment_id": 101589020, "body": "That should go in your post, not a comment, so it has a chance of being readable. You should also include the value of the DSN string as it&#39;s being passed to <code>DBI-&gt;connect()</code>."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1566250566, "post_id": 57562923, "comment_id": 101590006, "body": "<code>00.120.124.1</code> is not a valid IP address, and hence, likely isn&#39;t a valid hostname either."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566251088, "post_id": 57562923, "comment_id": 101590153, "body": "Ooo. If arguments are separated by semicolons, that port number might be being treated as one, and without a name causing an error?"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1566251591, "creation_date": 1566251591, "answer_id": 57564361, "question_id": 57562923, "link": "https://stackoverflow.com/questions/57562923/connecting-to-sql-server-using-perl-using-dbi/57564361#57564361", "title": "Connecting to SQL Server using Perl using DBI?", "body": "<p>The lines of your post that begin with <code>+</code></p>\n\n<pre><code>+tabase=$database_name;uid=$database_user;pwd=$database_pass;'; \n\n+: $DBI::errstr\\n\";\n</code></pre>\n\n<p>were incorrectly copied and pasted from perlmonks.org. The leading <code>+</code> sign is a convention that indicates a long line was split. You should delete the <code>+</code> and join the line to the previous line, so that your code will read</p>\n\n<pre><code>my $DSN = 'driver={SQL Server};server=$server_name;database=$database_name;uid=$database_user;pwd=$database_pass;'; \nmy $dbh = DBI-&gt;connect(\"DBI:ODBC:$DSN\") || die \"Couldn't open database: $DBI::errstr\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1566290997, "creation_date": 1566290997, "answer_id": 57569941, "question_id": 57562923, "link": "https://stackoverflow.com/questions/57562923/connecting-to-sql-server-using-perl-using-dbi/57569941#57569941", "title": "Connecting to SQL Server using Perl using DBI?", "body": "<p>Your error message contains the following:</p>\n\n<blockquote>\n  <p>SQL Server does not exist or access denied</p>\n</blockquote>\n\n<p>Your set-up code contains the following:</p>\n\n<blockquote>\n<pre><code>my $server_name = '00.120.124.1;3181';\n</code></pre>\n</blockquote>\n\n<p>'00.120.124.1;3181' is not a valid server name or IP address. You should correct the IP address section (it can't start with '00') and remove the port into a separate parameter.</p>\n\n<p>You also have the username and password as part of your DSN. I don't know if DBD::ODBC supports that usage (it's not mentioned in <a href=\"https://metacpan.org/pod/DBD::ODBC\" rel=\"nofollow noreferrer\">the documentation</a>) but it's more traditional to have those as separate parameters to the <code>connect()</code> call.</p>\n\n<p>All in all, I think you want something more like this:</p>\n\n<pre><code>my $server_name = '00.120.124.1'; # But this needs to be corrected\nmy $server_port = 3181;\n\nmy $database_name = 'abcd';\nmy $database_user = 'kkkk';\nmy $database_pass = 'password';\n\nmy $DSN = \"driver={SQL Server};server=$server_name;port=$server_port;database=$database_name\"; \n\nmy $dbh = DBI-&gt;connect(\"DBI:ODBC:$DSN\", $database_user, $database_pass)\n  || die \"Couldn't open database: $DBI::errstr\\n\";\n</code></pre>\n\n<p>Also note that I've changed the quote characters used to create your <code>$DSN</code> variable from single quotes to double quotes. Variables are not expanded in signel quotes, so you weren't getting the values of <code>$server_name</code>, etc. in your DSN.</p>\n"}, {"tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 0, "last_activity_date": 1566772593, "creation_date": 1566772593, "answer_id": 57650201, "question_id": 57562923, "link": "https://stackoverflow.com/questions/57562923/connecting-to-sql-server-using-perl-using-dbi/57650201#57650201", "title": "Connecting to SQL Server using Perl using DBI?", "body": "<p>The better way to connect is with the DBD::Sybase module.  The name wouldn't suggest it but SQL Server takes its lineage from Sybase.  That way you can avoid ODBC. <a href=\"http://metacpan.org/pod/DBD::Sybase#Using-DBD::Sybase-with-MS-SQL\" rel=\"nofollow noreferrer\">http://metacpan.org/pod/DBD::Sybase#Using-DBD::Sybase-with-MS-SQL</a></p>\n"}], "owner": {"reputation": 41, "user_id": 11396791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KENkyzQERjM/AAAAAAAAAAI/AAAAAAAAABU/uBIBvH8fvqU/photo.jpg?sz=128", "display_name": "Abhijeet Khandelwal", "link": "https://stackoverflow.com/users/11396791/abhijeet-khandelwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1566772593, "creation_date": 1566243346, "last_edit_date": 1566291023, "question_id": 57562923, "link": "https://stackoverflow.com/questions/57562923/connecting-to-sql-server-using-perl-using-dbi", "title": "Connecting to SQL Server using Perl using DBI?", "body": "<p>I am trying to connect to SQL server using Perl DBI module, I have tried all the connection string format still Perl is throwing invalid connection string error.</p>\n\n<p>I have already tried code snippet available on perl monk website.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse DBI;\n\n# Set up variables for the connection\nmy $server_name = '00.120.124.1;3181';\n\nmy $database_name = 'abcd';\nmy $database_user = 'kkkk';\nmy $database_pass = 'password';\n\nmy $DSN = 'driver={SQL Server};server=$server_name;da\n+tabase=$database_name;uid=$database_user;pwd=$database_pass;'; \nmy $dbh = DBI-&gt;connect(\"DBI:ODBC:$DSN\") || die \"Couldn't open database\n+: $DBI::errstr\\n\";\n</code></pre>\n\n<p>Expected result is to connect to Database.</p>\n\n<p>failed: [Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not exist or access denied. [Microsoft][ODBC SQL Server Driver][DBNETLIB]ConnectionOpen (Connect()). (SQL-01000) [state was 01000 now 01S00] [Microsoft][ODBC SQL Server Driver]Invalid connection string attribute (SQL-01S00) at perl.pl line 16. Couldn't open database +: [Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not exist or access denied. (SQL-08001) [state was 08001 now 01000] Invalid connection string attribute (SQL-01S00)</p>\n"}, {"tags": ["perl", "ssh"], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1566232705, "post_id": 57559936, "comment_id": 101583235, "body": "If I use the above mentioned condition I am not getting any values in <code>$login_output</code> variable. Because I have made <code>no_terminal =&gt; 1,</code> while creating <code>$ssh</code> object. Since I don&#39;t want anything to be printed in my output window (<a href=\"https://stackoverflow.com/questions/57511768\">stackoverflow.com/questions/57511768</a>). If I make it <code>no_terminal =&gt; 0,</code> I am getting the values on <code>$login_output</code>. But the previous question which I asked will not satisfy."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1566229148, "creation_date": 1566229148, "answer_id": 57559936, "question_id": 57559175, "link": "https://stackoverflow.com/questions/57559175/connecting-to-server-using-netsshexpect-status/57559936#57559936", "title": "Connecting to server using Net::SSH::Expect status", "body": "<p>If you look at the source code for <a href=\"https://metacpan.org/release/Net-SSH-Expect/source/lib/Net/SSH/Expect.pm#L25\" rel=\"nofollow noreferrer\"><code>Net::SSH::Expect::new()</code></a>, you'll see that it doesn't actually create a connection. It simply creates an object with all of the relevant attributes so that it can make the connection in the future when required.</p>\n\n<p>The actual connection is made when the <code>login()</code> method is called. And the documentation contains an example of how to check that has been successful.</p>\n\n<pre><code># 2) logon to the SSH server using those credentials.\n# test the login output to make sure we had success\nmy $login_output = $ssh-&gt;login();\nif ($login_output !~ /Welcome/) {\n    die \"Login has failed. Login output was $login_output\";\n}\n</code></pre>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566229148, "creation_date": 1566226304, "question_id": 57559175, "link": "https://stackoverflow.com/questions/57559175/connecting-to-server-using-netsshexpect-status", "title": "Connecting to server using Net::SSH::Expect status", "body": "<p>Using Net::SSH::Expect Perl module I want to connect to the server.</p>\n\n<p>Below is my code</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse Net::SSH::Expect;\n\nmy $ssh = Net::SSH::Expect-&gt;new (\n    host =&gt; 'hostip', #deb-2-scripting ip\n    user =&gt; 'user',\n    password =&gt; 'password',\n    raw_pty =&gt; 1\n);\n\n..\n..\n..\n$ssh-&gt;close();\n</code></pre>\n\n<p>Once I create a $ssh object, I wanted to check whether the connection to SSH is Success or not. </p>\n\n<p>How to achieve this? Do we have any method in Net::SSH::Expect which will return a Boolean value if connection is Success or failure.</p>\n"}, {"tags": ["perl", "substitution"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9965744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bDUw.png?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9965744/steven"}, "edited": false, "score": 1, "creation_date": 1566200712, "post_id": 57552010, "comment_id": 101567008, "body": "Thanks a lot!Before,I use while loop,have no idea."}], "tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": true, "score": 6, "last_activity_date": 1566199304, "last_edit_date": 1566199304, "creation_date": 1566198968, "answer_id": 57552010, "question_id": 57551890, "link": "https://stackoverflow.com/questions/57551890/substitute-the-even-couple-of/57552010#57552010", "title": "substitute the even couple of &lt;&gt;", "body": "<p>This should work for you, replacing alternate &lt;<em>alphabet</em>></p>\n\n<pre><code>my $str = '&lt;a&gt;&lt;b&gt;&lt;c&gt;&lt;d&gt;&lt;e&gt;';\n\n$str =~ s/(&lt;[a-z]&gt;)&lt;([a-z])&gt;/$1$2/g;\n</code></pre>\n\n<p>Command line:</p>\n\n<pre><code>echo '&lt;a&gt;&lt;b&gt;&lt;c&gt;&lt;d&gt;&lt;e&gt;'|perl -pe 's/(&lt;[a-z]&gt;)&lt;([a-z])&gt;/$1$2/g'\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9965744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4bDUw.png?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/9965744/steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 57552010, "answer_count": 1, "score": 0, "last_activity_date": 1566224493, "creation_date": 1566198393, "last_edit_date": 1566199197, "question_id": 57551890, "link": "https://stackoverflow.com/questions/57551890/substitute-the-even-couple-of", "title": "substitute the even couple of &lt;&gt;", "body": "<pre><code>&lt;a&gt;&lt;b&gt;&lt;c&gt;&lt;d&gt;&lt;e&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;a&gt;b&lt;c&gt;d&lt;e&gt;\n</code></pre>\n\n<p>Any idea?</p>\n\n<p>I want to use perl substitute, but it's not correct.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>echo '&lt;a&gt;&lt;b&gt;&lt;c&gt;&lt;d&gt;&lt;e&gt;'|perl -pe's#&lt;|&gt;#$x+=3;$y+=4;(++$n==$x or ++$n==$y)?$&amp;:\"*\":'\n</code></pre>\n"}, {"tags": ["mysql", "perl", "dbi"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1566189245, "post_id": 57550410, "comment_id": 101563467, "body": "Passing arguments to your functions (And using the returned values) is going to be more reliable and less error-prone than relying on global variables... And of course if you&#39;re not already doing so, make sure to <code>use strict; use warnings;</code> to help discover potential issues earlier."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566189490, "post_id": 57550410, "comment_id": 101563517, "body": "You should also be binding values to parameters in your query instead of directly including variables like <code>$col1</code> in a query string, to help with sql injection issues."}, {"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566190819, "post_id": 57550410, "comment_id": 101563760, "body": "@Shawn. Yes, I am passing arguments and using strict. My example attempts to cut to the problem rather than ask you, or anybody, to read reams of irrelevant code. That said, I&#39;m not sure what you mean by &quot;binding values to parameters&quot;. However, I can assure you I do a lot of error checking and input validation."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566192335, "post_id": 57550410, "comment_id": 101564098, "body": "The code you posted doesn&#39;t do any of that; it&#39;s hard to debug when we can&#39;t even see what you&#39;re really doing. And just search for &#39;sql injection&#39; and read the DBI documentation to learn how to use parameters in sql queries."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1566193826, "post_id": 57550410, "comment_id": 101564444, "body": "From the code you posted, it seems most likely that sub Do_SQL is in the scope of a different $SQL variable than the one you are setting.  You should be passing that to the sub.  And of that&#39;s what you are doing, you need to show us that code."}, {"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566193885, "post_id": 57550410, "comment_id": 101564452, "body": "@Shawn. Actually, you did remarkably well. After responding to you a few moments ago, I went back to re-trace program flow and discovered that while I had used strict and declared variables locally I had also relied on the same variable name in the script and in my authentication/connect file. This is posted above. But because of the same name I had taken it for granted the same value was being used in the function, when in fact it was not. Once I discovered this, I changed up the name which forced a new declaration. With that done, the empty query hurdle was overcome."}, {"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "edited": false, "score": 0, "creation_date": 1566193969, "post_id": 57550410, "comment_id": 101564480, "body": "We posted at very nearly the same time, but yes you pegged it. Proof once again we should never stray from discipline and good coding practice. I still have a few wrinkles to work out but nothing catastrophic. So, a well done to you and grateful appreciation from me."}, {"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "edited": false, "score": 0, "creation_date": 1566194124, "post_id": 57550410, "comment_id": 101564522, "body": "Again, well spotted!  And to round this out. A quick search and I found a decent page on sql injection on w3schools. Yes, I&#39;ve seen that sort of thing in action and I try to be on my toes with it. As for DBI, I have O&#39;Reilly&#39;s Programming the Perl DBI. It probably wouldn&#39;t hurt to browse it again for a refresher.  Thank you."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1566199158, "post_id": 57550410, "comment_id": 101566350, "body": "Don&#39;t call subroutines as <code>&amp;name_of_sub</code> This passes the existing contents of <code>@_</code> into the subroutine. It&#39;s best practice to not use <code>&amp;</code> at all when calling a subroutine."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1566209875, "post_id": 57550410, "comment_id": 101571261, "body": "@JGNI, pedantically, <code>&amp;my_connect</code> would pass <code>@_</code> into the subroutine, <code>&amp;my_connect()</code> doesn&#39;t. But, yes, calling a subroutine using <code>&amp;</code> is never necessary and is usually an indication of someone copying old code without understanding it."}, {"owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1566219426, "post_id": 57550410, "comment_id": 101576258, "body": "@Dave Cross &amp; JGNI, thanks to you both for pointing up things I was unaware of. Dave, copying code? - no. Everything I&#39;ve done has been from scratch and I&#39;ve tried to learn as I go. But I make no claim to expertise and it&#39;s been a long while since I&#39;ve done any of this. Mistakes are bound to find their way in, through inexperience and through trial and especially error. But tightening up the strictures is a personal goal. Missing the scope was careless and this post was a nice wake up call. So, thanks again."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1566221572, "post_id": 57550410, "comment_id": 101577511, "body": "@Bobby: Sorry, yes, it&#39;s not always copying old code. Sometimes it&#39;s caused by learning from old web sites or books. And, actually, I think it&#39;s still (disappointingly) in <i>Learning Perl</i>. You might find <a href=\"https://perlhacks.com/2015/04/subroutines-and-ampersands/\" rel=\"nofollow noreferrer\">this blog post</a> interesting."}], "owner": {"reputation": 67, "user_id": 11944566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fecb41a19f3e2eca63a86d8f34f83?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11944566/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "closed_date": 1566241308, "answer_count": 0, "score": 2, "last_activity_date": 1566188120, "creation_date": 1566188120, "question_id": 57550410, "link": "https://stackoverflow.com/questions/57550410/dbdmysqlst-execute-failed-query-was-empty", "closed_reason": "Not suitable for this site", "title": "DBD::mysql::st execute failed: Query was empty", "body": "<p>First post. Please bear with me if formatting isn't one-hundred per-cent. Thanks.</p>\n\n<p>I'm in the process of migrating from an older centos server to one with a more up-to-date Debian 9 operating system and I've run into several program incompatibilities... but it hasn't been all bad. I have the full LAMP stack working and \"several databases and their pages\" up and running just fine. Unfortunately, I've run into a snag. I'll walk through it...</p>\n\n<p>In my www-accessible perl script, I don't include login details in a publically accessible location. I initiate MySQL like so...</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use DBI ;\nrequire \"connect.cgi\" ;\n&amp;my_connect();\n</code></pre>\n\n<p>In the connection file, I have like this...</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub my_connect {\n  $dsn = \"DBI:mysql:dbmydatabase:localhost\" ;\n  $user_name = 'uMyUser';\n  $user_pass = 'pMyPassword';\n  $dbh = DBI-&gt;connect($dsn, $user_name, $user_pass, { RaiseError =&gt; 1} ) ;\n  return $dbh;\n}\n</code></pre>\n\n<p>So far, so good. I've checked the connection like so...</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if(!$dbh){\n  die \"failed to connect to MySQL database DBI-&gt;errstr()\";\n}else{\n  print(\"Connected to MySQL server successfully.\\n\");\n}\n</code></pre>\n\n<p>... and all appears fine and dandy.</p>\n\n<p>I also call for execution from the connection file, like so...</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>sub Do_SQL {\n  $sth = $dbh-&gt;prepare($SQL);\n  $rv = $sth-&gt;execute;\n  return $sth;\n}\n</code></pre>\n\n<p>And for the task -- I want to check for the existence of a record in a database. So I set it up and run it...</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>$SQL = qq/ SELECT EXISTS(SELECT 1 FROM `table1` WHERE `col1` = '$col1') /;\n\n&amp;Do_SQL;\n</code></pre>\n\n<p>Trouble is, I'm getting an empty query message.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>DBD::mysql::st execute failed: Query was empty at connect.cgi line 54.\n</code></pre>\n\n<p>I have tried a few variations on the query. For example...</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>$SQL = qq/ SELECT count(*) FROM `table1` WHERE `col1` = '$col1') /;\n$SQL = qq/ SELECT `id` FROM `table1` WHERE `col1` = '$col1') /;\n$SQL = qq/ SELECT * FROM `table1`  /;\n</code></pre>\n\n<p>... but the result is the same.</p>\n\n<p>I might be tempted to suggest there is some sort of version incompatibility between old and new set up but I have several other pages with similar configuration working fine. A difference might be that the stuff I have working was backed up and restored from previous databases. Whereas this current problem is the first new database I've created from scratch on the new server.</p>\n\n<p>Interestingly, the queries I note above work on the command line. They do not work within the perl script. I've done several searches but can find nothing to point toward a solution. So here I am seeking the benefit and wisdom of more experience than my own.</p>\n\n<p>Thanks for your insights.</p>\n"}, {"tags": ["csv", "perl"], "comments": [{"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 0, "creation_date": 1566139700, "post_id": 57545580, "comment_id": 101554438, "body": "Please upload the actual file somewhere and post a link. It will be useful to test and to see the solution in an acton."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10013787, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682149145212239/picture?type=large", "display_name": "Tina Sharma", "link": "https://stackoverflow.com/users/10013787/tina-sharma"}, "edited": false, "score": 0, "creation_date": 1566198177, "post_id": 57546053, "comment_id": 101565932, "body": "Thank you so much for your reply. This code is working but the problem is now I want to compare column values like if column 2nd and 3rd has Resistant value than column 1st will be filled by MDR and if both are susceptible than column Ist will be filled by susceptible."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 35, "user_id": 10013787, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682149145212239/picture?type=large", "display_name": "Tina Sharma", "link": "https://stackoverflow.com/users/10013787/tina-sharma"}, "edited": false, "score": 0, "creation_date": 1566211037, "post_id": 57546053, "comment_id": 101571849, "body": "@TinaSharma: If you have further questions, then it probably makes sense to post them separately."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 4, "last_activity_date": 1566142740, "creation_date": 1566142740, "answer_id": 57546053, "question_id": 57545580, "link": "https://stackoverflow.com/questions/57545580/how-to-extract-row-data-from-a-csv-file-using-perl/57546053#57546053", "title": "How to extract row data from a csv file using perl?", "body": "<p>Use the <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> module. Read a line, assign the right value to the that column, then print it again. In your sample code, you were only writing one column instead of all of them; the module will handle all of that for you:</p>\n\n<pre><code>use Text::CSV_XS;\n\nmy $csv = Text::CSV_XS-&gt;new;\n\n# replace *DATA and *STDOUT with whatever filehandles you want\n# to read then write.\nwhile( my $row = $csv-&gt;getline(*DATA) ) {\n    $row-&gt;[1] = 'Some value';\n    $csv-&gt;say( *STDOUT, $row );\n    }\n\n\n__DATA__\nGenome Name,Resistance_phenotype,Amikacin,Gentamycin,Aztreonam\nAB1,,Susceptible,Resistant,Resistant\nAB2,,Susceptible,Susceptible,Susceptible\nAB3,,Resistant,Resistant,NA\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>\"Genome Name\",\"Some value\",Amikacin,Gentamycin,Aztreonam\nAB1,\"Some value\",Susceptible,Resistant,Resistant\nAB2,\"Some value\",Susceptible,Susceptible,Susceptible\nAB3,\"Some value\",Resistant,Resistant,NA\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10013787, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682149145212239/picture?type=large", "display_name": "Tina Sharma", "link": "https://stackoverflow.com/users/10013787/tina-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566242506, "creation_date": 1566139171, "last_edit_date": 1566242506, "question_id": 57545580, "link": "https://stackoverflow.com/questions/57545580/how-to-extract-row-data-from-a-csv-file-using-perl", "title": "How to extract row data from a csv file using perl?", "body": "<p>I have a csv file like </p>\n\n<blockquote>\n  <p>Genome Name,Resistance_phenotype,Amikacin,Gentamycin,Aztreonam\n  AB1,,Susceptible,Resistant,Resistant\n  AB2,,Susceptible,Susceptible,Susceptible\n  AB3,,Resistant,Resistant,NA</p>\n</blockquote>\n\n<p>I need to fill 2nd column i.e. Resistant phenotype with MDR, XDR and susceptible. for which I have to match antibiotic resistance profile like if in first row gentamycin &amp; antreanam both are resistant the 2nd column will be filled with MDR and in 3nd row if all 3 are susceptible the 2nd column of 3rd row will be filled with susceptible. </p>\n\n<p>I have written a code mentioned below which only display columns of the csv file. I got stuck what to do further. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $file = 'text.csv';\nmy @data;\nopen(my $fh, '&lt;', $file) or die \"Can't read file '$file' [$!]\\n\";\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    my @fields = split(/,/, $line);\n    print $fields[0], \"\\n\";\n    #print $fields[1], \"\\n\";\n}\nclose $file;\n</code></pre>\n\n<blockquote>\n  <p>Genome Name,Resistance_phenotype,Amikacin,Gentamycin,Aztreonam\n  AB1,MDR,Susceptible,Resistant,Resistant\n  AB2,Susceptible,Susceptible,Susceptible,Susceptible\n  AB3,MDR,Resistant,Resistant,NA</p>\n</blockquote>\n"}, {"tags": ["perl", "pdf", "digital-signature"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566152363, "post_id": 57542183, "comment_id": 101557586, "body": "The code in the question is identical to the one in the referred to file <code>pdfsign.pl</code>. Please show the code that you tried."}], "owner": {"reputation": 11, "user_id": 11941816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb188cd54c6eb56380de81deeff78134?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11941816/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566126805, "creation_date": 1566109637, "question_id": 57542183, "link": "https://stackoverflow.com/questions/57542183/how-to-add-digital-signature-with-image-to-pdf-files-using-perl", "title": "How to add digital signature with image to PDF files using Perl?", "body": "<p>I am working on a script that adds digital signature to PDF files using Perl PDF::API2.</p>\n\n<p>I am using Martin Schuette script from:\n<a href=\"https://mschuette.name/files/pdfsign.pl\" rel=\"nofollow noreferrer\">https://mschuette.name/files/pdfsign.pl</a></p>\n\n<p>my problem is that script add a hidden signature and I am trying to add an image that linked to the signature.</p>\n\n<p>I tried to change that part in the code but with no luck:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code># Annotation Widget, contd.\n$sigannotdict-&gt;{Type}    = PDFName(\"Annot\");\n$sigannotdict-&gt;{Subtype} = PDFName(\"Widget\");\n$sigannotdict-&gt;{F}       = PDFNum(4);\n$sigannotdict-&gt;{Parent}  = $sigformdict;\n$sigannotdict-&gt;{Rect}    = PDF::API2::Basic::PDF::Literal-&gt;new(\"[0 0 0 0]\");\n$sigannotdict-&gt;{P}       = $pdf-&gt;openpage(1);\n$sigannotdict-&gt;{H}       = PDFName(\"N\");\n$sigannotdict = $p-&gt;new_obj($sigannotdict);\n</code></pre>\n"}, {"tags": ["mysql", "perl", "unicode"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1566083586, "post_id": 57540226, "comment_id": 101545310, "body": "Looking at the docs I think you want mysql_enable_utf8mb4 not mysql_enable_utf8? And you should tell Perl that standard output should be using utf-8 via <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code> or the like if you&#39;re writing out Unicode text."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1566093517, "post_id": 57540226, "comment_id": 101546386, "body": "The encoding of the emoji in question is 4 byte long, so definitely need <code>mysql_enable_utf8mb4</code>. Is that the only issue?"}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566157454, "post_id": 57540226, "comment_id": 101558736, "body": "@Shawn Your code didn&#39;t help, but <code>binmode(STDOUT, &quot;:encoding(UTF-8)&quot;);</code> did. With <code>mysql_enable_utf8 =&gt; 1</code> the operation of my test was improved: umlauts are saved and displayed correctly, and my test search for &quot;dog&quot; works. However, emoji are now saved as four question marks. The <code>mysql_enable_utf8mb4</code> setting doesn&#39;t seem to be available in my environment. It has absolutely no effect."}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566158071, "post_id": 57540226, "comment_id": 101558893, "body": "@ikegami By testing, I have determined that my environment doesn&#39;t support <code>mysql_enable_utf8mb4</code>. Not sure how to get that going."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566158181, "post_id": 57540226, "comment_id": 101558915, "body": "Re &quot;<i>Your code didn&#39;t help</i>&quot;, uh, <code>use open &#39;:std&#39;, &#39;:encoding(UTF-8)&#39;;</code> does <code>binmode(STDOUT, &quot;:encoding(UTF-8)&quot;);</code>"}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566158794, "post_id": 57540226, "comment_id": 101559045, "body": "@ikegami For me, <code>use open</code> didn&#39;t work, but <code>binmode</code> did. I don&#39;t know why. My Perl is v5.16.3."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566159922, "post_id": 57540226, "comment_id": 101559285, "body": "Version doesn&#39;t matter. The <code>:std</code> part tells it to binmode STD*"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1566180152, "post_id": 57540226, "comment_id": 101562131, "body": "what DBD::mysql version?  utf8 support varies dramatically by version.  DBD::MariaDB (a fork, which also supports both mysql and mariadb servers) has better out-of-the-box utf8 support, at the cost of more backwards incompatibility"}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1566157952, "post_id": 57541624, "comment_id": 101558865, "body": "By testing, I have determined that my stack doesn&#39;t support <code>mysql_enable_utf8mb4</code>. Yum on CentOS 7 says perl-DBI-1.627-4.el7.x86_64 and perl-DBD-MySQL-4.023-6.el7.x86_64 already installed and latest version. Not sure how to proceed."}, {"owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1566158620, "post_id": 57541624, "comment_id": 101559010, "body": "I was just looking at that. I think my problem is the yum repository is 4.023 and I need DBD::mysql 4.050 for support of <code>mysql_enable_utf8mb4</code>. I guess I would uninstall the repository and manually install the new version."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "reply_to_user": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1566159225, "post_id": 57541624, "comment_id": 101559138, "body": "That&#39;s pretty old.  I have a file with <code>our $VERSION = &#39;4.033&#39;;</code> with a copyright of 2013."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "reply_to_user": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "edited": false, "score": 0, "creation_date": 1566159298, "post_id": 57541624, "comment_id": 101559153, "body": "@TimothyB. - You can probably install from cpan, bypassing <code>yum</code>."}], "tags": [], "owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": true, "score": 4, "last_activity_date": 1566102369, "last_edit_date": 1566102369, "creation_date": 1566102023, "answer_id": 57541624, "question_id": 57540226, "link": "https://stackoverflow.com/questions/57540226/unicode-support-including-emoji-in-web-application-with-accent-insensitive-col/57541624#57541624", "title": "Unicode support (including emoji) in web application with accent insensitive collation", "body": "<p>Emoji --> <code>CHARACTER SET utf8mb4</code>.</p>\n\n<p>Accent insensitive --> any <code>COLLATION utf8mb4_..._ci</code>.</p>\n\n<p>Since you are on the relatively antique 5.5, you may run into the \"767 problem\".  See <a href=\"http://mysql.rjweb.org/doc.php/limits#767_limit_in_innodb_indexes\" rel=\"nofollow noreferrer\">http://mysql.rjweb.org/doc.php/limits#767_limit_in_innodb_indexes</a></p>\n\n<p>If you have Question marks or Mojibake (such as <code>d\u00c3\u00b6g</code> for <code>d\u00f6g</code>), see <a href=\"https://stackoverflow.com/questions/38363566/trouble-with-utf8-characters-what-i-see-is-not-what-i-stored\">Trouble with UTF-8 characters; what I see is not what I stored</a></p>\n\n<p>My notes on Perl:</p>\n\n<pre><code>use utf8;\nuse open ':std', ':encoding(UTF-8)';\nmy $dbh = DBI-&gt;connect(\"dbi:mysql:\".$dsn, $user, $password, {\n   PrintError =&gt; 0,\n   RaiseError =&gt; 1,\n   mysql_enable_utf8 =&gt; 1,  # Switch to UTF-8 for communication and decode.\n});\n# or {mysql_enable_utf8mb4 =&gt; 1} if using utf8mb4\n</code></pre>\n\n<p>(I don't have any notes on <code>use CGI</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1566166686, "creation_date": 1566166686, "answer_id": 57548764, "question_id": 57540226, "link": "https://stackoverflow.com/questions/57540226/unicode-support-including-emoji-in-web-application-with-accent-insensitive-col/57548764#57548764", "title": "Unicode support (including emoji) in web application with accent insensitive collation", "body": "<p>This is the solution that worked for me on CentOS 7:</p>\n\n<ul>\n<li>Install mysql-devel (via yum) because mysql_config was not on my system</li>\n<li>Upgrade Perl DBD::mysql from 4.023 (via yum) to 4.050 (via CPAN)</li>\n<li>Use <code>mysql_enable_utf8mb4</code> option in <code>DBI-&gt;connect</code></li>\n<li>Add <code>binmode(STDOUT, \":encoding(UTF-8)\");</code> to top of Perl script</li>\n</ul>\n\n<p>Output is now as desired:</p>\n\n<blockquote>\n  <p>Content = Now is the time for all good men to come to the aid of their country. \ud83e\udd23 The quick brown fox jumped over the lazy d\u00f6g.\n  String: [fox] found [1]\n  String: [dog] found [1]</p>\n</blockquote>\n"}], "owner": {"reputation": 427, "user_id": 2267422, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T3FOc.jpg?s=128&g=1", "display_name": "Timothy B.", "link": "https://stackoverflow.com/users/2267422/timothy-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 57541624, "answer_count": 2, "score": 1, "last_activity_date": 1566166686, "creation_date": 1566079304, "question_id": 57540226, "link": "https://stackoverflow.com/questions/57540226/unicode-support-including-emoji-in-web-application-with-accent-insensitive-col", "title": "Unicode support (including emoji) in web application with accent insensitive collation", "body": "<p>I have a legacy web application using Perl, CGI, and MySQL 5.5.62. In fields completed by customers, I need to support the umlaut and emoji characters that they often use in their input.</p>\n\n<p>In an attempt to learn, I set up the following stand-alone test. (It's deliberately very simple and lacking basic security checks on input.)</p>\n\n<p>Dump of database <code>widget</code>:</p>\n\n<pre><code>DROP TABLE IF EXISTS `experiment`;\nCREATE TABLE `experiment` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(40) CHARACTER SET utf8mb4 DEFAULT NULL,\n  `content` text CHARACTER SET utf8mb4,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n\nLOCK TABLES `experiment` WRITE;\nINSERT INTO `experiment` VALUES (1,'Record','Now is the time for all good men to come to the aid of their country. \u00f0\u0178\u02dc\u20ac\\r\\nThe quick brown fox jumped over the lazy d\u00c3\u00b6g.');\nUNLOCK TABLES;\n</code></pre>\n\n<p>Perl code:</p>\n\n<pre><code>#!/usr/bin/perl -T\n\nuse strict;\nuse warnings;\n\nuse DBI;\nuse CGI '-utf8';\n\nmy $dbh = DBI-&gt;connect('DBI:mysql:widget','test','test', { mysql_enable_utf8 =&gt; 0,}) or die \"Can't connect to the database: $DBI::errstr\";\nmy $sth = $dbh-&gt;prepare('SELECT * FROM `experiment`') or die \"Couldn't prepare statement: \" . $dbh-&gt;errstr;\n$sth-&gt;execute or die \"Can't execute SQL statement: $DBI::errstr\";\nmy $hashref = $sth-&gt;fetchrow_hashref or die \"Can't fetchrow_hashref: $DBI::errstr\\n\";\n$sth-&gt;finish;\nmy $search = '';\nfor my $i (qw(fox dog)) {\n    $sth = $dbh-&gt;prepare(\"SELECT * FROM `experiment` WHERE `content` LIKE '%$i%'\") or die \"Couldn't prepare statement: \" . $dbh-&gt;errstr;\n    my $count = $sth-&gt;execute or die \"Can't execute SQL statement: $DBI::errstr\";\n    $search .= \"&lt;h6&gt;String: [$i] found [$count]&lt;/h6&gt;\";\n}\n$sth-&gt;finish;\n\nmy $action = CGI::param('action') || '';\nif ($action eq 'save') {\n    my $new = CGI::param('value') || '';\n    $sth = $dbh-&gt;prepare(\"UPDATE `experiment` SET `content` = '$new' WHERE `id` = 1\") or die \"Couldn't prepare statement: \" . $dbh-&gt;errstr;\n    $sth-&gt;execute or die \"Can't execute SQL statement: $DBI::errstr\";\n    $sth-&gt;finish;\n    print \"Location: http://simulated-domain-name.com/cgi-bin/test.cgi\\n\\n\";\n    exit;\n}\n$dbh-&gt;disconnect;\nprint &lt;&lt;EOF;\nContent-type: text/html\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\"&gt;\n        &lt;link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\"&gt; &lt;!-- not part of the experiment, just make it look nice --&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div class=\"container my-3\"&gt;\n            &lt;h5&gt;Content = $hashref-&gt;{content}&lt;/h5&gt;\n$search\n            &lt;form method=\"post\"&gt;\n                &lt;input type=\"hidden\" name=\"action\" value=\"save\"&gt;\n                &lt;div class=\"form-group\"&gt;\n                    &lt;label class=\"font-weight-bold\" for=\"exampleFormControlTextarea1\"&gt;Content&lt;/label&gt;\n                    &lt;textarea name=\"value\" class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\"&gt;$hashref-&gt;{content}&lt;/textarea&gt;\n                &lt;/div&gt;\n                &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Submit&lt;/button&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\nEOF\nexit;\n</code></pre>\n\n<p>As far as I can tell, the <code>'-utf8'</code> on the line with <code>use CGI</code> has no effect.</p>\n\n<p>When using <code>mysql_enable_utf8 = 0</code> the program works beautifully <em>but</em> accent insensitive search fails. Umlauts and emoji are properly displayed in the browser.</p>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Content = Now is the time for all good men to come to the aid of their country. \ud83d\ude00 The quick brown fox jumped over the lazy d\u00f6g.\n  String: [fox] found [1]\n  String: [dog] found [0E0]</p>\n</blockquote>\n\n<p>When using `mysql_enable_utf8 = 1' the HTML output looks scrambled.</p>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Content = Now is the time for all good men to come to the aid of their country. \u00f0\u0178\u02dc\u20ac The quick brown fox jumped over the lazy d\u00c3\u00b6g.\n  String: [fox] found [1]\n  String: [dog] found [0E0]</p>\n</blockquote>\n\n<p>I feel like I'm close, but missing something important.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1566069872, "post_id": 57537650, "comment_id": 101542813, "body": "ALWAYS use <code>use strict; use warnings;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1566060767, "post_id": 57538015, "comment_id": 101540867, "body": "This is only working with package variables and not variables declared with <code>my</code>, and it doesn&#39;t work with <code>use strict</code>. So I wouldn&#39;t recommend this"}, {"owner": {"reputation": 1, "user_id": 11924043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jjH40f_eDik/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdDRdMwr1DZP9sAFfV4Xc_5Y__X_g/photo.jpg?sz=128", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11924043/kirk"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1566152211, "post_id": 57538015, "comment_id": 101557544, "body": "Thank you for pointing that out. I appreciate it. I modified my answer to include your pointer, and to add the syntax the user was asking for. I hope that is ok with you. The way I wanted to show the output is to gather it as it&#39;s working, then print it at the end. I guess because I am always thinking about how the data might be used several times in the eventual output."}], "tags": [], "owner": {"reputation": 1, "user_id": 11924043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jjH40f_eDik/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdDRdMwr1DZP9sAFfV4Xc_5Y__X_g/photo.jpg?sz=128", "display_name": "Kirk", "link": "https://stackoverflow.com/users/11924043/kirk"}, "is_accepted": false, "score": 0, "last_activity_date": 1566152449, "last_edit_date": 1566152449, "creation_date": 1566059020, "answer_id": 57538015, "question_id": 57537650, "link": "https://stackoverflow.com/questions/57537650/how-do-i-concatenate-a-string-to-an-array-variable-inside-the-loop-and-access-ar/57538015#57538015", "title": "How do i concatenate a string to an array variable inside the loop and access array elements?", "body": "<p>Thanks to the pointer by tinita, I edited what I originally posted to closely match what you asked for as the output.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse 5.16.3; \n# depending on what version your server is using, you would need to \n# declare this in order to use \"say\". On my server it would not allow\n# the use of \"say\" unless I specifically declare which version it was \n# using.\n\nmy $output=\"Testing Iteration Output&lt;br&gt;Perl Version: \" . $^V . \"&lt;br&gt;&lt;br&gt;\"; \n# the $^V will help you find your version.\n\nmy @data_0 = (10,20,30,40,50);\nmy @data_1 = (\"a\" .. \"e\");\nmy @data_2 = (-10,-20,-30,-40,-50);\n\n# put arrays into another array which you can access by index\n# Note, I renamed the arrays to begin with 0, just for the reference in the output.\nmy @data = \\(@data_0, @data_1, @data_2);\n\nfor my $field (0 .. 2) {\n    my $row = $data[ $field ]; \n    $output.=\"iterator = \\$data_\" . $field . \"&lt;br&gt;\" . $row-&gt;[0] . \"&lt;br&gt;\"; \n}\n\nprint \"Content-Type: text/html; charset=ISO-8859-1 \\n\\n\";\nprint qq|$output|;\nexit;\n</code></pre>\n\n<p>Then, this is what came as the output</p>\n\n<pre><code>Testing Iteration Output\nPerl Version: v5.16.3\n\niterator = $data_0\n10\niterator = $data_1\na\niterator = $data_2\n-10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": true, "score": 3, "last_activity_date": 1566064983, "creation_date": 1566064983, "answer_id": 57538730, "question_id": 57537650, "link": "https://stackoverflow.com/questions/57537650/how-do-i-concatenate-a-string-to-an-array-variable-inside-the-loop-and-access-ar/57538730#57538730", "title": "How do i concatenate a string to an array variable inside the loop and access array elements?", "body": "<p>Using variable names with other variables is usually a bad idea.</p>\n\n<p>This is why arrays and hashes have been invented.\nIn your case you only need another array:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse 5.010;\n\nmy @data_1 = (10,20,30,40,50);\nmy @data_2 = (\"a\" .. \"e\");\nmy @data_3 = (-10,-20,-30,-40,-50);\n# put arrays into another array which you can access by index\nmy @data = \\(@data_1, @data_2, @data_3);\n\nfor my $field (0 .. 2) {\n    my $row = $data[ $field ]; \n    say $row-&gt;[0]; \n}\n</code></pre>\n\n<p>Does this work for you?</p>\n"}], "owner": {"reputation": 399, "user_id": 10487667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47ce0b7f35f414f4723051666485d09?s=128&d=identicon&r=PG&f=1", "display_name": "Ira", "link": "https://stackoverflow.com/users/10487667/ira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 1, "accepted_answer_id": 57538730, "answer_count": 2, "score": 1, "last_activity_date": 1566152449, "creation_date": 1566056058, "question_id": 57537650, "link": "https://stackoverflow.com/questions/57537650/how-do-i-concatenate-a-string-to-an-array-variable-inside-the-loop-and-access-ar", "title": "How do i concatenate a string to an array variable inside the loop and access array elements?", "body": "<p>I have three arrays. I want to access elements of these three arrays by changing the array names inside a for loop. </p>\n\n<p>I tried concatenating a string to the array variables inside the for loop but its not printing the array elements.</p>\n\n<pre><code>   #!/usr/bin/perl\n   my $iterator;\n   @data_1 = (10,20,30,40,50);\n   @data_2 = ('a','b','c','d','e');\n   @data_3 = (-10,-20,-30,-40,-50);\n\n   for ($field = 1; $field &lt; 4; $field++)\n   {\n    $iterator = \"\\$data_$field\";\n    print \"iterator = $iterator\\n\";\n    print \"$iterator[0]\";\n   }\n</code></pre>\n\n<p>Actual output -</p>\n\n<pre><code>   iterator = $data_1\n   iterator = $data_2\n   iterator = $data_3\n</code></pre>\n\n<p>Expected output -</p>\n\n<pre><code>   iterator = $data_1\n   10\n   iterator = $data_2\n   a\n   iterator = $data_3\n   -10\n\n</code></pre>\n\n<p>Please guide. Thanks.</p>\n"}, {"tags": ["recursion", "tail-recursion", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566043286, "post_id": 57535772, "comment_id": 101536831, "body": "That&#39;s not a tail-recursive function, And IIRC perl doesn&#39;t do tail call optimization anyways without some funky <code>goto</code> usage."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566043833, "post_id": 57535772, "comment_id": 101536920, "body": "You could use <code>reduce</code> from <code>List::Util</code>, which does a left fold. Or do it in a loop. And a different language for playing with TCO and deep recursion (I&#39;m partial to scheme). It&#39;s just not something perl is really well suited for. But <a href=\"https://www.perlmonks.org/?node_id=161611\" rel=\"nofollow noreferrer\">here&#39;s an example</a> of <code>goto</code> based tail calls in perl."}, {"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566045122, "post_id": 57535772, "comment_id": 101537161, "body": "I know <code>reduce</code> and <code>sum</code> from <code>List::Util</code> and loops. My question is how to make TCO in Perl if possible."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1566077220, "last_edit_date": 1566077220, "creation_date": 1566061202, "answer_id": 57538287, "question_id": 57535772, "link": "https://stackoverflow.com/questions/57535772/perl-find-a-sum-of-an-array-recursively-with-tail-call-optimization/57538287#57538287", "title": "Perl: Find a sum of an array recursively with tail call optimization", "body": "<p>You are correct that Perl doesn't perform tail call optimization.</p>\n\n<p>If you had a tail call, you could optimize it yourself. But that said, you don't have a tail call. The recursive call is followed by an addition.</p>\n\n<p>So let's start by changing the sub to have only tail calls. This is done by passing forward the information needed to perform that last operation.</p>\n\n<pre><code>sub _sum {\n   my ($acc, $first, @rest) = @_;\n   $acc += $first;\n   return @rest ? _sum( $acc, @rest ) : $acc;\n}\n\nsub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n   return _sum( 0, @rest );\n}\n</code></pre>\n\n<p>Now we can perform tail call optimizations.</p>\n\n<ol>\n<li>Place the body of the recursive subroutine in an infinite loop.</li>\n<li>Replace <code>recurse(...)</code> with <code>do { @_ = ...; next; }</code>.</li>\n</ol>\n\n<p>First in the helper.</p>\n\n<pre><code>sub _sum {\n   while (1) {\n      my ($acc, $first, @rest) = @_;\n      $acc += $first;\n      if (@rest) {\n         @_ = ( $acc, @rest );\n      } else {\n         return $acc;\n      }\n   }\n}\n\nsub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n   return _sum( 0, @rest );\n}\n</code></pre>\n\n<p>Then in the main sub.</p>\n\n<pre><code>sub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n\n   @_ = ( 0, @rest );\n   while (1) {\n      my ($acc, $first, @rest) = @_;\n      $acc += $first;\n      if (@rest) {\n         @_ = ( $acc, @rest );\n      } else {\n         return $acc;\n      }\n   }\n}\n</code></pre>\n\n<p>Done.</p>\n\n<p>...kinda. There are so many other cleanups and optimizations we can do now.</p>\n\n<p>Let's start by improving the flow.</p>\n\n<pre><code>sub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n\n   @_ = ( 0, @rest );\n   while (1) {\n      my ($acc, $first, @rest) = @_;\n      $acc += $first;\n      return $acc if !@rest;\n\n      @_ = ( $acc, @rest );\n   }\n}\n</code></pre>\n\n<p>No need to create a new <code>$acc</code> every pass through the loop.</p>\n\n<pre><code>sub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n\n   my $acc = 0;\n   while (1) {\n      my ($first, @rest) = @_;\n      $acc += $first;\n      return $acc if !@rest;\n\n      @_ = @rest;\n   }\n}\n</code></pre>\n\n<p>There's no need to use <code>@_</code> anymore.</p>\n\n<pre><code>sub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n\n   my $acc = 0;\n   while (1) {\n      (my $first, @rest) = @rest;\n      $acc += $first;\n      return $acc if !@rest;\n   }\n}\n</code></pre>\n\n<p>Let's replace the expensive list assignment.</p>\n\n<pre><code>sub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n\n   my $acc = 0;\n   while (1) {\n      my $first = shift(@rest);\n      $acc += $first;\n      return $acc if !@rest;\n   }\n}\n</code></pre>\n\n<p>Let's simplify the loop.</p>\n\n<pre><code>sub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n\n   my $acc = 0;\n   while (@rest) {\n      my $first = shift(@rest);\n      $acc += $first;\n   }\n\n   return $acc;\n}\n</code></pre>\n\n<p>Let's replace the <code>while</code> loop with a cheaper foreach loop.</p>\n\n<pre><code>sub sum {\n   my (@rest) = @_;\n   return undef if !@rest;\n\n   my $acc = 0;\n   for my $first (@rest) {\n      $acc += $first;\n   }\n\n   return $acc;\n}\n</code></pre>\n\n<p><code>$first</code> and <code>@rest</code> are no longer appropriate variable names. We'll get rid of a useless copy of <code>@_</code> in the process.</p>\n\n<pre><code>sub sum {\n   return undef if !@_;\n\n   my $acc = 0;\n   $acc += $_ for @_;\n   return $acc;\n}\n</code></pre>\n\n<p>If we initialize <code>$acc</code> to <code>undef</code>, the initial check is no longer needed.</p>\n\n<pre><code>sub sum {\n   my $acc;\n   $acc += $_ for @_;\n   return $acc;\n}\n</code></pre>\n\n<p>Tada!</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566078069, "post_id": 57539720, "comment_id": 101544412, "body": "Note that <code>goto &amp;sum</code> isn&#39;t needed in the that example. Simply <code>&amp;sum</code> would do. You&#39;ll create stack frames, but no new @_ is created, so you save lot of memory without sacrificing as much speed. In fact, if you&#39;re going to use <code>goto</code>, why not use <code>goto START;</code> (after placing <code>START:</code> before the first statement)? It would do exactly the same thing, but it would be soooo much cheaper! The approach you suggest is horrible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566079428, "post_id": 57539720, "comment_id": 101544664, "body": "In short, <code>goto &amp;sub</code> is useful in fooling <code>caller</code>, but useless in TCO. Use <code>goto START</code> aka <code>while (1)</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1566168831, "post_id": 57539720, "comment_id": 101560739, "body": "@ikegami <code>goto START</code> isn&#39;t TCO though, not actually having a call.  If you just do <code>return &amp;sum;</code> instead of <code>goto &amp;sum</code> you have  to add a <code>no warnings &#39;recursion&#39;;</code>.  So I would have recommended the goto form - except that I&#39;m seeing it take much much longer, which I hadn&#39;t expected."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1566168962, "post_id": 57539720, "comment_id": 101560768, "body": "Huh? Optimizing the call away is still optimizing it."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1566300006, "post_id": 57539720, "comment_id": 101605233, "body": "I would use <a href=\"https://tio.run/##XY3RCoIwGIXv9xTnogsl0S3oagi9R4gs@62BDd0cIuGzL5dB0dX/n@98cHqy3TEE7wiTskabm5MsJjda3Yzb35IavSUMU@HUXEjGnL/A@QeeDJjuuiMkIn0nwNIqG3hzpRa6xalGWYLL33JXn3n1LcVWur7TDa0sA89wyD7aPl5RRWdhyzqu5jieiDwXnKfyD9Q8whBe\" title=\"Perl 5 \u2013 Try It Online\" rel=\"nofollow noreferrer\">this</a> regardless if it&#39;s TCO or not."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 2, "last_activity_date": 1566073677, "creation_date": 1566073677, "answer_id": 57539720, "question_id": 57535772, "link": "https://stackoverflow.com/questions/57535772/perl-find-a-sum-of-an-array-recursively-with-tail-call-optimization/57539720#57539720", "title": "Perl: Find a sum of an array recursively with tail call optimization", "body": "<p>Here's a TCO version using that <code>goto</code> feature I mentioned in a comment:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\n\nsub sum {\n    return undef if @_ == 0;\n    return $_[0] if @_ == 1;\n    splice @_, 0, 2, $_[0] + $_[1];\n    goto &amp;sum;\n}\n\nsay sum(1..100);\nsay sum(1..100_000);\n</code></pre>\n\n<p>From <a href=\"https://perldoc.pl/perlfunc#goto-LABEL\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>The goto &amp;NAME form is quite different from the other forms of goto. In fact, it isn't a goto in the normal sense at all, and doesn't have the stigma associated with other gotos. Instead, it exits the current subroutine (losing any changes set by local) and immediately calls in its place the named subroutine using the current value of @_</p>\n</blockquote>\n\n<p>I don't recommend actually <em>using</em> this as it's really, really slow compared to anything else, but it can be done.</p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1566081734, "post_id": 57540241, "comment_id": 101545057, "body": "Nice, but the question was about Perl 5 (not Perl 6) ?"}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1566101787, "post_id": 57540241, "comment_id": 101547175, "body": "@H&#229;konH&#230;gland, honestly I don&#39;t know perl at all. I learned just enough to answer this question. I was sad to see other answers suggesting the OP changes the entire &quot;shape&quot; of the original program just to make it stack-safe."}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566107188, "post_id": 57540241, "comment_id": 101547731, "body": "@H&#229;konH&#230;gland I found a <a href=\"https://tio.run/#perl5\" rel=\"nofollow noreferrer\">Perl 5 interpreter</a> and did my best. I updated my answer with a working Perl 5 implementation. It&#39;s mostly the same as Perl 6 but lacking the subroutine parameter sugar. Would you please let me know if you see any areas for improvement?"}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566108499, "post_id": 57540241, "comment_id": 101547896, "body": "I was unable to get mem usage statistic in Perl 6. Any ideas on how to do that? I got mem usage for the Perl 5 programs using <a href=\"https://rextester.com/l/perl_online_compiler\" rel=\"nofollow noreferrer\">this online compiler</a>."}], "tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 2, "last_activity_date": 1566108373, "last_edit_date": 1566108373, "creation_date": 1566079455, "answer_id": 57540241, "question_id": 57535772, "link": "https://stackoverflow.com/questions/57535772/perl-find-a-sum-of-an-array-recursively-with-tail-call-optimization/57540241#57540241", "title": "Perl: Find a sum of an array recursively with tail call optimization", "body": "<p>Here's a technique using a generic <code>run</code>-<code>recur</code> interface. This is effectively a <a href=\"https://en.wikipedia.org/wiki/Trampoline_(computing)\" rel=\"nofollow noreferrer\">trampoline</a> -</p>\n\n<pre><code>sub recur (*@values) {\n  :{ 'recur' =&gt; &amp;recur, 'values' =&gt; @values }\n}\n\nsub run (&amp;f) {\n  my $r = &amp;f();\n  while $r.isa(Hash) &amp;&amp; $r{'recur'} === &amp;recur {\n    $r = &amp;f(|$r{'values'});\n  }\n  return $r;\n}\n</code></pre>\n\n<p>To use it, we pass a subroutine to <code>run</code> with loop arguments and their initial values -</p>\n\n<pre><code>sub sum ($n = 0) {\n  run (sub ($m = $n, $r = 0) {\n    if $m == 0 {\n      return $r;\n    }\n    else {\n      recur($m - 1, $r + $m);\n    }\n  })\n}\n</code></pre>\n\n<p>NB we use <code>recur</code> with the updated arguments, instead of calling <code>sum</code> directly. Here's the output -</p>\n\n<pre><code>say sum(100_000);\n# 100_000 + 99_999 + 99_997 + ... + 3 + 2 + 1 =\n# =&gt; 5000050000\n\n# cpu time: 10.61 sec\n</code></pre>\n\n<p>Here it is working on a range instead. We use loop variables to keep track of the range index, <code>$i</code> and the return value, <code>$r</code> -</p>\n\n<pre><code>sub sum (@range) {\n  run (sub ($i = 0, $r = 0) {\n    if $i &gt;= @range {\n      return $r;\n    }\n    else {\n      recur($i + 1, $r + @range[$i]);\n    }\n  })\n}\n\nsay sum(5..10);\n# 5 + 6 + 7 + 8 + 9 + 10 =\n# =&gt; 45\n\nsay sum(0..0);\n# =&gt; 0\n\nsay sum(1..100_000);\n# =&gt; 5000050000\n\n# cpu time: 14.37 sec\n</code></pre>\n\n<p>The other techniques presented here ask that you dramatically change your program in order to avoid stack overflow. The unique <code>run</code>-<code>recur</code> interface allows you to think about your problem recursively <em>and</em> allow it to run in constant space.</p>\n\n<hr>\n\n<p>Here is a revision compatible with Perl 5. To my surprise, this program is almost 50 times faster. Maybe the slow down is owed to the poor implementation of newer syntax sugars? It's anyone's guess...</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub recur {\n  { recur =&gt; \\&amp;recur, values =&gt; \\@_ }\n}\n\nsub run {\n  my ($f, @init) = @_;\n  my $r = &amp;{$f}(@init);\n  while (ref $r eq ref {} &amp;&amp; $r-&gt;{'recur'} == \\&amp;recur) {\n    $r = &amp;{$f}(@{$r-&gt;{'values'}});\n  }\n  return $r;\n}\n\nsub sum {\n  my ($n) = @_;\n  run (sub {\n    my ($m, $r) = @_;\n    if ($m == 0) {\n      return $r;\n    }\n    else {\n      recur($m - 1, $r + $m);\n    }\n  }, $n, 0);\n}\n\nprint sum(100_000);\n# =&gt; 5000050000\n\n# cpu: 0.25 sec\n# mem: 3 Mb\n</code></pre>\n\n<p>And the <code>sum</code> variant that takes a range input -</p>\n\n<pre><code>sub sum {\n  my (@range) = @_;\n  run (sub {\n    my ($i, $r) = @_;\n    if ($i &gt;= @range) {\n      return $r;\n    }\n    else {\n      recur($i + 1, $r + $range[$i]);\n    }\n  }, 0, 0);\n}\n\nprint sum(1..100_000);\n# =&gt; 5000050000\n\n# cpu: 0.27 sec\n# mem: 12 Mb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "is_accepted": false, "score": 0, "last_activity_date": 1566084266, "last_edit_date": 1566084266, "creation_date": 1566083573, "answer_id": 57540561, "question_id": 57535772, "link": "https://stackoverflow.com/questions/57535772/perl-find-a-sum-of-an-array-recursively-with-tail-call-optimization/57540561#57540561", "title": "Perl: Find a sum of an array recursively with tail call optimization", "body": "<p>A file calls itself with a reducing number of arguments, inspired by this post: <a href=\"http://blogs.perl.org/users/flymike/2013/12/a-simple-perl-recursion-example.html\" rel=\"nofollow noreferrer\">A simple perl recursion example</a>.</p>\n\n<p>This, of course, is far away from a practical solution. </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature qw(say);\n\n# Init the args at the first call\nif (!@ARGV) {exec join(' ', $^X, $0, 1 .. 100_000)}\n\n# Show progress\nif (@ARGV % 100 == 0) {say scalar @ARGV}\n\nmy ($sum, $first, @rest) = @ARGV;\n$sum += $first;\n\n@rest\n    ? exec join(' ', $^X, $0, $sum, @rest)\n    : say $sum;\n</code></pre>\n"}], "owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 2, "accepted_answer_id": 57539720, "answer_count": 4, "score": 4, "last_activity_date": 1566108373, "creation_date": 1566040556, "last_edit_date": 1566078893, "question_id": 57535772, "link": "https://stackoverflow.com/questions/57535772/perl-find-a-sum-of-an-array-recursively-with-tail-call-optimization", "title": "Perl: Find a sum of an array recursively with tail call optimization", "body": "<p>I'm trying to make a tail optimized recursive function.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub sum {\n    my ($first, @rest) = @_;\n\n    return @rest\n        ? $first + sum(@rest)\n        : $first;\n}\n\nsay sum(1 .. 100);\n</code></pre>\n\n<p>It works for 100 elements however, it fails for 100_000 elements with <code>Out of memory</code> message.</p>\n\n<p>How can improve the code to make the recursion working with more elements?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Tail call optimized version of the above function:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use feature qw( current_sub );\n\nsub sum_tco {\n    my $loop = sub {\n        my ($sum, $first, @rest) = @_;\n        $sum += $first;\n\n        return @rest\n            ? __SUB__-&gt;($sum, @rest)\n            : $sum;\n    };\n\n    return $loop-&gt;(@_);\n}\n</code></pre>\n\n<p>It appears that Perl 5 doesn't support TCO.</p>\n\n<p><strong>How to make TCO in Perl (if possible)?</strong></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566025537, "post_id": 57533996, "comment_id": 101533380, "body": "First impressions: That script was written for pre-2000 perl."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 0, "last_activity_date": 1566025711, "creation_date": 1566025711, "answer_id": 57534095, "question_id": 57533996, "link": "https://stackoverflow.com/questions/57533996/i-am-trying-get-three-parameters-of-x-y-and-z-from-this-script-but-all-it-does/57534095#57534095", "title": "I am trying get three parameters of x, y, and z from this script but all it does is return one value that is not the dimensions I am looking for?", "body": "<p>As far as I can tell, your question boils down to \"how do I print the values of an array?\".</p>\n\n<p>The answer depends on how you want the results formatted, but in the simple case of space-separated numbers, you can just do</p>\n\n<pre><code>print \"@geo_center\\n\";\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11938751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47e07297e969f43e5c78e934ff26483?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Romero", "link": "https://stackoverflow.com/users/11938751/julian-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566025711, "creation_date": 1566024797, "question_id": 57533996, "link": "https://stackoverflow.com/questions/57533996/i-am-trying-get-three-parameters-of-x-y-and-z-from-this-script-but-all-it-does", "title": "I am trying get three parameters of x, y, and z from this script but all it does is return one value that is not the dimensions I am looking for?", "body": "<p>I am new to perl and i am trying to get the dimensions which i think are given from the GeometricCenter method in this perl script. I used this script and it ran and returned only one value which i believe is a value called the gyration which is a paramter that helps determine the xyz dimensions. I thought this script would of returned the dimensions but it did not. Anyone know? </p>\n\n<p>so i tried printing the values in the array xyz which i thought they were in. I tried this by using say but it said i cannot use say on an undefined value</p>\n\n<p>This is the actual problem.\n<a href=\"https://github.com/michal-brylinski/eboxsize/blob/master/eBoxSize-1.1.pl\" rel=\"nofollow noreferrer\">https://github.com/michal-brylinski/eboxsize/blob/master/eBoxSize-1.1.pl</a></p>\n"}, {"tags": ["perl", "variables", "types"], "comments": [{"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1566020527, "post_id": 57533534, "comment_id": 101532535, "body": "if I use  &quot;import Scalar::Util qw(look_like_number);&quot;, I can tell it."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566020678, "post_id": 57533534, "comment_id": 101532566, "body": "As I mentioned, except for the first word, the rest of the element value would be alphabet or number only."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566020701, "post_id": 57533534, "comment_id": 101532573, "body": "<a href=\"https://stackoverflow.com/questions/1112983/in-perl-how-can-i-tell-if-a-string-is-a-number?rq=1\" title=\"in perl how can i tell if a string is a number\">stackoverflow.com/questions/1112983/&hellip;</a>"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566020749, "post_id": 57533534, "comment_id": 101532580, "body": "My point is that I want to learn how to tell it without a module."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566020872, "post_id": 57533534, "comment_id": 101532590, "body": "How do you understand my question? English is not my native language."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566020939, "post_id": 57533534, "comment_id": 101532603, "body": "if I use a module, it can be realized. Following is the code."}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566021046, "post_id": 57533534, "comment_id": 101532618, "body": "import Scalar::Util qw(look_like_number); if (looks_like_number(substr($&#39;, 1,1)){......}"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566021166, "post_id": 57533534, "comment_id": 101532635, "body": "You want to check if Perl would consider a string to be a number. Fixed the question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566021669, "post_id": 57533534, "comment_id": 101532720, "body": "It&#39;s not possible to implement <code>looks_like_number</code> exactly in Pure Perl. (But that wasn&#39;t your question)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1566022013, "post_id": 57533534, "comment_id": 101532782, "body": "You&#39;re asking us to translate 100s of lines of C code. That&#39;s not question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1566025946, "post_id": 57533534, "comment_id": 101533452, "body": "&quot;<i>I want to study how to tell if a string is a number</i>&quot; - you &quot;tell&quot; by calling <code>looks_like_number</code>. Why do you insist on avoiding the actual solution to your problem?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1566059504, "post_id": 57537501, "comment_id": 101540562, "body": "That&#39;s not remotely close to checking if the value is something that Perl considers a number. There&#39;s so much it fails to consider numbers, including <code>-1</code> and <code>0.1</code>. Also, it considers some things numbers that Perl wouldn&#39;t, such as an empty string and <code>\u0967</code> (U+0967 DEVANAGARI DIGIT ONE)"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566069450, "post_id": 57537501, "comment_id": 101542717, "body": "you did not carefully read the condition, &quot;The first word is identifier, which will not be considered. The rest part of the string would be number or alphabet only. &quot;"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566069694, "post_id": 57537501, "comment_id": 101542780, "body": "for different formats of number(like 1.2, 35, 1e5), you still can test it. Randal L. Schwartz et. al. book has examples."}], "tags": [], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "is_accepted": true, "score": 0, "last_activity_date": 1566054871, "creation_date": 1566054871, "answer_id": 57537501, "question_id": 57533534, "link": "https://stackoverflow.com/questions/57533534/in-perl-how-can-i-tell-if-a-string-is-a-number-but-without-using-modules/57537501#57537501", "title": "In Perl, how can I tell if a string is a number, but without using modules?", "body": "<p>Thanks for comments ikegami and melpomene.</p>\n\n<p>The reason why I want to try it because the module is a \"program\" as well. I want to learn how to realize it by myself. After all, we meet all kinds of data which need to handle.</p>\n\n<p>After many failures and tests, I figured it out and share it here.</p>\n\n<p>first, the system variable \"$'\"changed before I assign it in if statement. I save it into another variable. \nSecond, I use an alternative way to realize it because the sequence numbers with spaces must be string. So, I only take one \"character\" to test it. It proves that this operation is correct. Do not forget the statements in my original post </p>\n\n<pre><code>\"The first word is identifier, which will not be considered. The rest part of the string would be number or alphabet only. \"\n</code></pre>\n\n<p>Here are my revised scripts. \"NOTHING IS IMPOSSIBLE.\"</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\n#import Scalar::Util qw(look_like_number);\n\nmy @log=(\"a1 9 2 3 1\",\"gl act car\",\"zo4 4 7\", \"abl off key dog\",\"a8 act zoo\");\nprint \"original log:\\n\";\n$\"=\";\\t\";   #control array's delimiter\nprint \"@log\\n\";\n\nmy @values;\nmy @letter_log;\nmy @letter_idf;\nmy @dig_log;\nmy $s;\nmy $i;\nmy $s_r;\n\n$i=0;\nforeach(@log)\n{\n  @values=split(/\\s+/,$_);chomp(@values);\n  @_= m/$values[0]\\s/;\nprint \"25 \\$'=$';\\n\";\n  $s=$';\n  $s_r=substr($s,0,1);\n  if($s_r =~ /\\D/)  \n  {  print\"26.0: $'\\ts=$s\\ts_r=$s_r\\n\";    \n     $letter_idf[$i]=$values[0];\n     $letter_log[$i]=$s;\n     print \"26:  $letter_idf[$i]\\t$letter_log[$i]\\n\";$i++;\n  }\n  else{$dig_log[$i]=$_;}\n}\n\n@_=sort { $letter_log[$a] cmp $letter_log[$b] } 0..$#letter_log;\nchomp(@_);\n\nprint\"35:  srt letter  log: @letter_log\\n\";\n#foreach(@letter_log){print \"$_;\\t\";}\n\nprint\"38: nsrt letter log: \";\nfor($i=0;$i&lt;=$#letter_log;$i++){print\"$letter_idf[$_[$i]] \".\"$letter_log[$_[$i]];\\t\";}\nprint\"\\n\";\nprint\"41: digital log:\";\nforeach(@dig_log){print \"$_;\\t\";}\n\nprint \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "edited": false, "score": 0, "creation_date": 1566137952, "post_id": 57542885, "comment_id": 101554004, "body": "Thank you so much for your comments and answer. Yes. You are right. My tittle is focused on my question when I programmed. The codes are my practice."}], "tags": [], "owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "is_accepted": false, "score": 1, "last_activity_date": 1566116865, "creation_date": 1566116865, "answer_id": 57542885, "question_id": 57533534, "link": "https://stackoverflow.com/questions/57533534/in-perl-how-can-i-tell-if-a-string-is-a-number-but-without-using-modules/57542885#57542885", "title": "In Perl, how can I tell if a string is a number, but without using modules?", "body": "<p>The provided code that demonstrates your intention is not a perfect match for the title since it does a lot more. I would like to address only the main question in the title here.</p>\n\n<p>If you can first define what a number is (instead of using a indirect definition of \"whatever perl think a numbers is\"), it becomes an easier problem.</p>\n\n<p>For example, if you define the number you are looking for as a string with multiple characters of digit 0..9, then a simple regular expression <code>/^[0-9]+$/</code> can serve your purpose.</p>\n"}], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 57537501, "answer_count": 2, "score": -1, "last_activity_date": 1566116865, "creation_date": 1566019872, "last_edit_date": 1566021011, "question_id": 57533534, "link": "https://stackoverflow.com/questions/57533534/in-perl-how-can-i-tell-if-a-string-is-a-number-but-without-using-modules", "title": "In Perl, how can I tell if a string is a number, but without using modules?", "body": "<p>I have an array, each element is a string which consists of several words. The first word is identifier, which will not be considered. The rest part of the string would be number or alphabet only. I want to sort the alphabet part and then output the whole element. Following are my codes.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @log=(\"a1 9 2 3 1\",\"gl cct car\",\"zo4 4 7\", \"abl off key dog\",\"a8 act zoo\");\n\nmy @values;\nmy @letter_log;\nmy @letter_idf;\nmy @dig_log;\nmy $i;\n$i=0;\nforeach(@log)\n{\n  @values=split(/\\s+/,$_);chomp(@values);\n  @_= m/$values[0]\\s/;\nprint \"25 \\$'=$';\\n\";\n  if($' =~ /\\D\\s+/){$letter_idf[$i]=$values[0];$letter_log[$i]=\"$'\";}\n  else{$dig_log[$i]=$_;}\n\n  $i++;\n}\n\n@_=sort { $letter_log[$a] cmp $letter_log[$b] } 0..$#letter_log;\nchomp(@_);\nenter code here\nfor($i=0;$i&lt;=$#letter_log;$i++){print\"$letter_idf[$_[$i]]\".\"$letter_log[$_[$i]];\\t\";}\n\n\nforeach(@dig_log){print \"$_;\\t\";}\n\nprint \"\\n\";\n</code></pre>\n\n<p>I hope the output is like below</p>\n\n<p>( \"g1 act car\";   \"a8 act zoo\";   \"ab1 off key dog\";   \"a1 9 2 3 1\";   \"zo4 4 7\")</p>\n\n<p>However, my @letter_log is empty. I highly appreciate it if you could point out the errors and provide a correct solution.</p>\n\n<p>PLEASE DO NOT USE MODULES, LIKE </p>\n\n<pre><code>import Scalar::Util qw(look_like_number);\n</code></pre>\n\n<p>I tried to avoid the modules because I want to study how to tell if a string is a number or not. Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566020207, "post_id": 57533460, "comment_id": 101532482, "body": "By the way, the word you tried to use is &quot;caret&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11938751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47e07297e969f43e5c78e934ff26483?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Romero", "link": "https://stackoverflow.com/users/11938751/julian-romero"}, "edited": false, "score": 0, "creation_date": 1566021402, "post_id": 57533552, "comment_id": 101532681, "body": "Okay i figured that out just now. Thanks"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1566020051, "creation_date": 1566020051, "answer_id": 57533552, "question_id": 57533460, "link": "https://stackoverflow.com/questions/57533460/does-anyone-know-how-to-put-inputs-into-this-perl-script-or-just-know-how-to-use/57533552#57533552", "title": "Does anyone know how to put inputs into this perl script or just know how to use this script?", "body": "<p>The author used <code>&lt;description&gt;</code> to represent a placeholder. You are not meant to keep the angled brackets.</p>\n\n<p>For example, you might use</p>\n\n<pre><code>eBoxSize.pl foo.sdf    \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11938751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47e07297e969f43e5c78e934ff26483?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Romero", "link": "https://stackoverflow.com/users/11938751/julian-romero"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1566028340, "answer_count": 1, "score": -2, "last_activity_date": 1566025798, "creation_date": 1566018867, "last_edit_date": 1566025798, "question_id": 57533460, "link": "https://stackoverflow.com/questions/57533460/does-anyone-know-how-to-put-inputs-into-this-perl-script-or-just-know-how-to-use", "closed_reason": "Not suitable for this site", "title": "Does anyone know how to put inputs into this perl script or just know how to use this script?", "body": "<p>I have never used Perl before, but i got the script to run on my windows terminal but all it prints is:</p>\n\n<pre><code> ------------------------------------------------------------\n                         eBoxSize\n                        version 1.1\n       calculation of the box size for ligand docking\n\n       report bugs and issues to wfeinstein@lsu.edu\n                                 michal@brylinski.org\n------------------------------------------------------------\n\neBoxSize.pl &lt;ligand file in SDF, PDBQT or MOL2&gt;\n</code></pre>\n\n<p>So maybe I just don't know how to read this script. But I figured maybe I just needed to put the name of the file in between the left angled bracket and the right angled but that did not work. Can anyone help?</p>\n\n<p>This is the code.\n<a href=\"https://github.com/michal-brylinski/eboxsize/blob/master/eBoxSize-1.1.pl\" rel=\"nofollow noreferrer\">https://github.com/michal-brylinski/eboxsize/blob/master/eBoxSize-1.1.pl</a></p>\n\n<p>I want to use this script to calculate the parameters of the pocket of a ligand-protein complex.</p>\n"}, {"tags": ["bash", "file", "perl"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1565983903, "post_id": 57530082, "comment_id": 101526335, "body": "Welcome to SO. Stack Overflow is a question and answer site for professional and enthusiast programmers. The goal is that you add some code of your own to your question to show at least the research effort you made to solve this yourself."}, {"owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "edited": false, "score": 0, "creation_date": 1565984413, "post_id": 57530082, "comment_id": 101526502, "body": "tab delimited? Because it looks like your 3rd col is &quot;adhesion&quot;, lol ;)"}, {"owner": {"reputation": 27, "user_id": 7949296, "user_type": "registered", "profile_image": "https://graph.facebook.com/1845555612327840/picture?type=large", "display_name": "Carlos Castel&#225;n Angel", "link": "https://stackoverflow.com/users/7949296/carlos-castel%c3%a1n-angel"}, "edited": false, "score": 0, "creation_date": 1565984526, "post_id": 57530082, "comment_id": 101526533, "body": "Yes, is tab delimited, the second column is a biological process, and the third one the gene involved in it."}], "answers": [{"tags": [], "owner": {"reputation": 8293, "user_id": 8656552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FPg67.png?s=128&g=1", "display_name": "Paul Hodges", "link": "https://stackoverflow.com/users/8656552/paul-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1565986793, "last_edit_date": 1565986793, "creation_date": 1565985960, "answer_id": 57530547, "question_id": 57530082, "link": "https://stackoverflow.com/questions/57530082/compare-lines-of-a-specific-column-and-join-the-other-columns-if-the-lines-of/57530547#57530547", "title": "Compare lines of a &#39;specific&#39; column and join the other columns if the lines of the &#39;specific&#39; colum match", "body": "<p>I made a tab-delimited copy of your data.</p>\n\n<pre><code>$: cat cols\nGO:0007155      cell adhesion   ACHE\nGO:0022610      biological adhesion     ACHE\nGO:0007155      cell adhesion   ADAM19\nGO:0022610      biological adhesion     ADAM19\nGO:0007155      cell adhesion   AMBN\nGO:0022610      biological adhesion     AMBN\n\n$: declare -A A B C # associative arrays - \"lookup tables\"\n$: tab=$'\\t'        # just to make it easier to see it embedded\n$: while IFS=$'\\t' read a b c\n   do A[$c]=\"${A[$c]};$a\"\n      B[$c]=\"${B[$c]};$b\"\n   done &lt; cols      # stack cols\n$: for c in \"${!A[@]}\"\n   do echo \"${A[$c]#;}$tab${B[$c]#;}$tab$c\" # strip leading semicolons\n   done\nGO:0007155;GO:0022610   cell adhesion;biological adhesion       ADAM19\nGO:0007155;GO:0022610   cell adhesion;biological adhesion       AMBN\nGO:0007155;GO:0022610   cell adhesion;biological adhesion       ACHE\n</code></pre>\n\n<p>Did order of output matter?\nIf you need them alphabetical, for example, you could use this:</p>\n\n<pre><code>$: for c in $( printf \"%s\\n\" \"${!A[@]}\" | sort )\n   do echo \"${A[$c]#;}$tab${B[$c]#;}$tab$c\"\n   done\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1566014791, "last_edit_date": 1566014791, "creation_date": 1566013922, "answer_id": 57533128, "question_id": 57530082, "link": "https://stackoverflow.com/questions/57530082/compare-lines-of-a-specific-column-and-join-the-other-columns-if-the-lines-of/57533128#57533128", "title": "Compare lines of a &#39;specific&#39; column and join the other columns if the lines of the &#39;specific&#39; colum match", "body": "<p>One way using the ever-useful <a href=\"https://www.gnu.org/software/datamash/\" rel=\"nofollow noreferrer\">GNU datamash</a> plus some massaging to get the output in the format you want:</p>\n\n<pre><code>$ datamash -g 3 collapse 1 collapse 2 &lt; input.tsv | \\\n   awk 'BEGIN { FS=OFS=\"\\t\" } { print $2, $3, $1 }' | tr , ';'   \nGO:0007155;GO:0022610   cell adhesion;biological adhesion   ACHE\nGO:0007155;GO:0022610   cell adhesion;biological adhesion   ADAM19\nGO:0007155;GO:0022610   cell adhesion;biological adhesion   AMBN\n</code></pre>\n\n<p>(This assumes the file is sorted based on the third column like it is in your sample data)</p>\n\n<hr>\n\n<p>And in perl:</p>\n\n<pre><code>$ perl -F\"\\t\" -lane 'push @{$genes{$F[2]}}, [@F[0,1]];\n                     END { $,=\"\\t\";\n                           for (sort keys %genes) {\n                             print join(\";\", map { $_-&gt;[0] } @{$genes{$_}}),\n                                   join(\";\", map { $_-&gt;[1] } @{$genes{$_}}),\n                                   $_ } }' input.tsv\nGO:0007155;GO:0022610   cell adhesion;biological adhesion   ACHE\nGO:0007155;GO:0022610   cell adhesion;biological adhesion   ADAM19\nGO:0007155;GO:0022610   cell adhesion;biological adhesion   AMBN\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7949296, "user_type": "registered", "profile_image": "https://graph.facebook.com/1845555612327840/picture?type=large", "display_name": "Carlos Castel&#225;n Angel", "link": "https://stackoverflow.com/users/7949296/carlos-castel%c3%a1n-angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 57533128, "answer_count": 2, "score": -1, "last_activity_date": 1566014791, "creation_date": 1565983414, "last_edit_date": 1565984591, "question_id": 57530082, "link": "https://stackoverflow.com/questions/57530082/compare-lines-of-a-specific-column-and-join-the-other-columns-if-the-lines-of", "title": "Compare lines of a &#39;specific&#39; column and join the other columns if the lines of the &#39;specific&#39; colum match", "body": "<p>I have a tab delimited file with three columns (GO ID, Biological process, Gene), and I want to compare the lines of the third column and if they match I want to join their respective first and second columns. I'm kinda new programming and I have tried a lot of not efficient ways and not getting the results I want.</p>\n\n<p>Here is an example of the desired output.</p>\n\n<p>Input</p>\n\n<pre><code>GO:0007155      cell adhesion   ACHE\nGO:0022610      biological adhesion     ACHE\nGO:0007155      cell adhesion   ADAM19\nGO:0022610      biological adhesion     ADAM19\nGO:0007155      cell adhesion   AMBN\nGO:0022610      biological adhesion     AMBN\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>GO:0007155;GO:0022610      cell adhesion;biological adhesion   ACHE\nGO:0007155;GO:0022610      cell adhesion;biological adhesion   ADAM19\nGO:0007155;GO:0022610      cell adhesion;biological adhesion   AMBN\n</code></pre>\n"}, {"tags": ["perl", "environment-modules", "modulefile"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1565954278, "post_id": 57523240, "comment_id": 101513826, "body": "What do you get if you run <code>module avail icwbev_plus</code> on the command line? Also <code>system</code> returns the exit code of the process in the call and -1 usually means that it cant find the program you are trying to run."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 1, "last_activity_date": 1565955166, "last_edit_date": 1565955166, "creation_date": 1565954574, "answer_id": 57523776, "question_id": 57523240, "link": "https://stackoverflow.com/questions/57523240/how-to-store-output-of-module-avail-command-in-perl/57523776#57523776", "title": "How to store output of module avail command in perl?", "body": "<p>To quote from the <a href=\"https://perldoc.pl/perlfunc#system-LIST\" rel=\"nofollow noreferrer\">documentation for <code>system</code></a> (Emphasis added):</p>\n\n<blockquote>\n  <p>The return value is the exit status of the program as returned by the wait call. To get the actual exit value, shift right by eight (see below). See also exec. <strong>This is not what you want to use to capture the output from a command</strong>; for that you should use merely backticks or qx//, as described in \"`STRING`\" in perlop. <strong>Return value of -1 indicates a failure to start the program</strong> or an error of the wait(2) system call (inspect $! for the reason).</p>\n</blockquote>\n\n<p>That combined with the blank output of the other attempts suggests that this <code>module</code> command isn't present in your path when you try to execute it. (I suspect that if you followed best practices and included <code>use warnings;</code> you'd get one about using an undefined value when you try to print <code>$data1</code>)</p>\n\n<hr>\n\n<p>Anyways, if this <code>module</code> command is present on the computer you're running your perl code on, try using the absolute path to it (<code>my $data1 = qx!/foo/bar/module avail icwbev_plus!</code>), or put the directory it's in in your path before running the script.</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1565977952, "last_edit_date": 1565977952, "creation_date": 1565977277, "answer_id": 57528974, "question_id": 57523240, "link": "https://stackoverflow.com/questions/57523240/how-to-store-output-of-module-avail-command-in-perl/57528974#57528974", "title": "How to store output of module avail command in perl?", "body": "<p><code>module</code> outputs to stderr, not stdout, which is not captured by qx/backticks.  You can try:</p>\n\n<pre><code>`LMOD_REDIRECT=yes module avail ...`\n</code></pre>\n\n<p>See <a href=\"https://lmod.readthedocs.io/en/latest/040_FAQ.html\" rel=\"nofollow noreferrer\">https://lmod.readthedocs.io/en/latest/040_FAQ.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 586, "user_id": 9981498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249390027e5a742505cd4ae02b6e9bd7?s=128&d=identicon&r=PG", "display_name": "Xavier Delaruelle", "link": "https://stackoverflow.com/users/9981498/xavier-delaruelle"}, "is_accepted": true, "score": 0, "last_activity_date": 1565978130, "creation_date": 1565978130, "answer_id": 57529118, "question_id": 57523240, "link": "https://stackoverflow.com/questions/57523240/how-to-store-output-of-module-avail-command-in-perl/57529118#57529118", "title": "How to store output of module avail command in perl?", "body": "<p>The <code>module</code> command is a shell alias or a function. Thus it cannot be called directly via a `` or a <code>system</code> call.</p>\n\n<p>To get the output of an avail sub-command, you should call the <code>modulecmd</code> command which is called by the <code>module</code> shell alias/function.</p>\n\n<p>To get the location of <code>modulecmd</code> on your system, type in a regular shell session <code>type module</code> which exposes the command called by the <code>module</code> shell alias/function.</p>\n\n<p>The fully qualified path to the <code>modulecmd</code> command can then be used through a back-tick or a <code>system</code> call to get the result of an <code>avail</code> sub-command:</p>\n\n<p>To get the output of a <code>module avail</code> command (in terse format to simplify parsing):</p>\n\n<pre><code>#!/depot/local/bin/perl5.8.0\nmy $data1 = `/usr/share/Modules/libexec/modulecmd.tcl perl avail --terse icwbev_plus 2&gt;&amp;1`; \nprint \"Data $data1 \\n\"\n</code></pre>\n\n<p>Note the <code>--terse</code> format used to simplify result parsing. Also stderr is redirected to stdout to catch the actual output of the command (as <code>modulecmd</code> primarily uses stdout to output environment change commands).</p>\n"}], "owner": {"reputation": 19, "user_id": 11935643, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YHywcwmc7hE/AAAAAAAAAAI/AAAAAAAAAAc/JCcxnXX4wZU/photo.jpg?sz=128", "display_name": "Ishwar Singh", "link": "https://stackoverflow.com/users/11935643/ishwar-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 57529118, "answer_count": 3, "score": 0, "last_activity_date": 1565978130, "creation_date": 1565952293, "last_edit_date": 1565957686, "question_id": 57523240, "link": "https://stackoverflow.com/questions/57523240/how-to-store-output-of-module-avail-command-in-perl", "title": "How to store output of module avail command in perl?", "body": "<pre><code>#!/depot/local/bin/perl5.8.0\nmy @data = `module avail icwbev_plus `;\nprint \"Data Array : @data \\n \" ;\n\nmy $data1 = `module avail icwbev_plus `;\nprint \"Data $data1 \\n\" ;\n\nmy $data2 = system (\" module avail icwbev_plus \");\nprint \"S Data $data2 \" \n</code></pre>\n\n<p><strong>Output :</strong> <br></p>\n\n<pre><code>Data Array :  \n Data  \nS Data -1\n</code></pre>\n\n<p>I am not getting why it is not storing output to a variable. \nPlease help me to solve this. Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1565949275, "post_id": 57522335, "comment_id": 101511630, "body": "Welcome to Stack Overflow. There are some syntax errors in your code. Please <a href=\"https://stackoverflow.com/posts/57522335/edit\">edit</a> your question and fix them so we can help. Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566239729, "post_id": 57522335, "comment_id": 101586150, "body": "ALWAYS use <code>use strict; use warnings;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566239740, "post_id": 57522335, "comment_id": 101586157, "body": "<code>&#47;m</code> is useless in a pattern without <code>^</code> or <code>$</code>."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1565950804, "post_id": 57522839, "comment_id": 101512302, "body": "@DaveCross I like your answer more. I wanted to do that step by step thing too, but I spent too much time trying to find a thing that would turn the debugger output into a gif."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1565950401, "creation_date": 1565950401, "answer_id": 57522839, "question_id": 57522335, "link": "https://stackoverflow.com/questions/57522335/odd-use-of-uninitialized-value-regular-expression-error/57522839#57522839", "title": "Odd &quot;Use of uninitialized value&quot;, regular expression error", "body": "<p>The warning you see is because <code>$_</code> is undefined. In Perl, you can have variables that have no value at all. That's <code>undef</code>.</p>\n\n<p>The first thing you want to do in this case is inspect your array. The core <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> module is good for that. Or you can install <a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a> from CPAN, which I prefer.</p>\n\n<pre><code>print Dumper \\@szelmatches;\nforeach (@szelmatches) {\n    print \"$_\\n\";\n}\n</code></pre>\n\n<p>This will output</p>\n\n<pre><code>$VAR1 = [\n          undef,\n          undef,\n          undef,\n          '-24'\n        ];\n</code></pre>\n\n<p>Clearly there are some <code>undef</code>s in the array. This is because you have a capture group <code>(\\-\\d)</code> that is optional <code>?</code>. Each time the string gets matched successfully via the <code>/g</code> modifier, it will put all of the capture group results into your array. But the only group you have is optional, so the pattern matches even if there is no <code>-\\d</code> going on.</p>\n\n<p>You can visualise this on <a href=\"https://www.debuggex.com/r/Gp-oLmkNiD03gVPX\" rel=\"nofollow noreferrer\">Debugex</a>. If you want to have a more detailed play-around with it, try the <a href=\"https://metacpan.org/pod/Regexp::Debugger\" rel=\"nofollow noreferrer\">Regexp::Debugger</a> module, which will allow you to step-by-step debug your regex right in your terminal.</p>\n\n<p>You will have to tell us which numbers you actually want to capture. </p>\n\n<p>If all you are after is the second one after the dash (which you do not have to escape, it has no special meaning), then you should not make that capture group optional.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 11931987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ee54213b79119e95590208b0e69145?s=128&d=identicon&r=PG&f=1", "display_name": "gamb1t9", "link": "https://stackoverflow.com/users/11931987/gamb1t9"}, "edited": false, "score": 0, "creation_date": 1565955793, "post_id": 57522881, "comment_id": 101514485, "body": "thanks, it solved my problem, but i have several questions.  First, when you say &quot;it&#39;s only that optional part that you&#39;re capturing (as it has parentheses around it)&quot;, why is it happening? I mean i understand the concept of groups in this concept (not really but let&#39;s pretend) but when did it become obvious that i need values from groups and not the whole matches? Is it only goes after the optional part? I can&#39;t follow this logic."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 11931987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ee54213b79119e95590208b0e69145?s=128&d=identicon&r=PG&f=1", "display_name": "gamb1t9", "link": "https://stackoverflow.com/users/11931987/gamb1t9"}, "edited": false, "score": 0, "creation_date": 1565958118, "post_id": 57522881, "comment_id": 101515567, "body": "@gamb1t9: I think that what you&#39;re missing is that when you want to store bits of a regex match in (for example) an array then the bits that are stored are the sections of the regex that are &quot;captured&quot; by being in parentheses. I suspect you&#39;ll find it useful to read <a href=\"https://perldoc.pl/perlretut\" rel=\"nofollow noreferrer\">perlretut</a> (in particular the section on <a href=\"https://perldoc.pl/perlretut#Extracting-matches\" rel=\"nofollow noreferrer\">Extracting matches</a>)."}, {"owner": {"reputation": 23, "user_id": 11931987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ee54213b79119e95590208b0e69145?s=128&d=identicon&r=PG&f=1", "display_name": "gamb1t9", "link": "https://stackoverflow.com/users/11931987/gamb1t9"}, "edited": false, "score": 0, "creation_date": 1565958301, "post_id": 57522881, "comment_id": 101515636, "body": "okay, for now, i&#39;m good the with the answer that () is not only good for grouping but it is also creating a &quot;capture group&quot; which function can be escaped via (?: so it behaves like I imagine i would. I&#39;m gonna roll with this because \\d+(?:-\\d+)?\\s+km (only the simple ?: is added to my pattern, canceling out the capture group i guess) is working exactly what i expect from it. Thank you guys once more, i&#39;m a begginner but this site is knowledge itself, it&#39;s my pleasure and honor to learn from you :)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1565958378, "last_edit_date": 1565958378, "creation_date": 1565950577, "answer_id": 57522881, "question_id": 57522335, "link": "https://stackoverflow.com/questions/57522335/odd-use-of-uninitialized-value-regular-expression-error/57522881#57522881", "title": "Odd &quot;Use of uninitialized value&quot;, regular expression error", "body": "<p>Firstly, I had to fix a syntax error in your code before I could run it (the closing <code>)</code> was missing from your <code>if</code> statement). Please cut and paste code, rather than retyping it.</p>\n\n<p>If Perl tells you that it's finding <code>undef</code>s then it's almost certainly right. Using <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> can show us what is going on.</p>\n\n<pre><code>use warnings;\nuse Data::Dumper;\n\nmy $string = \"^\u02c7~ --_ 12 km a\u00e9eklwa   32 km |  \\|\u00c4\u02c7^ 0 km  23-24 km\";\n\nif (@szelmatches = $string =~ /\\d+(\\-\\d+)?\\s+km/gm) {\n    my $number_of_elements = scalar(@szelmatches);\n    print \"Elements in the array : $number_of_elements  \\n\";\n}\n\nprint Dumper \\@szelmatches;\n\nforeach (@szelmatches) {\n    print \"$_\\n\";\n}\n</code></pre>\n\n<p>That gives us the following:</p>\n\n<pre><code>$VAR1 = [\n          undef,\n          undef,\n          undef,\n          '-24'\n        ];\n</code></pre>\n\n<p>So, yes, there are three <code>undef</code>s in your results. Can we work out why?</p>\n\n<p>Well, here's your match operator.</p>\n\n<pre><code>/\\d+(\\-\\d+)?\\s+km/gm\n</code></pre>\n\n<p>It's looking for digits followed by an optional dash and more digits. But it's only that optional part that you're capturing (as it has parentheses around it). And in the first three cases, that optional section doesn't appear. So you get <code>undef</code> for those first three matches.</p>\n\n<p>Let's actually match what you want (the whole digits section, I think) by putting more parentheses around the whole thing.</p>\n\n<pre><code>/(\\d+(\\-\\d+)?)\\s+km/gm\n</code></pre>\n\n<p>Now we get this result:</p>\n\n<pre><code>$VAR1 = [\n          '12',\n          undef,\n          '32',\n          undef,\n          '0',\n          undef,\n          '23-24',\n          '-24'\n        ];\n</code></pre>\n\n<p>That's better. We get all of the matches we want, alongside the original ones. So, that's twice as many matches as we want. That's because we now have two sets of parentheses for each match. We need the first set to match and capture the digit section and the second set to join together the \"-\" and the \"\\d+\". But we don't need the second set to capture its contents.</p>\n\n<p>If you read <a href=\"https://perldoc.pl/perlre#Extended-Patterns\" rel=\"nofollow noreferrer\">the section on \"Extended Patterns\" in the perlre manual page</a>, you'll see that we can create non-capturing parentheses with <code>(?:...)</code>. So let's use that.</p>\n\n<pre><code>/(\\d+(?:\\-\\d+)?)\\s+km/gm\n</code></pre>\n\n<p>And that gives us:</p>\n\n<pre><code>$VAR1 = [\n          '12',\n          '32',\n          '0',\n          '23-24'\n        ];\n</code></pre>\n\n<p>Which is, I think, what you wanted.</p>\n\n<p><strong>Update:</strong> Re-reading your question, I realise that you wanted the 'km' as well. So I've moved the closing parentheses past that.</p>\n\n<pre><code>/(\\d+(?:\\-\\d+)?\\s+km)/gm\n</code></pre>\n\n<p>And that gives us:</p>\n\n<pre><code>$VAR1 = [\n          '12 km',\n          '32 km',\n          '0 km',\n          '23-24 km'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1566239692, "creation_date": 1566239692, "answer_id": 57562214, "question_id": 57522335, "link": "https://stackoverflow.com/questions/57522335/odd-use-of-uninitialized-value-regular-expression-error/57562214#57562214", "title": "Odd &quot;Use of uninitialized value&quot;, regular expression error", "body": "<p>Two problems.</p>\n\n<ol>\n<li><p>When a capture is conditional (e.g. <code>(...)?</code>) and it doesn't match anything, it captures <code>undef</code>.</p></li>\n<li><p>When there's one or more captures, the match returns the capture text rather than the entire text matched.</p></li>\n</ol>\n\n<p>The solution is to remove the useless and problem-causing capture. Replace</p>\n\n<pre><code>if ( my @szelmatches = $string =~ /\\d+(\\-\\d+)?\\s+km/g )\n</code></pre>\n\n<p>with</p>\n\n<pre><code>if ( my @szelmatches = $string =~ /\\d+(?:\\-\\d+)?\\s+km/g )\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11931987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ee54213b79119e95590208b0e69145?s=128&d=identicon&r=PG&f=1", "display_name": "gamb1t9", "link": "https://stackoverflow.com/users/11931987/gamb1t9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 57522881, "answer_count": 3, "score": 2, "last_activity_date": 1566239692, "creation_date": 1565948461, "last_edit_date": 1565969503, "question_id": 57522335, "link": "https://stackoverflow.com/questions/57522335/odd-use-of-uninitialized-value-regular-expression-error", "title": "Odd &quot;Use of uninitialized value&quot;, regular expression error", "body": "<p>I'm using Strawberry Perl 5 on Windows 10. It does seem like my regular expressions are broken or regex101 won't tell me the truth. I want to catch 'num km'. Even tho my array seems to be the right length it'd often say\"Use of uninitialized value\". </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $string = \"^\u02c7~ --_ 12 km a\u00e9eklwa   32 km |  \\|\u00c4\u02c7^ 0 km  23-24 km\";\n\nif (@szelmatches = $string =~ /\\d+(\\-\\d+)?\\s+km/gm) {\n    my $number_of_elements = scalar(@szelmatches);\n    print \"Elements in the array : $number_of_elements  \\n\";\n}\n\nforeach (@szelmatches) {\n    print \"$_\\n\";\n} \n\n</code></pre>\n\n<p><strong>OUTPUT:</strong>\nElements in the array : 4<br>\nUse of uninitialized value $_ in concatenation (.) or string at C:\\misc\\perlek\\wttr\\szel.pl line 16.</p>\n\n<p>I've ran defined() checks but it seems like my array elements are all defined. Changing \\- to .{1} occasionaly worked but it is quite annoying to write like this. regex101.com and regexr.com tells me everything is allright.</p>\n\n<p>I know you could write it simpler/shorter/better/faster/nicer etc, but i honestly think this should work. Do you guys have any idea what am i doing wrong? </p>\n"}, {"tags": ["amazon-web-services", "perl", "amazon-s3"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1565983453, "post_id": 57521701, "comment_id": 101526161, "body": "I tried this on Ubuntu 19.04, <code>Paws</code> version 0.41. I can confirm that the versions object is empty here too. But I get a warning from the script: <code>Paws::S3 is not stable &#47; supported &#47; entirely developed</code>. I will look further into this to see if I can find out what the problem is"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1565993410, "post_id": 57521701, "comment_id": 101529194, "body": "Think I found the issue. I have submitted <a href=\"https://github.com/pplu/aws-sdk-perl/pull/340\" rel=\"nofollow noreferrer\">a pull request</a>. Let me know if this fixes your issue too!"}, {"owner": {"reputation": 301, "user_id": 1479249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9aa956d1bb0e5e757354bd60241bb8f?s=128&d=identicon&r=PG", "display_name": "ximarin", "link": "https://stackoverflow.com/users/1479249/ximarin"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1565993929, "post_id": 57521701, "comment_id": 101529288, "body": "@H&#229;konH&#230;gland Thank you for looking into this, I hope the fix can be released soon!"}], "owner": {"reputation": 301, "user_id": 1479249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9aa956d1bb0e5e757354bd60241bb8f?s=128&d=identicon&r=PG", "display_name": "ximarin", "link": "https://stackoverflow.com/users/1479249/ximarin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565945898, "creation_date": 1565945898, "question_id": 57521701, "link": "https://stackoverflow.com/questions/57521701/pawss3listobjectversions-call-returning-empty-versions-array", "title": "Paws::S3::ListObjectVersions - Call returning empty versions array", "body": "<p>I'm trying to get the list of versionIds for an S3 object using <code>Paws::S3::ListObjectVersions</code>.</p>\n\n<p>Sample code:</p>\n\n<pre><code>use Paws;\nuse Data::Dumper;\n\nmy $bucket = '&lt;bucket&gt;';\nmy $s3 = Paws-&gt;service('S3', region =&gt; '&lt;region&gt;');\n\nmy $s3_object_list = $s3-&gt;ListObjects(Bucket =&gt; $bucket);\n\nforeach my $s3_object (@{$s3_object_list-&gt;Contents}){\n    print($s3_object-&gt;Key.\"\\n\");\n    $s3_object_versions = $s3-&gt;ListObjectVersions(Bucket =&gt; $bucket, Prefix =&gt; $s3_object-&gt;Key);\n    print Dumper($s3_object_versions);\n    foreach my $s3_object_version (@{$s3_object_versions-&gt;Versions}){\n        print($s3_object_version.\"\\n\");\n    };\n}\n</code></pre>\n\n<p>This kind of works, but it returns an empty list of versions:</p>\n\n<pre><code>$VAR1 = bless( {\n                 'CommonPrefixes' =&gt; [],\n                 'Versions' =&gt; [],\n                 '_request_id' =&gt; '1234567890ABCDEF',\n                 'MaxKeys' =&gt; '1000',\n                 'Prefix' =&gt; '&lt;prefix&gt;',\n                 'IsTruncated' =&gt; 0,\n                 'DeleteMarkers' =&gt; [],\n                 'Name' =&gt; '&lt;bucket&gt;'\n               }, 'Paws::S3::ListObjectVersionsOutput' );\n</code></pre>\n\n<p>When doing the same with Powershell, I get this:</p>\n\n<pre><code>PS &gt; (Get-S3Version -BucketName &lt;bucket&gt; -Prefix &lt;prefix&gt;).Versions\n\nBucketName         Key              IsLatest VersionId                        LastModified          Size   StorageClass\n----------         ---              -------- ---------                        ------------          ----   ------------\n&lt;bucket&gt;           &lt;prefix&gt;         True     llmRo1gSe4.3ByyXurXodl_wpKlecABw 8/16/2019 10:25:43 AM 198702 STANDARD\n&lt;bucket&gt;           &lt;prefix&gt;         False    ZxJzCX5kTHH3MMh.7ZL2E3Tkz.pQOCYw 8/16/2019 10:18:08 AM 198702 STANDARD\n</code></pre>\n\n<p>Is there something I'm missing when using Paws?</p>\n\n<p>I use Paws under Windows Server 2012R2 with Strawberry Perl 5.30 32bit.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1565943842, "post_id": 57515618, "comment_id": 101509303, "body": "<i>Please no XML libraries</i> That&#39;s like saying &quot;I need to drive a nail into this piece of wood - please don&#39;t suggest I use a hammer&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1565900908, "creation_date": 1565900908, "answer_id": 57515874, "question_id": 57515618, "link": "https://stackoverflow.com/questions/57515618/perl-append-a-substring-with-in-a-string/57515874#57515874", "title": "Perl append a substring with in a string", "body": "<p>You're almost there.</p>\n\n<p>The <code>.*?</code> sequence in your regular expression stands for some characters in the original input, and you have to find a way to include those characters in the output, too.</p>\n\n<p>That is done with a <em>capture group</em> in the pattern (enclosing part of the regular expression in parentheses) and a reference to <code>$1</code> (meaning the contents of the first capture group) in the replacement pattern.</p>\n\n<pre><code>$recordLine =~ s/user_name=\"(.*?)\"/user_name=\"$1, Mr\"/g;\n</code></pre>\n"}], "owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57515874, "answer_count": 1, "score": 0, "last_activity_date": 1565903165, "creation_date": 1565899780, "last_edit_date": 1565903165, "question_id": 57515618, "link": "https://stackoverflow.com/questions/57515618/perl-append-a-substring-with-in-a-string", "title": "Perl append a substring with in a string", "body": "<p>I am using perl and I want to append a substring with in a string. </p>\n\n<p>what I have is this.</p>\n\n<pre><code>&lt;users used_id=\"222\" user_base=\"0\" user_name=\"Mike\" city=\"Chicago\"/&gt;\n&lt;users used_id=\"333\" user_base=\"0\" user_name=\"Jim Beans\" city=\"Ann Arbor\"/&gt;\n</code></pre>\n\n<p>What I want is append word Mr. after the user name like this.</p>\n\n<pre><code>&lt;users used_id=\"222\" user_base=\"0\" user_name=\"Mike, Mr\" city=\"Chicago\"/&gt;\n&lt;users used_id=\"333\" user_base=\"0\" user_name=\"Jim Beans, Mr\" city=\"Ann Arbor\"/&gt;\n</code></pre>\n\n<p>problem is I don't know how to do that? This is what I have so far. Please no XML libraries. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nprint \"\\nPerl Starting ... \\n\\n\"; \n\nwhile (my $recordLine =&lt;DATA&gt;) \n{\n    chomp($recordLine);\n    #print \"$recordLine ...\\n\";\n\n    if (index($recordLine, \"user_name\") != -1) \n    {\n        #Found user_name tag ... now appeand Mr. after the name at the end ... how?\n        $recordLine =~ s/user_name=\".*?\"/user_name=\" Mr\"/g; \n        print \"recordLine: $recordLine ...\\n\";\n\n    }\n}\n\nprint \"\\nPerl End ... \\n\\n\"; \n\n__DATA__\n&lt;users used_id=\"222\" user_base=\"0\" user_name=\"Mike\" city=\"Chicago\"/&gt;\n&lt;users used_id=\"333\" user_base=\"0\" user_name=\"Jim Beans\" city=\"Ann Arbor\"/&gt;\n</code></pre>\n"}, {"tags": ["perl", "image-comparison"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1565889146, "post_id": 57512279, "comment_id": 101495125, "body": "Did you try the (external) <code>diff</code>(Linux/Unix) ?  Compare using <a href=\"https://perldoc.perl.org/Benchmark.html\" rel=\"nofollow noreferrer\">Benchmark</a>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1565904195, "post_id": 57512279, "comment_id": 101500673, "body": "If you&#39;re comparing the same image multiple times, only resize it once instead of every time it&#39;s compared to another."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1566307571, "post_id": 57512672, "comment_id": 101609681, "body": "Given the fact that png have metadata, and that a method <code>resize_image</code> is used, it sounds unlikely that <code>eq</code> is actually what the op wants. (the question is a bit vague though..)"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1566310159, "post_id": 57512672, "comment_id": 101611303, "body": "@Dada I agree with your sentiment, however the code is passing both images through the same resize method and comparing with <code>&amp;Image::Compare::EXACT</code>, so I thought <code>eq</code> might be worth a try"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 0, "last_activity_date": 1565885172, "creation_date": 1565885172, "answer_id": 57512672, "question_id": 57512279, "link": "https://stackoverflow.com/questions/57512279/is-there-a-faster-way-of-comparing-images-than-imagecompare-in-perl/57512672#57512672", "title": "Is there a faster way of comparing images than Image::Compare in Perl?", "body": "<p>You could slurp each image into a scalar and then compare with the <code>eq</code> operator to see if they are identical. Not sure if this is what you want though.</p>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1565885172, "creation_date": 1565883577, "question_id": 57512279, "link": "https://stackoverflow.com/questions/57512279/is-there-a-faster-way-of-comparing-images-than-imagecompare-in-perl", "title": "Is there a faster way of comparing images than Image::Compare in Perl?", "body": "<p>This is my current method:</p>\n\n<pre><code>    #Object to compare images\n    my $cmp = Image::Compare-&gt;new();\n\n    # Resize images\n    my ($image_1_resized_file, $image_2_resized_file) = resize_images($image_1_file, $image_2_file);\n\n    # Configure comparison\n    $cmp-&gt;set_image1(\n        img  =&gt; $image_1_resized_file,\n        type =&gt; 'png',\n    );\n    $cmp-&gt;set_image2(\n        img  =&gt; $image_2_resized_file,\n        type =&gt; 'png',\n    ); \n\n\n    $cmp-&gt;set_method(\n       method =&gt; &amp;Image::Compare::EXACT,\n    );\n\n    # Compare\n    if ($cmp-&gt;compare()) {\n        print \"[DEBUG] Images are the same\\n\"  if ($self-&gt;{_debug_prints} eq 1);\n\n        # Remove temp files\n        unlink $image_1_resized_file;\n        unlink $image_2_resized_file;\n\n        return 1;\n    }\n    else {\n        print \"[ERROR] Images are not the same\\n\";\n\n        #Remove temp files\n        unlink $image_1_resized_file;\n        unlink $image_2_resized_file;\n\n        return 0;\n    }\n}\n</code></pre>\n\n<p>Ommiting the resizing that I do, If the images are the same, is there a fastest way to do this?. Currently is taking around 2-5 seconds per image, with an aproximated size of 600x600.</p>\n\n<p>Considering that I want to test blocks of 10 images around 40 times, is there a fastest way to get the results?</p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 2167, "user_id": 1935238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRVLR.jpg?s=128&g=1", "display_name": "DaveStSomeWhere", "link": "https://stackoverflow.com/users/1935238/davestsomewhere"}, "edited": false, "score": 0, "creation_date": 1565881771, "post_id": 57511768, "comment_id": 101491799, "body": "Why do you have a new line <code>\\n</code> at the end of the print?"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "reply_to_user": {"reputation": 2167, "user_id": 1935238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRVLR.jpg?s=128&g=1", "display_name": "DaveStSomeWhere", "link": "https://stackoverflow.com/users/1935238/davestsomewhere"}, "edited": false, "score": 0, "creation_date": 1565884061, "post_id": 57511768, "comment_id": 101492947, "body": "I have some more values to be fetched. So differentiate that I have put a new line."}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "is_accepted": true, "score": 2, "last_activity_date": 1565884025, "creation_date": 1565884025, "answer_id": 57512392, "question_id": 57511768, "link": "https://stackoverflow.com/questions/57511768/command-executed-in-ssh-terminal-displays-extra-line-contents/57512392#57512392", "title": "Command executed in SSH terminal displays extra line contents", "body": "<p>Pass the <code>no_terminal =&gt; 1</code> option to the constructor.</p>\n\n<pre><code>my $ssh = Net::SSH::Expect-&gt;new (\n    host =&gt; 'hostip', #deb-2-scripting ip\n    user =&gt; 'user',\n    password =&gt; 'password',\n    raw_pty =&gt; 1,\n    no_terminal =&gt; 1,\n);\n</code></pre>\n\n<p>That will prevent the ssh server from allocating a pseudo-tty, and the remote shell should not print a prompt when not running in a tty.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 57512392, "answer_count": 1, "score": 2, "last_activity_date": 1565922290, "creation_date": 1565881572, "last_edit_date": 1565922290, "question_id": 57511768, "link": "https://stackoverflow.com/questions/57511768/command-executed-in-ssh-terminal-displays-extra-line-contents", "title": "Command executed in SSH terminal displays extra line contents", "body": "<p>Using Net::SSH::Expect perl module I tried to connect to the server and connection is success. But when its executing the command in connected server and displaying output in current window it displays extra line of output.</p>\n\n<p>Below is my code</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse Net::SSH::Expect;\n\nmy $ssh = Net::SSH::Expect-&gt;new (\n    host =&gt; 'hostip', #deb-2-scripting ip\n    user =&gt; 'user',\n    password =&gt; 'password',\n    raw_pty =&gt; 1\n);\n\n$ssh-&gt;run_ssh() or die \"SSH process couldn't start: $!\";\n\n\n$ssh-&gt;waitfor('password: ');\n\n$ssh-&gt;send(\"password\");\n\n$ssh-&gt;exec(\"stty -echo\");\n\nmy $hostname = $ssh-&gt;exec('hostname');\nprint \"HOST:$hostname\\n\";\n\n$ssh-&gt;close();\n</code></pre>\n\n<p>And output is below:</p>\n\n<pre><code>[vinod@deb-3-serv1 TEST_DIR]$ perl test_ssh.pl\nHOST:deb-2-scripting\n[user@deb-2-scripting(Host) ~]$\n</code></pre>\n\n<p>I wanted output should be displayed like below when I execute <code>test_ssh.pl</code></p>\n\n<p><code>HOST:deb-2-scripting</code> </p>\n\n<p>and last line shouldn't be printed which shows in my output result above.</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1565906795, "creation_date": 1565906795, "answer_id": 57516764, "question_id": 57507625, "link": "https://stackoverflow.com/questions/57507625/documentation-on-serving-static-files/57516764#57516764", "title": "Documentation on Serving static files", "body": "<p>This is also briefly covered in <a href=\"https://metacpan.org/pod/Mojolicious::Guides::Tutorial#Static-files\" rel=\"nofollow noreferrer\">the tutorial</a>. Basically, before going through the dynamic routes you add with <code>get</code> and so on, it will check if the requested file path is provided in your public directories or data sections. By default the only public directory assigned is <code>public/</code> in your application root. And by default the only class whose <code>__DATA__</code> section is checked is <code>main</code> (as <code>__DATA__</code> section templates are most commonly used for Mojolicious::Lite apps in a single file script).</p>\n\n<p>So as a real example, if you get a request for <code>/foo.txt</code>, it will first check if there is a <code>public/foo.txt</code> file or a <code>foo.txt</code> in the <code>__DATA__</code> section for the <code>main</code> package. If it finds one, it will be served as-is, with some optimizations for browsers that cache static files. If not, it will try to match it to the routes you have declared.</p>\n\n<p>The <code>paths</code> and <code>classes</code> attributes in the Mojolicious::Static object for your application (accessible as the <code>static</code> attribute on the application) can be changed or appended during startup with other places to look.</p>\n\n<pre><code>push @{$app-&gt;static-&gt;paths}, $app-&gt;home-&gt;child('other');\n$app-&gt;static-&gt;classes(['Some::Class']);\n</code></pre>\n"}], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 57516764, "answer_count": 1, "score": 2, "last_activity_date": 1565906850, "creation_date": 1565861492, "last_edit_date": 1565906850, "question_id": 57507625, "link": "https://stackoverflow.com/questions/57507625/documentation-on-serving-static-files", "title": "Documentation on Serving static files", "body": "<p>I have a question about the docs for serving static files... It claims </p>\n\n<blockquote>\n  <p>Static files are automatically served from the public directories of\n  the application, which can be customized with \"paths\" in\n  Mojolicious::Static, or one of the DATA sections from \"classes\" in\n  Mojolicious::Static. And if that's not enough you can also serve them\n  manually with \"reply->static\" in Mojolicious::Plugin::DefaultHelpers\n  and \"reply->file\" in Mojolicious::Plugin::DefaultHelpers.</p>\n</blockquote>\n\n<p>What does it mean by automatically served from public directories and how does it differ from manually serving them?</p>\n\n<p>I guess my question is -> How do you access or use the automatically served pages in your code?</p>\n"}, {"tags": ["java", "shell", "perl", "ssh"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1565854702, "post_id": 57506084, "comment_id": 101480620, "body": "Can we see the Perl script?"}, {"owner": {"reputation": 4022, "user_id": 4146004, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x5FIZ.jpg?s=128&g=1", "display_name": "nullPointer", "link": "https://stackoverflow.com/users/4146004/nullpointer"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1565855553, "post_id": 57506084, "comment_id": 101480914, "body": "@JGNI Perl script added (after removing few irrelevant / sensitive parts). Could it be that the output goes to stderr ? Unfortunately not very familiar with Perl..."}, {"owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "edited": false, "score": 1, "creation_date": 1565855658, "post_id": 57506084, "comment_id": 101480947, "body": "You&#39;re reading only stdout. Perhaps the script writes to stderr?"}, {"owner": {"reputation": 93172, "user_id": 1734130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZ5Sn.png?s=128&g=1", "display_name": "mvp", "link": "https://stackoverflow.com/users/1734130/mvp"}, "edited": false, "score": 1, "creation_date": 1565855784, "post_id": 57506084, "comment_id": 101480989, "body": "Most likely your Perl script output is mostly going to stderr. You have to find out a way to retrieve stderr from Ganymed, not just stdout."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1565855940, "post_id": 57506084, "comment_id": 101481053, "body": "warn() in Perl print&#39;s to STDERR and your main Java program is only capturing from STDOUT . Change the warn() to print()"}], "answers": [{"comments": [{"owner": {"reputation": 4022, "user_id": 4146004, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x5FIZ.jpg?s=128&g=1", "display_name": "nullPointer", "link": "https://stackoverflow.com/users/4146004/nullpointer"}, "edited": false, "score": 0, "creation_date": 1565876979, "post_id": 57508158, "comment_id": 101489391, "body": "many thanks. Eventually I have redirected stderr to stdout  <code>2&gt;&amp;1</code> at the level of the parent script call on java code (not on perl script) and it worked fine."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1565864176, "creation_date": 1565864176, "answer_id": 57508158, "question_id": 57506084, "link": "https://stackoverflow.com/questions/57506084/no-output-of-perl-script-called-from-java/57508158#57508158", "title": "No output of Perl script called from Java", "body": "<p>The part of your Perl code that produces the output is:</p>\n\n<pre><code>warn Dumper { stdout =&gt; $stdout,\n              stderr =&gt; $stderr,\n              status =&gt; $status };\n</code></pre>\n\n<p>Looking at <a href=\"https://perldoc.pl/functions/warn\" rel=\"nofollow noreferrer\">the documentation for <code>warn()</code></a> we see:</p>\n\n<blockquote>\n  <p>Emits a warning, usually by printing it to <code>STDERR</code></p>\n</blockquote>\n\n<p>But your Java program is reading from <code>STDOUT</code>.</p>\n\n<pre><code>InputStream stdout = new StreamGobbler(sess.getStdout());\n</code></pre>\n\n<p>You have a couple of options.</p>\n\n<ol>\n<li>Change your Perl code to send the output to <code>STDOUT</code> instead of <code>STDERR</code>. This could be a simple as changing <code>warn()</code> to <code>print()</code>.</li>\n<li><p>When calling the Perl program in the shell script, <a href=\"https://www.brianstorti.com/understanding-shell-script-idiom-redirect/\" rel=\"nofollow noreferrer\">redirect <code>STDERR</code> to <code>STDOUT</code></a>.</p>\n\n<pre><code>/u01/app/perl_script.pl 2&gt;&amp;1\n</code></pre></li>\n</ol>\n\n<p>I guess you could also set up your Java program to read from <code>STDERR</code> as well. But I'm not a Java programmer, so I wouldn't be able to advise you on the best way to do that.</p>\n"}], "owner": {"reputation": 4022, "user_id": 4146004, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x5FIZ.jpg?s=128&g=1", "display_name": "nullPointer", "link": "https://stackoverflow.com/users/4146004/nullpointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 57508158, "answer_count": 1, "score": 0, "last_activity_date": 1565864176, "creation_date": 1565853336, "last_edit_date": 1565855494, "question_id": 57506084, "link": "https://stackoverflow.com/questions/57506084/no-output-of-perl-script-called-from-java", "title": "No output of Perl script called from Java", "body": "<p>I am using Ganymed ssh lib in Java to connect to Linux machine and execute some unix scripts, and display their output.</p>\n\n<p>I am running a parent shell script which in turn runs few other sub-scripts and finally a perl script. All work well for the shell scripts, but when it reaches the perl script, I stop getting any output.</p>\n\n<p><strong>If I run the parent script manually on Linux server I see output from perl without issues</strong>.</p>\n\n<p>Here's the relevant java code, connecting to the machine and calling the shell script, and returning a BufferedReader from where the output could be read line by line :</p>\n\n<pre><code>try {\n            conn = new Connection(server);\n            conn.connect();\n            boolean isAuthenticated = conn.authenticateWithPublicKey(user, keyfile, keyfilePass);\n            if (isAuthenticated == false) {\n                throw new IOException(\"Authentication failed.\");\n            }\n            sess = conn.openSession();\n            if (param == null) {\n                sess.execCommand(\". ./.bash_profile; cd $APP_HOME; ./parent_script.sh\");\n            }\n            else {...}\n\n            InputStream stdout = new StreamGobbler(sess.getStdout());\n            reader = new BufferedReader(new InputStreamReader(stdout));\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n\n<p>My parent shell script called looks like this :</p>\n\n<pre><code>./start1  #script1 output OK\n./start2  #script2 output OK\n./start3  #script3 output OK\n/u01/app/perl_script.pl # NO OUTPUT HERE :(\n</code></pre>\n\n<p>Would anyone have any idea why this happens ?</p>\n\n<p><strong>EDIT : Adding perl script</strong></p>\n\n<pre><code>#!/u01/app/repo/code/sh/perl.sh\nuse FindBin qw/ $Bin /;\nuse File::Basename qw/ dirname /;\nuse lib (dirname($Bin). \"/pm\" );\nuse Capture::Tiny qw/:all/;\nuse Data::Dumper;\nuse Archive::Zip;\nuse XML::Simple;\nuse MXA;\nmy $mx = new MXA;\nchdir $mx-&gt;config-&gt;{$APP_HOME};\nwarn Dumper { targets =&gt; $mx-&gt;config-&gt;{RTBS} };\nforeach my $target (keys %{ $mx-&gt;config-&gt;{RTBS}-&gt;{Targets} }) {\n        my $cfg = $mx-&gt;config-&gt;{RTBS}-&gt;{Targets}-&gt;{$target};\n        my @commands = (\n                                        [\n                                        ...\n                                        ],\n                                        [\n                                        'unzip',\n                                        '-o',\n                                        \"$cfg-&gt;{ConfigName}.zip\",\n                                        'Internal/AdapterConfig/Driver.xml'\n                                        ],\n                    [\n                    'zip',\n                    \"$cfg-&gt;{ConfigName}.zip\",\n                    'Internal/AdapterConfig/Driver.xml'\n                    ],\n                    [\n                    'rm -rf Internal'\n                    ],\n                    [\n                    \"rm -f $cfg-&gt;{ConfigName}.zip\"\n                    ],\n                                );\n        foreach my $cmnd (@commands) {\n                warn Dumper { command =&gt; $cmnd };\n                my ($stdout, $stderr, $status) = capture {\n                        system(@{ $cmnd });\n                };\n                warn Dumper { stdout =&gt; $stdout,\n                                                stderr =&gt; $stderr,\n                                                status =&gt; $status };\n        }\n=pod\n        warn \"runnnig -scriptant /ANT_FILE:mxrt.RT_${target}argets_std.xml /ANT_TARGET:exportConfig -jopt:-DconfigName=Fixing -jopt:-DfileName=Fixing.zip');\n        ($stdout, $stderr, $status) = capture {\n                system('./command.app', '-scriptant -parameters');\n        }\n        ($stdout, $stderr, $status) = capture {\n                system('unzip Real-time.zip Internal/AdapterConfig/Driver.xml');\n        };\n        my $xml = XMLin('Internal/AdapterConfig/MDPDriver.xml');\n        print Dumper { xml =&gt; $xml };\n   [[ ${AREAS} == \"pr\" ]] &amp;&amp; {\n      ${PREFIX}/substitute_mdp_driver_parts Internal/AdapterConfig/Driver.xml 123 controller@mdp-a-n1,controller@mdp-a-n2\n   } || {\n      ${PREFIX}/substitute_mdp_driver_parts Internal/AdapterConfig/Driver.xml z8pnOYpulGnWrR47y5UH0e96IU0OLadFdW/Bm controller@md-uat-n1,controller@md-uat-n2\n   }\n   zip Real-time.zip Internal/AdapterConfig/Driver.xml\n   rm -rf Internal\n   rm -f Real-time.zip\n        print $mx-&gt;Dump( stdout =&gt; $stdout,\n                                   stderr =&gt; $stderr,\n                                   status =&gt; $status );\n=cut\n}\n</code></pre>\n"}]