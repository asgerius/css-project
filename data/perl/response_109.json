[{"tags": ["perl", "freebsd"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1486592285, "post_id": 42124674, "comment_id": 71417451, "body": "Try <a href=\"https://metacpan.org/search?q=bsd\" rel=\"nofollow noreferrer\">searching on metacpan.org</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486596855, "post_id": 42124674, "comment_id": 71419304, "body": "Are you asking if there&#39;s a drop-in replacement? I&#39;m sure you already looked, so the answer is obviously no. So what exactly are you asking?"}, {"owner": {"reputation": 13, "user_id": 5376219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64bc90e7c58db6e30ca5ff6c58958a1?s=128&d=identicon&r=PG&f=1", "display_name": "pepesz", "link": "https://stackoverflow.com/users/5376219/pepesz"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1486640752, "post_id": 42124674, "comment_id": 71437818, "body": "@Schwern: Thanks for the tip, I will try to get something from there."}, {"owner": {"reputation": 13, "user_id": 5376219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64bc90e7c58db6e30ca5ff6c58958a1?s=128&d=identicon&r=PG&f=1", "display_name": "pepesz", "link": "https://stackoverflow.com/users/5376219/pepesz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486640960, "post_id": 42124674, "comment_id": 71437947, "body": "@ikegami: I&#39;m asking because there might be something (slightly different name or name convention) which I missed. Otherwise I&#39;m asking how to adjust the script to have it working on the freebsd system."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5376219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64bc90e7c58db6e30ca5ff6c58958a1?s=128&d=identicon&r=PG&f=1", "display_name": "pepesz", "link": "https://stackoverflow.com/users/5376219/pepesz"}, "edited": false, "score": 0, "creation_date": 1486640684, "post_id": 42130042, "comment_id": 71437780, "body": "I mount /proc and then tried to make the Sys::Statistics::Linux. Running <code>make test</code> outputs bunch of <code>skipped: it seems that your system doesn&#39;t provide cpu (etc.) statistics</code> and then it stops with error: <code>Error code 255</code>. Full output: <a href=\"http://pastebin.com/a3XDGGJG\" rel=\"nofollow noreferrer\">link</a>."}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 13, "user_id": 5376219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64bc90e7c58db6e30ca5ff6c58958a1?s=128&d=identicon&r=PG&f=1", "display_name": "pepesz", "link": "https://stackoverflow.com/users/5376219/pepesz"}, "edited": false, "score": 0, "creation_date": 1486644848, "post_id": 42130042, "comment_id": 71440594, "body": "You have a permissions issue, if procfs is mounted properly. Is <code>&#47;proc&#47;sys&#47;kernel&#47;hostname</code> present and is readable on you system?"}, {"owner": {"reputation": 13, "user_id": 5376219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64bc90e7c58db6e30ca5ff6c58958a1?s=128&d=identicon&r=PG&f=1", "display_name": "pepesz", "link": "https://stackoverflow.com/users/5376219/pepesz"}, "edited": false, "score": 0, "creation_date": 1486663861, "post_id": 42130042, "comment_id": 71454049, "body": "I&#39;m bit confused. This is the content of the /proc:  <code>0&#47; 10&#47; 11&#47; 13&#47; 15&#47; 17&#47; 19&#47; 194&#47; 20&#47; 21&#47; 23&#47; 24&#47; 255&#47; 29489&#47; 3810&#47; 44696&#47; 5&#47; 57605&#47; 59477&#47; 59624&#47; 6&#47; 60211&#47; 60321&#47; 60494&#47; 60717&#47; 60976&#47; 61556&#47; 62756&#47; 68854&#47; 8&#47; 9&#47; 9112&#47; 1&#47; 10808&#47; 12&#47; 14&#47; 16&#47; 18&#47; 19358&#47; 2&#47; 207&#47; 22&#47; 238&#47; 24266&#47; 28788&#47; 3&#47; 4&#47; 45350&#47; 5340&#47; 59364&#47; 59497&#47; 59855&#47; 60061&#47; 60276&#47; 60492&#47; 60611&#47; 60925&#47; 61306&#47; 6219&#47; 66907&#47; 7&#47; 8424&#47; 9048&#47; curproc@</code>"}, {"owner": {"reputation": 13, "user_id": 5376219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64bc90e7c58db6e30ca5ff6c58958a1?s=128&d=identicon&r=PG&f=1", "display_name": "pepesz", "link": "https://stackoverflow.com/users/5376219/pepesz"}, "edited": false, "score": 0, "creation_date": 1486664291, "post_id": 42130042, "comment_id": 71454306, "body": "This in on the opnsense 17.1 system which is build on freebsd 11. Not sure if this might be the reason - probably not. I&#39;m linux user and playing with bsd for just last two days, so it is not easy for me to know what should I expect, which makes it more tricky. Thanks!"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 13, "user_id": 5376219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64bc90e7c58db6e30ca5ff6c58958a1?s=128&d=identicon&r=PG&f=1", "display_name": "pepesz", "link": "https://stackoverflow.com/users/5376219/pepesz"}, "edited": false, "score": 0, "creation_date": 1486669310, "post_id": 42130042, "comment_id": 71457115, "body": "it looks like you have only limited set of information in <code>proc</code> on FreeBSD. <code>man procfs</code>: &quot;The process file system, or procfs, implements a view of the system process table inside the file system.&quot; So there is no <code>&#47;proc&#47;sys&#47;kernel&#47;hostname</code>. If you want to use the script after all you should gather required information with <a href=\"https://www.freebsd.org/cgi/man.cgi?sysctl(8)\" rel=\"nofollow noreferrer\">sysctl</a> and put it on right place. Example for hostname: <code>sysctl  kern.hostname</code>. Or you switch to something BSD convenient like <a href=\"https://metacpan.org/pod/BSD::Sysctl\" rel=\"nofollow noreferrer\">BSD::Sysctl</a>"}], "tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": false, "score": 1, "last_activity_date": 1486622921, "creation_date": 1486622921, "answer_id": 42130042, "question_id": 42124674, "link": "https://stackoverflow.com/questions/42124674/perl-sysstatisticslinux-equivalent-in-freebsd/42130042#42130042", "title": "perl Sys::Statistics::Linux equivalent in FreeBSD?", "body": "<p><a href=\"https://metacpan.org/pod/Sys::Statistics::Linux#TECHNICAL-NOTE\" rel=\"nofollow noreferrer\">Sys::Statistics::Linux</a> uses <a href=\"https://www.freebsd.org/cgi/man.cgi?query=procfs&amp;sektion=&amp;n=1\" rel=\"nofollow noreferrer\">procfs</a>, but FreeBSD unlike Linux doesn't offers procfs on default. So to use the aforementioned script you have to <a href=\"https://www.freebsd.org/doc/en/articles/linux-users/procfs.html\" rel=\"nofollow noreferrer\">mount</a> procfs manually and - because there is no FreeBSD <a href=\"https://www.freebsd.org/cgi/ports.cgi?query=Sys%3A%3AStatistics%3A%3ALinux&amp;stype=all\" rel=\"nofollow noreferrer\">port</a> - to install <a href=\"https://metacpan.org/pod/Sys::Statistics::Linux#TECHNICAL-NOTE\" rel=\"nofollow noreferrer\">Sys::Statistics::Linux</a> manually.</p>\n\n<blockquote>\n  <p>If an application requires procfs, add the following entry to\n  <code>/etc/fstab</code>:</p>\n  \n  <p><code>proc                /proc           procfs  rw,noauto       0       0</code></p>\n  \n  <p>Including noauto will prevent /proc from being automatically mounted\n  at boot.</p>\n  \n  <p>To mount the file system without rebooting:</p>\n  \n  <p><code># mount /proc</code></p>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 5376219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64bc90e7c58db6e30ca5ff6c58958a1?s=128&d=identicon&r=PG&f=1", "display_name": "pepesz", "link": "https://stackoverflow.com/users/5376219/pepesz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486622921, "creation_date": 1486592180, "question_id": 42124674, "link": "https://stackoverflow.com/questions/42124674/perl-sysstatisticslinux-equivalent-in-freebsd", "title": "perl Sys::Statistics::Linux equivalent in FreeBSD?", "body": "<p>Dear community members,</p>\n\n<p>Under linux I had a script (<a href=\"http://pastebin.com/MXEW6DF4\" rel=\"nofollow noreferrer\">lcd_sysmon</a>) which was showing system info on the lcd 20x4 display(via LCDd). Now I'm trying to use it on FreeBSD but it gives me an error:</p>\n\n<blockquote>\n  <p>Can't locate object method \"new\" via package \"Sys::Statistics::Linux\"\n  (perhaps you forgot to load \"Sys::Statistics::Linux\"?) at lcd_sysmon\n  line 73.</p>\n</blockquote>\n\n<p>Can someone point me to the proper solution. Is there an equivalent for Sys::Statistics::Linux on the FreeBSD?</p>\n\n<p>Thanks in advance.\npepesz</p>\n"}, {"tags": ["json", "perl", "decode"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1486590506, "post_id": 42124147, "comment_id": 71416605, "body": "And what is the string that you&#39;re trying to run <code>decode_json</code> on???"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1486590676, "post_id": 42124147, "comment_id": 71416674, "body": "Which JSON module are you using? Using JSON.pm and LWP::Simple it Works For Me\u2122"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1486590910, "post_id": 42124147, "comment_id": 71416788, "body": "<code>at character offset 0 (before &quot;(end of string)&quot;)</code> indicates an empty string (or undef) was passed to <code>decode_json</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1486594928, "post_id": 42124147, "comment_id": 71418633, "body": "If that&#39;s your real API key, you should get a new one immediately."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 5, "last_activity_date": 1486591837, "creation_date": 1486591837, "answer_id": 42124593, "question_id": 42124147, "link": "https://stackoverflow.com/questions/42124147/malformed-json-string-perl-youtube-api-key/42124593#42124593", "title": "Malformed json string perl, youtube api key", "body": "<p>The problem is you're getting nothing back from <code>get</code>. The query is failing and you're not checking for an error. (Don't worry, it took me a while to figure this out, too). The clue is <code>at character offset 0</code> meaning the start of the string.</p>\n\n<p>LWP::Simple is too simple and does not support error checking. Instead, use the full blown LWP::UserAgent. Fortunately <a href=\"https://metacpan.org/pod/LWP::UserAgent#REQUEST-METHODS\" rel=\"noreferrer\">it's gotten a lot easier to use</a>.</p>\n\n<pre><code>use LWP::UserAgent;\nuse Carp;\n\n...\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $response = $ua-&gt;get($strLink);\nif( !$response-&gt;is_success ) {\n    croak \"Fetching $strLink failed: \".$response-&gt;status_line;\n}\n\nmy $arrDetails = decode_json($response-&gt;decoded_content);\n</code></pre>\n\n<p>In my case, the problem is this:</p>\n\n<pre><code>Fetching https://www.googleapis.com/youtube/v3/videos?id=YqeW9_5kURI&amp;key=AIzaSyBpzQDzTu7e59mxD9HxYP3MTdlCUWzuirQ&amp;part=snippet failed: 501 Protocol scheme 'https' is not supported (LWP::Protocol::https not installed) at /Users/schwern/tmp/test.pl line 15.\n    main::getMusicInformation(10) called at /Users/schwern/tmp/test.pl line 30\n</code></pre>\n\n<p>So I need to install LWP::Protocol::https to have https support. You probably do, too.</p>\n"}], "owner": {"reputation": 99, "user_id": 6365035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P4uuN.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6365035/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486591837, "creation_date": 1486590012, "question_id": 42124147, "link": "https://stackoverflow.com/questions/42124147/malformed-json-string-perl-youtube-api-key", "title": "Malformed json string perl, youtube api key", "body": "<p>i am getting an error which i can't find the solution for .. i've spent hours on it and didn't find any fix yet. Maybe, you could help me out ? It's in perl and this is the code I am using.</p>\n\n<pre><code>method getMusicInformation($strMusicID) {\n    my $strLink = \"https://www.googleapis.com/youtube/v3/videos?id=YqeW9_5kURI&amp;key=AIzaSyBpzQDzTu7e59mxD9HxYP3MTdlCUWzuirQ&amp;part=snippet\";\n    my $strDetails = get($strLink);\n    my $arrDetails = decode_json($strDetails);\n    while (my($key, $value) = each(%{$arrDetails})) {\n        if (ref($value) eq 'ARRAY') {\n            while (my($second_key, $second_value) = each(@{$value})) {\n                return $second_value;\n            }\n        }\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>And there is the error i get in the console:</p>\n\n<pre><code>Error: malformed JSON string, neither array, object, number, string or atom, at character offset 0 (before \"(end of string)\") at Server/Systems/Music.pm line 38.\n</code></pre>\n\n<p>The line 38 is:</p>\n\n<pre><code>my $arrDetails = decode_json($strDetails);\n</code></pre>\n\n<p>Thank you for understanding.</p>\n"}, {"tags": ["perl", "docker"], "comments": [{"owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 0, "creation_date": 1486581687, "post_id": 42121730, "comment_id": 71411661, "body": "show a reproducer, at least the Dockerfile at the whole <code>docker run</code>"}, {"owner": {"reputation": 13, "user_id": 5688562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10be401262373e7bd7f163f45bbc99c0?s=128&d=identicon&r=PG", "display_name": "Phill93", "link": "https://stackoverflow.com/users/5688562/phill93"}, "reply_to_user": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 0, "creation_date": 1486582299, "post_id": 42121730, "comment_id": 71412003, "body": "You can find the docker file here <a href=\"http://github.com/Phill93/docker-fhem\" rel=\"nofollow noreferrer\">github.com/Phill93/docker-fhem</a>"}, {"owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 0, "creation_date": 1486583081, "post_id": 42121730, "comment_id": 71412489, "body": "When you launch <code>sudo -u &quot;$FHEMUSER&quot; -H perl &quot;$FHEMFILE&quot; &quot;$CONFIGFILE&quot;</code> in a Linux system (and not in a container), does it work?"}, {"owner": {"reputation": 13, "user_id": 5688562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10be401262373e7bd7f163f45bbc99c0?s=128&d=identicon&r=PG", "display_name": "Phill93", "link": "https://stackoverflow.com/users/5688562/phill93"}, "reply_to_user": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "edited": false, "score": 0, "creation_date": 1486583305, "post_id": 42121730, "comment_id": 71412625, "body": "Yes but the process forks to background"}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 0, "last_activity_date": 1486583305, "creation_date": 1486583305, "answer_id": 42122317, "question_id": 42121730, "link": "https://stackoverflow.com/questions/42121730/docker-forking-process/42122317#42122317", "title": "Docker forking process", "body": "<p>If you have control over the software, you could emulate a number of other pieces of software that have a \"don't fork into the background\" mode, and add a flag to your startup that skips the background fork.  This would probably be the most straight-forward.</p>\n\n<p>Alternatively, you can create an entrypoint script that starts your application and then simply adds a <code>while true; do sleep 1000; done</code> after starting the application.  That way, the entrypoint never returns, and the docker container continues to run.</p>\n"}, {"tags": [], "owner": {"reputation": 1641, "user_id": 7527436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da2b5613a6f66629ad967c5b18ef4545?s=128&d=identicon&r=PG&f=1", "display_name": "fzgregor", "link": "https://stackoverflow.com/users/7527436/fzgregor"}, "is_accepted": true, "score": 0, "last_activity_date": 1486588322, "creation_date": 1486588322, "answer_id": 42123689, "question_id": 42121730, "link": "https://stackoverflow.com/questions/42121730/docker-forking-process/42123689#42123689", "title": "Docker forking process", "body": "<p>@Tanktalus is right, making your software not fork would be the best approach.</p>\n\n<p>If that is not possible, however, you have to make your container start script run as long as your serving process. There are two caveats to this:</p>\n\n<ol>\n<li>The script has to terminate when the serving process terminates. Otherwise, docker would be unaware of its termination and the container would be kept running. Making sure your service is running with options such as <code>--restart=always</code> would have no effect.</li>\n<li>On a comparable note it would be advantageous if the script also terminates with the same exit code as the serving process. This may make debugging issues easier.</li>\n</ol>\n\n<p>Luckily, there is the bash command <code>wait</code> for that. Let's have an example:</p>\n\n<pre><code>$ cat docker_test.sh \nperl -e \"sleep(5); exit(42);\" &amp;\nwait `pgrep perl`\n</code></pre>\n\n<p>What happens here is that 1) <code>pgrep perl</code> will find the pid of the <code>perl</code> process sleeping in the background and 2) <code>wait</code> will wait for that process to terminate. Furthermore, <code>wait</code> will return the exit code of <code>perl</code>. Everything we need:</p>\n\n<pre><code>$ ./docker_test.sh \n$ echo $?\n42\n</code></pre>\n\n<p>With docker we get this:</p>\n\n<pre><code>$ docker run -d -v `pwd`/docker_test.sh:/docker_test.sh ubuntu bash /docker_test.sh\n537bdfc04554461da7dd6728ca721e4789a08e426adcc01a3359ed22fd16aa1f\n[waiting 5 secs]\n$ docker ps -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS                            PORTS               NAMES\n537bdfc04554        ubuntu              \"bash /docker_test.sh\"   41 seconds ago       Exited (42) 34 seconds ago                            happy_almeida\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5688562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10be401262373e7bd7f163f45bbc99c0?s=128&d=identicon&r=PG", "display_name": "Phill93", "link": "https://stackoverflow.com/users/5688562/phill93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2973, "favorite_count": 0, "accepted_answer_id": 42123689, "answer_count": 2, "score": 0, "last_activity_date": 1486588322, "creation_date": 1486581278, "last_edit_date": 1486583099, "question_id": 42121730, "link": "https://stackoverflow.com/questions/42121730/docker-forking-process", "title": "Docker forking process", "body": "<p>I have a problem with a Docker Container that should run the SmartHome Application \"FHEM\". The problem is that after the start the initial process forks into background and quits after that the docker Container stops.</p>\n\n<p>How can i prevent this?</p>\n"}, {"tags": ["perl", "templating", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486577596, "post_id": 42120196, "comment_id": 71409387, "body": "<code>get_data_template</code> is for <code>__DATA__</code> sections, not files."}, {"owner": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486577935, "post_id": 42120196, "comment_id": 71409563, "body": "Ok, managed to make it work with a <b>DATA</b> section, but can I do the same with files?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486579552, "post_id": 42120196, "comment_id": 71410519, "body": "I&#39;ve found it. See my update."}, {"owner": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486579819, "post_id": 42120196, "comment_id": 71410664, "body": "Yes, this is it"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "edited": false, "score": 0, "creation_date": 1486578297, "post_id": 42120730, "comment_id": 71409786, "body": "I&#39;ve tried to use render_to_string, but it doesn&#39;t work in a standalone script"}, {"owner": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "edited": false, "score": 0, "creation_date": 1486578362, "post_id": 42120730, "comment_id": 71409839, "body": "Going to put the whole e-mail template to the DATA section"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "edited": false, "score": 0, "creation_date": 1486578366, "post_id": 42120730, "comment_id": 71409844, "body": "@Victor it needs a <code>$c</code> as well I think. You should read the source of the Renderer. You need a handler, and then you can do some part of what <code>_render_template</code> does yourself. Maybe if the template gets loaded properly it will just work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "edited": false, "score": 0, "creation_date": 1486578386, "post_id": 42120730, "comment_id": 71409853, "body": "@Victor that would be the easy way out I guess, but maintenance hell :("}, {"owner": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "edited": false, "score": 0, "creation_date": 1486578701, "post_id": 42120730, "comment_id": 71410039, "body": "Found out that get_data_template does not render anything, it just does what it&#39;s name says: returns the DATA section content"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "edited": false, "score": 0, "creation_date": 1486578831, "post_id": 42120730, "comment_id": 71410096, "body": "@Victor that&#39;s what I said in my first sentence ;)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 11, "last_activity_date": 1486579542, "last_edit_date": 1486579542, "creation_date": 1486577960, "answer_id": 42120730, "question_id": 42120196, "link": "https://stackoverflow.com/questions/42120196/how-can-i-use-mojolicious-rendering-in-a-standalone-perl-script/42120730#42120730", "title": "How can I use Mojolicious rendering in a standalone Perl script?", "body": "<p>You are using <a href=\"https://metacpan.org/pod/Mojolicious::Renderer#get_data_template\" rel=\"noreferrer\"><code>get_data_template</code></a> from Mojo::Renderer, which is used for loading templates from the <code>__DATA__</code> section of your current source code file. </p>\n\n<p><strong>In fact, Mojo::Renderer is the wrong thing to use</strong>. You want <a href=\"https://metacpan.org/pod/Mojo::Template\" rel=\"noreferrer\">Mojo::Template</a>, the stand-alone template engine as a module.</p>\n\n<pre><code>use Mojo::Template;\n\nmy $mt = Mojo::Template-&gt;new( vars =&gt; 1 );\nmy $email_body = $mt-&gt;render_file( 'test.html.ep', { one =&gt; 1, two =&gt; 2 } );\nsay $email_body;\n</code></pre>\n\n<p>With <em>test.html.ep</em>:</p>\n\n<pre><code>The magic numbers are &lt;%= $one %&gt; and &lt;%= $two %&gt;.\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The magic numbers are 1 and 2.\n</code></pre>\n\n<p>The <a href=\"https://metacpan.org/pod/Mojo::Template#vars\" rel=\"noreferrer\">option <code>vars</code></a> is important so it accepts named variables instead of an argument list.</p>\n"}], "owner": {"reputation": 117, "user_id": 2581457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3c9ad5e756cd473fb7e3d498f6db0?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/2581457/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 42120730, "answer_count": 1, "score": 7, "last_activity_date": 1605611304, "creation_date": 1486576163, "last_edit_date": 1605611304, "question_id": 42120196, "link": "https://stackoverflow.com/questions/42120196/how-can-i-use-mojolicious-rendering-in-a-standalone-perl-script", "title": "How can I use Mojolicious rendering in a standalone Perl script?", "body": "<p>I want to render <code>.html.ep</code> templates using Mojolicious rendering engine in a standalone script which sends e-mails and is run from cron:</p>\n<pre><code>#!/usr/bin/perl\n\nuse feature ':5.10';\n\nuse Mojo::Base -strict;\nuse Mojolicious::Renderer;\nuse Data::Dumper;\n\n\nmy $renderer = Mojolicious::Renderer-&gt;new();\npush @{$renderer-&gt;paths}, '/app/templates';\n\nmy $template = $renderer-&gt;get_data_template({\n    template =&gt; 'template_name',\n    format =&gt; 'html',\n    handler =&gt; 'ep'\n});\n\nprint Dumper($template) . &quot;\\n&quot;;\n    \n</code></pre>\n<p>However, <code>$template</code> is always undefined.</p>\n<p>The template file is <code>/app/templates/template_name.html.ep</code>.</p>\n<p>What am I doing wrong?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486571927, "post_id": 42118725, "comment_id": 71405839, "body": "Take a look at <a href=\"http://search.cpan.org/~tyemq/Data-Diver-1.0101/Diver.pm\" rel=\"nofollow noreferrer\"><code>Data::Diver</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486572321, "post_id": 42118796, "comment_id": 71406100, "body": "@Hunter McMillen, <a href=\"http://stackoverflow.com/a/37417801/589924\">Explanation of the above code</a>. In particular, read &quot;The extra level of indirection has many benefits&quot; section."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486572799, "post_id": 42118796, "comment_id": 71406435, "body": "@Hunter McMillen, <code>sub {    my $r = shift;    $r &amp;&amp;= $r-&gt;{$_} for @_;    $r }</code> would be fine if you wanted to fetch from the structure, but since we&#39;re adding to the structure, we need to end up with a reference to the last value. You can do that by handling the last key specially, but the extra level of indirection makes things so much easier."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486586604, "post_id": 42118796, "comment_id": 71414514, "body": "@Hunter McMillen, <a href=\"http://stackoverflow.com/a/42078643/589924\">This</a> does something similar, but uses aliases instead of references. Aliases using Data::Alias: <code>sub DiveVal :lvalue { alias my $s = shift;  alias $s = $s-&gt;{$_} for @_; $s }</code>. Aliases using the <code>refaliasing</code> feature: <code>sub DiveVal :lvalue { \\my $s = \\shift;  \\$s = \\( $s-&gt;{$_} ) for @_; $s }</code>."}, {"owner": {"reputation": 31, "user_id": 4083060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbc6c5a1c63dd27ab37640735b3a09c0?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilien", "link": "https://stackoverflow.com/users/4083060/maximilien"}, "edited": false, "score": 0, "creation_date": 1486629871, "post_id": 42118796, "comment_id": 71430525, "body": "@ikegami, Your soltion looks good but unfortunatly, that script must but run on a system on which I cannot install any additional modules and that module is not available on the target machine. I will try to find an other solution without creating the hash in that way"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1486572897, "last_edit_date": 1486572897, "creation_date": 1486571999, "answer_id": 42118796, "question_id": 42118725, "link": "https://stackoverflow.com/questions/42118725/perl-using-array-to-create-hash-of-hash-structure/42118796#42118796", "title": "Perl: using array to create hash of hash structure", "body": "<pre><code>use Data::Diver qw( DiveVal );\n\nDiveVal(\\%hash, map \\$_, @array, $dataname) = $datavalue;\n</code></pre>\n\n<p>Alternatively,</p>\n\n<pre><code>sub DiveVal :lvalue {\n   my $p = \\shift;\n   $p = \\( $$p-&gt;{$_} ) for @_;\n   $$p\n}\n\nDiveVal(\\%hash, @array, $dataname) = $datavalue;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3058, "user_id": 7540911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6917a4235078edd5bfdc86b37071a108?s=128&d=identicon&r=PG&f=1", "display_name": "Nullman", "link": "https://stackoverflow.com/users/7540911/nullman"}, "is_accepted": true, "score": 0, "last_activity_date": 1486670863, "creation_date": 1486670863, "answer_id": 42145913, "question_id": 42118725, "link": "https://stackoverflow.com/questions/42118725/perl-using-array-to-create-hash-of-hash-structure/42145913#42145913", "title": "Perl: using array to create hash of hash structure", "body": "<p>you can do it this way, its not the most efficient but it works</p>\n\n<pre><code>use Data::Dumper;\n\nmy @array = ('a','b','c');\nmy $dataname = 'my data';\nmy $datavalue = '123';\n\nmy $hash = {$dataname =&gt; $datavalue};\n\nforeach my $item (reverse @array){\n    $hash = {$item =&gt;$hash};\n}\nmy %hash =%$hash;\nprint Dumper(\\%hash);\n</code></pre>\n\n<p>you will get the following output:</p>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; {\n                   'b' =&gt; {\n                            'c' =&gt; {\n                                     'my data' =&gt; '123'\n                                   }\n                          }\n                 }\n        };\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4083060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbc6c5a1c63dd27ab37640735b3a09c0?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilien", "link": "https://stackoverflow.com/users/4083060/maximilien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 42145913, "answer_count": 2, "score": 0, "last_activity_date": 1486670863, "creation_date": 1486571792, "last_edit_date": 1486572881, "question_id": 42118725, "link": "https://stackoverflow.com/questions/42118725/perl-using-array-to-create-hash-of-hash-structure", "title": "Perl: using array to create hash of hash structure", "body": "<p>within a loop I retreive</p>\n\n<ul>\n<li>An array (its length and data might change at each iteration)</li>\n<li>1 Data name</li>\n<li>1 Data value</li>\n</ul>\n\n<p>And I would like to create a hash of hash having as structure the array and set at the end the data retreived.</p>\n\n<p>exemple if I have:</p>\n\n<pre><code>@array = ('a','b','c');\n$dataname = 'my data';\n$datavalue = '123';\n</code></pre>\n\n<p>I would like to have a hash as below:</p>\n\n<pre><code>%hash = (\n     a =&gt; {\n           b =&gt; {\n                 c =&gt; {\n                       'my data' =&gt; '123'\n                      }\n                }\n          }\n          );\n</code></pre>\n\n<p>But i didn't find anywhere how to do it.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1486569333, "post_id": 42117688, "comment_id": 71403903, "body": "Are you sure that you are generating a hash of hashes ?"}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1486569853, "post_id": 42117688, "comment_id": 71404271, "body": "I need this code to work. I dont know whats wrong I am doing. Can you please help."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1486570341, "last_edit_date": 1486570341, "creation_date": 1486569876, "answer_id": 42117996, "question_id": 42117688, "link": "https://stackoverflow.com/questions/42117688/issue-with-hash-of-hash-in-perl/42117996#42117996", "title": "Issue with hash of hash in perl", "body": "<p>You should <strong>always</strong> <code>use strict</code> and <code>use warnings</code> in all your Perl programs. Turning them on showed me this error (after declaring variables using <code>my</code>).</p>\n\n<blockquote>\n  <p>Can't use string (\"%hash\") as a HASH ref while \"strict refs\" in use</p>\n</blockquote>\n\n<p>The line in question is exactly the one you were thinking.</p>\n\n<blockquote>\n<pre><code>print $hs{'e'}{'game'};\n</code></pre>\n</blockquote>\n\n<p>But now it's easy to spot.</p>\n\n<blockquote>\n<pre><code>test( c =&gt; '123', d =&gt; '345', e =&gt; \"%hash\" );\n</code></pre>\n</blockquote>\n\n<p>You are trying to interpolate the variable <code>%hash</code> somehow. Or maybe you just thought that's how you make a more-dimensional data structure.</p>\n\n<p>To put a hash into a hash, you need to use a <em>reference</em> in Perl. You can create a reference your <code>%hash</code> by using the <code>\\</code> reference operator.</p>\n\n<pre><code>test( c =&gt; '123', d =&gt; '345', e =&gt; \\%hash );\n</code></pre>\n\n<p>Let's try. I've removed the code that's not relevant.</p>\n\n<pre><code>sub test {\n    my %hs = @_;\n\n    print $hs{'e'}{'game'};\n}\n\nmy %hash = ( 'game' =&gt; '12', 'gh' =&gt; '31' );\ntest( c =&gt; '123', d =&gt; '345', e =&gt; \\%hash );\n</code></pre>\n\n<p>And now your output is:</p>\n\n<pre><code>12\n</code></pre>\n\n<hr>\n\n<p>To learn more about references in Perl, look at [perlref][2] and [perlreftut][3]. You can also look at these tutorials on Perlmaven:</p>\n\n<ul>\n<li><a href=\"https://perlmaven.com/multi-dimensional-arrays-in-perl\" rel=\"nofollow noreferrer\">https://perlmaven.com/multi-dimensional-arrays-in-perl</a></li>\n<li><a href=\"https://perlmaven.com/multi-dimensional-hashes\" rel=\"nofollow noreferrer\">https://perlmaven.com/multi-dimensional-hashes</a></li>\n</ul>\n\n<hr>\n\n<p><sup>\nThis is also one of the reasons why I prefer to use the <code>-&gt;</code> dereferencing operator all the time, so <code>$hs{e}{game}</code> becomes <code>$hs{e}-&gt;{game}</code> although there is no need to do that. Perl will know what you mean. But with the <code>-&gt;</code> it's more obvious that there is a reference. \n</sup></p>\n\n<p><sup>\nAlso note that hashes do not interpolate, so <code>\"%hash\"</code> does not get expanded using <code>$,</code> like <code>\"@array\"</code> would. This might be because hashes are not ordered. Or because you could not do <code>printf \"%s\\n\"</code> if they were. \n</sup></p>\n"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 42117996, "answer_count": 1, "score": 0, "last_activity_date": 1486570341, "creation_date": 1486569070, "last_edit_date": 1486569535, "question_id": 42117688, "link": "https://stackoverflow.com/questions/42117688/issue-with-hash-of-hash-in-perl", "title": "Issue with hash of hash in perl", "body": "<p>Can someone please help me with the below code.</p>\n\n<pre><code>sub test\n  { \n    %hs=@_;\n    print %hs;\n    print \"\\n\";\n    print $hs{'c'}.\"\\n\";\n    print $hs{'d'}.\"\\n\";\n    # print \"\\n\";\n    print $hs{'e'}{'game'}; # Not getting the output for this step. it should be 12 ? \n    print \"\\n\";\n    #print ${$hs{'e'}}{'dv'};\n      foreach $key (sort keys %hs)\n        {\n          print $key.\"\\n\";\n        }\n    }\n\n\n%hash=('game'=&gt;'12','gh'=&gt;'31');\n\nprint $hash{'game'}.\"\\n\";\n\ntest(c=&gt;'123',d=&gt;'345',e=&gt;\"%hash\");\n</code></pre>\n\n<h2>output</h2>\n\n<pre><code>12\ne%hashc123d345\n123\n345\n\nc\nd\ne\nPress any key to continue . . .\n</code></pre>\n\n<p><code>print $hs{'e'}{'game'}</code> is giving me null. Please tell me how to access the hash of the hash.</p>\n\n<p>thanks is advance.</p>\n\n<p>Regards,\nSujeet</p>\n"}, {"tags": ["perl", "uri", "cpan"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1486567166, "post_id": 42116902, "comment_id": 71402362, "body": "Your code works for me when I escape the <code>@</code> or use single quotes."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486567793, "post_id": 42116902, "comment_id": 71402801, "body": "Note that you can report bugs for Perl and core modules (which URI is not) without making an account with RT by using the <a href=\"http://perldoc.perl.org/perlbug.html\" rel=\"nofollow noreferrer\"><code>perlbug</code> utility</a> that is shipped with Perl."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1486574588, "post_id": 42116902, "comment_id": 71407591, "body": "@simbabque And you can submit tickets for non-core modules by sending an email to <code>bug-&lt;distribution-name&gt;@rt.cpan.org</code>, e.g. <code>bug-URI@rt.cpan.org</code>."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486567426, "post_id": 42117054, "comment_id": 71402544, "body": "And then we end up writing almost the same thing :D"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486569192, "post_id": 42117054, "comment_id": 71403812, "body": "@simbabque: I don;t think it&#39;s appropriate to discuss voting or acceptance in comments, or to imply that <i>faster is better</i>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4830, "user_id": 1160106, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/forvP.jpg?s=128&g=1", "display_name": "Samiron", "link": "https://stackoverflow.com/users/1160106/samiron"}, "edited": false, "score": 0, "creation_date": 1486569295, "post_id": 42117054, "comment_id": 71403880, "body": "@Samiron: I suggest that you leave your question open for a day or so to see if anyone has a better answer. The choice is up to you, and speed of response should have no factor. The idea is that you are recommending a solution to other people whose searches bring them to this page."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486569373, "post_id": 42117054, "comment_id": 71403929, "body": "@Borodin that was a joke. I think with over 3k rep the OP will get it. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486569454, "post_id": 42117054, "comment_id": 71403998, "body": "This is good. <b>Sobrique</b> and <b>simbabque</b> should take their time to add to their answers to produce something even better for the community. Both answers will ultimately be very useful."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486569527, "post_id": 42117054, "comment_id": 71404054, "body": "@simbabque: The important thing is whether the OP gets it. I clearly didn&#39;t."}, {"owner": {"reputation": 4830, "user_id": 1160106, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/forvP.jpg?s=128&g=1", "display_name": "Samiron", "link": "https://stackoverflow.com/users/1160106/samiron"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486605733, "post_id": 42117054, "comment_id": 71421894, "body": "Thanks for constructive comments guys. @Borodin it was a fun moment for me when I realized my own mistake and at the same time saw two similar answer here. But I got a good lesson."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 9, "last_activity_date": 1486567362, "creation_date": 1486567362, "answer_id": 42117054, "question_id": 42116902, "link": "https://stackoverflow.com/questions/42116902/perl-uri-class-wrongly-parse-user-info-importance-of-strict-and-warnings-in-pe/42117054#42117054", "title": "Perl URI class wrongly parse user info | Importance of strict and warnings in perl", "body": "<p>Here's a good example of why you should ALWAYS <code>use strict;</code> <code>use warnings;</code>:</p>\n\n<blockquote>\n  <p>Possible unintended interpolation of @host in string </p>\n</blockquote>\n\n<p>That means - you're not actually sending what you think you're sending. Try <code>print</code>ing it and you'll get:</p>\n\n<pre><code>ssh://username/path/to/file.txt\n</code></pre>\n\n<p>Which isn't what you think you're sending. </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse URI;\n\nmy $url = URI-&gt;new(\"ssh://username\\@host/path/to/file.txt\");\nprint \"User: \", $url-&gt;user, \"\\n\";\nprint \"Host: \", $url-&gt;host, \"\\n\";\nprint \"Path: \", $url-&gt;path, \"\\n\";\n</code></pre>\n\n<p>However, does give the desired output.</p>\n\n<p>Note - I've changed the <code>new</code> line, because <code>new URI</code> is indirect object notation, and <code>URI-&gt;new</code> is better style.</p>\n"}, {"comments": [{"owner": {"reputation": 4830, "user_id": 1160106, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/forvP.jpg?s=128&g=1", "display_name": "Samiron", "link": "https://stackoverflow.com/users/1160106/samiron"}, "edited": false, "score": 0, "creation_date": 1486567485, "post_id": 42117068, "comment_id": 71402597, "body": "Thanks I just realized after posting the question and laughing out loud..."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1486567404, "creation_date": 1486567404, "answer_id": 42117068, "question_id": 42116902, "link": "https://stackoverflow.com/questions/42116902/perl-uri-class-wrongly-parse-user-info-importance-of-strict-and-warnings-in-pe/42117068#42117068", "title": "Perl URI class wrongly parse user info | Importance of strict and warnings in perl", "body": "<p><strong>URI is fine.</strong></p>\n\n<p>This is a very good example for why you should always <code>use strict</code> and <code>use warnings</code>.</p>\n\n<pre><code>use URI;\nmy $url = new URI(\"ssh://username@host/path/to/file.txt\");\nprint $url-&gt;user, $url-&gt;host, $url-&gt;path;\n\n__END__\nusername/path/to/file.txt\n</code></pre>\n\n<p>Now with <code>strict</code>.</p>\n\n<pre><code>use strict;\nuse URI;\nmy $url = new URI(\"ssh://username@host/path/to/file.txt\");\nprint $url-&gt;user, $url-&gt;host, $url-&gt;path;\n\n__END__\nGlobal symbol \"@host\" requires explicit package name at /home/simbabque/code/scratch.pl line 1739.\nExecution of /home/simbabque/code/scratch.pl aborted due to compilation errors.\n</code></pre>\n\n<p>And now with <code>use warnings</code> on top.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse URI;\nmy $url = new URI(\"ssh://username@host/path/to/file.txt\");\nprint $url-&gt;user, $url-&gt;host, $url-&gt;path;\n\n__END__\nPossible unintended interpolation of @host in string at /home/simbabque/code/scratch.pl line 1740.\nGlobal symbol \"@host\" requires explicit package name at /home/simbabque/code/scratch.pl line 1740.\nExecution of /home/simbabque/code/scratch.pl aborted due to compilation errors.\n</code></pre>\n\n<p>It's pretty clear what is wrong here. Perl thinks <code>@host</code> is a variable because you have it in double quotes <code>\"\"</code>.</p>\n\n<blockquote>\n  <p>Possible unintended interpolation of @host in string</p>\n</blockquote>\n\n<p>Either escape it using <code>\"user\\@host\"</code> or use single quotes <code>''</code> like <code>'user@host'</code>.</p>\n"}], "owner": {"reputation": 4830, "user_id": 1160106, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/forvP.jpg?s=128&g=1", "display_name": "Samiron", "link": "https://stackoverflow.com/users/1160106/samiron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 42117068, "answer_count": 2, "score": 0, "last_activity_date": 1486605823, "creation_date": 1486566883, "last_edit_date": 1486605823, "question_id": 42116902, "link": "https://stackoverflow.com/questions/42116902/perl-uri-class-wrongly-parse-user-info-importance-of-strict-and-warnings-in-pe", "title": "Perl URI class wrongly parse user info | Importance of strict and warnings in perl", "body": "<pre><code>use URI;\nmy $url = new URI(\"ssh://username@host/path/to/file.txt\");\nprint \"User: \", $url-&gt;user, \"\\n\";\nprint \"Host: \", $url-&gt;host, \"\\n\";\nprint \"Path: \", $url-&gt;path, \"\\n\";\n\noutput&gt;&gt;&gt;\n    User:\n    Host: username\n    Path: /path/to/file.txt\n\n expected output&gt;&gt;&gt;\n    User: username\n    Host: host\n    Path: /path/to/file.txt\n</code></pre>\n\n<p>Another example</p>\n\n<pre><code>use URI; \nmy $url = new URI(\"ssh://username@host/path/to/file.txt\");\nprint $url-&gt;as_string;\n\noutput&gt;&gt;&gt;\nssh://username/path/to/file.txt\n</code></pre>\n\n<p>This clearly a bug right? But no one seems to be bothered at all! No one reported this bug in <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=URI\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Public/Dist/Display.html?Name=URI</a>. I tried to report one but getting bitcard account sucks.</p>\n\n<p>What are you using in your case? Simple regex?</p>\n\n<p>What I am using?</p>\n\n<ul>\n<li>Perl version: v5.10.1</li>\n<li>URI version : 1.37</li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1486562368, "post_id": 42115045, "comment_id": 71398805, "body": "Nope, I&#39;m not following. The first bit - isn&#39;t actually valid perl. Your sample data is too small really to figure out what you actually mean. (a single element hash). Could you spell out more clearly what you&#39;re trying to do?"}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1486562440, "post_id": 42115045, "comment_id": 71398864, "body": "I&#39;ll use more sample data, but the point is I want to loop over hash1 and hash2 simultaneously in order to match the key of one with the value of another."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1486562947, "post_id": 42115045, "comment_id": 71399203, "body": "Added more sample data. I want to match the primary numbered keys of hash 1 with the randomly generated values of hash2."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1486563336, "post_id": 42115045, "comment_id": 71399498, "body": "If you need to do this repeatedly, consider reversing <code>hash2</code> so that its values becomes keys in the new hash.  Then the rest is easy."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486565579, "post_id": 42115417, "comment_id": 71401213, "body": "@snakespan: If that&#39;s what you meant, then you should take note of <b>tripleee&#39;s</b> comment beneath your question."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1486563099, "creation_date": 1486563099, "answer_id": 42115417, "question_id": 42115045, "link": "https://stackoverflow.com/questions/42115045/perl-loop-over-two-hashes/42115417#42115417", "title": "Perl: Loop over two hashes", "body": "<p>Since they are hashes, you don't need to use a loop to perform a lookup by key.</p>\n\n<pre><code>while (my ($key2,$value2) = each %$hash2) {\n    if (exists $hash1-&gt;{$value2}) {\n        print \"($key2,$value2) from \\$hash2 \";\n        print \"matches ($value2,$hash1-&gt;{$value2}) from \\$hash1\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486563606, "post_id": 42115566, "comment_id": 71399687, "body": "Appreciate the response!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486565414, "post_id": 42115566, "comment_id": 71401081, "body": "@snakespan: Do you see how difficult it was to understand your intention? People with low experience are happy to try their hand at answers to stuff like that because they have little to lose, and I am surprised that <b>mob</b> felt that he could offer a solution without any further information. For what it&#39;s worth, my first guess was the same as <b>STF&#39;s</b>. Please would you explain (by editing your question) what you meant by stuff like <code>&#39;STRING_ID1&#39; =&gt; {default &#39;Some string&#39;}</code>, which doesn&#39;t compile?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1486567527, "post_id": 42115566, "comment_id": 71402633, "body": "I am the Perlnoob Whisperer."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486567697, "post_id": 42115566, "comment_id": 71402731, "body": "I&#39;ve edited the question now so that it at least compiles."}], "tags": [], "owner": {"reputation": 44, "user_id": 4431975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90a2c517c54a5d008b7ab556a1f3ab96?s=128&d=identicon&r=PG", "display_name": "STF", "link": "https://stackoverflow.com/users/4431975/stf"}, "is_accepted": false, "score": 1, "last_activity_date": 1486563492, "creation_date": 1486563492, "answer_id": 42115566, "question_id": 42115045, "link": "https://stackoverflow.com/questions/42115045/perl-loop-over-two-hashes/42115566#42115566", "title": "Perl: Loop over two hashes", "body": "<p>As far as I understand the question, you want to check if %hash1 contains an element with a string replacement, for the identifiers listed in the values in %hash2?</p>\n\n<pre><code>while (my ($key,$value) = each(%$hash2)) {\n    # check if we have an entry in $hash1\n    if (exists $hash1-&gt;{$value}) {     \n         # call service with the STRING_ID as argument\n         $service-&gt;getLocalizedString($value);\n    } else {\n         # nothing found\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 42115417, "answer_count": 2, "score": 1, "last_activity_date": 1486567651, "creation_date": 1486562088, "last_edit_date": 1486567651, "question_id": 42115045, "link": "https://stackoverflow.com/questions/42115045/perl-loop-over-two-hashes", "title": "Perl: Loop over two hashes", "body": "<p>I want to loop over two hashes somehow so that if the keys of Hash A, equal the values of Hash B, then do something:</p>\n\n<p>eg.</p>\n\n<pre><code>my $hash1 = {\n    'STRING_ID1' =&gt; {default =&gt; 'Some string'},\n    'STRING_ID3' =&gt; {default =&gt; 'Some string'},\n    'STRING_ID5' =&gt; {default =&gt; 'Some string'},\n    'STRING_ID7' =&gt; {default =&gt; 'Some string'},\n};\n\nmy $hash2 = {\n    content =&gt; 'STRING_ID',\n    content1 =&gt; 'Some text that doesn't equal an ID',\n    content2 =&gt; 'STRING_ID_5',\n    content3 =&gt; 'STRING_ID_8',\n};\n</code></pre>\n\n<p>if those values are equal, then I want to call a service which gets me a localized string. </p>\n\n<p>The only way I can think of is:</p>\n\n<pre><code>while (($key, $value) = each (%hash1, %hash2)) {\n    if ($key eq $value) {\n\n        $service-&gt;getLocalizedString($key);\n\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1486561862, "post_id": 42114851, "comment_id": 71398377, "body": "Some example data would help. This looks like you have something to parse, and you&#39;re trying to regex hack it, which is probably the wrong way to tackle it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486568681, "post_id": 42114851, "comment_id": 71403410, "body": "I began to write an answer, but I must go now. My intent was to say that you shouldn&#39;t strive for a one-line program in any language. Two levels of escaping make everything horribly difficult to debug. Unless you have a good reason to need a one-line command, and I can&#39;t think of a valid one, then it is much better written as a Perl program in a separate file. Anything beyond a trivial regex pattern should almake use of the options of changing the delimiter and using the <code>&#47;x</code> modifier. Complex one-liners are for young programmers who like to play &quot;tricks&quot;; they are not for professional use,"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486569788, "post_id": 42114851, "comment_id": 71404229, "body": "@Borodin This is hardly complex."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1486571483, "post_id": 42114851, "comment_id": 71405501, "body": "@123: Complexity is relative. The OP says <i>&quot;I have this complex regex&quot;</i>, so to them it is complex, and to say otherwise would be churlish."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486571940, "post_id": 42114851, "comment_id": 71405851, "body": "@Borodin You said complex one-liner,which this isn&#39;t as it is a single loop. The regex will be complex(depending on user) regardless of whether it is in a full script or not."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1486572382, "post_id": 42114851, "comment_id": 71406135, "body": "@123: This is a little silly. Are you one of the &quot;young programmers&quot; that I wrote about? The most trivial regex pattern can be awkward to escape properly as a &quot;one-liner&quot;, and this is a &quot;complex&quot; one. I think that makes the one-liner complex too. The bottom line is that, if the OP hadn&#39;t been trying to cram everything into a single bash command then they would have had much less trouble. There is an unprofitable culture of trying to &quot;golf&quot; code into unmaintainable bash commands, and it&#39;s something you should do in your spare time, not at your employer&#39;s expense."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486572660, "post_id": 42114851, "comment_id": 71406334, "body": "@Kuzeko: I think you&#39;re processing JSON data, and you would be much better off using the <code>JSON</code> module to process it rather than misusing regular expressions."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486573724, "post_id": 42114851, "comment_id": 71407082, "body": "@Borodin Sure, if not completely disregarding one-liners for trivial problems makes me a <code>young programmer</code> .I definitely disagree that the &quot;most trivial&quot; regex patterns are difficult to escape, the only problematic part would be using single quotes, which OP is not. The bottom line is that the only problem OP had was that they didn&#39;t check what the flags they were using did, so i doubt they would have an easier time reading and writing from file manually. Writing one-liners doesn&#39;t automatically make them unreadable... It&#39;s also unprofitable to over complicate simple one-off scripts."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1486574032, "post_id": 42114851, "comment_id": 71407291, "body": "@123: Straw man much? I disagree."}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486574061, "post_id": 42114851, "comment_id": 71407307, "body": "@Borodin Great argument, what part is a straw man? I literally replied to only your points..."}], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 5973334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee0e12fb89b305bc09a10201d92e76a?s=128&d=identicon&r=PG", "display_name": "Kuzeko", "link": "https://stackoverflow.com/users/5973334/kuzeko"}, "edited": false, "score": 0, "creation_date": 1486564232, "post_id": 42115241, "comment_id": 71400155, "body": "Awesome, and the optimization it&#39;s even better!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486568476, "post_id": 42115241, "comment_id": 71403263, "body": "The obligatory proviso is that <code>\\d</code> and <code>[0-9]</code> are not equivalent unless the <code>&#47;a</code> modifier is in place"}, {"owner": {"reputation": 13127, "user_id": 470195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d4760cd8c4c374aa12b8920df8ba9?s=128&d=identicon&r=PG", "display_name": "bobbogo", "link": "https://stackoverflow.com/users/470195/bobbogo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486646033, "post_id": 42115241, "comment_id": 71441478, "body": "@Borodin Hah! I didn&#39;t know about <code>&#47;a</code> :) Another chunk to read. Why anyone ever listens to me I&#39;ll never know."}], "tags": [], "owner": {"reputation": 13127, "user_id": 470195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d4760cd8c4c374aa12b8920df8ba9?s=128&d=identicon&r=PG", "display_name": "bobbogo", "link": "https://stackoverflow.com/users/470195/bobbogo"}, "is_accepted": true, "score": 2, "last_activity_date": 1486583955, "last_edit_date": 1486583955, "creation_date": 1486562654, "answer_id": 42115241, "question_id": 42114851, "link": "https://stackoverflow.com/questions/42114851/perl-oneliner-in-bash-print-matches-from-complex-regexp/42115241#42115241", "title": "Perl oneliner in bash: print matches from complex regexp", "body": "<p>Looks good to me.\nYou need to <em>replace</em> the <code>-p</code> with <code>-n</code> and <a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/PERL/node164.html\" rel=\"nofollow noreferrer\">here is why</a>.</p>\n\n<p>A few finer points: </p>\n\n<ul>\n<li>No need to backslash those <code>,</code> and <code>\"</code>.   </li>\n<li>You can conveniently replace<code>[0-9]</code> with <code>\\d</code>.   </li>\n<li>By using a different delimiter for the regex you won't need to escape the <code>/</code>.</li>\n</ul>\n\n<p>End result optimized</p>\n\n<pre><code>perl -ne 'print \"$1 $2 $3\\n\" while m{\"_outV\":(\\d+),\"_inV\":(\\d+),\"_label\":\"([a-z/]+)\",}g'\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 5973334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ee0e12fb89b305bc09a10201d92e76a?s=128&d=identicon&r=PG", "display_name": "Kuzeko", "link": "https://stackoverflow.com/users/5973334/kuzeko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 42115241, "answer_count": 1, "score": 0, "last_activity_date": 1486583955, "creation_date": 1486561562, "last_edit_date": 1486564031, "question_id": 42114851, "link": "https://stackoverflow.com/questions/42114851/perl-oneliner-in-bash-print-matches-from-complex-regexp", "title": "Perl oneliner in bash: print matches from complex regexp", "body": "<p>I have this complex regex</p>\n\n<pre><code>/\"_outV\":([0-9]+),\"_inV\":([0-9]+),\"_label\":\"([a-z\\/]+)\",/\n</code></pre>\n\n<p>and I need to parse a file (which is all on one single line) and output only the matched groups like </p>\n\n<pre><code>print $1 $2 $3\n</code></pre>\n\n<p>Currently the only <em>almost working</em> onliner is </p>\n\n<pre><code>perl -pe 'while(m/\"_outV\":([0-9]+)\\,\"_inV\":([0-9]+)\\,\"_label\":\"([a-z\\/]+)\\\"\\,/g){print \"$1 $2 $3\\n\";}' \n</code></pre>\n\n<p>But it ends up echoing also the entire file at the end, after the matches.\nHow do I fix this?</p>\n\n<p>I though that removing the <code>-p</code> option would make the trick, but it doesn't.</p>\n"}, {"tags": ["string", "perl"], "comments": [{"owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1486561233, "post_id": 42114606, "comment_id": 71397905, "body": "@Wiktor Stribizew I&#39;m coding in Perl"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1486561248, "post_id": 42114606, "comment_id": 71397919, "body": "That looks like json. Why not decode it as json?"}, {"owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1486561549, "post_id": 42114606, "comment_id": 71398124, "body": "I know but I&#39;d like to  familiarize with perl regex"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1486561776, "post_id": 42114606, "comment_id": 71398305, "body": "Regex is the wrong tool for the job. JSON is contextual and regex isn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 1, "creation_date": 1486561914, "post_id": 42114855, "comment_id": 71398419, "body": "Maybe it&#39;s a literal JSON string(a string containing JSON data) within JSON-encoded data. That would explain the backslashes in front of all the double quotes. But then your solution still would be valid, just after <code>s&#47;\\\\&quot;&#47;&quot;&#47;g</code> ;-)"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1486562170, "post_id": 42114855, "comment_id": 71398642, "body": "I changed it slightly because of the way <code>__DATA__</code> works (everything under data is already literal data). If the above code was a function and you passed <code>&quot;{\\&quot;id\\&quot;:1,\\&quot;start_time\\&quot;:\\&quot;1477954800000\\&quot;,\\&quot;stop_time\\&quot;:\\&quot;&zwnj;&#8203;1485817200000\\&quot;,\\&quot;ur&zwnj;&#8203;l\\&quot;:\\&quot;http:&#47;&#47;www.exa&zwnj;&#8203;mple.com\\&quot;}&quot;</code> to it, it would still generate the correct result."}, {"owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "reply_to_user": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "edited": false, "score": 0, "creation_date": 1486562831, "post_id": 42114855, "comment_id": 71399134, "body": "@SREagle Is it possible to give the exact command because I can&#39;t understand exactly what you mean. Sorry but I&#39;m quite new in this stuff."}, {"owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "reply_to_user": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "edited": false, "score": 1, "creation_date": 1486563429, "post_id": 42114855, "comment_id": 71399561, "body": "@dk13 Hunter McMillen kind of gave another (and probably better) solution: Just us perl&#39;s doublequote substition instead of my <code>s&#47;&#47;&#47;</code> for the input string. ( <code>decode_json &quot;$json_string&quot;</code> instead of <code>decode_json $json_string</code> for your example string.) &#39;I&#39;m not quite sure if perls and JSONs escape sequences are the same, but it&#39;s a start."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 3, "last_activity_date": 1486561573, "creation_date": 1486561573, "answer_id": 42114855, "question_id": 42114606, "link": "https://stackoverflow.com/questions/42114606/how-to-get-the-value-after-a-string-using-perl-reg-expression/42114855#42114855", "title": "How to get the value after a string using perl reg expression", "body": "<p>Your sample data looks like a stringified JSON object, if that is the case you should use a JSON parser not a regular expression:</p>\n\n<pre><code>#!perl\n\nuse strict;\nuse warnings;\n\nuse feature qw(say);\nuse JSON;\n\nmy $json_string = &lt;DATA&gt;;\nchomp($json_string);\n\nmy $json_object = decode_json $json_string;\n\n# get the value of the start_time key\nsay $json_object-&gt;{start_time};\n# 1477954800000\n\n__DATA__\n{\"id\":1,\"start_time\":\"1477954800000\",\"stop_time\":\"1485817200000\",\"url\":\"http://www.example.com\"}\n</code></pre>\n"}], "owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 42114855, "answer_count": 1, "score": 0, "last_activity_date": 1486561573, "creation_date": 1486560927, "last_edit_date": 1486561255, "question_id": 42114606, "link": "https://stackoverflow.com/questions/42114606/how-to-get-the-value-after-a-string-using-perl-reg-expression", "title": "How to get the value after a string using perl reg expression", "body": "<p>I have the following string :</p>\n\n<pre><code>{\\\"id\\\":01,\\\"start_time\\\":\\\"1477954800000\\\",\\\"stop_time\\\":\\\"1485817200000\\\",\\\"url\\\":http:://www.example.com\\}\n</code></pre>\n\n<p>and I'd like to get for example the value of start_time (1477954800000).\nI tried several things  in <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> but I could not find a way to deal with the special characters (\\\":\\\") between the string and the value .</p>\n\n<p>If the for example the string was like <strong>start_time = 1477954800000</strong><br>\nI know that by using  </p>\n\n<pre><code>start_time\\\":\\\"(\\w+)/)\n</code></pre>\n\n<p>I'll get the value. \nAny idea on how to get the value when \\\":\\\" are involved?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486559963, "post_id": 42114251, "comment_id": 71396993, "body": "Are the asterisks <code>*</code> part of the data?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486560138, "post_id": 42114251, "comment_id": 71397115, "body": "I didn&#39;t intend you to just copy your old question and publish it again -- you said that, even with my fix in place, your code output nothing. Please show the code including what you have done with my fix, or we shall never progress."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486560250, "post_id": 42114251, "comment_id": 71397194, "body": "I also asked to please tidy your code so that it is more readable. Never mind, just post what you have and I will do it for you."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486560643, "post_id": 42114251, "comment_id": 71397487, "body": "@Borodin is feeling generous today. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486561024, "post_id": 42114251, "comment_id": 71397767, "body": "@simbabque: Any way to get the idea across works for me :) The principle of <i>six degrees of separation</i> says that I am almost certain to have this code on my desk tomorrow! I think rocky has vanished for the day anyway."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486561339, "post_id": 42114251, "comment_id": 71397978, "body": "Complete aside: wouldn&#39;t software engineering benefit from the apprentice pattern? That way, junk like this should never appear in the first place, and if it did there would be a <i>needs to be apprenticed</i> close reason!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486561545, "post_id": 42114251, "comment_id": 71398122, "body": "@rocky: Please, are the asterisks <code>*</code> part of the data?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486561818, "post_id": 42114251, "comment_id": 71398338, "body": "@Borodin you seem very bored today. Maybe you should sign up for the <a href=\"http://cpan-prc.org/\" rel=\"nofollow noreferrer\">pull request challenge</a>. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486562131, "post_id": 42114251, "comment_id": 71398604, "body": "@rocky: I&#39;m actually damn busy. Maybe I&#39;m in denial"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486562220, "post_id": 42114251, "comment_id": 71398685, "body": "asterisks are part of this data but actual string does not have asterisks.I have enabled $search = quotemeta( $kw ); but I did not get the output."}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486562276, "post_id": 42114251, "comment_id": 71398731, "body": "I have already pasted the full code I am using to output with Data as input In my above code."}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486562310, "post_id": 42114251, "comment_id": 71398758, "body": "I have already taken your suggestions Into above code :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486562599, "post_id": 42114251, "comment_id": 71398978, "body": "@Borodin in Germany you can do an apprenticeship to become <i>Fachinformatiker/Anwendungsentwicklung</i> (which is translated to <i>IT specialist/software development</i> in my official papers). It&#39;s a regular three year on the job training and vocational school. I&#39;ve been training those for the last 5 years, in Perl. But that book sounds good, I&#39;ll use it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486563443, "post_id": 42114251, "comment_id": 71399577, "body": "@simbabque: &quot;That book&quot;? If you mean <i>six degrees of separation</i> then that was a joke. I&#39;m sorry, I should flag my words as such on an international forum. It was an urban principle before it was a film, and I didn&#39;t know that there was a book. Or perhaps you meant something else?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486563524, "post_id": 42114251, "comment_id": 71399635, "body": "@Borodin no, I meant <i>Apprenticeship Patterns</i>, which seems to come from a book, published by O&#39;Reilly. <a href=\"http://chimera.labs.oreilly.com/books/1234000001813/index.html\" rel=\"nofollow noreferrer\">chimera.labs.oreilly.com/books/1234000001813/index.html</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486563537, "post_id": 42114251, "comment_id": 71399642, "body": "@simbabque: If Fachinformatiker has a Perl option then I&#39;m impressed already. Could you write to your MP to ask for it to be made a legal requirement?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486563655, "post_id": 42114251, "comment_id": 71399727, "body": "@simbabque: Oh, gosh. I thought I was stretching the concept of programming patterns to cover sociological ideas. It seems that someone beat me to it. Yes, I must read it too!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486563670, "post_id": 42114251, "comment_id": 71399738, "body": "@Borodin no it doesn&#39;t. It has no programming language requirement. You find a job at a company that will train you and then you end up with the languages they do. In my case that was Perl ten years ago. See where it got me... Anyway, in vocational school they usually use specific languages to teach certain things, like Java for OOP and PHP for web, wor C# and MSSQL because the schools get all the MSDN stuff for free."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486564093, "post_id": 42114251, "comment_id": 71400049, "body": "@simbabque: I have had so many people thank me for teaching them OO programming through Perl, it&#39;s bizarre. Perl exposes its mechanisms, and to many people it seems far more simple once the theory matches the languages. IMO Java hides too many things for its own good, and once I can spare the time I know I will understand <code>Moose</code> better for knowing what it&#39;s working with. Dammit, even <code>Try::Tiny</code> makes little sense until you realise that <code>try</code> is <code>sub try (&amp;;@)</code> and effectively just <code>sub try (&amp;&amp;&amp;)</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486564145, "post_id": 42114251, "comment_id": 71400081, "body": "@simbabque: I will. Thank you. Gotta go. I&#39;d appreciate your comments on my answer below?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486565893, "post_id": 42115399, "comment_id": 71401455, "body": "..I noticed that the above code worked without command line menu but does not with command line menu. I have pasted the code with command line menu."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 1, "creation_date": 1486567348, "post_id": 42115399, "comment_id": 71402496, "body": "@rocky: No. Go away and learn Perl properly. Even now you can&#39;t be bothered to lay out your code reasonably, you have ignored my advice to remove <code>&amp;</code> from subroutine calls, and you haven&#39;t tried to examine the values of variables using diagnostic <code>print</code> calls. The problem is that you&#39;re <b><i>careless</i></b> and you <b><i>don&#39;t know Perl</i></b>, and Stack Exchange isn&#39;t the place to learn it. After two or three years of studying, if you still get stuck, then you should at least understand the answers you are given here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486567622, "post_id": 42115399, "comment_id": 71402681, "body": "@rocky: The main problem is that you have commented out my line <code>#my $IMS_Message = &#39;VoLTE SIPTX: [SIPTX-SIP] ==&gt;  REGISTER&#39;</code>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1486564259, "last_edit_date": 1495539970, "creation_date": 1486563062, "answer_id": 42115399, "question_id": 42114251, "link": "https://stackoverflow.com/questions/42114251/how-to-search-no-of-strings-from-a-no-of-text-files-in-a-given-directory/42115399#42115399", "title": "How to search no of strings from a no of text files In a given directory", "body": "\n\n<p>Okay, there are two main problems with your code</p>\n\n<ul>\n<li><p>You have added my solution into the <strong><em>The input is not valid</em></strong> branch of your consecutive <code>if</code> statement. That is why I asked you to keep your code tidy and indented properly. You would have spotted it yourself if your indentation was at all organised</p></li>\n<li><p>Your program is searching for <code>VoLTE SIPTX: [SIPTX-SIP] ==&gt;  REGISTER</code> while the text in the file is <code>VoLTE SIPTX: [SIPTX-SIP] ==&gt; REGISTER</code> (your program has two spaces before <code>REGISTER</code> while your data has just one). Isn't that an obvious thing to check for?</p></li>\n</ul>\n\n<p>I feel certain that you could have discovered these things for yourself, and you could certainly have read <a href=\"https://stackoverflow.com/help/mcve\"><em>How to create a Minimal, Complete, and Verifiable example</em></a> instead of posting very poor code and no sample data in the first place</p>\n\n<p>I've ignored your command-line menu (which shouldn't be in the code at this stage anyway) including your call to the non-existent <code>test_loop</code>, and have written this, which performs properly. The bulk of it is a copy of the solution I provided to your previous question, which you said wasn't working</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nprint \"\\n\";\nprint \"Start Comparing REGISTER message\\n\\n\";\n\nmy $IMS_Message = 'VoLTE SIPTX: [SIPTX-SIP] ==&gt; REGISTER';\n\nmy $kw = $IMS_Message;\n\nmy $search = qr/\\Q$kw/;\n\nfor my $file ( grep { -f } glob '*main_log' ) {\n\n    open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n\n    while ( &lt;$fh&gt; ) {\n\n        if ( /$search/ ) {\n\n            printf \"Found keyword %s in file %s, line %d: %s\\n\", $kw, $file, $., $_;\n            last;\n        }\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Start Comparing REGISTER message\n\nFound keyword VoLTE SIPTX: [SIPTX-SIP] ==&gt; REGISTER in file xmain_log, line 3: VoLTE SIPTX: [SIPTX-SIP] ==&gt; REGISTERTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTemp\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487754344, "creation_date": 1486559841, "last_edit_date": 1487754344, "question_id": 42114251, "link": "https://stackoverflow.com/questions/42114251/how-to-search-no-of-strings-from-a-no-of-text-files-in-a-given-directory", "title": "How to search no of strings from a no of text files In a given directory", "body": "\n\n<p>I want to search my string Input at consol i.e. \"VoLTE SIPTX: [SIPTX-SIP] ==>  REGISTER\" from the no of files In a directory (Sample data of the file Is shown below) but unable to do the same in the below code.</p>\n\n<p>Here is my code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\n\nprint \"Entering the value i.e. the IMS Message to compare with\";\n\nmy $value       = '';\nmy $choice      = '';\nmy $loop        = '';\nmy $IMS_Message = '';\nmy $search      = '';\nmy $kw          = '';\n\nprint \"\\nThe script path &amp; name is $0\\n\";\nprint \"\\nPlease enter desired number to select any of the following   \n\n    (1) Start Comparing REGISTER message !!\n    (2) Start Comparing SUBSCRIBE message\n    (3) Start Comparing INVITE message \\n\";\n\n$value = &lt;STDIN&gt;;\n\nif ( $value == 1 ) {\n\n    print \"\\n Start Comparing REGISTER message\\n\\n\";\n    $IMS_Message = \"VoLTE SIPTX: [SIPTX-SIP] ==&gt;  REGISTER\";\n}\nelsif ( $value == 2 ) {\n\n    print \"\\n SUBSCRIBE message Flow\\n\\n\";\n}\nelsif ( $value == 3 ) {\n\n    print \"\\n INVITE message Flow\\n\\n\";\n}\nelse {\n\n    print \"\\nThe input is not valid!\\n\";\n    print \"\\nDo you want to continue selecting a Automation Mode again (Y or N)?\\n\";\n\n    $choice = &lt;STDIN&gt;;\n\n    if ( $choice eq /[Yy]/ ) {\n        test_loop();\n    }\n    else {\n        exit;\n    }\n\n    $kw = $IMS_Message;\n\n    #$search = qr/\\Q$kw/;\n    $search = quotemeta( $kw );\n\n    for my $file ( grep {-f} glob '*main_log' ) {\n\n        open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n\n        while ( &lt;$fh&gt; ) {\n\n            if ( /$search/ ) {\n\n                printf \"Found keyword %s in file %s, line %d: %s\\n\", $kw, $file, $., $_;\n                last;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Here is data of my files from which I want to search my string</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>**TempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTemp\n*TempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTemp\nVoLTE SIPTX: [SIPTX-SIP] ==&gt; REGISTERTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTemp\ntempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTemp\ntemptempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTemp\n***tempTeTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTempTemp\n</code></pre>\n\n<p>the below code with command line does not work</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>use strict;\nuse warnings;\n\n\n    my $value = '';\n    my $choice = '';\n    my $loop = '';\n    my $IMS_Message = '';\n\n    print \"\\nThe script path &amp; name is $0\\n\";\n    print \"\\nPlease enter desired number to select any of the following   \n\n\n    (1) Start Comparing REGISTER message !! !!\n\n    (2) Start Comparing SUBSCRIBE message\n\n        (3) Start Comparing INVITE message \\n\";;\n\n    $value = &lt;STDIN&gt;;\n\n    if ($value == 1 )\n    {\n\n        print \"\\n Start Comparing REGISTER message\\n\\n\";\n        my $IMS_Message = 'VoLTE SIPTX: [SIPTX-SIP] ==&gt;  REGISTER';\n        &amp;IMS_Message_Check;\n    }\n\n    elsif ($value == 2)\n    {\n\n        print \"\\n SUBSCRIBE message Flow\\n\\n\";\n\n    }\n    elsif ($value == 3)\n    {\n\n    print \"\\n INVITE message Flow\\n\\n\";\n\n    }\n    else \n    {\n        print \"\\nThe input is not valid!\\n\";\n        print \"\\nDo you want to continue selecting a Automation Mode again (Y or N)?\\n\";\n\n        $choice = &lt;STDIN&gt;;\n        if( $choice =~ /[Yy]/) {        \n            test_loop();\n        } else {\n            exit;\n        }\n    }\n\n\nsub IMS_Message_Check{\n\nprint \"\\n\";\nprint \"Start Comparing REGISTER message\\n\\n\";\n\n#my $IMS_Message = 'VoLTE SIPTX: [SIPTX-SIP] ==&gt;  REGISTER';\n\n\nmy $kw = $IMS_Message;\nmy $search = qr/\\Q$kw/;\nfor my $file ( grep { -f } glob '*main_log' ) {\n    open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n    while ( &lt;$fh&gt; ) {\n        if ( /$search/ ) {\n            printf \"Found keyword %s in file %s, line %d: %s\\n\", $kw, $file, $., $_;\n            #last;\n        }\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["perl", "pdf", "fdf", "xfdf"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486560945, "post_id": 42114131, "comment_id": 71397709, "body": "Please would you add the FDF that you want to refactor?"}, {"owner": {"reputation": 1, "user_id": 7534482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fe07334ffae3d8f6c9132d6ab30272?s=128&d=identicon&r=PG&f=1", "display_name": "Lava346", "link": "https://stackoverflow.com/users/7534482/lava346"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486628612, "post_id": 42114131, "comment_id": 71429898, "body": "I added the FDF Code (i trimmed some repeating parts)."}, {"owner": {"reputation": 3227, "user_id": 2241145, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ff4bb43d7776533dbd96d13258c99f4d?s=128&d=identicon&r=PG", "display_name": "Max Wyss", "link": "https://stackoverflow.com/users/2241145/max-wyss"}, "edited": false, "score": 0, "creation_date": 1486678040, "post_id": 42114131, "comment_id": 71461981, "body": "I may make a complete fool of myself, but I believe to remember that XFDF can only deal with field name/field value pairs, and it does not support the other features of FDF, such as setting actions or executing JavaScripts."}, {"owner": {"reputation": 1, "user_id": 7534482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fe07334ffae3d8f6c9132d6ab30272?s=128&d=identicon&r=PG&f=1", "display_name": "Lava346", "link": "https://stackoverflow.com/users/7534482/lava346"}, "edited": false, "score": 0, "creation_date": 1490709921, "post_id": 42114131, "comment_id": 73226953, "body": "Finally I solved the problem by editing the submit button directly in the pdf document . I filled a hidden field with the url of a script which is called by the buttons javascript code."}], "owner": {"reputation": 1, "user_id": 7534482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fe07334ffae3d8f6c9132d6ab30272?s=128&d=identicon&r=PG&f=1", "display_name": "Lava346", "link": "https://stackoverflow.com/users/7534482/lava346"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486564591, "creation_date": 1486559536, "last_edit_date": 1486564591, "question_id": 42114131, "link": "https://stackoverflow.com/questions/42114131/pdf-xfdf-setting-action-on-submit-button-via-perl-script", "title": "PDF/XFDF setting action on submit button via Perl script", "body": "<p>I'm having trouble rewriting a <em>Forms Data Format</em> (FDF) file as <em>XML Forms Data Format</em> (XFDF).</p>\n\n<p>I'm using a PDF form, which is filled by an FDF document generated by a Perl/CGI script.</p>\n\n<p>The PDF contains a field which works as a submit button, which calls a Perl script to read the form data and write it to a database.</p>\n\n<p>The action for the submit button is contained in the FDF, not coded directly in the PDF.</p>\n\n<h3>Perl Code</h3>\n\n<pre><code>return qq# &lt;&lt;/T($field) /A &lt;&lt;/Flags 6 /S/SubmitForm /F &lt;&lt; /F($script_url)/FS/URL&gt;&gt;&gt;&gt;&gt;&gt;\\n#\n</code></pre>\n\n<p>This is working without any problems using the FDF format.</p>\n\n<p>I can't find a code example for how the structure must look if I'm using the XFDF format.</p>\n\n<h3>Not working</h3>\n\n<pre><code>&lt;field name=\"Save\"&gt;&lt;value&gt;/S/SubmitForm /F /F(http://..)/FS/URL &lt;/value&gt;&lt;/field&gt;\n</code></pre>\n\n<h3>Structure of FDF</h3>\n\n<pre><code>&gt; %FDF-1.2\n1 0 obj\n&lt;&lt;\n/FDF &lt;&lt; /Fields [\n&lt;&lt; /V (somename)/T (name) &gt;&gt;\n&lt;&lt; /V (* test * 740029 test)/T (adress) &gt;&gt;\n&lt;&lt; /V...\n&lt;&lt;/T(save) /A &lt;&lt;/Flags 6 /S/SubmitForm /F &lt;&lt; /F(http://localhost:1234/save.cgi)/FS/URL&gt;&gt;&gt;&gt;&gt;&gt;\n]\n/F (http://localhost:8888/pdf/test.pdf)\n&gt;&gt;\n&gt;&gt;\nendobj\ntrailer\n&lt;&lt;\n/Root 1 0 R\n\n&gt;&gt;\n%%EOF\n</code></pre>\n"}, {"tags": ["perl", "sybase", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486558415, "post_id": 42113598, "comment_id": 71395934, "body": "and how do i turn it back on?"}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486558524, "post_id": 42113598, "comment_id": 71396005, "body": "just confirming. Thanks. :)"}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486558718, "post_id": 42113598, "comment_id": 71396133, "body": "also, in using DBlib, the code above does not really do a rollback, then what is the use of COMPLETE:commit tran anyway?  Or is rollback handled differently in dblib?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486558758, "post_id": 42113598, "comment_id": 71396170, "body": "@Kraken I don&#39;t know, sorry. I&#39;ve never used Sybase."}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486706780, "post_id": 42113598, "comment_id": 71471171, "body": "I can use eval {} with begin_work right? Or do I HAVE to use try/catch?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 1, "creation_date": 1486727607, "post_id": 42113598, "comment_id": 71482627, "body": "@Kraken you can use <code>eval {}</code> of course. I just like to promote modern Perl in my answers. ;)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1486558733, "last_edit_date": 1486558733, "creation_date": 1486558169, "answer_id": 42113598, "question_id": 42113429, "link": "https://stackoverflow.com/questions/42113429/transactional-updates-to-sybase-from-dblib-to-dbi/42113598#42113598", "title": "Transactional updates to Sybase from Dblib to DBI", "body": "<p><strong>Yes.</strong></p>\n\n<p>Look at <a href=\"https://metacpan.org/pod/DBI#Transactions\" rel=\"nofollow noreferrer\">TRANSACTIONS in the DBI docs</a>. It gives this code example.</p>\n\n<blockquote>\n<pre><code>$dbh-&gt;{AutoCommit} = 0;  # enable transactions, if possible\n$dbh-&gt;{RaiseError} = 1;\neval {\n    foo(...)        # do lots of work here\n    bar(...)        # including inserts\n    baz(...)        # and updates\n    $dbh-&gt;commit;   # commit the changes if we get this far\n};\nif ($@) {\n    warn \"Transaction aborted because $@\";\n    # now rollback to undo the incomplete changes\n    # but do it in an eval{} as it may also fail\n    eval { $dbh-&gt;rollback };\n    # add other application on-error-clean-up code here\n}\n</code></pre>\n</blockquote>\n\n<p>For your specific use-case, you could do:</p>\n\n<pre><code>$dbh-&gt;{AutoCommit} = 0;\n$dbh-&gt;{RaiseError} = 1;\neval {\n    $dbh-&gt;prepare(\"DELETE FROM stuff\");\n    $dbh-&gt;execute;\n    $dbh-&gt;commit;\n};\nif ($@) {\n    warn \"Transaction aborted because $@\";\n    eval { $dbh-&gt;rollback };\n}\n</code></pre>\n\n<p>The most important part is that you need to <strong>turn <a href=\"https://metacpan.org/pod/DBI#AutoCommit\" rel=\"nofollow noreferrer\"><code>AutoCommit</code></a> off yourself</strong> before you start with your transaction. That works by just changing the internals of the <code>$dbh</code>.</p>\n\n<p>Note that you can also use <a href=\"http://p3rl.org/Try::Tiny\" rel=\"nofollow noreferrer\">Try::Tiny</a> instead of the <code>eval</code> block, which looks a bit nicer.</p>\n\n<p>If you want to turn auto-committing back on so there are no transactions any more, just set <code>$dbh-&gt;{AutoCommit} = 1</code>.</p>\n\n<hr>\n\n<p>You can also use <a href=\"https://metacpan.org/pod/DBI#begin_work\" rel=\"nofollow noreferrer\"><code>begin_work</code></a> and <a href=\"https://metacpan.org/pod/DBI#commit\" rel=\"nofollow noreferrer\"><code>commit</code></a> and leave <a href=\"https://metacpan.org/pod/DBI#AutoCommit\" rel=\"nofollow noreferrer\"><code>$dbh-&gt;{AutoCommit}</code></a> at <code>1</code>, so you don't have to mess with it.</p>\n\n<pre><code>use Try::Tiny;\n\ntry {\n    $dbh-&gt;begin_work;\n    $dbh-&gt;do( ... );\n    $dbh-&gt;commit;\ncatch {\n    warn \"Transactino aborted because $_\";\n    try { $dbh-&gt;rollback };\n};\n</code></pre>\n"}], "owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 42113598, "answer_count": 1, "score": 0, "last_activity_date": 1486558733, "creation_date": 1486557664, "question_id": 42113429, "link": "https://stackoverflow.com/questions/42113429/transactional-updates-to-sybase-from-dblib-to-dbi", "title": "Transactional updates to Sybase from Dblib to DBI", "body": "<p>I have a perl code currently, that connects to Sybase via Sybase::DBlib and does the following</p>\n\n<pre><code>$dbh-&gt;sql('Begin tran');\n$query= &lt;some delete query&gt;\n$dbh-&gt;sql($query)\nin a loop{\n    do insert query\n}\nCOMPLETE:\n$dbh-&gt;sql('commit tran');\n</code></pre>\n\n<p>I am porting the above code to start using DBI instead, but I am not sure how to work with transactions. How can I emulate the above using DBI. And what does <code>COMPLETE</code> do?</p>\n"}, {"tags": ["perl", "loops", "syntax"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486557563, "post_id": 42113325, "comment_id": 71395349, "body": "Did you use the debugger just to look at the value? You can just use <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> in your code to get it to give you output at run-time. <code>use Data::Dumper; print Dumper $x;</code> Please do that, and then <a href=\"https://stackoverflow.com/posts/42113325/edit\">edit</a> your question and include the output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486559859, "post_id": 42113325, "comment_id": 71396917, "body": "Please show what you have tried. It&#39;s hard to help you to fix your code if we can&#39;t see your code."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "edited": false, "score": 1, "creation_date": 1486559284, "post_id": 42113536, "comment_id": 71396505, "body": "@yankel great :-) next time please include the code you had already tried."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1486557969, "creation_date": 1486557969, "answer_id": 42113536, "question_id": 42113325, "link": "https://stackoverflow.com/questions/42113325/perl-loop-through-array-of-hashes/42113536#42113536", "title": "perl loop through array of hashes", "body": "<p>It looks like you have an array reference that contains hash references as the elements.</p>\n\n<p>I can tell that it's a an array ref because it's <code>$x</code> with a <code>$</code> as the sigil, which indicates a reference, and because of the <code>0  ARRAY(0xdb09e20)</code>.</p>\n\n<p>So if you <code>print Dumper</code> it using <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> it, you'll get something like this:</p>\n\n<pre><code>[\n    {\n        'OBJECT_ID'      =&gt; 111026746749824,\n        'TABLE_KEY'      =&gt; '0-85296-384-X',\n        'TABLE_KEY_NAME' =&gt; 'VALUE',\n    },\n    {\n        'OBJECT_ID'      =&gt; 1000000000108155,\n        'TABLE_KEY'      =&gt; '1598-8740',\n        'TABLE_KEY_NAME' =&gt; 'VALUE',\n    }\n]\n</code></pre>\n\n<p>If you look at it in this presentation, it becomes pretty obvious what you need to do.</p>\n\n<p>First, you iterate over the elements in the array reference, which you have to dereference. I'm using a very verbose dereferencing here because I think it's cleaner to read if you don't know exactly what you're doing. You could also do <code>@$x</code>.</p>\n\n<pre><code>foreach my $elem ( @{ $x } ) {\n    # ...\n}\n</code></pre>\n\n<p>Now you have <code>$elem</code> which contains one of the hash references. To get the <code>OBJECT_ID</code> key, you need to access it. Because it's a ref, you need the dereferencing operator <code>-&gt;</code>.</p>\n\n<pre><code>say $elem-&gt;{OBJECT_ID};\n</code></pre>\n\n<p>This will print out the <code>OBJECT_ID</code> for one element. <code>say</code> is like <code>print</code> with a newline. You can to load it with <code>use feature 'say'</code>.</p>\n\n<p>It comes together like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\nmy $x = ...;\n\nforeach my $elem ( @{ $x } ) {\n    say $elem-&gt;{OBJECT_ID};\n}\n</code></pre>\n\n<p>It will print:</p>\n\n<pre><code>111026746749824\n1000000000108155\n</code></pre>\n\n<p>To learn more about references in Perl, look at <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>. You can also look at these tutorials on Perlmaven:</p>\n\n<ul>\n<li><a href=\"https://perlmaven.com/multi-dimensional-arrays-in-perl\" rel=\"nofollow noreferrer\">https://perlmaven.com/multi-dimensional-arrays-in-perl</a></li>\n<li><a href=\"https://perlmaven.com/multi-dimensional-hashes\" rel=\"nofollow noreferrer\">https://perlmaven.com/multi-dimensional-hashes</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1486559779, "creation_date": 1486559779, "answer_id": 42114231, "question_id": 42113325, "link": "https://stackoverflow.com/questions/42113325/perl-loop-through-array-of-hashes/42114231#42114231", "title": "perl loop through array of hashes", "body": "<p>This will do as you ask</p>\n\n<pre><code>my @ids = map { $_-&gt;{OBJECT_ID} } @$x;\n\nsay for @ids;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>111026746749824\n111026746749824\n1000000000108155\n1000000000108155\n1000000000108156\n1000000000108156\n1000000000108157\n1000000000108157\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 1, "accepted_answer_id": 42113536, "answer_count": 2, "score": 1, "last_activity_date": 1486559779, "creation_date": 1486557378, "last_edit_date": 1486559556, "question_id": 42113325, "link": "https://stackoverflow.com/questions/42113325/perl-loop-through-array-of-hashes", "title": "perl loop through array of hashes", "body": "\n\n<p>Hi in the debugger I print out the following variable <code>$x</code> </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>DB&lt;8&gt; x $x\n\n0  ARRAY(0xdb09e20)\n\n0  HASH(0xe18d450)\n\n  'OBJECT_ID' =&gt; 111026746749824\n\n  'TABLE_KEY' =&gt; '0-85296-384-X'\n\n  'TABLE_KEY_NAME' =&gt; 'VALUE'\n\n1  HASH(0xe18d4e0)\n\n  'OBJECT_ID' =&gt; 1000000000108155\n\n  'TABLE_KEY' =&gt; '1598-8740'\n\n  'TABLE_KEY_NAME' =&gt; 'VALUE'\n\n2  HASH(0xe18d530)\n\n  'OBJECT_ID' =&gt; 1000000000108156\n\n  'TABLE_KEY' =&gt; '89-7085-418-5'\n\n  'TABLE_KEY_NAME' =&gt; 'VALUE'\n</code></pre>\n\n<p>I would like to loop through this and access each <code>OBJECT ID</code></p>\n\n<p>I do not know what syntax to use.</p>\n\n<p>Here is a dump of <code>$x</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[\n  {\n    OBJECT_ID      =&gt; 111026746749824,\n    TABLE_KEY      =&gt; \"0-85296-384-X\",\n    TABLE_KEY_NAME =&gt; \"VALUE\",\n  },\n  {\n    OBJECT_ID      =&gt; 111026746749824,\n    TABLE_KEY      =&gt; \"0537-9987\",\n    TABLE_KEY_NAME =&gt; \"VALUE\",\n  },\n  {\n    OBJECT_ID      =&gt; 1000000000108155,\n    TABLE_KEY      =&gt; \"89-7085-386-3\",\n    TABLE_KEY_NAME =&gt; \"VALUE\",\n  },\n  {\n    OBJECT_ID      =&gt; 1000000000108155,\n    TABLE_KEY      =&gt; \"1598-8740\",\n    TABLE_KEY_NAME =&gt; \"VALUE\",\n  },\n  {\n    OBJECT_ID      =&gt; 1000000000108156,\n    TABLE_KEY      =&gt; \"89-7085-418-5\",\n    TABLE_KEY_NAME =&gt; \"VALUE\",\n  },\n  {\n    OBJECT_ID      =&gt; 1000000000108156,\n    TABLE_KEY      =&gt; \"1598-8651\",\n    TABLE_KEY_NAME =&gt; \"VALUE\",\n  },\n  {\n    OBJECT_ID      =&gt; 1000000000108157,\n    TABLE_KEY      =&gt; \"89-7085-442-8\",\n    TABLE_KEY_NAME =&gt; \"VALUE\",\n  },\n  {\n    OBJECT_ID      =&gt; 1000000000108157,\n    TABLE_KEY      =&gt; \"1598-8597\",\n    TABLE_KEY_NAME =&gt; \"VALUE\",\n  },\n]\n</code></pre>\n"}, {"tags": ["perl", "perforce"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7450424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d873f133354d39440922f4293f7842?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/7450424/pooja"}, "edited": false, "score": 0, "creation_date": 1486573481, "post_id": 42117922, "comment_id": 71406925, "body": "but when I am not selecting any changelist then the tool is not triggered. So does it mean that it is necessary to select any changelist and then only run that tool?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "reply_to_user": {"reputation": 11, "user_id": 7450424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d873f133354d39440922f4293f7842?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/7450424/pooja"}, "edited": false, "score": 0, "creation_date": 1486575458, "post_id": 42117922, "comment_id": 71408091, "body": "Lowercase %c means run once for each changelist.  You gave it 0 changelists, so how many times should it run? <a href=\"https://www.perforce.com/perforce/doc.current/manuals/p4v/custom_tools.html\" rel=\"nofollow noreferrer\">perforce.com/perforce/doc.current/manuals/p4v/custom_tools.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 11, "user_id": 7450424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d873f133354d39440922f4293f7842?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/7450424/pooja"}, "edited": false, "score": 0, "creation_date": 1486614477, "post_id": 42117922, "comment_id": 71424022, "body": "I got your point.. But I have 2 requirement- 1. when I m selecting a changelist and then running the tool. 2. when I m not selecting any changelist and then trying to run it. So for second case, I still want to trigger the tool and then handling it in that tool - (like if no changelist is selected take another code path). So is it possible?"}], "tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": false, "score": 0, "last_activity_date": 1486569686, "creation_date": 1486569686, "answer_id": 42117922, "question_id": 42112061, "link": "https://stackoverflow.com/questions/42112061/arguments-missing-in-perforce-custom-tool/42117922#42117922", "title": "Arguments missing in perforce custom tool", "body": "<p>It is doing what you requested: running the tool once for each changelist that you provided.  If you want to run it once with the list of changelists, use <code>%C</code></p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7450424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d873f133354d39440922f4293f7842?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/7450424/pooja"}, "edited": false, "score": 0, "creation_date": 1486613913, "post_id": 42120649, "comment_id": 71423875, "body": "But I don&#39;t want to create another tool.. Is there any way to accommodate it in same tool?"}, {"owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "reply_to_user": {"reputation": 11, "user_id": 7450424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d873f133354d39440922f4293f7842?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/7450424/pooja"}, "edited": false, "score": 0, "creation_date": 1486665387, "post_id": 42120649, "comment_id": 71454969, "body": "The only other thing I can think of is to try %C instead of %c and see if that works..."}], "tags": [], "owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "is_accepted": false, "score": 0, "last_activity_date": 1486577678, "creation_date": 1486577678, "answer_id": 42120649, "question_id": 42112061, "link": "https://stackoverflow.com/questions/42112061/arguments-missing-in-perforce-custom-tool/42120649#42120649", "title": "Arguments missing in perforce custom tool", "body": "<p>Create another tool entry that does not take a %c argument, and use that tool for the case where you don't have a changelist selected.</p>\n"}], "owner": {"reputation": 11, "user_id": 7450424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d873f133354d39440922f4293f7842?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja", "link": "https://stackoverflow.com/users/7450424/pooja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1486577678, "creation_date": 1486553846, "question_id": 42112061, "link": "https://stackoverflow.com/questions/42112061/arguments-missing-in-perforce-custom-tool", "title": "Arguments missing in perforce custom tool", "body": "<p>I created a custom tool in perforce and passing arguments as follow:</p>\n\n<pre><code>generation.pl -c %c -p $c -o $p\n</code></pre>\n\n<p>Now, when I select any changelist and then click on tools in menu bar of Perforce and select the created tool, that tool is getting triggered properly. But if I don't select any changelist and then try to click on the tool, it is not getting triggered.\nI know the reason for this that  \"-c %c\" this parameter wants changelist. But I want that the pl file must be triggered even if any changelist is not selected, so that I can handle that situation and can direct to another code path.</p>\n\n<p><strong>or is it compulsory that all parameters in the arguments should be passed to trigger the tool?</strong></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1486542547, "post_id": 42107656, "comment_id": 71385085, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17127374/cpan-download-failing\">CPAN download failing</a>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1486546569, "post_id": 42107656, "comment_id": 71387648, "body": "oooh yours <code>linux OS</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1486549374, "post_id": 42107656, "comment_id": 71389726, "body": "@ssr1012: Please don&#39;t recommend that people just copy CPAN modules into their library directories. There are <a href=\"http://perldoc.perl.org/perlmodinstall.html\" rel=\"nofollow noreferrer\">recommended ways</a> to install modules."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1486559578, "post_id": 42107656, "comment_id": 71396711, "body": "@DaveCross can you please provide any link which state why this manual way of keeping the .pm file in the directory structure is so not recommended."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1486565859, "post_id": 42107656, "comment_id": 71401428, "body": "@DaveCross: Apologies."}, {"owner": {"reputation": 57, "user_id": 4563426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f230e40fc24b40d07ca3a25a526e343?s=128&d=identicon&r=PG&f=1", "display_name": "ggupta", "link": "https://stackoverflow.com/users/4563426/ggupta"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1486625173, "post_id": 42107656, "comment_id": 71428131, "body": "@ssr1012 yes it is linux"}], "answers": [{"tags": [], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "is_accepted": true, "score": 1, "last_activity_date": 1486559490, "last_edit_date": 1495540946, "creation_date": 1486559490, "answer_id": 42114112, "question_id": 42107656, "link": "https://stackoverflow.com/questions/42107656/read-data-from-excel-in-perl/42114112#42114112", "title": "read data from excel in perl", "body": "<p>Try downloading the module tar zip from <a href=\"http://search.cpan.org/dist/OLE-Storage_Lite/lib/OLE/Storage_Lite.pm\" rel=\"nofollow noreferrer\">cpan</a> or <a href=\"https://metacpan.org/pod/OLE::Storage_Lite\" rel=\"nofollow noreferrer\">metacpan</a>. Then build the module locally using any make utility(e.g.dmake). You can find more info for building module locally from <a href=\"https://stackoverflow.com/questions/540640/how-can-i-install-a-cpan-module-into-a-local-directory\">here</a>. </p>\n"}], "owner": {"reputation": 57, "user_id": 4563426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f230e40fc24b40d07ca3a25a526e343?s=128&d=identicon&r=PG&f=1", "display_name": "ggupta", "link": "https://stackoverflow.com/users/4563426/ggupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 42114112, "answer_count": 1, "score": 0, "last_activity_date": 1486559490, "creation_date": 1486540988, "last_edit_date": 1486549406, "question_id": 42107656, "link": "https://stackoverflow.com/questions/42107656/read-data-from-excel-in-perl", "title": "read data from excel in perl", "body": "<p>I am trying to read data from excel, i have below code.</p>\n\n<pre><code>    #!/usr/bin/perl\n    use strict;\n    use warnings;\n    use 5.010;\n    use feature 'say';\n    use Spreadsheet::XLSX;\n    use Spreadsheet::Read qw(ReadData);\n    my $book = ReadData ('/tmp/simple.xlsx');\n\n    say 'A1: ' . $book-&gt;[1]{A1};\n\n    my @row = Spreadsheet::Read::row($book-&gt;[1], 1);\n    for my $i (0 .. $#row) {\n        say 'A' . ($i+1) . ' ' . ($row[$i] // '');\n    }\n\n    my @rows = Spreadsheet::Read::rows($book-&gt;[1]);\n    foreach my $i (1 .. scalar @rows) {\n        foreach my $j (1 .. scalar @{$rows[$i-1]}) {\n        say chr(64+$i) . \" $j \" . ($rows[$i-1][$j-1] // '');\n        }\n    }\n</code></pre>\n\n<p>getting the error as: </p>\n\n<pre><code>        Can't locate OLE/Storage_Lite.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at /usr/local/share/perl5/Spreadsheet/ParseExcel.pm line 21.\n    BEGIN failed--compilation aborted at /usr/local/share/perl5/Spreadsheet/ParseExcel.pm line 21.\n    Compilation failed in require at /usr/local/share/perl5/Spreadsheet/XLSX.pm line 14.\n    BEGIN failed--compilation aborted at /usr/local/share/perl5/Spreadsheet/XLSX.pm line 14.\n    Compilation failed in require at read_excel.pl line 6.\n    BEGIN failed--compilation aborted at read_excel.pl line 6.\n</code></pre>\n\n<p>I have every related module. but as per error when i am going to download OLE/Storage_Lite.pm from the CPAN, page is going blank, and from metacpan below error is coming.</p>\n\n<pre><code>        https://cpan.metacpan.org/authors/id/M/MS/MSCHWARTZ/OLE-Storage-0.386.tar.gz\n    Resolving cpan.metacpan.org... 151.101.128.249, 151.101.192.249, 151.101.64.249, ...\n    Connecting to cpan.metacpan.org|151.101.128.249|:443... connected.\n    ERROR: certificate common name \u201ca.ssl.fastly.net\u201d doesn\u2019t match requested host name \u201ccpan.metacpan.org\u201d.\n    To connect to cpan.metacpan.org insecurely, use \u2018--no-check-certificate\u2019.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1486534226, "post_id": 42105847, "comment_id": 71380985, "body": "The title and question are saying different things. It&#39;s quite unclear with what you want help. (And this: <code># use strict;</code> Don&#39;t do that!)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1486538189, "post_id": 42105847, "comment_id": 71382855, "body": "<code>chomp</code> doesn&#39;t return what you think it does. (And what is it doing nowhere near a <code>&lt;&gt;</code>?)"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486539091, "post_id": 42105847, "comment_id": 71383342, "body": "I just removed the chomp but still It;s same output"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1486545119, "post_id": 42105847, "comment_id": 71386624, "body": "The whole point of <code>use strict</code> is that it generates error messages that guide you towards basic errors in your code. Failing to add <code>use strict</code> is wrong, but to write it and then comment it out is completely foolish, as you are saying that you want to keep all of those mistakes. It is ridiculous to ask the whole world for help with your code when you have chosen to ignore the basic aid built into Perl itself."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486558665, "post_id": 42109948, "comment_id": 71396094, "body": "Hi Borodin.. Thanks for guiding . I did the modifications you suggested but still I am not getting any output I want .. I get no output at all . I have added the code above."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486559105, "post_id": 42109948, "comment_id": 71396393, "body": "@rocky: Please open a new question and show your full code, together with a short sample data file that reproduces the problem."}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486559888, "post_id": 42109948, "comment_id": 71396937, "body": "Opened a new question with Title - Unable to Search string from multiple files In a particular directory. thanks"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1486548763, "last_edit_date": 1486548763, "creation_date": 1486548048, "answer_id": 42109948, "question_id": 42105847, "link": "https://stackoverflow.com/questions/42105847/how-can-i-avoid-a-indefinite-loop-while-searching-a-string-from-a-no-of-files/42109948#42109948", "title": "How Can I avoid a Indefinite Loop While Searching a string from a no of files", "body": "<p>Here are some observations on your code</p>\n\n<ul>\n<li><p>Your approach to debugging appears to be to try things at random to see if they work. It would be far more fruitful to add diagnostic <code>print</code> statements so that you can compare variables' actual values with what you expect</p>\n\n<p>Error and warning messages are useful information, and it is foolish to comment out <code>use strict</code> to make them go away</p></li>\n<li><p>Don't call subroutines with an ampersand <code>&amp;</code>. That hasn't been best practice for twenty years now</p></li>\n<li><p>Lay your code out tidily and cinsistently, so that both you and any people you ask for help can read it easily. As it stands it is impossible to tell where blocks start and end without counting brace characters <code>{...}</code></p></li>\n<li><p>Variables should be declared with <code>my</code> as close as possible to their first point of use, and not all at once at the top of the file or subroutine</p></li>\n<li><p><code>chomp</code> is necessary only for strings that have been read from the terminal or from a file. It returns the <em>number of characters removed</em>, not the trimmed string</p></li>\n<li><p><code>if( $choice =~ /[Yy]/ ) { ... }</code> will check only whether the string <em>contains</em> a <code>Y</code>, so if the operator enters <code>MARRY ME!</code> it will return <em>true</em>. You should use string equality <code>eq</code> to check whether a single <code>Y</code> character has been typed</p></li>\n<li><p>You shouldn't put scalar variables alone inside double quotes. At best it will make no difference, and just add noise to your code; at worst it will completely change the value of the variable. Just <code>my $kw = $IMS_Message</code> is correct</p></li>\n<li><p>Unless you require non-sequential access to the contents of a file, it is best to use a <code>while</code> loop to read and process it line by line, rather than read the whole thing into an array and process each element of the array. This also allows you to use the built-in line number variable <code>$.</code> instead of implementing your own <code>$l</code></p></li>\n</ul>\n\n<p>The main problem is that you have derived <code>$search</code> from the result of <code>chomp $kw</code>, which sets <code>$search</code> to the number of characters removed by chomp. This is always zero because <code>$kw</code> is a copy of <code>$IMS_Message</code>, which has no newline at the end. That means you are checking all the lines of every file for  the character <code>0</code>, and not for the message that you intended. The correct way is <code>my $search = quotemeta($kw)</code> which you had in place but have commented out, presumably as a result of your policy of \"debugging by guesswork\"</p>\n\n<p>Fixing these things, your code should look something like this</p>\n\n<pre><code>my $search = qr/\\Q$kw/;\n\nfor my $file ( grep { -f } glob '*main_log' ) {\n\n    open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n\n    while ( &lt;$fh&gt; ) {\n        if ( /$search/ ) {\n            printf \"Found keyword %s in file %s, line %d: %s\\n\", $kw, $file, $., $_;\n            last;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 42109948, "answer_count": 1, "score": -4, "last_activity_date": 1487754093, "creation_date": 1486533983, "last_edit_date": 1487754093, "question_id": 42105847, "link": "https://stackoverflow.com/questions/42105847/how-can-i-avoid-a-indefinite-loop-while-searching-a-string-from-a-no-of-files", "title": "How Can I avoid a Indefinite Loop While Searching a string from a no of files", "body": "<p>In my below program, I was trying to search a string from no of files In a folder but output Is printing in continuous manner rather than stopping after required search. Can some one pls help to point out the error ?\ni.e. I am trying to Search the string \"VoLTE SIPTX: [SIPTX-SIP] ==>  REGISTER\" from @files but I am not getting the desired output but I am getting repetitive output of my strings. </p>\n\n<pre><code># #!/usr/bin/perl\n# use strict; \nuse warnings;\n\n&amp;IMS_Compare_Message();\nsub IMS_Compare_Message\n{\n\n    print \"Entering the value i.e. the IMS Message to compare with\";\n    my $value = '';\n    my $choice = '';\n    my $loop = '';\n\n  print \"\\nThe script path &amp; name is $0\\n\";\n  print \"\\nPlease enter desired number to select any of the following   \n\n\n    (1) Start Comparing REGISTER message !!\n\n    (2) Start Comparing SUBSCRIBE message\n\n        (3) Start Comparing INVITE message \\n\";\n\n    $value = &lt;STDIN&gt;;\n\n    if ($value == 1 )\n    {\n\n        print \"\\n Start Comparing REGISTER message\\n\\n\";\n        $IMS_Message = \"VoLTE SIPTX: [SIPTX-SIP] ==&gt;  REGISTER\";\n        #chomp ($IMS_Message);\n    }\n\n    elsif ($value == 2)\n    {\n\n        print \"\\n SUBSCRIBE message Flow\\n\\n\";\n\n\n    }\n    elsif ($value == 3)\n    {\n\n        print \"\\n INVITE message Flow\\n\\n\";\n\n\n    }\n    else \n    {\n        print \"\\nThe input is not valid!\\n\";\n        print \"\\nDo you want to continue selecting a Automation Mode again (Y or N)?\\n\";\n\n        $choice = &lt;STDIN&gt;;\n        if( $choice =~ /[Yy]/) {        \n            test_loop();\n        } else {\n            exit;\n        }\n    }\n\nmy $kw = \"$IMS_Message\";\nmy @files = grep {-f} (&lt;*main_log&gt;);\n\nforeach my $file (@files) \n{\n    open(my $fh, '&lt;', $file) or die $!;\n    my @content = &lt;$fh&gt;;\n    close($fh);\n    my $l = 0;\n    $search = chomp ($kw);\n    #my $search = quotemeta($kw);\n        foreach (@content) \n            { # go through every line for this keyword\n                $l++;\n                if (/$search/)\n                    {\n                        printf 'Found keyword %s in file %s, line %d:%s'.$/, $kw, $file, $l, $_\n                    }\n            }\n}\n}\n</code></pre>\n\n<p>After Modificaiton</p>\n\n<pre><code># #!/usr/bin/perl\nuse strict; \nuse warnings;\n\n\n    print \"Entering the value i.e. the IMS Message to compare with\";\n    my $value = '';\n    my $choice = '';\n    my $loop = '';\n    my $IMS_Message = '';\n    my $search = '';\n    my $kw = '';\n\n    print \"\\nThe script path &amp; name is $0\\n\";\n    print \"\\nPlease enter desired number to select any of the following   \n\n    (1) Start Comparing REGISTER message !!\n    (2) Start Comparing SUBSCRIBE message\n        (3) Start Comparing INVITE message \\n\";\n\n    $value = &lt;STDIN&gt;;\n\n    if ($value == 1 )\n    {\n\n        print \"\\n Start Comparing REGISTER message\\n\\n\";\n        $IMS_Message = \"VoLTE SIPTX: [SIPTX-SIP] ==&gt;  REGISTER\";\n        #chomp ($IMS_Message);\n    }\n\n    elsif ($value == 2)\n    {\n\n        print \"\\n SUBSCRIBE message Flow\\n\\n\";\n\n\n    }\n    elsif ($value == 3)\n    {\n\n        print \"\\n INVITE message Flow\\n\\n\";\n\n\n    }\n    else \n    {\n        print \"\\nThe input is not valid!\\n\";\n        print \"\\nDo you want to continue selecting a Automation Mode again (Y or N)?\\n\";\n\n        $choice = &lt;STDIN&gt;;\n        if( $choice eq /[Yy]/) {        \n            test_loop();\n        } else {\n            exit;\n        }\n\n\n    $kw = $IMS_Message;\n    $search = qr/\\Q$kw/;\n\n    for my $file ( grep { -f } glob '*main_log' ) {\n    open my $fh, '&lt;', $file or die qq{Unable to open \"$file\" for input: $!};\n    while ( &lt;$fh&gt; ) {\n        if ( /$search/ ) {\n            printf \"Found keyword %s in file %s, line %d: %s\\n\", $kw, $file, $., $_;\n            last;\n        }\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486549664, "post_id": 42103272, "comment_id": 71389930, "body": "<code>&quot;\\r\\n&quot;</code>is <i>not</i> a safe choice. Perl applies the <code>:crlf</code> PerlIO layer to STDIN and STDOUT on Windows systems by default. That converts every <code>\\n</code> to <code>\\r\\n</code> on output, so sending <code>\\r\\n</code> will result in <code>\\r\\r\\n</code> at the end of every line of the file. You could <code>binmode STDOUT</code> and then use <code>\\r\\n</code> for <code>eol</code>, but I can&#39;t see why you would. <code>$&#47;</code> is <code>&quot;\\n&quot;</code> by default on both Windows and Linux. It may be the default everywhere, but I&#39;m unsure about platforms like VMS or EBCDIC systems."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486573011, "post_id": 42103272, "comment_id": 71406595, "body": "@Borodin Good catch, I&#39;m not sure why H.Merijn Brand added that to the docs. I submitted a <a href=\"https://rt.cpan.org/Ticket/Display.html?id=120145\" rel=\"nofollow noreferrer\">ticket</a> (the Text::CSV docs are just a shameless copy of the Text::CSV_XS docs, so I&#39;m starting at the source)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486573142, "post_id": 42103272, "comment_id": 71406700, "body": "It hadn&#39;t occurred to me that <code>Text::CSV</code> was a core module. Well done."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486574048, "post_id": 42103272, "comment_id": 71407302, "body": "@Borodin It&#39;s not. I guess Merijn does more than just work on core."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1487189493, "post_id": 42103272, "comment_id": 71675946, "body": "@Borodin In case you&#39;re curious, he <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=120145#txn-1704484\" rel=\"nofollow noreferrer\">responded</a> to my ticket, although I&#39;m not sure I follow his reasoning."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1486518910, "last_edit_date": 1592644375, "creation_date": 1486518432, "answer_id": 42103272, "question_id": 42103212, "link": "https://stackoverflow.com/questions/42103212/how-can-i-separate-rows-with-a-newline-when-exporting-to-csv-with-textcsv/42103272#42103272", "title": "How can I separate rows with a newline when exporting to CSV with Text::CSV?", "body": "<p>You need to explicitly set the record separator using the <a href=\"https://metacpan.org/pod/Text::CSV#eol\" rel=\"nofollow noreferrer\"><code>eol</code> option</a> to <code>Text::CSV-&gt;new</code>:</p>\n<blockquote>\n<p><strong>eol</strong></p>\n<pre><code>my $csv = Text::CSV-&gt;new ({ eol =&gt; $/ });\n          $csv-&gt;eol (undef);\nmy $eol = $csv-&gt;eol;\n</code></pre>\n<p>The end-of-line string to add to rows for &quot;print&quot; or the record separator for &quot;getline&quot;.</p>\n<p>[...]</p>\n<p>When not passed in a generating instance, records are not terminated at all, so it is probably wise to pass something you expect. A safe choice for <code>eol</code> on output is either <code>$/</code> or <code>\\r\\n</code>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486521297, "post_id": 42103550, "comment_id": 71377251, "body": "Argh, I forgot about <code>say</code>! It was only added to Text::CSV_PP in the 1.91 release on 2017-01-28, even though it&#39;s been in Text::CSV_XS for a couple years."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1486520318, "creation_date": 1486520318, "answer_id": 42103550, "question_id": 42103212, "link": "https://stackoverflow.com/questions/42103212/how-can-i-separate-rows-with-a-newline-when-exporting-to-csv-with-textcsv/42103550#42103550", "title": "How can I separate rows with a newline when exporting to CSV with Text::CSV?", "body": "<p>Three options:</p>\n\n<ol>\n<li>Replace <code>$csv-&gt;print($fh, $row)</code> with <code>$csv-&gt;say($fh, $row)</code>.</li>\n<li>Pass <code>eol =&gt; \"\\n\"</code> to the constructor.</li>\n<li>Follow up with <code>print($fh \"\\n\");</code>.</li>\n</ol>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42103272, "answer_count": 2, "score": -1, "last_activity_date": 1486520318, "creation_date": 1486518078, "last_edit_date": 1486519101, "question_id": 42103212, "link": "https://stackoverflow.com/questions/42103212/how-can-i-separate-rows-with-a-newline-when-exporting-to-csv-with-textcsv", "title": "How can I separate rows with a newline when exporting to CSV with Text::CSV?", "body": "<p><code>my @rows</code> has the following data:</p>\n\n<pre><code>[\n          [\n            '',\n            '2000',\n            '2001',\n            '2002',\n            '2003',\n            '2004',\n            '2005',\n            '2006',\n            '2007',\n            '2008',\n            '2009',\n            '2010',\n            '2011',\n            '2012',\n            '2013',\n            '2014',\n            '2015',\n            '2016',\n            '2017'\n          ],\n          [\n            'PA',\n            1848,\n            1851,\n            1840,\n            1783,\n            1598,\n            1084,\n            1308,\n            1170,\n            1388,\n            1326,\n            1397,\n            1452,\n            1435,\n            1425,\n            1377,\n            1343,\n            420,\n            30\n          ]\n]\n</code></pre>\n\n<p>I'm trying to export to a CSV with <a href=\"http://search.cpan.org/~ishigaki/Text-CSV-1.91/lib/Text/CSV.pm\" rel=\"nofollow noreferrer\"><code>Text::CSV</code>.</a> I have this code which is basically ripped from the doc page:</p>\n\n<pre><code>sub generate_csv_file {\n  my $self = shift;\n  my $rows = shift;\n\n  open my $fh, \"&gt;:encoding(utf8)\", \"state_reports.csv\" or logf(\"Can't open CSV file for writing\");\n  $self-&gt;csv-&gt;print ($fh, $_) for @$rows;\n  close $fh or logf(\"Can't close CSV file\");\n}\n</code></pre>\n\n<p>The file it generates looks like this with all the data on one line:</p>\n\n<pre><code>,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017PA,1848,1851,1840,1783,1598,1084,1308,1170,1388,1326,1397,1452,1435,1425,1377,1343,420,30TX,1165,1198,1202,1177,1132,772,928,866,1024,946,982,1067,1068,1050,1038,1011,310,0\n</code></pre>\n\n<p>I've looked through the documentation but don't see any obvious way to separate the lines with a newline. I must be missing something.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 5, "creation_date": 1486503734, "post_id": 42100478, "comment_id": 71371278, "body": "It is used occasionally to disambiguate between a HASH reference and a BLOCK expression. You can read more about it under <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\"><code>perldoc perlref</code></a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1486504728, "post_id": 42100478, "comment_id": 71371785, "body": "Oh dear. Perl standards written by non-Perl programmers! Surely you don&#39;t have to write <code>return \\1</code>? But always returning hash or array references is a recipe for memory leaks."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1486510750, "post_id": 42100478, "comment_id": 71374300, "body": "&quot;return ref instead of value&quot;... I&#39;ve seen that. It typically means that the return value will <i>always</i> be a reference (whether hash, array etc), even if it is empty. So if all is good, you may get a populated hash reference, but on failure or success but nothing accomplished, an empty ref <code>{}</code> (hash ref in this case). Then, the caller might: <code>if (! exists $return-&gt;{expected}){do_something(); ...}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1486508409, "post_id": 42100567, "comment_id": 71373504, "body": "Note: Deparse is a good reference, but it&#39;s not definitive. If you wanted a definitive comparison, you could use <code>diff -u &lt;( perl -MO=Concise,-exec,foo -e&#39;sub foo { return { foo =&gt; &quot;bar&quot; } }&#39; 2&gt;&amp;1 ) &lt;( perl -MO=Concise,-exec,foo -e&#39;sub foo { return +{ foo =&gt; &quot;bar&quot; } }&#39; 2&gt;&amp;1 )</code>."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 10, "last_activity_date": 1486506144, "last_edit_date": 1486506144, "creation_date": 1486503787, "answer_id": 42100567, "question_id": 42100478, "link": "https://stackoverflow.com/questions/42100478/difference-between-returning-or-in-perl-from-a-function-and-return-ref-o/42100567#42100567", "title": "Difference between returning +{} or {} in perl from a function, and return ref or value", "body": "<blockquote>\n  <p>Whats the difference?</p>\n</blockquote>\n\n<p>Those are exactly the same, so the <code>+</code> is extraneous. You can see this by using <a href=\"http://perldoc.perl.org/B/Deparse.html\">B::Deparse</a>:</p>\n\n<pre><code>$ perl -MO=Deparse -e'sub foo { return { foo =&gt; \"bar\" } }'\nsub foo {\n    return {'foo', 'bar'};\n}\n-e syntax OK\n\n$ perl -MO=Deparse -e'sub foo { return +{ foo =&gt; \"bar\" } }'\nsub foo {\n    return {'foo', 'bar'};\n}\n-e syntax OK\n</code></pre>\n\n<p>In both cases, you're returning a reference to a hash.</p>\n\n<hr>\n\n<p>As Hunter McMillen said in a comment, there are some cases where you need to use the unary <code>+</code> operator to resolve ambiguity.</p>\n\n<p>For example, to distinguish between an anonymous hash and a block in a <code>map</code>:</p>\n\n<pre><code>$ perl -e'@a = map { $_ =&gt; \"foo\" }, 1..3'   # { ... } treated as a block\nsyntax error at -e line 1, near \"},\"\nExecution of -e aborted due to compilation errors.\n\n$ perl -e'@a = map +{ $_ =&gt; \"foo\" }, 1..3'  # { ... } treated as a hashref\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>And whether to return ref or value?</p>\n</blockquote>\n\n<p>By \"returning a value,\" I assume your coworkers mean something like this:</p>\n\n<pre><code>sub foo {\n    my %bar = ( baz =&gt; 'qux' );\n    return %bar;  # as opposed to \\%bar\n}\n\nmy %hash = foo();\n</code></pre>\n\n<p>Subroutines can only return a list of scalars, so this is roughly equivalent to</p>\n\n<pre><code>my %hash = ('baz', 'qux');\n</code></pre>\n\n<p>If <code>%bar</code> contains many items, copying this list becomes expensive, so it can be better to return a reference instead:</p>\n\n<pre><code>sub foo {\n    my %bar = ( baz =&gt; 'qux' );\n    return \\%bar;\n}\n\nmy $hashref = foo();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1486510547, "post_id": 42101600, "comment_id": 71374231, "body": "Very nice explanation that removes the ambiguity from the ambiguity."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1486571710, "post_id": 42101600, "comment_id": 71405669, "body": "Note that since <code>map {}, 1..5;</code> has only one valid interpretation, so Perl could figure it out what you meant instead of guessing. 1) That assumes no one makes any syntax errors, and 2) When you disambiguate, you&#39;re not only disambiguating for Perl, but for the reader as well. In short, it&#39;s best to know the meaning of tokens as soon as possible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1574281286, "post_id": 42101600, "comment_id": 104180627, "body": "Unary-<code>+</code> doesn&#39;t even impose scalar context! <code>perl -e&#39;@a = 4..6; CORE::say for +@a&#39;</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 24, "last_activity_date": 1574322542, "last_edit_date": 1574322542, "creation_date": 1486508268, "answer_id": 42101600, "question_id": 42100478, "link": "https://stackoverflow.com/questions/42100478/difference-between-returning-or-in-perl-from-a-function-and-return-ref-o/42101600#42101600", "title": "Difference between returning +{} or {} in perl from a function, and return ref or value", "body": "<p>The <code>+</code> in <code>return +{foo=&gt;'bar'}</code> is completely useless.</p>\n\n<hr>\n\n<p>First, some background.</p>\n\n<p>The Perl language has ambiguities. Take for example</p>\n\n<pre><code>sub f {\n   {  }     # Is this a hash constructor or a block?\n}\n</code></pre>\n\n<p><code>{ }</code> is valid syntax for a block (\"bare loop\").<br>\n<code>{ }</code> is valid syntax for a hash constructor.<br>\nAnd both are allowed as a statement!</p>\n\n<p>So Perl has to guess. Perl usually guesses correctly, but not always. You can give it \"hints\". Unary-<code>+</code> can be used to do this. Unary-<code>+</code> is a completely transparent operator; it does nothing at all. However, it must be followed by an expression (not a statement). <code>{ }</code> has only one possible meaning as an expression.</p>\n\n<pre><code>+{ }   # Must be a hash constructor.\n</code></pre>\n\n<p>Similarly, you can trick Perl to guess the other way.</p>\n\n<pre><code>{; }   # Perl looks ahead, and sees that this must be a block.\n</code></pre>\n\n<p>Here's an example where Perl guesses wrong:</p>\n\n<pre><code>map { {} } 1..5   # ok. Creates 5 hashes and returns references to them.\nmap {}, 1..5      # XXX Perl guesses you were using \"map BLOCK LIST\".\nmap +{}, 1..5     # ok. Perl parses this as \"map EXPR, LIST\".\n</code></pre>\n\n<hr>\n\n<p>As for the code in the question, <code>return</code> must be followed by an expression (if anything), so there's only one possible interpretation for <code>return { ... };</code>, so the <code>+</code> is completely useless there.</p>\n\n<p>Most people only disambiguate when necessary. Others might add <code>+</code> whenever it's ambiguous (even if Perl would guess right). But this is the first time I've heard of using <code>+</code> in front of every hash constructor.</p>\n"}], "owner": {"reputation": 431, "user_id": 4176599, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rSAC5.png?s=128&g=1", "display_name": "Sahib Khan", "link": "https://stackoverflow.com/users/4176599/sahib-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1708, "favorite_count": 4, "accepted_answer_id": 42101600, "answer_count": 2, "score": 11, "last_activity_date": 1574322542, "creation_date": 1486503466, "question_id": 42100478, "link": "https://stackoverflow.com/questions/42100478/difference-between-returning-or-in-perl-from-a-function-and-return-ref-o", "title": "Difference between returning +{} or {} in perl from a function, and return ref or value", "body": "<p>I just started work with a new team new place. They told me we return ref instead of value in our perl modules. Also I saw something like <code>return +{foo=&gt;'bar'}; and return {foo=&gt;'bar'};</code> Whats the difference? And whether to return ref or value?</p>\n"}, {"tags": ["string", "performance", "perl", "substring"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486496637, "post_id": 42098488, "comment_id": 71367505, "body": "Your comment says <code>#delim is space here, remove them</code> but you have said that the delimiter is a comma <code>,</code>. There&#39;s at least one of your problems."}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486496655, "post_id": 42098488, "comment_id": 71367518, "body": "no, i said delimiter is a delimiter, for example a comma, the code works, I just want better performance"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486496894, "post_id": 42098488, "comment_id": 71367657, "body": "Erm, okay, but it would help if your code matched your example data"}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486497032, "post_id": 42098488, "comment_id": 71367725, "body": "I am testing with &gt;90MB of data, so it will never match :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486497325, "post_id": 42098488, "comment_id": 71367865, "body": "You mean it varies through the 90MB?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486497613, "post_id": 42098488, "comment_id": 71368027, "body": "Can you show example output as well?"}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486497647, "post_id": 42098488, "comment_id": 71368048, "body": "@Borodin Doesnt matter, because they are always single characters, and it always starts with one, so you can ignore odd indexes. Assume the delimiter is the same though, no need for that complexity sidequest atm. Given the eg. I want some api call or method that returns 1 faster than my code, as there is only one decreasing adjacent pair in there, <code>e,a</code>. Ill update I guess..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486498185, "post_id": 42098488, "comment_id": 71368337, "body": "@simbabque: Example output is presumably something like <code>42</code>!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486498494, "post_id": 42098488, "comment_id": 71368497, "body": "<b><i>&quot;This leads me to assume perl &quot;manual&quot; code is slower than using the built in engine.&quot;</i></b> Exactly. The Perl engine is written in C and highly optimised."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486502672, "post_id": 42098488, "comment_id": 71370718, "body": "Are the characters limited to a-z?"}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486503423, "post_id": 42098488, "comment_id": 71371103, "body": "no, they shouldnt (they should be ascii), but feel free to keep it within a-z0-9, or assume strict a-z (or 0-9) if you can do something faster. Just point it out. I could use your answer as a branch."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486505220, "post_id": 42098488, "comment_id": 71372041, "body": "Does this code have to be in Perl? The fastest way would clearly be to write a very short C program."}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486505471, "post_id": 42098488, "comment_id": 71372185, "body": "yes, must be Perl"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1486498202, "post_id": 42099012, "comment_id": 71368348, "body": "Was writing up an answer that said basically the same. Although I was thinking in terms of iterating <code>&lt;&gt;</code> one at a time using <code>$&#47; = &#39;,&#39;;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1486498252, "post_id": 42099012, "comment_id": 71368373, "body": "@Sobrique: I think we&#39;re supposed to assume that there&#39;s just a single 90MB line in the file, and we must pretend that we have no idea what the separator is! And that would be so slow!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486498388, "post_id": 42099012, "comment_id": 71368428, "body": "@HunterMcMillen: That&#39;s the record separator. It defines where in a file your <code>&lt;&gt;</code> will stop, and is set to linefeed by default. Localising it implicitly sets it to <code>undef</code> and so the whole file is read."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486498611, "post_id": 42099012, "comment_id": 71368562, "body": "@Borodin the following input <code>a,b,c,d,e,a,b,c,d,e</code> produces 8 from your solution, when I believe 1 is expected. I think you just have your predicate backward (i.e. P &lt; C vs C &lt; P)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486498684, "post_id": 42099012, "comment_id": 71368607, "body": "@HunterMcMillen: That&#39;s right, I think. It&#39;s the number of intervals where the first character is less than the second, which is all of them except for <code>e,a</code>"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486498989, "post_id": 42099012, "comment_id": 71368765, "body": "@Borodin hmm ok, it seems like the problem statement says that for every character pair p,c count the number of times c is less than p lexicographically. This would be 1 in this case. Maybe I read it incorrectly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486499208, "post_id": 42099012, "comment_id": 71368873, "body": "@HunterMcMillen: You&#39;re right. I missed that <code>p</code> and <code>c</code> had been switched. It&#39;s a weird spec altogether. Fixed anyway"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486499374, "post_id": 42099012, "comment_id": 71368948, "body": "How did you benchmark your code out of curiosity? Your solution was running in ~6 seconds on my machine for an 18MB file."}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486499532, "post_id": 42099012, "comment_id": 71369039, "body": "With my 90MB file I got out of memory, I assume its the array."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1486499776, "post_id": 42099012, "comment_id": 71369179, "body": "@HunterMcMillen: I used <a href=\"https://metacpan.org/pod/Benchmark\" rel=\"nofollow noreferrer\">Benchmark</a>. It ran 201 times in ten seconds. I can&#39;t imagine what you&#39;ve done that take 19 seconds! Are you sure your file is 90MB?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1486499932, "post_id": 42099012, "comment_id": 71369282, "body": "@l&#39;L&#39;l: You&#39;re right that a cache would help, but the main time is taken in reading ~100MB data which will take about one second on an average hard disk. The processing is insignificant."}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486500471, "post_id": 42099012, "comment_id": 71369592, "body": "about 450MB available, the test file is exactly 96.8MB, every two bits is an element in your array, while I&#39;m not sure how it gets to eat that much memory (if it was a char array in C it would be smallish), I&#39;m certain I get out of memory though"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486500476, "post_id": 42099012, "comment_id": 71369596, "body": "I apologise. I&#39;ve been working with a <b><i>90KB</i></b> test file. I&#39;m working on a fix."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486500528, "post_id": 42099012, "comment_id": 71369629, "body": "You have 450MB memory? That&#39;s miniscule"}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486500742, "post_id": 42099012, "comment_id": 71369738, "body": "using more than 4x the memory seems wasteful, feel free to answer without regards to space, but please add how much space it would need."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486501174, "post_id": 42099012, "comment_id": 71369944, "body": "@gia: I&#39;ve written an update that avoids expanding the data into an array. It runs in 30 seconds on my system"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486502451, "post_id": 42099012, "comment_id": 71370605, "body": "@gia I was just about to write up an answer with reading into an array, expecting it to be faster (and certainly much simpler coding-wise). It shouldn&#39;t take so much more RAM? (Can you not get to work with more memory?  That is really, really small.)  However, the regex solution is nice, too."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486502584, "post_id": 42099012, "comment_id": 71370674, "body": "@gia: See my new update. It seems that, this time, <code>substr</code> beats regular expressions"}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486502600, "post_id": 42099012, "comment_id": 71370681, "body": "feel free to answer if its faster than my code, just state the ram (in O() notation if you can) if it will need more than 4x"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486503029, "post_id": 42099012, "comment_id": 71370897, "body": "@gia: Your original code doesn&#39;t look right to me (apart from the <code>&gt;</code> instead of <code>gt</code>). Surely you should be incrementing <code>$r</code> by 1 only if <code>$p gt $c</code>? But you&#39;re adding 2 or 1, and you&#39;re doing it twice!. Also, <code>$i</code> needs to be incremented by 2 every time. Or did I misunderstand you?"}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486503057, "post_id": 42099012, "comment_id": 71370906, "body": "[substr (this is basically my code lol): 200KB: ~0.03, 19MB: ~2.99, &gt;90MB: ~14.45 ]. [regex once/array: 0.05,error,error] [ regex loop: 0.04, 4.88, &gt;20s] Your code answers my final paragraph question, my code calculates one more thing, ignore that I may just edit it to avoid confusion."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1486502671, "last_edit_date": 1486502671, "creation_date": 1486498121, "answer_id": 42099012, "question_id": 42098488, "link": "https://stackoverflow.com/questions/42098488/count-applied-to-adjacent-characters-on-long-string-in-perl-performance/42099012#42099012", "title": "Count applied to adjacent characters on long string in perl, performance", "body": "<p>Here are some thoughts on your code</p>\n\n<ul>\n<li><p>You <em>must always</em> <code>use strict</code> and <code>use warnings 'all'</code> at the top of every Perl program that you write, and declare every variable with <code>my</code> as close as possible to it's first point of use</p>\n\n<p>You should use <em>meaningful</em> variable names (they shouldn't need comments) especially in code that you're showing to others</p></li>\n<li><p>Use Perl string comparisons <code>lt</code> <code>eq</code> <code>gt</code> when you are comparing strings</p></li>\n<li><p>Consider using regular expressions. Perl doesn't have a performant \"string\" type, but a simple regex match is generally faster than a call to <code>substr</code></p></li>\n<li><p>90MB of data isn't so big. 2000MB might start to be a problem depending on your system</p></li>\n</ul>\n\n<h3>Update</h3>\n\n<p>I'm sorry, I've messed this answer up. I've tested using <code>substr</code> and the performance nearly doubles. So this is one instance where it's faster than the regular expression engine.</p>\n\n<p>I get 16 seconds for this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $data = do {\n    local $/;\n    &lt;&gt;;\n};\n\nmy $len = length $data;\n\nmy $prev = substr $data, 0, 1;\n\nmy $result = 0;\n\nfor ( my $i = 2; $i &lt; $len; $i += 2 ) {\n    my $curr = substr $data, $i, 1;\n    ++$result if $prev gt $curr;\n    $prev = $curr;\n}\n\nsay $result;\n</code></pre>\n\n<h2><br/></h2>\n\n<h3>Update</h3>\n\n<p>Here's a variant that should work. It iterates through the 90MB of data using a regular expression, and so uses only the 90MB plus two characters at a time to compare them</p>\n\n<p>It takes 30 seconds to run on my system</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $data = do {\n    local $/;\n    &lt;&gt;;\n};\n\nmy $result = 0;\n\n$data =~ /(.)./gs;\nmy $prev = $1;\n\nwhile ( $data =~ /(.)./gs ) {\n    ++$result if $1 lt $prev;\n    $prev = $1;\n}\n\nsay $result;\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p>Here's how I would solve your problem. It assumes that every second character is a separator as you described, and runs in less than fifty milliseconds on 90MB of data</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy @data = do {\n    local $/;\n    &lt;&gt; =~ /(.).?/sg;\n};\n\nmy $result = 0;\n\nfor my $i ( 0 .. $#data-1 ) {\n    ++$result if $data[$i] gt $data[$i+1];\n}\n\nsay $result;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486502366, "post_id": 42099217, "comment_id": 71370555, "body": "I would imagine <code>read</code> would be faster than <code>sysread</code> because of the user-side buffer. Still, both sound rather expensive compared to maintaining your own buffer."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486502898, "post_id": 42099217, "comment_id": 71370835, "body": "@ikegami yeah, definitely agree. This was a pretty naive first pass."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 1, "last_activity_date": 1486555438, "last_edit_date": 1486555438, "creation_date": 1486498852, "answer_id": 42099217, "question_id": 42098488, "link": "https://stackoverflow.com/questions/42098488/count-applied-to-adjacent-characters-on-long-string-in-perl-performance/42099217#42099217", "title": "Count applied to adjacent characters on long string in perl, performance", "body": "<p>Alternative solution that reads a single character at a time: </p>\n\n<pre><code>#!perl\n\nuse strict;\nuse warnings;\n\nuse feature qw(say);\n\nmy $c = '';\nmy $p = '';\nmy $delim = ',';\nmy $fh = \\*STDIN;\nmy $acc = 0;\n\nwhile ( sysread($fh, $c, 1) ) {\n  next if $c eq $delim;\n  $acc++ if $p &amp;&amp; $c le $p;\n  $p = $c;\n}\nsay $acc;\n\n# echo -n 'a,b,c,d,e,a,b,c,d,e' | perl test.pl\n# 1 \n</code></pre>\n\n<p>Solution ran on a ~18MB file in 4.93s</p>\n"}, {"comments": [{"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486504742, "post_id": 42100382, "comment_id": 71371792, "body": "b,a returns 1, c,b returns 1, but c,b,a returns 1, I dont see the bug"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486506149, "post_id": 42100382, "comment_id": 71372519, "body": "@gia, Fixed. (I needed to look ahead.)"}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486507088, "post_id": 42100382, "comment_id": 71372933, "body": "yeah was going to ask you to repost, [regex with look ahead is 200KB: &lt;0.01s, 19MB: 0.02, 90MB: 7.75s], [unpack is 0.02, 2.16, 10.02], idk why it is slower"}, {"owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 0, "creation_date": 1486508810, "post_id": 42100382, "comment_id": 71373674, "body": "[subtr: 0.02, 2.74, 13.32] so slower, C beats the crap out of everything though"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "edited": false, "score": 1, "creation_date": 1486509432, "post_id": 42100382, "comment_id": 71373882, "body": "I&#39;m using <code>tr&#47;&#47;&#47;</code> with impunity because it&#39;s extremely fast, and presumed to be faster than having to account for commas later. Testing seems to bear this out."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486513192, "post_id": 42100382, "comment_id": 71375060, "body": "It never ceases to surprise me just how fast <code>substr</code> is. But I don&#39;t understand why mere indexing into an array isn&#39;t faster. (Comparing array iteration vs. char-via-substr iteration -- it&#39;s literally index vs. substring).  I&#39;ve been playing with it on my system and find them to be about the same, as well."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486513469, "post_id": 42100382, "comment_id": 71375138, "body": "Re &quot;<i>It never ceases to surprise me just how fast substr is.</i>&quot;, Really? I usually find it slower than a smarter approach. For example, the OP found my regex approach faster than my substr approach. /// I think you&#39;re asking about the <code>unpack</code> solution? The time is spent allocating and deallocating all those scalars and assigning them to an array (which creates a whole new set of scalars) basically offsets the 4 extra operations needed by the <code>substr</code> solution. [Note that substr would be way slower on &quot;upgraded&quot; strings, but the <code>binmode</code> on the input handle gives us &quot;downgraded&quot; strings.]"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1486513571, "last_edit_date": 1486513571, "creation_date": 1486503123, "answer_id": 42100382, "question_id": 42098488, "link": "https://stackoverflow.com/questions/42098488/count-applied-to-adjacent-characters-on-long-string-in-perl-performance/42100382#42100382", "title": "Count applied to adjacent characters on long string in perl, performance", "body": "<p>I'd try leverage the regex engine.</p>\n\n<pre><code>use constant BLOCK_SIZE =&gt; 4*1024*1024;\n\nmy $pat = join '|', map { $_ . \"(?=[a-\" . chr(ord($_)-1) . '])' } 'b'..'z';\nmy $re = qr/$pat/;\n\nbinmode(STDIN);\n\nmy $count = 0;\nmy $buf = '';\nwhile (sysread(\\*STDIN, $buf, BLOCK_SIZE, length($buf))) {\n   $buf =~ tr/,//d;\n   ++$count while $buf =~ /$re/g;\n   $buf = substr($buf, -1);\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ perl -e'my @syms = \"a\"..\"z\"; print($syms[rand(@syms)], \",\") for 1..90*1000*1000/2' &gt;data\n\n$ time script.pl &lt;data\n21634012\n\nreal    0m34.393s\nuser    0m34.306s\nsys     0m0.084s\n</code></pre>\n\n<hr>\n\n<p>But since I had too use a look-ahead, I don't think that's very fast. In fact, it turns out to be twice as slow as a rather na&iuml;ve approach.</p>\n\n<pre><code>$buf =~ tr/,//d;\nmy @chars = unpack('C*', $buf);\nfor (1..$#chars) {\n   ++$count if $chars[$_ - 1] &gt; $chars[$_];\n}\n$buf = substr($buf, -1);\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>21634012\n\nreal    0m14.206s\nuser    0m14.005s\nsys     0m0.200s\n</code></pre>\n\n<hr>\n\n<p>Even using <code>substr</code> is better than the regex approach!</p>\n\n<pre><code>$buf =~ tr/,//d;\nfor (1..length($buf)-1) {\n   ++$count if substr($buf, $_-1, 1) gt substr($buf, $_, 1);\n}\n$buf = substr($buf, -1);\n</code></pre>\n\n<p>Times are similar to the preceding solution.</p>\n\n<hr>\n\n<p>The real gains come from writing an XS routine.</p>\n\n<pre><code>use constant BLOCK_SIZE =&gt; 4*1024*1024;\n\nuse Inline C =&gt; &lt;&lt;'__EOS__';\n\n   IV count(SV* sv) {\n      STRLEN len;\n      const char* s;\n      char last = '\\x00';\n      IV count = 0;\n\n      SvGETMAGIC(sv);\n      s = SvPVbyte(sv, len);\n\n      len += 2 - (len % 2);\n      while (len -= 2) {\n         if (*s &lt; last)\n            ++count;\n\n         last = *s;\n         s += 2;\n      }\n\n      return count;\n   }\n\n__EOS__\n\nbinmode(STDIN);\n\nmy $count = 0;\nmy $buf = '';\nwhile (sysread(\\*STDIN, $buf, BLOCK_SIZE, length($buf))) {\n   $count += count($buf);\n   $buf = substr($buf, -2) =~ tr/,//dr;  # Have to account for odd read sizes.\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>21634012\n\nreal    0m0.207s\nuser    0m0.140s\nsys     0m0.064s\n</code></pre>\n\n<p>(The first time you run this, it will be slower than subsequent runs.)</p>\n\n<hr>\n\n<p>The regex solution made additional assumptions:</p>\n\n<ul>\n<li>The characters are limited to <code>a</code> to <code>z</code>. The set can be adjusted, of course.</li>\n</ul>\n\n<p>All of the above solution (incl the regex solution) made additional assumptions:</p>\n\n<ul>\n<li>The system is an ASCII system (though it would be easy to adjust to not make this assumption).</li>\n</ul>\n\n<p>The tests were run using 5.24.0 on a shared Linux machine with unknown hardware.</p>\n"}], "owner": {"reputation": 747, "user_id": 4675404, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/101bf4435d0895eb39d67c93345b3805?s=128&d=identicon&r=PG&f=1", "display_name": "gia", "link": "https://stackoverflow.com/users/4675404/gia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 42100382, "answer_count": 3, "score": 0, "last_activity_date": 1486555438, "creation_date": 1486496279, "last_edit_date": 1486513093, "question_id": 42098488, "link": "https://stackoverflow.com/questions/42098488/count-applied-to-adjacent-characters-on-long-string-in-perl-performance", "title": "Count applied to adjacent characters on long string in perl, performance", "body": "<p>I have a very long string, at least 90MB (no upper limit, but lets assume it doesn't blow up the system). It consists of single characters, with a delimiter in between each. eg. <code>a,b,c,d,e,a,b,c,d,e</code></p>\n\n<p>For each adjacent pair <code>p,c</code> of characters (minus the delimiter), I want to count the times <code>p</code> is greater than <code>c</code> (lexicographically, ascii).</p>\n\n<p>The string is fed via <code>stdin</code> on my code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $c; #current\nmy $p = 0; #previous\nmy $r = 0; #result\n\nmy $i = -1; #= 0\nmy $IN = &lt;STDIN&gt;;\n\n$IN =~ tr/ //d; #delim is space here, remove them\nmy $K = length($IN);\nwhile( ++$i &lt; $K ){\n    $c = substr($IN,$i,1);\n    #$i+=2;\n    if($c&lt;$p){++$r;}\n\n    #repeat to avoid an assignment\n    if( ++$i == $K ){ #&gt;=\n        last;\n    }\n    $p = substr($IN,$i,1);\n    if($p&lt;$c){++$r;}\n    #$i+=2;\n}\n\nsay $r; #given 'a b c b a b a' it should print 3 for the pairs (c,b),(b,a),(b,a)\n        #given 'a b c d e a b c d e' it should print 1 for the pair (e,a)\n</code></pre>\n\n<p>This code takes, for test files with size: 200KB: 0.02s, 19MB: 2s, 90MB: 9.91s.</p>\n\n<p>I noticed that if I dont spend time removing the delimiters, and instead use the commented code alternatives (jumping in +2 steps), the code actually runs slower. This leads me to assume perl \"manual\" code is slower than using the built in engine.</p>\n\n<p>Given the character list on the <code>eg.</code>, if separated by spaces, the code would set <code>$r</code> with <code>1</code>, because there are 10 characters, but only one adjacent pair is decreasing <code>e,a</code>.</p>\n\n<p>So to perl experts, is there a way to count the instances where <code>p &gt; c</code>? in a single api call?. I need something that would return <code>1</code> if fed the example string (for <code>e,a</code>).</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486496317, "post_id": 42097728, "comment_id": 71367329, "body": "<i>&quot;I found some code&quot;</i>. I&#39;m sorry, but software engineering isn&#39;t a matter of cribbing code from one person and taking it to someone else to fix it up for you. If you know some Perl then please at least try. If you don&#39;t, and have no intention of learning it, then you should seek out someone who will do it professionally for you."}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1486503824, "post_id": 42098983, "comment_id": 71371321, "body": "Great! but need to dump it into a new file. I&#39;ve tried <code>$ perl -wpe &#39;s&#47;\\s&#47;++$i . &quot; &quot;&#47;e if &#47;^&gt;&#47;&#39; input.fas &gt; final.fas</code> but didn&#39;t work. thanks"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1486504212, "post_id": 42098983, "comment_id": 71371521, "body": "it printed the modified file on the command line but when I open input.fas in excel it did not change."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1486504329, "post_id": 42098983, "comment_id": 71371587, "body": "@user3781528 Correct, the original file will not be modified. The file that you redirected the output to will contain the changes."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1486504415, "post_id": 42098983, "comment_id": 71371631, "body": "i don&#39;t know how to redirect the output correctly. I get an error message with this code. <code>$ perl -wpe &#39;s&#47;\\s&#47;++$i . &quot; &quot;&#47;e if &#47;^&gt;&#47;&#39; input.fas &gt; final.fas</code>"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1486504531, "post_id": 42098983, "comment_id": 71371683, "body": "syntax error at -e line 1, near &quot;^&gt;&quot; Search pattern not terminated at -e line 1."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1486505863, "post_id": 42098983, "comment_id": 71372366, "body": "@user3781528 Seems like it could be a copy-and-paste error, but it&#39;s hard to say without more information. Which shell are you using? If nothing else, I guess you could always use the <code>-i</code> switch to edit the file in place..."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1486506212, "post_id": 42098983, "comment_id": 71372555, "body": "not sure which shell I&#39;m using. where do I put the switch? <code>$ perl -i -wpe &#39;s&#47;\\s&#47;++$i . &quot; &quot;&#47;e if &#47;^&gt;&#47;&#39; input.fas &gt; final.fas</code>"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 0, "last_activity_date": 1486498000, "creation_date": 1486498000, "answer_id": 42098983, "question_id": 42097728, "link": "https://stackoverflow.com/questions/42097728/insert-consecutive-number-after-fa-header-id/42098983#42098983", "title": "insert consecutive number after .fa header id", "body": "<pre><code>$ perl -wpe 's/\\s/++$i . \" \"/e if /^&gt;/' input.fa\n</code></pre>\n\n<p>Explanation:</p>\n\n<ol>\n<li>Substitute first occurrence of whitespace with counter variable and single space...</li>\n<li>...but only if the line starts with <code>&gt;</code></li>\n<li>Print every line (due to <code>-p</code> switch)</li>\n</ol>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42098983, "answer_count": 1, "score": -1, "last_activity_date": 1486498000, "creation_date": 1486493770, "question_id": 42097728, "link": "https://stackoverflow.com/questions/42097728/insert-consecutive-number-after-fa-header-id", "title": "insert consecutive number after .fa header id", "body": "<p>I have a large .fa file that consists of multiple merged fasta files. Each file is separated by header line and begins with \">\". \nHere is an example:</p>\n\n<pre><code>&gt;DPB1*04:01:01:01 [most similar sequence] for DPB1 in 3507009462\n</code></pre>\n\n<p>I would like to modify each header inside the file by adding a consecutive integer after each id. The id is the first sequence of characters after \">\" and before the first space.\nThe modified header would look like this:</p>\n\n<pre><code>&gt;DPB1*04:01:01:011 [most similar sequence] for DPB1 in 3507009462\n</code></pre>\n\n<p>I found some code that replaces the header by a consecutive number but not sure how to insert it after the header id.</p>\n\n<pre><code>cat youFile.fa | perl -ane 'if(/\\&gt;/){$a++;print \"&gt;$a\\n\"}else{print;}' &gt; youFile_new.fa\n</code></pre>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["arrays", "perl", "hashmap", "slice"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486488662, "post_id": 42096206, "comment_id": 71362990, "body": "Which Perl version are you using?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486490841, "post_id": 42096206, "comment_id": 71364256, "body": "<code>defined($_) ? $_ : $default</code> is usually written <code>$_ &#47;&#47; $default</code>. Also note that subroutine prototypes should be avoided because, as you have seen, they almost certainly don&#39;t do what you want them to do. They are intended for writing library functions that emulate the behaviour of built-in Perl operators, and that is certainly not what you are doing here."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486490955, "post_id": 42096206, "comment_id": 71364303, "body": "<code>&#47;&#47;</code> has been available since 5.10."}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1486497459, "post_id": 42096206, "comment_id": 71367938, "body": "I&#39;ll have to remember <code>&#47;&#47;</code>, it seems useful.  As for avoiding prototypes, the code I&#39;m working on will likely be used and modified by people who aren&#39;t terribly perl savvy.  Prototypes help me avoid a lot of the guesswork on what kind of edge cases I need to check for."}], "answers": [{"comments": [{"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1486497718, "post_id": 42096728, "comment_id": 71368089, "body": "Looks like I need to brush up on my <a href=\"http://perldoc.perl.org/perldata.html#List-value-constructors\" rel=\"nofollow noreferrer\">data types</a>.  I didn&#39;t realize there was such a difference between arrays and lists.  I incorrectly thought that slices returned arrays, but it appears they return lists instead.  Sadly, it doesn&#39;t appear that lists are a valid data type for subroutine prototypes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 2, "creation_date": 1486497764, "post_id": 42096728, "comment_id": 71368112, "body": "There&#39;s no list data type. List usually refers to scalars on the stack or the comma operator."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 1, "creation_date": 1486497924, "post_id": 42096728, "comment_id": 71368196, "body": "Re &quot;<i>I incorrectly thought that slices returned arrays</i>&quot;, Like every other sub and operator, they return a scalar in scalar context and zero or more scalars in list context. (There are exceptions where an array or hash is actually passed to an operator instead of being evaluated.  This kinda work like the <code>\\@</code> prototype. An example is <code>@a = ...</code>.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1486494098, "last_edit_date": 1486494098, "creation_date": 1486490236, "answer_id": 42096728, "question_id": 42096206, "link": "https://stackoverflow.com/questions/42096206/passing-hash-slice-to-subroutine-expecting-array-reference/42096728#42096728", "title": "Passing hash slice to subroutine expecting array reference", "body": "<blockquote>\n  <p><em>How is it that a hash slice can be coaxed into an array with assignment</em></p>\n</blockquote>\n\n<p>It's not. A hash slice in list context evaluates to a number of scalars, and the list assignment operator is perfectly happy with that.</p>\n\n<p>In other words,</p>\n\n<pre><code>@L{qw( a b )} = @R{qw( a b )};\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>($L{a}, $L{b}) = ($R{a}, $R{b});\n</code></pre>\n\n<hr>\n\n<p>As your comment says, <code>undef_to_value</code> expects an array reference. The prototype provides this if you provide an array, but you are providing\" an hash slice instead. That's not a type a variable, so you can't take a reference to it<sup>[1]</sup>.</p>\n\n<p>Just accept scalars instead:</p>\n\n<pre><code>sub undef_to_value {\n    my $default = shift(@_);\n    return map { $_ // $default } @_;\n}\n\nmy @student_grades = undef_to_value(0, @grades{ @students });\n</code></pre>\n\n<p>Of course, you could simply use</p>\n\n<pre><code>my @student_grades = map { $_ // 0 } @grades{ @students };\n</code></pre>\n\n<hr>\n\n<ol>\n<li><code>\\@h{LIST}</code> is equivalent to <code>map { \\$_ } @h{LIST}</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1486491597, "creation_date": 1486491597, "answer_id": 42097126, "question_id": 42096206, "link": "https://stackoverflow.com/questions/42096206/passing-hash-slice-to-subroutine-expecting-array-reference/42097126#42097126", "title": "Passing hash slice to subroutine expecting array reference", "body": "<p>You can fool the prototype by referencing and then dereferencing an arbitrary list</p>\n\n<pre><code>undef_to_value( @{[@grades{ @students }]}, 0 );\n</code></pre>\n\n<p>but this will only modify a copy of your input, so it's not that helpful.</p>\n\n<pre><code>undef_to_value( @{[@grades{ @students }]}, 0 );\nprint Dumper([@grades{@students}]);\n---\n$VAR1 = [\n    100,\n    85,\n    undef\n        ];\n</code></pre>\n\n<p>Fortunately, your <code>undef_to_value</code> function also returns the set of updated values, so you can say</p>\n\n<pre><code>@grades{@students} = undef_to_value( @{[@grades{ @students }]}, 0 );\nprint Dumper(\\%grades);\n---\n$VAR1 = {\n          'Bob' =&gt; 85,\n          'Carol' =&gt; 92,\n          'Eve' =&gt; 0,\n          'Alice' =&gt; 100\n        };\n</code></pre>\n"}], "owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 42096728, "answer_count": 2, "score": 2, "last_activity_date": 1486494098, "creation_date": 1486488453, "last_edit_date": 1486488793, "question_id": 42096206, "link": "https://stackoverflow.com/questions/42096206/passing-hash-slice-to-subroutine-expecting-array-reference", "title": "Passing hash slice to subroutine expecting array reference", "body": "<p>Consider the following perl script:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\n# Expects an array reference and an undef replacement value\nsub undef_to_value(\\@$) {\n    my $array_ref = shift(@_);\n    my $default   = shift(@_);\n\n    # Map each element in the array referenced by $array_ref to...\n    #   If the element is defined, itself\n    #   Otherwise, the $default value\n    return map {\n        defined($_) ? $_ : $default\n    } @{ $array_ref };\n}\n\n\nmy %grades = (\"Alice\" =&gt; 100, \"Bob\" =&gt; 85, \"Carol\" =&gt; 92);\nmy @students = (\"Alice\", \"Bob\", \"Eve\");\n</code></pre>\n\n<p>The following code works as expected:</p>\n\n<pre><code>my @student_grades = @grades{ @students };\n@student_grades = undef_to_value(@student_grades, 0);\n\nprint Dumper(\\@student_grades);\n# $VAR1 = [\n#           100,\n#           85,\n#           0\n#         ];\n</code></pre>\n\n<p>However, trying to pass a hash slice results in <code>Type of arg 1 to main::undef_to_value must be array (not hash slice)</code>:</p>\n\n<pre><code>my @student_grades = undef_to_value( @grades{ @students }, 0 );\n</code></pre>\n\n<p>How is it that a hash slice can be coaxed into an array with assignment, but not during a subroutine call?<br>\nIs there any way to get the failing example to work as a single assignment?</p>\n"}, {"tags": ["python", "perl", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486484615, "post_id": 42094797, "comment_id": 71360153, "body": "Now my question is, how do I get demo data into my code? :D"}, {"owner": {"reputation": 1073, "user_id": 2402558, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xCQRu.jpg?s=128&g=1", "display_name": "Christopher Wirt", "link": "https://stackoverflow.com/users/2402558/christopher-wirt"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486484752, "post_id": 42094797, "comment_id": 71360253, "body": "@simbabque Pastbin for you <a href=\"http://pastebin.com/LR0StPHu\" rel=\"nofollow noreferrer\">pastebin.com/LR0StPHu</a>"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1486486486, "last_edit_date": 1486486486, "creation_date": 1486485361, "answer_id": 42095221, "question_id": 42094797, "link": "https://stackoverflow.com/questions/42094797/a-script-to-strip-ranges-of-utf-8-characters-out-of-a-file/42095221#42095221", "title": "A script to strip ranges of UTF-8 Characters out of a file", "body": "<p>You need to work with characters, not with bytes.</p>\n\n<p>If you have your data inside of your code, and you use the <code>use utf8</code> pragma to tell Perl that your program's source code is in utf8. We do this for the example so you can copy/paste my code.</p>\n\n<p>You can do a string replace using the <a href=\"http://perldoc.perl.org/perlre.html#Escape-sequences\" rel=\"nofollow noreferrer\"><code>\\x{}</code> escape sequence</a> in a character class <code>[]</code>. Those can be used in ranges as well as individually.</p>\n\n<pre><code>use utf8;\n\nmy $foo = \"asfd \u2603 \udbc0\udc2b\udbc0\udc36\udbc0\udc25\udbc0\udc26\udbc0\udc36\udbc0\udc44\udbc0\udc58\udbc0\udc47\udbc0\udc4c\udbc0\udc24\udbc0\udc55\udbc0\udc44\udbc0\udc45\udbc0\udc4c\udbc0\udc44\udbc0\udc2f\udbc0\udc4c\udbc0\udc50\udbc0\udc4c\udbc0\udc57\udbc0\udc48\udbc0\udc47 \u0532\u0561\u0580\u0565\u0582 \u0eaa\u0eb0\u0e9a\u0eb2\u0e8d\u0e94\u0eb5\";\n$foo =~ s/[\\x{10002b}\\x{100036}]//g;\nCORE::say $foo;\n</code></pre>\n\n<p>This will output:</p>\n\n<pre><code>asfd \u2603 \udbc0\udc25\udbc0\udc26\udbc0\udc44\udbc0\udc58\udbc0\udc47\udbc0\udc4c\udbc0\udc24\udbc0\udc55\udbc0\udc44\udbc0\udc45\udbc0\udc4c\udbc0\udc44\udbc0\udc2f\udbc0\udc4c\udbc0\udc50\udbc0\udc4c\udbc0\udc57\udbc0\udc48\udbc0\udc47 \u0532\u0561\u0580\u0565\u0582 \u0eaa\u0eb0\u0e9a\u0eb2\u0e8d\u0e94\u0eb5\n</code></pre>\n\n<p>(There's also a <em>wide character in print</em> warning, but let's ignore that, it's because my STDOUT is not opened properly).</p>\n\n<p>The two characters I substituted <code>\\x{10002b}\\x{100036}</code> are the first two characters in your example data. The font I use in my IDE shows the ordinals of characters that it doesn't have any glyphs for, so it's easy for me to tell what those characters are.</p>\n\n<p><a href=\"https://i.stack.imgur.com/a4clJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a4clJ.png\" alt=\"my font shows character ordinals\"></a></p>\n\n<p>These characters are from the <a href=\"https://en.wikipedia.org/wiki/Private_Use_Areas\" rel=\"nofollow noreferrer\">Supplementary Private Use Area-B</a>. (<a href=\"https://en.wikipedia.org/wiki/Unicode_block\" rel=\"nofollow noreferrer\">Wikipedia</a>)</p>\n\n<blockquote>\n  <p>16 PUA-B  U+100000..U+10FFFF  Supplementary Private Use Area-B    65,536  65,534  Unknown</p>\n</blockquote>\n\n<p>So we can also do a range.</p>\n\n<pre><code>my $foo = \"asfd \u2603 \udbc0\udc2b\udbc0\udc36\udbc0\udc25\udbc0\udc26\udbc0\udc36\udbc0\udc44\udbc0\udc58\udbc0\udc47\udbc0\udc4c\udbc0\udc24\udbc0\udc55\udbc0\udc44\udbc0\udc45\udbc0\udc4c\udbc0\udc44\udbc0\udc2f\udbc0\udc4c\udbc0\udc50\udbc0\udc4c\udbc0\udc57\udbc0\udc48\udbc0\udc47 \u0532\u0561\u0580\u0565\u0582 \u0eaa\u0eb0\u0e9a\u0eb2\u0e8d\u0e94\u0eb5\";\n$foo =~ s/[\\x{100000}-\\x{10ffff}]//g;\nCORE::say $foo;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>asfd \u2603  \u0532\u0561\u0580\u0565\u0582 \u0eaa\u0eb0\u0e9a\u0eb2\u0e8d\u0e94\u0eb5\n</code></pre>\n\n<p>To get all Private Use Areas, you need to include the three ranges which are listed <a href=\"https://en.wikipedia.org/wiki/Private_Use_Areas#Assignment\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>/[\\x{E000}-\\x{F8FF}\\x{F0_000}-\\x{FF_FFD}\\x{100_000}-\\x{10f_fff}]//g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1073, "user_id": 2402558, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xCQRu.jpg?s=128&g=1", "display_name": "Christopher Wirt", "link": "https://stackoverflow.com/users/2402558/christopher-wirt"}, "edited": false, "score": 0, "creation_date": 1486488108, "post_id": 42095352, "comment_id": 71362661, "body": "I&#39;ve done some research on the BMP, and it appears to be exactly what I care about for the data we receive. Any data outside of this, incorrect or otherwise, is data that we don&#39;t want to be storing."}, {"owner": {"reputation": 1073, "user_id": 2402558, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xCQRu.jpg?s=128&g=1", "display_name": "Christopher Wirt", "link": "https://stackoverflow.com/users/2402558/christopher-wirt"}, "edited": false, "score": 0, "creation_date": 1486488259, "post_id": 42095352, "comment_id": 71362752, "body": "To give a bit of context, we&#39;re running into data issues when sending this data from a file to SQL Server, because SQL server does a conversion to UTF-16 for all Unicode data, and our particular driver has some fatal errors when it can&#39;t make the encoding switch properly. This data goes from UTF-16 Windows machines -&gt; UTF-8 files -&gt; UTF-16 SQL Server -&gt; UTf-16 files -&gt; UTF-8 files -&gt; UTF-16 SQL Server. It&#39;s a damn mess. Thanks for correcting my poor understanding of UTF, it&#39;s exactly what I was looking for."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "reply_to_user": {"reputation": 1073, "user_id": 2402558, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xCQRu.jpg?s=128&g=1", "display_name": "Christopher Wirt", "link": "https://stackoverflow.com/users/2402558/christopher-wirt"}, "edited": false, "score": 2, "creation_date": 1486488534, "post_id": 42095352, "comment_id": 71362920, "body": "Sounds like something along the way doesn&#39;t really support UTF-16, but only UCS-2. Anyway, glad I could help."}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 5, "last_activity_date": 1486588323, "last_edit_date": 1486588323, "creation_date": 1486485728, "answer_id": 42095352, "question_id": 42094797, "link": "https://stackoverflow.com/questions/42094797/a-script-to-strip-ranges-of-utf-8-characters-out-of-a-file/42095352#42095352", "title": "A script to strip ranges of UTF-8 Characters out of a file", "body": "<p>Ok, let's not mix up a few things.</p>\n\n<p>UTF-8 characters whose first byte is <code>0xf0</code> are four bytes long, which is the most you ever need to encode a legal Unicode character. Since over 94% of the possible Unicode range requires that fourth byte, <code>0xf0</code> doesn't map to any single code page, and certainly not to the private use areas.</p>\n\n<p>Such characters <em>are</em> outside the <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\">Basic Multilingual Plane</a>. But that's different from being invalid or private use; it just means their code points are greater than U+FFFF (decimal value 65,535).</p>\n\n<p>If you want to exclude all characters outside the BMP, you should be searching for the ones matching this regex:</p>\n\n<pre><code>[\\x{10000}-\\x{10FFFF}]\n</code></pre>\n\n<p>That uses Perl's <code>\\x{</code>...<code>}</code> interpolation syntax to include characters by their hexadecimal code point value. If you're actually using Perl, then for ease of use you might want to put the regex into a variable (using the quote-regex construction <code>qr(</code>...<code>)</code>, since bare slashes will immediately try to match the regex against <code>$_</code> at assignment time):</p>\n\n<pre><code>my $not_bmp = qr([\\x{10000}-\\x{10FFFF}]);\n</code></pre>\n\n<p>But, again, removing characters matching that regex eliminates over 94% of possible Unicode characters, so be sure that's what you want.</p>\n\n<p>If you really only want to eliminate private use characters - some of which are <em>inside</em> the BMP - just exclude those ranges specifically. With Perl or Python or any other UTF-8-aware language, you don't have to worry about bytes; just check the code points. </p>\n\n<p>As <a href=\"https://en.wikipedia.org/wiki/Private_Use_Areas#Unicode_PUA_blocks\" rel=\"nofollow noreferrer\">Wikipedia</a> will tell you, the three Private Use Areas are in these code point ranges:</p>\n\n<ul>\n<li>U+E000..U+F8FF </li>\n<li>U+F0000..U+FFFFF </li>\n<li>U+100000..U+10FFFF</li>\n</ul>\n\n<p>So the corresponding Perl regex looks like this:</p>\n\n<pre><code>my $pua = qr([\\x{e000}-\\x{f8ff}\\x{f0000}-\\x{fffff}\\x{100000}-\\x{10ffff}]);\n</code></pre>\n\n<p>Many other languages have similar Unicode support (matching against UTF-8 characters, including characters in a string by code point, and so on). For example, here's Ruby, which mainly differs in using <code>\\u{...}</code> instead of <code>\\x{...}</code> for the interpolation:</p>\n\n<pre><code>not_bmp = %r([\\u{10000}-\\u{10FFFF}])\npua = %r([\\u{e000}-\\u{f8ff}\\u{f0000}-\\u{fffff}\\u{100000}-\\u{10ffff}])\n</code></pre>\n\n<p>Python <code>\\u</code> escapes only work with exactly four hex digits, but if you have Python3 - or a Python2 compiled in <em>wide</em> mode - you can use capital <code>\\U</code>, which takes exactly eight (there's no variable-length support via <code>{</code>...<code>}</code> as Perl and Ruby have):</p>\n\n<pre><code>not_bmp = re.compile(u'[\\U00010000-\\U0010ffff]')\npua = re.compile(u'[\\ue000-\\uf8ff\\U000f0000-\\U000fffff\\U00100000-\\U0010ffff]')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 428, "user_id": 1626653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36RNP.jpg?s=128&g=1", "display_name": "khw", "link": "https://stackoverflow.com/users/1626653/khw"}, "is_accepted": false, "score": 2, "last_activity_date": 1487015851, "creation_date": 1487015851, "answer_id": 42212470, "question_id": 42094797, "link": "https://stackoverflow.com/questions/42094797/a-script-to-strip-ranges-of-utf-8-characters-out-of-a-file/42212470#42212470", "title": "A script to strip ranges of UTF-8 Characters out of a file", "body": "<p>It's a waste of your time to have to look up the hex ranges of Private Use areas.  Simply say</p>\n\n<p>s/\\p{Private_Use}//g</p>\n\n<p>perluniprops is the pod file that gives all the Unicode properties.  If you want just the above-BMP private use areas, you can consult it (grepping for Private) to find how to match those.</p>\n"}], "owner": {"reputation": 1073, "user_id": 2402558, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xCQRu.jpg?s=128&g=1", "display_name": "Christopher Wirt", "link": "https://stackoverflow.com/users/2402558/christopher-wirt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 1, "accepted_answer_id": 42095352, "answer_count": 3, "score": 3, "last_activity_date": 1487015851, "creation_date": 1486484220, "last_edit_date": 1486484741, "question_id": 42094797, "link": "https://stackoverflow.com/questions/42094797/a-script-to-strip-ranges-of-utf-8-characters-out-of-a-file", "title": "A script to strip ranges of UTF-8 Characters out of a file", "body": "<p>My problem is that I have a data file containing UTF-8, most of which is valid and must be kept, but some of which has random \"garbage\" UTF-8, namely in the range of <code>0xf0 - 0xff</code>. An example of the hex for the bad data can be seen below</p>\n\n<pre><code> f4 80 80  ab f4 80 80 b6 f4 80 80 \n a5 f4 80 80 a6 f4 80 80  83 f4 80 80 b6 f4 80 81  \n 84 f4 80 81 98 f4 80 81  87 f4 80 81 8c f4\n</code></pre>\n\n<p>I'm trying to write a perl script that will search and replace for characters that the first byte is in the range <code>0xf0 - 0xff</code>. On <a href=\"http://utf8-chartable.de/unicode-utf8-table.pl\" rel=\"nofollow noreferrer\">this website</a> the codepage is listed as private use.</p>\n\n<p>My existing attempts either do nothing, or have only been able to remove the first byte of a multi-byte character, such as <code>perl -CSD -pi.orig -e 's/[\\x{f4}-\\x{ff}]/?/g'</code> Running perl v5.12.5</p>\n\n<p>I'm not much of a perl expert, nor a utf-8 expert. I'm also open to doing this in ruby/python/C++(98)/whatever as long as it's relatively portable on a linux box.</p>\n\n<p>Here's a link to a snippet of the garbage data. <a href=\"http://pastebin.com/LR0StPHu\" rel=\"nofollow noreferrer\">http://pastebin.com/LR0StPHu</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1486483744, "post_id": 42094571, "comment_id": 71359529, "body": "<code>$grab_variable($var)</code> is invalid syntax."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1486483753, "post_id": 42094571, "comment_id": 71359535, "body": "<code>&quot;\\$RefVariable&quot; . $i</code> is a <a href=\"http://stackoverflow.com/questions/1549685/how-can-i-use-a-variable-as-a-variable-name-in-perl\">code smell</a>. Isn&#39;t there a way to do this with arrays?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1486483922, "post_id": 42094571, "comment_id": 71359658, "body": "Also, if you&#39;re just trying to do pass-by-reference, the contents of <code>@_</code> are already aliases to the arguments passed to the subroutine. <code>$ref=\\shift; $$ref=&quot;foo&quot;;</code> is equivalent to <code>$_[0]=&quot;foo&quot;</code>"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1486483964, "post_id": 42094571, "comment_id": 71359684, "body": "@mob <code>$$ref=&quot;foo&quot;</code>.  And, no, they aren&#39;t equivalent, one modifies the caller&#39;s variable and one doesn&#39;t."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1486484288, "post_id": 42094571, "comment_id": 71359913, "body": "@ysth - good catch. But <code>$$ref=...</code> does modify the caller&#39;s variable."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486484911, "post_id": 42094571, "comment_id": 71360369, "body": "Can you explain more generally what you&#39;re trying to do? There&#39;s almost certainly a better way to do it."}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486488804, "post_id": 42094571, "comment_id": 71363069, "body": "@simbabque I fixed it. Thanks"}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486488869, "post_id": 42094571, "comment_id": 71363110, "body": "@ThisSuitIsBlackNot I&#39;m trying to make a function that accepts any number of variables and get passed as references (not values) because it should modify them."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1486489005, "post_id": 42094571, "comment_id": 71363188, "body": "@Omar <code>sub modify_args { $_ = &#39;foo&#39; for @_ }</code> is much simpler. To modify subroutine arguments, simply access <code>@_</code> directly, e.g. <code>$_[0] = 42;</code>."}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486491955, "post_id": 42094571, "comment_id": 71364874, "body": "@ThisSuitIsBlackNot Amazing. <code>$_[0]</code> acts as a <b>variable</b> <i>(not reference)</i> interpolating the variable&#39;s value in a <b><i>calling context</i></b> <b>(e.g.</b> <code>print $_[0];</code> prints first argument&#39;s value (<i>not its referencing value somewhat like</i> <code>SCALAR(0x10ef1b0)</code>) without the need to type <code>print ${$_[0]}</code> which doesn&#39;t work <b>)</b>. While it acts as a <b><i>reference</i></b> to the first argument modifying the variable&#39;s value in a modifying context <b>(e.g</b>. <code>$_[0] = 4;</code> <b>)</b>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1486492388, "post_id": 42094571, "comment_id": 71365127, "body": "It&#39;s called aliasing. An alias is just another name for the same thing. <code>$_[0]</code> is an alias for the first subroutine argument. See <a href=\"http://www.perlmonks.org/?node_id=976523\" rel=\"nofollow noreferrer\">Alias vs Reference</a> on PerlMonks."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1486490037, "creation_date": 1486490037, "answer_id": 42096673, "question_id": 42094571, "link": "https://stackoverflow.com/questions/42094571/shift-isnt-working-within-eval-string/42096673#42096673", "title": "\\shift isn&#39;t working within eval string", "body": "<p>Perl already does pass-by-alias to subroutines, which is even simpler than pass-by-reference. The contents of <code>@_</code> are aliases to the inputs to the subroutine; modifying <code>$_[$i]</code> modifies the i-th values passed to the sub.</p>\n\n<pre><code>sub grab_variables {\n    for my $i (0 .. $#_) {\n        $_[$i] = $i+1;\n    }\n}\nmy ($variable1,$variable2,$variable3);\ngrab_variable($variable1,$variable2,$variable3);\nprint $variable1.$variable2.$variable3;           #Prints: 123\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 0, "creation_date": 1486492349, "post_id": 42097215, "comment_id": 71365103, "body": "Yes I&#39;m too close to understanding why <code>shift</code> doesn&#39;t work within <code>eval EXPR</code>. What does <code>shift</code> stands for within <code>eval EXPR</code>? It seems it doesn&#39;t stand for <code>shift(@_)</code> within eval."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 1, "creation_date": 1486492542, "post_id": 42097215, "comment_id": 71365206, "body": "Your code isn&#39;t in a sub, so <code>shift</code> is short for <code>shift(@ARGV)</code>."}, {"owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "edited": false, "score": 0, "creation_date": 1486492589, "post_id": 42097215, "comment_id": 71365225, "body": "Thanks a lot. Totally explained why <code>shift</code> doesn&#39;t work."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1486492597, "last_edit_date": 1486492597, "creation_date": 1486491872, "answer_id": 42097215, "question_id": 42094571, "link": "https://stackoverflow.com/questions/42094571/shift-isnt-working-within-eval-string/42097215#42097215", "title": "\\shift isn&#39;t working within eval string", "body": "<p>In subs, <code>shift</code> is short for <code>shift(@_)</code>.</p>\n\n<p>Outside of subs, <code>shift</code> is short for <code>shift(@ARGV)</code>.</p>\n\n<p>This applies in code passed to <code>eval EXPR</code> too.</p>\n\n<p>Replace</p>\n\n<pre><code>$command1.= \"\\$RefVariable\".$i.\" = \\\\shift;\\n\";\n</code></pre>\n\n<p>with</p>\n\n<pre><code>$command1.= \"\\$RefVariable\".$i.\" = \\\\shift(\\@_);\\n\";\n</code></pre>\n\n<hr>\n\n<p>You should always use <code>use strict; use warnings qw( all );</code>. Your code does everything you shouldn't do, and this would catch that.</p>\n\n<p>I'm not sure what you are trying to achieve, but have you considered</p>\n\n<pre><code>sub set_variables {\n   for my $i (0..$#_) {\n      $_[$i] = $i;        # Changing the elements of @_ changes them in the caller.\n   }\n}\n\nset_variables(my ($var1, $var2, $var3));\n\nsay \"$var1 $var2 $var3\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sub grab_variables { return \\@_; }\n\nmy $ref_variables = grab_variables(my ($var1, $var2, $var3));\n\nfor my $i (0..$#$ref_variables) {\n   $ref_variables-&gt;[$i] = $i;\n}\n\nsay \"$var1 $var2 $var3\";\n</code></pre>\n"}], "owner": {"reputation": 3599, "user_id": 3503851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f4e91b450a25ee2170025f0b56332fa?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3503851/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 42097215, "answer_count": 2, "score": 0, "last_activity_date": 1486492597, "creation_date": 1486483591, "last_edit_date": 1486489107, "question_id": 42094571, "link": "https://stackoverflow.com/questions/42094571/shift-isnt-working-within-eval-string", "title": "\\shift isn&#39;t working within eval string", "body": "<p>Using <code>shift</code> within <code>eval</code> string that's inside a <code>sub</code> isn't working:</p>\n\n<p>Example 1 (using <code>eval</code>):</p>\n\n<pre><code>grab_variable($variable1,$variable2,$variable3);\nprint $variable1.$variable2.$variable3; #should print: 123\n\nsub grab_variable {\n    my $number_of_parameters = @_;\n    my $command1;\n    my $command2;\n    for (my $i = 1; $i &lt;= $number_of_parameters; $i++) {\n        $command1.= \"\\$RefVariable\".$i.\" = \\\\shift;\\n\";\n            #Generates string like:\n                #$RefVariable1 = \\shift;\n                #$RefVariable2 = \\shift;\n                #...\n    }\n    eval $command1;\n    for (my $i = 1; $i &lt;= $number_of_parameters; $i++) {\n        $command2.= \"\\$\\{\\$RefVariable\".$i.\"\\} = \".$i.\";\\n\";\n            #Generates string like:\n                #${$RefVariable1} = 1;\n                #${$RefVariable2} = 2;\n                #...\n    }\n    eval $command2;\n}\n</code></pre>\n\n<p>Example 2 (direct code):</p>\n\n<pre><code>grab_variable($variable1,$variable2,$variable3);\nprint $variable1.$variable2.$variable3; #Prints: 123\n\nsub grab_variable {\n    $RefVariable1 = \\shift;\n    $RefVariable2 = \\shift;\n    $RefVariable3 = \\shift;\n    ${$RefVariable1} = 1;\n    ${$RefVariable2} = 2;\n    ${$RefVariable3} = 3;\n}\n</code></pre>\n\n<p>Example 1 is dynamic and achieves a solution to my real (not simplified) problem. How could I make <code>\\shift</code> work within the <code>eval</code> code string?</p>\n\n<p>Specifically, I'm trying to make a function <em>(subroutine)</em> that accepts any number of variables <em>(as arguments)</em> and get passed as references (not values) because it should modify them.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1486481976, "post_id": 42093760, "comment_id": 71358168, "body": "Is it a typo that your second push (for data/path/) doesn&#39;t have a quote in the first case?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1486483674, "post_id": 42093760, "comment_id": 71359477, "body": "Side note: Instead of all those <code>push</code> statements, you can do <code>my @cmd = qw(find data&#47;path&#47; -name *.xml -exec mv {} junk&#47;path&#47; \\;);</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486484253, "post_id": 42093760, "comment_id": 71359888, "body": "^^ (Assuming none of your paths contain spaces.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486493483, "post_id": 42093760, "comment_id": 71365721, "body": "<code>\\;</code> in the shell is equivalent to <code>&#39;;&#39;</code>. You have to do like you did for <code>&#39;*.xml&#39;</code> and pass what the shell would pass for that argument rather than the shell literal itself."}, {"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1486536485, "post_id": 42093760, "comment_id": 71381988, "body": "Yes that was a typo. I can&#39;t use <code>qw</code> as I get my paths from a config object. I just simplified this here to avoid confusion."}], "answers": [{"comments": [{"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1486538332, "post_id": 42093924, "comment_id": 71382934, "body": "And why can&#39;t <code>exec</code> and <code>mv {}</code> or <code>name</code>and <code>&lt;filename&gt;</code> stay in the same array value? Then it throws similar parser errors. I also have such problems with <code>cat *.xml &gt;&gt; summary.xml</code>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 3, "creation_date": 1486563468, "post_id": 42093924, "comment_id": 71399598, "body": "Because in <code>system(@LIST)</code>, every element of <code>@LIST</code> is treated as a single command-line argument. <code>find</code> supports a switch called <code>-exec</code>, but it doesn&#39;t support a switch called <code>-exec mv {}</code>. Input/output redirection (<code>&lt;file</code>, <code>&gt;file</code>, <code>&gt;&gt;file</code>, <code>2&gt;&amp;1</code>, ...) are implemented in the shell, not the underlying system call. <code>system(@LIST)</code> bypasses the shell, so the I/O redirection operators are interpreted as normal command-line arguments, as if you said <code>cat *.xml &#39;&gt;&gt;&#39; summary.xml</code>."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 11, "last_activity_date": 1486483840, "last_edit_date": 1486483840, "creation_date": 1486481983, "answer_id": 42093924, "question_id": 42093760, "link": "https://stackoverflow.com/questions/42093760/why-doesnt-systemarray-work-when-array-contains-a-find-command/42093924#42093924", "title": "Why doesn&#39;t system(@array) work when @array contains a find command?", "body": "<p>In the second <code>system</code> call, you shouldn't escape the <code>;</code>.</p>\n\n<p>The <code>-exec</code> switch to <code>find</code> slurps arguments until it finds a <code>;</code>. <code>;</code> is interpreted by the shell as a command separator, so when you run <code>find ... -exec</code> from the command-line, you need to escape it, and in shell scripts you'll see the pattern</p>\n\n<pre><code>find ... -exec ... \\;\n</code></pre>\n\n<p>In your second <code>system</code> call, you collect all of the arguments in an array and pass the array directly to <code>system</code>. In this case, Perl is not using the shell to interpret the command, and the <code>find</code> command sees the argument <code>\\;</code> instead of <code>;</code>, and the <code>-exec</code> switch gets confused.</p>\n\n<p>All you need to say to get your <code>system</code> command to work is</p>\n\n<pre><code>...\npush @cmd, ';';\n...\nsystem(@cmd);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1486536628, "post_id": 42094517, "comment_id": 71382066, "body": "Thanks, but we shall avoid modules because it can be tricky to install them on <code>Suse</code>. Not my decision."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1486573295, "post_id": 42094517, "comment_id": 71406800, "body": "@Corni You can also use the core module <a href=\"http://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a>, although the interface isn&#39;t as nice. You really shouldn&#39;t rely on external programs to do things that are easy to do in pure Perl, since it makes your programs less portable and makes debugging and error handling more difficult."}, {"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1486663899, "post_id": 42094517, "comment_id": 71454070, "body": "You are right. Many of my <code>system</code>calls do not work as expected. I&#39;ll talk to our admin if we could use <code>File::Find::Rule.</code>"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 5, "last_activity_date": 1486484081, "last_edit_date": 1495540892, "creation_date": 1486483475, "answer_id": 42094517, "question_id": 42093760, "link": "https://stackoverflow.com/questions/42093760/why-doesnt-systemarray-work-when-array-contains-a-find-command/42094517#42094517", "title": "Why doesn&#39;t system(@array) work when @array contains a find command?", "body": "<p><a href=\"https://stackoverflow.com/a/42093924\">mob pointed out</a> the immediate problem with your <code>system</code> call, but there's a better way to do this. Instead of executing an external command, you can use <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a>, which has an interface that's very similar to the <code>find</code> utility: </p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse File::Copy;\nuse File::Find::Rule;\n\nmy $dest = '/foo/bar';\n\nFile::Find::Rule-&gt;file\n                -&gt;name('*.xml')\n                -&gt;exec( sub { move($_, $dest) or warn \"move($_, $dest) failed: $!\" } )\n                -&gt;in('.');\n</code></pre>\n"}], "owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "accepted_answer_id": 42093924, "answer_count": 2, "score": 2, "last_activity_date": 1486484081, "creation_date": 1486481558, "last_edit_date": 1486484036, "question_id": 42093760, "link": "https://stackoverflow.com/questions/42093760/why-doesnt-systemarray-work-when-array-contains-a-find-command", "title": "Why doesn&#39;t system(@array) work when @array contains a find command?", "body": "<p>I'm beginning to love Perl, but I don't understand whats going on here. </p>\n\n<p>why does this work</p>\n\n<pre><code>my @cmd = ();\npush @cmd, 'find';\npush @cmd, 'data/path/';\npush @cmd, \"-name\";\npush @cmd, '*.xml';\npush @cmd, '-exec';\npush @cmd, 'mv';\npush @cmd, '{}';\npush @cmd, 'junk/path/';\npush @cmd, '\\;';    \nsay join (' ', @cmd);       \nsystem(join(' ', @cmd));\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>find data/path/ -name *.xml -exec mv {} junk/path/ \\;\n</code></pre>\n\n<p>No errors from find! While this does not work</p>\n\n<pre><code>my @cmd = ();       \npush @cmd, 'find';\npush @cmd, 'data/path/';\npush @cmd, \"-name\";\npush @cmd, '*.xml';\npush @cmd, '-exec';\npush @cmd, 'mv';\npush @cmd, '{}';\npush @cmd, 'junk/path/';\npush @cmd, '\\;';    \nsay join (' ', @cmd);       \nsystem(@cmd);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>find data/path/ -name *.xml -exec mv {} junk/path/ \\;\nfind: Missing argument for \u00bb-exec\u00ab.\n</code></pre>\n\n<p><code>system</code> should be able to understand arrays. See <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">here</a>. When I copy the output into shell, there is no missing argument, it just works. But my script can't execute this. </p>\n"}, {"tags": ["perl", "dbix-class"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486480796, "post_id": 42092674, "comment_id": 71357254, "body": "Is it possible to pass a Result object as <code>status</code> with the syntax from the first code block?"}, {"owner": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486483381, "post_id": 42092674, "comment_id": 71359245, "body": "@simbabque I don&#39;t have one, so it&#39;d mean keeping a map like <code>&quot;Active&quot; =&gt; $active_status</code> around, which is basically memoization again."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "edited": false, "score": 0, "creation_date": 1486568300, "post_id": 42096281, "comment_id": 71403131, "body": "So you wouldn&#39;t use a separate <code>status</code> table at all, just constants? I can see the advantages but does that mean there is no FK constraint on your field, so you can put random values in there?"}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "reply_to_user": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "edited": false, "score": 0, "creation_date": 1486657630, "post_id": 42096281, "comment_id": 71449926, "body": "We do have that table to enforce the valid values using a constraint."}], "tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": false, "score": 1, "last_activity_date": 1486488703, "creation_date": 1486488703, "answer_id": 42096281, "question_id": 42092674, "link": "https://stackoverflow.com/questions/42092674/how-do-i-create-rows-without-refetching-related-objects/42096281#42096281", "title": "How do I create rows without refetching related objects?", "body": "<p>We have a ::Constants class (package) in our DBIC schema which containts constants for all those static things.\nAs it usually requires to adapt the schema or even application logic if the contents of such tables change, adding/changing the constants isn't an issue.</p>\n"}], "owner": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1486488703, "creation_date": 1486478555, "last_edit_date": 1495539922, "question_id": 42092674, "link": "https://stackoverflow.com/questions/42092674/how-do-i-create-rows-without-refetching-related-objects", "title": "How do I create rows without refetching related objects?", "body": "<p>I have the opposite problem of <a href=\"https://stackoverflow.com/questions/11659083/dbixclass-resultset-creating-related-data-without-the-select\">this guy</a>.</p>\n\n<p>I have an application that used to use this pattern a lot:</p>\n\n<pre><code>$rs-&gt;create({ foo =&gt; 'bar',\n              status =&gt; { label =&gt; 'Active' } });\n</code></pre>\n\n<p>Behind the scenes DBIC will perform a <code>SELECT</code> to find out if the corresponding status object needs to be created, or if one with the label \"Active\" exists. If it does exist, its ID will be used as the value for the FK in the object I'm creating.</p>\n\n<p>The thing is, the status table is almost never going to change, and there are not very many statuses, so 99.99% of the time it's basically a wasted query to the DB. We thought of using ENUMs instead, but it's very early days for the application so we are bound to have a few new statuses pop up in the first few weeks. INSERT is less of a pain in the *** than <code>ALTER TABLE status CHANGE label label ENUM(...)</code>. Plus having them in a table means we can list the possible values easily for the UI to build dropdowns.</p>\n\n<p>So now we have a bunch of <code>get_THING_id</code> functions, that take a <code>THING</code> label and return an ID. The <code>get_THING_id</code> functions are <a href=\"https://metacpan.org/pod/Memoize\" rel=\"nofollow noreferrer\">memoized</a> and we do this:</p>\n\n<pre><code>$rs-&gt;create({ foo =&gt; 'bar',\n              status_id =&gt; get_status_id('Active') });\n</code></pre>\n\n<p>It doesn't feel very DBIC-y and it's awkward having to import those all over the place.</p>\n\n<p>Should we bite the bullet and just use ENUMs? What do people do for this type of tiny table?</p>\n"}, {"tags": ["perl", "file", "input", "integer", "frequency"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486482180, "post_id": 42092505, "comment_id": 71358317, "body": "Do you really need comments like <code>chomp ($infile); #Chomps the $infile Variable.</code>?"}, {"owner": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "edited": false, "score": 0, "creation_date": 1490109227, "post_id": 42092505, "comment_id": 72959498, "body": "yes our professor prefers us to have those.  Also, I added the wrong code to start with.  This is what I have.  I just need to find how many 0 integers are within the file."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486482367, "post_id": 42092697, "comment_id": 71358438, "body": "Also worth pointing out that the test for existence is superfluous, as the status of <code>open</code> must be checked anyway."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486483504, "post_id": 42092697, "comment_id": 71359332, "body": "Just a note: <i>redundant</i> in American English can mean something more like <i>excessive</i>, <i>lavish</i>, or <i>beyond normal</i>. For instance two-factor authentication is &quot;redundant&quot; security. That&#39;s why I stick to <i>superfluous</i> in these pages."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1486482975, "last_edit_date": 1486482975, "creation_date": 1486478600, "answer_id": 42092697, "question_id": 42092505, "link": "https://stackoverflow.com/questions/42092505/how-do-i-find-the-specific-amount-frequency-of-positive-negative-and-zero-inte/42092697#42092697", "title": "How do I find the specific amount/frequency of positive, negative, and zero integers in a file? (Perl)", "body": "<p>There's couple of problems with your code, but the major one is this:</p>\n\n<pre><code>if ($infile) { \n        $Pos_Int++;\n        $Neg_Int++;\n        $Zer_Int++;\n}\n</code></pre>\n\n<p>That's only evaluating the content of <code>$infile</code> which is the filename. It will always be true, and therefore you'll always increment all your counters by one. </p>\n\n<p>So all you're doing here is basically counting lines.</p>\n\n<p>I would also suggest though, that you don't need to:</p>\n\n<pre><code>open(FHIN, '&lt;', $infile); #Opens the file prompted by user. \nmy @lines = &lt;FHIN&gt;; #Variable storing the number of lines in the file.\nchomp( @lines ); \nclose(FHIN); \n</code></pre>\n\n<p>Open a file, read it into an array, then iterate the array? </p>\n\n<p>Why not instead go line by line with a while loop (it uses less memory, too). </p>\n\n<p>Also - good style is to use lexical file handles rather than an upper case name, which is global scope. </p>\n\n<p>So:</p>\n\n<pre><code>open ( my $input, '&lt;', $infile ) or die $!;  #check return code for errors. \nwhile ( my $line = &lt;$input&gt; ) { #iterate the input line by line, setting $_ for each. \n    $Pos_Int++ if $line &gt; 0;\n    $Neg_Int++ if $line &lt; 0;\n    $Zer_Int++ if $line == 0; \n}\n</code></pre>\n\n<p>Should do the trick - but bear in mind it doesn't do any input validation. Regular expressions could help there, if it was necessary. </p>\n\n<p>Also:</p>\n\n<pre><code>if (-e $infile) { #If the file can't be found, it will exit.\n\n    } else {\n        print (\"No such file exists. Program closing.\\n\");\n            exit;\n}\n</code></pre>\n\n<p>This is redundant, because you can - and should - trap the return code from <code>open</code>. If you do that, then you catch other conditions like the file not being readable, or being a broken symbolic link or a bunch of other problems. </p>\n\n<p>E.g. </p>\n\n<pre><code>open ( my $input, '&lt;', $infile ) or die \"Problem opening file: $!\";\n</code></pre>\n\n<p><code>$!</code> will give you an error code that's a bit more meaningful too - it'll tell you the difference between 'no such file or directory' and 'permission denied' for example. </p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": -1, "last_activity_date": 1486486418, "creation_date": 1486486418, "answer_id": 42095570, "question_id": 42092505, "link": "https://stackoverflow.com/questions/42092505/how-do-i-find-the-specific-amount-frequency-of-positive-negative-and-zero-inte/42095570#42095570", "title": "How do I find the specific amount/frequency of positive, negative, and zero integers in a file? (Perl)", "body": "<p>You can use the <code>&lt;=&gt;</code> operator to get exactly what you want. According to <a href=\"http://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\">perldoc perlop</a>:</p>\n\n<blockquote>\n  <p>Binary \"<code>&lt;=&gt;</code>\" returns -1, 0, or 1 depending on whether the left\n  argument is numerically less than, equal to, or greater than the right\n  argument.</p>\n</blockquote>\n\n<p>So:</p>\n\n<pre><code>$ perl -MData::Dumper -wne '$count{$_ &lt;=&gt; 0}++; END { print Dumper(\\%count); }' numbers.txt\n</code></pre>\n\n<p>Assuming <em>numbers.txt</em> contains the following:</p>\n\n<pre><code>111\n0\n-892\n-664\n21\n0\n63\n868\n-351\n-263\n467\n-58\n625\n724\n0\n0\n990\n107\n-739\n-501\n-386\n909\n-96\n0\n-735\n</code></pre>\n\n<p>Output will be:</p>\n\n<pre><code>$VAR1 = {\n          '0' =&gt; 5,\n          '1' =&gt; 10,\n          '-1' =&gt; 10\n        };\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1490109192, "creation_date": 1486478114, "last_edit_date": 1490109192, "question_id": 42092505, "link": "https://stackoverflow.com/questions/42092505/how-do-i-find-the-specific-amount-frequency-of-positive-negative-and-zero-inte", "title": "How do I find the specific amount/frequency of positive, negative, and zero integers in a file? (Perl)", "body": "<p>I am trying to open a file, scan it, and have the program print out the number of positive, negative, and zeroes.  I have the program successfully opening files, but finding the \"Frequency\" is what is giving me trouble.  I was ill the day of class and can't seem to find help pertaining to my specific prompt.  Here is what I have so far: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy ( $ctrZ ) = ( 0 );\nwhile( my $num = &lt;DATA&gt; ) {\n        chomp($num);\n        ## print \"num=[$num]\\n\";\n        if ( $num =~ /^-\\d+$/ ) {\n                $ctrZ++;\n        }\n\nprintf(\"freq(0):%9s\\n\", $ctrZ );\n\nexit;\n__DATA__\n19\n-22\n498\n512\n15\n-932\n0\n22\n808\n17\n-32\n</code></pre>\n\n<p>Note: Our professor gave us a file to use.  It is a .txt file with a single number on each line.  </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1486477429, "post_id": 42092200, "comment_id": 71354662, "body": "Whilst there usually is, I&#39;d just stick with writing your code in <code>perl</code> and not trying to write it in <code>regex</code>. The latter is quite powerful, but it&#39;s really not all that good for readability."}, {"owner": {"reputation": 6167, "user_id": 244811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVPtR.jpg?s=128&g=1", "display_name": "Scott Weaver", "link": "https://stackoverflow.com/users/244811/scott-weaver"}, "edited": false, "score": 3, "creation_date": 1486477450, "post_id": 42092200, "comment_id": 71354677, "body": "honestly, and i&#39;m a regex guy, I think your last proposed solution is the best way. (2nd check outside regex)"}, {"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "edited": false, "score": 0, "creation_date": 1486477513, "post_id": 42092200, "comment_id": 71354740, "body": "If it&#39;s the most intuitive, I will likely go for that thanks, I just wasn&#39;t sure if there was some &#39;easy&#39; method I wasn&#39;t aware of."}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1486478543, "post_id": 42092290, "comment_id": 71355511, "body": "Note that this solution leaves you with an unnecessary group #2. Also, <code>s</code> modifier is redundant since there is no dot to redefine the behavior of in the pattern."}, {"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "edited": false, "score": 0, "creation_date": 1486478768, "post_id": 42092290, "comment_id": 71355697, "body": "Thanks for the help Wiktor, I think this answer is more intuitive for others reading my code later even if it has that side effect, but I feel like I have learnt more from your answer."}, {"owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1486478775, "post_id": 42092290, "comment_id": 71355702, "body": "@WiktorStribi\u017cew There is only 1 group, not 2. Although the group is unnecessary, I made the minimum change to the original regex to emphasise what needed to be added to make it work."}], "tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": true, "score": 2, "last_activity_date": 1486477476, "creation_date": 1486477476, "answer_id": 42092290, "question_id": 42092200, "link": "https://stackoverflow.com/questions/42092200/match-words-in-regex-but-only-if-first-letter-is-upper-case/42092290#42092290", "title": "Match words in regex, but only if first letter is upper case", "body": "<p>Add a look ahead for the first letter being uppercase:</p>\n\n<pre><code>my $regex = qr/(?=[A-Z])(?i)(daisy|john|fred|june)/s\n</code></pre>\n\n<p>Use the case insensitive flag only after the look ahead.</p>\n"}, {"comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1486477575, "post_id": 42092299, "comment_id": 71354790, "body": "What does \\p{Lu} represent?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1486477603, "post_id": 42092299, "comment_id": 71354810, "body": "See my explanation at the top of the answer."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1486477836, "post_id": 42092299, "comment_id": 71354971, "body": "Sorry for reading too quickly. Could you please tell me where this is documented? I&#39;d like to know if it is UTF-8 friendly and what other options of this type exist."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 2, "creation_date": 1486477899, "post_id": 42092299, "comment_id": 71355023, "body": "You may read more about them at <a href=\"http://perldoc.perl.org/perluniprops.html#Properties-accessible-through-%5cp%7b%7d-and-%5cP%7b%7d\" rel=\"nofollow noreferrer\">Properties accessible through <code>\\p{}</code> and <code>\\P{}</code></a>."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1486477936, "post_id": 42092299, "comment_id": 71355057, "body": "Thanks! Nice resource."}, {"owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "edited": false, "score": 0, "creation_date": 1486478332, "post_id": 42092299, "comment_id": 71355359, "body": "Thanks for this, I will do some reading about \\p from your link."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 3, "last_activity_date": 1486477588, "last_edit_date": 1486477588, "creation_date": 1486477507, "answer_id": 42092299, "question_id": 42092200, "link": "https://stackoverflow.com/questions/42092200/match-words-in-regex-but-only-if-first-letter-is-upper-case/42092299#42092299", "title": "Match words in regex, but only if first letter is upper case", "body": "<p>You may use a case insensitive alternation group (with <code>(?i:...|...)</code>) and require the first letter to be an uppercase one with a <code>(?=\\p{Lu})</code> lookahead where <code>\\p{Lu}</code> matches an uppercase letter (thus, requiring that the character immediately to the right should be an uppercase letter without consuming it):</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $regex = qr/(?=\\p{Lu})(?i:daisy|john|fred|june)/;\n\nmy $test = 'Later John said blah and JOHN said ignore john .....';\n\nwhile( $test =~ /($regex)/g ) {\n    say $1;\n}\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/GER7qX\" rel=\"nofollow noreferrer\">online demo</a></p>\n"}], "owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 42092290, "answer_count": 2, "score": 3, "last_activity_date": 1486478381, "creation_date": 1486477233, "last_edit_date": 1486478381, "question_id": 42092200, "link": "https://stackoverflow.com/questions/42092200/match-words-in-regex-but-only-if-first-letter-is-upper-case", "title": "Match words in regex, but only if first letter is upper case", "body": "<p>I have a dynamically built up largish regex, e.g shortened text example </p>\n\n<pre><code>my $regex = qr/(daisy|john|fred|june)/is;\n\nmy $test = 'Later John said blah and JOHN said ignore john .....';\n\nwhile( $test =~ /($regex)/g ) {\n    warn $1;\n}\n\n# Shows all 3 matches\n</code></pre>\n\n<p>I would like the regex to match every occurance of 'John' OR 'JOHN' etc, but NOT if the first letter is lower case, e.g 'john' should not match.</p>\n\n<p>I could repeat the regex words when building, like</p>\n\n<pre><code> /(Daisy|DAISY|John|JOHN|Fred|FRED....)/\n</code></pre>\n\n<p>But is there some interesting way of not needing to do that, and the regex only matching if the first letter is a capital ? </p>\n\n<p>I could run a 2nd check outside of the regex after a case insensitive match as a possible solution, and just ignore it if match !~ /[A-Z]/ or something, but I'm interested to know if there is a way within the same regex to add an extra condition ?</p>\n"}, {"tags": ["perl", "debian"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1486578995, "post_id": 42089902, "comment_id": 71410207, "body": "You could never rely on <code>.</code> being the script&#39;s directory anyway. Workaround: <code>use FindBin qw( $RealBin ); use lib $RealBin;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1486471076, "post_id": 42089958, "comment_id": 71350116, "body": "So the best future solution for code with new perl is to add &quot;use lib &#39;.&#39;&quot; in my programm??"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 2, "creation_date": 1486471148, "post_id": 42089958, "comment_id": 71350164, "body": "@chris If you need it, yes. A better solution is to put your stuff in a <code>lib</code> dir and use <code>use lib &quot;lib&quot;</code>"}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1486472425, "post_id": 42089958, "comment_id": 71351047, "body": "Is @INC set at compilation of perl itself??"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1486472531, "post_id": 42089958, "comment_id": 71351117, "body": "@chris I don&#39;t know exactly. Some part of it I believe is. But the <code>PERL5LIB</code> env variable is part of it, the <code>-I</code> (captial i) command line arg is part of it, and all your <code>use lib</code> pragmata are also part of it. You should read the p5p posts and the blog posts I linked to learn more about it."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1486476299, "post_id": 42089958, "comment_id": 71353859, "body": "I&#39;d go with <code>FindBin</code> to add local libraries, and that way you don&#39;t have to worry about wrong cwds."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1486579705, "post_id": 42089958, "comment_id": 71410599, "body": "I wonder why they didn&#39;t simply make paths in <code>@INC</code> relative to the script rather than CWD. That would address the problem (and mean we could finally use <code>use lib &#39;.&#39;;</code> instead of <code>use FindBin qw( $RealBin ); use lib $RealBin;</code>), but maybe it would break too much?"}, {"owner": {"reputation": 1613, "user_id": 5766144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZdhAh.jpg?s=128&g=1", "display_name": "Penguin Brian", "link": "https://stackoverflow.com/users/5766144/penguin-brian"}, "edited": false, "score": 0, "creation_date": 1488850738, "post_id": 42089958, "comment_id": 72404916, "body": "Also see the Debian bug report: <a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=588017\" rel=\"nofollow noreferrer\">bugs.debian.org/cgi-bin/bugreport.cgi?bug=588017</a>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 14, "last_activity_date": 1486579389, "last_edit_date": 1486579389, "creation_date": 1486470587, "answer_id": 42089958, "question_id": 42089902, "link": "https://stackoverflow.com/questions/42089902/perl-why-is-not-anymore-part-of-inc-in-debian-9/42089958#42089958", "title": "Perl: Why is . not anymore part of @INC in Debian 9?", "body": "<p>Because <code>.</code> has been removed from <code>@INC</code> for core modules in 5.24.1. That's a security feature to prevent an exploit that <a href=\"http://blogs.perl.org/users/todd_rinaldo/2016/11/what-happened-to-dot-in-inc.html\" rel=\"nofollow noreferrer\">this blog post</a> talks about. </p>\n\n<blockquote>\n  <p>In February, I opened a ticket with Perl 5 Porters to get them to accept a non-default option to remove . from @INC. Unfortunately, I was beaten to the punch and an exploit was disclosed to Perl 5 Security. TL;DR: There are now known insecurities about having . in @INC.</p>\n</blockquote>\n\n<p>The change is documented in <a href=\"https://metacpan.org/pod/distribution/perl/pod/perldelta.pod#Core-modules-and-tools-no-longer-search-%22.%22-for-optional-modules\" rel=\"nofollow noreferrer\">perldelta</a> for 5.24.1.</p>\n\n<blockquote>\n  <p>This prevents an attacker injecting an optional module into a process run by another user where the current directory is writable by the attacker, e.g. the /tmp directory.</p>\n</blockquote>\n\n<p>It will most likely <a href=\"http://blogs.perl.org/users/todd_rinaldo/2016/11/how-removing-from-inc-is-about-to-break-cpan.html\" rel=\"nofollow noreferrer\">be removed completely in 5.26</a>. <a href=\"http://www.nntp.perl.org/group/perl.perl5.porters/2017/01/msg242362.html\" rel=\"nofollow noreferrer\">Here's more discussion</a> on the p5p mailing list, taken from <a href=\"http://blogs.perl.org/users/sawyer_x/2017/01/perl-5-porters-mailing-list-summary-january-16th-22nd.html\" rel=\"nofollow noreferrer\">this blog post</a>.</p>\n\n<p><a href=\"https://github.com/Perl/perl5/search?utf8=%E2%9C%93&amp;q=INC&amp;type=Commits\" rel=\"nofollow noreferrer\">Here are (some of) the commits</a> that make these changes.</p>\n\n<p>The <a href=\"http://perldoc.perl.org/perlhist.html#THE-KEEPERS-OF-THE-PUMPKIN\" rel=\"nofollow noreferrer\">Perl Pumpkin</a> Sawyer X also explains this in <a href=\"https://fosdem.org/2017/schedule/event/perl5_future/\" rel=\"nofollow noreferrer\">the talk <em>Perl 5.24, 5.26, and the Future of Perl 5</em> he gave at FOSDEM 2017</a>. <a href=\"https://fosdem.cu.be/2017/K.4.201/perl5_future.mp4\" rel=\"nofollow noreferrer\">Here is the recording</a> of the talk<sup>1</sup>. </p>\n\n<hr>\n\n<p><sup>1) <a href=\"http://video.fosdem.org/2017/K.4.201/\" rel=\"nofollow noreferrer\">all videos from the Perl room at FOSDEM 2017</a></sup></p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1486579389, "creation_date": 1486470384, "last_edit_date": 1486473594, "question_id": 42089902, "link": "https://stackoverflow.com/questions/42089902/perl-why-is-not-anymore-part-of-inc-in-debian-9", "title": "Perl: Why is . not anymore part of @INC in Debian 9?", "body": "<p>In installing Debian 9 I found out that <code>.</code> is not anymore part of <code>@INC</code>.</p>\n\n<p>Perl (v5.24.1) built for x86_64-linux-gnu-thread-multi</p>\n\n<pre><code>Built under linux\nCompiled at Jan 15 2017 23:35:20\n@INC:\n /etc/perl\n /usr/local/share/perl/5.24.1\n /usr/lib/x86_64-linux-gnu/perl5/5.24\n /usr/share/perl5\n /usr/lib/x86_64-linux-gnu/perl/5.24\n /usr/share/perl/5.24\n /usr/local/lib/site_perl\n /usr/lib/x86_64-linux-gnu/perl-base\n</code></pre>\n\n<p>Does anyone know why?</p>\n"}, {"tags": ["bash", "perl", "shell", "webmin", "bash-completion"], "comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 1, "creation_date": 1486456470, "post_id": 42085071, "comment_id": 71340645, "body": "Split it into multiple questions. In its <i>current form</i> it will not attract proper answers. Cheers!"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1486456788, "post_id": 42085071, "comment_id": 71340798, "body": "@Inian, thank you for your advice but it&#39;s all interconnected. However, my real obstacle is number <b>3</b> and having an answer for <code>how to trigger it programmatically</code>, would be enough for me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486456826, "post_id": 42085071, "comment_id": 71340825, "body": "I don&#39;t quite understand what you actually need to do.  To catch a <code>TAB</code>, if that&#39;s what you mean, you need to handle keyboard events, for example by <a href=\"http://search.cpan.org/~jstowe/TermReadKey-2.37/ReadKey_pm.PL\" rel=\"nofollow noreferrer\">Term::ReadKey</a>. As for handling strings, there are for example  <a href=\"http://search.cpan.org/~rwstauner/String-Substitution-1.002/lib/String/Substitution.pm\" rel=\"nofollow noreferrer\">String::Substitution</a> and  <a href=\"http://search.cpan.org/~neilb/String-Interpolate-0.32/lib/String/Interpolate.pm\" rel=\"nofollow noreferrer\">String::Interpolate</a>, which pays a lot of attention to security"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486456991, "post_id": 42085071, "comment_id": 71340895, "body": "@zdim If you go to ordinary shell and try to use autocomplete feature by using <code>Tab</code> key, you will see how it works. When you type <code>xa</code> and hit tab, you will get <code>xargs</code>. My point is to pass <code>xa</code> to the shell, trigger tab and get output. It&#39;s that fancy because of the currently imposed limitations."}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486457081, "post_id": 42085071, "comment_id": 71340943, "body": "@zdim for example, when using <code>system()</code> how would I do that. How would I pass <code>xa</code> to it, trigger <code>Tab</code> and get <code>xargs</code> as a results?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486457100, "post_id": 42085071, "comment_id": 71340953, "body": "Have a look at <a href=\"https://metacpan.org/pod/Term::ReadLine::Gnu\" rel=\"nofollow noreferrer\">Term::ReadLine::Gnu</a> it provides an interface to the Gnu Readline completion functions."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1486457157, "post_id": 42085071, "comment_id": 71340983, "body": "Ah ... how about printing the ANSI sequence for it?  If that satisfies the &quot;pass to the shell&quot;.  I do know and use and love autocompletion, many many times every day :)  I sometimes even name my own programs so that it can be done early on while typing their names :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486457385, "post_id": 42085071, "comment_id": 71341096, "body": "Hm, I don&#39;t know how to or whether one can  do that.  But @H&#229;konH&#230;gland&#39;s remark is spot on -- why not write your own readline? The module is excellent (it&#39;s a whole suite)"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486457810, "post_id": 42085071, "comment_id": 71341375, "body": "@zdim thanks. @H&#229;konH&#230;gland I have never used/heard about <code>Term::ReadLine::Gnu</code>. You guess or you sure that it&#39;s possible to do using this module? By the way, when type <code>@usern...</code> in this comment box, it also has autocomplete feature. :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486458202, "post_id": 42085071, "comment_id": 71341591, "body": "@IliaRostovtsev <code>Term::ReadLine::Gnu::completion_matches()</code>, or alternatively the Bash command <a href=\"https://www.gnu.org/software/bash/manual/html_node/Programmable-Completion-Builtins.html\" rel=\"nofollow noreferrer\"><code>compgen</code></a> should both be able to give a list of possible completions given the word <code>xa</code> for example"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486458544, "post_id": 42085071, "comment_id": 71341768, "body": "@H&#229;konH&#230;gland, really cool, thanks a lot, <b>H&#229;kon</b>. @zdim - thanks for pointing out <code>Term::ReadKey.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1486459349, "post_id": 42085887, "comment_id": 71342269, "body": "Yes, that what I was doing right now after reading comments to my question. Thanks, Grisha. :) We definitely need to escape input, e.g. <code>xa</code> to prevent injections. The only real problem is that I don&#39;t want to specify any params and would want <code>compgen</code> to guess, if it&#39;s a file or command or anything else (this is what hitting Tab does). Is there a way to do it?"}, {"owner": {"reputation": 6660, "user_id": 1072229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c597f35885e0a988b7227149f81fec0?s=128&d=identicon&r=PG", "display_name": "Grisha Levit", "link": "https://stackoverflow.com/users/1072229/grisha-levit"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 1, "creation_date": 1486461295, "post_id": 42085887, "comment_id": 71343595, "body": "Sadly there&#39;s no way to do that other than literally having bash do it.  I&#39;ve updated the answer with an <code>expect</code> script, which is what the bash-completion uses to trigger real completions for testing."}], "tags": [], "owner": {"reputation": 6660, "user_id": 1072229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c597f35885e0a988b7227149f81fec0?s=128&d=identicon&r=PG", "display_name": "Grisha Levit", "link": "https://stackoverflow.com/users/1072229/grisha-levit"}, "is_accepted": true, "score": 4, "last_activity_date": 1486488510, "last_edit_date": 1486488510, "creation_date": 1486459054, "answer_id": 42085887, "question_id": 42085071, "link": "https://stackoverflow.com/questions/42085071/trigger-programmatically-autocomplete-event-for-shell-in-system-call-and-get-out/42085887#42085887", "title": "Trigger programmatically autocomplete event for shell in system call and get output", "body": "<p>If you know the type of completion you want to generate, you can generate completions using the <code>compgen</code> bash builtin.</p>\n\n<p>Most usefully, the <code>-c</code> option will complete command names and <code>-o default</code> will complete filenames through readline. See the <a href=\"https://www.gnu.org/software/bash/manual/bash.html#index-complete\" rel=\"nofollow noreferrer\">options for <code>complete</code></a>, most of which you can also use with <code>compgen</code>.</p>\n\n<p>Note that <code>system()</code> will pass the command to <code>/bin/sh -c</code>, which may not be the same as <code>bash</code> on your system.  So you can do something like:</p>\n\n<pre><code>system(\"/bin/bash\", \"-c\", \"compgen -c xa\")\n# xargs\n# xattr\n# etc\u2026\n</code></pre>\n\n<p>or</p>\n\n<pre><code>system(\"/bin/bash\", \"-c\", \"compgen -o default file\")\n# file.txt\n# file.pdf\n# etc\u2026\n</code></pre>\n\n<hr>\n\n<p>If you want to literally the same thing that bash would do given a particular string (and not guess the completion type yourself), you will need to actually invoke the tab-press (or equivalent), which you can do with an <code>expect</code> script. This is also the only way to properly invoke any custom completion functions you may have defined. See for example the way that bash-completion handles <a href=\"https://github.com/scop/bash-completion/blob/master/test/lib/library.exp\" rel=\"nofollow noreferrer\">its test suite</a>.</p>\n\n<p>Below is my attempt at an <code>expect</code> script to print out the completions that bash would suggest for arbitrary command input:\n</p>\n\n<pre><code>#!/usr/bin/env expect\n\nlog_user 0\nset prompt {/@}\nset cmd [lindex $argv 0]\n\n# start bash with no startup files for clean env\nspawn env INPUTRC=/dev/null PS1=$prompt bash --norc\nexpect $prompt\n\n# set some readline variables for consistent completion output\nsend \"bind 'set show-all-if-ambiguous on'\\r\"\nexpect $prompt\nsend \"bind 'set bell-style none'\\r\"\nexpect $prompt\nsend \"bind 'set completion-query-items -1'\\r\"\nexpect $prompt\nsend \"bind 'set page-completions off'\\r\"\nexpect $prompt\nsend \"bind 'set completion-display-width 0'\\r\"\nexpect $prompt\n\n# run the completion\nsend \"$cmd\\t $prompt\"\nexpect {\n   # multiple matches, printed on separate lines, followed by prompt\n   -re \"^$cmd\\r\\n(.*)\\r\\n$prompt$cmd\" { puts $expect_out(1,string) }\n   # single match, completed in-place\n   -re \"^($cmd\\[^ \\]*)  $prompt\" { puts $expect_out(1,string) }\n   # single match, completed in-place, nospace\n   -re \"^($cmd\\[^ \\]+) $prompt\"  { puts $expect_out(1,string) }\n   # no match\n   -re \"^$cmd $prompt\" { exit }\n}\n</code></pre>\n\n<p>Calling <code>./script.exp string</code> will print out the actual completions that bash will produce for <code>string</code>, one per line. If there are no completions suggested, nothing is printed.</p>\n"}], "owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1162, "favorite_count": 2, "accepted_answer_id": 42085887, "answer_count": 1, "score": 3, "last_activity_date": 1486496657, "creation_date": 1486456335, "last_edit_date": 1592644375, "question_id": 42085071, "link": "https://stackoverflow.com/questions/42085071/trigger-programmatically-autocomplete-event-for-shell-in-system-call-and-get-out", "title": "Trigger programmatically autocomplete event for shell in system call and get output", "body": "<p>Before actual question few words about what I'm doing to grasp the idea.</p>\n<p>I would want to add another cool feature to my <em><a href=\"https://github.com/qooob/authentic-theme\" rel=\"nofollow noreferrer\">Authentic Theme</a></em> for <em>Webmin</em>.</p>\n<p>I have made <em>Command Shell</em> module look/feel just if it was <a href=\"https://rostovtsev.ru/pub/src/authentic/18.40b/shell_port_demo.webm\" rel=\"nofollow noreferrer\">ordinary shell</a>. However, as it's only a port, it has few limitations. One of them is missing shell <em>autocomplete</em>, when you hit <code>Tab</code> key (or other based on the system: <code>Esc+Esc</code> and/or <code>Ctrl+I</code>).</p>\n<p>My point is to make it work natively. I'm going to use an\n<code>XMLHttpRequest</code>\ncall to the server and pass the part of entered command to the actual shell. The call will be triggered on the event of the <code>Tab</code> key.</p>\n<p>For example, when you're in <em>Authentic Theme</em> dropdown shell (you could see it on the video screencast above), and when you type, let's say, <code>xa</code> and hit <code>Tab</code>, the event will be triggered and make a request. Then the server receives a string <code>xa</code> and we're ready to begin.</p>\n<h3>My question<s>s are</s> is:</h3>\n<p><s>1. What is the best way to execute such command in <em>Perl</em>? </s><br>\n<s>2. How to properly escape such command to make sure that it won't be exploitable;</s><br>\n3. How to <strong>trigger programmatically</strong> <code>Tab</code> key (to run autocomplete) in the <code>system()</code> call;<br>\n<s>4. How to grep output.</s></p>\n<p>On the respond, using <code>xa</code> as an example, I expect to get <code>xargs</code> on the results.</p>\n<hr />\n<p>I'm aware about possibly of ambiguity of the passed command, for example, when using <code>sys</code>, and when autocomplete wouldn't work on the single <code>Tab</code> key. I think it's better to exclude this from the scope of current question.</p>\n"}, {"tags": ["perl", "sybase", "dbi", "resource-cleanup"], "comments": [{"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 3, "creation_date": 1486454885, "post_id": 42083411, "comment_id": 71339784, "body": "The undef in someAnotherPerlFunctionOne is not needed. Variables defined inside of the function are undef once it goes out of scope."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 2, "creation_date": 1486455303, "post_id": 42083411, "comment_id": 71340005, "body": "More important is the handle to the database ($dbh). Eventually commits are required, if AutoCommit is turned off in your code, or if you do not keep a persistent connection you might want to call $dbh-&gt;disconnect."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486460917, "post_id": 42083411, "comment_id": 71343307, "body": "Why are you asking this? Are you having trouble with your program? If so, then please explain the problem, otherwise leave things as they are."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486471389, "post_id": 42083411, "comment_id": 71350329, "body": "@Borodin probably because he&#39;s trying to write quality code without unexpected situations or unhandled scenarios."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 1, "creation_date": 1486473690, "post_id": 42083411, "comment_id": 71351937, "body": "@JohnDoe: We usually do that by <i>testing</i>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 1, "creation_date": 1486473949, "post_id": 42083411, "comment_id": 71352122, "body": "@user3606329: <i>&quot;if AutoCommit is turned off in your code ... you might want to call <code>$dbh-&gt;disconnect</code>&quot;</i> It seems a little strange to disconnect, which will discard all changes that have been made. The way to commit a transaction is to call <code>$dbh-&gt;commit</code>, but <code>AutoCommit</code> is <i>on</i> by default so it&#39;s reasonable to assume that the OP hasn&#39;t changed it."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486524723, "post_id": 42083411, "comment_id": 71378100, "body": "@Borodin: The OP should have simply asked if undef is required to avoid memory leaks. He was assuming $sth is treated as a raw pointer for example <i>void () { Foobar *foobar = new Foobar(); }</i> which would leak memory with each call to someAnotherPerlFunctionOne. BTW: AutoCommit and disconnect was meant to be two different things."}], "answers": [{"comments": [{"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486530134, "post_id": 42096754, "comment_id": 71379615, "body": "Thanks. I am creatign dbhandler in another config file that gets included in this one. Hence I am not creating dbh over and again."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486544454, "post_id": 42096754, "comment_id": 71386196, "body": "@Kraken: It&#39;s a <b><i>handle</i></b>. A <i>handler</i> is something completely different."}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486553017, "post_id": 42096754, "comment_id": 71392269, "body": "@Borodin dbh is handle correct? That is what i am specifying in a separate config."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486555542, "post_id": 42096754, "comment_id": 71393892, "body": "@Kraken: <code>$dbh</code> is a <i>database handle</i>; it&#39;s a data object. A <i>handler</i> is a piece of code that handles events of any sort."}], "tags": [], "owner": {"reputation": 326, "user_id": 4810570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e7lh0mX9YsA/AAAAAAAAAAI/AAAAAAAAApY/EGaDNC0uGEI/photo.jpg?sz=128", "display_name": "Curt Evans", "link": "https://stackoverflow.com/users/4810570/curt-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1486490344, "creation_date": 1486490344, "answer_id": 42096754, "question_id": 42083411, "link": "https://stackoverflow.com/questions/42083411/cleanup-of-statement-handlers-in-dbi-perl/42096754#42096754", "title": "Cleanup of statement handlers in DBI perl", "body": "<p>Perl will clean up for you, but it is a good idea to pass your db handle to the functions instead of recreating it every time and destroying it immediately.</p>\n"}, {"comments": [{"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486557896, "post_id": 42113391, "comment_id": 71395585, "body": "Thanks. I am doing the following, in the start of the perl script I do <code>require &quot;$FindBin::Bin&#47;dbconfig.pl&quot;;</code> and in dbconfig I have dbh=DBI-&gt;connect."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1486558979, "post_id": 42113391, "comment_id": 71396318, "body": "@Kraken: That&#39;s not really a config file, which is all about setting up data <i>constants</i>. You might set up the DSN, username and password from there with <code>use constant</code>, but you need to be able to repeatedly check the database connection and reconnect as necessary throughout the day. You would be better off using a proper Perl module and <a href=\"https://metacpan.org/pod/Exporter\" rel=\"nofollow noreferrer\"><code>Exporter</code></a> to pass the values back into your main program."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1486558746, "last_edit_date": 1486558746, "creation_date": 1486557566, "answer_id": 42113391, "question_id": 42083411, "link": "https://stackoverflow.com/questions/42083411/cleanup-of-statement-handlers-in-dbi-perl/42113391#42113391", "title": "Cleanup of statement handlers in DBI perl", "body": "<p>There are a few things to look out for, but using <code>undef</code> isn't one of them</p>\n\n<ul>\n<li><p>If your process is running all day then you should keep checking that the connection is still live. You can do that using <code>$dbh-&gt;ping</code></p></li>\n<li><p>You should <code>prepare</code> each statement only once. After that you may execute it many times with different bound parameters</p></li>\n<li><p>If you ever leave a <code>SELECT</code> statement handle without fetching all of its data then you should call <code>$sth-&gt;finish</code> to reset it</p></li>\n</ul>\n\n<p>Your pseudo-code is very limited, and doesn't explain much. In particular I don't understand how a config file (a data file) can create a database handle for you. Because you need to check whether a database connection is still active, you also need to be able to reconnect whenever necessary. If that is done in a \"config file\" then I think you need to readdress your design</p>\n\n<p>Here's a rather more Perlish pseudo-code example of how I think it should work. Every time around the <code>until ( $end_of_day )</code> loop the first thing is to check whether the database handle is still valid. If not then <em>there</em> is the point when you should establish a connection and <code>prepare</code> all of your statement handles</p>\n\n<p>After that, it is best to pass both the database handle and the statement handle to any subroutines. You will notice that, once the <code>prepare</code> has been done for each statement handle, the two subroutines collapse to the same code</p>\n\n<p>This needs filling out a lot, but I know almost nothing about your application. I hope it helps</p>\n\n<pre><code>use DBI;\n\nmy $dbh;\n\nuntil ( $end_of_day ) {\n\n    my ($sth, $select, $update);\n\n    until ( $dbh and $dbh-&gt;ping ) {\n\n        $dbh = DBI-&gt;connect(...);\n\n        if ( $dbh ) {\n            $select = $dbh-&gt;prepare('SELECT ...');\n            $update = $dbh-&gt;prepare('UPDATE ...');\n            $sth = $dbh-&gt;prepare('SOME SQL');\n            last;\n        }\n\n        sleep 10; # Wait before retrying\n    }\n\n    $sth-&gt;execute();\n    someAnotherPerlFunction($dbh, $select);\n    someAnotherPerlFunctionOne($dbh, $update);\n}\n\nsomeAnotherPerlFunction {\n    my ($dbh, $sth) = @_;\n    $sth-&gt;execute;\n}\n\nsomeAnotherPerlFunctionOne {\n    my ($dbh, $sth) = @_;\n    $sth-&gt;execute;\n}\n</code></pre>\n"}], "owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 42096754, "answer_count": 2, "score": 0, "last_activity_date": 1486558746, "creation_date": 1486449954, "question_id": 42083411, "link": "https://stackoverflow.com/questions/42083411/cleanup-of-statement-handlers-in-dbi-perl", "title": "Cleanup of statement handlers in DBI perl", "body": "<p>I am using DBI perl to connect with Sybase dataserver. My process does the following in loop that runs throughout the day</p>\n\n<pre><code>Till end of day, do {\n  $sth = $dbh-&gt;prepare\n  execute query\n  someAnotherPerlFunction()\n  someAnotherPerlFunctionOne()\n}\n\nsomeAnotherPerlFunction()\n{\n   $sth = $dbh-&gt;prepare (select)\n   execute query\n}\n\nsomeAnotherPerlFunctionOne()\n{\n   my $sth = undef;\n   $sth = $dbh-&gt;prepare (update)\n   execute query;\n   undef $sth;\n}\n</code></pre>\n\n<p>Now, given that this will run throughout the day, what are some of the things that I need to keep in mind in terms of resource cleanup. </p>\n\n<p>Currently, I am doing <code>undef $sth</code> after each function, as shown in someAnotherPerlFunctionOne. Is that necessary? </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1486450475, "post_id": 42083331, "comment_id": 71337543, "body": "it&#39;s not working.."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 4, "creation_date": 1486450646, "post_id": 42083331, "comment_id": 71337606, "body": "&quot;It&#39;s not working&quot; is not an adequate description of the problem. Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that the rest of us can reproduce the problem."}], "owner": {"reputation": 254, "user_id": 6752390, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6071587a3b51842ff285ac4f5c43c0a7?s=128&d=identicon&r=PG&f=1", "display_name": "questionar", "link": "https://stackoverflow.com/users/6752390/questionar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1486458301, "answer_count": 0, "score": 0, "last_activity_date": 1486449670, "creation_date": 1486449670, "question_id": 42083331, "link": "https://stackoverflow.com/questions/42083331/how-to-use-variable-in-regex-subsitution-with-special-characters", "closed_reason": "Duplicate", "title": "how to use variable in regex subsitution with special characters", "body": "<p>I have a file where it has the some lines as </p>\n\n<pre><code>$a = keys $hash;\n$b = keys $hash-&gt;{TEST}-&gt;{TEST2};\n$c = keys $hash-&gt;{REST}[0] {\n$d = keys $hash-&gt;{TEST} || {})\n</code></pre>\n\n<p>i have to replace them as </p>\n\n<pre><code>$a = keys %{$hash};\n$b = keys %{$hash-&gt;{TEST}-&gt;{TEST2}}\n$c = keys %{$hash-&gt;{REST}[0]} {\n$d = keys %{$hash-&gt;{TEST} || {}})\n</code></pre>\n\n<p>i tried it as </p>\n\n<pre><code>if ( $line =~ /keys\\s(\\$[a-zA-Z0-9-&gt;{}]*)/ ) {\n                    my $pattern = $1;\n                    my $new_pattern = \"%{$1}\u201d;\n                    $line =~ s/$pattern/test/g;\n            }\n</code></pre>\n\n<p>but it\u2019s not working</p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1486420069, "post_id": 42078192, "comment_id": 71328464, "body": "Maybe <code>has &#39;+content&#39; =&gt; (accessor=&gt;&#39;content&#39;);</code>? But rather than changing the behaviour of <code>$o-&gt;content</code>, why not add a <code>writer</code> instead?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486420383, "post_id": 42078192, "comment_id": 71328586, "body": "I tried adding a writer. Maybe I don&#39;t know how it works, though. Because I got the same <code>Cannot assign a value to a read-only accessor</code> error."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1486420432, "post_id": 42078192, "comment_id": 71328605, "body": "If it works, it would be <code>has &#39;+content&#39; =&gt; (writer=&gt;&#39;set_content&#39;);</code> then <code>$o-&gt;set_content($new_value)</code>"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486420666, "post_id": 42078192, "comment_id": 71328697, "body": "Ah, got it now. Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486421538, "post_id": 42078192, "comment_id": 71329037, "body": "Neither are particularly nice solution. The base class you should be updated to support what you need it to support."}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "is_accepted": false, "score": 1, "last_activity_date": 1558352327, "creation_date": 1558352327, "answer_id": 56220255, "question_id": 42078192, "link": "https://stackoverflow.com/questions/42078192/overriding-a-class-is-attribute-moose/56220255#56220255", "title": "Overriding a class&#39; &quot;is&quot; attribute (Moose)", "body": "<p>You should define an object as read-only and then provide a private writer</p>\n\n<pre><code>#!/usr/bin/perl\nuse Modern::Perl;\n\n{\n    package Foo;\n    use Moose;\n\n    has bar =&gt; (\n      is     =&gt; 'ro',\n      writer =&gt; '_set_bar',\n  );\n\n}\n\nmy $foo = Foo-&gt;new;\n</code></pre>\n\n<p>Then if you try to <code>$foo-&gt;bar('something');</code> you will get the error you mentioned in the comment <code>Cannot assign a value to a read-only accessor</code> and here is the magic you need <code>$foo-&gt;_set_bar('something');</code> <br>\nThanks to inheritance it will work thorough Moose framework.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1558352327, "creation_date": 1486419042, "question_id": 42078192, "link": "https://stackoverflow.com/questions/42078192/overriding-a-class-is-attribute-moose", "title": "Overriding a class&#39; &quot;is&quot; attribute (Moose)", "body": "<p>I am trying to subclass an <code>ro</code> attribute to make it <code>rw</code> like so:</p>\n\n<pre><code>has '+content' =&gt; (is =&gt; 'rw');\n</code></pre>\n\n<p>This doesn't seem to work though. Is this not possible?</p>\n"}, {"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1486421639, "post_id": 42077861, "comment_id": 71329080, "body": "Your input only has 18 <code>|</code> characters (so 18-19 data)"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 8, "last_activity_date": 1486418300, "last_edit_date": 1486418300, "creation_date": 1486417888, "answer_id": 42077883, "question_id": 42077861, "link": "https://stackoverflow.com/questions/42077861/work-around-for-split-function-when-last-character-is-a-terminator/42077883#42077883", "title": "Work around for split function when last character is a terminator", "body": "<p>Do</p>\n\n<pre><code>my @data = split /\\|/, $data, -1;\n</code></pre>\n\n<p>The -1 tells <a href=\"http://perldoc.perl.org/functions/split.html\">split</a> to include empty trailing fields.</p>\n\n<p>(Your parentheses around the regex are incorrect, and lead to $data not being considered a parameter of split.  Also, with one exception, the first argument of split is always a regex, so it is better to specify it as a regex not a string that will be interpreted as a regex.)</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 42077883, "answer_count": 1, "score": 4, "last_activity_date": 1486420366, "creation_date": 1486417809, "last_edit_date": 1486420366, "question_id": 42077861, "link": "https://stackoverflow.com/questions/42077861/work-around-for-split-function-when-last-character-is-a-terminator", "title": "Work around for split function when last character is a terminator", "body": "<p>I have this line of data with 20 fields:</p>\n\n<pre><code>my $data = '54243|601|0|||0|N|0|0|0|0|0||||||99582|';\n</code></pre>\n\n<p>I'm using this to split the data:</p>\n\n<pre><code>my @data = split ('\\|'), $data;\n</code></pre>\n\n<p>However, instead of 20 pieces of data, you only get 19:</p>\n\n<pre><code>print scalar @data;\n</code></pre>\n\n<p>I could manually <code>push</code> an empty string onto <code>@data</code> if the last character is a <code>|</code> but I'm wondering if there is a more perlish way. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486410151, "post_id": 42073210, "comment_id": 71323333, "body": "Please show the code that does the create on the resultset. One of your values is coming back from your calculations as undefined. You will need to look at the program that calculated this inchi and probably also the input data used to calculate it."}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1486401313, "creation_date": 1486400267, "question_id": 42073210, "link": "https://stackoverflow.com/questions/42073210/capturing-dbic-exception-to-prevent-script-from-dying", "title": "Capturing DBIC exception to prevent script from dying", "body": "<p>I'm running a perl script to update a currently working database with new datasets. Basically, the script receives molecule information as plain text (MDL if you are interested) and performs several chemical properties calculations through a bunch of third party softwares called via system. </p>\n\n<p>The script have never had any problems processing data but the last dataset seems to have some molecules (or at least one, for what it's worth) for which some of the properties make no sense and I end up having truncated data insertions, which lastly causes a DBIC exception. Namely:</p>\n\n<pre><code>DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception: DBD::mysql::st execute failed: Column 'inchi' cannot be null [for Statement \"INSERT INTO moldata ( formula, hba, hbd, inchi, inchikey, mol_id, pm, psa, ro3pass, ro5vio, rtb, smiles, xlogp3aa) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )\" with ParamValues: 0='I', 1='0', 2='0', 3=undef, 4='XMBWDFGMSWQBCA-YPZZEJLDSA-M', 5=936934, 6='125.00', 7='0', 8=6, 9=0, 10='0', 11='[125I-]', 12='0.86']\n</code></pre>\n\n<p>At this point, the program just dies. I can surely do some workarounds to avoid getting \"undefs\" in the inserts, but I'd like DBIC to be able to handle them and continue with the inserts while ignoring (and maybe warn me about them later) the bad ones. </p>\n\n<p>What would be the right way to implement a try/catch scenario in perl for DBIC transactions?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["linux", "bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 1, "creation_date": 1486400928, "post_id": 42072719, "comment_id": 71318079, "body": "Shouldn&#39;t it be &quot;greater than <i>or equal to</i> two&quot;? Otherwise, <code>m a</code> would have to stay <code>m a</code>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486400043, "post_id": 42072897, "comment_id": 71317568, "body": "There&#39;s also <code>\\pL</code> aka <code>\\p{Letter}</code>, Unlike <code>\\w</code>, this won&#39;t compress <code>1 2 3 4</code>"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 5, "last_activity_date": 1486399479, "last_edit_date": 1486399479, "creation_date": 1486399247, "answer_id": 42072897, "question_id": 42072719, "link": "https://stackoverflow.com/questions/42072719/find-consecutive-space-delimited-single-characters-in-each-line-in-bash/42072897#42072897", "title": "Find consecutive space delimited single characters in each line in bash", "body": "<p>Perl one-liner:</p>\n\n<pre><code>echo 'Y M C A' | perl -ple's/\\b\\w\\K\\s(?=\\w\\b)//g'\n==&gt; YMCA\n\necho 't mobile' | perl -ple's/\\b\\w\\K\\s(?=\\w\\b)//g'\n==&gt; t mobile\n</code></pre>\n\n<p>This replaces a space when surrounded by a single word character. You can replace <code>\\w</code> by <code>[a-zA-Z]</code> if it's more convenient for you.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1486401280, "last_edit_date": 1486401280, "creation_date": 1486400788, "answer_id": 42073371, "question_id": 42072719, "link": "https://stackoverflow.com/questions/42072719/find-consecutive-space-delimited-single-characters-in-each-line-in-bash/42073371#42073371", "title": "Find consecutive space delimited single characters in each line in bash", "body": "<p>With any awk in any shell on any UNIX system:</p>\n\n<pre><code>$ awk '{out=$1; for (i=2;i&lt;=NF;i++) {out = out (length($(i-1)$i)==2 ? \"\" : OFS) $i} print out}' file\nYMCA\ncambridge ma\ndmv office\nt mobile\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1016, "user_id": 1848018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f12a79f402a646702b39f40415e61214?s=128&d=identicon&r=PG", "display_name": "user1848018", "link": "https://stackoverflow.com/users/1848018/user1848018"}, "edited": false, "score": 0, "creation_date": 1486406536, "post_id": 42073543, "comment_id": 71321335, "body": "simple and efficient, nice"}], "tags": [], "owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "is_accepted": false, "score": 2, "last_activity_date": 1486401383, "creation_date": 1486401383, "answer_id": 42073543, "question_id": 42072719, "link": "https://stackoverflow.com/questions/42072719/find-consecutive-space-delimited-single-characters-in-each-line-in-bash/42073543#42073543", "title": "Find consecutive space delimited single characters in each line in bash", "body": "<p>This sed one-liner works for given example:</p>\n\n<pre><code>sed -r 's/ (\\S\\S)/_\\1/g;s/(\\S\\S) /\\1_/g;s/ //g;s/_/ /g' file\n</code></pre>\n\n<p>Test with your data:</p>\n\n<pre><code>kent$  sed -r 's/ (\\S\\S)/_\\1/g;s/(\\S\\S) /\\1_/g;s/ //g;s/_/ /g' f   \nYMCA\ncambridge ma\ndmv office\nt mobile\n</code></pre>\n\n<p>I used a place holder in above line, the <code>_</code>, if your text has already <code>_</code>, you can use <code>\\x99</code>,  in visible char.</p>\n"}], "owner": {"reputation": 1016, "user_id": 1848018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f12a79f402a646702b39f40415e61214?s=128&d=identicon&r=PG", "display_name": "user1848018", "link": "https://stackoverflow.com/users/1848018/user1848018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 42072897, "answer_count": 3, "score": 0, "last_activity_date": 1486401383, "creation_date": 1486398748, "question_id": 42072719, "link": "https://stackoverflow.com/questions/42072719/find-consecutive-space-delimited-single-characters-in-each-line-in-bash", "title": "Find consecutive space delimited single characters in each line in bash", "body": "<p>Let say I have the following file</p>\n\n<pre><code>Y M C A\ncambridge m a\nd m v office\nt mobile\n</code></pre>\n\n<p>and want to convert it to  </p>\n\n<pre><code>YMCA\ncambridge ma\ndmv office\nt mobile\n</code></pre>\n\n<p>that is to detect all consecutive single characters followed by single space of different lengths ( greater than two). For example, the item 'd m v office', we should detect <strong>'d m v'</strong> and convert it to <strong>'dmv'</strong> but would leave 't mobile store' intact (only one single character).<br>\nIs it possible to do this in bash or I have to use a program like python to do this?</p>\n"}, {"tags": ["perl", "testing"], "comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486397808, "post_id": 42072262, "comment_id": 71316112, "body": "OK, I see now that if I am trying to generate 3 databases, I need to have <code>qr{do failed}</code> in an array reference 3 times. I guess I need to anticipate how many databases will be created in my test, unless there is a better way."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486398188, "post_id": 42072432, "comment_id": 71316367, "body": "OK, so I&#39;m trying to generate 18 databases (yeah, I agree, probably not  good idea). So I got this <code>warnings_like {$i-&gt;add_all_databases} [qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},qr{do failed},    qr{do failed}], &#39;throws error if database exists&#39;;</code>  Test passes but this is super ugly. What&#39;s the best way to rewrite this?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 2, "creation_date": 1486398252, "post_id": 42072432, "comment_id": 71316417, "body": "@StevieD use the <code>x</code> operator. <code>warnings_like { ... } [ ( qr{foo} ) x 18 ]</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1486398490, "post_id": 42072432, "comment_id": 71316583, "body": "@StevieD <code>my @warnings; push @warnings, qr&#47;foo&#47; for 1..18; warnings_like { ... } \\@warnings;</code> or <code>my @warnings = map qr&#47;foo&#47;, 1..18;</code>"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1486397885, "creation_date": 1486397885, "answer_id": 42072432, "question_id": 42072262, "link": "https://stackoverflow.com/questions/42072262/testing-errors-with-testwarn-thrown-by-a-loop/42072432#42072432", "title": "Testing errors with Test::Warn thrown by a loop", "body": "<p>The second argument to <code>warnings_like</code> should be a reference to an array containing exactly as many elements as there are warnings:</p>\n\n<pre><code>warnings_like { warn $_ for 1..3 } [qr/1/, qr/\\d/, qr/[345]/];\n</code></pre>\n\n<p>As an aside, creating multiple databases with different numeric suffixes is a major code smell. Generally it would be better to have a single database with a column for the year.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 42072432, "answer_count": 1, "score": 1, "last_activity_date": 1486397885, "creation_date": 1486397370, "question_id": 42072262, "link": "https://stackoverflow.com/questions/42072262/testing-errors-with-testwarn-thrown-by-a-loop", "title": "Testing errors with Test::Warn thrown by a loop", "body": "<p>I have the following subroutine that creates a database:</p>\n\n<pre><code>sub create_db {\n  my $self = shift;\n  my $name = shift;\n  $self-&gt;dbh-&gt;do(\"create database $name\")\n}\n</code></pre>\n\n<p>This subroutine is called by this one which generates several databases in a loop:</p>\n\n<pre><code>sub add_all_databases {\n  my $self = shift;\n\n  foreach my $year (@{$self-&gt;years}) {\n    my $name = DB_NAME_PREFIX . $year;\n    $self-&gt;create_db($name);\n  }\n}\n</code></pre>\n\n<p>Perl generates a warning if a database already exists:</p>\n\n<pre><code>DBD::mysql::db do failed: Can't create database 'db_2014'; database exists\n</code></pre>\n\n<p>I want to create a test to check that that the warning is thrown when a database already exists. I attempted that with this test:</p>\n\n<pre><code> use Test::Warn\n\n warnings_like {$i-&gt;add_all_databases} qr{do failed}, 'throws error if database exists';\n</code></pre>\n\n<p>However, it does not seem to work. I get output like this from my test script:</p>\n\n<pre><code>not ok 17 - throws error if database exists\n#   Failed test 'throws error if database exists'\n#   at ./importer.t line 69.\n# found warning: DBD::mysql::db do failed: Can't create database 'db_2000'; database exists at /home/steve/perl/perl-lib/DB.pm line 46, &lt;DATA&gt; line 1.\n# found warning: DBD::mysql::db do failed: Can't create database 'db_2001'; database exists at /home/steve/perl/perl-lib/DB.pm line 46, &lt;DATA&gt; line 1.\n# found warning: DBD::mysql::db do failed: Can't create database 'db_2002'; database exists at /home/steve/perl/perl-lib/DB.pm line 46, &lt;DATA&gt; line 1.\n# expected to find warning: (?^:do failed)\n</code></pre>\n\n<p>How do I properly write a test that will pass?</p>\n"}, {"tags": ["perl", "loops", "configuration"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486397326, "post_id": 42068355, "comment_id": 71315773, "body": "Please review the new answers. Mine is not wrong, but badly inefficient. I&#39;d appreciate if you unaccept it so I can remove it as it&#39;s misleading."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486386373, "post_id": 42068540, "comment_id": 71308270, "body": "If you have <b>a lot</b> of lines to check, it might be cheaper to compile all of them into a single large pattern."}, {"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "edited": false, "score": 0, "creation_date": 1486386456, "post_id": 42068540, "comment_id": 71308326, "body": "thanks a lot, I didn&#39;t about the fact that I could control the &quot;next&quot; of an outer block, thanks !"}, {"owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "edited": false, "score": 0, "creation_date": 1486386470, "post_id": 42068540, "comment_id": 71308339, "body": "btw I made it work with a grep in a table too, example above"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486397111, "post_id": 42068540, "comment_id": 71315648, "body": "That&#39;s actually pretty awful. it compiles up to three patterns for every lines, instead of compiling one (or even three) patterns."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486397167, "post_id": 42068540, "comment_id": 71315678, "body": "@ikegami I know. I&#39;m not thinking straight today. But it&#39;s accepted, so I can&#39;t remove it any more."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": -1, "last_activity_date": 1486397375, "last_edit_date": 1486397375, "creation_date": 1486386337, "answer_id": 42068540, "question_id": 42068355, "link": "https://stackoverflow.com/questions/42068355/generate-next-ifs-from-config-file-in-perl/42068540#42068540", "title": "generate &#39;next ifs&#39; from config file in Perl", "body": "<h2>This is very inefficient! Don't do this. You should pre-compile the pattern instead.</h2>\n\n<p>You can use a another loop to iterate over all your patterns inside of your <code>while</code>. If you assign a label to your <code>while</code> loop you can <code>next</code> that directly.</p>\n\n<pre><code>my %conf = ( exceptions =&gt; [ 'regex1', 'regex2', 'regexN', ], );\n\nOUTER: while (&lt;DATA&gt;) {\n    foreach my $re (@{ $conf{exceptions} }) {\n        next OUTER if m/$re/;\n    }\n    print;\n}\n\n__DATA__\nregex0\nregex1\nregex2\nregexA\nregexB\nregexN\n</code></pre>\n\n<p>This will output</p>\n\n<pre><code>regex0\nregexA\nregexB\n</code></pre>\n\n<hr>\n\n<p>Note that the <code>do './config_file.conf'</code> is very safe. You should use a module to read a config file format instead. That will make your code more portable and make sure no code you might not control gets executed. For example, you could use <a href=\"http://p3rl.org/JSON\" rel=\"nofollow noreferrer\">JSON</a>, or <a href=\"http://p3rl.org/Config::Simple\" rel=\"nofollow noreferrer\">Config::Simple</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486397197, "post_id": 42068548, "comment_id": 71315695, "body": "@simbabque This is equivalent to <code>next if grep { $_ =~ &#47;$_&#47; } @{$conf{exceptions}};</code>, so it&#39;s just plain wrong. It also checks every single pattern needlessly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486397267, "post_id": 42068548, "comment_id": 71315732, "body": "@ThisSuitIsBlackNot as I just said above, I&#39;m not really thinking straight today. Sorry."}], "tags": [], "owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "is_accepted": false, "score": 0, "last_activity_date": 1486386372, "creation_date": 1486386372, "answer_id": 42068548, "question_id": 42068355, "link": "https://stackoverflow.com/questions/42068355/generate-next-ifs-from-config-file-in-perl/42068548#42068548", "title": "generate &#39;next ifs&#39; from config file in Perl", "body": "<p>mmh it seems working with :</p>\n\n<pre><code>next if grep /$_/, @{$conf{exceptions}};\n</code></pre>\n\n<p>don't know if it's really clean tho</p>\n\n<p>any other idea ?</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1486397377, "last_edit_date": 1486397377, "creation_date": 1486391839, "answer_id": 42070349, "question_id": 42068355, "link": "https://stackoverflow.com/questions/42068355/generate-next-ifs-from-config-file-in-perl/42070349#42070349", "title": "generate &#39;next ifs&#39; from config file in Perl", "body": "<p>In addition to the existing answers - I'd probably expand it to compile up a regex from my input:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy %conf = ( exceptions =&gt; [ 'regex1', 'regex2', 'regexN', ], );\n\nmy $match = join ( \"|\", @{$conf{exceptions}} ); \n   $match = qr/\\b$match\\b/;\n\nprint \"Using regex of: \",$match,\"\\n\";\n\nwhile ( &lt;DATA&gt; ) {\n   next if /$match/;\n   print;\n}\n\n__DATA__\nregex0\nregex1\nregex2\nregexA\nregexB\nregexN\n</code></pre>\n\n<p>This has an advantage over <code>grep</code> in particular, that grep will iterate the whole list of regex, even if it hits a match early on. That won't matter noticeably if you've a small number of patterns though. </p>\n\n<p>For bonus points, you may want to sort by likelihood of 'hit', so a match is located earlier on. By default, sorting by length might do it. </p>\n\n<p>(And note - I use <code>\\b</code> word boundary anchors, which may not be what you want to do, given you are using regex as input)</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1486397178, "creation_date": 1486397178, "answer_id": 42072189, "question_id": 42068355, "link": "https://stackoverflow.com/questions/42068355/generate-next-ifs-from-config-file-in-perl/42072189#42072189", "title": "generate &#39;next ifs&#39; from config file in Perl", "body": "<p>Don't compile the patterns over and over again as simbabque and olivierg have recommended!</p>\n\n<pre><code>my %conf = ( exceptions =&gt; [ 'regex1', 'regex2', 'regexN', ], );\n\nmy $exceptions_re = join '|', @{ $conf{exceptions} };\n$exceptions_re = qr/$exceptions_re/;\n\nwhile (&lt;DATA&gt;) {\n   next if /$re/;\n   print;\n}\n</code></pre>\n\n<hr>\n\n<p>If what you claim are regex patterns are actually strings to match literally, change</p>\n\n<pre><code>my $exceptions_re = join '|', @{ $conf{exceptions} };\n</code></pre>\n\n<p>to</p>\n\n<pre><code>my $exceptions_re = join '|', map quotemeta, @{ $conf{exceptions} };\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 42068540, "answer_count": 4, "score": 1, "last_activity_date": 1486397377, "creation_date": 1486385730, "question_id": 42068355, "link": "https://stackoverflow.com/questions/42068355/generate-next-ifs-from-config-file-in-perl", "title": "generate &#39;next ifs&#39; from config file in Perl", "body": "<p>there is something in Perl I don't know how to code, can I request your help please.</p>\n\n<p>basically, I'm trying to use a configuration file with an array (or a hash or anything of that sort) containing \"exceptions\" that I want to use in a \"next if\" of a loop of the main program.</p>\n\n<p>exemple :</p>\n\n<p>my program looks like that :</p>\n\n<pre><code>while(&lt;&gt;) {\n    next if /regex1/;\n    next if /regex2/;\n    next if /regexN/;\n}\n</code></pre>\n\n<p>and I want to be able to put these \"next if\" from a config file, like :</p>\n\n<pre><code>my %conf = do './config_file.conf';\nwhile(&lt;&gt;) {\n    # put code here to add all 'next ifs';\n}\n</code></pre>\n\n<p>config file example :</p>\n\n<pre><code>exceptions   =&gt;   [\n                    'regex1',\n                    'regex2',\n                    'regexN',\n                  ],\n</code></pre>\n\n<p>how can I do this easily in my code ? (where the comment is, that is, adding all \"next if\" from an array</p>\n\n<p>thanks !\nregards,</p>\n"}, {"tags": ["perl", "constants"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1486373320, "post_id": 42064307, "comment_id": 71300079, "body": "<code>use constants</code> is a pragma that gets called at compile time. Your variables are only there at run time. You cannot do that outside of a <code>BEGIN</code> block or in an eval. I&#39;ll write an answer in a bit with alternatives and explanation."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1486374157, "post_id": 42064307, "comment_id": 71300664, "body": "I have to say, I&#39;ve never really seen much value in &#39;use constant&#39; in perl. It seems to be a bit more brittle than ... well, just &#39;not&#39;."}, {"owner": {"reputation": 1469, "user_id": 2247747, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e119c313d3c53c7d738fa33a373971?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2247747/vince"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1486374239, "post_id": 42064307, "comment_id": 71300729, "body": "@Sobrique: In my case it&#39;s used to store login credentials for external APIs. It&#39;s the easiest way to make them accessible to the scripts that need them. What&#39;s the alternative you would use?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1486374290, "post_id": 42064307, "comment_id": 71300756, "body": "I&#39;d just use a hash, and not constantify them."}, {"owner": {"reputation": 1469, "user_id": 2247747, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e119c313d3c53c7d738fa33a373971?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2247747/vince"}, "edited": false, "score": 0, "creation_date": 1486375200, "post_id": 42064307, "comment_id": 71301341, "body": "I&#39;m not sure how true this is, but I think, that using constants is way faster than accessing a hash every time I need to use a credential. I could be wrong, though."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1486375606, "post_id": 42064307, "comment_id": 71301572, "body": "I echo @Sobrique&#39;s suggestion of using a hash. Using constants over a hash sounds like a micro-optimization"}, {"owner": {"reputation": 1469, "user_id": 2247747, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e119c313d3c53c7d738fa33a373971?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2247747/vince"}, "edited": false, "score": 0, "creation_date": 1486375822, "post_id": 42064307, "comment_id": 71301702, "body": "That&#39;s a whole other debate, but I think if there&#39;s an easy way to use constants over a hash, it&#39;s worth it, if it can shave off a couple of milliseconds, considering the application I&#39;m working on is pretty huge and used by a lot of people."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1486376091, "post_id": 42064307, "comment_id": 71301860, "body": "If performance is a concern, then ... I still wouldn&#39;t do this. But write your code the &#39;easy/obvious&#39; way, then profile it to see where the hotspots are. I&#39;d be pretty confident that that amount of time you save isn&#39;t particularly significant."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486394546, "post_id": 42064307, "comment_id": 71313814, "body": "The amount of time to fetch a hash key is <i>minuscule</i> compared to the time it takes to read your config file from disk. If you want to speed up your program, optimize something that&#39;s actually a bottleneck."}], "answers": [{"comments": [{"owner": {"reputation": 1469, "user_id": 2247747, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e119c313d3c53c7d738fa33a373971?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2247747/vince"}, "edited": false, "score": 0, "creation_date": 1486379261, "post_id": 42065946, "comment_id": 71303874, "body": "Using the configuration file as code and embedding it into the configuration module would work, but that&#39;s not a good way to do that, since inducing code from an external source is not a good practice. Thanks for the answer, though, I&#39;ll have to look at other ways to implement what I need!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1469, "user_id": 2247747, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e119c313d3c53c7d738fa33a373971?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2247747/vince"}, "edited": false, "score": 1, "creation_date": 1486379505, "post_id": 42065946, "comment_id": 71304031, "body": "... yes, but introducing code from another source is what you&#39;re trying to do, by &#39;compiling&#39; constants off a dynamic input."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1469, "user_id": 2247747, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e119c313d3c53c7d738fa33a373971?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2247747/vince"}, "edited": false, "score": 1, "creation_date": 1486379607, "post_id": 42065946, "comment_id": 71304102, "body": "Anyway, you may find <a href=\"http://neilb.org/reviews/constants.html\" rel=\"nofollow noreferrer\">Review of &#39;constant&#39; options&#39;</a> to be useful."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 5, "last_activity_date": 1486379524, "last_edit_date": 1486379524, "creation_date": 1486378173, "answer_id": 42065946, "question_id": 42064307, "link": "https://stackoverflow.com/questions/42064307/define-constants-in-perl-with-variable-name/42065946#42065946", "title": "Define constants in Perl with variable name", "body": "<p>I'm posting this as an answer, to pick up from the comments - hashes vs. constants:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse Benchmark qw(:all);\n\nuse constant ABC =&gt; 'DEF';\nuse constant GHI =&gt; 'JKL';\n\nmy $ABC = 'DEF';\nmy $GHI = 'JKL';\n\nmy %test_hash = (\n   ABC =&gt; 'DEF',\n   GHI =&gt; 'JKL'\n);\n\nsub access_hash {\n   my $value  = $test_hash{ABC};\n   my $value2 = $test_hash{DEF};\n}\n\nsub access_constant {\n   my $value  = ABC;\n   my $value2 = GHI;\n}\n\nsub access_scalar { \n    my $value = $ABC;\n    my $value2 = $GHI;\n} \n\nmy $count = 100_000_000;\n\ncmpthese(\n   $count,\n   {  'hash'     =&gt; \\&amp;access_hash,\n      'constant' =&gt; \\&amp;access_constant,\n      'scalar'   =&gt; \\&amp;access_scalar\n   }\n);\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>               Rate     hash   scalar constant\nhash      9427736/s       --      -7%     -10%\nscalar   10143017/s       8%       --      -3%\nconstant 10492078/s      11%       3%       --\n</code></pre>\n\n<p>So you're right - it's faster to use a constant. However, I'd suggest for an operation that runs at a rate of 10M/sec, 'saving' 5% (or even 10%) is simply not worth the hackery you'll need to do it. </p>\n\n<p>But in the interests of actually answering the question - the root of this problem is that <code>constant</code> is defined at compile time, where variables ... aren't.</p>\n\n<p>There's simply no hash existing when the <code>constant</code> is defined, so that isn't going to work. You're also quite limited in what you can actually do in a <code>BEGIN</code> block. My thought would be that you could <em>probably</em> run a 'compile' process to turn your config file into a <code>.pm</code> that you could then <code>use</code>. </p>\n\n<pre><code>package import_const;\n\nuse constant ABC =&gt; 'DEF';\nuse constant GHI =&gt; 'JKL';\n</code></pre>\n\n<p>Then <code>use import_const;</code> and access your constants as <code>import_const::ABC</code>. (Or use <code>Exporter</code> to bring them into the local namespace). </p>\n\n<pre><code>sub from_pkg { \n    my $value  = import_const::ABC;\n    my $value2 = import_const::GHI;\n}\n</code></pre>\n\n<p>Add that into the timing test:</p>\n\n<pre><code>                        Rate        hash     scalar imported constant   constant\nhash               9497578/s          --        -6%               -9%        -9%\nscalar            10063399/s          6%         --               -4%        -4%\nimported constant 10473398/s         10%         4%                --        -0%\nconstant          10492078/s         10%         4%                0%         --\n</code></pre>\n\n<p>I think I'd still argue that the gains are marginal for the effort. Especially given <a href=\"https://earino.wordpress.com/2013/02/27/use-constant-will-surprise-you-with-its-evil/\" rel=\"nofollow noreferrer\">use constant will surprise you with it's evil</a></p>\n\n<p>There may be a module that can do what you need though:</p>\n\n<p><a href=\"http://neilb.org/reviews/constants.html\" rel=\"nofollow noreferrer\">CPAN modules for defining constants</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1486395455, "last_edit_date": 1486395455, "creation_date": 1486394656, "answer_id": 42071330, "question_id": 42064307, "link": "https://stackoverflow.com/questions/42064307/define-constants-in-perl-with-variable-name/42071330#42071330", "title": "Define constants in Perl with variable name", "body": "<p>First of all, you can do </p>\n\n<pre><code>use constant {\n   CONST1 =&gt; VAL1,\n   CONST2 =&gt; VAL2,\n   ...\n};\n</code></pre>\n\n<hr>\n\n<pre><code>use constant LIST\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>BEGIN {\n   require constant;\n   constant-&gt;import(LIST);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use constant qw( );\nBEGIN {\n   constant-&gt;import(LIST);\n}\n</code></pre>\n\n<p>so you can do</p>\n\n<pre><code>use constant qw( );\nuse FindBin  qw( $RealBin );\nuse JSON::XS qw( decode_json );\n\nBEGIN {\n   my $qfn = \"$RealBin/constants.json\";\n   open(my $fh, '&lt;:raw', $qfn) or die $!;\n   my $file; { local $/; $file = &lt;$fh&gt;; }\n   my $constants = decode_json($file);  # { 'ABC' =&gt; 'DEF', 'GHI' =&gt; 'JKL' };\n   constant-&gt;import($constants);\n}\n</code></pre>\n\n<hr>\n\n<p>A cleaner solution might be to use a mini module.</p>\n\n<pre><code>package MyConstantsFromFile;\n\nuse strict;\nuse warnings;\n\nuse constant qw( );\nuse JSON::XS qw( decode_json );\n\nsub import {\n   my $class = shift;\n   my $qfn = shift;\n   open(my $fh, '&lt;:raw', $qfn) or die $!;\n   my $file; { local $/; $file = &lt;$fh&gt;; }\n   my $constants = decode_json($file);  # { 'ABC' =&gt; 'DEF', 'GHI' =&gt; 'JKL' };\n   my $import = constant-&gt;can('import');\n   @_ = ('constant', $constants);\n   goto &amp;$import;\n}\n\n1;\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use FindBin qw( $RealBin );\nuse MyConstantsFromFile \"$RealBin/constants.json\";\n</code></pre>\n"}], "owner": {"reputation": 1469, "user_id": 2247747, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e119c313d3c53c7d738fa33a373971?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2247747/vince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 1, "accepted_answer_id": 42065946, "answer_count": 2, "score": 1, "last_activity_date": 1486395455, "creation_date": 1486373282, "question_id": 42064307, "link": "https://stackoverflow.com/questions/42064307/define-constants-in-perl-with-variable-name", "title": "Define constants in Perl with variable name", "body": "<p>I would like to create perl-constants from a configuration file. I'm using Config::File to read a config file that looks like this: </p>\n\n<pre><code>ABC = DEF\nGHI = JKL\n</code></pre>\n\n<p>With Config::File that creates a hashref which looks like this:</p>\n\n<pre><code>$VAR1 = {\n    'ABC' =&gt; 'DEF',\n    'GHI' =&gt; 'JKL'\n};\n</code></pre>\n\n<p>I would like to use that hashref to create constants where the name of the constant should be the key and the value should be the corresponding value from the hashref. Manually I would do something like</p>\n\n<pre><code>use constant ABC =&gt; 'DEF';\nuse constant GHI =&gt; 'JKL';\n</code></pre>\n\n<p>I tried doing something this:</p>\n\n<pre><code>foreach my $const (keys %$hashref) {\n    use constant $const =&gt; $keys-&gt;{$const};\n}\n</code></pre>\n\n<p>but as expected that doesn't work. Is there a way to achieve what I'm trying to do?</p>\n"}, {"tags": ["perl", "perl-module", "cpan"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486361343, "post_id": 42061269, "comment_id": 71294729, "body": "DateTime.pm isn&#39;t inside the DateTime directory; they&#39;re both at the same level."}, {"owner": {"reputation": 307, "user_id": 2072028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a77860f036698159f127c0a817fa541f?s=128&d=identicon&r=PG&f=1", "display_name": "srand9", "link": "https://stackoverflow.com/users/2072028/srand9"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486361513, "post_id": 42061269, "comment_id": 71294789, "body": "I don&#39;t find it at same level either."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486361620, "post_id": 42061269, "comment_id": 71294821, "body": "Please show the output of <code>ls -l</code> for the directory above the DateTime directory."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1486362183, "post_id": 42061269, "comment_id": 71294983, "body": "Nevermind, it&#39;s probably because some modules in the DateTime family are pure Perl, and some are XS, so they get installed in different locations. On my system, DateTime.pm is installed in <code>$PREFIX&#47;lib&#47;site_perl&#47;5.20.2&#47;x86_64-linux&#47;DateTime.pm</code> (notice the architecture-specific <code>x86_64-linux</code> bit), while DateTime::TimeZone is installed in <code>$PREFIX&#47;lib&#47;site_perl&#47;5.20.2&#47;DateTime&#47;TimeZone.pm</code>. Use one of the commands ikegami gave in his answer to find it."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 2072028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a77860f036698159f127c0a817fa541f?s=128&d=identicon&r=PG&f=1", "display_name": "srand9", "link": "https://stackoverflow.com/users/2072028/srand9"}, "edited": false, "score": 0, "creation_date": 1486362018, "post_id": 42061344, "comment_id": 71294934, "body": "Didn&#39;t find it under @INC dirs. There&#39;s a directory named &#39;x86_64-linux-thread-multi&#39; at same level of &#39;DateTime&#39; directory. I found DateTime.pm there. But, when I checked file&#39;s time stamp, it was installed a month back. Not sure if that was created because of my cpan installation."}, {"owner": {"reputation": 307, "user_id": 2072028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a77860f036698159f127c0a817fa541f?s=128&d=identicon&r=PG&f=1", "display_name": "srand9", "link": "https://stackoverflow.com/users/2072028/srand9"}, "edited": false, "score": 0, "creation_date": 1486362267, "post_id": 42061344, "comment_id": 71295016, "body": "I&#39;ve just removed DateTime.pm under &#39;x86_64-linux-thread-multi&#39; directory and installed DateTime again. It is created again under that directory. So, it got installed there. Thanks for the quick answer"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 307, "user_id": 2072028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a77860f036698159f127c0a817fa541f?s=128&d=identicon&r=PG&f=1", "display_name": "srand9", "link": "https://stackoverflow.com/users/2072028/srand9"}, "edited": false, "score": 2, "creation_date": 1486489749, "post_id": 42061344, "comment_id": 71363645, "body": "@Kjetil S., <code>-m</code> makes <code>perldoc -l</code> work for modules without POD. Admittedly, it&#39;s not needed here, but I don&#39;t see any reason to use <code>-l</code> instead of <code>-ml</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1486361554, "creation_date": 1486361554, "answer_id": 42061344, "question_id": 42061269, "link": "https://stackoverflow.com/questions/42061269/installing-datetime-pm-using-cpan/42061344#42061344", "title": "Installing DateTime.pm using CPAN", "body": "<p>It should be installed in a path of the form</p>\n\n<pre><code>$dir_in_INC/DateTime.pm\n</code></pre>\n\n<p>You seem to be looking for a path of the form</p>\n\n<pre><code>$dir_in_INC/DateTime/DateTime.pm\n</code></pre>\n\n<p>but that would be for a module named DateTime::DateTime.</p>\n\n<hr>\n\n<p>You can find out where DateTime was installed (assuming it was installed in a location in which Perl searches) using</p>\n\n<pre><code>perl -MDateTime -le'print $INC{\"DateTime.pm\"};'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>perldoc -ml DateTime\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 2072028, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a77860f036698159f127c0a817fa541f?s=128&d=identicon&r=PG&f=1", "display_name": "srand9", "link": "https://stackoverflow.com/users/2072028/srand9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14739, "favorite_count": 2, "accepted_answer_id": 42061344, "answer_count": 1, "score": 2, "last_activity_date": 1486361554, "creation_date": 1486361133, "last_edit_date": 1486361384, "question_id": 42061269, "link": "https://stackoverflow.com/questions/42061269/installing-datetime-pm-using-cpan", "title": "Installing DateTime.pm using CPAN", "body": "<p>I'm installing Perl module DateTime using CPAN.</p>\n\n<pre><code>perl -MCPAN -e shell\n\ncpan&gt; install DateTime\n</code></pre>\n\n<p>Following is the directory structure created under DateTime at modules directory</p>\n\n<pre><code>total 112\ndrwxr-xr-x  2 user group 57344 2017-02-02 15:07 Locale\n-r--r--r--  1 user group 14449 2017-01-29 13:02 Locale.pm\ndrwxr-xr-x 13 user group  4096 2017-02-02 15:08 TimeZone\n-r--r--r--  1 user group 28040 2016-11-23 23:01 TimeZone.pm\n</code></pre>\n\n<p>I don't find DateTime.pm any where within this directory structure. </p>\n\n<p>Does DateTime.pm comes with any other bundle?</p>\n\n<p>I couldn't find similar question in stackoverflow. Please feel free to point, if the question already exists.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486360100, "post_id": 42061046, "comment_id": 71294319, "body": "What have you tried to do yourself, and what problem did you encounter? We can&#39;t help you very easily if you don&#39;t describe what went wrong."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486364076, "post_id": 42061046, "comment_id": 71295722, "body": "<code>print $fh ...</code> and <code>printf $fh ...</code>, but it&#39;s more flexible to just lest the caller redirect the output (<code>script.pl &gt;output.txt</code>)"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486364302, "post_id": 42061046, "comment_id": 71295802, "body": "when I use the command perl Test.pl &gt; my_output.txt I can get the output Into my file outout.txt but i want to Incorporate It within the script . something like using the system command."}, {"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1486382507, "post_id": 42061046, "comment_id": 71305818, "body": "<a href=\"http://stackoverflow.com/questions/2907593/how-can-i-redirect-standard-output-to-a-file-in-perl\" title=\"how can i redirect standard output to a file in perl\">stackoverflow.com/questions/2907593/&hellip;</a> check the second answer of this question"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1486392118, "post_id": 42061046, "comment_id": 71312048, "body": "That&#39;s quite complicated code, given that this question is about writing to a file. Did you write it and are you having problems modifying it, or ... is it someone else&#39;s code that you&#39;re asking the internet to fix?"}, {"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 0, "creation_date": 1487338656, "post_id": 42061046, "comment_id": 71753101, "body": "@John Doe .. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "edited": false, "score": 0, "creation_date": 1486364416, "post_id": 42061929, "comment_id": 71295853, "body": "I can use from the command prompt but I want to Incorporate It Within the Script Itself. e.g. using some system() commands etc."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1486364112, "creation_date": 1486364112, "answer_id": 42061929, "question_id": 42061046, "link": "https://stackoverflow.com/questions/42061046/how-to-print-the-output-of-seaching-a-string-from-a-no-of-files-to-a-output-file/42061929#42061929", "title": "How to print the output of seaching a string from a no of files to a output File In Perl", "body": "<pre><code>script.pl &gt;output.txt\n</code></pre>\n\n<p>&#x20;&#x20;&#x20;&#x20;</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1486367174, "creation_date": 1486367174, "answer_id": 42062672, "question_id": 42061046, "link": "https://stackoverflow.com/questions/42061046/how-to-print-the-output-of-seaching-a-string-from-a-no-of-files-to-a-output-file/42062672#42062672", "title": "How to print the output of seaching a string from a no of files to a output File In Perl", "body": "<p>I can get the output Into a file using below code:      </p>\n\n<p>print $out_file $kwhashref->{$kw}.\"\\n\" if defined($kwhashref->{$kw}) ;\nprintf $out_file 'Found keyword %s in file %s, line %d:%s'.$/, $kw, $file, $l, $_;</p>\n"}], "owner": {"reputation": 23, "user_id": 7489409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3e2cca9d0b23003b6b88e75700a0183c?s=128&d=identicon&r=PG&f=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/7489409/rocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 42061929, "answer_count": 2, "score": -2, "last_activity_date": 1487754253, "creation_date": 1486359884, "last_edit_date": 1487754253, "question_id": 42061046, "link": "https://stackoverflow.com/questions/42061046/how-to-print-the-output-of-seaching-a-string-from-a-no-of-files-to-a-output-file", "title": "How to print the output of seaching a string from a no of files to a output File In Perl", "body": "<p>I have the following code and I want the output to .txt file so can someone pls help to print the output Into some file ?\nRather It should have an option for a user to push to file or print to the command prompt Itself.</p>\n\n<pre><code># Opening Keyword File here\nopen( my $kw, '&lt;', 'IMSRegistration_Success_MessageFlow.txt') or die $!;\nmy @keywords = &lt;$kw&gt;;\nchomp(@keywords); # remove newlines at the end of keywords\n\n# post-processing your keywords file for adding comments\nmy $kwhashref = {\n  map {\n    /^(.*?)(#.*?#)*$/;\n    defined($2) ? ($1 =&gt; $2) : ( $1 =&gt; undef )\n  } @keywords\n}; \n\n# get list of files in current directory\nmy @files = grep { -f } (&lt;*main_log&gt;,&lt;*Project&gt;,&lt;*properties&gt;);\n# loop over each file to search keywords in\nforeach my $file (@files) \n{\n    open(my $fh, '&lt;', $file) or die $!;\n    my @content = &lt;$fh&gt;;\n    close($fh);\n    my $l = 0;\n\n    foreach my $kw (keys %$kwhashref) \n    {\n        my $search = quotemeta($kw); # otherwise keyword is used as regex, not literally\n        foreach (@content) \n            { # go through every line for this keyword\n                $l++;\n                if (/$search/)\n                    {\n                        print $kwhashref-&gt;{$kw}.\"\\n\" if defined($kwhashref-&gt;{$kw}) ;\n                        printf 'Found keyword %s in file %s, line %d:%s'.$/, $kw, $file, $l, $_\n                    }\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1486360600, "post_id": 42060343, "comment_id": 71294469, "body": "It would help us to provide a useful answer if you were to describe why you are asking the question. What will you do with the information?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1486357263, "last_edit_date": 1486357263, "creation_date": 1486356960, "answer_id": 42060547, "question_id": 42060343, "link": "https://stackoverflow.com/questions/42060343/internal-working-of-importing-a-module-in-perl/42060547#42060547", "title": "Internal working of importing a module in perl?", "body": "<p>It's up to each module to provide an <code>import</code> method if they want to provide one. Most that do delegate the task to the Exporter module using code like</p>\n\n<pre><code>use Exporter qw( import );\n</code></pre>\n\n<p>or the older</p>\n\n<pre><code>use Exporter qw( );\nour @ISA = 'Exporter';\n</code></pre>\n\n<p>If this is the <code>import</code> method about which you are asking, please refer to <a href=\"http://search.cpan.org/perldoc?Exporter\" rel=\"nofollow noreferrer\">the module's documentation</a> for more information.</p>\n\n<hr>\n\n<p>If, on the other hand, you are asking how to dynamically add a subroutine in a namespace, then it's just a question of assigning the sub ref to the glob. This means that</p>\n\n<pre><code>sub foo { ... }\n</code></pre>\n\n<p>is roughly equivalent to </p>\n\n<pre><code>BEGIN { *foo = sub { ... }; }\n</code></pre>\n\n<p>so you want</p>\n\n<pre><code>no strict qw( refs );\n\n*{ $dst_pkg . '::' . $sub_name } = \\&amp;{ $src_pkg . '::' . $sub_name };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1486367399, "creation_date": 1486367399, "answer_id": 42062727, "question_id": 42060343, "link": "https://stackoverflow.com/questions/42060343/internal-working-of-importing-a-module-in-perl/42062727#42062727", "title": "Internal working of importing a module in perl?", "body": "<blockquote>\n  <p>When I searched for the same it displayed only how to use import in\n  perl, which I do not require. I want to know the internal working of\n  import method.</p>\n</blockquote>\n\n<p>If you want to know the internals then check the internals i.e. the source.</p>\n\n<p>Below is what <code>import</code> subroutine from <code>Exporter</code> module does. Go through it, refer documentation and Google if some \"keywords\" are not known to you. If you do not find any answer then ask here on SO.</p>\n\n<pre><code>sub import {\n  my $pkg = shift;\n  my $callpkg = caller($ExportLevel);\n\n  if ($pkg eq \"Exporter\" and @_ and $_[0] eq \"import\") {\n    *{$callpkg.\"::import\"} = \\&amp;import;\n    return;\n  }\n\n  # We *need* to treat @{\"$pkg\\::EXPORT_FAIL\"} since Carp uses it :-(\n  my $exports = \\@{\"$pkg\\::EXPORT\"};\n  # But, avoid creating things if they don't exist, which saves a couple of\n  # hundred bytes per package processed.\n  my $fail = ${$pkg . '::'}{EXPORT_FAIL} &amp;&amp; \\@{\"$pkg\\::EXPORT_FAIL\"};\n  return export $pkg, $callpkg, @_\n    if $Verbose or $Debug or $fail &amp;&amp; @$fail &gt; 1;\n  my $export_cache = ($Cache{$pkg} ||= {});\n  my $args = @_ or @_ = @$exports;\n\n  if ($args and not %$export_cache) {\n    s/^&amp;//, $export_cache-&gt;{$_} = 1\n      foreach (@$exports, @{\"$pkg\\::EXPORT_OK\"});\n  }\n  my $heavy;\n  # Try very hard not to use {} and hence have to  enter scope on the foreach\n  # We bomb out of the loop with last as soon as heavy is set.\n  if ($args or $fail) {\n    ($heavy = (/\\W/ or $args and not exists $export_cache-&gt;{$_}\n               or $fail and @$fail and $_ eq $fail-&gt;[0])) and last\n                 foreach (@_);\n  } else {\n    ($heavy = /\\W/) and last\n      foreach (@_);\n  }\n  return export $pkg, $callpkg, ($args ? @_ : ()) if $heavy;\n  local $SIG{__WARN__} = \n        sub {require Carp; &amp;Carp::carp} if not $SIG{__WARN__};\n  # shortcut for the common case of no type character\n  *{\"$callpkg\\::$_\"} = \\&amp;{\"$pkg\\::$_\"} foreach @_;\n}\n</code></pre>\n\n<p>Complete source: <a href=\"https://metacpan.org/source/TODDR/Exporter-5.72/lib/Exporter.pm\" rel=\"nofollow noreferrer\">https://metacpan.org/source/TODDR/Exporter-5.72/lib/Exporter.pm</a></p>\n"}], "owner": {"reputation": 9, "user_id": 7140141, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RJNzjkQ0zGk/AAAAAAAAAAI/AAAAAAAAACk/144bFkEwM3k/photo.jpg?sz=128", "display_name": "Loopasmita Deka", "link": "https://stackoverflow.com/users/7140141/loopasmita-deka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1486373281, "answer_count": 2, "score": 0, "last_activity_date": 1486367399, "creation_date": 1486355573, "question_id": 42060343, "link": "https://stackoverflow.com/questions/42060343/internal-working-of-importing-a-module-in-perl", "closed_reason": "Needs more focus", "title": "Internal working of importing a module in perl?", "body": "<p>I want to know the internal working of import method . When I searched for the same it displayed only how to use import in perl ,which I do not require. </p>\n"}, {"tags": ["perl", "setuid"], "answers": [{"comments": [{"owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "edited": false, "score": 0, "creation_date": 1486342826, "post_id": 42059037, "comment_id": 71290643, "body": "This proposed solution is good, in that it requires something to be done by root to bless the proposed script so that the C wrapper knows to execute it as root. But I&#39;d like the blessing (still doable by root only) to be somehow a part of the Perl script itself, so that a separate list of hashes need not be maintained every time a script is added, removed, or modified."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "edited": false, "score": 0, "creation_date": 1486343312, "post_id": 42059037, "comment_id": 71290726, "body": "Then you want the perl script to turn around and invoke the wrapper to invoke itself if it isn&#39;t already root.  But then any perl script can do that, and you have essentially no security at all."}, {"owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "edited": false, "score": 0, "creation_date": 1486344522, "post_id": 42059037, "comment_id": 71290898, "body": "The way I see it, the command-line user would need no knowledge that any sort of C wrapper was involved. He would just run the Perl script, and yes, it would invoke the wrapper. The trick is to tag the Perl script somehow (in a way that only root could do) so that the C wrapper would know that the Perl script is eligible to run as UID 0."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "edited": false, "score": 0, "creation_date": 1486347568, "post_id": 42059037, "comment_id": 71291439, "body": "if you can make the effort to tag the perl script in some way, you can make the effort to run something to recompile the wrapper with an updated hash"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "edited": false, "score": 0, "creation_date": 1486350083, "post_id": 42059037, "comment_id": 71291886, "body": "@BillEvansatMariposa  But to &quot;<i>tag the Perl script</i>&quot; the root has to take action when a script is added, otherwise &quot;<i>any script</i>&quot; can pass.  So why not identify the script properly? Updating can be automated too, and perhaps also triggered by the script itself.  Or just have them be &quot;registered&quot; by root in a flat file, but that&#39;s very rudimentary."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1486351514, "post_id": 42059037, "comment_id": 71292147, "body": "Don&#39;t forget to avoid passing the script name to <code>perl</code>, using the virtual path to the file handle used to read the file for your checks instead (e.g. <code>&#47;proc&#47;####&#47;fd&#47;####</code> on Linux)."}, {"owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "edited": false, "score": 0, "creation_date": 1486352077, "post_id": 42059037, "comment_id": 71292258, "body": "@ysth the trick is to cut long-term maintenance costs to the absolute minimum. More effort could be made (and even automated), but I think simplicity might be a virtue here."}, {"owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486352223, "post_id": 42059037, "comment_id": 71292283, "body": "@zdim Indeed root will have to do something, but I&#39;m hoping to avoid adding something to something else; I&#39;m looking for just a way to change the Perl script itself, something that only root can do. Simplicity aids long-term maintenance."}, {"owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486352284, "post_id": 42059037, "comment_id": 71292291, "body": "@ikegami Good advice. But it won&#39;t work easily on FreeBSD. (One of the few regrets of leaving Linux behind is its splendiferous use of /proc.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486354376, "post_id": 42059037, "comment_id": 71292727, "body": "If FreeBSD doesn&#39;t have something similar, then you might not be able to write a safe wrapper. What&#39;s <code>$0</code> in a setuid <i>script</i> in FreeBSD?"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1486342223, "creation_date": 1486342223, "answer_id": 42059037, "question_id": 42058968, "link": "https://stackoverflow.com/questions/42058968/perl-script-to-run-as-root-generalized/42059037#42059037", "title": "Perl script to run as root (generalized)", "body": "<p>So use a single wrapper, take the perl script to execute as an argument, and have the C wrapper compare the length of the script and a SHA-3 or SHA-2 hash of the script contents to expected values.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1486354405, "last_edit_date": 1486354405, "creation_date": 1486351397, "answer_id": 42059920, "question_id": 42058968, "link": "https://stackoverflow.com/questions/42058968/perl-script-to-run-as-root-generalized/42059920#42059920", "title": "Perl script to run as root (generalized)", "body": "<p>What you are trying to do is very hard, even by experts. The <code>setuid</code> wrapper that used to come with <code>perl</code> no longer exists because of that, and because it's no longer needed these days. Linux and I presume other modern unix systems support setuid scripts, so you don't need highly-fragile and complex wrappers.</p>\n\n<p>If you really need a wrapper, don't re-invent the wheel; just use <code>sudo</code>!</p>\n"}, {"tags": [], "owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "is_accepted": true, "score": 1, "last_activity_date": 1487765483, "creation_date": 1487765483, "answer_id": 42391119, "question_id": 42058968, "link": "https://stackoverflow.com/questions/42058968/perl-script-to-run-as-root-generalized/42391119#42391119", "title": "Perl script to run as root (generalized)", "body": "<p>After some brainstorming:</p>\n\n<p>All the requirements can be met through the following steps.  First we show steps which are done just once.</p>\n\n<p>Step one.  Since each script which should be run as root has to be marked by user root somehow (otherwise, just any user could do this), the system administrator takes advantage of his privileged status to choose a user ID which will never actually be assigned to anyone.  In this example, we use user ID 9999.</p>\n\n<p>Step two.  Compile a particular C wrapper and let the object code run suid root.  The source code for that wrapper can be found <a href=\"http://pastebin.com/20RvJNPR\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Then, the following two steps are done once for each Perl script to be run as root.</p>\n\n<p>Step one.  Begin each Perl script with the following code.</p>\n\n<pre><code>if($&gt;)\n{\n  exec { \"/path-to-wrapper-program\" }\n       ( \"/path-to-wrapper-program\",$0,@ARGV);\n}\n</code></pre>\n\n<p>Step two.  As root (obviously), change the owner of the Perl script to user 9999.  That's it.  No updating of databases or text files.  All requirements for running a Perl script as root reside with the script itself.</p>\n\n<p>Comment on step one: I actually place the above Perl snippet after these lines:</p>\n\n<pre><code>use strict;\nuse warnings FATAL=&gt;\"all\";\n</code></pre>\n\n<p>... but suit yourself.</p>\n"}], "owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 42391119, "answer_count": 3, "score": 3, "last_activity_date": 1586089707, "creation_date": 1486341576, "question_id": 42058968, "link": "https://stackoverflow.com/questions/42058968/perl-script-to-run-as-root-generalized", "title": "Perl script to run as root (generalized)", "body": "<p>I would like to be able to run certain Perl scripts on my system as root, even though the \"user\" calling them is not running as root.</p>\n\n<p>For each script I can write a C wrapper, setting setuid root for that wrapper; the wrapper would change the UID to 0 and then call the Perl script, which itself would not have the setuid bit set. This avoids unfortunate impediments while attempting to run setuid root scripts.</p>\n\n<p>But I don't want to write a C wrapper for each script.  I just want one C wrapper to do the job for the whole system.  I also don't want just any script to be able to use this C wrapper; the C wrapper itself should be able to check some specific characteristic of the Perl script to see whether changing the UID to root is acceptable.</p>\n\n<p>I don't see any other Stack Overflow question yet which addresses this issue.</p>\n\n<p>I know the risks, I own the system, and I don't want something arbitrarily babysitting me by standing in my way.</p>\n"}, {"tags": ["perl", "web-scraping", "mechanize"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1486332773, "post_id": 42057855, "comment_id": 71288499, "body": "Have you tried changing <code>$mech-&gt;agent(&#39;Mozilla&#39;)</code> or similar? Does it work from a browser? How is the request coming from your browser different to the one coming from the script?"}, {"owner": {"reputation": 361, "user_id": 4342523, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/prlew.jpg?s=128&g=1", "display_name": "Mathematician", "link": "https://stackoverflow.com/users/4342523/mathematician"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1486333457, "post_id": 42057855, "comment_id": 71288661, "body": "Just tried changing the agent to something known.  Great suggestion, but no dice.  It does work from a browser.  I really, really wish I knew!"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1486333552, "post_id": 42057855, "comment_id": 71288686, "body": "So, try comparing the requests. If your browser doesn&#39;t show it, use a tool like wireshark to analyze them."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1486333556, "post_id": 42057855, "comment_id": 71288688, "body": "Why do you use <code>login</code> and <code>pwd</code> as field names instead of <code>email</code> and <code>password</code> ? Also, <code>$mech-&gt;submit()</code> might be better than <code>$mech-&gt;click()</code>"}, {"owner": {"reputation": 361, "user_id": 4342523, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/prlew.jpg?s=128&g=1", "display_name": "Mathematician", "link": "https://stackoverflow.com/users/4342523/mathematician"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1486334879, "post_id": 42057855, "comment_id": 71289069, "body": "@choroba Oh, I understand you now.  In my Googling I stumbled across eavesdropping on the POST communication.  There were 4 POST variables, two being empty, email which had my email address encoded (I think @ becomes a %20 or something like that) and the password.  This is what led me to try simulating the POST request, which I mentioned.  I&#39;m more inclined to believe that I&#39;m doing something wrong with Mechanize once I submit the form since I&#39;m very inexperienced with this library.  I was hoping that maybe you can&#39;t just navigate to another URL once you authenticate, or something like that."}, {"owner": {"reputation": 361, "user_id": 4342523, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/prlew.jpg?s=128&g=1", "display_name": "Mathematician", "link": "https://stackoverflow.com/users/4342523/mathematician"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1486335911, "post_id": 42057855, "comment_id": 71289341, "body": "@Dada Whoa, nice catch.  It doesn&#39;t fix the immediate problem, but it wouldn&#39;t work unless the variable names got changed.  Thank you for pointing that out!  I&#39;m going to modify the code in my question to reflect what I have now.  It may still not work, but I feel incrementally closer to the answer!  Thanks!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486336936, "post_id": 42057855, "comment_id": 71289574, "body": "<code>%20</code> is a space. That&#39;s URL encoding, also called percent encoding. That would typically be in the URL, not in the POST data."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486337288, "post_id": 42057855, "comment_id": 71289636, "body": "@simbabque by default forms are encoded as application/x-www-form-urlencoded, which does use URL encoding even in the post data"}], "owner": {"reputation": 361, "user_id": 4342523, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/prlew.jpg?s=128&g=1", "display_name": "Mathematician", "link": "https://stackoverflow.com/users/4342523/mathematician"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486336059, "creation_date": 1486332145, "last_edit_date": 1486336059, "question_id": 42057855, "link": "https://stackoverflow.com/questions/42057855/perl-mechanize-cant-log-in", "title": "Perl Mechanize: Can&#39;t log in", "body": "<p>There's a site I'm trying to log into via Perl's Mechanize module.  The target website (simplified) looks like:</p>\n\n<pre><code>&lt;form action=\"https://domain/signin\" id=\"signInForm\" name=\"signInForm\" method=\"post\" role=\"form\" novalidate=\"novalidate\"&gt;\n&lt;input class=\"form-control\" id=\"email\" name=\"email\" type=\"text\" placeholder=\"Email Address\"&gt;\n&lt;input class=\"form-control\" id=\"password\" name=\"password\" type=\"password\" placeholder=\"Password\"&gt;\n&lt;input type=\"hidden\" value=\"\" id=\"url\" name=\"url\"&gt;\n&lt;input type=\"hidden\" value=\"\" name=\"code\" id=\"code\"&gt;\n&lt;button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\"&gt;Log In&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I've tried three methods.  The first two involve submitting a form.  The last (not posted here) involves directly making a POST request.  So far, no success.  I'm posting the code.  Assume $loginURL, $login, $pass, and $url are all set correctly.  Also, assume string_to_file() is defined correctly as well.  Here's method 1:</p>\n\n<pre><code>sub login1()\n{\n   my $mech = WWW::Mechanize-&gt;new();\n\n   $mech-&gt;cookie_jar( HTTP::Cookies-&gt;new() );\n   $mech-&gt;get( $loginURL );\n   $mech-&gt;form_name('signInForm');\n   $mech-&gt;field('email' =&gt; $email);\n   $mech-&gt;field('password' =&gt; $password);\n   my $result = $mech-&gt;submit();\n\n   unless( $result-&gt;is_success() )\n   {\n      string_to_file( $result-&gt;status_line, 'login1_failure.html');\n      die \"login1 failed\"\n   }\n   string_to_file( $mech-&gt;content(), 'login1_success.html');\n\n   $result = $mech-&gt;get( $url );\n   unless( $result-&gt;is_success() )\n   {\n      string_to_file( $result-&gt;status_line, 'page1_failure.html');\n      die \"page1 failed\"\n   }\n   string_to_file( $mech-&gt;content(), 'page1_success.html');\n}\n</code></pre>\n\n<p>And here's method 2:</p>\n\n<pre><code>sub login2()\n{\n   my $mech = WWW::Mechanize-&gt;new();\n\n   $mech-&gt;cookie_jar( HTTP::Cookies-&gt;new() );\n   $mech-&gt;get( $loginURL );\n   my $result = $mech-&gt;submit_form(\n      form_name =&gt; 'signInForm',\n      fields =&gt; { email =&gt; $email, password =&gt; $password }\n   );\n\n   unless( $result-&gt;is_success )\n   {\n      string_to_file( $result-&gt;status_line, 'login2_failure.html');\n      die \"login2 failed\"\n   }\n   string_to_file( $result-&gt;decoded_content, 'login2_success.html');\n\n   $result = $mech-&gt;get( $url );\n   unless( $result-&gt;is_success() )\n   {\n      string_to_file( $result-&gt;status_line, 'page2_failure.html');\n      die \"page2 failed\"\n   }\n   string_to_file( $mech-&gt;content(), 'page2_success.html');\n}\n</code></pre>\n\n<p>The end result is that the files login1_success, login2_success, page1_success, and page2_success are all created, so supposedly no failures.  However, when I look at the contents of these files, the authentication definitely didn't work.  I'm looking at a version of $url that one sees when one is not an authenticated upgraded user (which I am).  I've made sure the login works by hand.</p>\n\n<p>I <em>just</em> learned Perl Mechanize, so perhaps there's something obvious I'm not seeing.</p>\n\n<p>Can someone help me figure out what I'm doing wrong?</p>\n"}, {"tags": ["linux", "perl", "terminal", "fedora-25"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1486325659, "post_id": 42056751, "comment_id": 71285977, "body": "Showing us the code would help..."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1486325728, "post_id": 42056751, "comment_id": 71285995, "body": "You have probably some control characters in the output, maybe passed through from the input. Redirect the output into a file and look at this file with some editor displaying these characters (like vim) or do a hexdump or xxd."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1486325836, "post_id": 42056751, "comment_id": 71286033, "body": "Parts of Windows line endings, CR or <code>\\r</code>,  make the cursor go left on *nix, but don&#39;t create a new line."}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486325990, "post_id": 42056751, "comment_id": 71286081, "body": "after redirecting the output to a file, there are multiple \\s in the output file."}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486326125, "post_id": 42056751, "comment_id": 71286141, "body": "&quot;after redirecting the output to a file, I found out that there are multiple \\s coming up at every alternate line (possibly when i use \\n with print command)&quot;"}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486326480, "post_id": 42056751, "comment_id": 71286285, "body": "use warnings;  open F, &quot;friendship_network_wo_weights1.txt&quot;, or die; open G, &quot;username_gender_1.txt&quot;, or die;  while (&lt;G&gt;){ \tchomp $_; \tmy @a = split /\\t/, $_; \t$list{$a[0]} = $a[1]; } close G;  while (&lt;F&gt;){ \tchomp $_; \tmy @b = split /\\t/, $_; \tif ((exists $list{$b[0]}) &amp;&amp; (exists $list{$b[1]})){ \t\tprint  &quot;$b[0]\\t${list{$b[0]}}\\t$b[1]\\t${list{$b[1]}}\\n&quot;; \t} }  close F;"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1486326824, "post_id": 42056751, "comment_id": 71286397, "body": "@HarpreetSingh <a href=\"https://stackoverflow.com/posts/42056751/edit\">Edit your question</a> and add the code, please."}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486326897, "post_id": 42056751, "comment_id": 71286423, "body": "after checking it in vim, there is an unwanted addintion of &quot;^M&quot; in the output, where there is overlap. ADAM    123^M   JOHN     321 and so on"}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486327280, "post_id": 42056751, "comment_id": 71288161, "body": "partial solution found before printing the output, I substituted \\r with nothing, the code now works fine, but this solution is not permanent. Looking for a permanent solution."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486327551, "post_id": 42056751, "comment_id": 71286662, "body": "My crystal ball says your input files are in DOS/Windows format with CRLF line endings."}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486327778, "post_id": 42056751, "comment_id": 71286735, "body": "i have added the code, have a look and please help, I found out the problem. there are \\r or ^M appearing out of no where (reason for messed up output), i can substitute it every time before printing but i will not solve the purpose. Thank you"}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486327822, "post_id": 42056751, "comment_id": 71286749, "body": "i wrote this code in gedit on fedora"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486327847, "post_id": 42056751, "comment_id": 71286760, "body": "Missing <code>use strict;</code>. Use lexical variables, not bareword filehandles. Use 3-arg <code>open</code>, not 2-arg <code>open</code>. Include the filename and <code>$!</code> in the error message. <code>%list</code> and <code>$get</code> are undeclared (implicitly global)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486328049, "post_id": 42056751, "comment_id": 71288162, "body": "The &quot;permanent solution&quot; is to fix your txt files."}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486329173, "post_id": 42056751, "comment_id": 71287262, "body": "i have made all the changes as pointed out by you, but the problem still resists, \\r or ^M is still showing up, (i wrote this code in gedit on fedora)"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486330903, "post_id": 42056751, "comment_id": 71288163, "body": "@melpomene If it&#39;s just a one-off, yeah, run it through <code>dos2unix</code>. In a cross-platform environment, that&#39;s not such a good idea. If the text files are being handed around between machines that&#39;s a lot of converting back and forth. If the files are large, or they update often, or they&#39;re passed around often, that can get computationally and administratively expensive, and eventually someone will forget. It&#39;s better to be tolerant than deal with all that accounting and rewriting."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1486331119, "post_id": 42056751, "comment_id": 71288164, "body": "@Schwern True, if the files move around, it&#39;s better to adapt the code. I was assuming the files would be &quot;static&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1486327955, "post_id": 42057145, "comment_id": 71286792, "body": "Alternatively: <code>s&#47;\\R\\z&#47;&#47;</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1486328087, "post_id": 42057145, "comment_id": 71286845, "body": "The default value of <code>$&#47;</code> is always <code>\\n</code>, never <code>\\r\\n</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486328158, "post_id": 42057145, "comment_id": 71286869, "body": "If you want to remove <code>\\r</code>, why write <code>\\015</code>? Those are not (always) the same thing."}, {"owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 1, "creation_date": 1486328258, "post_id": 42057145, "comment_id": 71286909, "body": "thanks for the answer!!!! i wrote the script in gedit on fedora. And is there a way to permanently fix this issue?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1486328374, "post_id": 42057145, "comment_id": 71286961, "body": "@HarpreetSingh Dude, fix your .txt files. It doesn&#39;t matter what editor you wrote the script in."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1486329290, "post_id": 42057145, "comment_id": 71287313, "body": "@melpomene Exactly, they&#39;re not always the same thing. It&#39;s more a habit I got into for <code>\\n</code>; I can never remember how that works cross-platform so <code>\\012</code> to be safe. I think we can safely assume they&#39;re not gonna encounter EBCDIC files, and VMS does its own thing to translate records into lines. As for <code>$&#47;</code> it&#39;s documented to be &quot;newline&quot; which is ambiguous. And IO in Windows Perl has a layer of newline translation that I can never remember how it works... so I like to be explicit. My head is full of 5.6 madness. But <code>\\R</code> is neat, I didn&#39;t know about that. That&#39;s probably the best solution."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486329646, "post_id": 42057145, "comment_id": 71287422, "body": "How did you get two dowvnotes for this?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1486330232, "post_id": 42057145, "comment_id": 71287632, "body": "&quot;newline&quot; is simply <code>\\n</code>. That&#39;s the whole point: <code>\\n</code> is the portable newline abstraction ... Well, it depends in which direction you want to be portable: The same code working with native text files on many platforms, or code running on a single platform but processing text files in many different formats."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486330663, "post_id": 42057145, "comment_id": 71287763, "body": "@simbabque I guess because I didn&#39;t get the complexities of cross-platform newline handling in Perl exactly right?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486330728, "post_id": 42057145, "comment_id": 71287779, "body": "@melpomene Which is why I recommend just using <code>&#47;\\015?\\012\\z&#47;</code> and not trying to remember how that all works. I&#39;ll start recommending <code>&#47;\\R\\z&#47;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486330994, "post_id": 42057145, "comment_id": 71287870, "body": "@Schwern That&#39;s awful advice. Figure out which problem you want to solve (e.g. choose between processing native files everywhere and processing Windows text files on any platform), then write code for it. This <code>\\015?\\012\\z</code> thing seems too much like cargo culting. And it&#39;s not like this is all arcane Perl subtleties: C and C++ use exactly the same text processing model (which is where Perl got it from, of course)."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486331998, "post_id": 42057145, "comment_id": 71288238, "body": "@melpomene Using C and C++ as examples of languages which are not arcane and subtle... oh boy. Yes, Perl is a surprisingly thin wrapper around C; this explains a lot of its sins. Most Perl people have never used C nor C++, assuming they have explains a lot more Perl sins. Anyhow, the question was about processing text files of unknown origin. <code>&#47;\\015?\\012\\z&#47;</code> and <code>&#47;\\R\\z&#47;</code> work fine. Explaining the odd behavior is the important thing, the OP has apparently never encountered this before and doesn&#39;t need a treatise on Perl newline handling. At this point, you should write up your own answer."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1486328009, "last_edit_date": 1486328009, "creation_date": 1486327909, "answer_id": 42057145, "question_id": 42056751, "link": "https://stackoverflow.com/questions/42056751/perl-output-messed-up-in-fedora-ubuntu/42057145#42057145", "title": "perl output messed up in fedora, ubuntu", "body": "<p>The problem is on Windows the newline is <code>\\r\\n</code>. On everything else it's <code>\\n</code>. Assuming these files were created on Windows, when you read them on Unix each line will still have a trailing <code>\\r</code> after the <code>chomp</code>.</p>\n\n<p><code>\\r</code> is the \"carriage return\" character. It's like on an old typewriter how you had to move the whole typehead back to the left side at the end of a line, computer displays used to be <a href=\"https://en.wikipedia.org/wiki/Teleprinter\" rel=\"nofollow noreferrer\">fancy typewriters called Teleprinters</a>. When you print it, the cursor moves back to the beginning of the line. Anything you print after that gets overwritten. Here's a simple example.</p>\n\n<pre><code>print \"foo\\rbar\\r\\n\";\n</code></pre>\n\n<p>What you'll see is <code>bar</code>. This is because it prints...</p>\n\n<ol>\n<li><code>foo</code></li>\n<li><code>\\r</code> sends the cursor back to the start of the line</li>\n<li><code>bar</code> overwrites <code>foo</code></li>\n<li><code>\\r</code> sends the cursor back to the start of the line</li>\n<li><code>\\n</code> goes to the start of the next line (doesn't matter where the cursor is)</li>\n</ol>\n\n<p><code>chomp</code> will only remove whatever is in <code>$/</code> off the end of the string. On Unix that's <code>\\n</code>. On Windows it's <code>\\r\\n</code>.</p>\n\n<p>There's a number of ways to solve this. One of the safest is to manually remove newlines of both types with a regex.</p>\n\n<pre><code># \\015 is octal character 015 which is carriage return.\n# \\012 is octal character 012 which is newline\n$line =~ s{\\015?\\012$}{};\n</code></pre>\n\n<p>That says to remove maybe a <code>\\r</code> and definitely a <code>\\n</code> at the end of the line.</p>\n"}], "owner": {"reputation": 1, "user_id": 7520276, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211938826602863/picture?type=large", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/7520276/harpreet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1491001583, "creation_date": 1486325483, "last_edit_date": 1491001583, "question_id": 42056751, "link": "https://stackoverflow.com/questions/42056751/perl-output-messed-up-in-fedora-ubuntu", "title": "perl output messed up in fedora, ubuntu", "body": "<p>I wrote a perl script for mapping two data sets. When I run the program using the Linux terminal, the output is messed up. It seems like the output is overlapping. I am using Fedora 25. I have tried the code on Windows and it works fine. </p>\n\n<p>Same problem is there on Ubuntu as well.</p>\n\n<p>DESIRED:</p>\n\n<p>ADAM 123 JOHN 321</p>\n\n<p>TOM 473 BENTLY 564</p>\n\n<p>and so on....</p>\n\n<p>OUTPUT that i am getting:</p>\n\n<p>ADAM 123N 321</p>\n\n<p>TOM 473TLY 564</p>\n\n<p>and so on......</p>\n\n<p>I have tested the code on Windows and it works perfectly fine. Though the same problem remains on Ubuntu 16.04 lts.</p>\n\n<p>please help.</p>\n\n<p><strong>code:</strong></p>\n\n<pre><code>use warnings;\n\nopen F, \"friendship_network_wo_weights1.txt\", or die;\nopen G, \"username_gender_1.txt\", or die;\n\nwhile (&lt;G&gt;){\n    chomp $_;\n    my @a = split /\\t/, $_;\n    $list{$a[0]} = $a[1];\n}\nclose G;\n\nwhile (&lt;F&gt;){\n    chomp $_;\n    my @b = split /\\t/, $_;\n    if ((exists $list{$b[0]}) &amp;&amp; (exists $list{$b[1]})){\n        $get =  \"$b[0]\\t${list{$b[0]}}\\t$b[1]\\t${list{$b[1]}}\\n\";\n        $get =~ s/\\r//g;\n        print \"$get\";\n    }\n}\n\nclose F;\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486317256, "post_id": 42054789, "comment_id": 71282873, "body": "Interestingly, this is the third question in the last two or three weeks that asks pretty much this. They just all were for different RDBMS. I&#39;ll find you the answer and if it&#39;s what you need we can close as duplicate."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486317383, "post_id": 42054789, "comment_id": 71282921, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/a/41441486/1331451\">stackoverflow.com/a/41441486/1331451</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1486318535, "post_id": 42054789, "comment_id": 71283318, "body": "@simbabque If you want to close as a dup, can you generalize that answer? In DBD::mysql, it&#39;s just <a href=\"https://metacpan.org/pod/DBD::mysql#MULTIPLE-RESULT-SETS\" rel=\"nofollow noreferrer\"><code>$sth-&gt;more_results</code></a>, not <code>$sth-&gt;{odbc_more_results}</code>. If we close this as a dup of that, I think it will be confusing, especially for anonymous users, who are redirected immediately...imagine seeing something about fetching multiple results from a MySQL stored proc in the Google blurb and then being sent to a page that says &quot;use <code>odbc_more_results</code>&quot;. (Nice answer, btw)"}, {"owner": {"reputation": 385, "user_id": 5264370, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c0f5381a58d331d2413c1dbe45c62b4?s=128&d=identicon&r=PG&f=1", "display_name": "Impavid", "link": "https://stackoverflow.com/users/5264370/impavid"}, "edited": false, "score": 0, "creation_date": 1486321407, "post_id": 42054789, "comment_id": 71284379, "body": "Thank you for the answer."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486323708, "post_id": 42054789, "comment_id": 71285206, "body": "@ThisSuitIsBlackNot yeah that makes sense"}], "owner": {"reputation": 385, "user_id": 5264370, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1c0f5381a58d331d2413c1dbe45c62b4?s=128&d=identicon&r=PG&f=1", "display_name": "Impavid", "link": "https://stackoverflow.com/users/5264370/impavid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1486323236, "answer_count": 0, "score": 1, "last_activity_date": 1486314497, "creation_date": 1486314101, "last_edit_date": 1486314497, "question_id": 42054789, "link": "https://stackoverflow.com/questions/42054789/perl-mysql-dbi-fetchrow-next", "closed_reason": "Duplicate", "title": "Perl MySQL DBI fetchrow next", "body": "<p>Please help with Perl script to fetch stored procedure from MySQL database. The following Perl Code Snippet is supposed to fetch 2 result sets in accordance with the result of the following MySQL stored procedure execution. </p>\n\n<p>Is there a \"next()\" method for DBI fetchrow() viz.,</p>\n\n<pre><code>while(my $row = $sth-&gt;fetchrow()) {\n    say($row);\n    $sth-&gt;fetchrow(next);\n}\n</code></pre>\n\n<p><strong>Perl:</strong></p>\n\n<pre><code>use feature ':5.22';\nuse strict;\nuse warnings;\nuse DBI;\nmy $dsn = \"DBI:mysql:procdb\";\nmy $username = \"root\";\nmy $password = '';\nmy $dbh = DBI-&gt;connect($dsn, $username, $password);\ndie \"failed to connect to MySQL database:DBI-&gt;errstr()\" unless($dbh);\nsay \"Connected to MySQL Server successfully.\"; \nmy $sth = $dbh-&gt;prepare(\"CALL prepend('abcdefg', \\@inOutParam);\") or die \"prepare statement failed: $dbh-&gt;errstr()\";\n$sth-&gt;execute() or die \"execution failed: $dbh-&gt;errstr()\"; \n$sth-&gt;dump_results();\n$sth-&gt;finish();\n$dbh-&gt;disconnect();\n</code></pre>\n\n<p><strong>Perl Output:</strong></p>\n\n<pre><code>Connected to MySQL Server successfully.\n'abcdefg'\n1 rows\n</code></pre>\n\n<p>0 rows</p>\n\n<p><strong>MySQL:</strong></p>\n\n<pre><code>DROP DATABASE IF EXISTS procdb;\nDELIMITER $$\nCREATE DATABASE procdb;$$\nDELIMITER ;\nUSE procdb;\nDROP PROCEDURE IF EXISTS prepend;\nDELIMITER $$\nCREATE PROCEDURE prepend\n(\n IN inParam VARCHAR(255), \n INOUT inOutParam INT\n)\nBEGIN\n DECLARE z INT;\n SET z = inOutParam + 1;\n SET inOutParam = z;\n SELECT inParam;\n SELECT CONCAT('zyxw', inParam);\nEND;$$\nDELIMITER ;\nUSE procdb;\nCALL prepend('abcdefg', @inOutParam);\n</code></pre>\n\n<p><strong>MySQL Output:</strong></p>\n\n<pre><code>abcdefg\nzyxwabcdefg\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "split", "cut", "uniq"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486295334, "post_id": 42051608, "comment_id": 71275522, "body": "<a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\"><code>perldoc perlretut</code></a>, <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>perldoc -f split</code></a>, <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\"><code>perldoc -f grep</code></a>, <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\"><code>perldoc perldata</code></a>. Alternatively, hire a programmer. (This question does not show any research effort.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1486296194, "post_id": 42051608, "comment_id": 71275746, "body": "As I said in my comment above, &quot;This question does not show any research effort&quot;. You&#39;re essentially asking us to write code for you. You haven&#39;t even attempted to do it yourself. This is not a programming question, this is &quot;do my job for me&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": true, "score": 2, "last_activity_date": 1486299322, "creation_date": 1486299322, "answer_id": 42052309, "question_id": 42051608, "link": "https://stackoverflow.com/questions/42051608/perl-way-of-using-cut-grep-uniq/42052309#42052309", "title": "Perl way of using cut,grep,uniq", "body": "<p><a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\"><code>perldoc perlrun</code></a> will teach you how to fish:</p>\n\n<ul>\n<li><code>-n</code> to read in a file line by line</li>\n<li><code>-a</code> to split each line into <code>@F</code> (and emulate <code>cut</code>)</li>\n<li>list slices to access items stored in <code>@F</code> to emulate <code>cut</code>'s <code>-f</code> flag</li>\n<li>regex conditional to emulate <code>grep</code></li>\n<li>use hash keys to emulate <code>uniq</code></li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 7435384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/05ae63a098fbc4efcf0616b913047f1c?s=128&d=identicon&r=PG&f=1", "display_name": "Vinu Shankar", "link": "https://stackoverflow.com/users/7435384/vinu-shankar"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "closed_date": 1486300404, "accepted_answer_id": 42052309, "answer_count": 1, "score": -3, "last_activity_date": 1486307821, "creation_date": 1486294717, "last_edit_date": 1486307821, "question_id": 42051608, "link": "https://stackoverflow.com/questions/42051608/perl-way-of-using-cut-grep-uniq", "closed_reason": "Needs more focus", "title": "Perl way of using cut,grep,uniq", "body": "<p></p>\n\n<p>I am running a Perl script inside a Perl script, and the output of the script is something like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/angyvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/aqmmgvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/69aqvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/69aavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/qqmavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/wttvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/9aaqvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/9aaavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/a1vqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n# aAM axac: cmt /tm9/raaqHRW /myqq1fqq1er/maaavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a1.1.e.1234567891008547.ahqva\n[qNFq] cqqq aarvqca qntereatqng 1qatvqnqth. heqqq 1qatvqnqth.\n[qNFq] cqqq aarvqca qntereatqng fmtvqnqth. heqqq fmtvqnqth.\n[qNFq] cqqq aarvqca qntereatqng gcaavqnqth. heqqq gcaavqnqth.\n[qNFq] cqqq aarvqca qntereatqng gq9vqnqth. heqqq gq9vqnqth.\n[qNFq] cqqq aarvqca qntereatqng hvavqnqth. heqqq hvavqnqth.\n[qNFq] cqqq aarvqca qntereatqng q9vqnqth. heqqq q9vqnqth.\n[qNFq] cqqq aarvqca qntereatqng 9vaqvqnqth. heqqq 9vaqvqnqth.\n[qNFq] cqqq aarvqca qntereatqng mcaavqnqth. heqqq mcaavqnqth.\n[qNFq] cqqq aarvqca qntereatqng mcqrvqnqth. heqqq mcqrvqnqth.\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/angyvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/aqmmgvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/69aqvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/69aavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/qqmavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/wttvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/9aaqvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/9aaavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/a1vqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n# aAM axac: cmt /tm9/raawV9h /myqq1fqq1er/maaavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a4.1.e.1234567891014523.ahqva\n[qNFq] cqqq aarvqca qntereatqng 1qatvqnqth. heqqq 1qatvqnqth.\n[qNFq] cqqq aarvqca qntereatqng fmtvqnqth. heqqq fmtvqnqth.\n[qNFq] cqqq aarvqca qntereatqng 6caavqnqth. heqqq 6caavqnqth.\n[qNFq] cqqq aarvqca qntereatqng 6q9tvqnqth. heqqq 6q9tvqnqth.\n[qNFq] cqqq aarvqca qntereatqng q9vqnqth. heqqq q9vqnqth.\n[qNFq] cqqq aarvqca qntereatqng 9vaqvqnqth. heqqq 9vaqvqnqth.\n[qNFq] cqqq aarvqca qntereatqng mcaavqnqth. heqqq mcaavqnqth.\n[qNFq] cqqq aarvqca qntereatqng mcqrvqnqth. heqqq mcqrvqnqth.\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/angyvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/aqmmgvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/69aqvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/69aavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/qqmavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/wttvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/9aaqvqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/9aaavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/a1vqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n# aAM axac: cmt /tm9/raaaRX6 /myqq1fqq1er/maaavqnqth/rmn/cqqqa/newfqq1er/111111111/ty9a7.1.e.1234567891020719.ahqva\n</code></pre>\n\n<p>I need to get an output like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>tm9/raaqHRW /111111111/ty9a1\ntm9/raawV9h /111111111/ty9a4\ntm9/raaaRX6 /111111111/ty9a7\n</code></pre>\n\n<p>I am currently writing the output of the script to a file and doing as follows,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>grep \"cmt /tm9\" output_file | cut -d'/' -f2,3,9,10 | cut -d '.' -f1 | uniq\n</code></pre>\n\n<p>Is there a Perl way to do this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1486294115, "post_id": 42051431, "comment_id": 71275188, "body": "Is the second column always <code>NULL</code> or <code>NOT NULL</code>?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1486294210, "post_id": 42051431, "comment_id": 71275215, "body": "I don&#39;t know for sure. There are 23 different tables of data. So the solution should be generalized."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1486294441, "post_id": 42051431, "comment_id": 71275277, "body": "So if the regex works by itself and the actual code does not, why are you showing us the regex instead of your code? <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486294809, "post_id": 42051431, "comment_id": 71275386, "body": "It could have been possible that online regex engine was flawed."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486294367, "post_id": 42051544, "comment_id": 71275259, "body": "Hmm, all cols still coming up undef."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486294537, "post_id": 42051544, "comment_id": 71275304, "body": "Ah, found the problem. There was a leading white space in each the lines that I didn&#39;t notice."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486294618, "post_id": 42051544, "comment_id": 71275327, "body": "@StevieD: Just add <code>\\s*</code> in front of the regex, see my edit."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 2, "last_activity_date": 1486294619, "last_edit_date": 1486294619, "creation_date": 1486294306, "answer_id": 42051544, "question_id": 42051431, "link": "https://stackoverflow.com/questions/42051431/regex-for-parsing-column-descriptions/42051544#42051544", "title": "Regex for parsing column descriptions", "body": "<p>Something like that should work:</p>\n\n<pre><code>my ($col1, $col2, $col3) = $line =~ /^\\s*(\\w+)\\s+((?:\\w+ )?\\w+)\\s+(\\w+)\\s*$/;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1486294450, "creation_date": 1486294450, "answer_id": 42051563, "question_id": 42051431, "link": "https://stackoverflow.com/questions/42051431/regex-for-parsing-column-descriptions/42051563#42051563", "title": "Regex for parsing column descriptions", "body": "<p>Your pattern doesn't give <code>undef</code> for me but the NULL/NOT NULL part had some whitespace around it.\nI slightly changed it and got the desired result:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nwhile( my $line = &lt;DATA&gt; ) {\n    my ($col1, $col2, $col3) = $line =~ /^\\s*(\\S+)\\s+(.+?)\\s+(\\S+)\\s*$/;\n    print \"col1: [$col1], col2: [$col2], col3: [$col3]\\n\";\n}\n\n__DATA__\nOID                                                   NOT NULL INTEGER\nACCT_TYPE                                             NOT NULL INTEGER\nNAME                                                  NULL     VARCHAR\nPAST_DUE_90                                           NULL     INTEGER\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>col1: [OID], col2: [NOT NULL], col3: [INTEGER]\ncol1: [ACCT_TYPE], col2: [NOT NULL], col3: [INTEGER]\ncol1: [NAME], col2: [NULL], col3: [VARCHAR]\ncol1: [PAST_DUE_90], col2: [NULL], col3: [INTEGER]\n</code></pre>\n\n<p><strong>Just for reference: your pattern gave:</strong></p>\n\n<pre><code>col1: [OID], col2: [NOT NULL], col3: [INTEGER]\ncol1: [ACCT_TYPE], col2: [NOT NULL], col3: [INTEGER]\ncol1: [NAME], col2: [NULL    ], col3: [VARCHAR]\ncol1: [PAST_DUE_90], col2: [NULL    ], col3: [INTEGER]\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1486338082, "creation_date": 1486293534, "last_edit_date": 1486294640, "question_id": 42051431, "link": "https://stackoverflow.com/questions/42051431/regex-for-parsing-column-descriptions", "title": "Regex for parsing column descriptions", "body": "<p>How do I write a Perl regex for the following data?</p>\n\n<pre><code>OID                                                   NOT NULL INTEGER\nACCT_TYPE                                             NOT NULL INTEGER\nNAME                                                  NULL     VARCHAR\nPAST_DUE_90                                           NULL     INTEGER\n</code></pre>\n\n<p>I'd like to parse it into three separate columns. All whites space are spaces. The fact that the second columns can have two words or one makes it tricky. Note that there are trailing spaces at the end of each line.</p>\n\n<p>The last thing I tried was this:</p>\n\n<pre><code>my ($col1, $col2, $col3) = $line =~ /^(\\S+)\\s+\\b(.+) \\b(\\S+)\\s*$/;\n</code></pre>\n\n<p>That regex works here: <a href=\"https://regex101.com/r/6beMrM/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/6beMrM/1</a> but when I run it in the actual code the <code>cols</code> are <code>undef</code>.</p>\n\n<p><strong>SOLVED</strong>\nThere was a leading space in each of the file lines that I didn't notice.</p>\n"}, {"tags": ["perl", "if-statement", "hash", "exists"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486286485, "post_id": 42050257, "comment_id": 71273162, "body": "Your code never assigns to the hash.  The <code>%correos</code> doesn&#39;t magically get populated on its own, you have to assign key-value pairs,  <code>$correos{key} = $value;</code>. Then it makes sense testing whether there is a <code>defined</code> value for a given key (what <code>exists</code> does).  I can assure you that <code>exists</code> works."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1486287279, "post_id": 42050257, "comment_id": 71273416, "body": "@zdim: I don&#39;t follow you. The program has <code>$correos{$lel}=1</code> if <code>exists</code> is <i>true</i> and <code>$correos{$lel}++</code> if not."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1486287548, "post_id": 42050257, "comment_id": 71273489, "body": "@Chaos: Your regex is faulty. You need to escape the at sign <code>@</code>, and the second pair of parentheses will capture only the <i>last</i> occurrence of <code>\\.\\w+</code>.Are the values of <code>$lel</code> shown correctly?"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1486287989, "post_id": 42050257, "comment_id": 71273612, "body": "Looks like the regex is attempting to match email addresses"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486288053, "post_id": 42050257, "comment_id": 71273633, "body": "@zdim: Oh dear. I&#39;ve just woken up and haven&#39;t had my first coffee yet, but I don&#39;t get you. Either <code>=1</code> or <code>++</code> will permanently create the hash element. The idea is to check whether more than one line from the <code>FCG</code>  file handle produces the same captures from the regex."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486288286, "post_id": 42050257, "comment_id": 71273696, "body": "@Borodin the <code>@</code> in the regex doesn&#39;t have to be escaped: <code>perl -Mstrict -wE &#39;my $str = q(user@test.com); my @m = $str =~ &#47;(\\w+@\\w+\\.\\w+)&#47;; say for @m&#39;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1486289032, "post_id": 42050257, "comment_id": 71273918, "body": "@Zaid: No, but it&#39;s dangerous advice to say that it doesn&#39;t need escaping. Had it not been followed by a backslash, whitespace, or the end of the pattern, perl would have tried to interpolate the corresponding array variable. Likewise braces <code>{ .. }</code> can often work in regex patterns without being escaped, but Perl now has a warning to tell you not to do that."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1486289208, "post_id": 42050257, "comment_id": 71273966, "body": "It wasn&#39;t meant to be advice. Just highlighting that it is not a reason for the regex to be &quot;faulty&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1486289361, "post_id": 42050257, "comment_id": 71274002, "body": "@Zaid: I disagree. Code can be faulty while still performing as intended for the wrong reasons, just as I can have faulty brakes on my car while still being able to bring it to a halt."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486294720, "post_id": 42050257, "comment_id": 71275357, "body": "You have <code>use strict</code> (which is actually redundant with <code>use 5.014</code>), but not <code>use warnings</code>. You might want to add that."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486296148, "post_id": 42050257, "comment_id": 71275734, "body": "@zdim Not sure whether I understood your first comment right but <code>exists</code> doesn&#39;t check for the definedness of <code>value</code> but for the existance of <code>key</code>: <code>perl -Mstrict -Mwarnings -E &#39;my %hash = (a =&gt; undef); say &quot;YES&quot; if (exists $hash{a});&#39;</code> prints <code>YES</code> albeit the value is undef."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486333520, "post_id": 42050257, "comment_id": 71288674, "body": "@Borodin Dear oh dear.  It was late here and all those coffees must had worn off.  I didn&#39;t get the point of the posted code, which you nicely explain. I didn&#39;t even see that the comment was yours (<i>that</i> part was the cell phone effect.) Sorry to all for the noise :(  I&#39;m removing those comments, except for the first one."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486291759, "post_id": 42050654, "comment_id": 71274542, "body": "Did you have your coffee yet?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1486291868, "post_id": 42050654, "comment_id": 71274567, "body": "@simbabque: Ah! Thanks for the reminder. There&#39;s a jug of it waiting in the kitchen. I shall be razor sharp for the next few hours!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486293058, "post_id": 42050654, "comment_id": 71274898, "body": "I&#39;m more of the tea guy in the morning. But I&#39;m running low. Need to hurry to go buy more before I need a visa to go there..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486293228, "post_id": 42050654, "comment_id": 71274943, "body": "@simbabque: You talking about England here? It wouldn&#39;t be impossible for me to ship something to you."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486296535, "post_id": 42050654, "comment_id": 71275825, "body": "thanks for the offer, but the shipping is higher than buying online. I have used britishcornershop.co.uk before. They have very fair shipping if you buy a lot of stuff. Five shoe boxes of Yorkshire tea and a six pack of Irn Bru and I&#39;m set for a while. Or I should just come visit again finally. But for the amount of things I usually buy I need to drive there. Taking a stack of charity shop books and tea on the plane is tricky. ;-)"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486335182, "post_id": 42050654, "comment_id": 71289161, "body": "@simbabque The TV advertisements are the best part of Irn-Bru. The soda itself will burn a hole through your stomach ;-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1486336707, "post_id": 42050654, "comment_id": 71289532, "body": "@MattJacob I don&#39;t know those. I just remember this glowing liquid that tastes like mouthwash. I think in the US it&#39;s called Listerine, isn&#39;t it? :P"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1486289415, "last_edit_date": 1486289415, "creation_date": 1486288414, "answer_id": 42050654, "question_id": 42050257, "link": "https://stackoverflow.com/questions/42050257/perl-exists-not-working-as-expected/42050654#42050654", "title": "Perl exists not working as expected", "body": "<p></p>\n\n<p>You are mistaken. If I run your code against this data file</p>\n\n<h3>pruecorreos</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>aaa@mail.example.com\naaa@mail.example.com\n</code></pre>\n\n<p>then I get this output</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Analizando: aaa@mail.example.comlel es [aaa@mail.example.com]\naaa@mail.example.com NOT in hash\nAnalizando: aaa@mail.example.comlel es [aaa@mail.example.com]\naaa@mail.example.com  in hash[Finished in 0.1s]\n</code></pre>\n\n<p>which shows that duplicates are being detected correctly</p>\n\n<p>However, the errors that I pointed out in my comment need to be fixed, and I would do it like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nopen my $fcg, '&lt;', 'pruecorreos' or die \"No se puede: $!\";\n\nmy %correos;\n\nwhile ( &lt;$fcg&gt; ) {\n\n    chomp;\n\n    print \"Analizando: $_\\n\";\n\n    next unless my ($lel) = /( \\w+ \\@ \\w+ (?: \\. \\w+ )+  )/x;\n\n    print \"lel es [$lel]\\n\";\n\n    print $correos{$lel}++ ? \"$lel is in hash\\n\" : \"$lel is NOT in hash\\n\";\n\n    print \"\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Analizando: aaa@mail.example.com\nlel es [aaa@mail.example.com]\naaa@mail.example.com is NOT in hash\n\nAnalizando: aaa@mail.example.com\nlel es [aaa@mail.example.com]\naaa@mail.example.com is in hash\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7518398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cacc68f8a356e963be0b88b3b70a3850?s=128&d=identicon&r=PG&f=1", "display_name": "Chaos", "link": "https://stackoverflow.com/users/7518398/chaos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486289415, "creation_date": 1486285481, "last_edit_date": 1486287886, "question_id": 42050257, "link": "https://stackoverflow.com/questions/42050257/perl-exists-not-working-as-expected", "title": "Perl exists not working as expected", "body": "<p>I'm trying to count the emails occurrences  in a file.\nBut it's seems that exists is not working as expected.\nWhen i found a new email the code should print not in hash\nElse it should print in hash.</p>\n\n<p>But \"in hash\" is never printed</p>\n\n<p>How can i count the email ocurrences? </p>\n\n<pre><code>use strict;\nuse 5.014;\nopen(FCG,\"&lt;\",\"pruecorreos\") or die \"No se puede \\n\";\nmy %correos = ();\nmy $i = 0;\nwhile (&lt;FCG&gt;) {\n    chomp;\n    print \"\\nAnalizando: $_\";\n\n    if ( my @m = $_ =~/(\\w+@\\w+\\.\\w+)(\\.\\w+)*/ ) {\n\n        my $lel = join(\"\",@m);\n        print \"lel es [$lel]\";\n\n        if ( exists $correos{$lel} ) {\n            print \"\\n$lel  in hash\";\n            $correos{$lel}=1;\n        }\n        else {\n            print \"\\n$lel NOT in hash\";\n            $correos{$lel}++;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1486259313, "post_id": 42047734, "comment_id": 71268260, "body": "It&#39;s entirely possible that the <i>actual</i> value is <code>2.9999999999999</code> (i.e. within epsilon of 3, but not exactly 3) and <code>print</code> just recognizes that and converts it to <code>3</code> for the sake of prettiness. Then, <code>int</code> truncates the <i>actual</i> value to <code>2</code>, giving you the erroneous result. I&#39;m suggesting this because changing <code>1000</code> to <code>1001</code> gives the expected answer, and that would likely be just slightly <i>over</i> 3. Note that I&#39;m not sure why it wouldn&#39;t be stored as 3 exactly; to my knowledge, Perl&#39;s floating point numbers should be able to."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1486259476, "post_id": 42047734, "comment_id": 71268288, "body": "Oh, wait, I found a <a href=\"http://list.perl5-porters.narkive.com/2Z0keja9/perl-49872-bad-rounding-on-int-log\" rel=\"nofollow noreferrer\">related bug report</a>. Looks like the intermediate values of <code>log(1000)</code> and <code>log(10)</code> are causing issues. From that link: &quot;<i>the internal floating point value is actually the next representable value below 3.</i>&quot; Specifically, try printing <code>log(1000)</code> and <code>log(10)</code>; you&#39;ll notice that <code>log(1000)</code> is just barely less than <code>log(10) * 3</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1486260248, "post_id": 42047734, "comment_id": 71268427, "body": "<code>printf &quot;%.51f\\n&quot;, log(1000)&#47;log(10)</code> prints <code>2.999999999999999555910790149937383830547332763671875</code>. <code>int()</code> doesn&#39;t round, it truncates, but <code>print</code> rounds, which is why the first line prints <code>3</code>."}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 2, "creation_date": 1486260894, "post_id": 42047734, "comment_id": 71268528, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}, {"owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "edited": false, "score": 0, "creation_date": 1486262572, "post_id": 42047734, "comment_id": 71268801, "body": "I know why this happens (binary floats are not decimal floats). So I am not asking WHY it happens. I am asking HOW to tell perl to &quot;do the right thing&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486296715, "post_id": 42047734, "comment_id": 71275877, "body": "@OleTange: <i>&quot;HOW to tell perl to &#39;do the right thing&#39;&quot;</i> Remove the call to <code>int</code>."}], "answers": [{"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": true, "score": 5, "last_activity_date": 1489327917, "last_edit_date": 1489327917, "creation_date": 1486262516, "answer_id": 42048026, "question_id": 42047734, "link": "https://stackoverflow.com/questions/42047734/perl-log-rounding-weirdness/42048026#42048026", "title": "perl: log rounding weirdness", "body": "<p>Neither log(1000) nor log(10) can be accurately represented by a floating point number, so you end up with something a little less than 3.</p>\n\n<pre><code>$ perl -e'CORE::say sprintf \"%.20f\", log(1000)/log(10)'\n2.99999999999999955591\n</code></pre>\n\n<p>You want to round instead of truncating.</p>\n\n<p>A solution is to abuse stringification.</p>\n\n<pre><code>say int(\"\".(log(1000)/log(10)));\nsay int(\"\".(log(1000000)/log(10)));\n</code></pre>\n\n<p>Or you could use <code>sprintf</code> (slower than stringification above).</p>\n\n<pre><code>say sprintf(\"%.0f\", log(1000)/log(10));\nsay sprintf(\"%.0f\", log(1000000)/log(10));\n</code></pre>\n"}], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42048026, "answer_count": 1, "score": 1, "last_activity_date": 1489327917, "creation_date": 1486259094, "last_edit_date": 1486261873, "question_id": 42047734, "link": "https://stackoverflow.com/questions/42047734/perl-log-rounding-weirdness", "title": "perl: log rounding weirdness", "body": "<p>How can I tell perl that:</p>\n\n<pre><code>print (log(1000)/log(10).\"\\n\");\nprint int(log(1000)/log(10)).\"\\n\";\n</code></pre>\n\n<p>should both give 3 (and not 2 which the last one surprisingly gives)?</p>\n\n<p>I know why this happens (binary floats are not decimal floats). So I am not asking <em>WHY</em> it happens. I am asking <em>HOW</em> to tell perl to \"do the right thing\".</p>\n"}, {"tags": ["linux", "perl", "ssh", "cgi"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1486252197, "post_id": 42046995, "comment_id": 71266919, "body": "This is off-topic for StackOverflow.  It isn&#39;t really on-topic on any StackExchange site because we don&#39;t do homework for you."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1486260048, "post_id": 42046995, "comment_id": 71268383, "body": "Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here</a> in the Help Center. Perhaps <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a> would be a better place to ask. Also see <a href=\"http://meta.stackexchange.com/q/134306\">Where do I post questions about Dev Ops?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 6944197, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b10da3a04323c1337a04df626c87cb2?s=128&d=identicon&r=PG&f=1", "display_name": "fourth", "link": "https://stackoverflow.com/users/6944197/fourth"}, "edited": false, "score": 0, "creation_date": 1486267137, "post_id": 42047099, "comment_id": 71269459, "body": "Could you tell me what ssh-server is in my case? And what is the relationship with cgi file in my question?"}], "tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": true, "score": 1, "last_activity_date": 1486252826, "creation_date": 1486252826, "answer_id": 42047099, "question_id": 42046995, "link": "https://stackoverflow.com/questions/42046995/how-to-implement-seting-up-ssh-tunneling-to-port-here/42047099#42047099", "title": "How to implement seting up ssh tunneling to port... here?", "body": "<p>This ssh feature is called port forwarding.</p>\n\n<p>Local port forwarding listens to the port on local machine and forwards it via the connection to specified destination:</p>\n\n<pre><code>ssh -L 8118:localhost:80 ssh-server\n</code></pre>\n\n<p>In the example it forwards the port from client machine to localhost of the remote server but you can specify any destination you want. I assume the http server runs on that server.</p>\n\n<p>Remote forwarding does the opposite, i.e. listens on port on remote server and forwards via ssh to specified destination:</p>\n\n<pre><code>ssh -R 8118:localhost:80 ssh-server\n</code></pre>\n\n<p>Again, it doesn't have to be localhost. It can forward the port 8118 on ssh-server to any destination accessible from the client machine.</p>\n\n<p>Both forwardings are useful when the service is not directly accessible from the remote destination, either because of firewall, visibility or simply the service running on localhost only.</p>\n"}], "owner": {"reputation": 339, "user_id": 6944197, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b10da3a04323c1337a04df626c87cb2?s=128&d=identicon&r=PG&f=1", "display_name": "fourth", "link": "https://stackoverflow.com/users/6944197/fourth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "closed_date": 1486264390, "accepted_answer_id": 42047099, "answer_count": 1, "score": -1, "last_activity_date": 1486252826, "creation_date": 1486251981, "question_id": 42046995, "link": "https://stackoverflow.com/questions/42046995/how-to-implement-seting-up-ssh-tunneling-to-port-here", "closed_reason": "Not suitable for this site", "title": "How to implement seting up ssh tunneling to port... here?", "body": "<p>I am doing my hw on this page: <a href=\"https://www.isi.deterlab.net/file.php?file=/share/shared/Softwareexploitsexercise/index.html#dassign\" rel=\"nofollow noreferrer\">https://www.isi.deterlab.net/file.php?file=/share/shared/Softwareexploitsexercise/index.html#dassign</a></p>\n\n<p>In the second task, I don't really know how to do the following:</p>\n\n<blockquote>\n  <p>If you have set up ssh tunneling to port 80 via local port 8118 (a\n  good idea), the memo application can be accessed at\n  <a href=\"http://localhost:8118/cgi-bin/memo.cgi\" rel=\"nofollow noreferrer\">http://localhost:8118/cgi-bin/memo.cgi</a></p>\n</blockquote>\n\n<p>How to set up ssh tunneling to port 80 via local port 8118? Is that certain command in terminal? Could you tell me how to do? The whole operation should be done in shell because it is on certain platform.</p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486236408, "post_id": 42044394, "comment_id": 71262350, "body": "I wonder what <code>StevensPerlTools</code> do. :)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1486235926, "post_id": 42044550, "comment_id": 71262173, "body": "Don&#39;t do that. If you want to learn Moose, don&#39;t mess with the internals."}], "tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": false, "score": -2, "last_activity_date": 1486235883, "creation_date": 1486235883, "answer_id": 42044550, "question_id": 42044394, "link": "https://stackoverflow.com/questions/42044394/how-to-set-ro-attributes-during-build/42044550#42044550", "title": "How to set ro attributes during build?", "body": "<p>I found one possible solution, though it's frowned upon:</p>\n\n<pre><code>  # Set attributes\n  $self-&gt;{dirs}  =    \\%dirs;\n  $self-&gt;{files} =    \\%files;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486236529, "post_id": 42044552, "comment_id": 71262383, "body": "OK, thanks so much. This seems like the best way to accomplish this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486243288, "post_id": 42044552, "comment_id": 71264562, "body": "@simbabque: So every <code>ro</code> attribute <i>must</i> be given a <code>writer</code>, otherwise it will stay forever uninitialised? Also, please explain your joke above, as I appear to be exceptionally dumb tonight."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486243582, "post_id": 42044552, "comment_id": 71264637, "body": "@Borodin There used to be a <code>use StevesPerlTools;</code> line before the edit."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486243834, "post_id": 42044552, "comment_id": 71264717, "body": "@Borodin normally you initialize <code>ro</code> attributes through the constructor. <code>Foo-&gt;new( bar =&gt; 123 );</code> will set it. The point here is that some attributes get constructed during <code>BUILD</code>, which happens after the object was constructed (<code>BUILDARGS</code> is before). So if some of them are not passed in (either on purpose, by accident or because you removed the <code>init_arg</code>) and you still want to set them, you can add a <code>writer</code> for the attribute. And the <code>_</code> indicates that others should keep out. See the edit history of the question for the joke. :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1486243836, "post_id": 42044552, "comment_id": 71264719, "body": "@Borodin A <code>ro</code> attribute can be initialized through the constructor (<code>Foo-&gt;new(bar =&gt; 42)</code>), using a <code>default</code> value, or a <code>builder</code> method. If none of those apply, the attribute will <a href=\"https://metacpan.org/pod/Moose::Manual::Attributes#Predicate-and-clearer-methods\" rel=\"nofollow noreferrer\">remain unset</a>. If there is no private <code>writer</code>, yes, it will stay that way forever."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1486235898, "creation_date": 1486235898, "answer_id": 42044552, "question_id": 42044394, "link": "https://stackoverflow.com/questions/42044394/how-to-set-ro-attributes-during-build/42044552#42044552", "title": "How to set ro attributes during build?", "body": "<p>You can assign <a href=\"https://metacpan.org/pod/Class::MOP::Attribute#writer\" rel=\"nofollow noreferrer\">a <code>writer</code></a> to your read-only attribute and use that internally from your <code>BUILD</code>. Name it with an <code>_</code> to indicate it's internal.</p>\n\n<pre><code>package Foo;\nuse Moose;\n\nhas bar =&gt; ( is =&gt; 'ro', writer =&gt; '_set_bar' );\n\nsub BUILD {\n    my $self = shift;\n\n    $self-&gt;_set_bar('foobar');\n}\n\npackage main;\nFoo-&gt;new;\n</code></pre>\n\n<p>This will not throw an exception.</p>\n\n<p>It's essentially the same as making it <code>rw</code>, but now the writer is not the same accessor as the reader. The <code>_</code> indicates that it's internal, so it's less undesirable than just using <code>rw</code>. Remember that you cannot really protect anything in Perl anyway. If your user wants to get to the internals they will.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "accepted_answer_id": 42044552, "answer_count": 2, "score": 0, "last_activity_date": 1486236590, "creation_date": 1486235115, "last_edit_date": 1486236590, "question_id": 42044394, "link": "https://stackoverflow.com/questions/42044394/how-to-set-ro-attributes-during-build", "title": "How to set ro attributes during build?", "body": "<p>I'm writing a script to help me get proficient in Moose. I've got the following bit of code:</p>\n\n<pre><code>package Dir;\nuse Moose;\nuse Modern::Perl;\nuse File;\n\nhas 'dirs' =&gt;             (is =&gt; 'ro', isa =&gt; 'HashRef[Dir]' );  \nhas 'files' =&gt;            (is =&gt; 'ro', isa =&gt; 'HashRef[File]'); \nhas 'dir_class' =&gt;        (is =&gt; 'ro', isa =&gt; 'ClassName', default =&gt; 'Dir');\nhas 'file_class' =&gt;       (is =&gt; 'ro', isa =&gt; 'ClassName', default =&gt; 'File');\n\nsub BUILD {\n  my $self = shift;\n  my $path = $self-&gt;path;\n  my $name = $self-&gt;name;\n  my (%dirs, %files);\n\n  # populate dirs attribute with LaborData::Data::Dir objects\n  opendir my $dh, $path or die \"Can't opendir '$path': $!\";\n\n  # Get files and dirs and separate them out\n  my @dirs_and_files = grep { ! m{^\\.$|^\\.\\.$} } readdir $dh;\n  closedir $dh or die \"Can't closedir '$path': $!\";\n  my @dir_names         = grep { -d \"$path/$_\" } grep { !m{^\\.}  } @dirs_and_files;\n  my @file_names        = grep { -f \"$path/$_\" } grep { !m{^\\.}  } @dirs_and_files;\n\n  # Create objects\n  map { $dirs{$_}         = $self-&gt;dir_class-&gt;new  ( path =&gt; $path . '/' . $_ ) } @dir_names;\n  map { $files{$_}        = $self-&gt;file_class-&gt;new ( path =&gt; $path . '/' . $_ ) } @file_names;\n\n  # Set attributes\n  $self-&gt;dirs         ( \\%dirs );\n  $self-&gt;files        ( \\%files );\n}\n</code></pre>\n\n<p>The code results in the following error: <code>died: Moose::Exception::CannotAssignValueToReadOnlyAccessor (Cannot assign a value to a read-only accessor at reader Dir::dirs</code></p>\n\n<p>To get around this error, I could either make the attributes <code>rw</code> or use <code>builder</code> methods for the <code>dirs</code> and <code>files</code> attributes. The former solution is undesirable and the latter solution will require duplication of code (for example, the directory will need to be opened twice) and so is also undesirable.</p>\n\n<p>What is the best solution to this problem?</p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1486219731, "post_id": 42041456, "comment_id": 71256688, "body": "Don&#39;t use <code>map</code> in void context. That&#39;s just a <code>for</code> loop."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486219776, "post_id": 42041456, "comment_id": 71256700, "body": "Where do <code>$path</code> and <code>@file_names</code> come from?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486220065, "post_id": 42041456, "comment_id": 71256791, "body": "<code>$path</code> is an argument passed to the constructor. <code>@file_names</code> is just an array of file names inside the directory. I&#39;ve removed all code not pertinent to the question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1486220142, "post_id": 42041456, "comment_id": 71256820, "body": "You&#39;ve removed too much. I don&#39;t understand what your class is supposed to do."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486220318, "post_id": 42041456, "comment_id": 71256869, "body": "You can see more of it here: <a href=\"http://stackoverflow.com/questions/42035292/perl-moose-attribute-only-getting-set-when-mentioned-in-build-subroutine/42035678\" title=\"perl moose attribute only getting set when mentioned in build subroutine\">stackoverflow.com/questions/42035292/&hellip;</a> This code is slighly older, though."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486220582, "post_id": 42041456, "comment_id": 71256951, "body": "Why don&#39;t you put the initialization code for <code>files</code> into a <code>builder</code> method? Then you could override it in a subclass."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486221221, "post_id": 42041456, "comment_id": 71257149, "body": "I&#39;m afraid I don&#39;t follow."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1486221464, "post_id": 42041456, "comment_id": 71257242, "body": "<code>has &#39;files&#39; =&gt; (is =&gt; &#39;ro&#39;, lazy =&gt; 1, builder =&gt; &#39;_build_files&#39;); sub _build_files { ... return { map +($_ =&gt; File-&gt;new ( path =&gt; $path . &#39;&#47;&#39; . $_ )), @file_names }; }</code> and then a subclass can define its own <code>sub _build_files</code>."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486221574, "post_id": 42041456, "comment_id": 71257290, "body": "Ah, I see now. I&#39;ll give it a shot. Thanks!"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486222588, "post_id": 42041456, "comment_id": 71257606, "body": "What is the <code>+</code> in front of the parentheses doing?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1486223715, "post_id": 42041456, "comment_id": 71257920, "body": "Semantically nothing, but syntactically it separates <code>map</code> from the <code>(</code> that would otherwise be interpreted as the beginning of a function call, but I want it to be part of the argument. Similar to <code>print (2 + 3) * 4</code> (prints 5, multiplies print&#39;s return value by 4) vs. <code>print +(2 + 3) * 4</code> (prints 20)."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486225840, "post_id": 42041456, "comment_id": 71258611, "body": "OK, your suggestion was too much work. I found a different route by adding a new attribute: <code>has &#39;file_class&#39; =&gt; (is =&gt; &#39;ro&#39;, isa =&gt; &#39;ClassName&#39;, default =&gt; &#39;File&#39;);</code> And now my code that sets the <code>files</code> attribute is this: <code>map { $files{$_}        = $self-&gt;file_class-&gt;new ( path =&gt; $path . &#39;&#47;&#39; . $_ ) } @file_names;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486242031, "post_id": 42042957, "comment_id": 71264203, "body": "I guess this was downvoted because you still use the <code>map</code> in a weird way. The approach with the class is fine. It&#39;s very extendable. But you should really get rid of that <code>map</code> and just do <code>$files{$_} = $self-&gt;file_class-&gt;new( ... ) for @file_names;</code>. It&#39;s more readable and it&#39;s not using a function that returns a value in void context."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486257281, "post_id": 42042957, "comment_id": 71267907, "body": "I&#39;m crushed. Not sure how I can go on with life now."}], "tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": false, "score": 0, "last_activity_date": 1486227140, "creation_date": 1486227140, "answer_id": 42042957, "question_id": 42041456, "link": "https://stackoverflow.com/questions/42041456/extending-a-moose-class-to-enable-use-of-different-classes-internally/42042957#42042957", "title": "Extending a Moose class to enable use of different classes internally", "body": "<p>I found a good solution by adding a new attribute:</p>\n\n<pre><code>has 'file_class' =&gt; (is =&gt; 'ro', isa =&gt; 'ClassName', default =&gt; 'File');\n</code></pre>\n\n<p>And now my code that sets the <code>files</code> attribute is this:</p>\n\n<pre><code>map { $files{$_} = $self-&gt;file_class-&gt;new ( path =&gt; $path . '/' . $_ ) } @file_names;\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486227140, "creation_date": 1486218212, "question_id": 42041456, "link": "https://stackoverflow.com/questions/42041456/extending-a-moose-class-to-enable-use-of-different-classes-internally", "title": "Extending a Moose class to enable use of different classes internally", "body": "<p>I'm fairly new to Moose and OO programming. Looking for some guidance. I've got the following <code>Dir</code> Moose class that builds a listing of <code>File</code> objects:</p>\n\n<pre><code>#!usr/bin/perl\npackage Dir;\nuse Moose;\nuse Modern::Perl;\n\nhas 'files' =&gt;            (is =&gt; 'rw', isa =&gt; 'HashRef[File]' ); \n\n&lt;..&gt;\n\nsub BUILD {\n  my $self = shift;\n\n&lt;..&gt;\n\n map { $files{$_} = File-&gt;new ( path =&gt; $path . '/' . $_ ) } @file_names;\n $self-&gt;files ( \\%files );\n\n&lt;..&gt;\n}\n</code></pre>\n\n<p>I'm trying to write a new class called <code>MyDir</code> that <code>extends</code> the <code>Dir</code> class above. However, instead of creating <code>File</code> class objects, I want to use specialized objects that extends <code>File</code> objects:</p>\n\n<pre><code>#!usr/bin/perl\npackage MyDir;\nuse Moose;\nuse Modern::Perl;\n\nhas 'type' =&gt;  (is =&gt; 'ro', isa =&gt; 'Str', default =&gt; '');\nhas 'files' =&gt; (is =&gt; 'rw', isa =&gt; 'HashRef[MyFile]' );\n</code></pre>\n\n<p>I'm thinking Moose probably has way to do this without rewriting the <code>BUILD</code> subroutine but I'm unsure of how to implement this.</p>\n"}, {"tags": ["perl", "hash", "hashtable"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1486218646, "post_id": 42041336, "comment_id": 71256330, "body": "I think you have to pass <code>$self</code> yes. That is, if you are calling methods from another method within the same class. Usually you would have a blessed object reference when you call methods ( using the syntax <code>$obj-&gt;method( ... )</code> ) from outside the class itself, then you do not need to pass <code>$self</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486228897, "post_id": 42041336, "comment_id": 71259630, "body": "You need to show the calling method. Where do <code>$macroName</code> and <code>$ws1</code> come from?"}, {"owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "edited": false, "score": 0, "creation_date": 1486232104, "post_id": 42041336, "comment_id": 71260828, "body": "<code>$macroName</code> and <code>$ws1</code> are results of parsing the input file.   In this case, <code>$macroName</code> would be <code>strip</code>, and <code>$ws1</code> is the whitespace following <code>strip</code>.   (Ok, technically in a makefile, <code>strip</code> is a function rather than a macro, but I&#39;m trying to keep the naming consistent with the C counterparts in the program)."}, {"owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486232385, "post_id": 42041336, "comment_id": 71260929, "body": "Ok, thanks @H&#229;konH&#230;gland, the <code>$self</code> parameter works, so if it doesn&#39;t stick out as bad coding practice, I&#39;ll use that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1486244554, "post_id": 42041336, "comment_id": 71264942, "body": "I would prefer to see <code>my $method = $makefileMacroSimplifiers{$macroName}</code> followed by <code>$self-&gt;$method( $macroName.$ws1, \\@parms )</code>. Also note that the hash values may be method identifiers as simple strings instead of references to subroutines."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486245559, "post_id": 42041336, "comment_id": 71265235, "body": "@simbabque: I was writing in response to the OP, who says that they are going to use &quot;the <code>$self</code> parameter&quot;, which I take to mean the call as it appears in the question which isn&#39;t a method call at all. I wanted to clarify that <code>$self-&gt;$makefileMacroSimplifiers{$macroName}($macroName.$ws1&zwnj;&#8203;, \\@parms)</code> won&#39;t work, as the method must be a simple scalar, or a bareword. I would have written an answer myself if I had thought yours didn&#39;t suffice. I&#39;m sorry if you feel I have subverted your solution; it wasn&#39;t my intention."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486245662, "post_id": 42041336, "comment_id": 71265264, "body": "@Borodin not at all. It&#39;s a useful comment. I was just confused there for a moment. I was pretty sure that it wouldn&#39;t work for exactly the reason you gave, I just couldn&#39;t try without my computer. Your explanation it good. It should stay. I&#39;ll reference it in my answer. :)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486225994, "post_id": 42042735, "comment_id": 71258660, "body": "This might not work with the hash though. I&#39;m not near a computer so I can&#39;t confirm right  now."}, {"owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "edited": false, "score": 0, "creation_date": 1486304600, "post_id": 42042735, "comment_id": 71278344, "body": "Ok, thanks.  I&#39;ve updated my code to do things this way.   I appreciate the comments."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1486245709, "last_edit_date": 1495535370, "creation_date": 1486225952, "answer_id": 42042735, "question_id": 42041336, "link": "https://stackoverflow.com/questions/42041336/perl-call-method-from-hash/42042735#42042735", "title": "perl -- call method from hash", "body": "<p>You can also call a code ref on an object. That way the thing on the left will be passed in. </p>\n\n<pre><code>my $coderef = sub { ... };\n$self-&gt;$coderef(@args);\n</code></pre>\n\n<p>Using a hash element does not work like this.</p>\n\n<blockquote>\n<pre><code> $self-&gt;$dispatch{foo}(1, 2, 3); # BOOM\n</code></pre>\n</blockquote>\n\n<p>This is a syntax error. So you need to grab the code reference first. <a href=\"https://stackoverflow.com/questions/42041336/perl-call-method-from-hash?noredirect=1#comment71264942_42041336\">Borodin also explains this above in their comment</a>.</p>\n\n<pre><code>my %dispatch = (\n    foo =&gt; sub { print \"@_\" },\n);\n\nrequire HTTP::Request;\nmy $obj = HTTP::Request-&gt;new;\nmy $method = $dispatch{foo};\n$obj-&gt;$method(1, 2, 3);\n</code></pre>\n\n<p>I've used HTTP::Request here as an example of an arbitrary class/object.</p>\n"}], "owner": {"reputation": 434, "user_id": 2766918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b30ed3dc92a395952309d65497b3b872?s=128&d=identicon&r=PG&f=1", "display_name": "user2766918", "link": "https://stackoverflow.com/users/2766918/user2766918"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 42042735, "answer_count": 1, "score": 1, "last_activity_date": 1486245709, "creation_date": 1486217533, "question_id": 42041336, "link": "https://stackoverflow.com/questions/42041336/perl-call-method-from-hash", "title": "perl -- call method from hash", "body": "<p>I have a hash table of methods:</p>\n\n<pre><code>my %makefileMacroSimplifiers = (\n    \"or\" =&gt;         \\&amp;makefileSimplifyOr,\n    \"and\" =&gt;        \\&amp;makefileSimplifyAnd,\n    \"strip\" =&gt;      \\&amp;makefileSimplifyStrip,\n);\n\nsub makefileSimplifyStrip {\n    my $self = shift;\n    my $prefix = shift;\n    my $paramsRef = shift;\n...\n}\n</code></pre>\n\n<p>where each method requires <code>$self</code>.  What I have is:</p>\n\n<pre><code>$makefileMacroSimplifiers{$macroName}-&gt;($self, $macroName.$ws1, \\@parms);\n</code></pre>\n\n<p>This seems to work, but it seems a bit odd to me to explicitly pass in <code>$self</code> to a method.  Is there a better way of doing this, or is this considered a normal coding practice?  (I didn't find any better ways to do this on the web, but I thought I would ask in case I'm not using the right search criteria).</p>\n"}, {"tags": ["perl", "variables", "argv"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1486217571, "post_id": 42041170, "comment_id": 71255973, "body": "You could try use a hash, for example: <code>perl -E &#39;%input_map = ( yes =&gt; 1, no =&gt; 0 ); say $input_map{ +shift }&#39; yes</code>"}, {"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486217884, "post_id": 42041170, "comment_id": 71256066, "body": "The perl -E is running it from the command line. How can I write this in my script as an ARGV?  The variable is being passed from another script and I&#39;m doing something a tad more complex that just yes or no in the perl script. I&#39;m just using this as an example for security reasons.  If I know how to take an ARGV value and check it against a list of preset values, so the output is the preset value, then I&#39;m good to go from there."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486219002, "post_id": 42041170, "comment_id": 71256436, "body": "Hi Alby. The <code>shift</code> in my example is a shortcut for <code>shift @ARGV</code>"}, {"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486299054, "post_id": 42041170, "comment_id": 71276602, "body": "Can somebody please vote up my question? I have received -2 and that has hurt my ability to post future questions. I have no idea what I&#39;ve done wrong or how to correct it."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1486300485, "post_id": 42041170, "comment_id": 71277078, "body": "Hi Alby. I am not sure what more information you need to solve your problem. But feel free to contact me by email for further assistance :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486320482, "post_id": 42041170, "comment_id": 71284016, "body": "@Alby, People are just tired of telling people <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">Why it&#39;s stupid to `use a variable as a variable name&#39;</a> &quot;every single day&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1486338193, "last_edit_date": 1486338193, "creation_date": 1486320633, "answer_id": 42055882, "question_id": 42041170, "link": "https://stackoverflow.com/questions/42041170/variable-choices-based-on-argv/42055882#42055882", "title": "Variable Choices based on ARGV", "body": "<p>So you want to look up one value based on another. To do that, a hash is usually the tool to use.</p>\n\n<pre><code>my %yes_no_to_bool = (\n   yes =&gt; 1,\n   no  =&gt; 0,\n);\n\n@ARGV == 1\n   or die(\"usage\\n\");\n\nmy ($arg) = @ARGV;\n\nexists($yes_no_to_bool{$arg})\n   or die(\"usage\\n\");\n\nmy $bool = $yes_no_to_bool{$arg};\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486338193, "creation_date": 1486216393, "last_edit_date": 1486217609, "question_id": 42041170, "link": "https://stackoverflow.com/questions/42041170/variable-choices-based-on-argv", "title": "Variable Choices based on ARGV", "body": "<p>I have an input ARGV value from a bash script that is either (yes) or (no).\nI need (yes) or (no) to equal a numerical value (1) or (0) and the output\nbased on that ARGV value to be the numerical value.</p>\n\n<p>My attempt is getting something like this to work:  script.pl yes &amp;</p>\n\n<pre><code>my $VAR1=         $ARGV[0];\nmy $yes=1;\nmy $no=0;\nprint $VAR1;\n</code></pre>\n\n<p>Output of the print is: 1 (not the word yes)</p>\n\n<p>Sorry my example seems obviously silly because $VAR1 is obviously whatever I used as the ARG value. So what I'm looking to do is take an ARGV and check it against a list of preset values and then output the value of that preset.</p>\n\n<p>Thanks,</p>\n\n<p>** I'm a perl noob. My apology if I'm not explaining this correctly.</p>\n"}, {"tags": ["perl", "if-statement", "multidimensional-array"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486203171, "post_id": 42038894, "comment_id": 71251788, "body": "Are you looking for a more readable way, for a shorter way or for a faster at run-time way?"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486203244, "post_id": 42038894, "comment_id": 71251820, "body": "run-time would be best, if this is the best then readable for sure. A way to have a conditional matrix would be sick action tho."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486203334, "post_id": 42038894, "comment_id": 71251842, "body": "For one thing, you can spread your condition over multiple lines to improve readability. And any <code>for</code> loop starting from <code>0</code> with a <code>&lt;=</code> in the condition makes me nervous."}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486203516, "post_id": 42038894, "comment_id": 71251905, "body": "@melpomene what&#39;s the risk in that? Also I was betting that someone would call the variable being declared in the for loop... I lost the bet."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486203638, "post_id": 42038894, "comment_id": 71251950, "body": "Well, a loop from <code>0</code> to <code>&lt;= 6</code> iterates 7 times. Usually I see <code>&lt; 7</code> to express this. <code>&lt;=</code> often indicates an off-by-one bug."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1486203677, "post_id": 42038894, "comment_id": 71251969, "body": "I&#39;d actually use a <code>foreach my $i ( 3 .. 6 )</code> which is more natural to read."}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1486203862, "post_id": 42038894, "comment_id": 71252026, "body": "@melpomene I do that so I see the max value of the index. I&#39;ll have to try what simbabque suggested."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1486203923, "post_id": 42038894, "comment_id": 71252049, "body": "@simbabque True, iterating directly over a range is the best solution. (Personally I find <code>for my $i (3 .. 6)</code> slightly more natural because &quot;for my i&quot; is valid English whereas &quot;for each my i&quot; is not, but I don&#39;t care much either way.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486204034, "post_id": 42038894, "comment_id": 71252081, "body": "I&#39;ve tidied your <code>if</code> statement to make it more readable and wonder if the values are correct. You have <code>$matrix[2][4][0]</code> in there twice and <code>$matrix[4][3][0]</code> three times. Is there an algorithm that says which cells need to be tested?"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486204238, "post_id": 42038894, "comment_id": 71252142, "body": "@Borodin it&#39;s true i just copypasta the conditional and modified it real quick. The logic that follows the comment &quot;set some values for matrix&quot; is the logic to build the conditional matrix."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486204833, "post_id": 42038894, "comment_id": 71252282, "body": "@UpTide: Okay, but you&#39;re sure about those loops? It&#39;s clear that the first two <code>for</code> loops can be combined as <code>for (my $j = 0; $j&lt;=6; $j++) { ... }</code> and similarly the third and fourth <code>for</code> loops. Was there a reason to split these up?"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486204933, "post_id": 42038894, "comment_id": 71252312, "body": "@Borodin yeah. when I was changing the for loops to the new syntax, I spotted that. Should be corrected now. <code>$matrix[3][3][0 .. 2]</code> should be 0"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486205013, "post_id": 42038894, "comment_id": 71252331, "body": "@UpTide: &quot;the new syntax&quot;?"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486205113, "post_id": 42038894, "comment_id": 71252361, "body": "@borodin <code>for (my $i = 0; $i &lt;= 2; $i++) {}</code> to <code>for my $i (0 .. 2) {}</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1486205226, "post_id": 42038894, "comment_id": 71252397, "body": "@UpTide: Ah. Got you. My copy of your question hadn&#39;t refreshed. You know you can write <code>for my $j (0..2, 4..6) { ... }</code> right?"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486205555, "post_id": 42038894, "comment_id": 71252489, "body": "@Borodin u rockin my world right now."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486206071, "post_id": 42039181, "comment_id": 71252642, "body": "I may be slightly retarded, where are these helper functions?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486207862, "post_id": 42039181, "comment_id": 71253146, "body": "@UpTide they are documented in Test::Deep. Stuff like <code>ignore</code>, <code>bag</code> and so on. Just go through the docs. This thing is meant for unit tests, so it gives a lot of freedom and you can build very specific comparisons."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1486203609, "creation_date": 1486203609, "answer_id": 42039181, "question_id": 42038894, "link": "https://stackoverflow.com/questions/42038894/simplifying-conditional-statement-perl/42039181#42039181", "title": "Simplifying Conditional Statement [Perl]", "body": "<p>One way to make it <strong>more readable</strong> (but not faster) is to use <code>eq_deeply</code> from <a href=\"https://metacpan.org/pod/Test::Deep\" rel=\"nofollow noreferrer\">Test::Deep's</a> <a href=\"https://metacpan.org/pod/Test::Deep::NoTest\" rel=\"nofollow noreferrer\">Test::Deep::NoTest</a>.</p>\n\n<p>You pass it two data structures and it tells you if they are equal. And if you only know half of what the structure should be like, you can use the nifty helper functions that let you ignore parts of it.</p>\n\n<pre><code>use Test::Deep::NoTest;\n\nmy $equal = eq_deeply( $matrix,\n    [\n        [\n            [ 1, 0, ],\n            [ 0, 0, ],\n        ],\n        [\n            [ 1, 1, ],\n            [ 0, 1, ],\n        ],\n        [\n            [ 1, 1, ],\n            [ 0, 1, ],\n        ],\n    ]\n);\n\nif ($equal) {\n    # ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486206337, "post_id": 42039563, "comment_id": 71252730, "body": "what is <code>$$_</code> in <code>if ( all { $$_ == 1 } @cells)</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486206451, "post_id": 42039563, "comment_id": 71252765, "body": "@UpTide: It&#39;s the same as in <code>$$_ = 1 for @cells</code> above. Both <code>for</code> and <code>all</code> set <code>$_</code> to each reference in <code>@cells</code> in turn, and <code>$$_</code> dereferences <code>$_</code> as a scalar. In the <code>for</code> loop it&#39;s assigned to, and in <code>all</code> it&#39;s compared with 1."}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486206870, "post_id": 42039563, "comment_id": 71252874, "body": "using the _ scares me (because I don&#39;t know what it references when it&#39;s used, like what makes the <code>$$_</code> pull from <code>@cells</code> and not something else). Is there another way to do this?"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 2, "creation_date": 1486207597, "post_id": 42039563, "comment_id": 71253057, "body": "so if someone else doesn&#39;t know what <code>$$_</code> means; because <code>@cells</code> is an array of references <code>$_</code> would be the reference, not the value. <code>$$_</code> gets the value of the reference. (at least that&#39;s how I&#39;m understanding it)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486208366, "post_id": 42039563, "comment_id": 71253305, "body": "@UpTide: That&#39;s right. And you won&#39;t get far in Perl if you avoid <code>$_</code>! <code>for</code> sets the context, so <code>$_</code> can only ever be elements of <code>@cells</code> there."}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486208492, "post_id": 42039563, "comment_id": 71253337, "body": "why is it pulling from <code>@cells</code> and not something else?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486208839, "post_id": 42039563, "comment_id": 71253417, "body": "Because that&#39;s what you&#39;ve written. <code>for @cells</code> sets <code>$_</code> to each element of the array in turn. The same applies to <code>all</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486208904, "post_id": 42039563, "comment_id": 71253433, "body": "<i>&quot;if I need to not check index 1 in the third dimension how would I do this?&quot;</i> For this answer you would just build <code>@cells</code> differently, using <code>push @cells, \\$matrix[$i][4][$_] for 0, 2</code> (instead of <code>0 .. 2</code>)"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486209855, "post_id": 42039563, "comment_id": 71253735, "body": "Doesn&#39;t it collide with @_ in subroutines? It seems so odd <code>sub foo { my @test = (&quot;boop&quot;); print $test[$_[$_]] for (0);}</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486210585, "post_id": 42039563, "comment_id": 71253962, "body": "@UpTide: This is pretty fundamental to Perl. <code>$_</code> and <code>@_</code> are completely separate variables, just like <code>$x</code> and <code>@x</code>. An element of array <code>@x</code> is a scalar, so it uses a dollar as well as an index, so the first element of <code>@x</code> is <code>$x[0]</code>. All of this is explained in Perl&#39;s excellent documentation <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\"><code>perldoc perldata</code></a>"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486212027, "post_id": 42039563, "comment_id": 71254404, "body": "I used your pushing references into <code>@cells</code> then I check <code>@cells</code> with <code>for my $element (@cells) {if ($$element == 1)  {print &quot;works.&quot;;}}</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486212932, "post_id": 42039563, "comment_id": 71254656, "body": "@UpTide: That&#39;s different from your original code. It will print <code>works.</code> 36 times -- once for each element of <code>@cells</code>. Why don&#39;t you like to use <code>all</code>?"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486637631, "post_id": 42039563, "comment_id": 71435815, "body": "avoiding <code>use List::Util &#39;all&#39;;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486640477, "post_id": 42039563, "comment_id": 71437654, "body": "@UpTide: I don&#39;t understand. You don&#39;t want to use <code>all</code> because you want to avoid the <code>use</code> statement?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1486206056, "creation_date": 1486206056, "answer_id": 42039563, "question_id": 42038894, "link": "https://stackoverflow.com/questions/42038894/simplifying-conditional-statement-perl/42039563#42039563", "title": "Simplifying Conditional Statement [Perl]", "body": "<p>I suggest that you build an array of references to all the matrix elements in the subset. Then you can both set and test them in simple <code>for</code> loops</p>\n\n<p>Here my array of references is called <code>@cells</code>. I've also used the <code>all</code> function from <a href=\"https://metacpan.org/pod/List::Util\" rel=\"nofollow noreferrer\"><code>List::Util</code></a>, which allows all the tests to be made in a single call, and will short-circuit as soon as any test fails</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'all';\n\nmy @matrix;\nmy @cells;\n\n# Initialise the matrix to all zeroes\n\nfor my $i (0 .. 6) {\n    for my $j (0 .. 6) {\n        for my $k  (0 .. 2) {\n            $matrix[$i][$j][$k] = 0;\n        }\n    }\n}\n\n# Build an array of references to a subset of the cells\n#\nfor my $i ( 0 .. 2, 4 .. 6 ) {\n    push @cells, \\$matrix[$i][4][$_] for 0 .. 2;\n}\n\nfor my $j ( 0 .. 2, 4 .. 6 ) {\n    push @cells, \\$matrix[4][$j][$_] for 0 .. 2;\n}\n\n$$_ = 1 for @cells; # Set all the cells in the subset to 1\n\n# Test that all cells in the subset are == 1\n#\nif ( all { $$_ == 1 } @cells ) {\n    print \"It worked\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486207268, "post_id": 42039646, "comment_id": 71252970, "body": "This doesn&#39;t result in the same list of array elements as the OP&#39;s code. Your code examines 42 elements whereas the OP&#39;s looks as 36."}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486207280, "post_id": 42039646, "comment_id": 71252974, "body": "Does that check if each entry in the third dimension is 1? Making <code>@matrix</code> to be able to pass the conditional is just for testing. When I use the conditional I can&#39;t assume that <code>@matrix[0][0][0] = @matrix[0][0][1] = @matrix[0][0][2]</code>"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1486207617, "post_id": 42039646, "comment_id": 71253066, "body": "Borodin, OP&#39;s code was different when originally posted. I&#39;ve amended my answer."}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486207871, "post_id": 42039646, "comment_id": 71253149, "body": "@Joshua can you link me the cpan for <code>all</code>? Either Strawberry Perl doesn&#39;t have it, or I just need to reference it."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1486208025, "post_id": 42039646, "comment_id": 71253197, "body": "The module is <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\"><code>List::MoreUtils</code></a> &lt;-- click"}, {"owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "edited": false, "score": 0, "creation_date": 1486208265, "post_id": 42039646, "comment_id": 71253275, "body": "@Joshua if I need to not check index 1 in the third dimension how would I do this? as in change the condition so this is fine:<code>@matrix[1][4][1] = 0</code>"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1486208909, "post_id": 42039646, "comment_id": 71253435, "body": "It could be done, but it can get messy for other conditionals. I have only solved the most simplest of conditionals (ie, are all rows/columns in a given dimension equal to some number). If you have more complex conditionals to check, simbabque&#39;s answer might be better. I&#39;d also guess there might already be some good modules on CPAN that make multi-dimensional matrix operations easier."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 1, "last_activity_date": 1486208943, "last_edit_date": 1486208943, "creation_date": 1486206681, "answer_id": 42039646, "question_id": 42038894, "link": "https://stackoverflow.com/questions/42038894/simplifying-conditional-statement-perl/42039646#42039646", "title": "Simplifying Conditional Statement [Perl]", "body": "<p>Using a <code>map</code> and <code>all</code> from <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow noreferrer\"><code>List::MoreUtils</code></a> (or <a href=\"https://metacpan.org/pod/List::AllUtils\" rel=\"nofollow noreferrer\"><code>List::AllUtils</code></a>), you could shorten the conditional to this:</p>\n\n<pre><code>use List::MoreUtils 'all';\n\nif ( all { $_ == 1 } map { @{ $matrix[$_][4] }, @{ $matrix[4][$_] } } 0..2, 4..6 ) { \n    say \"It worked!\";\n}\n</code></pre>\n\n<p>If you're not familiar with maps and dereferencing syntax in perl, it can look a little confusing. The <code>map</code> creates a list of the entries from <code>matrix[0..2,4..6][4]</code> and <code>matrix[4][0..2,4..6]</code>. All those values then get passed to the <code>all</code> block which checks that all values received are equal to 1.</p>\n\n<p>Because <code>matrix[n][n]</code> would return an ARRAY ref, you have to dereference it, eg. <code>@{ $array_ref }</code></p>\n"}], "owner": {"reputation": 199, "user_id": 4199229, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0ac51ff21440bacfd96908282ccea677?s=128&d=identicon&r=PG&f=1", "display_name": "UpTide", "link": "https://stackoverflow.com/users/4199229/uptide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 42039563, "answer_count": 3, "score": 1, "last_activity_date": 1486208943, "creation_date": 1486201804, "last_edit_date": 1486205680, "question_id": 42038894, "link": "https://stackoverflow.com/questions/42038894/simplifying-conditional-statement-perl", "title": "Simplifying Conditional Statement [Perl]", "body": "<p>I have a 3d matrix and I need to check if several elements equals a value (target value could be different for each element in the future).</p>\n\n<p>Is there any way to simplify the if conditional at the end? I am hoping there would be some way to setup a 'conditional' matrix and compare them while ignoring elements that don't matter in the condition.</p>\n\n<p>Any hints?</p>\n\n<p>currently my code is:</p>\n\n<pre><code>use warnings;\nuse strict;\n\n#fancy matrix\nmy @matrix; \n\n#set to a blank 3d test matrix\nfor my $i (0 .. 6) {\n    for my $j (0 .. 6) {\n        for my $k  (0 .. 2) {\n            $matrix[$i][$j][$k] = 0;\n        }\n    }\n}\n\n#set some values for matrix\n\nfor my $j (0..2, 4..6) {\n    my $i = 4;\n    for my $k  (0 .. 2) {\n        $matrix[$i][$j][$k] = 1;\n    }\n}\nfor my $i (0..2, 4..6) {\n    my $j = 4;\n    for my $k  (0 .. 2) {\n        $matrix[$i][$j][$k] = 1;\n    }\n}\n\n#the conditional problem child\nif ($matrix[0][4][0] == 1 and $matrix[0][4][1] == 1 and $matrix[0][4][2] == 1 and $matrix[1][4][0] == 1 and $matrix[1][4][1] == 1 and $matrix[1][4][2] == 1 and $matrix[2][4][0] == 1 and $matrix[2][4][1] == 1 and $matrix[2][4][2] == 1 and $matrix[4][4][0] == 1 and $matrix[4][4][1] == 1 and $matrix[4][4][2] == 1 and $matrix[5][4][0] == 1 and $matrix[5][4][1] == 1 and $matrix[5][4][2] == 1 and $matrix[6][4][0] == 1 and $matrix[6][4][1] == 1 and $matrix[6][4][2] == 1 and $matrix[4][0][0] == 1 and $matrix[4][0][1] == 1 and $matrix[4][0][2] == 1 and $matrix[4][1][0] == 1 and $matrix[4][1][1] == 1 and $matrix[4][1][2] == 1 and $matrix[4][2][0] == 1 and $matrix[4][2][1] == 1 and $matrix[4][2][2] == 1 and $matrix[4][4][0] == 1 and $matrix[4][4][1] == 1 and $matrix[4][4][2] == 1 and $matrix[4][5][0] == 1 and $matrix[4][5][1] == 1 and $matrix[4][5][2] == 1 and $matrix[4][6][0] == 1 and $matrix[4][6][1] == 1 and $matrix[4][6][2] == 1) {\n    print \"it worked\";\n}\n\n&lt;stdin&gt;;\n</code></pre>\n\n<p>edit note: If the way I'm approaching it is the best (doubt it), is there at least a way to make the if condition readable (not 36 compares on a single line)?</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1486202110, "post_id": 42038073, "comment_id": 71251429, "body": "Just guessing, you&#39;ll probably need new <code>$tx</code> object. <a href=\"http://mojolicious.org/perldoc/Mojo/Transaction#is_finished\" rel=\"nofollow noreferrer\">mojolicious.org/perldoc/Mojo/Transaction#is_finished</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1486299269, "post_id": 42042210, "comment_id": 71276679, "body": "I better will build <code>req</code> object, then put it into <code>tx</code> and reuse that <code>req</code> if required. Looking into code <code>build_tx</code> do work with <code>req</code> so it is better to name it as <code>build_req</code>... it will be more handy"}], "tags": [], "owner": {"reputation": 21, "user_id": 7516038, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/aba01d313daf24ef6e4742c7932704df?s=128&d=identicon&r=PG", "display_name": "user7516038", "link": "https://stackoverflow.com/users/7516038/user7516038"}, "is_accepted": false, "score": 2, "last_activity_date": 1486222748, "creation_date": 1486222748, "answer_id": 42042210, "question_id": 42038073, "link": "https://stackoverflow.com/questions/42038073/why-i-can-not-repeat-request-with-mojouseragent/42042210#42042210", "title": "Why I can not repeat request with Mojo::UserAgent?", "body": "<p>Mojo ua tx is not reusable so create new one.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1486222748, "creation_date": 1486195889, "question_id": 42038073, "link": "https://stackoverflow.com/questions/42038073/why-i-can-not-repeat-request-with-mojouseragent", "title": "Why I can not repeat request with Mojo::UserAgent?", "body": "<p>I create <code>$tx</code> object as:</p>\n\n<pre><code>my $tx =  $self-&gt;ua-&gt;build_tx( $method, ... );\n</code></pre>\n\n<p>Then request:</p>\n\n<pre><code>my $res =  $self-&gt;ua-&gt;start( $tx )-&gt;res;\n</code></pre>\n\n<p>I got right response, but when I want to repeat request I get error:</p>\n\n<pre><code>my $repeat =  $self-&gt;ua-&gt;start( $tx )-&gt;res;\nCan't call method \"stream\" on an undefined value at /local/lib/perl5/Mojo/UserAgent.pm line 155.\n</code></pre>\n\n<p>Why I can not repeat request?</p>\n"}, {"tags": ["string", "perl", "variables"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1486229918, "post_id": 42037867, "comment_id": 71260023, "body": "Note: interpolation only happens in double-quoted strings, but your example is single-quoted."}, {"owner": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1486243432, "post_id": 42037867, "comment_id": 71264599, "body": "I know. the $place_holder acts like a function at that time, the 3 variables are NOT known yet. therefore NOT to be substituted.  But the $place_holder needs to be in a place where user can easily change to what they like. The rest of the substitution are hidden in functions where user do not need to change."}], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "edited": false, "score": 0, "creation_date": 1486242744, "post_id": 42038095, "comment_id": 71264413, "body": "Thank you. That certainly is one way to make it work elegantly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "edited": false, "score": 0, "creation_date": 1486246601, "post_id": 42038095, "comment_id": 71265534, "body": "@OngBengSeong  Thank you -- the points I had in mind are that it separates phases of processing for easier management (for example, precise variable names don&#39;t matter), the coderef can be passed around as needed -- and it avoids <code>eval</code>-ing user input."}, {"owner": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "edited": false, "score": 0, "creation_date": 1486267261, "post_id": 42038095, "comment_id": 71269473, "body": "what if I have 12 different set of filenames and i go with subroutine style my $file_name = sub{ }"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "edited": false, "score": 0, "creation_date": 1486268056, "post_id": 42038095, "comment_id": 71269603, "body": "@OngBengSeong  You mean this whole thing processes a file and it needs to be done for 12 different files?  You just put it all in a loop over those filenames. So for each filename the <code>my $place_holder = sub { ... };</code> is defined, (then you open the file), then you read from it doing what is in <code>while (&lt;IN&gt;)</code>.  If it is something more involved it may be a good separate question"}, {"owner": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "edited": false, "score": 0, "creation_date": 1486530116, "post_id": 42038095, "comment_id": 71379607, "body": "Hi Zdim, you&#39;ll be happy to know I know end up using a subroutine for the name like your suggestion. I&#39;ve actually tried both and after a few days, change to the subroutine version which I think is still more elegant and organized. Thank you again !!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1486198253, "last_edit_date": 1486198253, "creation_date": 1486196052, "answer_id": 42038095, "question_id": 42037867, "link": "https://stackoverflow.com/questions/42037867/perl-string-of-variable-within-a-variable/42038095#42038095", "title": "Perl : string of variable within a variable", "body": "<p>You can do it using subroutines for example, if that satisfies your criteria</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $place_holder = sub {\n    my ($file_case, $subcase, $test) = @_;    \n    return \"f${file_case}_lalal_${subcase}_${test}\";\n}\n\n# ...\n\nwhile (&lt;IN&gt;) { \n    my ($file_case, $subcase, $tset) = split;\n    #\n    #  Code to validate input\n    #\n    my $input = $place_holder-&gt;($file_case, $subcase, $tset);\n    print \"$input\\n\";\n}\n</code></pre>\n\n<p>I've used <a href=\"http://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow noreferrer\">code reference</a> with an <a href=\"http://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">anonymous subroutine</a> in anticipation of uses that may benefit from it, but for the specified task alone you can use a normal subroutine as well.</p>\n\n<p>Note that you have <code>$test</code> and <code>$tset</code>, which doesn't affect the above but may be typos.</p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "edited": false, "score": 0, "creation_date": 1486242672, "post_id": 42038343, "comment_id": 71264392, "body": "Unfortunately I&#39;ve tried that before and it doesn&#39;t work. Thank you."}, {"owner": {"reputation": 2743, "user_id": 967552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d41aaaec1b39155b16598b3fa84d121?s=128&d=identicon&r=PG", "display_name": "tuxuday", "link": "https://stackoverflow.com/users/967552/tuxuday"}, "reply_to_user": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "edited": false, "score": 0, "creation_date": 1486305243, "post_id": 42038343, "comment_id": 71278548, "body": "what error you got? If you didn&#39;t pick it, it&#39;s same as your solution. So it should work."}], "tags": [], "owner": {"reputation": 2743, "user_id": 967552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d41aaaec1b39155b16598b3fa84d121?s=128&d=identicon&r=PG", "display_name": "tuxuday", "link": "https://stackoverflow.com/users/967552/tuxuday"}, "is_accepted": false, "score": -1, "last_activity_date": 1486197928, "creation_date": 1486197928, "answer_id": 42038343, "question_id": 42037867, "link": "https://stackoverflow.com/questions/42037867/perl-string-of-variable-within-a-variable/42038343#42038343", "title": "Perl : string of variable within a variable", "body": "<p>Try <strong>eval</strong> <code>while(&lt;IN&gt;){ ($file_case, $subcase, $tset) = split; $input = eval $place_holder #### line #3 here needs to fix print \" $input \\n\"; }</code></p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1486246267, "post_id": 42045681, "comment_id": 71265431, "body": "This is what I warned about initially -- it evaluates user input. That is inherently dangerous. I don&#39;t mean only for possible bad intent, but mere typos or wrong data can get evaluated so to wreak havoc on your code. Note that this <code>eval</code>-uates content of <code>$1</code> as <i>arbitrary Perl code</i>. (Which is why I didn&#39;t mention it in my answer, despite referring to it in an early comment.) I strongly suggest not doing this, if there is another way."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486247252, "post_id": 42045681, "comment_id": 71265711, "body": "By &quot;<i>user input</i>&quot; in my previous comment, I meant also input from data. We never can be sure what is in a &quot;data&quot; file. I would add a comment that data would need to be verified extensively before <code>&#47;ee</code>, which involves <code>eval</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486247285, "post_id": 42045681, "comment_id": 71265717, "body": "It is good that you found a working solution yourself and posted it (btw, I didn&#39;t downvote it)."}], "tags": [], "owner": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "is_accepted": false, "score": 0, "last_activity_date": 1486242919, "creation_date": 1486242919, "answer_id": 42045681, "question_id": 42037867, "link": "https://stackoverflow.com/questions/42037867/perl-string-of-variable-within-a-variable/42045681#42045681", "title": "Perl : string of variable within a variable", "body": "<p>A while after I posted, I found a way to do it.</p>\n\n<p>in the ## line 3, do this:</p>\n\n<p>($input = $place_holder) =~ s/(\\${w+})/$1/eeg; </p>\n\n<p>and everything works. Yes the above tset is a typo, meant to be test. Thank for everybody's response. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1486311975, "last_edit_date": 1486311975, "creation_date": 1486246476, "answer_id": 42046247, "question_id": 42037867, "link": "https://stackoverflow.com/questions/42037867/perl-string-of-variable-within-a-variable/42046247#42046247", "title": "Perl : string of variable within a variable", "body": "<p>You may use the <a href=\"http://search.cpan.org/~neilb/String-Interpolate-0.32/lib/String/Interpolate.pm\" rel=\"nofollow noreferrer\"><code>String::Interpolate</code></a> module, like this</p>\n\n<pre><code>use String::Interpolate 'interpolate';\n\nmy $place_holder = 'f${file_case}_lalal_${subcase}_${test}';\n\n\nwhile ( &lt;IN&gt; ) {\n    my ($file_case, $subcase, $test) = split;\n\n    my $input = interpolate($place_holder);\n    print \"$input\\n\";\n}\n</code></pre>\n\n<p>The module gives access to Perl's built-in C code that performs double-quote interpolation, so it is generally fast and accurate</p>\n"}], "owner": {"reputation": 144, "user_id": 7514722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154917235685270/picture?type=large", "display_name": "Ong Beng Seong", "link": "https://stackoverflow.com/users/7514722/ong-beng-seong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 42038095, "answer_count": 4, "score": 1, "last_activity_date": 1486311975, "creation_date": 1486194230, "question_id": 42037867, "link": "https://stackoverflow.com/questions/42037867/perl-string-of-variable-within-a-variable", "title": "Perl : string of variable within a variable", "body": "<p>Here is an example of what i'm trying to do:\nI want to \"defined\" a name for the input and then when it's taken into a function, only then it will substitute all the 3 variables.</p>\n\n<pre><code>$place_holder = 'f${file_case}_lalal_${subcase}_${test}';\n</code></pre>\n\n<p>.... somewhere else in another function:</p>\n\n<p>read file containing 3 set of numbers on each line that represents the $file_case, $subcase, $test</p>\n\n<pre><code>while(&lt;IN&gt;){\n   ($file_case, $subcase, $tset) = split;\n   $input = $place_holder    #### line #3 here needs to fix\n   print \" $input \\n\";\n}\n</code></pre>\n\n<p>Unfortunately, it prints out f${file_case}<em>lalal</em>${subcase}_${test} for every single line. I want those variables to be substituted. How do I do that, how \ndo I change line #3 to be able to output as i wanted ? I don't want to defined the input name in the subroutine, it has to be in the main.</p>\n"}, {"tags": ["perl", "post", "iframe", "mojolicious", "two-factor-authentication"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486202481, "post_id": 42038920, "comment_id": 71251553, "body": "There is also a module <a href=\"https://metacpan.org/pod/Net::Duo\" rel=\"nofollow noreferrer\">metacpan.org/pod/Net::Duo</a> on CPAN that is related, but it&#39;s not official. I don&#39;t know what it does as I am not familiar with <i>duo</i> at all."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1486202399, "last_edit_date": 1486202399, "creation_date": 1486201923, "answer_id": 42038920, "question_id": 42037587, "link": "https://stackoverflow.com/questions/42037587/how-to-get-argument-when-posted-to-url-using-perl-mojolicious/42038920#42038920", "title": "How to get argument when POSTed to URL using Perl (Mojolicious)", "body": "<p>It looks like this <code>sig_response</code> is just a value that's POSTed to your response handler. When you created the URL to show in the iframe, it had a <code>post_action</code> parameter. That's the endpoint in your application that handles the user coming back from the iframe.</p>\n\n<p>You need to build a route in Mojo for that. There, you need to look at the parameters you are receiving in the POST body. I don't know if it's form-data or something else, like JSON. It doesn't really say in the documentation. I suggest you dump the parameters, and if that doesn't show it, dump the whole request body.</p>\n\n<p>Once you have that <code>sig_response</code> parameter, you need to call <a href=\"https://github.com/duosecurity/duo_perl/blob/master/DuoWeb.pm#L144\" rel=\"nofollow noreferrer\">the <code>verify_response</code> function</a> that duo's library provides and look at the return value.</p>\n\n<p>If you have not done it yet, get the SDK at <a href=\"https://github.com/duosecurity/duo_perl\" rel=\"nofollow noreferrer\">https://github.com/duosecurity/duo_perl</a>. It's not a full distribution. You can either clone the whole thing or just download the pm file from their github and put it in the <code>lib</code> directory of your application. Then <code>use</code> it like you would any other module. Since it doesn't export anything, you need to use the fully qualified name to call the <code>verify_response</code> function.</p>\n\n<p>The whole thing might look something like this untested code:</p>\n\n<pre><code>post '/duo_handler' =&gt; sub {\n    my $c = shift;\n\n    my $sig_request = $c-&gt;param('sig_response');\n    my $user = DuoWeb::verify_response($ikey, $skey, $akey, $sig_request);\n    if ($user) { \n        # logged in\n    } else {\n        # not logged in\n    }\n};\n</code></pre>\n\n<hr>\n\n<p><sub>Disclaimer: I don't know this service. I have only quickly read the documentation you linked, and taken a look at their Perl SDK, which they should really put on CPAN.</sub></p>\n"}], "owner": {"reputation": 11, "user_id": 4446764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354a8ff1feaea2a1ce92681ab1158b9b?s=128&d=identicon&r=PG&f=1", "display_name": "NF1", "link": "https://stackoverflow.com/users/4446764/nf1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486202399, "creation_date": 1486191984, "question_id": 42037587, "link": "https://stackoverflow.com/questions/42037587/how-to-get-argument-when-posted-to-url-using-perl-mojolicious", "title": "How to get argument when POSTed to URL using Perl (Mojolicious)", "body": "<p>I am setting up duo two-factor authentication in a perl web application (using mojolicious). I am new to perl so this may be a simple answer.</p>\n\n<p>I have everything set up except I need to verify the response by doing the following:\n\"After the user authenticates (e.g. via phone call, SMS passcode, etc.) the IFRAME will generate a signed response called sig_response and POST it back to the post_action URL. Your server-side code should then call verify_response() to verify that the signed response is legitimate.\"</p>\n\n<p>In perl, how can you call for sig_response, is there a module? Below is in example using python: \n    <code>sig_response = self.get_argument(\"sig_response\") # for example (if using Tornado: http://www.tornadoweb.org/en/stable/documentation.html)</code></p>\n\n<p>Duo Web: <a href=\"https://duo.com/docs/duoweb\" rel=\"nofollow noreferrer\">https://duo.com/docs/duoweb</a></p>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1486170752, "post_id": 42035292, "comment_id": 71245156, "body": "strict and warnings are redundant with Modern::Perl and Moose."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486173031, "post_id": 42035292, "comment_id": 71245548, "body": "FYI, You incorrectly claim a path doesn&#39;t exist if you have no permission to its parent dir. Also, you incorrectly claim a path to a directory isn&#39;t one if you have no permission to its parent dir."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486171299, "post_id": 42035415, "comment_id": 71245249, "body": "Thanks for the advice. Yeah, this is all pretty much an exercise. Trying to learn the ropes, for the most part. But please see my edit to my original post. Something else is going on that I can&#39;t explain."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 2, "creation_date": 1486171776, "post_id": 42035415, "comment_id": 71245332, "body": "@StevieD When you say &quot;triggered the creation of the attribute&quot; how are you checking whether the attribute exists? With <code>$obj-&gt;name</code> or with <code>$obj-&gt;{name}</code>? The former is good, the latter is bad. Because the attribute is lazy, it won&#39;t exist inside the object until the accessor is used. This is a good lesson in why you don&#39;t rely on peeking inside objects."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1486171520, "last_edit_date": 1486171520, "creation_date": 1486170597, "answer_id": 42035415, "question_id": 42035292, "link": "https://stackoverflow.com/questions/42035292/perl-moose-attribute-only-getting-set-when-mentioned-in-build-subroutine/42035415#42035415", "title": "Perl Moose: Attribute only getting set when mentioned in BUILD subroutine", "body": "<p>The problem is your pattern is failing if there's a trailing slash.</p>\n\n<pre><code>my ($name) = $self-&gt;path =~ /\\/([^\\/]*)$/;\n</code></pre>\n\n<p>If <code>$self-&gt;path</code> is <code>/some/thing</code> it works. If it's <code>/some/thing/</code> it \"works\" but <code>[^\\/]*</code> happily matches an empty string. So you get no warning.</p>\n\n<p>You can put in an optional slash, and change it to match ONE or more non-slashes. Also by using alternative delimiters we can clean up all those leaning toothpicks.</p>\n\n<pre><code>my ($name) = $self-&gt;path =~ m{/ ([^/]+) /? $}x;\n</code></pre>\n\n<p>But really one shouldn't be parsing paths with regular expressions. Use one of the many built in modules like <a href=\"https://metacpan.org/pod/File::Basename\" rel=\"nofollow noreferrer\">File::Basename</a> or <a href=\"https://metacpan.org/pod/File::Spec\" rel=\"nofollow noreferrer\">File::Spec</a></p>\n\n<pre><code>return basename($self-&gt;path);\n</code></pre>\n\n<hr>\n\n<p>Some side notes.</p>\n\n<p>Moose is very slow to start up and is best suited for long running processes like web servers. For something as generic as a File and Dir class, consider using <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow noreferrer\">Moo</a>. It's mostly compatible with Moose, much faster, and when used in conjunction with <a href=\"https://metacpan.org/pod/Types::Standard\" rel=\"nofollow noreferrer\">Types::Standard</a>, does types better. It would be good, for example, to make a StrNotEmpty type to avoid this sort of problem.</p>\n\n<p>Unless this is an exercise, Perl already has a great module to do this sort of thing. Look into <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": false, "score": 2, "last_activity_date": 1486173184, "last_edit_date": 1486173184, "creation_date": 1486172264, "answer_id": 42035577, "question_id": 42035292, "link": "https://stackoverflow.com/questions/42035292/perl-moose-attribute-only-getting-set-when-mentioned-in-build-subroutine/42035577#42035577", "title": "Perl Moose: Attribute only getting set when mentioned in BUILD subroutine", "body": "<p>Attributes with <code>lazy =&gt; 1</code> are only created when their accessor is called, not after construction.</p>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1486174706, "post_id": 42035678, "comment_id": 71245840, "body": "I agree. This avoids a common problem called a <a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">race condition</a> where you check if an action can be taken and then take an action. Things can change between the check and the action. It&#39;s better to just take the action and check if it succeeds."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1486322257, "last_edit_date": 1486322257, "creation_date": 1486173361, "answer_id": 42035678, "question_id": 42035292, "link": "https://stackoverflow.com/questions/42035292/perl-moose-attribute-only-getting-set-when-mentioned-in-build-subroutine/42035678#42035678", "title": "Perl Moose: Attribute only getting set when mentioned in BUILD subroutine", "body": "<p>Just a side note:</p>\n\n<p>You incorrectly claim a path doesn't exist if you have no permission to its parent dir. Also, you incorrectly claim a path to a directory isn't one if you have no permission to its parent dir.</p>\n\n<p>You also needlessly <code>stat</code> the file twice. In fact, you needn't <code>stat</code> the file at all since <code>opendir</code> is already making the checks you are making.</p>\n\n<p>Simply replace</p>\n\n<pre><code>logf('Path to the directory does not exist.')             if (!-e $path);\nlogf('The path should point to a directory, not a file.') if (!-d $path);\n\nopendir my $dh, $path or die \"Can't opendir '$path': $!\";\n</code></pre>\n\n<p>with</p>\n\n<pre><code>opendir(my $dh, $path)\n   or do {\n      logf(\"Can't open directory \\\"$path\\\": $!\");\n      die(\"Can't open directory \\\"$path\\\": $!\");\n   };\n</code></pre>\n\n<p>This also avoids the <a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">race condition</a> in your code, the possibility that the state of things might change between the checks and the <code>opendir</code>.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1486322257, "creation_date": 1486169539, "last_edit_date": 1486171551, "question_id": 42035292, "link": "https://stackoverflow.com/questions/42035292/perl-moose-attribute-only-getting-set-when-mentioned-in-build-subroutine", "title": "Perl Moose: Attribute only getting set when mentioned in BUILD subroutine", "body": "<p>I've building a script that recursively builds the names of a directory's subdirectories/files and the names of the files in those subdirectories as objects:</p>\n\n<pre><code>package Dir;\nuse Moose;\nuse Modern::Perl;\nuse File;\nuse strict;\nuse warnings;\n\nhas 'path' =&gt; (is =&gt; 'ro', isa =&gt; 'Str', required =&gt; 1); \nhas 'name' =&gt; (is =&gt; 'ro', isa =&gt; 'Str', lazy =&gt; 1, default =&gt; sub { my $self = shift; my ($name) = $self-&gt;path =~ /\\/([^\\/]*)$/; return $name; } );\nhas 'subdirs' =&gt; (is =&gt; 'rw', isa =&gt; 'ArrayRef[Dir]' );  \nhas 'files' =&gt; (is =&gt; 'rw', isa =&gt; 'ArrayRef[File]' );  \nhas 'num_dirs' =&gt; (is =&gt; 'ro', isa =&gt; 'Int', lazy =&gt; 1, default =&gt; sub { my $self = shift; scalar @{$self-&gt;subdirs}; } );\n\n\nsub BUILD {\n  my $self = shift;\n  my $path = $self-&gt;path;\n\n  # run some tests\n  logf('Path to the directory does not exist.')             if (!-e $path);\n  logf('The path should point to a directory, not a file.') if (!-d $path);\n\n  # populate subdirs attribute with Dir objects\n  opendir my $dh, $path or die \"Can't opendir '$path': $!\";\n\n  # Get files and dirs and separate them out into categories\n  my @dirs_and_files = grep { ! m{^\\.$|^\\.\\.$} } readdir $dh;\n  closedir $dh or die \"Can't closedir '$path': $!\";\n  my @subdir_names        = grep { -d \"$path/$_\" } grep { !m{^\\.}  } @dirs_and_files;\n  my @file_names          = grep { -f \"$path/$_\" } grep { !m{^\\.}  } @dirs_and_files;\n\n  # Create objects\n  my @dir_objects =          map { Dir-&gt;new  ( path =&gt; $path . '/' . $_ ) } @subdir_names;\n  my @file_objects =         map { File-&gt;new ( path =&gt; $path . '/' . $_ ) } @file_names;\n\n  # Populate this with file and directory objects\n  $self-&gt;subdirs             ( \\@dir_objects );\n  $self-&gt;files               ( \\@file_objects );\n}\n\n1;\n</code></pre>\n\n<p>Notice the code has a <code>files</code> attribute which holds an array of <code>File</code> objects. A <code>File</code> has the following attributes:</p>\n\n<pre><code>has 'path' =&gt; (is =&gt; 'ro', isa =&gt; 'Str', required =&gt; 1); \nhas 'name' =&gt; (is =&gt; 'ro', isa =&gt; 'Str', lazy =&gt; 1, default =&gt; sub { my $self = shift; my ($name) = $self-&gt;path =~ /\\/([^\\/]*)$/; return $name; } );\n</code></pre>\n\n<p>The problem is that the <code>name</code> attribute never gets set when a <code>File</code> object is created. I'm not sure why.</p>\n\n<p><strong>EDIT 1: Solution (sort of)</strong>\nSo, I slapped this into the <code>File</code> object to see if it triggered the creation of the attribute:</p>\n\n<pre><code>sub BUILD {\n  my $self = shift;\n}\n</code></pre>\n\n<p>This did not solve the problem. However, this did:</p>\n\n<pre><code>sub BUILD {\n  my $self = shift;\n  $self-&gt;name;\n}\n</code></pre>\n\n<p>The question I have, though, is why did I need to do this?</p>\n"}, {"tags": ["regex", "perl", "pattern-matching"], "comments": [{"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 1, "creation_date": 1486166567, "post_id": 42034904, "comment_id": 71244181, "body": "try this if($file =~ /^0000.*\\.gz$/){...}.  Or you can just do ls 0000*.gz"}, {"owner": {"reputation": 11917, "user_id": 516433, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c292b959ecf29c86e4c0d093a6f24e19?s=128&d=identicon&r=PG", "display_name": "Lucas", "link": "https://stackoverflow.com/users/516433/lucas"}, "edited": false, "score": 0, "creation_date": 1486254988, "post_id": 42034904, "comment_id": 71267481, "body": "why not use <code>File::Find</code> instead of <code>ls</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1486410745, "last_edit_date": 1486410745, "creation_date": 1486166727, "answer_id": 42034955, "question_id": 42034904, "link": "https://stackoverflow.com/questions/42034904/perl-wildcard-match-of-filenames-from-ls-output/42034955#42034955", "title": "Perl wildcard match of filenames from &quot;ls&quot; output", "body": "<p>A close equivalent to the shell's <a href=\"http://www.tldp.org/LDP/GNU-Linux-Tools-Summary/html/x11655.htm\" rel=\"nofollow noreferrer\">wildcard <code>*</code></a> in regex is <code>.*</code>. The <code>*</code> <em>quantifier</em> means that the pattern before it matches \"zero or more\" times  and <code>.</code> means \"any character,\" see <a href=\"http://perldoc.perl.org/perlre.html#Regular-Expressions\" rel=\"nofollow noreferrer\">Regular Expressions in perlre</a>. But as it seems that you want <em>something</em> after the zeros then use <code>.+</code> instead, to match any character one-or-more times. To match a literal period escape it, <code>\\.</code></p>\n\n<p>Next, there is no reason to use an external command for what you do. In Perl</p>\n\n<pre><code>my @allFiles = glob \"*.gz\";\n</code></pre>\n\n<p>The documentation is linked at the end.</p>\n\n<p>Finally, <em>please</em> always enable warnings and strict.</p>\n\n<p>Altogether</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @allFiles = glob \"*.gz\";\n\nforeach my $file (@allFiles) {\n    if ($file =~ /^0000.+\\.gz/) {\n        print \"$file\\n\";\n    }\n}\n</code></pre>\n\n<p>The regex pattern matches: <code>0000</code> at the beginning of the string (<code>^</code>), followed by any character (<code>.</code>) matched one-or-more times (<code>+</code>), then a literal period (<code>\\.</code>) and literal <code>gz</code>. Note that <code>.+</code> means that the <code>.</code> <em>matches</em> one-or-more times, it need not be the same character.</p>\n\n<p>Adjust to what best suits your actual need and the directory content.  For example, if you want files with only digits following zeros, you need <code>/^0000\\d+\\.gz/</code>. To catch a file <code>00001a.gz</code> as well you need to allow for non-digits after a string of digits, for instance by <code>/^0000\\d+.*\\.gz/</code>.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> for a regex tutorial and <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">glob</a>, or better <a href=\"http://perldoc.perl.org/File/Glob.html\" rel=\"nofollow noreferrer\">File::Glob</a> for things with spaces in names.</p>\n\n<hr>\n\n<p>There are other ways to do this. For example, you need to <em>filter</em> a list of file names, so</p>\n\n<pre><code>my @files = grep { /^0000.+\\.gz/ } glob \"*.gz\";\n</code></pre>\n\n<p>The <code>glob</code> is in the <em>list context</em> imposed by <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> so it returns the list of all files that it matches. (In the <em>scalar context</em> it iterates through them.) The code in <code>grep</code>'s block runs for each and if it evaluates to true that element passes. It is the same regex, applied by default to <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">$_ variable</a> that is the implicit iterator (and aliased to the currently processed element). So <code>grep</code>\nreturns the desired list.</p>\n\n<hr>\n\n<p>For your specific example even just this will do</p>\n\n<pre><code>my @files = glob \"0000[0-9].gz\";\n\nprint \"$_\\n\" for @files;\n</code></pre>\n\n<p>This fetches all files with a single digit following <code>0000</code>, then <code>.gz</code>.</p>\n\n<p>See the list of accepted <em>meta characters</em> in the linked <code>File::Glob</code> docs.</p>\n"}], "owner": {"reputation": 2289, "user_id": 1757333, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e310535bfe2c44945152a93015ed14a9?s=128&d=identicon&r=PG&f=1", "display_name": "yalkris", "link": "https://stackoverflow.com/users/1757333/yalkris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 42034955, "answer_count": 1, "score": 1, "last_activity_date": 1486420233, "creation_date": 1486166331, "last_edit_date": 1486420233, "question_id": 42034904, "link": "https://stackoverflow.com/questions/42034904/perl-wildcard-match-of-filenames-from-ls-output", "title": "Perl wildcard match of filenames from &quot;ls&quot; output", "body": "<pre><code>#!/usr/bin/perl\n\nmy @allFiles=`ls *.gz`;\n\nfor my $file (@allFiles) {\n    if ($file =~ '0000*.gz') {\n         print $file;\n    }\n}\n</code></pre>\n\n<p>I am trying this above code to print all filenames that have a prefix of 0000. Like 00001.gz, 00002.gz etc</p>\n"}, {"tags": ["perl", "runtime-error"], "answers": [{"tags": [], "owner": {"reputation": 714, "user_id": 411177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644a9ba47ec92626b33619bea1a75933?s=128&d=identicon&r=PG", "display_name": "msouth", "link": "https://stackoverflow.com/users/411177/msouth"}, "is_accepted": false, "score": 1, "last_activity_date": 1486160891, "creation_date": 1486160891, "answer_id": 42034002, "question_id": 42034001, "link": "https://stackoverflow.com/questions/42034001/what-does-invalid-instance-method-invocant-no-hash-ref-supplied-mean-in-class/42034002#42034002", "title": "What does &#39;invalid instance method invocant: no hash ref supplied&#39; mean in Class::XSAccessor?", "body": "<p><strong>Check whether you are making a class method call where Class::XSAccessor is expecting an instance method call.</strong></p>\n\n<p>In other words, the error message means what it says--it expects a blessed hash ref, and you didn't give it one.</p>\n\n<p>In my case, the problem was that I was doing a <code>$package_name-&gt;method</code> call; what was needed was for me to make the same call against an <em>instance</em> of the class.  So, for my situation, it was sufficient to simply do <code>$package_name-&gt;new()-&gt;method</code>.</p>\n"}], "owner": {"reputation": 714, "user_id": 411177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/644a9ba47ec92626b33619bea1a75933?s=128&d=identicon&r=PG", "display_name": "msouth", "link": "https://stackoverflow.com/users/411177/msouth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486160891, "creation_date": 1486160891, "question_id": 42034001, "link": "https://stackoverflow.com/questions/42034001/what-does-invalid-instance-method-invocant-no-hash-ref-supplied-mean-in-class", "title": "What does &#39;invalid instance method invocant: no hash ref supplied&#39; mean in Class::XSAccessor?", "body": "<p>I got this error on one of my object calls, I don't get what it even means:</p>\n\n<p><code>Class::XSAccessor: invalid instance method invocant: no hash ref supplied</code></p>\n"}, {"tags": ["perl", "email", "smtp"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1486158671, "post_id": 42033521, "comment_id": 71241669, "body": "The code you show seems to send an email, with that one line.  If all this is in a loop where those variables are changed thus making a new  line of data, then of course it will send separate emails.  You should first assemble all data (in that loop which I presume is around this), <i>then</i> send an email with all of it."}, {"owner": {"reputation": 1, "user_id": 7044157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f093287ce236f7ac11d97d9d5b27c5?s=128&d=identicon&r=PG&f=1", "display_name": "Titanfox", "link": "https://stackoverflow.com/users/7044157/titanfox"}, "reply_to_user": {"reputation": 16152, "user_id": 205233, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd3b79356ba4ea1f7e8d6be783446e59?s=128&d=identicon&r=PG&f=1", "display_name": "Filburt", "link": "https://stackoverflow.com/users/205233/filburt"}, "edited": false, "score": 0, "creation_date": 1486400695, "post_id": 42033521, "comment_id": 71317935, "body": "@Filburt Couldn&#39;t I also dump an array out in the $smtp-&gt;datasend field? The only way I&#39;ve used dump is dump(@arr);"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486406586, "post_id": 42033521, "comment_id": 71321365, "body": "Well, yes, something like that.  But why with <code>dump</code>? Build a string out of (all) your data and submit that with <code>datasend</code>. Like, <code>my $data = join &#39;\\n&#39;, @all_data</code> and then <code>datasend($data)</code>. I am not sure but <code>datasend</code> may also take an arrayref."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7044157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f093287ce236f7ac11d97d9d5b27c5?s=128&d=identicon&r=PG&f=1", "display_name": "Titanfox", "link": "https://stackoverflow.com/users/7044157/titanfox"}, "is_accepted": false, "score": 0, "last_activity_date": 1486420704, "creation_date": 1486420704, "answer_id": 42078543, "question_id": 42033521, "link": "https://stackoverflow.com/questions/42033521/how-can-i-send-the-data-in-one-large-email-vs-multiple-smaller-emails/42078543#42078543", "title": "How can I send the data in one large email vs multiple smaller emails?", "body": "<p>I was able to get this to work by concatenating the data the variables grabbed and assigning that to another variable, which would then be called in the \"email body\". </p>\n\n<pre><code>$mail_body .= \"\\t$keyname  $keyexpr  $keycount  $keyavailable\\n\";\n</code></pre>\n\n<p>...</p>\n\n<pre><code>$smtp-&gt;datasend(\"\\t $mail_body \\n\");\n</code></pre>\n\n<p>After all of the data was now within the email message, outside of the loop is where I ended and quit the email. </p>\n\n<p>Thanks for the help everyone!</p>\n"}], "owner": {"reputation": 1, "user_id": 7044157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f093287ce236f7ac11d97d9d5b27c5?s=128&d=identicon&r=PG&f=1", "display_name": "Titanfox", "link": "https://stackoverflow.com/users/7044157/titanfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486420704, "creation_date": 1486158408, "last_edit_date": 1486158507, "question_id": 42033521, "link": "https://stackoverflow.com/questions/42033521/how-can-i-send-the-data-in-one-large-email-vs-multiple-smaller-emails", "title": "How can I send the data in one large email vs multiple smaller emails?", "body": "<p>This section of my script sends the emails out to myself from a test email address, I need to have the email formatted like this:</p>\n\n<p>$keyname  $keyexpr  $keycount  $keyavailable</p>\n\n<p>$keyname  $keyexpr  $keycount  $keyavailable</p>\n\n<p>$keyname  $keyexpr  $keycount  $keyavailable</p>\n\n<p>$keyname  $keyexpr  $keycount  $keyavailable...etc</p>\n\n<p>Instead, I receive several emails with just one line of data instead of multiple. How would I do this?</p>\n\n<pre><code>if ($debug and !$hidestdout) {\n                $smtp = Net::SMTP-&gt;new($mailhost, Debug =&gt; 1);\n                }\n                else {\n                $smtp = Net::SMTP-&gt;new($mailhost);\n                }\n                eval {\n                    $smtp-&gt;mail($mailfrom) || die(\"$!\\n\");\n                    if ($smtp-&gt;to(split(/,/, $mailto))) {\n                        $smtp-&gt;data();\n                        $smtp-&gt;datasend(\"Subject: License File Status Report\\n\");\n                        $smtp-&gt;datasend(\"\\n\");                                                    \n                        $smtp-&gt;datasend(\"\\t$keyname  $keyexpr  $keycount  $keyavailable\\n\");\n                        $smtp-&gt;dataend();\n                    } else {\n                        print \"\\tERROR SENDING EMAIL, RUN WITH DEBUG FOR MORE INFO: \", $smtp-&gt;message();\n                        print \"\\tCHECK MAIL KEYWORDS: mailhost=$mailhost | mailfrom=$mailfrom | mailto=$mailto\\n\\n\";\n                        print LOGFILE \"ERROR SENDING EMAIL, RUN WITH DEBUG FOR MORE INFO: \", $smtp-&gt;message() if ($log ne \"\");\n                        print LOGFILE \"  RUN WITH DEBUG, CHECK MAIL KEYWORDS: mailhost=$mailhost | mailfrom=$mailfrom | mailto=$mailto\\n\" if ($log ne \"\");\n                    }\n                    $smtp-&gt;quit;\n                };\n                if  ($@) {\n                    print \"\\tERROR SENDING EMAIL, RUN WITH DEBUG FOR MORE INFO\\n\";\n                    print \"\\tCHECK MAIL KEYWORDS: mailhost=$mailhost | mailfrom=$mailfrom | mailto=$mailto\\n\\n\";\n                    print LOGFILE \"ERROR SENDING EMAIL, RUN WITH DEBUG FOR MORE INFO\\n\" if ($log ne \"\");\n                    print LOGFILE \"  CHECK MAIL KEYWORDS: mailhost=$mailhost | mailfrom=$mailfrom | mailto=$mailto\\n\" if ($log ne \"\");\n                }\n</code></pre>\n"}, {"tags": ["linux", "perl", "nagios"], "comments": [{"owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 0, "creation_date": 1486157690, "post_id": 42033016, "comment_id": 71241256, "body": "It&#39;s hard to comment about <code>$opt_d</code> without seeing the code that sets it.  <code>$opt_dl</code> is being used for iterating through the <code>@dev</code> array, which I guess holds the list of devices."}, {"owner": {"reputation": 11, "user_id": 2792137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfcc99eddec7a20b8c3a755857ee9fe3?s=128&d=identicon&r=PG&f=1", "display_name": "user2792137", "link": "https://stackoverflow.com/users/2792137/user2792137"}, "reply_to_user": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 0, "creation_date": 1486158484, "post_id": 42033016, "comment_id": 71241600, "body": "Thanks for your reply, I have edited the post to show how $opt_d is set."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2792137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfcc99eddec7a20b8c3a755857ee9fe3?s=128&d=identicon&r=PG&f=1", "display_name": "user2792137", "link": "https://stackoverflow.com/users/2792137/user2792137"}, "edited": false, "score": 0, "creation_date": 1486387547, "post_id": 42034463, "comment_id": 71309013, "body": "Thanks for your help, I will read up on using &#39;glob&#39;. What I meant in the last paragraph is that the current script works with a regex when you pass it the variable for the drives (/dev/sd[a-c]), and what I would like is for it to perform a similar loop through the variable for the RAID card (megaraid,[5-8]); they are both essentially doing the same thing, just in the case of the RAID card the drives are behind the card so don&#39;t appear as separate devices."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 11, "user_id": 2792137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfcc99eddec7a20b8c3a755857ee9fe3?s=128&d=identicon&r=PG&f=1", "display_name": "user2792137", "link": "https://stackoverflow.com/users/2792137/user2792137"}, "edited": false, "score": 0, "creation_date": 1486418495, "post_id": 42034463, "comment_id": 71327699, "body": "If you pass the script the string &quot;megaraid,[5-8]&quot; what should it computes from it, what are each item of the loop? Where/How is used the variabble for the RAID card?"}], "tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 1, "last_activity_date": 1486163401, "creation_date": 1486163401, "answer_id": 42034463, "question_id": 42033016, "link": "https://stackoverflow.com/questions/42033016/perl-regex-in-nagios-check/42034463#42034463", "title": "Perl regex in Nagios check", "body": "<p><code>$opt_dl</code> is probably poorly named and has nothing to do with your <code>$opt_d</code>, those are two separate variables.</p>\n\n<p>From the <code>if</code> statement, if <code>$opt_d</code> is not set (that is the script was not given any device name to act upon), then <code>glob</code> is called with the value of <code>$opt_g</code> and it is <code>glob</code> in fact that finds out all filenames based on the regex given inside <code>$opt_g</code>.</p>\n\n<p>After this <code>if</code> statement, the <code>@dev</code> array is filed with the names of devices to handle.</p>\n\n<p>And then you have a <code>foreach</code> statement which means a loop on each item inside the <code>@dev</code> array. And during the loop, each item is in the <code>$opt_dl</code> variable, due to its use on the <code>foreach</code> statement.</p>\n\n<p>However I was not able to understand what you wanted to do in your last paragraph.</p>\n"}, {"tags": [], "owner": {"reputation": 562, "user_id": 7755225, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WZvwdhVFDcY/AAAAAAAAAAI/AAAAAAAAAAA/oWxfyR9q2kg/photo.jpg?sz=128", "display_name": "Claudio Kuenzler", "link": "https://stackoverflow.com/users/7755225/claudio-kuenzler"}, "is_accepted": false, "score": 0, "last_activity_date": 1575198268, "creation_date": 1575198268, "answer_id": 59124894, "question_id": 42033016, "link": "https://stackoverflow.com/questions/42033016/perl-regex-in-nagios-check/59124894#59124894", "title": "Perl regex in Nagios check", "body": "<p>I'm the maintainer of check_smart and it's funny I accidentally stumbled on that question now.</p>\n\n<blockquote>\n  <p>I don't quite understand why the variable is $opt_dl when earlier it seems to be $opt_d. The result, however, is that the script returns something like: OK: [/dev/sda] - Device is clean --- [/dev/sdb] - Device is clean --- [/dev/sdc] - Device is clean</p>\n</blockquote>\n\n<p>So basically when you use the <code>-g</code> parameter, you tell the check_smart plugin to use glob (<a href=\"https://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/glob.html</a>) - this is not the same as regular expression. The drives matching the glob expression (e.g. <code>-d '/dev/sd[a-z]</code>) will create a list (<code>$opt_dl</code>) and the plugin will run through each drive in a for loop.</p>\n\n<blockquote>\n  <p>Specifically, I'd like to be able to pass the script something like \"megaraid,[5-8]\" and let it run for each. In this case, I would not be passing the regex for the device, it would just be /dev/sda.</p>\n</blockquote>\n\n<p>This is already possible since release 5.0 (which was released in April 2014, way before your question ;-) ). You just need to change the syntax. Instead of using the glob expression on <code>-d</code>, you use it on the interface parameter (<code>-i</code>). Practical example: <code>-i 'megaraid,[5-8]'</code>.</p>\n\n<p>Since the newest release (6.6, released a couple of days ago), the output for multiple drive checks (using <code>-g</code>) and hardware storage/raid controllers has slightly changed and now indicates the interface's device id rather than the logical drive path:</p>\n\n<pre><code># ./check_smart.pl -g /dev/sda -i 'megaraid,[1-3]'\nOK: [megaraid,1] - Device is clean --- [megaraid,2] - Device is clean --- [megaraid,3] - Device is clean|\n</code></pre>\n\n<p>This is all described in the official documentation, too. </p>\n\n<p>More info: \n<a href=\"https://www.claudiokuenzler.com/monitoring-plugins/check_smart.php\" rel=\"nofollow noreferrer\">https://www.claudiokuenzler.com/monitoring-plugins/check_smart.php</a>\n<a href=\"https://www.claudiokuenzler.com/blog/914/check_smart-6.6-multiple-drives-check-megaraid-3ware-cciss-controllers\" rel=\"nofollow noreferrer\">https://www.claudiokuenzler.com/blog/914/check_smart-6.6-multiple-drives-check-megaraid-3ware-cciss-controllers</a></p>\n\n<p>I hope this answers your question, although I am probably 2 years late. </p>\n"}], "owner": {"reputation": 11, "user_id": 2792137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfcc99eddec7a20b8c3a755857ee9fe3?s=128&d=identicon&r=PG&f=1", "display_name": "user2792137", "link": "https://stackoverflow.com/users/2792137/user2792137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575198268, "creation_date": 1486155924, "last_edit_date": 1486158451, "question_id": 42033016, "link": "https://stackoverflow.com/questions/42033016/perl-regex-in-nagios-check", "title": "Perl regex in Nagios check", "body": "<p>I am unfamiliar with perl, and I have a need to modify a Nagios check. I'd appreciate any advice on how to proceed. The check I'm using is check_smart, found here:</p>\n\n<p><a href=\"https://www.claudiokuenzler.com/nagios-plugins/check_smart.php\" rel=\"nofollow noreferrer\">https://www.claudiokuenzler.com/nagios-plugins/check_smart.php</a></p>\n\n<p>This script lets you check SMART values from hard drives and present the results in a simple form for monitoring. As it stands, the script can take a regex in the form /dev/sd[a-c] for one of the options; I believe that this is the section which allows this:</p>\n\n<pre><code>        # list of devices for a loop\n    my(@dev);\n\n    if ( $opt_d ){\n        # normal mode - push opt_d on the list of devices\n        push(@dev,$opt_d);\n    } else {\n        # glob all devices - try '?' first \n        @dev =glob($opt_g);\n    }\n\n    foreach my $opt_dl (@dev){\n        warn \"Found $opt_dl\\n\" if $opt_debug;\n        if (-b $opt_dl || -c $opt_dl){\n            $device .= $opt_dl.\":\";\n\n        } else {\n            warn \"$opt_dl is not a valid block/character special device!\\n\\n\" if $opt_debug;\n        }\n    }\n</code></pre>\n\n<p>I don't quite understand why the variable is $opt_dl when earlier it seems to be $opt_d. The result, however, is that the script returns something like:\nOK: [/dev/sda] - Device is clean --- [/dev/sdb] - Device is clean --- [/dev/sdc] - Device is clean</p>\n\n<p>EDIT: Here's the code where $opt_d is set; on further thought it seems like $opt_dl is just $opt_d while it's in a loop or something?</p>\n\n<pre><code>use vars qw($opt_b $opt_d $opt_g $opt_debug $opt_h $opt_i $opt_v);\nGetopt::Long::Configure('bundling');\nGetOptions(\n                      \"debug\"       =&gt; \\$opt_debug,\n    \"b=i\" =&gt; \\$opt_b, \"bad=i\"       =&gt; \\$opt_b,\n    \"d=s\" =&gt; \\$opt_d, \"device=s\"    =&gt; \\$opt_d,\n    \"g=s\" =&gt; \\$opt_g, \"global=s\"    =&gt; \\$opt_g,\n    \"h\"   =&gt; \\$opt_h, \"help\"        =&gt; \\$opt_h,\n    \"i=s\" =&gt; \\$opt_i, \"interface=s\" =&gt; \\$opt_i,\n    \"v\"   =&gt; \\$opt_v, \"version\"     =&gt; \\$opt_v,\n);\n</code></pre>\n\n<p>The part of the code I'd like to change in a similar fashion is:</p>\n\n<pre><code>        # Allow all device types currently supported by smartctl\n    # See http://www.smartmontools.org/wiki/Supported_RAID-Controllers\n    if ($opt_i =~ m/(ata|scsi|3ware|areca|hpt|cciss|megaraid|sat)/) {\n            $interface = $opt_i;\n    } else {\n            print \"invalid interface $opt_i for $opt_d!\\n\\n\";\n            print_help();\n            exit $ERRORS{'UNKNOWN'};\n    }\n</code></pre>\n\n<p>Specifically, I'd like to be able to pass the script something like \"megaraid,[5-8]\" and let it run for each. In this case, I would not be passing the regex for the device, it would just be /dev/sda.</p>\n\n<p>If anyone could give me advice on this I'd appreciate it!</p>\n"}, {"tags": ["perl", "soap", "soaplite"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486156445, "post_id": 42032310, "comment_id": 71240741, "body": "Re &quot;<i>I have been informed by the company that the namespaces need to be on the &quot;CreateAssignment&quot; tag.</i>&quot;, You are assigning namespaces to a prefix, right? (It wouldn&#39;t make sense any other way.) If so, the company is wrong."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7154372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a44de3e4f928b89a2c3b9f35e62185?s=128&d=identicon&r=PG&f=1", "display_name": "Emi R.", "link": "https://stackoverflow.com/users/7154372/emi-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1486491340, "creation_date": 1486491340, "answer_id": 42097041, "question_id": 42032310, "link": "https://stackoverflow.com/questions/42032310/define-namespaces-in-the-method-element-using-soaplite/42097041#42097041", "title": "Define namespaces in the &quot;method&quot; element using SOAP::Lite", "body": "<p>I ended up sitting down with another coworker and reading the source code of SOAP::Lite - we discovered that the method tag was built in <code>sub envelope</code>. There is an if-statement whereby the module will use the entire object if instead of a string object a SOAP::Data object is passed in as the method:</p>\n\n<pre><code>elsif (UNIVERSAL::isa($method =&gt; 'SOAP::Data')) {\n            $body = $method;\n        }\n</code></pre>\n\n<p>I changed from this:</p>\n\n<pre><code>$soap = new SOAP::Lite\n-&gt;service($wsdl_link)\n-&gt;uri($url_link)\n-&gt;proxy($proxy_link)\n-&gt;on_action(sub { sprintf '\"%s%s\"', shift, shift });\nmy $resp = $soap-&gt;call('CreateAssignment',SOAP::Data-&gt;type('xml'=&gt;$xml),\n                                SOAP::Header-&gt;type('xml'=&gt;$headXML));\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>$method = SOAP::Data-&gt;new(name=&gt;'ns4:CreateAssignment');\n$method-&gt;attr({'xmlns'=&gt; $namespaceOne,\n            'xmlns:ns2'=&gt; $namespaceTwo,\n            'xmlns:ns3'=&gt; $namespaceThree,\n            'xmlns:ns4'=&gt; $namespaceFour,\n            'xmlns:ns5'=&gt; $namespaceFive});\n\n$soap = new SOAP::Lite\n        -&gt;service($wsdl_link)\n        -&gt;uri($url_link)\n        -&gt;proxy($proxy_link)\n        -&gt;on_action(sub { sprintf '\"%s%s\"', shift, shift });\n\nmy $resp = $soap-&gt;call($method,SOAP::Data-&gt;type('xml'=&gt;$xml),\n                                SOAP::Header-&gt;type('xml'=&gt;$headXML));\n</code></pre>\n\n<p>This created my method tag exactly as the company required:</p>\n\n<pre><code>&lt;ns4:CreateAssignment xmlns=\"namespaceOne\" xmlns:ns2=\"namespaceTwo\" xmlns:ns3=\"namespaceThree\" xmlns:ns4=\"namespaceFour\" xmlns:ns5=\"namespaceFive\"&gt;\n...\n&lt;/ns4:CreateAssignment&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7154372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a44de3e4f928b89a2c3b9f35e62185?s=128&d=identicon&r=PG&f=1", "display_name": "Emi R.", "link": "https://stackoverflow.com/users/7154372/emi-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 1, "accepted_answer_id": 42097041, "answer_count": 1, "score": 1, "last_activity_date": 1486491340, "creation_date": 1486152788, "question_id": 42032310, "link": "https://stackoverflow.com/questions/42032310/define-namespaces-in-the-method-element-using-soaplite", "title": "Define namespaces in the &quot;method&quot; element using SOAP::Lite", "body": "<p>I am using SOAP::Lite to connect to an outside service. After much trial and error and communication with the other company, I have discovered the problem. </p>\n\n<p>My code looks like this:</p>\n\n<pre><code>$soap = new SOAP::Lite\n    -&gt;service($wsdl_link)\n    -&gt;uri($url_link)\n    -&gt;proxy($proxy_link)\n    -&gt;on_action(sub { sprintf '\"%s%s\"', shift, shift });\nmy $resp = $soap-&gt;call('CreateAssignment',SOAP::Data-&gt;type('xml'=&gt;$xml),\n                                SOAP::Header-&gt;type('xml'=&gt;$headXML));\n</code></pre>\n\n<p>This produces the following xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;soap:Envelope  xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"   &gt;\n&lt;soap:Header&gt;\n...\n&lt;/soap:Header&gt;\n&lt;soap:Body&gt;\n&lt;CreateAssignment xmlns=\"url_link\"&gt;\n...\n&lt;/CreateAssignment&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>(where <code>url_link</code> is a valid url)</p>\n\n<p>I need to define additional namespaces. I have done this by adding <code>-&gt;ns(namespace, prefix)</code> to my code. However, this adds the additional namespaces to the \"<code>envelope</code>\" tag. I have been informed by the company that the namespaces need to be on the \"<code>CreateAssignment</code>\" tag. Indeed, when I make the appropriate change and run it using SOAP UI, it works beautifully.</p>\n\n<p>I have tried adding the \"<code>CreateAssignment</code>\" tag to my xml and running the <code>call()</code> function without a method. SOAP::Lite wraps the xml in a generic tag.</p>\n\n<p>I have read the SOAP::Lite documentation, I have asked search engines, I have asked colleagues and no one has an answer. </p>\n\n<p>Is there a way to force SOAP::Lite to put the namespace declarations where I need them?</p>\n\n<p>If not, what is a better module to use?</p>\n"}, {"tags": ["javascript", "jquery", "html", "ajax", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486155383, "post_id": 42031687, "comment_id": 71240266, "body": "That&#39;s a lot of code. Where do you get that OK?"}, {"owner": {"reputation": 71, "user_id": 4410821, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-Suy2Voml2K4/AAAAAAAAAAI/AAAAAAAABZs/l8m2uFtTXoU/photo.jpg?sz=128", "display_name": "Sulejman Vulaj", "link": "https://stackoverflow.com/users/4410821/sulejman-vulaj"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486156855, "post_id": 42031687, "comment_id": 71240903, "body": "I just give loads of code to have better understanding on it ,, the OK text i get after the ajax response ,, with paging i get the files  but with this no just OK text"}], "owner": {"reputation": 71, "user_id": 4410821, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-Suy2Voml2K4/AAAAAAAAAAI/AAAAAAAABZs/l8m2uFtTXoU/photo.jpg?sz=128", "display_name": "Sulejman Vulaj", "link": "https://stackoverflow.com/users/4410821/sulejman-vulaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486150215, "creation_date": 1486150215, "question_id": 42031687, "link": "https://stackoverflow.com/questions/42031687/ajax-resposnse-gives-just-ok-text-on-perl-website", "title": "Ajax resposnse gives just OK text on perl website", "body": "<p>I'm making some changes on my perl website (file manager)</p>\n\n<p>I want to make pages to load faster and to have a nicer use of pages especially for files page hen content will be loaded with ajax everytime it's requested . </p>\n\n<p>I have paging which works perfectly via ajax but when i want to do this after i click a button it doesnt work just gives me an OK text for response, below are codes I'm using  for paging </p>\n\n<pre><code>function setPagination(element, opts)\n{\n   $(element).paging(opts.total,\n   {\n      format: '&lt; ncnn (- p) &gt;',\n      perpage: opts.perpage,\n      onSelect: function (page)\n      {\n         if(document.readyState !== 'complete') return;\n         $.ajax({\n            url: opts.url,\n            type: 'POST',\n            data:\n            {\n               op: opts.op,\n               load: opts.load,\n               page: page.toString(),\n               fld_id: opts.fld_id,\n               usr_login: opts.usr_login\n            },\n            success: function(result)\n            {\n               $(opts.target).html(result);\n               if(typeof addthis !== 'undefined') { addthis.layers.refresh(); }\n            }\n         });\n      },\n      onFormat: function (type)\n      {\n         var show_right = this.pages &gt; 4;\n         var show_block = !show_right || this.value != this.pages;\n         if(this.pages &lt;= 1) return '&amp;nbsp;';\n         /* TODO: looks ugly, needs refactoring */\n         switch (type)\n         {\n            case 'right':\n               if(!show_right) return '';\n               return show_right\n                  ? '&lt;a&gt;' + this.value + '&lt;/a&gt;'\n                  : '';\n            case 'block':\n               if(!show_block) return '';\n               return this.value == this.page\n                  ? '&lt;span&gt;' + this.value + '&lt;/span&gt;'\n                  : '&lt;a&gt;' + this.value + '&lt;/a&gt;';\n            case 'next': // &gt;\n               return '&lt;a href=\"#\" class=\"next\"&gt;Next&lt;/a&gt;';\n            case 'prev': // &lt;\n               return '&lt;a href=\"#\" class=\"prev\"&gt;Prev&lt;/a&gt;'\n            case 'fill':\n               return show_right ? \"..\" : '';\n         }\n      }\n   });\n   $(element).css('cursor', 'pointer');\n}\n</code></pre>\n\n<p>html code with perl </p>\n\n<pre><code>&lt;div class=\"files\"&gt; \n   &lt;div id=\"files_g\"&gt;\n       &lt;TMPL_INCLUDE files_grid.html&gt;\n    &lt;/div&gt;\n\n     &lt;div class=\"grid paging bottom\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n\n\nsetPagination('.files .grid',\n    {\n        op: 'my_files', \n        total: '&lt;TMPL_VAR files_total&gt;',\n        load: 'files_grid',\n        target: '#files_g',\n        perpage: '&lt;TMPL_VAR per_page&gt;',\n        fld_id: '&lt;TMPL_VAR folder_id&gt;',\n    });\n</code></pre>\n\n<p>That's the paging page which i use to  load the file content only not the entire page and it work perfectly . </p>\n\n<p>Now I want to select a file and after clicking to set an custom options for the that file i have select after this i want the file content to reload here is where i cant find out why is'nt working </p>\n\n<p>below are codes that i want to use </p>\n\n<pre><code>function setFileFlag(file_ids, name, value) {\n                       $.ajax({\n                           type: 'POST',\n                           url: '?',\n                           data: {\n                               op: 'my_files',\n                               set_flag: name,\n                               load: 'files_grid',\n                               value: value,\n                               file_id: file_ids,\n                           },\n                           success: function(result) {\n                               $('#files_g').html(result);\n                               if(typeof addthis !== 'undefined') { addthis.layers.refresh(); }\n\n                           },\n                       });\n                    }\n                    $('.flag').click(function() {\n                        var name = this.name.replace(/(un)?set_/,'');\n                        var value = this.name.match(/^set_/) ? 1 : 0;\n                        var file_ids = $('[name=F1] [name=file_id]')\n                            .filter(function() { return this.value != 0 &amp;&amp; this.checked; })\n                            .map(function() { return(parseInt(this.value)) })\n                            .toArray();\n                        setFileFlag(file_ids, name, value);\n\n\n                    });\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 2, "last_activity_date": 1486147283, "creation_date": 1486147283, "answer_id": 42030957, "question_id": 42030831, "link": "https://stackoverflow.com/questions/42030831/assigning-match-variables-from-nth-match/42030957#42030957", "title": "Assigning match variables from nth match", "body": "<p>First off, don't use <code>$a</code> or <code>$b</code> as variable names.  Those are used by <code>sort</code> - and you'll start to wonder what's going on if you end up sorting in this same scope.</p>\n\n<p>So, for lack of better names, let's try <code>$h</code> and <code>$m</code>.</p>\n\n<p>So, now, what does <code>$l =~ /(\\d\\d):(\\d\\d)/g</code> return in list context?  It returns all the values it found: <code>(\"01\",\"01\",\"02\",\"02\")</code>.  Now do you see why <code>[1]</code> doesn't get what you're looking for?</p>\n\n<p>Depending on what you're doing, this may be as simple as using <code>[-2,-1]</code> as the index lookup (to always get the last two).  Or it may be that you want to loop through all the pairings and do something. There's not enough context, but that should give you some idea to go on with. </p>\n"}], "owner": {"reputation": 39, "user_id": 4743343, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d2543f012a7d583311fa4b5d850bf8a3?s=128&d=identicon&r=PG", "display_name": "ark262", "link": "https://stackoverflow.com/users/4743343/ark262"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 42030957, "answer_count": 1, "score": 1, "last_activity_date": 1486191207, "creation_date": 1486146782, "last_edit_date": 1486146913, "question_id": 42030831, "link": "https://stackoverflow.com/questions/42030831/assigning-match-variables-from-nth-match", "title": "Assigning match variables from nth match", "body": "<p>In the code which follows, I want <code>$a</code> and <code>$b</code> to be set to <code>02 02</code> (i.e. the values of the second match from <code>$l</code>) If I add a line <code>($a,$b)=($1,$2);</code>, it works but I'd rather do it in a single line if possible.</p>\n\n<p>Can someone let me know what's wrong?</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nmy $l = \"01:01 02:02\";\n\nmy ($a,$b);\n\nif ( ($a,$b) = ( ( $l =~ /(\\d\\d):(\\d\\d)/g)[1] ) ) {\n\n  print \"12 $1 $2\\n\";\n  print \"ab $a $b\\n\";\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\n12 02 02\nUse of uninitialized value $b in concatenation (.) or string at ./gs.pl line 11.\nab 01\n</pre>\n"}, {"tags": ["arrays", "perl", "scope"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 8, "creation_date": 1486143148, "post_id": 42029855, "comment_id": 71234117, "body": "Don&#39;t call your variables <code>$a</code> and <code>$b</code> which are awful variable names in the first place?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1486145223, "post_id": 42029975, "comment_id": 71235252, "body": "<code>$a</code> isn&#39;t a super-global like <code>$_</code>, so <code>$::a</code> will only work if the call to <code>pairwise</code> is in <code>main</code>. Test: <code>perl -MData::Dumper -we&#39;package Pkg; use Data::Dumper; use List::MoreUtils qw{pairwise}; sub multiply {    my ( $a, $b ) = @_;    return [ pairwise { $::a * $::b } @$a, @$b ]; } print(Dumper(multiply([2,3,4],[4,3,2])));&#39;</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1486144187, "last_edit_date": 1592644375, "creation_date": 1486143519, "answer_id": 42029975, "question_id": 42029855, "link": "https://stackoverflow.com/questions/42029855/how-to-use-perl-sort-and-pairwise-if-i-already-have-variables-a-and-b/42029975#42029975", "title": "How to use Perl `sort` and `pairwise` if I already have variables `$a` and `$b`", "body": "<p>Well, first off - <code>$a</code> is an awful variable name. Why are you doing that? Single letters are almost always a bad choice, and just about ok if it's just an iterator or some other simple use.</p>\n<p>So the <em>solution</em> would be 'don't call them <code>$a</code> and <code>$b</code>'.</p>\n<p>I mean, if you <em>really</em> don't want to use a different name:</p>\n<pre><code>sub multiply {\n   return [ pairwise { $a * $b } @{$_[0]}, @{$_[1]} ];\n}\n</code></pre>\n<p>But what you've done is really highlighted why namespace clashes are a bad idea, and thus using <code>$a</code> and <code>$b</code> in your code as actual variables is asking for trouble.</p>\n<p>I don't think there's a way to make it work they way you're trying to, and even if you could - you'd end up with some code that's really confusing.</p>\n<p>I mean, something like this <em>should</em> work:</p>\n<pre><code>sub multiply {\n   my ( $a, $b ) = @_;\n   return [ pairwise { $::a * $::b } @$a, @$b ];\n}\n</code></pre>\n<p>Because then you're explicitly using the package <code>$a</code> and <code>$b</code> not the lexical one. But note - that won't work the same way if they're imported from another package, and it just generally gets messy.</p>\n<p>But it's pretty filthy. <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"noreferrer\">perlvar</a> tells you outright that you shouldn't do it:</p>\n<blockquote>\n<p>$a</p>\n<p>$b</p>\n<p>Special package variables when using sort(), see sort. Because of this specialness $a and $b don't need to be declared (using use vars , or our()) even when using the strict 'vars' pragma. Don't lexicalize them with my $a or my $b if you want to be able to use them in the sort() comparison block or function.</p>\n</blockquote>\n<p>And that's before you get into the territory of 'single letter variable names are pretty much always a bad idea'.</p>\n<p>So seriously. Is:</p>\n<pre><code>my ( $first, $second ) = @_;\n</code></pre>\n<p>Actually so bad?</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1486148969, "last_edit_date": 1486148969, "creation_date": 1486145225, "answer_id": 42030415, "question_id": 42029855, "link": "https://stackoverflow.com/questions/42029855/how-to-use-perl-sort-and-pairwise-if-i-already-have-variables-a-and-b/42030415#42030415", "title": "How to use Perl `sort` and `pairwise` if I already have variables `$a` and `$b`", "body": "<p><code>pairwise</code> sets the <code>$a</code> and <code>$b</code> found in its caller's package, so you could use fully qualified variable names.</p>\n\n<p>Assuming this code is in package <code>main</code>,</p>\n\n<pre><code>use List::MoreUtils qw{pairwise};\nsub multiply {\n    my ($a, $b) = @_;\n    return [ pairwise { $main::a * $main::b } @$a, @$b ];\n}\n</code></pre>\n\n<hr>\n\n<p>Alternatively, <code>our</code> creates a lexical variable that is aliased to the current package's variable with the same name, and it will override the <code>my</code> declaration since the most recent lexical-variable declaration wins out.</p>\n\n<pre><code>use List::MoreUtils qw{pairwise};\nsub multiply {\n    my ($a, $b) = @_;\n    return [ pairwise { our $a * our $b } @$a, @$b ];\n}\n</code></pre>\n\n<hr>\n\n<p>The second approach is obviously much less fragile than the first one, but you know what would be even less fragile? Not declaring <code>$a</code> and <code>$b</code> as lexical vars in the first place! :) It would be far simpler just to use different variables. Even <code>$A</code> and <code>$B</code> or <code>$x</code> and <code>$y</code> would be better.</p>\n"}], "owner": {"reputation": 40290, "user_id": 124946, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5048ffde7ab92aeeedf45959f6d13c24?s=128&d=identicon&r=PG", "display_name": "Denilson S&#225; Maia", "link": "https://stackoverflow.com/users/124946/denilson-s%c3%a1-maia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1486148969, "creation_date": 1486143031, "question_id": 42029855, "link": "https://stackoverflow.com/questions/42029855/how-to-use-perl-sort-and-pairwise-if-i-already-have-variables-a-and-b", "title": "How to use Perl `sort` and `pairwise` if I already have variables `$a` and `$b`", "body": "<p>I want to write a Perl subroutine like this:</p>\n\n<pre><code>use List::MoreUtils qw{pairwise};\nsub multiply {\n    my ($a, $b) = @_;\n    return [ pairwise {$a * $b} @$a, @$b ];\n}\n</code></pre>\n\n<p>(multiplication is just an example, I'm gonna do something else)</p>\n\n<p>However, this gives me nonsensical results, because Perl gets confused and tries to use the outer <code>$a</code> and <code>$b</code> instead of the list items.</p>\n\n<p>If I try this code in a REPL (such as <code>reply</code>):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0&gt; use List::MoreUtils qw{pairwise};\n1&gt; my $a = [1, 2, 3];\n\u2026\n2&gt; my $b = [3, 2, 1];\n\u2026\n3&gt; pairwise {$a * $b} @$a, @$b;\nCan't use lexical $a or $b in pairwise code block at reply input line 1.\n4&gt; sort {$a &lt;=&gt; $b} @$a;\n\"my $a\" used in sort comparison at reply input line 1.\n\"my $b\" used in sort comparison at reply input line 1.\n$res[2] = [\n  1,\n  3,\n  2\n]\n</code></pre>\n\n<p>So far, my solution has been replacing <code>my ($a, $b) = @_;</code> with <code>my ($a_, $b_) = @_;</code> (i.e. renaming the troublesome variables).</p>\n\n<p>Is there any other solution?</p>\n"}, {"tags": ["oracle", "perl", "stored-procedures", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486140005, "post_id": 42028933, "comment_id": 71232306, "body": "This looks very familiar. Have you asked the same thing already during the last few days?"}, {"owner": {"reputation": 1792, "user_id": 445663, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b84cd841840d10fb222cda401de23992?s=128&d=identicon&r=PG", "display_name": "comatose", "link": "https://stackoverflow.com/users/445663/comatose"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486140155, "post_id": 42028933, "comment_id": 71232402, "body": "yes, I did ask this yesterday, but it was missing details and people asked me to provide code. I just updated the other question and will be removing that shortly"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486140310, "post_id": 42028933, "comment_id": 71232509, "body": "Well now it&#39;s super clear. See my answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486141947, "post_id": 42028933, "comment_id": 71233423, "body": "Note that the <code>DBI</code> module will not allow you to <code>prepare</code> and <code>execute</code> multiple statements at once. Also, it will depend on the database driver whether <code>$dbh-&gt;prepare(&#39;BEGIN&#39;)</code> succeeds, and the canonical way to create a transaction is to set <code>$dbh-&gt;{AutoCommit} = 0</code> before executing the transaction, and then <code>$dbh-&gt;commit</code> or <code>$dbh-&gt;rollback</code> accordingly. <code>AutoCommit</code> is enabled by default, and if you set it to a <i>false</i> value then every database action that you request will be logged, waiting to be actioned or discarded."}], "answers": [{"comments": [{"owner": {"reputation": 1792, "user_id": 445663, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b84cd841840d10fb222cda401de23992?s=128&d=identicon&r=PG", "display_name": "comatose", "link": "https://stackoverflow.com/users/445663/comatose"}, "edited": false, "score": 0, "creation_date": 1486376428, "post_id": 42029008, "comment_id": 71302084, "body": "That works, Thanks! so just to get some clarity on question (1), for stored procedures which return something, running them like &quot;BEGIN $procedure; END;&quot;; is not a good idea ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1792, "user_id": 445663, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b84cd841840d10fb222cda401de23992?s=128&d=identicon&r=PG", "display_name": "comatose", "link": "https://stackoverflow.com/users/445663/comatose"}, "edited": false, "score": 0, "creation_date": 1486379299, "post_id": 42029008, "comment_id": 71303891, "body": "@comatose I don&#39;t know. I&#39;ve not used that syntax before."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1486140181, "creation_date": 1486140181, "answer_id": 42029008, "question_id": 42028933, "link": "https://stackoverflow.com/questions/42028933/perl-executing-stored-procedure-which-uses-select/42029008#42029008", "title": "perl: executing stored procedure which uses select", "body": "<blockquote>\n<pre><code>$VAR1 = { 'alpha.beta.get_result(alpha.STRING_ARRAY(\\'xyz\\'))' =&gt; bless( {}, 'DBI::st' ) };\n</code></pre>\n</blockquote>\n\n<p>The value here is <a href=\"https://metacpan.org/pod/DBI#DBI-STATEMENT-HANDLE-OBJECTS\" rel=\"nofollow noreferrer\">a DBI statement handle</a>. It's the same thing you get when you do <code>my $sth = $dbh-&gt;prepare(...)</code>. It's probably been executed already, so you can just call any of the fetch methods on it.</p>\n\n<pre><code>my $result = $sth-&gt;fetchrow_hashref;\nwhile (\n    my $res = $result-&gt;{'alpha.beta.get_result(alpha.STRING_ARRAY(\\'xyz\\'))'}\n        -&gt;fetchrow_hashref\n) {\n    # ...\n}\n</code></pre>\n\n<p>But that looks horrible, and you might not know what the keys are. So you might want to just iterate over all of them.</p>\n\n<pre><code>my $result = $sth-&gt;fetchrow_hashref;\nforeach my $key ( keys %${ $result } ) {\n    print \"Processing results of $key\\n\";\n    while ( my $res = $result-&gt;{$key}-&gt;fetchrow_hashref ) {\n        # do things with the $res\n\n    }\n}\n</code></pre>\n\n<p>You just need to figure out a good way to deal with the results. The above loop also works if there is just one key in the hash ref, so you could just use it anyway and hope that there is always just one.</p>\n"}], "owner": {"reputation": 1792, "user_id": 445663, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b84cd841840d10fb222cda401de23992?s=128&d=identicon&r=PG", "display_name": "comatose", "link": "https://stackoverflow.com/users/445663/comatose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 42029008, "answer_count": 1, "score": 1, "last_activity_date": 1486141590, "creation_date": 1486139898, "last_edit_date": 1486141590, "question_id": 42028933, "link": "https://stackoverflow.com/questions/42028933/perl-executing-stored-procedure-which-uses-select", "title": "perl: executing stored procedure which uses select", "body": "<p>I am running into some errors when trying to run a stored procedure through Perl.</p>\n\n<p>The following statements work fine in sqlDeveloper and return expected results </p>\n\n<pre><code>EXEC alpha.beta.do_something()\n</code></pre>\n\n<p>This does not generate any output, as expected</p>\n\n<pre><code>Select alpha.beta.get_something(alpha.STRING_ARRAY('xyz')) from tableName\n</code></pre>\n\n<p>This generates output which is given to us from the DBA guys. It has this format in DB terms: <code>Output Type:Ref Cursor</code>. The cursor has two columns, <code>a</code> and <code>b</code></p>\n\n<p>When running through Perl, I get errors when running the second statement.</p>\n\n<p>This is the Perl code that I am using:</p>\n\n<pre><code>sub execute_procedure {\n    my $dbh       = shift;\n    my $procedure = shift;\n\n    my $statement = \"BEGIN $procedure; END;\"\n    my $sth;\n    eval {$sth = $dbh-&gt;prepare($statement);};\n    eval {$sth-&gt;execute();};\n\n    if ($@) {\n        print \"failed\";\n    } else {\n        print \"passed\";\n    }\n}\n\n# Call 1\nexecute_procedure($dbh, \"alpha.beta.do_something()\")\n\n# Call 2\nexecute_procedure($dbh, \"Select alpha.beta.get_something(alpha.STRING_ARRAY('xyz')) from tableName\")\n</code></pre>\n\n<p>Call 1 works as expected, does not generate any errors</p>\n\n<p>Call 2 results in this error</p>\n\n<blockquote>\n  <p>\"Select alpha.beta.get_something(alpha.STRING_ARRAY('xyz')) from\n  tableName\"        results in :PLS-00428: an INTO clause is expected in this\n  SELECT statement (DBD ERROR: error possibly near &lt;<em>> indicator at char\n  6 in 'BEGIN &lt;</em>>Select alpha.beta.get_result(alpha.STRING_ARRAY('xyz'))\n  from tableName; END;')</p>\n</blockquote>\n\n<p>if I remove BEGIN and END from the statement in the <code>execute_procedure</code> function like this:</p>\n\n<pre><code># my $statement = \"BEGIN $procedure; END;\";\nmy $statement = \"$procedure\";\n</code></pre>\n\n<p>then it does not generate any error, but it returns a result which I don't know how to parse</p>\n\n<pre><code>my $result = $sth-&gt;fetchrow_hashref;\nprint Dumper($result)\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>$VAR1 = {\n  'alpha.beta.get_result(alpha.STRING_ARRAY(\\'xyz\\'))' =&gt; bless( {}, 'DBI::st' )\n};\n</code></pre>\n\n<p>so, my questions are</p>\n\n<ol>\n<li><p>What is the right way to execute a stored procedure which uses the SELECT statement? Should it be called with <code>BEGIN $procedure; END;</code> or without the <code>BEGIN</code>/<code>END</code>?</p></li>\n<li><p>How can I get the actual data from <code>bless( {}, 'DBI::st' )</code>? I have tried to use different fetch options: <code>fetchrow</code>, <code>fetchrow_hashref</code> etc. but I am not able to get the actual data from the object</p></li>\n</ol>\n"}, {"tags": ["perl", "ffmpeg"], "comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1486136813, "post_id": 42027563, "comment_id": 71230123, "body": "Try <code>open(F,&#39;-|:unix&#39;,&quot;ffmpeg......&quot;)</code>"}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1486138359, "post_id": 42027563, "comment_id": 71231156, "body": "@ChankeyPathak I tried adding :unix but it unfortunately doesn&#39;t seem any different."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486139732, "post_id": 42027563, "comment_id": 71232126, "body": "@SebastianKing: Do you understand what <code>2&gt;&amp;1</code> does? Why did you put it there?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486140004, "post_id": 42027563, "comment_id": 71232305, "body": "As it stands, your <code>ffmpeg</code> command will take <code>test.mkv</code> and convert it to <code>test.mp4</code>. Yes, I&#39;m avoiding the question, but do you really need real-time access to the progress of the conversion?"}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486140024, "post_id": 42027563, "comment_id": 71232317, "body": "@Borodin I think so, see the bottom of my question where I explained why I am using it. I may be wrong though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486140159, "post_id": 42027563, "comment_id": 71232410, "body": "@SebastianKing: You&#39;re running on a Windows system, right?"}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486140353, "post_id": 42027563, "comment_id": 71232533, "body": "@Borodin No, ubuntu 16.04.1 LTS. I am running perl in my bash shell."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486140380, "post_id": 42027563, "comment_id": 71232549, "body": "@SebastianKing: I&#39;m familiar with <code>ffmpeg</code>, but I don&#39;t see anything in your question that tells me why you need to see the output in real time. That output is meant for console use, and if you&#39;re running the conversion by program then surely you just need to know whether each file was converted successfully?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486140426, "post_id": 42027563, "comment_id": 71232574, "body": "I&#39;m surprised that <code>ffmpeg</code> adds CR to its line endings on a Linux build, but there&#39;s no reason to remove them. Use just <code>ffmpeg -y -i &#39;$i&#39; &#39;$o&#39; | unbuffer</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1486140584, "post_id": 42027563, "comment_id": 71232666, "body": "It&#39;s a &quot;trick&quot; used to update the current line. // They can&#39;t use <code>&lt;&gt;</code> if they don&#39;t replace them. (Which is fine; they could use <code>read</code> instead.) // That&#39;s not how one uses <code>unbuffer</code>."}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486140624, "post_id": 42027563, "comment_id": 71232692, "body": "@Borodin see comment <a href=\"http://stackoverflow.com/questions/42027563/how-to-stop-perl-buffering-ffmpeg-output?noredirect=1#comment71230904_42027563\" title=\"how to stop perl buffering ffmpeg output\">stackoverflow.com/questions/42027563/&hellip;</a> for why I want a real-time output. The carriage returns let you watch the status of the encode in a normal human terminal without clogging up the screen etc."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486140885, "post_id": 42027563, "comment_id": 71232841, "body": "@SebastianKing: Sure, but my question remains, why do you want to see &quot;live stats&quot;? It&#39;s not like someone can leap in, fix the source video, and let the train keep on running. Isn&#39;t this just like watching the washing machine rotate?"}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486141820, "post_id": 42027563, "comment_id": 71233363, "body": "@Borodin I have always had live stats, only I have recently translated my program from bash to perl and now perl is no longer able to update in real-time."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486142307, "post_id": 42027563, "comment_id": 71233630, "body": "@SebastianKing: So you don&#39;t really need them. How about decluttering your brain? Did you try piping the output of <code>ffmpeg</code> to <code>unbuffer</code> and dropping <code>tr</code>? It&#39;s much easier to translate characters within Perl."}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486142558, "post_id": 42027563, "comment_id": 71233797, "body": "@Borodin My live stats are staying, I will find a solution one way or another. <code>unbuffer</code> cannot be piped to, the correct use is <code>unbuffer &lt;bin&gt; &lt;args&gt;</code>. When I do it that way, I get a real-time output up until the carriage return section where I get no output until the encode has finished. That&#39;s why I have the <code>tr</code> but the problem does seem to be there now that we look at it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486142769, "post_id": 42027563, "comment_id": 71233912, "body": "@SebastianKing: I&#39;m sorry. Use <code>unbuffer -p</code>"}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486142988, "post_id": 42027563, "comment_id": 71234025, "body": "@Borodin using <code>unbuffer -p &lt;bin&gt; &lt;args&gt;</code> doesn&#39;t seem to have helped"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486143051, "post_id": 42027563, "comment_id": 71234061, "body": "@SebastianKing: I&#39;m sorry, I was unclear. The <code>-p</code> option enables reading from stdin (hence <code>-p</code> for &quot;pipe&quot;). Try <code>ffmpeg -y -i &#39;$i&#39; &#39;$o&#39; | unbuffer -p</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486143335, "post_id": 42027563, "comment_id": 71234221, "body": "What I would prefer is a Perl way of falsifying a terminal data sink when opening a pipe from a program. It&#39;s not such an unlikely requirement."}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486143367, "post_id": 42027563, "comment_id": 71234244, "body": "@Borodin the only options that <code>unbuffer</code> gives me are <code>-console, -ignore, -leaveopen, -noecho, -nottycopy, -nottyinit, -open, or -pty</code> and if I try <code>echo &quot;hi&quot; | unbuffer -pty</code> it just hangs with no output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486143513, "post_id": 42027563, "comment_id": 71234313, "body": "@SebastianKing: Then I&#39;m sorry, I can&#39;t help. I&#39;ve used it occasionally on various systems and it&#39;s documented <a href=\"http://linuxcommand.org/man_pages/unbuffer1.html\" rel=\"nofollow noreferrer\">on <code>linuxcommand.org</code></a>"}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486143840, "post_id": 42027563, "comment_id": 71234481, "body": "@Borodin I checked <code>man unbuffer</code> on my system and <code>-p</code> is mentioned. I was using it incorrectly as I was trying it without the trailing <code>tr</code> as <code>-p</code> still requires a <code>&lt;bin&gt;</code> argument. Using <code>ffmpeg &lt;...&gt;  | unbuffer -p tr &#39;\\r&#39; &#39;\\n&#39;</code> appears to have the desired results. Thank you very much. It was by using <code>unbuffer --help</code> that I got the list of available options which I suppose does not include short options.."}, {"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486144344, "post_id": 42027563, "comment_id": 71234779, "body": "@Borodin If you would care to create an answer I would be more than happy to accept it. I have also replaced <code>unbuffer -p</code> with <code>stdbuf -i0 -o0 -eL</code> (<code>-eL</code> so it&#39;s now line buffered, slightly more efficient I think) to remove the dependence on the rather large <code>expect</code> package."}], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "edited": false, "score": 0, "creation_date": 1486141319, "post_id": 42029085, "comment_id": 71233080, "body": "Using <code>unbuffer ffmpeg -y -i &#39;$i&#39; &#39;$o&#39; 2&gt;&amp;1 | unbuffer tr &#39;\\r&#39; &#39;\\n&#39;</code> doesn&#39;t give me any output even if I run it in the shell, I even tried <code>echo &quot;hi&quot; | unbuffer tr &#39;\\r&#39; &#39;\\n&#39;</code> and don&#39;t get an output, what am I doing wrong? With the echo command it doesn&#39;t return, it just outputs nothing and stays running."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "edited": false, "score": 0, "creation_date": 1486148094, "post_id": 42029085, "comment_id": 71236766, "body": "Indeed. (Tested with <code>echo &quot;hi&quot; | unbuffer perl -pe1</code> to make sure it had nothing to do with <code>tr</code>.) See update."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1486148566, "last_edit_date": 1486148566, "creation_date": 1486140478, "answer_id": 42029085, "question_id": 42027563, "link": "https://stackoverflow.com/questions/42027563/how-to-stop-perl-buffering-ffmpeg-output/42029085#42029085", "title": "How to stop perl buffering ffmpeg output", "body": "<p>First of all, output buffering is something performed by the one doing the output.</p>\n\n<p>Most programs buffer their output unless they are connected to a terminal, so unless you have one of the very few programs that provide an option to disable buffering, the only option available is to fool them by using a pseudo-tty instead of a pipe. This is what <code>unbuffer</code> does.</p>\n\n<p>The problem in this case is that there are two programs doing output buffering: <code>ffmpeg</code> and <code>tr</code>. You'll need to convince both to avoid buffering. You need to use <code>unbuffer</code> for each one! Hopefully, that will convince them not to buffer.</p>\n\n<p>Unfortunately, <code>... | unbuffer ...</code> doesn't work. (I don't know why.) So get rid of <code>tr</code> by using <a href=\"http://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\"><code>sysread</code></a> instead of <code>&lt;&gt;</code>.</p>\n\n<pre><code>my $buf = '';\nwhile (1) {\n   my $rv = sysread($PIPE, $buf, 64*1024, length($buf));\n   die $! if !defined($rv);\n   last if !$rv;\n\n   while ($buf =~ s/^([^\\r\\n]*)[\\r\\n]//) {\n      my $line = $1;\n      print(\"[$line]\\n\");\n   }\n}\n\nprint(\"[$buf]\\n\") if $buf ne \"\";\n</code></pre>\n\n<p>Of course, all of this assumes that <code>ffmpeg</code> flushes it's buffers after sending a carriage return because <code>unbuffer</code> probably won't help with that.  (Of course, if that's the case, <code>unbuffer</code> probably isn't needed at all. Simply avoiding <code>tr</code> by switching to <code>sysread</code> should do the trick.)</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486227437, "post_id": 42038122, "comment_id": 71259130, "body": "Thanks for this. I meant to write a solution, but this is much more useful than what I would have written. You should accept your answer as soon as you can to mark the question closed."}], "tags": [], "owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "is_accepted": true, "score": 1, "last_activity_date": 1486229901, "last_edit_date": 1486229901, "creation_date": 1486196275, "answer_id": 42038122, "question_id": 42027563, "link": "https://stackoverflow.com/questions/42027563/how-to-stop-perl-buffering-ffmpeg-output/42038122#42038122", "title": "How to stop perl buffering ffmpeg output", "body": "<p>The problem was that <code>tr</code> was buffering the output, and <code>unbuffer</code> was being applied only to the <code>ffmpeg</code> at the beginning of the command. Which means <code>unbuffer</code> was not able to affect the pipe to perl. </p>\n\n<p>This can be fixed using <code>unbuffer -p</code> which is for unbuffering piped commands (<code>&lt;cmd1&gt; | unbuffer -p &lt;cmd2&gt;</code> unbuffers both <code>cmd1</code> and <code>cmd2</code>).</p>\n\n<p>However, I also replaced <code>unbuffer</code> with <code>stdbuf -i0 -o0 -eL</code> to remove the dependence on the <code>expect</code> package because it is a large and unnecessary package when <code>stdbuf</code> comes as standard. Also, the <code>-eL</code> option makes <code>stdbuf</code> line buffered which I believe should make it more CPU efficient than not having any buffer at all. The full working code is below:</p>\n\n<pre><code>#!/usr/bin/perl\n\n$i = \"test.mkv\"; # big file, long encode time\n$o = \"test.mp4\";\n\nopen(F, \"-|\", \"ffmpeg -y -i '$i' '$o' 2&gt;&amp;1 | stdbuf -i0 -o0 -eL tr '\\r' '\\n'\")\n        or die \"oh no\";\n\nwhile(&lt;F&gt;) {\n        print \"A12345: $_\"; # some random text so i know the output was processed in perl\n}\n</code></pre>\n\n<p><em>Since this question was answered in comments and no correct answer was posted I have made this a wiki answer, credit should go to @Borodin</em></p>\n"}], "owner": {"reputation": 144, "user_id": 3939740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59Il7.jpg?s=128&g=1", "display_name": "Sebastian King", "link": "https://stackoverflow.com/users/3939740/sebastian-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "accepted_answer_id": 42038122, "answer_count": 2, "score": 3, "last_activity_date": 1486229901, "creation_date": 1486135453, "last_edit_date": 1486139011, "question_id": 42027563, "link": "https://stackoverflow.com/questions/42027563/how-to-stop-perl-buffering-ffmpeg-output", "title": "How to stop perl buffering ffmpeg output", "body": "<p>I am trying to have a Perl program process the output of an ffmpeg encode, however my test program only seems to receive the output of ffmpeg in periodic chunks, thus I am assuming there is some sort of buffering going on. How can I make it process it in real-time?</p>\n\n<p>My test program (the <code>tr</code> command is there because I thought maybe ffmpeg's carriage returns were causing perl to see one big long line or something):</p>\n\n<pre><code>#!/usr/bin/perl\n\n$i = \"test.mkv\"; # big file, long encode time\n$o = \"test.mp4\";\n\nopen(F, \"-|\", \"ffmpeg -y -i '$i' '$o' 2&gt;&amp;1 | tr '\\r' '\\n'\")\n        or die \"oh no\";\n\nwhile(&lt;F&gt;) {\n        print \"A12345: $_\"; # some random text so i know the output was processed in perl\n}\n</code></pre>\n\n<p>Everything works fine when I replace the <code>ffmpeg</code> command with this script:</p>\n\n<pre><code>#!/bin/bash\n\necho \"hello\";\n\nfor i in `seq 1 10`; do\n        sleep 1;\n        echo \"hello $i\";\ndone\n\necho \"bye\";\n</code></pre>\n\n<p>When using the above script I see the output each second as it happens. With <code>ffmpeg</code> it is some 5-10 seconds or so until it outputs and will output sometimes 100 lines each output.</p>\n\n<p>I have tried using the program <code>unbuffer</code> ahead of <code>ffmpeg</code> in the command call but it seems to have no effect. Is it perhaps the <code>2&gt;&amp;1</code> that might be buffering?\nAny help is much appreciated.</p>\n\n<p>If you are unfamiliar with ffmpeg's output, it outputs a bunch of file information and stuff to <code>STDOUT</code> and then during encoding it outputs lines like</p>\n\n<pre><code>frame=  332 fps= 93 q=28.0 size=     528kB time=00:00:13.33 bitrate= 324.2kbits/s speed=3.75x\n</code></pre>\n\n<p>which begin with carriage returns instead of new lines (hence <code>tr</code>) on <code>STDERR</code> (hence <code>2&gt;&amp;1</code>).</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486140791, "post_id": 42026420, "comment_id": 71232782, "body": "How would I make $id and $name only output 123456789 and anytownusa?  Excluding the id: and name: fields?"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 1, "creation_date": 1486140861, "post_id": 42026420, "comment_id": 71232829, "body": "As I said, use search and replace to alter the data. <code>$id =~ s&#47;id: &#47;&#47;g</code> and <code>$name =~ s&#47;name: &#47;&#47;g</code> would do."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1486132214, "last_edit_date": 1486132214, "creation_date": 1486131837, "answer_id": 42026420, "question_id": 42026080, "link": "https://stackoverflow.com/questions/42026080/reading-file-and-inserting-into-variables-using-perl/42026420#42026420", "title": "Reading File and Inserting into Variables using Perl", "body": "<p><code>File::Slurp</code> will read the complete file data in one go. This might cause an issue if the file size is very big. Let me show you a simple approach to this problem.</p>\n\n<ol>\n<li>Read file line by line using while loop</li>\n<li>Check line number using <code>$.</code> and assign line data to respective variable</li>\n<li>Store ips in an array and at the end print them using <code>join</code></li>\n</ol>\n\n<p>Note: If you have to alter the line data then use search and replace in the respective conditional block before assigning the line data to the variable.</p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy ($id, $name, @ips);\n\nwhile(&lt;DATA&gt;){\n    chomp;\n    if ($. == 1){\n        $id = $_;   \n    }\n    elsif ($. == 2){\n        $name = $_;\n    }\n    else{\n        push @ips, $_;  \n    }\n}\n\nprint \"$id\\n\";\nprint \"$name\\n\";\nprint join \",\", @ips;\n\n__DATA__\nid: 123456789\nname: anytownusa\n1.2.3.4/32\n5.6.7.8/32\n</code></pre>\n\n<p><a href=\"http://ideone.com/YeqCZF\" rel=\"nofollow noreferrer\"><strong>Demo</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486142841, "post_id": 42026742, "comment_id": 71233952, "body": "How does my ($id, $name, @ips) = (&lt;DATA&gt;,&lt;DATA&gt;,&lt;DATA&gt;);  read in the file?  Lets say the file is called target.txt."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486143816, "post_id": 42026742, "comment_id": 71234463, "body": "@Alby:<code>&lt;DATA&gt;</code> is used to read the data after <code>_DATA_</code>. To read your real file, you have to open it first, the replace <code>&lt;DATA&gt;</code> by the filehandle <code>&lt;$FILEHANDLE&gt;</code>"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 1, "last_activity_date": 1486132829, "creation_date": 1486132829, "answer_id": 42026742, "question_id": 42026080, "link": "https://stackoverflow.com/questions/42026080/reading-file-and-inserting-into-variables-using-perl/42026742#42026742", "title": "Reading File and Inserting into Variables using Perl", "body": "<p>Read the file into variables directly:</p>\n\n<pre><code>use Modern::Perl;\n\nmy ($id, $name, @ips) = (&lt;DATA&gt;,&lt;DATA&gt;,&lt;DATA&gt;);\nchomp ($id, $name, @ips);\nsay $id;\nsay $name;\n$\" = ',';\nsay \"@ips\";\n\n__DATA__\nid: 123456789\nname: anytownusa\n1.2.3.4/32\n5.6.7.8/32\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>id: 123456789\nname: anytownusa\n1.2.3.4/32,5.6.7.8/32\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486151099, "post_id": 42031331, "comment_id": 71238209, "body": "The target file changes, so the id, name, and IPs are always new. How would you adjust this code for that?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486151371, "post_id": 42031331, "comment_id": 71238350, "body": "@Alby Do you mean that the values/names change? That is the main point of this approach.  It reads <i>anything</i> with <code>:</code> and picks its &quot;name&quot; and &quot;value&quot; -- whatever the &quot;name&quot; is.  For a single entry on a line (when there is no <code>:</code> on the line)  it just takes it and puts it in an array.  It doesn&#39;t matter whether those are mixed, on what lines which ones are, or what they are called."}, {"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486151712, "post_id": 42031331, "comment_id": 71238528, "body": "Thanks.. Yes, just the values change. The word &quot;id:&quot; and &quot;name:&quot; remain the same, but the values change along with the IPs."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486152023, "post_id": 42031331, "comment_id": 71238690, "body": "@Alby OK. This reads the file anew every time it runs, and picks up what is there as it reads it.  As for <code>id</code> and <code>name</code> -- it gets them every time, which is fine. (And is not relying on line numbers, is not bothered by empty lines etc).  Also, if they were to change, or new such items added, it will still work."}, {"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486154090, "post_id": 42031331, "comment_id": 71239653, "body": "I got a couple of errors in the coding.  Suggestions? syntax error at ztest.pl line 20, near &quot;%identity{&quot; syntax error at ztest.pl line 22, near &quot;else&quot; Global symbol &quot;$m1&quot; requires explicit package name at ztest.pl line 23."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 1, "creation_date": 1486154540, "post_id": 42031331, "comment_id": 71239884, "body": "@Alby  Oh ... sorry, that was a typo -- it should be <code>$identity{$m1}</code>, NOT with <code>%</code>. It&#39;s a hash value, which is a scalar, thus needs a <code>$</code>.  Changed in the post.  The other one is because of this first one."}, {"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486155405, "post_id": 42031331, "comment_id": 71240281, "body": "Worked like a charm..  Thanks:   ztest.pl syntax OK"}, {"owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486299220, "post_id": 42031331, "comment_id": 71276660, "body": "Can somebody please vote up my question? I seem to have run into a scoring-posting issue and need more good Up votes. ;-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486336800, "post_id": 42031331, "comment_id": 71289551, "body": "@Alby  I didn&#39;t even know there was such a limit.  The idea is probably to force people to post &quot;good&quot; questions -- a lot of not-so-good ones take/abuse bandwidth and attention.  So I&#39;d suggest: study thoughtfully all your previous questions and people&#39;s comments, to see how to improve them. Then the future ones will get upvotes.  (I am not accusing you of any wrongdoing! Just trying to suggest a constructive course of action.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "edited": false, "score": 0, "creation_date": 1486337052, "post_id": 42031331, "comment_id": 71289593, "body": "@Alby  See <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> in the help center, and think through it carefully.  One critical component of &quot;good&quot; questions is that the authors first researched the existing Q/A carefully.  Very often you&#39;ll find your answer, and if not you will <i>certainly</i> find very closely related material.  Working through those will either make you figure it out, or it will make your following question far better.  It doesn&#39;t take very long to locate a handful of very related questions.  I don&#39;t mean to criticize you with this, just trying to help out."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1486192271, "last_edit_date": 1486192271, "creation_date": 1486148715, "answer_id": 42031331, "question_id": 42026080, "link": "https://stackoverflow.com/questions/42026080/reading-file-and-inserting-into-variables-using-perl/42031331#42031331", "title": "Reading File and Inserting into Variables using Perl", "body": "<p>As it has been noted, there is no reason to \"<em>slurp</em>\" the whole file into a variable. If nothing else, it only makes the processing <em>harder</em>. \nAlso, why not store named labels in a hash, in this example</p>\n\n<pre><code>my %identity = (id =&gt; 123456789, name =&gt; 'anytownusa');\n</code></pre>\n\n<p>The code below picks up the key names from the file, they aren't hard-coded.</p>\n\n<p>Then</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy (@ips, %identity);\n\nmy $file = 'targetfile.txt';\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nwhile (&lt;$fh&gt;) \n{\n    next if not /\\S/;\n    chomp;\n\n    my ($m1, $m2) = split /:/;                #/(stop bad syntax highlight)\n\n    if ($m1 and $m2) { $identity{$m1} = $m2; }\n    else             { push @ips, $m1;       }\n}\n\nsay \"$_: $identity{$_}\" for keys %identity;\n\nsay join '/', @ips;\n</code></pre>\n\n<p>If the line doesn't have <code>:</code> the <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> will return it whole, which will be the ip and which is stored in an array for processing later. Otherwise it returns the named pair, for <code>'id'</code> and <code>'name'</code>. </p>\n\n<p>We first skipped blank lines with <code>next if not /\\S/;</code>, so the line must have some non-space elements and <code>else</code> suffices, as there is always something in <code>$m1</code>.  We also need to remove the newline, with <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\">chomp</a>.</p>\n"}], "owner": {"reputation": 436, "user_id": 5359710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-T71WMOXREWw/AAAAAAAAAAI/AAAAAAAAAPU/rrLycOSawIE/photo.jpg?sz=128", "display_name": "Alby", "link": "https://stackoverflow.com/users/5359710/alby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 42031331, "answer_count": 3, "score": 1, "last_activity_date": 1486192271, "creation_date": 1486130675, "last_edit_date": 1486132103, "question_id": 42026080, "link": "https://stackoverflow.com/questions/42026080/reading-file-and-inserting-into-variables-using-perl", "title": "Reading File and Inserting into Variables using Perl", "body": "<p>I'm new to Perl, so please bare with my on my ignorance.  What I'm trying to do is read a file (already using File::Slurp module) and create variables from the data in the file. Currently I have this setup:</p>\n\n<pre><code>use File::Slurp;\nmy @targets = read_file(\"targetfile.txt\");\nprint @targets;\n</code></pre>\n\n<p>Within that target file, I have the following bits of data:</p>\n\n<blockquote>\n  <p>id:   123456789</p>\n  \n  <p>name: anytownusa</p>\n  \n  <p>1.2.3.4/32</p>\n  \n  <p>5.6.7.8/32</p>\n</blockquote>\n\n<p>The first line is an ID, the second line is a name, and all successive lines will be IP addresses (maximum length of a few hundred).</p>\n\n<p>So my goal is to read that file and create variables that look something like this: </p>\n\n<pre><code>$var1=\"123456789\";\n\n$var2=\"anytownusa\";\n\n$var3=\"1.2.3.4/32,5.6.7.8/32,etc,etc,etc,etc,etc\";\n</code></pre>\n\n<p>** Taking note that all the IP addresses end up grouped together into a single variable and seperated by a (,) comma.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486130147, "post_id": 42025754, "comment_id": 71225665, "body": "Using B::Deparse does not reveal anything. Have you looked at B::Concise output?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486131159, "post_id": 42025754, "comment_id": 71226334, "body": "I can confirm this on Perl 5.20.1. It&#39;s interesting to see what happens when you output <code>@aTest</code> directly before the call to <code>foo()</code>. It&#39;s always <code>( 1 )</code>. It&#39;s as if there is a new <code>@aTest</code> lexical to the sub, but it has never been declared. Why does this not fail?"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1486131920, "post_id": 42025754, "comment_id": 71226796, "body": "It works fine if you declare <code>my @aTest</code> outside the <code>for</code> loop."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486132005, "post_id": 42025754, "comment_id": 71226847, "body": "I posted this question into #p5p on irc.perl.org. It creates a closure at compile time apparently, and at the first iteration they are the same, but then they diverge it seems."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1486135376, "post_id": 42025754, "comment_id": 71229126, "body": "Related: <a href=\"http://stackoverflow.com/questions/8839005/perl-what-scopes-closures-environments-are-producing-this-behaviour/8839552#8839552\" title=\"perl what scopes closures environments are producing this behaviour\">stackoverflow.com/questions/8839005/&hellip;</a>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1486135841, "post_id": 42025754, "comment_id": 71229483, "body": "<a href=\"http://stackoverflow.com/questions/4048248/variable-foo-will-not-stay-shared-warning-error-in-perl-while-calling-subrout/4048277#4048277\" title=\"variable foo will not stay shared warning error in perl while calling subrout\">stackoverflow.com/questions/4048248/&hellip;</a>, <a href=\"http://stackoverflow.com/questions/19454266/what-is-the-correct-way-to-fix-this-warning\" title=\"what is the correct way to fix this warning\">stackoverflow.com/questions/19454266/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486131090, "post_id": 42025988, "comment_id": 71226300, "body": "That doesn&#39;t really explain why the variable stays the same. It&#39;s true that subs get parsed at compile time, and that the sub is not lexical, but that is not the point. The OP knows that. The question is really why <code>@aTest</code> does not get reset. How can there be a new <code>@aTest</code> inside the scope of <code>sub foo</code> although it was never declared there. The OP is using strict."}, {"owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486133126, "post_id": 42025988, "comment_id": 71227610, "body": "Here you go <a href=\"http://www.perl.com/pub/2002/05/07/mod_perl.html#my()%20scoped%20variable%20in%20nested%20subroutines\" rel=\"nofollow noreferrer\">perl.com/pub/2002/05/07/&hellip;</a> Why do you want to understand a piece of code that you should never use?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486133234, "post_id": 42025988, "comment_id": 71227677, "body": "Aren&#39;t you curious? If you don&#39;t understand it you can never decide for yourself if you should really never use it. Instead you depend on others telling you. :)"}, {"owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486134015, "post_id": 42025988, "comment_id": 71228164, "body": "Perl is an old language and many people have come to the same conclusion at some point. You are just another person that will be wasting their time thinking there is going to be some new discovery that comes out of testing it. But there isn&#39;t, Perl has had this activity with nested subroutines since version 5.6 and maybe before that. So all that time before you people have tested and come to the conclusion that if you where to use that it will just cause more bugs or be harder to debug later."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486134667, "post_id": 42025988, "comment_id": 71228624, "body": "That&#39;s a sad way to look at it. Anyway, <a href=\"http://perldoc.perl.org/perldiag.html#Variable-%22%25s%22-will-not-stay-shared\" rel=\"nofollow noreferrer\">the warning</a> the article you linked shows is not issued at least in my Perl 5.20.1. It&#39;s in the <i>closure</i> category, and it is also not shown with <code>use warnings &#39;all&#39;</code>. Back in 2002 when 5.6 was new (as it says there now are warnings) that was issued, but it&#39;s not any more. Also, no-one has said anything about wanting to use this. We are all just curious."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1486135519, "post_id": 42025988, "comment_id": 71229230, "body": "If you wrap the whole code in a subroutine, you will get <a href=\"http://perldoc.perl.org/perldiag.html#Variable-%22%25s%22-will-not-stay-shared\" rel=\"nofollow noreferrer\">the warning</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486150773, "post_id": 42025988, "comment_id": 71238024, "body": "@simbabque, &quot;Will not stay shared&quot; is not issued here because it&#39;s fairly common to place named subs in loops. e.g. <code>{ my $x; sub foo { return $x ||= ...; } }</code>. Remember that <code>{ }</code> is a loop that executes once (like <code>for (1) { }</code>). <code>next</code> (ends the loop), <code>redo</code> (restarts the loop) and <code>last</code> (ends the loop) can all be used in it."}], "tags": [], "owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "is_accepted": false, "score": 1, "last_activity_date": 1486130390, "last_edit_date": 1592644375, "creation_date": 1486130390, "answer_id": 42025988, "question_id": 42025754, "link": "https://stackoverflow.com/questions/42025754/perl-scoping-accessing-variables-in-subroutine/42025988#42025988", "title": "Perl scoping - accessing variables in subroutine", "body": "<p>You nested the subroutine so it will not behave the way you expected.</p>\n<blockquote>\n<p>Subroutines are stored in a global namespace at compile time. In your example b(); is short hand for main::b();. To limit visibility of a function to a scope you need to assign an anonymous subroutines to a variable.</p>\n<p>Both named and anonymous subroutines can form closures, but since named subroutines are only compiled once if you nest them they don't behave as many people expect.</p>\n</blockquote>\n<p>Please read the rest <a href=\"https://stackoverflow.com/questions/10192228/nested-subroutines-and-scoping-in-perl\" title=\"Nested subroutine\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1486132906, "last_edit_date": 1495542813, "creation_date": 1486132906, "answer_id": 42026769, "question_id": 42025754, "link": "https://stackoverflow.com/questions/42025754/perl-scoping-accessing-variables-in-subroutine/42026769#42026769", "title": "Perl scoping - accessing variables in subroutine", "body": "<p>I posted this question into #p5p on irc.perl.org and got an interesting exchange that explains what's going on.</p>\n\n<blockquote>\n  <p>[15:13:35] &lt;simbabque> can someone explain what's going on in <a href=\"https://stackoverflow.com/questions/42025754/perl-scoping-accessing-variables-in-subroutine\">Perl scoping - accessing variables in subroutine</a> ? I've tried to read the output of B::Concise for that program, but my understanding is not strong enough. Could the behaviour we see there be a bug?<br>\n  [15:15:35] &lt;rjbs> &amp;foo is a closure over @aTest.<br>\n  [15:16:33] &lt;haarg> but only the first @aTest, because &amp;foo is created once at compile time<br>\n  [15:17:01] &lt;rjbs> Right.<br>\n  [15:18:09] &lt;rjbs> declaring a named sub inside of anything other than a package or bare block is, in my experience, asking for future heartache<br>\n  [15:18:23] &lt;alh> If you had my $foo = sub { }; $foo->(); it would work as expected<br>\n  [15:18:34] &lt;alh> Or in newer perls, with use feature qw(lexical_subs); my sub foo { } foo() would also work<br>\n  [15:18:35] &lt;simbabque> well the guy said he came across it while golfing<br>\n  [15:19:13] &lt;simbabque> alh: with both of those I had also expected it to   be a closure, but because the sub foo {} gets done at compile time I was confused\n  [15:19:38] &lt;rjbs> lexical subs \"do the right thing\" with regard to binding\n  [15:19:45] &lt;alh> Still a closure, just re-evaluted every time\n  [15:20:56] &lt;haarg> they share the op tree, but are bound to different variables<br>\n  [15:23:29] &lt;simbabque> I added <code>say \"foo: \".\\@aTest;</code> and <code>say \"out \".\\@aTest;</code> inside and outside the function. That's also weird. the first round both are the same, then foo keeps the same one, and the one in the loop gets a new address and keeps it in subsequent iterations<br>\n  [15:26:48] &lt;alh> Sure, the first run through the loop, the variable that's closed over in the sub is the same one the loop sees<br>\n  [15:27:01] &lt;alh> Then we loop, and get a brand new one, but the sub doesn't (because it's not compiled again)<br>\n  [15:27:46] &lt;simbabque> alh: that makes sense, but why do all subsequent   iterations reuse the same variable but reset it in the loop? Is that just Perl being smart with its memory?<br>\n  [15:28:48] &lt;alh> No, your sub has closed over a variable and maintains a reference to it - so it never goes away and its value is maintained across sub calls<br>\n  [15:29:07] &lt;alh> There's no \"my @aTest\" in the sub to \"reset\" the variable<br>\n  [15:29:19] &lt;alh> So it just keeps its value - that's the point of a closure<br>\n  [15:29:21] &lt;simbabque> alh: I meant the one in the loop, not in the sub<br>\n  [15:29:41] &lt;alh> What's happening to the one in the loop that is surprising you?<br>\n  [15:29:52] &lt;simbabque> out: ARRAY(0x2356300) foo: ARRAY(0x2356300) out: ARRAY(0x20978b0) foo: ARRAY(0x2356300) out: ARRAY(0x20978b0) foo: ARRAY(0x2356300) out: ARRAY(0x20978b0) foo: ARRAY(0x2356300)<br>\n  [15:30:13] &lt;simbabque> the first round they are the same<br>\n  [15:30:33] &lt;simbabque> then out (that's the my @aTest in the loop) gets a new address, but the round after that it stays the same<br>\n  [15:30:49] &lt;haarg> the address stays the same<br>\n  [15:30:54] &lt;haarg> that doesn't mean it's the same variable<br>\n  [15:31:02] &lt;haarg> more \"gets the same address again\"<br>\n  [15:31:12] &lt;simbabque> so Perl just reuses that address?   </p>\n</blockquote>\n\n<p>The output I am referring to is from this modification:</p>\n\n<pre><code>for my $i(0..3) {\n  my @aTest = (1);\n\n  sub foo {\n    push @aTest, 2;\n    my $unused = 0;\n    print \" foo: \".\\@aTest;\n  }\n    print \" out: \".\\@aTest;\n\n  foo();\n}\n</code></pre>\n\n<p>So it's essentially building a closure over the <code>@aTest</code> at compile time. In the first iteration, the variable in the loop is the same as in the sub. In all subsequent iterations it creates a new variable in the loop, so we see a fresh <code>(1)</code> every time. But the sub does not get compiled again, so the <code>@aTest</code> variable in there stays the same and grows.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1486183677, "last_edit_date": 1486183677, "creation_date": 1486150317, "answer_id": 42031715, "question_id": 42025754, "link": "https://stackoverflow.com/questions/42025754/perl-scoping-accessing-variables-in-subroutine/42031715#42031715", "title": "Perl scoping - accessing variables in subroutine", "body": "<p>Before the explanation, the lesson to learn here is to not place <em>named</em> subs inside of loops or other subs. (Anonymous subs are fine.)</p>\n\n<hr>\n\n<p>Simplified example:</p>\n\n<pre><code>for (1..3) {\n   my $var = $_;\n   sub foo { say $var; }\n   foo();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n1\n1\n</code></pre>\n\n<hr>\n\n<pre><code>for (1..3) {\n   my $var = $_;\n   sub foo { say $var; }\n   foo();\n}\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>for (1..3) {\n   my $var = $_;\n   BEGIN { *foo = sub { say $var; }; }\n   foo();\n}\n</code></pre>\n\n<p>As this makes clearer, <code>$var</code> is captured <em>at compile-time</em>.</p>\n\n<p>But how can <code>$var</code> exist at compile-time? Doesn't it get created every pass of the loop? No. Something you have to realize is that <code>my</code> creates the variable <em>at compile-time</em>. At run-time, it merely places a directive on the stack that causes the variable to be cleared when the directive is popped from the stack. This allows the same <code>$var</code> to be used every pass of the loop, which is great because allocating and deallocating scalars is rather expensive.</p>\n\n<p>Now, if what I said what true, then the following would print <code>3</code> three times because <code>@a</code> would contain three reference to the same variable:</p>\n\n<pre><code>my @a;\nfor (1..3) {\n   my $x = $_;\n   push @a, \\$x;\n}\n\nsay $$_ for @a;\n</code></pre>\n\n<p>However, it prints <code>1</code>, <code>2</code> and <code>3</code> as expected. Remember that directive <code>my</code> places on the stack? It's smarter than I mentioned. If the variable contains an object, or if the variable is still being referenced by something other than the file/sub it's in (e.g. when it's been captured), then it's replaced with a fresh variable instead of being cleared.</p>\n\n<p>What this means,</p>\n\n<pre><code>                         First pass            Second pass           Third pass\nfor (1..3) {             --------------------  --------------------  --------------------\n  my $var = $_;          Orig $var assigned 1  New $var assigned 2   Same $var assigned 3\n  say \\$var;             SCALAR(0x996da8)  !=  SCALAR(0x959b78)  ==  SCALAR(0x959b78)\n  sub foo { say $var; }  Prints captured $var  Prints captured $var  Prints captured $var\n  foo();\n}                        $var is replaced      $var is cleared       $var is cleared\n                         because REFCNT=2      because REFCNT=1      because REFCNT=1\n</code></pre>\n\n<hr>\n\n<p>In contrast, try</p>\n\n<pre><code>for (1..3) {\n   my $var = $_;\n   my $foo = sub { say $var; };   # Captures $var at runtime.\n   $foo-&gt;();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n2\n3\n</code></pre>\n"}], "owner": {"reputation": 1317, "user_id": 2066474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f445bbda5c5e7b3cde0dc13abf53b575?s=128&d=identicon&r=PG", "display_name": "rbennett485", "link": "https://stackoverflow.com/users/2066474/rbennett485"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 42026769, "answer_count": 3, "score": 2, "last_activity_date": 1486183677, "creation_date": 1486129605, "last_edit_date": 1486130149, "question_id": 42025754, "link": "https://stackoverflow.com/questions/42025754/perl-scoping-accessing-variables-in-subroutine", "title": "Perl scoping - accessing variables in subroutine", "body": "<p>I am doing some code golf, and decided to try and be 'smart' and declare a subroutine where it would have the variables it needs already in scope, to avoid the extra code of having to pass in the arguments:</p>\n\n<pre><code>#! perl\n\nuse strict;\nuse warnings;\n\n\nfor my $i(0..1) {\n  my @aTest = (1);\n\n  sub foo {\n    # first time round - @aTest is (1)\n    # second time round - @aTest is (1,2)\n\n    push @aTest, 2;\n\n    # first time round - @aTest is (1,2)\n    # second time round - @aTest is (1,2,2)\n\n    my $unused = 0;\n  }\n\n  foo();\n}\n</code></pre>\n\n<p><code>foo</code> sees the variable <code>@aTest</code>, and it has the expected value of <code>(1)</code> the first time I enter <code>foo</code>, before it pushes <code>2</code> onto the array as well. <code>@aTest</code> now looks like <code>(1,2)</code>.</p>\n\n<p>So far so good.</p>\n\n<p>Then we exit <code>foo</code>, and commence the second round of the for loop. <code>@aTest</code> is reassigned to <code>(1)</code> again.</p>\n\n<p>We enter <code>foo</code> for the second time, but <code>@aTest</code> retains the value it previously had in <code>foo</code> (i.e. <code>(1,2)</code>), and then pushes another <code>2</code> on to become <code>(1,2,2)</code>.</p>\n\n<p>What's going on here?</p>\n\n<p>I assumed that since <code>@aTest</code> was in the same scope, it would be referring to the same variable both insed and outside <code>foo</code>. So how is it that inside `foo it retains its old value?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486126579, "post_id": 42024733, "comment_id": 71223522, "body": "Why is <code>OPTIONAL_URL_PARAMS</code> a function? Is that supposed to be a constant? If so, then <code>use constant</code> and make it a ref. Constants cannot be lists. They are scalar. So the <code>(&quot;welcome&quot;)</code> gets forced into scalar context, and since it&#39;s a list, it gets converted to the <i>number of elements</i> in the list."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1486126736, "post_id": 42024733, "comment_id": 71223616, "body": "How is your subroutine being called?  Is it something like <code>my_sub()</code> vs <code>my_sub(welcome =&gt; 1)</code>?  If the latter, you can stuff <code>@_</code> into a hash first."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486126991, "post_id": 42024733, "comment_id": 71223769, "body": "@simbabque It is a constant. I forgot to include that: use constant OPTIONAL_URL_PARAMS =&gt; (&#39;welcome&#39;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486126996, "post_id": 42024733, "comment_id": 71223778, "body": "If you want to compare <code>$optionalParam</code> to <code>$param</code> you need to do <code>if ($optionalParam eq $param)</code> instead of reaching into <code>$self</code>. But still, the rest is not correct."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486127025, "post_id": 42024733, "comment_id": 71223804, "body": "If it&#39;s a constant like that, your code should fail because you are derefencing a <code>1</code> as an array."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1486127087, "post_id": 42024733, "comment_id": 71223840, "body": "@cxw My sub is being called indirectly:  my $url_handler = URL::Handler-&gt;new($param, $optionalParam);  sub new {     my $class = shift;     my $args = @_;     my $self = {           param =&gt; $args{param},           optionalParams =&gt; $args{optionalParam}     } }  so basically if $optionalParam&#39;s var name is &#39;welcome&#39;, then I want to try and map it to the constant &#39;welcome&#39;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486127144, "post_id": 42024733, "comment_id": 71223873, "body": "What&#39;s in <code>$self-&gt;{$param}</code>? You&#39;re not telling us everything. My answer explains the problem with the <code>1</code> and the constant, but I think there is something else weird here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1486128684, "post_id": 42024733, "comment_id": 71224776, "body": "@simbabque: <i>&quot;Constants cannot be lists&quot;</i> Sure they can! The <code>constant</code> pragma implements constants as subroutines, so they can be anything that a subroutine can return. For instance <code>perl -E &quot;use constant LIST =&gt; ( &#39;a&#39;, &#39;b&#39;, &#39;c&#39;); say for LIST&quot;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486128755, "post_id": 42024733, "comment_id": 71224826, "body": "@Borodin oops. Ok, that makes part of my answer untrue. I&#39;ll edit/"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486130322, "post_id": 42024733, "comment_id": 71225776, "body": "@snakespan: I&#39;m baffled too. None of the code you show contains variables with the names that you mention. It&#39;s not helped by the number of bugs in your code. In your <code>sub new</code>, <code>my $args = @_</code> will set <code>$args</code> to the number of elements remaining in <code>@_</code> after you have shifted <code>$class</code> from the beginning. But then you ignore <code>$args</code> and go ahead and write code as if there was a hash <code>%args</code>. And you use constant string keys <code>&#39;param&#39;</code> and <code>&#39;optionalParam&#39;</code> instead of involving the values <code>$param</code> and <code>$optionalParam</code> from the passed parameters."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1486130517, "post_id": 42024733, "comment_id": 71225917, "body": "I think you&#39;re rather lost, and you should take a few steps back and explain the problem you&#39;re trying to solve in a new question, together with your design ideas and the code you have written."}], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486127379, "post_id": 42025024, "comment_id": 71224008, "body": "That still doesn&#39;t answer my question though. Simply put, I want to output the variable name &#39;welcome&#39; instead of its value. Is there a way in Perl to do that?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486128032, "post_id": 42025024, "comment_id": 71224385, "body": "@snakespan what variable has a name &#39;welcome&#39;? <code>$param</code> contains the string <i>welcome</i>. I don&#39;t understand what you want to do."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486128490, "post_id": 42025024, "comment_id": 71224655, "body": "$param does, you&#39;re right, but $optionalParam contains a value. So how do I get the variable name associated with that value?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 1, "creation_date": 1486128673, "post_id": 42025024, "comment_id": 71224771, "body": "@snakespan what variable name? I still don&#39;t understand what you want to do. Please try to take a step back and explain in a broader context."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486128892, "post_id": 42025024, "comment_id": 71224898, "body": "OK, step back. When I create a variable, it stores it in memory as var = 1; Instead of getting the value of 1, I want the var name, so I can match against a list of &#39;approved URL params&#39; so I can use later. Hope that explains things better :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486128953, "post_id": 42025024, "comment_id": 71224937, "body": "@snakespan how do you decide that there is a variable <code>var</code>? That&#39;s btw not a variable. Perl variables need to have a sigil, so it could be <code>$var</code>."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 1, "creation_date": 1486129926, "post_id": 42025024, "comment_id": 71225498, "body": "simbabque, thanks for working with the OP to clarify the question!  You have my upvote."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486130226, "post_id": 42025024, "comment_id": 71225716, "body": "Hi, you&#39;re focusing on semantics / syntax instead of my argument. I was giving a language agnostic example there. The point has been answered, when you pass a variable to a method, you don&#39;t get both its name and value, you only get its value, so its impossible to match against."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1486134274, "post_id": 42025024, "comment_id": 71228344, "body": "<i>&quot;language agnostic&quot;</i> isn&#39;t half of it. Your imagined functionality isn&#39;t available in any modern language that I know about. I wonder where you got the idea?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1486128903, "last_edit_date": 1486128903, "creation_date": 1486127109, "answer_id": 42025024, "question_id": 42024733, "link": "https://stackoverflow.com/questions/42024733/matching-optional-query-parameters-using-the-variable-name/42025024#42025024", "title": "Matching optional query parameters using the variable name", "body": "<h2>This is not an answer any more, but I cannot remove it yet as there is still a discussion going on to clarify the question.</h2>\n\n<blockquote>\n<pre><code>foreach my $param (@{&amp;OPTIONAL_URL_PARAMS}) {\n     # ...\n}\n</code></pre>\n</blockquote>\n\n<p>The return value of <code>OPTIONAL_URL_PARAMS</code> (you already got an error here and that's why you have the <code>&amp;</code>, that should have told you something...) is simply a list, not an array ref. Actually at this point it should throw an error because you <em>cannot use <code>1</code> as an array reference</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1486128974, "post_id": 42025519, "comment_id": 71224952, "body": "@snakespan Per your <a href=\"http://stackoverflow.com/questions/42024733/perl-matching-optional-query-params-using-variable-name/42025519#comment71224898_42025024\">last comment</a>, you can&#39;t get from a parameter back to the name of the variable it came from."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486129019, "post_id": 42025519, "comment_id": 71224978, "body": "OK, that kind of answers my question actually. I thought when a variable is passed in, even though you&#39;re only passing in the value, you&#39;re somehow able to pluck the variable name out of memory and use it. I&#39;ll use a hash instead which will probably make life easier. Thanks"}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486130244, "post_id": 42025519, "comment_id": 71225730, "body": "For the record, I can using strict and warnings, but I though it unnecessary to paste it because it&#39;s normally assumed. Appreciate the help."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1486130790, "post_id": 42025519, "comment_id": 71226111, "body": "<i>&quot;I though it unnecessary to paste [strict and warnings] because it&#39;s normally assumed&quot;</i> Far from it, sadly. There is still a large number of  programmers who avoid <code>use strict</code> and <code>use warnings</code> (or, worse, write it and comment it out) mainly because they produce errors that they don&#39;t want to see! You should also show the shebang line, if you have one, because it may impact on the behaviour of the program."}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": true, "score": 1, "last_activity_date": 1486129877, "last_edit_date": 1592644375, "creation_date": 1486128767, "answer_id": 42025519, "question_id": 42024733, "link": "https://stackoverflow.com/questions/42024733/matching-optional-query-parameters-using-the-variable-name/42025519#42025519", "title": "Matching optional query parameters using the variable name", "body": "<h2>Edit</h2>\n<p>In Perl, when you pass arguments to a subroutine, all the values are flattened into a single list (<a href=\"https://perlmaven.com/variable-number-of-parameters\" rel=\"nofollow noreferrer\">reference</a>).  Specifically, if you are passing parameters to a <code>sub</code>, the sub doesn't know the names of the variables you originally used.  It only knows their values.  Therefore, if you want names as well as values, you have to pass them separately.  An easy way is using a hash.  E.g., in <code>new()</code>:</p>\n<pre><code>    my $class = shift;\n    my $param = shift;    # The first, required parameter\n    my %therest = (@_);   # Optional parameters, if any\n</code></pre>\n<p>Then you can say <code>URL::Handler-&gt;new($param, 'welcome' =&gt; 1)</code>, and <code>$therest{welcome}</code> will have the value <code>1</code>.  You can also say</p>\n<pre><code>URL::Handler-&gt;new($param, 'welcome'=&gt;1, 'another'=&gt;42);\n</code></pre>\n<p>and <code>%therest</code> will have the two keys <code>welcome</code> and <code>another</code>.</p>\n<p>See also <a href=\"https://stackoverflow.com/a/803883/2877364\">some further discussion</a> of passing whole hashes as parameters</p>\n<h2>Original</h2>\n<p>This also probably doesn't answer the question!</p>\n<p>Some thoughts on the code from your comment.</p>\n<pre><code>my $url_handler = URL::Handler-&gt;new($param, $optionalParam); \nsub new { \n    my $class = shift;   # OK; refers to URL::Handler\n    my $args = @_;       # Problematic: now $args is the _number_ of args passed (list @_ evaluated in scalar context).\n    my $self = { \n        # There is no %args hash, so the next two lines are not doing what you expect.\n        # I actually don't know enough perl to know what they do! :)\n        param =&gt; $args{param},   \n        optionalParams =&gt; $args{optionalParam} \n    };\n}\n</code></pre>\n<p>Some thoughts:</p>\n<ul>\n<li><code>use strict;</code> and <code>use warnings;</code> at the top of your source file, if you haven't yet.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1486135847, "last_edit_date": 1486135847, "creation_date": 1486133980, "answer_id": 42027127, "question_id": 42024733, "link": "https://stackoverflow.com/questions/42024733/matching-optional-query-parameters-using-the-variable-name/42027127#42027127", "title": "Matching optional query parameters using the variable name", "body": "<p>I can think of no languages other than Algol 60 that support this idea. It goes against the idea of encapsulation, and prevents you from using an array or hash element, a function call, a constant, or an expression as the actual parameter to a call</p>\n\n<p><strong><em>Variable names are purely for the convenience of the programmer</em></strong> and have no part in the functionality of any running program. If you wished so, you could write your code using a single array <code>@memory</code> and have \"variables\" <code>$memory[0]</code>, <code>$memory[1]</code> etc. But you would be bypassing the most useful part of compiler technology that allows us to relate readable text to memory locations. It is best to consider those names to be <em>lost</em> once the program is running</p>\n\n<p>The called code should be interested only in the <em>values</em> passed, and it would be a nightmare if the name of a variable passed as an actual parameter were significant within the subroutine</p>\n\n<p>If you were able to access the name of a variable passed as a parameter, what do you suppose would be provided to subroutine <code>stats</code> if the call looked like this</p>\n\n<pre><code>stats( ( $base[$i] + 0.6 + sum(@offset{qw/ x y /}) + sum(@aa) ) / @aa )\n</code></pre>\n\n<p>In summary, it cannot be done in general. If you need to associate a value with a name then you should probably be looking at hashes</p>\n\n<hr>\n\n<p>Your code</p>\n\n<pre><code>my $url_handler = URL::Handler-&gt;new($param, $optionalParam); \n\nsub new { \n    my $class = shift; \n    my $args = @_; \n\n    my $self = { \n        param          =&gt; $args{param}, \n        optionalParams =&gt; $args{optionalParam} \n    };\n}\n</code></pre>\n\n<p>has a number of problems</p>\n\n<p>You correctly <code>shift</code> the name of the class from parameter array <code>@_</code>, but then set <code>my $args = @_</code>, which sets <code>$args</code> to the <em>number of elements</em> remaining in <code>@_</code>. But the value of <code>$args</code> is irrelevant because you never use it again</p>\n\n<p>You then set <code>$self</code> to a new anonymous hash, which is created with two elements, using the values from hash <code>%args</code>. But <code>%args</code> doesn't exist, so the value of both elements will be <code>undef</code>. Had you put <code>use strict</code> and <code>use warnings 'all'</code> in place you would have been alerted to this</p>\n\n<p>The keys that you're using to access this non-existent hash are <code>param</code> and <code>optionalParam</code>, and I think it's more than a coincidence that they match the names of the actual parameters of the call to <code>new</code></p>\n\n<p>While Perl is unusual in that it allows programmatic access to its symbol tables, it is an arcane and unrecommended method. <strong><em>Those names are essentially hidden from the program and the programmer</em></strong> and while modules like <a href=\"https://metacpan.org/pod/Exporter\" rel=\"nofollow noreferrer\">Exporter</a> must manipulate symbol tables to do their job, any such behaviour inside base-level software is very much to be avoided</p>\n\n<p>Finally, you never use <code>$self</code> again after defining it. You should be blessing it into a class according to the <code>$class</code> variable (which contains the string <code>URL::Handler</code>) and returning it from the constructor</p>\n\n<p>I hope this helps</p>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 42025519, "answer_count": 3, "score": 1, "last_activity_date": 1486135847, "creation_date": 1486126177, "last_edit_date": 1592644375, "question_id": 42024733, "link": "https://stackoverflow.com/questions/42024733/matching-optional-query-parameters-using-the-variable-name", "title": "Matching optional query parameters using the variable name", "body": "<p>I want to create a hash of optional query parameters that are sometimes passed to my subroutine. Sometimes a query parameter called <code>welcome</code> is passed in, and the value is either 1 or 0.</p>\n<p>If that variable exists, I want to add it to a hash.</p>\n<p>I've created a configuration value called OPTIONAL_URL_PARAMS which is a list of expected parameter names that can be passed in:</p>\n<pre><code>use constant OPTIONAL_URL_PARAMS =&gt; (&quot;welcome&quot;)\n</code></pre>\n<p>So far I have:</p>\n<pre><code>my $tempParams = {};\n\nif ( $optionalParam ) {\n\n    foreach my $param (@{&amp;OPTIONAL_URL_PARAMS}) {\n\n        if ($optionalParam eq $self-&gt;{$param}) {\n\n            $tempParams-&gt;{$param} = $optionalParam;\n            $tempParams-&gt;{$param} =~ s/\\s+//g; # strip whitespace \n        }   \n    }\n}\n</code></pre>\n<p>But this tries to use the <em>value</em> of <code>$self-&gt;{$param}</code> instead of its name. i.e. I want welcome to match <code>welcome</code>, but it's trying to match 1 instead.</p>\n<p>I know when it comes to keys in a hash you can use <code>keys %hash</code>, but is there a way you can do this with regular variables?</p>\n<h3>Edit</h3>\n<p>My subroutine is being called indirectly:</p>\n<pre><code>my $url_handler = URL::Handler-&gt;new($param, $optionalParam); \n\nsub new { \n    my $class = shift; \n    my $args = @_; \n    my $self = { \n        param          =&gt; $args{param}, \n        optionalParams =&gt; $args{optionalParam} \n    };\n} \n</code></pre>\n<p>If <code>$optionalParam</code>'s variable name is 'welcome', then I want to try and map it to the constant <code>welcome</code>.</p>\n"}, {"tags": ["perl", "log4j"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1486135627, "post_id": 42021502, "comment_id": 71229311, "body": "The example works for me: when I add <code>print STDERR &#39;foo&#39;;</code> after the <code>tie</code> statement, <code>2017&#47;02&#47;03 08:23:51 main::: foo</code> is written to stdout. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486364921, "post_id": 42021502, "comment_id": 71296066, "body": "@ThisSuitIsBlackNot the thing you tested is always coming but what for the case when you encounter an error in the code which you have not handled. The full stack trace for  that is to be logged by the Trapper module and needs to be logged from inside it only."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486394119, "post_id": 42021502, "comment_id": 71313517, "body": "I get the same results with <code>warn &#39;foo&#39;;</code> and <code>die &#39;foo&#39;;</code>. Again, you haven&#39;t shown enough code to know what the cause is; please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486115911, "creation_date": 1486115911, "question_id": 42021502, "link": "https://stackoverflow.com/questions/42021502/layout-not-maintained-in-log4perl", "title": "Layout not maintained in Log4perl", "body": "<p>I found the below exapmle for appending STDERR to the Log file using <a href=\"http://search.cpan.org/~mschilli/Log-Log4perl-1.48/lib/Log/Log4perl.pm\" rel=\"nofollow noreferrer\">Log::Log4perl</a>.</p>\n\n<p><a href=\"http://log4perl.sourceforge.net/releases/Log-Log4perl/docs/html/Log/Log4perl/FAQ.html\" rel=\"nofollow noreferrer\">Link to the Example Page</a></p>\n\n<pre><code>########################################\n package Trapper;\n########################################\n\n    use Log::Log4perl qw(:easy);\n\n    sub TIEHANDLE {\n        my $class = shift;\n        bless [], $class;\n    }\n\n    sub PRINT {\n        my $self = shift;\n        $Log::Log4perl::caller_depth++;\n        DEBUG @_;\n        $Log::Log4perl::caller_depth--;\n    }\n    1;\n########################################\n    package main;\n########################################\n    use Log::Log4perl qw(:easy);\n    Log::Log4perl-&gt;easy_init(\n        {level  =&gt; $DEBUG, \n         file   =&gt; 'stdout',   # make sure not to use stderr here!\n         layout =&gt; \"%d %M: %m%n\",\n        });\n    tie *STDERR, \"Trapper\";\n</code></pre>\n\n<p>But I am not able to apply the logger layout to the lines logged by the Trapper module. Means they are just coming in the Log file without any date,module name etc. Is there a way??</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1486109950, "creation_date": 1486109950, "answer_id": 42019695, "question_id": 42019492, "link": "https://stackoverflow.com/questions/42019492/unable-to-install-perl-module-lwpprotocolhttps/42019695#42019695", "title": "unable to Install Perl module LWP::Protocol::https", "body": "<blockquote>\n  <p>Can't connect to www.perl.org:80</p>\n</blockquote>\n\n<p>Looks like your system can not get a connection to the servers providing the software. Either you are offline, blocked by a firewall or you need to configure a proxy to reach the internet. This should affect any tools on the system, not just cpan. Note that any proxy settings you might have in your shell already do not get propagated to perl/cpan when you use sudo.</p>\n"}], "owner": {"reputation": 1, "user_id": 7510030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60d80223ad7fb369934e9c647cc7701?s=128&d=identicon&r=PG&f=1", "display_name": "follower", "link": "https://stackoverflow.com/users/7510030/follower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486109950, "creation_date": 1486109105, "question_id": 42019492, "link": "https://stackoverflow.com/questions/42019492/unable-to-install-perl-module-lwpprotocolhttps", "title": "unable to Install Perl module LWP::Protocol::https", "body": "<p>i am trying to install perl package LWP::UserAgent using command \"sudo perl -MCPAN -e shell; but it gives following error</p>\n\n<pre><code>Warning: no success downloading '/root/.cpan/sources/authors/01mailrc.txt.gz.tmp4331'. Giving up on it. at /usr/share/perl5/CPAN/Index.pm line 225\nFetching with LWP:\n  http://www.perl.org/CPAN/autho`rs/01mailrc.txt.gz\nLWP failed with code[500] message[Can't connect to www.perl.org:80 (connect: No route to host)]\n\nTrying with \"/usr/bin/curl -L -f -s -S --netrc-optional\" to get\n    \"http://www.perl.org/CPAN/authors/01mailrc.txt.gz\"\ncurl: (7) couldn't connect to host\n\n\nResolving ftp.perl.org... 204.157.3.70, 209.221.142.115\nConnecting to ftp.perl.org|204.157.3.70|:21... failed: No route to host.\nConnecting to ftp.perl.org|209.221.142.115|:21... failed: No route to host.\n\n\n    Warning: no success downloading '/root/.cpan/sources/authors/01mailrc.txt.gz.tmp4331'. Giving up on it. at /usr/share/perl5/CPAN/Index.pm line 225\nNo external ftp command available\n\nYour urllist is empty! The urllist can be edited. E.g. with 'o conf urllist\npush ftp://myurl/'\n\nYour urllist is empty! The urllist can be edited. E.g. with 'o conf urllist\npush ftp://myurl/'\n\nCould not fetch authors/01mailrc.txt.gz\nTerminal does not support GetHistory.\nLockfile removed.\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486157556, "post_id": 42019311, "comment_id": 71241204, "body": "This is a good approach, for its flexibility. It is very easy to tweak, when new needs come up. A couple of comments. There isn&#39;t much benefit to first testing (with a regex match) in order to process (with a regex substitution) -- if <code>s&#47;</code> doesn&#39;t match it won&#39;t change its target. I think that in this case <code>\\b</code> sufficies as an anchor, and that loop labels make it perhaps less readable (as a matter of taste, of course).  However, they are certainly useful as demonstrations."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1486158239, "post_id": 42019311, "comment_id": 71241503, "body": "In fact, since you nicely <code>split</code> into words first there is no reason for an anchor, since a word is tested against a word. But I&#39;d suggest to split by any amount of whitespace, to be on the safe side. The default for this is <code>&#39; &#39;</code> pattern (or of course the equivalent <code>&#47;\\s*&#47;</code>). These comments aren&#39;t meant to detract from the answer, which I think is good and useful to have :)"}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486300165, "post_id": 42019311, "comment_id": 71276972, "body": "Thanks for the clarifications zdin. However that&#39;s where I meet my own limits in perl: I want to avoid multiple substitutions, that&#39;s why I let the test in place: in order to be sure that a single word is substituted only once. If I don&#39;t use the test, how I will know that a substitution took place and subsequently stop the loop to switch to the next word?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1486336024, "post_id": 42019311, "comment_id": 71289369, "body": "Ah, I see your point. It&#39;s safe though, since the code runs through a fixed list of <code>$word</code>s -- they are not aliased (when a word changes the list and the <code>$patient</code> don&#39;t). However, you are right that you must stop looping. Which can be done by capturing <code>{($key)}{...}</code> and then <code>last if $1</code>.  But that may be silly, as capturing is done <i>only</i> to be able to test. There are internal regex variables that can be queried to see whether a match occurred, but then that may be a little tricky. Now, this part is a disadvantage of explicit looping - there are the details :)."}], "tags": [], "owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "is_accepted": true, "score": 2, "last_activity_date": 1486299902, "last_edit_date": 1486299902, "creation_date": 1486108394, "answer_id": 42019311, "question_id": 42018775, "link": "https://stackoverflow.com/questions/42018775/pattern-matching-and-regular-expression-in-perl/42019311#42019311", "title": "pattern matching and regular expression in perl?", "body": "<p><strong><em>EDIT:</strong> As suggested by @zdin, I replace <code>'\\s'</code> by <code>' '</code> which will match any number of whitespaces and also ignore leading whitespaces.</em></p>\n\n<p>That's because you are looping over the full key of your %reflections hash and make systematic replacements. Therefore, you find the \"am\" key at loop 1 and replace it with \"are\". Then you find the \"are\" key at loop 8 and replace it with \"am\".</p>\n\n<p>As you make single word replacements, you should rather ensure you run over a single word only once by using split:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $question = '';\n\nwhile ($question ne 'stop') {\n    $question = &lt;STDIN&gt;;\n    chomp $question;\n    print makeQuestion($question).\"\\n\";\n}\n\nsub makeQuestion{\n    my ($patient) = @_;\n    my @new_question;\n    my %reflections = (\n        \"am\"    =&gt;   \"are\",\n        \"was\"   =&gt;   \"were\",\n        \"i\"     =&gt;   \"you\",\n        \"i'd\"   =&gt;   \"you would\",\n        \"i've\"  =&gt;   \"you have\",\n        \"i'll\"  =&gt;   \"you will\",\n        \"my\"    =&gt;   \"your\",\n        \"are\"   =&gt;   \"am\",\n        \"you've\"=&gt;   \"I have\",\n        \"you'll\"=&gt;   \"I will\",\n        \"your\"  =&gt;   \"my\",\n        \"yours\" =&gt;   \"mine\",\n        \"you\"   =&gt;   \"me\",\n        \"me\"    =&gt;   \"you\",\n    );\n    WORDS: foreach my $word (split ' ', $patient) {\n        REPLACE: foreach my $key (keys %reflections) {\n            if ($word =~ m{\\A$key\\Z}i) {\n                $word =~ s{$key}{$reflections{$key}}i;\n                 last REPLACE;\n            }\n        }\n       push @new_question, $word;\n    }\n    return join ' ', @new_question;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1486157554, "post_id": 42019449, "comment_id": 71241203, "body": "@DavidVerdin  Well, thank you. I&#39;d like to note though that procedural, item-by-item, solutions (like yours) have clear advantages.  Firstly, they are more flexible -- one can just add code as more processing gets needed. When it&#39;s folded in a <code>map</code> it may be harder to tweak things."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1486190965, "last_edit_date": 1495540406, "creation_date": 1486108954, "answer_id": 42019449, "question_id": 42018775, "link": "https://stackoverflow.com/questions/42018775/pattern-matching-and-regular-expression-in-perl/42019449#42019449", "title": "pattern matching and regular expression in perl?", "body": "<p>Your code makes circular replacements, since it always processes the whole phrase. It replaces a word, only to later replace <em>that</em> replacement.  The <a href=\"https://stackoverflow.com/a/42019311/4653379\">answer by David Verdin</a> explains it and shows a way to fix this.</p>\n\n<p>Here is another way</p>\n\n<pre><code>my $phrase =  join ' ', map { $reflections{$_} // $_ } split ' ', $patient;\n</code></pre>\n\n<p>The list of words produced by <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> is fed to <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a>, which applies the code in the block to each.  Inside the block the currently processed element is in the default <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">$_ variable</a>.</p>\n\n<p>If the word is a key in the hash with a <code>defined</code> value then that value is returned, otherwise the word itself is returned. This is achieved by <code>//</code>, the <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\"><em>defined-or</em> operator</a>. Thus all words that have a hash key get replaced by the corresponding values, while others are passed along unchanged.  Their order is kept as well so we get our list of words processed as needed.</p>\n\n<p>That output list is then joined by space, forming the phrase to be prepended by <code>'Why '</code></p>\n\n<p>Note that the pattern <code>' '</code> in <code>split</code> matches any amount of any whitespace. It is commonly used to break strings \"by space\" (into \"words\") and is <code>split</code>'s default.</p>\n\n<hr>\n\n<p>I'd like to add a comment on the regular expression use in the posted code. You don't need to first test for a match in order to do the substitution. You can just do</p>\n\n<pre><code>foreach my $item (@list) {\n    $item =~ s/$pattern/$repl/;\n}\n</code></pre>\n\n<p>and if the <code>$pattern</code> doesn't match in <code>$item</code> nothing happens, the <code>$item</code> is unchanged.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1176583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VPhnx.png?s=128&g=1", "display_name": "abrahamdsl", "link": "https://stackoverflow.com/users/1176583/abrahamdsl"}, "is_accepted": false, "score": 0, "last_activity_date": 1486111217, "last_edit_date": 1486111217, "creation_date": 1486110156, "answer_id": 42019742, "question_id": 42018775, "link": "https://stackoverflow.com/questions/42018775/pattern-matching-and-regular-expression-in-perl/42019742#42019742", "title": "pattern matching and regular expression in perl?", "body": "<p>This happens because in the particular phrase/sentence, there are two eligible candidates  in matching your regex. And also, the fact is, elements of hashes are ordered in a random way in memory. In your code, you just got the keys of <code>%refelections</code> , you did not provide for sorting that. Therefore, every run, <code>keys %reflections</code> will return array of different sorting. For example, in Run 1, it might be <code>( 'am', 'i', 'my', me' ... )</code>, then next run <code>( 'i', \"you'll', 'my', 'yours' )</code>.</p>\n"}], "owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 42019311, "answer_count": 3, "score": 2, "last_activity_date": 1486299902, "creation_date": 1486106302, "question_id": 42018775, "link": "https://stackoverflow.com/questions/42018775/pattern-matching-and-regular-expression-in-perl", "title": "pattern matching and regular expression in perl?", "body": "<p>i am working on chet-bot program in perl and regular expression but i am not getting the desired results  as you see i have all pronouns and verbs in hash and i am loop through string and if it match hash key then replace hash key value with the current substring value. </p>\n\n<p><strong>program output</strong> <br>\n<strong>Eliza:</strong> Hi, I'm a psychotherapist. What is your name? <br>\n<strong>adam:</strong> my name is adam<br>\n<strong>Eliza:</strong> Hello  adam , How are you? <br>\n<strong>adam:</strong> i am feeling bad <br>\n<strong>Eliza:</strong> Why you am feeling bad ? <br>\n<strong>adam:</strong> because i am sick<br>\n<strong>Eliza:</strong> Why because you am sick?<br></p>\n\n<p>regardless of \"because\" word in last question but output should be something like this <br></p>\n\n<p><strong>Eliza:</strong> Why because you are sick?<br>\nany suggestions of how i can solve this issue.<br></p>\n\n<p><strong><em>code:</em></strong> <br></p>\n\n<pre><code>sub makeQuestion{\n    my ($patient) = @_;\n    my %reflections = (\n        \"am\"    =&gt;   \"are \",\n        \"was\"   =&gt;   \"were \",\n        \"i\"     =&gt;   \"you \",\n        \"i'd\"   =&gt;   \"you would \",\n        \"i've\"  =&gt;   \"you have \",\n        \"i'll\"  =&gt;   \"you will \",\n        \"my\"    =&gt;   \"your \",\n        \"are\"   =&gt;   \"am \",\n        \"you've\"=&gt;   \"I have \",\n        \"you'll\"=&gt;   \"I will \",\n        \"your\"  =&gt;   \"my \",\n        \"yours\" =&gt;   \"mine \",\n        \"you\"   =&gt;   \"me \",\n        \"me\"    =&gt;   \"you \"\n    );\n\n    my @toBes = keys %reflections;\n    foreach my $toBe (@toBes) {\n        if ($patient =~/$toBe\\b/)\n        {\n            $patient=~ s/$toBe /$reflections{$toBe}/i;\n\n        }\n\n    }\n    print \"Why $patient? \\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "directory"], "answers": [{"tags": [], "owner": {"reputation": 694, "user_id": 5565079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/787c90b1d45983c24c3c26ec22606cef?s=128&d=identicon&r=PG&f=1", "display_name": "Alice Oualouest", "link": "https://stackoverflow.com/users/5565079/alice-oualouest"}, "is_accepted": false, "score": 0, "last_activity_date": 1486111291, "creation_date": 1486111291, "answer_id": 42020064, "question_id": 42018771, "link": "https://stackoverflow.com/questions/42018771/perl-dircompare-exclude-dirs/42020064#42020064", "title": "Perl DirCompare exclude dirs", "body": "<p><strong>solution 1</strong></p>\n\n<p>According to the <a href=\"http://search.cpan.org/~gavinc/File-DirCompare-0.3/DirCompare.pm\" rel=\"nofollow noreferrer\">DirCompare documentation</a>, you can provide a fourth argument to the compare function (cmp) and do a custom test.</p>\n\n<p><strong>solution 2</strong></p>\n\n<p>Another way is to test $dir1 and $dir2 for excluded directory names, and to set $equal to 0 only if $dir1 and $dir2 are not excluded.</p>\n\n<pre><code>if ( not_excluded($dir1) &amp;&amp; not_excluded($dir2) ) {\n $equal = 0;\n}\n</code></pre>\n\n<p>(not_excluded being a custom function written by you, returning true if provided dir is not excluded)</p>\n"}], "owner": {"reputation": 13, "user_id": 7210702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffae985c79fe5e9b35ff3ab81187ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "Silent", "link": "https://stackoverflow.com/users/7210702/silent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486111291, "creation_date": 1486106296, "last_edit_date": 1495541808, "question_id": 42018771, "link": "https://stackoverflow.com/questions/42018771/perl-dircompare-exclude-dirs", "title": "Perl DirCompare exclude dirs", "body": "<p>I got a code from <a href=\"https://stackoverflow.com/a/9480331/7210702\">here</a> to compare the differences in all the files present in the directories recursively</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse File::DirCompare;\nuse File::Basename;\n\nsub compare_dirs\n{\n  my ($dir1, $dir2) = @_;\n  my $equal = 1;\n\n  File::DirCompare-&gt;compare($dir1, $dir2, sub {\n    my ($a,$b) = @_;\n    $equal = 0; # if the callback was called even once, the dirs are not equal\n\n    if ( !$b )\n    {\n      printf \"File '%s' only exists in dir '%s'.\\n\", basename($a), dirname($a);\n    }\n    elsif ( !$a ) {\n      printf \"File '%s' only exists in dir '%s'.\\n\", basename($b), dirname($b);\n    }\n    else\n    {\n      printf \"File contents for $a and $b are different.\\n\";\n    }\n  });\n\n  return $equal;\n}\n\nprint \"Please specify two directory names\\n\" and exit if (@ARGV &lt; 2);\nprintf \"%s\\n\", &amp;compare_dirs($ARGV[0], $ARGV[1]) ? 'Test: PASSED' : 'Test: FAILED';\n</code></pre>\n\n<p>I want to exclude some of the directories like .old, .pro, etc.</p>\n\n<p>I dont find a way to do this here?</p>\n"}, {"tags": ["perl", "stored-procedures", "sybase"], "comments": [{"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "edited": false, "score": 0, "creation_date": 1486105630, "post_id": 42018529, "comment_id": 71211543, "body": "which module are you using for sybase?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1486106029, "post_id": 42018529, "comment_id": 71211734, "body": "I think you have to look at <code>$sth-&gt;{syb_result_type}</code> and ignore the result types in which you aren&#39;t interested. See DBD::Sybase&#39;s docs for the possible values"}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486106216, "post_id": 42018529, "comment_id": 71211832, "body": "@ikegami Thanks alot, been stuck on it for a long time."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1486106262, "post_id": 42018529, "comment_id": 71211844, "body": "Also see <a href=\"http://infocenter.sybase.com/help/topic/com.sybase.help.mainframeconnect_12.6.occprc/html/occprc/X12699.htm\" rel=\"nofollow noreferrer\">this</a> which describes the result types a little. But do read DBD::Sybase too."}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486106363, "post_id": 42018529, "comment_id": 71211891, "body": "@ikegami you can put that in the answer, and I&#39;ll accept and close this thread"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486106750, "post_id": 42018529, "comment_id": 71212087, "body": "Only because you asked, since I&#39;m just guessing."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1486106686, "creation_date": 1486106686, "answer_id": 42018876, "question_id": 42018529, "link": "https://stackoverflow.com/questions/42018529/fetchrow-array-returns-extra-0-in-the-end/42018876#42018876", "title": "fetchrow_array returns extra 0 in the end", "body": "<p>Based on a quick look around the web, I'm guessing you have to look at <code>$sth-&gt;{syb_result_type}</code> and ignore the result types in which you aren't interested. </p>\n\n<p>Read both the docs for <a href=\"http://search.cpan.org/perldoc?DBD::Sybase\" rel=\"nofollow noreferrer\">DBD::Sybase</a> (which documents <code>$sth-&gt;{syb_result_type}</code>) and <a href=\"http://infocenter.sybase.com/help/topic/com.sybase.help.mainframeconnect_12.6.occprc/html/occprc/X12699.htm\" rel=\"nofollow noreferrer\">this</a> (which describes the result types a little). </p>\n\n<p>I think the <code>0</code> is the <code>CS_STATUS_RESULT</code>, the result of the stored procedure. I think I found corroboration that zero indicates success.</p>\n"}], "owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 42018876, "answer_count": 1, "score": 0, "last_activity_date": 1486106686, "creation_date": 1486105359, "last_edit_date": 1486105702, "question_id": 42018529, "link": "https://stackoverflow.com/questions/42018529/fetchrow-array-returns-extra-0-in-the-end", "title": "fetchrow_array returns extra 0 in the end", "body": "<p>I am calling the sybase stored proc below from perl</p>\n\n<pre><code>create  procedure  testprocedure2 as \nbegin\n  select 'one'\nend\nGO \n</code></pre>\n\n<p>In perl I use DBI</p>\n\n<pre><code>do {\n      while(my @row = $sth-&gt;fetchrow_array()){\n            print $row[0].\"\\n\";\n      }\n  } while ($sth-&gt;{syb_more_results});\n</code></pre>\n\n<p>As a result, I get </p>\n\n<pre><code>One\n0\n</code></pre>\n\n<p>Why am i getting an extra 0 in the end?</p>\n"}, {"tags": ["r", "excel", "perl"], "comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1486106205, "post_id": 42016803, "comment_id": 71211824, "body": "This is not a code problem. You should ask whoever wrote the conversion script."}], "owner": {"reputation": 21, "user_id": 7509357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7a853f6947f34c93c3b17625017048?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/7509357/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1486096182, "creation_date": 1486096182, "question_id": 42016803, "link": "https://stackoverflow.com/questions/42016803/r-librarygdata-error-parsing-file-and-read-xls-fails-to-create-intermediat", "title": "r - Library:gdata - Error parsing file, and read.xls fails to create Intermediate csv", "body": "<p>I tried to import a xls file in to R, but it failed. It seems like the library fails to create intermediate csv file. Is any solution to this?</p>\n\n<p>Thanks.</p>\n\n<pre><code>test &lt;- read.xls(\"~/Desktop/qwe.xls\", perl = '/usr/bin/perl', verbose = TRUE, sheet = 1)\nUsing perl at /usr/bin/perl \nUsing perl at /usr/bin/perl \n\nConverting xls file\n    \"/Users/seanhuang/Desktop/qwe.xls\" \nto csv  file \n    \"/var/folders/ly/pxw72gmd7gjdvdbhk530cwrh0000gq/T//Rtmpx8yszv/file1491d47e6960.csv\" \n... \n\nExecuting ' '/usr/bin/perl' '/Library/Frameworks/R.framework/Versions/3.3/Resources/library/gdata/perl/xls2csv.pl'  '/Users/seanhuang/Desktop/qwe.xls' '/var/folders/ly/pxw72gmd7gjdvdbhk530cwrh0000gq/T//Rtmpx8yszv/file1491d47e6960.csv' '1' '... \n\nperl: warning: Setting locale failed.\nperl: warning: Please check that your locale settings:\n    LC_ALL = (unset),\n    LC_CTYPE = \"en_US.UTF-8\",\n    LANG = \"en_TW.UTF-8\"\n    are supported and installed on your system.\nperl: warning: Falling back to the standard locale (\"C\").\nError parsing file '/Users/seanhuang/Desktop/qwe.xls'.\n\nLoading '/Users/seanhuang/Desktop/qwe.xls'...\n255 \n\nDone.\n\nError in xls2sep(xls, sheet, verbose = verbose, ..., method = method,  : \n  Intermediate file '/var/folders/ly/pxw72gmd7gjdvdbhk530cwrh0000gq/T//Rtmpx8yszv/file1491d47e6960.csv' missing!\nError in file.exists(tfn) : invalid 'file' argument\n</code></pre>\n"}, {"tags": ["perl", "svg"], "comments": [{"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 1, "creation_date": 1486114880, "post_id": 42016421, "comment_id": 71216365, "body": "Maybe you could try <a href=\"https://metacpan.org/pod/SVG#text\" rel=\"nofollow noreferrer\">SVG</a> module which has a text method."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 1, "creation_date": 1486227283, "post_id": 42016421, "comment_id": 71259071, "body": "@carlosn that module is for creating SVG and the method is for adding text. The OP wants to find the position of text in an existing image."}], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1486093628, "creation_date": 1486093628, "question_id": 42016421, "link": "https://stackoverflow.com/questions/42016421/how-can-i-calculate-the-position-of-a-svg-text-on-a-path-in-perl", "title": "How can I calculate the position of a SVG text on a path in Perl?", "body": "<p>I want to extract text from a SVG graphic, and I need to get the texts in the correct order (from left to right). I use an XPath expression to find a all <code>text</code> nodes, then use <a href=\"http://search.cpan.org/~colink/Image-SVG-Transform-0.07/lib/Image/SVG/Transform.pm\" rel=\"nofollow noreferrer\">Image::SVG::Transform</a> to calculate the actual position of the text. This works fine for regular text and rotated text.</p>\n\n<p>Now I have text on a path, and I cannot find a Perl module to do the calculations for me. I'd rather not do them on my own, given that I have no clue about SVG internals.</p>\n\n<p>What Perl module can I use to calculate the start position of a text on a path?</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;g id=\"g3426\" transform=\"rotate(180,320.57846,970.1288)\"&gt;\n  &lt;ellipse ry=\"38.88921\" rx=\"34.891293\" cy=\"1007.3622\" cx=\"373.91425\" id=\"path3887-6\"/&gt;\n  &lt;text&gt;\n     &lt;textPath xlink:href=\"#path3887-6\"&gt;\n       &lt;tspan dx=\"71.785721 0 0 -3.5714285\"&gt;Text on ellipse&lt;/tspan&gt;\n     &lt;/textPath&gt;\n  &lt;/text&gt;\n&lt;/g&gt;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "loops", "if-statement", "hash"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 5, "creation_date": 1486085804, "post_id": 42015342, "comment_id": 71205864, "body": "Hi, and welcome to Stack Overflow. SO isn&#39;t suited to teaching programming from scratch, but rather answering specific questions. I&#39;d suggest you start with <a href=\"https://www.perl.org/learn.html\" rel=\"nofollow noreferrer\">perl.org/learn.html</a>, learn some Perl, take a shot at coding this up, and come back with specific questions. If you&#39;ve already got some code, let&#39;s see it!"}, {"owner": {"reputation": 35, "user_id": 7508921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597cbe10171c947ec16f81ce7a53260?s=128&d=identicon&r=PG&f=1", "display_name": "tmoneyz", "link": "https://stackoverflow.com/users/7508921/tmoneyz"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1486087402, "post_id": 42015342, "comment_id": 71206243, "body": "@Schwern hi Schwern! thank you for your reply. I just posted what I have so far...any help would be so great :)"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1486090111, "post_id": 42015342, "comment_id": 71206882, "body": "You want to get the values of the items in the hash and add them together. In your loop, you would access the values like so: <code>$stash{$item}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7508921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597cbe10171c947ec16f81ce7a53260?s=128&d=identicon&r=PG&f=1", "display_name": "tmoneyz", "link": "https://stackoverflow.com/users/7508921/tmoneyz"}, "edited": false, "score": 0, "creation_date": 1486142533, "post_id": 42016318, "comment_id": 71233783, "body": "hi @Schwern!! thank you so much for this. unfortunately when I run the code, this error comes up: &quot;Argument &quot;=&gt;&quot; isn&#39;t numeric in addition (+) at main.pl line 36. line 36 is where i put the code     &#39;$total += $stash{item};&#39;  what do you think is the issue??"}, {"owner": {"reputation": 35, "user_id": 7508921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597cbe10171c947ec16f81ce7a53260?s=128&d=identicon&r=PG&f=1", "display_name": "tmoneyz", "link": "https://stackoverflow.com/users/7508921/tmoneyz"}, "edited": false, "score": 0, "creation_date": 1486142919, "post_id": 42016318, "comment_id": 71233991, "body": "does $stash{$item} access the costs/values of the items? or just the item name/keys?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 35, "user_id": 7508921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597cbe10171c947ec16f81ce7a53260?s=128&d=identicon&r=PG&f=1", "display_name": "tmoneyz", "link": "https://stackoverflow.com/users/7508921/tmoneyz"}, "edited": false, "score": 0, "creation_date": 1486151185, "post_id": 42016318, "comment_id": 71238261, "body": "@IwanttoLearnPerl To the error, somehow you put the string <code>=&gt;</code> in as a value of <code>%stash</code>. You should be able to spot the mistake with a syntax highlighting editor like <a href=\"https://atom.io/\" rel=\"nofollow noreferrer\">Atom</a>. As for <code>$stash{$item}</code>, that gets the value in <code>%stash</code> associated with <code>$item</code>. So <code>$stash{&quot;tofu&quot;}</code> is <code>0.30</code>."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1486240645, "last_edit_date": 1486240645, "creation_date": 1486092850, "answer_id": 42016318, "question_id": 42015342, "link": "https://stackoverflow.com/questions/42015342/perl-grocery-program/42016318#42016318", "title": "Perl grocery program", "body": "<p>First, start by making things sane.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10;\n</code></pre>\n\n<p>That turns on <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\">strict</a>, now undeclared variables are an error. It turns on <a href=\"http://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\">warnings</a> so Perl will warn you when you do things that look like mistakes. And it turns on <a href=\"http://perldoc.perl.org/feature.html#FEATURE-BUNDLES\" rel=\"nofollow noreferrer\">5.10 features</a>, the most important of which is <a href=\"http://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\">say</a>.</p>\n\n<p>You've got your data set up right. Next you need places to store your total and unavailable items.</p>\n\n<pre><code>my $total = 0;\nmy @unavailable;\n</code></pre>\n\n<p>Then loop through your <code>@itemsneeded</code> checking which ones are available and adding their price to your <code>$total</code>.</p>\n\n<pre><code>for my $item (@itemsneeded) {\n    if( defined $stash{$item} ) {\n        $total += $stash{$item};\n    }\n    else {\n        push @unavailable, $item;\n    }\n}\n</code></pre>\n\n<p><code>defined $stash{$item}</code> checks whether the <code>$item</code> is in <code>%stash</code> and has a defined value. If it does, add its price to the <code>$total</code>.</p>\n\n<p><code>push @unavailable, $item;</code> adds the item to the end of the list of <code>@unavailable</code> items.</p>\n\n<p>Then print them. A bit of formatting is required.</p>\n\n<pre><code>printf \"The total cost is %.2f\\n\", $total;\n</code></pre>\n\n<p>If you just print out <code>$total</code> you'll get something like <code>0.3</code> which isn't how we write money. <code>%.2f</code> says to write the number with exactly two decimal places. <code>printf</code> has its own little mini formatting language, you can read all about in the docs for <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\">sprintf</a>. That's printf but it doesn't print, it returns a string (the \"s\" is for \"returns a string\").</p>\n\n<p>Then print out the list of <code>@unavailable</code> items.</p>\n\n<pre><code>say \"Yes we have no \", join(\", \", @unavailable), \".\";\n</code></pre>\n\n<p>We need to join the elements of the list with commas to be formatted correctly. There's no need for a newline, <code>say</code> will add it for us.</p>\n"}], "owner": {"reputation": 35, "user_id": 7508921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3597cbe10171c947ec16f81ce7a53260?s=128&d=identicon&r=PG&f=1", "display_name": "tmoneyz", "link": "https://stackoverflow.com/users/7508921/tmoneyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 42016318, "answer_count": 1, "score": -2, "last_activity_date": 1508095105, "creation_date": 1486085505, "last_edit_date": 1508095105, "question_id": 42015342, "link": "https://stackoverflow.com/questions/42015342/perl-grocery-program", "title": "Perl grocery program", "body": "<p>I have an array of grocery items I need to buy and a hash with grocery items as keys and the cost of those items as the values. I need a program that will tell me the total cost of my bill based on what's available in the hash and for it to tell me the items that are not available. How should I go about doing this? This is what I have so far:</p>\n\n<pre><code>my %stash = ('tofu' =&gt; .30, 'berrys' =&gt; .30, 'water' =&gt; .30, 'nuts' =&gt; .30, 'chips' =&gt; .30, 'soda' =&gt; .30, 'jam' =&gt; .30, 'meat' =&gt; .30, 'kale' =&gt; .30, 'peas' =&gt; .30); \n\nmy @itemsneeded = ('tofu', 'berrys', 'water', 'nuts', 'chips', 'rice', 'vinegar'); \n</code></pre>\n\n<p>In pseudocode, I want to loop through my items needed and if it equals the keys in <code>%stash</code>, for it to sum the cost of those items and if the item is not available, for those names be stored in another variable. then the total cost and the unavailable items would be printed out. i did this so far:</p>\n\n<pre><code>foreach my $items (@itemsneeded) {\nif ($items eq \n</code></pre>\n\n<p>and i'm stuck there. Any help would be greatly appreciated!</p>\n"}, {"tags": ["apache", ".htaccess", "perl", "http", "server"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1486081260, "post_id": 42014643, "comment_id": 71204778, "body": "1) Find the files that contain &quot;webmaster@mywebsite.com&quot; 2) Change the code to <code>die</code> instead of printing a message 3) Update your Apache config"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1486081313, "post_id": 42014643, "comment_id": 71204794, "body": "(In other words, fix the root cause of the issue instead of trying to hack around it.)"}, {"owner": {"reputation": 173, "user_id": 5478114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41edd9b1f1237bf1216b24ad5e1f6178?s=128&d=identicon&r=PG&f=1", "display_name": "Melchester", "link": "https://stackoverflow.com/users/5478114/melchester"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486092662, "post_id": 42014643, "comment_id": 71207525, "body": "Are you saying that this message is being generated by the perl programs themselves? Certainly that email address is not contained in any of the perl scripts. I don&#39;t understand why I am getting this error rather than the HTTP 500 one."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486135238, "post_id": 42017136, "comment_id": 71229020, "body": "Good find. <code>fatalsToBrowser</code> should never be enabled in production because it can reveal details about the internals of your scripts to potential attackers. Also, if <code>fatalsToBrowser</code> really isn&#39;t quoted or in a <code>qw</code>, that tells me your scripts don&#39;t <code>use strict;</code>."}], "tags": [], "owner": {"reputation": 173, "user_id": 5478114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41edd9b1f1237bf1216b24ad5e1f6178?s=128&d=identicon&r=PG&f=1", "display_name": "Melchester", "link": "https://stackoverflow.com/users/5478114/melchester"}, "is_accepted": true, "score": 1, "last_activity_date": 1486134800, "last_edit_date": 1486134800, "creation_date": 1486098276, "answer_id": 42017136, "question_id": 42014643, "link": "https://stackoverflow.com/questions/42014643/how-to-trap-program-crashes-with-http-error-code-500/42017136#42017136", "title": "How to trap program crashes with HTTP error code 500", "body": "<p>Thanks to ThisSuitIsBlackNot for the direction. </p>\n\n<p>The perl programs all have </p>\n\n<pre><code>use CGI::Carp(fatalsToBrowser);\n</code></pre>\n\n<p>Which stifles the HTTP 500 error. Simply removing this will allow the programs to crash \"properly\".</p>\n"}], "owner": {"reputation": 173, "user_id": 5478114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41edd9b1f1237bf1216b24ad5e1f6178?s=128&d=identicon&r=PG&f=1", "display_name": "Melchester", "link": "https://stackoverflow.com/users/5478114/melchester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 42017136, "answer_count": 1, "score": 0, "last_activity_date": 1486134800, "creation_date": 1486080525, "question_id": 42014643, "link": "https://stackoverflow.com/questions/42014643/how-to-trap-program-crashes-with-http-error-code-500", "title": "How to trap program crashes with HTTP error code 500", "body": "<p>I have a number of badly written perl programs serving up my websites. Occasionally they crash and the user sees ...</p>\n\n<p><em>Software error:\nYadda yadda yadda.\nFor help, please send mail to the webmaster (webmaster@mywebsite.com), giving this error message and the time and date of the error.</em></p>\n\n<p>I don't have access to that email address and even if I did those naughty users cannot be trusted to report this error.</p>\n\n<p>So what I would like to do is get this error to trigger a HTTP error 500, so that I can monitor it with a line in the htaccess file like ...</p>\n\n<p>ErrorDocument 500 /fixThisBug.shtml</p>\n"}, {"tags": ["perl", "web-scraping", "www-mechanize"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486077148, "post_id": 42014017, "comment_id": 71203525, "body": "Disable JavaScript in your browser and you&#39;ll see that the page is useless without it, so WWW::Mechanize is out. Instead of using WWW::Mechanize::Firefox, though, you should see if the data is available via an API; that&#39;s almost always a better choice than scraping. <a href=\"http://developer.dol.gov/\" rel=\"nofollow noreferrer\">Here</a> is the main page for the Department of Labor API."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1486079235, "post_id": 42014017, "comment_id": 71204197, "body": "Yes, I&#39;m aware the page shows up blank without javascript turned on. However, the source code is still there and I&#39;m curious to know why a POST request, with the appropriate fields sent with the request, doesn&#39;t cause the server to send the document, especially with WWW::Mechanize::Firefox."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1486080764, "post_id": 42014017, "comment_id": 71204626, "body": "Look at the source with JS disabled: there&#39;s no <code>&lt;form&gt;</code> element, so naturally <code>submit_form</code> won&#39;t do anything. As for W::M::F not working, you didn&#39;t set a <code>submitButton</code> parameter, and there are other headers that you haven&#39;t set that might be required. But again, this is exactly what APIs are for; you shouldn&#39;t be spelunking around in the guts of a web page made for human consumption because it could change at any time and break your code in a million different ways."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1486128935, "post_id": 42024813, "comment_id": 71224924, "body": "Very ingenious. I am familiar with Web::Scraper but did not think to use it to pull the necessary form elements like that. I also did not think about use LWP::UserAgent like that either. I learned something which is what I was looking for. Thanks!  Yes, I&#39;m well aware of the limitations of scraping. This is more of an academic exercise so I can polish my skills."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1486129386, "post_id": 42024813, "comment_id": 71225185, "body": "@StevieD glad I could help. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1486126401, "last_edit_date": 1495540900, "creation_date": 1486126401, "answer_id": 42024813, "question_id": 42014017, "link": "https://stackoverflow.com/questions/42014017/saving-files-with-wwwmechanize/42024813#42024813", "title": "Saving files with WWW::Mechanize", "body": "<p>While the comments by ThisSuitIsBlackNot are spot on, there is a rather simple way of doing this programmatically without using JS at all. You don't even need WWW::Mechanize. </p>\n\n<p>I've used <a href=\"https://metacpan.org/pod/Web::Scraper\" rel=\"nofollow noreferrer\">Web::Scraper</a> to find all the files. As you said, the form values are there. It's a matter of scraping them out. WWW::Mechanize is good at navigating, but not very good at scraping. Web::Scraper's interface on the other hand is really easy.</p>\n\n<p>Once we have the files, all we need to do is submit a POST request with the correct form values. This is pretty similar to WWW::Mechanize's <code>submit_form</code>. In fact, WWW::Mechanize is an <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> under the hood, and all we need is a request, so we ca use it directly.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/LWP::UserAgent#$ua-%3Eget(-$url-,-$field_name-=%3E-$value,-...-)\" rel=\"nofollow noreferrer\"><code>:content_file</code> option</a> on the <a href=\"https://metacpan.org/pod/LWP::UserAgent#$ua-%3Epost(-$url,-%5C%25form-)\" rel=\"nofollow noreferrer\"><code>post</code> method</a> tells it to put the response into a file. It will do the right thing with the ZIP file and write it as binary automatically.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse Web::Scraper;\nuse URI;\n\n# build a Web::Scraper to find all files on the page\nmy $files = scraper {\n    process 'form[name=\"yearlyDataForm\"]',    'action'  =&gt; '@action';\n    process 'input[name=\"selectedFileName\"]', 'files[]' =&gt; '@value';\n};\n\n# get the files and the form action\nmy $res = $files-&gt;scrape( URI-&gt;new('https://olms.dol-esa.gov/query/getYearlyData.do') );\n\n# use LWP to download them one by one\nmy $ua = LWP::UserAgent-&gt;new;\nforeach my $path ( @{ $res-&gt;{files} } ) {\n\n    # the file will end up relative to the current working directory (.)\n    ( my $filename ) = ( split '/', $path )[-1];\n\n    # the submit is hardcoded, but that could be dynamic as well\n    $ua-&gt;post(\n        $res-&gt;{action},\n        { selectedFileName =&gt; $path, submitButton =&gt; 'Download' },\n        ':content_file' =&gt; $filename # this downloads the file\n    );\n}\n</code></pre>\n\n<p>Once you run this, you'll have all the files in the directory of your script. It will take a moment and there is no output, but it works.</p>\n\n<p>You need to make sure to include the submit button in the form. </p>\n\n<p>Since you wanted to learn how to do something like this, I've built it slightly dynamic. The form action gets scraped as well, so you could reuse this on similar forms that use the same form names (or make that an argument) and you'd not have to care about the form action. The same thing could also be done with the submit button, but you'd need to grab both the <code>name</code> and the <code>value</code> attribute.</p>\n\n<p>I'll repeat what <a href=\"https://stackoverflow.com/questions/42014017/saving-files-with-wwwmechanize/42024813#comment71204626_42014017\">ThisSuitIsBlackNot said in their comment</a> though: <strong>Scraping a website always comes with the risk that it changes later!</strong> For a one-time thing that doesn't matter, if you would want to run this as a cronjob once a year it might already fail next year because they finally updated their website to be a bit more modern.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 2, "accepted_answer_id": 42024813, "answer_count": 1, "score": 2, "last_activity_date": 1486126401, "creation_date": 1486076881, "question_id": 42014017, "link": "https://stackoverflow.com/questions/42014017/saving-files-with-wwwmechanize", "title": "Saving files with WWW::Mechanize", "body": "<p>I'm trying to programmatically scrape the files from this page: <a href=\"https://olms.dol-esa.gov/query/getYearlyData.do\" rel=\"nofollow noreferrer\">https://olms.dol-esa.gov/query/getYearlyData.do</a> (yes it probably would be faster to download them manually but I want to learn how to do this).</p>\n\n<p>I have the following bit of code to try to attempt this on one of the files as a test:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse WWW::Mechanize; \n\nmy $mech = WWW::Mechanize-&gt;new;\n\n$mech-&gt;get( 'https://olms.dol-esa.gov/query/getYearlyData.do' );\nprint $mech-&gt;uri();\n$mech-&gt;submit_form( with_fields =&gt; { selectedFileName =&gt; '/filer/local/cas/YearlyDataDump/2000.zip' } );\n</code></pre>\n\n<p>When I run the code, nothing happens. Nothing gets downloaded. Thinking javascript might be the problem, I also tried the same code with WWW::Mechanize::Firefox. Again, nothing happens when I run the code.</p>\n\n<p>I also don't see the paths to the files. It's probably obscured in some javascript.</p>\n\n<p>So what's the best way to get these files? Is it possible to get them without javascript?</p>\n"}, {"tags": ["sql", "linux", "perl"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1486051217, "post_id": 42006709, "comment_id": 71189452, "body": "Welcome to the site!  Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> for more about what is on-topic here.  You may have better luck asking on the <a href=\"https://dba.stackexchange.com/\">DB Administrators&#39;</a> site."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1486051990, "post_id": 42006709, "comment_id": 71189974, "body": "This is tagged Perl, so I&#39;m guessing you&#39;re using DBI? Show your buggy code, cause it should be as simple as changing the encoding when you read the input file. Also, what database server are you using?"}, {"owner": {"reputation": 1, "user_id": 1676886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b70b3d80cfbf0f8dd5f51774403aa3?s=128&d=identicon&r=PG", "display_name": "user1676886", "link": "https://stackoverflow.com/users/1676886/user1676886"}, "edited": false, "score": 0, "creation_date": 1486136713, "post_id": 42006709, "comment_id": 71230065, "body": "I am using sqlplus along with perl code not DBI module because it&#39;s not just insert, update and has procedures, triggers and views."}], "answers": [{"comments": [{"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 3, "creation_date": 1486056044, "post_id": 42006880, "comment_id": 71192582, "body": "No, you can see the encoding Notepad++ is guessing. To know which encoding the file is using, you have to ask to person who wrote it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486059234, "post_id": 42006880, "comment_id": 71194448, "body": "This is still useful advice, because Notepad++ can be used to change it. That should work most of the time, unless it guessed wrong. But it&#39;s better than guessing yourself."}, {"owner": {"reputation": 1, "user_id": 1676886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b70b3d80cfbf0f8dd5f51774403aa3?s=128&d=identicon&r=PG", "display_name": "user1676886", "link": "https://stackoverflow.com/users/1676886/user1676886"}, "edited": false, "score": 0, "creation_date": 1486130216, "post_id": 42006880, "comment_id": 71225710, "body": "I am trying to automate the FB deployment using perl, sqlplus. We don&#39;t want DB team to tell us what character set they are using. The workflow is WINDOWS-&gt;SCM-&gt;Linux-&gt;DB"}], "tags": [], "owner": {"reputation": 27, "user_id": 3280309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/073c672b544420313cf375c7f0d63476?s=128&d=identicon&r=PG&f=1", "display_name": "Workion", "link": "https://stackoverflow.com/users/3280309/workion"}, "is_accepted": false, "score": 0, "last_activity_date": 1486055005, "last_edit_date": 1486055005, "creation_date": 1486051393, "answer_id": 42006880, "question_id": 42006709, "link": "https://stackoverflow.com/questions/42006709/windows-to-linux-character-set-issue/42006880#42006880", "title": "WINDOWS to Linux character set issue", "body": "<blockquote>\n  <p>In windows, we are able to see the specific language characters</p>\n</blockquote>\n\n<p>You can open it in notepad++ and see what encoding the file is using and you can also convert it to UTF-8.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 1676886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b70b3d80cfbf0f8dd5f51774403aa3?s=128&d=identicon&r=PG", "display_name": "user1676886", "link": "https://stackoverflow.com/users/1676886/user1676886"}, "edited": false, "score": 0, "creation_date": 1486129976, "post_id": 42007683, "comment_id": 71225532, "body": "I tried to use both iconv and recode commands in Linux but those two commands didn&#39;t solve my problem. Because I n Ed to determine the source encoding. BTW, I am trying to automate the DB deployment using perl, sqlplus."}, {"owner": {"reputation": 123, "user_id": 7323511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555e190ba41f3c3f24a884dd9602ddfe?s=128&d=identicon&r=PG", "display_name": "Andrew Gilchrist", "link": "https://stackoverflow.com/users/7323511/andrew-gilchrist"}, "reply_to_user": {"reputation": 1, "user_id": 1676886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b70b3d80cfbf0f8dd5f51774403aa3?s=128&d=identicon&r=PG", "display_name": "user1676886", "link": "https://stackoverflow.com/users/1676886/user1676886"}, "edited": false, "score": 0, "creation_date": 1486138474, "post_id": 42007683, "comment_id": 71231223, "body": "As others mentioned, it&#39;s better to <i>know</i> the source encoding for certain because automatic detection is imperfect.  However there are utilities and libraries that attempt to to do this: try looking into &quot;chardet&quot;, I believe there are various libraries and ports."}], "tags": [], "owner": {"reputation": 123, "user_id": 7323511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555e190ba41f3c3f24a884dd9602ddfe?s=128&d=identicon&r=PG", "display_name": "Andrew Gilchrist", "link": "https://stackoverflow.com/users/7323511/andrew-gilchrist"}, "is_accepted": false, "score": 1, "last_activity_date": 1486053743, "creation_date": 1486053743, "answer_id": 42007683, "question_id": 42006709, "link": "https://stackoverflow.com/questions/42006709/windows-to-linux-character-set-issue/42007683#42007683", "title": "WINDOWS to Linux character set issue", "body": "<p>If I'm understanding the problem correctly, you have SQL scripts produced in a variety of windows encodings that include non-ASCII characters.  You want to execute these scripts on Linux.</p>\n\n<p>I would think you'd want to lossless-ly convert the files to something that your linux SQL parser can handle, probably to unicode UTF-8.  This sort of conversion can be done with iconv (command-line utility, I believe there are libraries as well).  </p>\n\n<p>A challenge though is whether or not you know what each file's original encoding is, as this cannot necessarily be automatically detected...might be better if you can get the script files' authors to provide the scripts with a specified encoding.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "is_accepted": false, "score": 0, "last_activity_date": 1486129529, "creation_date": 1486129529, "answer_id": 42025739, "question_id": 42006709, "link": "https://stackoverflow.com/questions/42006709/windows-to-linux-character-set-issue/42025739#42025739", "title": "WINDOWS to Linux character set issue", "body": "<p>You will want to use <a href=\"http://perldoc.perl.org/Encode.html\" rel=\"nofollow noreferrer\" title=\"Encode\">Encode</a> or <a href=\"http://perldoc.perl.org/utf8.html\" rel=\"nofollow noreferrer\" title=\"utf8\">utf8</a> modules.\nNormally for SQL or MySQL you will set the DB encoding to what you prefer to work with. These days most people set it to UTF-8 to support a large range of character sets. </p>\n\n<p>But in this case you can play around with the encoding to match the right one needed, This could work.</p>\n\n<pre><code>use Encode qw(decode encode); \n$data = encode(\"utf8\", decode(\"iso-8859-1\", $data));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1676886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b70b3d80cfbf0f8dd5f51774403aa3?s=128&d=identicon&r=PG", "display_name": "user1676886", "link": "https://stackoverflow.com/users/1676886/user1676886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1486129529, "creation_date": 1486050931, "question_id": 42006709, "link": "https://stackoverflow.com/questions/42006709/windows-to-linux-character-set-issue", "title": "WINDOWS to Linux character set issue", "body": "<p>I have different set of SQL files which has French/Spanish and other language characters. In windows, we are able to see the specific language characters and when it transfers to Linux and i see weird characters.</p>\n\n<p>I understand windows uses different character set like WINDOWS-1252, WINDOWS-1258 and iso-8859-1.</p>\n\n<p>How can we change the charset which is similar to Windows in Linux, So that we won't insert the weird characters in DB when triggering the queries from Linux?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1486050992, "post_id": 42006599, "comment_id": 71189296, "body": "<i>&quot;I cannot install any new modules.&quot;</i> In case the issue is that you don&#39;t have root/admin privileges, <a href=\"http://stackoverflow.com/q/3735836\">you don&#39;t need root to install modules</a>."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1486051014, "post_id": 42006599, "comment_id": 71189313, "body": "How precise does it have to be? How many numbers after the decimal have to be displayed?"}, {"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 1, "creation_date": 1486051065, "post_id": 42006599, "comment_id": 71189352, "body": "Copy code from <a href=\"https://metacpan.org/pod/Number::FormatEng\" rel=\"nofollow noreferrer\">metacpan.org/pod/Number::FormatEng</a> (pure Perl), just as you would copy code from any Answer here."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486052312, "post_id": 42006599, "comment_id": 71190192, "body": "If you can use the code we post here, then you can install modules. If you can&#39;t use the code we post here, then what&#39;s the point of answering your question?"}, {"owner": {"reputation": 15, "user_id": 1475463, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3edf1382620f621bedd14f435cf018c3?s=128&d=identicon&r=PG", "display_name": "user1475463", "link": "https://stackoverflow.com/users/1475463/user1475463"}, "edited": false, "score": 0, "creation_date": 1486057876, "post_id": 42006599, "comment_id": 71193702, "body": "Sorry, the reason I can&#39;t install modules is because I&#39;m running a script over ssh to about 500 servers.  I can&#39;t install it on each one.  So I needed some kind of routine like below which could do it.  I would like it to have 2 decimal places, so the answer like &#39;9.54M&#39; is perfect."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1486059153, "post_id": 42006599, "comment_id": 71194402, "body": "If you&#39;re running the script over SSH, that means you&#39;re copying the script to the remote hosts. So just copy any modules you need to the remote hosts, along with your script."}], "answers": [{"tags": [], "owner": {"reputation": 32063, "user_id": 4752675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s6PS6.png?s=128&g=1", "display_name": "G5W", "link": "https://stackoverflow.com/users/4752675/g5w"}, "is_accepted": false, "score": 0, "last_activity_date": 1486085900, "last_edit_date": 1486085900, "creation_date": 1486075340, "answer_id": 42013704, "question_id": 42006599, "link": "https://stackoverflow.com/questions/42006599/format-large-integer-in-perl/42013704#42013704", "title": "Format large integer in perl", "body": "<p>Basic idea:  </p>\n\n<pre><code>$number=9876543;\n$NumString = sprintf(\"%.1f M\", int($number/100000 + 0.5)/10);\nprint \"$number   $NumString\\n\";\n</code></pre>\n\n<p>OUTPUT:   <code>9876543   9.9 M</code></p>\n\n<p>Version with a subroutine</p>\n\n<pre><code>sub MegaNumber {\n    my($number, $places) = @_;\n    $d2 = 10**$places;\n    $d1 = 1000000 / $d2;\n    $fmt = \"%.\". $places . \"f M\";\n    sprintf($fmt, int($number/$d1 + 0.5)/$d2);\n}\n\nprint \"9876543 \", MegaNumber(9876543, 1), \"\\n\";\nprint \"9876543 \", MegaNumber(9876543, 2), \"\\n\";\nprint \"987654 \",  MegaNumber(987654,  2), \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>9876543 9.9 M\n9876543 9.88 M\n987654 0.99 M\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 1475463, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3edf1382620f621bedd14f435cf018c3?s=128&d=identicon&r=PG", "display_name": "user1475463", "link": "https://stackoverflow.com/users/1475463/user1475463"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1486085900, "creation_date": 1486050696, "last_edit_date": 1486050760, "question_id": 42006599, "link": "https://stackoverflow.com/questions/42006599/format-large-integer-in-perl", "title": "Format large integer in perl", "body": "<p>Is there a method in perl that takes a large number and formats it into postfix characters like 'M', 'K', etc.  For example:</p>\n\n<pre><code>number = 9,999,999    output = 10.0M\n</code></pre>\n\n<p>I can't use things like 'Math::Round' or 'Format::Number' as perl is installed and I cannot install any new modules.</p>\n"}, {"tags": ["regex", "perl", "unicode"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1486046321, "post_id": 42005010, "comment_id": 71185955, "body": "Use <code>&#47;(\\p{L}+)&#47;</code>, you used the opposite regex."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1486046872, "post_id": 42005010, "comment_id": 71186331, "body": "What @WiktorStribi\u017cew is saying is that <code>\\P</code> with a capital <code>P</code> means <i>not one of these</i>, while <code>\\p</code> with a small <code>p</code> is <i>one of these</i>."}, {"owner": {"reputation": 71, "user_id": 7506307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2be3dd91e62bf4e670e8bd0a1954dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Kraus", "link": "https://stackoverflow.com/users/7506307/chris-kraus"}, "edited": false, "score": 0, "creation_date": 1486046896, "post_id": 42005010, "comment_id": 71186351, "body": "Thanks a lot for the quick replies."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486046907, "post_id": 42005010, "comment_id": 71186359, "body": "Welcome to Stack Overflow and the Perl tag by the way. Very well-worded first question. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486046966, "post_id": 42005010, "comment_id": 71186409, "body": "You can do code-highlighting in comments with backticks <code>`foo`</code>. I don&#39;t see a difference to the code in the question."}, {"owner": {"reputation": 71, "user_id": 7506307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2be3dd91e62bf4e670e8bd0a1954dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Kraus", "link": "https://stackoverflow.com/users/7506307/chris-kraus"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1486047312, "post_id": 42005010, "comment_id": 71186687, "body": "@WiktorStribizew and simbaque, you guys are right. My mistake ;-) Thanks again."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1486047355, "post_id": 42005010, "comment_id": 71186722, "body": "Glad it worked for you. Please consider accepting the answer by clicking \u2713 to the left of the answer (see <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">How to accept SO answers</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1486047131, "creation_date": 1486047131, "answer_id": 42005306, "question_id": 42005010, "link": "https://stackoverflow.com/questions/42005010/perl-regex-groups-do-not-display-unicode-characters-correctly/42005306#42005306", "title": "Perl regex groups do not display unicode characters correctly", "body": "<p>In your input, <code>\u00e9\u00e1</code> are 2 Unicode letters. <code>\\P{L}</code> is a construct matching any character <em>other than</em> a Unicode letter.</p>\n\n<p>So, using the opposite construct - <code>\\p{L}</code> - you will fix your issue. </p>\n\n<p>Use</p>\n\n<pre><code>/(\\p{L}+)/\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7506307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2be3dd91e62bf4e670e8bd0a1954dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Kraus", "link": "https://stackoverflow.com/users/7506307/chris-kraus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 42005306, "answer_count": 1, "score": 1, "last_activity_date": 1486047131, "creation_date": 1486046255, "last_edit_date": 1495542812, "question_id": 42005010, "link": "https://stackoverflow.com/questions/42005010/perl-regex-groups-do-not-display-unicode-characters-correctly", "title": "Perl regex groups do not display unicode characters correctly", "body": "<p>If I use the following code, the regex group does not show the expected unicode string. Can somebody explain to me whether I did a mistake, or is it even possible that it is an intrinsic problem in perl itself.</p>\n\n<pre><code>echo '\u00e9\u00e1'|perl -ne 'if ( /(\\P{L}+)/ ) { print $1; }'\n\ufffd\n</code></pre>\n\n<p>Even if I take this <a href=\"https://stackoverflow.com/questions/39295880/perl-regex-replacement-of-logical-unicode-characters\">explanation</a> into account and add the UTF-8 encoding layers to perl, it still does not give me the string '\u00e9\u00e1' for the regex group:</p>\n\n<pre><code>echo '\u00e9\u00e1'|perl -CS -ne 'if ( /(\\P{L}+)/ ) { print $1,$_; }'\n\n\u00e9\u00e1\n</code></pre>\n\n<p>The output for the group seems to be empty and includes a newline sign.</p>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["arrays", "perl", "function", "parameters"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "edited": false, "score": 0, "creation_date": 1486047484, "post_id": 42004983, "comment_id": 71186818, "body": "Thank you! After the first test, it looks like it&#39;s going as you said"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "edited": false, "score": 0, "creation_date": 1486123341, "post_id": 42004983, "comment_id": 71221560, "body": "One Question. Is there a difference in writing $self-&gt;{&#39;parameter&#39;} and $self-&gt;{parameter} without &#39; &#39; ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486155237, "post_id": 42004983, "comment_id": 71240219, "body": "It&#39;s only a question of style."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1486046171, "creation_date": 1486046171, "answer_id": 42004983, "question_id": 42004743, "link": "https://stackoverflow.com/questions/42004743/perl-dynamic-parameter-to-function/42004983#42004983", "title": "Perl Dynamic Parameter to Function", "body": "<p>If <code>$self-&gt;{parameter}</code> is an array reference, then you can include the dereferenced array and in most<sup>*</sup> cases, Perl will flatten the list.</p>\n\n<pre><code>$self = from_json ...;                  # $self-&gt;{parameter} = [1,2,3];\nfunction($p1,@{$self-&gt;{parameter}});    # equiv to function($p1,1,2,3)\n</code></pre>\n\n<p><sup>*</sup> - some cases where Perl won't flatten a list are <a href=\"https://metacpan.org/source/MUIR/List-EvenMore-0.11/lib/List/EvenMoreUtils.pm#L24\" rel=\"nofollow noreferrer\">functions that have a <code>@</code> prototype</a> or a Perl <a href=\"http://metacpan.org/pod/perlfunc#push\" rel=\"nofollow noreferrer\">builtin function that expects an <code>ARRAY</code></a> and not just a <code>LIST</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 42004983, "answer_count": 1, "score": 0, "last_activity_date": 1486046171, "creation_date": 1486045562, "question_id": 42004743, "link": "https://stackoverflow.com/questions/42004743/perl-dynamic-parameter-to-function", "title": "Perl Dynamic Parameter to Function", "body": "<p>I've got one function which I can't modify and in this function something like this is done</p>\n\n<pre><code> foreach my $param (@_) {\n    .....\n</code></pre>\n\n<p>Now I want to call this function with dynamic parameters.\nI've got an object which I get from</p>\n\n<pre><code>$self-&gt;{'parameter'} = from_json ( $self-&gt;{'cgi'}-&gt;param('POSTDATA') );\n</code></pre>\n\n<p>And now I want to do something like this</p>\n\n<pre><code>function(para1, $self-&gt;{'parameter'})\n</code></pre>\n\n<p>if I do it manually it works</p>\n\n<pre><code>function(para1, 1, 1, 1)\n</code></pre>\n\n<p>How can I do that?</p>\n"}, {"tags": ["perl", "url"], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486050214, "post_id": 42004224, "comment_id": 71188774, "body": "Thanks for the response. How would the application I&#39;m sending it to actually use that encoded URL then to redirect elsewhere? :-  /domain decides to use that URL to go to http%3A%2F%2Fexample.org%2Ffoo%2Fbar%3Fbaz%3Dqrr for example"}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1486050388, "post_id": 42004224, "comment_id": 71188893, "body": "Am I right in thinking /domain has to use uri_decode($return_url) and then redirect?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1486044199, "creation_date": 1486044199, "answer_id": 42004224, "question_id": 42003887, "link": "https://stackoverflow.com/questions/42003887/perl-passing-a-url-in-a-query-string/42004224#42004224", "title": "Perl: Passing a URL in a query string", "body": "<blockquote>\n  <p>www.example.com/domain?return_url=%2Fanother%2Fdomain</p>\n</blockquote>\n\n<p>This is called <a href=\"https://en.wikipedia.org/wiki/Percent-encoding\">URL encoding</a>. Not because you put a URL in it, but because it encodes characters that have a special meaning in a URL.</p>\n\n<p>The <code>%2F</code> corresponds to a slash <code>/</code>. You've probably also seen the <code>%20</code> before, which is a space <code></code>.</p>\n\n<p>Putting a complete URI into a URL parameter of another URI is totally fine.</p>\n\n<pre><code>http://example.org?url=http%3A%2F%2Fexample.org%2Ffoo%3Fbar%3Dbaz\n</code></pre>\n\n<p>The application behind the URL you are calling needs to be able to understand URL encoding, but that is a trivial thing. Typical web frameworks and interfaces to the web (like <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod\">CGI.pm</a> or <a href=\"https://metacpan.org/pod/Plack\">Plack</a> in Perl) will do that. You should not have to care about it a all.</p>\n\n<p>To URL-encode something in Perl, you have several options.</p>\n\n<p>You could use the <a href=\"https://metacpan.org/pod/URI\">URI</a> module to create the whole URI including the URL encoded query.</p>\n\n<pre><code>use URI;\n\nmy $u = URI-&gt;new(\"http://example.org\");\n$u-&gt;query_form( return_url =&gt; \"http://example.org/foo/bar?baz=qrr\");\n\nprint $u;\n\n__END__\nhttp://example.org?return_url=http%3A%2F%2Fexample.org%2Ffoo%2Fbar%3Fbaz%3Dqrr\n</code></pre>\n\n<p>This seems like the natural thing to do.</p>\n\n<p>You could also use the <a href=\"http://URI::Encode\">URI::Encode</a> module, which gives you a <code>uri_encode</code> function. That's useful if you want to encode strings without building a URI object.</p>\n\n<blockquote>\n<pre><code>use URI::Encode qw(uri_encode uri_decode);\nmy $encoded = uri_encode($data);\nmy $decoded = uri_decode($encoded);\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>All of this is a normal part of how the web works. There is no need to do Base 64 encoding.</p>\n"}, {"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 4, "last_activity_date": 1486044305, "creation_date": 1486044305, "answer_id": 42004263, "question_id": 42003887, "link": "https://stackoverflow.com/questions/42003887/perl-passing-a-url-in-a-query-string/42004263#42004263", "title": "Perl: Passing a URL in a query string", "body": "<p>The correct way would be to uri-encode the second hop as you do in your first example. The <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\"><code>URI</code></a> and <a href=\"https://metacpan.org/pod/URI::QueryParam\" rel=\"nofollow noreferrer\"><code>URI::QueryParam</code></a> modules make this nice and easy:</p>\n\n<p>To encode a <code>URI</code>, you simply create a <code>URI</code> object on your base url. Then add any query parameters that you want. (NOTE: they will be automatically uri-encoded by <code>URI::QueryParam</code>): </p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature qw(say);\n\nuse URI;\nuse URI::QueryParam;\n\nmy $u = URI-&gt;new('http://www.example.com/domain');\n$u-&gt;query_param_append('return_url', 'http://yahoo.com');\n\nsay $u-&gt;as_string;\n# http://www.example.com/domain?return_url=http%3A%2F%2Fyahoo.com\n</code></pre>\n\n<p>To receive this url and then redirect to <code>return_url</code>, you simply create a new <code>URI</code> object then pull off the <code>return_url</code> query parameter with <code>URI::QueryParam</code>. (NOTE: again URI::QueryParam automatically uri-decodes the parameter for you):</p>\n\n<pre><code>my $u = URI-&gt;new(\n  'http://www.example.com/domain?return_url=http%3A%2F%2Fyahoo.com'\n);\nmy $return_url = $u-&gt;query_param('return_url');\n\nsay $return_url;\n# http://yahoo.com\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 858, "favorite_count": 0, "accepted_answer_id": 42004263, "answer_count": 2, "score": 2, "last_activity_date": 1486044305, "creation_date": 1486043309, "question_id": 42003887, "link": "https://stackoverflow.com/questions/42003887/perl-passing-a-url-in-a-query-string", "title": "Perl: Passing a URL in a query string", "body": "<p>I'm trying to pass a URL as a query string so it can be read by another website and then used:</p>\n\n<pre><code>www.example.com/domain?return_url=/another/domain\n</code></pre>\n\n<p>Gets returned as:</p>\n\n<pre><code>www.example.com/domain?return_url=%2Fanother%2Fdomain\n</code></pre>\n\n<p>Is there a way this URL can be read and parsed by the other application with the escaped characters?</p>\n\n<p>The only way I can think of is to encode it somehow so it comes out like this:</p>\n\n<p>www.example.com/domain?return_url=L2Fub3RoZXIvZG9tYWlu</p>\n\n<p>then the other application can decode and use?</p>\n\n<p><a href=\"https://www.base64encode.org/\" rel=\"nofollow noreferrer\">https://www.base64encode.org/</a></p>\n"}, {"tags": ["perl", "stored-procedures", "dbi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486042324, "post_id": 42003337, "comment_id": 71183154, "body": "If the duplicate does not help you please tell us and we&#39;ll reopen your question. But I&#39;m pretty sure it should be exactly what you need."}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486043022, "post_id": 42003337, "comment_id": 71183622, "body": "@simbabque So the above prints all of the select statements and the output one after the other. But I see that there is an additional 0 returned after select statement and before theoutput param is printed. How do I get rid of that?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486043440, "post_id": 42003337, "comment_id": 71183911, "body": "I don&#39;t know. What database are you using? Please <a href=\"https://stackoverflow.com/posts/42003337/edit\">edit</a> and include the Perl code you are using to fetch. Also show the output as you see it. I don&#39;t know what you mean."}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486043728, "post_id": 42003337, "comment_id": 71184086, "body": "@simbabque done. thanks"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486044272, "post_id": 42003337, "comment_id": 71184453, "body": "It looks like this is not a duplicate after all. I&#39;ll reopen. Sorry."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486044316, "post_id": 42003337, "comment_id": 71184499, "body": "Related: <a href=\"http://stackoverflow.com/a/41441486/1331451\">stackoverflow.com/a/41441486/1331451</a>"}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486105446, "post_id": 42003337, "comment_id": 71211467, "body": "I&#39;ve asked it in a different manner again."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486108141, "post_id": 42003337, "comment_id": 71212648, "body": "That&#39;s the one I already closed once. Did it help after all?"}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486232543, "post_id": 42003337, "comment_id": 71260986, "body": "@simbabque It did in parts, I was able to fetch multiple output params and print them as well, but I needed to know how to differentiate between thos outputs as well, hence had to ask a different question. Thanks for your help"}], "owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1486558050, "answer_count": 0, "score": 0, "last_activity_date": 1486103335, "creation_date": 1486041707, "last_edit_date": 1486103335, "question_id": 42003337, "link": "https://stackoverflow.com/questions/42003337/return-multiple-output-from-stored-proc-in-perl-dbi-returns-extra-0-value", "closed_reason": "Duplicate", "title": "Return multiple output from stored proc in perl DBI returns extra 0 value", "body": "<p>My stored proc returns one output parameter, and along with it it has alot of print statements like below</p>\n\n<pre><code>Create Proc\nmyParam out\n\nbegin\n  select 'this is a log statement'\n  select @myParam = 0\nend\n</code></pre>\n\n<p>I am calling the above from a perl script using DBI, for a Sybase server. I am not sure how to get print the value of select print statement as well as myParam?</p>\n\n<p>Here's what I have done</p>\n\n<pre><code>$sth = $fdadbh-&gt;prepare($db_query) or die \"Could not prepare statement: \". $fdadbh-&gt;errstr;\n$sth-&gt;execute() or die \"Couldnt execute statement: \".$sth-&gt;errstr;\ndo {\n      while($row = $sth-&gt;fetchrow_arrayref) {\n         print join(\"\\t\\t\", @$row), \"\\n\";\n      }\n  } while ($sth-&gt;{syb_more_results});\n</code></pre>\n\n<p>Output I get is\n    this is a log statement\n    0\n    0</p>\n\n<p>If I remove the line <code>select @myParam = 0</code> and run it again, I get</p>\n\n<pre><code>this is a log statement\n0\n-1\n</code></pre>\n\n<p>How do I remove that 0 coming additionally. Also, Is there any way of cpturing the outputParam in a variable (apart from traversing and keeping the last value)</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 2738709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ad7869f2e113641935cae1b653d7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user2738709", "link": "https://stackoverflow.com/users/2738709/user2738709"}, "edited": false, "score": 0, "creation_date": 1486121714, "post_id": 42015571, "comment_id": 71220548, "body": "I tried this but didn&#39;t work. Do i need to include any extra specific perl module so that i can use this stuff or is in built in the default perl package"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 3, "user_id": 2738709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ad7869f2e113641935cae1b653d7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user2738709", "link": "https://stackoverflow.com/users/2738709/user2738709"}, "edited": false, "score": 0, "creation_date": 1486126915, "post_id": 42015571, "comment_id": 71223720, "body": "What error message do you have ? How do you open the yaml file in your application ? I&#39;m not sur about your <code>pp</code> line, from documentation it should be more something like <code>pp -x -o teste.exe test.pl</code> with the -a added. The -x should take care of including the extra module YAML needed as it is not core Perl, otherwise force it with <code>-M YAML</code> or <code>-M YAML::XS</code>. On an unrelated note, perl 5.8 is really old now, please find a way to upgrade if you can."}], "tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 0, "last_activity_date": 1486087488, "creation_date": 1486087488, "answer_id": 42015571, "question_id": 42002415, "link": "https://stackoverflow.com/questions/42002415/convert-perl-script-to-executable-file-packaging-yaml-file-in-executable-used-by/42015571#42015571", "title": "Convert Perl Script to Executable file packaging YAML file in executable used by perl script", "body": "<p>By using the <code>-a</code> switch :</p>\n\n<pre><code>pp -a database.yml -o -x teste.exe test.pl\n</code></pre>\n\n<p>From <code>pp</code> documentation :</p>\n\n<pre><code>   -a, --addfile=FILE|DIR\n       Add an extra file into the package.  If the file is a directory, recursively add all files inside that directory, with links turned into actual files.\n\n       By default, files are placed under \"/\" inside the package with their original names.  You may override this by appending the target filename after a \";\", like this:\n\n           % pp -a \"old_filename.txt;new_filename.txt\"\n           % pp -a \"old_dirname;new_dirname\"\n\n       You may specify \"-a\" multiple times.\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 2738709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ad7869f2e113641935cae1b653d7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user2738709", "link": "https://stackoverflow.com/users/2738709/user2738709"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486087488, "creation_date": 1486038806, "question_id": 42002415, "link": "https://stackoverflow.com/questions/42002415/convert-perl-script-to-executable-file-packaging-yaml-file-in-executable-used-by", "title": "Convert Perl Script to Executable file packaging YAML file in executable used by perl script", "body": "<p>I have small perl script <strong>test.pl</strong>. This perl script uses input as YAML file <strong>database.yml</strong>\nTo convert these perl script into executable, I run following command shown below.</p>\n\n<p><strong>pp -o -x teste.exe test.pl</strong>.</p>\n\n<p>It creates executable but when i try to run this executable it throws error that database.yml file not found in that directory.</p>\n\n<p>How can i ensure that executable includes YAML file while creating the exe of perl script?</p>\n\n<p>Note :- I am using perl verison 5.8 in Unix.</p>\n"}, {"tags": ["mysql", "perl", "dbix-class"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486038028, "post_id": 42001954, "comment_id": 71180359, "body": "Can you please show the code in 08-test-mysqld.t? How is this used?"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486039194, "post_id": 42001954, "comment_id": 71181146, "body": "<a href=\"https://st.aticpan.org/source/NEWELLC/Test-DBIx-Class-0.52/t/08-test-mysqld.t\" rel=\"nofollow noreferrer\">08-test-mysqld.t</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486039492, "post_id": 42001954, "comment_id": 71181333, "body": "Oh. You&#39;re trying to install Test::DBIx::Class?"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1486039754, "post_id": 42001954, "comment_id": 71181529, "body": "no Test::DBIX::Class is installed and works fine with sqlite. I&#39;m trying to switch to mysql"}], "answers": [{"tags": [], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "is_accepted": true, "score": 0, "last_activity_date": 1486132346, "creation_date": 1486132346, "answer_id": 42026590, "question_id": 42001954, "link": "https://stackoverflow.com/questions/42001954/how-do-i-setup-mysql-sandbox-for-testdbixclass/42026590#42026590", "title": "How do I setup mysql sandbox for Test::DBIX::Class?", "body": "<p>The warning message is generated in <a href=\"https://github.com/kazuho/p5-test-mysqld/blob/master/lib/Test/mysqld.pm#L291\" rel=\"nofollow noreferrer\">Test::mysqld::_use_mysqld_initialize</a> and could be ignored. After setting <code>MYSQL_INSTALL_DB</code> it works fine:</p>\n\n<p>Here my current test setting:</p>\n\n<pre><code>export SB_DIR=$HOME/opt/sandbox/mysql/5.5.54\nTest-DBIx-Class-0.52$ MYSQLD=$SB_DIR/bin/mysqld \\\nMYSQL_INSTALL_DB=$SB_DIR/scripts/mysql_install_db \\\nKEEP_DB=1 \\\nprove -lv t/08-test-mysqld.t\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/Test::DBIx::Class::SchemaManager::Trait::Testmysqld#keep_db\" rel=\"nofollow noreferrer\">KEEP_DB</a> is helpfull for diagnostic purposes.</p>\n"}], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 42026590, "answer_count": 1, "score": 1, "last_activity_date": 1486132346, "creation_date": 1486037541, "last_edit_date": 1486039148, "question_id": 42001954, "link": "https://stackoverflow.com/questions/42001954/how-do-i-setup-mysql-sandbox-for-testdbixclass", "title": "How do I setup mysql sandbox for Test::DBIX::Class?", "body": "<p>I'm trying to setup Test::DBIX::Class with <a href=\"https://metacpan.org/pod/MySQL::Sandbox\" rel=\"nofollow noreferrer\" title=\"MySQL::Sandbox\">MySQL::Sandbox</a>. But it looks like my setup is not correct because the warning message:</p>\n\n<pre><code>Test-DBIx-Class-0.52$ mysql_install_db=$HOME/opt/sandbox/mysql/5.5.54/bin/mysqld BASE_DIR=/tmp/sandboxes/msb_5_5_54 prove -l t/08-test-mysqld.t \nt/08-test-mysqld.t .. mysqld: Can't change dir to '/var/lib/mysql/' (Errcode: 13 - Permission denied)\nt/08-test-mysqld.t .. ok   \nAll tests successful.\nFiles=1, Tests=7, 28 wallclock secs ( 0.02 usr  0.00 sys +  1.05 cusr  0.57 csys =  1.64 CPU)\nResult: PASS\n</code></pre>\n\n<p><code>/var/lib/mysql/</code> is not a part of my mysql sandbox setup. What's the reason for the warning message?</p>\n\n<p>I'm using <a href=\"https://st.aticpan.org/source/NEWELLC/Test-DBIx-Class-0.52/t/08-test-mysqld.t\" rel=\"nofollow noreferrer\">08-test-mysqld.t</a> for testing purpose.</p>\n\n<p>My mysql sanbox setup:</p>\n\n<pre><code>$all_info = {\n              '5554' =&gt; {\n                          'opt' =&gt; {\n                                     'datadir' =&gt; $HOME.'/sandboxes/msb_5_5_54/data',\n                                     'log_error' =&gt; 'msandbox.err',\n                                     'socket' =&gt; '/tmp/mysql_sandbox5554.sock',\n                                     'prompt' =&gt; '\\'mysql [\\\\h] {\\\\u} (\\\\d) &gt; \\'',\n                                     'bind_address' =&gt; '127.0.0.1',\n                                     'tmpdir' =&gt; $HOME.'/sandboxes/msb_5_5_54/tmp',\n                                     'user' =&gt; 'me',\n                                     'lower_case_table_names' =&gt; '0',\n                                     'basedir' =&gt; $HOME.'/opt/sandbox/mysql/5.5.54',\n                                     'port' =&gt; '5554',\n                                     'pid_file' =&gt; $HOME.'/sandboxes/msb_5_5_54/data/mysql_sandbox5554.pid',\n                                     'password' =&gt; 'msandbox'\n                                   },\n                          'conf' =&gt; undef\n                        }\n            };\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 3, "creation_date": 1486035162, "post_id": 42001070, "comment_id": 71178464, "body": "<code>{}</code> is not a hash, it&#39;s a hash reference."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 2, "creation_date": 1486036714, "post_id": 42001070, "comment_id": 71179501, "body": "This question has nothing to do with context."}, {"owner": {"reputation": 2115, "user_id": 544787, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf40d2cff88bef256d242c991f34ffa2?s=128&d=identicon&r=PG", "display_name": "skjoshi", "link": "https://stackoverflow.com/users/544787/skjoshi"}, "edited": false, "score": 0, "creation_date": 1486036962, "post_id": 42001070, "comment_id": 71179683, "body": "my bad. I understand it now. I was coming from Python background and thus confused."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1486035155, "creation_date": 1486035155, "answer_id": 42001132, "question_id": 42001070, "link": "https://stackoverflow.com/questions/42001070/understanding-context-in-perl/42001132#42001132", "title": "Understanding context in perl", "body": "<p><code>{}</code> creates a <strong>hashref</strong>, which is a scalar. </p>\n\n<p>You need to dereference it to access the items inside it.</p>\n\n<pre><code>my $hashref = { foo =&gt; 1 };\nsay $hashref-&gt;{foo};\n\nmy %hash = ( foo =&gt; 1 );\nsay $hash{foo};\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perldoc perlref</a> for more details.</p>\n"}], "owner": {"reputation": 2115, "user_id": 544787, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bf40d2cff88bef256d242c991f34ffa2?s=128&d=identicon&r=PG", "display_name": "skjoshi", "link": "https://stackoverflow.com/users/544787/skjoshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "closed_date": 1486036808, "accepted_answer_id": 42001132, "answer_count": 1, "score": 0, "last_activity_date": 1486035155, "creation_date": 1486035010, "question_id": 42001070, "link": "https://stackoverflow.com/questions/42001070/understanding-context-in-perl", "closed_reason": "Duplicate", "title": "Understanding context in perl", "body": "<p>I am ramping up on Perl programming and understand some basics of Perl. As per my understanding, if an array is assigned to scalar, it will store number of element in scalar. However, I am not clear in terms of hashes. For example, I saw this line:</p>\n\n<pre><code>my $variable = {};\n</code></pre>\n\n<p>I am not able to understand, how this <code>$variable</code> is still working as hash? What am I missing here?</p>\n"}, {"tags": ["perl", "nginx"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 5152378, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8Qs1LrmWvGs/AAAAAAAAAAI/AAAAAAAAAPI/Koukmr2zArs/photo.jpg?sz=128", "display_name": "Mehran Mahmoudi", "link": "https://stackoverflow.com/users/5152378/mehran-mahmoudi"}, "is_accepted": false, "score": 1, "last_activity_date": 1558871276, "creation_date": 1558871276, "answer_id": 56313207, "question_id": 42000553, "link": "https://stackoverflow.com/questions/42000553/nginx-perl-set-variables/56313207#56313207", "title": "nginx perl set variables", "body": "<p>I know that this answer is very over due. but i have experimented with it now.</p>\n\n<p>you were wrong on this :</p>\n\n<blockquote>\n  <p>it's actually illegal to use perl_set directive inside location block, so, perl_set is not on per-request basis.</p>\n</blockquote>\n\n<p>actually even if you should include perl_set in http block of config file the code will be re-evaluated on every request. so if you include below config in you http block $color will be blue;</p>\n\n<pre><code>perl_set $color '\n    sub {\n        my $r = shift;\n        return \\'blue\\';\n    }\n';\n</code></pre>\n\n<p>but remember perl_set in http block will be eveluated before location block so if you include <code>set $color '?';</code> in your location block variable will always have ? value.</p>\n"}], "owner": {"reputation": 1478, "user_id": 1455910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/6B4jp.png?s=128&g=1", "display_name": "aleclofabbro", "link": "https://stackoverflow.com/users/1455910/aleclofabbro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1471, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558871276, "creation_date": 1486033475, "last_edit_date": 1486035627, "question_id": 42000553, "link": "https://stackoverflow.com/questions/42000553/nginx-perl-set-variables", "title": "nginx perl set variables", "body": "<p>Having this nginx rule:</p>\n\n<pre><code>  location ~ /test/ {\n    set $color '?';\n    set $subpath $1;\n    perl test::handle;\n    add_header Content-Type \"text/html\";\n    return 200 $color;\n  }\n</code></pre>\n\n<p>and this perl file:</p>\n\n<pre><code>package test;\n\nuse nginx;\nsub handle {\n    my $r = shift;\n    $r-&gt;variable('color', 'blue');\n    return OK;\n}\n\n1;\n__END__\n</code></pre>\n\n<p>I would expect nginx to serve the string <code>blue</code><br>\nbut <code>?</code> is served instead.<br>\nI tested a sub handle like this: (modifying properly the rule commenting the <code>return</code>)  </p>\n\n<pre><code>sub handle {\n    my $r = shift;\n    $r-&gt;send_http_header;\n    $r-&gt;print($r-&gt;variable('color'),'&lt;br/&gt;');\n    $r-&gt;variable('color', 'blue');\n    $r-&gt;print($r-&gt;variable('color'),'&lt;br/&gt;');\n    $r-&gt;flush();\n    return OK;\n}\n</code></pre>\n\n<p>and i get expected result :</p>\n\n<pre><code>?\nblue\n</code></pre>\n\n<p>in first case does nginx serves <code>$color</code> before having it being set by perl ?\nHow to avoid this?<br>\nTo clarify:<br>\nI need to set a bunch of variables in perl script, depending on request, <em>i could trigger one <code>perl_set</code> for each variable i need to set</em>, but i would like to integrate all in one function.<br>\n[EDIT]<br>\nit's actually illegal to use <code>perl_set</code> directive inside <code>location</code> block, so, <code>perl_set</code> is not on per-request basis.</p>\n"}, {"tags": ["perl", "shell", "unix", "server"], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1486011718, "creation_date": 1486011718, "answer_id": 41994519, "question_id": 41994343, "link": "https://stackoverflow.com/questions/41994343/how-to-fetch-data-from-a-unix-server-to-another-server-in-unix/41994519#41994519", "title": "how to fetch data from a unix server to another server in unix?", "body": "<p>You'd usually use something like <a href=\"https://en.wikipedia.org/wiki/Secure_copy\" rel=\"nofollow noreferrer\"><code>scp</code></a> or <a href=\"https://en.wikipedia.org/wiki/Rsync\" rel=\"nofollow noreferrer\"><code>rsync</code></a>, depending on how much data you have to move. <code>scp</code> can move files and directories, while <code>rsync</code> is good when you need to sync and update directories.</p>\n\n<p>Both talk over <code>ssh</code>, so to avoid having to type in your password over and over again (or worse, hard code it into the script) be sure to use ssh keys and an ssh-agent. This lets you log into servers without needing to type in your password, instead the stored keys are used, and all that is tied to logging into your account. Github has <a href=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/\" rel=\"nofollow noreferrer\">a good tutorial on creating keys and adding them to an ssh-agent</a>. Ubuntu also has <a href=\"https://help.ubuntu.com/community/SSH/OpenSSH/Keys\" rel=\"nofollow noreferrer\">a good tutorial which covers ssh in more detail and how to put the key on the remote machine.</a></p>\n\n<p>Finally, rather than having to put your private keys on HYD13 and HYD25, you can leave those keys on one machine and use ssh key fowarding to use those credentials when you log into HYD13 or HYD25. Again, <a href=\"https://developer.github.com/guides/using-ssh-agent-forwarding/\" rel=\"nofollow noreferrer\">Github has a nice tutorial on how to do this</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 689, "user_id": 3978705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ec029c3a5b20715f5e21a0dcfecb9b?s=128&d=identicon&r=PG&f=1", "display_name": "Karthick Vinod", "link": "https://stackoverflow.com/users/3978705/karthick-vinod"}, "is_accepted": true, "score": 1, "last_activity_date": 1486011827, "creation_date": 1486011827, "answer_id": 41994536, "question_id": 41994343, "link": "https://stackoverflow.com/questions/41994343/how-to-fetch-data-from-a-unix-server-to-another-server-in-unix/41994536#41994536", "title": "how to fetch data from a unix server to another server in unix?", "body": "<p>I hope HYD13 and HYD25 can communicate with each other over internet or LAN or by any other means. If so, </p>\n\n<ul>\n<li><p>You can execute the script from HYD25 over ssh</p>\n\n<p><code>ssh username@HYD13 '&lt; bash path-to-script-on-HYD13 &gt;'</code></p></li>\n</ul>\n\n<p>This will print the output of that script on HYD25's terminal which you can re-direct to any text file.</p>\n\n<ul>\n<li><p>If the script by itself writes data to a local file on HYD13, you could simply <code>cat</code> it so that the contents of the file gets printed on HYD25's terminal</p>\n\n<p><code>ssh username@HYD13 '&lt; bash path-to-script-on-HYD13 &gt;; cat &lt;script's output file&gt;'</code></p></li>\n</ul>\n\n<p>Hope this is what you wanted.</p>\n"}], "owner": {"reputation": 57, "user_id": 7268185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bc040bf990b18fc8df8ccfd755eed6c?s=128&d=identicon&r=PG&f=1", "display_name": "user7268185", "link": "https://stackoverflow.com/users/7268185/user7268185"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "closed_date": 1486930283, "accepted_answer_id": 41994536, "answer_count": 2, "score": -3, "last_activity_date": 1486011827, "creation_date": 1486010696, "question_id": 41994343, "link": "https://stackoverflow.com/questions/41994343/how-to-fetch-data-from-a-unix-server-to-another-server-in-unix", "closed_reason": "Not suitable for this site", "title": "how to fetch data from a unix server to another server in unix?", "body": "<p>There are two unix servers called HYD13 and HYD25.</p>\n\n<p>I am having a script(in my home dir) in HYD13 which fetches the required data from that server(HYD13) only and all the required data are printed in a text file.</p>\n\n<p>But my requirement is I need to configure the same script in HYD25(in a path) and It will fetch the data from HYD13 server and prints the data in HYD25 server(mentioned path). But the issue is how to connect HYD13 sever from HYD25 inside the script ?</p>\n\n<p>Could you please help me on this ?</p>\n"}]