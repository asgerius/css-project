[{"tags": ["perl", "quotes", "symbols"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 6, "creation_date": 1532563166, "post_id": 51529209, "comment_id": 90026718, "body": "Escape it with <code>\\@</code> or use single quotes."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 1, "creation_date": 1532563537, "post_id": 51529209, "comment_id": 90026783, "body": "Escaping is needed for perl tries to interpolate a list variable otherwise. Note that your second line of code lacks the terminating double quote."}, {"owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "edited": false, "score": 1, "creation_date": 1532564031, "post_id": 51529209, "comment_id": 90026872, "body": "print &quot;my email is \\&quot;abc\\@gmail.com\\&quot;&quot;;"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 2, "creation_date": 1532564070, "post_id": 51529209, "comment_id": 90026878, "body": "@collapsar It&#39;s an array variable, not a list variable."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532564686, "post_id": 51529209, "comment_id": 90026995, "body": "<code>print &#39;my email is &quot;abc@gmail.com&quot;&#39;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1532564783, "post_id": 51529209, "comment_id": 90027012, "body": "<b><i>Always</i></b> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl program you write."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1532565067, "post_id": 51529209, "comment_id": 90027056, "body": "@MattJacob What exactly is the difference in perl ?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 1, "creation_date": 1532565195, "post_id": 51529209, "comment_id": 90027084, "body": "@collapsar A list is an ordered collection of scalars, and an array is a variable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 1, "creation_date": 1532565265, "post_id": 51529209, "comment_id": 90027093, "body": "@collapsar, &quot;Array&quot; is a type of variable, and &quot;list&quot; isn&#39;t. List is an ambiguous, overloaded term that means many other things."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1532565537, "post_id": 51529209, "comment_id": 90027134, "body": "@MattJacob Yes, an &#39;array&#39; is the variable that holds a &#39;list&#39; which imho makes it pretty unambiguously a &#39;list variable&#39;. But you&#39;re technically right of course, the precise wording to use is &#39;array variable&#39;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 1, "creation_date": 1532600098, "post_id": 51529209, "comment_id": 90040291, "body": "@collapsar: <code>my @array = (1, 2, 3, 4)</code>, <code>my %hash = (1, 2, 3, 4)</code> and <code>my $scalar = [ 1, 2, 3, 4 ]</code> all &quot;hold lists&quot;. So, in Perl, every variable is a &quot;list variable&quot; by your definition. That isn&#39;t useful. There is no way that <code>%hash</code> or <code>$scalar</code> could be said to be &quot;array variables&quot;."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532601096, "post_id": 51529209, "comment_id": 90040923, "body": "@Borodin The idioms you present are notational shorthands for assignments and do not reflect the datatype of the variable, ie. the way the information is organized and can be retrieved after the assignment. By your reasoning <code>my %hash = @array</code> would imply that <code>%hash</code> was an array variable."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 1, "creation_date": 1532604489, "post_id": 51529209, "comment_id": 90042926, "body": "@collapsar: <code>%hash = @array</code> extracts a <i>list</i> of data from the array and assigns it to the hash, so no:  <code>%hash</code> is still a &quot;list variable&quot;. But the &quot;reasoning&quot; was your own. <i>&quot;the variable holds a &#39;list&#39; ... makes it ... a &#39;list variable&#39;&quot;</i> A hash <i>can</i> hold a list but it <i>cannot</i> hold an array. Identifying variables by the type of data they hold is a futile hangover from strongly-typed languages where &quot;string variable&quot; means something. In Perl it does not, and is as uninformative as saying that, in <code>$n = 2</code>, <code>$n</code> is a &quot;two-variable&quot;. A type is named by the way it organises its data."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 1, "creation_date": 1532605098, "post_id": 51529209, "comment_id": 90043301, "body": "@collapsar: Your contention worries me. The most important tenet of software engineering is accuracy, and sloppiness like calling arrays &quot;list variables&quot; is something that is likely to leech into the rest of your work. I can forgive a mistake, but I would not employ someone who vigorously defends their mistakes in the face of much more knowledgeable people."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532607952, "post_id": 51529209, "comment_id": 90045098, "body": "@Borodin Whoa, no need get personal. Your SO rep is a strong indication that you are indeed much more knowledgeable. And I appreciate your readiness to share your knowledge (in general and in this thread). However, I do not understand the doggedness with which you pursue your point. Several comments earlier I have acknowledged that the proper term is &#39;array (variable)&#39; - so the matter is actually settled. All I&#39;m saying is that a hash is a different abstraction than an array and while both may be assigned a list and thus can be said being able to &#39;hold a list&#39;, ..."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532607959, "post_id": 51529209, "comment_id": 90045105, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/176802/discussion-between-collapsar-and-borodin\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1532567896, "post_id": 51529517, "comment_id": 90027550, "body": "Cool. But why the <code>use 5.012;</code>?"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1532568186, "post_id": 51529517, "comment_id": 90027606, "body": "I could have said <code>use feature &#39;say&#39;;</code> to enable the &#39;new&#39; <code>say</code> function, but <code>use &lt;version&gt;;</code>  checks that the Perl interpreter is at least the specified version and enables all features in that version (which include <code>say</code>).  In this case, any version later than 5.010 would work for this purpose.  5.12 is old enough to be almost everywhere."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1532577808, "post_id": 51529517, "comment_id": 90029460, "body": "Yes, understood, but your code doesn&#39;t really need anything in new features (or does it?), and it keeps the example simpler.Should have made that clearer."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1532609811, "post_id": 51529517, "comment_id": 90046337, "body": "I was expecting you to get to <code>say q{my email is abc@gmail.com};</code>"}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 8, "last_activity_date": 1532566432, "creation_date": 1532566432, "answer_id": 51529517, "question_id": 51529209, "link": "https://stackoverflow.com/questions/51529209/print-in-quotes-in-perl/51529517#51529517", "title": "print @ in quotes in perl", "body": "<p>One of the mottos of the Perl community is \"there's more than one way to do it\".  In this case there are many ways to achieve what you're trying to do, each will have advantages in different situations.  I've illustrated some answers below.</p>\n\n<p>Firstly, you didn't mention what output you were getting.  Assuming you have some sensible default boilerplate like this at the top of your script ...</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.012;\nuse strict;\nuse warnings;\nuse autodie;\n</code></pre>\n\n<p>then this line of code ...</p>\n\n<pre><code>print \"my email is \\\"abc@gmail.com\\\"\\n\";\n</code></pre>\n\n<p>should give you an error message similar to this:</p>\n\n<pre><code>Possible unintended interpolation of @gmail in string at ./ptst.pl line 10.\nGlobal symbol \"@gmail\" requires explicit package name at ./ptst.pl line 10.\nExecution of ./ptst.pl aborted due to compilation errors.\n</code></pre>\n\n<p>Which is telling you that Perl is interpreting the <code>@</code> symbol to be the start of an array name.  So it takes the 'word' which follows and uses that as an identifier name and thinks you're trying to refer to the array variable <code>@gmail</code>.  Since the script does not declare that array with <code>my @gmail</code> anywhere, <code>use strict</code> will throw a fatal exception. (Note: I tweaked your code a little to include <code>\\n</code> to add a newline at the end).</p>\n\n<p>The simplest change you could make is to just put a backslash (<code>\\</code>) in front of the <code>@</code> symbol to 'escape' it - i.e.: <code>\\@</code> tells Perl that you just want an <code>@</code> character and this it is not the start of an array identifier.</p>\n\n<pre><code>print \"my email is \\\"abc\\@gmail.com\\\"\\n\";\n</code></pre>\n\n<p>This does look a little messy.  One reason is that you have a double quoted string with double quotes in it, so they are also escaped with <code>\\\"</code>.  Another way to represent a double-quoted string is to use the <code>qq</code> operator and then choose your own string delimiters.   Here I used curly braces as the delimiters, so the embedded double quotes no longer need to be escaped:</p>\n\n<pre><code>print qq{my email is \"abc\\@gmail.com\"\\n};\n</code></pre>\n\n<p>However the main reason to use double quotes is to allow variables in you string to be 'interpolated' (i.e.: the variable name will be replaced with the contents of the va    riable).  But your string doesn't include any variables.  So a better fix might be to just use single quotes, which don't do variable interpolation so symbols like <code>@</code> and <code>$</code> are not special and don't need to be escaped:</p>\n\n<pre><code>print 'my email is \"abc@gmail.com\"', \"\\n\";\n</code></pre>\n\n<p>Unfortunately the other thing that double quotes do is allow you to use special sequences like <code>\\n</code> for a newline or <code>\\t</code> for a tab.  In my example I wanted a newline, so I took advantage of the fact that the <code>print</code> function accepts a list of arguments and passed it two strings: the first used single quotes to avoid escaping and the second used double quotes to allow escape sequences.  In another context where you had to use a single string, instead of the comma separator, you could use the <code>.</code> operator to concatenate the two strings into one:</p>\n\n<pre><code>my $message = 'my email is \"abc@gmail.com\"' . \"\\n\";\n</code></pre>\n\n<p>But if the only reason for using double quotes is to add the newline on the end of the print, then you could instead use the <code>say</code> function which is exactly the same as print but it adds a newline on the end:</p>\n\n<pre><code>say 'my email is \"abc@gmail.com\"';\n</code></pre>\n\n<p>If you try this and get an error like <code>(Do you need to predeclare say?)</code> then it's because you're missing the boilerplate lines I mentioned at the start.</p>\n\n<p>Your original script didn't use variables, but adding in a variable would be another way to solve your problem:</p>\n\n<pre><code>my $email = 'abc@gmail.com';\nsay qq{my email is \"$email\"};\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>my $email = 'abc@gmail.com';\nsay \"my email is '$email'\";\n</code></pre>\n\n<p>Finally, another approach that is sometimes useful is to use <code>printf</code> or <code>sprintf</code> to plug variables into a 'template' string.  This can be handy for formatting numbers with decimal places, adding leading zeros, padding strings with spaces etc:</p>\n\n<pre><code>printf(qq{my email is \"%s\"\\n}, $email);\n</code></pre>\n\n<p>Once again this became a little more complicated due to the newline.  If you don't need it then it's easier to use single quotes around the format string:</p>\n\n<pre><code>printf('my email is \"%s\"', $email);\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 3586305, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/464ee72c175d2c8cbb8488ec020ef5b8?s=128&d=identicon&r=PG&f=1", "display_name": "jms1980", "link": "https://stackoverflow.com/users/3586305/jms1980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1216, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1532566432, "creation_date": 1532562989, "question_id": 51529209, "link": "https://stackoverflow.com/questions/51529209/print-in-quotes-in-perl", "title": "print @ in quotes in perl", "body": "<p>I want to print the line:</p>\n\n<pre><code>my email is \"abc@gmail.com\" \n</code></pre>\n\n<p>using a perl script.</p>\n\n<p>Below is a snippet of what I am trying to do:</p>\n\n<pre><code>print \"my email is \\\"abc@gmail.com\\\";\n</code></pre>\n\n<p>However when I run the program is does not recognize the @ symbol.  How do I tweak the code snippet so that I get the @ to display?</p>\n"}, {"tags": ["perl", "io-redirection"], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 1973116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa3807757c3cdae162a0184e8c434d0b?s=128&d=identicon&r=PG", "display_name": "A.Ellett", "link": "https://stackoverflow.com/users/1973116/a-ellett"}, "edited": false, "score": 0, "creation_date": 1532799765, "post_id": 51573734, "comment_id": 90113385, "body": "Wow.  Thanks.  First matter:  from what you&#39;re saying, it sounds like I should be testing <code>( -p STDIN )</code>, which would make my code more readable and logical."}, {"owner": {"reputation": 261, "user_id": 1973116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa3807757c3cdae162a0184e8c434d0b?s=128&d=identicon&r=PG", "display_name": "A.Ellett", "link": "https://stackoverflow.com/users/1973116/a-ellett"}, "edited": false, "score": 0, "creation_date": 1532799820, "post_id": 51573734, "comment_id": 90113404, "body": "Thanks for the other comments about <code>use strict</code> and so forth."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 261, "user_id": 1973116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa3807757c3cdae162a0184e8c434d0b?s=128&d=identicon&r=PG", "display_name": "A.Ellett", "link": "https://stackoverflow.com/users/1973116/a-ellett"}, "edited": false, "score": 0, "creation_date": 1532799914, "post_id": 51573734, "comment_id": 90113432, "body": "@A.Ellett Well, what are you trying to achieve? Do you just want to know whether your STDIN is interactive (with a user typing into it) or not? If so, you want <code>-t STDIN</code> but with your expectations flipped around. :-)"}, {"owner": {"reputation": 261, "user_id": 1973116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa3807757c3cdae162a0184e8c434d0b?s=128&d=identicon&r=PG", "display_name": "A.Ellett", "link": "https://stackoverflow.com/users/1973116/a-ellett"}, "edited": false, "score": 0, "creation_date": 1532800135, "post_id": 51573734, "comment_id": 90113486, "body": "I originally just wanted perl to rewrite the output of other commands into something more readable.  That brought up a bag of worms about topics for which I don&#39;t have much of a firm grasp:  namely pipes, redirection, etc.  So, short answer is, no interactive user input for this particular application."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1532799209, "creation_date": 1532799209, "answer_id": 51573734, "question_id": 51526729, "link": "https://stackoverflow.com/questions/51526729/redirected-input-via-stdin-is-not-functioning-as-expected/51573734#51573734", "title": "Redirected input via STDIN is not functioning as expected", "body": "<pre><code>use strict 'vars';\n</code></pre>\n\n<p>Why are you doing this? You should really just <code>use strict;</code> and enable all three strictures, not just <code>vars</code>. You should also <code>use warnings;</code>.</p>\n\n<hr>\n\n<p>If you check <a href=\"https://perldoc.pl/functions/-t\" rel=\"nofollow noreferrer\"><code>perldoc -f -t</code></a>, you'll see that the documentation says:</p>\n\n<blockquote>\n  <p><code>-t  Filehandle is opened to a tty.</code></p>\n</blockquote>\n\n<p>In other words, it's not testing whether there is a STDIN (there always is a STDIN (unless your parent process was naughty and closed it before starting you)), but whether STDIN refers to a terminal (the abbreviation \"tty\" originally referred to a <a href=\"https://en.wikipedia.org/wiki/Teleprinter\" rel=\"nofollow noreferrer\">teletype</a>, but the name kind of stuck when they were replaced by <a href=\"https://en.wikipedia.org/wiki/Computer_terminal\" rel=\"nofollow noreferrer\">text terminals</a> and later <a href=\"https://en.wikipedia.org/wiki/Terminal_emulator\" rel=\"nofollow noreferrer\">terminal emulators</a> such as xterm). In C terms, it corresponds to a call to <a href=\"http://man7.org/linux/man-pages/man3/isatty.3.html\" rel=\"nofollow noreferrer\"><code>isatty</code></a>.</p>\n\n<p>In your first example, you have <code>zit &lt;(echo a;echo b)</code>. The <code>&lt;( ... )</code> notation makes bash run the specified command with its STDOUT redirected to a pipe. It then substitutes <code>&lt;( ... )</code> by a filename that refers to (the read end of) the pipe.</p>\n\n<p>Specifically, it runs <code>zit /dev/fd/63</code> (where file descriptor 63 refers to the read end of a pipe whose write end is fed by <code>echo a; echo b</code>). Nothing happens to STDIN, so <code>zit</code> inherits its standard streams from the shell, so STDIN refers to a terminal, which is why <code>-t STDIN</code> returns true.</p>\n\n<p>In your second example, you have <code>zit &lt; &lt;(echo a;echo b)</code>. This is very similar, but now the resulting command is <code>zit &lt; /dev/fd/63</code>. The <code>&lt; FILE</code> notation tells the shell to open the specified file for reading and redirect STDIN to it.</p>\n\n<p>Thus it runs <code>zit</code> (without any command line arguments) with STDIN connected to a pipe (whose other end is fed by <code>echo a; echo b</code>). This is effectively the same as <code>( echo a; echo b ) | zit</code>. Here zit's STDIN refers to a pipe, not a terminal, so <code>-t STDIN</code> returns false. You can still read from it, of course: Most things you can read from are not terminals, such as plain files, pipes, or sockets.</p>\n"}], "owner": {"reputation": 261, "user_id": 1973116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa3807757c3cdae162a0184e8c434d0b?s=128&d=identicon&r=PG", "display_name": "A.Ellett", "link": "https://stackoverflow.com/users/1973116/a-ellett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 51573734, "answer_count": 1, "score": 0, "last_activity_date": 1532799209, "creation_date": 1532548528, "last_edit_date": 1532797611, "question_id": 51526729, "link": "https://stackoverflow.com/questions/51526729/redirected-input-via-stdin-is-not-functioning-as-expected", "title": "Redirected input via STDIN is not functioning as expected", "body": "<p>I wrote some code where I thought I was testing for whether there was STDIN.  But the code worked contrary to what I was expecting.</p>\n\n<p>Here's the code I wrote, I've called it <code>zit</code></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict 'vars';\n\nmy @a = @ARGV ? @ARGV : \"EMPTY\";\nprintf \"  command line arguments: \\\"%s\\\" as expected\\n\", @a;\nif ( -t STDIN )\n  {\n    print \"  ( -t STDIN ) returns TRUE\\n\";\n  }\nelse\n  {\n    print \"  ( -t STDIN ) returns FALSE\\n\";\n    print \"  But, I can iterate over &lt;STDIN&gt;!  Huh?? Behold:\\n\";\n  }\n</code></pre>\n\n<p>Here's what I thought:</p>\n\n<ul>\n<li><p><code>zit &lt;(echo a;echo b)</code> would result in <code>( -t STDIN )</code> being <code>FALSE</code>.  </p></li>\n<li><p><code>zit &lt; &lt;(echo a;echo b)</code> would result in<code>( -t STDIN )</code> being <code>TRUE</code>.</p></li>\n</ul>\n\n<p>So, to try to figure out what might be going on, I modified the <code>if-then</code> code by adding a <code>while</code> loop (based upon my understanding, I put it where I thought it should create problems).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict 'vars';\n\nmy @a = @ARGV ? @ARGV : \"EMPTY\";\nprintf \"  command line arguments: \\\"%s\\\" as expected\\n\", @a;\n\nif ( -t STDIN )\n  {\n    print \"  ( -t STDIN ) returns TRUE\\n\";\n  }\nelse\n  {\n    print \"  ( -t STDIN ) returns FALSE\\n\";\n    print \"  But, I can iterate over &lt;STDIN&gt;!  Huh?? Behold:\\n\";\n    while ( &lt;STDIN&gt; )\n      {\n        print \"&gt;&gt; $_\";\n      }\n  }\n</code></pre>\n\n<p>Here's the output from this code</p>\n\n<p><code>zit &lt;(echo a;echo b)</code> has the following output</p>\n\n<pre><code>  command line arguments: \"/dev/fd/63\" as expected\n  ( -t STDIN ) returns TRUE\n</code></pre>\n\n<p><code>zit &lt; &lt;(echo a;echo b)</code> has the following output</p>\n\n<pre><code>  command line arguments: \"EMPTY\" as expected\n  ( -t STDIN ) returns FALSE\n  But, I can iterate over &lt;STDIN&gt;!  Huh?? Behold:\n&gt;&gt; a\n&gt;&gt; b\n</code></pre>\n\n<p>I'm really confused by this.  This is not behaving as I thought things should.  If <code>( -t STDIN )</code> is false, why does the <code>while</code> loop work?  </p>\n\n<p>Could someone explain what's happening here?</p>\n\n<p>I've re-edited this post from before to be a bit less confusing.</p>\n"}, {"tags": ["windows", "perl", "line-endings"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1532547677, "post_id": 51526232, "comment_id": 90021618, "body": "See also <a href=\"https://perldoc.perl.org/perlport.html#Newlines\" rel=\"nofollow noreferrer\">perlport</a>, and the <code>:crlf</code> layer"}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "edited": false, "score": 0, "creation_date": 1532555968, "post_id": 51526441, "comment_id": 90025084, "body": "When wanting to set a temporary environment variable for a script, it is easy to just include that before the command. I think this is portable across all shells. &gt; PERLIO=:raw perl -i.bak -pe&quot;s///&quot; file"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 373, "user_id": 8845620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0082695b3d26ff97841bb1e65862a0a?s=128&d=identicon&r=PG&f=1", "display_name": "UncleCarl", "link": "https://stackoverflow.com/users/8845620/unclecarl"}, "edited": false, "score": 0, "creation_date": 1532556055, "post_id": 51526441, "comment_id": 90025119, "body": "@UncleCarl, It is most definitely not portable to all shells. In particular, it&#39;s not supported by the one used here."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1532565549, "last_edit_date": 1532565549, "creation_date": 1532547329, "answer_id": 51526441, "question_id": 51526232, "link": "https://stackoverflow.com/questions/51526232/perl-one-liner-to-preserve-line-endings/51526441#51526441", "title": "perl one liner to preserve line endings", "body": "<p>If you were talking about a <code>:utf8</code> layer, you could use the following:</p>\n\n<pre><code>perl -i.bak -CSD -pe\"s///\" file\n</code></pre>\n\n<p>But there's no option for <code>:raw</code>.</p>\n\n<hr>\n\n<p>If you were talking about an <code>:encoding</code> layer, you could use the following:</p>\n\n<pre><code>perl -i.bak -Mopen=:std,:encoding(...) -pe\"s///\" file\n</code></pre>\n\n<p>But <code>:raw</code> is not supported by <code>use open</code>.</p>\n\n<hr>\n\n<p>When using <code>-i</code> specifically (i.e. when not using using STDIN or STDOUT), the following will do what you want:</p>\n\n<pre><code>set PERLIO=:raw\nperl -i.bak -pe\"s///\" file\nset PERLIO=\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10135351, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-A9UQmoICbYA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rLgOc0maethJ1YE0rZC0l74I55qQ/mo/photo.jpg?sz=128", "display_name": "John Han", "link": "https://stackoverflow.com/users/10135351/john-han"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532565549, "creation_date": 1532546498, "last_edit_date": 1532547520, "question_id": 51526232, "link": "https://stackoverflow.com/questions/51526232/perl-one-liner-to-preserve-line-endings", "title": "perl one liner to preserve line endings", "body": "<p>I use the following perl one liner to search and replace pattern in files:</p>\n\n<pre><code>perl -pi.bak -e \"s/pattern/replacement/g\" file\n</code></pre>\n\n<p>The problem is that on Windows perl replaces line endings with Windows-style. I need to preserve the line endings whatever they are. Is there a command line option or something else to accomplish that? Thanks a lot in advance.</p>\n"}, {"tags": ["regex", "perl", "sed", "sublimetext", "regex-lookarounds"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1532540882, "post_id": 51524825, "comment_id": 90018584, "body": "Which kind of editor are you using for searching? Or are you looking for a general scripting solution?"}, {"owner": {"reputation": 91, "user_id": 10095170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd29272a04cbf3f82f2eccbd60ccc7b9?s=128&d=identicon&r=PG&f=1", "display_name": "W.Smith", "link": "https://stackoverflow.com/users/10095170/w-smith"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1532541022, "post_id": 51524825, "comment_id": 90018657, "body": "sublime, but I could also switch to something else if perl or sed is needed for this right now I&#39;m trying it with regex"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1532541577, "post_id": 51524825, "comment_id": 90018945, "body": "Writing <code>&lt;Mansions \\&gt;</code> (instead of <code>&lt;Mansions&gt;</code>) looks like you are trying to hide that your file is an XML file."}, {"owner": {"reputation": 91, "user_id": 10095170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd29272a04cbf3f82f2eccbd60ccc7b9?s=128&d=identicon&r=PG&f=1", "display_name": "W.Smith", "link": "https://stackoverflow.com/users/10095170/w-smith"}, "edited": false, "score": 0, "creation_date": 1532541968, "post_id": 51524825, "comment_id": 90019132, "body": "not an xml file this is just a line in a file or in this case group of lines and it ends with <code>&lt;&#47; Mansion&gt;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532544127, "post_id": 51524825, "comment_id": 90020088, "body": "@W.Smith: Are you sure about that? You don&#39;t seem to know whether the block ends with <code>&lt;\\ Mansion&gt;</code> or <code>&lt;&#47; Mansion&gt;</code>. It&#39;s very unwise to invent a markup that looks extremely similar to an existing standard but doesn&#39;t follow its syntax, and using backslashes as a  major component of a markup language is very odd."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1532541916, "creation_date": 1532541916, "answer_id": 51525161, "question_id": 51524825, "link": "https://stackoverflow.com/questions/51524825/is-there-a-regex-perl-or-sed-that-can-remove-one-line-from-a-particular-group/51525161#51525161", "title": "Is there a regex, perl, or sed that can remove one line from a particular group of lines in a file?", "body": "<p>In Perl you could try the following:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $str = '\n&lt;Mansions \\&gt;\n walls\n windows\n floors\n&lt;\\Mansions&gt;';\n\nmy $word = 'walls';\n\n$str =~ s/^(\\s*&lt;Mansions\\s*\\\\&gt;)(.*?)(&lt;\\\\Mansions&gt;)/do_replace($1, $2, $3, $word)/mseg;\n\nsay $str;\n\nsub do_replace {\n    my ( $header, $group, $closer, $word ) = @_;\n    $header. ($group =~ s/\\n?^\\s*\\Q$word\\E\\s*$//mr) . $closer;\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>&lt;Mansions \\&gt;\n windows\n floors\n&lt;\\Mansions&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 1, "last_activity_date": 1532548021, "creation_date": 1532548021, "answer_id": 51526608, "question_id": 51524825, "link": "https://stackoverflow.com/questions/51524825/is-there-a-regex-perl-or-sed-that-can-remove-one-line-from-a-particular-group/51526608#51526608", "title": "Is there a regex, perl, or sed that can remove one line from a particular group of lines in a file?", "body": "<p>Here's a Perl one-liner that uses the flip flop operator (<code>..</code>) to only operate on text within two regex matches. It skips the line if it matches <code>/wall/</code> and is within the opening and closing text.</p>\n\n<pre><code>perl -ne '/walls/ &amp;&amp; next if /Mansions \\\\/ .. /&lt;\\\\Mansions&gt;/; print' file.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7747, "user_id": 4086774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa70eacd799b083b10a8a43b418e2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Lars Fischer", "link": "https://stackoverflow.com/users/4086774/lars-fischer"}, "is_accepted": false, "score": 0, "last_activity_date": 1532550235, "creation_date": 1532550235, "answer_id": 51527108, "question_id": 51524825, "link": "https://stackoverflow.com/questions/51524825/is-there-a-regex-perl-or-sed-that-can-remove-one-line-from-a-particular-group/51527108#51527108", "title": "Is there a regex, perl, or sed that can remove one line from a particular group of lines in a file?", "body": "<p>If the groups are not grouped inside each other, a sed script might work:</p>\n\n<p><strong>script.sed</strong></p>\n\n<pre><code>/&lt;Mansions \\\\&gt;/,/&lt;\\\\Mansions&gt;/ {\n    /^[[:blank:]]*walls[[:blank:]]*$/ d\n}\n</code></pre>\n\n<p>You run it like <code>sed -Ef script.sed yourfile</code>.</p>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>/&lt;Mansions \\\\&gt;/,/&lt;\\\\Mansions&gt;/  { ... }</code> takes care that the inner expression is only applied to lines between <code>&lt;Mansions \\&gt;</code> and <code>&lt;\\Mansions&gt;</code>. This will not work when Mansions are grouped inside other Mansions.</li>\n<li><code>/^[[:blank:]]*walls[[:blank:]]*$/ ...</code> selects lines that consists of the word <code>walls</code> with optional leading and trailings blanks.</li>\n<li><code>d</code> means delete such lines.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 10095170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd29272a04cbf3f82f2eccbd60ccc7b9?s=128&d=identicon&r=PG&f=1", "display_name": "W.Smith", "link": "https://stackoverflow.com/users/10095170/w-smith"}, "edited": false, "score": 0, "creation_date": 1532621851, "post_id": 51530965, "comment_id": 90054503, "body": "how would you do that with a absolute file path something like <code>&#47;etc&#47;name&#47;pass&#47;car</code> instead of just file?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 91, "user_id": 10095170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd29272a04cbf3f82f2eccbd60ccc7b9?s=128&d=identicon&r=PG&f=1", "display_name": "W.Smith", "link": "https://stackoverflow.com/users/10095170/w-smith"}, "edited": false, "score": 1, "creation_date": 1532627487, "post_id": 51530965, "comment_id": 90057462, "body": "Same way you&#39;d do anything else - <code>awk &#39;script&#39; &#47;etc&#47;name&#47;pass&#47;car</code> instead of <code>awk &#39;script&#39; file</code>."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 1, "last_activity_date": 1532579018, "creation_date": 1532579018, "answer_id": 51530965, "question_id": 51524825, "link": "https://stackoverflow.com/questions/51524825/is-there-a-regex-perl-or-sed-that-can-remove-one-line-from-a-particular-group/51530965#51530965", "title": "Is there a regex, perl, or sed that can remove one line from a particular group of lines in a file?", "body": "<pre><code>$ awk '/&lt;\\\\Mansions&gt;/{f=0} f &amp;&amp; /walls/{next} /&lt;Mansions \\\\&gt;/{f=1} 1' file\n&lt;Mansions \\&gt;\n windows\n floors\n&lt;\\Mansions&gt;\n</code></pre>\n\n<p>The above will work using any awk in any shell on any UNIX box.</p>\n"}, {"tags": [], "owner": {"reputation": 4755, "user_id": 18665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXnTw.gif?s=128&g=1", "display_name": "jwpfox", "link": "https://stackoverflow.com/users/18665/jwpfox"}, "is_accepted": false, "score": 0, "last_activity_date": 1532768646, "creation_date": 1532768646, "answer_id": 51569765, "question_id": 51524825, "link": "https://stackoverflow.com/questions/51524825/is-there-a-regex-perl-or-sed-that-can-remove-one-line-from-a-particular-group/51569765#51569765", "title": "Is there a regex, perl, or sed that can remove one line from a particular group of lines in a file?", "body": "<p>Why are you making it hard? As described your problem requires no code or regex or anything other than pure vanilla find and replace functionality. If there is something else hidden in your question that requires a code answer I can't find it.</p>\n\n<ol>\n<li>Open Find and Replace.</li>\n<li><p>In <code>Find</code> use this:</p>\n\n<p><code>&lt;Mansions \\&gt;\n  windows\n  walls\n  floors\n&lt;\\Mansions&gt;</code></p></li>\n<li><p>In <code>Replace</code> use this:</p>\n\n<p><code>&lt;Mansions \\&gt;\n  windows\n  floors\n&lt;\\Mansions&gt;</code></p></li>\n<li><p>Click <code>Replace All</code>.</p></li>\n</ol>\n\n<p>Mission accomplished.</p>\n"}], "owner": {"reputation": 91, "user_id": 10095170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd29272a04cbf3f82f2eccbd60ccc7b9?s=128&d=identicon&r=PG&f=1", "display_name": "W.Smith", "link": "https://stackoverflow.com/users/10095170/w-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 51530965, "answer_count": 5, "score": 1, "last_activity_date": 1533662600, "creation_date": 1532540502, "last_edit_date": 1533662600, "question_id": 51524825, "link": "https://stackoverflow.com/questions/51524825/is-there-a-regex-perl-or-sed-that-can-remove-one-line-from-a-particular-group", "title": "Is there a regex, perl, or sed that can remove one line from a particular group of lines in a file?", "body": "<p>So for example if I have something like:</p>\n\n<pre><code>&lt;Mansions \\&gt;\n windows\n walls\n floors\n&lt;\\Mansions&gt;\n</code></pre>\n\n<p>and I want to remove lets say walls and keep the other lines there how do I do that with regex or is there a better option than regex?</p>\n\n<p>So I need it to look like:</p>\n\n<pre><code>&lt;Mansions \\&gt;\n windows\n floors\n&lt;\\Mansions&gt;\n</code></pre>\n\n<p>and the lines up above will still be there after I remove walls. So the goal is to search for those group of lines in the file and remove one word and still keep the other words there and in the group. </p>\n\n<p>Keep in my mind I'm just changing this group in the file, not an instance of the word in the file because that would be a simpler expression.</p>\n\n<p>I have tried using a regex that goes:</p>\n\n<pre><code>^(&lt;Mansion\\s*\"/.*/.*\"&gt;)((?:\\n(?!.*(?:walls\\s(floor|windows)+.*\\n|&lt;/Mansion&gt;)).*)*\\n&lt;/Mansion&gt;)$\n</code></pre>\n\n<p>but that is not working when I remove a single word like walls</p>\n\n<p>So is it possible to use regex for something like this or no?</p>\n"}, {"tags": ["perl", "cgi", "lwp"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 3, "creation_date": 1532538969, "post_id": 51523854, "comment_id": 90017599, "body": "Just to eliminate some potential cul-de-sacs: Does <code>&#47;usr&#47;bin&#47;env perl</code> run <code>&#47;usr&#47;bin&#47;perl</code>? Are there several Perl installations or just the one belonging to the system at <code>&#47;usr</code>? Are the relevant modules reasonably up to date (RHEL7 came out in 2014 unless I&#39;m misinformed)? Test with <code>perl -mLWP::UserAgent -mHTTP::Message -E&#39;say &quot;$_ &quot;.$_-&gt;VERSION  for qw(LWP::UserAgent HTTP::Message)&#39;</code>"}, {"owner": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1532541456, "post_id": 51523854, "comment_id": 90018881, "body": "<code>perl</code> is in <code>&#47;usr&#47;bin&#47;perl</code>. These are the versions: <code>LWP::UserAgent 6.05</code>, <code>HTTP::Message 6.06</code>. They are the Redhat-supplied ones, so technically the versions are <code>6.05-2.el7</code> and <code>6.06-6.el7</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532541902, "post_id": 51525104, "comment_id": 90019096, "body": "1. As I mentioned in the question, SELinux is in permissive mode, so this isn&#39;t the problem. I only included that line to show that the request is being made by Perl.   2. I have the same problem when I run as the <code>apache</code> user. It works fine when run on the command line and does not work when run as CGI.   3. I have since hard-coded the path to Perl and it doesn&#39;t make a difference."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532542460, "post_id": 51525104, "comment_id": 90019370, "body": "@yakatz The log clearly says SELinux denied the TCP connection. And those Perl errors are consistent with that. <code>Unrecognised protocol tcp</code> means <code>getprotobyname(&quot;tcp&quot;)</code> failed inside <code>IO::Socket::IP</code> and one of the ways that can happen is via SELinux. It&#39;s also possible your server is running your code as something other than <code>apache</code>."}, {"owner": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532542672, "post_id": 51525104, "comment_id": 90019470, "body": "<code>[root@server3 cgi-bin]# sudo -u apache perl -wle &#39;print getprotobyname(&quot;tcp&quot;)&#39;</code> output is <code>tcpTCP6</code>. When I run <code>getenforce</code>, it says <code>Permissive</code>, so I would expect that even though the log says it was denied, that just means it would be denied if the mode was set to <code>Enforcing</code>."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532542895, "post_id": 51525104, "comment_id": 90019555, "body": "@yakatz Two possibilities. First, verify what user it&#39;s running your code as. Print the real and effective UID of the CGI process. <code>$&lt;</code> and <code>$&gt;</code>. Second, some applications ignore your SELinux configuration. <a href=\"https://wiki.gentoo.org/wiki/SELinux/Tutorials/Permissive_versus_enforcing#Differences_in_application_behavior\" rel=\"nofollow noreferrer\">wiki.gentoo.org/wiki/SELinux/Tutorials/&hellip;</a>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532543137, "post_id": 51525104, "comment_id": 90019665, "body": "@yakatz I think that&#39;s the problem. More on <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/chap-managing_confined_services-the_apache_http_server#sect-Managing_Confined_Services-The_Apache_HTTP_Server-The_Apache_HTTP_Server_and_SELinux\" rel=\"nofollow noreferrer\">RedHat + Apache + SELinux</a> and <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/sect-security-enhanced_linux-troubleshooting-fixing_problems\" rel=\"nofollow noreferrer\">Permissive Domains</a>."}, {"owner": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532543366, "post_id": 51525104, "comment_id": 90019755, "body": "Real and effective UIDs are both 48. To check SELinux, I ran <code>setsebool -P httpd_can_network_connect 1</code>. Now the <code>denied</code> message isn&#39;t logged, but I still get the same errors."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 1, "creation_date": 1532543597, "post_id": 51525104, "comment_id": 90019853, "body": "@yakatz Again, I believe Apache is doing its own thing with SELinux. <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/chap-managing_confined_services-the_apache_http_server#sect-Managing_Confined_Services-The_Apache_HTTP_Server-The_Apache_HTTP_Server_and_SELinux\" rel=\"nofollow noreferrer\">It has its own <code>httpd_t</code> SELinux domain</a> and you have to <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/sect-security-enhanced_linux-troubleshooting-fixing_problems\" rel=\"nofollow noreferrer\">configure that separately</a>."}, {"owner": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532544485, "post_id": 51525104, "comment_id": 90020252, "body": "I ran <code>semanage permissive -a httpd_t</code> to explicitly set the <code>httpd_t</code> domain to permissive. Nothing httpd-related is logged in the audit log and the script still doesn&#39;t work."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532546833, "post_id": 51525104, "comment_id": 90021275, "body": "@yakatz Sorry, I&#39;m at the end of my knowledge of SELinux. I&#39;ve added the <code>selinux</code> tag to the question to try and get you some better help. One last thought, have you checked if <code>perl</code> has an selinux domain?"}, {"owner": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "edited": false, "score": 0, "creation_date": 1532547044, "post_id": 51525104, "comment_id": 90021358, "body": "Once I disabled <code>httpd_t</code>, there is nothing else in the audit log, so I don&#39;t think it is an <code>selinux</code> issue. I am looking deeper into Perl library issues."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1532543386, "last_edit_date": 1532543386, "creation_date": 1532541672, "answer_id": 51525104, "question_id": 51523854, "link": "https://stackoverflow.com/questions/51523854/lwp-wont-run-in-cgi-script/51525104#51525104", "title": "LWP Won&#39;t Run in CGI Script", "body": "<p><a href=\"https://wiki.gentoo.org/wiki/SELinux/Tutorials/Where_to_find_SELinux_permission_denial_details\" rel=\"nofollow noreferrer\">SE-Linux denied the TCP connection</a>.</p>\n\n<pre><code>avc:  denied  { name_connect }\n</code></pre>\n\n<blockquote>\n  <p>The default access controls for networking by SELinux are based on the labels assigned to TCP and UDP ports and sockets. For instance, the TCP port 80 is labeled with http_port_t (and class tcp_socket). Access towards this port is then governed through SELinux access controls, such as name_connect and name_bind.</p>\n  \n  <p>When an application is connecting to a port, the name_connect permission is checked. However, when an application binds to the port, the name_bind permission is checked. </p>\n</blockquote>\n\n<p>Permissive mode or not, Perl is acting like it was denied a TCP connection. <code>Unrecognised protocol tcp</code> means <code>getprotobyname(\"tcp\")</code> <a href=\"https://metacpan.org/source/PEVANS/IO-Socket-IP-0.39/lib/IO/Socket/IP.pm#L441\" rel=\"nofollow noreferrer\">failed inside IO::Socket::IP</a>. That's very, very unusual. One of the ways that can happen is via exactly that SELinux denial.</p>\n\n<p>I'm no SELinux expert, but according to RedHat and Gentoo <a href=\"https://wiki.gentoo.org/wiki/SELinux/Tutorials/Permissive_versus_enforcing#Differences_in_application_behavior\" rel=\"nofollow noreferrer\">some SELinux aware applications will ignore the global permissive setting</a> and go it alone. <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/chap-managing_confined_services-the_apache_http_server#sect-Managing_Confined_Services-The_Apache_HTTP_Server-The_Apache_HTTP_Server_and_SELinux\" rel=\"nofollow noreferrer\">RHEL 7 Apache appears to be one of them</a>. It appears to <a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/sect-security-enhanced_linux-troubleshooting-fixing_problems\" rel=\"nofollow noreferrer\">have its own domain which must be set permissive</a>.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>On all three I can run the script on the command line and get the expected results:</em></p>\n</blockquote>\n\n<p>There's two reasons for that, and they both have to do with users.</p>\n\n<p>When you run the program you're running as your own user with your own configuration, permissions, and environment variables. In fact, you ran it as <code>root</code> which usually bypasses restrictions. When it runs on the server it runs as a different user, probably the web server user with severe restrictions.</p>\n\n<p>In order to do a realistic test, you need to run it as the same user the web server will. You can use <code>sudo -u</code> for this. For example, if the user is <code>apache</code>...</p>\n\n<pre><code>sudo -u apache ./bibbase_proxy2.cgi\n</code></pre>\n\n<p>BTW <strong><em>Do not test software as root!</em></strong> Not only is it not going to give you sensible results, but if there's a bug in the software there are no safeguards preventing it from wrecking your system.</p>\n\n<hr>\n\n<p>The second problem is <code>#!/usr/bin/env perl</code>. That means to run whatever perl is in your <code>PATH</code>. <code>PATH</code> will be different for different users. Running <code>./bibbase_proxy2.cgi</code> may run with one Perl on the command line and a different one via the web server.</p>\n\n<p>In a server environment, use a hard coded path to Perl like <code>#!/usr/bin/perl</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "is_accepted": false, "score": 1, "last_activity_date": 1533843917, "last_edit_date": 1533843917, "creation_date": 1532631599, "answer_id": 51545844, "question_id": 51523854, "link": "https://stackoverflow.com/questions/51523854/lwp-wont-run-in-cgi-script/51545844#51545844", "title": "LWP Won&#39;t Run in CGI Script", "body": "<p>We tested by rewriting the same script in Python and PHP. Both of them showed error which pointed us in the right direction.</p>\n\n<p>Python <code>urllib2</code> produced the error</p>\n\n<pre><code>&lt;class 'urllib2.URLError'&gt;: &lt;urlopen error [Errno 16] Device or resource busy&gt;\n      args = (error(16, 'Device or resource busy'),)\n      errno = None\n      filename = None\n      message = ''\n      reason = error(16, 'Device or resource busy')\n      strerror = None \n</code></pre>\n\n<p>PHP (run as CGI) wouldn't even start:</p>\n\n<pre><code>[Wed Jul 25 15:24:52.988582 2018] [cgi:error] [pid 10369] [client 172.28.6.200:44387] AH01215: PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/curl.so' - libssh2.so.1: failed to map segment from shared object: Cannot allocate memory in Unknown on line 0\n[Wed Jul 25 15:24:52.988980 2018] [cgi:error] [pid 10369] [client 172.28.6.200:44387] AH01215: PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/dba.so' - libtokyocabinet.so.9: failed to map segment from shared object: Cannot allocate memory in Unknown on line 0\n    ---- Similar lines for all extensions. ----\n</code></pre>\n\n<p>It appears that <a href=\"https://httpd.apache.org/docs/2.4/mod/core.html#rlimitmem\" rel=\"nofollow noreferrer\"><code>RLimitMEM</code></a> blocks access to shared memory and that is required for opening sockets. I can't find any documentation, but removing that line makes it work.</p>\n"}], "owner": {"reputation": 1865, "user_id": 597234, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5177f03f29b85ead87046dd5ce770bde?s=128&d=identicon&r=PG", "display_name": "yakatz", "link": "https://stackoverflow.com/users/597234/yakatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1533843917, "creation_date": 1532536707, "last_edit_date": 1532550679, "question_id": 51523854, "link": "https://stackoverflow.com/questions/51523854/lwp-wont-run-in-cgi-script", "title": "LWP Won&#39;t Run in CGI Script", "body": "<p>I have a CGI script to load publications from BibBase:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse LWP::UserAgent;\n\nmy $url = 'https://bibbase.org/show?bib=http://www.example.com/pubs.bib';\nmy $ua = LWP::UserAgent-&gt;new;\nmy $can_accept = HTTP::Message::decodable;\nmy $response = $ua-&gt;get($url, 'Accept-Encoding' =&gt; $can_accept);\n\nprint \"Content-type: text/html\\n\\n\";\nprint $response-&gt;decoded_content;\n</code></pre>\n\n<p>(This is copied from <a href=\"https://bibbase.org/help/\" rel=\"nofollow noreferrer\">BibBase</a> with the exception that the URL is hard-coded.)</p>\n\n<p>I have three webservers running RHEL7 and Apache 2.4 that are configured the same way by Puppet. On all three I can run the script on the command line and get the expected results:</p>\n\n<pre><code>[root@server1 cgi-bin]# ./bibbase_proxy2.cgi | head\nContent-type: text/html\n\n&lt;img src=\"//bibbase.org/img/ajax-loader.gif\" id=\"spinner\" style=\"display: none;\" alt=\"Loading..\" /&gt;\n\n&lt;div id=\"bibbase\"&gt;\n\n  &lt;script type=\"text/javascript\"&gt;\n    var bibbase = {\n      params: {\"bib\":\"http://www.example.com/pubs.bib\",\"host\":\"bibbase.org\"},\n</code></pre>\n\n<p>When I try to run the script with CGI, I get three different results:</p>\n\n<ul>\n<li>Server1<br>\n<code>Unrecognised protocol tcp at /usr/share/perl5/LWP/Protocol/http.pm line 31.</code></li>\n<li>Server2<br>\n<code>Can't connect to bibbase.org:443 System error at /usr/share/perl5/LWP/Protocol/http.pm line 51.</code></li>\n<li>Server3<br>\nNo http output and the error log says <code>AH01215: Out of memory!</code>.</li>\n</ul>\n\n<p>I can't find anything different between the three servers and I can't figure out why the script works fine on the command line and doesn't work when run as a CGI.</p>\n\n<p>I have selinux in permissive mode and it is logging the outgoing request, so I know the script gets that far:</p>\n\n<pre><code>type=AVC msg=audit(1532465859.921:331235): avc:  denied  { name_connect } for  pid=161178 comm=\"perl\" dest=80 scontext=system_u:system_r:httpd_sys_script_t:s0 tcontext=system_u:object_r:http_port_t:s0 tclass=tcp_socket \n</code></pre>\n\n<p>For testing, I have set selinux to <code>disabled</code> and restarted the server.</p>\n"}, {"tags": ["gcc", "redhat", "rhel", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532530304, "post_id": 51521796, "comment_id": 90012639, "body": "Probably, although a lack of <code>make</code> will cause difficulties. Why don&#39;t you try it? <a href=\"https://perlmaven.com/how-to-build-perl-from-source-code\" rel=\"nofollow noreferrer\"><b><i>How to build Perl from source code</i></b></a>"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532530487, "post_id": 51521796, "comment_id": 90012773, "body": "Hi, I am already preparing the setup on my local machine but its very time taking as I need to install a lot of packages. There is make and gcc available on one server and I can do the building there. But no internet access so won&#39;t be able to install any packages and I am not sure how to install package by package, as wget and curl don&#39;t work. its blocked. Plan is to do the building here, split it into chunks, download from work place, chunk by chunk, and then try to put it to use."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532530592, "post_id": 51521796, "comment_id": 90012838, "body": "@Borodin I am already using that link to build from source."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532530656, "post_id": 51521796, "comment_id": 90012880, "body": "Why are you installing packages before you have Perl working? You can download the Perl sources wherever you like and transfer them on a USB drive. You can also use <a href=\"https://metacpan.org/pod/CPAN::Mini\" rel=\"nofollow noreferrer\"><code>CPAN::Mini</code></a> to keep a local copy of the CPAN library."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532530731, "post_id": 51521796, "comment_id": 90012926, "body": "<i>&quot;download from work place, chunk by chunk&quot;</i> Why? It&#39;s not so big that you will fill an ordinary flash drive!"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532531007, "post_id": 51521796, "comment_id": 90013128, "body": "@Borodin: I work at a bank. Flash drives/HDDs/Laptops are not allowed. Most of the download websites are blocked. Any large file, say more than 10-15 mb gets flagged and it gets by scanners and network team as they are paranoid about security. Its an investment bank.  Hence the &#39;Chunk by chunk&#39; (meaning small files of maybe 4-5 mbs each).  I just finished building the 5.28 version of perl with GCC 4.8.5, and also installed all my desired modules. I will now make split it and try to download them all tomorrow and check. Will update again. I hope that it works.just worried abt lib errors.."}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532770374, "post_id": 51521796, "comment_id": 90106038, "body": "@Borodin the compiled version doesn&#39;t work on RHEL 5.5. It throws glibc related errors as it was compiled with newer glibc. I tried the cpanmini option, and the issue is that it has dependencies (LWP::UserAgent, File::HomeDir, URI) which can be arranged but we need the cpanmini first. Kind of circular problem. Now looking into how to make cpanm forcefully pickup dependencies from the local directory only. There must be a way."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532773408, "post_id": 51521796, "comment_id": 90106883, "body": "Download the modules you need and install them manually. <a href=\"https://perldoc.perl.org/perlmodinstall.html\" rel=\"nofollow noreferrer\"><code>perlmodinstall</code></a> has the information. This won&#39;t install any dependencies."}], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1532538349, "post_id": 51523844, "comment_id": 90017310, "body": "Hi, I am aware of perlbrew and basically its doing the same thing, building from source. The pain point here is to know whether if this strategy could work or not (i will find out, as I have finished building the perl version 5.28). As I mentioned, i don&#39;t have access to internet from servers and no root/sudo access. Basically I need something like a folder (which must contain everything pre-build) just to be used."}], "tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": -1, "last_activity_date": 1532536669, "creation_date": 1532536669, "answer_id": 51523844, "question_id": 51521796, "link": "https://stackoverflow.com/questions/51521796/can-compiled-perl-v5-28-0-from-src-with-gcc-4-8-5-run-on-rhel-5-5/51523844#51523844", "title": "can compiled perl v5.28.0 from src (with gcc 4.8.5) run on RHEL 5.5?", "body": "<p>Try <a href=\"https://perlbrew.pl/\" rel=\"nofollow noreferrer\">perlbrew</a> (is an admin-free perl installation management tool)</p>\n"}, {"comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1532610854, "post_id": 51524601, "comment_id": 90047071, "body": "Thanks for your valuable suggestions: VM and Static Perl. I am looking into them both. Unfortunately the build I created yesterday was destined to fail anyways as later on I found out that one cannot move the final created build as it has hard coded paths and exactly due to that, it was searching packages in that path only. Definitely VM is the right way to test and I am proceeding with that. Will update with progress soon."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1532611998, "post_id": 51524601, "comment_id": 90047909, "body": "<a href=\"https://metacpan.org/pod/distribution/perl/INSTALL#Relocatable-@INC\" rel=\"nofollow noreferrer\">relocatable @INC</a>"}, {"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1532612175, "post_id": 51524601, "comment_id": 90048029, "body": "Thanks @daxim I think this could make a big difference ;) need to study the whole page now. It&#39;s got lots of info.."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1532579382, "last_edit_date": 1532579382, "creation_date": 1532539671, "answer_id": 51524601, "question_id": 51521796, "link": "https://stackoverflow.com/questions/51521796/can-compiled-perl-v5-28-0-from-src-with-gcc-4-8-5-run-on-rhel-5-5/51524601#51524601", "title": "can compiled perl v5.28.0 from src (with gcc 4.8.5) run on RHEL 5.5?", "body": "<p>Edit: <a href=\"http://p3rl.org/staticperl\" rel=\"nofollow noreferrer\">static compilation</a> bypasses the problems you are cautious about. You need to figure out whether the result is suitable for your intended purposes.</p>\n\n<hr>\n\n<p>Otherwise you contend with traditional compilation like you had planned. If the libc is too different, it won't work. You could certainly just go ahead and try, then you'll know for certain.</p>\n\n<p>The real solution is to set up a copy of your production environment (can be in a virtual machine) and compile stuff there.</p>\n"}, {"comments": [{"owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "edited": false, "score": 0, "creation_date": 1532611022, "post_id": 51537835, "comment_id": 90047201, "body": "Sir, me is looking only for free solutions ;) but thank you anyway(s). If need be, maybe I could tell my project team to go for this option. Isn&#39;t CentOS 5.5 kind of same code base apart from the proprietary RHEL stuff?"}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1532605136, "last_edit_date": 1532605136, "creation_date": 1532604809, "answer_id": 51537835, "question_id": 51521796, "link": "https://stackoverflow.com/questions/51521796/can-compiled-perl-v5-28-0-from-src-with-gcc-4-8-5-run-on-rhel-5-5/51537835#51537835", "title": "can compiled perl v5.28.0 from src (with gcc 4.8.5) run on RHEL 5.5?", "body": "<p>You could try PerlApp + ActivePerl from ActiveState.com (maybe a part of PDK, Perl Development Kit). I've used it for many years. It compiles perl source and include modules (compiled modules also) into a .exe-program file on Windows and a binary executable file on Linux. There is a payed version and a free/demo version. The payed version allows for cross-compilation and more versions of Perl if I remember correctly.</p>\n\n<p>You might run into trouble with differing versions of glibc/libc on dev vs prod computer, so try to use PerlApp on a CentOS 5.5 Linux (free) for compilation. CentOS5.5 resembles RHEL5.5 enough for most projects. Good luck.</p>\n"}], "owner": {"reputation": 1114, "user_id": 6920976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90a05ddb368128f5819253e5c7119f09?s=128&d=identicon&r=PG&f=1", "display_name": "User9102d82", "link": "https://stackoverflow.com/users/6920976/user9102d82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1532771473, "creation_date": 1532530015, "last_edit_date": 1532771473, "question_id": 51521796, "link": "https://stackoverflow.com/questions/51521796/can-compiled-perl-v5-28-0-from-src-with-gcc-4-8-5-run-on-rhel-5-5", "title": "can compiled perl v5.28.0 from src (with gcc 4.8.5) run on RHEL 5.5?", "body": "<p>My question is about whether if it would be possible to run a compiled perl 5.28.0 from source (with GCC 4.8.5 on CentOS 7) to be able to be used on RHEL 5.5 (Tikanga) where GCC version is lower and so would be the other libs like libc, glibc, etc.</p>\n\n<p>Our production environment is running very old perl version (5.8.8) and due to  security concerns, it is under heavy lock down, i.e. most of our servers lack make, gcc and related tools and there is no root access available to anyone </p>\n\n<p>I was wondering if it would be possible to compile perl from source i.e. latest 5.28.0 with GCC 4.8.5 AND try to use this compiled version on our production servers (with GCC 4.8.2).</p>\n\n<p>This will save me tonnes of headaches with slow bureaucracy and I can get going with my project with the new tools. </p>\n\n<p>Have not been able to find any discussion or hint about this subject. Can anyone shed some light? </p>\n\n<p>Thank you in advance.</p>\n\n<p><strong>Update after 2 days:</strong></p>\n\n<p>As it seems Perl 5.28 compiled on RHEL7 does not work on RHEL5.5. You will have to compile it on RHEL5.5 and make it relocatable for further usage on any server. </p>\n\n<p>So I Downloaded the RHEL 5.5 and CentOS5.5 ISOs and ran into bootable iso related issues.</p>\n\n<ol>\n<li><p>Couldn't make a suitable bootable disk for both rhel 5.5 and centos5.5.</p></li>\n<li><p>rhel5.5 iso was a single dvd image and upon doing <code>file rhel5.5.iso</code> on command prompt, it showed bootable. tried unebootin, rufous iso creator, dd command and created ISOs and tried all of them one by one, but couldn't get it to show boot menu. tried FAT, NTFS FS while making boot disk. Stuck here now.</p></li>\n<li><p>Centos5.5 iso came in 8 pieces of 600mb files. Had to create a single iso image out of it and found some online procedure to do it and made one ISO file. Got boot menu and looked like it worked. But then it got hung up on doing some sort of source media check test and couldn't proceed further. Found a fix related article that you imprint md5sum on iso and it should work but it didn't.</p></li>\n</ol>\n\n<p>Just now found something on <a href=\"http://grokbase.com/t/centos/centos/111eqbxh95/how-to-convert-7-cd-iso-images-into-one-dvd-image\" rel=\"nofollow noreferrer\">grokbase</a> and it mentions a new technique, that could take me forward from the point of failure mentioned in point no.3 above.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1532524892, "post_id": 51519907, "comment_id": 90008638, "body": "Use <code>(?&lt;!\\\\)(?:\\\\{2})*\\K&lt;DATE&gt;</code>"}, {"owner": {"reputation": 10920, "user_id": 3390419, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/cXKh9.jpg?s=128&g=1", "display_name": "Paolo", "link": "https://stackoverflow.com/users/3390419/paolo"}, "edited": false, "score": 0, "creation_date": 1532524989, "post_id": 51519907, "comment_id": 90008697, "body": "Or use <a href=\"https://regex101.com/r/uc93Km/1\" rel=\"nofollow noreferrer\"><code>&quot;\\\\&lt;DATE&gt;&quot;|(&quot;&lt;DATE&gt;&quot;)</code></a> alternation to capture what you want"}, {"owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "reply_to_user": {"reputation": 11639, "user_id": 3660134, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/21337ad8507c0ee0a93a783f04da3ace?s=128&d=identicon&r=PG", "display_name": "Zenoo", "link": "https://stackoverflow.com/users/3660134/zenoo"}, "edited": false, "score": 0, "creation_date": 1532525054, "post_id": 51519907, "comment_id": 90008739, "body": "Darn, you are fast! 1.) Thank you to @Zenoo for editing my mess!"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1532525154, "post_id": 51519907, "comment_id": 90008810, "body": "Do I get it right that <code>&lt;DATE&gt;</code> in <code>\\\\&lt;DATE&gt;</code> should get matched?"}, {"owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1532525200, "post_id": 51519907, "comment_id": 90008854, "body": "2.) if @WiktorStribi\u017cew would make his comment an answer I could set this to solved. And I of course want to than Wiktor for his stupendously fast and working answer.  No I have to study it to see how it works :)"}, {"owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1532525323, "post_id": 51519907, "comment_id": 90008956, "body": "@WiktorStribi\u017cew no, if it&#39;s &quot;\\&lt;DATE&gt;&quot; I want no match, exactly as your regex works inn my very first tests... :)"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1532525403, "post_id": 51519907, "comment_id": 90009015, "body": "My first comment implies there are escape sequences. If there are none, you need just <code>(?&lt;!\\\\)&lt;DATE&gt;</code>"}, {"owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "edited": false, "score": 0, "creation_date": 1532525593, "post_id": 51519907, "comment_id": 90009167, "body": "Thank you, then it was just the \\K! Now I understand what it does, really useful! Thank you very much!"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1532526426, "post_id": 51519907, "comment_id": 90009786, "body": "Q: is backslash escaped with a backslash? Can the string contain escaped backslashes? For example, <code>my $string = &quot;\\\\\\\\&lt;Data&gt;&quot;;</code>"}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1532526764, "post_id": 51519907, "comment_id": 90010054, "body": "@shawnhcorey Yes, and to match an aribitary number (0+) of escaped backslashes before <code>&lt;DATA&gt;</code> you&#39;d do (as in one of the previous examples): <code>(?&lt;!\\\\)(?:\\\\\\\\)*&lt;DATA&gt;</code>. The negative lookbehind is necessary because if the number of consecutive backslashes is odd, the last one is not escaped. Furthermore, if doing substitution, make sure to also put back the escaped backslashes, like: <code>s&#164;(?&lt;!\\\\)((?:\\\\\\\\)*)&lt;DATA&gt;&#164;$1&lt;REPLACEMENT&gt;&#164;g</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532526847, "post_id": 51519907, "comment_id": 90010129, "body": "Are the <code>&quot;&quot;</code> part of the string or an edit artefact?"}, {"owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532527388, "post_id": 51519907, "comment_id": 90010529, "body": "@simbabque they are not part of the string"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1532528455, "post_id": 51519907, "comment_id": 90011298, "body": "I can&#39;t understand what worked for you in the end. Please clarify if you need to handle escape sequences or not."}, {"owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "edited": false, "score": 0, "creation_date": 1532533207, "post_id": 51519907, "comment_id": 90014665, "body": "This worked: (?&lt;!\\&#41;\\K&lt;DATE&gt;  I add tried this before, but without the \\K it didn&#39;t work. So I thank for the solution! \ud83d\ude0a"}, {"owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "edited": false, "score": 0, "creation_date": 1532538002, "post_id": 51519907, "comment_id": 90017115, "body": "Why not <code>s#(?&lt;!\\\\)&lt;DATE&gt;#XXX#g</code> ?"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1532539631, "post_id": 51519907, "comment_id": 90017958, "body": "@Silvar Agreed. Was just trying to clarify what the OP wanted."}, {"owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "reply_to_user": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "edited": false, "score": 0, "creation_date": 1532549263, "post_id": 51519907, "comment_id": 90022321, "body": "@art_varn without the \\K the expression doesn&#39;t work at the beginning of the line..."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536481977, "post_id": 51519907, "comment_id": 91433753, "body": "@TedBear <code>(?&lt;!\\\\)\\K&lt;DATE&gt;</code> is the same as <code>(?&lt;!\\\\)&lt;DATE&gt;</code>. The <code>\\K</code> has no effect."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1536481671, "creation_date": 1536481671, "answer_id": 52242689, "question_id": 51519907, "link": "https://stackoverflow.com/questions/51519907/regex-unwanted-char/52242689#52242689", "title": "Regex: unwanted char", "body": "<p>Converting my top comment to an answer since it was helpful.</p>\n\n<pre><code>(?&lt;!\\\\)(?:\\\\{2})*\\K&lt;DATE&gt;\n</code></pre>\n\n<p>The pattern matches:</p>\n\n<ul>\n<li><code>(?&lt;!\\\\)</code> - a location in the string that is not immediately preceded with a backslash (a backslash is matched with a double backslash in the regex pattern)</li>\n<li><code>(?:\\\\{2})*</code> - a non-capturing group that matches 0 or more sequences of double backslashes</li>\n<li><code>\\K</code> - a match reset operator that zeros out the current match value</li>\n<li><code>&lt;DATE&gt;</code> - a literal substring that is matched and consumed (=added to the match value and the regex index is advanced).</li>\n</ul>\n"}], "owner": {"reputation": 117, "user_id": 3024714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t2E0i.png?s=128&g=1", "display_name": "Ted Bear", "link": "https://stackoverflow.com/users/3024714/ted-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 52242689, "answer_count": 1, "score": 1, "last_activity_date": 1536481671, "creation_date": 1532524716, "last_edit_date": 1532524776, "question_id": 51519907, "link": "https://stackoverflow.com/questions/51519907/regex-unwanted-char", "title": "Regex: unwanted char", "body": "<p>I have a string with x occurences of <code>\"&lt;DATE&gt;\"</code> which has to be replaced, that is simple.\nIf there is a <code>\"\\\"</code> in front (<code>\"\\&lt;DATE&gt;\"</code>) it musn't be replaced, simple, too:</p>\n\n<pre><code>[^\\\\]&lt;DATE&gt;\n</code></pre>\n\n<p>But then the string <code>\"&lt;DATE&gt;\"</code> isn't a match anymore...</p>\n\n<pre><code>[^\\\\]?&lt;DATE&gt;\n</code></pre>\n\n<p>But now of course the string <code>\"\\&lt;DATE&gt;\"</code> is a match because the backslash is now ignored...</p>\n\n<p>I tried the lookbehind <code>(?&lt;!...)</code>, but that is not able to work with dynamic lengths...\nIs there a way to do it?</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 7, "creation_date": 1532517718, "post_id": 51517586, "comment_id": 90003677, "body": "<code>perl -pe &quot;s&#47;PATTERN1&#47;$PATTERN1&#47;g; s&#47;PATTERN2&#47;$PATTERN2&#47;g&quot;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1532520834, "post_id": 51517586, "comment_id": 90005808, "body": "This needs to be <code>perl -pe &quot;s&#47;PATTERN1&#47;\\$PATTERN1&#47;g; s&#47;PATTERN2&#47;\\$PATTERN2&#47;g&quot;</code> otherwise it will simply delete <code>PATTERN1</code> and  <code>PATTERN2</code>."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532526126, "post_id": 51517586, "comment_id": 90009570, "body": "@Borodin You are right, of course. Please feel free to make proper answer of it."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 10057091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0795af897ea9a6f99cd6f20ad033b4?s=128&d=identicon&r=PG&f=1", "display_name": "robasia", "link": "https://stackoverflow.com/users/10057091/robasia"}, "is_accepted": false, "score": -1, "last_activity_date": 1532526232, "last_edit_date": 1532526232, "creation_date": 1532525849, "answer_id": 51520347, "question_id": 51517586, "link": "https://stackoverflow.com/questions/51517586/can-we-do-multiple-substitutions-with-a-single-perl-command/51520347#51520347", "title": "Can we do multiple substitutions with a single Perl command?", "body": "<p>The answer in the comments is perfect, but here's a goofy way to do it just for fun:</p>\n\n<pre><code>perl -pe '$_ = s/PATTERN1/$PATTERN1/gr =~ s/PATTERN2/$PATTERN2/gr' text.txt\n</code></pre>\n\n<p>Anyway, so you don't need to use pipes at all. Just add the file name as the last argument.</p>\n\n<p>Just for reference, here is the best answer, which was given above in the comments:</p>\n\n<pre><code>perl -pe 's/PATTERN1/$PATTERN1/g; s/PATTERN2/$PATTERN2/g' text.txt\n</code></pre>\n"}], "owner": {"reputation": 2241, "user_id": 9055634, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ad71851f7cd273e1ef70597c4231c92b?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/9055634/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1532526232, "creation_date": 1532517499, "last_edit_date": 1532520613, "question_id": 51517586, "link": "https://stackoverflow.com/questions/51517586/can-we-do-multiple-substitutions-with-a-single-perl-command", "title": "Can we do multiple substitutions with a single Perl command?", "body": "<p>Is there a way to make the following into one <code>perl -pe</code> instead of piping it in sequence?</p>\n\n<pre><code>cat text.txt | perl -pe \"s/PATTERN1/$PATTERN1/g\" | perl -pe \"s/PATTERN2/$PATTERN2/g\"\n</code></pre>\n"}, {"tags": ["mysql", "perl", "remote-server"], "comments": [{"owner": {"reputation": 21589, "user_id": 4875631, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Goodbye StackExchange", "link": "https://stackoverflow.com/users/4875631/goodbye-stackexchange"}, "edited": false, "score": 0, "creation_date": 1532516031, "post_id": 51517140, "comment_id": 90002616, "body": "You need to check your permissions. MySQL has strict permissions when it comes to remote hosts, so be sure you have a user that matches the hostname after the <code>@</code>. <code>root@localhost</code> != <code>root@%</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 47, "user_id": 5916788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ebb3065738ca628fdbce643b932986be?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/5916788/shruti"}, "edited": false, "score": 0, "creation_date": 1532519923, "post_id": 51517350, "comment_id": 90005119, "body": "And access from the ip?"}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "reply_to_user": {"reputation": 47, "user_id": 5916788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ebb3065738ca628fdbce643b932986be?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/5916788/shruti"}, "edited": false, "score": 0, "creation_date": 1532520065, "post_id": 51517350, "comment_id": 90005225, "body": "SELECT * from information_schema.user_privileges where grantee like &quot;&#39;ShrutiTest&#39;%&quot; group by grantee  run this to check"}, {"owner": {"reputation": 47, "user_id": 5916788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ebb3065738ca628fdbce643b932986be?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/5916788/shruti"}, "edited": false, "score": 0, "creation_date": 1532522976, "post_id": 51517350, "comment_id": 90007317, "body": "It is returning me 1 row with yes response"}], "tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": 1, "last_activity_date": 1532516715, "creation_date": 1532516715, "answer_id": 51517350, "question_id": 51517140, "link": "https://stackoverflow.com/questions/51517140/remote-db-connection-from-another-remote-ip-perl/51517350#51517350", "title": "Remote db connection from another remote ip perl", "body": "<p>Looks like you need to allow the user ShrutiTest to connect from the ip where you are running the script, viz. 131.116.220.220</p>\n\n<p>It can be done at the MySQL server by any admin:</p>\n\n<pre><code>GRANT ALL PRIVILEGES ON *.* TO 'ShrutiTest'@'131.116.220.220'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1532677388, "post_id": 51537841, "comment_id": 90073199, "body": "So you fixed it by connecting to a completely different database? Is that really a fix? For this answer to be useful to anyone else, you really need to explain how you found a solution and what that solution was. Just dumping some code here isn&#39;t really helpful."}], "tags": [], "owner": {"reputation": 47, "user_id": 5916788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ebb3065738ca628fdbce643b932986be?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/5916788/shruti"}, "is_accepted": false, "score": -1, "last_activity_date": 1532677152, "last_edit_date": 1532677152, "creation_date": 1532604828, "answer_id": 51537841, "question_id": 51517140, "link": "https://stackoverflow.com/questions/51517140/remote-db-connection-from-another-remote-ip-perl/51537841#51537841", "title": "Remote db connection from another remote ip perl", "body": "<p>Solved the same. Code used is: </p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse DBI;\n\n## mysql user database name\n$db =\"Buffering\";\n## mysql database user name\n$user = \"ShrutiBuffer\";\n\n## mysql database password\n$pass = \"Shruti1234\";\n\n## user hostname : This should be \"localhost\" but it can be diffrent too\n$host=\"131.116.220.228\";\n$port=\"3306\";\n## SQL query\n$query = \"select * from buffering.insert_data\";\n\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:database=$db;host=$host;port=$port\",$user, $pass);\n\n$sqlQuery  = $dbh-&gt;prepare($query)\nor die \"Can't prepare $query: $dbh-&gt;errstr\\n\";\n\n$sqlQuery-&gt;execute\nor die \"can't execute the query: $sqlQuery-&gt;errstr\";\n\nprint \"values are:: \";\nwhile (@row= $sqlQuery-&gt;fetchrow_array()) {\n print join(\", \", @row), \"\\n\";\n\n}\n\n$sqlQuery-&gt;finish;\nexit(0);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5797819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bee76a6b17b2825d0fef668966ea892?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Williams", "link": "https://stackoverflow.com/users/5797819/josh-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1592169230, "last_edit_date": 1592169230, "creation_date": 1592166986, "answer_id": 62377917, "question_id": 51517140, "link": "https://stackoverflow.com/questions/51517140/remote-db-connection-from-another-remote-ip-perl/62377917#62377917", "title": "Remote db connection from another remote ip perl", "body": "<p>This syntax <code>\"DBI:mysql:database=$db;host=$host;port=$port\"</code> worked for me in the perl script to connect to a remote MySQL DB from an Unix server.</p>\n"}], "owner": {"reputation": 47, "user_id": 5916788, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ebb3065738ca628fdbce643b932986be?s=128&d=identicon&r=PG&f=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/5916788/shruti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1592169230, "creation_date": 1532515932, "last_edit_date": 1532516377, "question_id": 51517140, "link": "https://stackoverflow.com/questions/51517140/remote-db-connection-from-another-remote-ip-perl", "title": "Remote db connection from another remote ip perl", "body": "<p>I am trying to connect one remote server where I have installed MySQL  but it is taking localhost \nRemote server where mySQL is installed: 131.116.220.228\nRemote server from where db needs to be connected: 131.116.220.220 ('ov046hanpgate01.ddc.teliasonera.net')</p>\n\n<pre><code>use DBI;\nprint \"Testing 1\\n\";\n\n$DSN=\"DATABASE=MySQL80;port=3306;host=131.116.220.228\";\nprint \"Testing 2\\n\";\nmy $dbh = DBI-&gt;connect(\"dbi:mysql:$DSN\", \"ShrutiTest\", \"Shruti@92\", {PrintError =&gt; 0})\nor die \"Couldn't connect to database: \" . DBI-&gt;errstr;\nprint \"Testing 3\\n\";\n\n$dbh-&gt;disconnect;\n</code></pre>\n\n<blockquote>\n  <p>error: Couldn't connect to database: Host 'ov046hanpgate01.ddc.teliasonera.net' is not allowed to connect to this MySQL server at D:\\Integrations\\OWF\\Scripts\\test27july.pl line 6.</p>\n</blockquote>\n"}, {"tags": ["perl", "testing", "mojolicious"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1532512139, "post_id": 51515032, "comment_id": 90000050, "body": "Can you provide a runnable test case, please?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1532513664, "post_id": 51515032, "comment_id": 90001100, "body": "@daxim: test script is applied."}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1532517080, "post_id": 51515032, "comment_id": 90003250, "body": "For simple sessions, session data is stored in the client side in a cookie, which wouldn&#39;t be available without a request from the client side with the cookie."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 1, "creation_date": 1532526688, "post_id": 51515032, "comment_id": 90010003, "body": "@Pradeep it doesn&#39;t really matter how the session data is stored for what OP is trying to do. He wants to have access to the session for the current user&#39;s request at this point of time. The problem with this I believe is that <code>$t-&gt;app</code> gives you the application object, but not with the context of the most recently completed request. However your comment is very useful, because if it&#39;s in the client&#39;s cookies, you <i>can</i> read it. <code>$t-&gt;ua</code> is the client after all, and in the test you directly control it. It is a bit hacky though."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532526769, "post_id": 51515032, "comment_id": 90010064, "body": "Indirectly related, I&#39;ve solved this problem for Catalyst with my module <a href=\"https://metacpan.org/pod/Test::WWW::Mechanize::Catalyst::WithContext\" rel=\"nofollow noreferrer\">Test::WWW::Mechanize::Catalyst::WithContext</a>. A similar approach might be possible for you, or (as it sometimes is with Mojo in my experience) the solution might be much simpler but not obvious."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532528852, "post_id": 51515032, "comment_id": 90011595, "body": "@simbabque: yes, I can decode JWT passed to client, but this solution did not work if session data is stored on server side. Mojo DOC states that <code>$t is stateful</code> and I <code>can introspect any aspect of the application</code>. As you can see from test: not any aspect..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532531348, "post_id": 51515032, "comment_id": 90013380, "body": "You could reach into the data store that the app uses. Since you&#39;re running it locally, you have access to it. You can <i>probably</i> use <code>$t-&gt;app-&gt;something</code> to get the session engine to load you a specific session based on the session_id (which you  probably know). I&#39;d have to look into it more."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532533024, "post_id": 51515032, "comment_id": 90014541, "body": "@simbabque: Thanks to sri and jberger, they give me an idea. The <code>$t-&gt;app</code> should not just return bare application. It should initialize the application with context known by <code>$t</code>"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532596850, "post_id": 51515032, "comment_id": 90038259, "body": "@simbabque: you may check the solution"}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1532596994, "post_id": 51534455, "comment_id": 90038343, "body": "I found different solution. We can <code>build_controller</code> for a given context. See answer above."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 2, "last_activity_date": 1532594113, "creation_date": 1532594113, "answer_id": 51534455, "question_id": 51515032, "link": "https://stackoverflow.com/questions/51515032/how-to-access-session-data-from-test/51534455#51534455", "title": "How to access session data from test?", "body": "<p>The <code>Test::Mojo</code> class does not give you direct access to the session contents. The test class represents a client of your Mojolicious application, and the client does not have direct access to the session cookie either (well, it's just base64-encoded JSON so it's not exactly secret, but still \u2026).</p>\n\n<p>The \u201cproper\u201d way to test the session is to check that the app <em>behaves</em> correctly regarding the session, not just to check that the session was set to some value. That's effectively what your <code>/get_session</code> endpoint does. Of course you shouldn't just add such an endpoint for testing, but consider how the session fits into your requirements. E.g. as a BDD-style scenario:</p>\n\n<pre><code>Feature: the secret page\n  there is a secret page that should be only visible to logged-in users.\n\n  Background:\n    Given a user \"test:test123\"\n    Given a new client\n\n  Scenario: users cannot see the page when they are not logged in\n     When I visit the /secret page\n     Then I get a 404 response\n\n  Scenario: users can see the page after logging in\n    Given I log in as \"test:test123\"\n     When I visit the /secret page\n     Then I see \"this is the secret\"\n</code></pre>\n\n<p>The <code>$t-&gt;app-&gt;session</code> does not contain the session because the session data is loaded into the controller's <code>stash</code>. This only exists for the duration of the request. In particular <code>app-&gt;session</code> is merely a helper that delegates to the current controller, not a primary method of the application.</p>\n\n<p>If you really need to peek into the session cookie, this might be the least insane way to do it, short of inflating a controller object:</p>\n\n<pre><code>my ($session) = grep { $_-&gt;name eq $t-&gt;app-&gt;sessions-&gt;cookie_name } $t-&gt;ua-&gt;cookie_jar-&gt;all-&gt;@*;\n$session = $session-&gt;value =~ s/--[^-]+$//r;  # strip signature\n$session =~ tr/-/=/;\n$session = $t-&gt;app-&gt;sessions-&gt;deserialize-&gt;(Mojo::Util::b64_decode $session);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532600399, "post_id": 51535272, "comment_id": 90040494, "body": "I&#39;m no expert on Mojo, but both option seem viable. How is the second solution more robust? I&#39;d probably get rid of the role and subclass Test::Mojo locally to work with that. Less boilerplate that way."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532609688, "post_id": 51535272, "comment_id": 90046253, "body": "@simbabque: I do not know. jberger said that first solution is ugly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532610802, "post_id": 51535272, "comment_id": 90047034, "body": "I would take Joel&#39;s word for it. So I guess your first solution is slow, because it needs to create a controller object every time. Could also be that other things happen in the background, but I am not at all familiar with the Mojo internals. The second solution is not great if you have more than one Test::Mojo instance across your test run. If you start running multiple tests in a single process you&#39;ll get in trouble, especially if they go in parallel. I would subclass and make that <code>$req_context</code> an attribute."}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1532611792, "last_edit_date": 1532611792, "creation_date": 1532596687, "answer_id": 51535272, "question_id": 51515032, "link": "https://stackoverflow.com/questions/51515032/how-to-access-session-data-from-test/51535272#51535272", "title": "How to access session data from test?", "body": "<p>To test helpers in context of last request I write next role:</p>\n\n<pre><code>package Test::Mojo::Role::Helper;\n\nuse Mojo::Base -role;\n\nsub helper {\n    my( $t ) = @_;\n\n    $t-&gt;tx-&gt;req-&gt;cookies( @{ $t-&gt;tx-&gt;res-&gt;cookies } );\n    $t-&gt;app-&gt;build_controller( $t-&gt;tx );\n}\n\n1;\n</code></pre>\n\n<p>Then use it as next:</p>\n\n<pre><code>use Test::Mojo;\nmy $t = Test::Mojo-&gt;with_roles( '+Helper' )-&gt;new( 'MyApp' );\n\n$t-&gt;post_ok( '/login', json =&gt; { contact =&gt; $user_c, password =&gt; $user_p } )\n  -&gt;status_is( 200 );\n\n\nis $t-&gt;helper-&gt;uid,       1,  \"Authorized user has identificator\";\nis $t-&gt;helper-&gt;role, 'user',  \"Authorized user has 'user' privilege\";\n</code></pre>\n\n<p><strong>UPD</strong> More robust solution</p>\n\n<pre><code>package Test::Mojo::Role::Helper;\n\nuse Mojo::Base -role;\n\nmy $req_context; # Here is controller object\nsub helper { $req_context }\n\n\nsub hook_context {\n    my( $t ) =  @_;\n\n    $t-&gt;app-&gt;hook( after_dispatch =&gt;  sub{ $req_context =  shift });\n\n    $t;\n}\n\n1;\n</code></pre>\n\n<p>The testing is same with next small difference. When application is constructed we should hook to <code>after_dispatch</code> event:</p>\n\n<pre><code>my $t = Test::Mojo\n  -&gt;with_roles( '+Helper' )\n  -&gt;new( 'App' )\n  -&gt;hook_context;\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 2, "accepted_answer_id": 51535272, "answer_count": 2, "score": 2, "last_activity_date": 1532611792, "creation_date": 1532509613, "last_edit_date": 1532529056, "question_id": 51515032, "link": "https://stackoverflow.com/questions/51515032/how-to-access-session-data-from-test", "title": "How to access session data from test?", "body": "<p>The <a href=\"http://mojolicious.org/\" rel=\"nofollow noreferrer\">Mojolicious</a> framework <a href=\"https://mojolicious.org/perldoc/Mojolicious/Guides/Testing#Testing-application-helpers\" rel=\"nofollow noreferrer\">states</a> next:</p>\n\n<blockquote>\n  <p>Any aspect of the application (helpers, plugins, routes, etc.) can be introspected from Test::Mojo through the application object.</p>\n</blockquote>\n\n<p>But when helper, for example, <code>$c-&gt;current_user</code> deals with session it fails.</p>\n\n<p>The session data is not available and I can not access it from test:</p>\n\n<pre><code>$t-&gt;app-&gt;session  # {}\n</code></pre>\n\n<p>Thus <code>$t-&gt;app-&gt;current_user</code> fails too.</p>\n\n<p>How to access session data from test?</p>\n\n<p><strong>UPD</strong> The test</p>\n\n<pre><code>use Mojo::Base -strict;\n\nuse Mojolicious::Lite;\n\nuse Test::More;\nuse Test::Mojo;\n\nget '/set_session' =&gt; sub {\n    my $c =  shift;\n    $c-&gt;session-&gt;{ user_id } = 1;\n    $c-&gt;render( text =&gt; $c-&gt;session-&gt;{ user_id } );\n};\n\nget '/get_session' =&gt; sub {\n    my $c =  shift;\n    $c-&gt;render( text =&gt; $c-&gt;session-&gt;{ user_id } );\n};\n\nmy $t = Test::Mojo-&gt;new;\n$t-&gt;get_ok( '/set_session' )-&gt;status_is(200);\n\nis $t-&gt;app-&gt;session-&gt;{ user_id }, 1, 'Session available from test script';\n\n$t-&gt;get_ok( '/get_session' )-&gt;status_is(200)\n  -&gt;content_is( 1 );\n\ndone_testing();\n</code></pre>\n\n<p><strong>UPD</strong> test result</p>\n\n<pre><code>ok 1 - GET /set_session\nok 2 - 200 OK\nnot ok 3 - Session available from test script\n#   Failed test 'Session available from test script'\n#   at t/session.t line 22.\n#          got: undef\n#     expected: '1'\nok 4 - GET /get_session\nok 5 - 200 OK\nok 6 - exact match for content\n1..6\n# Looks like you failed 1 test of 6.\n</code></pre>\n\n<p><strong>UPD</strong></p>\n\n<p>It seems that <code>Mojo::Test</code> object should save session object in addition to <a href=\"https://mojolicious.org/perldoc/Mojolicious/Guides/Testing#Test::Mojo-at-a-glance\" rel=\"nofollow noreferrer\"><code>the request and response objects from the previous transaction</code></a></p>\n"}, {"tags": ["perl", "io"], "comments": [{"owner": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 0, "creation_date": 1532504588, "post_id": 51510433, "comment_id": 89995188, "body": "I would look at the documentation <a href=\"https://perldoc.perl.org/IO/Handle.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/IO/Handle.html</a> . For the read method, you can specify an offset &quot; $io-&gt;read ( BUF, LEN, [OFFSET] )&quot; . You should be able to wrap a loop around this"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 602, "user_id": 8364542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcd327ab0741e66abc506ffdb126975?s=128&d=identicon&r=PG&f=1", "display_name": "hoffmeister", "link": "https://stackoverflow.com/users/8364542/hoffmeister"}, "edited": false, "score": 1, "creation_date": 1532506993, "post_id": 51510433, "comment_id": 89996598, "body": "@hoffmeister you don&#39;t need the offset at all. <code>read</code> will take the next 8000 bytes from where it left off."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532508881, "post_id": 51510433, "comment_id": 89997806, "body": "@simbabque  The <code>OFFSET</code> is where the new read is written in the target string (<code>BUF</code>). Otherwise it wlll rewrite what&#39;s there from the previous read."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532509728, "post_id": 51510433, "comment_id": 89998388, "body": "(1) Why <code>IO::Handle</code>?  Just <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a> the file (2) Use <a href=\"http://perldoc.perl.org/functions/read.html\" rel=\"nofollow noreferrer\">read</a> in a loop (3) Set up <a href=\"https://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow noreferrer\">alarm</a> to interrupt reading, so to write, every X cycles. See the link and <a href=\"https://perldoc.perl.org/perlipc.html#Signals\" rel=\"nofollow noreferrer\">Signals in perlipc</a> for how to recover after the signal. For better granularity than a second use <code>ualarm</code> from <a href=\"https://perldoc.perl.org/Time/HiRes.html\" rel=\"nofollow noreferrer\">Time::HiRes</a> (4) Set up signal handlers and <code>END</code> block to ensure it&#39;s written on termination ..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1532509875, "post_id": 51510433, "comment_id": 89998476, "body": "... and post questions for problems once you get it going.  (Right now  you are asking for a fairly complex program to be simply delivered, with &quot;<i>I ... have not written in perl</i>&quot;)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532510797, "post_id": 51510433, "comment_id": 89999136, "body": "Forgot to write for (3) above: The whole thing needs to be in a loop (<code>while (1)</code> style) so to return to reading after the <code>alarm</code> takes you out of there."}, {"owner": {"reputation": 123, "user_id": 6172961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3446006cb2b37e5d42d9325b68b66c1?s=128&d=identicon&r=PG&f=1", "display_name": "Proper", "link": "https://stackoverflow.com/users/6172961/proper"}, "edited": false, "score": 0, "creation_date": 1532523150, "post_id": 51510433, "comment_id": 90007442, "body": "So far i found that data is pulled only when the connection is closed. In other words after $audio_fh-&gt;close(); is executed.  For this reason, while loop does nothing."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532551339, "post_id": 51510433, "comment_id": 90023264, "body": "Re &quot;<i>data is pulled only when the connection is closed</i>&quot; -- that would not make any sense and would contradict what you are trying to do.  If you add a print of <code>$buffer</code> right after <code>read</code> it should print the last 8kB of data, just read.  And you have to keep reading those chunks so you must have a loop of some sort.  But note that <code>read</code> is buffered; if you really needed unbuffered reading then use <code>sysread</code> (but you probably don&#39;t)."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532551661, "post_id": 51524631, "comment_id": 90023400, "body": "At this point I am not sure what you mean by &quot;<i>streaming</i>&quot;.  Normally a file is read line by line (and then this is buffered, too), or you can request a specific number of bytes/chars to be read with <code>read</code> (which is buffered, too) -- or with <code>sysread</code>, which is unbuffered.  The external <code>cp</code> command just copies the whole file over, I don&#39;t see how to consider that &quot;<i>streaming</i>&quot;."}, {"owner": {"reputation": 123, "user_id": 6172961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3446006cb2b37e5d42d9325b68b66c1?s=128&d=identicon&r=PG&f=1", "display_name": "Proper", "link": "https://stackoverflow.com/users/6172961/proper"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1573086583, "post_id": 51524631, "comment_id": 103770504, "body": "It is considered streaming because original file continuously grows with new data, so it has to be ready continuously"}], "tags": [], "owner": {"reputation": 123, "user_id": 6172961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3446006cb2b37e5d42d9325b68b66c1?s=128&d=identicon&r=PG&f=1", "display_name": "Proper", "link": "https://stackoverflow.com/users/6172961/proper"}, "is_accepted": true, "score": 0, "last_activity_date": 1532539767, "creation_date": 1532539767, "answer_id": 51524631, "question_id": 51510433, "link": "https://stackoverflow.com/questions/51510433/perl-file-descriptor-streaming/51524631#51524631", "title": "Perl file descriptor streaming", "body": "<p>This approach will not allow reading from file continuously, however, I was able to get constant data stream from same file descriptor using bash cp command</p>\n"}], "owner": {"reputation": 123, "user_id": 6172961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3446006cb2b37e5d42d9325b68b66c1?s=128&d=identicon&r=PG&f=1", "display_name": "Proper", "link": "https://stackoverflow.com/users/6172961/proper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "accepted_answer_id": 51524631, "answer_count": 1, "score": 1, "last_activity_date": 1532539767, "creation_date": 1532489783, "question_id": 51510433, "link": "https://stackoverflow.com/questions/51510433/perl-file-descriptor-streaming", "title": "Perl file descriptor streaming", "body": "<p>I am trying to modify this Perl code to do what I need. Right now it reads data from a file descriptor and once 8000 bytes are buffered it completes and moved on to write them into a file.</p>\n\n<p>I am trying to get it to continue to read every 8000 bytes from that stream and only stop when the script is killed or X numbers of cycles go by.\nSo it would keep adding 8000 bytes every time they are buffered or just write data to the file every X number of seconds.</p>\n\n<p>I am not familiar with streams and have not written in perl, cant find any documentation that i could apply to this, although I think the solution is faily straigh forward. I will appreciate the help, will post any new updates </p>\n\n<pre><code> use warnings;\n use strict;\n\n use IO::Handle;\n\n $| = 1; \n my $buffer = undef;\n my $result = undef;\n my $AUDIO_FD = 3;   \n my $audio_fh = new IO::Handle;\n $audio_fh-&gt;fdopen( $AUDIO_FD, \"r\" );         \n\n\n my $bytes_read = $audio_fh-&gt;read( $buffer, 8000 );\n $audio_fh-&gt;close();\n\n\n my $fh;\n open( $fh, \"&gt;/tmp/rawdata.txt\" );\n print $fh $buffer;\n close( $fh );\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 0, "last_activity_date": 1532608153, "creation_date": 1532608153, "answer_id": 51538891, "question_id": 51510088, "link": "https://stackoverflow.com/questions/51510088/use-mojolicious-action-as-title-in-template/51538891#51538891", "title": "Use Mojolicious action as title in template", "body": "<p>You could get the subroutine name via caller:</p>\n\n<p><code>my $sub_name = (caller(0))[3];</code>.</p>\n\n<p>Judging from your output, you may want to also upcase it and replace _ with whitespace</p>\n\n<p><code>$sub_name =~ s /_/ /g;</code></p>\n\n<p>I would upcase like this:\n<code>my $title = join(' ', map{ ucfirst lc }split(' ', $sub_name) );</code></p>\n"}, {"tags": [], "owner": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "is_accepted": true, "score": 0, "last_activity_date": 1532662293, "creation_date": 1532662293, "answer_id": 51550373, "question_id": 51510088, "link": "https://stackoverflow.com/questions/51510088/use-mojolicious-action-as-title-in-template/51550373#51550373", "title": "Use Mojolicious action as title in template", "body": "<p>It looks like <code>$c-&gt;action</code> is available in Mojolicious templates as <code>$action</code>. So you can just do this:</p>\n\n<pre><code>&lt;title&gt;&lt;%= title || action_to_title($action) %&gt;\n</code></pre>\n\n<p>This way other templates can override the title like so:</p>\n\n<pre><code>% title 'My Override Title'\n</code></pre>\n\n<p>And you can add the <code>action_to_title</code> helper to prepare the action for a title if <code>title</code> is not set.</p>\n"}], "owner": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 51550373, "answer_count": 2, "score": 1, "last_activity_date": 1532662293, "creation_date": 1532486557, "question_id": 51510088, "link": "https://stackoverflow.com/questions/51510088/use-mojolicious-action-as-title-in-template", "title": "Use Mojolicious action as title in template", "body": "<p>I'm trying to make the default \"title\" variable in stash be set to the English version of the action name. For example:</p>\n\n<pre><code>sub customer_orders {\n    ...\n}\n</code></pre>\n\n<p>Would have:</p>\n\n<pre><code>title =&gt; 'Customer Orders',\n</code></pre>\n\n<p>Available in the stash for the templates to use. Does anyone know how to do this? Thanks!</p>\n"}, {"tags": ["regex", "perl", "greedy", "regex-greedy", "quantifiers"], "answers": [{"tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": true, "score": 10, "last_activity_date": 1532467566, "creation_date": 1532467566, "answer_id": 51507760, "question_id": 51507673, "link": "https://stackoverflow.com/questions/51507673/two-greedy-quantifiers-in-the-same-regex/51507760#51507760", "title": "Two greedy quantifiers in the same regex", "body": "<p>Regex returns the longest leftmost match. The first wildcard will initially match through to the end of line, then successively backtrack a character at a time until the rest of the regex yields a match, i.e. so that the last <code>THING</code> in the string is matched. </p>\n"}, {"comments": [{"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1532475436, "post_id": 51508538, "comment_id": 89986893, "body": "Out of curiosity, any idea how this would compare in terms of run time to the method I used in my question?"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1532480067, "post_id": 51508538, "comment_id": 89987867, "body": "@noah no, and sorry if I failed to answer your questions (as Borodin has). Your regular expression matches a string beginning with THING and I thought you wanted to not make that match. I think the only way to measure the performance would be to construct a test."}, {"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1532537690, "post_id": 51508538, "comment_id": 90016949, "body": "Your take was helpful. Good to always compare methods. My input is guaranteed to not have THING at the beginning, so matching that is not an issue. Your method has some error checking which is nice, but fortunately I have a very well defined input so I can use a slightly more readable expression (I think at least) in exchange for a more broad set of strings that it would match."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1532581570, "post_id": 51508538, "comment_id": 90030372, "body": "This <i>looks like</i> what beginners erroneously end up with when they want &quot;nothing can match <code>THING</code> before we mention it explicitly&quot;... Maybe emphasize that this doesn&#39;t do that?"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1532547639, "last_edit_date": 1532547639, "creation_date": 1532472223, "answer_id": 51508538, "question_id": 51507673, "link": "https://stackoverflow.com/questions/51507673/two-greedy-quantifiers-in-the-same-regex/51508538#51508538", "title": "Two greedy quantifiers in the same regex", "body": "<p>Here is my take.</p>\n\n<p><code>/^(?!THING).+THING((?:(?!THING).)+)$/</code></p>\n\n<p>Accepts a string with 1 or more occurrences of THING. THING cannot be at the beginning or end of the string. It gets the text after the last time THING appears.</p>\n\n<p><strong>Edit:</strong> Added check for 'THING' at the beginning of the string.</p>\n\n<p><strong>EDIT:</strong> Wow, rereading your specs (that I really misread). You said <em>If there are 0 occurrences then there is no stuff I care about. The string can't start or end with THING.</em></p>\n\n<p>Then your regex is fine. <code>tripleee</code> explained the situation well.</p>\n"}, {"comments": [{"owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1532537293, "post_id": 51509341, "comment_id": 90016746, "body": "Thanks for the answer. There is no newline characters so I won&#39;t need to worry about those. Also, I think the if statement should prevent the issue of <code>$1</code> being unchanged and then assigned."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "edited": false, "score": 0, "creation_date": 1532539189, "post_id": 51509341, "comment_id": 90017714, "body": "@noah: That depends what <code>$myStuff</code> is set to beforehand, and how you use it."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1532479126, "creation_date": 1532479126, "answer_id": 51509341, "question_id": 51507673, "link": "https://stackoverflow.com/questions/51507673/two-greedy-quantifiers-in-the-same-regex/51509341#51509341", "title": "Two greedy quantifiers in the same regex", "body": "<p>During the matching process, <code>.*THING</code> will initially match everything up to and including the <em>last</em> occurrence of <code>THING</code></p>\n\n<p><em>If there is no way the rest of the pattern can match</em>, it will <em>backtrack</em> by becoming shorter, and match everything up to and including the <em>last but one</em> occurrence of <code>THING</code>, and again attempt the rest of the pattern</p>\n\n<p>However the rest of the pattern is <code>.*</code> which will <em>always</em> match because it will match an empty string</p>\n\n<p>Therefore, <code>.*THING(.*)</code> will match up to and including the <em>last</em> occurrence of <code>THING</code>, and will match and capture the rest of the string</p>\n\n<p><strong><em>Note</em></strong> that <code>.</code> will match anything except newlines. If there could be newlines in your text then you will want to use the <code>/s</code> modifier to get it to match anything at all</p>\n\n<p><strong><em>Note also</em></strong> that if the pattern fails to match (because, say, there is no <code>THING</code> in the string) then <code>$1</code> will remain unchanged. It will still contain whatever it was set to by the most recent successful pattern match. This means that you <em>must</em> check the status of the pattern match before using the value of <code>$1</code></p>\n"}], "owner": {"reputation": 2410, "user_id": 8217112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FB7l5icjoDo/AAAAAAAAAAI/AAAAAAAACPA/jgQiuzBBY3c/photo.jpg?sz=128", "display_name": "noah", "link": "https://stackoverflow.com/users/8217112/noah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 51507760, "answer_count": 3, "score": 4, "last_activity_date": 1532547639, "creation_date": 1532467132, "question_id": 51507673, "link": "https://stackoverflow.com/questions/51507673/two-greedy-quantifiers-in-the-same-regex", "title": "Two greedy quantifiers in the same regex", "body": "<p>If I have an unknown string of the structure:</p>\n\n<p><code>\"stuff I don't care about THING different stuff I don't care about THING ... THING even more stuff I don't care about THING stuff I care about\"</code></p>\n\n<p>I want to capture the \"stuff I care about\" which will always be after the last occurrence of THING. There is the potential for 0 occurrences of THING, or many. If there are 0 occurrences then there is no stuff I care about. The string can't start or end with THING.</p>\n\n<p>Some possible strings:</p>\n\n<p><code>\"stuff I don't care about THING stuff I care about\"</code></p>\n\n<p><code>\"stuff I don't care about\"</code></p>\n\n<p>Some not possible strings:</p>\n\n<p><code>\"THING stuff I care about\"</code></p>\n\n<p><code>\"stuff I don't care about THING stuff I don't care about THING\"</code></p>\n\n<hr>\n\n<p>My current solution to this problem is to use a regex with two greedy quantifiers as follows:</p>\n\n<pre><code>if( /.*THING(.*)/ ) {\n    $myStuff = $1;\n}\n</code></pre>\n\n<p>It seems to be working, but my question is about how the two greedy quantifiers will interact with each other. Is the first (leftmost) greedy quantifier always \"more greedy\" than the second?</p>\n\n<p>Basically am I guaranteed not to get a split like the following:</p>\n\n<p><code>\"stuff I don't care about THING\"</code></p>\n\n<p><code>$1 = \"different stuff I don't care about THING even more stuff I don't care about THING stuff I care about\"</code></p>\n\n<p>Compared to the split I do want:</p>\n\n<p><code>\"stuff I don't care about THING different stuff I don't care about THING even more stuff I don't care about THING\"</code></p>\n\n<p><code>\"stuff I care about\"</code></p>\n"}, {"tags": ["perl", "security", "sha1"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532462920, "post_id": 51505789, "comment_id": 89982533, "body": "Re &quot;<i>so this doesn&#39;t explain why the archive grew over time</i>&quot;, Sure it does. It means the archived had to be recreated in part or in whole. Different compressors will result in different sizes. And modifying the archive is probably less space-efficient than recreating it from scratch. The only mystery is why they didn&#39;t bump the version numbers. Anyway, it&#39;s all open-source, so feel free to compare the files in the distribution against their originals"}], "answers": [{"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 0, "last_activity_date": 1532536592, "creation_date": 1532536592, "answer_id": 51523825, "question_id": 51505789, "link": "https://stackoverflow.com/questions/51505789/is-strawberry-perl-safe/51523825#51523825", "title": "Is Strawberry Perl safe?", "body": "<p>An hash such as a SHA1 digest is good to defend against communication errors, that is to ensure integrity of what you downloaded (basically proving: \"file on your hard disk\" = \"file on the webserver\"), but just by itself does not help to ensure authentication.</p>\n\n<p>For that, files should be signed with some PGP signature, or using X.509 certificates. This is the only way you could verify that the file was indeed <strong>produced</strong> by the true intended authors.</p>\n\n<p>So just by itself your observation neither signal an attack nor helps you defend against one in fact.</p>\n\n<p>Like @ikegami said, you can even configure compressors with a different RAM/time ratio and the same on will produce different results.</p>\n\n<p>See for example in Unix <code>zip</code>:</p>\n\n<pre><code>   -Z cm\n   --compression-method cm\n          Set the default compression method.  Currently the main methods supported by zip are store and deflate.  Compression method can be set to:\n\n          store - Setting the compression method to store forces zip to store entries with no compression.  This is generally faster than compressing entries, but results in no space savings.  This is the same as using -0 (compression level zero).\n\n          deflate - This is the default method for zip.  If zip determines that storing is better than deflation, the entry will be stored instead.\n\n          bzip2 - If bzip2 support is compiled in, this compression method also becomes available.  Only some modern unzips currently support the bzip2 compression method, so test the unzip you will be using before relying on archives using this method (compression method 12).\n</code></pre>\n\n<p>and</p>\n\n<pre><code>   -#\n   (-0, -1, -2, -3, -4, -5, -6, -7, -8, -9)\n          Regulate the speed of compression using the specified digit #, where -0 indicates no compression (store all files), -1 indicates the fastest compression speed (less compression) and -9 indicates the slowest compression speed (optimal compression, ignores the suffix list). The default compression level is -6.\n\n          Though still being worked, the intention is this setting will control compression speed for all compression methods.  Currently only deflation is controlled.\n</code></pre>\n\n<p>The same source code could have been recompressed over time when the website is regenerated. So same content but different archive results.</p>\n\n<p>I have downloaded all three files. In fact they are the same sizes exactly (or the WayBack machine did not store them correctly, it does not do a redirection), and all in fact with a SHA1 hash of <code>00ba29e351e2f74a7dbceaad5d9bc20159dd7003</code>.</p>\n\n<p>Your best bet is probably to ask StrawberryPerl organization directly.</p>\n"}], "owner": {"reputation": 37, "user_id": 5586899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c563d2f0c0b49a5ec4ab2191bbf6ca54?s=128&d=identicon&r=PG&f=1", "display_name": "jgrahn", "link": "https://stackoverflow.com/users/5586899/jgrahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 607, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532536592, "creation_date": 1532458741, "question_id": 51505789, "link": "https://stackoverflow.com/questions/51505789/is-strawberry-perl-safe", "title": "Is Strawberry Perl safe?", "body": "<p>Strawberry Perl lists SHA1 digests on its <a href=\"http://strawberryperl.com/releases.html\" rel=\"nofollow noreferrer\">download page</a>.</p>\n\n<p>However, looking at download page snapshots on archive.org, their SHA1 digests <strong>for the same perl version and build</strong> seem to change over time.</p>\n\n<p>Example: in the <a href=\"https://web.archive.org/web/20130510201021/http://strawberryperl.com/releases.html\" rel=\"nofollow noreferrer\">download page snapshot from 2013-05-10</a>, <strong>strawberry-perl-5.16.3.1-32bit-portable.zip</strong> is shown to be 86.8 MB long with an SHA1 digest of 3b9c4c32bf29e141329c3be417d9c425a7f6c2ff.</p>\n\n<p>In the <a href=\"https://web.archive.org/web/20170214151446/http://strawberryperl.com/releases.html\" rel=\"nofollow noreferrer\">download page snapshot from 2017-02-14</a>, the same <strong>strawberry-perl-5.16.3.1-32bit-portable.zip</strong> is shown to be 87.3 MB long with an SHA1 digest of 7f6da2c3e1b7a808f27969976777f47a7a7c6544.</p>\n\n<p>And on the <a href=\"http://strawberryperl.com/releases.html\" rel=\"nofollow noreferrer\">current download page</a>, the same <strong>strawberry-perl-5.16.3.1-32bit-portable.zip</strong> is shown to be 91.0 MB long with an SHA1 digest of 00ba29e351e2f74a7dbceaad5d9bc20159dd7003</p>\n\n<p>I thought they might have recompiled the package for some reason, but the current <strong>strawberry-perl-5.10.0.6-portable.zip</strong> has only one file dated later than 2009 (it's <strong>portable.perl</strong>), so this doesn't explain why the archive grew over time. Sadly, I don't have older zip files, so I have no way of knowing what changed inside the archive.</p>\n\n<p>What's going on here? Why do <strong>past</strong> builds change over time?? I am kind of concerned that some hackers might be injecting malicious code or something into binary perl packages...</p>\n\n<p>Is there a rational explanation here ? Thanks...</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532458007, "post_id": 51505561, "comment_id": 89980203, "body": "Your second condition is inverted: If <code>$children</code> contains a space, you don&#39;t split."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532458465, "post_id": 51505561, "comment_id": 89980445, "body": "You can&#39;t get <code>&#39;  c1&#39;</code> etc. because your substitution removed the letters."}, {"owner": {"reputation": 96, "user_id": 4028732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bill S.", "link": "https://stackoverflow.com/users/4028732/bill-s"}, "edited": false, "score": 0, "creation_date": 1532459548, "post_id": 51505561, "comment_id": 89980949, "body": "That was a poor example on my part Borodin. I changed them to 1 and 2."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532460393, "post_id": 51505561, "comment_id": 89981324, "body": "I&#39;m sorry to roll back your work. You should write an <i>MCVE</i>, but your question isn&#39;t all that bad and it is also essential to leave your question in a state which doesn&#39;t make nonsense of the answers and comments so far. I&#39;ve restored your original version and added the adjustments to the output examples."}, {"owner": {"reputation": 96, "user_id": 4028732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bill S.", "link": "https://stackoverflow.com/users/4028732/bill-s"}, "edited": false, "score": 0, "creation_date": 1532460669, "post_id": 51505561, "comment_id": 89981442, "body": "Ok thanks for your help with that, sorry about any confusion. Also, you answered my question in a comment below. The issue was that @child_ids was global, and the last use of it was an empty array so every entry became an empty array when I used \\@child_ids. I put the declarations in the loop and my issue is resolved."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532483628, "post_id": 51505561, "comment_id": 89988607, "body": "@Bill: You also had a problem with the way you were splitting that field."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532459998, "post_id": 51505689, "comment_id": 89981138, "body": "No. <code>@child_ids</code> is (unnecessarily) global. Please test your code before posting your answers. You need either <code>[ @child_ids ]</code>, or to declare the array within the <code>while</code> loop. You have also missed the point that the OP&#39;s code doesn&#39;t split <code>$children</code> correctly in the first place."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532460188, "post_id": 51505689, "comment_id": 89981230, "body": "@Borodin thanks, my point was just about the list flattening. For the rest, see my answer: &quot;should produce exactly your second example, barring other errors in logic.&quot;"}], "tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 0, "last_activity_date": 1532460226, "last_edit_date": 1532460226, "creation_date": 1532458421, "answer_id": 51505689, "question_id": 51505561, "link": "https://stackoverflow.com/questions/51505561/perl-nested-arrays-as-a-hash-value/51505689#51505689", "title": "Perl - Nested Arrays as a Hash Value", "body": "<p>Replace</p>\n\n<pre><code>$spr_hash{$fields[0]} = [$fields[1], $fields[2], $fields[3], $fields[4], $fields[5], @child_ids, $fields[7], $fields[8]];\n</code></pre>\n\n<p>by</p>\n\n<pre><code>$spr_hash{$fields[0]} = [$fields[1], $fields[2], $fields[3], $fields[4], $fields[5], [ @child_ids ], $fields[7], $fields[8]];\n</code></pre>\n\n<p>In Perl, lists are flattened out, so when you use <code>@child_ids</code> in your new array reference with <code>[   ]</code>, you loose the fact it is an array, its content is copied in the new gigantic array reference and that is all.</p>\n\n<p>If you enclose in <code>[ ]</code> it creates a new array <strong>reference</strong> and you then push a reference to the array, and not its content, which should produce exactly your second example, barring other errors in logic.</p>\n\n<p>Note than when <code>@child_ids</code> is empty this will add <code>[]</code> (a reference to an empty array) to <code>$spr_hash{$fields[0]}</code>. This may or may not be what you want.</p>\n\n<p>Also not related to your problem, but I would advise not using arrays for this case, each item is indeed a separate elements with some semantic, so something like that may make more sense:</p>\n\n<pre><code>$spr_hash{$fields[0] = {\n    date =&gt; $fields[1],\n    whatever_is_p1 =&gt; $fields[2],\n    owner =&gt; $fields[3],\n\netc...\n}\n</code></pre>\n\n<p>Have a look at these two tutorials for further reference:</p>\n\n<ul>\n<li><a href=\"http://www.perl101.org/arrays.html\" rel=\"nofollow noreferrer\">http://www.perl101.org/arrays.html</a></li>\n<li><a href=\"https://www.perltutorial.org/perl-list/\" rel=\"nofollow noreferrer\">https://www.perltutorial.org/perl-list/</a> </li>\n</ul>\n\n<p>See about array slices so that it makes your construction smaller in writing.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1532459644, "creation_date": 1532459644, "answer_id": 51506016, "question_id": 51505561, "link": "https://stackoverflow.com/questions/51505561/perl-nested-arrays-as-a-hash-value/51506016#51506016", "title": "Perl - Nested Arrays as a Hash Value", "body": "<p><strike>It's unclear whether you want the behaviour that you've written in your Perl. It removes the letters from <code>$children</code> and then tries to split it, yet your required output shows <code>['c1', 'c2']</code> which cannot be achieved this way</strike></p>\n\n<p>If you really want only the digit sequences from the seventh field then it is easier to use a global regex. I would do it like this; it just replaces that field with an array reference in-place. If you want something else then please say so</p>\n\n<p>Not that <code>$data</code> is a bad name for file handle, and <code>%spr_hash</code> is unnecessary as the <code>%</code> indicates a hash already</p>\n\n<p>Also, don't declare all your variables at the top of the file. It makes them global, and global variables are a <em>Bad Thing</em></p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Data::Dumper;\n\n# skipping header\n&lt;$fh&gt;;\n\nmy %spr;\n\nwhile ( &lt;$fh&gt; ) {\n    chomp;\n    my ($key, @fields) = split /;/;\n    $fields[5] = [ $fields[5] =~ /\\d+/g ];\n    $spr{$key} = \\@fields;\n }\n\n print Dumper \\%spr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 1, "last_activity_date": 1532511866, "creation_date": 1532511866, "answer_id": 51515767, "question_id": 51505561, "link": "https://stackoverflow.com/questions/51505561/perl-nested-arrays-as-a-hash-value/51515767#51515767", "title": "Perl - Nested Arrays as a Hash Value", "body": "<p>here is what you should be doing</p>\n\n<pre><code>use Data::Dumper;\n\nmy @fields;\nmy $children;\nmy %spr_hash;\n\n# skipping header\nmy $header = &lt;$data&gt;;\n\nwhile(my $line = &lt;$data&gt;) {\n    chomp $line;\n\n    # my file is ; deliminated\n    @fields = split \";\" , $line;\n\n    # Create a new version of @child_ids for each iteration of the loop\n    my @child_ids = ();\n    # field 6 is a list of 0+ numbers separated by either space or ,\n    $children = $fields[6];\n\n    # if children field is not empty, but can't use if ($children) as this will \n    # not allow a single 0 to be a valid input\n    if (length $children) {\n        # Only want digits and delimiters so strip out everything else. \n        # Always work out what you want to keep as the set of stuff you\n        # want to remove is usually wrong. The original version would have \n        # kept in the string things like $, ! or \u00e9\n        $children =~ s/[^ ,0-9]//g;\n\n        # Split on comma or white space\n        # Split takes a regex so you can do the split in one go\n        # This assumes that you don't have data in the field like '98 ,32, 33'\n        # If you do then change /[ ,]/ to /[ ,]+/\n        @child_ids = split /[ ,]/, $children;\n        print @child_ids;\n        print \"\\n\";\n    }\n\n    # ASSIGN\n    # Note the \\@child_ids this puts a reference to @child_ids in the data \n    # so that @child_ids isn't flattened, which was what was causing your \n    # original bug. Also note that this only works because you are creating a\n    # new version of @child_ids with each iteration of the loop if you moved the\n    # my @child_ids outside the loop then the assignment will be assigning a \n    # reference to the same variable each time through the loop and each record \n    # will end up with the last entry of field 6 from the file\n\n    $spr_hash{$fields[0]} = [$fields[1], $fields[2], $fields[3], $fields[4],\n        $fields[5], \\@child_ids, $fields[7], $fields[8]];\n}\n</code></pre>\n"}], "owner": {"reputation": 96, "user_id": 4028732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bill S.", "link": "https://stackoverflow.com/users/4028732/bill-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 51506016, "answer_count": 3, "score": 0, "last_activity_date": 1532511866, "creation_date": 1532457835, "last_edit_date": 1532460221, "question_id": 51505561, "link": "https://stackoverflow.com/questions/51505561/perl-nested-arrays-as-a-hash-value", "title": "Perl - Nested Arrays as a Hash Value", "body": "<p>I am relatively new to Perl and I'd like to create a Hash that's value is an array with one of it's elements being another array. Something that looks like this:</p>\n\n<pre><code>my_hash{key} = [ele1, ele2, [arr_ele1, arr_ele2]];\n</code></pre>\n\n<p>Here's what I am doing:</p>\n\n<pre><code>use Data::Dumper;\n\nmy @fields;\nmy @child_ids;\nmy $children;\nmy %spr_hash;\n\n# skipping header\nmy $header = &lt;$data&gt;;\n\nwhile(my $line = &lt;$data&gt;) {\n    chomp $line;\n\n    # my file is ; deliminated\n    @fields = split \";\" , $line;\n    @child_ids = ();\n    # field 6 is a list of 0+ numbers separated by either space or ,\n    $children = $fields[6];\n\n    # if children field is not empty\n    if ($children) {\n        # remove any text\n        $children =~ s/[a-zA-Z]//g;\n\n        # if commas are in the field, split on comma\n        # if no comma and no space, assume only 1 entry\n        # else split on whitespace\n\n        if (index($children, \",\") != -1) {\n            @child_ids = split \",\" , $children;\n        } elsif(index($children, \" \") != -1) {\n            push @child_ids, $children;\n        } else {\n            @child_ids = split ' ' , $children;\n        }\n        print @child_ids;\n        print \"\\n\";\n    }\n\n# ASSIGN\n    $spr_hash{$fields[0]} = [$fields[1], $fields[2], $fields[3], $fields[4], $fields[5], @child_ids, $fields[7], $fields[8]];\n\n }\n</code></pre>\n\n<p>My issue is that when my input looks like this:</p>\n\n<pre><code>id;date;p1;owner;description;status;1, 2;sVal;xVal\n</code></pre>\n\n<p>I get the following:</p>\n\n<pre><code>print Dumper($spr_hash{\"id\"})\n\n$VAR1 = [\n      'date',\n      'p1',\n      'owner',\n      'description',\n      'status',\n      '1',\n      ' 2',\n     'sVal',\n      'xVal'\n    ];\n</code></pre>\n\n<p>c1 and c2 became two separate entries, rather than 1 array entry.</p>\n\n<p>How do I produce the output:</p>\n\n<pre><code>$VAR1 = [\n      'date',\n      'p1',\n      'owner',\n      'description',\n      'status',\n      [1, 2],\n     'sVal',\n      'xVal'\n    ];\n</code></pre>\n"}, {"tags": ["javascript", "python", "ajax", "perl", "backend"], "comments": [{"owner": {"reputation": 1, "user_id": 10129230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4E8qKApD7uA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7reYrf92KDNcBrQQ6ZB8eabiHXnYg/mo/photo.jpg?sz=128", "display_name": "Jason", "link": "https://stackoverflow.com/users/10129230/jason"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532461963, "post_id": 51505142, "comment_id": 89982078, "body": "I don&#39;t think this is the problem, and actually if write as you suggested, bash will fault, telling me no such file. And I don&#39;t think this is the pipe problem, since instead of using pipe, I&#39;ve already tried to write the output to temp.txt and let the python script read in from temp.txt, still empty response."}, {"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1532487281, "post_id": 51505142, "comment_id": 89989213, "body": "how about having the python script print the result to a text file, then slurp the results from the text file in using perl? at least you could then see if the python script is running and not dying somewhere."}, {"owner": {"reputation": 1, "user_id": 10129230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4E8qKApD7uA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7reYrf92KDNcBrQQ6ZB8eabiHXnYg/mo/photo.jpg?sz=128", "display_name": "Jason", "link": "https://stackoverflow.com/users/10129230/jason"}, "reply_to_user": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1532537849, "post_id": 51505142, "comment_id": 90017033, "body": "I found the problem. It is because the interpreter I specified cannot be found by the server. system(...) line actually doesn&#39;t run at all. The reason that I didn&#39; t see a ny error is because system() hides the error for me. Actually the return value of system() is -1, which means something wrong. I should have checked the return value. Any way, thank you guys."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10129230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4E8qKApD7uA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7reYrf92KDNcBrQQ6ZB8eabiHXnYg/mo/photo.jpg?sz=128", "display_name": "Jason", "link": "https://stackoverflow.com/users/10129230/jason"}, "is_accepted": true, "score": 0, "last_activity_date": 1532537887, "creation_date": 1532537887, "answer_id": 51524178, "question_id": 51505142, "link": "https://stackoverflow.com/questions/51505142/ajax-gets-empty-responsetext-once-piping-intermediate-data-to-python-at-backend/51524178#51524178", "title": "ajax gets empty responseText once piping intermediate data to python at backend", "body": "<p>I found the problem. It is because the interpreter I specified cannot be found by the server. system(...) line actually doesn't run at all. The reason that I didn' t see any error is because system() hides the error for me. Actually the return value of system() is -1, which means something wrong. I should have checked the return value</p>\n"}], "owner": {"reputation": 1, "user_id": 10129230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4E8qKApD7uA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7reYrf92KDNcBrQQ6ZB8eabiHXnYg/mo/photo.jpg?sz=128", "display_name": "Jason", "link": "https://stackoverflow.com/users/10129230/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 51524178, "answer_count": 1, "score": 0, "last_activity_date": 1532537887, "creation_date": 1532456065, "last_edit_date": 1532466922, "question_id": 51505142, "link": "https://stackoverflow.com/questions/51505142/ajax-gets-empty-responsetext-once-piping-intermediate-data-to-python-at-backend", "title": "ajax gets empty responseText once piping intermediate data to python at backend", "body": "<p>The background is, frontend passed an id back to backend and backend uses the id to extract information from database. The extracted data need further processing at backend and then gets sent back to frontend.</p>\n\n<p>Here is the front end code: </p>\n\n<p>html:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Test!&lt;/title&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;script src=\"loadPage.js\"&gt;\n\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload = \"loadPage()\"&gt;\n    &lt;div id=\"stack\"&gt;&lt;p&gt;test part&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>js:</p>\n\n<pre><code>function __getParameters() {\n    var parm = {};\n    var url = window.location.href;\n    var pairs = url.slice(url.indexOf('?') + 1).split('&amp;');\n\n    for (var i = 0; i &lt; pairs.length; i++) {\n        pair = pairs[i].split('=');\n        parm[pair[0]] = pair[1];\n    }\n\n    return parm;\n}\n\nfunction __loadData(star) {\n    var xmlhttp;\n    if (window.XMLHttpRequest) {\n        xmlhttp = new XMLHttpRequest();\n    } else {\n        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    xmlhttp.onreadystatechange = function() {\n        if (xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200) {\n           // var data = JSON.parse(xmlhttp.responseText);\n            console.log(xmlhttp.responseText);\n            if (xmlhttp.responseText == \"\") {\n                document.getElementById(\"stack\").innerHTML = \"f*ck\";\n            } else {\n                document.getElementById(\"stack\").innerHTML = xmlhttp.responseText;\n            }\n        }\n    }\n    var url = \"getXML.pl\";\n    url = url + \"?STAR=\" + star;\n    xmlhttp.open(\"GET\", url, true);\n    xmlhttp.send();\n}\n\nfunction loadPage() {\n    var parm = __getParameters();\n//    document.getElementById(\"stack\").innerHTML = parm[\"STAR\"];\n    if (parm == undefined) {\n        // wrong url error page\n    } else if (parm['STAR'] == undefined) {\n        // missing star error page\n    } else if (parm['user' == undefined]) {\n        // missing user id error page\n    } else {\n        var star = parm[\"STAR\"];\n        var user = parm[\"user\"];\n        __loadData(star);\n    }\n\n}\n</code></pre>\n\n<p>The backend uses perl to extract data from database, and it will print the output to stdout. The output is a XML in string form. Then I must use an existed python script to process the extracted data.</p>\n\n<p>However, the server seems not support python (But the server can run python if I directly run python scripts on it. The reason for my statement is that I wrote a python cgi and I got a 500 error, while the perl cgi is ok. I'm sure the python script is correct since it can run directly on the server. I have no access to error log and I cannot modify the config file of the server). </p>\n\n<p>So I piped the output of the perl script to python, and run it using 'system()'. The python script will output a processed string to stdout.</p>\n\n<p>Here is the backend scripts:</p>\n\n<p>perl script:</p>\n\n<pre><code>#!/depot/perl-5.14.2/bin/perl\n# extract posted data\nlocal ($buffer, @pairs, $pair, $name, $value, %FORM);\n$ENV{\"REQUEST__METHOD\"} =~ tr/a-z/A-Z/;\nif ($ENV{\"REQUEST_METHOD\"} eq \"POST\") {\n    read(STDIN, $buffer, $ENV{\"CONTENT_LENGTH\"});\n} else {\n    $buffer = $ENV{\"QUERY_STRING\"};\n}\n\n@pairs = split(/&amp;/, $buffer);\nforeach $pair (@pairs) {\n    ($name, $value) = split(/=/, $buffer);\n    $value =~ tr/+/ /;\n    $value =~ s/%(..)/pack(\"C\", hex($1))/eg;\n    $FORM{$name}  = $value;\n}\n$star = $FORM{STAR};\n\nprint \"Content-type:text/html\\n\\n\";\nmy $cmd = \"***/sq_star.pl --xml --star_id \" . $star;\n$cmd = $cmd . \" | ***/python parseXML.py\";\nsystem($cmd);\n</code></pre>\n\n<p>the sq_star.pl (I just remove the path here and replace it with ***) near the end of perl script is just an existed script that will extract data from database. And parseXML.py is an existed script which does a lot to the input string.</p>\n\n<p>The strange thing is, the responseText is always an empty string. I tried to run the perl script directly on the server, it can print expected results. And if I remove <code>$cmd = $cmd . \" | ***/python parseXML.py\";</code>, the responseText will be the data extracted from the database.</p>\n\n<p>What I have tried for now:<br>\n1. I wrote a simple test python with just one line of print. Still empty response<br>\n2. I tried to store the output as <code>$output =`$cmd`;</code> and <code>print $output;</code> in the perl script, still empty.\n3. I tried to store the original data in a txt and let the python read from the txt. Still empty</p>\n\n<p>It seems that that data processed by python just cannot be sent back .....  </p>\n\n<p>-------------------update----------------<br>\nIt seems to be the problem of the server. I guess the server is not set to support python so if I directly send requests to a python script on backend, there will be 500 error. But somehow my way, i.e., calling python in perl, gets around the error, but still the python just doesn't work... Just my guess</p>\n"}, {"tags": ["perl", "logging", "awk"], "answers": [{"comments": [{"owner": {"reputation": 1289, "user_id": 8852408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2Qmh.jpg?s=128&g=1", "display_name": "Joaquin", "link": "https://stackoverflow.com/users/8852408/joaquin"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1532455363, "post_id": 51502997, "comment_id": 89978818, "body": "Yes, you&#39;re right, I&#39;ll edit my answer to specify that only works if the value field only has one string. I&#39;ll apply changes according your feedback too, thanks!"}, {"owner": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532459387, "post_id": 51502997, "comment_id": 89980887, "body": "Thanks it works, but my file has more then 100000 row, so for my case give error"}], "tags": [], "owner": {"reputation": 1289, "user_id": 8852408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2Qmh.jpg?s=128&g=1", "display_name": "Joaquin", "link": "https://stackoverflow.com/users/8852408/joaquin"}, "is_accepted": false, "score": 0, "last_activity_date": 1532455482, "last_edit_date": 1532455482, "creation_date": 1532447847, "answer_id": 51502997, "question_id": 51502331, "link": "https://stackoverflow.com/questions/51502331/perl-awk-parsing-log-file/51502997#51502997", "title": "perl, awk parsing log file", "body": "<p>You could try this <code>awk</code> command:</p>\n\n<pre><code>awk -v RS= 'BEGIN{r[\"Time:\"];r[\"Client:\"];r[\"Subscriber:\"];r[\"device:\"]}\n    {for(i = 1; i &lt;= NF; i+=2) {\n       if($i in r) {\n           if(i != NF-1) {f=\",\"} else {f=\"\"} printf \"%s%s\" ,$(i+1),f\n       }\n     }\n     print \"\"\n    }' file1.txt\n</code></pre>\n\n<p><strong>Options used</strong>:</p>\n\n<ul>\n<li><code>-v RS=</code>: converts each paragraph in a record.</li>\n<li><code>r</code>: is an array with fields needed.</li>\n<li><code>for</code> and <code>if($1 in r)</code>: loops through the fields, and if the field <code>i</code> is in <code>r</code> then print it.</li>\n<li><code>if(i!=NF)</code> and <code>else</code> is just for formatting.</li>\n</ul>\n\n<p><strong>EDIT</strong></p>\n\n<p>It only works if value only has one string.</p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532450107, "post_id": 51503399, "comment_id": 89975860, "body": "Please note that this is more a TIMTOWTDI demonstration than a viable solution. It works, but there are easier ways. Treat it like a nudge to once in a while think outside the box."}, {"owner": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532459375, "post_id": 51503399, "comment_id": 89980884, "body": "Thanks it works, but my file has more then 100000 row, so for my case give error."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532460038, "post_id": 51503399, "comment_id": 89981157, "body": "@albi both my solution as well as the other solution use processing on a record basis. What error do you see? I guess your file does not have a consistent format. The length of the file should only matter in terms of how long the program runs. A few hundred thousand records is not a prow. Obviously my solution is going to be very slow with that amount. It&#39;s not meant to be used, more like a cheeky demonstration."}, {"owner": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532461177, "post_id": 51503399, "comment_id": 89981692, "body": "can we talk in private? so I can send you some log?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532461799, "post_id": 51503399, "comment_id": 89981980, "body": "@albi I&#39;m sorry, that&#39;s not how stackoverflow.com works. You have already gotten several solutions for free without showing any effort of your own. If you would like to get personal help with this you&#39;ll have to hire someone. That&#39;s not the purpose of the site though. I answered your question because I was curious if that problem would be solvable in the way I suggested. I&#39;m still curious, but the whole idea here is to help future visitors so I&#39;m afraid I can&#39;t help you in a private way."}, {"owner": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532462720, "post_id": 51503399, "comment_id": 89982438, "body": "you&#39;re really right, I have some problems with my log file, which are so different. I will try, thanks again"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1532449269, "creation_date": 1532449269, "answer_id": 51503399, "question_id": 51502331, "link": "https://stackoverflow.com/questions/51502331/perl-awk-parsing-log-file/51503399#51503399", "title": "perl, awk parsing log file", "body": "<p>You can treat your data like YAML, because it's simple key/value pairs separated by colons <code>:</code>. </p>\n\n<p>This Perl solution will set the input record separator <a href=\"https://perldoc.pl/variables/$/\" rel=\"nofollow noreferrer\"><code>$/</code></a> to two new lines (we assume Linux line endings here) and treat each record as an actual record. It will then use <a href=\"https://metacpan.org/pod/distribution/YAML/lib/YAML.pod\" rel=\"nofollow noreferrer\">Perl's YAML parser</a> to convert it to a hash reference that you can then selectively join into your CSV file.</p>\n\n<pre><code>use v5.10; # strict, warnings, feature 'say'\nuse YAML 'Load';\n\nlocal $/ = \"\\n\\n\";\nwhile (my $record = &lt;DATA&gt;) {\n    my $fields = Load($record);\n    say join ',', @$fields{qw/Time Client Subscriber device/};\n}\n\n__DATA__\nTime: 2018070515\ntimezone: CEST\nClient: 192.168.205.132\nSubscriber: 345896546\nproxyIP: 100.24.201.102\ndevice: Android\n\nTime: 2018070516\ntimezone: CEST\nClient: 192.168.205.134\nSubscriber: 345777546\nproxyIP: 100.24.202.102\ndevice: Android\n</code></pre>\n\n<p>If your records may not contain all required fields you can use a <a href=\"https://perldoc.pl/functions/map\" rel=\"nofollow noreferrer\"><code>map</code></a> and the <a href=\"https://perldoc.pl/perlop#Logical-Defined-Or\" rel=\"nofollow noreferrer\"><em>defined-or</em> operator</a> <code>//</code> to get an empty string instead.</p>\n\n<pre><code>say join ',', map { $foo-&gt;{$_} // q{} } qw/Time Client Subscriber device/; \n</code></pre>\n\n<p>This solution requires at least Perl 5.10 for <a href=\"https://perldoc.pl/functions/say\" rel=\"nofollow noreferrer\"><code>say</code></a>.</p>\n\n<p>It can be converted to a one-liner easily.</p>\n\n<pre><code>$ perl -MYAML -nE 'BEGIN { $/ = \"\\n\\n\" } $f = Load($_); say join \",\", @$f{qw/Time Client Subscriber device/}' &lt;inputfile\n</code></pre>\n\n<p>Note that you may need to install YAML from CPAN.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532459077, "post_id": 51503699, "comment_id": 89980745, "body": "thank you , it was good solutions. But my file logs has more than 100000 row, and any solution that I try give mi error of output. When I use file as the example that I put here, the command work."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 3, "last_activity_date": 1532450663, "last_edit_date": 1532450663, "creation_date": 1532450404, "answer_id": 51503699, "question_id": 51502331, "link": "https://stackoverflow.com/questions/51502331/perl-awk-parsing-log-file/51503699#51503699", "title": "perl, awk parsing log file", "body": "<p>Here is a Perl one liner</p>\n\n<pre><code>perl -an00E 'BEGIN{ $\" = \",\" } %F = @F; say \"@F{qw(Time: Client: Subscriber: device:)}\"' &lt;./file.txt\n</code></pre>\n\n<p><code>-00</code> reads in the file using blank lines as the input record separator</p>\n\n<p><code>-n</code> loops over each record in the file</p>\n\n<p><code>-a</code> auto splits the record into <code>@F</code></p>\n\n<p>Then the code makes a hash from <code>@F</code> and prints out the required records having set <code>$\"</code> to place a <code>,</code> between each element of an interpolated array or slice</p>\n\n<p>Note that this assumes there are no spaces in the data</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532459393, "post_id": 51503916, "comment_id": 89980893, "body": "Thanks it works, but my file has more then 100000 row, so for my case give error"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "reply_to_user": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "edited": false, "score": 0, "creation_date": 1532463675, "post_id": 51503916, "comment_id": 89982885, "body": "The number of rows should not cause an error, because <code>-00</code> and <code>-n</code> switches make Perl process only one paragraph in memory at a time. What is the error you&#39;re getting?"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1532457701, "last_edit_date": 1532457701, "creation_date": 1532451177, "answer_id": 51503916, "question_id": 51502331, "link": "https://stackoverflow.com/questions/51502331/perl-awk-parsing-log-file/51503916#51503916", "title": "perl, awk parsing log file", "body": "<pre><code>perl -00 -nE '$text = $_; say join \",\", map {$text =~ /$_: (.*)/} qw&lt;Time Client Subscriber device&gt;' file1.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1532451853, "last_edit_date": 1532451853, "creation_date": 1532451534, "answer_id": 51504007, "question_id": 51502331, "link": "https://stackoverflow.com/questions/51502331/perl-awk-parsing-log-file/51504007#51504007", "title": "perl, awk parsing log file", "body": "<p>Just create an array that maps each tag/name to it's value and then every time you hit a blank line or the end of file print the values for the tags from the preceding record that you're interested in:</p>\n\n<pre><code>$ cat tst.awk\nNF {\n    tag = val = $0\n    sub(/:.*/,\"\",tag)\n    sub(/^[^:]+: */,\"\",val)\n    f[tag] = val\n    next\n}\n{ prt() }\nEND { prt() }\nfunction prt() {\n    OFS = \",\"\n    print f[\"Time\"], f[\"Client\"], f[\"Subscriber\"], f[\"device\"]\n    delete f\n}\n\n$ awk -f tst.awk file\n2018070515,192.168.205.132,345896546,Android\n2018070516,192.168.205.134,345777546,Android\n2018070516,192.168.204.112,345898646,Android\n2018070517,192.168.205.137,345897466,IPhone\n</code></pre>\n\n<p>The above will work using any awk in any shell on any UNIX box.</p>\n"}], "owner": {"reputation": 3, "user_id": 10127382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5608233851a10c9cc4bb885eb38ff3c1?s=128&d=identicon&r=PG&f=1", "display_name": "albi", "link": "https://stackoverflow.com/users/10127382/albi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 51503699, "answer_count": 5, "score": -2, "last_activity_date": 1532459220, "creation_date": 1532445704, "last_edit_date": 1532459220, "question_id": 51502331, "link": "https://stackoverflow.com/questions/51502331/perl-awk-parsing-log-file", "title": "perl, awk parsing log file", "body": "<p>Can someone help me with the log file to convert them from vertical to horizontal?</p>\n\n<p>I have this <code>file1.txt</code></p>\n\n<pre><code>Time: 2018070515\ntimezone: CEST\nClient: 192.168.205.132\nSubscriber: 345896546\nproxyIP: 100.24.201.102\ndevice: Android\n\nTime: 2018070516\ntimezone: CEST\nClient: 192.168.205.134\nSubscriber: 345777546\nproxyIP: 100.24.202.102\ndevice: Android\n\nTime: 2018070516\ntimezone: CEST\nStart: 1530\nClient: 192.168.204.112\nSubscriber: 345898646\nproxyIP: 100.24.202.102\ndevice: Android\n\nTime: 2018070517\ntimezone: CEST\nStart: 1530\nClient: 192.168.205.137\nSubscriber: 345897466\nproxyIP: 100.24.201.102\ndevice: IPhone\n</code></pre>\n\n<p>and I need to have them in this way:</p>\n\n<pre><code>2018070515,192.168.205.132,345896546,Android\n2018070516,192.168.205.134,345777546,Android\n2018070516,192.168.204.112,345898646,Android\n2018070517,192.168.205.137,345897466,IPhone\n</code></pre>\n\n<p>the number of row is not costant, I know that they start with Time.</p>\n\n<p>Thanks you all, for the given solutions. But my file logs has more than 100000 row, and any solution that I try give mi error of output. When I use file as the example that I put here, the command work.</p>\n"}, {"tags": ["regex", "perl", "character", "data-conversion", "cjk"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1532444518, "post_id": 51500851, "comment_id": 89972062, "body": "Same with less code: <a href=\"https://metacpan.org/source/BDFOY/Unicode-Tussle-1.111/script/uniwide\" rel=\"nofollow noreferrer\">uniwide</a> <a href=\"https://metacpan.org/source/BDFOY/Unicode-Tussle-1.111/script/uninarrow\" rel=\"nofollow noreferrer\">uninarrow</a>"}, {"owner": {"reputation": 83, "user_id": 10057091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0795af897ea9a6f99cd6f20ad033b4?s=128&d=identicon&r=PG&f=1", "display_name": "robasia", "link": "https://stackoverflow.com/users/10057091/robasia"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1532445616, "post_id": 51500851, "comment_id": 89972930, "body": "@daxim Thank you! That script on metacpan worked! I just put the tr&lt;&gt;&lt;&gt; portion in my convert subroutine. I am still curious as to what is wrong with my script though. Seems strange that everything works except the number zero. Anyway, I will investigate more later."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1532448899, "post_id": 51500851, "comment_id": 89975160, "body": "I did the same thing <a href=\"https://unix.stackexchange.com/q/429521/44425\">in reverse direction</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1532449983, "last_edit_date": 1532449983, "creation_date": 1532447795, "answer_id": 51502981, "question_id": 51500851, "link": "https://stackoverflow.com/questions/51500851/converting-full-width-characters-to-half-width-characters/51502981#51502981", "title": "Converting full-width characters to half-width characters", "body": "<p>Since <code>$fwhw{'\uff10'}</code> returns <code>0</code>, and since <code>0</code> is false, the replacement doesn't occur. Replace</p>\n\n<pre><code>$sub_string =~ s/(.)/$fwhw{$1}?$fwhw{$1}:$1/seg;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>$sub_string =~ s/(.)/exists($fwhw{$1})?$fwhw{$1}:$1/seg;\n</code></pre>\n\n<hr>\n\n<p>If that still doesn't work, use <code>sprintf \"%vX\", $str</code> to see what you really have.</p>\n\n<hr>\n\n<p>By the way,</p>\n\n<pre><code>sub convert {\n    my $sub_string = shift;\n    $sub_string =~ s/(.)/exists($fwhw{$1})?$fwhw{$1}:$1/seg;\n    return $sub_string;\n}\n</code></pre>\n\n<p>would be much faster if replaced with</p>\n\n<pre><code>sub convert {\n    state $chars = join '', keys(%fwhw);\n    state $re = qr/([\\Q$chars\\E])/;\n    return $_[0] =~ s/$re/$fwhw{$1}/gr;\n}\n</code></pre>\n\n<p>Faster yet,</p>\n\n<pre><code>sub convert {\n    state $s = join '', keys(%fwhw);\n    state $r = join '', values(%fwhw);\n    state $tr = eval(\"sub { $_[0] =~ tr/\\Q$s\\E/\\Q$r\\E/r }\");\n    return $tr-&gt;($_[0]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 0, "last_activity_date": 1604633133, "creation_date": 1604633133, "answer_id": 64708420, "question_id": 51500851, "link": "https://stackoverflow.com/questions/51500851/converting-full-width-characters-to-half-width-characters/64708420#64708420", "title": "Converting full-width characters to half-width characters", "body": "<p>You don't need such a huge dictionary with lots of supporting functions like that. Just a simple <code>sed</code> is enough</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>halfwidth='!&quot;#$%&amp;'\\''()*+,-.\\/0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\uff5f\uff60\u00a2\u00a3\u00ac\u00af\u00a6\u00a5\u20a9 '\nfullwidth='\uff01\uff02\uff03\uff04\uff05\uff06\uff07\uff08\uff09\uff0a\uff0b\uff0c\uff0d\uff0e\uff0f\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19\uff1a\uff1b\uff1c\uff1d\uff1e\uff1f\uff20\uff21\uff22\uff23\uff24\uff25\uff26\uff27\uff28\uff29\uff2a\uff2b\uff2c\uff2d\uff2e\uff2f\uff30\uff31\uff32\uff33\uff34\uff35\uff36\uff37\uff38\uff39\uff3a\uff3b\uff3c\uff3d\uff3e\uff3f\uff40\uff41\uff42\uff43\uff44\uff45\uff46\uff47\uff48\uff49\uff4a\uff4b\uff4c\uff4d\uff4e\uff4f\uff50\uff51\uff52\uff53\uff54\uff55\uff56\uff57\uff58\uff59\uff5a\uff5b\uff5c\uff5d\uff5e\uff5f\uff60\uffe0\uffe1\uffe2\uffe3\uffe4\uffe5\uffe6\u3000'\nsed -ie &quot;y/$fullwidth/$halfwidth/&quot; your_file\n</code></pre>\n<p>If you want to do that in perl it's pretty simple too</p>\n<pre class=\"lang-bash prettyprint-override\"><code>perl -Mutf8 -i -C -pe 'BEGIN{ use open qw/:std :utf8/; } tr#\uff01\uff02\uff03\uff04\uff05\uff06\uff07\uff08\uff09\uff0a\uff0b\uff0c\uff0d\uff0e\uff0f\uff10\uff11\uff12\uff13\uff14\uff15\uff16\uff17\uff18\uff19\uff1a\uff1b\uff1c\uff1d\uff1e\uff1f\uff20\uff21\uff22\uff23\uff24\uff25\uff26\uff27\uff28\uff29\uff2a\uff2b\uff2c\uff2d\uff2e\uff2f\uff30\uff31\uff32\uff33\uff34\uff35\uff36\uff37\uff38\uff39\uff3a\uff3b\uff3c\uff3d\uff3e\uff3f\uff40\uff41\uff42\uff43\uff44\uff45\uff46\uff47\uff48\uff49\uff4a\uff4b\uff4c\uff4d\uff4e\uff4f\uff50\uff51\uff52\uff53\uff54\uff55\uff56\uff57\uff58\uff59\uff5a\uff5b\uff5c\uff5d\uff5e\uff5f\uff60\uffe0\uffe1\uffe2\uffe3\uffe4\uffe5\uffe6\u3000#!&quot;\\#$%&amp;'\\''()*+,-.\\/0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\uff5f\uff60\u00a2\u00a3\u00ac\u00af\u00a6\u00a5\u20a9 # your_file'\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 10057091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c0795af897ea9a6f99cd6f20ad033b4?s=128&d=identicon&r=PG&f=1", "display_name": "robasia", "link": "https://stackoverflow.com/users/10057091/robasia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 51502981, "answer_count": 2, "score": 2, "last_activity_date": 1604675923, "creation_date": 1532441536, "last_edit_date": 1604675923, "question_id": 51500851, "link": "https://stackoverflow.com/questions/51500851/converting-full-width-characters-to-half-width-characters", "title": "Converting full-width characters to half-width characters", "body": "<p>I have a program for converting full width characters to half width. It works fine, except for the number zero. Full-width zero is not converting to half-width zero.</p>\n<h3>Perl</h3>\n<pre><code>use strict;\nuse warnings;\nuse warnings qw(FATAL utf8);\nuse utf8;\nuse feature qw(unicode_strings);\nuse open qw(:std :utf8);\n\nunless ( @ARGV == 2 ) { \n    print &quot;Usage: script.pl input_file output_file\\n&quot;;\n    exit;\n}\n\nmy %fwhw = (\n        '\uff10' =&gt; '0', '\uff11' =&gt; '1', '\uff12' =&gt; '2', '\uff13' =&gt; '3', '\uff14' =&gt; '4',\n        '\uff15' =&gt; '5', '\uff16' =&gt; '6', '\uff17' =&gt; '7', '\uff18' =&gt; '8', '\uff19' =&gt; '9',\n        '\uff21' =&gt; 'A', '\uff22' =&gt; 'B', '\uff23' =&gt; 'C', '\uff24' =&gt; 'D', '\uff25' =&gt; 'E',\n        '\uff26' =&gt; 'F', '\uff27' =&gt; 'G', '\uff28' =&gt; 'H', '\uff29' =&gt; 'I', '\uff2a' =&gt; 'J',\n        '\uff2b' =&gt; 'K', '\uff2c' =&gt; 'L', '\uff2d' =&gt; 'M', '\uff2e' =&gt; 'N', '\uff2f' =&gt; 'O',\n        '\uff30' =&gt; 'P', '\uff31' =&gt; 'Q', '\uff32' =&gt; 'R', '\uff33' =&gt; 'S', '\uff34' =&gt; 'T',\n        '\uff35' =&gt; 'U', '\uff36' =&gt; 'V', '\uff37' =&gt; 'W', '\uff38' =&gt; 'X', '\uff39' =&gt; 'Y',\n        '\uff3a' =&gt; 'Z', '\uff41' =&gt; 'a', '\uff42' =&gt; 'b', '\uff43' =&gt; 'c', '\uff44' =&gt; 'd',\n        '\uff45' =&gt; 'e', '\uff46' =&gt; 'f', '\uff47' =&gt; 'g', '\uff48' =&gt; 'h', '\uff49' =&gt; 'i',\n        '\uff4a' =&gt; 'j', '\uff4b' =&gt; 'k', '\uff4c' =&gt; 'l', '\uff4d' =&gt; 'm', '\uff4e' =&gt; 'n',\n        '\uff4f' =&gt; 'o', '\uff50' =&gt; 'p', '\uff51' =&gt; 'q', '\uff52' =&gt; 'r', '\uff53' =&gt; 's',\n        '\uff54' =&gt; 't', '\uff55' =&gt; 'u', '\uff56' =&gt; 'v', '\uff57' =&gt; 'w', '\uff58' =&gt; 'x',\n        '\uff59' =&gt; 'y', '\uff5a' =&gt; 'z', '\uff0d' =&gt; '-', '\u3001' =&gt; ', ', '\u3000' =&gt; ' ',\n         '\uff0f' =&gt; '/',);\n\nsub slurp {\n    my $file = shift;\n    open my $fh_read, '&lt;', $file or die &quot;Could not open file: $!&quot;;\n    return do {local $/; &lt;$fh_read&gt;};\n}\n\nsub convert {\n    my $sub_string = shift;\n    $sub_string =~ s/(.)/$fwhw{$1}?$fwhw{$1}:$1/seg;\n    return $sub_string;\n}\n\nmy $string = slurp($ARGV[0]);\n\n$string =~ s/&lt;target&gt;\\s*&lt;g id=&quot;\\d+&quot;&gt;\\K(.*?)(?=&lt;\\/g&gt;\\s*&lt;\\/target&gt;)/convert($1)/seg;\n\nopen my $fh_write, &quot;&gt;&quot;, $ARGV[1] or die &quot;Could not open file: $!&quot;;\n\nprint $fh_write $string;\n\nclose $fh_write;\n</code></pre>\n<h3>Here is what I have tried</h3>\n<ul>\n<li><p>I have made sure that the number 0 (zero) and the letter O (oh) are indeed different by checking their code points. Full width 0 is <code>\\x{ff10}</code>. Full width letter O is <code>\\x{ff2f}</code>. I checked this using this code:</p>\n<pre><code>  use Encode;\n\n  sub codepoint_hex {\n      sprintf &quot;%04x&quot;, ord Encode::decode(&quot;UTF-8&quot;, shift);\n  }\n\n  my $codepoint = codepoint_hex('\uff10');\n  print $codepoint, &quot;\\n&quot;;\n</code></pre>\n</li>\n<li><p>I have checked that the hash is indeed loading all of the keys and values correctly.</p>\n</li>\n</ul>\n<h3>What I haven't tried yet:</h3>\n<ul>\n<li>I haven't tried to duplicate this oddity on Linux yet. I am using ActiveState Perl 5.24 on Windows 10.</li>\n</ul>\n<p>If anyone has any suggestions or sees my mistake, I would be very grateful for the guidance.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 2, "creation_date": 1532438042, "post_id": 51499483, "comment_id": 89967251, "body": "What did you try so far?"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1532438749, "post_id": 51499483, "comment_id": 89967773, "body": "I am not expecting to anyone to do my Work and why is it &quot;shabby&quot; to ask a simple question. I am new to perl, if I knew how to do this i would not ask right?!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532438994, "post_id": 51499483, "comment_id": 89967963, "body": "@Unsal: So what kind of answer are you expecting? I&#39;m not alone in this; many people, perhaps the majority, frown on questions that contain just <i>&quot;How can I do this&quot;</i> with no code at all. Knowing no Perl is solved by <i>learning it</i>,  not getting others to do your work. But this problem isn&#39;t unique to Perl: solve it it your preferred language and port it."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1532439182, "post_id": 51499483, "comment_id": 89968106, "body": "So what kind of answer are you expecting? a hint, not a served solution"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532439234, "post_id": 51499483, "comment_id": 89968155, "body": "Hint: build the columns as rows and transpose the matrix."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1532439289, "post_id": 51499483, "comment_id": 89968212, "body": "@Andrey foreach my $key (sort keys %results) {         push @$a, join(&quot;\\n&quot;,split(/\\|/,join(&#39;|&#39;,@{$results{$key}}))); }"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532439419, "post_id": 51499483, "comment_id": 89968305, "body": "@Unsal: Please don&#39;t put code in comments; it is barely readable. Edit your question and add it there."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532439668, "post_id": 51499483, "comment_id": 89968506, "body": "<code>split( &#47;\\|&#47;, join( &#39;|&#39;, @{$results{$key}} ) )</code> is the same as <code>@{$results{$key}}</code> unless there are already pipe characters in the array elements."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": -1, "last_activity_date": 1532445529, "last_edit_date": 1532445529, "creation_date": 1532439846, "answer_id": 51500223, "question_id": 51499483, "link": "https://stackoverflow.com/questions/51499483/print-keys-and-values-of-hash-next-to-each-other/51500223#51500223", "title": "print keys and values of hash next to each other", "body": "<p>You could try:</p>\n\n<pre><code>say join \"\\t\", map {\"'$_'\"} keys %results;\n\nmy $N = scalar @{ $results{ (keys %results)[0] } };\nfor my $i (0..($N - 1)) {\n    my @row;\n    for ( keys %results ) {\n        push @row, $results{$_}[$i];\n    }\n    say join \"\\t\", map {\"'$_'\"} @row;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1532446546, "post_id": 51502250, "comment_id": 89973627, "body": "thanks Andrey that worked. Appreciate your help. Of course i will post my own code if i know how to begin. Thanks a lot"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1532445474, "creation_date": 1532445474, "answer_id": 51502250, "question_id": 51499483, "link": "https://stackoverflow.com/questions/51499483/print-keys-and-values-of-hash-next-to-each-other/51502250#51502250", "title": "print keys and values of hash next to each other", "body": "<p>This should do what you want. You first print keys, and then print array one value at a time from each array:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $hash = {\n    'Ende Deaktiviere PKonten' =&gt; [\n        '31.05.2018 03:28:33',\n        '01.06.2018 03:54:18',\n    ],\n    'Ende Monatswechsel P-Konten' =&gt; [\n        '31.05.2018 03:34:24',\n        '01.06.2018 04:29:05',\n    ]\n};\nmy $arrLingth = @{$hash-&gt;{(keys %$hash)[0]}};\nforeach my $key(keys %$hash) {\n    printf \"%25s\", $key . \"\\t\";\n}\nprint \"\\n\";\nfor(my $i=0; $i&lt;$arrLingth; $i++) {\n    foreach my $key(keys %$hash) {\n        printf \"%25s\", $hash-&gt;{$key}-&gt;[$i] . \"\\t\";\n    }\n    print \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1532450318, "last_edit_date": 1532450318, "creation_date": 1532449956, "answer_id": 51503596, "question_id": 51499483, "link": "https://stackoverflow.com/questions/51499483/print-keys-and-values-of-hash-next-to-each-other/51503596#51503596", "title": "print keys and values of hash next to each other", "body": "\n\n<p>Although I will probably get a down-vote for answering a poor question, here is my solution</p>\n\n<p>As described in my \"hint\", this builds an array of column information and transposes it as it is printed. Much of the code is involved with generalising the <code>printf</code> format, and it could be very much shorter</p>\n\n<p>Note that the columns will be in no particular order because hashes are inherently <em>unordered</em> by design</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'max';\n\nmy %results = (\n    'Ende Deaktiviere PKonten'    =&gt; [ '31.05.2018 03:28:33', '01.06.2018 03:54:18' ],\n    'Ende Monatswechsel P-Konten' =&gt; [ '31.05.2018 03:34:24', '01.06.2018 04:29:05' ],\n);\n\n{\n    my @columns = map [ $_, @{ $results{$_} } ], keys %results;\n\n    my $w    = max map length, map @$_, @columns;\n    my $imax = max map $#$_, @columns;\n    my $fmt  = join(' ', (\"%-${w}s\") x @columns) . \"\\n\";\n\n    for my $i ( 0 .. $imax ) {\n        printf $fmt, map $_-&gt;[$i] // '', @columns;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Ende Monatswechsel P-Konten Ende Deaktiviere PKonten   \n31.05.2018 03:34:24         31.05.2018 03:28:33        \n01.06.2018 04:29:05         01.06.2018 03:54:18        \n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1532450318, "creation_date": 1532437805, "last_edit_date": 1532445675, "question_id": 51499483, "link": "https://stackoverflow.com/questions/51499483/print-keys-and-values-of-hash-next-to-each-other", "title": "print keys and values of hash next to each other", "body": "<p>I have a hash that looks like this</p>\n\n<pre><code>my %results = (\n    'Ende Deaktiviere PKonten' =&gt; [\n                                      '31.05.2018 03:28:33',\n                                      '01.06.2018 03:54:18',\n    ],\n    'Ende Monatswechsel P-Konten' =&gt; [\n                                         '31.05.2018 03:34:24',\n                                         '01.06.2018 04:29:05',\n    ]\n);\n</code></pre>\n\n<p>I would like to print it in this format:</p>\n\n<pre><code>'Ende Deaktiviere PKonten' 'Ende Monatswechsel P-Konten' \n'31.05.2018 03:28:33'       '31.05.2018 03:34:24'\n'01.06.2018 03:54:18'       '01.06.2018 04:29:05'\n</code></pre>\n\n<p>Can someone help me on how to do this?</p>\n\n<p>I tried this:</p>\n\n<pre><code>foreach my $key (keys %results) {\n            $N = scalar @{ $results{$key} };\n\n            for my $i (0..($N-1)) {\n                    print \"i= $i , @{ $results{$key} }[$i]\" ;\n                    print \"\\n\";\n            }\nprint \"\\t\";\n}\n</code></pre>\n\n<p>Output</p>\n\n<p><code>31.05.2018 03:37:47\n01.06.2018 04:53:44\n02.06.2018 03:37:14\n07.06.2018 03:21:04\n08.06.2018 03:40:04\n31.05.2018 03:37:30\n01.06.2018 04:53:23\n02.06.2018 03:36:58\n07.06.2018 03:20:51\n08.06.2018 03:39:51</code></p>\n"}, {"tags": ["database", "perl", "indexing", "solr", "lucene"], "answers": [{"tags": [], "owner": {"reputation": 30915, "user_id": 1628375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9070d56379b05ec9417627d9378c6f8e?s=128&d=identicon&r=PG", "display_name": "femtoRgon", "link": "https://stackoverflow.com/users/1628375/femtorgon"}, "is_accepted": true, "score": 2, "last_activity_date": 1532445841, "creation_date": 1532445841, "answer_id": 51502372, "question_id": 51497175, "link": "https://stackoverflow.com/questions/51497175/check-if-solr-index-is-empty-by-command-line/51502372#51502372", "title": "Check if Solr index is empty by command line", "body": "<p>I'm guessing you want to do this without actually reading the index then?</p>\n\n<p>If the index only has segments files (a segments.gen and one or more segments_N) and a write.lock, it's empty. An index with documents in it would have other files, (generally, an index with data will typically have at least one .cfs or .fdx file), which would contain the indexed data.</p>\n"}], "owner": {"reputation": 45, "user_id": 9994028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ODz9dKKaK_o/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2kk4EB5jhWuxmEZSTWfvuiU60VHA/mo/photo.jpg?sz=128", "display_name": "ohad kim", "link": "https://stackoverflow.com/users/9994028/ohad-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 51502372, "answer_count": 1, "score": 0, "last_activity_date": 1532445841, "creation_date": 1532430816, "last_edit_date": 1532434675, "question_id": 51497175, "link": "https://stackoverflow.com/questions/51497175/check-if-solr-index-is-empty-by-command-line", "title": "Check if Solr index is empty by command line", "body": "\n\n<p>We update our customers' Solr version periodically. We created a shared core called <code>remote_shared_instance</code> in Solr. Some customers use this and others don't. The customers who don't use the core are seeing error message about the <code>remote_shared_instance</code></p>\n\n<blockquote>\n  <p>org.apache.solr.common.SolrException:org.apache.solr.common.SolrException: Error opening new searcher</p>\n</blockquote>\n\n<p>The error message is displayed because these customers often didn't rebuild the index, which was created with an old Solr version (3 or less). The current Solr (5.5.5) can't handle this index.</p>\n\n<p>I am using Perl, and I want to create a program which will check whether the <code>remote_shared_instance</code> index is empty. If so, it will drop the core and restart Solr, which will automatically create a new index and the error message will disappear.</p>\n\n<p>How can I make sure <code>remote_shared_instance</code> index is empty?</p>\n\n<p>I printed the files in the 'index' folder from one customer who gets the error message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-rw-rw---- 1 sfxglb41 sfx 32 Sep 10  2014 segments_1\n-rw-rw---- 1 sfxglb41 sfx 20 Sep 10  2014 segments.gen\n-rw-r----- 1 sfxglb41 sfx  0 Jun 13 04:42 write.lock\n</code></pre>\n"}, {"tags": ["shell", "perl", "environment-variables", "double-quotes"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532416292, "post_id": 51491803, "comment_id": 89953652, "body": "What system are you on, and what version?  This is <code>tcsh</code>, right? Setting that exact environment variable using the first way you show works for me under <code>tcsh</code> (tc-shell), and I think that it always worked that way (for that shell)."}], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1532422276, "post_id": 51492089, "comment_id": 89957060, "body": "Thanks for your replay. Is it possible to solve it through the tchl as you did in perl?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1532423224, "post_id": 51492089, "comment_id": 89957637, "body": "@TTaJTa4  If you take what you run on the command line and put it into a shell script it should just work (is that what you are asking?).  Also, please see the edit in the answer."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1532453249, "last_edit_date": 1532453249, "creation_date": 1532414605, "answer_id": 51492089, "question_id": 51491803, "link": "https://stackoverflow.com/questions/51491803/script-takes-only-first-part-of-double-quotes/51492089#51492089", "title": "Script takes only first part of double quotes", "body": "<p>The <code>$args</code>, obtained from <code>%ENV</code> as you show, is a string. </p>\n\n<p>The problem is in what happens to that string as it is manipulated before arguments are passed to the program, which needs to receive strings <code>-arg</code> and <code>date time</code></p>\n\n<ul>\n<li><p>If the program is executed in a way that bypasses the shell, as your example is, then the whole <code>-arg \"date time\"</code> is passed to it as its first argument. This is clearly wrong as the program expects <code>-arg</code> and then another string for its value (<code>date time</code>) </p></li>\n<li><p>If the program were executed via the shell, what happens when there are shell metacharacters in the command line (not in your example), then the shell would break the string into words, except for the quoted part; this is how it works from the command line.  That can be enforced with</p>\n\n<pre><code>system('/bin/tcsh', '-c', $cmd);\n</code></pre>\n\n<p>This is the most straightforward fix but I can't honestly recommend to involve the shell just for arguments parsing. Also, you are then in the game of layered quoting and escaping, what can get rather involved and tricky.  For one, if things aren't right the shell may end up breaking the command into words <code>-arg</code>, <code>\"date</code>, <code>time\"</code></p></li>\n</ul>\n\n<p>How you set the environment variable works</p>\n\n<pre><code>&gt; setenv SOME_ENV '-arg \"date time\"'   \n\n&gt; perl -wE'say $ENV{SOME_ENV}'  #--&gt; -arg \"date time\"  (so it works)\n</code></pre>\n\n<p>what I believe has always worked this way in <code>[t]csh</code>.</p>\n\n<p>Then, in a Perl script: parse this string into <code>-arg</code> and <code>date time</code> strings, and have the program is executed in a way that bypasses the shell (if shell isn't used by the command)</p>\n\n<pre><code>my @args = $ENV{SOME_ENV} =~ /(\\S+)\\s+\"([^\"]+)\"/;  #\"\n\nmy @cmd = ('script_A', @args);\n\nsystem(@cmd) == 0  or die \"Error with system(@cmd): $?\";\n</code></pre>\n\n<p>This assumes that <code>SOME_ENV</code>'s first word is always the option's name (<code>-arg</code>) and that all the rest is always the option's value, under quotes.  The regex extracts the first word, as consecutive non-space characters, and after spaces everything in quotes.<sup>&dagger;</sup> These are program's arguments.</p>\n\n<p>In the <code>system LIST</code> form the program that is the first element of the list is executed without using a shell, and the remaining elements are passed to it as arguments. Please see <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a> for more on this, and also for basics of how to investigate failure by looking into <a href=\"https://perldoc.perl.org/perlvar.html#$?\" rel=\"nofollow noreferrer\"><code>$?</code> variable</a>.  </p>\n\n<p>It is in principle advisable to run external commands without the shell.  However, if your command <em>needs</em> the shell then make sure that the string is escaped just right to to preserve quotes.</p>\n\n<p>Note that there are modules that make it easier to use external commands. A few, from simple to complex: <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"nofollow noreferrer\">IPC::System::Simple</a>, <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"nofollow noreferrer\">Capture::Tiny</a>, <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"nofollow noreferrer\">IPC::Run3</a>, and <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a>.</p>\n\n<p>I must note that that's an awkward environment variable; any way to ogranize things otherwise?</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &nbsp; To make this work for non-quoted arguments as well (<code>-arg date</code>) make the quote optional</p>\n\n<pre><code>my @args = $ENV{SOME_ENV} =~ /(\\S+)\\s+\"?([^\"]+)/;\n</code></pre>\n\n<p>where I now left out the closing (unnecessary) quote for simplicity</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 51492089, "answer_count": 1, "score": 2, "last_activity_date": 1532453249, "creation_date": 1532413507, "question_id": 51491803, "link": "https://stackoverflow.com/questions/51491803/script-takes-only-first-part-of-double-quotes", "title": "Script takes only first part of double quotes", "body": "<p>Yesterday I asked a similar question about escaping double quotes in env variables, although It didn't solve my problem (Probably because I didn't explain good enough) so I would like to specify more.</p>\n\n<p>I'm trying to run a script (Which I know is written in Perl), although I have to use it as a black box because of permissions issue (so I don't know how the script works). Lets call this script <code>script_A</code>.</p>\n\n<p>I'm trying to run a basic command in Shell: <code>script_A -arg \"date time\"</code>.\nIf I run from the command line, it's works fine, but If I try to use it from a bash script or perl scrip (for example using the <code>system</code> operator), it will take only the first part of the string which was sent as an argument. In other words, it will fail with the following error: <code>'\"date' is not valid.</code>.</p>\n\n<p>Example to specify a little bit more:</p>\n\n<ul>\n<li><p>If I run from the command line (works fine):</p>\n\n<pre><code>&gt; script_A -arg \"date time\"\n</code></pre></li>\n<li><p>If I run from (for example) a Perl script (fails):</p>\n\n<pre><code>my $args = $ENV{SOME_ENV}; # Assume that SOME_ENV has '-arg \"date time\"'\nmy $cmd = \"script_A $args\";\nsystem($cmd\");\n</code></pre></li>\n</ul>\n\n<p>I think that the problem comes from the environment variable, but I can't use the one quote while defining the env variable. For example, I can't use the following method:</p>\n\n<pre><code>setenv SOME_ENV '-arg \"date time\"'\n</code></pre>\n\n<p>Because it fails with the following error: <code>'\"date' is not valid.\"</code>.</p>\n\n<p>Also, I tried to use the following method:</p>\n\n<pre><code>setenv SOME_ENV \"-arg '\"'date time'\"'\"\n</code></pre>\n\n<p>Although now the env variable will containe:</p>\n\n<pre><code>echo $SOME_ENV\n&gt; -arg 'date time' # should be -arg \"date time\"\n</code></pre>\n\n<p>Another note, using <code>\\\"</code> fails on Shell (tried it).</p>\n\n<p>Any suggestions on how to locate the reason for the error and how to solve it?</p>\n"}, {"tags": ["perl", "octave", "gradient-descent"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1532423606, "post_id": 51488912, "comment_id": 89957851, "body": "See also <a href=\"https://metacpan.org/pod/Algorithm::LBFGS\" rel=\"nofollow noreferrer\">Algorithm::LBFGS</a>"}], "owner": {"reputation": 567, "user_id": 9652562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7179b8082590d9450b7783721493cb?s=128&d=identicon&r=PG&f=1", "display_name": "jsor", "link": "https://stackoverflow.com/users/9652562/jsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1532423087, "creation_date": 1532392641, "last_edit_date": 1532423087, "question_id": 51488912, "link": "https://stackoverflow.com/questions/51488912/octave-fminunc-alternate-in-perl-pdl", "title": "octave fminunc alternate in perl/pdl", "body": "<p>Is there an alternative to the <a href=\"https://se.mathworks.com/help/optim/ug/fminunc.html\" rel=\"nofollow noreferrer\"><code>fminunc</code></a> function (from octave/matlab) in perl? </p>\n\n<p>I want to run gradient descent to get minimum value of theta something like octave <code>fminunc</code>:</p>\n\n<pre><code>options = optimset('GradObj', 'on', 'MaxIter', 200);\n[theta, cost] = ...\n    fminunc(@(t)(costFunction(t,X,y)), initial_theta, options);\n</code></pre>\n\n<p>what is the Perl way to do this ?</p>\n"}, {"tags": ["perl", "makemaker"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532371959, "post_id": 51485132, "comment_id": 89939954, "body": "The <code>cpan</code> utility automates it."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1532378280, "last_edit_date": 1532378280, "creation_date": 1532374287, "answer_id": 51486007, "question_id": 51485132, "link": "https://stackoverflow.com/questions/51485132/extutilsmakemaker-doesnt-generate-make-target-to-install-dependencies-for-dev/51486007#51486007", "title": "ExtUtils::MakeMaker doesn&#39;t generate make target to install dependencies for development", "body": "<p>There is no <code>Makefile</code> target that will do what you want, but the <code>cpan</code> tool will use the information in the <code>META</code> file created by <code>Makefile.PL</code> to fetch and install dependencies.</p>\n\n<p>If you to use <code>cpan</code> offline, consider cloning CPAN using <a href=\"http://search.cpan.org/perldoc?CPAN::Mini\" rel=\"nofollow noreferrer\">CPAN::Mini</a>.</p>\n"}], "owner": {"reputation": 8277, "user_id": 270511, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cdb15b84fe2146fa0f381240875081bd?s=128&d=identicon&r=PG", "display_name": "Lawrence I. Siden", "link": "https://stackoverflow.com/users/270511/lawrence-i-siden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532378280, "creation_date": 1532370416, "question_id": 51485132, "link": "https://stackoverflow.com/questions/51485132/extutilsmakemaker-doesnt-generate-make-target-to-install-dependencies-for-dev", "title": "ExtUtils::MakeMaker doesn&#39;t generate make target to install dependencies for development", "body": "<p>I'm building a Perl module.  Makefile.PL has</p>\n\n<pre><code>WriteMakefile(\n    PREREQ_PM         =&gt; {\n      'DBI' =&gt; '&gt;= 1.641, &lt; 2',\n      # etc, ...\n    },\n    TEST_REQUIRES =&gt; {\n      'Test::More' =&gt; 0,\n    },\n    # more stuff ...\n);\n</code></pre>\n\n<p>Recently, my ~/perl5 tree got corrupted (PERL5LIB=~/perl5) so I decided to rebuild it, so I blew it away. Doesn't WriteMakefile() generate some make target that will do this for me with all the modules/packages in PREREQ_PM and TEST_REQUIRES. Instead, it just prints warnings:</p>\n\n<pre><code>Warning: prerequisite DBI &gt;= 1.641, &lt; 2 not found.\n</code></pre>\n\n<p>So I have to start re-installing all these by hand in order to run tests.  For my small project, this isn't such a problem, but what if the project had many dependencies?  Isn't there a way to automate this?</p>\n"}, {"tags": ["perl", "reference", "subroutine", "filehandle"], "comments": [{"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 5, "creation_date": 1532364788, "post_id": 51483705, "comment_id": 89936422, "body": "No need to create a ref to a scalar.  Just use <code>dosomething($fh);</code>.  Then there&#39;s no need to deref later."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1532369512, "post_id": 51483705, "comment_id": 89938736, "body": "@toolic: Yes, this is the correct answer."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532369473, "post_id": 51483947, "comment_id": 89938722, "body": "...Or, preferably, not to pass a reference to a scalar in the first place."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1532365356, "creation_date": 1532365356, "answer_id": 51483947, "question_id": 51483705, "link": "https://stackoverflow.com/questions/51483705/reading-from-a-filehandle-reference-in-a-subroutune/51483947#51483947", "title": "Reading from a filehandle reference in a subroutune", "body": "<p>The diamond operator <code>&lt;...&gt;</code> has two meanings in Perl -- one corresponding to the <code>readline(HANDLE)</code> function and the other corresponding to <code>glob(EXPR)</code>. <a href=\"https://metacpan.org/pod/release/RJBS/perl-5.24.0/pod/perlop.pod#I/O-Operators\" rel=\"nofollow noreferrer\">How does perl decide which function to use?</a></p>\n\n<blockquote>\n  <p>If what's within the angle brackets is neither a filehandle nor a\n         simple scalar variable containing a filehandle name, typeglob, or\n         typeglob reference, it is interpreted as a filename pattern to be\n         globbed, and either a list of filenames or the next filename in the\n         list is returned, depending on context.  This distinction is determined\n         on syntactic grounds alone.  That means <code>&lt;$x&gt;</code> is always a <code>readline()</code>\n         from an indirect handle, but <code>&lt;$hash{key}&gt;</code> is always a <code>glob()</code>.  That's\n         because <code>$x</code> is a simple scalar variable, but <code>$hash{key}</code> is not--it's a\n         hash element.  Even <code>&lt;$x &gt;</code> (note the extra space) is treated as\n         <code>glob(\"$x \")</code>, not <code>readline($x)</code>.</p>\n</blockquote>\n\n<p>The workarounds are to either use an explicit <code>readline</code> call</p>\n\n<pre><code>while (my $l = readline($$fh_ref)) ...\n</code></pre>\n\n<p>or to use a simpler expression inside the brackets.</p>\n\n<pre><code>my $fh42 = $$fh_ref;\nwhile (my $l = &lt;$fh42&gt;) ...\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8372262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdfc3419ae702e2f747bf4ecb2d4206?s=128&d=identicon&r=PG&f=1", "display_name": "phlatphish", "link": "https://stackoverflow.com/users/8372262/phlatphish"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "closed_date": 1532368304, "accepted_answer_id": 51483947, "answer_count": 1, "score": 3, "last_activity_date": 1532368399, "creation_date": 1532364464, "last_edit_date": 1532366461, "question_id": 51483705, "link": "https://stackoverflow.com/questions/51483705/reading-from-a-filehandle-reference-in-a-subroutune", "closed_reason": "Duplicate", "title": "Reading from a filehandle reference in a subroutune", "body": "<p>I'd like to pass a reference to a file handle to a subroutine, such that code in the sub can read from the file and the position in the file handle changes in the calling environment, rather like using a pointer in C. </p>\n\n<p>This kind of thing:</p>\n\n<pre><code>open my $fh, '&lt;', $somefile or die;\n\ndosomething(\\$fh);\n\nsub dosomething\n{\n  my $fh_ref = shift;\n\n  while (my $l = &lt;$$fh_ref&gt;)\n  {\n    print $l;\n    print \"\\n\";\n  }\n}\n</code></pre>\n\n<p>This gives this output instead of writing each line:</p>\n\n<pre><code> GLOB(0x20b8b38)\n</code></pre>\n\n<p>Obviously I am dereferencing the file handle reference wrong.</p>\n\n<p>Addendum:</p>\n\n<pre><code>while (my $l = readline($$fh_ref))\n{\n</code></pre>\n\n<p>etc.</p>\n\n<p>seems to do the trick. I am still interested in why the first approach doesn't work.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 2, "creation_date": 1532363510, "post_id": 51483287, "comment_id": 89935772, "body": "Could it be an XY problem? Please provide a wider context - why do you need to check for <code>eval</code>."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1532363582, "post_id": 51483287, "comment_id": 89935802, "body": "I&#39;m not sure I understand why you wouldn&#39;t also want to lazy install inside an <code>eval</code>."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1532363744, "post_id": 51483287, "comment_id": 89935890, "body": "I don&#39;t want it to try to install optional dependencies as those may be OS-specific or depend on other things that I can&#39;t reasonably assume will be there.  These kinds of checks I&#39;d expect to find inside an <code>eval</code>, so I&#39;d like those to be a no-op.  In the case of <code>HTTP::Tinyish</code>, it can fall back to some other dependency if the <code>eval</code> doesn&#39;t work out.  I could add an option to try the install in the <code>eval</code> case, but for the default this would lead to less problems, I think."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1532364043, "post_id": 51483287, "comment_id": 89936048, "body": "@oalders There&#39;s many other reasons to call <code>require</code> inside an <code>eval</code>, you might be writing yourself a big headache. Also, have a look at the <a href=\"https://metacpan.org/source/MSCHWERN/perl5i-v2.13.2/lib/perl5i/2/RequireMessage.pm\" rel=\"nofollow noreferrer\">code from perl5i::RequireMessage</a> that ensures your code is always at the end of <code>@INC</code>. Otherwise your trigger might pushed down into the stack and fire too early."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1532364843, "post_id": 51483287, "comment_id": 89936456, "body": "@Schwern I appreciate that feedback. This is mostly just a fun bit of code. Having said that, what got me started on this is looking at these kinds of test failures where (for some reason) LWP is trying to get installed as part of the test suite: <a href=\"http://www.cpantesters.org/cpan/report/1e399162-8978-11e8-8fb1-ef5133556b3f\" rel=\"nofollow noreferrer\">cpantesters.org/cpan/report/&hellip;</a>  <code>cpm</code> =&gt; <code>HTTP::Tinyish</code> seems to be where this might be happening.  There are some other circular requirements from some reporters.  I wanted to exclude the eval as being part of the problem, though I don&#39;t know why it would be in this case."}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1532364936, "post_id": 51483287, "comment_id": 89936504, "body": "I actually want <code>lazy</code> to run in the middle of <code>@INC</code> because after a (possibly) successful install I wanted the code to traverse <code>@INC</code> once more in an attempt to load the new module.  So the order is original <code>@INC</code> =&gt; <code>lazy</code> =&gt; original <code>@INC</code>. Do you think that&#39;s problematic?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1532366238, "post_id": 51483287, "comment_id": 89937174, "body": "@oalders The main issue is keeping it there in the middle and ensuring that changes to <code>@INC</code> later don&#39;t mess things up. For example, what happens with <code>use lazy; use lib ...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1532364551, "post_id": 51483455, "comment_id": 89936309, "body": "Thanks @Schwern! I&#39;ve tried it out, but <code>$^S</code> is actually <code>undef</code> at the point that I&#39;m checking.  See <a href=\"https://gist.github.com/oalders/d4ead6895cb282dca38f7623808c44ec\" rel=\"nofollow noreferrer\">gist.github.com/oalders/d4ead6895cb282dca38f7623808c44ec</a>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 1, "creation_date": 1532366332, "post_id": 51483455, "comment_id": 89937214, "body": "@oalders <code>undef</code> means the interpreter is &quot;Parsing module, eval, or main program&quot; which I guess includes being in a <code>require</code>. You might have to resolve <code>undef</code> by walking the call stack."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1532363443, "creation_date": 1532363443, "answer_id": 51483455, "question_id": 51483287, "link": "https://stackoverflow.com/questions/51483287/how-to-detect-if-perl-code-is-being-run-inside-an-eval/51483455#51483455", "title": "How to detect if Perl code is being run inside an eval?", "body": "<p>If <a href=\"https://perldoc.perl.org/perlvar.html#Variables-related-to-the-interpreter-state\" rel=\"nofollow noreferrer\">$^S</a> is true, the code is inside an <code>eval</code>.</p>\n\n<pre><code>sub foo { print $^S }\neval { foo() };  # 1\nfoo();           # 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1532367036, "creation_date": 1532367036, "answer_id": 51484321, "question_id": 51483287, "link": "https://stackoverflow.com/questions/51483287/how-to-detect-if-perl-code-is-being-run-inside-an-eval/51484321#51484321", "title": "How to detect if Perl code is being run inside an eval?", "body": "<p><code>Carp::longmess</code> traverses the stack for you in one call, if that makes things easier</p>\n\n<pre><code>return if Carp::longmess =~ m{^\\s+eval }m\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1532443417, "post_id": 51489898, "comment_id": 89971274, "body": "I agree with this. I&#39;m writing re-usable code, but it&#39;s not <i>serious</i> code.  Basically a rewrite of Acme::Magic::Pony. For now I&#39;ll add a <code>warn</code> about the behaviour under <code>eval</code> in each case where there&#39;s a no-op. In future I&#39;ll probably add a flag to allow the user to specify behaviour under <code>eval</code>. One case I found that I want to allow is the use of <code>Capture::Tiny</code> which does use <code>eval</code>, but isn&#39;t a case where I want to bypass installing a module. This is mostly just a fun exercise."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 3, "last_activity_date": 1532401613, "creation_date": 1532401613, "answer_id": 51489898, "question_id": 51483287, "link": "https://stackoverflow.com/questions/51483287/how-to-detect-if-perl-code-is-being-run-inside-an-eval/51489898#51489898", "title": "How to detect if Perl code is being run inside an eval?", "body": "<p>Don't try to do this in reusable code.  There are many reasons to be in an eval and not want this kind of action at a distance change.</p>\n"}], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 51484321, "answer_count": 3, "score": 6, "last_activity_date": 1532645265, "creation_date": 1532362787, "last_edit_date": 1532645265, "question_id": 51483287, "link": "https://stackoverflow.com/questions/51483287/how-to-detect-if-perl-code-is-being-run-inside-an-eval", "title": "How to detect if Perl code is being run inside an eval?", "body": "<p>I've got <a href=\"https://metacpan.org/source/OALDERS/lazy-0.000006/lib/lazy.pm#L87-89\" rel=\"nofollow noreferrer\">a module</a> that uses an <code>@INC</code> hook and tries to install missing modules as they are <code>use</code>d.  I don't want this behaviour to fire inside an <code>eval</code>.  My attempt to do this currently is:</p>\n\n<pre><code>return\n    if ( ( $caller[3] &amp;&amp; $caller[3] =~ m{eval} )\n    || ( $caller[1] &amp;&amp; $caller[1] =~ m{eval} ) );\n</code></pre>\n\n<p>That's the result of me messing around with the call stack in some experiments, but it's not catching everything, like this code in <a href=\"https://metacpan.org/source/MIYAGAWA/HTTP-Tinyish-0.14/lib/HTTP/Tinyish.pm#L52-65\" rel=\"nofollow noreferrer\">HTTP::Tinyish</a>:</p>\n\n<pre><code>sub configure_backend {\n    my($self, $backend) = @_;\n    unless (exists $configured{$backend}) {\n        $configured{$backend} =\n          eval { require_module($backend); $backend-&gt;configure };\n    }\n    $configured{$backend};\n}\n\nsub require_module {\n    local $_ = shift;\n    s!::!/!g;\n    require \"$_.pm\";\n}\n</code></pre>\n\n<p>Maybe I just need to traverse every level of the call stack until I hit an <code>eval</code> or run out of levels.  Is there a better or easier way for me to figure out whether or not code is being wrapped in an <code>eval</code> without traversing the call stack?</p>\n\n<hr>\n\n<p>Post mortem on this question:</p>\n\n<ul>\n<li>as was suggested by multiple posters, this was basically a bad idea</li>\n<li><code>$^S</code> is technically a correct way to do this, but it doesn't let you know if you're inside an <code>eval</code> that was called somewhere higher in the stack</li>\n<li>using a regex + <code>Carp::longmess()</code> seems to be the most concise way to figure this out</li>\n<li>knowing if code is running inside an <code>eval</code> may be somewhat helpful for informational purposes, but since this could be happening for many different reasons, it's very hard to infer why it's happening</li>\n<li>regardless, this was an interesting exercise. i thank all contributors for their helpful input</li>\n</ul>\n"}, {"tags": ["perl", "scripting"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532361861, "post_id": 51482882, "comment_id": 89934913, "body": "Which version of Perl are you running? Run <code>perl -v</code> and tell us please. Usually there is more than one directory where Perl keeps modules. The best way to check if you have something installed (and what version) is to run <code>perl -MTime::Piece\\ 999</code> (with a backslash <code>\\</code> and an empty space). It&#39;ll tell you either what version you have or say you don&#39;t have it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1532361961, "post_id": 51482882, "comment_id": 89934968, "body": "Also, please tell us what you are actually trying to do. Why do you want to use those together? What do you want to achieve?"}, {"owner": {"reputation": 89, "user_id": 6183488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/595d83b3be8ae17f6c394886ff4e1540?s=128&d=identicon&r=PG&f=1", "display_name": "Naren", "link": "https://stackoverflow.com/users/6183488/naren"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532363606, "post_id": 51482882, "comment_id": 89935821, "body": "I am using 5.8.2 version."}, {"owner": {"reputation": 89, "user_id": 6183488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/595d83b3be8ae17f6c394886ff4e1540?s=128&d=identicon&r=PG&f=1", "display_name": "Naren", "link": "https://stackoverflow.com/users/6183488/naren"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532363920, "post_id": 51482882, "comment_id": 89935974, "body": "The reason why I am using together is that I don&#39;t have any new time modules (or) date modules with me, I want to use Time::Piece but could not as I don&#39;t have it. I am trying to convert the string into time ( I don&#39;t have POSIX::qw as well). So finally with no other options left I have to use timelocal funciton for that I need (Time::Local), I need tm structure as well to print formatted output into a file(Time::Local). and I need localtime in order to get the time of a function that it takes. I am placing start and end and then computing the time."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532364308, "post_id": 51482882, "comment_id": 89936187, "body": "There&#39;s no POSIX::qw. If you do <code>use POSIX qw(foo bar)</code> that means it imports the functions <code>foo</code> and <code>bar</code> from the POSIX module. In Perl 5.8.2 POSIX was included. See <a href=\"https://perldoc.pl/5.8.2/POSIX\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 89, "user_id": 6183488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/595d83b3be8ae17f6c394886ff4e1540?s=128&d=identicon&r=PG&f=1", "display_name": "Naren", "link": "https://stackoverflow.com/users/6183488/naren"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532364433, "post_id": 51482882, "comment_id": 89936244, "body": "sorry, I mean to say there is no POSIX module also."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 6183488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/595d83b3be8ae17f6c394886ff4e1540?s=128&d=identicon&r=PG&f=1", "display_name": "Naren", "link": "https://stackoverflow.com/users/6183488/naren"}, "edited": false, "score": 0, "creation_date": 1532364317, "post_id": 51483308, "comment_id": 89936190, "body": "As mentioned in previous post comment, the reason why I am using together is that I don&#39;t have any new time modules (or) date modules with me, I want to use Time::Piece but could not as I don&#39;t have it. I am trying to convert the string into time ( I don&#39;t have POSIX::qw as well). So finally with no other options left I have to use timelocal funciton for that I need (Time::Local), I need tm structure as well to print formatted output into a file(Time::Local). and I need localtime in order to get the time of a function that it takes. I am placing start and end and then computing the time."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 89, "user_id": 6183488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/595d83b3be8ae17f6c394886ff4e1540?s=128&d=identicon&r=PG&f=1", "display_name": "Naren", "link": "https://stackoverflow.com/users/6183488/naren"}, "edited": false, "score": 0, "creation_date": 1532365210, "post_id": 51483308, "comment_id": 89936653, "body": "If you don&#39;t have POSIX, then you have a fundamentally broken Perl installation and you should refuse to use it until it is fixed!"}, {"owner": {"reputation": 89, "user_id": 6183488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/595d83b3be8ae17f6c394886ff4e1540?s=128&d=identicon&r=PG&f=1", "display_name": "Naren", "link": "https://stackoverflow.com/users/6183488/naren"}, "edited": false, "score": 0, "creation_date": 1532366092, "post_id": 51483308, "comment_id": 89937101, "body": "i will let the relevant people know, I don\u2019t have rights to upgrade also, thanks"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 3, "last_activity_date": 1532362857, "creation_date": 1532362857, "answer_id": 51483308, "question_id": 51482882, "link": "https://stackoverflow.com/questions/51482882/how-to-use-both-timelocal-and-timelocaltime-together-in-perl/51483308#51483308", "title": "How to use both Time::Local and Time::localtime together in perl", "body": "<p>When you're trying to work out how a Perl module works, it's always a good idea to read the documentation. The documentation for the two modules you're using is at <a href=\"https://metacpan.org/pod/Time::Local\" rel=\"nofollow noreferrer\">Time::Local</a> and <a href=\"https://metacpan.org/pod/Time::localtime\" rel=\"nofollow noreferrer\">Time::localtime</a>. The documentation for Time::localtime includes this line:</p>\n\n<blockquote>\n  <p>The ctime() function provides a way of getting at the scalar sense of the original CORE::localtime() function.</p>\n</blockquote>\n\n<p>So you can get the behaviour you want by changing your code to:</p>\n\n<pre><code>my $time = timelocal($sec, $min, $hour, $day, $mon, $year);\nmy $time2 = ctime;\nmy $time3 = localtime;\nprint \"time is $time, $time2, $time3\\n\";\n</code></pre>\n\n<p>But, as simbabque says in his comment, this seems a rather strange thing to want to do and if you explained what you're trying to achieve we could almost certainly show you a better way to do it.</p>\n"}], "owner": {"reputation": 89, "user_id": 6183488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/595d83b3be8ae17f6c394886ff4e1540?s=128&d=identicon&r=PG&f=1", "display_name": "Naren", "link": "https://stackoverflow.com/users/6183488/naren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 1, "accepted_answer_id": 51483308, "answer_count": 1, "score": -2, "last_activity_date": 1532430383, "creation_date": 1532361340, "last_edit_date": 1532368667, "question_id": 51482882, "link": "https://stackoverflow.com/questions/51482882/how-to-use-both-timelocal-and-timelocaltime-together-in-perl", "title": "How to use both Time::Local and Time::localtime together in perl", "body": "\n\n<p>I don't have any advanced date or time utilities in my Perl installation. I have only <code>Time::Local</code>, <code>Time::gmtime</code>, <code>Time::localtime</code> and <code>Time::tm</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Time::Local;\n#use Time::localtime;\n\n#$datestring = localtime('2018/07/17-21:18:15','%Y/%m/%d-%H:%M:%S');\n\nmy $str = '2018/07/17-21:18:15';\n\nmy ($date, $time) = split /-/, $str;\nmy ($year, $mon, $day) = split /\\//, $date;\nmy ($hour, $min, $sec) = split /:/, $time;\n--$mon;\n\nmy $time  = timelocal($sec, $min, $hour, $day, $mon, $year);\nmy $time2 = localtime;\nmy $time3 = localtime;\n\nprint \"time is $time, $time2, $time3\\n\";\n</code></pre>\n\n<p>After executing the above I get </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>time is 1531880295, Mon Jul 23\n10:50:54 2018, Mon Jul 23 10:50:54 2018\n</code></pre>\n\n<p>After uncommenting the second line I get the following (with `tm\n structure) </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>time is 1531880295, Time::tm=ARRAY(0x40036a40),\nTime::tm=ARRAY(0x40036ab8)\n</code></pre>\n\n<p>I want to use both of the functionalities and use them like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>time is 1531880295, Mon Jul 23 10:50:54 2018,\nTime::tm=ARRAY(0x40036ab8)\n</code></pre>\n"}, {"tags": ["perl", "sparql"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532351415, "post_id": 51476044, "comment_id": 89927660, "body": "What is your question? You appear to have resolved this issue yourself."}, {"owner": {"reputation": 2166, "user_id": 285364, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/69d9207065febf40940eb74a3b76222e?s=128&d=identicon&r=PG", "display_name": "Vladimir Alexiev", "link": "https://stackoverflow.com/users/285364/vladimir-alexiev"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532415846, "post_id": 51476044, "comment_id": 89953414, "body": "Almost works but there&#39;s no way to check if it was successful. On success it returns null and <code>-&gt;error()</code> is <code>Response of type &#39;&#39; could not be parsed.</code>  <a href=\"https://rt.cpan.org/Ticket/Display.html?id=125913\" rel=\"nofollow noreferrer\">rt.cpan.org/Ticket/Display.html?id=125913</a>"}, {"owner": {"reputation": 2166, "user_id": 285364, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/69d9207065febf40940eb74a3b76222e?s=128&d=identicon&r=PG", "display_name": "Vladimir Alexiev", "link": "https://stackoverflow.com/users/285364/vladimir-alexiev"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532415883, "post_id": 51476044, "comment_id": 89953428, "body": "@borodin thanks for the reassurance, but is this really the best practice?"}], "answers": [{"tags": [], "owner": {"reputation": 2166, "user_id": 285364, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/69d9207065febf40940eb74a3b76222e?s=128&d=identicon&r=PG", "display_name": "Vladimir Alexiev", "link": "https://stackoverflow.com/users/285364/vladimir-alexiev"}, "is_accepted": false, "score": 1, "last_activity_date": 1532416009, "creation_date": 1532416009, "answer_id": 51492490, "question_id": 51476044, "link": "https://stackoverflow.com/questions/51476044/how-to-do-sparql-update-with-perl/51492490#51492490", "title": "How to do SPARQL UPDATE with Perl?", "body": "<pre><code>use constant UPDATE =&gt; \"https://.../update\";\nmy $ua = LWP::UserAgent-&gt;new();\nuse constant DEBUG =&gt; 7; # dump SPARQL POST: 0 off, 1 uri, 2 status, 3 title, 4 params, 5 headers, 6 cookies, 7 text, 8 content\nif (DEBUG) {use LWP::ConsoleLogger::Easy qw(debug_ua)}\n\nmy $update = RDF::Query::Client-&gt;new(\"insert {...} where {...}\");\ndebug_ua ($ua, DEBUG) if DEBUG;\n$update-&gt;execute(UPDATE, {UserAgent =&gt; $ua, QueryParameter=&gt;\"update\", QueryMethod =&gt;\"POST\", AuthUsername=&gt;USER, AuthPassword=&gt;PASS});\n# no way to check success\n</code></pre>\n"}], "owner": {"reputation": 2166, "user_id": 285364, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/69d9207065febf40940eb74a3b76222e?s=128&d=identicon&r=PG", "display_name": "Vladimir Alexiev", "link": "https://stackoverflow.com/users/285364/vladimir-alexiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532416009, "creation_date": 1532339777, "last_edit_date": 1532351599, "question_id": 51476044, "link": "https://stackoverflow.com/questions/51476044/how-to-do-sparql-update-with-perl", "title": "How to do SPARQL UPDATE with Perl?", "body": "<p>My understanding is that\n<a href=\"https://metacpan.org/pod/AtteanX::Store::SPARQL\" rel=\"nofollow noreferrer\"><code>AtteanX::Store::SPARQL</code></a>\nsupports only query, not update.</p>\n\n<p>So I guess I'll use\n<a href=\"https://metacpan.org/pod/RDF::Query::Client\" rel=\"nofollow noreferrer\"><code>RDF::Query::Client</code></a>,\nwhich is in line with the older <code>RDF::Trine</code>.</p>\n"}, {"tags": ["regex", "perl", "text", "scripting"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1532337689, "post_id": 51475356, "comment_id": 89919016, "body": "Why using a regex? A simple comparison is  enough."}, {"owner": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1532337951, "post_id": 51475356, "comment_id": 89919177, "body": "Okay, regardless of regex being totally unnecessary, and regardless of the redundant character classes, what exactly does your regex <i>not</i> do while it should?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1532338420, "post_id": 51475356, "comment_id": 89919463, "body": "Having <code>[2][5][5]</code> in your regex is overkill - it&#39;s no different to have just &quot;255&quot; in it."}, {"owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 0, "creation_date": 1532341327, "post_id": 51475356, "comment_id": 89921251, "body": "I&#39;ll check for comparison :) . To understand what I do : I send a command on a router : &quot;show interface $WAN_Int&quot; and I put the result in a table. Then I read the table and I search for &quot;Reliability: 255/255&quot;. if it&#39;s 255 then it&#39;s OK. If it&#39;s not 255 there is a problem. I change [2][5][5] just after my question, it was a mistake :("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532375275, "post_id": 51475356, "comment_id": 89941506, "body": "@AChichi Thanks for the clarification -- it should be a part of the question.  While one wants to be really careful with modifying a question after people have started looking at it, when a clarification is needed it is better to edit the question than to have it buried in a skinny comment :)"}, {"owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532425715, "post_id": 51475356, "comment_id": 89959059, "body": "Okay thanks @zdim for the advice, I&#39;m a beginner on stackoverflow :( Edited"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 1, "creation_date": 1532340923, "post_id": 51475761, "comment_id": 89921014, "body": "Thank you for your answer, it works well :) I change [2][5][5] just after my question, it was a mistake."}, {"owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 1, "creation_date": 1532342707, "post_id": 51475761, "comment_id": 89922114, "body": "Here is the context : I send a command on a router : &quot;show interface $WAN_Int&quot; and I put the result in a table. Then I read the table and I search for &quot;Reliability: 255/255&quot;. if it&#39;s 255 then it&#39;s OK. If it&#39;s not 255 and there is a problem. So my condition is like this : if($_ =~ /Reliability:\\s+((?!255\\/255)\\d+\\/255)/) { #It&#39;s OK } I don&#39;t know if it&#39;s the best way to do it..."}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 0, "creation_date": 1532345360, "post_id": 51475761, "comment_id": 89923697, "body": "If the table can just contain strings like &quot;Reliability: ...&quot; then an approach like @zdim said, will work for you and It is a tad simpler. However, If on the table you can find some different strings (non &quot;Reliability&quot; ones) then you should use my approach in order to find Reliability strings with numbers != 255. Another option could be to search for Reliability strings and capture first number, and then check the value of the number. There are many options."}, {"owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 1, "creation_date": 1532347029, "post_id": 51475761, "comment_id": 89924659, "body": "Okay, I&#39;ll use your option. I don&#39;t have only &quot;Reliability&quot; in my result. Thanks"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532355858, "post_id": 51475761, "comment_id": 89930883, "body": "The middle <code>255</code> is useless."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532355902, "post_id": 51475761, "comment_id": 89930915, "body": "<code>Reliability:\\s+255&#47;255</code> matches <code>Reliability: 255&#47;2550</code>"}, {"owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 0, "creation_date": 1532425615, "post_id": 51475761, "comment_id": 89959013, "body": "I finally used regex : Reliability:\\s+((?!255\\/255)\\d+\\/255$) and it&#39;s working well. Thanks for your help :D"}], "tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": true, "score": 0, "last_activity_date": 1532358000, "last_edit_date": 1532358000, "creation_date": 1532338857, "answer_id": 51475761, "question_id": 51475356, "link": "https://stackoverflow.com/questions/51475356/writing-a-regex-pattern-for-text-if-not-255-255/51475761#51475761", "title": "Writing a regex pattern for text if not 255/255", "body": "<p>This may work for you:</p>\n\n<pre><code>Reliability:\\s+(?!255)\\d+/255\\s*$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/1JAsG6/5/\" rel=\"nofollow noreferrer\">https://regex101.com/r/1JAsG6/5/</a></p>\n\n<p>Also, for matching 255 on your original regexp, It can be simplified (you don't need classes and you can avoid the group)</p>\n\n<pre><code>Reliability:\\s+255/255\\s*$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/LnfXVI/3/\" rel=\"nofollow noreferrer\">https://regex101.com/r/LnfXVI/3/</a></p>\n\n<p><strong>NOTE</strong>: If you use <code>/</code> as a delimiter for the regexp, you may need to scape <code>/</code> on the regxes as <code>\\/</code></p>\n\n<p><strong>Extra</strong>: If you would want to also disallow strings like <code>Reliability: 123456/255</code>, use this instead: <code>Reliability:\\s+(?!255|0\\d)\\d{1,3}/255\\s*$</code></p>\n\n<p><a href=\"https://regex101.com/r/1JAsG6/8/\" rel=\"nofollow noreferrer\">https://regex101.com/r/1JAsG6/8/</a></p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 0, "creation_date": 1532342629, "post_id": 51476307, "comment_id": 89922066, "body": "Here is the context : I send a command on a router : &quot;show interface $WAN_Int&quot; and I put the result in a table. Then I read the table and I search for &quot;Reliability: 255/255&quot;. if it&#39;s 255 then it&#39;s OK. If it&#39;s not 255 and there is a problem. So my condition is like this : if($_ =~ /Reliability:\\s+((?!255\\/255)\\d+\\/255)/) { #It&#39;s OK } I don&#39;t know if it&#39;s the best way to do it..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 0, "creation_date": 1532375127, "post_id": 51476307, "comment_id": 89941435, "body": "@AChichi OK, then a regex is better, since that input may have slight variations. I edited the answer."}, {"owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "edited": false, "score": 0, "creation_date": 1532425577, "post_id": 51476307, "comment_id": 89958991, "body": "I finally used regex : Reliability:\\s+((?!255\\/255)\\d+\\/255$) and it&#39;s working well. Thanks for your help :D"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1532375547, "last_edit_date": 1532375547, "creation_date": 1532340610, "answer_id": 51476307, "question_id": 51475356, "link": "https://stackoverflow.com/questions/51475356/writing-a-regex-pattern-for-text-if-not-255-255/51476307#51476307", "title": "Writing a regex pattern for text if not 255/255", "body": "<pre><code>my $ok = $string eq 'Reliability: 255/255';\n</code></pre>\n\n<p>or, if it must be a regex</p>\n\n<pre><code>my $ok = $string =~ m{^Reliability: 255/255$};\n</code></pre>\n\n<p>The <code>$ok</code> is <code>1</code> if <code>$string</code> is equal to the text or an empty string otherwise.</p>\n\n<p>Both <a href=\"https://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\"><code>eq</code> operator</a> \nand the regex's <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">match operator</a> in scalar context\nreturn \"true\" (<code>1</code>) on success or false (an empty string) otherwise. So you can use them in an expression and assign their return (or decide based on it). </p>\n\n<p>Please keep in mind the precedence table when doing this or use parenthesis liberally.</p>\n\n<p>Given the clarification a regex is better here, to allow for flexibility in input as it comes from another interface which may have (or pick up) slight variations in the expected format. </p>\n\n<p>Then allow for multiple spaces between words (<code>\\s+</code>), for the phrase being only a part of the string (drop anchors <code>^</code> and <code>$</code>), perhaps for the word not being capitalized</p>\n\n<pre><code>my $ok = $string =~ m{\\b[Rr]eliability:\\s+255/255\\b};\n</code></pre>\n\n<p>where <code>\\b</code> is the word-boundary anchor, since trailing numbers after <code>255</code> may compromise this.</p>\n"}], "owner": {"reputation": 171, "user_id": 8142813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1783d45d29f2c795bc7f7e826d1371a?s=128&d=identicon&r=PG&f=1", "display_name": "AChichi", "link": "https://stackoverflow.com/users/8142813/achichi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 51475761, "answer_count": 2, "score": 0, "last_activity_date": 1532425930, "creation_date": 1532337513, "last_edit_date": 1592644375, "question_id": 51475356, "link": "https://stackoverflow.com/questions/51475356/writing-a-regex-pattern-for-text-if-not-255-255", "title": "Writing a regex pattern for text if not 255/255", "body": "\n<p>I'm currently writing a Perl program where I need a regex pattern, but there is something I don't know how to do.</p>\n<h3>Text</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Reliability: 255/255\n</code></pre>\n<p>I need to write a regex where if reliability is <code>255/255</code> then it's okay (I have that one: <code>Reliability:\\s+(255\\/255)</code>)\nbut if Reliability is different from <code>255/255</code> it's not.</p>\n<p>I need to do it without an <code>else</code>. I just need the regex if possible.</p>\n<p><strong>Clarification</strong></p>\n<p>I send a command on a router : <code>show interface $WAN_Int</code> where <code>$WAN_Int</code> is an IP address. I put the result in a table. Then I read the table and I search for <code>Reliability: 255/255</code>. if it's <em><strong>255</strong></em>, it's OK. If it's not, there is a problem.</p>\n"}, {"tags": ["shell", "perl", "telnet"], "comments": [{"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1532341100, "post_id": 51474562, "comment_id": 89921125, "body": "Is there not a password that you can use? See <a href=\"https://stackoverflow.com/questions/1366751/how-can-i-use-expect-to-enter-a-password-for-a-perl-script\" title=\"how can i use expect to enter a password for a perl script\">stackoverflow.com/questions/1366751/&hellip;</a>"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1532342239, "post_id": 51474562, "comment_id": 89921827, "body": "Using <code>telnet</code> without any authentication is obviously extremely insecure. Can you switch to <code>ssh</code> instead and disable <code>telnet</code> access altogether?"}], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 0, "last_activity_date": 1532341104, "creation_date": 1532341104, "answer_id": 51476459, "question_id": 51474562, "link": "https://stackoverflow.com/questions/51474562/password-less-telnet-to-remote-server-and-execute-commands-and-retrieve-the-deta/51476459#51476459", "title": "Password less telnet to remote server and execute commands and retrieve the details", "body": "<p>Try this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Net::Telnet;\n\nmy $t = new Net::Telnet (Timeout  =&gt; 10);\n\n$t-&gt;open('nethack.alt.org');\n\n$t-&gt;waitfor( -match =&gt; '/Quit/' );\n\n$t-&gt;print( 'w' );\n\nprint $t-&gt;waitfor( -match =&gt; '/Watch which game/' );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8375454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4f7f5edee6f6374e0a7a5a23165df3?s=128&d=identicon&r=PG&f=1", "display_name": "Sowndarya 18795", "link": "https://stackoverflow.com/users/8375454/sowndarya-18795"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532341174, "creation_date": 1532334623, "last_edit_date": 1532341174, "question_id": 51474562, "link": "https://stackoverflow.com/questions/51474562/password-less-telnet-to-remote-server-and-execute-commands-and-retrieve-the-deta", "title": "Password less telnet to remote server and execute commands and retrieve the details", "body": "<p>Currently am logging into the server using telnet on the command line without a password: </p>\n\n<pre><code>telnet -afl root servername\n</code></pre>\n\n<p>I need a script which should connect to server using telnet without a password, run a command like <code>wc -l</code>, and retrieve the result of this command.</p>\n\n<p>I tried using expect, but it is prompting for a password, throwing an error. Can someone suggest a way this can be done?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1532329067, "post_id": 51472392, "comment_id": 89914379, "body": "what error you are facing from your code??"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1532330015, "post_id": 51472392, "comment_id": 89914872, "body": "No error here. But: (1) Always check: <code>open my $fh, &#39;&gt;&gt;&#39;, $file or die &quot;Can&#39;t open $file: $!&quot;;</code>  (the <a href=\"https://perldoc.perl.org/perlvar.html#%24!\" rel=\"nofollow noreferrer\"><code>$!</code></a> is critical, that will show you the actual error if any)  (2) Do you have <code>use warnings;</code> at the beginning?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532330402, "post_id": 51472392, "comment_id": 89915055, "body": "How does it &quot;<i>fail to append</i>&quot; and how &quot;<i>intermittently</i>&quot; does it do that -- a line here or there in a file, or no append at all for a file among many?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1532330475, "post_id": 51472392, "comment_id": 89915101, "body": "Btw, you normally say <code>my ($v1, $v2,...)</code>, not <code>(my $v1, my $v2)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 1182626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f87ad54e4c42829667f510de408811ac?s=128&d=identicon&r=PG", "display_name": "Srikanth Yadake", "link": "https://stackoverflow.com/users/1182626/srikanth-yadake"}, "edited": false, "score": 0, "creation_date": 1532326629, "post_id": 51472558, "comment_id": 89913255, "body": "this throws message if the files do not open up?"}, {"owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "reply_to_user": {"reputation": 409, "user_id": 1182626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f87ad54e4c42829667f510de408811ac?s=128&d=identicon&r=PG", "display_name": "Srikanth Yadake", "link": "https://stackoverflow.com/users/1182626/srikanth-yadake"}, "edited": false, "score": 0, "creation_date": 1532326851, "post_id": 51472558, "comment_id": 89913354, "body": "@Sriyad what message do you have?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1532330186, "post_id": 51472558, "comment_id": 89914961, "body": "I&#39;d suggest to also show lexical filehandles and mention <code>use warnings;</code>, once you are at it"}], "tags": [], "owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "is_accepted": false, "score": 0, "last_activity_date": 1532326490, "creation_date": 1532326490, "answer_id": 51472558, "question_id": 51472392, "link": "https://stackoverflow.com/questions/51472392/append-files-fails-intermittently/51472558#51472558", "title": "Append files fails intermittently", "body": "<p>Try this version to get an error message:</p>\n\n<pre><code>open(FILE1,\"&gt;&gt;\", $file1) or die $!;\nopen(FILE2, \"&lt;\", $file2) or die $!;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 409, "user_id": 1182626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f87ad54e4c42829667f510de408811ac?s=128&d=identicon&r=PG", "display_name": "Srikanth Yadake", "link": "https://stackoverflow.com/users/1182626/srikanth-yadake"}, "edited": false, "score": 0, "creation_date": 1532334049, "post_id": 51473738, "comment_id": 89917013, "body": "thanks for this detailed explanation, will add this code."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": true, "score": 7, "last_activity_date": 1532340263, "last_edit_date": 1532340263, "creation_date": 1532331438, "answer_id": 51473738, "question_id": 51472392, "link": "https://stackoverflow.com/questions/51472392/append-files-fails-intermittently/51473738#51473738", "title": "Append files fails intermittently", "body": "<p>The primary issue with your code is that it includes a number of operations that might fail but you are not checking for errors, so in the event of a failure the program will silently try to carry on.</p>\n\n<p>The three functions in your code which could potentially fail are <code>open</code>, <code>print</code> and <code>close</code>.  In each case, the function will return a true value on success or in the event of failure, will return a false value and also will store the failure message in the special global variable <code>$!</code>.</p>\n\n<p>You have written:</p>\n\n<pre><code>open(FILE1,\"&gt;&gt;$file1\");\n</code></pre>\n\n<p>That would be better written as:</p>\n\n<pre><code>open(my $out, '&gt;&gt;', $file1) || die \"open(&gt;&gt;$file1): $!\";\n</code></pre>\n\n<p>Or you can use the lower precedence <code>or</code> operator and skip the parentheses:</p>\n\n<pre><code>open my $out, '&gt;&gt;', $file1 or die \"open(&gt;&gt;$file1): $!\";\n</code></pre>\n\n<p>You could simply call <code>die $!</code> but that will give you an error message like <code>Permission denied</code> and won't tell you which operation failed (although <code>die</code> will add the line number where the failure occurred).  Sometimes the failure is due to the fact that the variable containing the filename has something unexpected in it - so it's a good habit to print that out as well.</p>\n\n<p>Your code includes some rather old style so I replaced the old style <code>FILE1</code> global with the lexically scoped <code>$out</code>.  I also used the 3-argument form of open which is a better idea from a security perspective.</p>\n\n<p>The <code>print</code> calls could also fail (e.g.: if your disk filled up).  This is less likely and checking the return value of <code>print</code> is often overlooked.  The <code>close</code> call could also fail (e.g.: the output buffer might not get flushed until you close the filehandle and then something like a disk full condition could trigger a failure).</p>\n\n<p>Remembering to add <code>or die \"... $!\"</code> on the end of all your I/O function calls is a bit tedious, so a better approach is to add the <code>autodie</code> pragma to the boiler plate at the start of your script.  Then you can omit the explicit error checks and the <code>autodie</code> module will generate messages for you:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nmy($file1,  $file2) = @ARGV;\nopen my $out, '&gt;&gt;',  $file1;\nopen my $in,  '&lt;',   $file2;\nwhile (&lt;$in&gt;) {\n    print $out $_;\n}\n\nclose($in);\nclose($out); \n</code></pre>\n\n<p>A typical message from autodie might be:</p>\n\n<pre><code>Can't open '/etc/shadow' for reading: 'Permission denied' at ./ptst.pl line 8\n</code></pre>\n\n<p>This tells you which operation failed, what the arguments were and the reason for the failure.  So by using <code>autodie</code> you get great error messages for less effort.</p>\n"}], "owner": {"reputation": 409, "user_id": 1182626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f87ad54e4c42829667f510de408811ac?s=128&d=identicon&r=PG", "display_name": "Srikanth Yadake", "link": "https://stackoverflow.com/users/1182626/srikanth-yadake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 51473738, "answer_count": 2, "score": -1, "last_activity_date": 1532354436, "creation_date": 1532325691, "last_edit_date": 1532354436, "question_id": 51472392, "link": "https://stackoverflow.com/questions/51472392/append-files-fails-intermittently", "title": "Append files fails intermittently", "body": "<p>I am using the script below to append two files, and it intermittently fails to append with no error output.</p>\n\n<pre><code>(my $file1, my $file2) = @ARGV;\n\nopen(FILE1, \"&gt;&gt;$file1\");\nopen(FILE2, \"&lt;$file2\");\n\nwhile ( &lt;FILE2&gt; ) {\n    print FILE1 $_;\n}\n\nclose(FILE2);\nclose(FILE1); \n</code></pre>\n\n<p>Is there any issue with above code?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1532355101, "post_id": 51471541, "comment_id": 89930347, "body": "Don&#39;t use <code>printf</code> when there are no format specifiers. This isn&#39;t C, and <code>print</code> is fine."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1532321927, "post_id": 51471743, "comment_id": 89911806, "body": "Or <code>STDOUT-&gt;autoflush(1);</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1532354746, "post_id": 51471743, "comment_id": 89930105, "body": "Why <code>sleep 1 for 1..5</code> instead of <code>sleep 5</code>?"}, {"owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "edited": false, "score": 0, "creation_date": 1532358936, "post_id": 51471743, "comment_id": 89933015, "body": "perldoc -f sleep   ...On some older systems, it may sleep up to a full second less than what you requested, depending on how it counts seconds."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1532362860, "post_id": 51471743, "comment_id": 89935469, "body": "So you prefer to sleep for 0 to 5 seconds over sleeping for 4 to 5 seconds?"}, {"owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "edited": false, "score": 0, "creation_date": 1532364857, "post_id": 51471743, "comment_id": 89936464, "body": "You can add validation and sleep more or skip extra seconds ;) P.S. Okay, next time I will use sleep(5)"}], "tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": true, "score": 5, "last_activity_date": 1532355022, "last_edit_date": 1532355022, "creation_date": 1532321595, "answer_id": 51471743, "question_id": 51471541, "link": "https://stackoverflow.com/questions/51471541/printing-a-dot-in-perl-wont-come-on-the-screen-till-i-print-something-else/51471743#51471743", "title": "Printing a dot in Perl won&#39;t come on the screen till I print something else", "body": "<p>This is a buffering issue. Try setting autoflush: <code>$| = 1</code>;</p>\n\n<pre><code>{\n    $| = 1;\n    print \".\";\n}\nsleep 1 for 1..5;\n</code></pre>\n\n<p><code>STDOUT</code> is line-buffered, so <code>print \".\\n\"</code> works fine</p>\n\n<p>More information: <a href=\"https://perl.plover.com/FAQs/Buffering.html\" rel=\"noreferrer\">Suffering from buffering?</a></p>\n\n<p>Another useful answer: <a href=\"https://stackoverflow.com/questions/33812618/can-you-force-flush-output-in-perl\"><em>Can you force-flush output in Perl?</em></a></p>\n"}, {"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 3, "last_activity_date": 1532359268, "creation_date": 1532359268, "answer_id": 51482263, "question_id": 51471541, "link": "https://stackoverflow.com/questions/51471541/printing-a-dot-in-perl-wont-come-on-the-screen-till-i-print-something-else/51482263#51482263", "title": "Printing a dot in Perl won&#39;t come on the screen till I print something else", "body": "<p>Like other have said, it is a buffering issue. In recent enough versions of Perl you can do:</p>\n\n<pre><code> use IO::Handle\n STDOUT-&gt;autoflush()\n</code></pre>\n\n<p>I think this is cleaner than using the <code>$|</code> variable, even if it will work in the same way. </p>\n\n<p>The <code>use IO::Handle</code> is needed to attach the <code>autoflush</code> method to any future handle. And <code>autoflush</code> has its quirks in the sense that without passing a value it assumes <code>1</code> as written in the <code>perlvar</code> man page:</p>\n\n<blockquote>\n  <p>The methods each take an optional EXPR, which, if supplied, specifies the new value for the \"IO::Handle\" attribute in question.  If not supplied, most methods do nothing to the current value--except for \"autoflush()\", which will assume a 1 for you, just to be different.</p>\n</blockquote>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 51471743, "answer_count": 2, "score": 3, "last_activity_date": 1532359268, "creation_date": 1532319756, "question_id": 51471541, "link": "https://stackoverflow.com/questions/51471541/printing-a-dot-in-perl-wont-come-on-the-screen-till-i-print-something-else", "title": "Printing a dot in Perl won&#39;t come on the screen till I print something else", "body": "<p>This sounds crazy but nothing shows up on the screen when I use the line <code>printf(\".\")</code> until I print something else.  When I print out other info, from a simple line return to actual data all the backed up dots print out.  If I use <code>printf(\".\\n\")</code> then it works fine.</p>\n\n<p>Am doing this on an Ubuntu system if that makes a difference.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1532313385, "post_id": 51470879, "comment_id": 89910195, "body": "Hi, and welcome to Stack Overflow. Without more information, such as the exact error message in the error log, we&#39;re unlikely to be able to help. <a href=\"https://stackoverflow.com/help\">Please see the help center for the sorts of questions you can ask here</a>. The answers to <a href=\"https://stackoverflow.com/questions/2165022/how-can-i-troubleshoot-my-perl-cgi-script\">How can I troubleshoot my Perl CGI script?</a> might help."}, {"owner": {"reputation": 5, "user_id": 9592744, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "171124", "link": "https://stackoverflow.com/users/9592744/171124"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1532315227, "post_id": 51470879, "comment_id": 89910531, "body": "How can I get an error log?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1532320260, "post_id": 51470879, "comment_id": 89911439, "body": "That is entirely dependent on your server and its configuration, sorry."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9592744, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "171124", "link": "https://stackoverflow.com/users/9592744/171124"}, "edited": false, "score": 0, "creation_date": 1532368988, "post_id": 51473571, "comment_id": 89938495, "body": "Was able to fix it. Thank you."}], "tags": [], "owner": {"reputation": 809, "user_id": 2870624, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/XbhzQ.jpg?s=128&g=1", "display_name": "gpwr", "link": "https://stackoverflow.com/users/2870624/gpwr"}, "is_accepted": true, "score": 1, "last_activity_date": 1532330836, "creation_date": 1532330836, "answer_id": 51473571, "question_id": 51470879, "link": "https://stackoverflow.com/questions/51470879/edited-cgi-file-and-then-the-website-stopped/51473571#51473571", "title": "edited cgi file and then the website stopped", "body": "<p>If you really want to get to the bottom of the error, look at the error log file of the web server. It will state the exact reason for the error. If you don't understand the error then searching for it on Google will give you more details and probably the exact solution to the problem. Things never just stops working for no reason.</p>\n\n<p><strong>The answers below assume that your web site is hosted on a Linux based web host:</strong></p>\n\n<ol>\n<li><p>In my experience the most common error in this kind of scenario is that the <a href=\"https://wiki.archlinux.org/index.php/File_permissions_and_attributes\" rel=\"nofollow noreferrer\">file permission</a> of the file changed when you edited it or updated it. Perl files or cgi files need the permission setting of 755 (set to executable) to work. In other words the file needs to be set to be executable. If you are using FTP to update/transfer the file there will normally be an option in the FTP program to set the file permission setting to 755 on the server. (with your ftp program) If you are in a Linux terminal window you can use <a href=\"https://en.wikipedia.org/wiki/Chmod\" rel=\"nofollow noreferrer\">chmod</a> to set the permission setting of the file. Also double check that the directory holding this file has the permission setting of 755</p></li>\n<li><p>This is rare but happens: If you are using FTP to transfer the file to the server then it might be that it did not transfer properly. (Broken connections, sluggish internet, etc.) Try to re-transfer the file. You can also compare the file sizes of the one you have offline and the file on the server to make sure that they are the same.</p></li>\n<li><p>This answer assume that you are using windows (opened the file in Windows to edit) and have a Linux based server. If you used a text editor to open the file and your web host or web server is Linux based make sure that you saved the file in the Unix file format. There are many good or more advanced text editors out there that will enable you to read and save files in the unix file format. Get a good text editor like <a href=\"https://www.textpad.com/download/index.html\" rel=\"nofollow noreferrer\">Textpad</a> (free to try) to open the file and save it in the Unix file format.</p></li>\n</ol>\n\n<p>If you're new to Perl/CGI scripts then the best advice would probably be to make a backup of the file before you make changes to it. The 3 solutions above are probably some of the most common problems if there is nothing wrong with the code.</p>\n"}], "owner": {"reputation": 5, "user_id": 9592744, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "171124", "link": "https://stackoverflow.com/users/9592744/171124"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1532334246, "accepted_answer_id": 51473571, "answer_count": 1, "score": -1, "last_activity_date": 1532330836, "creation_date": 1532312640, "last_edit_date": 1532323139, "question_id": 51470879, "link": "https://stackoverflow.com/questions/51470879/edited-cgi-file-and-then-the-website-stopped", "closed_reason": "Needs more focus", "title": "edited cgi file and then the website stopped", "body": "<p>First of all, I am not an expert. </p>\n\n<ol>\n<li><p>I have been working with a website.</p></li>\n<li><p>I have looked at a cgi file:  </p>\n\n<pre><code>eval {\n\n  # configuration\n\n  $ui_title=\"Something\";\n  $ui_title_abbrev=\"Something\";\n  $ui_dblue=\"#400080\";\n  $ui_blue =\"#6464FF\";\n  $ui_lblue=\"#d0d9f4\";\n\n  ...\n}\n</code></pre></li>\n<li><p>I have changed a value of a parameter $ui_title from \"Something\" to \"Something_else\".</p></li>\n<li><p>Then the website stopped working. </p></li>\n<li><p>I have changed the value from \"Something_else\" to \"Something.\"</p></li>\n<li><p>But the website still do not go back to the previous status. </p></li>\n<li><p>Please advise the next step. </p></li>\n</ol>\n"}, {"tags": ["perl", "email-attachments", "mime"], "comments": [{"owner": {"reputation": 23, "user_id": 4516062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5370405e5ae980f85324e90e3f5915?s=128&d=identicon&r=PG&f=1", "display_name": "samash", "link": "https://stackoverflow.com/users/4516062/samash"}, "edited": false, "score": 0, "creation_date": 1532303719, "post_id": 51470157, "comment_id": 89908588, "body": "i stated the incorrect line number producing the error. It should be line 44. Below is the exact error i am getting.                                                                                                                                                                                                           open c:/temp: Permission denied  at send_attachment.pl line 44."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532307703, "post_id": 51470157, "comment_id": 89909181, "body": "Please <a href=\"https://stackoverflow.com/posts/51470157/edit\"><i>edit</i></a> your questions to correct any mistakes and to include additional information."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532307797, "post_id": 51470157, "comment_id": 89909195, "body": "The correct MIME type for XLSX data is<code>application&#47;vnd.openxmlformats-officedocument.spreadsheetm&zwnj;&#8203;l.sheet</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1532308743, "post_id": 51470157, "comment_id": 89909337, "body": "You <i>must always</i> add <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl program you write."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1532349115, "post_id": 51470157, "comment_id": 89926054, "body": "It&#39;s depressing to still see people using older modules like MIME::Lite and Net::SMTP when better tools like <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a> exist."}], "answers": [{"comments": [{"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 1, "creation_date": 1532304281, "post_id": 51470171, "comment_id": 89908660, "body": "I agree. The <code>Filename</code> field is just the name of the attachment and works as a hint for what name the recipient should use when saving the file (if/when the original filename is undesirable). <code>Path</code> should contain the actual name (and optionally path) of the file on the sender&#39;s computer.  Also, according to <code>MIME::Lite</code>&#39;s documentation, its use is discouraged in favour of other libraries. Examples given include <code>Email::MIME</code>, <code>MIME::Entity</code> and <code>Email::Sender</code>."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 3, "last_activity_date": 1532303956, "creation_date": 1532303956, "answer_id": 51470171, "question_id": 51470157, "link": "https://stackoverflow.com/questions/51470157/generating-an-email-with-an-excel-xlsx-attachment/51470171#51470171", "title": "Generating an email with an Excel XLSX attachment", "body": "<p>You're trying to attach the file <code>c:/temp</code>, which is (presumably) a directory, not a file. When MIME::Lite tries to open it as a file to read the contents,it fails with that error. You probably meant to pass <code>c:/temp/count.xlsx</code> as <code>Path</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 4516062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5370405e5ae980f85324e90e3f5915?s=128&d=identicon&r=PG&f=1", "display_name": "samash", "link": "https://stackoverflow.com/users/4516062/samash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532308828, "creation_date": 1532303638, "last_edit_date": 1532308828, "question_id": 51470157, "link": "https://stackoverflow.com/questions/51470157/generating-an-email-with-an-excel-xlsx-attachment", "title": "Generating an email with an Excel XLSX attachment", "body": "<p>The following Perl program gives an access denied error at line 44 when I try to print either the entire string or the encoded portion. If I print just the header using <code>$msg-&gt;print_header(\\*STDOUT)</code>.</p>\n\n<p>What I am trying to do is generate a text file that contains all the information that could be used in a telnet command to test a <em>Message Transfer Agent</em> (MTA) by sending an email with an attachment.</p>\n\n<pre><code>use MIME::Lite;\nuse Net::SMTP;\n\n### Add the sender, recipient and your SMTP mailhost\nmy $from_address = 'temp999 at gmail.com';\nmy $to_address   = 'test05@gmail.com';\nmy $mail_host    = 'gmail.com';\n\n### Adjust subject and body message\nmy $subject      = 'Testing script';\nmy $message_body = \"I am sending an email with an attachment\";\n\n### Adjust the filenames\nmy $my_file_xlsx   = 'c:/temp';\nmy $your_file_xlsx = 'count.xlsx';\n\n### Create the multipart container\n$msg = MIME::Lite-&gt;new(\n    From    =&gt; $from_address,\n    To      =&gt; $to_address,\n    Subject =&gt; $subject,\n    Type    =&gt; 'multipart/mixed'\n) or die \"Error creating multipart container: $!\\n\";\n\n### Add the text for the message body\n$msg-&gt;attach(\n    Type =&gt; 'TEXT',\n    Data =&gt; $message_body\n) or die \"Error adding the text message part: $!\\n\";\n\n### Adding an Excel file\n$msg-&gt;attach(\n    Type        =&gt; 'application/octet-stream',\n    Path        =&gt; $my_file_xlsx,\n    Filename    =&gt; $your_file_xlsx,\n    Disposition =&gt; 'attachment'\n) or die \"Error adding $file_xls: $!\\n\";\n\n### Send the Message\nMIME::Lite-&gt;send('smtp', $mail_host, Timeout =&gt; 60);\n#$msg-&gt;send;\n$msg-&gt;print(\\*STDOUT); # Write to a file handle ### LINE 44 ###\n#$msg-&gt;print_header(\\*STDOUT); # Write the header\n#$msg-&gt;print_body(\\*STDOUT); # Write the encoded body\n</code></pre>\n\n<p>I haven't found anything matching exactly what I am trying to do, but I might not be using the correct terminology when searching.</p>\n"}, {"tags": ["perl", "sorting", "cjk", "kanji"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532224304, "post_id": 51461358, "comment_id": 89892018, "body": "Re &quot;<i>Unknown PerlIO layer &#39;encoding&#39; at kanji-sort-1.5.pl line 8</i>&quot;, Something&#39;s really messed up with your Perl build"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532224376, "post_id": 51461358, "comment_id": 89892031, "body": "Also, the name of the language is &quot;Perl&quot;, not &quot;PERL&quot;. It&#39;s not an acronym"}, {"owner": {"reputation": 1207, "user_id": 644204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b56b03ae61d2ec4a3be22016d8a9f832?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/644204/bill"}, "edited": false, "score": 0, "creation_date": 1532238082, "post_id": 51461358, "comment_id": 89893703, "body": "I would reinstall Perl.  Definitely something is messed up.  Did you leave the older version on Perl installed?  Did you skip an installation step?"}], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 0, "last_activity_date": 1532240875, "creation_date": 1532240875, "answer_id": 51462591, "question_id": 51461358, "link": "https://stackoverflow.com/questions/51461358/sort-japanese-vocabulary-field-by-custom-kanji-index/51462591#51462591", "title": "Sort Japanese vocabulary field by custom kanji index", "body": "<p>No syntax errors in your code. Checked in Strawberry Perl (Windows) and on Linux. Fix your perl installation.</p>\n\n<p>Here how you can check syntax without running script:</p>\n\n<pre><code>perl -c test.pl\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10116604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb6199d589f26f2e619ff2ab340e2450?s=128&d=identicon&r=PG&f=1", "display_name": "user813036", "link": "https://stackoverflow.com/users/10116604/user813036"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532240875, "creation_date": 1532223228, "question_id": 51461358, "link": "https://stackoverflow.com/questions/51461358/sort-japanese-vocabulary-field-by-custom-kanji-index", "title": "Sort Japanese vocabulary field by custom kanji index", "body": "<p>I have been using a PERL program someone created 10+ years ago that inputs Japanese text (a vocabulary list) and a custom kanji index (such as RTK or KKLC or 2k1KO or Frequency), and outputs the Japanese text based on the largest kanji index appearing in that text. The idea is put words using kanji further down the index list further down the vocabulary list. In recent months with an update to Strawberry, this program stopped working and outputs the following errors: </p>\n\n<blockquote>\n  <p>Use of uninitialized value $mask in vec at\n  C:/Strawberry/perl/lib/warnings.pm line 377. Unknown PerlIO layer\n  'encoding' at kanji-sort-1.5.pl line 8 Unknown PerlIO layer \"encoding\"\n  at C:/Strawberry/perl/lib/open.pm line 120. Unknown PerlIO layer\n  \"encoding\" at C:/Strawberry/perl/lib/open.pm line 128. Unknown PerlIO\n  layer \"encoding\" at C:/Strawberry/perl/lib/open.pm line 129. Use of\n  uninitialized value $mask in vec at C:/Strawberry/perl/lib/warnings.pm\n  line 412. Use of uninitialized value $mask in bitwise and (&amp;) at\n  C:/Strawberry/perl/lib/warnings.pm line 424. Name\n  \"Getopt::Long::CallBack::OVERLOAD\" used only once: possible typo at\n  C:/Strawberry/perl/lib/overload.pm line 11. Unknown PerlIO layer\n  \"encoding\" at kanji-sort-1.5.pl line 21. readline() on closed\n  filehandle KANJI at kanji-sort-1.5.pl line 22.</p>\n</blockquote>\n\n<p>Is there anything I can do to make this program functional again?</p>\n\n<p>Here's the program. It seems simple enough with breaking vocabulary into characters and given them an value based on kanji in it with highest index score. :</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n# $ kanji-sort --kanji kanjiorder.txt --sentence-field 2 &lt; mydeck-exported.txt &gt; mydeck-toimport.txt\n# $Revision: 1.5 $ $Date: 2010/01/08 08:22:33 $\n# http://ichi2.net/anki/wiki/ContribFugounashi\n\nuse open qw( :std :encoding(UTF-8) );\nuse strict;\nuse Getopt::Long;\nuse utf8;\n\nmy $kanjifile;\nmy $sentence_field;\nGetOptions(\n    'sentence-field=i'=&gt; \\$sentence_field,\n    'kanji=s' =&gt; \\$kanjifile\n);\n\nmy %kanji;\nopen KANJI, \"&lt;$kanjifile\";\nwhile(&lt;KANJI&gt;){\n    chomp;\n    $_=(split /\\t/)[0];\n    if(exists $kanji{$_}){\n    print STDERR \"$0: warning: ignoring duplicate kanji: $_: $kanjifile: $.\\n\";\n    }else{\n    $kanji{$_}=$.;\n    }\n}\n\nmy @max;\nmy @lines;\nwhile(&lt;&gt;){\n    chomp;\n    my $i=$. - 1;\n    $lines[$i]=$_;\n    my $sentence=(split '\\t', $_)[$sentence_field];\n    my @chars = split //, $sentence;\n    $max[$i]=0;\n    foreach my $char (@chars){\n    if(($kanji{$char}) &amp;&amp; ($kanji{$char} &gt; $max[$i])){\n        $max[$i]=$kanji{$char};\n    }\n    }\n}\n\nmy @index = 0 .. (@max - 1);\nmy @sorted = sort {$max[$a] &lt;=&gt; $max[$b]} @index;\n\nmy $last=0;\nforeach my $i (@sorted){\n    my $step=$max[$i] - $last;\n    $last=$max[$i];\n    my $sentence=(split '\\t', $lines[$i])[$sentence_field];\n    my @chars = split //, $sentence;\n    print \"$lines[$i]\\t$max[$i]\\t$step\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1532242486, "post_id": 51458546, "comment_id": 89894375, "body": "The code you showed works fine. Please show a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> that we can use to reproduce the problem you&#39;re having."}], "answers": [{"comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1532295772, "post_id": 51458589, "comment_id": 89907360, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/176527/discussion-on-answer-by-ikegami-in-perl-how-to-dereference-temp-hash-passed-as\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1532194818, "creation_date": 1532194818, "answer_id": 51458589, "question_id": 51458546, "link": "https://stackoverflow.com/questions/51458546/in-perl-how-to-dereference-temp-hash-passed-as-argument/51458589#51458589", "title": "In Perl, how to dereference temp hash passed as argument?", "body": "<p>Your code works as is.</p>\n\n<pre><code>$ perl -e'\n    MyFunct({\n        Param1 =&gt; \"knob1\",\n        Param2 =&gt; \"knob2\"\n    });\n\n    # this part never seems to work...\n    sub MyFunct {\n        my %param = %{shift()};\n        my $p1 = $param{Param1};\n        print \"p1: $p1\\n\";\n    }\n'\np1: knob1\n</code></pre>\n\n<p>That said, you are needlessly making a copy of the referenced hash. The following is a better approach:</p>\n\n<pre><code>$ perl -e'\n    MyFunct({\n        Param1 =&gt; \"knob1\",\n        Param2 =&gt; \"knob2\"\n    });\n\n    sub MyFunct {\n        my $param = shift;\n        my $p1 = $param-&gt;{Param1};\n        print \"p1: $p1\\n\";\n    }\n'\np1: knob1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532208700, "post_id": 51460050, "comment_id": 89889807, "body": "If the intent is indeed to pass named parameters, this is also how I would do it. Requiring braces on the outside is a stupid waste of typing. I didn&#39;t get that impression however, especially given the other question the OP asked just before. (It wasn&#39;t me who downvoted.)"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532209395, "post_id": 51460050, "comment_id": 89889975, "body": "Ha.  I didn&#39;t suspect anything and I&#39;m not worried about the downvotes.  I imagine someone didn&#39;t like the question and so downvoted all answers(?), their account could be closed in a week :)  I had instituted a practice, which you might scoff at.  For each subroutine I do\u2026<code>my $args={@_}</code> for comprehension and consistency.  It might be less efficient, which I don&#39;t know how much of an impact that is, but it&#39;s helped."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532209444, "post_id": 51460050, "comment_id": 89889989, "body": "I don&#39;t think having a few extra dereferences is going to affect your code&#39;s performance."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532209661, "post_id": 51460050, "comment_id": 89890041, "body": "Well, if the great @ikegami says it&#39;s okay.. then I only need to add comments. <code># ikegami said it was okay https:&#47;&#47;stackoverflow.com&#47;a&#47;51460050&#47;183181</code> :P"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1532210028, "post_id": 51460050, "comment_id": 89890105, "body": "oh wow, it looks like they&#39;ve made some optimizations, because <code>$a-&gt;{x}</code> is the same number of ops as <code>$a{x}</code> since 5.22! The difference is now measured in CPU ops instead of Perl ops."}], "tags": [], "owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "is_accepted": false, "score": 2, "last_activity_date": 1532206528, "creation_date": 1532206528, "answer_id": 51460050, "question_id": 51458546, "link": "https://stackoverflow.com/questions/51458546/in-perl-how-to-dereference-temp-hash-passed-as-argument/51460050#51460050", "title": "In Perl, how to dereference temp hash passed as argument?", "body": "<p>In addition to @ikegami's answer, I'll add that perhaps you do not need a reference.  Passing in the values as key/value pairs will make it easy to convert the list into a hash, using the implicit argument array <code>@_</code>.</p>\n\n<p>The key/value pairs can be performed by using the arrow <code>=&gt;</code> delimiter, or in its place a standard comma <code>,</code> delimiter.  Below is an example using the arrow.</p>\n\n<h3><a href=\"https://ideone.com/NcowXI\" rel=\"nofollow noreferrer\">IDEOne Example</a></h3>\n\n<pre><code>#!/usr/bin/perl\n\nMyFunct( \n  Param1 =&gt; \"knob1\",\n  Param2 =&gt; \"knob2\"\n);\n\n# this part never seems to work...\nsub MyFunct {\n  my %param = @_;\n  my $p1 = $param{Param1};\n  local $\\ = \"\\n\";\n  print \"p1: $p1\";\n  print \"p2: $param{Param2}\";\n}\n</code></pre>\n"}], "owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1532238415, "creation_date": 1532194449, "last_edit_date": 1532238415, "question_id": 51458546, "link": "https://stackoverflow.com/questions/51458546/in-perl-how-to-dereference-temp-hash-passed-as-argument", "title": "In Perl, how to dereference temp hash passed as argument?", "body": "<p>In Perl, how to dereference temporary hash passed as argument to function?</p>\n\n<pre><code>MyFunct({ \n    Param1 =&gt; \"knob1\",\n    Param2 =&gt; \"knob2\"\n});\n\n# this part never seems to work...\nsub MyFunct {\n    my %param = %{shift()};\n    my $p1 = $param{Param1};\n    print \"p1: $p1\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1532197882, "post_id": 51458410, "comment_id": 89887337, "body": "See also <a href=\"https://perldoc.pl/perlreftut\" rel=\"nofollow noreferrer\"><code>perldoc perlreftut</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "is_accepted": false, "score": 1, "last_activity_date": 1532193939, "last_edit_date": 1532193939, "creation_date": 1532193534, "answer_id": 51458446, "question_id": 51458410, "link": "https://stackoverflow.com/questions/51458410/how-to-nest-array-inside-of-hash-initizer/51458446#51458446", "title": "How to nest array inside of hash initizer?", "body": "<p>You can do it with an array ref:</p>\n\n<pre><code>$hash = {\n    Param1 =&gt; \"value1\",\n    Param2 =&gt; \"value2\",\n    ParamArray =&gt; [\n        \"Array1\",\n        \"Array2\",\n    ]\n}\n</code></pre>\n\n<p>The square brackets are syntax to make an array ref literal. Also you need to use the scalar sigil for hash since <code>{}</code> makes a ref as well. In order to access the element you need to deref the hash and the nested array, like so:</p>\n\n<pre><code> @{$hash-&gt;{ParamArray}}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Didn't notice the hash ref.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1532198081, "last_edit_date": 1532198081, "creation_date": 1532196051, "answer_id": 51458729, "question_id": 51458410, "link": "https://stackoverflow.com/questions/51458410/how-to-nest-array-inside-of-hash-initizer/51458729#51458729", "title": "How to nest array inside of hash initizer?", "body": "<p>Hash values can only be scalars, not arrays. The trick is to use a reference to an array.</p>\n\n<pre><code>my @array = ( \"Array1\", \"Array2\" );\n\nmy %hash = (\n   Param1     =&gt; \"value1\",\n   Param2     =&gt; \"value2\",\n   ParamArray =&gt; \\@array,\n);\n</code></pre>\n\n<p>You can create an anonymous array using <code>[]</code>. It returns a reference to the array. The following is therefore equivalent to the above:</p>\n\n<pre><code>my %hash = (\n   Param1     =&gt; \"value1\",\n   Param2     =&gt; \"value2\",\n   ParamArray =&gt; [ \"Array1\", \"Array2\" ],\n);\n</code></pre>\n\n<p>In either case, you can use</p>\n\n<pre><code>say for @{ $hash{$ParamArray} };\n</code></pre>\n\n<p>I wouldn't use the following as it needlessly makes a copy of the array:</p>\n\n<pre><code>my @array = @{$hash{ParamArray}};\nsay $array[0];\n</code></pre>\n\n<p>Instead, I'd work with a reference to the array.</p>\n\n<pre><code>my $array_ref = $hash{ParamArray};\nsay $array_ref-&gt;[0];\n</code></pre>\n"}], "owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1532198081, "creation_date": 1532193201, "last_edit_date": 1532196143, "question_id": 51458410, "link": "https://stackoverflow.com/questions/51458410/how-to-nest-array-inside-of-hash-initizer", "title": "How to nest array inside of hash initizer?", "body": "<p>In Perl, Is possible to nest an array inside of a hash initializer all as one statement?  And how to address and access the nested Array inside of a hash later?  I know how to do this by breaking it up into separate statement... how to do it with only one initializer of the hash?  Example:</p>\n\n<p>Pseudo code:</p>\n\n<pre><code>%hash = {\n     Param1 =&gt; \"value1\",\n     Param2 =&gt; \"value2\",\n     ParamArray =&gt; @(\n         \"Array1\",\n         \"Array2\",\n     )\n}\n\n# Also, is how I would deref the nested array?\n@Array1 = @{$hash{ParamArray}};\n</code></pre>\n"}, {"tags": ["perl", "xpath"], "comments": [{"owner": {"reputation": 46893, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1532177142, "post_id": 51456129, "comment_id": 89881851, "body": "Share HTML sample for the same. Also share your current results. Note that your expression should work fine in XPath 1.0 as well"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532202990, "post_id": 51456129, "comment_id": 89888513, "body": "If you&#39;re not getting any error messages then it&#39;s very unlikely to be an XPath version issue. Something else is going on."}, {"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532243031, "post_id": 51456129, "comment_id": 89894478, "body": "I&#39;ve updated the post to include my same HTML and the results I&#39;m getting from my script. If it&#39;s not related to the XPath version then I&#39;m at a loss as to why Perl is giving me different results to Oxygen."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532247003, "post_id": 51456129, "comment_id": 89895209, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1532249585, "post_id": 51456129, "comment_id": 89895812, "body": "<code>Can&#39;t call method &quot;findnodes&quot; on an undefined value at - line 12.</code>"}, {"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532254778, "post_id": 51456129, "comment_id": 89896949, "body": "You&#39;ll get that if the script can&#39;t find &quot;testfile.html&quot;. I&#39;ve updated the script to show that you should specify the full path."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "edited": false, "score": 0, "creation_date": 1532244447, "post_id": 51456882, "comment_id": 89894726, "body": "Thanks for the suggestions. I&#39;ve updated my post to include my sample HTML and the results from my script. Sadly, using your XPaths didn&#39;t make a difference to the output."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1532195320, "last_edit_date": 1532195320, "creation_date": 1532182545, "answer_id": 51456882, "question_id": 51456129, "link": "https://stackoverflow.com/questions/51456129/perl-xmllibxml-xpath-2-0-to-xpath-1-0/51456882#51456882", "title": "Perl XML::LibXML XPath 2.0 to XPath 1.0", "body": "<p>Not only does that XPath conform to XPath 1.0, it works correctly in XML::LibXML.</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( say );\n\nuse XML::LibXML qw( );\n\nmy $doc = XML::LibXML-&gt;new-&gt;parse_html_string(&lt;&lt;'__EOS__');\n&lt;html&gt;\n  &lt;h2&gt;&lt;a id=\"start\"&gt;Foo&lt;/a&gt;&lt;/h2&gt;\n  &lt;div id=\"pre1\"&gt;&lt;img&gt;&lt;/div&gt;\n  &lt;div id=\"pre2\"&gt;&lt;img&gt;&lt;/div&gt;\n  &lt;div id=\"end\"&gt;&lt;img&gt;&lt;/div&gt;\n  &lt;div id=\"post1\"&gt;&lt;img&gt;&lt;/div&gt;\n  &lt;div id=\"post2\"&gt;&lt;img&gt;&lt;/div&gt;\n&lt;/html&gt;\n__EOS__\n\n# Select all the siblings of the starting h2 element that follow\n# it and don't have &lt;div id=\"end\"/&gt; as a preceding sibling.\nfor my $node ($doc-&gt;findnodes('//h2[a[@id=\"start\"]]/following-sibling::*[not(preceding-sibling::*[self::div[@id=\"end\"]])]')) {\n   my $name = $node-&gt;nodeName;\n   my $id   = $node-&gt;getAttribute('id');\n   say $id ? sprintf(\"%s#%s\", $name, $id) : $name;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>div#pre1\ndiv#pre2\ndiv#end\n</code></pre>\n\n<hr>\n\n<p>By the way,</p>\n\n<pre><code>//h2[a[@id=\"start\"]]/following-sibling::*[not(preceding-sibling::*[self::div[@id=\"end\"]])]\n</code></pre>\n\n<p>is a weird way of writing</p>\n\n<pre><code>//h2[a[@id=\"start\"]]/following-sibling::*[not(preceding-sibling::div[@id=\"end\"])]\n</code></pre>\n\n<p>Maybe you wanted</p>\n\n<pre><code>//h2[a[@id=\"start\"]]/following-sibling::*[not(self::div[@id=\"end\"] or preceding-sibling::div[@id=\"end\"])]\n</code></pre>\n\n<p>That would produce the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>div#pre1\ndiv#pre2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "is_accepted": false, "score": 1, "last_activity_date": 1532283710, "creation_date": 1532283710, "answer_id": 51468025, "question_id": 51456129, "link": "https://stackoverflow.com/questions/51456129/perl-xmllibxml-xpath-2-0-to-xpath-1-0/51468025#51468025", "title": "Perl XML::LibXML XPath 2.0 to XPath 1.0", "body": "<p>I managed to get to the bottom of what was causing the problem: Every sibling found by the XPath is handled by LibXML as a separate node, so I needed to assign them to an array, not a simple scalar as I was doing. The not-weird XPath suggested by ikegami was also better than the one I was using, as mine was doubling up everything in the output. </p>\n\n<p>Here's the code that produces the correct results:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse XML::LibXML qw( );\n\nmy $encoding_index_file = q(C:\\path\\to\\testfile.html);\nmy $source_doc = XML::LibXML-&gt;load_html(\nlocation        =&gt; $encoding_index_file,\nrecover         =&gt; 1,\nsuppress_errors =&gt; 1,\n);\n\nmy $contents = \"\";\nmy @nodes = $source_doc-&gt;findnodes('//h2[a[@id=\"start\"]]/following-sibling::[not(preceding-sibling::div[@id=\"end\"])]');\nforeach my $node (@nodes) {\n  my ($str) = $node-&gt;toString;\n  $contents = $contents . $str; \n}\nprint $contents;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10114785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888cfa0aa9b506982b43df80f0b7cce9?s=128&d=identicon&r=PG&f=1", "display_name": "dgate", "link": "https://stackoverflow.com/users/10114785/dgate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1532283710, "creation_date": 1532176575, "last_edit_date": 1532254841, "question_id": 51456129, "link": "https://stackoverflow.com/questions/51456129/perl-xmllibxml-xpath-2-0-to-xpath-1-0", "title": "Perl XML::LibXML XPath 2.0 to XPath 1.0", "body": "<p>I have the following XPath that works fine in XPath 2.0 (as tested in OxygenXML):</p>\n\n<pre><code>//h2[a[@id='start']]/following-sibling::*[not(preceding-sibling::*[self::div[@id='end']])]\n</code></pre>\n\n<p>but I'm getting different results when I use it with LibXML findnodes():</p>\n\n<pre><code>my @nodes = $source_doc-&gt;findnodes('//h2[a[@id=\"start\"]]/following-sibling::*[not(preceding-sibling::*[self::div[@id=\"end\"]])]');\n</code></pre>\n\n<p>After checking the LibXML <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/XPathExpression.pod\" rel=\"nofollow noreferrer\">documentation</a>, it seems that LibXML supports XPath 1.0 only. How would I go about changing my XPath to something that works with XPath 1.0? Is it even possible to create a compatible path like this in XPath 1.0?</p>\n\n<p>Since I've been asked to provide, I'm updating the post to include my sample data and the output I'm getting when I run the XPath I entered above:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"insn.css\" /&gt;\n&lt;meta name=\"generator\" content=\"encodingindex.xsl\" /&gt;\n&lt;title&gt;Index by Encoding&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;&lt;hr /&gt;&lt;h1 class=\"topleveltable\"&gt;&lt;a name=\"top\" id=\"top\"&gt;&lt;/a&gt;Top-level encodings&lt;/h1&gt;&lt;div\n class=\"regdiagram-32\"&gt;&lt;/div&gt;&lt;hr /&gt;&lt;h2&gt;&lt;a name=\"dp\" id=\"start\"&gt;&lt;/a&gt;Data-processing and\n miscellaneous instructions&lt;/h2&gt;&lt;div class=\"decode_navigation\"&gt;\n &lt;p&gt;These instructions are under the &lt;a href=\"#top\"&gt;top-level&lt;/a&gt;.&lt;/p&gt;\n &lt;/div&gt;&lt;div class=\"regdiagram-32\"&gt;\n &lt;table class=\"regdiagram\"&gt;\n &lt;thead&gt;\n    &lt;tr&gt;\n        &lt;td&gt;31&lt;/td&gt;\n        &lt;td&gt;0&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;tr class=\"firstrow\"&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;!= 1111&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;00&lt;/td&gt;\n        &lt;td class=\"lr\"&gt;op0&lt;/td&gt;\n        &lt;td colspan=\"5\" class=\"lr\"&gt;op1&lt;/td&gt;\n        &lt;td colspan=\"12\" class=\"lr\"&gt;&lt;/td&gt;\n        &lt;td class=\"lr\"&gt;op2&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;op3&lt;/td&gt;\n        &lt;td class=\"lr\"&gt;op4&lt;/td&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;div class=\"instructiontable\"&gt;\n  &lt;table class=\"instructiontable\"&gt;\n    &lt;tr&gt;\n      &lt;th colspan=\"5\"&gt;Decode fields&lt;/th&gt;\n      &lt;th rowspan=\"2\"&gt; Instruction details &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th class=\"bitfields\"&gt;op0&lt;/th&gt;\n      &lt;th class=\"bitfields\"&gt;op1&lt;/th&gt;\n      &lt;th class=\"bitfields\"&gt;op2&lt;/th&gt;\n      &lt;th class=\"bitfields\"&gt;op3&lt;/th&gt;\n      &lt;th class=\"bitfields\"&gt;op4&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 0 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 1 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; != 00 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 1 &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"#xldst\"&gt;Extra load/store&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 0 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 0xxxx &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 1 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 00 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 1 &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"#mul_word\"&gt;Multiply and Accumulate&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;hr /&gt;&lt;h2&gt;&lt;a name=\"sync\" id=\"sync\"&gt;&lt;/a&gt;Synchronization primitives and\n  Load-Acquire/Store-Release&lt;/h2&gt;&lt;div class=\"decode_navigation\"&gt;\n  &lt;p&gt;These instructions are under &lt;a href=\"#dp\"&gt;Data-processing and miscellaneous\n      instructions&lt;/a&gt;.&lt;/p&gt;\n&lt;/div&gt;&lt;div class=\"regdiagram-32\"&gt;\n  &lt;table class=\"regdiagram\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;td&gt;31&lt;/td&gt;\n        &lt;td&gt;0&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;tr class=\"firstrow\"&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;!= 1111&lt;/td&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;0001&lt;/td&gt;\n        &lt;td class=\"lr\"&gt;op0&lt;/td&gt;\n        &lt;td colspan=\"11\" class=\"lr\"&gt;&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;11&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;&lt;/td&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;1001&lt;/td&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;hr /&gt;&lt;hr /&gt;&lt;h2&gt;&lt;a name=\"dpmisc\" id=\"dpmisc\"&gt;&lt;/a&gt;Miscellaneous&lt;/h2&gt;&lt;div\n  class=\"decode_navigation\"&gt;\n  &lt;p&gt;These instructions are under &lt;a href=\"#dp\"&gt;Data-processing and miscellaneous\n      instructions&lt;/a&gt;.&lt;/p&gt;\n&lt;/div&gt;&lt;div class=\"regdiagram-32\"&gt;\n  &lt;table class=\"regdiagram\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;td&gt;31&lt;/td&gt;\n        &lt;td&gt;30&lt;/td&gt;\n        &lt;td&gt;0&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;tr class=\"firstrow\"&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;!= 1111&lt;/td&gt;\n        &lt;td colspan=\"5\" class=\"lr\"&gt;00010&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;op0&lt;/td&gt;\n        &lt;td colspan=\"1\" class=\"lr\"&gt;0&lt;/td&gt;\n        &lt;td colspan=\"12\" class=\"lr\"&gt;&lt;/td&gt;\n        &lt;td colspan=\"1\" class=\"lr\"&gt;0&lt;/td&gt;\n        &lt;td colspan=\"3\" class=\"lr\"&gt;op1&lt;/td&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;div class=\"instructiontable\"&gt;\n  &lt;table class=\"instructiontable\"&gt;\n    &lt;tr&gt;\n      &lt;th colspan=\"2\"&gt;Decode fields&lt;/th&gt;\n      &lt;th rowspan=\"2\"&gt; Instruction details &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th class=\"bitfields\"&gt;op0&lt;/th&gt;\n      &lt;th class=\"bitfields\"&gt;op1&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 01 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 010 &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"bxj.html\"&gt;BXJ&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 01 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 011 &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"blx_r.html\"&gt;BLX (register)&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;div class=\"decode_navigation\"&gt;\n  &lt;p&gt;These instructions are under &lt;a href=\"#dp\"&gt;Data-processing and miscellaneous\n      instructions&lt;/a&gt;.&lt;/p&gt;\n&lt;/div&gt;&lt;div class=\"regdiagram-32\"&gt;\n  &lt;table class=\"regdiagram\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;td&gt;31&lt;/td&gt;\n        &lt;td&gt;30&lt;/td&gt;\n        &lt;td&gt;0&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;tr class=\"firstrow\"&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;!= 1111&lt;/td&gt;\n        &lt;td colspan=\"3\" class=\"lr\"&gt;000&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;op0&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;&lt;/td&gt;\n        &lt;td class=\"lr\"&gt;op1&lt;/td&gt;\n        &lt;td colspan=\"15\" class=\"lr\"&gt;&lt;/td&gt;\n        &lt;td colspan=\"1\" class=\"lr\"&gt;0&lt;/td&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;div class=\"decode_constraints\"&gt;\n  &lt;p&gt; The following constraints also apply to this encoding: op0:op1 != 100 &lt;/p&gt;\n&lt;/div&gt;&lt;div class=\"instructiontable\"&gt;\n  &lt;table class=\"instructiontable\"&gt;\n    &lt;tr&gt;\n      &lt;th colspan=\"2\"&gt;Decode fields&lt;/th&gt;\n      &lt;th rowspan=\"2\"&gt; Instruction details &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th class=\"bitfields\"&gt;op0&lt;/th&gt;\n      &lt;th class=\"bitfields\"&gt;op1&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 0x &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"#intdp3reg_immsh\"&gt;Integer Data Processing (three register,\n          immediate shift)&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 10 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 1 &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"#intdp2reg_immsh\"&gt;Integer Test and Compare (two register,\n          immediate shift)&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 11 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"#logic3reg_immsh\"&gt;Logical Arithmetic (three register,\n          immediate shift)&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;hr /&gt;&lt;div class=\"iclass\" id=\"intdp3reg_immsh\"&gt;\n  &lt;a name=\"intdp3reg_immsh\" id=\"intdp3reg_immsh\"&gt;&lt;/a&gt;\n  &lt;h3 class=\"iclass\"&gt;Integer Data Processing (three register, immediate shift)&lt;/h3&gt;\n  &lt;p&gt;These instructions are under &lt;a href=\"#dpregis\"&gt;Data-processing register (immediate\n      shift)&lt;/a&gt;.&lt;/p&gt;\n  &lt;div class=\"regdiagram-32\"&gt;\n    &lt;table class=\"regdiagram\"&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;td&gt;31&lt;/td&gt;\n          &lt;td&gt;0&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n        &lt;tr class=\"firstrow\"&gt;\n          &lt;td colspan=\"4\" class=\"lr\"&gt;!= 1111&lt;/td&gt;\n          &lt;td class=\"l\"&gt;0&lt;/td&gt;\n          &lt;td&gt;0&lt;/td&gt;\n          &lt;td&gt;0&lt;/td&gt;\n          &lt;td class=\"r\"&gt;0&lt;/td&gt;\n          &lt;td colspan=\"3\" class=\"lr\"&gt;opc&lt;/td&gt;\n          &lt;td class=\"lr\"&gt;S&lt;/td&gt;\n          &lt;td colspan=\"4\" class=\"lr\"&gt;Rn&lt;/td&gt;\n          &lt;td colspan=\"4\" class=\"lr\"&gt;Rd&lt;/td&gt;\n          &lt;td colspan=\"5\" class=\"lr\"&gt;imm5&lt;/td&gt;\n          &lt;td colspan=\"2\" class=\"lr\"&gt;type&lt;/td&gt;\n          &lt;td class=\"lr\"&gt;0&lt;/td&gt;\n          &lt;td colspan=\"4\" class=\"lr\"&gt;Rm&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"secondrow\"&gt;\n          &lt;td colspan=\"4\" class=\"droppedname\"&gt;cond&lt;/td&gt;\n          &lt;td colspan=\"4\"&gt;&lt;/td&gt;\n          &lt;td colspan=\"3\"&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;/td&gt;\n          &lt;td colspan=\"4\"&gt;&lt;/td&gt;\n          &lt;td colspan=\"4\"&gt;&lt;/td&gt;\n          &lt;td colspan=\"5\"&gt;&lt;/td&gt;\n          &lt;td colspan=\"2\"&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;/td&gt;\n          &lt;td colspan=\"4\"&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n  &lt;/div&gt;\n  &lt;div class=\"decode_constraints\"&gt;\n    &lt;p&gt; The following constraints also apply to this encoding: cond != 1111 &amp;amp;&amp;amp; cond !=\n      1111 &lt;/p&gt;\n  &lt;/div&gt;\n  &lt;div class=\"instructiontable\"&gt;\n    &lt;table class=\"instructiontable\" id=\"intdp3reg_immsh\"&gt;\n\n\n\n\n\n      &lt;thead class=\"instructiontable\"&gt;\n        &lt;tr&gt;\n          &lt;th class=\"bitfields-heading\" rowspan=\"\" colspan=\"3\"&gt;Decode fields&lt;/th&gt;\n          &lt;th class=\"iformname\" rowspan=\"2\" colspan=\"\"&gt; Instruction Details &lt;/th&gt;\n\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;th class=\"bitfields\" rowspan=\"\" colspan=\"\"&gt;opc&lt;/th&gt;\n          &lt;th class=\"bitfields\" rowspan=\"\" colspan=\"\"&gt;S&lt;/th&gt;\n          &lt;th class=\"bitfields\" rowspan=\"\" colspan=\"\"&gt;Rn&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n        &lt;tr&gt;\n          &lt;td class=\"bitfield\"&gt;000&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;&lt;/td&gt;\n          &lt;td class=\"iformname\"&gt;&lt;a name=\"AND_r\" href=\"and_r.html\" id=\"AND_r\"&gt;AND, ANDS\n              (register)&lt;/a&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td class=\"bitfield\"&gt;001&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;&lt;/td&gt;\n          &lt;td class=\"iformname\"&gt;&lt;a name=\"EOR_r\" href=\"eor_r.html\" id=\"EOR_r\"&gt;EOR, EORS\n              (register)&lt;/a&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n  &lt;/div&gt;\n&lt;/div&gt;&lt;div class=\"decode_constraints\"&gt;\n  &lt;p&gt; The following constraints also apply to this encoding: op0:op1 != 100 &lt;/p&gt;\n&lt;/div&gt;&lt;div class=\"instructiontable\"&gt;\n  &lt;table class=\"instructiontable\"&gt;\n    &lt;tr&gt;\n      &lt;th colspan=\"2\"&gt;Decode fields&lt;/th&gt;\n      &lt;th rowspan=\"2\"&gt; Instruction details &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th class=\"bitfields\"&gt;op0&lt;/th&gt;\n      &lt;th class=\"bitfields\"&gt;op1&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 0x &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"#intdp3reg_regsh\"&gt;Integer Data Processing (three register,\n          register shift)&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 10 &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; 1 &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"#intdp2reg_regsh\"&gt;Integer Test and Compare (two register,\n          register shift)&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;hr /&gt;&lt;h2&gt;&lt;a name=\"dpimm\" id=\"dpimm\"&gt;&lt;/a&gt;Data-processing immediate&lt;/h2&gt;&lt;div\n  class=\"decode_navigation\"&gt;\n  &lt;p&gt;These instructions are under &lt;a href=\"#dp\"&gt;Data-processing and miscellaneous\n      instructions&lt;/a&gt;.&lt;/p&gt;\n&lt;/div&gt;&lt;div class=\"regdiagram-32\"&gt;\n  &lt;table class=\"regdiagram\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;td&gt;31&lt;/td&gt;\n        &lt;td&gt;0&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;tr class=\"firstrow\"&gt;\n        &lt;td colspan=\"4\" class=\"lr\"&gt;!= 1111&lt;/td&gt;\n        &lt;td colspan=\"3\" class=\"lr\"&gt;001&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;op0&lt;/td&gt;\n        &lt;td colspan=\"1\" class=\"lr\"&gt;&lt;/td&gt;\n        &lt;td colspan=\"2\" class=\"lr\"&gt;op1&lt;/td&gt;\n        &lt;td colspan=\"20\" class=\"lr\"&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;div class=\"instructiontable\"&gt;\n  &lt;table class=\"instructiontable\"&gt;\n    &lt;tr&gt;\n      &lt;th colspan=\"2\"&gt;Decode fields&lt;/th&gt;\n      &lt;th rowspan=\"2\"&gt; Instruction details &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th class=\"bitfields\"&gt;op0&lt;/th&gt;\n      &lt;th class=\"bitfields\"&gt;op1&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"instructiontable\"&gt;\n      &lt;td class=\"bitfield\"&gt; 0x &lt;/td&gt;\n      &lt;td class=\"bitfield\"&gt; &lt;/td&gt;\n      &lt;td class=\"iformname\"&gt;&lt;a href=\"#intdp2reg_imm\"&gt;Integer Data Processing (two register and\n          immediate)&lt;/a&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/table&gt;\n&lt;/div&gt;&lt;hr /&gt;&lt;div class=\"iclass\" id=\"intdp2reg_imm\"&gt;\n  &lt;a name=\"intdp2reg_imm\" id=\"intdp2reg_imm\"&gt;&lt;/a&gt;\n&lt;/div&gt;&lt;div class=\"iclass\" id=\"end\"&gt;\n  &lt;a name=\"ldstimm\" id=\"ldstimm\"&gt;&lt;/a&gt;\n  &lt;h3 class=\"iclass\"&gt;Load/Store Word, Unsigned Byte (immediate, literal)&lt;/h3&gt;\n  &lt;div class=\"regdiagram-32\"&gt;\n    &lt;table class=\"regdiagram\"&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;td&gt;31&lt;/td&gt;\n          &lt;td&gt;0&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n        &lt;tr class=\"firstrow\"&gt;\n          &lt;td colspan=\"4\" class=\"lr\"&gt;!= 1111&lt;/td&gt;\n          &lt;td class=\"l\"&gt;0&lt;/td&gt;\n          &lt;td&gt;1&lt;/td&gt;\n          &lt;td class=\"r\"&gt;0&lt;/td&gt;\n          &lt;td class=\"lr\"&gt;P&lt;/td&gt;\n          &lt;td class=\"lr\"&gt;U&lt;/td&gt;\n          &lt;td class=\"lr\"&gt;o2&lt;/td&gt;\n          &lt;td class=\"lr\"&gt;W&lt;/td&gt;\n          &lt;td class=\"lr\"&gt;o1&lt;/td&gt;\n          &lt;td colspan=\"4\" class=\"lr\"&gt;Rn&lt;/td&gt;\n          &lt;td colspan=\"4\" class=\"lr\"&gt;Rt&lt;/td&gt;\n          &lt;td colspan=\"12\" class=\"lr\"&gt;imm12&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"secondrow\"&gt;\n          &lt;td colspan=\"4\" class=\"droppedname\"&gt;cond&lt;/td&gt;\n          &lt;td colspan=\"3\"&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;/td&gt;\n          &lt;td colspan=\"4\"&gt;&lt;/td&gt;\n          &lt;td colspan=\"4\"&gt;&lt;/td&gt;\n          &lt;td colspan=\"12\"&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n  &lt;/div&gt;\n  &lt;div class=\"decode_constraints\"&gt;\n    &lt;p&gt; The following constraints also apply to this encoding: cond != 1111 &amp;amp;&amp;amp; cond !=\n      1111 &lt;/p&gt;\n  &lt;/div&gt;\n  &lt;div class=\"instructiontable\"&gt;\n    &lt;table class=\"instructiontable\" id=\"ldstimm\"&gt;\n\n\n\n\n\n\n      &lt;thead class=\"instructiontable\"&gt;\n        &lt;tr&gt;\n          &lt;th class=\"bitfields-heading\" rowspan=\"\" colspan=\"4\"&gt;Decode fields&lt;/th&gt;\n          &lt;th class=\"iformname\" rowspan=\"2\" colspan=\"\"&gt; Instruction Details &lt;/th&gt;\n\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;th class=\"bitfields\" rowspan=\"\" colspan=\"\"&gt;P:W&lt;/th&gt;\n          &lt;th class=\"bitfields\" rowspan=\"\" colspan=\"\"&gt;o2&lt;/th&gt;\n          &lt;th class=\"bitfields\" rowspan=\"\" colspan=\"\"&gt;o1&lt;/th&gt;\n          &lt;th class=\"bitfields\" rowspan=\"\" colspan=\"\"&gt;Rn&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n        &lt;tr&gt;\n          &lt;td class=\"bitfield\"&gt;!= 01&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;0&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;1&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;1111&lt;/td&gt;\n          &lt;td class=\"iformname\"&gt;&lt;a name=\"LDR_l\" href=\"ldr_l.html\" id=\"LDR_l\"&gt;LDR\n            (literal)&lt;/a&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td class=\"bitfield\"&gt;!= 01&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;1&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;1&lt;/td&gt;\n          &lt;td class=\"bitfield\"&gt;1111&lt;/td&gt;\n          &lt;td class=\"iformname\"&gt;&lt;a name=\"LDRB_l\" href=\"ldrb_l.html\" id=\"LDRB_l\"&gt;LDRB\n              (literal)&lt;/a&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n  &lt;/div&gt;\n&lt;/div&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Here's the output using the XPath given above:</p>\n\n<pre><code>&lt;div class=\"decode_navigation\"&gt;\n  &lt;p&gt;These instructions are under the &lt;a href=\"#top\"&gt;top-level&lt;/a&gt;.&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Just to clarify, the output should include <em>all</em> of the divs in the sample HTML, about 400 lines in total.</p>\n\n<p>I've also tried the XPath suggestions I've been given below, but they produced the same results. </p>\n\n<p>Edit: Here's my code:</p>\n\n<pre><code>use strict; \nuse warnings; \nuse feature 'say'; \nuse XML::LibXML; \n\nmy $encoding_index_file = q(C:\\path\\to\\testfile.html);\nmy $source_doc = XML::LibXML-&gt;load_html(\nlocation        =&gt; $encoding_index_file,\nrecover         =&gt; 1,\nsuppress_errors =&gt; 1,\n);\nmy ($node) = $source_doc-&gt;findnodes('//h2[a[@id=\"start\"]]/following-sibling::*[not(preceding-sibling::div[@id=\"end\"])]');\nsay $node-&gt;toString;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532183024, "post_id": 51452469, "comment_id": 89883381, "body": "There&#39;s usua;;y no harm in passing extra args, in which case <code>$hash_ref-&gt;{$param}-&gt;($other1, $other2, $other3);</code> would work fine"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5439860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf77f6ecd56af5aa8316efc4bc03e25b?s=128&d=identicon&r=PG&f=1", "display_name": "nokdoo", "link": "https://stackoverflow.com/users/5439860/nokdoo"}, "edited": false, "score": 0, "creation_date": 1532153663, "post_id": 51452664, "comment_id": 89876307, "body": "funcRun is to read a file, including while statement. For each line, I have to check whether it is matched with some regexes and if mathched, run actions(hash values). the &#39;other1,2,3&#39; variables, sometimes it can be a &#39;group words of matched&#39;, sometimes &#39;line of file&#39;, sometimes &#39;number of line&#39;"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 33, "user_id": 5439860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf77f6ecd56af5aa8316efc4bc03e25b?s=128&d=identicon&r=PG&f=1", "display_name": "nokdoo", "link": "https://stackoverflow.com/users/5439860/nokdoo"}, "edited": false, "score": 0, "creation_date": 1532251007, "post_id": 51452664, "comment_id": 89896105, "body": "@nokdoo  I added a few other possible ways.  The last one may be what you were looking for."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1595835370, "last_edit_date": 1595835370, "creation_date": 1532145507, "answer_id": 51452664, "question_id": 51452469, "link": "https://stackoverflow.com/questions/51452469/how-to-change-if-else-to-hash-function-perl/51452664#51452664", "title": "How to change if/else to hash function? perl", "body": "<p><em>Updated following a clarification.  The very last code segment may be exactly what is asked for.</em></p>\n<hr />\n<p>The design where a parameter decides what argument set to use from a list generated at runtime is what is giving you trouble; it's complicated. Not knowing about the actual problem I don't know what else to offer though (other than guesses). Perhaps clarify the use of this?</p>\n<p>Having said that, one way to complete what you want is to store a specification of what  arguments go with a function along with the function name in the hashref; another would be to have a separate structure with argument sets for each parameter.</p>\n<p>For example</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $dispatch = { \n    'a' =&gt; { name =&gt; \\&amp;funcA, lastidx =&gt; 0 },\n    'b' =&gt; { name =&gt; \\&amp;funcB, lastidx =&gt; 1 },\n    'c' =&gt; { name =&gt; \\&amp;funcC, lastidx =&gt; 2 } \n};\n\nsub funcRun {\n    my ($param) = @_; \n    my @args = qw(one two three);\n\n    my $func    = $dispatch-&gt;{$param}{name};\n    my $lastidx = $dispatch-&gt;{$param}{lastidx};\n\n    $func-&gt;( @args[0..$lastidx] );\n}    \nsub funcA { say &quot;@_&quot; }\nsub funcB { say &quot;@_&quot; }\nsub funcC { say &quot;@_&quot; }\n\nfuncRun($_)  for qw(a b c);\n</code></pre>\n<p>Prints</p>\n<pre>\none\none two\none two three\n</pre>\n<p>If you really need to pick arguments positionally from a list then use an array.</p>\n<p>However, I suggest that you clarify what this is for so that we can offer a simpler design.</p>\n<hr />\n<p>Following an explanation in a comment, a property I thought was accidental may in fact help.</p>\n<p>If the function <code>funcA</code> indeed takes only the first argument, <code>funcB</code> the first two and <code>funcC</code> all three (from a list built at runtime), then you can nicely pass all to all of them</p>\n<pre><code>$func-&gt;( @args );\n\nsub funcA {\n    my ($A) = @_;  # arguments other than the first are discarded\n    ...\n}\n</code></pre>\n<p>Each function takes what it needs and the rest of the arguments are discarded.</p>\n<p>Further, if functions in any way know which of a given list of arguments to take then again you can simply pass all of them.  Then they can pick their arguments either positionally</p>\n<pre><code>sub funcB {\n    my ($A, undef, $B) = @_;  # if it needs first and third\n    ...\n}\n</code></pre>\n<p>or by a named key</p>\n<pre><code># Work out what arguments are for which function\nmy $args = { for_A =&gt; ..., for_B =&gt; ..., for_C =&gt; ... };\n...\n$func-&gt;( $args );\n\nsub funcA {\n    my ($args) = @_\n    my $A = $args-&gt;{for_A};\n    ...\n}\n</code></pre>\n<p>where now arguments need be stored in a hash.</p>\n<p>Finally and best, this can all be worked out ahead of the call</p>\n<pre><code>my $dispatch = { a =&gt; \\&amp;funcA, b =&gt; \\&amp;funcB, c =&gt; \\&amp;funcC };\n\nsub funcRun {\n    my ($param) = @_;\n    # Work out arguments for functions\n    my $args = { a =&gt; ..., b =&gt; ..., c =&gt; ... };      \n\n    $dispatch-&gt;{$param}-&gt;( $args-&gt;{$param} );\n}\n# subs funcA, funcB, funcC are the same   \n\nfuncRun($_)  for qw(a b c);\n</code></pre>\n<p>what requires minimal changes to your code (just store arguments in a hash).</p>\n<p>Here neither the functions nor the dispatch table need knowledge of the possible argument lists, what is all resolved in <code>funcRun</code>.  This avoids entangling functions with outside code.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1532170488, "creation_date": 1532170488, "answer_id": 51455361, "question_id": 51452469, "link": "https://stackoverflow.com/questions/51452469/how-to-change-if-else-to-hash-function-perl/51455361#51455361", "title": "How to change if/else to hash function? perl", "body": "<p>Your problem stems from the fact that you're passing in a selection of values from arbitrary, unrelated variables. The solution, therefore, is to put all the data you might want to pass to you subroutines in a single data structure and define a mechanism for extracting the correct data for each call. You already have a solution which uses an array for this, but I think it's slightly easier to understand in a hash.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nsub funcA{\n    my ($A) = @_;\n    say $A;\n}\nsub funcB{\n    my ($A, $B) = @_;\n    say \"$A / $B\";\n}\nsub funcC{\n    my ($A, $B, $C) = @_;\n    say \"$A / $B / $C\";\n}\n\nmy $hash_ref = {\n    'a' =&gt; { func =&gt; \\&amp;funcA, args =&gt; [ qw[ other1 ] ] },\n    'b' =&gt; { func =&gt; \\&amp;funcB, args =&gt; [ qw[ other1 other2 ] ] },\n    'c' =&gt; { func =&gt; \\&amp;funcC, args =&gt; [ qw[ other1 other2 other3 ] ] },\n};\n\nsub funcRun{\n    my ($param) = @_;\n\n    my %args = (\n        other1 =&gt; 'foo',\n        other2 =&gt; 'bar',\n        other3 =&gt; 'baz',\n    );\n\n    # $hash_ref-&gt;{$param}{args} is an array reference containing\n    # the names of the arguments you need.\n    # @{ ... } turns that array reference into an array.\n    # @args{ ... } uses that array to look up those keys in the\n    # %args hash (this is called a hash slice)\n\n    $hash_ref-&gt;{$param}{func}(@args{ @{ $hash_ref-&gt;{$param}{args} } });\n\n}\n\nfuncRun($_) for qw[a b c];\n</code></pre>\n\n<p>But, to be honest, having stored your data in a hash, it's only a small step to passing the whole hash into every subroutine and letting them determine which data they want to use. Or even turning your hash into an object.</p>\n"}], "owner": {"reputation": 33, "user_id": 5439860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf77f6ecd56af5aa8316efc4bc03e25b?s=128&d=identicon&r=PG&f=1", "display_name": "nokdoo", "link": "https://stackoverflow.com/users/5439860/nokdoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 51452664, "answer_count": 2, "score": 1, "last_activity_date": 1595835370, "creation_date": 1532142725, "question_id": 51452469, "link": "https://stackoverflow.com/questions/51452469/how-to-change-if-else-to-hash-function-perl", "title": "How to change if/else to hash function? perl", "body": "<pre><code>sub funcA{\n    my ($A) = @_;  &lt;--require 1\n}\nsub funcB{\n    my ($A, $B) = @_;  &lt;--require 2\n}\nsub funcC{\n    my ($A, $B, $C) = @_;  &lt;--require 3\n}\n\nsub funcRun{\n    my ($param) = @_;\n    my $other1, $other2, $other3;  &lt;--will be assigned at ',,,,,'\n\n    ,,,,,\n\n    if($param eq 'a'){\n        funcA, $other1;\n        return;\n    }elsif($param eq = 'b'){\n        funcB, $other1, $other2;\n        return;\n    }elsif($param eq = 'c'){\n        funcC, $other1, $other2, $other3;\n        return;\n    }\n}\n</code></pre>\n\n<p>I want to change this to next code</p>\n\n<pre><code>sub funcA{\n    my ($A) = @_;  #&lt;--require 1\n}\nsub funcB{\n    my ($A, $B) = @_;  #&lt;--require 2\n}\nsub funcC{\n    my ($A, $B, $C) = @_;  #&lt;--require 3\n}\n\nmy $hash_ref = {\n    'a' =&gt; \\&amp;funcA,\n    'b' =&gt; \\&amp;funcB,\n    'c' =&gt; \\&amp;funcC\n}\n\nsub funcRun{\n    my ($param) = @_;\n    my $other1, $other2, $other3;  #&lt;--will be assigned at ',,,,,'\n\n    ,,,,,\n\n    $hash_ref-&gt;{$param}(ARGUMENTS);   #&lt;--my problem\n\n}\n</code></pre>\n\n<p>But I can't think how to make <strong>ARGUMENTS</strong> section including variable number of arguments.\nI considered each function to be defined in the <strong>funcRun</strong> code, but then I don't know the difference with if/else code. And I heard that passing 3 arguments values and accepting parameters in order from first, is not good from someone</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1532146401, "post_id": 51452404, "comment_id": 89875290, "body": "Adding <code>$!</code> to the <code>die</code> message like you do elsewhere would probably have helped you troubleshoot this yourself."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1587797467, "last_edit_date": 1587797467, "creation_date": 1532144389, "answer_id": 51452582, "question_id": 51452404, "link": "https://stackoverflow.com/questions/51452404/perl-could-not-open-and-read-files/51452582#51452582", "title": "Perl - Could not open and read files", "body": "<p>The <code>readdir</code> returns bare file names, without the path. </p>\n\n<p>So when you go ahead to open those files you need to prepend the names returned by <code>readdir</code> with the name of the directory the <code>readdir</code> read them from, here <code>$filepath</code>. Or build the full path names right away</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse File::Spec;\n\nprint \"Enter the path: \";\nmy $filepath = &lt;STDIN&gt;;\nchomp $filepath;\n\ndie \"\\nPlease give input folder\\n\" if !defined $filepath or !-d $filepath;\n\nopendir(my $fh_dir, $filepath) or die \"Can't opendir $filepath: $!\";\n\nmy @xml_files = \n    map { File::Spec-&gt;catfile($filepath, $_) } \n    grep { /\\.xml$/ } \n    readdir $fh_dir;\n\nclosedir $fh_dir;\n\nsay for @xml_files;\n</code></pre>\n\n<p>where I used <a href=\"https://perldoc.perl.org/File/Spec.html\" rel=\"nofollow noreferrer\">File::Spec</a> to portably piece together the file name. </p>\n\n<p>The <code>map</code> can be made to also do <code>grep</code>'s job so to make only one pass over the file list</p>\n\n<pre><code>my @xml_files = \n    map { /\\.xml$/ ? File::Spec-&gt;catfile($filepath, $_) : () } \n    readdir $fh_dir;\n</code></pre>\n\n<p>The empty list <code>()</code> gets flattened in the returned list, effectively disappearing altogether.</p>\n\n<hr>\n\n<p>Here are some comments on the code. Note that this is normally done at <em>Code Review</em> but I feel that it is needed here.</p>\n\n<p>First: a long list of variables is declared upfront. It is in fact important to declare in as small a scope as possible. It turns out that most of those variables can indeed be declared where they are used, as seen in comments below. </p>\n\n<ul>\n<li><p>The location of the executable is best found using  </p>\n\n<pre><code>use FindBin qw($RealBin);\n</code></pre>\n\n<p>where <code>$RealBin</code> also resolves links (as opposed to <code>$Bin</code>, also available)</p></li>\n<li><p>Assigning <code>()</code> to an array at declaration doesn't do anything; it is exactly the same as normal <code>my @errors;</code>. They can also go together, <code>my (@errors, @warnings, @checks);</code>. If the array has something then <code>= ()</code> clears it, what is a good way to empty an array</p></li>\n<li><p>Assigning a <code>\"0\"</code> makes the variable a string. While Perl normally converts between strings and numbers as needed, if a number is needed then use a number, <code>my $z = 0;</code></p></li>\n<li><p>Lexical filehandles (<code>open my $fh, ...</code>) are better than globs (<code>open FH, ...</code>)</p></li>\n<li><p>I don't understand the comment about \"<em>numeric error</em>\" in sorting.  The <a href=\"https://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\"><code>cmp</code> operator</a> sorts lexicographically, for numeric sort use <code>&lt;=&gt;</code></p></li>\n<li><p>When array is used in <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">scalar context</a> &ndash; when assigned to a scalar for example &ndash; the number of elements is returned. So no need for <code>scalar</code> but do <code>my flcnt = @xmlF;</code></p></li>\n<li><p>For iteration over array indices use <code>$#ary</code>, the index of the last element of <code>@ary</code>, for</p>\n\n<pre><code>foreach my $i (0..$#xmlF) { ... }\n</code></pre>\n\n<p>But if there aren't any uses of the index (I don't see any) then loop over elements</p>\n\n<pre><code>foreach my $file (@xmlF) { ... }\n</code></pre></li>\n<li><p>When you check the file <code>open</code> <em>print the error</em>  <a href=\"https://perldoc.perl.org/perlvar.html#$!\" rel=\"nofollow noreferrer\">$!</a>, <code>open ... or die \"... : $!\";</code>. This is done elsewhere in the code, and it should be done always.</p></li>\n<li><p>The <code>local $/;</code> unsets the <a href=\"https://perldoc.perl.org/perlvar.html#$/\" rel=\"nofollow noreferrer\">input record separator</a>, what makes the following read take the whole file. If that is intended then <code>$line</code> is not a good name. Also note that a variable can be declared inside the condition, <code>while (my $line = &lt;$fh&gt;) { }</code></p></li>\n<li><p>I can't comment on the regex as I don't know what it's supposed to accomplish, but it is complex; any chance to simplify all that?</p></li>\n<li><p>The series of <code>foreach</code> loops only works out the number of elements of those arrays; there is no need for loops then, just <code>my $ecount = @errors;</code> (etc). This also allows you to keep the declaration of those counter variables in minimal scope.</p></li>\n<li><p>The <code>undef @errors;</code> (etc) aren't needed since those arrays count for each file and so you can declare them inside the loops, anew at each iteration (and at smallest scope).  When you wish to empty an array it is better to do <code>@ary = ();</code> than to <code>undef</code> it; that way it's not allocated all over again on the next use</p></li>\n</ul>\n"}], "owner": {"reputation": 121, "user_id": 5011102, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f0785a504d8af6511363f553d028824b?s=128&d=identicon&r=PG&f=1", "display_name": "Darious", "link": "https://stackoverflow.com/users/5011102/darious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 51452582, "answer_count": 1, "score": 0, "last_activity_date": 1587797467, "creation_date": 1532141654, "question_id": 51452404, "link": "https://stackoverflow.com/questions/51452404/perl-could-not-open-and-read-files", "title": "Perl - Could not open and read files", "body": "<p>I've created a script for validating xml files after given input folder. It should grep xml files from the input directory then sort out the xml files and check the condition. But it throws a command that <code>not Open at line , &lt;STDIN&gt; line 1</code>.</p>\n\n<p>But it creates an empty log file.</p>\n\n<p>Since i faced <code>numeric</code> error while sorting, comment that.  </p>\n\n<p>so i need to be given input location, the script should check the xml files and throw errors in a mentioned log file. </p>\n\n<p>Anyone can help this?</p>\n\n<p><strong>Script</strong></p>\n\n<pre><code>#!/usr/bin/perl\n# use strict;\nuse warnings;\nuse Cwd;\nuse File::Basename;\nuse File::Path;\nuse File::Copy;\nuse File::Find;\n\nprint \"Enter the path: \";\nmy $filepath = &lt;STDIN&gt;;\nchomp $filepath;\n\ndie \"\\n\\tpleas give input folder \\n\" if(!defined $filepath or !-d $filepath);\n\nmy $Toolpath = dirname($0);\nmy $base = basename($filepath);\nmy $base_path = dirname($filepath);\n\nmy ($xmlF, @xmlF);\n\nmy @errors=();\nmy @warnings=();\nmy @checkings=();\nmy $ecount=0;\nmy $wcount=0;\nmy $ccount=0;\nmy ($x, $y);\nmy $z=\"0\";\n\nopendir(DIR,\"$filepath\");\nmy @xmlFiles = grep{/\\.xml$/} readdir(DIR);\nclosedir(DIR);\n\nmy $logfile = \"$base_path\\\\$base\".\"_Err.log\";\n\n# @xmlF=sort{$a &lt;=&gt; $b}@xmlFiles;\n@xmlF=sort{$a cmp $b}@xmlFiles;\n\nopen(OUT, \"&gt;$logfile\") || die (\"\\nLog file couldnt write $logfile :$!\");\n\n\nmy $line;\n\nmy $flcnt = scalar (@xmlF);\n\nfor ($x=0; $x &lt; $flcnt; $x++)\n{\nopen IN, \"$xmlF[$x]\" or die \"not Open\";\nprint OUT \"\\n\".$xmlF[$x].\"\\n==================\\n\";\nprint \"\\nProcessing File $xmlF[$x] .....\\n\";\nlocal $/;\n\nwhile ($line=&lt;IN&gt;)\n{\nwhile ($line=~m#(&lt;res(?: [^&gt;]+)? type=\"weblink\"[^&gt;]*&gt;)((?:(?!&lt;/res&gt;).)*)&lt;/res&gt;#igs)\n{\n    my $tmp1 = $1; my $tmp2 = $&amp;; my $pre1 = $`;\n    if($tmp1 =~ m{ subgroup=\"Weblink\"}i){\n        my $pre = $pre1.$`;\n        if($tmp2 !~ m{&lt;tooltip&gt;&lt;\\!\\[CDATA\\[Weblink\\]\\]&gt;&lt;\\/tooltip&gt;}ms){\n            my $pre = $pre1.$`;\n            push(@errors,lineno($pre),\"\\t&lt;tooltip&gt;&lt;\\!\\[CDATA\\[Weblink\\]\\]&gt;&lt;/tooltip&gt; is missing\\n\");\n        }\n    }\n}\nforeach my $warnings(@warnings)\n{\n$wcount = $wcount+1;\n}\nforeach my $checkings(@checkings)\n{\n$ccount = $ccount+1;\n}\nforeach my $errors(@errors)\n{\n$ecount = $ecount+1;\n}\n\nmy $count_err = $ecount/2;\nprint OUT \"\".$count_err.\" Error(s) Found:-\\n------------------------\\n \";\nprint OUT \"@errors\\n\";\n$ecount = 0;\n\nmy $count_war = $wcount/2;\nprint OUT \"$count_war Warning(s) Found:-\\n-------------------------\\n \";\nprint OUT \"@warnings\\n\";\n$wcount = 0;\n\nmy $count_check = $ccount/2;\nprint OUT \"$count_check Checking(s) Found:-\\n-------------------------\\n \";\nprint OUT \"@checkings\\n\";\n$wcount = 0;\n\nundef @errors;\nundef @warnings;\nundef @checkings;\n\nclose IN;\n}\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 65, "user_id": 2518568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a875fb624b66b624e79dc65d73de1f6f?s=128&d=identicon&r=PG", "display_name": "pdp1231", "link": "https://stackoverflow.com/users/2518568/pdp1231"}, "edited": false, "score": 0, "creation_date": 1532131876, "post_id": 51451685, "comment_id": 89873636, "body": "I tried this as well:   my @ARGS = (&quot;input.txt&quot;, &quot;-o &quot;, &quot;output.txt&quot;);. The error I get is: &quot;Unknown option: o&quot; The &quot;-&quot; is getting ignored even if I send &quot;--o&quot;"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1532258510, "post_id": 51451685, "comment_id": 89897788, "body": "Remove the trailing space in &quot;-o &quot;. If you use a list as the arguments for <code>system</code>, it will not pass thru a shell, meaning extra spaces will not be ignored."}, {"owner": {"reputation": 65, "user_id": 2518568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a875fb624b66b624e79dc65d73de1f6f?s=128&d=identicon&r=PG", "display_name": "pdp1231", "link": "https://stackoverflow.com/users/2518568/pdp1231"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 1, "creation_date": 1532372441, "post_id": 51451685, "comment_id": 89940199, "body": "Removing the trailing space fixed it! Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1532134999, "creation_date": 1532134999, "answer_id": 51451957, "question_id": 51451685, "link": "https://stackoverflow.com/questions/51451685/perl-calling-another-perl-script-with-options-switches/51451957#51451957", "title": "perl calling another perl script with options/switches", "body": "<pre><code>my $tool_path = \"/home/sample/script.pl\"\nmy @args = \"input.txt -o output.txt\";\nsystem($tool_path, @args);\n</code></pre>\n\n<p>is equivalent to the shell command</p>\n\n<pre><code>/home/sample/script.pl \"input.txt -o output.txt\"\n</code></pre>\n\n<p>You want</p>\n\n<pre><code>my $tool_path = \"/home/sample/script.pl\"\nmy @args = ( \"input.txt\", \"-o\", \"output.txt\" );\nsystem($tool_path, @args);\n</code></pre>\n\n<p>Actually, if you want to capture the output, there's no need to involve a file. You want</p>\n\n<pre><code>use IPC::System::Simple qw( capturex );\n\nmy $tool_path = \"/home/sample/script.pl\"\nmy @args = \"input.txt\";\nmy $output = capturex($tool_path, @args);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 576, "user_id": 5011914, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VmVVjxIV_Z4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRfo1mLeBEbuXEzu2dqYltIE6c1Q/mo/photo.jpg?sz=128", "display_name": "k-mx", "link": "https://stackoverflow.com/users/5011914/k-mx"}, "is_accepted": false, "score": 0, "last_activity_date": 1532151057, "last_edit_date": 1532151057, "creation_date": 1532150683, "answer_id": 51453083, "question_id": 51451685, "link": "https://stackoverflow.com/questions/51451685/perl-calling-another-perl-script-with-options-switches/51453083#51453083", "title": "perl calling another perl script with options/switches", "body": "<p>Use backticks to run script with arguments and capture output (perldoc -f qx). </p>\n\n<pre><code>perl -E'say `echo 4 | $^X -p ./script.pl`'\n</code></pre>\n\n<p>Content of script.pl:</p>\n\n<pre><code>$_**=3\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 2518568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a875fb624b66b624e79dc65d73de1f6f?s=128&d=identicon&r=PG", "display_name": "pdp1231", "link": "https://stackoverflow.com/users/2518568/pdp1231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532151057, "creation_date": 1532131303, "question_id": 51451685, "link": "https://stackoverflow.com/questions/51451685/perl-calling-another-perl-script-with-options-switches", "title": "perl calling another perl script with options/switches", "body": "<p>I have a master Perl script that needs to call another Perl script with options. I read many threads regarding arguments but I need both, arguments and options. Below is my sample code:</p>\n\n<pre><code>sub run_script_a{\n   my $script_path = \"/home/sample/script.pl\"\n   my @ARGS = \"input.txt\";\n\n   ##I need to capture the result of the script run and fail if something went wrong\n   system($^X, $tool_path, @ARGS);\n}\n</code></pre>\n\n<p>I tried the following: </p>\n\n<pre><code>my @ARGS = \"input.txt -o output.txt\";\n</code></pre>\n\n<p>It didn't work, gave me this error:</p>\n\n<pre><code>Cannot open input.txt -o output.txt for read: No such file or directory\n</code></pre>\n\n<p>How do I make it work? The second script runs as:</p>\n\n<pre><code>sample.pl input.txt -o output.txt\n</code></pre>\n\n<p>I am not good at coding bash scripts so I am using Perl. </p>\n"}, {"tags": ["apache", "perl", "fork", "mod-perl", "copy-on-write"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1532126246, "post_id": 51450502, "comment_id": 89872667, "body": "<a href=\"https://www.perlmonks.org/?node_id=1218965\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}], "owner": {"reputation": 41, "user_id": 10112954, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7pz3Bg2N5LA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p_FHdJjrhYHia17uAwpsNRKg8Lsg/mo/photo.jpg?sz=128", "display_name": "Sergiy Zuban", "link": "https://stackoverflow.com/users/10112954/sergiy-zuban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1533313205, "creation_date": 1532121565, "last_edit_date": 1533313205, "question_id": 51450502, "link": "https://stackoverflow.com/questions/51450502/pl-strtab-sharekeys-and-copy-on-write-leak", "title": "PL_strtab/SHAREKEYS and copy-on-write leak", "body": "<p>Perl internally uses dedicated hash PL_strtab as shared storage for hash's keys, but in fork environment like apache/mod_perl this creates a big issue. Best practice says to preload modules in parent process, but nobody says it's eventually allocates memory for PL_strtab and these pages of memory tend to be implicitly modified in child processes. There are seems to be 2 major reasons of modification:</p>\n\n<p>Reason 1: reallocation (hsplit()) may happen when PL_strtab growths in child process.\nReason 2: REFCNT every time new reference created.</p>\n\n<p>Example below shows 16MB copy-on-write leak in attempt to use hash. Attempts to recompile perl with -DNODEFAULT_SHAREKEYS fails (<a href=\"https://rt.perl.org/SelfService/Display.html?id=133384\" rel=\"nofollow noreferrer\">https://rt.perl.org/SelfService/Display.html?id=133384</a>). I was able to get access to PL_strtab via XS module.</p>\n\n<p>Ideally I'm looking for a way to downgrade all hashes created in parent to keep hash keys within a hash (HE object) rather than PL_strtab, i.e. turn off SHAREKEYS flag. This should allow to shrink PL_strtab to minimum possible size. Ideally it should have 0 keys in parent.</p>\n\n<p>Please let me know you think it's theoretically possible via XS.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Linux::Smaps;\n\n$SIG{CHLD} = sub { waitpid(-1, 1) };\n\n# comment this block\n{\n    my %h;\n    # pre-growth PL_strtab hash, kind of: keys %$PL_strtab = 2_000_000;\n    foreach my $x (1 .. 2_000_000) {\n        $h{$x} = undef;\n    }\n}\n\nmy $pid = fork // die \"Cannot fork: $!\";\nunless ($pid) {\n    # child\n\n    my $s = Linux::Smaps-&gt;new($$)-&gt;all;\n    my $before = $s-&gt;shared_clean + $s-&gt;shared_dirty;\n\n    {\n        my %h;\n        foreach my $x (1 .. 2_000_000) {\n            $h{$x} = undef;\n        }\n    }\n\n    my $s2 = Linux::Smaps-&gt;new($$)-&gt;all;\n    my $after = $s2-&gt;shared_clean + $s2-&gt;shared_dirty;\n    warn 'COPY-ON-WRITE: ' . ($before - $after) . ' KB';\n\n    exit 0;\n}\n\nsleep 1000;\nprint \"DONE\\n\";\n</code></pre>\n\n<p>Note, that sample %h in parent get destroyed and not accessible in child. The only purpose of it is to preallocate more memory for PL_strtab and make copy-on-write issue more noticeable.</p>\n\n<p>The problem that PL_strtab is shared data structure (not %h). It's solely controlled by Perl and there is no way to control it or use IPC::Shareable or any other well-known for me CPAN modules.</p>\n\n<p>Real life example:</p>\n\n<ul>\n<li>In apache/mod_perl, Starman or any other prefork environment everybody tries to preload as much as possible modules in parent process. Right?</li>\n<li>If any of preloaded modules creates hash (even temporary) with big number of keys Perl silently allocates more and more memory for internal PL_strtab hash.</li>\n<li>PL_strtab silently get touched in children on any attempt to use hashes.\nProblem even worse, because huge percentage of modules we preload are CPAN modules -> there is no way to know which of them overuse hashes resulting in increased memory footprint of parent process.</li>\n</ul>\n"}, {"tags": ["perl", "file", "parsing", "hash", "hashmap"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532121883, "post_id": 51450480, "comment_id": 89871493, "body": "<i>&quot;needs to be compared to a similar text file&quot;</i> Okay, but what result do you want exactly? Just a list of records that are in one file but not the other? If the order matters then remember that hashes are <i>unordered</i>. How big are your files?"}, {"owner": {"reputation": 3, "user_id": 4774270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fec26c730634d4619169d5409236510?s=128&d=identicon&r=PG", "display_name": "Sameer", "link": "https://stackoverflow.com/users/4774270/sameer"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532122895, "post_id": 51450480, "comment_id": 89871780, "body": "Edited in some previous code I used for clarity; hopefully that helps. Files are ~20,000 lines of text. If hashes are unordered, is there a better way to store them for comparison?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4774270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fec26c730634d4619169d5409236510?s=128&d=identicon&r=PG", "display_name": "Sameer", "link": "https://stackoverflow.com/users/4774270/sameer"}, "edited": false, "score": 0, "creation_date": 1532357660, "post_id": 51452056, "comment_id": 89932180, "body": "Thank you so much! I was more looking for the output to be a comparison of the contents and their differences against each other, but the way you parsed the text and stored it in the hash was exactly what I was stuck on."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3, "user_id": 4774270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fec26c730634d4619169d5409236510?s=128&d=identicon&r=PG", "display_name": "Sameer", "link": "https://stackoverflow.com/users/4774270/sameer"}, "edited": false, "score": 0, "creation_date": 1532428113, "post_id": 51452056, "comment_id": 89960445, "body": "@Sameer: <i>&quot;I was more looking for the output to be a comparison of the contents and their differences against each other&quot;</i> It would have helped enormously if you had said so in your question. Even after I asked <b><i>&quot;what result do you want exactly?&quot;</i></b> you offered only some old code."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 0, "last_activity_date": 1532136357, "creation_date": 1532136357, "answer_id": 51452056, "question_id": 51450480, "link": "https://stackoverflow.com/questions/51450480/parse-text-file-and-store-delimited-fields-in-hash-table-perl/51452056#51452056", "title": "Parse text file and store delimited fields in hash table (Perl)", "body": "<p>In this example, I am using the <strong>eq_deeply</strong> function from <a href=\"https://metacpan.org/pod/Test::Deep\" rel=\"nofollow noreferrer\">Test::Deep</a> to test for equality between your 2 files. </p>\n\n<p>If you are also looking for what is in one file that is not in the other, you could use the List::Compare functions as you have them.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Test::Deep::NoTest 'eq_deeply';\nuse List::Compare;\n\nopen my $fh, '&lt;', \\&lt;&lt;EOF;\nTGName: name1\n----------------------------------------------------------------------------\n setting1                                          value1 \n setting2                                          value2\n setting3                                          value3   \n setting4                                          value4\n setting5                                          value5\n\n\nTGName: name47\n----------------------------------------------------------------------------\n setting1                                          value1 \n setting2                                          value2\n setting3                                          value3\n\n----------------------------------------------------------------------------\nSGName: name1\nEOF\n\nmy %data1;\nmy $key1;\n\nwhile (&lt;$fh&gt;) {\n    if (/^([A-Z]{2}Name: name\\d+)/) {\n        $key1 = $1;\n    }\n    elsif (/^[-\\s]+$/) {\n        next;\n    }\n    else {\n        my ($setting, $val) = split;    \n        $data1{$key1}{$setting} = $val;\n    }\n}\n\nopen my $fh2, '&lt;', \\&lt;&lt;EOF;\nTGName: name1\n----------------------------------------------------------------------------\n setting1                                          value1 \n setting2                                          value2\n setting3                                          value3   \n setting4                                          value4\n setting55                                          value5\n\n\nTGName: name47\n----------------------------------------------------------------------------\n setting1                                          value1 \n setting2                                          value2\n setting3                                          value3\n\n----------------------------------------------------------------------------\nSGName: name11\nEOF\n\nmy %data2;\nmy $key2;\n\nwhile (&lt;$fh2&gt;) {\n    if (/^([A-Z]{2}Name: name\\d+)/) {\n        $key2 = $1;\n    }\n    elsif (/^(?:-+|\\s+)$/) {\n        next;\n    }\n    else {\n        my ($setting, $val) = split;    \n        $data2{$key2}{$setting} = $val;\n    }\n}\n\nmy $lc = List::Compare-&gt;new([keys %data1], [keys %data2]);\nmy @intersection = $lc-&gt;get_intersection;\n\nfor my $key (@intersection) {\n    if (eq_deeply($data1{$key}, $data2{$key})) {\n        print \"key $key has the same hash for both files\\n\";    \n    }\n    else {\n        print \"key $key has different hashes\\n\";    \n    }\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>key TGName: name1 has different hashes\nkey TGName: name47 has the same hash for both files\n</code></pre>\n\n<p>I haven't used the <strong>eq_deeply</strong> function myself, but I believe it will give you the results you need.</p>\n"}], "owner": {"reputation": 3, "user_id": 4774270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fec26c730634d4619169d5409236510?s=128&d=identicon&r=PG", "display_name": "Sameer", "link": "https://stackoverflow.com/users/4774270/sameer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 51452056, "answer_count": 1, "score": 0, "last_activity_date": 1532136357, "creation_date": 1532121427, "last_edit_date": 1532122785, "question_id": 51450480, "link": "https://stackoverflow.com/questions/51450480/parse-text-file-and-store-delimited-fields-in-hash-table-perl", "title": "Parse text file and store delimited fields in hash table (Perl)", "body": "<p>I'm fairly new to Perl, so apologies if I'm missing something very simple here.</p>\n\n<p>I have a file formatted like so:</p>\n\n<pre><code>TGName: name1             \n----------------------------------------------------------------------------\n setting1                                          value1 \n setting2                                          value2\n setting3                                          value3   \n setting4                                          value4\n setting5                                          value5\n\n ...\n ...\n\nTGName: name47             \n----------------------------------------------------------------------------\n setting1                                          value1 \n setting2                                          value2\n setting3                                          value3\n\n ...\n----------------------------------------------------------------------------\nSGName: name1             \n----------------------------------------------------------------------------\n ...\n</code></pre>\n\n<p>which needs to be compared to a similar text file (that is formatted <em>out of order</em>). My thinking was I could store each \"block\" of the textfile in a hash, so the above would look like:</p>\n\n<pre><code>my %TGName:name1= (\n    setting1 =&gt; 'value1',\n    setting2 =&gt; 'value2',\n    setting3 =&gt; 'value3',\n    setting4 =&gt; 'value4',\n);\n</code></pre>\n\n<p>and so on, and then I could compare each hash with the same name in both files against each other.</p>\n\n<p>The problem I'm facing right now is reading each line that starts with TGName, SGName, etc. into the hash with the settings and values as the key/value pairs.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14649523/perl-reading-a-file-and-storing-each-line-as-variable-value?answertab=active#tab-top\">This</a> question's edit is the closest to what I've found while searching, but unfortunately no one answered after the original question was edited.</p>\n\n<p>Any insight would be greatly appreciated!</p>\n\n<p>EDIT: Here's some code for a somewhat similar (and simpler) project where every single line was unique and not separated into groups. Here, the output listed lines common to both files, lines only found in the first file, and lines only found in the second file:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Compare;\n\n# create log.txt for writing\nmy $log = 'log.txt';\n\n# create $f1 string and read in file1\nopen (my $f1, \"&lt;\", \"file1.txt\") or die $!;\n\n# create $f2 string and read in file2\nopen (my $f2, \"&lt;\", \"file2.txt\") or die $!;\n\n# initialize array and populate with the contents of $f1\nmy @content_f1=&lt;$f1&gt;;\n\n# initialize array and populate with the contents of $f2\nmy @content_f2=&lt;$f2&gt;;\n\n# create comparison string\nmy $lc = List::Compare-&gt;new(\\@content_f1, \\@content_f2);    \n\n# initialize array showing commonalities of file 1 and file 2  \n# and populate with the contents of get_intersection() \nmy @intersection = $lc-&gt;get_intersection;\n\n# initialize array showing elements unique to new config  \n# and populate with the contents of get_unique() \nmy @firstonly = $lc-&gt;get_unique;\n\n# initialize array showing elements unique to golden config\n# and populate with the contents of get_complement() \nmy @secondonly = $lc-&gt;get_complement;\n\n# create $out string to write contents into log\nopen(my $out, '&gt;', $log) or die \"Cannot open file '$log' for writing: $!\";\n\n# write the contents of the intersection and unique arrays to log.txt\nprint $out \"Common Items:\\n\".\"@intersection\".\"\\n\";\nprint $out \"Items Only in file 1 \\n\".\"@firstonly\".\"\\n\";\nprint $out \"Items Only in file 2:\\n\".\"@secondonly\".\"\\n\";\n\nclose $out;\nclose $f1;\nclose $f2;\n</code></pre>\n\n<p>Ideally I'd like the same kind of output here, except instead of comparing text file to text file, it's comparing %file1_hash_name1 to %file2_hash_name1(eg: items common to both hashes, items found in only the first hash, items found in only the second hash).</p>\n"}, {"tags": ["perl", "mojolicious", "mojolicious-lite"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8934227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908ea0080dd02f09d3c0e31a8bdec843?s=128&d=identicon&r=PG&f=1", "display_name": "Memo R", "link": "https://stackoverflow.com/users/8934227/memo-r"}, "edited": false, "score": 0, "creation_date": 1532131167, "post_id": 51450497, "comment_id": 89873537, "body": "Ty, it is found."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1532121536, "creation_date": 1532121536, "answer_id": 51450497, "question_id": 51449985, "link": "https://stackoverflow.com/questions/51449985/in-mojolicious-how-to-protect-images-from-public-view/51450497#51450497", "title": "In mojolicious, how to protect images from public view", "body": "<p>Same way as any other content. Set up a handler for requests, render (or don't render) the content.</p>\n\n<pre><code>get '/images/*img' =&gt; sub {\n    my $c = shift;\n    if (!$c-&gt;session(\"is_authenticated\")) {\n        return $c-&gt;render( text =&gt; \"Forbidden\", status =&gt; 403 );\n    }\n    my $file = $c-&gt;param(\"img\");\n    if (!open(my $fh, '&lt;', $IMAGE_DIR/$file)) {\n        return $c-&gt;render( text =&gt; \"Not found\", status =&gt; 404 );\n    }\n    my $data = do { local $/; &lt;$fh&gt; };\n    close $fh;\n    $c-&gt;render( data =&gt; $data, format =&gt; 'jpg' );\n};\n</code></pre>\n\n<p>Your request handler will take priority over the default handler that serves content from public folders, but once you have this handler in place, you don't need to store the files it serves in a public folder.</p>\n"}, {"comments": [{"owner": {"reputation": 1355, "user_id": 595764, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7421bdc83565fb778f20899f51c96c4a?s=128&d=identicon&r=PG", "display_name": "ghandi", "link": "https://stackoverflow.com/users/595764/ghandi"}, "edited": false, "score": 0, "creation_date": 1532433199, "post_id": 51451681, "comment_id": 89963645, "body": "This is only a handler to respond with an image. There is no authorization at all."}], "tags": [], "owner": {"reputation": 57, "user_id": 8934227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908ea0080dd02f09d3c0e31a8bdec843?s=128&d=identicon&r=PG&f=1", "display_name": "Memo R", "link": "https://stackoverflow.com/users/8934227/memo-r"}, "is_accepted": false, "score": -1, "last_activity_date": 1532131241, "creation_date": 1532131241, "answer_id": 51451681, "question_id": 51449985, "link": "https://stackoverflow.com/questions/51449985/in-mojolicious-how-to-protect-images-from-public-view/51451681#51451681", "title": "In mojolicious, how to protect images from public view", "body": "<p>another sololution is </p>\n\n<pre><code>get '/pays/*img' =&gt; sub {\nmy $self = shift;\n\nmy $img = $self-&gt;param('img');\nplugin 'RenderFile';\n\nmy @imgext = split(/\\./, $img);\nmy $ext = $imgext[-1];\n\n\n$self-&gt;render_file(\n'filepath' =&gt; \"/directiry/$img\",\n'format'   =&gt; \"$ext\",                 # will change Content-Type \"application/x-download\" to \"application/pdf\"\n'content_disposition' =&gt; 'inline',   # will change Content-Disposition from \"attachment\" to \"inline\"\n                     # delete file after completed\n</code></pre>\n\n<p>);</p>\n\n<p>It is use plugin 'RenderFile';</p>\n"}], "owner": {"reputation": 57, "user_id": 8934227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908ea0080dd02f09d3c0e31a8bdec843?s=128&d=identicon&r=PG&f=1", "display_name": "Memo R", "link": "https://stackoverflow.com/users/8934227/memo-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 51450497, "answer_count": 2, "score": 0, "last_activity_date": 1532131241, "creation_date": 1532118862, "last_edit_date": 1532120523, "question_id": 51449985, "link": "https://stackoverflow.com/questions/51449985/in-mojolicious-how-to-protect-images-from-public-view", "title": "In mojolicious, how to protect images from public view", "body": "<p>Somebody can help me, please. I have app in mojolicious Lite </p>\n\n<p>I wanna block images from all without session login</p>\n\n<p>when i type <a href=\"http://m.y.i.p:3000/images/imageX.jpg\" rel=\"nofollow noreferrer\">http://m.y.i.p:3000/images/imageX.jpg</a></p>\n\n<p>i wanna show images only with session login.</p>\n\n<p>my html code is</p>\n\n<pre><code>&lt;a href=\"images/imagex.jpg\"&gt;shwo image 1 &lt;/a&gt;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 6, "creation_date": 1532098960, "post_id": 51445349, "comment_id": 89860987, "body": "Those are not duplicate entries in your hash. It&#39;s duplicates in the array reference. That&#39;s a completely different problem, and probably why you get confused. Hashes in Perl cannot have duplicate entries."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532099020, "post_id": 51445349, "comment_id": 89861021, "body": "Do you care about the order of the timestamps? If not, turn that inner array into a hash."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532099491, "post_id": 51445349, "comment_id": 89861352, "body": "no the order is not so important at the moment. I am just looking for solution quickly"}], "answers": [{"comments": [{"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "reply_to_user": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1532100676, "post_id": 51445833, "comment_id": 89861991, "body": "Do you mean you want unique values for each array ref in the hash?"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1532101145, "post_id": 51445833, "comment_id": 89862262, "body": "that doesn&#39;t work btw I get this error Type of arg 1 to keys must be hash (not map iterator) at ./tw_runtimes.pl line 29, near &quot;}]&quot;"}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "edited": false, "score": 0, "creation_date": 1532101689, "post_id": 51445833, "comment_id": 89862582, "body": "still the same error: Type of arg 1 to keys must be hash (not single ref constructor) at ./tw_runtimes.pl line 29, near &quot;}]&quot;"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": -1, "last_activity_date": 1532104548, "last_edit_date": 1532104548, "creation_date": 1532100335, "answer_id": 51445833, "question_id": 51445349, "link": "https://stackoverflow.com/questions/51445349/how-to-not-insert-an-already-existing-record-into-a-hash/51445833#51445833", "title": "How to not insert an already existing record into a hash", "body": "<p>If you want to remove the duplicates from the array ref, you can do it this way. It will remove duplicates after the hash already built.</p>\n\n<pre><code>while(my $line=&lt;F&gt;) {\n    # logfile pattern 31.05.2018 03:25:50 --- Start Deaktiviere PKonten ---\n    $line =~ /^\\s*([\\d.]+) ([\\d:]+) --- (.*) -.*\\s*$/;\n    $timestamp=join(\" \",$1,$2);\n    $action=$3;\n    push @{$results{$action}} ,$timestamp;\n}\nforeach my $key (keys %result) {\n    $result{$key} = [keys %{ {map {$_ =&gt; 1} @{$result{$key}}} }];\n}\n</code></pre>\n\n<p>This solution should filter data as hash is built:</p>\n\n<pre><code>my %filter;\nwhile(my $line=&lt;F&gt;) {\n    # logfile pattern 31.05.2018 03:25:50 --- Start Deaktiviere PKonten ---\n    $line =~ /^\\s*([\\d.]+) ([\\d:]+) --- (.*) -.*\\s*$/;\n    $timestamp=join(\" \",$1,$2);\n    $action=$3;\n    if(!defined $filter{$action}{$timestamp}) {\n        push @{$results{$action}} ,$timestamp;\n        $filter{$action}{$timestamp} = 1;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532102359, "post_id": 51446191, "comment_id": 89862963, "body": "The <code>.*\\s*$</code>  in the regex is pointless. There&#39;s also a space between the date and time in the original string, so there&#39;s no need to take it out and put it back."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1532103843, "post_id": 51446191, "comment_id": 89863707, "body": "Order preserving: <code>push @{$results{$action}} ,$timestamp if !$seen{$action}{$timestamp}++;</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1532103894, "post_id": 51446191, "comment_id": 89863732, "body": "@Borodin that&#39;s true. But I haven&#39;t actually changed the regex."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1532101683, "creation_date": 1532101683, "answer_id": 51446191, "question_id": 51445349, "link": "https://stackoverflow.com/questions/51445349/how-to-not-insert-an-already-existing-record-into-a-hash/51446191#51446191", "title": "How to not insert an already existing record into a hash", "body": "<p>If you don't care about the order of the timestamps, use a hash reference instead of  an array.</p>\n\n<pre><code>while(my $line = &lt;$fh&gt; ) {\n    $line =~ /^\\s*([\\d.]+) ([\\d:]+) --- (.*) -.*\\s*$/;\n    my $timestamp = join(\" \", $1, $2);\n    my $action = $3;\n\n    # use a counting hash instead of a list\n    $results{$action}-&gt;{$timestamp}++;\n}\n</code></pre>\n\n<p>Your structure is now a bit different. </p>\n\n<pre><code>'Start Ermittlung der Freibetr\u00e4ge Gesamt.' =&gt; {\n    '01.06.2018 03:54:49' =&gt; 4,\n    '07.06.2018 03:14:45' =&gt; 4,\n    '31.05.2018 03:28:45' =&gt; 4,\n    '08.06.2018 03:33:36' =&gt; 4,\n    '02.06.2018 03:30:11' =&gt; 4,\n},\n</code></pre>\n\n<p>To access the timestamps, you need to use <a href=\"http://perldoc.perl.org/functions/keys.html\" rel=\"nofollow noreferrer\"><code>keys</code></a>.</p>\n\n<pre><code>say for sort keys %{ $results{$action} };\n</code></pre>\n\n<p>Of course that comes out sorted in a wrong way because the German date is <code>DD.MM.YYYY</code> and not <code>YYYY-MM-DD</code>. But you should have the <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\"><code>sort</code></a> because the hash order is by design not reliable, so every program run would give you randomly arranged output.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1532109977, "post_id": 51446929, "comment_id": 89866781, "body": "Fixed . . . . ."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1532109968, "last_edit_date": 1532109968, "creation_date": 1532104387, "answer_id": 51446929, "question_id": 51445349, "link": "https://stackoverflow.com/questions/51445349/how-to-not-insert-an-already-existing-record-into-a-hash/51446929#51446929", "title": "How to not insert an already existing record into a hash", "body": "<p>Since the timestamps are ordered, </p>\n\n<pre><code>while(my $line = &lt;$fh&gt; ) {\n    my ($ts, $action) = $line =~ /^\\s*([\\d.]+ [\\d:]+) --- (.*) -/;\n\n    my $actions = $results{$action} //= [];\n    push @$actions, $ts\n        if !@$actions\n        || $actions-&gt;[-1] ne $ts;\n}\n</code></pre>\n\n<hr>\n\n<p>In case I'm mistaken about the timestamps being ordered, here's an alternative.</p>\n\n<p>Hashes aren't just useful for grouping; they are also useful for removing duplicates. The following is an idiomatic way of removing duplicates (while preserving order):</p>\n\n<pre><code>my %seen;\n@a = grep { !$seen{$_}++ } @a;\n</code></pre>\n\n<p>You could apply this to your solution as follows:</p>\n\n<pre><code>my %seen;\nmy %results;\nwhile(my $line = &lt;$fh&gt; ) {\n    my ($ts, $action) = $line =~ /^\\s*([\\d.]+ [\\d:]+) --- (.*) -/;\n\n    push @{ $results{$action} }, $ts\n       if !$seen{$action}{$ts}++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6671828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a9316d74e3350537483a6b803168569?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Patel", "link": "https://stackoverflow.com/users/6671828/harshil-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1532107720, "creation_date": 1532107720, "answer_id": 51447650, "question_id": 51445349, "link": "https://stackoverflow.com/questions/51445349/how-to-not-insert-an-already-existing-record-into-a-hash/51447650#51447650", "title": "How to not insert an already existing record into a hash", "body": "<p>Try this:</p>\n\n<pre><code>while(my $line=&lt;F&gt;) {\n        # logfile pattern 31.05.2018 03:25:50 --- Start Deaktiviere PKonten ---\n        $line =~ /^\\s*([\\d.]+) ([\\d:]+) --- (.*) -.*\\s*$/;\n        $timestamp=join(\" \",$1,$2);\n        $action=$3;\n\n        my $value_in_array = grep {$_ eq $timestamp} @{$results{$action}};\n\n        push(@{$results{$action}} ,$timestamp) \n           unless($value_in_array) ;\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1532109968, "creation_date": 1532098751, "question_id": 51445349, "link": "https://stackoverflow.com/questions/51445349/how-to-not-insert-an-already-existing-record-into-a-hash", "title": "How to not insert an already existing record into a hash", "body": "<p>I am extracting data from a logfile and want to insert the data into a hash. The problem I have is that the hash has duplicate values and I can't figure out how to neglect already existing ones. My code looks like this:</p>\n\n<pre><code>  while(my $line=&lt;F&gt;) {\n            # logfile pattern 31.05.2018 03:25:50 --- Start Deaktiviere PKonten ---\n            $line =~ /^\\s*([\\d.]+) ([\\d:]+) --- (.*) -.*\\s*$/;\n            $timestamp=join(\" \",$1,$2);\n            $action=$3;\n            push @{$results{$action}} ,$timestamp;\n    }\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<pre><code>'Start Ermittlung der Freibetr\u00e4ge Gesamt.' =&gt; [\n                                                      '31.05.2018 03:28:45',\n                                                      '31.05.2018 03:28:45',\n                                                      '31.05.2018 03:28:45',\n                                                      '31.05.2018 03:28:45',\n                                                      '01.06.2018 03:54:49',\n                                                      '01.06.2018 03:54:49',\n                                                      '01.06.2018 03:54:49',\n                                                      '01.06.2018 03:54:49',\n                                                      '02.06.2018 03:30:11',\n                                                      '02.06.2018 03:30:11',\n                                                      '02.06.2018 03:30:11',\n                                                      '02.06.2018 03:30:11',\n                                                      '07.06.2018 03:14:45',\n                                                      '07.06.2018 03:14:45',\n                                                      '07.06.2018 03:14:45',\n                                                      '07.06.2018 03:14:45',\n                                                      '08.06.2018 03:33:36',\n                                                      '08.06.2018 03:33:36',\n                                                      '08.06.2018 03:33:36',\n                                                      '08.06.2018 03:33:36'\n                                                    ],\n</code></pre>\n\n<p>How can I get those duplicates out of the hash? Thanks in advance.</p>\n"}, {"tags": ["ruby", "linux", "bash", "perl"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1532196860, "post_id": 51444833, "comment_id": 89887056, "body": "Please provide a trivially simple illustration that perl cannot receive input from Ruby&#39;s <code>system</code> method. I don&#39;t think that is the case. I suggest starting with a very simple case and building up to your complex case gradually, and see where it breaks. Also, I wonder if you may need to shell escape any of this (using Ruby&#39;s <code>shellwords</code> module)."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1532197352, "post_id": 51444833, "comment_id": 89887180, "body": "Also, I think your \\n&#39;s will be passed to the shell as single newline characters, and I think you want the literal backslashes and n&#39;s. You may need to use %q instead of %Q."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1532197428, "post_id": 51444833, "comment_id": 89887199, "body": "Also, you can&#39;t expect 2 system calls to communicate with each other; each shells out to the OS, runs the command, waits for it to complete. If you need to pipe one&#39;s output to the other, you need to specify them in a single call to system."}], "answers": [{"tags": [], "owner": {"reputation": 2659, "user_id": 6011193, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f5bbeb4df4522c60223f1de868b7ab37?s=128&d=identicon&r=PG&f=1", "display_name": "chikadance", "link": "https://stackoverflow.com/users/6011193/chikadance"}, "is_accepted": false, "score": 1, "last_activity_date": 1532232008, "creation_date": 1532232008, "answer_id": 51461923, "question_id": 51444833, "link": "https://stackoverflow.com/questions/51444833/bash-pipe-doesnt-work-in-ruby-system-and-doesnt-work-in-ruby-shellsystem/51461923#51461923", "title": "bash pipe doesn&#39;t work in ruby #system and doesn&#39;t work in ruby Shell#system", "body": "<p>I find the solution,when use too complex bash code, i should use %q() instead of %Q, following code will work:</p>\n\n<pre><code>system %q(xprop -notype 32c -id ) + 111149125.to_s + %q( _NET_WM_ICON \\\n                  |    perl -0777 -pe '@_=/\\d+/g;\n                       printf \"P7\\nWIDTH %d\\nHEIGHT %d\\nDEPTH 4\\nMAXVAL 255\\nTUPLTYPE RGB_ALPHA\\nENDHDR\\n\", splice@_,0,2;\n                       $_=pack \"N*\", @_;\n                       s/(.)(...)/$2$1/gs' \\\n                  | convert pam:- jpg:-)\n</code></pre>\n"}], "owner": {"reputation": 2659, "user_id": 6011193, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/f5bbeb4df4522c60223f1de868b7ab37?s=128&d=identicon&r=PG&f=1", "display_name": "chikadance", "link": "https://stackoverflow.com/users/6011193/chikadance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1532232008, "creation_date": 1532097070, "last_edit_date": 1532101291, "question_id": 51444833, "link": "https://stackoverflow.com/questions/51444833/bash-pipe-doesnt-work-in-ruby-system-and-doesnt-work-in-ruby-shellsystem", "title": "bash pipe doesn&#39;t work in ruby #system and doesn&#39;t work in ruby Shell#system", "body": "<p>I use following code to get opened app icon</p>\n\n<pre><code>xprop -notype 32c -id 109051905 _NET_WM_ICON \\\n                  |    perl -0777 -pe '@_=/\\d+/g;\n                       printf \"P7\\nWIDTH %d\\nHEIGHT %d\\nDEPTH 4\\nMAXVAL 255\\nTUPLTYPE RGB_ALPHA\\nENDHDR\\n\", splice@_,0,2;\n                       $_=pack \"N*\", @_;\n                       s/(.)(...)/$2$1/gs' \\\n                  | convert pam:- /tmp/icon.png\n</code></pre>\n\n<p>it work</p>\n\n<p>but when i invoke above bash in ruby, the pipe doesn't work</p>\n\n<pre><code>system %Q(xprop -notype 32c -id 109051905 _NET_WM_ICON \\\n                  |    perl -0777 -pe '@_=/\\d+/g;\n                       printf \"P7\\nWIDTH %d\\nHEIGHT %d\\nDEPTH 4\\nMAXVAL 255\\nTUPLTYPE RGB_ALPHA\\nENDHDR\\n\", splice@_,0,2;\n                       $_=pack \"N*\", @_;\n                       s/(.)(...)/$2$1/gs' \\\n                  | convert pam:- /tmp/icon.png)\n</code></pre>\n\n<p>it raise</p>\n\n<pre><code>roroco@roroco ~/Downloads $ ruby /home/roroco/Dropbox/rb/ro_cmds_global/chk/v.rb\nconvert: negative or zero image size `-' @ error/pnm.c/ReadPNMImage/415.\nconvert: no images defined `/tmp/icon.png' @ error/convert.c/ConvertImageCommand/3210.\n</code></pre>\n\n<p>and I try use Shell#system, it still doesn't work</p>\n\n<pre><code>require 'shell'\nsh = Shell.new\nsh.system(%Q(xprop -notype 32c -id 109051905 _NET_WM_ICON )) | sh.system(%Q(\n                   perl -0777 -pe '@_=/\\d+/g;\n                       printf \"P7\\nWIDTH %d\\nHEIGHT %d\\nDEPTH 4\\nMAXVAL 255\\nTUPLTYPE RGB_ALPHA\\nENDHDR\\n\", splice@_,0,2;\n                       $_=pack \"N*\", @_;\n                       s/(.)(...)/$2$1/gs')) |\n    sh.system(%Q(convert pam:- /tmp/icon.png))\n</code></pre>\n\n<p>it raise</p>\n\n<pre><code>roroco@roroco ~/Downloads $ ruby /home/roroco/Dropbox/rb/ro_cmds_global/chk/v2.rb\nshell(#&lt;Th:0x000000015de228&gt;): /usr/bin/xprop -notype 32c -id 109051905 _NET_WM_ICON\nshell(#&lt;Th:0x000000015de228&gt;): /bin/sh -c \n                   perl -0777 -pe '@_=/d+/g;\n                       printf \"P7\nWIDTH %d\nHEIGHT %d\nDEPTH 4\nMAXVAL 255\nTUPLTYPE RGB_ALPHA\nENDHDR\n\", splice@_,0,2;\n                       $_=pack \"N*\", @_;\n                       s/(.)(...)/$2$1/gs'\nshell(#&lt;Th:0x000000015de228&gt;): /usr/bin/convert pam:- /tmp/icon.png\nshell(#&lt;Th:0x000000015de228&gt;): Process finishing, but active shell exists\n                               You can use Shell#transact or Shell#check_point for more safe execution.\nconvert: negative or zero image size `-' @ error/pnm.c/ReadPNMImage/415.\nconvert: no images defined `/tmp/icon.png' @ error/convert.c/ConvertImageCommand/3210.\n</code></pre>\n\n<p><strong>so how to may it work</strong></p>\n\n<p>the I find the reason is, use I use ruby #system, the <code>@_</code> is empty in perl script, so I think it's perl receive input question, how to fix it?</p>\n\n<p>I can convert perl script to ruby and maybe it work I guess, but I wanna know why perl cannot receive input in ruby #system</p>\n"}, {"tags": ["perl", "perl-module", "jira-rest-api"], "comments": [{"owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "edited": false, "score": 0, "creation_date": 1532074689, "post_id": 51436865, "comment_id": 89846059, "body": "have you tried <code>custom_field =&gt; { &#39;Epic Link&#39; =&gt; &#39;Application Framework&#39; }</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1532076280, "post_id": 51436865, "comment_id": 89847017, "body": "It seems like you&#39;re not supposed to put custom fields into a <code>custom_field</code> key with its own hash reference and their display names. Instead, use the internal name of the field directly in the <code>fields</code> hash. I don&#39;t recall the naming scheme, but those fields have lots of numbers in their names."}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "edited": false, "score": 0, "creation_date": 1532078046, "post_id": 51436865, "comment_id": 89848135, "body": "Thanks for your support. Now it&#39;s working fine. after adding into fields =&gt; {         project   =&gt; { key =&gt; &#39;TIME&#39; },         issuetype =&gt; { name =&gt; &#39;Task&#39; },         summary   =&gt; &#39;20-7-2018 checking field persent or not&#39;,         description =&gt; &#39;test&#39;,         customfield_11197 =&gt; &#39;VIGIL-217&#39;     },"}], "answers": [{"comments": [{"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "edited": false, "score": 0, "creation_date": 1532077325, "post_id": 51438162, "comment_id": 89847680, "body": "Stil I am facing same also shared below error log.                                  JIRA::REST Error[400 - Bad Request]: - [custom_field] Field &#39;custom_field&#39; cannot be set. It is not on the appropriate screen, or unknown.  at copy_of_new-jira.pl line 15. &gt;&gt; /usr/lib64/perl5/Crypt/SSLeay.pm:37: sub Crypt::SSLeay::CTX::DESTROY  { shift-&gt;free; }"}, {"owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "edited": false, "score": 0, "creation_date": 1532078064, "post_id": 51438162, "comment_id": 89848143, "body": "Thanks for your support. Now it&#39;s working fine. after adding into fields =&gt; { project =&gt; { key =&gt; &#39;TIME&#39; }, issuetype =&gt; { name =&gt; &#39;Task&#39; }, summary =&gt; &#39;20-7-2018 checking field persent or not&#39;, description =&gt; &#39;test&#39;, customfield_11197 =&gt; &#39;VIGIL-217&#39; }"}], "tags": [], "owner": {"reputation": 8974, "user_id": 205207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1OH7W.jpg?s=128&g=1", "display_name": "i alarmed alien", "link": "https://stackoverflow.com/users/205207/i-alarmed-alien"}, "is_accepted": false, "score": 2, "last_activity_date": 1532074930, "creation_date": 1532074930, "answer_id": 51438162, "question_id": 51436865, "link": "https://stackoverflow.com/questions/51436865/perl-script-with-jira-rest-api-to-create-jira-along-with-custom-field/51438162#51438162", "title": "Perl script with JIRA REST-API to create JIRA along with custom field", "body": "<p>It looks like you're missing some quote marks in your <code>fields-&gt;custom_field</code> data structure:</p>\n\n<pre><code># Create the ticket using post function \nmy $issue = $jira-&gt;POST('/issue', undef, {\n    fields =&gt; {\n        project   =&gt; { key =&gt; 'TIME' },\n        issuetype =&gt; { name =&gt; 'Task' },\n        summary   =&gt; '20-7-2018 checking field persent or not',\n        description =&gt; 'test',\n        custom_field =&gt; { 'Epic Link' =&gt; 'Application Framework'},\n    },\n});\n</code></pre>\n\n<p>There's also a typo in <code>summary</code>, but presumably that doesn't matter too much.</p>\n"}], "owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532074930, "creation_date": 1532070164, "last_edit_date": 1532071733, "question_id": 51436865, "link": "https://stackoverflow.com/questions/51436865/perl-script-with-jira-rest-api-to-create-jira-along-with-custom-field", "title": "Perl script with JIRA REST-API to create JIRA along with custom field", "body": "<p>We are unable to create the new ticket in Jira using REST-API via Perl script.</p>\n\n<p>Note: Without custom field script successfully executing. please provide the suggestion to add a custom field in my script.</p>\n\n<p><strong>Screenshot for the custom field.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/7AEzh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7AEzh.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Error Message:</strong> </p>\n\n<p>JIRA::REST Error[400 - Bad Request]:\n- [custom_field] Field 'custom_field' cannot be set. It is not on the appropriate screen, or unknown.at copy_of_new-jira.pl line 16.</p>\n\n<p><strong>Perl Script :</strong></p>\n\n<pre><code>#Loading the modules from a specific location such that JIRA::REST.\n\n    use JIRA::Client::Automated;\n    use JIRA::REST;\n    use Data::Dumper;\n\n  #Login details about Jira server\n\n    my $jira = JIRA::REST-&gt;new({\n        url      =&gt; 'https://xxxxxxxx.xxxxx.com',\n        username =&gt; 'xxxxxxx',\n        password =&gt; 'xxxxxxx',\n    });\n\n    # Create the ticket using post function \n    my $issue = $jira-&gt;POST('/issue', undef, {\n        fields =&gt; {\n            project   =&gt; { key =&gt; 'TIME' },\n            issuetype =&gt; { name =&gt; 'Task' },\n            summary   =&gt; '20-7-2018 checking field persent or not',\n            description =&gt; 'test',\n            custom_field =&gt; { Epic Link =&gt; 'Application Framework'},\n        },\n    });\n</code></pre>\n"}, {"tags": ["regex", "string", "perl", "reverse"], "comments": [{"owner": {"reputation": 66, "user_id": 10108958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a213efe4f76c64484da57ac6c764fb?s=128&d=identicon&r=PG&f=1", "display_name": "aauutthh", "link": "https://stackoverflow.com/users/10108958/aauutthh"}, "edited": false, "score": 0, "creation_date": 1532068956, "post_id": 51436521, "comment_id": 89842908, "body": "I know I can write the script like this:   perl -pe &#39;s/0x([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})/0x\\4\\3&zwnj;&#8203;\\2\\1/g&#39; ."}, {"owner": {"reputation": 66, "user_id": 10108958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a213efe4f76c64484da57ac6c764fb?s=128&d=identicon&r=PG&f=1", "display_name": "aauutthh", "link": "https://stackoverflow.com/users/10108958/aauutthh"}, "edited": false, "score": 0, "creation_date": 1532069267, "post_id": 51436521, "comment_id": 89843076, "body": "Is there any solution backreference to repeated group?"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1532069639, "post_id": 51436521, "comment_id": 89843264, "body": "No, there is no way to reference an unknown amount of captured values of a repeated capturing group, since there is no stack with those values, only the last one is kept in the group memory buffer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532071487, "post_id": 51436521, "comment_id": 89844251, "body": "Alternative: <code>perl -pe&#39;s&#47;0x\\K([\\da-f]{8})&#47; unpack &quot;H*&quot;, pack &quot;V&quot;, hex $1 &#47;eg&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 0, "last_activity_date": 1532084664, "last_edit_date": 1532084664, "creation_date": 1532069183, "answer_id": 51436601, "question_id": 51436521, "link": "https://stackoverflow.com/questions/51436521/is-it-possible-backreference-to-repeated-group-in-perl-subsitution-regexp-patter/51436601#51436601", "title": "Is it possible backreference to repeated group in perl subsitution regexp pattern", "body": "<p>The number of groups that you can refer to from the replacement pattern is limited to the number of capturing groups defined in the pattern. See more details about <a href=\"https://www.regular-expressions.info/captureall.html\" rel=\"nofollow noreferrer\">repeated capturing groups here</a>. You have only 1 capturing group in the <code>0x([\\da-f]{2}){4}</code> pattern, and that means you cannot use a <code>$2</code>, or <code>$3</code> placeholders in the replacement pattern.</p>\n\n<p>You may use several capturing groups because you have a <em>fixed</em> number of repetitions (only four set by the <code>{4}</code> quantifier):</p>\n\n<pre><code>echo \"0x4e46436b|0x6669746f|0x74616369|0x416e6f69|0x624f796e|0x7463656a\" | \\\n  perl -pe 's/0x([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})/0x$4$3$2$1/g'\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/3IqqHk\" rel=\"nofollow noreferrer\">online demo</a></p>\n\n<p>Note that it is <a href=\"https://perldoc.perl.org/perlre.html#Warning-on-%5c1-Instead-of-%241\" rel=\"nofollow noreferrer\">advised to use <code>$n</code> notation</a> for placeholders inside the replacement pattern when using perl.</p>\n"}], "owner": {"reputation": 66, "user_id": 10108958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a213efe4f76c64484da57ac6c764fb?s=128&d=identicon&r=PG&f=1", "display_name": "aauutthh", "link": "https://stackoverflow.com/users/10108958/aauutthh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 51436601, "answer_count": 1, "score": 1, "last_activity_date": 1532084664, "creation_date": 1532068889, "last_edit_date": 1532078298, "question_id": 51436521, "link": "https://stackoverflow.com/questions/51436521/is-it-possible-backreference-to-repeated-group-in-perl-subsitution-regexp-patter", "title": "Is it possible backreference to repeated group in perl subsitution regexp pattern", "body": "<p>I ran the script like this:</p>\n\n<pre><code>echo \"0x4e46436b|0x6669746f|0x74616369|0x416e6f69|0x624f796e|0x7463656a\"|perl -pe 's/0x([\\da-f]{2}){4}/0x\\4\\3\\2\\1/g'\n</code></pre>\n\n<p>and I got this:</p>\n\n<pre><code>0x6b|0x6f|0x69|0x69|0x6e|0x6a\n</code></pre>\n\n<p>how to fix the script to get result like this:</p>\n\n<pre><code>0x6b43464e|0x6f746966|0x69636174|0x696f6e41|0x6e794f62|0x6a656374\n</code></pre>\n\n<p>Thanks!</p>\n\n<hr>\n\n<p>Alternative: perl -pe's/0x\\K([\\da-f]{8})/ unpack \"H*\", pack \"V\", hex $1 /eg' \u2013 ikegami </p>\n\n<p>Thank to ikegami! It's brand new usage of subsitution for me. It works!</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1532093076, "post_id": 51437993, "comment_id": 89857006, "body": "Hello, thanks for the fast reply, but will this work with mojolicious? I am asking because when you create a mojolicious app with mojo generate app MyWebApp will create the next files <a href=\"https://pastebin.com/gW9REeQj\" rel=\"nofollow noreferrer\">pastebin.com/gW9REeQj</a>   As you can see even if the app name is MyWebApp, mojolicious creates some files with My_Web_App and some with MyWebApp . Sorry if my explanation is not very well."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1532103726, "post_id": 51437993, "comment_id": 89863638, "body": "Yes, I tested it."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1532105091, "post_id": 51437993, "comment_id": 89864324, "body": "hmm, for some reason i tried and the old app name still remains.  first app: <a href=\"https://pastebin.com/48Y34Cxc\" rel=\"nofollow noreferrer\">pastebin.com/48Y34Cxc</a> after executing the comands I get this <a href=\"https://pastebin.com/9L0GfH7b\" rel=\"nofollow noreferrer\">pastebin.com/9L0GfH7b</a> . Steps I&#39;ve made: 1) cd into app folder, execute grep -l -r MyWebApp | xargs perl -i -lpe&#39;s/MyWebApp/CoolNewWebApp/&#39; 2) find | xargs rename &#39;s/MyWebApp/CoolNewWebApp/&#39; 3) cd out of app folder and execute mv my_web_app cool_new_web_app"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1532110175, "post_id": 51437993, "comment_id": 89866879, "body": "I&#39;m very sorry, you are right; I overlooked these two files, that&#39;s totally my mistake. I have corrected the answer."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1532116556, "post_id": 51437993, "comment_id": 89869557, "body": "Cool! Thank you!"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 3, "last_activity_date": 1532110163, "last_edit_date": 1532110163, "creation_date": 1532074314, "answer_id": 51437993, "question_id": 51436340, "link": "https://stackoverflow.com/questions/51436340/perl-mojolicious-rename-app-script/51437993#51437993", "title": "Perl Mojolicious Rename App Script", "body": "<pre><code># change file contents\ngrep -l -r MyWebApp | xargs perl -i -lpe's/MyWebApp/CoolNewWebApp/'\n\n# change file names\nfind | xargs rename 's/MyWebApp/CoolNewWebApp/'\nfind | xargs rename 's/my_web_app/cool_new_web_app/'\n</code></pre>\n\n<p>You get the rename command with <code>cpanm File::Rename</code>.</p>\n"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 51437993, "answer_count": 1, "score": 1, "last_activity_date": 1532110163, "creation_date": 1532068150, "question_id": 51436340, "link": "https://stackoverflow.com/questions/51436340/perl-mojolicious-rename-app-script", "title": "Perl Mojolicious Rename App Script", "body": "<p>Is it possible to rename a mojolicious app? I am generating an app with<br>\n    <strong>mojo generate app MyWebApp</strong><br>\nand after I while I would like to rename the app and all the files that contains my MyWebApp(including the use MyWebApp::Controller::Name etc.<br>\nIs it possible? </p>\n"}, {"tags": ["perl", "control-c"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532064165, "post_id": 51435271, "comment_id": 89841071, "body": "Can send <code>kill</code> to whatever processes need be terminated from the signal handler (or use a module for process management). Can you show how you launch jobs and what they are?"}, {"owner": {"reputation": 35, "user_id": 9267188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0914d596ba60b1988e61b6348ab8898e?s=128&d=identicon&r=PG&f=1", "display_name": "Chinnu", "link": "https://stackoverflow.com/users/9267188/chinnu"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532067321, "post_id": 51435271, "comment_id": 89842139, "body": "I assign my $command = &quot;bsub -q normal -g GROUPID &lt;command&gt;&quot;; system($command);"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532073460, "post_id": 51435271, "comment_id": 89845402, "body": "Thank you but please edit the question to add that to it.  Further detail would be helpful as well."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1536819678, "last_edit_date": 1536819678, "creation_date": 1532073336, "answer_id": 51437739, "question_id": 51435271, "link": "https://stackoverflow.com/questions/51435271/perl-script-to-stop-bsub-job-when-control-c-is-pressed/51437739#51437739", "title": "Perl script to stop bsub job when control c is pressed", "body": "<p>Try to send <code>SIGTERM</code> via <a href=\"https://perldoc.perl.org/functions/kill.html\" rel=\"nofollow noreferrer\">kill</a> to the process group from the signal handler for Ctrl-C</p>\n\n<pre><code>$SIG{INT} = sub { kill 15, -$gpid };  # $gpid used in bsub command\n</code></pre>\n\n<p>Whether this will work, and how reliably, depends on many details of what those jobs are and do.</p>\n\n<p>An example of how a process can (unknowingly) dodge the bullet is seen below, where the child process changes its process group ID. It does this for a demo of signalling the group but then that also demonstrates a loophole in signalling the group. </p>\n\n<p>An example</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $pid;\n\n$SIG{INT} = sub { \n    say \"Got $_[0]. Send TERM to process group with $pid\"; \n    kill 15, -$pid;\n}; \n\n$pid = fork // die \"Can't fork: $!\";\n\nif ($pid == 0) {\n    $SIG{INT} = 'IGNORE';\n    setpgrp 0, $$;\n    say \"\\tChild's process group: \", getpgrp;\n    sleep 10; \n    say \"\\tkid done\"; \n    exit;\n}; \n\nsay \"Parent $$ started $pid\";\n\nsleep 5; \nsleep 3;   # return to sleep after signal is handled\n\nsay \"done\";\n</code></pre>\n\n<p>When <code>kill</code> is sent  to a negated PID (or with a negative signal) it goes to that process group. Here I use the child's <code>$pid</code> (to be assigned) and in the child set its group id to that (<code>$$</code>).</p>\n\n<p>The signal has to be dealt with in the child as well since the forked process inherits the handler. </p>\n\n<p>With Ctrl-C pressed after a few seconds the output is                </p>\n\n<pre>\nParent 10450 started 10451\n        Child's process group: 10451\n^CGot INT. Send TERM to group 10451\ndone\n</pre>\n\n<p>where <code>done</code> is printed 3 seconds after the previous prints. The <code>kid done</code> never comes.</p>\n\n<p>If you want the parent to terminate as well add an <code>exit</code> or such to the signal handler.</p>\n\n<p>As noted, this may fail, for one thing since the child can simply change its group. A more reliable way would be to catalog jobs that may get triggered and then find their PIDs at runtime, so to terminate them. A useful tool for this is <a href=\"https://metacpan.org/pod/release/DURIST/Proc-ProcessTable-0.39/ProcessTable.pm\" rel=\"nofollow noreferrer\">Proc::ProcessTable</a>. Some examples of hunting down processes are in <a href=\"https://stackoverflow.com/a/49380136/4653379\">this post</a> and <a href=\"https://stackoverflow.com/a/43796534/4653379\">this post</a>.</p>\n"}], "owner": {"reputation": 35, "user_id": 9267188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0914d596ba60b1988e61b6348ab8898e?s=128&d=identicon&r=PG&f=1", "display_name": "Chinnu", "link": "https://stackoverflow.com/users/9267188/chinnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1536819678, "creation_date": 1532062254, "last_edit_date": 1532410309, "question_id": 51435271, "link": "https://stackoverflow.com/questions/51435271/perl-script-to-stop-bsub-job-when-control-c-is-pressed", "title": "Perl script to stop bsub job when control c is pressed", "body": "<p>I am running a perl script which internally launches bsub jobs . I wanted to kill all jobs launched by this perl script when control c is pressed in unix terminal when i run the perl script based on the group id .</p>\n\n<p>Please advise.</p>\n\n<p>Thanks &amp; Regards\namrutha </p>\n\n<hr>\n\n<p><em>Edit: code copied from a comment</em></p>\n\n<pre><code>my $command = \"bsub -q normal -g GROUPID &lt;command&gt;\";\n\nsystem($command); \n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1532181022, "post_id": 51436335, "comment_id": 89882904, "body": "Wow thanks, did not not know <code>split</code> could take a third argument"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 9, "last_activity_date": 1532098056, "last_edit_date": 1532098056, "creation_date": 1532068127, "answer_id": 51436335, "question_id": 51434850, "link": "https://stackoverflow.com/questions/51434850/split-does-not-return-empty-elements/51436335#51436335", "title": "split does not return empty elements", "body": "<p><a href=\"https://perldoc.pl/functions/split\" rel=\"nofollow noreferrer\"><code>split</code></a>'s third parameter says how many elements to produce:</p>\n\n<blockquote>\n  <h3><code>split /PATTERN/,EXPR,LIMIT</code></h3>\n  \n  <p>...\n  If <code>LIMIT</code> is negative, it is treated as if it were instead arbitrarily large; as many fields as possible are produced.</p>\n  \n  <p>If <code>LIMIT</code> is omitted (or, equivalently, zero), then it is usually treated as if it were instead negative but with the exception that trailing empty fields are stripped (empty leading fields are always preserved); if all fields are empty, then all fields are considered to be trailing (and are thus stripped in this case). </p>\n</blockquote>\n\n<p>It defaults to <code>0</code>, which means as many as possible <em>but leaving off any trailing empty elements</em>.</p>\n\n<p>You can pass <code>-1</code> as the third argument to <code>split</code> to suppress this behavior.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1532059025, "question_id": 457335}, "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 51436335, "answer_count": 1, "score": 1, "last_activity_date": 1532098056, "creation_date": 1532058566, "question_id": 51434850, "link": "https://stackoverflow.com/questions/51434850/split-does-not-return-empty-elements", "title": "split does not return empty elements", "body": "<p>Why do these not all return bbb?</p>\n\n<pre><code>$ perl -e '$a=\"  \"; print map { \"b\" } split / /, $a;'\n&lt;&lt;nothing&gt;&gt;\n$ perl -e '$a=\",,\"; print map { \"b\" } split /,/, $a;'\n&lt;&lt;nothing&gt;&gt;\n$ perl -e '$a=\"  a\"; print map { \"b\" } split / /, $a;'\nbbb\n$ perl -e '$a=\",,a\"; print map { \"b\" } split /,/, $a;'\nbbb\n</code></pre>\n\n<p>I would have expected <code>split</code> to return an array with 3 elements in all cases.</p>\n\n<pre><code>$ perl -V\nSummary of my perl5 (revision 5 version 24 subversion 1) configuration:\n</code></pre>\n"}, {"tags": ["bash", "git", "shell", "perl"], "answers": [{"tags": [], "owner": {"reputation": 1034879, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 0, "last_activity_date": 1542404190, "last_edit_date": 1592644375, "creation_date": 1542404190, "answer_id": 53345747, "question_id": 51432429, "link": "https://stackoverflow.com/questions/51432429/how-to-extend-git-windows-with-scripts-that-inherit-shell-variables/53345747#53345747", "title": "How to extend Git (Windows) with scripts that inherit shell variables?", "body": "<blockquote>\n<p>What shell is <code>git my-script</code> invoking that doesn't inherit my <code>PERL5LIB</code> variable?</p>\n</blockquote>\n<p>Because Git has its own Perl.</p>\n<p>That is made more explicit in Git 2.20 (Q4 2018):</p>\n<p>See <a href=\"https://github.com/git/git/commit/0e218f91c299b0bffa281d3449884a824819a201\" rel=\"nofollow noreferrer\">commit 0e218f9</a>, <a href=\"https://github.com/git/git/commit/bdfbb0ea932d1ec479474cc7928ec9d47ea89e7b\" rel=\"nofollow noreferrer\">commit bdfbb0e</a>, <a href=\"https://github.com/git/git/commit/70fc5793dfdf8ba8586ca130674f6896eb3eb37a\" rel=\"nofollow noreferrer\">commit 70fc579</a>, <a href=\"https://github.com/git/git/commit/409670f34ed5a2bc4f508f3aee9f809922b339dc\" rel=\"nofollow noreferrer\">commit 409670f</a> (30 Oct 2018) by <a href=\"https://github.com/dscho\" rel=\"nofollow noreferrer\">Johannes Schindelin (<code>dscho</code>)</a>.<br />\n<sup>(Merged by <a href=\"https://github.com/gitster\" rel=\"nofollow noreferrer\">Junio C Hamano -- <code>gitster</code> --</a> in <a href=\"https://github.com/git/git/commit/6c268fdda9dcc421e2bee1ce76496d3e9f96397f\" rel=\"nofollow noreferrer\">commit 6c268fd</a>, 13 Nov 2018)</sup></p>\n<blockquote>\n<h2><code>mingw</code>: unset <code>PERL5LIB</code> by default</h2>\n<p>Git for Windows ships with its own Perl interpreter, and insists on using it, so it will most likely wreak havoc if <code>PERL5LIB</code> is set before launching Git.</p>\n<p>Let's just unset that environment variables when spawning processes.</p>\n<p>To make this feature extensible (and overrideable), there is a new config setting <code>core.unsetenvvars</code> that allows specifying a comma-separated list of names to unset before spawning processes.</p>\n<p>Reported by Gabriel Fuhrmann.</p>\n</blockquote>\n<p>In your case, you will be able to set <code>core.unsetenvvar</code> to &quot;empty&quot; in order to <em>not</em> unset <code>PERL5LIB</code>, but you will also have to adjust <code>PERL5LIB</code> to <a href=\"https://github.com/git/git/blob/53f9a3e157dbbc901a02ac2c73346d375e24978c/wrap-for-bin.sh#L17\" rel=\"nofollow noreferrer\"><code>GITPERLLIB</code></a> plus your own folders.</p>\n"}], "owner": {"reputation": 23, "user_id": 10107933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c19851dfbb8c75fa4538f1b889dbe56?s=128&d=identicon&r=PG&f=1", "display_name": "LeboyX", "link": "https://stackoverflow.com/users/10107933/leboyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 53345747, "answer_count": 1, "score": 2, "last_activity_date": 1542404190, "creation_date": 1532038339, "last_edit_date": 1532038970, "question_id": 51432429, "link": "https://stackoverflow.com/questions/51432429/how-to-extend-git-windows-with-scripts-that-inherit-shell-variables", "title": "How to extend Git (Windows) with scripts that inherit shell variables?", "body": "<p>I'm a developer running Git for Windows v2.12.2(2) and using the GitBash program that comes with it for all my shell needs. The version of <code>bash</code> available in this shell appears to be v4.4.12(1). I'm on Windows 10. </p>\n\n<p>I've got a Perl script I wish for Git to pickup and execute when I run the command <code>git my-script</code>. I've ensured the script is on my <code>PATH</code>, and I'm able to run <code>git my-script</code> and see that my script is running. But, my script requires custom modules located at a couple places on my filesystem, and which it cannot find when run via <code>git my-script</code>. I know I have all my shell variables configured correctly; if I run the script directly (i.e. <code>perl /path/to/git-my-script</code>), it works without an issue. </p>\n\n<p>For the purposes of this question, take this very simple script: </p>\n\n<pre><code>#!/usr/bin/env perl\n\n# Print all directories searched for perl modules\nprint \"$_\\n\" for @INC;\n</code></pre>\n\n<p>When run via <code>perl /path/to/my-script</code>, it outputs all directories as expected. When run via <code>git my-script</code>, it outputs the same directories <em>except</em> for the ones defined in my <code>PERL5LIB</code> variable (which are the ones needed). </p>\n\n<p>What shell is <code>git my-script</code> invoking that doesn't inherit my PERL5LIB variable? Is this a windows-specific problem? Is there some other config file I need to adjust, or some system variable I must define?</p>\n\n<p><strong>EDIT</strong>: I suspect <code>git</code> invokes <code>/bin/sh</code>, which keeps complaining about <code>__git_ps1</code> not being a defined function. When I define it as <code>__git_ps1 () { return; }</code>, the <code>PERL5LIB</code> variable suddenly becomes available.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": true, "score": 4, "last_activity_date": 1532032156, "creation_date": 1532032156, "answer_id": 51431217, "question_id": 51430856, "link": "https://stackoverflow.com/questions/51430856/what-does-setting-a-class-module-name-before-a-variable-definition-do-in-perl/51431217#51431217", "title": "What does setting a class/module name before a variable definition do in Perl?", "body": "<p>It provokes a compile time error, in cases the structure/object is accessed in some invalid way.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/functions/my.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/my.html</a></p>\n\n<blockquote>\n<pre><code>my VARLIST\nmy TYPE VARLIST\nmy VARLIST : ATTRS\nmy TYPE VARLIST : ATTRS\n</code></pre>\n  \n  <p>A <code>my</code> declares the listed variables to be local (lexically) to the enclosing block, file, or eval. If more than one variable is listed, the list must be placed in parentheses.</p>\n  \n  <p>The exact semantics and interface of TYPE and ATTRS are still evolving. TYPE may be a bareword, a constant declared with <code>use constant</code> , or <code>__PACKAGE__</code>. It is currently bound to the use of the <code>fields</code> pragma, and attributes are handled using the <code>attributes</code> pragma, or starting from Perl 5.8.0 also via the <code>Attribute::Handlers</code> module. </p>\n</blockquote>\n\n<p>And if you jump at the documentation on <code>fields</code> at <a href=\"https://perldoc.perl.org/fields.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/fields.html</a> you get this example:</p>\n\n<pre><code>{\n    package Foo;\n    use fields qw(foo bar _Foo_private);\n    sub new {\n        my Foo $self = shift;\n        unless (ref $self) {\n            $self = fields::new($self);\n            $self-&gt;{_Foo_private} = \"this is Foo's secret\";\n        }\n        $self-&gt;{foo} = 10;\n        $self-&gt;{bar} = 20;\n        return $self;\n    }\n}\nmy $var = Foo-&gt;new;\n$var-&gt;{foo} = 42;\n\n# this will generate a run-time error\n$var-&gt;{zap} = 42;\n\n# this will generate a compile-time error\nmy Foo $foo = Foo-&gt;new;\n$foo-&gt;{zap} = 24;\n</code></pre>\n"}], "owner": {"reputation": 138, "user_id": 7166553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9e655bd2a1c7f2de81107af834b2fe?s=128&d=identicon&r=PG&f=1", "display_name": "mfalkus", "link": "https://stackoverflow.com/users/7166553/mfalkus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 51431217, "answer_count": 1, "score": 6, "last_activity_date": 1532032156, "creation_date": 1532030466, "question_id": 51430856, "link": "https://stackoverflow.com/questions/51430856/what-does-setting-a-class-module-name-before-a-variable-definition-do-in-perl", "title": "What does setting a class/module name before a variable definition do in Perl?", "body": "<p>Whilst working with the <code>Net::SIP</code> module I noticed in some of the functions there is code that defines the class of an argument. For example:</p>\n\n<pre><code>sub can_deliver_to {\n    my Net::SIP::Leg $self = shift;\n    [...]\n    return 1;\n}\n</code></pre>\n\n<p>What purpose does specifying <code>Net::SIP::Leg</code> have on defining <code>$self</code>? Is it just syntactic sugar to aid the developer in knowing what type of variable <code>$self</code> should be?</p>\n"}, {"tags": ["json", "perl", "data-dumper"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1532028788, "post_id": 51430448, "comment_id": 89831929, "body": "I can&#39;t reproduce the problem with Perl 5.26.0 / Data::Dumper 2.167 / JSON 2.97001. Possibly this is a bug that has since been fixed."}], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 4380856, "user_type": "registered", "profile_image": "https://graph.facebook.com/649060492/picture?type=large", "display_name": "Sergey Martynov", "link": "https://stackoverflow.com/users/4380856/sergey-martynov"}, "is_accepted": false, "score": 5, "last_activity_date": 1532042283, "creation_date": 1532042283, "answer_id": 51432974, "question_id": 51430448, "link": "https://stackoverflow.com/questions/51430448/perl-json-encoding-has-quotes-for-float/51432974#51432974", "title": "Perl Json encoding has quotes for float", "body": "<p>This is an \"expected\" strange behaviour which happens (in old versions of perl) due to how perl handles variables. Each variable may have number and string representations, which may be stored in memory simultaneously. In most cases perl will use proper representation depending on the context.</p>\n\n<p>When you assign <code>$t</code> a float value, only the number representation is stored. This is why first <code>encode_json</code> behaves as expected. Then dumping the variable creates string representation which is also stored in memory. It does not remove number representation, but in the second call <code>encode_json</code> cannot tell which representation to use and takes string.</p>\n\n<p><strong>Once again perl 5.18 is 5 years old now, and this behaviour was fixed in newer versions on perl, so my suggestion is to use recent versions.</strong></p>\n\n<p>See <a href=\"https://www.perlmonks.org/?node_id=909619\" rel=\"noreferrer\">https://www.perlmonks.org/?node_id=909619</a> for detailed discussion.</p>\n"}], "owner": {"reputation": 171, "user_id": 152216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2614ff952030ac92e1070afd83a72ed0?s=128&d=identicon&r=PG", "display_name": "clintonm9", "link": "https://stackoverflow.com/users/152216/clintonm9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1532042283, "creation_date": 1532028454, "question_id": 51430448, "link": "https://stackoverflow.com/questions/51430448/perl-json-encoding-has-quotes-for-float", "title": "Perl Json encoding has quotes for float", "body": "<p><code>perl version 5.18</code></p>\n\n<p>I am having an issue with the perl JSON encoder and putting quotes around a float. </p>\n\n<p>see sample code:</p>\n\n<pre><code>use JSON;\nuse Data::Dumper;\n\nmy $float = 1.2;\n\nmy $t = {\n  float =&gt; $float\n};  \n\nmy $json1 = encode_json($t);\nprint Dumper $t;\nmy $json2 = encode_json($t);\nprint $json1 . \"\\n\";\nprint $json2 . \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'float' =&gt; '1.2',\n          'integer' =&gt; 1\n        };\n{\"float\":1.2,\"integer\":1}\n{\"float\":\"1.2\",\"integer\":1}\n</code></pre>\n\n<p>As you can see after using Dumper the JSON encoder adds the quotes. Any ideas why this would happen?</p>\n\n<p>Not in the sample code above, but in production, I can not remove the quotes unless I add .01. Even *= *1 does not work.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1532025925, "post_id": 51429753, "comment_id": 89830648, "body": "I don&#39;t understand. How does the script &quot;<i>buffer</i>&quot; empty lines and how does it get &quot;<i>confused</i>&quot;?  What does it mean that &quot;<i>prompts ... only check for a newline</i>&quot;? What do you want the script to do on &#39;empty ENTER&#39; (empty lines)?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 3, "creation_date": 1532026617, "post_id": 51429753, "comment_id": 89830995, "body": "Could you show a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>?"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532027005, "post_id": 51429753, "comment_id": 89831170, "body": "@zdim I think the OP means that users will sometimes just impatiently hit Return a bunch of times while the script is busy, and <code>&lt;STDIN&gt;</code> will read those newlines."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1532027192, "post_id": 51429753, "comment_id": 89831262, "body": "@duskwuff Right, I think I got that part, but I still don&#39;t see what the problem is and what they want to happen with that.  Ignore them?  That&#39;d be easy but then what are those &quot;<i>prompts</i>&quot; that &quot;<i>only check for a newline</i>&quot; anyway?"}, {"owner": {"reputation": 23, "user_id": 10107178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vbD3G6eeRw/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pEtSNvjCxkGvnFOYQ2VGZM_SaqXA/mo/photo.jpg?sz=128", "display_name": "Allan Menefee", "link": "https://stackoverflow.com/users/10107178/allan-menefee"}, "edited": false, "score": 0, "creation_date": 1532030094, "post_id": 51429753, "comment_id": 89832498, "body": "&quot;Press [ENTER] to continue.&quot;  The script is for testing a linux-based device and I have to wait for the user to check the results on external equipment before continuing."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1532032879, "post_id": 51429753, "comment_id": 89833683, "body": "how about using input validation to ensure the user has entered the required input?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532037356, "post_id": 51429753, "comment_id": 89835416, "body": "Ah, thank you, seems clear now.  But I see a  problem: When an ENTER-only prompt is (further in code) followed by another ENTER-only promtp, how can the script know whether the user hit ENTER multiple times on the first one (so to ignore the extra ones), or duly provided one answer for each?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1532037762, "post_id": 51429753, "comment_id": 89835536, "body": "For all I can tell, mob&#39;s answer deals with the &quot;problem&quot; in my comment above"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10107178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vbD3G6eeRw/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pEtSNvjCxkGvnFOYQ2VGZM_SaqXA/mo/photo.jpg?sz=128", "display_name": "Allan Menefee", "link": "https://stackoverflow.com/users/10107178/allan-menefee"}, "edited": false, "score": 0, "creation_date": 1532030047, "post_id": 51430028, "comment_id": 89832474, "body": "There are a lot of &quot;Press [ENTER] to continue&quot; prompts that wouldn&#39;t work for, and I&#39;m trying to make sure the user doesn&#39;t accidentally skip ten in a row, through impatience or stuck keys or checking if the terminal is responding."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1532026682, "creation_date": 1532026682, "answer_id": 51430028, "question_id": 51429753, "link": "https://stackoverflow.com/questions/51429753/discarding-extra-newlines-on-stdin-in-perl-without-termreadkey/51430028#51430028", "title": "Discarding extra newlines on STDIN in Perl without Term::ReadKey", "body": "<p>Is the easy solution to close <code>STDIN</code>?</p>\n\n<pre><code>print \"Are you sick of answering questions yet? [y/N] \";\n$ans = &lt;STDIN&gt;;\nif ($ans =~ /^y/i) {\n    close STDIN;\n    # from now on, further calls to &lt;STDIN&gt; will immediately\n    # return  undef  and will assign default values\n}\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 10107178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vbD3G6eeRw/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pEtSNvjCxkGvnFOYQ2VGZM_SaqXA/mo/photo.jpg?sz=128", "display_name": "Allan Menefee", "link": "https://stackoverflow.com/users/10107178/allan-menefee"}, "edited": false, "score": 0, "creation_date": 1532459621, "post_id": 51430958, "comment_id": 89980983, "body": "This worked perfectly, first try. I thought it might break the &quot;press Enter to continue&quot; functionality, but it appears to be a perfect fit.   I&#39;m trying to wrap my head around what it&#39;s doing, though. I&#39;m only somewhat familiar with Perl, so your help is much appreciated."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1532092203, "last_edit_date": 1532092203, "creation_date": 1532030894, "answer_id": 51430958, "question_id": 51429753, "link": "https://stackoverflow.com/questions/51429753/discarding-extra-newlines-on-stdin-in-perl-without-termreadkey/51430958#51430958", "title": "Discarding extra newlines on STDIN in Perl without Term::ReadKey", "body": "<p>The <a href=\"https://metacpan.org/pod/perlfunc#select-RBITS,WBITS,EBITS,TIMEOUT\" rel=\"nofollow noreferrer\">4-argument <code>select</code> function</a> is a little cryptic to use, but it can tell you, in many cases, whether there is any unread input waiting on an input filehandle. When it is time for your program to prompt the user for input, you can use <code>select</code> to see if there is any extra input on <code>STDIN</code>, and clear it before you prompt the user again and ask for additional input.</p>\n\n<pre><code>print \"Prompt #48: are you tired of answering questions yet? [y/N]\";\nclearSTDIN();\n$ans48 = &lt;STDIN&gt;;\n...\n\nsub clearSTDIN {\n    my $rin = \"\";\n    vec($rin, fileno(STDIN), 1) = 1;\n    my ($found,$left) = select $rin,undef,undef,0;\n    while ($found) {\n        # $found is non-zero if there is any input waiting on STDIN\n        my $waste = &lt;STDIN&gt;;   # consume a line of STDIN\n        ($found,$left) = select $rin,undef,undef,0;\n    }\n    seek STDIN,0,1;   # clears eof flag on STDIN handle\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10107178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1vbD3G6eeRw/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pEtSNvjCxkGvnFOYQ2VGZM_SaqXA/mo/photo.jpg?sz=128", "display_name": "Allan Menefee", "link": "https://stackoverflow.com/users/10107178/allan-menefee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 51430958, "answer_count": 2, "score": 2, "last_activity_date": 1532434721, "creation_date": 1532025565, "last_edit_date": 1532434721, "question_id": 51429753, "link": "https://stackoverflow.com/questions/51429753/discarding-extra-newlines-on-stdin-in-perl-without-termreadkey", "title": "Discarding extra newlines on STDIN in Perl without Term::ReadKey", "body": "<p>I've been digging through search engine results and Stack Overflow trying to solve this problem, and I've tried a dozen different \"solutions\" to no avail. I cannot use Term::ReadKey, as most solutions suggest, due to limitations of my environment.</p>\n\n<p>The existing Perl script does:</p>\n\n<pre><code>my $mode1=&lt;STDIN&gt;;\nchomp($mode1);\n</code></pre>\n\n<p>but many of the prompts don't evaluate the input - for example the user could enter an arbitrary string - but the script only chomps the input and then ignores the contents. Several prompts ask for input but pressing [ENTER] without entering input applies default values.</p>\n\n<p>If the user gets impatient while the script is in a blocking function or checks to see if the terminal is responding by pressing [ENTER], those newline characters advance the script inappropriately when the blocking function ends. I don't want to rely on user training instead of automation, and it seems like there must be an easy obvious solution but I can't seem to dig one up.</p>\n\n<p>It isn't originally my script, and its author admits it was quick-and-dirty to begin with.</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1532025462, "creation_date": 1532025462, "answer_id": 51429723, "question_id": 51429621, "link": "https://stackoverflow.com/questions/51429621/how-to-store-perl-hash-as-an-array-based-on-the-key-value/51429723#51429723", "title": "how to store perl hash as an array based on the key value", "body": "<p><code>$hash{\"dev1\"}</code> and <code>$hash{\"dev2\"}</code> are <em>array references</em>. To access the array, use the array dereferencing operator <code>@{...}</code>.</p>\n\n<pre><code>@dev1 = @{$hash{\"dev1\"}};\n@dev2 = @{$hash{\"dev2\"}};\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 8622811, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/b99f6d7e3938f5f31578cc93d42953f0?s=128&d=identicon&r=PG&f=1", "display_name": "Abhilasha", "link": "https://stackoverflow.com/users/8622811/abhilasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 51429723, "answer_count": 1, "score": 0, "last_activity_date": 1532025462, "creation_date": 1532025016, "question_id": 51429621, "link": "https://stackoverflow.com/questions/51429621/how-to-store-perl-hash-as-an-array-based-on-the-key-value", "title": "how to store perl hash as an array based on the key value", "body": "<pre><code>my %hash={\ndev1=&gt; [\"T1\",\"T2\",\"T3\",\"T4\"],\ndev2=&gt; [\"T1\",\"T7\",\"T8\",\"T6\"],\n},\n</code></pre>\n\n<p>I want to get suppose all value in hash for key dev1 or dev2 . How do I do it?\nI want the array to be returned when i pass key as an argument.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1532013539, "post_id": 51426146, "comment_id": 89823686, "body": "Try <code>my $first = shift @{[ sort keys %hash ]}</code>. See also <a href=\"https://rt.perl.org/Public/Bug/Display.html?id=131061\" rel=\"nofollow noreferrer\">Documentation of backslash operator inducing list context for its operand is missing</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1532013543, "post_id": 51426146, "comment_id": 89823690, "body": "<code>use v5.14</code> doesn&#39;t make you use Perl version 5.14. It says need your perl interpreter to be at least version 5.14, and you want to import all feature bundles in version 5.14."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1532013761, "post_id": 51426146, "comment_id": 89823865, "body": "Just to be sure (in case your example isn&#39;t an example but something you are actually doing): it&#39;s much faster and cleaner to use <code>min sort keys %hash</code> rather than <code>(sort keys %hash)[0]</code> (using <code>min</code> from <a href=\"https://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> which is a core module)."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1532017271, "post_id": 51426146, "comment_id": 89826347, "body": "@Dada <code>min keys %hash</code> surely? List doesn&#39;t need to be sorted to take its minimum."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1532019082, "post_id": 51426146, "comment_id": 89827396, "body": "<code>List::Util::min</code> operates on numerical values. <code>List::Util::minstr</code> is the function for finding the first element of a list in lexicographical order."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1532023118, "post_id": 51426146, "comment_id": 89829349, "body": "you could also do <code>List::Util::first {defined} sort keys %hash</code>"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1532027024, "post_id": 51426146, "comment_id": 89831181, "body": "BTW, you must be using Perl 5.20 or 5.22, since those are the only two versions which produced the &quot;shift on reference is experimental&quot; message for your first non-working example. Perl versions before 5.14 had a slightly more helpful error message: &quot;Type of arg 1 to shift must be array (not sort)&quot;."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1532075073, "post_id": 51426146, "comment_id": 89846289, "body": "@duskwuff oh right, I must have been tired when I wrote this!"}], "answers": [{"comments": [{"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1532014235, "post_id": 51426259, "comment_id": 89824246, "body": "Who thought it was a good idea that this function should interpret a scalar reference to an array as an array when nothing else works that way?? Apparently someone agreed, because the documentation says this: &quot;Starting with Perl 5.14, an experimental feature allowed shift to take a scalar expression. This experiment has been deemed unsuccessful, and was removed as of Perl 5.24.&quot;"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1532014962, "post_id": 51426259, "comment_id": 89824786, "body": "@felwithe Well, a decent amount of functions assume their argument to be a ref when it&#39;s a scalar: <code>keys</code>, <code>values</code>, <code>pop</code>, <code>unshift</code>... And it makes sense: those functions can&#39;t take anything else than an array or a hash, so when called with a scalar, it would be logical that this scalar is a ref. (I guess it doesn&#39;t make <i>enough</i> sense though, since it was later removed)"}, {"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1532017259, "post_id": 51426259, "comment_id": 89826339, "body": "So the answer is that it expects either a named array or a reference, but not an anonymous array? So if it was not version 5.14-5.24, it would error out with a different message?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1532017330, "post_id": 51426259, "comment_id": 89826388, "body": "@Dada: That is no longer true. It is a feature that was brought into the language and quickly removed. All of those functions now require an <code>@arr</code> or an <code>@$arr_ref</code> parameter."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 1, "creation_date": 1532017418, "post_id": 51426259, "comment_id": 89826441, "body": "@felwithe: No. The answer is that the operators expect an array. If you have an array reference then you must <i>dereference it</i>. Your examples show only attempts to apply <code>shift</code> to <i>lists</i>. Lists are <i>immutable constants</i>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532017958, "post_id": 51426259, "comment_id": 89826755, "body": "<i>&quot;There are some hacks to get shift to work with an arbitrary list&quot;</i> No. <code>shift @{[sort keys %hash]}</code> creates an array from the list, performs <code>shift</code> on it, and deletes the array. This is not a technique that you should represent."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1532074926, "post_id": 51426259, "comment_id": 89846205, "body": "@Borodin I know this is no longer the case (hence the &quot;since it was later removed&quot;). The point of my comment was merely to point out that <code>shift</code> doesn&#39;t have a unique behavior, and that it&#39;s not a irrational one, unlike what OP was saying/implying."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1532018923, "last_edit_date": 1532018923, "creation_date": 1532013307, "answer_id": 51426259, "question_id": 51426146, "link": "https://stackoverflow.com/questions/51426146/perl-shift-on-reference-is-experimental/51426259#51426259", "title": "Perl: &quot;shift on reference is experimental&quot;", "body": "<p>Though the terms are often used interchangeably, <a href=\"https://learn.perl.org/faq/perlfaq4.html#What-is-the-difference-between-a-list-and-an-array\" rel=\"nofollow noreferrer\">there is a distinction between a <strong>list</strong> and an <strong>array</strong> in Perl</a>. \nThe <code>shift</code> operator expects an array and has a side-effect of modifying the array. The result of <code>sort keys %hash</code> is a list but not an array, and is not a valid argument for <code>shift</code>. There are some hacks to get <code>shift</code> to work with an arbitrary list</p>\n\n<pre><code> $x = shift @{[sort keys %hash]}      # for example\n</code></pre>\n\n<p>but if you are calling <code>shift</code> just because you want the first element of the list, there are cleaner ways to do it.</p>\n\n<pre><code>my $first = (sort keys %hash)[0];\nmy ($first) = sort keys %hash;      # list context assignment\nmy $first = [sort keys %hash]-&gt;[0];\n</code></pre>\n\n<p>(I like the last construction, but I don't judge you if it rubs you the wrong way)</p>\n\n<hr>\n\n<p>The \"experimental\" issue is that recent versions of Perl allow you to call <code>shift</code> on an array <em>reference</em></p>\n\n<pre><code>@a = (1,2,3); print shift @a;    # 1\n$a = [4,5,6]; print shift $a;    # 4\n</code></pre>\n\n<p>When you are calling <code>shift</code> on something that is not a named array, perl assumes you are using the <code>shift EXPR</code> form of the command, operating on an array reference. Since this is \"experimental\", you get a warning about that. Then perl discovers that what follows <code>shift</code> is not actually an ARRAY reference, and you get an error about that.</p>\n"}], "owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 51426259, "answer_count": 1, "score": 1, "last_activity_date": 1532018923, "creation_date": 1532012968, "last_edit_date": 1532017094, "question_id": 51426146, "link": "https://stackoverflow.com/questions/51426146/perl-shift-on-reference-is-experimental", "title": "Perl: &quot;shift on reference is experimental&quot;", "body": "<p>I am trying to get the first element of a list of sorted hash keys.</p>\n\n<p>This works, as expected:</p>\n\n<pre><code>my $first = (sort keys %hash)[0];\n</code></pre>\n\n<p>These do not</p>\n\n<pre><code>my $first = shift sort keys %hash;\n\nmy $first = shift (sort keys %hash); # just in case\n</code></pre>\n\n<p>It throws the error</p>\n\n<blockquote>\n  <p>shift on reference is experimental.<br>\n  Not an ARRAY reference</p>\n</blockquote>\n\n<p>What is going on?</p>\n\n<p>This is a simple operation and I can't figure out where this supposed reference is. If there were a reference the first syntax wouldn't work.</p>\n\n<p>I am using version 5.14 via <code>use</code> at the top of the script.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1532004124, "post_id": 51422821, "comment_id": 89816780, "body": "Is this an XML document? If so, you should probably use an XML parser. But it&#39;s hard to be sure without seeing more of the input."}, {"owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1532004964, "post_id": 51422821, "comment_id": 89817346, "body": "No it is not an xml-file. The logfile itself just has an xml-like structure"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1532006816, "post_id": 51422821, "comment_id": 89818743, "body": "Can you please add at least two complete sections of the input file to your question, along with the output you would expect for those inputs."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 1, "last_activity_date": 1532006806, "creation_date": 1532006806, "answer_id": 51423906, "question_id": 51422821, "link": "https://stackoverflow.com/questions/51422821/perl-logfile-pattern-matching-loop-inside-loop/51423906#51423906", "title": "Perl logfile pattern matching loop inside loop", "body": "<p>Just save any timestamp and print it when needed:</p>\n\n<pre><code>while (my $line = &lt;F&gt;)\n{\n    $timestamp = $1 if $line =~ /^\\s*&lt;timestamp&gt;(.*)&lt;/;\n    print $timestamp, \"\\t\", $1, \"\\n\" if $line =~ /&gt;(.*BUSI_EXCEPTION.*)&lt;/\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10105340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9356ee60023d1405d8331e649af2f855?s=128&d=identicon&r=PG&f=1", "display_name": "Unsal", "link": "https://stackoverflow.com/users/10105340/unsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1532006806, "creation_date": 1532003594, "last_edit_date": 1532005261, "question_id": 51422821, "link": "https://stackoverflow.com/questions/51422821/perl-logfile-pattern-matching-loop-inside-loop", "title": "Perl logfile pattern matching loop inside loop", "body": "<p>I have logfile which is structured like this (repetitively):</p>\n\n<p><code>&lt;header&gt;\n&lt;timestamp&gt;2018-05-18T13:22:35.842&lt;/timestamp&gt;\n&lt;requestedService&gt;requestSchufameldungAbgeben&lt;/requestedService&gt;\n ...\n&lt;errorCode&gt;/IWBEP/CX_MGW_BUSI_EXCEPTION&lt;/errorCode&gt;</code></p>\n\n<p>What I want is to go down until the errorstring \"CX_MGW_BUSI_EXCEPTION\" was found then and then extract the errorstring and the timestamp above. Any idea on how I can do this?\nThe script should loop over the whole file doing this repetitively.</p>\n\n<p>I have tried something like this but I don't know how to proceed further:</p>\n\n<pre><code>while(my $line=&lt;F&gt;) {\n    if ( $line=~/^\\s*&lt;timestamp&gt;/) {\n                    while(my $nextline =&lt;F&gt;) {\n                            if ($nextline =~ /BUSI_EXCEPTION/) {\n                            print;\n                            flag = 1;\n                            }\n                    }\n    }\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "grep", "command", "pipe"], "comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1531993938, "post_id": 51419041, "comment_id": 89809914, "body": "try <code>grep &#39;$ContentDate&#39;</code> as the variable has spaces in it... without the quotes, grep would see two arguments and try to treat the second one as filename"}, {"owner": {"reputation": 15, "user_id": 6093702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c589fe7cde03a20f7ad20e6abd01c257?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Mamelund", "link": "https://stackoverflow.com/users/6093702/andre-mamelund"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1531994802, "post_id": 51419041, "comment_id": 89810544, "body": "Then the grep is not working properly, getting results for a totally different date: 2018-07-18 09:11:50,200. So the whole $ContentDate is not being utilized. Tried running chomp on the different variables to remove newline, resultet in another error."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1531997113, "post_id": 51419041, "comment_id": 89812133, "body": "Why do you use external commands for this anyway? Doing it all natively in Perl will offer you a lot more control over what you are doing, and will be more efficient, too."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6093702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c589fe7cde03a20f7ad20e6abd01c257?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Mamelund", "link": "https://stackoverflow.com/users/6093702/andre-mamelund"}, "edited": false, "score": 0, "creation_date": 1531995946, "post_id": 51419790, "comment_id": 89811329, "body": "Thank you for your time, that&#39;s a much better way of doing it! Working fine now :D"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1531996658, "post_id": 51419790, "comment_id": 89811821, "body": "Can I suggest you take a look at <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> :-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1531996817, "post_id": 51419790, "comment_id": 89811942, "body": "<code>my $temps = time - 60*60*24*0</code> Why are you subtracting zero?"}, {"owner": {"reputation": 166, "user_id": 3399702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2ObF.jpg?s=128&g=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/3399702/seth"}, "edited": false, "score": 0, "creation_date": 1532011867, "post_id": 51419790, "comment_id": 89822465, "body": "it has been done in a loop without any module: here 0 equal today, 1 equal yesterday, 2 equal day before yesterday etc.."}], "tags": [], "owner": {"reputation": 166, "user_id": 3399702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2ObF.jpg?s=128&g=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/3399702/seth"}, "is_accepted": false, "score": -4, "last_activity_date": 1531994682, "creation_date": 1531994682, "answer_id": 51419790, "question_id": 51419041, "link": "https://stackoverflow.com/questions/51419041/sending-linux-commands-in-perl-grep-piped-to-grep/51419790#51419790", "title": "Sending linux commands in Perl - Grep piped to grep", "body": "<p>Try this</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $log = \"/var/log/fail2ban.log\";\nmy $fail2ban = 0;\n\nmy $ContentDate = backintime(3600); #backintime in seconds from now\nmy $Fail2banNo = qx{grep Ban $log | grep \\\"$ContentDate\\\"| wc -l};\n\nif ($Fail2banNo &gt; $fail2ban) {\n        say \"Yes\";\n}\nelse {\n        say \"No\";\n\n}\n\n\nsub backintime {\n        my ($to_today) = @_;\n        my $temps = time - 60*60*24*0;\n        $temps = $temps - $to_today;\n        my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($temps);\n        if($sec &lt; 10) {$sec = \"0\" . $sec;}\n        if($min &lt; 10) {$min = \"0\" . $min;}\n        if($hour &lt; 10) {$hour = \"0\" . $hour;}\n        if($mday &lt; 10) {$mday = \"0\" . $mday;}\n        $year+=1900; $mon++; if($mon &lt; 10) {$mon = \"0\" . $mon;}\n        my $sectime = $year.\"-\".$mon.\"-\".$mday.\" \".$hour.\":\";\n        return($sectime);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 166, "user_id": 3399702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n2ObF.jpg?s=128&g=1", "display_name": "Seth", "link": "https://stackoverflow.com/users/3399702/seth"}, "edited": false, "score": 0, "creation_date": 1532003658, "post_id": 51420475, "comment_id": 89816484, "body": "Thanks @Dave Cross for the Time::Piece very usefull"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532017656, "post_id": 51420475, "comment_id": 89826560, "body": "Time::Piece is one of the hardest modules to use correctly, and completely unnecessary here. <code>use POSIX; strftime(&#39;%Y-%m-%e %H:&#39;, localtime(time - 3600))</code> would just as fine."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 6, "last_activity_date": 1531996901, "last_edit_date": 1531996901, "creation_date": 1531996601, "answer_id": 51420475, "question_id": 51419041, "link": "https://stackoverflow.com/questions/51419041/sending-linux-commands-in-perl-grep-piped-to-grep/51420475#51420475", "title": "Sending linux commands in Perl - Grep piped to grep", "body": "<p>I notice that the answer you've accepted has a rather over-complicated way to calculate the timestamp an hour ago, so I present this alternative which uses Perl's built-in date and time handling in a more efficient manner.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Time::Piece;\n\nmy $log = '/var/log/fail2ban.log';\nmy $fail2ban = 0;\n\nmy $ContentDate = localtime(time - 3600)-&gt;strftime('%Y-%m-%e %H:');\nmy $Fail2banNo = qx{grep Ban $log | grep \"$ContentDate\" | wc -l};\n\nif ($Fail2banNo &gt; $fail2ban) {\n  say 'Yes';\n}\nelse {\n  say 'No';\n}\n</code></pre>\n\n<p>But the only change you actually needed was to change:</p>\n\n<pre><code>my $Fail2banNo = `grep Ban /var/log/fail2ban.log | grep $ContentDate | wc -l`;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>my $Fail2banNo = `grep Ban /var/log/fail2ban.log | grep \"$ContentDate\" | wc -l`;\n</code></pre>\n\n<p>Quoting <code>$ContentDate</code> because it contains a space.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1532017566, "creation_date": 1532017566, "answer_id": 51427665, "question_id": 51419041, "link": "https://stackoverflow.com/questions/51419041/sending-linux-commands-in-perl-grep-piped-to-grep/51427665#51427665", "title": "Sending linux commands in Perl - Grep piped to grep", "body": "<p>The first problem is that <code>$ContentDate</code> ends with a line feed.</p>\n\n<p>The second problem is that you improperly create the shell literal from <code>$ContentDate</code> (using <code>grep 2018-07-19 08:</code> instead of something like <code>grep '2018-07-19 08:'</code>).</p>\n\n<p>Let's first fix your answer.</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy $fail2ban_log_qfn = '/var/log/fail2ban.log';\n\nmy $content_date = `date -d '1 hour ago' '+%Y-%m-%e %H:'`;\nchomp($content_date);\n\nmy $grep_cmd1 = shell_quote('grep', 'Ban', $fail2ban_log_qfn);\nmy $grep_cmd2 = shell_quote('grep', '--', $content_date);\nmy $fail2ban_count = `$grep_cmd1 | $grep_cmd2 | wc -l`;\nchomp($fail2ban_count);\n</code></pre>\n\n<p>No need to shell out to get the date, though.</p>\n\n<pre><code>use POSIX              qw( strftime );\nuse String::ShellQuote qw( shell_quote );\n\nmy $fail2ban_log_qfn = '/var/log/fail2ban.log';\n\nmy $content_date = strftime('%Y-%m-%e %H:', localtime(time - 3600));\n\nmy $grep_cmd1 = shell_quote('grep', 'Ban', $fail2ban_log_qfn);\nmy $grep_cmd2 = shell_quote('grep', '--', $content_date);\nmy $fail2ban_count = `$grep_cmd1 | $grep_cmd2 | wc -l`;\nchomp($fail2ban_count);\n</code></pre>\n\n<p>No need to shell out to to count the matching lines either.</p>\n\n<pre><code>use POSIX qw( strftime );\n\nmy $fail2ban_log_qfn = '/var/log/fail2ban.log';\n\nmy $fail2ban_count = 0;\n{\n   my $content_date = strftime('%Y-%m-%e %H:', localtime(time - 3600));\n\n   open(my $fh, '&lt;', $log_qfn)\n      or die(\"Can't open \\\"$fail2ban_log_qfn\\\": $!\\n\");\n\n   while (&lt;$fh&gt;) {\n      ++$fail2ban_count if /Ban/ &amp;&amp; /\\Q$content_date/;\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6093702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c589fe7cde03a20f7ad20e6abd01c257?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Mamelund", "link": "https://stackoverflow.com/users/6093702/andre-mamelund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 51420475, "answer_count": 3, "score": 0, "last_activity_date": 1532017566, "creation_date": 1531992576, "last_edit_date": 1531993007, "question_id": 51419041, "link": "https://stackoverflow.com/questions/51419041/sending-linux-commands-in-perl-grep-piped-to-grep", "title": "Sending linux commands in Perl - Grep piped to grep", "body": "<p>The basic code:</p>\n\n<pre><code>my $ContentDate = `date -d '1 hour ago' '+%Y-%m-%e %H:'`;\nmy $Fail2banNo = `grep Ban /var/log/fail2ban.log | grep $ContentDate | wc -l`;\n\nif (($Fail2banNo &gt; $fail2ban)) {\n\n} else {\n\n}\n</code></pre>\n\n<p>Why wont Perl complete these commands correctly? $fail2ban is already defined to 0, so that's not the issue.</p>\n\n<p>The fail2ban.log does contain a line that should match(when running command from shell it matches):</p>\n\n<pre><code>2018-07-19 xx:11:50,200 fail2ban.actions[3725]: WARNING [iptables] Ban x.x.x.x\n</code></pre>\n\n<p>The error i keep getting is:</p>\n\n<pre><code>grep: 10:: No such file or directory\nsh: -c: line 1: syntax error near unexpected token `|'\nsh: -c: line 1: ` | wc -l'\nArgument \"\" isn't numeric in numeric gt (&gt;) at /usr/local/bin/tmgSupervision.pl line 3431.\n</code></pre>\n\n<p>All the commands run fine from bash/shell, seems at if perl is not happy with grep being piped to another grep? I've tried many different ways of adding the variable($ContentDate) into the grep without helping.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1531986791, "post_id": 51416789, "comment_id": 89805445, "body": "How did you install Perl?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1532016826, "post_id": 51416789, "comment_id": 89826037, "body": "<code>apt-cache install libxml-simple-perl</code> or <code>apt-get install libxml-simple-perl</code>, I can&#39;t remember which. Only one will work, so whichever works."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4021485, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "jit c", "link": "https://stackoverflow.com/users/4021485/jit-c"}, "edited": false, "score": 0, "creation_date": 1532496983, "post_id": 51417321, "comment_id": 89991343, "body": "Thanks for your kind reply. I understand your point working on it."}], "tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": false, "score": 3, "last_activity_date": 1531987121, "creation_date": 1531987121, "answer_id": 51417321, "question_id": 51416789, "link": "https://stackoverflow.com/questions/51416789/cant-locate-xml-simple-pm/51417321#51417321", "title": "Can&#39;t locate XML/Simple.pm", "body": "<p>If you read error message, it lists directories that are searched for modules:</p>\n\n<ul>\n<li><code>/home/avrajit/anaconda3/lib/perl5/site_perl/5.22.2/x86_64-linux-thread-multi</code></li>\n<li><code>/home/avrajit/anaconda3/lib/perl5/site_perl/5.22.2</code></li>\n<li><code>/home/avrajit/anaconda3/lib/perl5/5.22.2/x86_64-linux-thread-multi</code></li>\n<li><code>/home/avrajit/anaconda3/lib/perl5/5.22.2</code></li>\n<li><code>.</code></li>\n</ul>\n\n<p>None of those directories are standard paths, so I assume that you have two Perl installations, and you have installed <code>XML::Simple</code> in one installation, whereas running <code>perl -e 'use XML::Simple\"</code> invokes the second one. You can check that by running <code>which perl</code>.</p>\n\n<hr>\n\n<p>BTW. <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\"><code>XML::Simple</code> is bad</a>. Use <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\"><code>XML::LibXML</code></a> or <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a> instead.</p>\n"}], "owner": {"reputation": 33, "user_id": 4021485, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "jit c", "link": "https://stackoverflow.com/users/4021485/jit-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2056, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531987121, "creation_date": 1531985378, "question_id": 51416789, "link": "https://stackoverflow.com/questions/51416789/cant-locate-xml-simple-pm", "title": "Can&#39;t locate XML/Simple.pm", "body": "<p><code>perl -e 'use XML::Simple\"</code></p>\n\n<p>And get error \"Can't locate XML/Simple.pm\"</p>\n\n<p>Then I installed  XML:: Simple or Xml::Simple using  </p>\n\n<p><code>sudo perl -MCPAN -e 'install XML::Simple'</code></p>\n\n<p>I also did this </p>\n\n<p><code>sudo apt-get install libxml-simple-perl</code></p>\n\n<p>still I have same error</p>\n\n<blockquote>\n  <p>Can't locate XML/Simple.pm in @INC (you may need to install the XML::Simple module) (@INC contains: /home/avrajit/anaconda3/lib/perl5/site_perl/5.22.2/x86_64-linux-thread-multi /home/avrajit/anaconda3/lib/perl5/site_perl/5.22.2 /home/avrajit/anaconda3/lib/perl5/5.22.2/x86_64-linux-thread-multi /home/avrajit/anaconda3/lib/perl5/5.22.2 .) at -e line 1.\n  BEGIN failed--compilation aborted at -e line 1</p>\n</blockquote>\n\n<p>I did this also \n<code>apt-cache search XML::Simple</code></p>\n\n<p>and output below</p>\n\n<blockquote>\n  <p>libxml-simple-perl - Perl module for reading and writing XML\n  libdata-validate-struct-perl - module to validate recursive hash structures\n  libdns-zoneparse-perl - Perl extension for parsing and manipulating DNS Zone Files\n  libgtk2-gladexml-simple-perl - clean object-oriented perl interface to Gtk2::GladeXML\n  libtemplate-plugin-xml-perl - XML plugins for the Template Toolkit\n  libtest-xml-simple-perl - Perl testing framework for XML data\n  libxml-hash-lx-perl - module to convert hash to xml and vice versa using LibXML\n  libxml-libxml-simple-perl - Perl module that uses the XML::LibXML parser for XML structures\n  libxml-opml-simplegen-perl - module for creating OPML using XML::Simple\n  libxml-simpleobject-enhanced-perl - Perl module which enhances libxml-simpleobject-perl\n  libxml-simpleobject-libxml-perl - Simple oo representation of an XML::LibXML DOM object\n  libxml-simpleobject-perl - Objectoriented Perl interface to a parsed XML::Parser tree\n  libxml-struct-perl - represent XML as data structure preserving element order\n  libxml-structured-perl - module to convert XML data into a predefined Perl data structure and back\n  ruby-xml-simple - Simple Ruby API for reading and writing XML</p>\n</blockquote>\n\n<p>what to do now?</p>\n"}]