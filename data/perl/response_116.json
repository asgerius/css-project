[{"tags": ["perl", "dancer"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 1, "creation_date": 1490853603, "post_id": 43105496, "comment_id": 73299576, "body": "easy way to find out the exception is to have a look at what line 1878 is attempting to do in Entity.pm as well as App.pm line 1454. post those lines if you can so I can see what exactly it is trying to do."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490864621, "post_id": 43105496, "comment_id": 73306144, "body": "Where is the <code>sendEmail</code> method called? Is that in a route handler? What does the route return? Can you <a href=\"https://stackoverflow.com/posts/43105496/edit\">edit</a> the question and show us please?"}], "owner": {"reputation": 349, "user_id": 2773127, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fef172929e808d472f63d56950a4b62?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Staab", "link": "https://stackoverflow.com/users/2773127/peter-staab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490827428, "creation_date": 1490827428, "question_id": 43105496, "link": "https://stackoverflow.com/questions/43105496/error-when-sending-email-using-dancer2pluginemail", "title": "error when sending email using Dancer2::Plugin::Email;", "body": "<p>I am sending email using Dancer2 via the Dancer2::Plugin::Email package.  The main code that I have for this is:</p>\n\n<pre><code>sub sendEmail {\n  my ($params,$email_address,$template) = @_;\n\n  my $text = '';\n\n  my $tt = Template-&gt;new({\n    INCLUDE_PATH =&gt; config-&gt;{views},\n    INTERPOLATE  =&gt; 1,\n    OUTPUT =&gt; \\$text\n  }) || die \"$Template::ERROR\\n\";\n\n  my $out = $tt-&gt;process($template,$params);\n\n  my $email = email {\n    from    =&gt; XXXXX,\n    to      =&gt; $email_address,\n    subject =&gt; XXXXX,\n    body    =&gt; $text,\n    'Content-Type' =&gt; 'text/html'\n  };\n}\n</code></pre>\n\n<p>where I have hidden a couple of the fields. I have gotten the following error:</p>\n\n<pre><code>Route exception: open body: Invalid argument at \n/usr/local/share/perl/5.22.1/MIME/Entity.pm line 1878. in \n/usr/local/share/perl/5.22.1/Dancer2/Core/App.pm l. 1454\n</code></pre>\n\n<p>It is not occurring all of the time and I haven't been able to find a consistent piece of code that always fails.  </p>\n\n<p>I have set the host parameter of the mail server that I am using in the configuration as explained here: <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Email\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Dancer2::Plugin::Email</a> Simple tests show it works, but I get sporadic errors that I can't track down. </p>\n"}, {"tags": ["perl", "file", "copy"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490830628, "post_id": 43105017, "comment_id": 73293234, "body": "What have you tried so far? Please <a href=\"https://stackoverflow.com/posts/43105017/edit\">edit</a> your question to include the code."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5705550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ce91e3f93b025eec41aa8e80827c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Shrav1", "link": "https://stackoverflow.com/users/5705550/shrav1"}, "edited": false, "score": 0, "creation_date": 1490827929, "post_id": 43105351, "comment_id": 73292429, "body": "Thanks for the reply john..i had tried this already..but i&#39;d like to split the logs per hour so its easier to check the log based on timestamp which i&#39;m not aware of..pls let me know if there is different solution..Thanks again..!!!"}], "tags": [], "owner": {"reputation": 3975, "user_id": 2413778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d73cd4efaa221f0b4fe583808f079368?s=128&d=identicon&r=PG", "display_name": "John C", "link": "https://stackoverflow.com/users/2413778/john-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1490827087, "last_edit_date": 1490827087, "creation_date": 1490826640, "answer_id": 43105351, "question_id": 43105017, "link": "https://stackoverflow.com/questions/43105017/perl-script-to-copy-logs-with-timestamp-for-every-hour-and-paste-into-different/43105351#43105351", "title": "Perl script to copy logs with timestamp for every hour and paste into different file", "body": "<p>A simpler solution would be to use the split command to split the files into manageable sizes.</p>\n\n<pre><code>split -l 1000 logfile\n</code></pre>\n\n<p>Will split your logfile into smaller files of 1000 lines each.\nYou can then just use grep to find the files that contain the day you need.</p>\n\n<pre><code>grep 09092016 logfile*\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 0, "last_activity_date": 1490839398, "last_edit_date": 1490839398, "creation_date": 1490839014, "answer_id": 43107166, "question_id": 43105017, "link": "https://stackoverflow.com/questions/43105017/perl-script-to-copy-logs-with-timestamp-for-every-hour-and-paste-into-different/43107166#43107166", "title": "Perl script to copy logs with timestamp for every hour and paste into different file", "body": "<p>for example:</p>\n\n<pre><code>logfile=\"./log\"\nwhile read -r d m y h; do\n    grep \"^$d$m$y-$h\" \"$logfile\" &gt; \"partial-${y}${m}{$d}-${h}.log\"\ndone &lt; &lt;(sed -n 's/\\(..\\)\\(..\\)\\(....\\)-\\(..\\)\\(.*\\)/\\1 \\2 \\3 \\4/p' \"$logfile\" | sort -u)\n</code></pre>\n\n<p>easy, but <strong>not</strong> efficient. It reads the whole big logfile 25x for the split. (1x for gathering the existing <code>ddmmyyyy-hh</code> lines in the log, and again for every different found date-hour.)</p>\n"}], "owner": {"reputation": 1, "user_id": 5705550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ce91e3f93b025eec41aa8e80827c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Shrav1", "link": "https://stackoverflow.com/users/5705550/shrav1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490839398, "creation_date": 1490825159, "last_edit_date": 1490826880, "question_id": 43105017, "link": "https://stackoverflow.com/questions/43105017/perl-script-to-copy-logs-with-timestamp-for-every-hour-and-paste-into-different", "title": "Perl script to copy logs with timestamp for every hour and paste into different file", "body": "<p>First of all, I'm very new to programming and so would need your help in writing a perl script to do the following on windows.</p>\n\n<p>I have a big log file with timestamp (1gb) and its difficult to read the logs as it takes a lot of time to open. so my requirement is to copy the logs from the bigger log file for the last one hour and paste it to another file and then copy the next 1 hr of data to different file(so we will have 24 files for a day). The next day the data in these files needs to be over written or delete &amp; create a new file.</p>\n\n<p>Sample log : </p>\n\n<pre><code>09092016-00:02:00,..................\n09092016-00:02:08,..................\n09092016-00:02:15,..................\n09092016-00:02:18,..................\n</code></pre>\n\n<p>Please help me with this and thanks for your help in advance.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["regex", "perl", "grep", "negative-lookbehind"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490825943, "post_id": 43104906, "comment_id": 73291769, "body": "You could also use <code>&#47;[^A\\s]\\s*B&#47;</code>"}, {"owner": {"reputation": 829, "user_id": 3145447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b424e665fa2881cd56e6db766d47d12?s=128&d=identicon&r=PG&f=1", "display_name": "std_answ", "link": "https://stackoverflow.com/users/3145447/std-answ"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490826062, "post_id": 43104906, "comment_id": 73291810, "body": "Good point. In my real use case though, A and B are both words rather than just characters."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1490836210, "post_id": 43104906, "comment_id": 73294697, "body": "<code>(?&lt;![A\\s])\\s*B</code> Not really a good way to do this. One reason is the humungous backtracking going on. Maybe there will come a day when you care more about performance over substance. Since you&#39;re using Perl, leverage it&#39;s verbs. <code>(?:A\\s*B(*SKIP)(*FAIL)|B)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1490836599, "post_id": 43104906, "comment_id": 73294797, "body": "Comparison <code>Regex1:   (?&lt;![A\\s])\\s*B Completed iterations:   50  &#47;  50     ( x 1000 ) Matches found per iteration:   1 Elapsed Time:    0.53 s,   530.18 ms,   530185 &#181;s Regex2:   (?:A\\s*B(*SKIP)(*FAIL)|B) Completed iterations:   50  &#47;  50     ( x 1000 ) Matches found per iteration:   1 Elapsed Time:    0.18 s,   180.07 ms,   180073 &#181;s</code>"}, {"owner": {"reputation": 829, "user_id": 3145447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b424e665fa2881cd56e6db766d47d12?s=128&d=identicon&r=PG&f=1", "display_name": "std_answ", "link": "https://stackoverflow.com/users/3145447/std-answ"}, "edited": false, "score": 0, "creation_date": 1490883703, "post_id": 43104906, "comment_id": 73320341, "body": "@sln: the special verbs are particularly useful since they can be used when A and B are whole words rather than just characters."}, {"owner": {"reputation": 829, "user_id": 3145447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b424e665fa2881cd56e6db766d47d12?s=128&d=identicon&r=PG&f=1", "display_name": "std_answ", "link": "https://stackoverflow.com/users/3145447/std-answ"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490883841, "post_id": 43104906, "comment_id": 73320466, "body": "@ikegami: Good catch, since without the <code>^|</code> option, <code>[^A\\s]\\s*B</code>  fails to match either &quot;B&quot; or &quot; B&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490884449, "post_id": 43104906, "comment_id": 73321030, "body": "@wdep1, I had failed to noticed the first two comments. Deleteing."}, {"owner": {"reputation": 829, "user_id": 3145447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b424e665fa2881cd56e6db766d47d12?s=128&d=identicon&r=PG&f=1", "display_name": "std_answ", "link": "https://stackoverflow.com/users/3145447/std-answ"}, "edited": false, "score": 0, "creation_date": 1490885116, "post_id": 43104906, "comment_id": 73321604, "body": "My bad for not specifying that they were whole words to begin with. Still useful info to have. For reference, ikegami noted that if A and B <i>are</i> just characters and not words, <code>[^A\\s]\\s*B</code> has problems as described, which <code>(?:^|[^A\\s])\\s*B</code> fixes."}], "answers": [{"comments": [{"owner": {"reputation": 829, "user_id": 3145447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b424e665fa2881cd56e6db766d47d12?s=128&d=identicon&r=PG&f=1", "display_name": "std_answ", "link": "https://stackoverflow.com/users/3145447/std-answ"}, "edited": false, "score": 0, "creation_date": 1490828735, "post_id": 43105082, "comment_id": 73292656, "body": "Makes sense, thanks! Re: your first point: It took me a minute to realize that &quot;so (?&lt;!A) cannot match&quot; means that the negative lookbehind recognizes A successfully, and says that the pattern match against the whole string fails as a result of the negative lookbehind taking effect."}, {"owner": {"reputation": 829, "user_id": 3145447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b424e665fa2881cd56e6db766d47d12?s=128&d=identicon&r=PG&f=1", "display_name": "std_answ", "link": "https://stackoverflow.com/users/3145447/std-answ"}, "edited": false, "score": 0, "creation_date": 1490828747, "post_id": 43105082, "comment_id": 73292659, "body": "To summarize, for anyone who&#39;s reading this and confused: For the original regex, &quot;A B&quot; is a tricky case because there&#39;s a potential match position before B where the \\s* acts like an empty string and there&#39;s a preceding space, rather than a preceding A, so the negative lookbehind doesn&#39;t forbid a match. To fix this, the altered regex makes sure that only match positions not directly after spaces can be considered."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 829, "user_id": 3145447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b424e665fa2881cd56e6db766d47d12?s=128&d=identicon&r=PG&f=1", "display_name": "std_answ", "link": "https://stackoverflow.com/users/3145447/std-answ"}, "edited": false, "score": 0, "creation_date": 1490845104, "post_id": 43105082, "comment_id": 73296833, "body": "@wdep1 valid point! I changed &quot;match&quot; to &quot;succeed&quot; which is hopefully clearer (a negative lookaround succeeds by not matching anything)."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 5, "last_activity_date": 1490845065, "last_edit_date": 1592644375, "creation_date": 1490825475, "answer_id": 43105082, "question_id": 43104906, "link": "https://stackoverflow.com/questions/43104906/negative-lookbehind-in-regex/43105082#43105082", "title": "Negative lookbehind in regex", "body": "<blockquote>\n<p>But why does this affect &quot;A B&quot; but not &quot;AB&quot;?</p>\n</blockquote>\n<p>Regexes match at a <em>position</em>, which it is helpful to think of as being between characters. In &quot;A B&quot; there is a position (after the space and before the B) where <code>(?&lt;!A)</code> succeeds (because there isn't an A immediately preceding; there's a space instead), and <code>\\s*B</code> succeeds (<code>\\s*</code> matches the empty string, and <code>B</code> matches B), so the entire pattern succeeds.</p>\n<p>In &quot;AB&quot; there is no such position. The only place where <code>\\s*B</code> can match (immediately before the B), is also immediately after the A, so <code>(?&lt;!A)</code> cannot succeed. There are no positions that satisfy both, so the pattern as a whole can't succeed.</p>\n<blockquote>\n<p>Is the following regex a proper solution, and if so, why exactly does it fix the problem?</p>\n<p><code>(?&lt;![A\\s])\\s*B</code></p>\n</blockquote>\n<p>This works because <code>(?&lt;![A\\s])</code> will not succeed immediately after an A <em>or</em> after a space. So now the lookbehind forbids any match position that has spaces before it. If there <em>are</em> any spaces before the B, they have to be consumed by the <code>\\s*</code> portion of the pattern, and the match position must be before them. If that position <em>also</em> doesn't have an A before it, the lookbehind can succeed and the pattern as a whole can match.</p>\n<p>This is a trick that's made possible by the fact that <code>\\s</code> is a fixed-width pattern that matches at <em>every</em> position inside of a non-empty <code>\\s*</code> match. It can't be extended to the general case of <em>any</em> pattern between the (non-)A and the B.</p>\n"}], "owner": {"reputation": 829, "user_id": 3145447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b424e665fa2881cd56e6db766d47d12?s=128&d=identicon&r=PG&f=1", "display_name": "std_answ", "link": "https://stackoverflow.com/users/3145447/std-answ"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2125, "favorite_count": 1, "accepted_answer_id": 43105082, "answer_count": 1, "score": 5, "last_activity_date": 1490845065, "creation_date": 1490824689, "last_edit_date": 1495535458, "question_id": 43104906, "link": "https://stackoverflow.com/questions/43104906/negative-lookbehind-in-regex", "title": "Negative lookbehind in regex", "body": "<p><em>(Note: not a duplicate of <a href=\"https://stackoverflow.com/questions/23964362/why-cant-you-use-repetition-quantifiers-in-zero-width-look-behind-assertions\">Why can&#39;t you use repetition quantifiers in zero-width look behind assertions</a>; see end of post.)</em></p>\n\n<p>I'm trying to write a <code>grep -P</code> (Perl) regex that matches B, when it is not preceded by A -- regardless of whether there is intervening whitespace.</p>\n\n<p>So, I tried this negative lookbehind, and tested it in regex101.com:</p>\n\n<pre><code>(?&lt;!A)\\s*B\n</code></pre>\n\n<p>This causes \"AB\" not to be matched, which is good, but \"A B\" does result in a match, which is not what I want.</p>\n\n<p>I am not exactly sure why this is. It has something to do with the fact that \\s* matches the empty string \"\", and you can say that there are, as such, infinity matches of \\s* between A and B. But why does this affect \"A B\" but not \"AB\"?</p>\n\n<p>Is the following regex a proper solution, and if so, why exactly does it fix the problem?</p>\n\n<pre><code>(?&lt;![A\\s])\\s*B\n</code></pre>\n\n<p>I posted this before and it was incorrectly marked as a duplicate question. The variable-length thing I'm looking for is part of the match, not part of the negative lookbehind itself -- so this quite different from the other question. Yes, I could put the \\s* inside the negative lookbehind, but I haven't done so (and doing so is not supported, as the other question explains). Also, I am particularly interested in <strong>why the alternate regex I post above works</strong>, since I know it works but I'm not exactly sure why. The other question did not help answer that.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490817063, "post_id": 43102284, "comment_id": 73287466, "body": "Could you please reduce that to the 10 essential lines?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490817106, "post_id": 43102284, "comment_id": 73287487, "body": "Could you please provide the output of <code>SELECT HEX(the_field_in_question)</code> to make sure the data is correct in the database?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4614743, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ca3aefc922fdf4e04dbebc355873a260?s=128&d=identicon&r=PG&f=1", "display_name": "musicweb", "link": "https://stackoverflow.com/users/4614743/musicweb"}, "edited": false, "score": 0, "creation_date": 1490832068, "post_id": 43103214, "comment_id": 73293662, "body": "This is fine except there is no calculation of the affiliate tree as in my code under the crunch routine."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15, "user_id": 4614743, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ca3aefc922fdf4e04dbebc355873a260?s=128&d=identicon&r=PG&f=1", "display_name": "musicweb", "link": "https://stackoverflow.com/users/4614743/musicweb"}, "edited": false, "score": 3, "creation_date": 1490843190, "post_id": 43103214, "comment_id": 73296410, "body": "So what? That had nothing to do with your problem. Again, please fix your question so it&#39;s a <i>minimal</i> demonstration of your problem"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1490903045, "last_edit_date": 1490903045, "creation_date": 1490818227, "answer_id": 43103214, "question_id": 43102284, "link": "https://stackoverflow.com/questions/43102284/how-do-i-fix-the-display-of-accented-characters/43103214#43103214", "title": "How do I fix the display of accented characters?", "body": "<p>After removing the irrelevant bits and fixing the problem, you get the following. (If you had removed the irrelevant bits from the Question itself, it would be easier to see the differences.)</p>\n\n<pre><code># Specifies the file is encoded using UTF-8.\n# This doesn't matter for this program.\nuse utf8;\n\n# Set the encoding for STDIN, STDOUT and STDERR.\n# Set the default encoding for file handles.\nuse open ':std', ':encoding(utf-8)';\n\nuse CGI      qw( );\nuse DBI      qw( );\nuse FindBin  qw( $RealBin );\nuse Template qw( );\n\nmy $cgi = CGI-&gt;new();\n\nmy $dbh = DBI-&gt;connect(\n   \"dbi:mysql:...\",\n   \"...\",\n   \"...\",\n   {\n       RaiseError =&gt; 1,\n       PrintError =&gt; 0,\n       PrintWarn  =&gt; 1,\n\n       # Decodes strings from the database.\n       # Specifying this now performs SET NAMES 'UTF8'\n       mysql_enable_utf8 =&gt; 1,\n   },\n);\n\nmy $val = $dbh-&gt;selectrow_array('SELECT ...');\n\n{\n   open(my $fh, '&gt;', '...')\n      or die(...);\n\n   print($fh $val);\n}\n\n{\n    print $cgi-&gt;header('text/html; charset=UTF-8');\n\n    my %vars = (\n       val =&gt; $val,\n    );\n\n    my $tt = Template-&gt;new({\n       ENCODING     =&gt; \"UTF-8\",\n       INCLUDE_PATH =&gt; \"$RealBin/tmpl\",\n    });\n\n    $tt-&gt;process('test.tmpl', \\%vars)\n       or die($tt-&gt;error());\n}\n</code></pre>\n\n<p><code>tmpl/test.tmpl</code>:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Test&lt;/title&gt;\n&lt;meta http-equiv=\"Content-type\" content=\"text/html; charset=UTF-8\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n[% val | html %]\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>That is, of course, assuming the data in the database is correct. My request to have this verified has gone unanswered.</p>\n"}], "owner": {"reputation": 15, "user_id": 4614743, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ca3aefc922fdf4e04dbebc355873a260?s=128&d=identicon&r=PG&f=1", "display_name": "musicweb", "link": "https://stackoverflow.com/users/4614743/musicweb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1490903045, "creation_date": 1490814959, "last_edit_date": 1490876208, "question_id": 43102284, "link": "https://stackoverflow.com/questions/43102284/how-do-i-fix-the-display-of-accented-characters", "title": "How do I fix the display of accented characters?", "body": "<p>I realize this is an older script, but I would appreciate\nany help getting it to work properly. Years ago it worked\nfine, but lately it's been acting funny.\nExcuse the formatting please....</p>\n\n<p>When I run it in the browser, the french accented characters\ndo not show properly. But in the text file that it generates,\nthey show just fine. What is happening here?</p>\n\n<p>Perl version is v5.20.2\nMy database is MySQL, utf8_unicode_ci\nThe table is also utf8_unicode_ci</p>\n\n<p>in browser: <code>H\u00c3\u00a9l\u00c3\u00a8ne Rollan</code> and in file: <code>H\u00e9l\u00e8ne Rollan</code></p>\n\n<p>in browser: <code>Coeur \u00c3 l&#x60;\u00c3\u00a9coute</code> and in file: <code>Coeur \u00e0 l&#x60;\u00e9coute</code> </p>\n\n<pre><code>#!/usr/bin/perl --\nuse utf8;\nuse CGI::Carp qw(fatalsToBrowser);\nuse CGI qw (:standard);\n$q = new CGI;\nuse Encode;\nuse open ':encoding(utf8)';\nbinmode(STDOUT, \":unix:utf8\");\n\n$user = \"manager\";\n\nrequire \"config.cgi\";\n&amp;Create_DB_Connection;\n$time = time(); \n\nsub Create_DB_Connection{\n  use DBI;\n  $DSN  = \"DBI:mysql:$mysql_database:$mysql_hostname\";\n  $dbh  = DBI-&gt;connect($DSN, \"$mysql_username\", \"$mysql_password\", {mysql_enable_utf8 =&gt; 1}) || die return;\n  if ($dbh) { $connected = \"YES\"; }\n  return;\n}\n\nsub Do_SQL{\n  eval{\n    $sth = $dbh-&gt;prepare($SQL);\n  };\n$dbh-&gt;do(qq{SET NAMES 'utf8';});\n    $sth-&gt;execute;\n    return ($sth);\n}\n\n    &amp;downline;\n\n# Prepare and show tree of affiliates\nsub downline {\n($sec, $min, $hour, $day, $mon, $year, $dweek, $dyear, $daylight) = localtime(time());\n$month = $mon;\n$year = $year + 1900;\nprint $q-&gt;header;\n\nprint&lt;&lt;EOF;\n    &lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;Network Summary&lt;/TITLE&gt;\n&lt;meta http-equiv=\"Content-type\" content=\"text/html;charset=utf-8\" /&gt;\n&lt;/HEAD&gt;\n&lt;style type=\"text/css\"&gt; \n&lt;!-- \nA:visited {text-decoration: none;} \nA:hover {text-decoration: underline;}\nA:link {text-decoration: none;} \nA:active {text-decoration: none;} \n.MEMBERS {font-size: 8pt; text-decoration: none; font-family: Verdana,verdana; color: FF0000;}\n--&gt; \n&lt;/style&gt;\n&lt;BODY BGCOLOR=\"FFFFFF\" TEXT=\"000000\" LINK=\"000080\" VLINK=\"004080\"&gt;\n&lt;center&gt;&lt;font size=4 face=arial color=000000&gt;&lt;b&gt;Network Summary as of $month/$year&lt;/b&gt;&lt;br&gt;\n&lt;font face=verdana,arial size=1&gt;&lt;a href=wmstats_en2.cgi&gt;[return to main page]&lt;/a&gt;&lt;/font&gt;&lt;/center&gt;\n&lt;p&gt;\nEOF\n\n$featured_file = \"/home/bruce/data/featured.txt\";\n\n$SQL=\"SELECT FIRST_NAME,LAST_NAME,SPONSOR_ID,CO_SPONSOR_ID,ID FROM main_members\"; \n&amp;Do_SQL;\n  while ($row = $sth-&gt;fetchrow_hashref){\n  $info{$row-&gt;{'ID'}} = [$row-&gt;{'FIRST_NAME'},$row-&gt;{'LAST_NAME'},$row-&gt;{'SPONSOR_ID'}];\n  push @{ $kids{$row-&gt;{'CO_SPONSOR_ID'}} }, $row-&gt;{'ID'};\n}\n$kid = \"$user\";\n\nif (!$kids{$kid}) { \nprint&lt;&lt;EOF;\n&lt;center&gt;&lt;b&gt;&lt;font size=2 face=arial&gt;There are currently no members in your downline&lt;/font&gt;&lt;/b&gt;&lt;font size=4 face=arial color=000000&gt;&lt;br&gt;&lt;BR&gt;\nEOF\n} else {\n&amp;crunch(1);\n}\n\n$o++;\n\nsub crunch {\n\nforeach $kid (@{ $kids{$kid} }) {\n$newlevel++;\n$payouts{$newlevel}++;\n$levels{$newlevel}++; \n$total_downline++;\nwhile ($b &lt; $newlevel) { $report .= \"&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\"; $b++; } $b=0; \n$report .= \"$newlevel: $kid - $info{$kid}[0] $info{$kid}[1] &lt;br&gt;\";\n\n# I added this to generate a text file\nopen (FILE, \"&gt;&gt;$featured_file\");\nflock(FILE, 2);\nprint FILE \"$newlevel: $kid - $info{$kid}[0] $info{$kid}[1] \\n\";\nflock(FILE, 8);\nclose (FILE);\n\n&amp;crunch($newlevel);\n$newlevel--;\ndelete($info{$kid});\n} \n}\nprint&lt;&lt;EOF;\n&lt;center&gt;&lt;table&gt;&lt;tr&gt;&lt;td valign=top nowrap&gt;\n&lt;font face=verdana size=2&gt;\n$report\n&lt;/td&gt;&lt;td valign=top&gt;\n&lt;table cellpadding=0&gt;&lt;tr&gt;\n&lt;td align=right nowrap&gt;&lt;font face=verdana,arial size=2&gt;&lt;b&gt;Total Downline:&lt;p&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&lt;font face=verdana,arial size=2&gt;&lt;b&gt;&amp;nbsp; $total_downline&lt;p&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;\nEOF\n\nwhile (!$found_some) { $i++;\nif ($levels{$i}) {\nprint&lt;&lt;EOF;\n&lt;tr&gt;&lt;td align=right&gt;&lt;font face=verdana,arial size=2&gt;&lt;b&gt;Level $i:&lt;/td&gt;&lt;td&gt;&lt;font face=verdana,arial size=2&gt;&lt;b&gt;&amp;nbsp; $levels{$i}&lt;/td&gt;&lt;/tr&gt;\nEOF\n} else { $found_some = 1; }\n}\n\nprint&lt;&lt;EOF;\n&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n&lt;p&gt;&lt;font face=verdana size=2&gt;&lt;b&gt;\n&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;\nEOF\n}\n</code></pre>\n"}, {"tags": ["perl", "representation"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490805472, "post_id": 43099193, "comment_id": 73280142, "body": "What have you tried so far? Please <a href=\"https://stackoverflow.com/posts/43099193/edit\">edit</a> your question to include the code."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5250946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b835ddf0e5d3586bda3644992a00c3b7?s=128&d=identicon&r=PG&f=1", "display_name": "jbird468", "link": "https://stackoverflow.com/users/5250946/jbird468"}, "edited": false, "score": 0, "creation_date": 1490888854, "post_id": 43112546, "comment_id": 73324342, "body": "That&#39;s it! I knew I had to keep track of what I had seen already but I did not know how to apply that to the data. Thanks!"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 0, "last_activity_date": 1490862950, "creation_date": 1490862950, "answer_id": 43112546, "question_id": 43099193, "link": "https://stackoverflow.com/questions/43099193/multi-column-minimal-representation-discovery-in-perl/43112546#43112546", "title": "Multi-column minimal representation discovery in perl", "body": "<p>Use a <strong>hash</strong> to determine whether you have seen a particular column combination before, and then use that to determine whether to print a particular line.</p>\n\n<p>Here is a rather basic example to demonstrate the idea:</p>\n\n<p><strong>filter.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\ndie \"usage: $0 file col1,col2,col3, ... coln\\n\" unless @ARGV;\nmy ($file, $columns) = @ARGV;\n-f $file or die \"$file does not exist!\";\ndefined $columns or die \"need to pass in columns!\";\n\nmy @columns;\nfor my $col ( split /,/, $columns ) {\n    die \"Invalid column id $col\" unless $col &gt;= 1; # 1-based\n    push @columns, $col - 1; # 0-based\n}\nscalar @columns or die \"No columns!\";\n\nopen my $fh, \"&lt;\", $file or die \"Unable to open $file : $!\";\nmy %uniq;\nwhile (&lt;$fh&gt;) {\n    chomp();\n    next if $. == 1; # Skip Header\n    my (@data) = split /,/, $_; # Use Text::CSV for any non-trivial csv file\n    my $key = join '|', @data[ @columns ]; # key will look like 'foo|bar|baz'\n    if (not defined $uniq{ $key } ) {\n        print $_ . \"\\n\"; # Print the whole line with the first unique set of columns\n        $uniq{ $key } = 1; # Now we have seen this combo\n    }\n}\n</code></pre>\n\n<p><strong>data.csv</strong></p>\n\n<pre><code>SERIAL,TRUTH,IN,PARALLEL\n123,TRUE,YES,5\n124,TRUE,YES,5\n125,TRUE,YES,3\n126,TRUE,NO,5\n127,FALSE,YES,1\n128,FALSE,YES,3\n129,FALSE,NO,7\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>perl filter.pl data.csv 2,3\n123,TRUE,YES,5\n126,TRUE,NO,5\n127,FALSE,YES,1\n129,FALSE,NO,7\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5250946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b835ddf0e5d3586bda3644992a00c3b7?s=128&d=identicon&r=PG&f=1", "display_name": "jbird468", "link": "https://stackoverflow.com/users/5250946/jbird468"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 43112546, "answer_count": 1, "score": -3, "last_activity_date": 1490862950, "creation_date": 1490805034, "question_id": 43099193, "link": "https://stackoverflow.com/questions/43099193/multi-column-minimal-representation-discovery-in-perl", "title": "Multi-column minimal representation discovery in perl", "body": "<p>I have a csv of data with about 20 columns and each column will have more than one distinct value. Each row after the top one which is the header, is an individual data sample. I want to narrow the list down programatically so that I have the smallest number of data samples but each permutation of the column data is still represented. </p>\n\n<p>Example data</p>\n\n<pre><code>SERIAL,ACTIVE,COLOR,CLASS,SEASON,SEATS\n.0xb468d47cc9749fb862990426ff79aafb,T,GREEN,BETA,SUMMER,3\n.0x847129b35bad62f5837eec30dc07a8a4,T,VIOLET,DELTA,SUMMER,1\n.0x14b8df88fd6d6547e387f4caa99e52fd,F,ORANGE,ALPHA,SUMMER,4\n.0x0a07fb97224caf79ea73d3fdd5495b8f,T,YELLOW,DELTA,WINTER,1\n.0x7d747e689bb27b60198283d7b86db409,F,READ,DELTA,SPRING,2\n.0x8247524df49bd19c4c316ee070a2dd4a,T,BLUE,GAMA,WINTER,2\n.0x4103ed42af6e8e463708a6c629907fb5,T,YELLOW,ALPHA,SPRING,5\n.0xc38deea7f02fbfbcdde1d3718d6decb4,T,YELLOW,DELTA,FALL,5\n.0xa3d562edcf64e151d7de08ff8f8e0a94,F,VIOLET,DELTA,SUMMER,3\n.0x9da58b3b05603325c24629f700c25c97,T,YELLOW,OMEGA,SPRING,4\n.0xef0c0e75083229d654c9b111e3af8726,T,BLUE,GAMA,FALL,1\n.0xa9022c8713f0aba2a8e1d20475a3104a,T,YELLOW,BETA,SUMMER,2\n.0x5bb5f73e6030730610866cee80cfc2fb,F,ORANGE,BETA,FALL,5\n.0xc202e5b43dd65525754fdc52b89e7375,T,BLUE,OMEGA,SUMMER,3\n.0xfac9145af33a74aedae7cc0442426432,F,READ,BETA,SPRING,1\n.0x457949648053f710b4f2d55cb237a91d,T,GREEN,BETA,SPRING,3\n.0xed94d4df300f10f5c4dc5d3ac76cf9e5,F,VIOLET,ALPHA,WINTER,15\n.0x870130135beed4cbbe06478e368b40b3,F,YELLOW,ALPHA,SPRING,3\n.0x3b6f17841edb9651e732e3ffbacbe14a,T,GREEN,OMEGA,SUMMER,3\n.0xfb30e054466b9e4cf944c8e48ff74c93,F,VIOLET,DELTA,SUMMER,8\n.0xf741ddc71b4a667585acaa35b67dc6c9,F,BLUE,BETA,FALL,4\n.0x60257ad6c299e466086cc6e5bb0a9a33,F,VIOLET,OMEGA,SPRING,1\n.0xa5d208bfee5a27a7619ba07dcbdaeea0,T,GREEN,OMEGA,FALL,1\n.0x53bc78fa8863e53e8c9fb11c5f6d2320,F,GREEN,GAMA,SPRING,2\n.0x5a01253ce5cb0a6aa5213f34f0b35416,T,READ,BETA,WINTER,3\n.0xaed9a979ba9f6fbf39895b610dde80f4,T,ORANGE,DELTA,WINTER,1\n.0xe7769918e36671af77b5d3d59ea15cfe,T,ORANGE,OMEGA,FALL,4\n.0x9e5327a1583332e4c56d29c356dbc5d2,T,INDEGO,ALPHA,WINTER,5\n.0x79c5c70732ff04b4d00e81ac3a07c3b7,T,READ,OMEGA,FALL,5\n.0x55f54d3c9cd2552e286364894aeef62a,F,READ,GAMA,SPRING,15\n</code></pre>\n"}, {"tags": ["perl", "sybase"], "answers": [{"tags": [], "owner": {"reputation": 72378, "user_id": 183172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vhpvg.jpg?s=128&g=1", "display_name": "martin clayton", "link": "https://stackoverflow.com/users/183172/martin-clayton"}, "is_accepted": true, "score": 1, "last_activity_date": 1490801934, "creation_date": 1490801934, "answer_id": 43098093, "question_id": 43097769, "link": "https://stackoverflow.com/questions/43097769/sybase-warning-messages-from-perl-dbi/43098093#43098093", "title": "Sybase Warning messages from perl DBI", "body": "<p>You can use a callback to handle the messages you want ignored.  See the <a href=\"http://search.cpan.org/~mewp/DBD-Sybase-1.15/Sybase.pm#Sybase_Specific_Attributes\" rel=\"nofollow noreferrer\">DBD::Sybase docs</a>.  The below is derived from the docs.  You specify the message numbers you would like to ignore.</p>\n\n<pre><code>%blocked_msgs = map { $_ =&gt; 1 }  ( 2401, 2411 );\nsub err_handler {\n  my($err, $sev, $state, $line, $server, $proc, $msg, $sql, $err_type) = @_;\n\n   if ( exists $blocked_msgs{$err} ) { # it's a blocked message\n     return 0;    # This is not an error\n   }\n   return 1;\n}\n</code></pre>\n\n<p>This is how you might use it:</p>\n\n<pre><code>$dbh = DBI-&gt;connect('dbi:Sybase:server=troll', 'sa', '');\n$dbh-&gt;{syb_err_handler} = \\&amp;err_handler;\n$dbh-&gt;do(\"exec someproc\");\n$dbh-&gt;disconnect;\n</code></pre>\n"}], "owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 43098093, "answer_count": 1, "score": 1, "last_activity_date": 1490801934, "creation_date": 1490801064, "question_id": 43097769, "link": "https://stackoverflow.com/questions/43097769/sybase-warning-messages-from-perl-dbi", "title": "Sybase Warning messages from perl DBI", "body": "<p>I am connecting to sybase 12 from a perl script and calling storedprocs, I get the following warnings</p>\n\n<pre><code>DBD::Sybase::db prepare failed: Server message number=2401 severity=11 state=2 line=0 server=SERVER_NAME text=Character\nset conversion is not available between client character set 'utf8' and server character set 'iso_1'.\nServer message number=2411 severity=10 state=1 line=0 server=SERVER_NAME text=No conversions will be done.\nat line 210.\n</code></pre>\n\n<p>Now, I understand these are only warnings, and my process works perfectly fine, but I am calling my stored proc in a loop and throughout the day and hence it creates a lot of warning message in my log files which causes the entire process to run a bit slower than expected. Can someone help me how can i suppress these please?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 4, "creation_date": 1490799598, "post_id": 43097188, "comment_id": 73275780, "body": "The simplest way would to build an entirely new hash using <code>lc</code> to normalize the keys (assuming ascii)"}, {"owner": {"reputation": 390, "user_id": 6285099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30ae18ca8ecdc9b5e833ec53c2d8c486?s=128&d=identicon&r=PG&f=1", "display_name": "Azaghal", "link": "https://stackoverflow.com/users/6285099/azaghal"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1490799814, "post_id": 43097188, "comment_id": 73275951, "body": "Wouldn&#39;t it just keep one of the values instead of adding them up ?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1490799885, "post_id": 43097188, "comment_id": 73276001, "body": "You would have to add the values: <code>$new_hash{lc $key} += $old_hash{$key};</code> for all keys in <code>%old_hash</code>"}], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 6285099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30ae18ca8ecdc9b5e833ec53c2d8c486?s=128&d=identicon&r=PG&f=1", "display_name": "Azaghal", "link": "https://stackoverflow.com/users/6285099/azaghal"}, "edited": false, "score": 0, "creation_date": 1490865093, "post_id": 43097768, "comment_id": 73306480, "body": "I didn&#39;t know about the fc feature, right on point as always !"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1490801063, "creation_date": 1490801063, "answer_id": 43097768, "question_id": 43097188, "link": "https://stackoverflow.com/questions/43097188/case-insensitive-search-for-multiple-matches-in-a-hash-merge-the-keys-and-add-u/43097768#43097768", "title": "Case insensitive search for multiple matches in a hash, merge the keys and add up the values", "body": "<p>Create a new hash from the old one by aggregating the values for equivalent keys</p>\n\n<p>Like this. Note that the data is deleted from the original hash so as to save space. The <code>fc</code> operator does Unicode case folding so that it will work on non-ASCII characters</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'fc';\n\nmy %data = (\n    de  =&gt; 14477841,\n    la  =&gt;  6577441,\n    et  =&gt;  5327316,\n    PAR =&gt;  1670264,\n    PaR =&gt;  1669878,\n    PAr =&gt;  1669877,\n);\n\nmy %new_data;\n\n$new_data{ fc $_ } += delete $data{$_} for keys %data;\n\nuse Data::Dump 'dd';\ndd \\%new_data;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{ de =&gt; 14477841, et =&gt; 5327316, la =&gt; 6577441, par =&gt; 5010019 }\n</code></pre>\n"}], "owner": {"reputation": 390, "user_id": 6285099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30ae18ca8ecdc9b5e833ec53c2d8c486?s=128&d=identicon&r=PG&f=1", "display_name": "Azaghal", "link": "https://stackoverflow.com/users/6285099/azaghal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 43097768, "answer_count": 1, "score": 0, "last_activity_date": 1490801063, "creation_date": 1490799514, "question_id": 43097188, "link": "https://stackoverflow.com/questions/43097188/case-insensitive-search-for-multiple-matches-in-a-hash-merge-the-keys-and-add-u", "title": "Case insensitive search for multiple matches in a hash, merge the keys and add up the values", "body": "<p>I have a hash containing a very big list of words (keys) and their frequency (values).<br>\nMy problem is that the same word can appear several times with different cases, like this :</p>\n\n<pre><code>de =&gt; 14477841\nla =&gt; 6577441\net =&gt; 5327316\nPAR =&gt; 1670264\nPaR =&gt; 1669878\nPAr =&gt; 1669877    \n</code></pre>\n\n<p>When that happens, I would like to find all the different versions of a same word in the hash, regardless of the case, and merge them while adding up the values so here I'd get :</p>\n\n<pre><code>de =&gt; 14477841\nla =&gt; 6577441\net =&gt; 5327316\npar =&gt; 5010019\n</code></pre>\n\n<p>(\"par\" is here in lower case but I don't really care, as long as there's only one version of it.)</p>\n\n<p>I've tried to get the different keys in a array and check if a different version of each item of this list existed in the hash. There are a lot of different case patterns that I can't think of and have trouble to predict.    </p>\n\n<p>Here is a sample of my code, for what it's worth (it partially works but I still get duplicates)</p>\n\n<pre><code>my %hashoutput;\nmy %hash = map { my ( $key, $value ) = split \"\\t\"; ( $key, $value ) } @lignes;\n\nforeach $ligne (@lignes) #list of keys and values separated by a tab\n{\n\n($cleorigine, $valeur) = split /\\t/, $ligne;    #get the key and value\n$cle = $cleorigine =~ s/^([A-Z])/lc($1)/gr;     # different versions of it\n$clemaj = $cleorigine =~ s/^([a-z])/uc($1)/ge;\n\n    if ($cleorigine !~ /[0-9]{2}/g)\n    {\n        if ($ligne =~ /^([A-Z]|[\u00c9\u00c8\u00ca\u00c2\u00c0\u00d9\u00db\u00c7\u00d4\u00ce\u00cf])/g)\n        {\n            if (exists $hash{lc($cleorigine)})\n            {\n                $valeur1 = $valeur + $hash{lc($cleorigine)};    \n                $hashoutput{ $cleorigine } = $valeur1;\n            }\n            if (not exists $hash{lc($cleorigine)})\n            {\n                if (exists $hash{$cle})\n                {\n                    $valeur2 = $valeur + $hash{$cle};\n                    $hashoutput{ $cleorigine } = $valeur2;\n                }\n            }\n        }\n        elsif ($ligne =~ /^([a-z]|[\u00e9\u00e8\u00ea\u00e2\u00e0\u00f9\u00fb\u00e7\u00f4\u00ee\u00ef])/g)\n        {\n\n            if (exists $hash{$clemaj})\n            {\n            }\n            elsif (not exists $hash{uc($clemaj)}) \n            {\n                {\n                    $hashoutput{ $cleorigine } = $valeur;\n                }\n            }\n\n        }\n    }\n}\n</code></pre>\n\n<p>Is there a better / simpler way to do it ?</p>\n"}, {"tags": ["json", "perl", "json-rpc"], "comments": [{"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 3, "creation_date": 1490798488, "post_id": 43096611, "comment_id": 73274791, "body": "Have you recently changed versions of Perl or do you have different versions of perl: <a href=\"http://stackoverflow.com/questions/6256633/how-can-you-determine-what-perl-module-is-causing-undefined-symbol-perl-tstack\" title=\"how can you determine what perl module is causing undefined symbol perl tstack\">stackoverflow.com/questions/6256633/&hellip;</a> suggests that you have a lib that was compiled with a different version that you are trying to use."}, {"owner": {"reputation": 1047, "user_id": 929732, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ab07188bfbcf1c804ada347f9391e7ae?s=128&d=identicon&r=PG", "display_name": "BostonMacOSX", "link": "https://stackoverflow.com/users/929732/bostonmacosx"}, "reply_to_user": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 0, "creation_date": 1490801733, "post_id": 43096611, "comment_id": 73277436, "body": "updated post with some more troubleshooting info"}, {"owner": {"reputation": 10008, "user_id": 462006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37peF.jpg?s=128&g=1", "display_name": "scrappedcola", "link": "https://stackoverflow.com/users/462006/scrappedcola"}, "edited": false, "score": 2, "creation_date": 1490801913, "post_id": 43096611, "comment_id": 73277592, "body": "So it looks like you compiled the module on 5.10 and are trying to use it on the 5.16. You need to rebuild it for 5.16."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1490867614, "creation_date": 1490867614, "answer_id": 43114350, "question_id": 43096611, "link": "https://stackoverflow.com/questions/43096611/perl-when-i-add-just-the-use-jsonrpcclient-to-my-script-but-not-use-it-i/43114350#43114350", "title": "PERL: When I add just the &quot;use JSON::RPC::Client&quot; to my script but not use it I get an error", "body": "<p>(I can't find a module called JSON::RPC::Client on CPAN, so some of this is guesswork. Where did the module come from?)</p>\n\n<p>The reason why you're getting those errors when you just uncomment the <code>use</code> line is that Perl will then try to load the library. And the load is failing.</p>\n\n<p>It looks like your library has an XS component. That is to say, it's not written in Pure Perl. Part of it is a Perl wrapper around a library written in another language (probably C).</p>\n\n<p>Perl guarantees that XS libraries written for a given major version of Perl (in this case 5.10) will work for all minor releases under that same major version number (so any 5.10.x). But major releases will usually break that binary compatibility. An XS module built for Perl 5.10.x will not usually work with Perl 5.16.x.</p>\n\n<p>The solution is to rebuild the module for your new version of Perl. I hope you know where the source code is, because (as I mentioned earlier) it's not on CPAN.</p>\n"}], "owner": {"reputation": 1047, "user_id": 929732, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ab07188bfbcf1c804ada347f9391e7ae?s=128&d=identicon&r=PG", "display_name": "BostonMacOSX", "link": "https://stackoverflow.com/users/929732/bostonmacosx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490867614, "creation_date": 1490798127, "last_edit_date": 1490801674, "question_id": 43096611, "link": "https://stackoverflow.com/questions/43096611/perl-when-i-add-just-the-use-jsonrpcclient-to-my-script-but-not-use-it-i", "title": "PERL: When I add just the &quot;use JSON::RPC::Client&quot; to my script but not use it I get an error", "body": "<p>So </p>\n\n<p>here is the import lines of my script...when I uncomment the JSON::RPC line I get the error listed below. I'm not even using the library in the script and still get the error listed below</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse Data::Dumper;\nuse Mail::MboxParser;\nuse Mail::MboxParser::Mail;\nuse Mail::Box::Manager;\nuse Email::Delete qw[delete_message];\nuse POSIX;\nuse Date::Calc qw(:all);\n#use JSON::RPC::Client;\nuse strict;\n</code></pre>\n\n<p>--  </p>\n\n<pre><code> /usr/bin/perl: symbol lookup error:  /usr/local/lib64/perl5/auto/Storable/Storable.so: undefined symbol: Perl_Istack_sp_ptr\n</code></pre>\n\n<p>On the perl 5.10 box:</p>\n\n<pre><code>perl -MStorable -wle'print $ARGV[0]-&gt;VERSION' Storable\n2.30\n</code></pre>\n\n<p>On the perl 5.16 box:</p>\n\n<pre><code>perl -MStorable -wle'print $ARGV[0]-&gt;VERSION' Storable\nperl: symbol lookup error: /usr/local/lib64/perl5/auto/Storable/Storable.so: undefined symbol: Perl_Istack_sp_ptr\n</code></pre>\n"}, {"tags": ["python", "perl", "shell", "ssh"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 1, "creation_date": 1490803586, "post_id": 43095865, "comment_id": 73278868, "body": "Linux (and many other *nixen) include a utility called <code>script</code> that may be of use here..."}], "answers": [{"comments": [{"owner": {"reputation": 728, "user_id": 610312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c65934f33958e0a4e8a41d46298102d?s=128&d=identicon&r=PG", "display_name": "ewindes", "link": "https://stackoverflow.com/users/610312/ewindes"}, "edited": false, "score": 0, "creation_date": 1490802628, "post_id": 43097599, "comment_id": 73278146, "body": "This post <a href=\"https://unix.stackexchange.com/questions/86941/how-to-ssh-into-a-specific-directory\" title=\"how to ssh into a specific directory\">unix.stackexchange.com/questions/86941/&hellip;</a> also might be helpful - you could exec a shell as the last command in your list."}, {"owner": {"reputation": 1, "user_id": 3248073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NL3T1.png?s=128&g=1", "display_name": "CrackNRock", "link": "https://stackoverflow.com/users/3248073/cracknrock"}, "edited": false, "score": 0, "creation_date": 1490879072, "post_id": 43097599, "comment_id": 73316570, "body": "That is exactly what i was looking for.. Thanks @ewindes"}], "tags": [], "owner": {"reputation": 728, "user_id": 610312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c65934f33958e0a4e8a41d46298102d?s=128&d=identicon&r=PG", "display_name": "ewindes", "link": "https://stackoverflow.com/users/610312/ewindes"}, "is_accepted": false, "score": 1, "last_activity_date": 1490800592, "creation_date": 1490800592, "answer_id": 43097599, "question_id": 43095865, "link": "https://stackoverflow.com/questions/43095865/ssh-to-a-server-and-have-session-running-with-all-commands-executed-to-have-them/43097599#43097599", "title": "SSH to a server and have session running with all commands executed to have them saved in local file", "body": "<p>If you're just trying to save the output of an interactive SSH session, do this:</p>\n\n<pre><code>ssh userid@server | tee logfile\n</code></pre>\n\n<p>Your example implies that you want to run some commands (pwd, hostname) from your shell script, and then keep the ssh connection open for interactive use.  I'd suggest instead adding those commands to your login script on the server (.profile or whatever.)</p>\n\n<p>If you <strong>really</strong> want to use your method, take a look at <a href=\"https://unix.stackexchange.com/questions/103885/piping-data-to-a-processs-stdin-without-causing-eof-afterward\">https://unix.stackexchange.com/questions/103885/piping-data-to-a-processs-stdin-without-causing-eof-afterward</a></p>\n"}], "owner": {"reputation": 1, "user_id": 3248073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NL3T1.png?s=128&g=1", "display_name": "CrackNRock", "link": "https://stackoverflow.com/users/3248073/cracknrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490800592, "creation_date": 1490796344, "question_id": 43095865, "link": "https://stackoverflow.com/questions/43095865/ssh-to-a-server-and-have-session-running-with-all-commands-executed-to-have-them", "title": "SSH to a server and have session running with all commands executed to have them saved in local file", "body": "<p>I basically want to SSH to a server and then the commands executed in a server and its outputs be saved into a local file. I thought below one would save the output to a file but is exiting once commands are executed *i can understand its done with its execution so its exiting but i do not wish to exit unless i exit from the server</p>\n\n<ol>\n<li>SSH to server via script</li>\n<li>Save the output of all execution in server in local file</li>\n<li>Come out , if exit found</li>\n</ol>\n\n<p><strong>Here is the basic code:</strong></p>\n\n<p>#! /usr/bin/bash</p>\n\n<p>ssh user@server > file.log &lt;&lt; EOF</p>\n\n<p>pwd;hostname;</p>\n\n<p>EOF</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490794423, "post_id": 43095028, "comment_id": 73271225, "body": "The larger an object is, the more time it takes to load into memory/cache, the more size it uses in the cache (and thus less objects can be placed into cache). So yes, object size has an impact."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490794534, "post_id": 43095028, "comment_id": 73271325, "body": "Mind that the above comment makes the assumption you create an object and work on it. Accessing a <i>single</i> member of the object has no such impact."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490794611, "post_id": 43095028, "comment_id": 73271382, "body": "@WillemVanOnsem The impact is worth enough to consider a redesign? Take an example where my object stores 2 arrays with 1000 elements each which is loaded for 2 operations. Would it be worth to split the object in 2 objects one for each operation?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1490795797, "post_id": 43095028, "comment_id": 73272429, "body": "@WillemVanOnsem: I think that is misleading. In general, objects are <i>created</i>, and nor &quot;loaded into memory&quot;. The OP&#39;s suggestion of dividing the object into multiple smaller ones won&#39;t affect the total size, and so won&#39;t improve the time to create the data."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490795846, "post_id": 43095028, "comment_id": 73272479, "body": "@Borodin: see my second comment. It is only if you <i>work</i> on larger objects that this indeed slows down things."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1490795874, "post_id": 43095028, "comment_id": 73272509, "body": "@asdf: We would really have to see your code, and your question really belongs on <a href=\"http://codereview.stackexchange.com/\"><b>Code Review</b></a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490797325, "post_id": 43095028, "comment_id": 73273745, "body": "@Borodin I made an update with some code that emulates the functionality and the scenario."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1490800364, "post_id": 43095028, "comment_id": 73276392, "body": "So those are filenames, not full files, right? How many are we talking? Hundreds, thousands, tens of thousands? How many of those objects do you make? How many are in memory at once? I think you are trying to find a problem where there is none. If performance is a problem, it might well be because the code uses the data in a slow way. I suggest you run it with Devel::NYTProf and look at things that appear slow there. Likely it&#39;s not how your data is organized, but how it&#39;s created or used."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490801337, "post_id": 43095028, "comment_id": 73277119, "body": "@simbabque File names, not full paths, 1000 on each array maximum. I make only one object and keep it in memory from the begining to the end, I will try to do this at home to install the profiler module ( currently I can&#39;t pass the company proxy)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1490802190, "post_id": 43095028, "comment_id": 73277832, "body": "That&#39;s really not a lot of data. What typically slows things down if you have Moose or Moo, and <b>a lot</b> of small objects that get created and destroyed all the time. Think reading a product list and creating several different objects per line, with files larger than 100k rows. In that case, it&#39;s visible that all the object stuff is on top of existing data structures. But the use-case you are describing sounds trivial. Internally, an object is no different from any other reference, it just as a bit of meta info attached through the <code>bless</code>."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1490802366, "post_id": 43095028, "comment_id": 73277965, "body": "Is there a performance concern that is based on a real observation, or is this all just a hypothetical question? If you feel that your application is not performant have you profiled it to see where the time is being spent?  See <code>Devel::NYTProf</code> for a profiling solution.  See <code>Benchmark</code> for a module that helps test alternative solutions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1490803060, "post_id": 43095028, "comment_id": 73278477, "body": "@DavidO Just hypotethical. The application execution takes about 10 minutes and I was wondering ( if you check the question title) if it&#39;s the objects sizes a concern that I should take in account."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1490803136, "post_id": 43095028, "comment_id": 73278536, "body": "@DavidO Basically I am concerned that I am using a big object instead of smaller ones and that is affecting the performance"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490809704, "post_id": 43095028, "comment_id": 73282935, "body": "By what you describe the size should not be your problem.  Now, there may be other <i>related</i> problems.  Say, in every operation you delete file names from your lists and repopulate others.  <i>That</i> would be slow, since deleting from an array is horrible, and rewriting whole arrrays all the time just takes time.  But that&#39;s not about size per se. I&#39;d say, profile as others have said, then take it from there.  You may indeed want to restructure your class, but not merely because of size."}], "owner": {"user_type": "does_not_exist", "display_name": "user6734995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490797279, "creation_date": 1490794355, "last_edit_date": 1490797279, "question_id": 43095028, "link": "https://stackoverflow.com/questions/43095028/does-an-objects-size-affect-performance", "title": "Does an object&#39;s size affect performance?", "body": "<p>Working on a relatively big old Perl application which uses some OOP concepts.</p>\n\n<p>I wondered if the size of the created objects affects the performance of the product.</p>\n\n<p>If it does, would it improve the performance if I split the objects (which are currently big) into multiple smaller modules unreferenced at the proper time?\n<br>The object is defined here with the following structure and then exported to be available in other modules.</p>\n\n<pre><code># module FilesModule.pm\nuse Exporter   ();\nour ($VERSION, @ISA, @EXPORT);\n# set the version for version checking\n$VERSION     = 6.00;\n@ISA         = qw(Exporter);\n@EXPORT      = qw($FilesModule);\n}\n\nsub new {\n    my $className = shift;\n    my $self = {\n        txtFilesList =&gt; \"array with all files stored in a folder\",\n        testFilesList =&gt; \"array with all files that need to be tested\",\n        filesListToDelete =&gt; \"array with all files to be deleted\",\n        logFiles =&gt; \"array with all log files\",\n    };\n\n    bless $self, $className;\n}\n</code></pre>\n\n<p><br>The main module makes an instance of the object and then uses it ( also the object is used later in another modules)</p>\n\n<pre><code>#module MainModule.pm\nuse modules::FilesModule qw($FilesModule);\n\n#create the files object\nmy $FilesModule = modules::FilesModule-&gt;new(...);\n\n# iterate over txtFilesList array\n# iterate over testFilesList array and do some tests in file and remove from object the failed subjects\n# iterate over filesListToDelete array and delete the files\n# iterate over logFiles array and change the extensions ( also change in object)\n</code></pre>\n\n<p>My thought would be to split the FilesModule.pm in 4 modules to have smaller objects to work with.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490790610, "post_id": 43093412, "comment_id": 73268143, "body": "<a href=\"http://stackoverflow.com/q/164414/1331451\">stackoverflow.com/q/164414/1331451</a> woruld work, but it&#39;s weird. You are almost right with your negative lookahead, but you need to match something after the lookahead, like three of anything: <code>(?!(foo|bar|baz))...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1490791171, "creation_date": 1490791171, "answer_id": 43093781, "question_id": 43093412, "link": "https://stackoverflow.com/questions/43093412/excluding-files-in-pathtiny-using-negative-lookahead-regex/43093781#43093781", "title": "Excluding files in Path::Tiny using negative lookahead regex", "body": "<p>Put the <code>\\z</code> <em>inside</em> the negative look-ahead</p>\n\n<pre><code>qr/\\A(?!(?:foo|bar|baz)\\z)/\n</code></pre>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 2, "accepted_answer_id": 43093781, "answer_count": 1, "score": 1, "last_activity_date": 1490792042, "creation_date": 1490790199, "last_edit_date": 1490792042, "question_id": 43093412, "link": "https://stackoverflow.com/questions/43093412/excluding-files-in-pathtiny-using-negative-lookahead-regex", "title": "Excluding files in Path::Tiny using negative lookahead regex", "body": "<p>Using <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>. It has a method: <a href=\"https://metacpan.org/pod/Path::Tiny#children\" rel=\"nofollow noreferrer\">children</a> which could be used as:</p>\n\n<pre><code>@paths = path(\"/tmp\")-&gt;children( qr/\\.txt$/ );\n</code></pre>\n\n<blockquote>\n  <p>If an optional qr// argument is provided, it only returns objects for\n  child names that match the given regular expression. Only the base\n  name is used for matching</p>\n</blockquote>\n\n<p>So the</p>\n\n<pre><code>@paths = path(\"/tmp\")-&gt;children( qr/\\A(foo|bar|baz)\\z/ );\n</code></pre>\n\n<p>will return either <code>foo</code> <code>bar</code> <code>baz</code> files found in the <code>/tmp</code>.</p>\n\n<p>I need the opposite, want any file but NOT the <code>(foo|bar|baz)</code> ones.</p>\n\n<p>The following could filter out the unwanted ones,</p>\n\n<pre><code>@paths = grep { $_-&gt;basename !~ /^(foo|bar|baz)$/ } path(\"/tmp\")-&gt;children;\n</code></pre>\n\n<p>but wondering how to write the <code>qr</code> for it.</p>\n\n<p><strong>So, the question</strong>: How to create the <code>qr</code> expression for: any file but <strong>not</strong> <code>foo|bar|baz</code>?</p>\n\n<p>I tried the negative lookahead</p>\n\n<pre><code>path(...)-&gt;children( qr/\\A (?!(foo|bar|baz)) \\z/x );\n</code></pre>\n\n<p>but, it doesn't do what I think it should do  :) - e.g. my regex is wrong.</p>\n"}, {"tags": ["xml", "perl", "xsd", "libxml2"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1490788755, "post_id": 43092712, "comment_id": 73266820, "body": "Please, start with adding <code>strict</code> and <code>warnings</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1490789970, "post_id": 43092712, "comment_id": 73267671, "body": "Can you post the expected result, too?"}, {"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1490790971, "post_id": 43092712, "comment_id": 73268382, "body": "@choroba, updated."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 0, "creation_date": 1490791287, "post_id": 43093680, "comment_id": 73268617, "body": "There is no need to have the result assigned, hence I&#39;ve modified the script, but the error output is still the same..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 1, "creation_date": 1490792238, "post_id": 43093680, "comment_id": 73269353, "body": "@dellair: No, it isn&#39;t &quot;still the same&quot;. The message is now <code>Can&#39;t locate object method &quot;getAttribute&quot; via package &quot;XML::LibXML::Attr&quot;</code>, whereas before it was <code>via package &quot;XML::LibXML::NodeList&quot;</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "edited": false, "score": 1, "creation_date": 1490794286, "post_id": 43093680, "comment_id": 73271108, "body": "@dellair: I have fixed the remaining errors and added a functional version of your code."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1490795313, "last_edit_date": 1490795313, "creation_date": 1490790884, "answer_id": 43093680, "question_id": 43092712, "link": "https://stackoverflow.com/questions/43092712/perl-xml-libxml-to-replace-a-node-with-the-other-on-xsd-schema/43093680#43093680", "title": "Perl XML LibXML to replace a node with the other on xsd schema", "body": "\n\n<p>A call to <code>findnodes</code> in <em>list context</em> will return a list of matching nodes. That is how your first loop</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>foreach $test ($xpc-&gt;findnodes(\"//xsd:element\", $root)) { ... }\n</code></pre>\n\n<p>works, because <code>for</code> applies list context to the expression in parentheses</p>\n\n<p>However, your second loop</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>foreach my $fnd_node ($documentroot = $xpc-&gt;findnodes('./@name[.=\"RootNode\"]', $test)) { ... }\n</code></pre>\n\n<p>puts <code>findnodes</code> into <em>scalar context</em> because you first assign the result to <code>$documentroot</code>. That causes <code>findnodes</code> to return an <code>XML::LibXML::NodeList</code> object instead of a list of nodes, and the loop will iterate just once, setting <code>$fnd_node</code> to that object and causing the errors you see</p>\n\n<p>I'm unclear why you have added the assignment to <code>$documentroot</code>, as it will just set both <code>$documentroot</code> and <code>$fnd_node</code> to the same value, which hass no advantage. Your errors would go away if you removed that assignment and replaced <code>$documentroot</code> with<code>$fnd_node</code> in the body of the loop</p>\n\n<p>By the way, there is no need for the test</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>if ( $xpc-&gt;findnodes('./@name[.=\"RootNode\"]', $test) ) { ... }\n</code></pre>\n\n<p>before looping over the same call to <code>findnodes</code>. If the call finds no matching nodes then the <code>for</code> loop won't execute at all</p>\n\n<p><br/></p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>There were a few other problems with your program. For instance you didn't delete the original <code>&lt;xs:complexType name=\"RootNode\"&gt;</code> element, and you inserted the contained <code>&lt;xs:element name=\"real_node\" type=\"RealNode\"/&gt;</code> at the end of the file</p>\n\n<p>I've fixed your code like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/opt/perl/bin/perl\nuse strict;\nuse warnings 'all';\n\nuse XML::LibXML ();\nuse XML::LibXML::XPathContext ();\nuse File::Copy;\nuse File::Basename;\n\nmy ($in_qfn) = @ARGV;\n\nmy @files = $in_qfn ? glob \"$in_qfn/*.xsd\" : 'test.xsd';\n\nfor my $file ( @files ) {\n\n    print \"###LI### 1 $file\\n\";\n\n    my ( $name, $path, $suffix ) = fileparse( $file, qr/\\.[^.]*/ );\n    my $out_qfn = \"${name}NoRoot${suffix}\";\n\n    print \"###LO### 1 $out_qfn\\n\";\n\n    my $parser = XML::LibXML-&gt;new();\n    my $doc    = $parser-&gt;parse_file( $file );\n    my $root   = $doc-&gt;documentElement();\n\n    my $xpc = XML::LibXML::XPathContext-&gt;new( $doc );\n    $xpc-&gt;registerNs( 'xsd', 'http://www.w3.org/2001/XMLSchema' );\n\n    # Get the RootNode element node and delete it\n    for my $element_root ( $xpc-&gt;findnodes( '//xsd:element[@name=\"RootNode\"]', $root ) ) {\n        my $parent = $element_root-&gt;parentNode;\n        $parent-&gt;removeChild( $element_root );\n    }\n\n    # Get the RootNode Complex Type node\n    for my $complex_root ( $xpc-&gt;findnodes( '//xsd:complexType[@name=\"RootNode\"]', $root ) ) {\n\n        my ($copyelem) = $xpc-&gt;findnodes( \".//xsd:element\", $complex_root );\n\n        # Copy the element node within RootNode node to the top level\n        $root-&gt;insertBefore(\n            $copyelem-&gt;cloneNode( 1 ),\n            $root-&gt;firstChild\n        );\n\n        # Put a newline before the cloned copy\n        $root-&gt;insertBefore(\n            XML::LibXML::Text-&gt;new( \"\\n\\n    \" ),\n            $root-&gt;firstChild\n        );\n\n        # Remove the &lt;xs:complexType name=\"RootNode\"&gt;\n        $complex_root-&gt;parentNode-&gt;removeChild($complex_root);\n    }\n\n    $doc-&gt;toFile( $out_qfn );\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-xsd prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;xs:schema xmlns=\"test\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" targetNamespace=\"test\" elementFormDefault=\"qualified\"&gt;\n\n    &lt;xs:element name=\"real_node\" type=\"RealNode\"/&gt;\n\n\n\n\n    &lt;xs:complexType name=\"RealNode\"&gt;\n            &lt;xs:annotation&gt;\n                    &lt;xs:documentation source=\"Name\" xml:lang=\"EN\"&gt;TestName&lt;/xs:documentation&gt;\n                    &lt;xs:documentation source=\"Type\" xml:lang=\"EN\"&gt;TestType&lt;/xs:documentation&gt;\n            &lt;/xs:annotation&gt;\n            &lt;xs:sequence&gt;\n                    &lt;xs:element name=\"Elem2\" type=\"Type2\" minOccurs=\"1\"&gt;\n                            &lt;xs:annotation&gt;\n                                    &lt;xs:documentation source=\"Name3\" xml:lang=\"EN\"&gt;TestName3&lt;/xs:documentation&gt;\n                                    &lt;xs:documentation source=\"Type3\" xml:lang=\"EN\"&gt;TestType3&lt;/xs:documentation&gt;\n                            &lt;/xs:annotation&gt;\n                    &lt;/xs:element&gt;\n                    &lt;xs:element name=\"Elem4\" type=\"Type4\" maxOccurs=\"99\"/&gt;\n            &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:simpleType name=\"Type2\"&gt;\n            &lt;xs:restriction base=\"xs:string\"&gt;\n                    &lt;xs:pattern value=\"[A-Z]{9,9}\"/&gt;\n            &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n    &lt;xs:simpleType name=\"Type4\"&gt;\n            &lt;xs:annotation&gt;\n                    &lt;xs:documentation source=\"Name5\" xml:lang=\"EN\"&gt;TestName5&lt;/xs:documentation&gt;\n                    &lt;xs:documentation source=\"Type5\" xml:lang=\"EN\"&gt;TestType5&lt;/xs:documentation&gt;\n            &lt;/xs:annotation&gt;\n            &lt;xs:restriction base=\"xs:string\"&gt;\n                    &lt;xs:pattern value=\"[A-Z]{7,9}\"/&gt;\n            &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n&lt;/xs:schema&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1490791637, "creation_date": 1490791637, "answer_id": 43093959, "question_id": 43092712, "link": "https://stackoverflow.com/questions/43092712/perl-xml-libxml-to-replace-a-node-with-the-other-on-xsd-schema/43093959#43093959", "title": "Perl XML LibXML to replace a node with the other on xsd schema", "body": "<p>You haven't described the logic what elements to remove and replace. The following code just does what you said: replaces one element by another and removes a third one. </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::LibXML;\nuse XML::LibXML::XPathContext;\n\nmy $dom = 'XML::LibXML'-&gt;load_xml(location =&gt; shift);\nmy $xpc = 'XML::LibXML::XPathContext'-&gt;new($dom);\n$xpc-&gt;registerNs(xsd =&gt; 'http://www.w3.org/2001/XMLSchema');\nmy $root = $dom-&gt;documentElement;\n\nmy $replace    = $xpc-&gt;findnodes('//xsd:element[@name=\"RootNode\"]');\nmy $replace_by = $xpc-&gt;findnodes('//xsd:element[@name=\"real_node\"]');\nmy $remove     = $xpc-&gt;findnodes('//xsd:complexType[@name=\"RootNode\"]');\n\ndie \"Can't replace by several\" if $replace_by-&gt;size &gt; 1;\n\n$_-&gt;parentNode-&gt;removeChild($_) for @$remove;\n$_-&gt;replaceNode($replace_by-&gt;[0]) for @$replace;\n\nprint $dom;\n</code></pre>\n\n<p>Note that <code>findnodes</code> returns a nodelist, you can check its size with <code>-&gt;size</code> as shown in the code, and access it members as elements of an array reference.</p>\n"}], "owner": {"reputation": 389, "user_id": 1625076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fRfxc.png?s=128&g=1", "display_name": "dellair", "link": "https://stackoverflow.com/users/1625076/dellair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 43093680, "answer_count": 2, "score": 1, "last_activity_date": 1490795313, "creation_date": 1490788297, "last_edit_date": 1490791250, "question_id": 43092712, "link": "https://stackoverflow.com/questions/43092712/perl-xml-libxml-to-replace-a-node-with-the-other-on-xsd-schema", "title": "Perl XML LibXML to replace a node with the other on xsd schema", "body": "<p>I have an XML Schema and I would like to replace the RootNode with the element found inside of the RootNode complex Type with. </p>\n\n<p>For example, below expected result is to have the <code>&lt;xs:element name=\"RootNode\" ...&gt;</code> replaced by <code>&lt;xs:element name=\"real_node\" type=\"RealNode\"/&gt;</code> and remove the whole node of <code>&lt;xs:complexType name=\"RootNode\"&gt;</code>.</p>\n\n<p>XML Schema:</p>\n\n<pre><code>&lt;xs:schema xmlns=\"test\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" targetNamespace=\"test\" elementFormDefault=\"qualified\"&gt;\n    &lt;xs:element name=\"RootNode\" type=\"RootNode\"/&gt;\n\n    &lt;xs:complexType name=\"RootNode\"&gt;\n            &lt;xs:sequence&gt;\n                    &lt;xs:element name=\"real_node\" type=\"RealNode\"/&gt;\n            &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:complexType name=\"RealNode\"&gt;\n            &lt;xs:annotation&gt;\n                    &lt;xs:documentation source=\"Name\" xml:lang=\"EN\"&gt;TestName&lt;/xs:documentation&gt;\n                    &lt;xs:documentation source=\"Type\" xml:lang=\"EN\"&gt;TestType&lt;/xs:documentation&gt;\n            &lt;/xs:annotation&gt;\n            &lt;xs:sequence&gt;\n                    &lt;xs:element name=\"Elem2\" type=\"Type2\" minOccurs=\"1\"&gt;\n                            &lt;xs:annotation&gt;\n                                    &lt;xs:documentation source=\"Name3\" xml:lang=\"EN\"&gt;TestName3&lt;/xs:documentation&gt;\n                                    &lt;xs:documentation source=\"Type3\" xml:lang=\"EN\"&gt;TestType3&lt;/xs:documentation&gt;\n                            &lt;/xs:annotation&gt;\n                    &lt;/xs:element&gt;\n                    &lt;xs:element name=\"Elem4\" type=\"Type4\" maxOccurs=\"99\" /&gt;\n            &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:simpleType name=\"Type2\"&gt;\n            &lt;xs:restriction base=\"xs:string\"&gt;\n                    &lt;xs:pattern value=\"[A-Z]{9,9}\"/&gt;\n            &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n    &lt;xs:simpleType name=\"Type4\"&gt;\n            &lt;xs:annotation&gt;\n                    &lt;xs:documentation source=\"Name5\" xml:lang=\"EN\"&gt;TestName5&lt;/xs:documentation&gt;\n                    &lt;xs:documentation source=\"Type5\" xml:lang=\"EN\"&gt;TestType5&lt;/xs:documentation&gt;\n            &lt;/xs:annotation&gt;\n            &lt;xs:restriction base=\"xs:string\"&gt;\n                    &lt;xs:pattern value=\"[A-Z]{7,9}\"/&gt;\n            &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xs:schema xmlns=\"test\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" targetNamespace=\"test\" elementFormDefault=\"qualified\"&gt;\n    &lt;xs:element name=\"real_node\" type=\"RealNode\"/&gt;\n\n    &lt;xs:complexType name=\"RealNode\"&gt;\n            &lt;xs:annotation&gt;\n                    &lt;xs:documentation source=\"Name\" xml:lang=\"EN\"&gt;TestName&lt;/xs:documentation&gt;\n                    &lt;xs:documentation source=\"Type\" xml:lang=\"EN\"&gt;TestType&lt;/xs:documentation&gt;\n            &lt;/xs:annotation&gt;\n            &lt;xs:sequence&gt;\n                    &lt;xs:element name=\"Elem2\" type=\"Type2\" minOccurs=\"1\"&gt;\n                            &lt;xs:annotation&gt;\n                                    &lt;xs:documentation source=\"Name3\" xml:lang=\"EN\"&gt;TestName3&lt;/xs:documentation&gt;\n                                    &lt;xs:documentation source=\"Type3\" xml:lang=\"EN\"&gt;TestType3&lt;/xs:documentation&gt;\n                            &lt;/xs:annotation&gt;\n                    &lt;/xs:element&gt;\n                    &lt;xs:element name=\"Elem4\" type=\"Type4\" maxOccurs=\"99\" /&gt;\n            &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:simpleType name=\"Type2\"&gt;\n            &lt;xs:restriction base=\"xs:string\"&gt;\n                    &lt;xs:pattern value=\"[A-Z]{9,9}\"/&gt;\n            &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n    &lt;xs:simpleType name=\"Type4\"&gt;\n            &lt;xs:annotation&gt;\n                    &lt;xs:documentation source=\"Name5\" xml:lang=\"EN\"&gt;TestName5&lt;/xs:documentation&gt;\n                    &lt;xs:documentation source=\"Type5\" xml:lang=\"EN\"&gt;TestType5&lt;/xs:documentation&gt;\n            &lt;/xs:annotation&gt;\n            &lt;xs:restriction base=\"xs:string\"&gt;\n                    &lt;xs:pattern value=\"[A-Z]{7,9}\"/&gt;\n            &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>My script:</p>\n\n<pre><code>#!/opt/perl/bin/perl -w\nuse strict;\nuse warnings;\n\nuse XML::LibXML               qw( );\nuse XML::LibXML::XPathContext qw( );\nuse File::Copy;\nuse File::Basename;\n\nmy $in_qfn  = $ARGV[0];\nmy ($parser, $doc, $root, $out_qfn);\nmy ($name, $path, $suffix);\nmy ($documentroot, $complexdoc, $copyelem, $test, $fnd_type, $parent);\n\nmy @files = glob \"$in_qfn/*.xsd\";\n\nforeach my $file (@files) {\n   print \"###LI### 1 $file\\n\";\n   ($name, $path, $suffix) = fileparse($file);\n   $out_qfn = \"${name}NoRoot.${suffix}\";\n\n   $parser = XML::LibXML-&gt;new();\n   $doc    = $parser-&gt;parse_file($file);\n   $root   = $doc-&gt;documentElement();\n\n   my $xpc = XML::LibXML::XPathContext-&gt;new($doc);\n   $xpc-&gt;registerNs('xsd', 'http://www.w3.org/2001/XMLSchema');\n\n   # Get the RootNode element node and delete it\n   foreach $test ($xpc-&gt;findnodes(\"//xsd:element\", $root)) {\n      $fnd_type = $test-&gt;getAttribute('type') or next;\n\n      if ( $xpc-&gt;findnodes('./@name[.=\"RootNode\"]', $test) ) {\n         foreach my $fnd_node ($xpc-&gt;findnodes('./@name[.=\"RootNode\"]', $test)) {\n            $fnd_type = $fnd_node-&gt;getAttribute('type') or next;\n            $parent = $fnd_node-&gt;[0]-&gt;parentNode;\n            $parent-&gt;removeChild($fnd_node-&gt;[0]);\n         }\n      }\n   }\n\n   # Get the RootNode Complext Type node\n   foreach $test ($xpc-&gt;findnodes(\"//xsd:complexType\", $root)) {\n      if ($xpc-&gt;findnodes('./@name[.=\"RootNode\"]', $root)) {\n         $complexdoc = $xpc-&gt;findnodes('./@name[.=\"RootNode\"]', $root);\n         $copyelem = $xpc-&gt;findnodes(\"//xsd:element\", $complexdoc);\n         # Copy the element node within RootNode node to the top level\n         $root-&gt;appendChild($copyelem-&gt;cloneNode(1));\n      }\n   }\n\n   $doc-&gt;toFile($out_qfn);\n}\n</code></pre>\n\n<p>However, the script throws error:</p>\n\n<pre><code>Can't locate object method \"getAttribute\" via package \"XML::LibXML::NodeList\"\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["linux", "excel", "perl", "memory"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1490784092, "post_id": 43090638, "comment_id": 73263600, "body": "You need to include an example, as we don&#39;t know what&#39;s going on in your code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490789530, "post_id": 43090638, "comment_id": 73267360, "body": "Please <a href=\"https://stackoverflow.com/posts/43090638/edit\">edit</a> that into your question, with proper formatting. It&#39;s good to include your own example because your question should be able to stand alone, without external resources. Even if that resource is on-site, it still is not part of this question. Thank you."}, {"owner": {"reputation": 555, "user_id": 1560371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/24aaf6434f3d900036367ef49faf55b5?s=128&d=identicon&r=PG", "display_name": "Arthur bauer", "link": "https://stackoverflow.com/users/1560371/arthur-bauer"}, "edited": false, "score": 0, "creation_date": 1490794313, "post_id": 43090638, "comment_id": 73271127, "body": "I found examples using version 0.76 which use $workbook-&gt;set_optimization() but did not find older examples running  version 0.70. We cannot install the newest version separately because we are using the ones which are affered by Redhat"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6175763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e22a4aa37aaf1170e4e8a3b81853c6?s=128&d=identicon&r=PG&f=1", "display_name": "user6175763", "link": "https://stackoverflow.com/users/6175763/user6175763"}, "is_accepted": false, "score": 0, "last_activity_date": 1495120825, "creation_date": 1495120825, "answer_id": 44051791, "question_id": 43090638, "link": "https://stackoverflow.com/questions/43090638/spreadsheetwriteexcel-set-optimization-generates-unlink-errors/44051791#44051791", "title": "Spreadsheet::WriteExcel set_optimization() generates unlink errors", "body": "<p>Excel::Writer::XLSX is used to write large amount of data in XLSX and to handle large data and to reduce memory usage set_optimization() method is used.</p>\n\n<p>In XLSX file, a workbook can have maximum of 10,48,576 rows and 16,384 columns can be created and if the rows count exceeds maximum limit a new sheet can be created in the same workbook and in such a way the large amount of data can be handled.  </p>\n\n<p>Refer \"Write_largeData_XLSX.pl\" from this link <a href=\"https://github.com/AarthiRT/Excel_Writer_XLSX\" rel=\"nofollow noreferrer\">https://github.com/AarthiRT/Excel_Writer_XLSX</a> for more details.</p>\n"}], "owner": {"reputation": 555, "user_id": 1560371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/24aaf6434f3d900036367ef49faf55b5?s=128&d=identicon&r=PG", "display_name": "Arthur bauer", "link": "https://stackoverflow.com/users/1560371/arthur-bauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495120825, "creation_date": 1490782495, "last_edit_date": 1495542384, "question_id": 43090638, "link": "https://stackoverflow.com/questions/43090638/spreadsheetwriteexcel-set-optimization-generates-unlink-errors", "title": "Spreadsheet::WriteExcel set_optimization() generates unlink errors", "body": "<p>We have been using Spreadsheet::WriteExcel since a long time and this was working like a charm.</p>\n\n<p>Few years ago we migrated to Excel-Writer-XLSX which uses 5 times more memory than WriteExcel as stated in the <a href=\"http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#SPEED_AND_MEMORY_USAGE\" rel=\"nofollow noreferrer\">documentation</a>.\nThanks to XLSX, users are now able to generate larger Excel files.\nWe started since few weeks to face memory usage issues where the about 84% of the server memory was needed.</p>\n\n<p>The same documentation states that <code>$workbook-&gt;set_optimization()</code> should solve the problem. The given performance figures are promising.\nWe tried to use <code>$workbook-&gt;set_optimization()</code> on a sample file but this did not work. It generates an unlink error.</p>\n\n<p>If <code>set_optimization()</code> is removed, the Excel file is generated properly.\nThe example is provided by the author in this <a href=\"https://stackoverflow.com/questions/14877562/excelwriterxlsx-set-optimization-only-writes-numeric-data\">thread</a> :</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse Excel::Writer::XLSX;\n\nmy $workbook = Excel::Writer::XLSX-&gt;new('test.xlsx');\n$workbook-&gt;set_optimization();\n\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n\nmy @header_values = ( 1, 2, 3, 'foo', 'bar', 6, 7 );\nmy $header_cnt    = 0;\n\nfor my $header_cell (@header_values){\n    $worksheet-&gt;write(0, $header_cnt, $header_cell);\n    $header_cnt++;\n}\n\n$workbook-&gt;close();\n\nError unlinking file /opt/.../rKhGTRYWSJ using unlink0 at /usr/local/share/perl5/Excel/Writer/XLSX/Worksheet.pm line 204\n(in cleanup) Error unlinking file /opt/.../iGr8Qo8VBD using unlink0 at /usr/local/share/perl5/Excel/Writer/XLSX/Worksheet.pm line 204\n</code></pre>\n\n<p>we are running:</p>\n\n<ul>\n<li>Excel-Writer-XLSX 0.70</li>\n<li>perl v5.10.1</li>\n<li>Red Hat Enterprise Linux Server release 6.8 (Santiago)</li>\n</ul>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["perl", "api"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1490778493, "post_id": 43088228, "comment_id": 73259838, "body": "API keys are specific to each service, are you saying you&#39;re trying to reuse this? Also they are usually rate limited so if you&#39;ve been bashing the service over and over you&#39;ll end up getting a message like this. Consider examining the server side where you setup the API key. I don&#39;t think this is a perl problem."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490779614, "post_id": 43088228, "comment_id": 73260589, "body": "I&#39;ve written an answer with a little guide on how to get started with this kind of thing. But if you&#39;re unsure about what you can do with your API key, you should really talk to your account manager, or whoever gave you that key."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1490779557, "creation_date": 1490779557, "answer_id": 43089504, "question_id": 43088228, "link": "https://stackoverflow.com/questions/43088228/i-cant-connect-using-an-api/43089504#43089504", "title": "I can&#39;t connect using an api", "body": "<p>To get the text out of your response, you need to call the <a href=\"https://metacpan.org/pod/HTTP::Response#$r-%3Edecoded_content(-%25options-)\" rel=\"nofollow noreferrer\"><code>$response-&gt;decoded_content</code> method</a>. That will give you the JSON string that you can see in <code>_content</code> in your debug output. I've indented it to make it easier to read.</p>\n\n<pre><code>{\n   \"service-error\" : {\n      \"status\" : {\n         \"statusCode\" : \"AUTHENTICATION_ERROR\",\n         \"statusText\" : \"Requestor configuration settings insufficient for access to this resource.\"\n      }\n   }\n}\n</code></pre>\n\n<p>You can use <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">the JSON module</a> to decode this into a Perl data structure.</p>\n\n<pre><code>use JSON 'from_json';\n\nmy $res = $ua-&gt;request($req);\nmy $json = from_json( $res-&gt;decoded_content );\n</code></pre>\n\n<p><strong>The error message you get back clearly states that you are not authenticated properly</strong>. I've looked <a href=\"https://dev.elsevier.com/tecdoc_api_authentication.html\" rel=\"nofollow noreferrer\">at this guide from the documentation</a> you mentioned. It seems that the <code>apiKey</code> URL param works, if you have the right type of account. You should check with whoever made that account for you, or if that was you and you're not sure, the account manager at that service that is working with you. They'll tell you if you are using the right API key, and if this method of authentication works for you.</p>\n\n<p>Since this API also offers to use a custom header <code>X-ELS-APIKey: [apikey]</code> for the authentication I would suggest using that. Your API key is a secret, and you shouldn't share it with anyone. It's like a password. If you put it into the URL, it might show up in log files. But as a header, it does usually not.</p>\n\n<p>This is how you add a custom header to an HTTP request. Make sure you don't have the <code>apiKey</code> URL param any more if you do this.</p>\n\n<pre><code>my $req = HTTP::Request-&gt;new( GET =&gt; $url ); # no apiKey=123 here!\n$req-&gt;header( 'X-ELS-APIKey' =&gt; 123 );\n</code></pre>\n\n<p>Now as a last step, you should check the HTTP response code of the response. A <code>200</code> (or most other codes that start with <code>2</code>) means the request was successful. The <code>403</code> that you are getting back means <em>unauthorized</em>, which also hints at that you are not authenticated correctly.</p>\n\n<p>Since it seems that this API returns JSON in both success and failure cases, you might need to decode it for both. If you care to examine the failure response, that makes sense. If not, you can skip that part. To do this, use <code>$res-&gt;is_success</code>, which is also used in the <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">synopsis of the LWP::UserAgent documentation</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse HTTP::Request;\nuse JSON 'from_json';\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $req = HTTP::Request-&gt;new( GET =&gt; 'http://api.elsevier.com/content/ev/results?query=stress&amp;database=c&amp;updateNumber=1&amp;pageSize=1' );\n$req-&gt;header( 'X-ELS-APIKey' =&gt; 123 );\n\nif ($req-&gt;is_success) {\n    my $json = from_json( $res-&gt;decoded_content );\n    # ... do stuff with the response\n} else {\n    # something went wrong\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7522582, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ogQgj.png?s=128&g=1", "display_name": "yankel", "link": "https://stackoverflow.com/users/7522582/yankel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490781066, "creation_date": 1490776036, "last_edit_date": 1490779638, "question_id": 43088228, "link": "https://stackoverflow.com/questions/43088228/i-cant-connect-using-an-api", "title": "I can&#39;t connect using an api", "body": "<p>I'm quite new to API's so I don't know if this should be more straight forward.</p>\n\n<p>I write the following perl script</p>\n\n<pre><code>use strict;\nuse  LWP::UserAgent;\nrequire HTTP::Request;\n\nmy $request = HTTP::Request-&gt;new(GET =&gt; 'http://api.elsevier.com/content/ev/results?apiKey=1234&amp;query=stress&amp;database=c&amp;updateNumber=1&amp;pageSize=1');\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy  $response = $ua-&gt;request($request);\n</code></pre>\n\n<p>then when I get my response and print it in the debugger I get the following</p>\n\n<pre><code>HTTP::Response=HASH(0x9aedff8)\n   '_content' =&gt; '{\"service-error\":{\"status\":{\"statusCode\":\"AUTHENTICATION_ERROR\",\"statusText\":\"Requestor configuration settings insufficient for access to this resource.\"}}}'\n   '_headers' =&gt; HTTP::Headers=HASH(0x9aedfe8)\n      'allow' =&gt; 'GET'\n      'client-date' =&gt; 'Wed, 29 Mar 2017 08:08:25 GMT'\n      'client-peer' =&gt; '198.185.19.118:80'\n      'client-response-num' =&gt; 1\n      'content-length' =&gt; 156\n      'content-type' =&gt; 'application/json;charset=UTF-8'\n      'date' =&gt; 'Wed, 29 Mar 2017 08:08:24 GMT'\n      'p3p' =&gt; 'CP=\"IDC DSP LAW ADM DEV TAI PSA PSD IVA IVD CON HIS TEL OUR DEL SAM OTR IND OTC\"'\n      'server' =&gt; 'api.elsevier.com  9999'\n      'vary' =&gt; 'Origin'\n      'x-cnection' =&gt; 'close'\n      'x-els-apikey' =&gt; 'e688c9db4db0386581dbe4c4dda46164'\n      'x-els-reqid' =&gt; '0000015b190d89fe-a0d0'\n      'x-els-status' =&gt; 'AUTHENTICATION_ERROR(Requestor configuration settings insufficient for access to this resource.)'\n      'x-els-transid' =&gt; 'cbf787b4-d171-4e35-8237-8cab3c931205'\n      'x-re-ref' =&gt; '1 1490774904423414'\n   '_msg' =&gt; 'Forbidden'\n   '_protocol' =&gt; 'HTTP/1.1'\n   '_rc' =&gt; 403\n   '_request' =&gt; HTTP::Request=HASH(0x9fc3000)\n      '_content' =&gt; ''\n      '_headers' =&gt; HTTP::Headers=HASH(0x9ae73e0)\n         'user-agent' =&gt; 'libwww-perl/5.831'\n      '_method' =&gt; 'GET'\n      '_uri' =&gt; URI::http=SCALAR(0x9e25188)\n         -&gt; 'http://api.elsevier.com/content/ev/results?apiKey=e688c9db4db0386581dbe4c4dda46164&amp;query=stress&amp;database=c&amp;updateNumber=1&amp;pageSize=1'\n      '_uri_canonical' =&gt; URI::http=SCALAR(0x9e25188)\n         -&gt; REUSED_ADDRESS\n</code></pre>\n\n<p>one of the notable lines is</p>\n\n<pre><code>x-els-status' =&gt; 'AUTHENTICATION_ERROR(Requestor configuration settings     insufficient for access to this resource.)'\n</code></pre>\n\n<p>I don't know how to get a proper response text. I tried searching their websites for examples, but I can't seem to get it. as well I'm not sure if the key is only for scopus but not engineering village which I'm trying to use. </p>\n\n<p>There website is here. <a href=\"https://dev.elsevier.com/index.html?utm_expid=89327795-0.AtRZzToKQ2u1mZEyQ3n7OQ.0&amp;utm_referrer=https%3A%2F%2Fdev.elsevier.com%2Ftecdoc_ev_retrieval_request.html\" rel=\"nofollow noreferrer\">https://dev.elsevier.com/index.html?utm_expid=89327795-0.AtRZzToKQ2u1mZEyQ3n7OQ.0&amp;utm_referrer=https%3A%2F%2Fdev.elsevier.com%2Ftecdoc_ev_retrieval_request.html</a></p>\n\n<p>any help would be appreciated</p>\n"}, {"tags": ["regex", "perl", "grep"], "answers": [{"tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 1, "last_activity_date": 1490771989, "creation_date": 1490771989, "answer_id": 43086887, "question_id": 43086794, "link": "https://stackoverflow.com/questions/43086794/how-to-grep-word-from-file/43086887#43086887", "title": "How to grep word from file", "body": "<p>You can already do this with egrep :</p>\n\n<pre><code>egrep -f file2.txt file1.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1490772156, "creation_date": 1490772156, "answer_id": 43086946, "question_id": 43086794, "link": "https://stackoverflow.com/questions/43086794/how-to-grep-word-from-file/43086946#43086946", "title": "How to grep word from file", "body": "<p>When reading from a file, the final newline is part of each line read. You can remove the newlines from the pattern array by <a href=\"http://p3rl.org/chomp\" rel=\"nofollow noreferrer\">chomp</a>ing:</p>\n\n<pre><code>chomp( my @file2 = &lt;FILE2&gt; );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490782332, "post_id": 43090424, "comment_id": 73262437, "body": "Would benefit from a bit more explanation of what you&#39;ve &#39;fixed&#39; I think."}], "tags": [], "owner": {"reputation": 28, "user_id": 1500617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ac5d22ad2724d24566c475f56c2070?s=128&d=identicon&r=PG", "display_name": "praveenzx", "link": "https://stackoverflow.com/users/1500617/praveenzx"}, "is_accepted": false, "score": 0, "last_activity_date": 1490781959, "creation_date": 1490781959, "answer_id": 43090424, "question_id": 43086794, "link": "https://stackoverflow.com/questions/43086794/how-to-grep-word-from-file/43090424#43090424", "title": "How to grep word from file", "body": "<p>please try this .</p>\n\n<pre><code>use strict; \nuse warnings;\nuse List::MoreUtils qw(uniq);\n\n\nopen(FILE1,\"file1.txt\") or die \"Error, File1 could not open\\n\";           \nopen(FILE2,\"file2.txt\") or die \"Error, File2 could not open\\n\"; \nopen(FILE3, \"&gt;file3.txt\") or die \"Error, File3 could not open\\n\"; \n\nmy @file1=&lt;FILE1&gt;;\nmy @file2=&lt;FILE2&gt;;\nmy $j =0;\nmy $i =0;\n\nforeach my $main_line(@file1){\n    chomp($main_line);\n    foreach my $line(@file2){\n        chomp($line);\n        if ($main_line =~ /$line/i) {\n            print FILE3 \"$main_line\\n\";\n        }\n    }\n}\n\nclose(FILE3);\n</code></pre>\n\n<p>thanks,\npraveenzx~</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1490782090, "creation_date": 1490782090, "answer_id": 43090490, "question_id": 43086794, "link": "https://stackoverflow.com/questions/43086794/how-to-grep-word-from-file/43090490#43090490", "title": "How to grep word from file", "body": "<p>The root of this problems is <code>chomp</code> - you're not removing linefeeds, so the matches aren't working.</p>\n\n<p>But aside from that, there's a few problems with your code that could do with addressing:</p>\n\n<ul>\n<li>opening files, you should use 3 arg open with lexical file handles, as it's better style: <code>open (my $file1, '&lt;', 'file1.txt' ) or die $!;</code></li>\n<li>rather than a loop of loops, you'd probably be better off compiling up a 'match regex'. </li>\n<li>Instead of reading all of a file into an array, you can iterate line by line, and you don't need to use the memory. </li>\n<li>If you're iterating a loop, and <em>only</em> using the index to acccess the current element, you're far better off using <code>foreach my $line ( @things ) {</code> type syntax. </li>\n</ul>\n\n<p>So your code actually could be reduced to something like:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nopen(my $data, '&lt;',\"file1.txt\") or die $!;\nopen(my $search, '&lt;', \"file2.txt\") or die $!;\nopen(my $output, '&gt;', \"file3.txt\" ) or die $!;\n\nchomp ( my @search_terms = &lt;$search&gt; );\n\n#quotemeta is needed to avoid 'special' regex characters doing things. \nmy $search_regex = join \"|\", map { quotemeta }, @search_terms;\n\n#note - '\\b' denotes word boundary, which may not be what you want.  \n#means 'is' won't match 'fish'\n#so get rid of them if that's not what you want. \n$search_regex = qr/\\b($search_regex)\\b/;\n\nprint \"Using: $search_regex\\n\";\n\nselect $output; #default print destination\nwhile ( &lt;$data&gt; ) {\n    print if m/$search_regex/;\n}\n</code></pre>\n\n<p>Output (in 'file3.txt'):</p>\n\n<pre><code>i am a dog\ni am a cat\nhe is a boy\nshe is a girl\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 1741028, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e2b6804f757415727314341336e300c9?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1741028/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1490782090, "creation_date": 1490771747, "question_id": 43086794, "link": "https://stackoverflow.com/questions/43086794/how-to-grep-word-from-file", "title": "How to grep word from file", "body": "<p>I want to grep some word inside a file from another file. My code is able to grep the word on last line of the file but not the word before it. I have no idea why and hope can get help here. Below is the perl script i using:</p>\n\n<pre><code>open(FILE1,\"file1.txt\") or die \"Error, File1 could not open\\n\";           \nopen(FILE2,\"file2.txt\") or die \"Error, File2 could not open\\n\";\nopen(FILE3, \"&gt;file3.txt\") or die \"Error, File3 could not open\\n\";\n\nuse strict; \nuse warnings;\nuse List::MoreUtils qw(uniq);\n\nmy @file1=&lt;FILE1&gt;;\nmy @file2=&lt;FILE2&gt;;\nmy $j =0;\nmy $i =0;\nmy $zone =0;\nfor ($j=0; $j&lt;=$#file2; $j++){\n    $zone = $file2[$j];\n    unless ( $zone =~ m/#(.*?)/ ) {\n        print \"$zone\";\n        my @fid = grep /$zone/ , @file1;\n        @fid = uniq(@fid);\n        s{^\\s+|\\s+$}{}g foreach @fid;                #cancel leading space\n        for ($i=0; $i&lt;=$#fid; $i++){\n            print FILE3 \"$fid[$i]\\n\";\n        }\n        #@fid=();\n\n    }\n}\n\nclose(FILE3);\n</code></pre>\n\n<p>My file1.txt is something like this:</p>\n\n<pre><code>i am a dog\ni am a cat\nwe are the fish\nhe is a boy\nshe is a girl\n</code></pre>\n\n<p>My file2.txt is like this:</p>\n\n<pre><code>is\nam\n</code></pre>\n\n<p>But my file3 can only show those sentence contain am but no is, if i put is in second line and am in first line then my file3 only contain the sentences with is. I not very sure why my code can only grep the last row in my file2. Thanks for the help.</p>\n"}, {"tags": ["perl", "hash", "hash-of-hashes"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1490771482, "post_id": 43086232, "comment_id": 73255385, "body": "<code>&gt;&gt;</code> <a href=\"http://perldoc.perl.org/perldsc.html#Access-and-Printing-of-a-HASH-OF-HASHES\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a> <code>&lt;&lt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 1, "last_activity_date": 1490771523, "creation_date": 1490771523, "answer_id": 43086713, "question_id": 43086232, "link": "https://stackoverflow.com/questions/43086232/print-the-hash-name-of-a-hash-of-hashes-of-hashes-etc/43086713#43086713", "title": "Print the hash name of a hash of hashes of hashes etc", "body": "<p>The easiest way is probably to use a recursive function to go through the top-level hash and any subhashes, printing any keys that have subhashes before descending into the subhash:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy %bighash = (\n  'Peti Bar' =&gt; {\n    'Mathematics' =&gt; {    \n      'Arithmetic' =&gt; 7,    \n      'Geometry'   =&gt; 8,    \n      'Calculus'   =&gt; 9,    \n    },\n    'Art'        =&gt; 99,   \n    'Literature' =&gt; 88    \n  },                    \n  'Foo Bar' =&gt; {\n    'Mathematics' =&gt; 97, \n    'Literature'  =&gt; 67  \n  }                    \n);      \n\ndump_hash(\\%bighash);\n\nsub dump_hash {\n  my $hashref = shift;\n  my @parents = @_;\n\n  return unless $hashref &amp;&amp; ref $hashref eq 'HASH';\n\n  for my $key (sort keys %$hashref) {\n    my $val = $hashref-&gt;{$key};\n    next unless ref $val eq 'HASH';\n    say join ' -&gt; ', @parents, $key;\n    dump_hash($val, @parents, $key);\n  }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Foo Bar\nPeti Bar\nPeti Bar -&gt; Mathematics\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1490771834, "creation_date": 1490771834, "answer_id": 43086824, "question_id": 43086232, "link": "https://stackoverflow.com/questions/43086232/print-the-hash-name-of-a-hash-of-hashes-of-hashes-etc/43086824#43086824", "title": "Print the hash name of a hash of hashes of hashes etc", "body": "<p>Similar to Dave S</p>\n\n<pre><code>use strict;\n\nmy $VAR1 = {\n          'Peti Bar' =&gt; {\n                          'Mathematics' =&gt; 82,\n                          'Art' =&gt; 99,\n                          'Literature' =&gt; 88\n                        },\n          'Foo Bar' =&gt; {\n                         'Mathematics' =&gt; 97,\n                         'Literature' =&gt; 67\n                       }\n        };\n\n\nsub printHash($$) {\n    my $hashRef = shift;\n    my $indent = shift;\n    for (keys %$hashRef) {\n        if (ref($hashRef-&gt;{$_}) eq 'HASH') {\n            print \"$indent$_ \\n\";\n            printHash($hashRef-&gt;{$_},\"\\t$indent\");\n        }\n        else {\n            print \"$indent$_  $hashRef-&gt;{$_}\\n\";\n        }\n    }\n}\n\nprintHash($VAR1,undef);\n</code></pre>\n\n<p>Output is :</p>\n\n<pre><code>Foo Bar\n        Mathematics  97\n        Literature  67\nPeti Bar\n        Literature  88\n        Mathematics  82\n        Art  99\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 2843435, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/0f8805261b3b7ff8222dcbab949465f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2843435/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490771834, "creation_date": 1490769937, "last_edit_date": 1490771415, "question_id": 43086232, "link": "https://stackoverflow.com/questions/43086232/print-the-hash-name-of-a-hash-of-hashes-of-hashes-etc", "title": "Print the hash name of a hash of hashes of hashes etc", "body": "<p>So I have a massive hash of hashes. </p>\n\n<pre><code>$VAR1 = {\n          'Peti Bar' =&gt; {\n                          'Mathematics' =&gt; 82,\n                          'Art' =&gt; 99,\n                          'Literature' =&gt; 88\n                        },\n          'Foo Bar' =&gt; {\n                         'Mathematics' =&gt; 97,\n                         'Literature' =&gt; 67\n                       }\n        };\n</code></pre>\n\n<p>There's an example I found on the web.</p>\n\n<p>What I want to print is 'Peti Bar' and 'Foo Bar', but it's not quite that simple. Imagine Mathematics being it's own hash within that hash, etc. So I'd wanta to print 'Peti Bar' -> 'Mathematics' -> 'AnotherHash'\n'Foo Bar' -> 'Literature' -> 'Anotherhash'</p>\n\n<p>I guess maybe what I'm asking is print the hash of hashes without key/value of each respective hash.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1490769107, "post_id": 43085880, "comment_id": 73254052, "body": "Why not simple <code>next if $dir =~ &#47;^(?: \\.\\. | Rollback )&#47;x</code> ... ? (Also skip <code>\\.</code>)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490780964, "post_id": 43085880, "comment_id": 73261573, "body": "I mean <code>next if not -d $dir or $dir =~ &#47;^(?:\\.\\.|Rollback)|\\.$&#47;;</code>. If the directory to skip is named <i>exactly</i> &quot;Rollback&quot; then it&#39;s <code>&#47;^(?:\\.\\.?|Rollback)$&#47;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2103, "user_id": 3632526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qBSeT.jpg?s=128&g=1", "display_name": "volkinc", "link": "https://stackoverflow.com/users/3632526/volkinc"}, "is_accepted": true, "score": 0, "last_activity_date": 1490894435, "creation_date": 1490894435, "answer_id": 43124473, "question_id": 43085880, "link": "https://stackoverflow.com/questions/43085880/perl-regular-expression-how-to-ignore-and-rollback-sub-directory/43124473#43124473", "title": "Perl regular expression: How to ignore &#39;..&#39; and &#39;Rollback&#39; sub-directory", "body": "<p>Most likely you want to use \"non-capturing identifier\" ?:\nPlease try the following code. </p>\n\n<pre><code>if(-d $input) {\n    opendir (my $dh, $input) or die \"Cannot opendir $input: $!\";\n    while (my $dir = readdir($dh)) {\n        my $path_dir = File::Spec-&gt;catfile($input, $dir);\n        next unless (-d $path_dir &amp;&amp; $dir =~ m/^(?:([\\.]{2}|Rollback))/);\n        print \"dir=$dir\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 7706269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f7f1f207d8b5195cbbbbfb2644657236?s=128&d=identicon&r=PG&f=1", "display_name": "LOUDKING", "link": "https://stackoverflow.com/users/7706269/loudking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 43124473, "answer_count": 1, "score": 0, "last_activity_date": 1490894435, "creation_date": 1490768728, "question_id": 43085880, "link": "https://stackoverflow.com/questions/43085880/perl-regular-expression-how-to-ignore-and-rollback-sub-directory", "title": "Perl regular expression: How to ignore &#39;..&#39; and &#39;Rollback&#39; sub-directory", "body": "<p>I would like to ignore '..' and 'Rollback' sub-directory but following code is not working. Please suggest.</p>\n\n<pre><code>if(-d $input) {\n    opendir (my $dh, $input) or die \"Cannot opendir $input: $!\";\n    while (my $dir = readdir($dh)) {\n        my $path_dir = File::Spec-&gt;catfile($input, $dir);\n        next unless (-d $path_dir &amp;&amp; $dir =~ m/^(?![\\.{2}|Rollback])/);\n        print \"dir=$dir\\n\";\n    }\n}\n</code></pre>\n\n<p>Output shows only one sub-directory but the desired output should be a sub-directory plus '.'</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1490738355, "post_id": 43080680, "comment_id": 73244548, "body": "What is/does <code>$myprog</code>?"}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1490738409, "post_id": 43080680, "comment_id": 73244576, "body": "It&#39;s an arbitrary Linux command. In my case it&#39;s an MPI (mpi-forum.org) program that could run for minutes."}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490742507, "post_id": 43081012, "comment_id": 73246019, "body": "Alternatively, you could probably add another <code>fork()</code> as wrapper around the whole thing. Then runtime is found after <code>waitpid()</code> for that fork"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490742645, "post_id": 43081012, "comment_id": 73246064, "body": "@H&#229;konH&#230;gland  Yes, I am contemplating adding a note on doing it manually somehow.  But that won&#39;t solve problems, I think."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490743807, "post_id": 43081012, "comment_id": 73246415, "body": "Yes I was not thinking clearly.. an extra fork will not help I think..it needs to either read from the handle until EOF (as you show) or use <code>waitpid()</code> on the PID returned by <code>open</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490745386, "post_id": 43081012, "comment_id": 73246869, "body": "@H&#229;konH&#230;gland  Right, I think now that there is no better way, updated accordingly."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1490793637, "post_id": 43081012, "comment_id": 73270571, "body": "Thanks. I had missed the <code>close(MYOUT)</code> further down in the script. I&#39;ll have some extra time in there because of the overhead of reading the output, but that&#39;s probably fine."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1490816860, "post_id": 43081012, "comment_id": 73287360, "body": "@WesleyBland You are welcome.  There may be some overhead but I am not sure how much (in comparison to the program&#39;s outputting data to, say, files).  If you need to time it down to only the necessary work perhaps run the program with redirection of its output to files? Writing data to files is a part of program&#39;s operation, so not overhead. Then you wouldn&#39;t need to open a pipe but could simply use <code>system</code> (or a module)."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1491217739, "post_id": 43081012, "comment_id": 73438750, "body": "Wouldn&#39;t it be possible to create a new class, IO::WithTimer, that would store its start time in the object upon start, and report the time on destruction of the handle?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1491333665, "post_id": 43081012, "comment_id": 73503221, "body": "@choroba Right, that would be far nicer!  It also provides framework for some conveniencies.  With a few addtions it could be a nice module, like <code>IO::Stats</code> or some such."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1510162764, "last_edit_date": 1510162764, "creation_date": 1490739717, "answer_id": 43081012, "question_id": 43080680, "link": "https://stackoverflow.com/questions/43080680/measure-the-runtime-of-a-program-run-via-perl-open/43081012#43081012", "title": "Measure the runtime of a program run via perl &quot;open&quot;", "body": "<p>Since you open a pipe, you need to time from before <code>open</code>ing to at least after the reading</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Time::HiRes qw(gettimeofday tv_interval sleep);\n\nmy $t0 = [gettimeofday];\n\nopen my $read, '-|', qw(ls -l) or die \"Can't open process: $!\";\n\nwhile (&lt;$read&gt;)\n{\n    sleep 0.1;\n    print;\n}\n\nprint \"It took \", tv_interval($t0), \" seconds\\n\";\n# close pipe and check \n</code></pre>\n\n<p>or, to time the whole process, after calling <code>close</code> on the pipe (<em>after</em> all reading is done)</p>\n\n<pre><code>my $t0 = [gettimeofday];\nopen my $read, '-|', qw(ls -l)  or die \"Can't open process: $!\";\n# ... while ($read) { ... }\nclose $read  or \n    warn $! ? \"Error closing pipe: $!\" : \"Exit status: $?\";\nprint \"It took \", tv_interval($t0), \" seconds\\n\";\n</code></pre>\n\n<p>The <a href=\"https://perldoc.perl.org/functions/close.html\" rel=\"nofollow noreferrer\">close</a> blocks and waits for the program to finish</p>\n\n<blockquote>\n  <p>Closing a pipe also waits for the process executing on the pipe to exit--in case you wish to look at the output of the pipe afterwards--and implicitly puts the exit status value of that command into <code>$?</code> [...]</p>\n</blockquote>\n\n<p>For the status check see <a href=\"http://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">$? variable in perlvar</a> and <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\">system</a></p>\n\n<p>If the timed program forks and doesn't <code>wait</code> on its children in a blocking way this won't time them correctly.\nIn that case you need to identify resources that they use (files?) and monitor that.</p>\n\n<p>I'd like to add that external commands should be put together carefully, to avoid shell injection trouble.  A good module is <a href=\"http://search.cpan.org/~rosch/String-ShellQuote-1.04/ShellQuote.pm\" rel=\"nofollow noreferrer\">String::ShellQuote</a>. See for example <a href=\"https://stackoverflow.com/a/28112793/4653379\">this answer</a> and <a href=\"https://stackoverflow.com/a/29596035/4653379\">this answer</a></p>\n\n<p>Using a module for capturing streams would free you from the shell and perhaps open other ways to run and time this more reliably. A good one is <a href=\"http://search.cpan.org/dist/Capture-Tiny/lib/Capture/Tiny.pm\" rel=\"nofollow noreferrer\">Capture::Tiny</a> (and there are others as well).</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/2173773/h%C3%A5kon-h%C3%A6gland\">H\u00e5konH\u00e6gland</a> for comments.  Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for setting me straight, to use <code>close</code> (and not <code>waitpid</code>).</p>\n"}], "owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 43081012, "answer_count": 1, "score": 3, "last_activity_date": 1510162764, "creation_date": 1490738258, "question_id": 43080680, "link": "https://stackoverflow.com/questions/43080680/measure-the-runtime-of-a-program-run-via-perl-open", "title": "Measure the runtime of a program run via perl &quot;open&quot;", "body": "<p>I'm working on a library with a test suite that uses Perl <code>open</code> to run it's tests. It looks something like this:</p>\n\n<pre><code>open (MYOUT, \"$myprog $arg1 $arg2 $arg3 2&gt;&amp;1 |\") die \"Bad stuff happened\";\n</code></pre>\n\n<p>What I'd really like to do is to measure the runtime of <code>$myprog</code>. Unfortunately, just grabbing a start time and end time around the <code>open</code> command just grabs roughly how long it takes to start up the process.</p>\n\n<p>Is there some way of either forcing the <code>open</code> command to finish the process (and therefore accurately measure time) or perhaps something else that would accomplish the same thing?</p>\n\n<p>Key constraints are that we need to capture (potentially a lot of) <code>STDOUT</code> and <code>STDERR</code>.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1490724954, "last_edit_date": 1490724954, "creation_date": 1490723670, "answer_id": 43076626, "question_id": 43076142, "link": "https://stackoverflow.com/questions/43076142/how-to-fallback-to-core-object-stringification/43076626#43076626", "title": "How to fallback to core object stringification?", "body": "<p><a href=\"http://search.cpan.org/perldoc?overload\" rel=\"noreferrer\">overload</a> provides</p>\n\n<pre><code>overload::StrVal($arg)\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 43076626, "answer_count": 1, "score": 8, "last_activity_date": 1490724954, "creation_date": 1490722224, "question_id": 43076142, "link": "https://stackoverflow.com/questions/43076142/how-to-fallback-to-core-object-stringification", "title": "How to fallback to core object stringification?", "body": "<p>A package overloads stringification operator:</p>\n\n<pre><code>use overload '\"\"' =&gt; sub { ... };\n</code></pre>\n\n<p>But in some places I want to fallback to default stringification behaviour.</p>\n\n<p>What should I do to such objects to get <code>Object=HASH(0x7693218)</code> string again?</p>\n\n<pre><code>print ${ \\$obj }; # Did not help\n</code></pre>\n"}, {"tags": ["perl", "file", "append", "add"], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1490800860, "post_id": 43077373, "comment_id": 73276736, "body": "thank you for your reply, but I got an syntax error:line 11, near &quot;open    &quot; Global symbol &quot;$outfile&quot; requires explicit package name at ./sparc_extract.pl line 11. Execution of ./sparc_extract.pl aborted due to compilation errors."}, {"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1490801228, "post_id": 43077373, "comment_id": 73277040, "body": "I fixed the error by adding &quot;;&quot; after &#39;sparc_export.test.out&#39;."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1490813558, "post_id": 43077373, "comment_id": 73285269, "body": "@JaeyoungPark Sorry for the typo and thank you for catching it and letting me know :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1490809950, "last_edit_date": 1490809950, "creation_date": 1490726164, "answer_id": 43077373, "question_id": 43076022, "link": "https://stackoverflow.com/questions/43076022/update-a-value-of-the-first-column-of-a-file-and-keep-appending-n-times/43077373#43077373", "title": "Update a value of the first column of a file and keep appending n times", "body": "<p>The only missing piece is that you don't copy the input file first. (Well, and why C-style for loop?)</p>\n\n<p>You can also avoid extra file operations, though -- read into an array and work with that.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $infile = 'sparc_export.test';\nopen my $fh, '&lt;', $infile or die \"Can't open $infile: $!\";\nmy @lines = &lt;$fh&gt;;\n\nmy $outfile = 'sparc_export.test.out';\nopen    $fh, '&gt;&gt;', $outfile or die \"Can't open for append $outfile: $!\";\n\nprint $fh $_ for @lines;  # copy the original first\n\nfor my $i (1..3) \n{\n    s/^\\s*(\\d+)/$1+2/e for @lines;  # changes @lines in place  \n\n    print $fh $_ for @lines;\n}\nclose $fh;\n# now overwrite source\n</code></pre>\n\n<p>Or do it all in memory and update the original once, since the file is so small. Uses <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse Path::Tiny;\n\nmy @lines = path('sparc_export.test')-&gt;lines;\n\nmy @all_lines = @lines;   \n\npush @all_lines, map { s/(\\d+)/$1+100/e; $_ } @lines  for 1..3;\n\npath('sparc_export.test')-&gt;append( {truncate =&gt; 1}, @all_lines );\n</code></pre>\n\n<p>The <code>append</code> with <code>truncate</code> option appends replacing the contents in place. </p>\n\n<p>Or</p>\n\n<pre><code>my @lines = path('sparc_export.test')-&gt;lines;\n\nmy @new_lines = map { \n    map { s/(\\d+)/$1+100/e; $_ } @lines \n} 1..3;\n\npath('sparc_export.test')-&gt;append( @new_lines );\n</code></pre>\n\n<p>I don't see anything better about having a one-liner, unless it is a specific requirement.</p>\n"}], "owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 43077373, "answer_count": 1, "score": 1, "last_activity_date": 1490809950, "creation_date": 1490721883, "question_id": 43076022, "link": "https://stackoverflow.com/questions/43076022/update-a-value-of-the-first-column-of-a-file-and-keep-appending-n-times", "title": "Update a value of the first column of a file and keep appending n times", "body": "<p>I am looking for a better way to add 2 on contents on the first column in a file, and keep appending n times. This can be an one-liner program. </p>\n\n<p>Input file (sparc_test.export, it is more than 3000 lines in an actual file):</p>\n\n<pre><code>20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rcc_data_e[6]\n20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rs3_data_e[51]\n20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rs1_data_e[3]\n20000 cmp_top.iop.sparc0.exu.alu.shft_alu_shift_out_e[18]\n20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rs3_data_e[17]\n20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rs1_data_e[43]\n</code></pre>\n\n<p>The expected output file (let's say it runs 3 times):</p>\n\n<pre><code>20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rcc_data_e[6]\n20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rs3_data_e[51]\n20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rs1_data_e[3]\n20000 cmp_top.iop.sparc0.exu.alu.shft_alu_shift_out_e[18]\n20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rs3_data_e[17]\n20000 cmp_top.iop.sparc0.exu.alu.byp_alu_rs1_data_e[43]\n20002 cmp_top.iop.sparc0.exu.alu.byp_alu_rcc_data_e[6]\n20002 cmp_top.iop.sparc0.exu.alu.byp_alu_rs3_data_e[51]\n20002 cmp_top.iop.sparc0.exu.alu.byp_alu_rs1_data_e[3]\n20002 cmp_top.iop.sparc0.exu.alu.shft_alu_shift_out_e[18]\n20002 cmp_top.iop.sparc0.exu.alu.byp_alu_rs3_data_e[17]\n20002 cmp_top.iop.sparc0.exu.alu.byp_alu_rs1_data_e[43]\n20004 cmp_top.iop.sparc0.exu.alu.byp_alu_rcc_data_e[6]\n20004 cmp_top.iop.sparc0.exu.alu.byp_alu_rs3_data_e[51]\n20004 cmp_top.iop.sparc0.exu.alu.byp_alu_rs1_data_e[3]\n20004 cmp_top.iop.sparc0.exu.alu.shft_alu_shift_out_e[18]\n20004 cmp_top.iop.sparc0.exu.alu.byp_alu_rs3_data_e[17]\n20004 cmp_top.iop.sparc0.exu.alu.byp_alu_rs1_data_e[43]\n</code></pre>\n\n<p>An one-liner perl code for adding 2 in the first column is:</p>\n\n<pre><code>perl -pe 's/(\\d+)/$1 + 2/e' sparc_export.test\n</code></pre>\n\n<p>So, I used this code and append (&lt;&lt;) 3 time, but it seems it is not okay, and I think there is a better way with one-liner. Any help is appreciated.  </p>\n\n<p>my perl code (test.pl)</p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\nmy $fin;\nmy $foutput;\n\nfor (my $i=0; $i &lt; 3; $i++) {\n            open $fin, '&lt;', 'sparc_export.test' or die \"Can't open file: $!\";\n            open $fout, '&gt;&gt;', 'sparc_export.test.out' or die \"Can't open file: $!\";\n            while (&lt;$fin&gt;) {\n                s/(\\d+)/$1 + 2/e;\n                print $fout $_;\n            }\n            close $fout;\n            close $fin;\n            rename 'sparc_export.test.out', 'sparc_export.test' or die \"Failed to rename: $!\";\n            system $bin, @args;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1490718060, "post_id": 43074681, "comment_id": 73233198, "body": "Can you clarify what you don&#39;t understand? Are you looking for internals of Perl and how it implements hashes?"}, {"owner": {"reputation": 595, "user_id": 6026863, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10156680734670515/picture?type=large", "display_name": "Harvey Lin", "link": "https://stackoverflow.com/users/6026863/harvey-lin"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1490718111, "post_id": 43074681, "comment_id": 73233241, "body": "No, just what does the code means, and what&#39;s the equivalent in languages such as java or c#"}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1490719056, "post_id": 43074681, "comment_id": 73233849, "body": "related: <a href=\"http://stackoverflow.com/q/81346/734304\">stackoverflow.com/q/81346/734304</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1490720128, "post_id": 43075011, "comment_id": 73234495, "body": "<code>$art_entities</code> is a hash reference. It <i>could</i> be an object, but there&#39;s nothing in the OP&#39;s code to suggest that. I imagine the closest equivalent in Java would be fetching a value from a hashmap or the equivalent data structure, incrementing it, and storing the result."}, {"owner": {"reputation": 595, "user_id": 6026863, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10156680734670515/picture?type=large", "display_name": "Harvey Lin", "link": "https://stackoverflow.com/users/6026863/harvey-lin"}, "edited": false, "score": 0, "creation_date": 1490722354, "post_id": 43075011, "comment_id": 73235764, "body": "$art_entities is a result from     $self-&gt;{_art_entities}, does that clarify things?"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 595, "user_id": 6026863, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10156680734670515/picture?type=large", "display_name": "Harvey Lin", "link": "https://stackoverflow.com/users/6026863/harvey-lin"}, "edited": false, "score": 0, "creation_date": 1490723346, "post_id": 43075011, "comment_id": 73236314, "body": "@HarveyLin There you have the same thing: <code>$self</code> is what Perl programmers often use for <code>this</code> in Java, even though it&#39;s not a keyword in Perl. <code>$self-&gt;{_art_entities}</code> refers to the member variable <code>_art_entities</code> of whatever object <code>$self</code> is. <code>_art_entities</code> does not start with a <code>$</code>, so there is no indirection, and you&#39;d have this as normal member access in Java (e.g., &quot;soc.someValue&quot; in my example code), without need for reflection."}, {"owner": {"reputation": 595, "user_id": 6026863, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10156680734670515/picture?type=large", "display_name": "Harvey Lin", "link": "https://stackoverflow.com/users/6026863/harvey-lin"}, "edited": false, "score": 0, "creation_date": 1490723581, "post_id": 43075011, "comment_id": 73236448, "body": "And this is how art_entities gets passed to $self: my %art_entities;    $self-&gt;{_art_entities} = \\%art_entities;"}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": false, "score": -1, "last_activity_date": 1490719732, "last_edit_date": 1490719732, "creation_date": 1490718591, "answer_id": 43075011, "question_id": 43074681, "link": "https://stackoverflow.com/questions/43074681/perl-hash-increment-how-does-this-work/43075011#43075011", "title": "Perl hash increment how does this work?", "body": "<pre><code>$art_entities-&gt;{$rel_art_path}++;\n</code></pre>\n\n<p><code>$art_entities</code> is a variable (a scalar, see the leading <code>$</code> sign). With the arrow syntax, it looks like it is an object.</p>\n\n<p><code>$rel_art_path</code> is another scalar variable.</p>\n\n<p><code>-&gt;{...}</code> accesses a field (right side of the arrow, in {curly braces}) from the object on the left side of the arrow.  Perl does not do much in terms of access limitations, i.e., there is no <code>public</code>, <code>private</code>, or <code>protected</code>. You could add your own code to enforce <code>private</code> access (see Perl Best Practices) or use a class framework like <a href=\"http://search.cpan.org/perldoc/Moose\" rel=\"nofollow noreferrer\">Moose</a>.</p>\n\n<p>The code uses the value of <code>$rel_art_path</code> as a field name in the <code>$art_entities</code> object.</p>\n\n<p>In Java, this would be done with reflection:</p>\n\n<pre><code>import java.lang.reflect.Field;\n\npublic class SomeClass {\n    public static void main(String[] args) throws Exception {\n        SomeOtherClass soc = new SomeOtherClass();\n        doSomething(soc, \"someValue\");\n        soc.print();\n    }\n\n    public static void doSomething(Object art_entities, String rel_art_path)\n    throws Exception {\n        Class&lt;?&gt; c = art_entities.getClass();\n        Field field = c.getDeclaredField(rel_art_path);\n        field.setInt(art_entities, field.getInt(art_entities) + 1);\n    }\n}\n\nclass SomeOtherClass {\n    public int someValue = 0;\n\n    public void print() {\n        System.out.println(\"my value is \" + someValue);\n    }\n}\n</code></pre>\n\n<p>(I've used your variable names in the Java code to make it clearer which corresponds to which. Obviously they are Perl style (using underscores), not Java (camel case).)</p>\n\n<p>In Java, this is hackish and quite a lot to write, in Perl it's short and normal.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490726552, "post_id": 43075378, "comment_id": 73238220, "body": "According to the docs, both <code>map.get(key) + 1</code> and <code>dict[&quot;foo&quot;]</code> will fail if the element doesn&#39;t already exists, which is almost always the case when <code>++</code> is used."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1490721898, "last_edit_date": 1490721898, "creation_date": 1490719704, "answer_id": 43075378, "question_id": 43074681, "link": "https://stackoverflow.com/questions/43074681/perl-hash-increment-how-does-this-work/43075378#43075378", "title": "Perl hash increment how does this work?", "body": "<p>The <code>++</code> operator returns the value and then increments the variable by one. Hashes are just unordered collections of scalar values indexed by their associated string key; incrementing a scalar in a hash is no different from incrementing a scalar outside of a hash.</p>\n\n<p>The following are functionally equivalent:</p>\n\n<pre><code>$hash{foo}++;\n$hash_ref-&gt;{foo}++;\n$foo++;\n</code></pre>\n\n<p>There's a little extra magic built in to <a href=\"http://perldoc.perl.org/perlop.html#Auto-increment-and-Auto-decrement\" rel=\"nofollow noreferrer\">Perl's auto-increment operator</a>, though:</p>\n\n<blockquote>\n  <p>If you increment a variable that is numeric, or that has ever been\n  used in a numeric context, you get a normal increment. If, however,\n  the variable has been used in only string contexts since it was set,\n  and has a value that is not the empty string and matches the pattern\n  <code>/^[a-zA-Z]*[0-9]*\\z/</code>, the increment is done as a string, preserving\n  each character within its range, with carry:</p>\n\n<pre><code>print ++($foo = \"99\");    # prints \"100\"\nprint ++($foo = \"a0\");    # prints \"a1\"\nprint ++($foo = \"Az\");    # prints \"Ba\"\nprint ++($foo = \"zz\");    # prints \"aaa\" \n</code></pre>\n  \n  <p><code>undef</code> is always treated as numeric, and in particular is changed to <code>0</code> before incrementing (so\n  that a post-increment of an undef value will return <code>0</code> rather than\n  <code>undef</code>).</p>\n</blockquote>\n\n<p>Java and C# both have increment operators, but as far as I know, they're not nearly as magical as Perl's. Java's <code>HashMap</code> provides <code>get()</code> and <code>put()</code> methods, so you don't get direct access to the underlying data:</p>\n\n<pre><code>map.put(key, map.get(key) + 1);\n</code></pre>\n\n<p>C# collections use square brackets, so if you had a <code>Dictionary</code>, for example:</p>\n\n<pre><code>dict[\"foo\"]++;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1490761659, "last_edit_date": 1490761659, "creation_date": 1490725979, "answer_id": 43077323, "question_id": 43074681, "link": "https://stackoverflow.com/questions/43074681/perl-hash-increment-how-does-this-work/43077323#43077323", "title": "Perl hash increment how does this work?", "body": "<p>It creates an element in the hash if it doesn't exist, then increments its value by one<sup>[1]</sup>.</p>\n\n<p>For example,</p>\n\n<pre><code>my %counts;\n++$counts{$_} for split(//, 'abracadabra');\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>my %counts = (\n   a =&gt; 5,\n   b =&gt; 2,\n   c =&gt; 1,\n   d =&gt; 1,\n   r =&gt; 2,\n);\n</code></pre>\n\n<p>It's also useful for filtering out duplicates. For example,</p>\n\n<pre><code>my %seen;\nmy @uniq = grep !$seen{$_}++, split(//, 'abracadabra');\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>my @uniq = qw( a b r c d );\n</code></pre>\n\n<hr>\n\n<p>Perl:</p>\n\n<pre><code>my %dict;\n\n++$dict{$key};   # $dict{$key}++ in scalar context gets optimized into ++$dict{$key}.\n</code></pre>\n\n<p>C#:</p>\n\n<pre><code>Dictionary&lt;string, int&gt; dict = new Dictionary&lt;string, int&gt;();\n\nint i;\ndict.TryGetValue(key, out i);\ndict[key] = i+1;\n</code></pre>\n\n<p>C#:</p>\n\n<pre><code>Dictionary&lt;string, int&gt; dict = new Dictionary&lt;string, int&gt;();\n\nif (dict.ContainsKey(key))\n   ++dict[key];\nelse\n   dict[key] = 1;\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>Map&lt;String, Integer&gt; dict = new HashMap&lt;String, Integer&gt;();\n\nInteger i = dict.get(key);\nif (i == null) {\n   map.put(key, 1);\n} else {\n   map.put(key, i+1);\n}\n</code></pre>\n\n<hr>\n\n<ol>\n<li><code>++</code> has some \"magical\" behaviour if the variable being incremented contains a string (incrementing <code>a</code> into <code>b</code>, for example), but I don't think that's relevant here.</li>\n</ol>\n"}], "owner": {"reputation": 595, "user_id": 6026863, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10156680734670515/picture?type=large", "display_name": "Harvey Lin", "link": "https://stackoverflow.com/users/6026863/harvey-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1231, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1490761659, "creation_date": 1490717554, "last_edit_date": 1490725408, "question_id": 43074681, "link": "https://stackoverflow.com/questions/43074681/perl-hash-increment-how-does-this-work", "title": "Perl hash increment how does this work?", "body": "<p>I have the following in the perl code:</p>\n\n<pre><code>$art_entities-&gt;{$rel_art_path}++;\n</code></pre>\n\n<p>I see that it is a post increment on a hash, how does it work? What would be something similar in Java or C#?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1490714922, "post_id": 43073611, "comment_id": 73230934, "body": "Syntax error: <code>$arr{&quot;y_1&quot;} = &quot;x_1&quot;;</code>. Arrays use <code>[]</code>. Hashes use <code>{}</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1490714926, "post_id": 43073611, "comment_id": 73230935, "body": "The code doesn&#39;t even compile, so I&#39;m perplexed at that. Of course, declaring <code>@arr</code> and then using <code>%arr</code> implies a fundamental misunderstanding, which I think means mucking around with constants is a road to error anyway."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1490715013, "post_id": 43073611, "comment_id": 73231005, "body": "Also, constants don&#39;t interpolate in strings. See <a href=\"http://perldoc.perl.org/constant.html\" rel=\"nofollow noreferrer\">constant</a>"}, {"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1490715095, "post_id": 43073611, "comment_id": 73231065, "body": "Edited again to use array properly"}, {"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1490715314, "post_id": 43073611, "comment_id": 73231224, "body": "In the marked duplicate answer, they have used a constant as a hash key, which is fine. I had a different question, when that constant&#39;s value is used as a key itself. Is that not different from the marked duplicate question?"}, {"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1490716413, "post_id": 43073611, "comment_id": 73232065, "body": "So it is not possible to use a constant&#39;s value as a key for a hash. Is this the answer to the question?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490724872, "post_id": 43073611, "comment_id": 73237198, "body": "Re &quot;<i>So it is not possible to use a constant&#39;s value as a key for a hash</i>&quot;, It is possible, as shown in the Answer I already posted."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490724491, "post_id": 43075604, "comment_id": 73236957, "body": "Added answer to second question in Question."}, {"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1490765629, "post_id": 43075604, "comment_id": 73252535, "body": "Thanks. I tried Solution1 and it worked. If I do require the key to be a hexadecimal value, like oct(&quot;0x0&quot;), oct(&quot;0xff&quot;), then this solution is not working as perl changes the key to decimal values and then it doesn&#39;t match the key in hash.And the constant also points to a hex value. Is there is workaround for this?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1490765733, "post_id": 43075604, "comment_id": 73252574, "body": "Are you asking how to convert a number to hex? <code>sprintf &quot;%X&quot;</code>"}, {"owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1490771632, "post_id": 43075604, "comment_id": 73255484, "body": "Nope. I want it like:: use constant x_1 =&gt; oct(&quot;0x11&quot;);use constant x_2 =&gt; oct(&quot;0x22&quot;); and then the hash as :: my %hash = (oct(&quot;0x11&quot;) =&gt; &quot;a&quot;, oct(&quot;0x22&quot;) =&gt; &quot;b&quot;, );. This is not working with solution 1."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "edited": false, "score": 0, "creation_date": 1490793440, "post_id": 43075604, "comment_id": 73270386, "body": "Sure it works. There&#39;s no difference between <code>oct(&quot;0x11&quot;)</code>, <code>0x11</code> and <code>17</code>, and you already said it works for <code>17</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1490724841, "last_edit_date": 1490724841, "creation_date": 1490720374, "answer_id": 43075604, "question_id": 43073611, "link": "https://stackoverflow.com/questions/43073611/use-a-key-which-is-the-value-of-a-constant-in-a-hash-in-perl/43075604#43075604", "title": "Use a key which is the value of a constant in a hash in perl", "body": "<blockquote>\n  <p><em>I want to use something like $hash{x_1} to get \"a\"</em></p>\n</blockquote>\n\n<p>By using anything but just an identifier, the expression won't be autoquoted. For example, you could use any of the following:</p>\n\n<ul>\n<li><code>$hash{+CONSTANT}</code></li>\n<li><code>$hash{(CONSTANT)}</code></li>\n</ul>\n\n<p>So you could use <code>$hash{+x_1}</code> instead of <code>$hash{x_1}</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>How could I use the variable not as a string but as a constant here?</em></p>\n</blockquote>\n\n<p>You rightfully ask to be prevented from doing this by adding <code>use strict;</code> because it's <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">dangerous</a> (meaning hard to read, hard to debug, hard to maintain, etc, etc, etc).</p>\n\n<p>Solution 1: Use a lookup table.</p>\n\n<pre><code>my %lookup = (\n   x_1 =&gt; x_1,\n   x_2 =&gt; x_2,\n);\n\nmy @arr;\n$arr[0]{\"y_1\"} = \"x_1\";\n$arr[0]{\"z_1\"} = \"x_2\";\n\nmy $newVar = $arr[0]{\"y_1\"};\ndefined( my $key = $lookup{$newVar} )\n   or die(\"Invalid key\");\n\nprint $hash{$key};\n</code></pre>\n\n<p>Solution 2: Use the constant's value instead of its name.</p>\n\n<pre><code>my @arr;\n$arr[0]{\"y_1\"} = x_1;\n$arr[0]{\"z_1\"} = x_2;\n\nmy $newVar = $arr[0]{\"y_1\"};\nprint $hash{$newVar};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490724638, "post_id": 43075716, "comment_id": 73237055, "body": "Re &quot;<i>These constructions are frowned upon under <code>use strict</code></i>&quot;,  Suggested rephrasing: <i>You rightfully ask to be prevented from doing this by adding <code>use strict;</code> because it is <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">dangerous</a>.</i>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1490720766, "creation_date": 1490720766, "answer_id": 43075716, "question_id": 43073611, "link": "https://stackoverflow.com/questions/43073611/use-a-key-which-is-the-value-of-a-constant-in-a-hash-in-perl/43075716#43075716", "title": "Use a key which is the value of a constant in a hash in perl", "body": "<p>A constant is just a Perl subroutine, and a variable that holds the name of a subroutine or a reference to a subroutine can be dereferenced to invoke the subroutine.</p>\n\n<pre><code>use constant x_1 =&gt; 123;\nmy %hash = (123 =&gt; 'a', 456 =&gt; 'b');\nmy @arr = ( { y_1 =&gt; 'x_1', z_1 =&gt; 'x_2' } );\n\n#   $arr[0]{y_1}  holds 'x_1'\n#   $arr[0]{y_1}-&gt;()   calls  'x_1'-&gt;(),  or  &amp;x_1()\n#   can also say  &amp;{$arr[0]{y_1}}\nmy $key = $arr[0]{y_1}-&gt;();\nprint $hash{$key};            # 'a'\n</code></pre>\n\n<p>These constructions are frowned upon under <code>use strict</code> (you do <code>use strict</code>, don't you?), which means you may want to reconsider your design.</p>\n"}], "owner": {"reputation": 205, "user_id": 4770887, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-T3zRs7dM69A/AAAAAAAAAAI/AAAAAAAAABA/8b0xU0_DWdM/photo.jpg?sz=128", "display_name": "aayu5h", "link": "https://stackoverflow.com/users/4770887/aayu5h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 43075604, "answer_count": 2, "score": 0, "last_activity_date": 1490724841, "creation_date": 1490714639, "last_edit_date": 1490715008, "question_id": 43073611, "link": "https://stackoverflow.com/questions/43073611/use-a-key-which-is-the-value-of-a-constant-in-a-hash-in-perl", "title": "Use a key which is the value of a constant in a hash in perl", "body": "<p>Please check the code below:</p>\n\n<pre><code>my %hash = (\n123 =&gt; \"a\",\n456 =&gt; \"b\",\n); \nuse constant x_1 =&gt; 123;\nuse constant x_2 =&gt; 456;\n</code></pre>\n\n<p>I want to use something like $hash{x_1}\nto get \"a\". I tried to store x_1 into a variable and then use it as the key, it worked.\nLike    </p>\n\n<pre><code>my $var = \"x_1\"; # or my $var = x_1\n</code></pre>\n\n<p>But when I get the variable x_1 from an array which I store into a variable, and then try to access the hash from this variable, it shows an error.\nLike </p>\n\n<pre><code>my @arr;\n$arr[0]{\"y_1\"} = \"x_1\";\n$arr[0]{\"z_1\"} = \"x_2\";\nmy $newVar = $arr[0]{\"y_1\"};#$newVar = x_1\nprint $hash{$newVar}; #this shows error.\n</code></pre>\n\n<p>How could I use the variable not as a string but as a constant here?</p>\n"}, {"tags": ["python", "perl", "pcre"], "comments": [{"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 0, "creation_date": 1490712912, "post_id": 43072899, "comment_id": 73229348, "body": "In what language are you writing your PCRE expression?"}], "answers": [{"tags": [], "owner": {"reputation": 180843, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1490770352, "creation_date": 1490770352, "answer_id": 43086350, "question_id": 43072899, "link": "https://stackoverflow.com/questions/43072899/need-pcre-for-pattern-like-xxyy-zz/43086350#43086350", "title": "Need pcre for pattern like &quot;xxyy.zz&quot;", "body": "<p>Each alpha group needs to be in parens and followed by a <code>\\1</code> style group reference.  I don't think you can use a <code>{2}</code> quantifier here, so the pairs needs need to be written serially:</p>\n\n<pre><code>&gt;&gt;&gt; re.search(r'([a-z])\\1([a-z])\\2\\.([a-z])\\3', 'abccdd.eef').group(0)\n'ccdd.ee'\n</code></pre>\n"}], "owner": {"reputation": 2389, "user_id": 1204089, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3551fcc25933cc9cd54c8f336774ee7?s=128&d=identicon&r=PG", "display_name": "blackfyre", "link": "https://stackoverflow.com/users/1204089/blackfyre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43086350, "answer_count": 1, "score": 0, "last_activity_date": 1490771780, "creation_date": 1490712799, "last_edit_date": 1490771780, "question_id": 43072899, "link": "https://stackoverflow.com/questions/43072899/need-pcre-for-pattern-like-xxyy-zz", "title": "Need pcre for pattern like &quot;xxyy.zz&quot;", "body": "<p>I need pcre for pattern like \"xxyy.zz\", where x,y and z can be any alphabet.</p>\n\n<p>Language: Python</p>\n\n<p>What I have tried:<br/>\nFor 's = \"xx\"', 're.match(r\"([a-z])\\1{1}\",s)' works but for my full string it does not work. For example for 's = \"xxyy\"', 're.match(r\"([a-z])\\1{1}([a-z])\\1{1}\",s)' does not work...</p>\n\n<p>Please guide me how to fix this pcre.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1490711919, "post_id": 43072435, "comment_id": 73228510, "body": "What&#39;s the relationship between <code>103305</code> and <code>11 10 08</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1490711922, "post_id": 43072435, "comment_id": 73228513, "body": "What have you tried? What problems are you having?"}, {"owner": {"reputation": 1, "user_id": 3497697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327f64a1730c70e95bc8ba0592838dcf?s=128&d=identicon&r=PG&f=1", "display_name": "user3497697", "link": "https://stackoverflow.com/users/3497697/user3497697"}, "edited": false, "score": 0, "creation_date": 1490712047, "post_id": 43072435, "comment_id": 73228610, "body": "my bad !!! key board issue."}, {"owner": {"reputation": 1, "user_id": 3497697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327f64a1730c70e95bc8ba0592838dcf?s=128&d=identicon&r=PG&f=1", "display_name": "user3497697", "link": "https://stackoverflow.com/users/3497697/user3497697"}, "edited": false, "score": 0, "creation_date": 1490712148, "post_id": 43072435, "comment_id": 73228697, "body": "i am basically getting a number e.g. 032817103305  and i would like to convert this number into the format 03/28/17 10 33 05 . this is basically means current date and followed by hh mm ss"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1490712681, "last_edit_date": 1490712681, "creation_date": 1490711982, "answer_id": 43072554, "question_id": 43072435, "link": "https://stackoverflow.com/questions/43072435/how-can-i-convert-an-input-number-say-032817103305-into-a-format-03-28-17-10-33/43072554#43072554", "title": "How can i convert an input number say 032817103305 into a format 03/28/17 10 33 05 using perl?", "body": "<pre><code>$str =~ s{^(..)(..)(..)(..)(..)(..)}{$1/$2/$3 $4 $5 $6};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1490793417, "creation_date": 1490793417, "answer_id": 43094654, "question_id": 43072435, "link": "https://stackoverflow.com/questions/43072435/how-can-i-convert-an-input-number-say-032817103305-into-a-format-03-28-17-10-33/43094654#43094654", "title": "How can i convert an input number say 032817103305 into a format 03/28/17 10 33 05 using perl?", "body": "<p>A regex substitution is better for just reformatting the numbers, but <a href=\"http://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\">unpack</a> can also come in handy if you want to other things with the individual fields (eg, insert into a database etc):</p>\n\n<pre><code>my $record = '032817103305';\nmy ($month, $day, $year, $hr, $min, $sec) = unpack 'A2' x 6, $record;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3497697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327f64a1730c70e95bc8ba0592838dcf?s=128&d=identicon&r=PG&f=1", "display_name": "user3497697", "link": "https://stackoverflow.com/users/3497697/user3497697"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1490793417, "creation_date": 1490711710, "last_edit_date": 1490712674, "question_id": 43072435, "link": "https://stackoverflow.com/questions/43072435/how-can-i-convert-an-input-number-say-032817103305-into-a-format-03-28-17-10-33", "title": "How can i convert an input number say 032817103305 into a format 03/28/17 10 33 05 using perl?", "body": "<p>I am trying to convert a 12 digit number e.g. 032817103305 into a format 03/28/17 10 33 05 using Perl?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490710475, "post_id": 43071873, "comment_id": 73227410, "body": "Thanks @Jens for your help. This works for my replacement scenario. Any idea about my second query: Can I update my command in way so that it can search for string &quot;bb&quot; and only matching lines will remove the string &quot;value = xxx&quot;  from this matching line. where xxx is integer with any number of digit. Thanks in advance"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490710601, "post_id": 43071873, "comment_id": 73227506, "body": "@SatishKale can you give me some example?"}, {"owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490710956, "post_id": 43071873, "comment_id": 73227806, "body": "lets say in above file a.txt, i have to find lines with &quot;bb&quot; string... so i will get line &quot;b bb value = 11 xyz &quot;` and in this line i have to delete string &quot;value = 11&quot; so that finally line will be &quot; b bb xyz &quot;"}, {"owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490712103, "post_id": 43071873, "comment_id": 73228661, "body": "below command works for me for second query: perl -pe&#39;s/value = \\d+// if /\\bbb\\b/&#39; a.txt"}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1490710196, "creation_date": 1490710196, "answer_id": 43071873, "question_id": 43071790, "link": "https://stackoverflow.com/questions/43071790/perl-find-line-with-matching-stringstr1-and-only-in-those-matched-lines-repl/43071873#43071873", "title": "Perl: Find line with matching string(str1) and only in those matched lines, replace one string(str2) with specific string(str3)", "body": "<p>This works:</p>\n\n<pre><code>perl -n -e 'if (m/\\bbb\\b/) { s/value = (\\d+)/value = 77/g; print; } else {print}' &lt; a.txt\n</code></pre>\n\n<p>put one print in <code>if</code> and one in <code>else</code></p>\n\n<p>Output:</p>\n\n<pre><code>$ perl -n -e 'if (m/\\bbb\\b/) { s/value = (\\d+)/value = 77/g; print; } else {print}' &lt; a.txt\na aa aaa\nb bb value = 77 xyz\nc cc ccc\nb bb value = 77 abc\nd dd ddd\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490711335, "post_id": 43072095, "comment_id": 73228102, "body": "This looks simple. Any idea about my second query, mentioned at the end of question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490711448, "post_id": 43072095, "comment_id": 73228183, "body": "<code>s&#47;value = \\d+&#47;&#47;</code>"}, {"owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490711996, "post_id": 43072095, "comment_id": 73228574, "body": "Thanks @ikegami, below command works for me: perl -pe&#39;s/value = \\d+// if /\\bbb\\b/&#39; a.txt"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1490710761, "creation_date": 1490710761, "answer_id": 43072095, "question_id": 43071790, "link": "https://stackoverflow.com/questions/43071790/perl-find-line-with-matching-stringstr1-and-only-in-those-matched-lines-repl/43072095#43072095", "title": "Perl: Find line with matching string(str1) and only in those matched lines, replace one string(str2) with specific string(str3)", "body": "<p>You print twice when you have a match. If you don't want to do that, don't do that :)</p>\n\n<pre><code>perl -n -e 'if (m/\\bbb\\b/) { s/value = (\\d+)/value = 77/g; } print' &lt; a.txt\n</code></pre>\n\n<p>Cleaned up:</p>\n\n<pre><code>perl -pe's/value = \\K\\d+/77/g if /\\bbb\\b/' a.txt\n</code></pre>\n\n<p>Based on the sample data, you might even be able to use</p>\n\n<pre><code>perl -pe's/\\bbb\\b.*value = \\K\\d+/77/' a.txt\n</code></pre>\n"}], "owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 43072095, "answer_count": 2, "score": 1, "last_activity_date": 1490710761, "creation_date": 1490709970, "question_id": 43071790, "link": "https://stackoverflow.com/questions/43071790/perl-find-line-with-matching-stringstr1-and-only-in-those-matched-lines-repl", "title": "Perl: Find line with matching string(str1) and only in those matched lines, replace one string(str2) with specific string(str3)", "body": "<p>I have one file a.txt with contents as follow:</p>\n\n<pre><code>a aa aaa\nb bb value = 11 xyz\nc cc ccc\nb bb value = 222 abc\nd dd ddd\n</code></pre>\n\n<p>I have to find for string \"bb\". once matching line found i have to replace \"value = xxx\" with \"value = 77\"\nHere, xxx is integer with any number of digit(11,222 in above case).</p>\n\n<p>I have tried below perl command:</p>\n\n<pre><code>perl -n -e 'print; if (m/\\bbb\\b/) { s/value = (\\d+)/value = 77/g; print; }' &lt; a.txt\n</code></pre>\n\n<p>It gives me output as:</p>\n\n<pre><code>a aa aaa\nb bb value = 11 xyz\nb bb value = 77 xyz\nc cc ccc\nb bb value = 22 abc\nb bb value = 77 abc\nd dd ddd\n</code></pre>\n\n<p>Here i am looking for in-place replacement, instead of new line with required changes.\nBasically i am expecting output as follow:</p>\n\n<pre><code>a aa aaa\nb bb value = 77 xyz\nc cc ccc\nb bb value = 77 abc\nd dd ddd\n</code></pre>\n\n<p>Can anyone help me here in updating my command?</p>\n\n<p>Also one more quick question, can I update my above command in way so that it can search for string \"bb\" and only matching lines will remove the string \"value = xxx\" completely from this matching line.\nwhere xxx is integer with any number of digit.</p>\n"}, {"tags": ["c", "windows", "perl", "winapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1490705563, "post_id": 43069983, "comment_id": 73223471, "body": "you ignore attributes on group . you not check for <code>SE_GROUP_USE_FOR_DENY_ONLY</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1490705802, "post_id": 43069983, "comment_id": 73223643, "body": "print not only <i>Sid</i> but <i>Attributes</i> from <code>SID_AND_ATTRIBUTES</code> - may be you understand after this that user not have <i>S-1-5-32-544</i> really"}, {"owner": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1490705883, "post_id": 43069983, "comment_id": 73223712, "body": "ok I&#39;ll check in a minute"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1490705944, "post_id": 43069983, "comment_id": 73223762, "body": "and for what you call<code>DuplicateTokenEx</code> ?! query direct from original token"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "edited": false, "score": 0, "creation_date": 1490705629, "post_id": 43070051, "comment_id": 73223522, "body": "Yes but how can I prove that It really means that? Is there any answer besides testing it on every windows?"}, {"owner": {"reputation": 570609, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1490708027, "post_id": 43070051, "comment_id": 73225464, "body": "That is what it means."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1490705349, "creation_date": 1490705349, "answer_id": 43070051, "question_id": 43069983, "link": "https://stackoverflow.com/questions/43069983/isadminuser-returns-incorrect-value/43070051#43070051", "title": "IsAdminUser returns incorrect value", "body": "<p>As documented in <a href=\"http://p3rl.org/Win32#Win3236\" rel=\"nofollow noreferrer\">Win32</a>:</p>\n\n<blockquote>\n  <p>On Windows Vista it will only return non-zero if the process is actually running with elevated privileges.</p>\n</blockquote>\n\n<p>I'd understand \"Vista\" as \"Vista and newer\".</p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "edited": false, "score": 0, "creation_date": 1490707736, "post_id": 43070545, "comment_id": 73225213, "body": "You save me again :). I checked and attribute is <code>SE_GROUP_USE_FOR_DENY_ONLY</code>. thank you very much for this kind of explanation :)"}, {"owner": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "edited": false, "score": 0, "creation_date": 1490712050, "post_id": 43070545, "comment_id": 73228615, "body": "One more question please, if the user (which is running this code) is logged in as interactive he has value of 15(which is decimal representation) and when user is logged in as batch the following situation  that is in question. Is this because the user with interactive logon is member of INTERACTIVE group?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "edited": false, "score": 0, "creation_date": 1490712368, "post_id": 43070545, "comment_id": 73228865, "body": "@Rasty - if admin user log as batch he will be have <i>S-1-5-32-544</i> with <i>SE_GROUP_ENABLED</i> (+several attr) in contrast with interactive logon (will be <i>SE_GROUP_USE_FOR_DENY_ONLY</i>). this related to admins sid. <code>INTERACTIVE</code> and <code>BATCH</code> different groups"}, {"owner": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "edited": false, "score": 0, "creation_date": 1490712809, "post_id": 43070545, "comment_id": 73229262, "body": "sorry for misunderstanding but as I unerstand INTERACTIVE logon produces restricted token right?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "edited": false, "score": 0, "creation_date": 1490713114, "post_id": 43070545, "comment_id": 73229513, "body": "@Rasty - say different logon types can produce different token for same account. INTERACTIVE not always restrict. say not restrict built-in admin. not restrict if UAC is off"}, {"owner": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "edited": false, "score": 0, "creation_date": 1490713203, "post_id": 43070545, "comment_id": 73229585, "body": "and for any other situation it would be restricted? Is there any documentation that would verify that?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "edited": false, "score": 1, "creation_date": 1490713583, "post_id": 43070545, "comment_id": 73229884, "body": "@Rasty - don&#39;t know are / where this difference interactive vs batch documented (i know this by experience only), most general document <a href=\"https://msdn.microsoft.com/en-us/library/cc783557(v=ws.10).aspx\" rel=\"nofollow noreferrer\">How Access Tokens Work</a>"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 3, "last_activity_date": 1490706686, "creation_date": 1490706686, "answer_id": 43070545, "question_id": 43069983, "link": "https://stackoverflow.com/questions/43069983/isadminuser-returns-incorrect-value/43070545#43070545", "title": "IsAdminUser returns incorrect value", "body": "<blockquote>\n  <p>which is strange because <em>S-1-5-32-544</em> represent Administrators\n  group.</p>\n</blockquote>\n\n<p>really <code>Win32::IsAdminUser()</code> internally call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa376389(v=vs.85).aspx\" rel=\"nofollow noreferrer\">CheckTokenMembership</a> function with <em>SidToCheck</em> == <em>S-1-5-32-544</em> and return you <em>IsMember</em> as result. but</p>\n\n<blockquote>\n  <p>If the SID is present and has the <strong>SE_GROUP_ENABLED</strong> attribute,\n  IsMember returns TRUE; otherwise, it returns FALSE.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Even if a SID is present in the token, the system may not use the SID\n  in an access check. The SID may be disabled or have the\n  <strong>SE_GROUP_USE_FOR_DENY_ONLY</strong> attribute.</p>\n</blockquote>\n\n<p>really if you user is member of admin group (<em>S-1-5-32-544</em>) but run without elevation (under <em>UAC</em>) <em>S-1-5-32-544</em> is present in token but with <strong>SE_GROUP_USE_FOR_DENY_ONLY</strong> attribute only</p>\n\n<p>in contrast elevated admins have this <em>SID</em> with <strong>SE_GROUP_ENABLED</strong> attribute</p>\n\n<p>so i guess you run as not elevated admin. <code>Win32::IsAdminUser()</code> and must return false in this case</p>\n"}], "owner": {"reputation": 173, "user_id": 6573691, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/39e8b737cbc3b789746652e6fc9f3ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Rasty", "link": "https://stackoverflow.com/users/6573691/rasty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 43070545, "answer_count": 2, "score": 1, "last_activity_date": 1614679248, "creation_date": 1490705104, "last_edit_date": 1614679248, "question_id": 43069983, "link": "https://stackoverflow.com/questions/43069983/isadminuser-returns-incorrect-value", "title": "IsAdminUser returns incorrect value", "body": "<p>I'm using <code>Win32::IsAdminUser()</code> function  (Can't paste code because to make it runnable I would have to paste whole code). It returns 0, I was curious why because the user with which this is run is member of Administrators group, so I created a little test function (c++) and run it right before running <code>IsAdminUser</code> Here is the code:</p>\n<pre><code>int davai()\n{\nFILE * fp;\n\nfp = fopen (&quot;C:\\\\tmp\\\\davai.txt&quot;, &quot;a&quot;);\nfprintf(fp, &quot;shevedi davai&quot;);\nfflush(fp);\n\nHANDLE token = NULL;\nHANDLE dupToken = NULL;\n\nif(!OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY | TOKEN_DUPLICATE, &amp;token))\n{\n  fprintf(fp, &quot;davai: OpenProcessToken cheijva. %d\\n&quot;, (int)GetLastError());\n  fflush(fp);\n}\n\nif (DuplicateTokenEx(token, MAXIMUM_ALLOWED, NULL, SecurityDelegation,\n                          TokenPrimary, &amp;dupToken) == 0)\n{\n  fprintf(fp, &quot;davai: OpenProcessToken DuplicateTokenEx. %d\\n&quot;, (int)GetLastError());\n  fflush(fp);\n}\n\nPTOKEN_GROUPS pPrivilegesToken = NULL;\nDWORD cbSize = 0;\n\nGetTokenInformation(dupToken, TokenGroups, NULL, 0, &amp;cbSize);\n\npPrivilegesToken = (PTOKEN_GROUPS) LocalAlloc(LPTR, cbSize);\n\nif (GetTokenInformation(dupToken, TokenGroups, \n                             pPrivilegesToken, cbSize, &amp;cbSize) == FALSE)\n{\n  fprintf(fp, &quot;davai: GetTokenInformation cheijva. %d\\n&quot;, (int)GetLastError());\n  fflush(fp);\n}\n\nchar * gio;\n\nfor (ULONG i = 0; i &lt; pPrivilegesToken-&gt;GroupCount; i++)\n{\n  if (ConvertSidToStringSid(pPrivilegesToken-&gt;Groups[i].Sid, &amp;gio) == 0)\n  {\n    fprintf(fp, &quot;davai: ConvertSidToStringSid cheijva. %d\\n&quot;, (int)GetLastError());\n    fflush(fp);\n  }\n \n  fprintf(fp, &quot;Value: %s\\n&quot;,gio);\n  fflush(fp);\n}\n\nLocalFree (gio);\n\nreturn 1;\n}\n</code></pre>\n<p>which just opens current processes token, and lists all the groups that user is involved in. Here is the ouput I get:</p>\n<pre><code>shevedi davaiValue: S-1-5-21-1018819917-2920201817-244685803-513\nValue: S-1-1-0\nValue: S-1-5-21-1018819917-2920201817-244685803-1000\nValue: S-1-5-32-544\nValue: S-1-5-32-545\nValue: S-1-5-4\nValue: S-1-2-1\nValue: S-1-5-11\nValue: S-1-5-15\nValue: S-1-5-5-0-179095\nValue: S-1-2-0\nValue: S-1-5-64-10\nValue: S-1-16-12288\n</code></pre>\n<p>which is strange because <code>S-1-5-32-544</code> represent <code>Administrators</code> group. I searched to find if someones has similar problem, but could not find anything (I'm running windows 7). Maybe you can help me. Any help would be appreciated.</p>\n"}, {"tags": ["perl", "variables", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490699163, "post_id": 43067872, "comment_id": 73219052, "body": "You might try JSON instead, it is easy to parse into a hash"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 6, "creation_date": 1490699308, "post_id": 43067872, "comment_id": 73219130, "body": "I don&#39;t understand what you&#39;re trying to say."}, {"owner": {"reputation": 13, "user_id": 7779388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RG0sC7Xrqko/AAAAAAAAAAI/AAAAAAAAABA/o7IC52e5_1g/photo.jpg?sz=128", "display_name": "jordon vj", "link": "https://stackoverflow.com/users/7779388/jordon-vj"}, "edited": false, "score": 0, "creation_date": 1490699524, "post_id": 43067872, "comment_id": 73219262, "body": "I suppose JSON may help. Let me see. Thanks Hakon."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490700486, "post_id": 43067872, "comment_id": 73219923, "body": "See also <a href=\"http://stackoverflow.com/q/36033603/2173773\">Creating hash of hash dynamically in perl</a> and <a href=\"http://stackoverflow.com/q/24396250/2173773\">Read config hash-like data into perl hash</a>"}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1490700637, "post_id": 43067872, "comment_id": 73220035, "body": "I&#39;m afraid your question is clear as mud. What is the expected output?"}, {"owner": {"reputation": 13, "user_id": 7779388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RG0sC7Xrqko/AAAAAAAAAAI/AAAAAAAAABA/o7IC52e5_1g/photo.jpg?sz=128", "display_name": "jordon vj", "link": "https://stackoverflow.com/users/7779388/jordon-vj"}, "edited": false, "score": 0, "creation_date": 1490701006, "post_id": 43067872, "comment_id": 73220284, "body": "Jcaron I want to read a string which will have the format same as like what hash expects to have , for ex: &quot;{xyz}{mno}{abc}&quot; , but this strings are not know beforehand as they are some variable&#39;s output. I want to directly initialize a hash based in this string.like : $hash{xyz}{mno}{abc}=&quot;done&quot;;(constraint is to write as small code as possible)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490701017, "post_id": 43067872, "comment_id": 73220292, "body": "Where are these strings coming from?"}, {"owner": {"reputation": 13, "user_id": 7779388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RG0sC7Xrqko/AAAAAAAAAAI/AAAAAAAAABA/o7IC52e5_1g/photo.jpg?sz=128", "display_name": "jordon vj", "link": "https://stackoverflow.com/users/7779388/jordon-vj"}, "edited": false, "score": 0, "creation_date": 1490701056, "post_id": 43067872, "comment_id": 73220323, "body": "In JASON we can parse the string to DS. Its good enough."}, {"owner": {"reputation": 13, "user_id": 7779388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RG0sC7Xrqko/AAAAAAAAAAI/AAAAAAAAABA/o7IC52e5_1g/photo.jpg?sz=128", "display_name": "jordon vj", "link": "https://stackoverflow.com/users/7779388/jordon-vj"}, "edited": false, "score": 0, "creation_date": 1490701160, "post_id": 43067872, "comment_id": 73220380, "body": "This string are output of some function which append various encoded property of some structure under test into this string.  If this property is initialized in the hash or not i want to move ahead in the code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490701546, "post_id": 43067872, "comment_id": 73220642, "body": "Do you control that function?"}, {"owner": {"reputation": 13, "user_id": 7779388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RG0sC7Xrqko/AAAAAAAAAAI/AAAAAAAAABA/o7IC52e5_1g/photo.jpg?sz=128", "display_name": "jordon vj", "link": "https://stackoverflow.com/users/7779388/jordon-vj"}, "edited": false, "score": 0, "creation_date": 1490702179, "post_id": 43067872, "comment_id": 73221048, "body": "No.Its output are well structured ."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1490718954, "post_id": 43069969, "comment_id": 73233784, "body": "@reinierpost, It validates the input, parses the input, then sets the hash element. How is that not obvious?"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1490733404, "post_id": 43069969, "comment_id": 73242169, "body": "It is obvious that it tries to do something like that, but with the question not being stated clearly and your code being extremely terse without any comments, I have trouble understanding what is going on and above all why, and I&#39;m someone who has been working with Perl code for 20 years."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1490751666, "post_id": 43069969, "comment_id": 73248414, "body": "Which one is it? Is what it does obvious, or do you have a hard time understanding what it does?"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1490796804, "post_id": 43069969, "comment_id": 73273258, "body": "It isn&#39;t obvious what it does, and it isn&#39;t obvious that it is what jordan vj wants."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1490798989, "post_id": 43069969, "comment_id": 73275230, "body": "@reinierpost, You are gravely mistaken. It&#39;s very obvious that a check that results in <code>die(&quot;Unrecognized format&quot;)</code> checks if the input is in a recognized format. I can&#39;t believe I have to tell you that if you&#39;ve ever programmed before (in any language)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1490799585, "post_id": 43069969, "comment_id": 73275770, "body": "@reinierpost, You are gravely mistaken. The purpose of <code>my @a = $str =~ &#47;(...)&#47;g;</code> -- to extract text from a string -- is very obvious since it&#39;s a construct from Perl 101 used daily. I can&#39;t believe I have to tell you that if you&#39;ve ever used Perl. <a href=\"http://stackoverflow.com/a/5353007/589924\">You should know that!!!</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1490799589, "post_id": 43069969, "comment_id": 73275774, "body": "@reinierpost, You are gravely mistaken. Even though it&#39;s used as an lvalue, it&#39;s painfully obvious that <code>DiveVal(...)</code> is a subroutine call. Seriously, man? &quot;20 years of experience&quot;???"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1490799821, "post_id": 43069969, "comment_id": 73275955, "body": "You repeatedly brought into question the clarity of the OP&#39;s question, but the only thing that&#39;s unclear is the extent of what&#39;s they consider a valid input. To address that, my answer documents the inputs for which it is valid."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1490799699, "last_edit_date": 1490799699, "creation_date": 1490705038, "answer_id": 43069969, "question_id": 43067872, "link": "https://stackoverflow.com/questions/43067872/making-perls-specific-declarations-as-variable/43069969#43069969", "title": "Making Perl&#39;s &quot;specific declarations&quot; as variable", "body": "<p>Say you had the following input instead:</p>\n\n<pre><code>my @path = qw( cow black tasty_milk );\n</code></pre>\n\n<p>Then you can use the following:</p>\n\n<pre><code>use Data::Diver qw( DiveVal );\n\nDiveVal(\\%hash, map \\$_, @path) = 'value';\n</code></pre>\n\n<p>So, with <a href=\"http://search.cpan.org/perldoc?Data::Diver\" rel=\"nofollow noreferrer\">Data::Diver</a>, we get:</p>\n\n<pre><code>use Data::Diver qw( DiveVal );\n\n$str =~ /^(?:\\{\\w+\\})+\\z/\n   or die(\"Unrecognized format\");\n\nmy @path = $str =~ /(\\w+)/g;\nDiveVal(\\%hash, map \\$_, @path) = 'value';\n</code></pre>\n\n<p>Without a module:</p>\n\n<pre><code>sub dive_val :lvalue { my $p = \\shift;  $p = \\( $$p-&gt;{$_} ) for @_;  $$p }\n\n$str =~ /^(?:\\{\\w+\\})+\\z/\n   or die(\"Unrecognized format\");\n\nmy @path = $str =~ /(\\w+)/g;\ndive_val(\\%hash, @path) = 'value';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490719885, "post_id": 43074887, "comment_id": 73234350, "body": "By the way, <code>my $ref =\\%hash; my $val; my $lp = () = $str_2=~m&#47;\\}&#47;g; my $i = 1; while($str_2=~m&#47;\\{(\\w+)\\}&#47;g) {     $val = $1;      last if ($lp == $i);       $ref-&gt;{$val} = {};      $ref = $ref-&gt;{$val};      $i++;  } $ref-&gt;{$val} = &quot;value&quot;;</code> simplifies to <code>my $p = \\\\%hash;     $p = \\( $$p-&gt;{$1} ) while $str_2 =~ &#47;\\{(\\w+)\\}&#47;g;     $$p = &quot;value&quot;; </code>"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491298896, "post_id": 43074887, "comment_id": 73478853, "body": "@ikegami It is very amazing. I have tried to know your trick but I can&#39;t please shall you explain this.? :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491314311, "post_id": 43074887, "comment_id": 73490271, "body": "The trick is to add a layer of indirection. More about this <a href=\"http://stackoverflow.com/a/31554981/589924\">here</a> and <a href=\"http://stackoverflow.com/a/30766598/589924\">here</a>"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1490718173, "creation_date": 1490718173, "answer_id": 43074887, "question_id": 43067872, "link": "https://stackoverflow.com/questions/43067872/making-perls-specific-declarations-as-variable/43074887#43074887", "title": "Making Perl&#39;s &quot;specific declarations&quot; as variable", "body": "<p>Try the following with anonymous hash</p>\n\n<pre><code>use Data::Dumper;\nuse warnings; \nuse strict;\n\nmy $str_2 = \"{cow}{black}{tasty_milk}\";\nmy %hash;\nmy $ref =\\%hash;\nmy $val;\nmy $lp = () = $str_2=~m/\\}/g; #count the number of }\nmy $i = 1;\nwhile($str_2=~m/\\{(\\w+)\\}/g)\n{\n    $val = $1;\n\n    last if ($lp == $i); \n\n    $ref-&gt;{$val} = {}; #make the anonymous hash        \n\n    $ref = $ref-&gt;{$val};   #add the data into anonymous hash\n\n    $i++;\n\n}\n$ref-&gt;{$val} = \"value\"; #add the last value\n\nprint Dumper \\%hash;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7779388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RG0sC7Xrqko/AAAAAAAAAAI/AAAAAAAAABA/o7IC52e5_1g/photo.jpg?sz=128", "display_name": "jordon vj", "link": "https://stackoverflow.com/users/7779388/jordon-vj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 43069969, "answer_count": 2, "score": 1, "last_activity_date": 1490799699, "creation_date": 1490699070, "last_edit_date": 1490763267, "question_id": 43067872, "link": "https://stackoverflow.com/questions/43067872/making-perls-specific-declarations-as-variable", "title": "Making Perl&#39;s &quot;specific declarations&quot; as variable", "body": "<p>I was looking for some sort of solution if the following setup can be interpreted as formal declaration of the variables , if possible.\nWhat i have is :</p>\n\n<pre><code>my $str_1 = \"{cow}\" ;\n\nmy $str_2 = \"{cow}{black}{tasty_milk}\";\n</code></pre>\n\n<p>what i want is :</p>\n\n<p>(Based on above variable string is it possible to initialize a hash <strong>directly</strong>,\nsomething like :)</p>\n\n<pre><code>my %hash=();\n\n$hash.\"*some operator* on $str_i\"  = 'Initialized' ;\n</code></pre>\n\n<p>This \"some operator\" should make $hash to  recognize as hash as it was declared earlier. i.e Input specific hash initialization.</p>\n\n<p>PS: I don't want to write a function that will work on the string and  get all information to initialize the hash. </p>\n"}, {"tags": ["regex", "string", "perl", "split"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490694904, "post_id": 43066292, "comment_id": 73216192, "body": "Your regex is so greedy it takes the whole string as the delimiter and you end up with nothing. But I don&#39;t understand how the splitting should work. What happens to <code>foo</code>? And is the <code>` a </code>\\f`, or a literal backslash?"}, {"owner": {"reputation": 875, "user_id": 6918481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949bc6de647c79a6a432bc8ed1a51b5b?s=128&d=identicon&r=PG&f=1", "display_name": "Shiping", "link": "https://stackoverflow.com/users/6918481/shiping"}, "edited": false, "score": 1, "creation_date": 1490694985, "post_id": 43066292, "comment_id": 73216258, "body": "how about this? split(&#39;=[^&gt;]*&gt;&#39;, $str). the first and last in the result will be empty."}, {"owner": {"reputation": 21, "user_id": 7290025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59af70a7114e70e5fcd4f90489a20e95?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio Mazzurco", "link": "https://stackoverflow.com/users/7290025/fabio-mazzurco"}, "edited": false, "score": 0, "creation_date": 1490695223, "post_id": 43066292, "comment_id": 73216429, "body": "Eyyyyy, sweet. Thanks alot! Works wonders, I&#39;ll just get rid of the empty array entries and that should be fine :)"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1490705168, "post_id": 43066292, "comment_id": 73223203, "body": "<code>My regex is matching too much. How do I make it stop? 4 answers</code> This answer doesn&#39;t matched with the OP asked."}], "owner": {"reputation": 21, "user_id": 7290025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59af70a7114e70e5fcd4f90489a20e95?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio Mazzurco", "link": "https://stackoverflow.com/users/7290025/fabio-mazzurco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1490694967, "answer_count": 0, "score": 0, "last_activity_date": 1490694825, "creation_date": 1490694747, "last_edit_date": 1490694825, "question_id": 43066292, "link": "https://stackoverflow.com/questions/43066292/split-everything-between-two-characters-including-those-perl", "closed_reason": "Duplicate", "title": "Split everything between two characters, including those (perl)", "body": "<p>I would like to use Perl's <code>split</code> functionality to do the following:</p>\n\n<p>example string: </p>\n\n<pre><code>=foo&gt;bar=\\foo2&gt;bar2=foo3&gt; ...\n</code></pre>\n\n<p>Now I tried this:</p>\n\n<pre><code>@Array = split /=.*&gt;/, $string\n</code></pre>\n\n<p>I'm expecting to get my array filled with <code>\"bar\", \"bar2\", ...</code></p>\n\n<p>Any idea what I'm doing wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490684116, "post_id": 43062521, "comment_id": 73209138, "body": "Are you sure <code>$current_test_id</code> is a valid array index?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490684165, "post_id": 43062521, "comment_id": 73209172, "body": "If &quot;<i>line 105</i>&quot; is indeed the one you point out, the error is telling you that <code>$tests[$current_test_id]</code> is undefined, plain and simple. But where this is defined (or, rather, not) is not shown in your code, it happens earlier.  Thus I don&#39;t see how to guess it."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1490688290, "post_id": 43062521, "comment_id": 73211672, "body": "In the <code>@tests</code> you have undefined value for the given <code>$current_test_id</code> index. Therefore, the <code>my %test = %{$tests[$current_test_id]};</code> looks like <code>my %tests = %{undef}</code> - and compains about <i>cant use undef as hashref</i>. See the @ysth&#39;s asnwer. Btw, exists many modules for dumping data structures, like <code>Data::Dumper</code>, <code>Data::Dump</code>, <code>DDP</code>, <code>XXX</code> etc...."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1490688739, "post_id": 43062521, "comment_id": 73211964, "body": "<code>my %test = %{$tests[$current_test_id]};</code> =&gt; <code>my $test = $tests[$current_test_id] ||= {};</code> and later <code>$test-&gt;{&#39;passed&#39;}++;</code> (wipe out <code>$tests[$current_test_id] = \\%test;</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1490684776, "creation_date": 1490684776, "answer_id": 43062775, "question_id": 43062521, "link": "https://stackoverflow.com/questions/43062521/cant-use-an-undefined-value-as-a-hash-reference-at-pl/43062775#43062775", "title": "Can&#39;t use an undefined value as a HASH reference at .pl", "body": "<p>It looks to me like this code:</p>\n\n<pre><code>                    my %test = %{$tests[$current_test_id]};\n                    $test{'passed'}++;\n                    $test_collection_info{'successful_tests'}++;\n                    $tests[$current_test_id] = \\%test;\n</code></pre>\n\n<p>can be simplified to:</p>\n\n<pre><code>                    $test_collection_info{'successful_tests'}++;\n                    $tests[$current_test_id]{'passed'}++;\n</code></pre>\n\n<p>and work even the first time a given test passes.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1490683840, "question_id": 1193045}, "owner": {"reputation": 11, "user_id": 2642428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/493760ec92becd93264e7d53100ece42?s=128&d=identicon&r=PG", "display_name": "Teja554", "link": "https://stackoverflow.com/users/2642428/teja554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490701813, "creation_date": 1490683603, "last_edit_date": 1490701813, "question_id": 43062521, "link": "https://stackoverflow.com/questions/43062521/cant-use-an-undefined-value-as-a-hash-reference-at-pl", "title": "Can&#39;t use an undefined value as a HASH reference at .pl", "body": "<pre><code>if (defined($line) &amp;&amp; $line =~ /\u2713  /) {\n    # print \"using test id****************** $current_test_id\";\n    my %test = %{$tests[$current_test_id]};\n    $test{'passed'}++;\n    $test_collection_info{'successful_tests'}++;\n    $tests[$current_test_id] = \\%test;\n\n    if ($line =~ /v\\ \\[WARNING\\]/) {\n            $test_collection_info{'unstable_tests'}++;\n    }\n} \nelsif (defined($line) &amp;&amp; $line =~ /\u2717|AssertionFailure/) {\n    if (!defined($tests[$current_test_id])) {\n        $test_collection_info{'failed_tests'}++;\n    }\n    else {\n        my %test = %{$tests[$current_test_id]};\n        $test{'failed'}++;\n        $test_collection_info{'failed_tests'}++;\n        push(@{$test{'errors'}}, \\$line);\n        $tests[$current_test_id] = \\%test;\n    }\n}\n</code></pre>\n\n<p>This is the line with suspecting error:</p>\n\n<pre><code>my %test = %{$tests[$current_test_id]};\n</code></pre>\n\n<p>**Error: **</p>\n\n<blockquote>\n  <p>Can't use an undefined value as a HASH reference at .pl line 105.</p>\n</blockquote>\n\n<p>Can someone help if anything wrong in this script?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 3, "creation_date": 1490665656, "post_id": 43059012, "comment_id": 73202960, "body": "Run a non-packed version?"}, {"owner": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1490744540, "post_id": 43059012, "comment_id": 73246636, "body": "I just tested non-packed version, it does not print out the line, either."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 5, "creation_date": 1490681597, "post_id": 43061135, "comment_id": 73207801, "body": "All that does is take the warning and look it up in the source of <code>perldoc perldiag</code> and display that text.   That doesn&#39;t help find where in the perl sources and modules the warning is coming from."}], "tags": [], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "is_accepted": false, "score": -1, "last_activity_date": 1490678947, "last_edit_date": 1490678947, "creation_date": 1490678321, "answer_id": 43061135, "question_id": 43059012, "link": "https://stackoverflow.com/questions/43059012/how-to-determine-location-of-a-perl-warning-use-of-each-on-hash-after-insert/43061135#43061135", "title": "How to determine location of a perl warning - Use of each() on hash after insertion", "body": "<p>I think you can use diagnostics or splain. I have used diagnostics and it helps in case we are not able to track from where a warning is being generated.</p>\n\n<p>You only need to put the line <code>use diagnostics;</code> in your code that's it. You can find detailed explanation for this from the Perl Maven Site - <a href=\"https://perlmaven.com/use-diagnostics-or-splain\" rel=\"nofollow noreferrer\">Link</a>.</p>\n\n<p>Thanks.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490730124, "post_id": 43061904, "comment_id": 73240287, "body": "<code>-MCarp::Always</code> basically does this and more :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490730711, "post_id": 43061904, "comment_id": 73240596, "body": "@ikegami  I got it, thank you!  The source is just beautiful, a couple dozen lines :)"}, {"owner": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490746597, "post_id": 43061904, "comment_id": 73247170, "body": "So <code>-MCarp::Always</code> does not help, either. Still no location info. As to <code>each</code> calls - I went through my code; no <code>each</code> at all at none of <code>foreach</code> looks suspicious. I am leaning towards some module/XS code (esp. since usually, I get proper location if it happens in my code)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490758366, "post_id": 43061904, "comment_id": 73250262, "body": "@VitSpinka OK.  Did you try with <code>CORE::GLOBAL::warn</code>? That changes how <i>every</i> <code>warn</code> works, while <code>Carp::Always</code> does something different.  Just in case -- does this come out on <code>STDERR</code> or <code>STDOUT</code>? (If you redirect the output to a file, does it sill print on the console?)  I&#39;ll look into more ways."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490764307, "post_id": 43061904, "comment_id": 73252037, "body": "@VitSpinka The source may be using <code>CORE::warn</code>, exactly the prevent these games, in which case this won&#39;t help. Or, far more likely, the line info is stripped in some other way after <code>warn</code> is emitted."}, {"owner": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490770018, "post_id": 43061904, "comment_id": 73254530, "body": "The warning is generated by <code>Perl_ck_warner_d</code> in <code>Perl_hv_iternext_flags</code> in <code>hv.c</code> in Perl source. And if I modify the source code to add a <code>Perl_croak</code>, it does indeed die - but it still does not show any location. Not sure if relevant, but the stack trace is <code>Perl_pp_entersub-&gt;XS_threads__shared__tie_NEXTKEY-&gt;Perl_hv_i&zwnj;&#8203;ternext_flags-&gt;Perl_&zwnj;&#8203;ck_warner_d</code>.  I did try <code>CORE::GLOBAL::warn</code> first, that did not do any difference."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490770649, "post_id": 43061904, "comment_id": 73254875, "body": "@VitSpinka  Wow.  Good job -- how did you find it? Did you also find the user code that triggers this?  The missing line info may be a bug to be reported."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490770686, "post_id": 43061904, "comment_id": 73254903, "body": "Perhaps @ikegami can advise on whether this is a bug?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490771030, "post_id": 43061904, "comment_id": 73255114, "body": "Well, 5.24 does display the line as you can see from my answer. But I don&#39;t know what happens if the function is called from XS instead of Perl. Will test  tomorrow"}, {"owner": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490772222, "post_id": 43061904, "comment_id": 73255862, "body": "@zdim I grepped Perl source code, then ran it under gdb and set breakpoint, confirming it is indeed the right place. I still have no idea what user code triggers it. my_perl-&gt;Icurcop-&gt;cop_file and my_perl-&gt;Icurcop-&gt;cop_line are NULL/0. Calling <code>Perl_eval_pv($thread_context, &quot;require Carp;Carp::cluck(&#39;Hi&#39;)&quot;, 0)</code> got me <code>SIGSEGV</code>. (Perl version: 5.24.0.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490779272, "post_id": 43061904, "comment_id": 73260362, "body": "@VitSpinka Nice. I added a working (crude) example for tie-ing <code>STDERR</code>. You need to change one line, to match your text.  With prints coming from C code may be this can help to find the error in user code."}, {"owner": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490848389, "post_id": 43061904, "comment_id": 73297655, "body": "@zdim The tie-ing does not seem to work... from further work with dbg (looking at the key value of the hash), I theorise that the user code is about concurrent access/modification of a shared hash. (So far I don&#39;t know how to identify which user-code-hash corresponds to a <code>HV*</code>, even their <code>HASH(0xaddress)</code> don&#39;t seem to match the <code>HV*</code>)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490849982, "post_id": 43061904, "comment_id": 73298129, "body": "@VitSpinka  Oh, threads. Streams work across, but it of course depends entirely on what they do.  Btw, &quot;not seem to work&quot; -- does it not work at all, or it can&#39;t locate the error?  (I updated, added <code>else { print @_ }</code>, otherwise it wasn&#39;t printing anything to <code>STDERR</code>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490884237, "post_id": 43061904, "comment_id": 73320847, "body": "I get a line number even when called from XS."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "edited": false, "score": 0, "creation_date": 1490902659, "post_id": 43061904, "comment_id": 73332587, "body": "@VitSpinka The shared hash is a good guess for errors -- there are things to watch out for with that.  (For one thing, <code>shared</code> wipes out previous data.)  Also, <code>each</code> in particular has issues with it.  Given ikegami&#39;s finding above you&#39;d have to just look through relevant code (say, search for <code>%.*share</code> or <code>shared\\(%</code> or such). Also, if the <code>tie</code>-ing in this answer somehow isn&#39;t working (at all) it may be worthed seeing why, as it may well help.  I added a (commented out) line for a basic test."}, {"owner": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490929936, "post_id": 43061904, "comment_id": 73341588, "body": "@zdim @ikegami The tie-ing works for a test like <code>print STDERR &quot;Test&quot;</code>, but it&#39;s not invoked when the <code>Use of each()...</code> warning is printed. Yes, my plan is to use a) my perl source edits (printing value of the hash key), b) edit the source code (modify the keys to be more unique among the hashes) c) look at all shared hashes, esp. the suspicious from a)+b). However, as it&#39;s usual with all race conditions/thread programming, it happens randomly, often takes hours to occur and you never know you found all the cases :-("}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1495129885, "last_edit_date": 1495535490, "creation_date": 1490681733, "answer_id": 43061904, "question_id": 43059012, "link": "https://stackoverflow.com/questions/43059012/how-to-determine-location-of-a-perl-warning-use-of-each-on-hash-after-insert/43061904#43061904", "title": "How to determine location of a perl warning - Use of each() on hash after insertion", "body": "<p>The <a href=\"https://perldoc.perl.org/warnings.html\" rel=\"nofollow noreferrer\">warnings</a> pragma emits warnings for legal code, from a set of given categories. While the <code>FATAL</code> changes them into fatal errors, it does not change how <code>warn</code> works.  Since it is not known how this is emitted there's a good chance that overriding the <code>__WARN__</code> hook may help</p>\n\n<pre><code>local $SIG{__WARN__} = \\&amp;Carp::confess;   # or just die\n</code></pre>\n\n<p>or you may as well drop <code>local</code> just this one time.</p>\n\n<p>Another thing to try is to override <a href=\"http://perldoc.perl.org/CORE.html\" rel=\"nofollow noreferrer\"><code>CORE::GLOBAL::warn</code></a></p>\n\n<pre><code>BEGIN { *CORE::GLOBAL::warn = sub { die } }  # before use Module;\n</code></pre>\n\n<p>This affects modules as well, as will the <code>__WARN__</code> signal if set in <code>BEGIN</code> before modules.</p>\n\n<p>Note that <a href=\"http://search.cpan.org/~ferreira/Carp-Always-0.13/lib/Carp/Always.pm\" rel=\"nofollow noreferrer\">Carp::Always</a> accomplishes this, and more.  Also, it is normally activiated simply when running the program, with <code>-MCarp::Always</code>. Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for a clarification.</p>\n\n<p>See <a href=\"https://perldoc.perl.org/functions/warn.html\" rel=\"nofollow noreferrer\">warn</a> and <a href=\"https://perldoc.perl.org/perlvar.html#%25SIG\" rel=\"nofollow noreferrer\">%SIG hash in perlvar</a>, and this <a href=\"https://www.effectiveperlprogramming.com/2011/05/override-die-with-end-or-coreglobaldie/\" rel=\"nofollow noreferrer\">Effective Perler article</a>.</p>\n\n<p>Finally, just how many calls to <code>each</code> do you have?  Check them all.</p>\n\n<hr>\n\n<p>It is explained in comments that prints come from XS, found via debugger, but it is still unknown what code triggers this.  Then try <code>tie</code>-ing the stream to a class, where a trace is triggered on relevant text. A minimal example</p>\n\n<p><strong>TraceError.pm</strong></p>\n\n<pre><code>package TraceError;\nuse warnings;\nuse strict;\nuse Carp qw(longmess confess);\n\nsub TIEHANDLE { bless {} }\n\nsub PRINT {\n    my $self = shift;\n    my $prn = join '', @_;\n\n    # print \"STDERR: $prn\";   # TEST\n    print @_;                 # or   print STDERR @_;\n\n    # if ($prn =~ /\\QUse of each() on hash after insertion/)  # in your code\n    if ($prn =~ /TRACE/) {                                    # test\n        print longmess(@_);\n    }\n}\n\n1;\n</code></pre>\n\n<p>Change to the commented out <code>if</code> line so to scan prints for the text of your error message. The rest below is just a test of this. In your code you need the first two lines from <code>main.pl</code>, to <code>use</code> this class and <code>tie</code> the stream (filehandle) to it and then all prints (to <code>STDERR</code>) go by way of <code>PRINT</code> above.</p>\n\n<p><strong>main.pl</strong></p>\n\n<pre><code>use TraceError;\ntie *STDERR,'TraceError';\n\nuse warnings;\nuse strict;\nuse Pack qw(issue_warn);\n\ncall_for_err(Pack-&gt;new);\n\nsub call_for_err {\n    my ($pck) = @_; \n    $pck-&gt;issue_warn(\"TRACE call_for_err()\");  # should catch this print\n    $pck-&gt;issue_warn(\"from call_for_err()\");   # but not this\n};\n</code></pre>\n\n<p><strong>Pack.pm</strong></p>\n\n<pre><code>package Pack;\nuse warnings;\nuse strict;\n\nuse Exporter qw(import);\nour @EXPORT_OK = qw(issue_warn);\n\nsub new { bless {}, $_[0] }\n\nsub issue_warn { \n    my $self = shift;\n    warn \"In \", __PACKAGE__, \", issue_warn(@_).\";\n}\n\n1;\n</code></pre>\n\n<p>Output</p>\n\n<pre>\nIn Pack, issue_warn(TRACE, call_for_err()). at Pack.pm line 12.\n at Pack.pm line 12.\n    Pack::issue_warn('Pack=HASH(0x7016e8)', 'TRACE call_for_err()') called at main.pl line 12\n    main::call_for_err('Pack=HASH(0x7016e8)') called at main.pl line 8\n</pre>\n\n<p>The <code>tie</code>-ing class should be written far more nicely, firstly to take arguments (text to search for, stream or handle to print to).  See <a href=\"http://perldoc.perl.org/perltie.html\" rel=\"nofollow noreferrer\">perltie</a> and <a href=\"http://perldoc.perl.org/Tie/Handle.html\" rel=\"nofollow noreferrer\">Tie::Handle</a>, discussions on <a href=\"http://www.perlmonks.org\" rel=\"nofollow noreferrer\">perlmonks</a>, posts on SO such as <a href=\"https://stackoverflow.com/questions/387702/how-can-i-hook-into-perls-print\">this one</a>, and above all the chapter \"<em>Tying Filehandles</em>\" in Camel (3rd Ed).</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1490730465, "creation_date": 1490730465, "answer_id": 43078580, "question_id": 43059012, "link": "https://stackoverflow.com/questions/43059012/how-to-determine-location-of-a-perl-warning-use-of-each-on-hash-after-insert/43078580#43078580", "title": "How to determine location of a perl warning - Use of each() on hash after insertion", "body": "<pre><code>use strict;\nuse warnings;\n\nsub g {\n   my %h = ( a =&gt; 4, b =&gt; 5 );\n\n   my $done = 0;\n   while (my ($k, $v) = each(%h)) {\n      print(\"$k\\n\");\n      $h{c} = 6 if !$done++;\n   }\n}\n\nsub f {\n  g();\n}\n\nf();\n</code></pre>\n\n<p>You should have gotten a line number!</p>\n\n<pre><code>&gt;perl a.pl\na\nUse of each() on hash after insertion without resetting hash iterator results in undefined behavior, Perl interpreter: 0xe688d8 at a.pl line 8.\nb\nc\n</code></pre>\n\n<p>Carp::Always will extend that into a stack trace.</p>\n\n<pre><code>&gt;perl -MCarp::Always a.pl\na\nUse of each() on hash after insertion without resetting hash iterator results in undefined behavior, Perl interpreter: 0x1e88d8 at a.pl line 8.\n        main::g() called at a.pl line 15\n        main::f() called at a.pl line 18\nc\nb\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b42a076d19e09934cecaa13ae4092b08?s=128&d=identicon&r=PG&f=1", "display_name": "Vit Spinka", "link": "https://stackoverflow.com/users/5112627/vit-spinka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1495129885, "creation_date": 1490663762, "question_id": 43059012, "link": "https://stackoverflow.com/questions/43059012/how-to-determine-location-of-a-perl-warning-use-of-each-on-hash-after-insert", "title": "How to determine location of a perl warning - Use of each() on hash after insertion", "body": "<p>I have a pretty big perl program, packed with PAR::Packer to an executable. It uses quite a lot of modules.</p>\n\n<p>Usually, when perl gives me a warning, like use of undefined value, it prints the location of the error, and then it's easy to go deeper and debug it.</p>\n\n<p>However, I now face an error (introduced in 5.22, I think), and when that happens, I get no location:</p>\n\n<p><code>Use of each() on hash after insertion without resetting hash iterator results in undefined behaviour, Perl interpreter: 0xa94010</code></p>\n\n<p>I tried setting <code>use warnings FATAL=&gt;'all';</code>, but nothing changes, the program does not die.</p>\n\n<p>Maybe it comes from a module? How else can I determine location of the warning?</p>\n"}, {"tags": ["perl", "file", "search", "directory"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490653327, "post_id": 43057383, "comment_id": 73199206, "body": "The location of the script is not necessarily the current working directory. The current working directory is the current working directory. Check out the <a href=\"http://perldoc.perl.org/Cwd.html\" rel=\"nofollow noreferrer\">Cwd</a> and <a href=\"http://perldoc.perl.org/FindBin.html\" rel=\"nofollow noreferrer\">FindBin</a> modules, for example."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490653842, "post_id": 43057383, "comment_id": 73199410, "body": "Also, &quot;iterate over secure files&quot; and &quot;print and create new file with data&quot; don&#39;t actually do what the comments say they do..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490654410, "post_id": 43057383, "comment_id": 73199608, "body": "Basic debugging: (1) Set <code>$dirname</code> to the actual path (hard-code it) (2) What you get from <code>opendir</code> does not have the path! So, prepend <code>$dirname</code> to what <code>opendir</code> returns. // Then you&#39;ll be scanning files in that <code>$dirname</code>. // Please do not <i>delete files</i> to test!  Why not just print them to screen and inspect whether they are correct?  Remember, they need to have the full path.  You can also test with <code>if (not -f $file) { print &quot;No $file\\n&quot; }</code> and you&#39;ll see whether those <i>strings</i> (name <code>$file</code>) are actual files on the system.  // There are other issues but this is a start."}, {"owner": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "edited": false, "score": 0, "creation_date": 1490659077, "post_id": 43057383, "comment_id": 73201072, "body": "How do I make it so that the current working directory is the one that the script is ran from? That is essentially the main focus of this, so that I can change the name of the file in the script and have a program to organize files for me."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1490660532, "post_id": 43057383, "comment_id": 73201549, "body": "Did you read the links I included in my comment above?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490660647, "post_id": 43057383, "comment_id": 73201581, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/84932/how-do-i-get-the-full-path-to-a-perl-script-that-is-executing\">How do I get the full path to a Perl script that is executing?</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490682161, "post_id": 43057383, "comment_id": 73208076, "body": "@MatthewParise As Matt Jacob told you, see the links he posted.  You can use <code>FindBin</code> to find the script&#39;s directory, <code>Cwd</code> to see what you current working directory is, and <a href=\"https://perldoc.perl.org/functions/chdir.html\" rel=\"nofollow noreferrer\">chdir</a> to change it.  There are indeed numerous SO posts on these things."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "edited": false, "score": 0, "creation_date": 1490659142, "post_id": 43058067, "comment_id": 73201091, "body": "is path(&quot;/some/path&quot;); setting the default path to where the file is?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "edited": false, "score": 1, "creation_date": 1490682477, "post_id": 43058067, "comment_id": 73208247, "body": "@MatthewParise If by &quot;<i>default path</i>&quot; you mean the full path, yes it is. If it is essential for you to use the path relative to where the script is running, you can find that using <code>FindBin</code> (and <code>Cwd</code>) and  then build its full path, and then you can still use this great module.  This answer gives you pretty much all you can need, and a blueprint for future uses as well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "edited": false, "score": 0, "creation_date": 1490685911, "post_id": 43058067, "comment_id": 73210225, "body": "@MatthewParise  Um ... sorry, <code>path($dir)</code> constructs an object for file/directory at <code>&#47;some&#47;path</code>. It is here assigned to <code>$root</code>and after that you can call module&#39;s methods on <code>$root</code>. The <code>path()</code> takes the full path to file/directory, which is what <code>&#47;some&#47;path</code> is (this is what I meant in the above comment)."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1490657021, "creation_date": 1490657021, "answer_id": 43058067, "question_id": 43057383, "link": "https://stackoverflow.com/questions/43057383/script-to-scan-the-folder-the-script-is-in-and-search-for-specific-files-perl/43058067#43058067", "title": "Script to scan the folder the script is in and search for specific files [Perl]", "body": "<p>You really should employ some module. The following example is using <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>.</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Path::Tiny;\n\nmy $root = path(\"/some/path\");\nmy $iter = $root-&gt;iterator({recurse =&gt; 1});\n\nwhile(my $path = $iter-&gt;()) {\n    next unless $path-&gt;basename =~ /(secure|message)\\.(\\d+)?\\.txt/i;\n\n    my $type = $1;\n    #my $num = $2; #???\n\n    my @lines = grep { /^Jan/ } $path-&gt;lines();\n    say \"in the $path is \", scalar @lines, \" lines for Jan\";\n\n    my $new = path( ($type =~ /secure/i) ? \"/some/where/secure.txt\" : \"/some/nosecure/message.txt\" );\n    $new-&gt;spew(@lines);\n}\n</code></pre>\n\n<p>Not tested, but it should do +- the same as your script, even more because it searching recurseively...</p>\n"}], "owner": {"reputation": 19, "user_id": 3991890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef14fcd42c32d3710c01274bd5c1290e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Parise", "link": "https://stackoverflow.com/users/3991890/matthew-parise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490657021, "creation_date": 1490653085, "question_id": 43057383, "link": "https://stackoverflow.com/questions/43057383/script-to-scan-the-folder-the-script-is-in-and-search-for-specific-files-perl", "title": "Script to scan the folder the script is in and search for specific files [Perl]", "body": "<p>I am creating a script that I open inside of a specific folder, containing two different types of files.  'Secure' (secure.text, secure.001.text, etc.) files, and 'message' (message.txt, etc) files. Each file contains a log for the year, day, date, hour, and minute.  I would like to be able to scan these files and create a new file that contains all log entries for January 2006.  The purpose of this script is to be able to only scan one set of data (secure), and not all of it (messages).  </p>\n\n<p>I am having issues with my script finding the current working directory. To my understanding, perl will use the location of the script as the current directory. I am using the opendir and closedir functions, and getting prompted that there are 60 files within the directory of the script, but when I delete some files just to test it, it still says 60, leading me to believe that this is not using the current directory. It also is not finding 'secure', despite the correct regex.</p>\n\n<p>The output I am getting is \"Issue finding file 'secure'.\"</p>\n\n<pre><code>#!/usr/bin/perl\n\n\nuse strict;\nuse warnings;\n\n\n\n#Locate and scan all of the files \n\n #list all files in same dir as this perl script.\n my $dirname = \".\"; \n opendir( my $dh, $dirname ) #sets $dh as the current working directory\n    or die \"Can't open dir '$dirname':$!\\n\"; #Kills if can not open current directory.\n my @all_the_file; #Instantiates new variable that accounts for all of the files in the current dir.\n while( my $file = readdir($dh) ) { #$file accounts for every file on device. \n    push( @all_the_file, $file ); #Pushes files in current directory to $file.\n\n }\n closedir( $dh ); \n\n #Gets all of the secure files. \n\n my @all_the_secure_file;\n @all_the_secure_file = grep(/^secure(\\.\\d{1,2})?$/, @all_the_file);\n\n #Itterate over secure files. \n\nmy $filename = \"secure\";\nopen( my $fhin, \"&lt;\", $filename)\n    or die \"Can't open '$filename':$!\\n\";\nchomp( my @lines = &lt;$fhin&gt; ) ;\nclose($fhin);\n\n #Match the Regex of Jan. \n\n my @jan_lines = grep( /^Jan/ , @lines ) ;\nprint \"The file '$filename' = \" . @lines . \" lines.\\n\";\nprint \"Size of \\@jan_lines = \" . @jan_lines . \"\\n\";\n\n #Print and create new file with Data. \n\n my $filename2 = \"secure.1\";\nopen( my $fhin, \"&lt;\", $filename)\n    or die \"Can't open '$filename':$!\\n\";\nchomp( my @lines2 = &lt;$fhin&gt; ) ;\nclose($fhin);\n\nmy @jan_lines2 = grep( /^Jan/ , @lines2 ) ;\nprint \"The file '$filename2' = \" . @lines2 . \" lines.\\n\";\nprint \"Size of \\@jan_lines2 = \" . @jan_lines2 . \"\\n\";\n\n exit;\n</code></pre>\n"}, {"tags": ["windows", "perl", "command-line", "makefile", "mingw"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1490793701, "post_id": 43056668, "comment_id": 73270626, "body": "You say &quot;<i>I still can&#39;t get perl to recognize my machine.</i>&quot; ... That is incorrect. You are telling the <code>Configure</code> script that you want to use Microsoft&#39;s Visual C compiler and tools, but you seem to be using a MinGW (<code>make</code>/<code>gcc</code>) toolchain. Don&#39;t lie to <code>Configure</code>. If you want to compile OpenSSL using Visual Studio, do so. The duplicate shows how to do that. You can also read the version specific instructions that came with the OpenSSL release you are trying to build. Either way, your problem does not have anything to do with Perl."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1490826160, "post_id": 43056668, "comment_id": 73291844, "body": "To put Sinan&#39;s comment another way, the top-rated answer to the linked questions says to run the Configure script from the &quot;Visual Studio 2008 x64 Cross Tools Command Prompt&quot;, you don&#39;t seem to be doing that, and that seems to be why it isn&#39;t working for you.  This question is more specific than the other one, so if the answers to the other question don&#39;t resolve your problem it isn&#39;t a duplicate.  But at this point it seems that they do.  If you still disagree, you need to post considerably more detail about the procedure you are following, including links to specific downloads."}], "owner": {"reputation": 1, "user_id": 7510237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e3024d396d12470fd1cf8ba34f3fbb?s=128&d=identicon&r=PG&f=1", "display_name": "Brandyn Gabel", "link": "https://stackoverflow.com/users/7510237/brandyn-gabel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 1, "closed_date": 1490651087, "answer_count": 0, "score": 0, "last_activity_date": 1490709661, "creation_date": 1490649504, "last_edit_date": 1490709661, "question_id": 43056668, "link": "https://stackoverflow.com/questions/43056668/how-do-i-fix-the-error-vc-machine-not-recognized-for-perl-configure", "closed_reason": "Duplicate", "title": "How do I fix the error &#39; &quot;VC&quot; machine not recognized&#39; for perl Configure", "body": "\n\n<p>I am trying to install OpenSSL, but I am running into an error with perl Configure. I type:  </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl Configure VC-WIN64A  \n</code></pre>\n\n<p>and it does some work, but in the end I get an error saying:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>checking build system type... Invalid configuration `VC-WIN64A': \nmachine `VC' not recognized\nConfigure: error: /bin/sh config/config.sub VC-WIN64A failed\n</code></pre>\n\n<p>I tried tried make check and I received these errors, but I don't understand what they mean:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>collect2.exe: error: ld returned 1 exit status\nmake[2]: *** [Makefile:652: loadavg.exe] Error 1\nmake[2]: Leaving directory 'C:/Program Files/Make/make-4.2'\nmake[1]: *** [Makefile:1088: check-am] Error 2\nmake[1]: Leaving directory 'C:/Program Files/Make/make-4.2'\nmake: *** [Makefile:798: check-recursive] Error 1\n</code></pre>\n\n<p>I couldn't find those files in my file directory does that mean I installed Make incorrectly? Thank you for helping.</p>\n\n<p>EDIT: This is not a duplicate question like the one linked... That question has nothing to do with my problem so I don't know why it was linked. I still can't get perl to recognize my machine.</p>\n"}, {"tags": ["perl", "pipe", "eof"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490653919, "post_id": 43056290, "comment_id": 73199438, "body": "It&#39;s a process you are forking (not a thread).  You have a full answer by ikegami, but you may want to also look over <a href=\"http://stackoverflow.com/a/42639033/4653379\">this post</a>, with some eerily similar issues and points."}, {"owner": {"reputation": 183, "user_id": 7776382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0369cc455e564b3311f5c7bf45c7e00e?s=128&d=identicon&r=PG&f=1", "display_name": "iam1me", "link": "https://stackoverflow.com/users/7776382/iam1me"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490920889, "post_id": 43056290, "comment_id": 73339428, "body": "Well - that depends upon the OS. If you are on a unix/linux type OS, then yes its a new process. On Windows, where I&#39;m working, you don&#39;t get a true new process. You get a simulated new process which is really a thread."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490921145, "post_id": 43056290, "comment_id": 73339483, "body": "Ah, a good point. Didn&#39;t think of Windows."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 7776382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0369cc455e564b3311f5c7bf45c7e00e?s=128&d=identicon&r=PG&f=1", "display_name": "iam1me", "link": "https://stackoverflow.com/users/7776382/iam1me"}, "edited": false, "score": 0, "creation_date": 1490654228, "post_id": 43056542, "comment_id": 73199548, "body": "Ah, didn&#39;t realize there was referencing counting going on behind the scenes. Works like a charm - thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1490648964, "creation_date": 1490648964, "answer_id": 43056542, "question_id": 43056290, "link": "https://stackoverflow.com/questions/43056290/detecting-the-end-of-a-pipe-in-perl/43056542#43056542", "title": "Detecting the end of a Pipe in Perl", "body": "<p>A file handle is only closed when all file descriptors referring to that handle are closed. Have the parent close its copy.</p>\n\n<pre><code>pipe(my ($RD, $WR))\n   or die(\"pipe: $!\\n\");\n\ndefined( my $pid = fork() )\n   or die(\"fork: $!\\n\");\n\nif ($pid) {\n   # parent\n   close($WR);\n\n   print \"From Child: $_\" while &lt;$RD&gt;;\n   print \"Parent reached EOF\\n\";\n} else {\n   # child\n   close($RD);\n\n   print $WR \"$_\\n\" for 0..25;\n}\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 7776382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0369cc455e564b3311f5c7bf45c7e00e?s=128&d=identicon&r=PG&f=1", "display_name": "iam1me", "link": "https://stackoverflow.com/users/7776382/iam1me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 1, "accepted_answer_id": 43056542, "answer_count": 1, "score": 1, "last_activity_date": 1490648964, "creation_date": 1490647948, "question_id": 43056290, "link": "https://stackoverflow.com/questions/43056290/detecting-the-end-of-a-pipe-in-perl", "title": "Detecting the end of a Pipe in Perl", "body": "<p>I'm trying to fork a separate process/thread in perl and get the input back to the parent via a pipe. For instance:</p>\n\n<pre><code>my($RD, $WR);\npipe($RD, $WR);\n\nif(fork()) \n{\n   #parent\n   while(!eof $RD) { print \"From Child: \" . readline($RD); }\n   print \"Parent reached EOF\\n\";\n} else {\n   #child\n   for(my $i = 0; $i &lt; 25; $i++) { print $WR \"$i\\n\"; }\n   close $WR;\n}\n</code></pre>\n\n<p>All of the lines from the child are recieved and printed out by the parent. But the parent never detects EOF and is stuck in that while loop, waiting. What is the proper way to detect EOF here?</p>\n"}, {"tags": ["perl", "google-app-engine", "google-cloud-datastore", "google-cloud-platform", "google-cloud-sql"], "owner": {"reputation": 2417, "user_id": 674188, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a48e9d9e7b696d0a1fd8a1a4fb97db6f?s=128&d=identicon&r=PG", "display_name": "CCC", "link": "https://stackoverflow.com/users/674188/ccc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490647573, "creation_date": 1490647573, "question_id": 43056198, "link": "https://stackoverflow.com/questions/43056198/invoking-remotely-a-script-in-google-cloud", "title": "Invoking remotely a script in Google Cloud", "body": "<p>Initially I thought of this approach: creating a full web app that would allow uploading the files into the Data Store, then Data Flow would do the ETL by reading the files from the Data Store and putting the transformed data in Cloud SQL, and then have a different section that would allow passing the query to output the results in a CSV file into the Data Store.<br/><br/>\nHowever I want to keep it as simple as possible, so I my idea is to create a Perl script in the Cloud that does the ETL and also another script in which you can pass a SQL query as argument and output the results in a CSV file into the Data Store. This script would be invoked remotely. The idea is to execute the script without having to install all the stack in each client (Google SQL proxy, etc.), just by executing a local script with the arguments that would be passed to the remote script.<br/><br/>\nCan this be done? If so, how? And in addition to that, does this approach makes sense?<br/>\nThanks!!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1490648104, "post_id": 43056144, "comment_id": 73197094, "body": "Please don&#39;t just dump your error messages and the entirety of your code and tell us to get on with it. It&#39;s very rude of you of you apart from anything else. Take a look at <a href=\"http://stackoverflow.com/questions/how-to-ask\"><i>How to Ask</i></a> and particularly at <a href=\"http://stackoverflow.com/help/mcve\"><i>How to create a Minimal, Complete, and Verifiable example</i></a>."}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490648449, "post_id": 43056144, "comment_id": 73197234, "body": "I apologize. I&#39;ll for sure do better next time."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490648832, "post_id": 43056144, "comment_id": 73197405, "body": "I&#39;m unclear why you&#39;ve altered the code in your question to match my solution? And why have you changed <code>closedir(DH)</code> to <code>closedir(DIR)</code> when <code>DIR</code> never existed in the first place?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1490648506, "post_id": 43056292, "comment_id": 73197268, "body": "I updated my code to try and fix the errors, but I still am getting the same errors. Also updated the code in my thread"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1490648977, "post_id": 43056292, "comment_id": 73197463, "body": "That&#39;s very hard to believe. If <code>opendir</code> didn&#39;t throw an error then <code>readdir</code> on the same handle will succeed except in the most extraordinary of cases. Are you sure you&#39;re running the file with the changes that you made?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490647952, "creation_date": 1490647952, "answer_id": 43056292, "question_id": 43056144, "link": "https://stackoverflow.com/questions/43056144/my-script-is-throwing-an-invalid-dirhandle-error/43056292#43056292", "title": "My script is throwing an invalid DIRhandle error", "body": "<p>Lines 206 and 254 are</p>\n\n<pre><code>my @files = readdir(DH);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>closedir(DH);\n</code></pre>\n\n<p>after this <code>opendir</code></p>\n\n<pre><code>opendir(DH, \"\\/Judging Card\\/\");\n</code></pre>\n\n<p>The first thing you should do is to <em>check the status</em> of your <code>opendir</code>. That will tell you immediately why the directory handle is invalid</p>\n\n<p>Like this</p>\n\n<pre><code>opendir DH, '/Judging Card/' or die qq{Unable to open directory \"/Judging Card/\": $!};\n</code></pre>\n\n<p>The first thing that troubles me is that <code>Judging Card</code> doesn't look like a root directory name, but by preceding it with a slash (you don't need to escape slashes inside quotes) you are saying that it's at the root of the filing system. But the error message from that <code>or die</code> will tell you the problem</p>\n"}], "owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1490648418, "creation_date": 1490647394, "last_edit_date": 1592644375, "question_id": 43056144, "link": "https://stackoverflow.com/questions/43056144/my-script-is-throwing-an-invalid-dirhandle-error", "title": "My script is throwing an invalid DIRhandle error", "body": "<p>My problem is for some reason I'm getting two errors when I run my script:</p>\n<blockquote>\n<p>readdir() attempted on invalid dirhandle DIR at spreadsheet.pl line 206.<br />\nclosedir() attempted on invalid dirhandle DIR at spreadsheet.pl line 254.</p>\n</blockquote>\n<h3>My code</h3>\n<pre><code>use warnings 'all';\nuse strict;\n\nuse LWP::Simple 'get';\nuse Spreadsheet::WriteExcel;\nuse HTML::TreeBuilder;\nuse Path::Tiny;\nuse constant URL =&gt; 'http://pastebin.com/raw/qLwu80ZW';\n\nmy $teamNumber = &quot;&quot;;my $teamName=&quot;&quot;;my $schoolName=&quot;&quot;;my $area=&quot;&quot;;my $district=&quot;&quot;; my $agDeptPhone=&quot;&quot;; my $schoolPhone=&quot;&quot;; my $fax=&quot;&quot;; my $addressOne=&quot;&quot;; my $addressTwo=&quot;&quot;; my $city=&quot;&quot;; \nmy $state=&quot;&quot;; my $zipCode=&quot;&quot;; my $name=&quot;&quot;; my $email=&quot;&quot;; my $row=&quot;&quot;; my $Ypos=0; \n\nmy $workbook  = Spreadsheet::WriteExcel-&gt;new('perlOutput.xlsx');\nmy $worksheet = $workbook-&gt;add_worksheet();\n\nsub getTeamNumber {\n    my ($file) = @_;\n    my $html = path($file)-&gt; slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_TeamNumber/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getTeamName {\n    my ($file) = @_;\n    my $html = path($file)-&gt;slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_TeamName/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getSchoolName {\n    my ($file) = @_;\n    my $html = path($file)-&gt;slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(tag_ =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_SchoolName/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getArea{\n    my ($file) = @_;\n    my $html = path($file)-&gt;slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(tag_ =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Area/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getDistrict{\n    my ($file) = @_;\n    my $html = path($file)-&gt;slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_District/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getDeptPhone{\n    my ($file) = @_;\n    my $html = path($file)-&gt;slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Phone/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getSchoolPhone{\n    my ($file) = @_;\n    my $html = path($file)-&gt;slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Phone2/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getFax{\n    my ($file) = @_;\n    my $html = path($file)-&gt;slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Fax/)-&gt;attr('value');\n    }\n    $val =~ s/\\-//g;\n    return $val;\n}\nsub getAddress1 {\n    my ($file) = @_;\n    my $html = path($file)-&gt; slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Address1/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getAddress2 {\n    my ($file) = @_;\n    my $html = path($file)-&gt; slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Address2/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getCity {\n    my ($file) = @_;\n    my $html = path($file)-&gt; slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_City/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getState {\n    my ($file) = @_;\n    my $html = path($file)-&gt; slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_State/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getZip {\n    my ($file) = @_;\n    my $html = path($file)-&gt; slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Zip/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getWebsite {\n    my ($file) = @_;\n    my $html = path($file)-&gt; slurp;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content($html);\n    my @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\n    my $val;\n    foreach my $node (@nodes) {\n        $val = $node-&gt;look_down('name', qr/\\$txt_Website/)-&gt;attr('value');\n    }\n    return $val;\n}\nsub getNameAndEmail {\nmy ($file) = @_;\n    my $tree = HTML::TreeBuilder-&gt;new_from_content(get URL);\n    my ($table) = $tree-&gt;look_down(_tag =&gt; 'table', class =&gt; 'rgMasterTable');\n    \n    for my $tr ( $table-&gt;look_down(_tag =&gt; 'tr') ) {\n        next unless my @td = $tr-&gt;look_down(_tag =&gt; 'td');\n        my ($name, $email) = map { $_-&gt;as_trimmed_text } @td[0,1];\n}\n    return ($name, $email);\n}\n        \n#FILLER: This fills the spreadsheet with all the variables we've acquired\nsub fill {\n    my ($name, $email, $teamNumber, $teamName, $schoolName, $area, $district, \n        $agDeptPhone, $schoolPhone, $fax, $addressOne, $addressTwo, $city, $state, $zipCode) = (@_);\n    $worksheet-&gt;write($Ypos, 1, $name);\n    $worksheet-&gt;write($Ypos, 2, $email);\n    $worksheet-&gt;write($Ypos, 3, $teamNumber);\n    $worksheet-&gt;write($Ypos, 4, $teamName);\n    $worksheet-&gt;write($Ypos, 5, $schoolName);\n    $worksheet-&gt;write($Ypos, 6, $area);\n    $worksheet-&gt;write($Ypos, 7, $district);\n    $worksheet-&gt;write($Ypos, 8, $agDeptPhone);\n    $worksheet-&gt;write($Ypos, 9, $schoolPhone);\n    $worksheet-&gt;write($Ypos, 10, $fax);\n    $worksheet-&gt;write($Ypos, 11, $addressOne);\n    $worksheet-&gt;write($Ypos, 12, $addressTwo);\n    $worksheet-&gt;write($Ypos, 13, $city);\n    $worksheet-&gt;write($Ypos, 14, $state);\n    $worksheet-&gt;write($Ypos, 15, $zipCode);\n        }\n\n#Open judgingcard directory\nopendir DH, '/Judging Card' or die &quot;Unable to open directory '/Judging Card': $!&quot;;\nmy @files = readdir(DIR);\n    \n    #This fills out all top row info\n    $worksheet-&gt;write(&quot;A1&quot;,&quot;Name&quot;);\n    $worksheet-&gt;write(&quot;B1&quot;,&quot;Email&quot;);\n    $worksheet-&gt;write(&quot;C1&quot;,&quot;Team Number&quot;);\n    $worksheet-&gt;write(&quot;D1&quot;,&quot;Team Name&quot;);\n    $worksheet-&gt;write(&quot;E1&quot;,&quot;School Name&quot;);\n    $worksheet-&gt;write(&quot;F1&quot;,&quot;Area&quot;);\n    $worksheet-&gt;write(&quot;G1&quot;,&quot;District&quot;);\n    $worksheet-&gt;write(&quot;H1&quot;,&quot;Ag Dept Phone&quot;);\n    $worksheet-&gt;write(&quot;I1&quot;,&quot;School Phone&quot;);\n    $worksheet-&gt;write(&quot;J1&quot;,&quot;Fax&quot;);\n    $worksheet-&gt;write(&quot;K1&quot;,&quot;Address One&quot;);\n    $worksheet-&gt;write(&quot;L1&quot;,&quot;Address Two&quot;);\n    $worksheet-&gt;write(&quot;M1&quot;,&quot;City&quot;);\n    $worksheet-&gt;write(&quot;N1&quot;,&quot;State&quot;);\n    $worksheet-&gt;write(&quot;O1&quot;,&quot;Zip Code&quot;);\n    ###################################\n\n    \nforeach my $file (@files) { #run through all files in directory\n    next if (-d $file); #Skip file if file is folder\n        \n        $Ypos = $Ypos + 1;\n        \n        my ($name1, $email1) = getNameAndEmail($file);\n        \n        $name = $name1;\n        $email = $email1;\n        $teamNumber = getTeamNumber($file);\n        $teamName = getTeamName($file);\n        $schoolName = getSchoolName($file);\n        $area = getArea($file);\n        $district = getDistrict($file);\n        $agDeptPhone = getDeptPhone($file);\n        $schoolPhone = getSchoolPhone($file);\n        $fax = getFax($file);\n        $addressOne = getAddress1($file);\n        $addressTwo = getAddress2($file);\n        $city = getCity($file);\n        $state = getState($file);\n        $zipCode = getZip($file);\n        \n        fill($name, $email, $teamNumber, $teamName, $schoolName, $area, $district, $agDeptPhone, $schoolPhone, $fax, $addressOne, \n            $addressTwo, $city, $state, $zipCode);\n        \n}\nclosedir(DIR);`\n</code></pre>\n"}, {"tags": ["bash", "perl", "ansible", "confluence"], "comments": [{"owner": {"reputation": 16493, "user_id": 6770384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXCNG.png?s=128&g=1", "display_name": "Socowi", "link": "https://stackoverflow.com/users/6770384/socowi"}, "edited": false, "score": 2, "creation_date": 1490643897, "post_id": 43055022, "comment_id": 73194825, "body": "What are the ids exactly: <code>id</code>, <code>1234</code>, <code>&quot;1234&quot;abcdefg&quot;</code>, ...? Please add your expected output. You can improve your question even further by using code formatting for code, and removing the tags [ansible] and [confluence] \u2013 the real question is only about [perl] and/or [grep]."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490645851, "post_id": 43055022, "comment_id": 73195896, "body": "Wondering <i>how</i> do you gut such &quot;strange&quot; <code>content</code>. The <code>abcdefg</code> sure isn&#39;t JSON in your real app? (e.g. like <code>&quot;id&quot;:&quot;1234&quot;,&quot;some&quot;:&quot;blaba&quot;,&quot;id&quot;:&quot;3456&quot;</code>)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490690019, "post_id": 43055022, "comment_id": 73212777, "body": "Ansible does have a slightly fruity output format though, that&#39;s sort of a mishmash of &#39;stuff&#39; with inlined JSON."}], "answers": [{"tags": [], "owner": {"reputation": 16493, "user_id": 6770384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXCNG.png?s=128&g=1", "display_name": "Socowi", "link": "https://stackoverflow.com/users/6770384/socowi"}, "is_accepted": false, "score": 0, "last_activity_date": 1490644872, "creation_date": 1490644872, "answer_id": 43055432, "question_id": 43055022, "link": "https://stackoverflow.com/questions/43055022/bash-or-perl-inline-capture-of-multiple-pattern-matches/43055432#43055432", "title": "bash or perl inline capture of multiple pattern matches", "body": "<p>Use</p>\n\n<pre><code>grep -Po 'id\":\"\\K.*?(?=\")' &lt;&lt;&lt; \"$content\"\n</code></pre>\n\n<p><code>-P</code> enables perl regexes.<br>\n<code>-o</code> prints only the matching parts instead of whole lines.<br>\n<code>\\K</code> lets grep forget that it matched <code>id\":\"</code> before.<br>\n<code>.*?</code> matches as few caracters as possible ...<br>\n<code>(?=\")</code> ... until a <code>\"</code> is the next character. The <code>\"</code> will not be included in the match.</p>\n\n<p>Output for your example:</p>\n\n<pre><code>1234\n3456\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1490645613, "creation_date": 1490645613, "answer_id": 43055634, "question_id": 43055022, "link": "https://stackoverflow.com/questions/43055022/bash-or-perl-inline-capture-of-multiple-pattern-matches/43055634#43055634", "title": "bash or perl inline capture of multiple pattern matches", "body": "<p>In Perl:</p>\n\n<pre><code>perl -sE 'say for $str =~ /\"id\":\"(.*?)\"/g' -- -str=\"$content\" \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1617316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936858d8ba2c82297a7fd0365c9db945?s=128&d=identicon&r=PG", "display_name": "LittlEars", "link": "https://stackoverflow.com/users/1617316/littlears"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 43055634, "answer_count": 2, "score": -1, "last_activity_date": 1490653520, "creation_date": 1490643446, "last_edit_date": 1490653520, "question_id": 43055022, "link": "https://stackoverflow.com/questions/43055022/bash-or-perl-inline-capture-of-multiple-pattern-matches", "title": "bash or perl inline capture of multiple pattern matches", "body": "<p>Simple thing :</p>\n\n<pre><code>content='\"id\":\"1234\"abcdefg\"id\":\"3456\"'\n</code></pre>\n\n<p>need to get the id's out:</p>\n\n<pre><code>perl -le '@m = ( $content =~ /\\\"id\\\"\\:\\\"(.*)\\\"/g); print for @m'\n</code></pre>\n\n<p>Not working but need a one liner for use on confluence json/output for processing by Ansible.</p>\n"}, {"tags": ["perl", "perldoc"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490633497, "post_id": 43051942, "comment_id": 73188581, "body": "What does <code>where perldoc</code> reveal?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490699586, "post_id": 43051942, "comment_id": 73219306, "body": "Posting an image of text is a terrible way to report a problem."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490641101, "post_id": 43052388, "comment_id": 73193212, "body": "Good answer. Well caught."}, {"owner": {"reputation": 153, "user_id": 40476, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5807c7732537c1bda90c72cbdfdf02?s=128&d=identicon&r=PG", "display_name": "Lou", "link": "https://stackoverflow.com/users/40476/lou"}, "edited": false, "score": 0, "creation_date": 1490723295, "post_id": 43052388, "comment_id": 73236288, "body": "Thanks a bunch... And I&#39;ll not post images describing problems"}], "tags": [], "owner": {"reputation": 146, "user_id": 6702564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/073b9b88d89fbbb34d224eee156d4ff6?s=128&d=identicon&r=PG&f=1", "display_name": "grahams", "link": "https://stackoverflow.com/users/6702564/grahams"}, "is_accepted": true, "score": 13, "last_activity_date": 1490635161, "last_edit_date": 1490635161, "creation_date": 1490634095, "answer_id": 43052388, "question_id": 43051942, "link": "https://stackoverflow.com/questions/43051942/why-is-perldoc-failing-here/43052388#43052388", "title": "Why is perldoc failing here?", "body": "<p>There's a bug in perldoc version 3.27. See this posting on the ActiveState site for a workaround.</p>\n\n<p><a href=\"https://community.activestate.com/node/20823\" rel=\"noreferrer\">https://community.activestate.com/node/20823</a></p>\n\n<blockquote>\n  <p>grahams <code>ActiveState Staff</code>\n  Wed, 2017-02-15 11:09</p>\n  \n  <p>This is confirmed in 5.24.1 and 5.22.3.</p>\n  \n  <p>It's happening in the section where perldoc hands off to the local equivalent of nroff. On Win32 and Win64, a bug is allowing perldoc to get into a block of code intended to fix a problem on Debian Linux (<a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=758689\" rel=\"noreferrer\">bugs.debian.org/758689</a>). This block won't run on Windows, so the handoff to pod2text fails.</p>\n\n<pre><code>C:\\&gt; perldoc CGI\nInvalid parameter - -R\n</code></pre>\n  \n  <p>Workaround 1: Bypass perldoc and go directly to pod2text. Give pod2text the full path to the pod file.</p>\n\n<pre><code>pod2text C:\\Perl\\libCGI.pod\n</code></pre>\n  \n  <p>Workaround 2: Bypass the pager in perldoc.</p>\n\n<pre><code>perldoc -T CGI\n</code></pre>\n  \n  <p>Workaround 3: Use the previous release of 5.22.2 which has an older perldoc.</p>\n</blockquote>\n"}], "owner": {"reputation": 153, "user_id": 40476, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5807c7732537c1bda90c72cbdfdf02?s=128&d=identicon&r=PG", "display_name": "Lou", "link": "https://stackoverflow.com/users/40476/lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 43052388, "answer_count": 1, "score": 6, "last_activity_date": 1490635161, "creation_date": 1490632773, "question_id": 43051942, "link": "https://stackoverflow.com/questions/43051942/why-is-perldoc-failing-here", "title": "Why is perldoc failing here?", "body": "<p>Downloaded ActiveState Perl V5.22.3 (tried V5.24, same result) and I can't get perldoc to run! perldoc responds with 'Invalid parameter - -R'.</p>\n\n<p>Here's my command window:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZwSGG.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZwSGG.jpg\" alt=\"Showing current PATH setting and perldoc oddness with this &#39;-R&#39; invalid option\"></a></p>\n\n<p>I'm not having issues running scripts - just perldoc.</p>\n\n<p>Thanks in advance for any suggestions.</p>\n"}, {"tags": ["perl", "hash", "strict", "refs"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490629153, "post_id": 43050614, "comment_id": 73185635, "body": "It also does not have 27 lines."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1490629556, "post_id": 43050614, "comment_id": 73185897, "body": "Which line is line 27?"}, {"owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "edited": false, "score": 0, "creation_date": 1490629638, "post_id": 43050614, "comment_id": 73185966, "body": "Line 27 is the one with the print."}], "answers": [{"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 2, "last_activity_date": 1490631055, "last_edit_date": 1490631055, "creation_date": 1490630425, "answer_id": 43051195, "question_id": 43050614, "link": "https://stackoverflow.com/questions/43050614/perl-errors-cant-use-string-as-a-hash-ref-while-strict-refs-in-use-at/43051195#43051195", "title": "Perl errors: Can&#39;t use string (&quot; &quot;) as a HASH ref while &quot;strict refs&quot; in use at Test.pl line &quot;n&quot;, &lt;File&gt; line 2", "body": "<p>Replace the line</p>\n\n<pre><code>foreach $sample_nm (values %{$hash_geno_group{%{$sample_geno_group}{\"sample\"}}}){\n</code></pre>\n\n<p>with</p>\n\n<pre><code>foreach $sample_nm (@{$hash_geno_group{$sample_geno_group}{\"sample\"}}){\n</code></pre>\n\n<hr>\n\n<p><code>$sample_geno_group</code> is a key of the hash <code>%hash_geno_group</code>, ie. a string (<code>genotype1</code> or <code>genotype2</code> in your example). But when you do <code>%{$sample_geno_group}</code>, you are dereferencing it as if it were a hash reference, hence the error <code>Can't use string as HASH ref ...</code>.  </p>\n\n<p>Furthermore, <code>values %{ xxx }</code> should be used to retrieve values of the hash referenced by <code>xxx</code>. But in your case, <code>xxx</code> (ie. <code>$hash_geno_group{$sample_geno_group}{\"sample\"}</code>) is a reference to an array, in which you inserted elements with the <code>push ...</code> two lines above. So <code>@{ xxx }</code> should be used to retrieve its elements (as I did in the fix I suggested).</p>\n\n<hr>\n\n<p>Another suggestion: Use a variable declared with <code>my</code> instead of your bareword <code>GENOTYPED</code> (so for instance, <code>open my $genotype, '&lt;', $list_geno or die \"Can't open '&lt;$list_geno': $!\"</code>).</p>\n"}], "owner": {"reputation": 25, "user_id": 7683224, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/614251678779882/picture?type=large", "display_name": "Amy Ndy", "link": "https://stackoverflow.com/users/7683224/amy-ndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4071, "favorite_count": 0, "accepted_answer_id": 43051195, "answer_count": 1, "score": 0, "last_activity_date": 1490631055, "creation_date": 1490628834, "last_edit_date": 1490629439, "question_id": 43050614, "link": "https://stackoverflow.com/questions/43050614/perl-errors-cant-use-string-as-a-hash-ref-while-strict-refs-in-use-at", "title": "Perl errors: Can&#39;t use string (&quot; &quot;) as a HASH ref while &quot;strict refs&quot; in use at Test.pl line &quot;n&quot;, &lt;File&gt; line 2", "body": "<p>I'm currently working on a script which takes a file as an input. The input file looks like this:</p>\n\n<pre><code>ECHANTILLON GENOTYPE    \nCAN1        genotype1   \nCAN2        genotype1   \nCAN3        genotype1   \nEUG1        genotype2   \nEUG2        genotype2   \nEUG3        genotype2   \nEUG4        genotype2\n</code></pre>\n\n<p>What I want to do is to create a hash with:</p>\n\n<ul>\n<li>a first key as the GENOTYPE column and   </li>\n<li>a second key called \"sample\" which would point to the \"ECHANTILLON\" column. Its value would thus give for example CAN1, CAN2...</li>\n</ul>\n\n<p>Here is what my script looks like: </p>\n\n<pre><code>#!/usr/local/perl-5.24.0/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\nuse feature qw{ say };\nuse Getopt::Long; \n\n\n\nmy $list_geno;\n\nGetOptions(\"g|input=s\"=&gt;\\$list_geno);\nmy %hash_geno_group;\n\nopen(GENOTYPED,\"&lt;$list_geno\") or die (\"Cannot open $list_geno\\n\");\nwhile (defined(my $l1= &lt;GENOTYPED&gt;)) \n    {\n        my @geno_group_infos = split(m/\\t/,$l1); \n        next if ($l1 =~ m/^ECHANTILLON/); \n        chomp($l1);\n        my $sample_nm = $geno_group_infos[0]; \n        my $sample_geno_group = $geno_group_infos[1]; \n        push @{ $hash_geno_group{$sample_geno_group}{\"sample\"} },$sample_nm;\n        foreach $sample_geno_group (keys (%hash_geno_group)){\n            foreach $sample_nm (values %{$hash_geno_group{%{$sample_geno_group}{\"sample\"}}}){\n            print $sample_geno_group, \"\\t\" ,  $sample_nm, \"\\n\";\n}\n}\n}\n\n\nclose(GENOTYPED);\nexit;\n</code></pre>\n\n<p>I tried to check what returns the print of $sample_nm variable but it returns me as an error </p>\n\n<pre><code>Can't use string (\"genotype1\") as a HASH ref while \"strict refs\" in use at Test.pl line 27, \"GENOTYPED\" line 2\". \n</code></pre>\n\n<p>Can anybody explain me please: </p>\n\n<ul>\n<li>Why I do have this type or error; </li>\n<li>How to get values from the 1st column. I'll need further to store them into another variable in order to compare them with the same values but from another input file. \nThanks ! </li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1490626905, "post_id": 43047633, "comment_id": 73184108, "body": "What have you tried? What problems are you having? I see someone has already given you an answer, but Stack Overflow isn&#39;t really about people writing code for you, it&#39;s for us to help you fix specific problems in your own code."}, {"owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490642365, "post_id": 43047633, "comment_id": 73193930, "body": "I tried the command like &quot;perl -pe &#39;print if /bb/&#39; a.txt&quot; but this was just giving me copied line so l was looking for command to replace the string in copied line also. Thanks to @sean for his help"}, {"owner": {"reputation": 3356, "user_id": 412416, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGDZ3.png?s=128&g=1", "display_name": "Sean Werkema", "link": "https://stackoverflow.com/users/412416/sean-werkema"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490642963, "post_id": 43047633, "comment_id": 73194293, "body": "You should probably edit your question to include the code.  @DaveCross is right in that without it, your question is likely incomplete and off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490623307, "post_id": 43047706, "comment_id": 73181304, "body": "I think you need to read the question more carefully."}, {"owner": {"reputation": 3356, "user_id": 412416, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGDZ3.png?s=128&g=1", "display_name": "Sean Werkema", "link": "https://stackoverflow.com/users/412416/sean-werkema"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490624805, "post_id": 43047706, "comment_id": 73182520, "body": "@Borodin: The output of my second script perfectly matches his desired output, byte-for-byte. What do you think was missed?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490625203, "post_id": 43047706, "comment_id": 73182820, "body": "My apologies: I misread your code."}, {"owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490639427, "post_id": 43047706, "comment_id": 73192213, "body": "@SeanWerkema This one liner from edit section is giving me output as expected but its not making these changes in place i.e. in file itself. Can we modify this command so that current output of this one liner perl command will be contents of file (a.txt). Thanks in advance."}, {"owner": {"reputation": 3356, "user_id": 412416, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGDZ3.png?s=128&g=1", "display_name": "Sean Werkema", "link": "https://stackoverflow.com/users/412416/sean-werkema"}, "edited": false, "score": 0, "creation_date": 1490639792, "post_id": 43047706, "comment_id": 73192439, "body": "Pipe the output to a new file (<code>&gt; b.txt</code>), and copy the new file over top of the old one (<code>cp b.txt a.txt</code>)."}, {"owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "edited": false, "score": 0, "creation_date": 1490642106, "post_id": 43047706, "comment_id": 73193777, "body": "Thanks @SeanWerkema, given one liner as follow works for me: perl -n -e &#39;print; if (m/\\bbb\\b/) { s/\\bbb\\b/ee/g; print; }&#39; a.txt &gt; c.txt"}], "tags": [], "owner": {"reputation": 3356, "user_id": 412416, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGDZ3.png?s=128&g=1", "display_name": "Sean Werkema", "link": "https://stackoverflow.com/users/412416/sean-werkema"}, "is_accepted": true, "score": 1, "last_activity_date": 1490625135, "last_edit_date": 1490625135, "creation_date": 1490621018, "answer_id": 43047706, "question_id": 43047633, "link": "https://stackoverflow.com/questions/43047633/perl-copy-line-with-specific-string-and-replace-strings-in-copied-line/43047706#43047706", "title": "perl : copy line with specific string and replace strings in copied line", "body": "<p>This is a pretty straightforward Perl program; just read lines, match them with whatever you're searching for, and substitute text as necessary.</p>\n\n<p>Run this as <code>perl script.pl &lt; a.txt</code>:</p>\n\n<pre><code>while (&lt;&gt;) {\n    print;\n    if (m/bb/) {\n        s/bb/ee/g;\n        print;\n    }\n}\n</code></pre>\n\n<p>Note that if you only want to substitute whole words (instead of things that just <em>contain</em> <code>bb</code>), you'll need to adjust the regexes with <code>\\b</code> word boundaries accordingly:</p>\n\n<pre><code>while (&lt;&gt;) {\n    print;\n    if (m/\\bbb\\b/) {\n        s/\\bbb\\b/ee/g;\n        print;\n    }\n}\n</code></pre>\n\n<p><strong>Edit</strong>:  Since the request was specifically for a \"perl command for this,\" here's a one-liner that embeds the script directly:</p>\n\n<pre><code>perl -n -e 'print; if (m/\\bbb\\b/) { s/\\bbb\\b/ee/g; print; }' &lt; a.txt\n</code></pre>\n"}], "owner": {"reputation": 419, "user_id": 2456048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db33cd4d8daa7c7703c93256d94b053d?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/2456048/satish"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "closed_date": 1490628095, "accepted_answer_id": 43047706, "answer_count": 1, "score": -5, "last_activity_date": 1490639504, "creation_date": 1490620835, "last_edit_date": 1490639504, "question_id": 43047633, "link": "https://stackoverflow.com/questions/43047633/perl-copy-line-with-specific-string-and-replace-strings-in-copied-line", "closed_reason": "Not suitable for this site", "title": "perl : copy line with specific string and replace strings in copied line", "body": "<p>Here is my question. lets say i have one file, lets say a.txt with contents as follow:</p>\n\n<pre><code>a aa aaa\nb bb bbb\nc cc ccc\nb bb bbb\nd dd ddd\n</code></pre>\n\n<p>then i want to find all lines (one by one) having string lets say \"bb\" then copy this line and replace the string \"bb\" with \"ee\" in newly copied/duplicated line.\nso my final output i.e. contents of file a.txt, will be as follow:</p>\n\n<pre><code> a aa aaa\n b bb bbb\n b ee bbb\n c cc ccc\n b bb bbb\n b ee bbb\n d dd ddd\n</code></pre>\n\n<p>Can anybody help me with perl command for this? or is there any better option than perl to achieve this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1490617557, "post_id": 43046270, "comment_id": 73176838, "body": "I think you need to use <code>VVV ((?:(?!III).)*?) hash (.*?)(?=III)</code> pattern. Or even <code>VVV ((?:(?!VVV|III).)*?) hash (.*?)(?=III)</code>"}, {"owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490617838, "post_id": 43046270, "comment_id": 73177030, "body": "Your proposed pattern seems to work, indeed."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490618288, "post_id": 43046270, "comment_id": 73177389, "body": "This looks a bit like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> - what are you actually trying to accomplish?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1490618149, "last_edit_date": 1495540001, "creation_date": 1490617563, "answer_id": 43046443, "question_id": 43046270, "link": "https://stackoverflow.com/questions/43046270/why-does-word-another-word-match-only-a-character/43046443#43046443", "title": "Why does `word (.(?!another-word))*?` match only a character?", "body": "<p>Because: <code>(.(?!III))*?</code> - the star is outside the brackets, rather than inside, so you're not capturing all the occurrences - just one. (The last one). </p>\n\n<p>As <a href=\"https://stackoverflow.com/users/3832970/wiktor-stribi%C5%BCew\">Wiktor Stribi\u017cew</a> notes in the comments:</p>\n\n<pre><code>/VVV ((?:(?!III).)*?) hash (.*?)(?=III)/\n</code></pre>\n\n<p>Does what you want.</p>\n\n<p>But I'd suggest that you're just trying to get far too complicated with your regex, and that really what you <em>should</em> be doing is breaking down the problem a bit further - multi-matching if necessary to get inclusion;exclusion sets. </p>\n\n<p>Something like:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $text = \"abc \" . \n  \"VVV foo III \" .                  # &lt;- here\n  \"pqr hash def \" . \n  \"VVV bar hash baz III \" .         # &lt;- here\n  \"stu hash ghi \" . \n  \"VVV bbb, ccc hash ddd III \" .    # &lt;- here\n  \"vwx\";\n\n#split your block on VVV, without removal\nfor ( split /(?=VVV)/, $text ) {\n   #replace 'this chunk' so between 'VVV' and 'III' \n   s/hash (.*) III/HASH $1 III/g;\n   #print the line. Or you could insert this back into your primary text\n   print;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1490618795, "creation_date": 1490618795, "answer_id": 43046886, "question_id": 43046270, "link": "https://stackoverflow.com/questions/43046270/why-does-word-another-word-match-only-a-character/43046886#43046886", "title": "Why does `word (.(?!another-word))*?` match only a character?", "body": "\n\n<p>I would do this by splitting the string on whitespace and iterating through the resulting list, using the <em>range operator</em> to determine whether any given occurrence of <code>hash</code> is eligible for alteration</p>\n\n<p>It would look like this. Note that the <code>split</code> also captures the intervening white space so that tabs or multiple spaces can be replaced as they were</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $text =\n    \"abc \" .\n    \"VVV foo III \" .                  # &lt;- here\n    \"pqr hash def \" .\n    \"VVV bar hash baz III \" .         # &lt;- here\n    \"stu hash ghi \" .\n    \"VVV bbb, ccc hash ddd III \" .    # &lt;- here\n    \"vwx\"\n;\n\nmy @text = split /(\\s+)/, $text;\n\nfor ( @text ) {\n    my $in_range = $_ eq 'VVV' .. $_ eq 'III';\n    $_ = 'HASH' if $_ eq 'hash' and $in_range;\n}\n\nsay join '', @text;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>abc VVV foo III pqr hash def VVV bar HASH baz III stu hash ghi VVV bbb, ccc HASH ddd III vwx\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "edited": false, "score": 0, "creation_date": 1490626582, "post_id": 43046890, "comment_id": 73183877, "body": "Ok, I now understand why I have to put the <code>(?!III)</code> in front of the <code>.</code>. But I still don&#39;t get which part of my (wrong) regexp &quot;eats&quot; or &quot;covers&quot; the <code>ba</code> of <code>bar</code> and <code>bbb, cc</code> of <code>bbb, ccc</code>."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "edited": false, "score": 0, "creation_date": 1490627769, "post_id": 43046890, "comment_id": 73184726, "body": "When you do not wrap the whole tempered greedy token within a capturing group, the <code>(.(?!III))*?</code> subpattern matches any char that is not followed with <code>III</code> substring and <i>captures</i> this char into Group 1. Since the quantifier <code>*?</code> is set to the whole <i>grouping construct</i>  <code>(.(?!III))</code>, the capture group value is <i>re-written</i> each time the char is matched and captured. It is called a <i>repeated capturing group</i>. Read <a href=\"http://www.regular-expressions.info/captureall.html\" rel=\"nofollow noreferrer\"><i>Repeating a Capturing Group vs. Capturing a Repeated Group</i></a>,  it should be clear to you then."}, {"owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "edited": false, "score": 1, "creation_date": 1490647853, "post_id": 43046890, "comment_id": 73196932, "body": "Thank you very much for this link. It was very helpful. I was, in fact, unaware of the difference between &quot;Repeating a Capturing Group&quot; and &quot;Capturing a Repeated Group&quot;."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 4, "last_activity_date": 1490618813, "creation_date": 1490618813, "answer_id": 43046890, "question_id": 43046270, "link": "https://stackoverflow.com/questions/43046270/why-does-word-another-word-match-only-a-character/43046890#43046890", "title": "Why does `word (.(?!another-word))*?` match only a character?", "body": "<p>You are trying to use a <a href=\"http://www.rexegg.com/regex-quantifiers.html#tempered_greed\" rel=\"nofollow noreferrer\">tempered greedy token</a> in your pattern. To write it correctly, you need to put the lookahead <em>before</em> the dot you want to \"temper\", use a non-capturing group to wrap the lookahead with the dot, and <em>capture</em> the whole substring matched with the construct within another capturing group.</p>\n\n<pre><code>/VVV ((?:(?!III).)*?) hash (.*?III)/\n     ^              ^\n</code></pre>\n\n<p>Note there is no point putting <code>III</code> into a positive lookahead, you may as well match and capture it to be restored later with <code>$2</code>.</p>\n\n<p>Now, the <code>((?:(?!III).)*?)</code> will capture into Group 1 any char (other than line breaks), 0 or more occurrences, as few as possible, that does not start a <code>III</code> character sequence.</p>\n"}], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 43046890, "answer_count": 3, "score": 2, "last_activity_date": 1490618813, "creation_date": 1490617181, "question_id": 43046270, "link": "https://stackoverflow.com/questions/43046270/why-does-word-another-word-match-only-a-character", "title": "Why does `word (.(?!another-word))*?` match only a character?", "body": "<p>I have a string</p>\n\n<pre><code>my $text = \n  \"abc \" .\n  \"VVV foo III \" .                # &lt;- here\n  \"pqr hash def \" .\n  \"VVV bar hash baz III \" .       # &lt;- here\n  \"stu hash ghi \" .\n  \"VVV bbb, ccc hash ddd III \" .  # &lt;- here\n  \"vwx\";\n</code></pre>\n\n<p>In this text, I want to replace the word <code>hash</code> if it occurs between the words <code>VVV</code> and <code>III</code>. Potential fragments for substitution are marked with <code>&lt;- here</code> in the snippet above. The first fragment does not have the word <code>hash</code>, so no substitution can take place there.</p>\n\n<p>I have come up with the following regular expression:</p>\n\n<pre><code>$text =~ s/ VVV (.(?!III))*? hash (.*?)(?=III)/ VVV $1 HASH $2/g;\n</code></pre>\n\n<p>With this regex, <code>$text</code> becomes</p>\n\n<pre><code>abc VVV foo III pqr hash def VVV r HASH baz III stu hash ghi VVV c HASH ddd III vwx\n</code></pre>\n\n<p>The replacements are made at the right places, <em>however</em>, the text preceeding <code>hash</code> is replaced with one character only (<code>VVV r HASH</code> instead of <code>VVV bar HASH</code> and <code>VVV c HASH</code> instead of <code>VVV bbb, ccc HASH</code>).</p>\n\n<p>I don't understand why this happens. As far as I understand regular expressions, the <code>VVV</code> should act as an anchor and thus make sure that every character after it is matched.</p>\n"}, {"tags": ["perl", "fuse"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490618997, "post_id": 43045516, "comment_id": 73177925, "body": "I&#39;m not sure how related this is, but I remember attending <a href=\"https://www.youtube.com/watch?v=X18uBQU0woA\" rel=\"nofollow noreferrer\">a talk about creating file systems in Perl</a> at YAPC::EU 2014 by Xan Tronix. It&#39;s not Fuse, but maybe it&#39;s useful."}, {"owner": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490673052, "post_id": 43045516, "comment_id": 73204860, "body": "@simbabque very interesting!"}, {"owner": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490684076, "post_id": 43045516, "comment_id": 73209114, "body": "@simbabque all is fine, but  Filesys::POSIX filesystem cannot mount to real folder. All worked is contrariwise i.e local path can be mount to virtual, not otherwise"}], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 3714435, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e62c30ed03cdbecf6cc187f6a0948a89?s=128&d=identicon&r=PG&f=1", "display_name": "a1111exe", "link": "https://stackoverflow.com/users/3714435/a1111exe"}, "is_accepted": true, "score": 3, "last_activity_date": 1491036087, "creation_date": 1491036087, "answer_id": 43154668, "question_id": 43045516, "link": "https://stackoverflow.com/questions/43045516/virtual-filesystem-in-perl-with-fuse/43154668#43154668", "title": "Virtual Filesystem in Perl with Fuse", "body": "<p>I'm really not a regular user of the Fuse module, neither of FUSE system. Tinkered with this issue out of pure curiosity. Thus, although I can't explain in very much details how to use the plain Fuse module to achieve your goal, I have a working code that does create the wanted filesystem (at least on my system, and seems that it is capable of creating any arbitrary filesystem tree), and I can explain how I got this code working.</p>\n\n<p>So first of all I discovered the <a href=\"http://search.cpan.org/~noseynick/Fuse-Simple-1.00/lib/Fuse/Simple.pm\" rel=\"nofollow noreferrer\">Fuse::Simple</a> module on CPAN.\nIts SYNOPSIS shows that it provides a really simple API to the Fuse module for creating arbitrary filesystems from a hash structure. Its <a href=\"http://cpansearch.perl.org/src/NOSEYNICK/Fuse-Simple-1.00/lib/Fuse/Simple.pm\" rel=\"nofollow noreferrer\">source code</a> isn't that huge, so I just created 'listing.pl' script file and copied there most of the functions (except fserr that caused a <code>Modification of a read-only value</code> exception), put the main sub contents out, so they will be the main script's flow, hardcoded the filesystem structure (<code>$fs</code> var), and made some little adjustments here and there (like declare vars with <code>my</code> to prevent exceptions), and finally got the filesystem mounted, with all directories listed and files readable. So this is the code I got at last:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse diagnostics;\nuse Carp;\nuse Fuse;\nuse Errno qw(:POSIX);         # ENOENT EISDIR etc\nuse Fcntl qw(:DEFAULT :mode); # S_IFREG S_IFDIR, O_SYNC O_LARGEFILE etc.\nuse Switch;\n\nmy $debug = 0;\nmy %codecache = ();\nmy $ctime = time();\nmy $uid = $&gt;;\nmy $gid = $) + 0;\n\nmy $fs = {\n    \"file1.txt\" =&gt; \"File 1 contents\",\n    \"subdir\" =&gt; {\n        \"subdir-l2\" =&gt; {},\n        \"file2.txt\" =&gt; \"File 2 contents\"\n    }\n};\n\n# some default args\nmy %args = (\n    \"mountpoint\"  =&gt; \"listing\",\n    \"debug\"       =&gt; $debug,\n    \"fuse_debug\"  =&gt; 0,\n    \"threaded\"    =&gt; 0,\n    \"/\"           =&gt; $fs\n);\n# the default subs\nmy %fs_subs = (\n    \"chmod\"       =&gt; \\&amp;fs_not_imp,\n    \"chown\"       =&gt; \\&amp;fs_not_imp,\n    \"flush\"       =&gt; \\&amp;fs_flush,\n    \"fsync\"       =&gt; \\&amp;fs_not_imp,\n    \"getattr\"     =&gt; \\&amp;fs_getattr,\n    \"getdir\"      =&gt; \\&amp;fs_getdir,\n    \"getxattr\"    =&gt; \\&amp;fs_not_imp,\n    \"link\"        =&gt; \\&amp;fs_not_imp,\n    \"listxattr\"   =&gt; \\&amp;fs_not_imp,\n    \"mkdir\"       =&gt; \\&amp;fs_not_imp,\n    \"mknod\"       =&gt; \\&amp;fs_not_imp,\n    \"open\"        =&gt; \\&amp;fs_open,\n    \"read\"        =&gt; \\&amp;fs_read,\n    \"readlink\"    =&gt; \\&amp;fs_readlink,\n    \"release\"     =&gt; \\&amp;fs_release,\n    \"removexattr\" =&gt; \\&amp;fs_not_imp,\n    \"rmdir\"       =&gt; \\&amp;fs_not_imp,\n    \"rename\"      =&gt; \\&amp;fs_not_imp,\n    \"setxattr\"    =&gt; \\&amp;fs_not_imp,\n    \"statfs\"      =&gt; \\&amp;fs_statfs,\n    \"symlink\"     =&gt; \\&amp;fs_not_imp,\n    \"truncate\"    =&gt; \\&amp;fs_truncate,\n    \"unlink\"      =&gt; \\&amp;fs_not_imp,\n    \"utime\"       =&gt; sub{return 0},\n    \"write\"       =&gt; \\&amp;fs_write,\n);\n# except extract these ones back out.\n$debug = delete $args{\"debug\"};\n$args{\"debug\"} = delete( $args{\"fuse_debug\"} ) || 0;\ndelete $args{\"/\"};\n# add the functions, if not already defined.\n# wrap in debugger if debug is set.\nfor my $name (keys %fs_subs) {\n    my $sub = $fs_subs{$name};\n#   $sub = wrap($sub, $name) if $debug;\n    $args{$name} ||= $sub;\n}\nFuse::main(%args);\n\nsub fetch {\n    my ($path, @args) = @_;\n\n    my $obj = $fs;\n    for my $elem (split '/', $path) {\n    next if $elem eq \"\"; # skip empty // and before first /\n    $obj = runcode($obj); # if there's anything to run\n    # the dir we're changing into must be a hash (dir)\n    return ENOTDIR() unless ref($obj) eq \"HASH\";\n    # note that ENOENT and undef are NOT the same thing!\n    return ENOENT() unless exists $obj-&gt;{$elem};\n    $obj = $obj-&gt;{$elem};\n    }\n\n    return runcode($obj, @args);\n}\n\nsub runcode {\n    my ($obj, @args) = @_;\n\n    while (ref($obj) eq \"CODE\") {\n    my $old = $obj;\n    if (@args) { # run with these args. don't cache\n        delete $codecache{$old};\n        print \"running $obj(\",quoted(@args),\") NO CACHE\\n\" if $debug;\n        $obj = saferun($obj, @args);\n    } elsif (exists $codecache{$obj}) { # found in cache\n        print \"got cached $obj\\n\" if $debug;\n        $obj = $codecache{$obj}; # could be undef, or an error, BTW\n    } else {\n        print \"running $obj() to cache\\n\" if $debug;\n        $obj = $codecache{$old} = saferun($obj);\n    }\n\n    if (ref($obj) eq \"NOCACHE\") {\n        print \"returned a nocache() value - flushing\\n\" if $debug;\n        delete $codecache{$old};\n        $obj = $$obj;\n    }\n\n    print \"returning \",ref($obj),\" \",\n      defined($obj) ? $obj : \"undef\",\n      \"\\n\" if $debug;\n    }\n    return $obj;\n}\n\nsub saferun {\n    my ($sub, @args) = @_;\n\n    my $ret = eval { &amp;$sub(@args) };\n    my $died = $@;\n    if (ref($died)) {\n    print \"+++ Error $$died\\n\" if ref($died) eq \"ERROR\";\n    return $died;\n    } elsif ($died) {\n    print \"+++ $died\\n\";\n    # stale file handle? moreorless?\n    return ESTALE();\n    }\n    return $ret;\n}\n\nsub nocache {\n    return bless(\\ shift, \"NOCACHE\"); # yup, utter abuse of bless   :-)\n}\n\nsub dump_open_flags {\n    my $flags = shift;\n\n    printf \"  flags: 0%o = (\", $flags;\n    for my $bits (\n    [ O_ACCMODE(),   O_RDONLY(),     \"O_RDONLY\"    ],\n    [ O_ACCMODE(),   O_WRONLY(),     \"O_WRONLY\"    ],\n    [ O_ACCMODE(),   O_RDWR(),       \"O_RDWR\"      ],\n    [ O_APPEND(),    O_APPEND(),    \"|O_APPEND\"    ],\n    [ O_NONBLOCK(),  O_NONBLOCK(),  \"|O_NONBLOCK\"  ],\n    [ O_SYNC(),      O_SYNC(),      \"|O_SYNC\"      ],\n    [ O_DIRECT(),    O_DIRECT(),    \"|O_DIRECT\"    ],\n    [ O_LARGEFILE(), O_LARGEFILE(), \"|O_LARGEFILE\" ],\n    [ O_NOFOLLOW(),  O_NOFOLLOW(),  \"|O_NOFOLLOW\"  ],\n    ) {\n    my ($mask, $flag, $name) = @$bits;\n    if (($flags &amp; $mask) == $flag) {\n        $flags -= $flag;\n        print $name;\n    }\n    }\n    printf \"| 0%o !!!\", $flags if $flags;\n    print \")\\n\";\n}\n\nsub accessor {\n    my $var_ref = shift;\n\n    croak \"accessor() requires a reference to a scalar var\\n\"\n      unless defined($var_ref) &amp;&amp; ref($var_ref) eq \"SCALAR\";\n\n    return sub {\n    my $new = shift;\n    $$var_ref = $new if defined($new);\n    return $$var_ref;\n    }\n}\n\nsub fs_not_imp { return -ENOSYS() }\n\nsub fs_flush {\n    # we're passed a path, but finding my coderef stuff from a path\n    # is a bit of a 'mare. flush the lot, won't hurt TOO much.\n    print \"Flushing\\n\" if $debug;\n    %codecache = ();\n    return 0;\n}\n\nsub easy_getattr {\n    my ($mode, $size) = @_;\n\n    return (\n    0, 0,       # $dev, $ino,\n    $mode,\n    1,          # $nlink, see fuse.sourceforge.net/wiki/index.php/FAQ\n    $uid, $gid, # $uid, $gid,\n    0,          # $rdev,\n    $size,      # $size,\n    $ctime, $ctime, $ctime, # actually $atime, $mtime, $ctime,\n    1024, 1,    # $blksize, $blocks,\n    );\n}\n\nsub fs_getattr {\n    my $path = shift;\n    my $obj = fetch($path);\n\n    # undef doesn't actually mean \"file not found\", it could be a coderef\n    # file-sub which has returned undef.\n    return easy_getattr(S_IFREG | 0200, 0) unless defined($obj);\n\n    switch (ref($obj)) {\n    case \"ERROR\" {  # this is an error to be returned.\n        return -$$obj;\n    }\n    case \"\" {       # this isn't a ref, it's a real string \"file\"\n        return easy_getattr(S_IFREG | 0644, length($obj));\n    }\n    # case \"CODE\" should never happen - already been run by fetch()\n    case \"HASH\" {   # this is a directory hash\n        return easy_getattr(S_IFDIR | 0755, 1);\n    }\n    case \"SCALAR\" { # this is a scalar ref. we use these for symlinks.\n        return easy_getattr(S_IFLNK | 0777, 1);\n    }\n    else {          # what the hell is this file?!?\n        print \"+++ What on earth is \",ref($obj),\" $path ?\\n\";\n        return easy_getattr(S_IFREG | 0000, 0);\n    }\n    }\n}\n\nsub fs_getdir {\n    my $obj = fetch(shift);\n    return -$$obj if ref($obj) eq \"ERROR\"; # THINK this is a good idea.\n    return -ENOENT() unless ref($obj) eq \"HASH\";\n    return (\".\", \"..\", sort(keys %$obj), 0);\n}\n\nsub fs_open {\n    # doesn't really need to open, just needs to check.\n    my $obj = fetch(shift);\n    my $flags = shift;\n    dump_open_flags($flags) if $debug;\n\n    # if it's undefined, and we're not writing to it, return an error\n    return -EBADF() unless defined($obj) or ($flags &amp; O_ACCMODE());\n\n    switch (ref($obj)) {\n    case \"ERROR\"  { return -$$obj; }\n    case \"\"       { return 0 }          # this is a real string \"file\"\n    case \"HASH\"   { return -EISDIR(); } # this is a directory hash\n    else          { return -ENOSYS(); } # what the hell is this file?!?\n    }\n}\n\nsub fs_read {\n    my $obj = fetch(shift);\n    my $size = shift;\n    my $off = shift;\n\n    return -ENOENT() unless defined($obj);\n    return -$$obj if ref($obj) eq \"ERROR\";\n    # any other types of refs are probably bad\n    return -ENOENT() if ref($obj);\n\n    if ($off &gt;  length($obj)) {\n    return -EINVAL();\n    } elsif ($off == length($obj)) {\n    return 0; # EOF\n    }\n    return substr($obj, $off, $size);\n}\n\nsub fs_readlink {\n    my $obj = fetch(shift);\n    return -$$obj if ref($obj) eq \"ERROR\";\n    return -EINVAL() unless ref($obj) eq \"SCALAR\";\n    return $$obj;\n}\n\nsub fs_release {\n    my ($path, $flags) = @_;\n    dump_open_flags($flags) if $debug;\n    return 0;\n}\n\nsub fs_statfs {\n    return (\n        255, # $namelen,\n        1,1, # $files, $files_free,\n        1,1, # $blocks, $blocks_avail, # 0,0 seems to hide it from df?\n        2,   # $blocksize,\n    );\n}\n\nsub fs_truncate {\n    my $obj = fetch(shift, \"\"); # run anything to set it to \"\"\n    return -$$obj if ref($obj) eq \"ERROR\";\n    return 0;\n}\n\nsub fs_write {\n    my ($path, $buf, $off) = @_;\n    my $obj = fetch($path, $buf, $off); # this runs the coderefs!\n    return -$$obj if ref($obj) eq \"ERROR\";\n    return length($buf);\n}\n</code></pre>\n\n<p>Final word: I didn't try to use the module itself (it's not listed in my distro package repository, and I was too lazy (sorry) to install it by cpanm or other way). But I think that if I'll have to just use FUSE with Perl, I'll probably just use Fuse::Simple instead of Fuse, maybe forking it. I'd use plain Fuse only for my academic research, I think...</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 2, "accepted_answer_id": 43154668, "answer_count": 1, "score": 10, "last_activity_date": 1491036087, "creation_date": 1490615126, "question_id": 43045516, "link": "https://stackoverflow.com/questions/43045516/virtual-filesystem-in-perl-with-fuse", "title": "Virtual Filesystem in Perl with Fuse", "body": "<p>Anybody help me make a virtual file system in Perl.\nVery simple, 2 depth level, as</p>\n\n<pre><code>/subdir\n   subdir-l2\n   file2.txt\n/file1.txt \n</code></pre>\n\n<p>I try use Fuse.pm, but not understand how create subdir level. I create %files hash, and if go to subdir, recreate it with new records. It's for test only.</p>\n\n<pre><code>#!/usr/bin/env perl \n\nuse strict;\nuse warnings;\nuse utf8;\nuse Fuse;\nuse POSIX qw(ENOENT EISDIR EINVAL);\n\nmy (%files) = (\n    '.' =&gt; { \n        type =&gt; 0040,\n        mode =&gt; 0755,\n        ctime =&gt; 1490603721\n    },\n    subdir =&gt; {\n        type =&gt; 0040,\n        mode =&gt; 0755,\n        ctime =&gt; 1490603721\n    },\n    \"file1.txt\" =&gt; { \n            type =&gt; 0100,\n            mode =&gt; 0755,\n            ctime =&gt; 1490603721\n        }\n );\n\nsub filename_fixup {\n    my ($file) = shift;\n    $file =~ s,^/,,;\n    $file = '.' unless length($file);\n    return $file;\n}\n\nsub getdir {\n    my $tmp = shift;\n    if ($tmp eq '/') {  \n        return (keys %files),0;\n    } else { \n        (%files) = (\n                '.' =&gt; {\n                    type =&gt; 0040,\n                    mode =&gt; 0755,\n                    ctime =&gt; 1490603721    \n                },\n\n                # /subdir/subdir-l2\n                \"subdir-l2\" =&gt; {\n                    type =&gt; 0040,\n                    mode =&gt; 0755,\n                    ctime =&gt; 1490603721    \n                } ,\n\n                # /subdir/a-l2.file\n                \"file2.txt\" =&gt; {\n                    cont =&gt; \"File 'al2'.\\n\",\n                    type =&gt; 0100,\n                    mode =&gt; 0755,\n                    ctime =&gt; 1490603721\n                }      \n        );\n        return (keys %files),0;\n    }\n}\n\nsub getattr {   \n    my ($file) = filename_fixup(shift);\n    $file =~ s,^/,,;\n    $file = '.' unless length($file);\n    return -ENOENT() unless exists($files{$file});\n    my ($size) = exists($files{$file}{cont}) ? length($files{$file}{cont}) : 0;\n    $size = $files{$file}{size} if exists $files{$file}{size};\n    my ($modes) = ($files{$file}{type}&lt;&lt;9) + $files{$file}{mode};\n    my ($dev, $ino, $rdev, $blocks, $gid, $uid, $nlink, $blksize) = (0,0,0,1,0,0,1,1024);\n    my ($atime, $ctime, $mtime);\n    $atime = $ctime = $mtime = $files{$file}{ctime};\n    return ($dev,$ino,$modes,$nlink,$uid,$gid,$rdev,$size,$atime,$mtime,$ctime,$blksize,$blocks);\n}\n\nFuse::main(\n    mountpoint  =&gt; \"/tmp/123\",\n    getdir      =&gt; \\&amp;getdir,\n    getattr     =&gt; \\&amp;getattr,\n);\n</code></pre>\n\n<p>one level mount fine, but if go to deeper i get </p>\n\n<pre><code>?????????? ? ? ? ?            ? file2.txt\n?????????? ? ? ? ?            ? subdir-l2\n</code></pre>\n"}, {"tags": ["excel", "perl", "date", "formatting"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1490611409, "post_id": 43044185, "comment_id": 73172643, "body": "Which library do you use?"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1490611748, "post_id": 43044185, "comment_id": 73172816, "body": "Excel::Writer::XLSX"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1490611815, "post_id": 43044185, "comment_id": 73172857, "body": "Have you read the <a href=\"http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#write_date_time(_%24row,_%24col,_%24date_string,_%24format_)\" rel=\"nofollow noreferrer\">documentation</a>"}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1490612424, "post_id": 43044185, "comment_id": 73173270, "body": "Hi, We have tried this &quot;Write_date_time&quot; function by setting the input format as &#39;mm/dd/yyyy&#39;, But in excel it is showing as custom format instead of date format, Can you please let us know if there is any function which will convert the input date as date format as mention in the previously attached screen shot."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 1, "creation_date": 1490615420, "post_id": 43044185, "comment_id": 73175351, "body": "I don&#39;t think there is a way to set that using Excel::Writer::XLSX. You can look at the module Win32::OLE for this, it may be useful as it has all the methods like VBA."}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1490615666, "post_id": 43044185, "comment_id": 73175514, "body": "Hi Mohit, Can you please share the link to download the WIN32::OLE package, Also can you please provide us the sample example for the same."}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1490808965, "post_id": 43044185, "comment_id": 73282458, "body": "Can you please let me know the alternate approach without installing this package (WIN32::OLE)."}, {"owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "edited": false, "score": 0, "creation_date": 1491196769, "post_id": 43044185, "comment_id": 73427387, "body": "WIN32::OLE package is built in for windows OS, Can anyone please let me know is there is any package or WIN32::OLE for AIX, which will resolve this issue and that package need to support for AIX, I have been searching to resolve this for a long time, So can someone please help me on this. Thanks in Advance."}], "owner": {"reputation": 23, "user_id": 6469205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43329c604a193aa6cf931fd462fc8d3f?s=128&d=identicon&r=PG&f=1", "display_name": "HariHaran", "link": "https://stackoverflow.com/users/6469205/hariharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1490612409, "creation_date": 1490611259, "question_id": 43044185, "link": "https://stackoverflow.com/questions/43044185/how-to-set-date-format-in-excel-using-perl-script", "title": "How to set Date format in Excel using perl script?", "body": "<p>We have requirement to set the cell format as date in excel, So can someone please help to achieve this through perl.</p>\n\n<p>Please refer the attachment that show how the cell format should be.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bbc7l.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bbc7l.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 5, "creation_date": 1490606106, "post_id": 43042057, "comment_id": 73169107, "body": "I&#39;d suggest that <i>keeping</i> the <code>grep</code> is no bad thing - it makes it much more obvious what your code is doing. E.g. <code>my @parts = grep { not &#47;^#$&#47; } split &#47;(#|!)&#47;, $foo;</code>"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1490607368, "post_id": 43042057, "comment_id": 73169966, "body": "+++ @Sobrique :) For reading my own code after a half year, helps if it isn&#39;t obfuscated..."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1490605861, "post_id": 43042232, "comment_id": 73168950, "body": "Rather <code>&#47;#|(?=!)|(?&lt;=!)&#47;</code> if I understand the question correctly, no?"}, {"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1490606265, "post_id": 43042232, "comment_id": 73169211, "body": "@Dada: yes, you&#39;re right. Misunderstood the question initially. Updated the answer."}], "tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": false, "score": 2, "last_activity_date": 1490606223, "last_edit_date": 1490606223, "creation_date": 1490605753, "answer_id": 43042232, "question_id": 43042057, "link": "https://stackoverflow.com/questions/43042057/how-do-i-capture-match-groups-of-alternation-of-a-regular-expression-with-split/43042232#43042232", "title": "How do I capture match-groups of alternation of a regular expression with split?", "body": "<p>Use \"empty string followed by an exclamation mark or empty string preceded by an exclamation mark\" in place of your second alternative:</p>\n\n<pre><code>my @parts = split /#|(?=!)|(?&lt;=!)/, $foo;\n</code></pre>\n\n<p>Demo: <a href=\"https://ideone.com/6pA1wx\" rel=\"nofollow noreferrer\">https://ideone.com/6pA1wx</a></p>\n"}, {"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 5, "last_activity_date": 1490606284, "creation_date": 1490606284, "answer_id": 43042430, "question_id": 43042057, "link": "https://stackoverflow.com/questions/43042057/how-do-i-capture-match-groups-of-alternation-of-a-regular-expression-with-split/43042430#43042430", "title": "How do I capture match-groups of alternation of a regular expression with split?", "body": "<p>When you use <code>split</code>, you may not omit the empty captures once a match is found (as there are always as many captures in the match as there are defined in the regular expression). You may use a <em>matching</em> approach here, though:</p>\n\n<pre><code>my @parts = $foo =~ /[^!#]+|!/g;\n</code></pre>\n\n<p>This way, you will match 1 or more chars other than <code>!</code> and <code>#</code> (with <code>[^!#]+</code> alternative), or an exclamation mark, multiple times (<code>/g</code>).</p>\n"}], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 1, "accepted_answer_id": 43042430, "answer_count": 2, "score": 5, "last_activity_date": 1490606284, "creation_date": 1490605293, "last_edit_date": 1490605608, "question_id": 43042057, "link": "https://stackoverflow.com/questions/43042057/how-do-i-capture-match-groups-of-alternation-of-a-regular-expression-with-split", "title": "How do I capture match-groups of alternation of a regular expression with split?", "body": "<p>I have a string</p>\n\n<pre><code>my $foo = 'one#two#three!four#five#six';\n</code></pre>\n\n<p>from which I want to extract the parts that are seperated by either a <code>#</code> or a <code>!</code>. This is easy enough with <code>split</code>:</p>\n\n<pre><code>my @parts = split /#|!/, $foo;\n</code></pre>\n\n<p>An additional requirement is that I also need to capture the exclamation marks. So I tried</p>\n\n<pre><code>my @parts = split /#|(!)/, $foo;\n</code></pre>\n\n<p>This however returns either an <code>undef</code> value or the exclamation mark (which is also clearly stated in the specification of split).</p>\n\n<p>So, I weed out the unwanted <code>undef</code> values with <code>grep</code>:</p>\n\n<pre><code>my @parts = grep { defined } split /#|(!)/, $foo;\n</code></pre>\n\n<p>This does what I want.</p>\n\n<p>Yet I was wondering if I can change the regular expression in a way so that I don't have to also invoke <code>grep</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1490600591, "post_id": 43040518, "comment_id": 73165673, "body": "Looks like you have a relative path that doesn&#39;t fit"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1490600652, "post_id": 43040518, "comment_id": 73165713, "body": "What OS are you running, I can see it is unix based, but is it Redhat, Suse, etc? the error is pretty specific, so how are you passing the path?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 1, "creation_date": 1490601406, "post_id": 43040518, "comment_id": 73166146, "body": "I ran the script and it is not giving me errors because I am passing it the correct paths. Show how you are you running the script? send full command as you run it."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490604241, "post_id": 43040518, "comment_id": 73167796, "body": "I am running this script in unix machine only. Even I am also passing correct paths, but still the file is not able to open."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490604577, "post_id": 43040518, "comment_id": 73168018, "body": "sub count {         $path=&quot;$_[0]/$_[1]&quot;;          #$file=&quot;$_[0]&quot;;         #my $filepath = &quot;$path/$file&quot;;         open FILE, &quot;&lt;&quot;, $path or die &quot;$!:$path&quot;;         while (my $line = &lt;FILE&gt;)         {                 chomp $line;                 $a_lines{$line} = undef;                 $count1=$count1+1;         }         print &quot;$count1&quot; } $file=&quot;Fundamental.FinancialLineItem.FinancialLineItem.SelfS&zwnj;&#8203;ourcedPublic.SHE.1.2&zwnj;&#8203;017-01-11-2259.Full.&zwnj;&#8203;txt&quot;; $path=&quot;/hadoop/user/m6034690/Kishore/inputFiles/&quot;; count($path,$file) ==&gt;I have written this small script to verify the path."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490604600, "post_id": 43040518, "comment_id": 73168035, "body": "I have written this small script to verify whether the path is correctly taking or not. With this script I can able to do open a file but I am not understanding why the file is not opening with my main script."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490604827, "post_id": 43040518, "comment_id": 73168193, "body": "Here is the execution                                      m6034690@cmp111zbk:~/Kishore&gt; perl Practice_Dubugg.pl -i /hadoop/user/m6034690/Kishore/inputFiles -o /hadoop/user/m6034690/Kishore/outputFiles 0 Couldn&#39;t open /hadoop/user/m6034690/Kishore/inputFiles/Fundamental.Financi&zwnj;&#8203;alLineItem.Financial&zwnj;&#8203;LineItem.SelfSourced&zwnj;&#8203;Public.SHE.1.2017-01&zwnj;&#8203;-11-2259.Full.txt : No such file or directory at Practice_Dubugg.pl line 40."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1490606954, "post_id": 43040518, "comment_id": 73169679, "body": "ok, but you are not specifying a filename, just inputFiles and outputFiles directories?"}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490607585, "post_id": 43040518, "comment_id": 73170102, "body": "I am taking the filename from subroutine by passing as an arguments"}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490607683, "post_id": 43040518, "comment_id": 73170168, "body": "I am giving the paths as directories and from there i am finding the matched files from for loop and passing those two files to sub routine"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490612294, "post_id": 43040518, "comment_id": 73173168, "body": "Don&#39;t use <code>ls</code> from Perl. <code>my @ifiles = glob &quot;$inputFilesPath&#47;*&quot;</code> is the better way of doing this and also fixes your problem."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490925052, "post_id": 43040518, "comment_id": 73340443, "body": "Thanks Borodin. This worked fine for me. I need one more help. Right now the above script is able to compare around 9GB to 10GBfiles. But I wanted to compare with very big files like more than 40GB.When I try to run my script with these big file my script has been killed automatically. can you give any suggestion how to improve the performance."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 1, "creation_date": 1490608891, "post_id": 43043128, "comment_id": 73171051, "body": "Wow...great Gerry. It worked fine for me now. Thanks a lot. I couldn&#39;t find that issue."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490609927, "post_id": 43043128, "comment_id": 73171760, "body": "pleasure man. it is simple really. the <code>ls</code> is creating each resukt with a <code>\\n</code> character and chomp is removing it."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490873055, "post_id": 43043128, "comment_id": 73312070, "body": "Hey Gerry, I need one more help. I am comparing two very big files like the size is 40GB each. While running my script it has been killed automatically. Can you help how to improve the performance to run such big files with my script."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490878942, "post_id": 43043128, "comment_id": 73316447, "body": "@nmkishore, I think you should consider <code>sort</code> and read both files simultaneously and comparing them on the fly."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490924790, "post_id": 43043128, "comment_id": 73340377, "body": "Right now the above script is able to compare around 9GB to 10GBfiles. But I wanted to compare with very big files like more than 50GB. Even sorting may take more time to sort the both files. Is there any alternative. Please suggest."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490940523, "post_id": 43043128, "comment_id": 73344836, "body": "I think the biggest problem here is that you are pushing results to hash which will use memory. so by sorting you will be able to do something more simple and reading line by line from both files matching each. this means you will never have more than 2 strings in memory."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1490945332, "post_id": 43043128, "comment_id": 73347335, "body": "Can you provide an example code snippet so that I can modify my script accordingly."}, {"owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1491199441, "post_id": 43043128, "comment_id": 73428364, "body": "Hi Gerry, even while sorting also the entire file will be taken into memory, in that case also the script fails right?. Can you explain how to sort the huge file(50GB)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "edited": false, "score": 0, "creation_date": 1491201010, "post_id": 43043128, "comment_id": 73428967, "body": "post a new question and I will answer there. I will keep an eye on the new posts now."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": true, "score": 0, "last_activity_date": 1491287585, "last_edit_date": 1491287585, "creation_date": 1490608139, "answer_id": 43043128, "question_id": 43040518, "link": "https://stackoverflow.com/questions/43040518/getting-an-error-as-no-such-file-or-directory-in-perl/43043128#43043128", "title": "Getting an error as &quot;No such file or directory&quot; in perl", "body": "<p>try by adding the following lines after te below comment.</p>\n\n<pre><code>my $afile=\"$_[0]\";\nmy $bfile=\"$_[1]\";\nmy $path1=\"$inputFilesPath/$afile\";\nmy $path2=\"$outputFilesPath/$bfile\";\n\n#comment, add the below chomps right under the above portion.\nchomp $path1;\nchomp $path2;\n</code></pre>\n\n<p>My test works as the path is now properly formatted.</p>\n\n<p>my result:</p>\n\n<pre><code>File1 records count : 1\nFile2 records count : 1\nTotal mismatching/unavailable records in file1 : 1\n</code></pre>\n\n<p>It took a while to figure this issue out, but it was a bit confusing as the script says usage is <code>-i INPUTFILE</code> and <code>-o OUTPUTFILE</code></p>\n\n<p>This tells me I should add a file path and not path to folders, but regardless, issue should be resolved.</p>\n\n<p>Edit:\nan even better option, We should add the chomp where the <code>ls</code> occurs.</p>\n\n<pre><code>chomp( my @ifiles=`ls $inputFilesPath` );\nchomp( my @ofiles=`ls $outputFilesPath` );\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7597888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60d502da344d1e5075d853c08683171?s=128&d=identicon&r=PG&f=1", "display_name": "nmkishore", "link": "https://stackoverflow.com/users/7597888/nmkishore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 1, "accepted_answer_id": 43043128, "answer_count": 1, "score": 0, "last_activity_date": 1555154862, "creation_date": 1490600435, "last_edit_date": 1555154862, "question_id": 43040518, "link": "https://stackoverflow.com/questions/43040518/getting-an-error-as-no-such-file-or-directory-in-perl", "title": "Getting an error as &quot;No such file or directory&quot; in perl", "body": "<p>Here is my code, I am passing the files with subroutine. From subroutine i am not able to open the file. and it is throwing an error a</p>\n\n<blockquote>\n  <p>\"Couldn't open\n  inputFiles/Fundamental.FinancialLineItem.FinancialLineItem.SelfSourcedPublic.SHE.1.2017-01-11-2259.Full.txt\n  : No such file or directory at Practice_Dubugg.pl line 40.\"</p>\n</blockquote>\n\n<pre><code>    use strict;\nuse warnings;\nuse Getopt::Std;\nuse FileHandle;\n\nmy %opts;\nmy $optstr = \"i:o:\";\ngetopts(\"$optstr\", \\%opts);\nif($opts{i} eq '' || $opts{o} eq '' )\n{\n        print \"usage: perl TextCompare_Fund.pl &lt;-i INPUTFILE&gt; &lt;-o MAPREDUCE OUTPUTFILE&gt;\\n\";\n        die 1;\n}\nmy $inputFilesPath=$opts{i};\nmy $outputFilesPath=$opts{o};\nmy @ifiles=`ls $inputFilesPath`;\nmy @ofiles=`ls $outputFilesPath`;\nforeach my $ifile (@ifiles)\n{\n    my $ifile_substr=substr(\"$ifile\",0,-25);\n    foreach my $ofile (@ofiles)\n    {\n        my $ofile_substr=substr(\"$ofile\",0,-21);\n        my $result=$ifile_substr cmp $ofile_substr;\n        if($result eq 0)\n        {\n            print \"$result\\n\";\n            #print \"$ifile\\n\";\n            compare($ifile,$ofile)\n        }\n    }\n}\nsub compare\n{\n    my $afile=\"$_[0]\";\n    my $bfile=\"$_[1]\";\n    my $path1=\"$inputFilesPath/$afile\";\n    my $path2=\"$outputFilesPath/$bfile\";\n    #open FILE, \"&lt;\", $path1 or die \"$!:$path1\";\n    open my $infile, \"&lt;\", $path1 or die \"Couldn't open $path1: $!\";\n    my %a_lines;\n    my %b_lines;\n    my $count1=0;\n    while (my $line = &lt;$infile&gt;) \n    {\n        chomp $line;\n        $a_lines{$line} = undef;\n        $count1=$count1+1;\n    }\n    print\"File1 records count : $count1\\n\";\n    close $infile;\n    my $file=substr(\"$afile\",0,-25);\n    my $OUTPUT = \"/hadoop/user/m6034690/Kishore/$file.comparision_result\";\n    open my $outfile, \"&lt;\", $path2 or die \"Couldn't open $path2: $!\";\n    open (OUTPUT, \"&gt;$OUTPUT\") or die \"Cannot open $OUTPUT \\n\";\n\n    my $count=0;\n    my $count2=0;\n    while (my $line = &lt;$outfile&gt;) \n    {\n        chomp $line;\n        $b_lines{$line} = undef;\n        $count2=$count2+1;\n        next if exists $a_lines{$line};\n        $count=$count+1;\n        print OUTPUT \"$line \\t===&gt; The Line which is selected from file2/arg2 is mismatching/not available in file1\\n\";\n    }   \n    print \"File2 records count : $count2\\n\";\n    print \"Total mismatching/unavailable records in file1 : $count\\n\";\n    close $outfile;\n    close OUTPUT;\n}\n</code></pre>\n"}, {"tags": ["perl", "file-moving"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 2, "creation_date": 1490600431, "post_id": 43040489, "comment_id": 73165562, "body": "Post your code."}, {"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1490600983, "post_id": 43040489, "comment_id": 73165921, "body": "you could probably check whether the file exists in the new location after the loop."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490603619, "post_id": 43040489, "comment_id": 73167451, "body": "It&#39;s too vague to give you an answer. What you need is some sort of lock mechanism, like <code>flock</code> -"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490635480, "post_id": 43040489, "comment_id": 73189810, "body": "Is the problem that you are seeing a partial file? If so, move using <code>rename</code> since it happens atomically. If you can&#39;t use <code>rename</code>, <code>move</code> the file to a temporary directory from which you can <code>rename</code>, then use <code>rename</code>."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490602909, "post_id": 43041051, "comment_id": 73167014, "body": "That&#39;s not as good as it sounds - a really large file will exist, but only be partially written."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1490603581, "post_id": 43041051, "comment_id": 73167421, "body": "@TheAdam, Correct yes. I updated it to instead test original file"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 0, "last_activity_date": 1490603591, "last_edit_date": 1490603591, "creation_date": 1490602230, "answer_id": 43041051, "question_id": 43040489, "link": "https://stackoverflow.com/questions/43040489/how-to-check-if-moving-a-file-is-finished-in-perl/43041051#43041051", "title": "How to check if moving a file is finished in perl?", "body": "<pre><code>sleep 1 while -e $original_filename;\n</code></pre>\n\n<p>There are numerous options and even an infinite while option, but you need to format the code in order to ensure you do not put the script in a permanent loop if the file will never exist.</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "edited": false, "score": 0, "creation_date": 1490606821, "post_id": 43041629, "comment_id": 73169588, "body": "Yes. Move the file to <code>your_file_name.in_progress</code>. When the move has finished, rename it to <code>your_file_name</code>. Note that moves as long as you&#39;re on the same file system are usually pretty much instantaneous - as it&#39;s just updating the directory table rather than actually moving data around."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1490604745, "last_edit_date": 1490604745, "creation_date": 1490604018, "answer_id": 43041629, "question_id": 43040489, "link": "https://stackoverflow.com/questions/43040489/how-to-check-if-moving-a-file-is-finished-in-perl/43041629#43041629", "title": "How to check if moving a file is finished in perl?", "body": "<p>Three common approaches.</p>\n\n<ol>\n<li>Monitor the file size. Assume the file is complete when the size hasn't changed for X seconds. Non-trivial to implement and prone to errors.</li>\n<li>Upload a marker file <strong>after</strong> the moved file is complete. Check for the existence of the marker rather than the original file.</li>\n<li>Copy the file using a different name. Rename it once the transfer is complete.</li>\n</ol>\n"}], "owner": {"reputation": 79, "user_id": 7637846, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65cedf5b34239b72e08f1e6733e1dabf?s=128&d=identicon&r=PG&f=1", "display_name": "TheAdam122", "link": "https://stackoverflow.com/users/7637846/theadam122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 43041629, "answer_count": 2, "score": -2, "last_activity_date": 1490604745, "creation_date": 1490600334, "question_id": 43040489, "link": "https://stackoverflow.com/questions/43040489/how-to-check-if-moving-a-file-is-finished-in-perl", "title": "How to check if moving a file is finished in perl?", "body": "<p>I have a Perl script that moves files into folders. Every time it runs it checks the filenames in the folders. But if I have a bigger file it might not be ready with the moving when it checks the filenames, and it really can mess up stuff. I would like to stop at the end of the loop and check that the moving is finished, before it continues. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1490591900, "post_id": 43038403, "comment_id": 73161827, "body": "Read <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">Command switches in perlrun</a>"}, {"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 1, "creation_date": 1490591931, "post_id": 43038403, "comment_id": 73161834, "body": "<a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlrun.html</a>"}, {"owner": {"reputation": 1092, "user_id": 1820424, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62c66025eb107cbd96e4d285847074c2?s=128&d=identicon&r=PG&f=1", "display_name": "uzr", "link": "https://stackoverflow.com/users/1820424/uzr"}, "edited": false, "score": 0, "creation_date": 1490592030, "post_id": 43038403, "comment_id": 73161866, "body": "I believe your question is answered here <a href=\"http://stackoverflow.com/questions/6302025/perl-flags-pe-pi-p-w-d-i-t\" title=\"perl flags pe pi p w d i t\">stackoverflow.com/questions/6302025/perl-flags-pe-pi-p-w-d-i&zwnj;&#8203;-t</a>"}, {"owner": {"reputation": 195, "user_id": 6159321, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/92602372d8e9324d16527e5e2a2a63f0?s=128&d=identicon&r=PG&f=1", "display_name": "vaishali", "link": "https://stackoverflow.com/users/6159321/vaishali"}, "edited": false, "score": 0, "creation_date": 1490592597, "post_id": 43038403, "comment_id": 73162053, "body": "No, I am asking about capital i option. I have seen the link that you have give but i did not get solution from that link."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490593232, "post_id": 43038403, "comment_id": 73162268, "body": "@vaishali  Is there a problem with looking at <i>Perl documentation</i> that I linked for you in the first comment?  It&#39;s right there."}, {"owner": {"reputation": 195, "user_id": 6159321, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/92602372d8e9324d16527e5e2a2a63f0?s=128&d=identicon&r=PG&f=1", "display_name": "vaishali", "link": "https://stackoverflow.com/users/6159321/vaishali"}, "edited": false, "score": 0, "creation_date": 1490601502, "post_id": 43038403, "comment_id": 73166199, "body": "sorry now only I have found this. Thank you ."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1490593235, "creation_date": 1490593235, "answer_id": 43038668, "question_id": 43038403, "link": "https://stackoverflow.com/questions/43038403/what-is-the-use-i-option-in-perl/43038668#43038668", "title": "What is the use -I option in perl", "body": "<p><code>-I</code> includes a directory to search for packages.  See <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perldoc perlrun</a>.</p>\n\n<p>Here is an example, notice that we <code>use Bar</code> instead of <code>use Foo::Bar</code>:</p>\n\n<pre><code>test.pl\nFoo/Bar.pm\n</code></pre>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl -I Foo\n\nuse warnings;\nuse strict;\n\nuse Bar qw( frobnicate ); # Foo/Bar.pm\n\nmy $output =  frobnicate('hello');\nprint $output . \"\\n\";\n</code></pre>\n\n<p><strong>Foo/Bar.pm</strong></p>\n\n<pre><code>package Bar;\nrequire Exporter;\n@ISA = qw(Exporter);\n@EXPORT_OK = qw(munge frobnicate);  # symbols to export on request\n1;\n\nsub munge {\n    my ($txt) = @_;\n    return join '*', sort split //, $txt;\n}\n\nsub frobnicate {\n    my ($txt) = @_;\n    return join '....', sort split //, $txt;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>./test.pl\ne....h....l....l....o\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": true, "score": 2, "last_activity_date": 1490596698, "last_edit_date": 1490596698, "creation_date": 1490595325, "answer_id": 43039103, "question_id": 43038403, "link": "https://stackoverflow.com/questions/43038403/what-is-the-use-i-option-in-perl/43039103#43039103", "title": "What is the use -I option in perl", "body": "<p>There is a problem with your question, not the fact that you are just asking a researchable question, but the fact that you specify file_name in:</p>\n\n<pre><code>#!/usr/bin/perl -I file_name\n</code></pre>\n\n<p>the above is incorrect as -I searches a given directory for packages and you are specifiying a filename. The below switches will work, but each performs a different function.</p>\n\n<pre><code>#!/usr/bin/perl -i file_name\n#!/usr/bin/perl -I DIR\n</code></pre>\n\n<p>There is a difference between <code>-i</code> and <code>-I</code> in perl.</p>\n\n<p>So short answer:</p>\n\n<p>-i: Modifies your input file in-place (making a backup of the\n    original). Handy to modify files without the {copy,\n    delete-original, rename} process. </p>\n\n<p>-I: Directories specified by -I are prepended to the search path for modules (@INC )</p>\n\n<p>Source of more detail <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a></p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 6159321, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/92602372d8e9324d16527e5e2a2a63f0?s=128&d=identicon&r=PG&f=1", "display_name": "vaishali", "link": "https://stackoverflow.com/users/6159321/vaishali"}, "is_accepted": false, "score": 0, "last_activity_date": 1490614199, "creation_date": 1490614199, "answer_id": 43045204, "question_id": 43038403, "link": "https://stackoverflow.com/questions/43038403/what-is-the-use-i-option-in-perl/43045204#43045204", "title": "What is the use -I option in perl", "body": "<p>We can also find the short description of perl command line options using the below command. So there is no necessary to install perldoc.</p>\n\n<pre><code>perl --help \n</code></pre>\n\n<p>The above command gives an short description of each options which are may not find in man pages.</p>\n"}], "owner": {"reputation": 195, "user_id": 6159321, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/92602372d8e9324d16527e5e2a2a63f0?s=128&d=identicon&r=PG&f=1", "display_name": "vaishali", "link": "https://stackoverflow.com/users/6159321/vaishali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1239, "favorite_count": 1, "accepted_answer_id": 43039103, "answer_count": 3, "score": -1, "last_activity_date": 1490614199, "creation_date": 1490591730, "last_edit_date": 1490601376, "question_id": 43038403, "link": "https://stackoverflow.com/questions/43038403/what-is-the-use-i-option-in-perl", "title": "What is the use -I option in perl", "body": "<p>In perl program I have found this line <code>#!/usr/bin/perl -I Directory_name</code> \nSo I searched in net about the option <code>-I</code> in perl but i have not find the correct explaination.Can anyone tell me that what is the use of this option?</p>\n"}, {"tags": ["perl", "vlsi", "netlist"], "comments": [{"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 2, "creation_date": 1490589212, "post_id": 43037970, "comment_id": 73161103, "body": "first element is a scalar try <code>$name_gate[0]</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490590364, "post_id": 43037970, "comment_id": 73161449, "body": "Always have <code>use warnings;</code> and <code>use strict;</code> at the beginning of all programs.  With warnings on you would get <code>Scalar value @ary[0] better written as $ary[0] at ...</code>"}, {"owner": {"reputation": 1, "user_id": 5479018, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zG1mn-jKd6s/AAAAAAAAAAI/AAAAAAAAAFw/Um6siSaEFyE/photo.jpg?sz=128", "display_name": "Blackwind", "link": "https://stackoverflow.com/users/5479018/blackwind"}, "edited": false, "score": 0, "creation_date": 1490590379, "post_id": 43037970, "comment_id": 73161451, "body": "No,it prints out the same thing as before all elements of 1st column."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1490590551, "post_id": 43037970, "comment_id": 73161501, "body": "You get all of the elements of the 1st column because you are iterating over all of the lines in your file.  Isn&#39;t that what you want?  Or do you really just want the first element from the first line?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1490590719, "post_id": 43037970, "comment_id": 73161547, "body": "Please show a few lines of input.  But please not a picture, but rather edit the question and copy and paste them at the end."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490601477, "post_id": 43037970, "comment_id": 73166185, "body": "Without seeing your input file, it&#39;s impossible to do anything but guess here. Your code looks fine (well, other than using <code>@name_gate[0]</code> instead of <code>$name_gate[0]</code> which won&#39;t cause the behaviour you describe) so I suspect the problem is that your data isn&#39;t quite what you think. Two obvious possibilities: the line end characters are from a different operating system or the field separators aren&#39;t single spaces."}], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 3, "last_activity_date": 1490599007, "last_edit_date": 1490599007, "creation_date": 1490597076, "answer_id": 43039526, "question_id": 43037970, "link": "https://stackoverflow.com/questions/43037970/data-extraction-from-netlist-line-by-line-using-perl/43039526#43039526", "title": "Data extraction from netlist line by line using perl", "body": "<p><code>@name_gate[0]</code> it is not a main problem. Because with warnings <code>(Scalar value @ary[0] better written as $ary[0] at)</code> it will give the result. </p>\n\n<p>I thought your problem is in <code>split</code>. Because your input file having multiple spaces or tab separated.\n So please include <code>\\s+</code> or better use <code>\\t</code>. You will get the result.</p>\n\n<blockquote>\n  <p>Then always put <strong>use warnings</strong> and <strong>use strict</strong> in top of the program,</p>\n</blockquote>\n\n<pre><code>while (my $line = &lt;$fh&gt;) \n{\n     chomp $line;\n\n      #my @name_gate = split (/ /,$line); #transforming string into arrays\n\n      my @name_gate = split (/\\s+/,$line);\n\n      #print \"@name_gate[0]\\n\";\n\n      print \"$name_gate[0]\\n\";\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5479018, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zG1mn-jKd6s/AAAAAAAAAAI/AAAAAAAAAFw/Um6siSaEFyE/photo.jpg?sz=128", "display_name": "Blackwind", "link": "https://stackoverflow.com/users/5479018/blackwind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490599007, "creation_date": 1490588996, "last_edit_date": 1490589651, "question_id": 43037970, "link": "https://stackoverflow.com/questions/43037970/data-extraction-from-netlist-line-by-line-using-perl", "title": "Data extraction from netlist line by line using perl", "body": "<p>My question is regarding extraction of data from a file in Perl. In the attached file there is standard format of net list. After running the program I got the elements into an array <code>@name_gate</code> but when I tried to <code>print @name_gate[0]</code> instead of the 1st element, I got the whole first column, similarly for <code>@name_gate[1]</code>, the second column.</p>\n\n<p>So the problem is I have again got a string in <code>@name_gate[0]</code> which I want to access element by element.</p>\n\n<pre><code>my @ind;\nmy $index=0;\nmy $file = 'netlist.txt';\nmy $count=0;\nmy @name_gate;\nopen my $fh,'&lt;',$file or die \"could not open the file '$file' $!\";\n\nwhile (my $line = &lt;$fh&gt;) \n     {\n         chomp $line;\n         @name_gate = split (/ /,$line); #transforming string into arrays\n\n         print \"@name_gate[0]\";\n     }\n</code></pre>\n\n<p>The above code prints the whole column \n1 2 3 4 up to 14.  How can I extract a single element like 1 or 2 or 14 etc. Here is the current <a href=\"https://i.stack.imgur.com/Pi9ou.png\" rel=\"nofollow noreferrer\">output</a></p>\n"}, {"tags": ["perl", "sed", "replace"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1490541999, "post_id": 43030435, "comment_id": 73146862, "body": "Use an XML/HTML parser (xmllint, xmlstarlet ...)."}, {"owner": {"reputation": 11, "user_id": 6889174, "user_type": "registered", "profile_image": "https://graph.facebook.com/606011868/picture?type=large", "display_name": "Richard Osborne", "link": "https://stackoverflow.com/users/6889174/richard-osborne"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1490542825, "post_id": 43030435, "comment_id": 73147168, "body": "Can you point me towards a tutorial so I can figure out how I can solve this problem.  Thanks"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1490544291, "post_id": 43030435, "comment_id": 73147691, "body": "Questions asking to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Sorry."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1490562775, "post_id": 43030435, "comment_id": 73154542, "body": "<a href=\"http://p3rl.org/HTML::Scrubber\" rel=\"nofollow noreferrer\">p3rl.org/HTML::Scrubber</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6889174, "user_type": "registered", "profile_image": "https://graph.facebook.com/606011868/picture?type=large", "display_name": "Richard Osborne", "link": "https://stackoverflow.com/users/6889174/richard-osborne"}, "edited": false, "score": 0, "creation_date": 1490547293, "post_id": 43031231, "comment_id": 73148915, "body": "This helps, but when there are multiple instances per line I get this  &quot;Total&lt;/span&gt; TASK-HR&lt;/span&gt; is the&lt;/span&gt; tine&lt;/span&gt; needed to do &lt;span style=&quot;letter-spacing:1.02 px&quot;&gt;all &lt;span style=&quot;letter-spacing:0.32 px&quot;&gt;services &lt;span style=&quot;letter-spacing:0.54 px&quot;&gt;(on-condition or&quot;"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 11, "user_id": 6889174, "user_type": "registered", "profile_image": "https://graph.facebook.com/606011868/picture?type=large", "display_name": "Richard Osborne", "link": "https://stackoverflow.com/users/6889174/richard-osborne"}, "edited": false, "score": 0, "creation_date": 1490548484, "post_id": 43031231, "comment_id": 73149366, "body": "All we have to go on is what you show us. You didn&#39;t show us an example with multiple instances on 1 line so YMMV with the answers you get. If the example in your question isn&#39;t truly representative of your real data then, obviously, edit your question so it is."}, {"owner": {"reputation": 11, "user_id": 6889174, "user_type": "registered", "profile_image": "https://graph.facebook.com/606011868/picture?type=large", "display_name": "Richard Osborne", "link": "https://stackoverflow.com/users/6889174/richard-osborne"}, "edited": false, "score": 1, "creation_date": 1490549995, "post_id": 43031231, "comment_id": 73149961, "body": "perfect.  Thank you"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": -1, "last_activity_date": 1490549725, "last_edit_date": 1490549725, "creation_date": 1490544869, "answer_id": 43031231, "question_id": 43030435, "link": "https://stackoverflow.com/questions/43030435/perl-to-strip-span-tags-around-words/43031231#43031231", "title": "perl to strip span tags around words", "body": "<p>Not exactly robust but does what you asked for given that 1 sample line you posted:</p>\n\n<pre><code>$ sed -E 's#&lt;span[^&gt;]+letter-spacing:[01][^&gt;]+&gt;(.*)&lt;/span&gt;#\\1#' file\n'Boulevard, '\n</code></pre>\n\n<p>The above will work in any sed that supports <code>-E</code> for EREs, e.g. GNU sed and OSX sed.</p>\n\n<p>Given your updated sample input/output, this will do what you want with GNU awk for multi-char RS and RT:</p>\n\n<pre><code>$ awk -v RS='&lt;/span&gt;' '{ORS=( sub(/&lt;span[^&gt;]+letter-spacing:[01][^&gt;]+&gt;/,\"\") ? \"\" : RT)}1' file\nPRODUCTS MODEL HPI-27C MODDED) ; (HIGHWAY PRODUCTS MODEL\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1490550232, "creation_date": 1490550232, "answer_id": 43032324, "question_id": 43030435, "link": "https://stackoverflow.com/questions/43030435/perl-to-strip-span-tags-around-words/43032324#43032324", "title": "perl to strip span tags around words", "body": "<p>Here is an example using Perl and <a href=\"https://metacpan.org/pod/HTML::Parser\" rel=\"nofollow noreferrer\"><code>HTML::Parser</code></a> :</p>\n\n<pre><code>use strict;\nuse warnings;\nuse HTML::Parser ();\nmy $delete_tag = 0;\n\nmy $p = HTML::Parser-&gt;new(\n    api_version =&gt; 3,\n    default_h =&gt; [sub { print shift }, 'text'],\n    start_h =&gt; [\\&amp;start_handler, 'tagname,text,attr'],\n    end_h =&gt; [\\&amp;end_handler, 'tagname,text'],    \n);\n\nmy $str = do { local $/; &lt;DATA&gt; };\n$p-&gt;parse($str) || die $!;\nprint \"\\n\";\n\nsub end_handler {\n    my ( $tag, $text ) = @_;\n    if ( $tag eq \"span\" ) {\n        if ($delete_tag) {\n            $delete_tag = 0;\n            return;\n        }\n    }\n    print $text;\n}\n\nsub start_handler {\n    my ( $tag, $text, $attr ) = @_;\n    if ( $tag eq \"span\" ) {\n        if ($attr-&gt;{style} =~ /letter-spacing:[01]\\./) {\n            $delete_tag = 1;\n            return;\n        }\n    }\n    print $text;\n}\n\n__DATA__\n&lt;span style=\"letter-spacing:1.33 px\"&gt;PRODUCTS&lt;/span&gt; &lt;span style=\"letter-spacing:1.37 px\"&gt;MODEL&lt;/span&gt; &lt;span style=\"letter-spacing:0.77 px\"&gt;HPI-27C&lt;/span&gt; &lt;span style=\"letter-spacing:1.39 px\"&gt;MODDED)&lt;/span&gt; ; &lt;span style=\"letter-spacing:1.12 px\"&gt;(HIGHWAY&lt;/span&gt; &lt;span style=\"letter-spacing:1.33 px\"&gt;PRODUCTS&lt;/span&gt; &lt;span style=\"letter-spacing:1.37 px\"&gt;MODEL&lt;/span&gt;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>PRODUCTS MODEL HPI-27C MODDED) ; (HIGHWAY PRODUCTS MODEL\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 0, "last_activity_date": 1490570074, "last_edit_date": 1490570074, "creation_date": 1490567911, "answer_id": 43035418, "question_id": 43030435, "link": "https://stackoverflow.com/questions/43030435/perl-to-strip-span-tags-around-words/43035418#43035418", "title": "perl to strip span tags around words", "body": "<p>Perl oneliners:</p>\n\n<p>1.) using the <a href=\"https://metacpan.org/pod/Mojo::DOM58\" rel=\"nofollow noreferrer\">Mojo::DOM58</a> module</p>\n\n<pre><code>perl -0777 -MMojo::DOM58 -E '$d=Mojo::DOM58-&gt;new(&lt;&gt;);$d-&gt;find(\"span\")-&gt;grep(qr/letter-spacing:[01]/)-&gt;map(sub{$_-&gt;strip});print \"$d\"' &lt;file.html\n</code></pre>\n\n<p>2.) Or if you have <a href=\"https://metacpan.org/release/Mojolicious\" rel=\"nofollow noreferrer\">Mojolicious</a> installed, you can use the <a href=\"https://metacpan.org/pod/ojo\" rel=\"nofollow noreferrer\">ojo</a> module as:</p>\n\n<pre><code>perl -Mojo -E '$d=x(f(\"file.html\")-&gt;slurp);$d-&gt;find(\"span\")-&gt;grep(qr/letter-spacing:[01]/)-&gt;map(sub{$_-&gt;strip});print \"$d\"'\n</code></pre>\n\n<p>both examples prints:</p>\n\n<pre><code>PRODUCTS MODEL HPI-27C MODDED) ; (HIGHWAY PRODUCTS MODEL\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6889174, "user_type": "registered", "profile_image": "https://graph.facebook.com/606011868/picture?type=large", "display_name": "Richard Osborne", "link": "https://stackoverflow.com/users/6889174/richard-osborne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 43031231, "answer_count": 3, "score": -2, "last_activity_date": 1490570074, "creation_date": 1490540770, "last_edit_date": 1490549453, "question_id": 43030435, "link": "https://stackoverflow.com/questions/43030435/perl-to-strip-span-tags-around-words", "title": "perl to strip span tags around words", "body": "<p>I'm trying to strip the span tags w/ a letter-spacing that starts with 0. or 1.</p>\n\n<pre><code>'&lt;span style=\"letter-spacing:0.50 px\"&gt;Boulevard,&lt;/span&gt; '\nto equal\n'Boulevard, '\n</code></pre>\n\n<p>Thank you</p>\n\n<p>Here's an example of a complete line.</p>\n\n<pre><code>&lt;span style=\"letter-spacing:1.33 px\"&gt;PRODUCTS&lt;/span&gt; &lt;span style=\"letter-spacing:1.37 px\"&gt;MODEL&lt;/span&gt; &lt;span style=\"letter-spacing:0.77 px\"&gt;HPI-27C&lt;/span&gt; &lt;span style=\"letter-spacing:1.39 px\"&gt;MODDED)&lt;/span&gt; ; &lt;span style=\"letter-spacing:1.12 px\"&gt;(HIGHWAY&lt;/span&gt; &lt;span style=\"letter-spacing:1.33 px\"&gt;PRODUCTS&lt;/span&gt; &lt;span style=\"letter-spacing:1.37 px\"&gt;MODEL&lt;/span&gt;\n</code></pre>\n\n<p>Needs to end up like</p>\n\n<p>PRODUCTS MODEL HPI-27C MODDED) ; (HIGHWAY PRODUCTS MODEL</p>\n"}, {"tags": ["perl", "curl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490529490, "post_id": 43026571, "comment_id": 73142692, "body": "I don&#39;t think this is possible with curl. I&#39;m unsure what you mean about doing it from the server side; if you have access to the server then you can do anything you like. Why not simply log in using <code>LWP</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490567741, "post_id": 43026571, "comment_id": 73156024, "body": "<code>-u</code> is only for basic authentication, which isn&#39;t applicable here (302 instead of 401 with specific headers). Most login scripts set a cookie that gives access to other pages. You would need to submit the user name and password to the login page, extract the cookie, and pass in the cookie along future requests. WWW::Mechanize facilitates this."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1490568799, "post_id": 43026571, "comment_id": 73156284, "body": "You definitely want <code>-L</code> to follow the redirect."}], "owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1490517786, "creation_date": 1490516349, "last_edit_date": 1490517786, "question_id": 43026571, "link": "https://stackoverflow.com/questions/43026571/using-curl-to-fetch-sso-enabled-page-content", "title": "Using curl to fetch SSO enabled page content", "body": "<p>I am trying to fetch the contents of confluence page by using curl hit from within a perl script. </p>\n\n<pre><code>print `curl -u username\\@random.com:password https://confluence.random.com/confluence/random/path`;\n</code></pre>\n\n<p>The page is protected behind a SSO page.\nThe confluence page redirects to a SSO page where it asks for the username/password.</p>\n\n<p>My sample output looks like this:</p>\n\n<pre><code>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   819  100   819    0     0   4803      0 --:--:-- --:--:-- --:--:--  138k\n\n    &lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt;\n    &lt;html&gt;&lt;head&gt;\n    &lt;title&gt;302 Redirect to SSO Server for login&lt;/title&gt;\n    &lt;/head&gt;&lt;body&gt;\n    &lt;h1&gt;Redirect to SSO Server for login&lt;/h1&gt;\n    &lt;p&gt;The requested resource has been temporarily moved &lt;a href=\"https://login.abcd.com:443/oam/server/osso_login?Site2pstoreToken=v1.2~EBB57BDE3BB174465E~C...\"&gt;here&lt;/a&gt;.&lt;/p&gt;\n    &lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>Any idea how to get around this restriction?</p>\n\n<p>Although I would prefer to do it on the server side - \nI have tried using JSONP approach for scraping the data from client side as well - however, this approach also didn't yield much.</p>\n"}, {"tags": ["perl", "http", "asynchronous", "concurrency", "download"], "comments": [{"owner": {"reputation": 23624, "user_id": 261122, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5fee24e0fe9be354c29696359bb71b38?s=128&d=identicon&r=PG", "display_name": "Dancrumb", "link": "https://stackoverflow.com/users/261122/dancrumb"}, "edited": false, "score": 2, "creation_date": 1490499636, "post_id": 43024722, "comment_id": 73136360, "body": "Where are you defining <code>$queue</code>?"}, {"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "reply_to_user": {"reputation": 23624, "user_id": 261122, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5fee24e0fe9be354c29696359bb71b38?s=128&d=identicon&r=PG", "display_name": "Dancrumb", "link": "https://stackoverflow.com/users/261122/dancrumb"}, "edited": false, "score": 0, "creation_date": 1490502900, "post_id": 43024722, "comment_id": 73136901, "body": "sorry, lost it. now fixed, thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490536094, "post_id": 43024722, "comment_id": 73144796, "body": "This code runs in just under four seconds on my system. The only difference is that I have used internet URLs that are accessible, as I get <code>503 Service Unavailable</code> from yours."}, {"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 0, "creation_date": 1490542918, "post_id": 43024722, "comment_id": 73147205, "body": "oh my glob. what is your OS and Perl? my is Debian 8.7 and Perl v5.20.2. also, a run this on both hardware and virtual box with same results... my urls are 503 cause them are from my intranet."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 2, "creation_date": 1490555596, "post_id": 43024722, "comment_id": 73151996, "body": "The <code>keep-alive</code> isn&#39;t always the friend of the web-scraper. Think what is the difference running <code>10 x curl</code> in parallel using <code>xargs -P...</code> and when you will use <code>Net::Async::HTTP</code> (which using the <code>keep-alive</code> by default) and the server is slow in response rate for the given connection."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490563034, "post_id": 43024722, "comment_id": 73154626, "body": "@berrymorr: <i>&quot;what is your OS and Perl?&quot;</i> That was running Strawberry Perl v5.24.0 on WIndows 10 Professional. Can you show your timing output please?"}, {"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490674356, "post_id": 43024722, "comment_id": 73205230, "body": "@Borodin: I replaced my intranet urls with the internet ones to be in same circumstances with others: <a href=\"https://pastebin.com/VyhMEB3w\" rel=\"nofollow noreferrer\">pastebin.com/VyhMEB3w</a> Here is timings: <a href=\"https://pastebin.com/kD5h2pQa\" rel=\"nofollow noreferrer\">pastebin.com/kD5h2pQa</a>"}, {"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490674834, "post_id": 43024722, "comment_id": 73205367, "body": "@jm666, maybe it&#39;s a lil bit dumby question, but how can I disable keep-alive with Net::Async::HTTP? Dunno how remove header, set by default"}, {"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 0, "creation_date": 1490675832, "post_id": 43024722, "comment_id": 73205627, "body": "Also, this is not quite web-scrapper - this is some variation of REST client with GUI, and it&#39;s time critical to load data asap, so, I decided to use async load where it&#39;s possible. Typical set is two-three dozens of urls, about dozens kBs per url. Maybe it could be helpful - maybe I&#39;m doing something wrong by design?.."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1490681772, "post_id": 43024722, "comment_id": 73207879, "body": "@berrymorr added an &quot;answer&quot; for some demo, how me tried your script. Unfortunately, me is still an perl beginner so, i don&#39;t know :( how to disable the keep-alive."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 1, "creation_date": 1491121829, "post_id": 43024722, "comment_id": 73406735, "body": "Added a good bit to my answer, as I have by now tried  all I can think of with <code>HTTP::Async</code>.  (This included dropping <code>keep-alive</code> per @jm666 suggestion, but to no benefit.)"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 2, "creation_date": 1490716724, "post_id": 43061885, "comment_id": 73232286, "body": "So, I finally installed Wireshark! ;) And found that <b>HTTP::Async sends <i>Connection: close</i></b>, and <b>Net::Async::HTTP sends <i>Connection: keep-alive</i></b>. Important thing is that I used <code>$http-&gt;do_request( request =&gt; $request, headers =&gt; [&#39;Connection&#39; =&gt; &#39;close&#39;] )</code> with <i>Net::Async::HTTP</i>, just <a href=\"http://search.cpan.org/~pevans/Net-Async-HTTP-0.41/lib/Net/Async/HTTP.pm#%24response_=_%24http-%3Edo_request(_%args_)-%3Eget\" rel=\"nofollow noreferrer\">as documented</a>, but without any result. <i>HTTP::Async</i> still 2 times faster than <i>Net::Async::HTTP</i>. So common case goes jolly bad show!.."}, {"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 1, "creation_date": 1490717348, "post_id": 43061885, "comment_id": 73232711, "body": "So, now I&#39;m going to try <a href=\"http://search.cpan.org/~crisb/WWW-Curl-3.02/lib/WWW/Curl/Multi.pm\" rel=\"nofollow noreferrer\">WWW::Curl::Multi</a> and <a href=\"http://search.cpan.org/~syohex/Furl-3.09/lib/Furl.pm\" rel=\"nofollow noreferrer\">Furl</a>, but the last one has no concurrency and needs reinventing my own bicycle. Btw, looks like there is some useful info <a href=\"http://www.perlmonks.org/?node_id=901638\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 3, "creation_date": 1490717829, "post_id": 43061885, "comment_id": 73233054, "body": "@berrymorr when you got an solution which works for you, please, add it as an answer here. (You can answer, your own question). :) It could be great help for other users."}, {"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 0, "creation_date": 1490795785, "post_id": 43061885, "comment_id": 73272417, "body": "ofcourse!) So, some news: I tried <i>Net::Async::HTTP</i> on win7/active perl v5.24.1 and got the same illy concurrent results. Also I tried <i>HTTP::Async</i>, but it just shows me empy console and perl never returns. Other libs them can not install. Also tried <a href=\"http://www.perlmonks.org/?node_id=1161866\" rel=\"nofollow noreferrer\">Net::Curl::Multi</a> on Debian - got even 30s for internet urls list from above. I&#39;m about desperation, wtf?!"}, {"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 0, "creation_date": 1490799343, "post_id": 43061885, "comment_id": 73275541, "body": "At last, good news: looks like that <a href=\"https://pastebin.com/teAhXPmK\" rel=\"nofollow noreferrer\">Furl with threads</a> is fast enough, but the code is not parallel downloader, it&#39;s something like <i>siege</i> in Perl. Also, mommy told me do not use threads with Perl. So, it&#39;s too early to celebrate, but it&#39;s the first real concurrent something. Hope some later I&#39;ll post the solution."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 1, "creation_date": 1490801000, "post_id": 43061885, "comment_id": 73276854, "body": "This question deserves more attention. :) Going to add some bounty."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491334211, "post_id": 43061885, "comment_id": 73503517, "body": "This is a whole truck-load of tools to look into! :)  Didn&#39;t wrap my mind around it yet but it is nteresting.  Do you recommend <code>Plack</code> for regular use (over the competing frameworks)?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491335467, "post_id": 43061885, "comment_id": 73504229, "body": "@zdim In short: no. :) But, you should to use any <a href=\"https://metacpan.org/pod/distribution/PSGI/PSGI.pm\" rel=\"nofollow noreferrer\">PSGI</a> compliant framework. The <code>Plack</code> is &quot;only&quot; the reference implementation of the PSGI. On the CPAN you will find (too) many :) Plack based frameworks - which one - is a personal taste. My favorite is <code>Poet&#47;Mason</code>. Others love <code>Dancer2</code>. Even the big-gun Catalyst is PSGI compatible. Of course, usually the PSGI-app is behind <code>nginx</code> - it is good for serving static files and acting as an SSL endpoint."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491335493, "post_id": 43061885, "comment_id": 73504244, "body": "@zdim Here me used the very simple Plack-app (runnung using Starman) only because wanted an simple reference server for testing. Also remember, me is only perl-beginner, better to ask  someone with more knowledge. :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491335887, "post_id": 43061885, "comment_id": 73504453, "body": "Oh ... thank you for the explanation and for the example! Something to work on for me :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491386142, "post_id": 43061885, "comment_id": 73525405, "body": "Some &quot;beginner&quot; :)  Dumped a web server here, just so :)  Thank you for the example, plenty to work through."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491388042, "post_id": 43061885, "comment_id": 73526788, "body": "@zdim me not kidding with the beginner. Having serious problems to understand some of perl answers in SO.  The answers here are really good source for learning. But, thanx :)"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 4, "last_activity_date": 1490682534, "last_edit_date": 1490682534, "creation_date": 1490681677, "answer_id": 43061885, "question_id": 43024722, "link": "https://stackoverflow.com/questions/43024722/perl-too-slow-concurrent-download-with-both-httpasync-netasynchttp/43061885#43061885", "title": "Perl too slow concurrent download with both HTTP::Async &amp; Net::Async::HTTP", "body": "<p>For explaining my comment. I was curious, because never used the <code>Net::Async::HTTP</code> before, wanted to try your script locally. So, created this minimalist Plack <code>app.psgi</code>:</p>\n\n<pre><code>use 5.014;\nuse warnings;\n\nuse Plack::Builder;\nuse Plack::Request;\nuse Plack::Response;\nuse Time::HiRes qw(usleep);\n\nmy $app = sub {\n    my $env = shift;\n    my $req = Plack::Request-&gt;new($env);\n\n    my($ms,$id) = $req-&gt;path_info =~ /(\\d+)/g;\n    $ms //= 0;\n    $id //= \"NOID\";\n\n    #fake some processing slowness\n    usleep($ms);\n\n    my $res = Plack::Response-&gt;new(200);\n    $res-&gt;content_type('text/plain');\n    $res-&gt;body( \"req# $id served by PID $$ fakewait: $ms\\n\");\n    return $res-&gt;finalize;\n};\n\nbuilder {\n#    enable \"Auth::Basic\", authenticator =&gt; \\&amp;auth;\n    $app;\n};\n\n#sub auth { return $_[0] eq 'me' &amp;&amp; $_[1] eq 'me' }\n</code></pre>\n\n<p>The server understand URL's in a form <code>GET /sleep_time/reqID</code>, where</p>\n\n<ul>\n<li>the sleep time is in microseconds for the <code>usleep</code> - and the server sleep the given time before responds. E.g. it fakes some \"processing time\".</li>\n<li>id - any number for req-identifying...</li>\n</ul>\n\n<p>E.g. requesting <code>GET /1000000/1</code>, the server will sleep 1second before responds. In response is included the <code>PID</code> of the responding process.</p>\n\n<p>In one terminal window run the above using <code>Starman</code> preforkimg server with default <code>20</code> workers.</p>\n\n<pre><code>plackup -s Starman\n</code></pre>\n\n<p>And in the another window the results using <code>xargs</code>:</p>\n\n<pre><code>time seq 20 | xargs -n1 -P10 -I% curl http://localhost:5000/1000000/%\n</code></pre>\n\n<p>so, sending 20 requests, where each response tooks <code>1s</code> processing time.</p>\n\n<pre><code>req# 1 served by PID 28163 fakewait: 1000000\nreq# 2 served by PID 28161 fakewait: 1000000\nreq# 3 served by PID 28162 fakewait: 1000000\nreq# 4 served by PID 28160 fakewait: 1000000\nreq# 5 served by PID 28159 fakewait: 1000000\n...\nreal    0m4,032s\nuser    0m0,092s\nsys     0m0,074s\n</code></pre>\n\n<p>So, 20 requests = 4 seconds. It is visible, that the reponding <code>PID</code>'s are different - e.g the repsonse is sent by different worker.</p>\n\n<p>Now using your script <code>async.pl</code> (slightly shortened/modified):</p>\n\n<pre><code>#!/usr/bin/perl\nuse 5.014;\nuse warnings;\n\nuse HTTP::Request;\nuse IO::Async::Loop;\nuse Net::Async::HTTP;\nuse Future::Utils qw(fmap_void);\n\nmy $sleep = $ARGV[0] // 0;\nmy $numreq = $ARGV[1] // 20;\n\nmy $loop = IO::Async::Loop-&gt;new();\n\nmy $http = Net::Async::HTTP-&gt;new( timeout =&gt; 10, max_connections_per_host =&gt; 0, pipeline =&gt; 0, ip_tos =&gt; 0x10 );\n$loop-&gt;add( $http );\n\nmy $future = fmap_void {\n    (my  $url ) = @_;\n    my $request = HTTP::Request-&gt;new(GET =&gt; $url);\n    #$request-&gt;authorization_basic('me','me');\n    $http-&gt;do_request( request =&gt; $request )\n        -&gt;on_done( sub {\n            my $response = shift;\n            my($body) = $response-&gt;content =~ s/\\n.*//sr;\n            print \"$url [\", $response-&gt;code, \"] --&gt; $body\\n\";\n        } )\n        -&gt;on_fail( sub {\n            my $failure = shift;\n            print \"$url failed: $failure\\n\";\n        } );\n} foreach =&gt; [map { \"http://localhost:5000/$sleep/$_\" } (1 .. $numreq)];\n$loop-&gt;await( $future );\n</code></pre>\n\n<p>command</p>\n\n<pre><code>time perl async.pl 1000000 20\n</code></pre>\n\n<p>result</p>\n\n<pre><code>http://localhost:5000/1000000/1 [200] --&gt; req# 1 served by PID 28160 fakewait: 1000000\nhttp://localhost:5000/1000000/2 [200] --&gt; req# 2 served by PID 28160 fakewait: 1000000\nhttp://localhost:5000/1000000/3 [200] --&gt; req# 3 served by PID 28160 fakewait: 1000000\nhttp://localhost:5000/1000000/4 [200] --&gt; req# 4 served by PID 28160 fakewait: 1000000\nhttp://localhost:5000/1000000/5 [200] --&gt; req# 5 served by PID 28160 fakewait: 1000000\nhttp://localhost:5000/1000000/6 [200] --&gt; req# 6 served by PID 28160 fakewait: 1000000\n...\nreal    0m20,309s\nuser    0m0,183s\nsys     0m0,053s\n</code></pre>\n\n<p>Same 20 requests = 20 seconds, and <strong>each</strong> request is served by the same <code>PID</code>. Like pure sequential processing. :(</p>\n\n<p>This <em>probably</em> because the requests reusing the connection (eg. the keep-alive).</p>\n\n<p>Finally - unfortunately, as i told - i haven't any experience with the module, so haven't idea how to force the module to do-not-reuse the opened connection.</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "edited": false, "score": 0, "creation_date": 1491140759, "post_id": 43137377, "comment_id": 73411966, "body": "Also, I got my own below maybe lil bit faster (I wanna 2 believe at least), but you was the first, who posted acceptably fast working solution. On my VM your runs for about 4-5 sec, with first get for raw from pastebin."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491482909, "post_id": 43137377, "comment_id": 73579982, "body": "You deserves a bounty, because you&#39;re the only who is really interested in the answering a question. Also, the  Parallel::ForkManager+LWP is simple and OK. Even if it isn&#39;t some speed-daemon. :) I will continue (if/when i&#39;ll be in the right mood :) and will post my findings."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491546714, "post_id": 43137377, "comment_id": 73610578, "body": "@jm666 Thank you very much for the kind words :)  And for the attribution.  One main point here was that it&#39;s simple.  But the other one was speed -- I don&#39;t see how one can beat a straight-up fork.  Every page is pulled exactly as it comes, completely separately. If the files go to disk then there is no overhead to speak of, no time waisted. There are nicer forking frameworks of course, which may be better suited for integration with the rest of the job. I will add a little summary of posted approaches.  Thanks for calling the bounty, this ended up as a very informative page, I think."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491546827, "post_id": 43137377, "comment_id": 73610630, "body": "@jm666  The critical part is that I saw absolutely no problem with the number of processes, no OS/CPU strain (on a four-core laptop).  It was really entertaining to watch that.  I am now curious and will run some extended tests, with hundreds of links.  Will add a comment on that if it is interesting."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491551791, "post_id": 43137377, "comment_id": 73613451, "body": "I&#39;m interested in the scenario what the OP said in a comment: <i>this is some variation of REST client, and it&#39;s time critical to load data asap, ..... Typical set is two-three dozens of urls, about dozens kBs per url.</i> . So, no static files, no internet - but <b>one server</b> (maybe on high-speed local net), and how to get fastest possible data-loading into the app - e.g. even without saving the data to local HDD. Here plays big role not only the &quot;client part&quot; but also the &quot;server&quot; part (e.g. number of workers and such). On the original question he uses only the <code>testpodarki.afghanet</code> server..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491551999, "post_id": 43137377, "comment_id": 73613580, "body": "@jm666 Ah, OK, thank you for the explanation.  I will look into that.  (It also goes along with another thing I&#39;m checking out now.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1546242517, "last_edit_date": 1546242517, "creation_date": 1490953009, "answer_id": 43137377, "question_id": 43024722, "link": "https://stackoverflow.com/questions/43024722/perl-too-slow-concurrent-download-with-both-httpasync-netasynchttp/43137377#43137377", "title": "Perl too slow concurrent download with both HTTP::Async &amp; Net::Async::HTTP", "body": "<p>My best results with <a href=\"http://search.cpan.org/dist/HTTP-Async/lib/HTTP/Async.pm\" rel=\"nofollow noreferrer\">HTTP::Async</a> are well over 4 and up to over 5 seconds. As I understand this approach isn't required, and here is a simple forking example that takes a little over 2 and at most below 3 seconds.</p>\n\n<p>It uses <a href=\"http://search.cpan.org/~dlux/Parallel-ForkManager-0.7.5/ForkManager.pm\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a> and <a href=\"http://search.cpan.org/~oalders/libwww-perl-6.24/lib/LWP/UserAgent.pm\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> for downloads.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Path::Tiny;    \nuse LWP::UserAgent;\nuse Parallel::ForkManager;\n\nmy @urls = @{ get_urls('https://pastebin.com/raw/VyhMEB3w') };\n\nmy $pm = new Parallel::ForkManager(60);  # max of 60 processes at a time\nmy $ua = LWP::UserAgent-&gt;new; \nprint \"Downloading \", scalar @urls, \" files.\\n\";\n\nmy $dir = 'downloaded_files/';\nmkdir $dir if not -d $dir;\nmy $cnt = 0;   \nforeach my $link (@urls) \n{\n    my $file = \"$dir/file_\" . ++$cnt . '.txt';\n\n    $pm-&gt;start and next;                        # child process\n\n    # add code needed for actual pages (authorization etc)            \n    my $response = $ua-&gt;get($link);        \n    if ($response-&gt;is_success) {\n        path($file)-&gt;spew_utf8($response-&gt;decoded_content);\n    }\n    else { warn $response-&gt;status_line }\n\n    $pm-&gt;finish;                                # child exit\n}\n$pm-&gt;wait_all_children;\n\nsub get_urls {\n    my $resp = LWP::UserAgent-&gt;new-&gt;get($_[0]);\n    return [ grep /^http:/, split /\\s*'?,?\\s*\\n\\s*'?/, $resp-&gt;decoded_content ];\n};\n</code></pre>\n\n<p>The files are written using <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a>. Its <code>path</code> builds an object and <code>spew</code> routines write the file.</p>\n\n<p>For reference, the sequential downloads take around 26 seconds. </p>\n\n<p>With the maximum number of processes set to 30 this takes over 4 seconds, and with 60 it is a little over 2 seconds, about the same as with (up to) 90. There are 70 urls in this test.</p>\n\n<p>Tested at a 4-core laptop with a decent network connection. (Here the CPU isn't all that important.)  The tests were run repeatedly, at multiple times and on multiple days.</p>\n\n<hr>\n\n<p><em>A comparison with the approach from the question</em></p>\n\n<p>The best <code>HTTP::Async</code> results are slower than the above by around a factor of two. They are with 30-40 \"slots\" since for higher numbers the time goes up, what puzzles (me). The module uses <code>select</code> to multiplex, via <a href=\"http://search.cpan.org/~gaas/Net-HTTP-6.06/lib/Net/HTTP/NB.pm\" rel=\"nofollow noreferrer\">Net::HTTP::NB</a> (a non-blocking version of <a href=\"http://search.cpan.org/~gaas/Net-HTTP-6.06/lib/Net/HTTP.pm\" rel=\"nofollow noreferrer\">Net::HTTP</a>). While <code>select</code> \"does not scale well\" this regards hundreds of sockets and I'd expect to be able to use more than 40 on this network bound problem. The simple forked approach does. </p>\n\n<p>Also, <code>select</code> is considered to be a slow method to monitor sockets while forks don't even need that, as each process has its own url. (This may result in module's overhead when there are many connections?)  Fork's inherent overhead is fixed and dwarfed by network access. If we were after (many) hundreds of downloads the system may get strained by processes, but <code>select</code> wouldn't fare well either.</p>\n\n<p>Finally, <code>select</code> based methods download strictly one file at a time, \nand the effect is seen by printing as requests are <code>add</code>ed -- we can <em>see</em> the delay. The forked downloads go in parallel (in this case all 70 at the same time  without a problem). Then there'll be a network or disk bottleneck but that is tiny in comparison to the gain.</p>\n\n<p><strong>Update</strong>: <em>I pushed this to double the number of sites and processes, saw no signs of OS/CPU strain, and retained the average speed.</em></p>\n\n<p>So I'd say, if you need to shave off every second use forks. But if this is not critical and there are other benefits of <code>HTTP::Async</code> (or such) then be content with (just a bit) longer downloads.</p>\n\n<hr>\n\n<p>The <code>HTTP::Async</code> code that performs well ended up being simply </p>\n\n<pre><code>foreach my $link ( @urls ) {  \n    $async-&gt;add( HTTP::Request-&gt;new(GET =&gt; $link) );\n}    \nwhile ( my $response = $async-&gt;wait_for_next_response ) { \n    # write file (or process otherwise)\n}\n</code></pre>\n\n<p>I have also tried to tweak headers and timings. (This included dropping <code>keep-alive</code> as suggested, by <code>$request-&gt;header(Connection =&gt; 'close')</code>, to no effect.)</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491334352, "post_id": 43168968, "comment_id": 73503601, "body": "Good to have an example of an event-based approach."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1500457777, "post_id": 43168968, "comment_id": 77341172, "body": "I have <a href=\"http://www.win.tue.nl/~rp/bin/urlheadinfo\" rel=\"nofollow noreferrer\">a script to check URLs using AnyEvent::HTTP</a> - that is fast, too, although I never measured it."}], "tags": [], "owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "is_accepted": false, "score": 4, "last_activity_date": 1491140202, "creation_date": 1491140202, "answer_id": 43168968, "question_id": 43024722, "link": "https://stackoverflow.com/questions/43024722/perl-too-slow-concurrent-download-with-both-httpasync-netasynchttp/43168968#43168968", "title": "Perl too slow concurrent download with both HTTP::Async &amp; Net::Async::HTTP", "body": "<p>So, finally got working sample (<a href=\"https://pastebin.com/S0vapZwA\" rel=\"nofollow noreferrer\">full script</a>). It uses <code>Furl</code> and <code>fork_call</code> from <code>AnyEvent::Util</code>. This example returnes in ~3 secs, what is good enough. If you need to use basic HTTP auth, just use URI with creds like this: <code>username:password@hostdomain.org/path?param1=val1&amp;param2=val2</code>. You better add <code>use EV;</code> before using <code>AnyEvent</code> because EV is the fastest.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse Devel::Timer;\nuse Furl;\nuse EV;\nuse AnyEvent;\nuse AnyEvent::Util 'fork_call';\n\n#get full script\nmy @urls = (...);\n\n\nsub fetch {\n    my $url = shift;\n    my $furl = Furl::HTTP-&gt;new(agent =&gt; 'Furl/0.31',timeout =&gt; 3);\n    print \"start $url\\n\";\n    my ($ver, $code, $msg, $headers, $body) = $furl-&gt;get($url);\n    my $size = length $body;\n    print \"finished $url, $size bytes\\n\";\n    return ($code, $msg, $headers, $body);\n}\n\nmy %resps;\n\nmy $timer = Devel::Timer-&gt;new();\n$timer-&gt;mark('foreach');\n$AnyEvent::Util::MAX_FORKS = 20;\nmy $cv = AE::cv;\nforeach my $url (@urls) {\n    $timer-&gt;mark('next foreach');\n    $cv-&gt;begin;\n    fork_call {\n        print \"getting $url... \";\n        my ($code, $msg, $headers, $body)=fetch($url);\n        print \"[$code]\\n\";\n        return ($url, $code, $msg, $headers, $body);\n        }\n        sub {\n            print \"adding 2 %resps\\n\";\n            my ($url, $code, $msg, $headers, $body)=@_;\n            $resps{$url}-&gt;{'code'}=$code;\n            $resps{$url}-&gt;{'msg'}=$msg;\n            $resps{$url}-&gt;{'headers'}=$headers;\n            $resps{$url}-&gt;{'body'}=$body;\n            $cv-&gt;end;\n        };\n}\n$cv-&gt;recv;\n$timer-&gt;mark('end');\n\nprint \"\\nall data is ready, press &lt;ENTER&gt;:\";\n&lt;STDIN&gt;;\nprint Dumper(%resps);\nprint \"\\n&lt;PRESS ENTER&gt;to print timer report\\n\";\n&lt;STDIN&gt;;\n$timer-&gt;report();\nsleep(3);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491335282, "post_id": 43180104, "comment_id": 73504126, "body": "A nice and simple explanation.  I&#39;d like to add, there&#39;s more chance to saturate the I/O subsystem here.  (I fork over a hundred processes in extended tests on four cores of an oldish laptop and see no signs of CPU/OS strain.)"}, {"owner": {"reputation": 955, "user_id": 2152612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1429edc49cce4063c2b57c1a6ab1c826?s=128&d=identicon&r=PG", "display_name": "Emil Perhinschi", "link": "https://stackoverflow.com/users/2152612/emil-perhinschi"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491430003, "post_id": 43180104, "comment_id": 73554991, "body": "you could try threads with the master+workers pattern and Thread::Queue (or fork processes and use Message::Passing :) ):   the master starts a number of workers, then loads the URL list while the workers fetch URLs from the queue and use one of the <i>::Async</i> modules to download the URLs concurrently   .                               The best of both worlds :)    .                                          I would use Coro, but that limits you to perl 5.20, not working with newer versions if I remember right"}], "tags": [], "owner": {"reputation": 955, "user_id": 2152612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1429edc49cce4063c2b57c1a6ab1c826?s=128&d=identicon&r=PG", "display_name": "Emil Perhinschi", "link": "https://stackoverflow.com/users/2152612/emil-perhinschi"}, "is_accepted": false, "score": 2, "last_activity_date": 1491208943, "creation_date": 1491208943, "answer_id": 43180104, "question_id": 43024722, "link": "https://stackoverflow.com/questions/43024722/perl-too-slow-concurrent-download-with-both-httpasync-netasynchttp/43180104#43180104", "title": "Perl too slow concurrent download with both HTTP::Async &amp; Net::Async::HTTP", "body": "<p>Async will be slower than parallel downloading: the async code will yield to other calls only while waiting for a response, but downloading happens sequentially in a single process, while the curl+xargs will work 100% (well, almost 100%, and as long as you don't saturate the cores) in parallel, same as when using forked workers. </p>\n\n<p>please, google for \"concurrency is not parallelism\"</p>\n"}], "owner": {"reputation": 143, "user_id": 7145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b797c1f01e578c40bd625cd49fbb0?s=128&d=identicon&r=PG&f=1", "display_name": "berrymorr", "link": "https://stackoverflow.com/users/7145601/berrymorr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 954, "favorite_count": 2, "accepted_answer_id": 43137377, "answer_count": 4, "score": 8, "last_activity_date": 1546242517, "creation_date": 1490499433, "last_edit_date": 1490502859, "question_id": 43024722, "link": "https://stackoverflow.com/questions/43024722/perl-too-slow-concurrent-download-with-both-httpasync-netasynchttp", "title": "Perl too slow concurrent download with both HTTP::Async &amp; Net::Async::HTTP", "body": "<p>I'm trying to GET about 7 dozens of urls in parallel with scripts: the first is below, with HTTP::Async, and the second one is <a href=\"http://pastebin.com/ZegvN4vH\" rel=\"noreferrer\">on pastebin</a>, with Net::Async::HTTP.\nThe problem is that I'm getting pretty same timing results - about 8..14 seconds for all urls list. It's inacceptable slow compared to curl+xargs started from shell, which gets all in less than 3 seconds with 10-20 \"threads\".\nFor example, Devel::Timer in first script shows that max queue length is even less than 6 (<code>$queue-&gt;in_progress_count</code>&lt;=5, <code>$queue-&gt;to_send_count</code>=0 allways). So, it's looks like foreach with $queue->add is executing too slow, and I don't know why.\nPretty same situation I got with Net::Async::HTTP (second script on pastebin), which is even slower than the first.</p>\n\n<p>So, please, does anybody know, what I'm doing wrong? How can I get concurrent download speed at least compared to curl+xargs started from shell?</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse utf8;\nuse strict;\nuse POSIX qw(ceil);\nuse XML::Simple;\nuse Data::Dumper;\nuse HTTP::Request;\nuse HTTP::Async;\nuse Time::HiRes qw(usleep time);\nuse Devel::Timer;\n\n#settings\nuse constant passwd =&gt; 'ultramegahypapassword';\nuse constant agent =&gt; 'supa agent dev.alpha';\nuse constant timeout =&gt; 10;\nuse constant slots =&gt; 10;\nuse constant debug =&gt; 1;\n\nmy @qids;\nmy @xmlz;\nmy $queue = HTTP::Async-&gt;new(slots =&gt; slots,max_request_time =&gt; 10, timeout =&gt; timeout, poll_interval =&gt; 0.0001);\nmy %responses;\nmy @urlz = (\n'http://testpodarki.afghanet/api/products/4577',\n'http://testpodarki.afghanet/api/products/4653',\n'http://testpodarki.afghanet/api/products/4652',\n'http://testpodarki.afghanet/api/products/4571',\n'http://testpodarki.afghanet/api/products/4572',\n'http://testpodarki.afghanet/api/products/4666',\n'http://testpodarki.afghanet/api/products/4576',\n'http://testpodarki.afghanet/api/products/4574',\n'http://testpodarki.afghanet/api/products/4651',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[3294]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[3294]',\n'http://testpodarki.afghanet/api/combinations/?display=full&amp;filter[id_product]=[4577]',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4577]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4577]',\n'http://testpodarki.afghanet/api/product_option_values/188',\n'http://testpodarki.afghanet/api/product_option_values/191',\n'http://testpodarki.afghanet/api/product_option_values/187',\n'http://testpodarki.afghanet/api/product_option_values/190',\n'http://testpodarki.afghanet/api/product_option_values/189',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4653]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4653]',\n'http://testpodarki.afghanet/api/images/products/4577/12176',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4652]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4652]',\n'http://testpodarki.afghanet/api/images/products/4653/12390',\n'http://testpodarki.afghanet/api/combinations/?display=full&amp;filter[id_product]=[4571]',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4571]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4571]',\n'http://testpodarki.afghanet/api/images/products/4652/12388',\n'http://testpodarki.afghanet/api/product_option_values/175',\n'http://testpodarki.afghanet/api/product_option_values/178',\n'http://testpodarki.afghanet/api/product_option_values/179',\n'http://testpodarki.afghanet/api/product_option_values/180',\n'http://testpodarki.afghanet/api/product_option_values/181',\n'http://testpodarki.afghanet/api/images/products/3294/8965',\n'http://testpodarki.afghanet/api/product_option_values/176',\n'http://testpodarki.afghanet/api/product_option_values/177',\n'http://testpodarki.afghanet/api/combinations/?display=full&amp;filter[id_product]=[4572]',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4572]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4572]',\n'http://testpodarki.afghanet/api/product_option_values/176',\n'http://testpodarki.afghanet/api/product_option_values/181',\n'http://testpodarki.afghanet/api/product_option_values/180',\n'http://testpodarki.afghanet/api/images/products/4571/12159',\n'http://testpodarki.afghanet/api/product_option_values/177',\n'http://testpodarki.afghanet/api/product_option_values/179',\n'http://testpodarki.afghanet/api/product_option_values/175',\n'http://testpodarki.afghanet/api/product_option_values/178',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4666]',\n'http://testpodarki.afghanet/api/combinations/?display=full&amp;filter[id_product]=[4576]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4666]',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4576]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4576]',\n'http://testpodarki.afghanet/api/images/products/4572/12168',\n'http://testpodarki.afghanet/api/product_option_values/185',\n'http://testpodarki.afghanet/api/product_option_values/182',\n'http://testpodarki.afghanet/api/product_option_values/184',\n'http://testpodarki.afghanet/api/product_option_values/183',\n'http://testpodarki.afghanet/api/product_option_values/186',\n'http://testpodarki.afghanet/api/images/products/4666/12413',\n'http://testpodarki.afghanet/api/combinations/?display=full&amp;filter[id_product]=[4574]',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4574]',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4574]',\n'http://testpodarki.afghanet/api/product_option_values/177',\n'http://testpodarki.afghanet/api/product_option_values/181',\n'http://testpodarki.afghanet/api/images/products/4576/12174',\n'http://testpodarki.afghanet/api/product_option_values/176',\n'http://testpodarki.afghanet/api/product_option_values/180',\n'http://testpodarki.afghanet/api/product_option_values/179',\n'http://testpodarki.afghanet/api/product_option_values/175',\n'http://testpodarki.afghanet/api/product_option_values/178',\n'http://testpodarki.afghanet/api/specific_prices/?display=full&amp;filter[id_product]=[4651]',\n'http://testpodarki.afghanet/api/images/products/4574/12171',\n'http://testpodarki.afghanet/api/stock_availables/?display=full&amp;filter[id_product]=[4651]',\n'http://testpodarki.afghanet/api/images/products/4651/12387'\n);\n\nmy $timer = Devel::Timer-&gt;new();\n\n\nforeach my $el (@urlz) {\n    my $request = HTTP::Request-&gt;new(GET =&gt; $el);\n    $request-&gt;header(User_Agent =&gt; agent);\n    $request-&gt;authorization_basic(passwd,''); \n    push @qids,$queue-&gt;add($request);\n    $timer-&gt;mark(\"pushed [$el], to_send=\".$queue-&gt;to_send_count().\", to_return=\".$queue-&gt;to_return_count().\", in_progress=\".$queue-&gt;in_progress_count());\n}\n\n$timer-&gt;mark('requestz pushed');\n\nwhile ($queue-&gt;in_progress_count) {\n    usleep(2000);\n    $queue-&gt;poke();\n}\n\n$timer-&gt;mark('requestz complited');\n\nprocess_responses();\n\n\n$timer-&gt;mark('responzez processed');\n\nforeach my $q (@xmlz) {\n#    print \"&gt;&gt;&gt;&gt;&gt;&gt;\".Dumper($q).\"&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\\n\";\n}\n\n$timer-&gt;report();\nprint \"\\n\\n\";\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3201114, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/60f58600bea628d6ed20d90b94b060f1?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/3201114/sonal"}, "edited": false, "score": 0, "creation_date": 1490497878, "post_id": 43024482, "comment_id": 73136059, "body": "what does .= do?"}, {"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "reply_to_user": {"reputation": 43, "user_id": 3201114, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/60f58600bea628d6ed20d90b94b060f1?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/3201114/sonal"}, "edited": false, "score": 0, "creation_date": 1490497936, "post_id": 43024482, "comment_id": 73136070, "body": "It&#39;s a short-cut. It appends and assigns strings. Same as <code>$output = $output . &quot;a=$a....</code>"}], "tags": [], "owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "is_accepted": false, "score": 2, "last_activity_date": 1490497104, "creation_date": 1490497104, "answer_id": 43024482, "question_id": 43024388, "link": "https://stackoverflow.com/questions/43024388/i-need-the-output-in-following-way-in-perl/43024482#43024482", "title": "I need the output in following way in perl", "body": "<p>Instead of printing out the values you could append them to a string and include a comma after the \"c\" value. Then at the end of the loop, erase the final comma from the string and print it out. There are some scalability problems if your input file is too large. But if it's a reasonable size there shouldn't be any substantial issue.</p>\n\n<pre><code>my $output;\nmy $dummy=&lt;$fh&gt;;\nwhile (&lt;$fh&gt;) {\n    chomp;\n    $a = substr $_, 0,1;\n    $b = substr $_, 6,1;\n    $c = substr $_, 4,1;\n    $output .= \"a=$a,d=$b,c=$c,\";\n}\nchop $output;\nprint $output;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1490499584, "last_edit_date": 1490499584, "creation_date": 1490499014, "answer_id": 43024681, "question_id": 43024388, "link": "https://stackoverflow.com/questions/43024388/i-need-the-output-in-following-way-in-perl/43024681#43024681", "title": "I need the output in following way in perl", "body": "<pre><code>my $prefix = '';\nwhile (&lt;$fh&gt;) {\n    chomp;\n    my @fields = split /,/;\n    print $prefix.\"a=$fields[0],d=$fields[3],c=$fields[2]\";\n    $prefix = ',';\n}\n\nprint(\"\\n\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @recs;\nwhile (&lt;$fh&gt;) {\n    chomp;\n    my @fields = split /,/;\n    push @recs, \"a=$fields[0],d=$fields[3],c=$fields[2]\";\n}\n\nprint(join(',', @recs), \"\\n\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1490500929, "last_edit_date": 1490500929, "creation_date": 1490499039, "answer_id": 43024683, "question_id": 43024388, "link": "https://stackoverflow.com/questions/43024388/i-need-the-output-in-following-way-in-perl/43024683#43024683", "title": "I need the output in following way in perl", "body": "<p>If you have fields with separators split the line and collect needed elements</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = 'parse.txt';\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy $dummy = &lt;$fh&gt;;\nmy @res;\nwhile (&lt;$fh&gt;) \n{\n    my ($a, $d, $c) = (split /,/)[0,3,2];\n    push @res, \"a=$a,d=$d,c=$c\";\n}\n\nsay join ',', @res;\n</code></pre>\n\n<p>or pick the order in the assignment</p>\n\n<pre><code>my ($a, $c, $d) = (split /,/)[0,2,3];\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3201114, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/60f58600bea628d6ed20d90b94b060f1?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/3201114/sonal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43024681, "answer_count": 3, "score": -3, "last_activity_date": 1490500929, "creation_date": 1490496064, "question_id": 43024388, "link": "https://stackoverflow.com/questions/43024388/i-need-the-output-in-following-way-in-perl", "title": "I need the output in following way in perl", "body": "<p>#  File-</p>\n\n<p>#  a,b,c,d,e,f</p>\n\n<p># 1,2,3,4,3,2</p>\n\n<p>#  9,8,7,6,5,0</p>\n\n<p>#  2,3,4,6,7,8</p>\n\n<p>#  i need output like this:-\n   #  a=1,d=4,c=3,a=9,d=6,c=7,a=2,d=6,c=4</p>\n\n<p>#  but my program gives this:-\n   # a=1,d=4,c=3a=9,d=6,c=7a=2,d=6,c=4 (there is no , after c and a)</p>\n\n<pre><code>my script is :-\n\nopen ($fh, 'parse.txt');\n\nmy @arr;\nmy $dummy=&lt;$fh&gt;;\nwhile (&lt;$fh&gt;) {\n    chomp;\n    $a = substr $_, 0,1;\n    $b = substr $_, 6,1;\n    $c = substr $_, 4,1;\n    print \"a=$a,d=$b,c=$c\";\n}\n\nclose (IN);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490486177, "post_id": 43023214, "comment_id": 73133863, "body": "Can you give an example of how the <code>%rankedTest</code> hash look like? Do you want to sort product and phones separately? I.e. sort all phone values numerically, then sort all product values numerically."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490486691, "post_id": 43023214, "comment_id": 73133976, "body": "I am also thinking about where <code>phone</code> is in the output ... is it always <code>&lt;</code> (in the earlier selection) so it never makes it into <code>%rankedTest</code>?  If you need to sort with <i>one</i> key in the subhash (<code>product</code>) that&#39;s one thing, but to sort the top-level keys by <i>two</i> subkeys (both <code>product</code> and <code>phone</code>) more work is needed.  Can you clarify?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490487690, "post_id": 43023214, "comment_id": 73134164, "body": "I meant, &quot;sort the top-level keys by&quot; ... values for multiple subkeys"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490490793, "post_id": 43023214, "comment_id": 73134760, "body": "Right, that&#39;s very different.  You&#39;ll need to &quot;unwrap&quot; the whole data structure.  Even if you sort by <code>max</code> of values of subkeys, still <i>all</i> (top-level) entries from the key with the highest value come first, (probably) breaking the order of other values."}], "answers": [{"comments": [{"owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "edited": false, "score": 0, "creation_date": 1490488896, "post_id": 43023386, "comment_id": 73134387, "body": "thanks for your answer, but $rankedTest{$b}{product} is not always true , sometimes it could be $rankedTest{$b}{phone}"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "edited": false, "score": 0, "creation_date": 1490490064, "post_id": 43023386, "comment_id": 73134618, "body": "@kero: Okay. But what happens if there is both a <code>product</code> and a <code>phone</code> key?"}, {"owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "edited": false, "score": 0, "creation_date": 1490490404, "post_id": 43023386, "comment_id": 73134685, "body": "i want to whoever with bigger value to come first"}, {"owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "edited": false, "score": 0, "creation_date": 1490490688, "post_id": 43023386, "comment_id": 73134737, "body": "but i don&#39;t think that both will be a key for the same feature ,look  at foreach loop at the beginning that compare whoever has the bigger value and then assigned to the feature."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1490486453, "creation_date": 1490486453, "answer_id": 43023386, "question_id": 43023214, "link": "https://stackoverflow.com/questions/43023214/sort-the-keys-of-deep-nested-hash-according-to-value/43023386#43023386", "title": "sort the keys of deep nested hash according to value?", "body": "<p></p>\n\n<p>Essentially, you're sorting the elements of the wrong hash. Your data structure <code>%rankedTest</code> looks like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my %rankedTest = (\n    operations =&gt; { product =&gt; 0.0859904478555225 },\n    move       =&gt; { product =&gt; 0.309133999169732 },\n    dispute    =&gt; { product =&gt; 0.0963311089384321 },\n);\n</code></pre>\n\n<p>and you're sorting the keys of the inner hashes that look like <code>{ product =&gt; 0.0859904478555225 }</code>. But there's only a single element in each of them so your inner <code>for</code> loop executes only once and sorting makes no difference</p>\n\n<p>Here I've sorted the outer hash by the value of the <code>product</code> element of the inner hash</p>\n\n<p>Note that it's often simpler to save intermediate results into temporary variables when dealing with complex data structures. Here I've stored the sorted keys in array <code>@features</code> and the value of the score in <code>$score</code> to save putting the long hash expression into the <code>print</code> statement</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my @features = sort {\n    $rankedTest{$b}{product} &lt;=&gt; $rankedTest{$a}{product}\n} keys %rankedTest;\n\nfor my $feature ( @features ) {\n\n    my $score = $rankedTest{$feature}{product};\n\n    print \"feature:$feature -&gt; sense:product -&gt; score:$score\\n\";\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>feature:move -&gt; sense:product -&gt; score:0.309133999169732\nfeature:dispute -&gt; sense:product -&gt; score:0.0963311089384321\nfeature:operations -&gt; sense:product -&gt; score:0.0859904478555225\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "edited": false, "score": 0, "creation_date": 1490493152, "post_id": 43024016, "comment_id": 73135189, "body": "hey zdim i like your answer but in my case, <code>feature:move -&gt; sense:prod -&gt; score:0.6</code> or <code>feature:move -&gt; sense:phone -&gt; score:0.6</code> but i will not have both at the same time."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "edited": false, "score": 0, "creation_date": 1490493241, "post_id": 43024016, "comment_id": 73135208, "body": "@kero  That&#39;s fine.  The code will work with those that are there.  The <code>%h</code> above stands for your <code>%rankedTest</code>.  (I&#39;ll add a comment for this)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1490605066, "last_edit_date": 1490605066, "creation_date": 1490492392, "answer_id": 43024016, "question_id": 43023214, "link": "https://stackoverflow.com/questions/43023214/sort-the-keys-of-deep-nested-hash-according-to-value/43024016#43024016", "title": "sort the keys of deep nested hash according to value?", "body": "<p>To sort a multi-level hash by values in its bottom layer we have to compare <em>all</em> entries.  </p>\n\n<p>This code builds strings to be printed for all levels using (double) <a href=\"https://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a>, then sorts that</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\n# Example hash     \nmy %h = ( \n    oper =&gt; { prod =&gt; 0.8, phone =&gt; 0.03 },  \n    disp =&gt; { prod =&gt; 0.2, phone =&gt; 0.05 },  \n    move =&gt; { prod =&gt; 0.6, phone =&gt; 0.01 } \n); \n\nmy @res = \n    sort { (split \":\", $b)[-1] &lt;=&gt; (split \":\", $a)[-1] }\n    map { \n        my $k = $_; \n        map { \"feature:$k -&gt; sense:$_ -&gt; score:$h{$k}{$_}\" }\n        keys %{$h{$k}} \n    }   \n    keys %h; \n\nsay for @res;\n</code></pre>\n\n<p>Output</p>\n\n<pre>\nfeature:oper -> sense:prod -> score:0.8\nfeature:move -> sense:prod -> score:0.6\nfeature:disp -> sense:prod -> score:0.2\nfeature:disp -> sense:phone -> score:0.05\nfeature:oper -> sense:phone -> score:0.03\nfeature:move -> sense:phone -> score:0.01\n</pre>\n\n<p>I set <code>phone</code> values to be less than <code>prod</code>'s to mimic posted data (irrelevant for processing).</p>\n\n<p>The example hash <code>%h</code> stands for <code>%rankedTest</code> in the question. It may have either or both (or none) of <code>prod</code> and <code>phone</code> in subhashes.</p>\n"}], "owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 43024016, "answer_count": 2, "score": 0, "last_activity_date": 1490605066, "creation_date": 1490485015, "last_edit_date": 1490491699, "question_id": 43023214, "link": "https://stackoverflow.com/questions/43023214/sort-the-keys-of-deep-nested-hash-according-to-value", "title": "sort the keys of deep nested hash according to value?", "body": "<p>try to sort nested hash according to its values, long story,i parse <code>%senseHash</code> and store certain values in <code>%rankedTest</code> hash \nlater, i want to loop through sort <code>%rankedTest</code> and output to file \nmy code:</p>\n\n<pre><code>foreach my $str (keys %senseHash)\n{\n    my $selectedSense;\n    if (exists $senseHash{$str}{'phone'} &amp;&amp; exists $senseHash{$str}{'product'})\n     {\n        if ($senseHash{$str}{'phone'} &gt; $senseHash{$str}{'product'})\n        {\n            $selectedSense='phone';\n        }else\n        {\n            $selectedSense='product';\n        }\n         my $pPhone = $senseHash{$str}{'phone'} / $senses{'phone'};\n         my $pProduct = $senseHash{$str}{'product'} / $senses{'product'};\n         my $rankScore = abs(log($pPhone/$pProduct));\n         $rankedTest{$str}{$selectedSense}=$rankScore;\n     }\n}\nopen($f1, '&gt;', $inputs[1]);\nforeach my $e (keys  %rankedTest)\n{\n    foreach my $s (sort { $rankedTest{$e}{$b} &lt;=&gt; $rankedTest{$e}{$a} } keys %{$rankedTest{$e}})\n    {\n        print $f2 \"feature:$e -&gt; sense:$s -&gt; score:$rankedTest{$e}{$s} \\n\";\n    }\n} \n</code></pre>\n\n<p>but output is something as below :</p>\n\n<pre><code>feature:operations -&gt; sense:product -&gt; score:0.0859904478555225 \nfeature:move -&gt; sense:product -&gt; score:0.309133999169732 \nfeature:dispute -&gt; sense:phone -&gt; score:0.0963311089384321 \n</code></pre>\n\n<p>while what i actually want is :</p>\n\n<pre><code>feature:move -&gt; sense:product -&gt; score:0.309133999169732 \nfeature:dispute -&gt; sense:phone -&gt; score:0.0963311089384321 \nfeature:operations -&gt; sense:product -&gt; score:0.0859904478555225\n</code></pre>\n\n<p>any clue what i did wrong or how i can accomplish this. any suggestion will help.</p>\n\n<p>EDIT: inside hash has one key which could be phone or product and i want to sort according to what this key value regardless of the key whether <code>phone</code> or <code>product</code> </p>\n"}, {"tags": ["arrays", "regex", "perl", "multidimensional-array", "dbi"], "comments": [{"owner": {"reputation": 1940, "user_id": 3339758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e8Zc.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/3339758/tim"}, "edited": false, "score": 0, "creation_date": 1490471226, "post_id": 43021089, "comment_id": 73129907, "body": "Is this a CSV file you are parsing? If so <code>Text::CSV</code> may be helpful"}, {"owner": {"reputation": 543, "user_id": 3223661, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2dec841fe019a0e329b21df579f51c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Devoloper250", "link": "https://stackoverflow.com/users/3223661/devoloper250"}, "reply_to_user": {"reputation": 1940, "user_id": 3339758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e8Zc.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/3339758/tim"}, "edited": false, "score": 0, "creation_date": 1490472712, "post_id": 43021089, "comment_id": 73130340, "body": "Thanks for the comment Varlogtim. I was trying to write the result set data from Oracle db to csv file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490473394, "post_id": 43021089, "comment_id": 73130545, "body": "I don&#39;t understand this. What is the problem -- is it too slow? Can you describe what you are trying to do with data, and can you show us some of the data you are processing (after you pull it out of the database)?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490477366, "post_id": 43021089, "comment_id": 73131712, "body": "If the date fields are stored as dates in your database (and not just as strings) then you can choose the output format that you get when you fetch the data. It would be better to do that than to alter the result afterwards. What is the bit about changing all but the last dot <code>.</code> to colons <code>:</code>?"}, {"owner": {"reputation": 543, "user_id": 3223661, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2dec841fe019a0e329b21df579f51c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Devoloper250", "link": "https://stackoverflow.com/users/3223661/devoloper250"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490511980, "post_id": 43021089, "comment_id": 73138527, "body": "@zdim you are right about point 2. That is typo , @date_type is array of positions to be modified for date fields and it should be global for whole script. I want to modify the format of date to <b><code>date -d&quot;$record[$k]&quot; +&quot;%d-%b-%Y&quot;</code></b>  . For now I was going row by row to do this but which is taking much time and I want to know better way of doing this change."}, {"owner": {"reputation": 543, "user_id": 3223661, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2dec841fe019a0e329b21df579f51c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Devoloper250", "link": "https://stackoverflow.com/users/3223661/devoloper250"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490513226, "post_id": 43021089, "comment_id": 73138754, "body": "Thanks @zdim. Couldnt do changes in procedure and this result has to be printed in reports."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490558522, "post_id": 43021089, "comment_id": 73153074, "body": "My simple answer is meant to put forth some code so we can clarify what (more) can be done that fits your overall need. It does answer the direct question to reformat the dates and will speed it up some (as it drops the expensive call to the system) but it&#39;s not meant to be definitive. In particular, if you can explain what the rest of the code in <code>foreach $k (@date_type)</code> does (so I don&#39;t have to guess from code) we can probably get rid of that explicit loop altogether.  If you comment I can adjust and/or expand."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491593815, "post_id": 43021089, "comment_id": 73639905, "body": "@Devoloper250  Can you comment on how this went?  I&#39;d like to remove the answer if it&#39;s of no use."}], "owner": {"reputation": 543, "user_id": 3223661, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2dec841fe019a0e329b21df579f51c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Devoloper250", "link": "https://stackoverflow.com/users/3223661/devoloper250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491941449, "creation_date": 1490470827, "last_edit_date": 1490511701, "question_id": 43021089, "link": "https://stackoverflow.com/questions/43021089/how-to-modify-the-format-of-all-the-values-in-particular-column-in-perl-array", "title": "How to modify the format of all the values in particular column in Perl array?", "body": "\n\n<p>I was reading each row from a result set (multi-dimensional array, as rows and columns are dynamic) and modifying the format for all date fields at specific positions in the array. But this is taking much time as the result set is returning more rows.</p>\n\n<p>Below is sample code which i have used to change row level , is there any possibility to change whole column values in array with regexp? Or any other way to improve this program ?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$sth = $dbh-&gt;prepare( \"BEGIN TESTPROC(?, ?, ?); END;\" );\n\n$sth-&gt;bind_param( 1, 'GMS_JOB_NAME' );\n$sth-&gt;bind_param_inout( 5, \\$ResultSet, 0, { ora_type =&gt; ORA_RSET } );\n$sth-&gt;bind_param_inout( 6, \\$out_date, VARCHAR2 );\n\nunless ( $sth-&gt;execute() ) {\n    print \"Couldnt be invoked\";\n}\n\nmy $temp_file = \"/user/test.csv\";\nmy $i         = 0;\nmy $flag      = 0;\n\nmy @type;\nmy @precision;\nmy @date_type;\n\nif ( $flag == 0 ) {\n\n    $j = 0;\n\n    while ( $i &lt; $num_fields ) {\n\n        $type[$i]      = $ResultSet-&gt;{TYPE}-&gt;[$i];\n        $precision[$i] = $ResultSet-&gt;{PRECISION}-&gt;[$i];\n\n        if ( $type[$i] == 93 and $precision[$i] == 75 ) {\n            $date_type[$j] = $i;\n            $j = $j + 1;\n        }\n\n        $i = $i + 1;\n    }\n\n    $flag = 1;\n}\n\n$i = 0;\n\nif ( $out_date ) {\n\n    unless ( open( FH, '&gt;&gt;', \"$temp_file\" ) ) {\n        print \"Unable to open the Report file $temp_file\";\n    }\n\n    $file_check = 1;\n    my $num_fields = $ResultSet-&gt;{NUM_OF_FIELDS};\n\n    while ( @record = $ResultSet-&gt;fetchrow_array ) {\n\n        $record_flag = 1;\n\n        foreach $k ( @date_type ) {\n\n            if ( defined $record[$k] ) {\n\n                my $pos = rindex( $record[$k], \".\" );\n\n                $record[$k] =~ s/\\./:/g;\n\n                if ( $pos ne -1 ) {\n                    substr( $record[$k], $pos, 1 ) = \".\";\n                }\n\n                my $dt = `date -d\"$record[$k]\" +\"%d-%b-%Y\"`;\n                chomp( $dt );\n\n                $dt = uc $dt;\n\n                $record[$k] = $dt;\n            }\n\n        }\n\n        if ( index( $record[0], \"\\\"\" ) eq -1 ) {\n            my $data = join( '\",\"', @record );\n            $data = '\"' . $data . '\"';\n        }\n    }\n\n\n$dbh-&gt;commit();\n$sth-&gt;finish();\n$ResultSet-&gt;finish();\n</code></pre>\n\n<p>Below is the sample data with 10 columns and 7 rows. this would be retrieved into array <code>$ResultSet</code> from the database with space as delimiter.</p>\n\n<p>The result set is not limited to this number of rows and columns; it could be in thousands of columns with millions of rows.</p>\n\n<p>From the data below I want to change the format of dates for all values in  columns 3, 4, and 5 in the result set. The current approach is doing it row by row and writing it into CSV file, but this is slow.</p>\n\n<p>Is there any better option to do this?</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    1 A 2014/09/09 2014/09/09 2014/09/09 AMETIC NONRRA 1 122121 1212.432\n    2 b 2014/09/09 2014/01/09 2014/09/09 AMETIC NONRRA 1 122121 1212.432\n    3 B 2014/09/09 2014/04/09 2014/09/09 AMETIC NONRRA 1 122121 1212.432\n    4 R 2014/09/09 2014/05/09 2014/09/09 AMETIC NONRRA 1 122121 1212.432\n    5 G 2014/09/09 2014/07/09 2016/09/09 AMETIC NONRRA 1 122121 1212.432\n    6 DD 2014/09/09 2015/03/09 2014/09/09 AMETIC NONRRA 1 122121 1212.432\n    7 DSSS 2014/09/09 2015/09/06 2015/09/09 AMETIC NONRRA 1 122121 1212.432\n</code></pre>\n"}, {"tags": ["javascript", "perl", "reactjs"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490470161, "post_id": 43020628, "comment_id": 73129597, "body": "<a href=\"http://andrewhfarmer.com/react-ajax-best-practices/\" rel=\"nofollow noreferrer\">andrewhfarmer.com/react-ajax-best-practices</a>"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1490470530, "post_id": 43020628, "comment_id": 73129701, "body": "@ThisSuitIsBlackNot IMHO he probably mean server-side reactjs..."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1490470712, "post_id": 43020628, "comment_id": 73129755, "body": "@jm666 Good guess, but no way to know for sure unless he clarifies. Although I guess the bit about Electron is a pretty good hint."}, {"owner": {"reputation": 61, "user_id": 4903302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YKE54.jpg?s=128&g=1", "display_name": "Panos", "link": "https://stackoverflow.com/users/4903302/panos"}, "edited": false, "score": 0, "creation_date": 1490482249, "post_id": 43020628, "comment_id": 73132993, "body": "Yes I do mean Server side react"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1490541303, "post_id": 43020628, "comment_id": 73146621, "body": "What have you tried? What problems are you having?"}, {"owner": {"reputation": 61, "user_id": 4903302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YKE54.jpg?s=128&g=1", "display_name": "Panos", "link": "https://stackoverflow.com/users/4903302/panos"}, "edited": false, "score": 0, "creation_date": 1490553735, "post_id": 43020628, "comment_id": 73151337, "body": "I have tried a few plugins unsuccessfully, as far as i am aware the v8 compiler doesn&#39;t work with reactjs. The question is what is the best solution in terms of efficiency, speed, etc.. I do believe that i can manually compile the perl 5 module, but before i do this, should i be doing it? Or is there a better solution?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490617293, "post_id": 43020628, "comment_id": 73176660, "body": "You need to edit your question to show some evidence of the things you have tried and the problems you are having."}], "answers": [{"tags": [], "owner": {"reputation": 10661, "user_id": 2430549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfc7728cf3e556a8b9da88e662f4fd3?s=128&d=identicon&r=PG", "display_name": "HoldOffHunger", "link": "https://stackoverflow.com/users/2430549/holdoffhunger"}, "is_accepted": false, "score": 3, "last_activity_date": 1506542353, "creation_date": 1506542353, "answer_id": 46456264, "question_id": 43020628, "link": "https://stackoverflow.com/questions/43020628/using-perl-with-reactjs/46456264#46456264", "title": "Using Perl with ReactJS", "body": "<p>Keep your Perl script hosted at a web API, for instance, <code>http://www.example.com/your/perl/script.pl</code>.  Then, in your React code, you would just do the following:</p>\n\n<pre><code>fetch('http://www.example.com/your/perl/script.pl', {\n    'headers': {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n    },\n    'method':'POST',\n    'body':JSON.stringify({'someargument':'123'}),\n})\n.then((response) =&gt; response.json())\n.then((responseJson)=&gt;{\n    console.info(\"Response?\");\n    console.info(responseJson);\n});\n</code></pre>\n\n<p>Your Perl script will need to have a JSON parser (I recommend CPAN's JSON lib).  Then you will have communication from the front-end (ReactJS) to the back-end (your Perl script).  Let the fun begin. =)</p>\n\n<p>If you want to know more about Fetch(): <a href=\"https://scotch.io/tutorials/how-to-use-the-javascript-fetch-api-to-get-data\" rel=\"nofollow noreferrer\">https://scotch.io/tutorials/how-to-use-the-javascript-fetch-api-to-get-data</a></p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 9650022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ml8U-3Pm3xA/AAAAAAAAAAI/AAAAAAAApdA/gahIVDTJI9g/photo.jpg?sz=128", "display_name": "krunal shimpi", "link": "https://stackoverflow.com/users/9650022/krunal-shimpi"}, "is_accepted": false, "score": 1, "last_activity_date": 1551696238, "last_edit_date": 1551696238, "creation_date": 1551694910, "answer_id": 54981167, "question_id": 43020628, "link": "https://stackoverflow.com/questions/43020628/using-perl-with-reactjs/54981167#54981167", "title": "Using Perl with ReactJS", "body": "<p>If you are trying to insert data using perl you can try following code: </p>\n\n<p>In <code>insert.js</code> import following file:</p>\n\n<pre><code>    import React, { Component } from 'react';\n    import './App.css';\n    export default class Insert extends React.Component {\n\n  constructor() {\n      super();\n      this.state = {\n        fields: {},\n        json_response : []\n\n      }\n      this.instantform= this.instantform.bind(this);\n      this.change=this.change.bind(this);\n  }\n   change= (e)=&gt;{\n            let fields= this.state.fields;\n            fields[e.target.name] = e.target.value;\n            //alert (fields);\n            this.setState({\n            fields\n\n        });\n    };\n      renderListing() {\n        let recordList = []\n        this.state.json_response.map(record =&gt; {\n\n            alert(record.Usernamename);\n\n            return recordList.push(\n            &lt;tr&gt;\n\n            &lt;td&gt;{record.Usernamename}&lt;/td&gt;\n            &lt;td&gt;{record.password}&lt;/td&gt;\n\n            &lt;/tr&gt;\n                   )\n        })\n        return recordList;\n    }\n</code></pre>\n\n<p>Validate your page:</p>\n\n<pre><code>handleValidation(){\nvar pattern;\n  let fields = this.state.fields;\n  let errors = {};\n  let formIsValid = true;\n    if (!fields[\"channel_id\"]) {\n           formIsValid = false;\n           errors[\"channel_id\"] = \"*Please enter your channel_id\";\n           alert('Please enter your channel_id');\n      }\n  if (typeof fields[\"channel_id\"] !== \"undefined\") {\n     pattern = new RegExp(/^-?\\d*$/);\n    if (!pattern.test(fields[\"channel_id\"])) {\n      formIsValid = false;\n      errors[\"channel_id\"] = \"*Please enter valid channel id.\";\n      alert('Please enter valid channel id');\n    }\n  }\n  if (!fields[\"Username\"]) {\n    formIsValid = false;\n    errors[\"Username\"] = \"*Please enter your Username.\";\n    alert('Please enter your Username.');\n  }\n\n\n  if (typeof fields[\"Username\"] !== \"undefined\") {\n\n\n    if (!fields[\"Username\"].match(/^[a-zA-Z ]*$/)) {\n\n      formIsValid = false;\n      errors[\"Username\"] = \"*Please enter alphabet characters only.\";\n      alert('Please enter alphabet characters only.');\n\n    }\n  }\nif (!fields[\"Hotel_id\"]) {\n    formIsValid = false;\n    errors[\"Hotel_id\"] = \"*Please enter your Hotel_id\";\n    alert('Please enter your Hotel_id');\n  }\n\n  if (typeof fields[\"Hotel_id\"] !== \"undefined\") {\n\n    //regular expression for email validation\n    //var pattern = new RegExp(/^-?\\d*$/);\n    if (!fields[\"Hotel_id\"].match(/^-?\\d*$/)) {\n      formIsValid = false;\n      errors[\"Hotel_id\"] = \"*Please enter valid Hotel - id.\";\n      alert('Please enter valid Hotel - id.');\n    }\n  }\n\n if (!fields[\"password\"]) {\n    formIsValid = false;\n    errors[\"password\"] = \"*Please enter your password.\";\n    alert('*Please enter your password.');\n  }\n\n  if (typeof fields[\"password\"] !== \"undefined\") {\n    if (!fields[\"password\"].match(/((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})/)) {\n      formIsValid = false;\n      errors[\"password\"] = \"*Please enter secure and strong password.\";\n      alert('*Please enter secure and strong password');\n    }\n}\n\n  this.setState({\n    errors: errors\n\n  });\n  return formIsValid;    \n  }\n</code></pre>\n\n<p>Form Onlick method: </p>\n\n<pre><code>instantform =(e)=&gt;{\n    e.preventDefault();\n\nif(this.handleValidation())\n{\n\n    //alert(\"Sucess\");        \n    var fields = this.state.fields;\n    this.setState({ loading: true, disabled: true }, () =&gt;\n            {\n                //console.log(fields);\n                   fetch('http://ubuntu:90/common-cgi/trainee/krunal/my-app/src/database/insert.pl',\n                   //fetch('http://192.168.0.50:3000/myfirst_app/src/testing.php',\n                    {\n                        method: 'POST',\n                        headers: \n                        {\n                            'Accept': 'application/json',\n                            'Content-Type': 'application/json',\n                        },  \n                        body: JSON.stringify(fields)\n\n                  }).then(res =&gt; {\n\n                    //.then(res =&gt; res.text()).then(text =&gt; {\n                        alert(\"Success\");\n                      //  this.setState({\n                      //    json_response: json_response\n                      //})\n\n\n                       //JSON.stringify(json_response);\n                        //alert(json_response.Username);                            \n                        //fields[\"Username\"] = \"\";\n                        //fields[\"lastname\"] = \"\";\n                        //fields[\"email\"] = \"\";\n                        //fields[\"message\"] = \"\";\n                        //this.setState({fields:fields});\n\n                   }).catch((error) =&gt;\n                  {\n                        console.error(error.toString());\n                       //console.warn(error);\n                        this.setState({ loading: false, disabled: false });\n                  });\n            });\n    }\n }\n</code></pre>\n\n<p>Render:</p>\n\n<pre><code> render() {\n      return (     \n\n\n     &lt;div className=\"container\"&gt;\n     &lt;center&gt;\n               &lt;div className=\"keyformwrap\"&gt;\n                     &lt;form method=\"post\" name=\"instantform\" onSubmit={this.instantform}&gt;\n                            &lt;br /&gt;\n\n                           &lt;label&gt;User name&lt;/label&gt;\n                           &lt;input\n                                     type=\"text\"\n                                     id=\"Username\"\n                                     name =\"Username\"\n                                     placeholder=\"Your User name...\"\n                                     value = {this.state.fields.Username}\n                                     onChange ={e =&gt; this.change(e)}\n                                    /&gt;\n                           &lt;label&gt;User Lastname&lt;/label&gt;\n\n                            &lt;input type=\"text\" id=\"Fullname\"\n                                             name =\"Fullname\"\n                                             placeholder=\"Your Full name..\"\n                                             value = {this.state.fields.Fullname}\n                                             onChange ={e =&gt; this.change(e)}\n                                         /&gt;\n                           &lt;label&gt;Department&lt;/label&gt;\n                           &lt;input type=\"text\" id=\"department\"\n                                             name =\"department\"\n                                             placeholder=\"Your department..\"\n                                             value = {this.state.fields.department}\n                                             onChange ={e =&gt; this.change(e)}\n                                         /&gt;\n                           &lt;label&gt;Email &lt;/label&gt;\n                           &lt;input\n                                   type=\"text\" id=\"Email\"\n                                     name =\"Email\"\n                                     placeholder=\"Your Hotel  ID..\"\n                                     value = {this.state.fields.Email}\n                                     onChange ={e =&gt; this.change(e)}\n                                    /&gt;\n\n                           &lt;label&gt;Password&lt;/label&gt;\n                            &lt;input\n                                     type=\"password\"\n                                     id=\"password\"\n                                     name =\"password\"\n                                     placeholder=\"Your User Password...\"\n                                     value = {this.state.fields.password}\n                                     onChange ={e =&gt; this.change(e)}\n                                    /&gt;\n                           &lt;label&gt;Retrive property   * &lt;/label&gt;&lt;input type=\"submit\" value=\"Submit\"  /&gt;\n                           &lt;p&gt;{JSON.stringify(this.state.fields)}&lt;/p&gt;\n                    &lt;/form&gt;               \n              &lt;/div&gt;\n              &lt;/center&gt;\n        &lt;/div&gt;\n  );\n }\n}\n</code></pre>\n\n<p>App.js:</p>\n\n<pre><code>    import React, { Component } from 'react';\nimport './App.css';\n//import './Temp.css';\n\nimport Insert from \"./Insert.js\";\nimport Design_bookingcom  from \"./Design_bookingcom.js\";\n\n\n\nclass App extends Component {\n\n  render() {\n      return (        \n        &lt;div &gt;\n           &lt;Insert /&gt;\n        &lt;/div&gt;\n    );\n  }\n}\nexport default App;\n</code></pre>\n\n<p>Perl file \ninsert.js</p>\n\n<pre><code>    #!/usr/bin/perl\nuse CGI qw(:all);\n\nuse LWP::UserAgent;\nuse HTTP::Request;\nuse HTTP::Headers;                                               \nuse HTTP::Response;                                              \nuse Data::Dumper;\nuse Encode;\nuse LWP::Simple::Post(\"post_xml\");\nuse XML::Simple;\nuse CGI;\nuse JSON;\nuse DBI;\n\nmy $cgi = new CGI;\nmy $json_response;\nmy $response;\n\n#   Header to fatch the data from react js file \nprint $cgi-&gt;header(\n    -type =&gt; 'text/json',\n    -access_control_allow_origin =&gt; '*',\n    -access_control_allow_headers =&gt; 'content-type',\n    -access_control_allow_methods =&gt; 'POST',\n    -access_control_allow_credentials =&gt; 'true',\n);\n\n#    END\n\n$response =  $cgi-&gt;param('POSTDATA');\nmy $json = decode_json($response);\nmy $username =  $json-&gt;{'Username'};\nmy $Email = $json-&gt;{'Email'};\nmy $Fullname = $json-&gt;{'Fullname'};\nmy $department = $json-&gt;{'department'};\nmy $password = $json-&gt;{'password'};\nmy $driverr=\"mysql\";\nmy $db=\"krunal\";\nmy $driver=\"DBI:$driverr:database=$db\";\nmy $userid=\"root\";\nmy $password=\"passwd\";\nmy $conn =DBI-&gt;connect($driver,$userid,$password) or die $DBI::errstr;\n$qry=\"INSERT INTO employee(emp_id,emp_username,emp_fullname,emp_dept,emp_psasword,emp_email) VALUES('',?,?,?,?,?)\";\n$statement=$conn-&gt;prepare(\"$qry\");\n$statement-&gt;execute($username,$Fullname,$department,$password,$Email);\n$final =    $statement-&gt;finish();\nprint $final;\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4903302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YKE54.jpg?s=128&g=1", "display_name": "Panos", "link": "https://stackoverflow.com/users/4903302/panos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1638, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1551696238, "creation_date": 1490468400, "last_edit_date": 1506544741, "question_id": 43020628, "link": "https://stackoverflow.com/questions/43020628/using-perl-with-reactjs", "title": "Using Perl with ReactJS", "body": "<p>What I am trying to do is run a Perl script with arguments from ReactJS and return results. For my purpose, the same could be achieved if I could run console commands through ReactJS. Eventually, I plan to make this into an electronic app. Any suggested methods? Thank you.</p>\n"}, {"tags": ["perl", "scripting", "warnings"], "comments": [{"owner": {"reputation": 179, "user_id": 1932773, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/MfgpO.jpg?s=128&g=1", "display_name": "Nico Rittner", "link": "https://stackoverflow.com/users/1932773/nico-rittner"}, "edited": false, "score": 0, "creation_date": 1490464927, "post_id": 43019660, "comment_id": 73127918, "body": "you may catch the warning as follows: <code>perl -w -mstrict -e &#39;$SIG{__WARN__} = sub{ die &quot;died because: &quot;,@_; }; print &quot;foo&quot; + 2;</code> this prints <code>died because: Argument &quot;foo&quot; isn&#39;t numeric in addition (+) at -e line 1.</code> to stderr and exits"}], "answers": [{"comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1490465244, "post_id": 43019903, "comment_id": 73128043, "body": "Note that new warnings may be introduced in future versions of Perl. Avoid <code>FATAL =&gt; &#39;all&#39;</code> in code that needs to be futureproof."}, {"owner": {"reputation": 580, "user_id": 126351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dd45aeeb332098ae5891d9004ae9104?s=128&d=identicon&r=PG", "display_name": "yic", "link": "https://stackoverflow.com/users/126351/yic"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1490466430, "post_id": 43019903, "comment_id": 73128469, "body": "Thank you, that did it absolutely!  @duskwuff : this is a paranoid script, so its suitable for this use-case."}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 5, "last_activity_date": 1490464486, "creation_date": 1490464486, "answer_id": 43019903, "question_id": 43019660, "link": "https://stackoverflow.com/questions/43019660/perl-exit-on-warning/43019903#43019903", "title": "Perl exit on warning", "body": "<p>The <a href=\"http://perldoc.perl.org/warnings.html#Fatal-Warnings\" rel=\"noreferrer\">warnings</a> pragma has the FATAL option:</p>\n\n<pre><code>use warnings FATAL =&gt; 'all';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 5, "last_activity_date": 1490466239, "last_edit_date": 1490466239, "creation_date": 1490465933, "answer_id": 43020162, "question_id": 43019660, "link": "https://stackoverflow.com/questions/43019660/perl-exit-on-warning/43020162#43020162", "title": "Perl exit on warning", "body": "<p>toolic's answer of <code>use warnings FATAL =&gt; 'all';</code> is correct, but there are some caveats. There are some warnings emitted by internal perl functions that really don't expect to be dying. There's a list of those unsafe-to-fatalize warnings in <a href=\"https://metacpan.org/pod/strictures\" rel=\"noreferrer\"><code>perldoc strictures</code></a>.</p>\n\n<p>As of version 2.000003 of <code>strictures</code>, it enables warnings as follows:</p>\n\n<pre><code>use warnings FATAL =&gt; 'all';\nuse warnings NONFATAL =&gt; qw(\n  exec\n  recursion\n  internal\n  malloc\n  newline\n  experimental\n  deprecated\n  portable\n);\nno warnings 'once';\n</code></pre>\n\n<p>See <a href=\"https://metacpan.org/pod/strictures#CATEGORY-SELECTIONS\" rel=\"noreferrer\">https://metacpan.org/pod/strictures#CATEGORY-SELECTIONS</a> for the full rationale.</p>\n\n<p>Instead of copy/pasting the above lines into your code, you could of course just</p>\n\n<pre><code>use strictures 2;\n</code></pre>\n\n<p>which also enables <code>strict</code> for you.\n(You might have to install <code>strictures</code> first, though.)</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1490490624, "creation_date": 1490490624, "answer_id": 43023861, "question_id": 43019660, "link": "https://stackoverflow.com/questions/43019660/perl-exit-on-warning/43023861#43023861", "title": "Perl exit on warning", "body": "<p>Not mentioned yet, but you can set a <code>__WARN__</code> handler and do what you like there.</p>\n\n<pre><code>$SIG{__WARN__} = sub {\n    die \"This program does not tolerate warnings like: @_\";        \n};\n</code></pre>\n"}], "owner": {"reputation": 580, "user_id": 126351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dd45aeeb332098ae5891d9004ae9104?s=128&d=identicon&r=PG", "display_name": "yic", "link": "https://stackoverflow.com/users/126351/yic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 43019903, "answer_count": 3, "score": 4, "last_activity_date": 1490490624, "creation_date": 1490463259, "last_edit_date": 1490466300, "question_id": 43019660, "link": "https://stackoverflow.com/questions/43019660/perl-exit-on-warning", "title": "Perl exit on warning", "body": "<p>I'd like a perl script to exit with error code immediately on any kind of warning.\nFor example, on an \"argument ... isn't numeric in addition\" warning.</p>\n\n<p>How can one do this?\nThank you in advance.</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490461665, "post_id": 43018935, "comment_id": 73126697, "body": "Hash lookup, just like array lookup, is one-directional. Given a key you can find the corresponding value directly, but using a value to find a key doesn&#39;t work, and you would have to write a search."}, {"owner": {"reputation": 13, "user_id": 7709770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8d05e6b99a0b1e46f89f621483a3430f?s=128&d=identicon&r=PG&f=1", "display_name": "orangepeel", "link": "https://stackoverflow.com/users/7709770/orangepeel"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490461855, "post_id": 43018935, "comment_id": 73126768, "body": "is there any way to flip it so that I could have multiple keys for the same value?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490462051, "post_id": 43018935, "comment_id": 73126838, "body": "The values of a hash are independent, but you can set them to the same <i>value</i>. You could build a hash with eight keys\u2014the strings in your arrays\u2014and either <code>numbers</code> or <code>fruit</code> as values."}, {"owner": {"reputation": 13, "user_id": 7709770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8d05e6b99a0b1e46f89f621483a3430f?s=128&d=identicon&r=PG&f=1", "display_name": "orangepeel", "link": "https://stackoverflow.com/users/7709770/orangepeel"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490462526, "post_id": 43018935, "comment_id": 73127032, "body": "Okay, thanks for your help. The only problem I see is that the arrays will not be the same every time so I am unable to add them permanently as keys."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490463049, "post_id": 43018935, "comment_id": 73127238, "body": "Then you need to build your hash at run time in a <code>for</code> loop, or using <code>map</code> as in the answer below."}], "answers": [{"tags": [], "owner": {"reputation": 103376, "user_id": 712649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tP0yV.jpg?s=128&g=1", "display_name": "Mathias R. Jessen", "link": "https://stackoverflow.com/users/712649/mathias-r-jessen"}, "is_accepted": false, "score": 0, "last_activity_date": 1490460031, "creation_date": 1490460031, "answer_id": 43019044, "question_id": 43018935, "link": "https://stackoverflow.com/questions/43018935/using-an-element-in-a-hash-of-arrays-to-access-the-key/43019044#43019044", "title": "Using an element in a Hash of Arrays to access the key", "body": "<p>You could create two distinct hashes:</p>\n\n<pre><code>my %hash1 = map { $_ =&gt; \"numbers\" } @array1;\nmy %hash2 = map { $_ =&gt; \"fruit\" } @array2;\n</code></pre>\n\n<p>and concatenate them:</p>\n\n<pre><code>my %hash = (%hash1, %hash2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1407, "user_id": 1379631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43196d39cc9385202a4719cc64a4f71?s=128&d=identicon&r=PG&f=1", "display_name": "reflective_mind", "link": "https://stackoverflow.com/users/1379631/reflective-mind"}, "is_accepted": false, "score": 1, "last_activity_date": 1490472723, "last_edit_date": 1490472723, "creation_date": 1490470674, "answer_id": 43021068, "question_id": 43018935, "link": "https://stackoverflow.com/questions/43018935/using-an-element-in-a-hash-of-arrays-to-access-the-key/43021068#43021068", "title": "Using an element in a Hash of Arrays to access the key", "body": "<p>As already mentioned by Borodin in the comments, there is no direct way to accomplish this. But you could do it in the following way:</p>\n\n<pre><code>sub getKeyByValue {\n    my ($hashref, $val) = @_; # get sub arguments\n    for (keys %$hashref) {\n        # find key by value and give back the key\n        return $_ if grep $_ eq $val, @{$hashref-&gt;{$_}};\n    }\n    return undef; # value not found\n}\n\nmy $key = getKeyByValue(\\%hash, 'banana');\nprint $key;\n</code></pre>\n\n<p>Output: <code>fruit</code></p>\n\n<p>Just give the hash reference and your desired value to the subroutine <code>getKeyByValue()</code> and it will return the corresponding key. If the value can't be found, the subroutine will return the undefined value <code>undef</code>. If your data structure is really big, this trivial search is obviously not the most efficient solution.</p>\n\n<p>Note: If the value <code>banana</code> is stored several times (under more than one key), then this subroutine will of course only return the first random match (key). You have to modify the subroutine if you are interested in all the keys under which <code>banana</code> is possibly stored.</p>\n\n<p>There are many ways to do this, like most of the time in Perl. For example you could reverse the hash and create a new one (see example in <a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-look-up-a-hash-element-by-value%3f\" rel=\"nofollow noreferrer\">perlfaq4</a>).</p>\n"}], "owner": {"reputation": 13, "user_id": 7709770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8d05e6b99a0b1e46f89f621483a3430f?s=128&d=identicon&r=PG&f=1", "display_name": "orangepeel", "link": "https://stackoverflow.com/users/7709770/orangepeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490472723, "creation_date": 1490459420, "last_edit_date": 1490461464, "question_id": 43018935, "link": "https://stackoverflow.com/questions/43018935/using-an-element-in-a-hash-of-arrays-to-access-the-key", "title": "Using an element in a Hash of Arrays to access the key", "body": "<p>I have a hash of arrays like this:</p>\n\n<pre><code>my @array1 = (\"one\", \"two\", \"three\", \"four\", \"five\");\nmy @array2 = (\"banana\", \"pear\", \"apple\");\n\nmy %hash = (\n    numbers =&gt; \\@array1,\n    fruit =&gt; \\@array2\n);\n</code></pre>\n\n<p>I would like to use an element of the array to access the key. So for example, if I have \"banana\", I would like to print \"fruit\".</p>\n\n<p>However when I do <code>print $hash{banana}</code> I get \"use of unitialized value in print\". How do I properly access this?</p>\n"}, {"tags": ["perl", "awk", "gawk"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1490457074, "post_id": 43018458, "comment_id": 73124996, "body": "Is this an AI bot pretending?"}, {"owner": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 3, "creation_date": 1490457364, "post_id": 43018458, "comment_id": 73125072, "body": "@krivamsh I cleaned up your question a bit, but you should still <b>add the actual question you  want to ask</b>. Right now it only defines and illustrates the problem"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1490462822, "post_id": 43018458, "comment_id": 73127159, "body": "There&#39;s a million ways we could produce 4 columns per line from your sample input. Post the associated expected output to give us a clue which permutation you actually want and at least tell us what the algorithm should be to identify columns even if you don&#39;t have your own code attempt to post (see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>)."}, {"owner": {"reputation": 1, "user_id": 7766730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656dbe230afd4e76ff58707c557532c2?s=128&d=identicon&r=PG&f=1", "display_name": "dragon007", "link": "https://stackoverflow.com/users/7766730/dragon007"}, "edited": false, "score": 0, "creation_date": 1490546816, "post_id": 43018458, "comment_id": 73148739, "body": "I am sorry guys thought the header will give a clear idea"}, {"owner": {"reputation": 1, "user_id": 7766730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656dbe230afd4e76ff58707c557532c2?s=128&d=identicon&r=PG&f=1", "display_name": "dragon007", "link": "https://stackoverflow.com/users/7766730/dragon007"}, "edited": false, "score": 0, "creation_date": 1490547045, "post_id": 43018458, "comment_id": 73148813, "body": "I have a file with TAB separated. The file in unstructured, i have to make sure that each line should have 4 columns and it should start with number because its represents ID field and ends with number because its phone number filed.  Its not a well defined file (I know at least ID is not null, not sure about the phone number)."}, {"owner": {"reputation": 1, "user_id": 7766730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656dbe230afd4e76ff58707c557532c2?s=128&d=identicon&r=PG&f=1", "display_name": "dragon007", "link": "https://stackoverflow.com/users/7766730/dragon007"}, "reply_to_user": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1490549209, "post_id": 43018458, "comment_id": 73149653, "body": "Thanks for all you help. I am using Stackoverflow for the first time, now I got a feel of it.  thanks for the help greatly appreciated @fvu"}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": -1, "last_activity_date": 1490459942, "creation_date": 1490459942, "answer_id": 43019029, "question_id": 43018458, "link": "https://stackoverflow.com/questions/43018458/i-have-a-tab-separated-file-in-unix-which-has-data-issue/43019029#43019029", "title": "I have a Tab separated file in Unix which has data issue", "body": "<p><code>awk</code> to the rescue!</p>\n\n<p>assumes the all digit fields don't appear except first and last fields</p>\n\n<pre><code>awk 'NR==1; \n     NR&gt;1 {for(i=1;i&lt;=NF;i++) \n             {if($i~/[0-9]+/) s=!s; printf \"%s\", $i (s?OFS:RS)}}' file\n\n\nID  Name    Description Phnumber\n1051 John I am doing good, is this task we need to fix 908342\n10423 rob I am doing good, is this task we need to fix 908341\n1052 Julin rob hain i know what to do just let me do it \" \" \" \" \" \" 908452\n1051 Dave I am doing reporting this week 88889999\n</code></pre>\n\n<p>perhaps set the <code>OFS</code> to <code>\\t</code> to have more structure</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7766730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656dbe230afd4e76ff58707c557532c2?s=128&d=identicon&r=PG&f=1", "display_name": "dragon007", "link": "https://stackoverflow.com/users/7766730/dragon007"}, "is_accepted": true, "score": 0, "last_activity_date": 1491327679, "creation_date": 1491327679, "answer_id": 43214102, "question_id": 43018458, "link": "https://stackoverflow.com/questions/43018458/i-have-a-tab-separated-file-in-unix-which-has-data-issue/43214102#43214102", "title": "I have a Tab separated file in Unix which has data issue", "body": "<p>This did the trick </p>\n\n<p>cat file_name | perl -0pe 's/\\n(?!([0-9]{6}|$)\\t)//g' | perl -0pe 's/\\r(?!([0-9]{6}|$)\\t)//g' | sed '/^$/d' </p>\n"}], "owner": {"reputation": 1, "user_id": 7766730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656dbe230afd4e76ff58707c557532c2?s=128&d=identicon&r=PG&f=1", "display_name": "dragon007", "link": "https://stackoverflow.com/users/7766730/dragon007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 43214102, "answer_count": 2, "score": -3, "last_activity_date": 1491327679, "creation_date": 1490456952, "last_edit_date": 1491057961, "question_id": 43018458, "link": "https://stackoverflow.com/questions/43018458/i-have-a-tab-separated-file-in-unix-which-has-data-issue", "title": "I have a Tab separated file in Unix which has data issue", "body": "<p>I have to make sure each line has 4 columns, but the input data is quite a mess:</p>\n\n<ul>\n<li>The first line is header. </li>\n<li>The second line is valid as it has 4 columns.</li>\n<li>The third is also valid (it's ok if the description field is null)</li>\n</ul>\n\n<p>ID field and \"god bless me\" Last column PNumber is are not null fields.</p>\n\n<p>As one can see 4th line is messed up because of newline character in \"Description column\" it spanned across multiple lines.   </p>\n\n<pre><code>ID  Name    Description Phnumber\n1051    John    5674 I am doing good, is this task we need to fix   908342\n1065    Rohit               9876246\n10402   rob I am    \n    doing good, \n    is this task we need to fix     908341\n105552  \"Julin rob hain\"    i know what to do just let me do it     \n    \"\n    \"\n    \"\n    \"\n    \"\n    \" \n908452   1051   Dave    I am doing reporting this week  88889999\n</code></pre>\n\n<p>Maybe a screenshot will make it easier to see the problem</p>\n\n<p><a href=\"https://i.stack.imgur.com/8OAem.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8OAem.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Each line will start with a number and ends with a number. Each line should have 4 columns.</p>\n\n<p>desired output </p>\n\n<pre><code>ID      Name    Description                                         Phnumber\n1051    John    5674 I am doing good, is this task we need to fix    908342\n1065    Rohit                                                        9876246\n10402   rob   I am doing good, 563 is this task we need to fix       908341\n105552  \"Julin rob hain\" i know what to do just let me do it         908452   \n1051    Dave    I am doing reporting this week                      88889999\n</code></pre>\n\n<p>The data is sample data the actual file has 12 columns. yes in between columns can have numbers and few are date fields (like 2017-03-02)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490421957, "post_id": 43013107, "comment_id": 73115442, "body": "You need to prepend the filename with an absolute path."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490422017, "post_id": 43013107, "comment_id": 73115450, "body": "Can you <a href=\"https://stackoverflow.com/posts/43013107/edit\">edit</a> your post and fix the formatting/indentation?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490422973, "post_id": 43013107, "comment_id": 73115616, "body": "You&#39;re repeating the same code 6 times. Why not just <code>open</code> and <code>close</code> the file once?"}, {"owner": {"reputation": 37, "user_id": 7751442, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fbd38d8d49e2c58ef6cbfecf82af62b?s=128&d=identicon&r=PG&f=1", "display_name": "shrawan", "link": "https://stackoverflow.com/users/7751442/shrawan"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490425050, "post_id": 43013107, "comment_id": 73116012, "body": "1. Can you please explain with an example to prepend the filename with an absolute path as per above code."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1490425249, "post_id": 43013107, "comment_id": 73116052, "body": "<code>&#39;&#47;full&#47;path&#47;to&#47;&#39; . $file</code>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1490426639, "creation_date": 1490426639, "answer_id": 43013716, "question_id": 43013107, "link": "https://stackoverflow.com/questions/43013107/redirect-output-files-in-different-directory/43013716#43013716", "title": "redirect output files in different directory", "body": "<p>The third argument to <code>open()</code> is the full path to the file that you want to open. Currently, you're just giving it the filename. but you can expand that to include the directory as well.</p>\n\n<p>Something like this:</p>\n\n<pre><code>my $dir = '/path/to/some/directory';\n\nopen my $output, '&gt;&gt;', $dir . $string . '_' . $file;\n</code></pre>\n\n<p>You should really be checking the success of the <code>open()</code> call, and it's a bit easier to give a sensible error message if you build the filename into a variable first.</p>\n\n<pre><code>my $dir = '/path/to/some/directory';\nmy $filename = \"$dir${string}_$file\";\n\nopen my $output, '&gt;&gt;', $filename\n  or die \"Can't open $filename: $!\";\n</code></pre>\n\n<p>Note that using <code>${string}</code> instead of <code>$string</code> means that you can use it directly in the string without the name getting tangled up with the following <code>_</code> character.</p>\n\n<p>I'd also strongly recommend dropping your use of prototypes on your subroutine. Perl prototypes are often far more trouble than they are worth.</p>\n\n<p>Also, there's no need to <code>open()</code> and <code>close()</code> your file so many times. Just open it at the top of the loop (it will be automatically closed at the end as <code>$output</code> goes out of scope).</p>\n"}], "owner": {"reputation": 37, "user_id": 7751442, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fbd38d8d49e2c58ef6cbfecf82af62b?s=128&d=identicon&r=PG&f=1", "display_name": "shrawan", "link": "https://stackoverflow.com/users/7751442/shrawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490504867, "creation_date": 1490421740, "last_edit_date": 1490504867, "question_id": 43013107, "link": "https://stackoverflow.com/questions/43013107/redirect-output-files-in-different-directory", "title": "redirect output files in different directory", "body": "<p>I'm new to Perl and trying to put output files in a different directory.piece of code is as below</p>\n\n<pre><code>use File::Basename;\nuse File::Copy;\nuse File::Path; \n\n    foreach my $file (sort({uc($a) cmp uc($b)} keys(%$ch_ref))) {\n        my $num = keys(%{$$ch_ref{$file}});\n             print \"\\n     -&gt; $string $file ($num):\\n\";\n        foreach my $sid (keys(%{$$ch_ref{$file}})) {\n            if ($type == $PRINT_OLD) {\n                open ( my $output, '&gt;&gt;',$file );\n                        print {$output} \"  something\";\n                close ( $output ) or die $!;\n            } \n</code></pre>\n"}, {"tags": ["perl", "lwp"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7764818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/232168b337458f8e7b4305301bf9774b?s=128&d=identicon&r=PG&f=1", "display_name": "L. Scott", "link": "https://stackoverflow.com/users/7764818/l-scott"}, "edited": false, "score": 0, "creation_date": 1490405791, "post_id": 43011498, "comment_id": 73112757, "body": "That was it, thanks!  I&#39;ve been trying to read up on LWP and I wasn&#39;t having much luck.  As for the option, thanks for pointing me in the right direction."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1490404902, "creation_date": 1490404902, "answer_id": 43011498, "question_id": 43011456, "link": "https://stackoverflow.com/questions/43011456/what-arguments-are-missing-from-my-perl-lwp-command/43011498#43011498", "title": "What arguments are missing from my Perl LWP command?", "body": "<p>The problem is you have some non-ASCII quotes in there. Specifically the 2nd and 3rd are U+0201D RIGHT DOUBLE QUOTATION MARK. Because of that, Perl is reading <code>\"https://website.com/image\u201d,\u201d/home/images/image.jpg\"</code> as a single string. So you've only passed one argument to <code>getstore</code>.</p>\n\n<blockquote>\n  <p><em>The manual for LWP does not explain much regarding the \"-e\" option.</em></p>\n</blockquote>\n\n<p><code>-e</code> is an option for perl itself, not LWP::Simple. For more on <code>-e</code> see <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 7764818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/232168b337458f8e7b4305301bf9774b?s=128&d=identicon&r=PG&f=1", "display_name": "L. Scott", "link": "https://stackoverflow.com/users/7764818/l-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 43011498, "answer_count": 1, "score": 1, "last_activity_date": 1490404902, "creation_date": 1490404424, "question_id": 43011456, "link": "https://stackoverflow.com/questions/43011456/what-arguments-are-missing-from-my-perl-lwp-command", "title": "What arguments are missing from my Perl LWP command?", "body": "<p>I'm trying to pull a photo from a webcam, and save it to a file.  This is the command:</p>\n\n<pre><code>/usr/bin/perl -MLWP::Simple -e 'getstore \"https://website.com/image\u201d,\u201d/home/images/image.jpg\"'\n</code></pre>\n\n<p>When I run it, I get the following error: </p>\n\n<p><em>Not enough arguments for LWP::Simple::getstore at -e line 1, at EOF</em></p>\n\n<p>What arguments are missing from my LWP:Simple command?  The manual for LWP does not explain much regarding the \"-e\" option.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1490395756, "post_id": 43009931, "comment_id": 73110339, "body": "Why did you expect <code>qr</code> to be faster? Also, does anything change if you remove <code>$&amp;</code> from your program?"}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1490397016, "post_id": 43009931, "comment_id": 73110762, "body": "@melpomene because the doc says: <i>Precompilation of the pattern into an internal representation at the moment of qr() avoids the need to recompile the pattern every time a match /$pat/ is attempted.</i> Me understand this as: the compilation needs more processing, so it must be slower. (looks like thats not valid). (nothing changes by removing the <code>$&amp;</code>)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1490431837, "post_id": 43009931, "comment_id": 73117588, "body": "But you don&#39;t have <code>&#47;$pat&#47;</code> in your code. All your regexes are static, with no variable interpolation. The only thing <code>qr</code> gives you here is a level of indirection because at the point of the match it has to fetch the contents of <code>$qr</code> and test whether it&#39;s a regex object or a string, whereas <code>=~ &#47;...&#47;</code> stores the regex as part of the match op."}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 1, "creation_date": 1490482921, "post_id": 43009931, "comment_id": 73133160, "body": "Hi there. I started the thread you referenced. The reason I used a named regex reference with <code>qr</code> is because the regex is used in several places in the program. It helps avoid typos as well as confusion with a few other similar-looking regexes to see <code>$valid_steno</code> instead of another long regex, performance questions aside."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490501811, "post_id": 43009931, "comment_id": 73136719, "body": "Re &quot;<i>In the example, it is slower by 50%.</i>&quot;, Not quite. It&#39;s slower by a constant amount."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490501933, "post_id": 43009931, "comment_id": 73136745, "body": "Re &quot;<i>but the truth is - it helps only if the regex contains some &quot;non-static&quot; parts...</i>&quot;, Or more precisely, if you don&#39;t already have a pre-compiled regex"}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1490428092, "post_id": 43012784, "comment_id": 73116669, "body": "Thanks for this insight. But isn&#39;t this kind of weird? It seems from this it is not possible to use a precompiled regex (at runtime) in a match operation without compiling the regex again.  It means it can never be faster to use a compiled a regex?"}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1490441332, "post_id": 43012784, "comment_id": 73120093, "body": "As usually - nice, detailed and helpful answer. Anyway, the <code>qr</code> should be more/better documented. Me asked my collegauoes too, they understands the doc like me, :)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490443632, "post_id": 43012784, "comment_id": 73120755, "body": "@H&#229;konH&#230;gland 1) I haven&#39;t bothered stepping through the code, but I&#39;m guessing it&#39;s not a &quot;full&quot; re-compilation; there&#39;s still a regcomp opcode for each loop iteration, but it only does trivial work like cloning the pre-compiled regex. 2) <code>qr</code> can&#39;t be faster than a constant regex. It <i>can</i> be faster when you interpolate variables into your pattern (although not always; <code>&#47;$foo&#47;</code> inside a loop is only compiled once and cached if <code>$foo</code> never changes, but there&#39;s a string comparison on each iteration; if that is faster than the overhead from <code>qr</code>, then <code>qr</code> still loses. <i>(continued)</i>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490443817, "post_id": 43012784, "comment_id": 73120801, "body": "@H&#229;konH&#230;gland See &quot;The internal mechanics of preparing a regex&quot; on page 350 of <a href=\"https://books.google.com/books?id=sshKXlr32-AC&amp;pg=PA350&amp;lpg=PA350&amp;dq=perl+regex+variable+cache&amp;source=bl&amp;ots=daTW0Q4fMg&amp;sig=tw27iHEkor0cKcuz7I4IfxNWXjA&amp;hl=en&amp;sa=X&amp;ved=0ahUKEwj5pJv1yvHSAhUP2mMKHb9CDP4Q6AEINzAF#v=onepage&amp;q=perl%20regex%20variable%20cache&amp;f=false\" rel=\"nofollow noreferrer\">Mastering Regular Expressions</a> (but ignore the part about the <code>&#47;o</code> modifier, which is out-dated). You can also benchmark this yourself: compare <code>&#39;foo&#39; =~ &#47;$foo&#47;</code> to <code>$qr = qr&#47;$foo&#47;; &#39;foo&#39; =~ $qr</code> when <code>$foo</code> is 100 vs. 1 million characters long."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1490444062, "post_id": 43012784, "comment_id": 73120874, "body": "@cajwine <code>qr</code> can help when you use variables in your pattern. There&#39;s no reason to use it for a constant regex with no modifiers like in your question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1490456787, "post_id": 43012784, "comment_id": 73124906, "body": "All you did was add a layer of indirection. Whether the patterns in <code>@res</code> are compiled or not will make a difference here: <code>for (...) { for my $re (@res) { ... &#47;$re&#47; ... } }</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1490419791, "last_edit_date": 1490419791, "creation_date": 1490418658, "answer_id": 43012784, "question_id": 43009931, "link": "https://stackoverflow.com/questions/43009931/why-is-using-a-regex-pre-compiled-with-qr-slower-than-using-a-constant-regex/43012784#43012784", "title": "Why is using a regex pre-compiled with qr slower than using a constant regex?", "body": "<p>Regex patterns are compiled at compile-time if they don't interpolate. Neither the regex in the <code>qr//</code> operator nor the one in match operator in <code>stdrx</code> interpolate, so both are compiled at compile-time.</p>\n\n<p>The extra 30\u03bcs spent in the <code>qr_rx</code> test is spent \"compiling\" the third regex: The one in the match operator in <code>qr_rx</code>. Don't forget that <code>$_ =~ $re</code> is short for <code>$_ =~ m/$re/</code>. Now, no compilation actually occurs when the whole pattern consists of an interpolated pre-compiled regex because that case is handled specially, but it apparently still takes a bit of time to coax the match op into using the pre-compiled regex. (Maybe it needs to clone it?)</p>\n"}], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 1, "accepted_answer_id": 43012784, "answer_count": 1, "score": 6, "last_activity_date": 1490467775, "creation_date": 1490393282, "last_edit_date": 1495540449, "question_id": 43009931, "link": "https://stackoverflow.com/questions/43009931/why-is-using-a-regex-pre-compiled-with-qr-slower-than-using-a-constant-regex", "title": "Why is using a regex pre-compiled with qr slower than using a constant regex?", "body": "<p>I just saw <a href=\"https://stackoverflow.com/q/43009501/869025\">this question</a> about optimizing a particular regular expression in Perl. I wondered about how many matches my machine could do, so I tried the following simple benchmark:</p>\n\n<ul>\n<li>case 1 - using a regex pre-compiled with <code>qr</code></li>\n<li>case 2 - plain <code>/regex/</code> match</li>\n</ul>\n\n<pre><code>use 5.014;\nuse warnings;\n\nuse Benchmark qw(:all);\n\nmy $str = \"SDZ\";\nmy $qr = qr/S?T?K?P?W?H?R?A?O?\\*?E?U?F?R?P?B?L?G?T?S?D?Z?/;\n\nsay \"match [$&amp;]\" if( $str =~ $qr );\n\nmy $res = timethese(-10, {\n    stdrx =&gt; sub { $str =~ /S?T?K?P?W?H?R?A?O?\\*?E?U?F?R?P?B?L?G?T?S?D?Z?/ },\n    qr_rx =&gt; sub { $str =~ $qr },\n});\n\ncmpthese $res;\n</code></pre>\n\n<p>To my surprise, it gave the following result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>match [SDZ]\nBenchmark: running qr_rx, stdrx for at least 10 CPU seconds...\n     qr_rx: 10 wallclock secs ( 9.99 usr +  0.01 sys = 10.00 CPU) @ 1089794.90/s (n=10897949)\n     stdrx: 11 wallclock secs (10.58 usr +  0.04 sys = 10.62 CPU) @ 1651340.11/s (n=17537232)\n           Rate qr_rx stdrx\nqr_rx 1089795/s    --  -34%\nstdrx 1651340/s   52%    --\n</code></pre>\n\n<p>i.e. the plain <code>$str =~ /regex/</code> is about 50% faster than using <code>$str =~ qr</code>. I expected the opposite result.</p>\n\n<p>Am I doing something wrong? Why am I getting this result?</p>\n\n<h2>EDIT:</h2>\n\n<p>Just <a href=\"https://www.google.sk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjDmaKxoPLSAhVFnBoKHY6DBY0QFggaMAA&amp;url=https%3A%2F%2Fgithub.com%2Fshihyu%2FRegular_Expressions%2Fblob%2Fmaster%2FOreilly.Mastering.Regular.Expressions.3rd.Aug.2006.pdf&amp;usg=AFQjCNEu1ggWvWg_NqBsjcfr3GdAIGLGBg&amp;sig2=9obsF_m4s_NPgouMn3lWog\" rel=\"nofollow noreferrer\">downloaded</a> the cited book, I have much to learn :). But, the cited book also says:</p>\n\n<blockquote>\nIf a regex literal has no variable interpolation, Perl knows that the regex can\u2019t change from use to use, so after the regex is compiled once, that compiled form is saved (\u201ccached\u201d) for use whenever execution again reaches the same code. The regex is examined and compiled just once, no matter how often it\u2019s used during the program\u2019s execution.\n</blockquote>\n\n<p>So, in the above both regexes are <em>literal</em> without variable interpolation. So, the \"precompiled\" regex <strong>should be same fast as the plain one</strong>. In the example, it is slower by 50%.</p>\n\n<p>Ikegami explained why the <code>$str =~ $qr</code> is slower. (and honestly the \"slower\" isn't the right term, because we talking about few microseconds... :)) </p>\n\n<p>BUT the perl docs says:</p>\n\n<blockquote>\n  <p>Precompilation of the <strong>pattern</strong> into an internal representation at\n  the moment of qr() avoids the need to recompile the pattern every time\n  a match /$pat/ is attempted. </p>\n</blockquote>\n\n<p>From the point of view of an ordinary perl user (\"not some high level perl monk\"), this means: <em>precompile your pattern - it will be faster</em>, but the truth is - it helps only if the regex contains some \"non-static\" parts... </p>\n\n<p>Honestly, me still not understand this fully - but got a book and going to learn. :) Maybe one sentence more in the docs - could help beginners do not misunderstand the <code>qr</code> when they starting to learn.</p>\n\n<p>Thank you all!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490391369, "post_id": 43009501, "comment_id": 73108632, "body": "<a href=\"https://blog.codinghorror.com/regular-expressions-now-you-have-two-problems/\" rel=\"nofollow noreferrer\">Regular expressions: Now you have two problems</a>"}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1490392042, "post_id": 43009501, "comment_id": 73108895, "body": "My fault for using &quot;exponentially&quot; in the everyday sense of the word. I&#39;ll edit."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1490393388, "post_id": 43009501, "comment_id": 73109452, "body": "<i>&quot;the variable length might be a speed bottleneck&quot;</i> You shouldn&#39;t work like that. <i>First</i>, write and debug your program; <i>then</i>, if it isn&#39;t fast enough for it&#39;s purpose, <i>profile</i> your program to find where the bottlenecks are; <i>then</i> optimise the bottlenecks. For goodness sake don&#39;t waste ages trying to guess where the bottlenecks are and optimising them before your code is complete"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1490393488, "post_id": 43009501, "comment_id": 73109488, "body": "I wouldn&#39;t worry so much about performance but about legibility... Did you profile before you try to optimize? Your regex does not have complicated stuff, so I don&#39;t know if it&#39;s really a bottleneck."}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 1, "creation_date": 1490393665, "post_id": 43009501, "comment_id": 73109541, "body": "I should have included more info. I ran NYTProf and the very small subroutine calling this regex is in the top 3 slowest parts of the program. My first thought was this regex. If it&#39;s an efficient regex after all (I don&#39;t know how to test individual regexes for speed) then I&#39;ll turn my attention elsewhere."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490394371, "post_id": 43009501, "comment_id": 73109829, "body": "@ErikOlson: How about showing the code of this subroutine?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490394026, "last_edit_date": 1490394026, "creation_date": 1490393609, "answer_id": 43009999, "question_id": 43009501, "link": "https://stackoverflow.com/questions/43009501/optimizing-a-regex-filled-with/43009999#43009999", "title": "Optimizing a regex filled with &#39;?&#39;", "body": "<blockquote>\n  <p>the variable length might be a speed bottleneck</p>\n</blockquote>\n\n<p>You shouldn't work like that</p>\n\n<ul>\n<li><p><em>First</em>, write and debug your program</p></li>\n<li><p><em>then</em>, if it isn't fast enough for it's purpose, <em>profile</em> your program to find where the bottlenecks are</p></li>\n<li><p><em>then</em> optimise the bottlenecks</p></li>\n</ul>\n\n<p>For goodness sake don't spend ages trying to guess where the bottlenecks are and optimising them before your code is complete, as you will more than likely find that you have guessed wrongly and wasted a lot of time</p>\n\n<p>In any case, the regex engine is written in C and is pretty damn fast. I doubt very much whether the short pattern that you have written will take a significant amount of time to test</p>\n\n<blockquote>\n  <p>Each step forward in the regex is a bigger and bigger set of possibilities due to all the\u00a0<code>?</code></p>\n</blockquote>\n\n<p>That isn't true either. At each point in the regex there is only one character to test. The next character in the string either matches it or it doesn't. Either is fine, and the regex engine just goes on to the next step in the pattern. The matching process will be pretty much constant regardless of the string to be matched.</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1490394627, "post_id": 43010056, "comment_id": 73109935, "body": "Wouldn&#39;t <code>&#47;^[STKPWHRAO*EUFRPBLGTSDZ]+\\z&#47;</code> mean any combination of the keys regardless of their order?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 1, "creation_date": 1490395704, "post_id": 43010056, "comment_id": 73110322, "body": "Yes, because <code>STKZDS</code> is a valid sequence of chords: <code>STK</code>, <code>Z</code>, <code>D</code>, <code>S</code>,"}, {"owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 0, "creation_date": 1490411799, "post_id": 43010056, "comment_id": 73113738, "body": "Thanks, great thorough answer. I should have specified that each chord is separated by a space, hence my question. It looks like which regex to use would depend on whether you anticipate more correct or incorrect input, given the performance differences. A side question I have: what does <code>?+</code> mean? I haven&#39;t seen that before."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "edited": false, "score": 1, "creation_date": 1490411886, "post_id": 43010056, "comment_id": 73113748, "body": "Possessive modifier. See perlre. a?+ is the same as (?&gt;a?)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1490403591, "last_edit_date": 1490403591, "creation_date": 1490393952, "answer_id": 43010056, "question_id": 43009501, "link": "https://stackoverflow.com/questions/43009501/optimizing-a-regex-filled-with/43010056#43010056", "title": "Optimizing a regex filled with &#39;?&#39;", "body": "<p>To check if a string is a valid chord, you'd actually need</p>\n\n<pre><code>/^(?=.)S?T?K?P?W?H?R?A?O?\\*?E?U?F?R?P?B?L?G?T?S?D?Z?\\z/s\n</code></pre>\n\n<p>A simple optimization would be to make sure a match is possible.</p>\n\n<pre><code>/^(?=[STKPWHRAO*EUFBLGDZ])S?T?K?P?W?H?R?A?O?\\*?E?U?F?R?P?B?L?G?T?S?D?Z?\\z/s\n</code></pre>\n\n<p>The next step is to eliminate backtracking. That's where time is being lost.</p>\n\n<pre><code>/\n   ^\n   (?=[STKPWHRAO*EUFBLGDZ])\n   S?+ T?+ K?+ P?+ W?+ H?+ R?+ A?+ O?+ \\*?+ E?+\n   U?+ F?+ R?+ P?+ B?+ L?+ G?+ T?+ S?+  D?+ Z?+\n   \\z\n/x\n</code></pre>\n\n<p>Fortunately, even though <code>S</code>, <code>T</code>, <code>P</code> and <code>R</code> appear twice, backtracking could be completely eliminated without trouble. This should virtually the matching time to virtually nothing.</p>\n\n<p>If even that isn't fast enough, the next step is writing a specialized C function. Starting the regex matching engine is expensive, and completely avoidable with a simple function.</p>\n\n<p>Note that the above optimizations only help when the pattern doesn't match. They should be neutral when the pattern matches. The C function, on the other hand, would help even when then pattern matches.</p>\n\n<p>Benchmarks:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse Benchmark qw( cmpthese );\n\nmy %tests = (\n   orig =&gt; q{ $s =~ /^(?=.)S?T?K?P?W?H?R?A?O?\\*?E?U?F?R?P?B?L?G?T?S?D?Z?\\z/s},\n   new  =&gt; q{ $s =~\n      /\n         ^\n         (?=[STKPWHRAO*EUFBLGDZ])\n         S?+ T?+ K?+ P?+ W?+ H?+ R?+ A?+ O?+ \\*?+ E?+\n         U?+ F?+ R?+ P?+ B?+ L?+ G?+ T?+ S?+  D?+ Z?+\n         \\z\n      /x\n   },\n);\n\n$_ = 'use strict; use warnings; our $s; ' . $_\n   for values %tests;\n\n{ say \"Matching:\";     local our $s = \"STAODZ\";   cmpthese(-3, \\%tests); }\n{ say \"Not matching:\"; local our $s = \"STPRSTPR\"; cmpthese(-3, \\%tests); }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Matching:\n         Rate  new orig\nnew  509020/s   -- -29%\norig 712274/s  40%   --\nNot matching:\n         Rate orig  new\norig 158758/s   -- -73%\nnew  579851/s 265%   --\n</code></pre>\n\n<p>Which means<br>\nmatching slowed from 1.40\u03bcs to 1.96\u03bcs (in this case), and<br>\nnon-matching speed up from 6.30\u03bcs to 1.72\u03bcs (in this case).</p>\n\n<hr>\n\n<p>To check if a string is a sequence of valid chords, you'd simply need</p>\n\n<pre><code>/^[STKPWHRAO*EUFBLGDZ]+\\z/\n</code></pre>\n\n<hr>\n\n<p>If you want to extract all the chords in a string, I'd start by extracting the sequences matched by the following, then finding the chords within the extracted sequences:</p>\n\n<pre><code>/([STKPWHRAO*EUFBLGDZ]+)/\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 5253336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9816da99c833fc2df2b3524db2413253?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Olson", "link": "https://stackoverflow.com/users/5253336/erik-olson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 43010056, "answer_count": 2, "score": 3, "last_activity_date": 1490403591, "creation_date": 1490391194, "last_edit_date": 1490392050, "question_id": 43009501, "link": "https://stackoverflow.com/questions/43009501/optimizing-a-regex-filled-with", "title": "Optimizing a regex filled with &#39;?&#39;", "body": "<p>On the stenographic keyboard, there are the keys <code>STKPWHRAO*EUFRPBLGTSDZ</code>. The user presses several keys, then the keys are registered all at once when lifted. It's similar to playing chords on a piano. Example strokes are <code>KAT</code>, <code>TPHOEUGT</code>.</p>\n\n<p>I have a regex which tests for valid steno chords. It can be any number of these keys but they must be in that order. My solution is <code>qr/S?T?K?P?W?H?R?A?O?\\*?E?U?F?R?P?B?L?G?T?S?D?Z?/</code> but since this regex gets called hundreds of times, the variable length might be a speed bottleneck. Each step forward in the regex is a bigger and bigger set of possibilities due to all the <code>?</code></p>\n\n<p>Is there a faster regex approach to this? I need the regex to fail if keys are out of order.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490391086, "post_id": 43009325, "comment_id": 73108517, "body": "If you have an array of all the keys, you could just iterate through it and set undefined values to zero in <code>%data</code>"}, {"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490647782, "post_id": 43009325, "comment_id": 73196898, "body": "my  %data hash&#39;s result is dynamic that means some of the keys values may remain undefined sometimes but again sometimes they may have some integer values. (I am storing all the hash values from a query that may return only one value so my %data will have only one key value pair but I want to print all the values of hash but undefined should remain 0)"}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1490391747, "post_id": 43009502, "comment_id": 73108782, "body": "Note that <code>&quot;&quot;</code> is also false, so if <code>$data{&#39;Plumber&#39;}</code> is <code>&quot;&quot;</code> this will change that to 0. Instead, use the defined-or <code>&#47;&#47;</code> operator which is like <code>||</code> but checks if they&#39;re defined."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490392011, "post_id": 43009502, "comment_id": 73108882, "body": "@Schwern Right, thanks. From the original question I was assuming it&#39;s either numbers or undefined."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490393007, "post_id": 43009502, "comment_id": 73109311, "body": "@Robert: Even with numbers, it would still alter <code>000</code> or <code>0E0</code> to <code>0</code>. It&#39;s best to use defined-or if that&#39;s what you mean."}, {"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490647794, "post_id": 43009502, "comment_id": 73196905, "body": "my  %data hash&#39;s result is dynamic that means some of the keys values may remain undefined sometimes but again sometimes they may have some integer values. (I am storing all the hash values from a query that may return only one value so my %data will have only one key value pair but I want to print all the values of hash but undefined should remain 0)"}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": false, "score": 2, "last_activity_date": 1490392197, "last_edit_date": 1490392197, "creation_date": 1490391195, "answer_id": 43009502, "question_id": 43009325, "link": "https://stackoverflow.com/questions/43009325/how-to-define-or-set-multiple-hash-values-to-zero-for-each-undefined-hash-in-per/43009502#43009502", "title": "How to define or set multiple hash values to zero for each undefined hash in perl", "body": "<p>You can just use a default:</p>\n\n<pre><code>print \"Plumber number: \", ($data{'Plumber'} || 0), \"\\n\";\n</code></pre>\n\n<p>This will use 0 instead of any of Perl's non-true values, e.g., <code>\"\"</code>, <code>0</code>, <code>undef</code>. If you have such values and do not want to use 0 instead, use the <code>//</code> operator instead of <code>'||</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490903131, "post_id": 43009729, "comment_id": 73332850, "body": "thank you..! can you see my edited question and advise, please. anyway, I can&#39;t ask a new question at least for 6 months :)"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490904932, "post_id": 43009729, "comment_id": 73333838, "body": "@PankajKumar Instead of doing <code>$_ &#47;&#47;= 0 for values %report;</code> do <code>$report{$_} &#47;&#47;= 0 for values %map</code>. That will go through all the values in <code>%map</code> like <code>Block</code>, and <code>Hard</code> and make sure they default to 0 in the <code>%report</code>."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1490392255, "last_edit_date": 1495542743, "creation_date": 1490392255, "answer_id": 43009729, "question_id": 43009325, "link": "https://stackoverflow.com/questions/43009325/how-to-define-or-set-multiple-hash-values-to-zero-for-each-undefined-hash-in-per/43009729#43009729", "title": "How to define or set multiple hash values to zero for each undefined hash in perl", "body": "<p>You're probably used to something like Ruby's <code>Hash.new(0)</code>. Perl has several libraries to implement this, <a href=\"https://metacpan.org/pod/Hash::DefaultValue\" rel=\"nofollow noreferrer\">Hash::DefaultValue</a> is from a good author. Trouble is they rely on tying, Perl's odd way of letting an object act like a data type, which is slow and has caveats.</p>\n\n<p>Instead, there's several techniques. Simplest is to apply the default yourself, as in <a href=\"https://stackoverflow.com/a/43009502/14660\">@Robert's answer</a>, but use the defined-or <code>//</code> operator instead of the logical-or <code>||</code> operator.</p>\n\n<pre><code>my $value = $data{'Plumber'} // 0;\n</code></pre>\n\n<p>The difference is subtle, but it protects you from a false value like <code>\"\"</code> from being turned into a 0. Instead, the 0 default will only be used if <code>$data{'Plumber'}</code> contains the undefined value or does not exist.</p>\n\n<hr>\n\n<p>Second, if the set of keys is fixed, you can explicitly set all the values to 0. Again, using the defined-or <code>//=</code> version of <code>||=</code>.</p>\n\n<pre><code>for my $key (@keys) {\n    $data{$key} //= 0;\n}\n</code></pre>\n\n<hr>\n\n<p>There's a few options for encapsulating this default. Simplest is to wrap up your hash in a little class to do this for you.</p>\n\n<pre><code>package MyStuff;\n\nsub new {\n    my $class = shift;\n    my $self = shift;\n\n    return bless $self, $class;\n}\n\nsub get {\n    my $self = shift;\n    my $key = shift;\n\n    return $self-&gt;{$key} // 0;\n}\n</code></pre>\n\n<p>Then...</p>\n\n<pre><code>my $stuff = MyStuff-&gt;new(\\%data);\nmy $val = $stuff-&gt;get(\"Plumber\");\n</code></pre>\n\n<p>There will be the extra overhead of the method call, and users have to adapt to the object interface, but it's faster than tying.</p>\n"}, {"tags": [], "owner": {"reputation": 923, "user_id": 7727546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe3d80f5c8283fb372c4f3aec775df8?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Krupp", "link": "https://stackoverflow.com/users/7727546/benjamin-krupp"}, "is_accepted": false, "score": 1, "last_activity_date": 1492196593, "creation_date": 1492196593, "answer_id": 43417670, "question_id": 43009325, "link": "https://stackoverflow.com/questions/43009325/how-to-define-or-set-multiple-hash-values-to-zero-for-each-undefined-hash-in-per/43417670#43417670", "title": "How to define or set multiple hash values to zero for each undefined hash in perl", "body": "<p>Your use case allows to just preset all values of the hash with <code>0</code>. Add this after <code>my %report;</code>:</p>\n\n<pre><code>@report{values %map} = (0) x keys %map;\n</code></pre>\n\n<p>Why this works:</p>\n\n<p><code>@report{...}</code> sets multiple values of your hash. The values of <code>%map</code> are used as keys for <code>%report</code>. <code>(0) x ...</code> produces a list of zeros. Since the <code>x</code> operator expects a scalar on its right side, <code>keys %map</code> is executed in scalar context and produces the number 5. Therefore <code>%report</code> is filled with its default values and later only the values present in your <code>$stats</code> are overwritten.</p>\n"}], "owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1492196593, "creation_date": 1490390434, "last_edit_date": 1490894679, "question_id": 43009325, "link": "https://stackoverflow.com/questions/43009325/how-to-define-or-set-multiple-hash-values-to-zero-for-each-undefined-hash-in-per", "title": "How to define or set multiple hash values to zero for each undefined hash in perl", "body": "<p>In the code below there are multiple occupations whose value is zero but are not defined in the hash. Example: Plumber is not defined in <code>%data</code> but I need to set <code>$data{'Plumber'}</code> to zero. There may be more than one occupation with no values. I did this with with an if-else, but is there a better way?</p>\n\n<pre><code>#!/usr/bin/perl\nuse Data::Dumper;\n%data = ('Teacher' =&gt; 45, 'Doctor' =&gt; 40,'Driver' =&gt; '10');\nif (exists($data{'Plumber'})) {\n   print \"Number of doctor is $data{'Plumber'}\\n\";\n}\nelse {\n    $data{'Plumber'} = 0;\n    print \"Number of doctor is $data{'Plumber'}\\n\";\n}\nprint Dumper \\%data;\n</code></pre>\n\n<p>Is there any way to set all the undefined values of <code>%data</code> to zero?</p>\n\n<p>The condition is - first check what values in the hash are undefined and set zero to those respective keys not all.</p>\n\n<p>Please see my actual piece of code below: [question edited on 30th March'17]</p>\n\n<pre><code> my %map = (\n blk     =&gt; 'Block',\n hrd     =&gt; 'Hard',\n sft     =&gt; 'Soft',\n success =&gt; 'Success',\n unk     =&gt; 'Unknown',\n );\n my %report;\n for ( `$stats` ) {\n my ($val, $type) = split;\n $report{$map{$type}} = $val;\n }\n \\%report;\n $_ //= 0 for values %report;\n print Dumper \\%report;\n</code></pre>\n\n<p>I am not able to set 0 for all unassigned value within hash %report, \nper below comment, I used <code>$_ //= 0 for values %report;</code> to achieve this but here I got confused when I am mapping two hashes as I am a very beginner in Perl\nFYI.. <code>$stats</code> is a query which I am using to fetch some values from the logs and below the sample output.</p>\n\n<pre><code> 10 blk\n 20 sft\n 50 success\n</code></pre>\n\n<p>any idea how to do with this would be highly appreciated </p>\n"}, {"tags": ["html", "perl", "module", "html-treebuilder"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490385148, "post_id": 43007974, "comment_id": 73105626, "body": "What exactly is the problem? As far as I can see, you just want the first two <code>td</code> elements inside each <code>tr</code>."}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490385262, "post_id": 43007974, "comment_id": 73105693, "body": "@Borodin Precisely. I just have no idea how I would approach that. I&#39;ve tried my best to look at tutorials on TreeBuilder, but still can&#39;t figure it out. Sorry and, Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490385432, "post_id": 43007974, "comment_id": 73105782, "body": "Well you already do it with <code>input</code> elements. Just use <code>td</code> and <code>tr</code> instead."}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490385548, "post_id": 43007974, "comment_id": 73105850, "body": "@Borodin I would, but there are multiple <code>td</code> and <code>tr</code> tags in the code. I just shared a clip of it. Thank you for the fast help, dude!"}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490385664, "post_id": 43007974, "comment_id": 73105920, "body": "@Borodin Should I link to the whole html code?+"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490385738, "post_id": 43007974, "comment_id": 73105954, "body": "We can&#39;t help you to exclude the parts you don&#39;t want unless we can see it. Is the <code>class=&quot;rgHeader&quot;</code> unique perhaps? Or you can just pick the Nth table in the page."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490385787, "post_id": 43007974, "comment_id": 73105977, "body": "Yes, I think you will have to."}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490386048, "post_id": 43007974, "comment_id": 73106112, "body": "@Borodin Alright. I&#39;ve edited the thread."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490387610, "post_id": 43007974, "comment_id": 73106852, "body": "It seems that in this document the <code>rgRow</code> in <code>&lt;tr class=&quot;rgRow&quot;</code> gets you to the place you need. So that can be the first <code>look_down</code>, giving you the right rows of the (right) table. Then, in each such node look for <code>td</code> tags and get their values (name, email, phone).  OR, you can pick the table number 2 and use the excellent  <a href=\"http://search.cpan.org/dist/HTML-TableExtract/lib/HTML/TableExtract.pm\" rel=\"nofollow noreferrer\">HTML::TableExtract</a>, in which case you don&#39;t need the to use the <code>TreeBuilder</code>, for this particular task.  (I can post this later, if you don&#39;t manage or if no one else does.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1490387976, "post_id": 43007974, "comment_id": 73107014, "body": "Just noticed that one of the three is <code>&lt;tr class=&quot;rgAltRow&quot;</code>, so the class name is different.  If this implies some functional difference you can search for it separately.  If not, construct the regex to match either <code>rgRow</code> or <code>rgAltRow</code> so to get all nodes with this info. In this document."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 1, "creation_date": 1490387277, "post_id": 43008516, "comment_id": 73106687, "body": "Absolutely stupendous! Not all heroes wear capes ;D"}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1490388878, "post_id": 43008516, "comment_id": 73107473, "body": "I&#39;ve just uncovered an error. When I try to run the script, I get an error on your snippet of code. I feel like it could be something to do with what @zdim said above:  &quot;\t Just noticed that one of the three is &lt;tr class=&quot;rgAltRow&quot;, so the class name is different. If this implies some functional difference you can search for it separately. If not, construct the regex to match either rgRow or rgAltRow so to get all nodes with this info. In this document&quot;   Also, my error is this: <code>Can&#39;t call method &quot;look_down&quot; on an unidentified value at spreadsheet.pl line 174</code>  Thank you both!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 2, "creation_date": 1490390001, "post_id": 43008516, "comment_id": 73108025, "body": "@Ultracrepidarian: My solution works with the data you have published. The class of the <code>tr</code> elements is irrelevant. I can&#39;t debug your code without seeing it, and it needs to be another question if you can&#39;t fix it yourself. Basically you&#39;re calling <code>look_down</code> on something without checking whether the previous search succeeded; the only place my code does that is looking for the initial <code>table</code> element."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1490390701, "post_id": 43008516, "comment_id": 73108355, "body": "@Ultracrepidarian: What have you changed from my code?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1490420370, "post_id": 43008516, "comment_id": 73115161, "body": "@Ultracrepidarian  As for my comment you quote, Borodin is using <code>rgMasterTable</code> (class) from the <code>&lt;table&gt;</code> itself, and then searches for the <code>&lt;tr&gt;</code> and then <code>&lt;td&gt;</code> elements (tags). So this code doesn&#39;t depend on <code>rgRow|rgAltRow</code> (or whatever the class name of <code>td</code> may be).  You must have changed something in this code so look carefully through all of it."}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1490643195, "post_id": 43008516, "comment_id": 73194425, "body": "Thanks for the clarification, zdim. @Borodin I&#39;ve changed a few things. I&#39;ve updated my thread to have a link to my full code. The part I&#39;m having trouble with is line 169 to 179."}, {"owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1490645954, "post_id": 43008516, "comment_id": 73195946, "body": "I&#39;ve fixed that error by just extracting the file directly from the pastebin, as @Borodin did. But now I&#39;m getting another error saying <code>Error open (&lt;) on &#39;1.html&#39;: No such file or directory at spreadsheet.pl line 18.</code> I have no idea why it might be saying this, or even where to start."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "edited": false, "score": 0, "creation_date": 1490652115, "post_id": 43008516, "comment_id": 73198718, "body": "@Ultracrepidarian: You&#39;re raising new issues now, and you need to open a new question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1490387045, "creation_date": 1490387045, "answer_id": 43008516, "question_id": 43007974, "link": "https://stackoverflow.com/questions/43007974/treebuilder-get-embedded-nodes/43008516#43008516", "title": "TreeBuilder Get embedded nodes", "body": "<p></p>\n\n<p>The <code>table</code> element that encloses the data you need has a unique class <code>rgMasterTable</code> so you can search for that in <code>look_down</code></p>\n\n<p>I've written this to demonstrate. It pulls the HTML directly from your pastebin</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse LWP::Simple 'get';\nuse HTML::TreeBuilder;\n\nuse constant URL =&gt; 'http://pastebin.com/raw/qLwu80ZW';\n\nmy $tree = HTML::TreeBuilder-&gt;new_from_content(get URL);\n\nmy ($table) = $tree-&gt;look_down(_tag =&gt; 'table', class =&gt; 'rgMasterTable');\n\nfor my $tr ( $table-&gt;look_down(_tag =&gt; 'tr') ) {\n\n    next unless my @td = $tr-&gt;look_down(_tag =&gt; 'td');\n\n    my ($name, $email) = map { $_-&gt;as_trimmed_text } @td[0,1];\n\n    printf  \"%-17s %s\\n\", $name, $email;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Michael Bowen     mbowen@cpcisd.net\nChristian Calixto calixtoc@cpcisd.net\nRachel Claxton    claxtonr@cpcisd.net\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4513733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a66335f6f21f1781fab79ae683894e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ultracrepidarian", "link": "https://stackoverflow.com/users/4513733/ultracrepidarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 43008516, "answer_count": 1, "score": 0, "last_activity_date": 1490646043, "creation_date": 1490384903, "last_edit_date": 1490646043, "question_id": 43007974, "link": "https://stackoverflow.com/questions/43007974/treebuilder-get-embedded-nodes", "title": "TreeBuilder Get embedded nodes", "body": "<p>Basically, I need to get the names and emails from all of these people in the HTML code.</p>\n\n<pre><code>&lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th scope=\"col\" class=\"rgHeader\" style=\"text-align:center;\"&gt;Name&lt;/th&gt;&lt;th scope=\"col\" class=\"rgHeader\" style=\"text-align:center;\"&gt;Email Address&lt;/th&gt;&lt;th scope=\"col\" class=\"rgHeader\" style=\"text-align:center;\"&gt;School Phone&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;&lt;tbody&gt;\n    &lt;tr class=\"rgRow\" id=\"ctl00_ContentPlaceHolder1_rg_People_ctl00__0\"&gt;\n        &lt;td&gt;\n                            Michael Bowen\n                        &lt;/td&gt;&lt;td&gt;mbowen@cpcisd.net&lt;/td&gt;&lt;td&gt;903-488-3671 ext3200&lt;/td&gt;\n    &lt;/tr&gt;&lt;tr class=\"rgAltRow\" id=\"ctl00_ContentPlaceHolder1_rg_People_ctl00__1\"&gt;\n        &lt;td&gt;\n                            Christian Calixto\n                        &lt;/td&gt;&lt;td&gt;calixtoc@cpcisd.net&lt;/td&gt;&lt;td&gt;903-488-3671 x 3430&lt;/td&gt;\n    &lt;/tr&gt;&lt;tr class=\"rgRow\" id=\"ctl00_ContentPlaceHolder1_rg_People_ctl00__2\"&gt;\n        &lt;td&gt;\n                            Rachel Claxton\n                        &lt;/td&gt;&lt;td&gt;claxtonr@cpcisd.net&lt;/td&gt;&lt;td&gt;903-488-3671 x 3450&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;/tbody&gt;\n\n&lt;/table&gt;&lt;input id=\"ctl00_ContentPlaceHolder1_rg_People_ClientState\" name=\"ctl00_ContentPlaceHolder1_rg_People_ClientState\" type=\"hidden\" autocomplete=\"off\"&gt;    &lt;/div&gt;\n\n\n        &lt;br&gt;\n</code></pre>\n\n<p>I know how to use treebuilder with the nodes and such, and I'm using this code in some of my script.</p>\n\n<pre><code>    my ($file) = @_;\nmy $html = path($file)-&gt; slurp;\nmy $tree = HTML::TreeBuilder-&gt;new_from_content($html);\nmy @nodes = $tree-&gt;look_down(_tag =&gt; 'input');\nmy $val;\nforeach my $node (@nodes) {\n    $val = $node-&gt;look_down('name', qr/\\$txt_Website/)-&gt;attr('value');\n}\nreturn $val;\n</code></pre>\n\n<p>I was going to use the same code for this function, but I realized that I don't have much to search for, since the <code>&lt;td&gt;</code> tag is in so many other places in the script. I'm sure there's a better way to approach this problem, but I can't seem to find it.</p>\n\n<p>LINK TO HTML CODE: <a href=\"http://pastebin.com/qLwu80ZW\" rel=\"nofollow noreferrer\">http://pastebin.com/qLwu80ZW</a></p>\n\n<p>MY CODE: <a href=\"https://pastebin.com/wGb0eXmM\" rel=\"nofollow noreferrer\">https://pastebin.com/wGb0eXmM</a></p>\n\n<p>Note: I did look on google as much as possible, but I'm not quite sure what I should search for.</p>\n"}, {"tags": ["regex", "linux", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490383612, "post_id": 43006457, "comment_id": 73104829, "body": "Is <code>[\\s?]</code> supposed to match an optional space? Or is it supposed to match a single space or question mark? Because it matches the latter."}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 4, "last_activity_date": 1490382054, "last_edit_date": 1490382054, "creation_date": 1490379534, "answer_id": 43006565, "question_id": 43006457, "link": "https://stackoverflow.com/questions/43006457/accidentally-tried-to-regex-an-array-ref-and-extracted-the-word-linux/43006565#43006565", "title": "Accidentally tried to regex an array-ref and extracted the word &#39;linux&#39;", "body": "<p><code>$1</code>, <code>$2</code>, etc. are set when there's a successful match. They are not unset if a match fails. You're seeing the value of <code>$1</code> from a previous match in the same scope, e.g.</p>\n\n<pre><code>sub extract_currency {\n    my ($self, $price) = @_;\n\n    $price =~ m/^(.*)[\\s?]\\d/;\n\n    return $1;\n}\n\n'linux' =~ /(\\w+)/;\n\nextract_currency(); # returns 'linux'\n</code></pre>\n\n<p>See the explanation in <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow noreferrer\">perlvar</a>.</p>\n\n<p>For this reason, you should always check the success of a match before using <code>$1</code>, e.g.</p>\n\n<pre><code>sub extract_currency {\n    my ($self, $price) = @_;\n\n    if ($price =~ m/^(.*)[\\s?]\\d/) {\n        return $1;\n    }\n\n    return undef;\n}\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>sub extract_currency {\n    my ($self, $price) = @_;\n\n    my ($currency) = $price =~ m/^(.*)[\\s?]\\d/;\n\n    return $currency; # could be undef\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1490385478, "last_edit_date": 1490385478, "creation_date": 1490381379, "answer_id": 43007076, "question_id": 43006457, "link": "https://stackoverflow.com/questions/43006457/accidentally-tried-to-regex-an-array-ref-and-extracted-the-word-linux/43007076#43007076", "title": "Accidentally tried to regex an array-ref and extracted the word &#39;linux&#39;", "body": "<blockquote>\n  <p><em>Can anyone give some insight to what was happening on a Perl/C level by running a memory location through a regex?</em></p>\n</blockquote>\n\n<p>A regex match requires a string, so it will stringify its operand. The following shows the stringification of references to an unblessed array and a blessed array:</p>\n\n<pre><code>$ perl -e'my $ref = []; CORE::say($ref)'\nARRAY(0x23cb218)\n\n$ perl -e'my $ref = []; bless($ref, \"Class\"); CORE::say($ref)'\nClass=ARRAY(0x29429e8)\n</code></pre>\n\n<p>So,</p>\n\n<pre><code>$ perl -e'CORE::say( [ \"Foo\", \"Bar\" ] =~ /Foo/ ? \"match\" : \"no match\" )'\nno match\n\n$ perl -e'CORE::say( [ \"Foo\", \"Bar\" ] =~ /ARR/ ? \"match\" : \"no match\" )'\nmatch\n</code></pre>\n\n<hr>\n\n<p>What you possibly wanted:</p>\n\n<pre><code>sub extract_currency {\n    my ($self, $price) = @_;\n    return $price =~ /^([^\\d\\s]+)/ ? $1 : undef;\n}\n\n$o-&gt;extract_currency($prices-&gt;[0])\n</code></pre>\n\n<p>Note: Your pattern was broken since it would match everything up to (but excluding) the last digit. It also used <code>$1</code> without checking if the match succeeded, leading to \"random\" output on error.</p>\n"}], "owner": {"reputation": 7, "user_id": 1002557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5760e1233effe5fe0a063754f3e28153?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1002557/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1490385478, "creation_date": 1490379135, "question_id": 43006457, "link": "https://stackoverflow.com/questions/43006457/accidentally-tried-to-regex-an-array-ref-and-extracted-the-word-linux", "title": "Accidentally tried to regex an array-ref and extracted the word &#39;linux&#39;", "body": "<p>I was casually writing a subroutine to do a basic regex and return a matched value.  I didn't realize my input wasn't coming in as a scalar (array-ref) and with the following code, I was returned the word 'linux'.  </p>\n\n<pre><code>sub extract_currency {\n    my ($self, $price) = @_;\n\n    $price =~ m/^(.*)[\\s?]\\d/;\n\n    return $1;\n}\n</code></pre>\n\n<p>Can anyone give some insight to what was happening on a Perl/C level by running a memory location through a regex?  Never came across this before and am curious on how I was able to seemingly extract system information as a result.  </p>\n"}, {"tags": ["regex", "perl", "offset", "skip"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490378740, "post_id": 43006308, "comment_id": 73102068, "body": "Just FYI: <code>\\G</code> matches the start of string or the end of the preceding successful match, I doubt it can help."}, {"owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490378921, "post_id": 43006308, "comment_id": 73102166, "body": "I was trying to use pos() that I thought would &quot;artificially&quot; set the end of the preceding search but I got that wrong"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "edited": false, "score": 0, "creation_date": 1490380336, "post_id": 43006440, "comment_id": 73102981, "body": "Thanks - Extracting a substring surely works, but I should have said that because the buffer is big, I wanted to avoid creating another one. And I was hopping for efficiency because I&#39;m not even asking to look at the skipped chars, so the actual matched position would have been (skipped_chars + found position)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "edited": false, "score": 0, "creation_date": 1490380924, "post_id": 43006440, "comment_id": 73103337, "body": "@philippe_44  The <code>substr</code> won&#39;t copy the whole string ...?  (Unless you mean that the rest of the original is big, too?)"}, {"owner": {"reputation": 440, "user_id": 4439475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b7e07ca108e9447f939816473f2c43?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/4439475/nathan"}, "edited": false, "score": 0, "creation_date": 1490381358, "post_id": 43006440, "comment_id": 73103572, "body": "Sorry. I was thinking C/C++ where you can simply point at that index of the string and it works like a substring with no copying. There is likely something similar in Perl. But regexes are as far as my knowledge of Perl goes."}], "tags": [], "owner": {"reputation": 440, "user_id": 4439475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b7e07ca108e9447f939816473f2c43?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/4439475/nathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1490379076, "creation_date": 1490379076, "answer_id": 43006440, "question_id": 43006308, "link": "https://stackoverflow.com/questions/43006308/perl-regex-start-match-search-after-skip-n-char/43006440#43006440", "title": "Perl regex start match search after (skip) N char", "body": "<p>As far as I understand it, there would be no difference in efficiency. From my understanding of finite automata (which regexes use) every character has to be looped through, anyway. (Otherwise, how would it know when your match starts?) Any regex, (assuming it's been compiled first) will execute in linear time.</p>\n\n<p>If you want to skip a specific number of characters, It might not be a bad idea to take a substring starting at the specified position first, and then apply your regex to that substring.</p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490431062, "post_id": 43008034, "comment_id": 73117385, "body": "Nice update! Just one comment: I think you could also use <code>pos</code> and <code>\\G</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490431299, "post_id": 43008034, "comment_id": 73117443, "body": "@H&#229;konH&#230;gland  I tried, <code>\\G</code> seems to have no effect.  (When I leave it out it&#39;s all good.)  One does need <code>&#47;g</code>.  I think for &quot;faking&quot; the &quot;last match&quot; the <code>\\G</code> won&#39;t help. Being unsure I tried all combinations and this appears to be the necessary minimum.  (But I am not sure whether <code>\\G</code> may affect speed.)  It&#39;s tricky :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1593739233, "last_edit_date": 1593739233, "creation_date": 1490385099, "answer_id": 43008034, "question_id": 43006308, "link": "https://stackoverflow.com/questions/43006308/perl-regex-start-match-search-after-skip-n-char/43008034#43008034", "title": "Perl regex start match search after (skip) N char", "body": "<p><em>Benchmarked: as more than a few hundred chars is skipped <code>pos</code> gets much faster than <code>.{N}</code></em></p>\n<hr />\n<p>You can set the position of (after) the &quot;last match&quot; using <a href=\"http://perldoc.perl.org/functions/pos.html\" rel=\"nofollow noreferrer\">pos</a>. For example</p>\n<pre><code>$_ = q(abcdef); \n\nwhile (/(.)/g)  \n{ \n    say &quot;Got $1 at pos &quot;, pos();        \n\n    if (++$cnt == 1) { pos = 4 } \n}\n</code></pre>\n<p>which prints</p>\n<pre>\nGot a at pos 1\nGot e at pos 5\nGot f at pos 6\n</pre>\n<p>And you can set it ahead of doing the match as well, as needed</p>\n<pre><code>$_ = q(abcdef); \n\npos = 4; \n\nwhile (/(.)/g) { say &quot;Got $1 at pos &quot;, pos() }\n</code></pre>\n<p>with</p>\n<pre>\nGot e at pos 5\nGot f at pos 6\n</pre>\n<p>what answers your direct question. The <code>\\G</code> does not affect any of this.</p>\n<p>But I am not sure whether this is better than what you have since <code>.</code> is so simple a &quot;match&quot; that for <code>.{N}</code> the regex engine optimizer may index right into <code>N+1</code> to search for the following pattern.</p>\n<hr />\n<p>As it turns out, this is sensitive to the length of the sequence to be skipped (and crucially for very long ones). With it being hundreds of characters the benchmark favors <code>.{N}</code>, by up to 25% in my tests.  But from around a <code>1_000</code> skipped chars the results reverse rapidly. Ran on v5.16 on a laptop.</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse Benchmark qw(cmpthese);\n\nmy $N = 10_000; # 100; \nmy $rep = 1;\n# Insert  at the beginning a phrase that also matches, for a test\nmy $str = 'G'.'a'x$rep.'G' . 'b'x($N-2-$rep) . 'G'.'X'x$rep.'G';\n\nsub posit {\n    my ($str, $N, $rep) = @_;\n    pos ($str) = $N;\n    my ($res) = $str =~ /(G.{$rep}G)/g;\n    return $res;\n}   \n\nsub match {\n    my ($str, $N, $rep) = @_;\n    my ($res) = $str =~ /.{$N}(G.{$rep}G)/;\n    return $res;\n}   \n\nsay &quot;posit: &quot;, posit($str,$N,$rep), &quot; and match: &quot;, match($str,$N,$rep);\nsay &quot;Benchmark skipping first $N positions\\n&quot;;\n\ncmpthese(-10, {\n    posit =&gt; sub { my $res = posit ($str, $N, $rep) },\n    match =&gt; sub { my $res = match ($str, $N, $rep) },\n}); \n</code></pre>\n<p>Note that we must have <code>/g</code> in the regex for <code>pos</code> to have any effect. The result</p>\n<pre>\nposit: GXG and match: GXG\nBenchmark skipping first 10000 positions\n\n          Rate match posit\nmatch 125252/s    --  -70%\nposit 414886/s  231%    --\n</pre>\n<p>Interestingly, using a hard coded <code>GXG</code> string considerably changes results in all cases (and always benefits the winner). However, this parameter is likely passed and interpolated so I still use <code>$rep</code>. Changing it has no effect, as expected, so I leave it short and simple.</p>\n<p>Finally, the question specifies a &quot;<em>large buffer</em>.&quot;  When I set <code>$N</code> above to <code>100_000</code> I get</p>\n<pre>\nQuantifier in {,} bigger than 32766 in regex; marked by ... 100000}(G.{1}G)/ at ...\n</pre>\n<p>So for really large buffers you <em>must</em> use <code>pos()</code>.</p>\n<p>Note that <code>pos</code> also has side effects, influencing further operation.  See docs.</p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "edited": false, "score": 0, "creation_date": 1490423938, "post_id": 43008919, "comment_id": 73115793, "body": "Thanks - That answers the question. I still don&#39;t know why I was not able to have  $str =~ m/\\G(G.{$M}G)/s; to work ... but anyway, as the method1 is faster, this is perfect"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1490446691, "last_edit_date": 1490446691, "creation_date": 1490388633, "answer_id": 43008919, "question_id": 43006308, "link": "https://stackoverflow.com/questions/43006308/perl-regex-start-match-search-after-skip-n-char/43008919#43008919", "title": "Perl regex start match search after (skip) N char", "body": "<p>I tested the speed of the two approaches:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nuse Benchmark qw(:all);\nuse Getopt::Long qw(GetOptions);\n\nGetOptions( \"case=i\" =&gt; \\my $case ) or die(\"Error in command line arguments\\n\");\n\nmy $num_cases = 5;\nsub case1 { return (187, 2000) };\nsub case2 { return (5, 10000) };\nsub case3 { return (5, 20000) };\nsub case4 { return (10000, 20000) };\nsub case5 { return (5, 40000) };\n\nmy @cases = ( $case );\nif ( !defined $case ) {\n    @cases = 1..$num_cases;\n}\nfor my $case ( @cases ) {\n    run_case( $case );\n}\n\nsub run_case {\n    my ( $case ) = @_;\n\n    my $case_coderef = \\&amp;{\"case\" . $case};\n    my ( $M, $N ) = $case_coderef-&gt;();\n    say \"Running case $case: \\$M = $M, \\$N = $N\";\n\n    my $prefix = 'A' x $N;\n    my $middle = 'B' x $M;\n    my $match_str = 'G' . $middle . 'G';\n\n    my $str = $prefix . $match_str;\n\n    my %methods = map {; \"method$_\" =&gt; \\&amp;{\"method\" . $_} } 1..6;\n\n    for my $meth (keys %methods) {\n        my $res = eval {\n            $methods{$meth}-&gt;($str, $M, $N)\n        };\n        if ( $@ ) {\n            print \"$@\";\n            say \"Skipping method '$meth'..\";\n            delete $methods{$meth};\n            next;\n        }   \n        die \"Method '$meth' failed.\\n\" if $res ne $match_str;\n    }\n\n    my %code = map { $_ =&gt; eval ('sub { $methods{' . $_ . '}-&gt;($str, $M, $N) }') } sort keys %methods; \n\n    cmpthese(-5, \\%code );\n}\n\nsub method1 {\n    my ( $str, $M, $N ) = @_;\n    $str =~ m/.{$N}(G.{$M}G)/;\n    return $1;\n}\n\nsub method2 {\n    my ( $str, $M, $N ) = @_;\n    pos( $str ) = $N;\n    $str =~ m/\\G(G.{$M}G)/;\n    return $1;\n}\n\nsub method3 {\n    my ( $str, $M, $N ) = @_;\n    pos( $str ) = $N;\n    $str =~ m/(G.{$M}G)/g;\n    return $1;\n}\n\nsub method4 {\n    my ( $str, $M, $N ) = @_;\n    $str =~ m/.{$N}(G.{$M}G)/s;\n    return $1;\n}\n\nsub method5 {\n    my ( $str, $M, $N ) = @_;\n    pos( $str ) = $N;\n    $str =~ m/\\G(G.{$M}G)/s;\n    return $1;\n}\n\nsub method6 {\n    my ( $str, $M, $N ) = @_;\n    pos( $str ) = $N;\n    $str =~ m/(G.{$M}G)/gs;\n    return $1;\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>Running case 1: $M = 187, $N = 2000\n             Rate method1 method3 method2 method6 method5 method4\nmethod1  696485/s      --    -37%    -39%    -44%    -46%    -57%\nmethod3 1112322/s     60%      --     -3%    -10%    -13%    -32%\nmethod2 1146132/s     65%      3%      --     -7%    -10%    -30%\nmethod6 1234678/s     77%     11%      8%      --     -3%    -24%\nmethod5 1278898/s     84%     15%     12%      4%      --    -21%\nmethod4 1629148/s    134%     46%     42%     32%     27%      --\nRunning case 2: $M = 5, $N = 10000\n             Rate method1 method2 method6 method5 method3 method4\nmethod1  226784/s      --    -72%    -72%    -72%    -72%    -78%\nmethod2  801020/s    253%      --     -0%     -2%     -3%    -23%\nmethod6  802386/s    254%      0%      --     -1%     -3%    -23%\nmethod5  814132/s    259%      2%      1%      --     -1%    -22%\nmethod3  823653/s    263%      3%      3%      1%      --    -21%\nmethod4 1046605/s    361%     31%     30%     29%     27%      --\nRunning case 3: $M = 5, $N = 20000\n             Rate method1 method3 method2 method6 method5 method4\nmethod1  122763/s      --    -90%    -90%    -90%    -90%    -92%\nmethod3 1252858/s    921%      --     -0%     -1%     -2%    -23%\nmethod2 1258330/s    925%      0%      --     -1%     -1%    -22%\nmethod6 1265165/s    931%      1%      1%      --     -1%    -22%\nmethod5 1274309/s    938%      2%      1%      1%      --    -21%\nmethod4 1622943/s   1222%     30%     29%     28%     27%      --\nRunning case 4: $M = 10000, $N = 20000\n             Rate method1 method3 method2 method6 method5 method4\nmethod1   90687/s      --    -62%    -62%    -93%    -93%    -94%\nmethod3  236835/s    161%      --     -1%    -81%    -81%    -86%\nmethod2  238334/s    163%      1%      --    -81%    -81%    -85%\nmethod6 1236025/s   1263%    422%    419%      --     -3%    -25%\nmethod5 1270943/s   1301%    437%    433%      3%      --    -22%\nmethod4 1638548/s   1707%    592%    588%     33%     29%      --\nRunning case 5: $M = 5, $N = 40000\nQuantifier in {,} bigger than 32766 in regex; marked by &lt;-- HERE in m/.{ &lt;-- HERE 40000}(G.{5}G)/ at ./p.pl line 83.\nSkipping method 'method4'..\nQuantifier in {,} bigger than 32766 in regex; marked by &lt;-- HERE in m/.{ &lt;-- HERE 40000}(G.{5}G)/ at ./p.pl line 63.\nSkipping method 'method1'..\n             Rate method2 method3 method6 method5\nmethod2 1253528/s      --     -1%     -1%     -2%\nmethod3 1260746/s      1%      --     -0%     -1%\nmethod6 1263378/s      1%      0%      --     -1%\nmethod5 1278718/s      2%      1%      1%      --\n</code></pre>\n\n<p>I ran this on my Laptop using Intel(R) Core(TM) i7-7500U CPU @ 2.70GHz running Ubuntu 16.10, the result shows that using the <code>s</code> modifier can speed up <code>method1</code> dramatically ( compare with <code>method4</code>). But <code>method1</code> or <code>method4</code> cannot be used when <code>$N</code> exceeds 32766.</p>\n"}], "owner": {"reputation": 173, "user_id": 5587018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16ec6e1761227fb76e04356f9aa55d29?s=128&d=identicon&r=PG&f=1", "display_name": "philippe_44", "link": "https://stackoverflow.com/users/5587018/philippe-44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 43008919, "answer_count": 3, "score": 1, "last_activity_date": 1593739233, "creation_date": 1490378571, "last_edit_date": 1490424426, "question_id": 43006308, "link": "https://stackoverflow.com/questions/43006308/perl-regex-start-match-search-after-skip-n-char", "title": "Perl regex start match search after (skip) N char", "body": "<p>Probably basic question, but can't find the answer:\nI have a pattern match regex where I'm looking for 'G', 187 char and 'G' again, in a large buffer. This works well with <code>$s =~ m/(G.{187}G)/s</code>. Sometimes I want to add an offset of <code>N</code> bytes to the search (I don't want to start at position 0 of the buffer). I now I can do <code>$s =~ m/.{N}(G.{187}G)/s</code> but this sounds to me like not very efficient as I don't want to parse at all the beginning buffer (and it might be big). I tried to work with <code>\\G</code> but could not get it to right.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["xml", "perl", "ebay-api"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490376749, "post_id": 43005525, "comment_id": 73100924, "body": "You forgot the opening quote on line 3, <code>&lt;ReviseInventoryStatusRequest</code>. But just adding a double quote there won&#39;t work because your XML contains double quotes. Use <a href=\"http://perldoc.perl.org/perlop.html#q/_STRING_/\" rel=\"nofollow noreferrer\"><code>q&#47;&#47;</code></a> or a <a href=\"http://perldoc.perl.org/perlop.html#%3C%3C_EOF_\" rel=\"nofollow noreferrer\">here-doc</a> instead."}, {"owner": {"reputation": 51, "user_id": 5158979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/406296096231807/picture?type=large", "display_name": "Aarthi Sridhar", "link": "https://stackoverflow.com/users/5158979/aarthi-sridhar"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490377913, "post_id": 43005525, "comment_id": 73101591, "body": "@ThisSuitIsBlackNot Ok that is not the only problem. You didn&#39;t get the point. I want to know if this will work. for example, if I run my code every one hour and the time is 4 am will the quantity change to 0 with this kind of code? That is what I want to know... code edited please check again. $request is working but the same type of code is there for $inventory and that gives me an error"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490378354, "post_id": 43005525, "comment_id": 73101849, "body": "I didn&#39;t get the point because the only code you showed in your original question had a syntax error, which I pointed out for you. Now you&#39;re asking a completely different question about completely different code. But my first comment still applies: you didn&#39;t escape the double quotes in your XML. Escape them with backslashes as you did when you declared <code>$request</code>, or use <code>q&#47;&#47;</code> or a here-doc (my preference)."}], "answers": [{"tags": [], "owner": {"reputation": 14070, "user_id": 4093735, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/6hzqH.png?s=128&g=1", "display_name": "Emipro Technologies Pvt. Ltd.", "link": "https://stackoverflow.com/users/4093735/emipro-technologies-pvt-ltd"}, "is_accepted": false, "score": 2, "last_activity_date": 1490465194, "creation_date": 1490465194, "answer_id": 43020032, "question_id": 43005525, "link": "https://stackoverflow.com/questions/43005525/how-to-update-0-stock-in-ebay-using-perl-ebay-api/43020032#43020032", "title": "How to Update 0 stock in eBay using perl (eBay API)?", "body": "<p>eBay is not allow to set 0 Quantity in <strong>eBay SendBox Account</strong>.</p>\n\n<p>In eBay Production account you can set 0 Quantity and product will not visible for customer.If you search product via item-id then you can see product status is <strong>OUT Of Stock</strong>.</p>\n\n<p>In eBay Production account there is one configuration for <strong>OUT Of Stock</strong> Product.</p>\n\n<p>You can do via Manually Configuration or API.</p>\n\n<ol>\n<li><p>Go to eBay <strong>Seller account</strong> >> <strong>SetUserPreferences</strong> >> set <strong>OutOfStockControlPreference</strong> True.</p></li>\n<li><p>eBay Provide API <strong>SetUserPreferences</strong> as well.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; \n&lt;SetUserPreferencesRequest xmlns=\"urn:ebay:apis:eBLBaseComponents\"&gt; \n  &lt;RequesterCredentials&gt;\n    &lt;eBayAuthToken&gt;ABC...123&lt;/eBayAuthToken&gt;\n  &lt;/RequesterCredentials&gt;\n  &lt;WarningLevel&gt;High&lt;/WarningLevel&gt; \n  &lt;SellerPaymentPreferences&gt;\n    &lt;OutOfStockControlPreference&gt;true&lt;/OutOfStockControlPreference&gt;\n  &lt;/SellerPaymentPreferences&gt;\n&lt;/SetUserPreferencesRequest&gt; \n</code></pre></li>\n</ol>\n\n<p>If in eBay production account <strong>OutOfStockControlPreference</strong> is False then also you are not allow to update 0 stock in eBay.</p>\n\n<p>You can refer eBay API using following link.</p>\n\n<p><a href=\"http://developer.ebay.com/devzone/xml/docs/Reference/eBay/SetUserPreferences.html#Samples\" rel=\"nofollow noreferrer\">http://developer.ebay.com/devzone/xml/docs/Reference/eBay/SetUserPreferences.html#Samples</a></p>\n"}], "owner": {"reputation": 51, "user_id": 5158979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/406296096231807/picture?type=large", "display_name": "Aarthi Sridhar", "link": "https://stackoverflow.com/users/5158979/aarthi-sridhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1562844139, "creation_date": 1490375962, "last_edit_date": 1562844139, "question_id": 43005525, "link": "https://stackoverflow.com/questions/43005525/how-to-update-0-stock-in-ebay-using-perl-ebay-api", "title": "How to Update 0 stock in eBay using perl (eBay API)?", "body": "<p>I would like to create a script in perl/c++ that would change my quantity on eBay to 0 at 4am and to 5 at 1pm everyday and this should happen automatically. I found that I was able to connect to my eBay account through the script but was not able to edit the quantity. </p>\n\n<p>I am getting a syntax error on this part. I have used <code>ReviseInventoryStatusRequest</code></p>\n\n<pre><code>    # define the HTTP header\nmy $objHeader = HTTP::Headers-&gt;new;\n$objHeader-&gt;push_header('X-EBAY-API-COMPATIBILITY-LEVEL' =&gt; '391');\n$objHeader-&gt;push_header('X-EBAY-API-DEV-NAME' =&gt; 'dev id to be given here');\n$objHeader-&gt;push_header('X-EBAY-API-APP-NAME' =&gt; 'app id to be given here');\n$objHeader-&gt;push_header('X-EBAY-API-CERT-NAME' =&gt; 'cert id to be given here');\n$objHeader-&gt;push_header('X-EBAY-API-CALL-NAME' =&gt; 'GeteBayOfficialTime');\n$objHeader-&gt;push_header('X-EBAY-API-SITEID' =&gt; '0');\n$objHeader-&gt;push_header('Content-Type' =&gt; 'text/xml');\n\n# define the XML request\nmy $request =\n    \"&lt;?xml version='1.0' encoding='utf-8'?&gt;\" .\n    \"&lt;GeteBayOfficialTimeRequest xmlns=\\\"urn:ebay:apis:eBLBaseComponents\\\"&gt;\" .\n    \"  &lt;RequesterCredentials&gt;\" .\n    \"    &lt;eBayAuthToken&gt;my token here\n&lt;/eBayAuthToken&gt;\" .\n    \"  &lt;/RequesterCredentials&gt;\" .\n    \"&lt;/GeteBayOfficialTimeRequest&gt;\";\n\nmy $inventory=\n\"&lt;?xml version='1.0' encoding='utf-8'?&gt;\" .\n\"&lt;ReviseInventoryStatusRequest xmlns=\"urn:ebay:apis:eBLBaseComponents\"&gt;\" .\n  \"&lt;RequesterCredentials&gt;\" .\n    \"   &lt;eBayAuthToken&gt;My token here\n&lt;/eBayAuthToken&gt;\" .\n \" &lt;InventoryStatus&gt;\" .\n   \" &lt;ItemID&gt;262906308587&lt;/ItemID&gt;\" .\n    \"&lt;Quantity&gt;0&lt;/Quantity&gt;\" .\n  \"&lt;/InventoryStatus&gt;\" .\n\"&lt;/ReviseInventoryStatusRequest&gt;\";\n\n\n# make the call\nmy $objRequest = HTTP::Request-&gt;new(\n  \"POST\",\n  \"https://api.sandbox.ebay.com/ws/api.dll\",\n  $objHeader,\n  $request,\n$inventory\n);\n\n# deal with the response\nmy $objUserAgent = LWP::UserAgent-&gt;new;\nmy $objResponse = $objUserAgent-&gt;request($objRequest);\nif (!$objResponse-&gt;is_error) {\n  print $objResponse-&gt;content;\n}\nelse {\n  print $objResponse-&gt;error_as_HTML;\n}\n</code></pre>\n\n<p>Would be great if someone could suggest how to edit this code or any other code that can be used to achieve this. Thanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490374323, "post_id": 43004992, "comment_id": 73099498, "body": "Seems like you are trying to extract field #14. Try split and extract field. What have you tried? Please show your code"}, {"owner": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490374981, "post_id": 43004992, "comment_id": 73099921, "body": "Sorry, initially when i posted the command output format was wrong."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490375097, "post_id": 43004992, "comment_id": 73099988, "body": "Ok :) then its field #7 on line2 ? Try <code>perl -anE &#39;say $F[6] if $. == 2&#39; vgs</code>"}, {"owner": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490375415, "post_id": 43004992, "comment_id": 73100154, "body": "This works perfectly. #vgs |perl -anE &#39;say $F[6] if $. == 2&#39;  4.99g"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "edited": false, "score": 0, "creation_date": 1490376006, "post_id": 43005403, "comment_id": 73100485, "body": "What if i have a list of volume groups under VG and say test, test1, user, user1, group, group1 and STDIN from user is group1. Now how would i accomplish to print the #7 corresponding to group1 ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "edited": false, "score": 0, "creation_date": 1490376191, "post_id": 43005403, "comment_id": 73100611, "body": "Try checking if field #1 is equal to <code>group1</code>: <code>perl -anE &#39;say $F[6] if $F[0] eq &quot;group1&quot;&#39; vgs</code>"}, {"owner": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "edited": false, "score": 0, "creation_date": 1490377495, "post_id": 43005403, "comment_id": 73101339, "body": "Thank you so much"}, {"owner": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "edited": false, "score": 0, "creation_date": 1491568778, "post_id": 43005403, "comment_id": 73624609, "body": "Hi, I need your help again. You gave me a one liner which works perfectly and now i&#39;m trying to put the same in a script."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "edited": false, "score": 0, "creation_date": 1491569206, "post_id": 43005403, "comment_id": 73624911, "body": "@sharath Hello. Feel free to contact me by email if you need further assistance with this question."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1490375537, "creation_date": 1490375537, "answer_id": 43005403, "question_id": 43004992, "link": "https://stackoverflow.com/questions/43004992/regex-matching-and-printing-perl/43005403#43005403", "title": "Regex matching and printing perl", "body": "<p>To extract field #7 on line 2 of file <code>vgs</code>:</p>\n\n<pre><code>perl -anE 'say $F[6] if $. == 2' vgs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "is_accepted": false, "score": 0, "last_activity_date": 1491569039, "creation_date": 1491569039, "answer_id": 43278501, "question_id": 43004992, "link": "https://stackoverflow.com/questions/43004992/regex-matching-and-printing-perl/43278501#43278501", "title": "Regex matching and printing perl", "body": "<p>I have come till here but not getting an output.</p>\n\n<pre><code>#!/usr/bin/perl\n\n@vg = system(vgs);\nprint \"Enter the vg name: \";\nchomp($vgname = &lt;STDIN&gt;);\n\n@values = split (' ', $vg);\nforeach $line (@values)\n{\n   if ($vgname eq $line[0])\n   {\n      print \"$line[5]\"\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6691447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Usf78lFeqvc/AAAAAAAAAAI/AAAAAAAAAFs/3zrSua51LMI/photo.jpg?sz=128", "display_name": "sharath", "link": "https://stackoverflow.com/users/6691447/sharath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 43005403, "answer_count": 2, "score": -2, "last_activity_date": 1491569039, "creation_date": 1490374147, "last_edit_date": 1490374914, "question_id": 43004992, "link": "https://stackoverflow.com/questions/43004992/regex-matching-and-printing-perl", "title": "Regex matching and printing perl", "body": "<p>I'm new to perl and i did lot of research on regex to get it right but i'm not able to.</p>\n\n<p>I have an output from a Linux box, when a user chooses test as the VG it should print 4.99g which is the free size left on that particular volume group.</p>\n\n<pre><code># vgs\nVG    #PV #LV #SN Attr   VSize  VFree \ntest    1   3   0 wz--n- 19.99g  4.99g\ntest1   1   0   0 wz--n- 19.99g  50.00m\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1490372658, "post_id": 43004502, "comment_id": 73098379, "body": "Shell interpolation and quoting. Your quotes are getting &#39;parsed&#39; by the shell before being handed to perl."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1490382662, "last_edit_date": 1490382662, "creation_date": 1490376226, "answer_id": 43005609, "question_id": 43004502, "link": "https://stackoverflow.com/questions/43004502/passing-space-contained-values-as-option-to-perl/43005609#43005609", "title": "Passing space contained values as option to perl", "body": "<p>It's because of improper escaping performed by <code>/my/test/script.sh</code>, something along the lines of doing <code>$@</code> or <code>exec $@</code> instead of <code>\"$@\"</code> or <code>exec \"$@\"</code>.</p>\n\n<pre><code>$ cat ./bad\n#!/bin/sh\nexec $@\n\n$ ./bad ./test --myreg='Reg 1'\nOption: Reg\n\n$ cat ./good\n#!/bin/sh\nexec \"$@\"\n\n$ ./good ./test --myreg='Reg 1'\nOption: Reg 1\n</code></pre>\n"}], "owner": {"reputation": 1263, "user_id": 696264, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c3fa04fd8c4245eac2d015a26674bc18?s=128&d=identicon&r=PG", "display_name": "Madhan", "link": "https://stackoverflow.com/users/696264/madhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 43005609, "answer_count": 1, "score": 1, "last_activity_date": 1490382662, "creation_date": 1490372564, "question_id": 43004502, "link": "https://stackoverflow.com/questions/43004502/passing-space-contained-values-as-option-to-perl", "title": "Passing space contained values as option to perl", "body": "<p>Space ignorance issue, when passing perl script with option(space contained value) as argument.</p>\n\n<h1>test.pl</h1>\n\n<pre><code>use strict;\nuse Getopt::Long;\n\nmy $option;\nGetOptions(\n \"myreg=s\"=&gt;\\$option,\n);\n\nprint \"Option: $option\\n\";\n</code></pre>\n\n<p>I have a shell script and when I pass the perl script with option (space contained value) the script print only the option value before to the space.</p>\n\n<pre><code>/my/test/script.sh /my/testing/test.pl --myreg='Reg 1'\n</code></pre>\n\n<p>The above execution prints,</p>\n\n<pre><code>Option: Reg\n</code></pre>\n\n<p>What the issue? Please assist.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1490371687, "last_edit_date": 1490371687, "creation_date": 1490370718, "answer_id": 43003939, "question_id": 43003534, "link": "https://stackoverflow.com/questions/43003534/regex-1-into-variable-interferes-with-another-variable/43003939#43003939", "title": "Regex $1 into variable interferes with another variable", "body": "<p>It's because you used <code>if (//g)</code> instead of <code>if (//)</code>.</p>\n\n<ul>\n<li><code>//g</code> in scalar context sets <code>pos($_)</code><sup>[1]</sup> to where the match left off, or unsets <code>pos($_)</code><sup>[1]</sup> if the match was unsuccessful<sup>[2]</sup>.</li>\n<li><code>//g</code> in scalar context starts matching at position <code>pos($_)</code><sup>[1]</sup>.</li>\n</ul>\n\n<p>For example,</p>\n\n<pre><code>$_ = \"ab\";\nsay /(.)/g ? $1 : \"no match\";  # a\nsay /(.)/g ? $1 : \"no match\";  # b\nsay /(.)/g ? $1 : \"no match\";  # no match\nsay /(.)/g ? $1 : \"no match\";  # a\n</code></pre>\n\n<p>This allows the following to iterate through the matches:</p>\n\n<pre><code>while (/(.)/g) {\n   say $1;\n}\n</code></pre>\n\n<p>Don't use <code>if (//g)</code><sup>[3]</sup>!</p>\n\n<hr>\n\n<ol>\n<li><code>$_</code> is being used to represent the variable being matched against.</li>\n<li>Unless <code>/c</code> is also used.</li>\n<li>Unless you're unrolling a <code>while (//g)</code>, or unless you're using <code>if (//gc)</code> to tokenize.</li>\n</ol>\n"}], "owner": {"reputation": 388, "user_id": 7672005, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-R-OYfkK3E2M/AAAAAAAAAAI/AAAAAAAAABA/6paHCK6AaaY/photo.jpg?sz=128", "display_name": "Zyzyx", "link": "https://stackoverflow.com/users/7672005/zyzyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 43003939, "answer_count": 1, "score": 1, "last_activity_date": 1490371687, "creation_date": 1490369532, "question_id": 43003534, "link": "https://stackoverflow.com/questions/43003534/regex-1-into-variable-interferes-with-another-variable", "title": "Regex $1 into variable interferes with another variable", "body": "<p>I have been struggling with a section of my code for a while now and can't figure it out. Seems to have something to do with how $1 is handled but I cannot find anything relevant.</p>\n\n<p>The regex finds the 16640021 and assigns it to a position in the arrays. </p>\n\n<pre><code>my @one;\nmy @two;\nmy $articleregex = qr/\\s*\\d*\\/\\s*\\d*\\|\\s*(.*?)\\|/p; # $1 = article number\nmy $row = \"   7/  1|        16640021|Taats 3 IP10                       |14-03-03|        |    |        1,0000|st |   | 01|    | N|  0|\";\n\n    if ($row =~ /$articleregex/g) {\n        $one[0] = $1; \n    }\n    if ($row =~ /$articleregex/g) { \n        $two[0] = $1;\n    }\nprint $one[0];\nprint $two[0];\n</code></pre>\n\n<p>Which outputs</p>\n\n<pre><code>Use of uninitialized value in print at perltest3.pl line 13.\n16640021\n</code></pre>\n\n<p>It appears that the designation of $one[0] somehow interferes with that of $two[0]. This seems strange to me as the two variables and their designations should not be interacting in any way</p>\n"}, {"tags": ["perl", "stripe-payments"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 2, "creation_date": 1490365896, "post_id": 43001753, "comment_id": 73093570, "body": "You&#39;d probably be better off using LWP or something rather than shelling out to curl, for performance/security reasons."}], "answers": [{"tags": [], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "is_accepted": false, "score": 2, "last_activity_date": 1490421507, "last_edit_date": 1490421507, "creation_date": 1490365294, "answer_id": 43001929, "question_id": 43001753, "link": "https://stackoverflow.com/questions/43001753/add-extra-card-to-stripe-customer-in-curl/43001929#43001929", "title": "Add extra card to Stripe customer, in Curl?", "body": "<p>Eugh, I knew this would happen!!!! Literally minutes after posting this, I came across:</p>\n\n<p><a href=\"https://stripe.com/docs/api#card_object\" rel=\"nofollow noreferrer\">https://stripe.com/docs/api#card_object</a></p>\n\n<p>So the solution is to just pass the token along via:</p>\n\n<pre><code>my $res = `curl https://api.stripe.com/v1/customers/$USER-&gt;{stripe_customer_id}/sources -u $key: -d source=$in-&gt;{token}`;\n</code></pre>\n\n<p>...and then decode:</p>\n\n<pre><code>my $json = decode_json($res);\n</code></pre>\n\n<p>...and this returns an object with the new card:</p>\n\n<pre><code>$VAR1 = {\n      'object' =&gt; 'card',\n      'address_zip' =&gt; undef,\n      'address_state' =&gt; undef,\n      'fingerprint' =&gt; 'lRvQRC14boreOKjk',\n      'brand' =&gt; 'Visa',\n      'tokenization_method' =&gt; undef,\n      'dynamic_last4' =&gt; undef,\n      'address_zip_check' =&gt; undef,\n      'address_line2' =&gt; undef,\n      'funding' =&gt; 'credit',\n      'exp_month' =&gt; 12,\n      'address_city' =&gt; undef,\n      'metadata' =&gt; {},\n      'id' =&gt; 'card_xxxx',\n      'country' =&gt; 'US',\n      'name' =&gt; 'andy@domain.co.uk',\n      'exp_year' =&gt; 2019,\n      'address_line1' =&gt; undef,\n      'address_country' =&gt; undef,\n      'cvc_check' =&gt; 'pass',\n      'customer' =&gt; 'cus_xxxx',\n      'last4' =&gt; '4242',\n      'address_line1_check' =&gt; undef\n    };\n</code></pre>\n\n<p>...and sure enough, it now shows the extra card associated with the user:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NsC2H.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NsC2H.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Hopefully this helps save someone else the hassle :) </p>\n\n<p>Also, I came across a much better Perl module for doing it programmatically:</p>\n\n<p><a href=\"http://search.cpan.org/~rconover/Net-Stripe-0.30/lib/Net/Stripe.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~rconover/Net-Stripe-0.30/lib/Net/Stripe.pm</a></p>\n"}], "owner": {"reputation": 4155, "user_id": 2006878, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VepQx.jpg?s=128&g=1", "display_name": "Andrew Newby", "link": "https://stackoverflow.com/users/2006878/andrew-newby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1490421507, "creation_date": 1490364815, "question_id": 43001753, "link": "https://stackoverflow.com/questions/43001753/add-extra-card-to-stripe-customer-in-curl", "title": "Add extra card to Stripe customer, in Curl?", "body": "<p>I'm trying to get my head around this. Basically, it looks like there are a ton of PHP/Ruby/Node etc modules, but again a very lacking Perl one (<em>Business::Stripe</em>, that hasn't been updated since 2012!)</p>\n\n<p>So, I've resorted to doing my own updates using curl. It's a bit messy, as I've used the Perl module for the basic customer creation, and then a curl query to subscribe them to a package (as the Perl module doesn't offer \"plans\" as a feature)</p>\n\n<pre><code>  use Business::Stripe;\n  my $stripe     = Business::Stripe-&gt;new(\n    -api_key         =&gt; $CFG-&gt;{stripe_mode}\n  );\n\n  my $cid = $stripe-&gt;customers_create(\n    card =&gt; $_[2],\n    email =&gt; $in-&gt;{email},\n    description =&gt; 'For Site Membership'\n  );\n</code></pre>\n\n<p>Then subscribe with:</p>\n\n<pre><code>   my $sub = `curl https://api.stripe.com/v1/subscriptions -u $key: -d plan=name_$in-&gt;{package} -d customer=$cid`;\n   my $json = decode_json($sub);\n</code></pre>\n\n<p>Now this works... but the problem I'm having, is how do I add a new card to this customer? </p>\n\n<p>I can get the customer object back fine:</p>\n\n<pre><code>   my $sub = `curl https://api.stripe.com/v1/customers/cus_xxxx -u sk_test_KEY:`;\n   my $json = decode_json($sub);\n</code></pre>\n\n<p>...and this gives me all the information on the user. But how do I add a new card for them? I have already got the code that asks for all the card information, and then passes back the token (where the card is associated with), but I'm stumped on the next step. I've tried googling around and I'm not coming up with anything helpful (there are loads of posts about it with example of ruby/node/php, but none is pure curl :/)</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["regex", "perl", "regex-lookarounds"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1490359342, "post_id": 42999774, "comment_id": 73089203, "body": "In regex <code>(?&gt;)</code> it means atomic grouping"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "edited": false, "score": 0, "creation_date": 1490428594, "post_id": 42999909, "comment_id": 73116792, "body": "@mkHun Thanks, I got idea from your answer and got the right one after modifying it a little, Because your solution was missing some validations."}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1490361818, "last_edit_date": 1490361818, "creation_date": 1490359593, "answer_id": 42999909, "question_id": 42999774, "link": "https://stackoverflow.com/questions/42999774/perl-conditional-regex-with-inequalities/42999909#42999909", "title": "Perl conditional regex with inequalities", "body": "<p>In regex <code>(?&gt;)</code> it means <a href=\"http://www.regular-expressions.info/atomic.html\" rel=\"nofollow noreferrer\">atomic grouping.</a> </p>\n\n<p>Group the element so it will stored into <code>$1</code> then compare the <code>$1</code> with number so it should be</p>\n\n<pre><code>if (( ($release =~ /5\\.(\\d)/) &amp;&amp; ($1 &gt; 3) ) &amp;&amp; (($version =~ m/R(\\d)/) &amp;&amp; ($1 &gt;= 3) ) )\n{\n    print \"OK\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 2, "creation_date": 1490360413, "post_id": 43000056, "comment_id": 73089942, "body": "You are always give better answer with new things.  This is called experience  :)"}, {"owner": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "edited": false, "score": 0, "creation_date": 1490428802, "post_id": 43000056, "comment_id": 73116858, "body": "@Borodin Thanks a lot for answer. but I am not allowed to use any other module, as the script is already in use by some other groups in my organization. But I really got a new tool in my perl scripting knowledge."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "edited": false, "score": 0, "creation_date": 1490431925, "post_id": 43000056, "comment_id": 73117612, "body": "@prateekgoyal: You could at least have tried it! The <code>version</code> pragma has been part of perl since v5.10, so you don&#39;t need to install anything. It is even loaded on demand, so you don&#39;t really need the <code>use version</code> statement."}, {"owner": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "edited": false, "score": 0, "creation_date": 1490435711, "post_id": 43000056, "comment_id": 73118555, "body": "@Borodin: Yes Borodin, I have tried it and it works very well. I also went deep into documentation of <code>version</code> and found it very helpful. And if it can be loaded on demand, great!! I am going to use it in my script. Thanks a lot!!"}, {"owner": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "edited": false, "score": 1, "creation_date": 1490436906, "post_id": 43000056, "comment_id": 73118844, "body": "@Borodin Actually this is brilliant. I never thought it can work this simple way."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1490360066, "creation_date": 1490360066, "answer_id": 43000056, "question_id": 42999774, "link": "https://stackoverflow.com/questions/42999774/perl-conditional-regex-with-inequalities/43000056#43000056", "title": "Perl conditional regex with inequalities", "body": "<p>This is really a three-level version string, and I suggest that you use Perl's <code>version</code> facility</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\nuse version;\n\nmy $release = '5.2';\nmy $version = 'R4';\n\nif ( $version =~ /R(\\d+)/ &amp;&amp; version-&gt;parse(\"$release.$1\") ge v5.3.5 ) {\n    say 'OK';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "is_accepted": false, "score": -1, "last_activity_date": 1490428654, "creation_date": 1490428654, "answer_id": 43013957, "question_id": 42999774, "link": "https://stackoverflow.com/questions/42999774/perl-conditional-regex-with-inequalities/43013957#43013957", "title": "Perl conditional regex with inequalities", "body": "<p>I got the correct one after modifying mkhun's solution:</p>\n\n<pre><code>if ((($release =~ /5.3/)) &amp;&amp; (($version =~ m/R(\\d+)(.\\d+)?/) &amp;&amp; ($1 &gt;= 5))\n|| ((($release =~ /5.(\\d)/) &amp;&amp; ($1 &gt; 3)) &amp;&amp; ($version =~ m/R(\\d+)(.\\d+)?/)) )\n{\n    print \"OK\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 4243343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-1RQhwdB4kW8/AAAAAAAAAAI/AAAAAAAAAFQ/x35pbl8QZRM/photo.jpg?sz=128", "display_name": "prateek goyal", "link": "https://stackoverflow.com/users/4243343/prateek-goyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 43000056, "answer_count": 3, "score": -1, "last_activity_date": 1490428654, "creation_date": 1490359204, "question_id": 42999774, "link": "https://stackoverflow.com/questions/42999774/perl-conditional-regex-with-inequalities", "title": "Perl conditional regex with inequalities", "body": "<p>I have one query. I have to match 2 strings in one if condition:</p>\n\n<p>$release = 5.x (Here x should be greater than or equal to 3)\n$version = Rx  (this x should be greater than or equal to 5 if $release is 5.3, otherwise anything is acceptable)</p>\n\n<p>e.g. 5.1R11 is not acceptable, 5.3R4 is not, 5.3R5 is acceptable, and 5.4 R1 is acceptable.</p>\n\n<p>I have written a code like this:</p>\n\n<pre><code>$release = \"5.2\";\n$version = \"R4\";\n\nif ( $release =~ /5.(?&gt;=3)(\\d)/ &amp;&amp; $version =~ m/R(?&gt;=5)(\\d)/ )\n{\n    print \"OK\";\n}\n</code></pre>\n\n<p>How can I write this?</p>\n"}, {"tags": ["perl", "escaping", "code-injection"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1490356531, "post_id": 42998631, "comment_id": 73087390, "body": "What do you mean by &quot;escape from sendmail&quot;?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490358008, "post_id": 42998631, "comment_id": 73088360, "body": "How about <code>close MAIL</code>?  It&#39;s unclear what you want to do."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1490358086, "post_id": 42998631, "comment_id": 73088404, "body": "At a guess, the <code>read</code> is blocking. Because otherwise I can&#39;t tell."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1490360964, "post_id": 42998631, "comment_id": 73090244, "body": "@choroba Based on the code-injection tag, I&#39;d say he&#39;s looking for an exploit that will make sendmail run arbitrary code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1490363529, "post_id": 42998631, "comment_id": 73091994, "body": "@kak, The bigger question here is, are you trying to build a botnet? :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490388505, "post_id": 42998631, "comment_id": 73107294, "body": "Note: You&#39;re missing the newline between the header and the body."}, {"owner": {"reputation": 3, "user_id": 7761999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330da70bbf5611d4333cddba02e71c2f?s=128&d=identicon&r=PG&f=1", "display_name": "kak", "link": "https://stackoverflow.com/users/7761999/kak"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1490601825, "post_id": 42998631, "comment_id": 73166387, "body": "@choroba as ThisSuitIsBlackNot correctly observed im trying to find out if there is a way how to turn this into a RCE (or anything in that regard). And no im not building a botnet, it is just me looking at some really old Perl code and trying to see if anything in it can be leveraged."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490387303, "post_id": 43003336, "comment_id": 73106704, "body": "No need; the existing <code>close(MAIL)</code> will provide the necessary EOF."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 0, "last_activity_date": 1490369016, "creation_date": 1490369016, "answer_id": 43003336, "question_id": 42998631, "link": "https://stackoverflow.com/questions/42998631/escape-from-open/43003336#43003336", "title": "Escape from open()", "body": "<p><code>man sendmail</code> says:</p>\n\n<blockquote>\n  <p>By default, Postfix <strong>sendmail</strong>(1) reads a  message  from  standard  input\n         until  EOF  or  until  it  reads  a  line  with only a . character, and\n         arranges for delivery.  Postfix <strong>sendmail</strong>(1) relies on  the  <strong>postdrop</strong>(1)\n         command to create a queue file in the <strong>maildrop</strong> directory.</p>\n</blockquote>\n\n<p>So you would want your input to contain the sequence <code>\"\\n.\\n\"</code> somewhere.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7761999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330da70bbf5611d4333cddba02e71c2f?s=128&d=identicon&r=PG&f=1", "display_name": "kak", "link": "https://stackoverflow.com/users/7761999/kak"}, "edited": false, "score": 0, "creation_date": 1490602871, "post_id": 43008679, "comment_id": 73166992, "body": "thank you for your answer, it was really informational. i have awarded the correct answer to the first person however. I still am not clear about what happens with the rest of my input that is after the . ? The sendmail exists and the open() closes ?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1490388402, "last_edit_date": 1490388402, "creation_date": 1490387679, "answer_id": 43008679, "question_id": 42998631, "link": "https://stackoverflow.com/questions/42998631/escape-from-open/43008679#43008679", "title": "Escape from open()", "body": "<p>Only one sequence is special to <code>sendmail</code> once it starts reading the body: A line containing a single <code>.</code> signals the end of the input. (EOF does the same.)</p>\n\n<p>That means that if your input contains a line that contains nothing but <code>.</code>, you need to escape it. The default transfer encoding doesn't provide a means of escape, so you will need to specifying a <code>Content-Transfer-Encoding</code> that avoids the issue (e.g. <code>base64</code>) or allows you to escape the period (e.g. <code>quote-printable</code>), and encode the content accordingly.</p>\n\n<hr>\n\n<p>This brings us to the restrictions of the <a href=\"https://en.wikipedia.org/wiki/MIME#Content-Transfer-Encoding\" rel=\"nofollow noreferrer\">content transfer encoding</a> you choose adds.</p>\n\n<p>The default content transfer encoding, <code>7bit</code>, requires lines of no more than 998 octets terminated by CRLF. Those lines may only contain octets in [1,127], and octets 10 and 13 may only appear as part of the line terminator.</p>\n\n<p>If the content transfer encoding you chose isn't suitable to encode your input, you will need to choose a different one.</p>\n\n<hr>\n\n<p>You really should be using something like <a href=\"http://search.cpan.org/perldoc?Email::Sender::Manual::QuickStart\" rel=\"nofollow noreferrer\">Email::Sender</a> instead of working at such a low level.</p>\n"}], "owner": {"reputation": 3, "user_id": 7761999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330da70bbf5611d4333cddba02e71c2f?s=128&d=identicon&r=PG&f=1", "display_name": "kak", "link": "https://stackoverflow.com/users/7761999/kak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 43003336, "answer_count": 2, "score": 0, "last_activity_date": 1490388402, "creation_date": 1490355755, "question_id": 42998631, "link": "https://stackoverflow.com/questions/42998631/escape-from-open", "title": "Escape from open()", "body": "<p>I am a newcomer to Perl, however not to programming in general. I have been looking for any hints how to escape from open() in Perl, but have not been lucky, and that is why I am asking here. </p>\n\n<p>I have a: </p>\n\n<pre><code>$mailprog = '/usr/lib/sendmail';\nopen(MAIL,\"|$mailprog -t\");\n\nread(STDIN, $buffer, 18);\n\nprint MAIL \"To: xxx@xxx.xxx\\n\";\nprint MAIL \"From: xxx@xxx.xxx\\n\";\nprint MAIL \"Subject: xxx\\n\";\nprint MAIL $buffer;\nclose (MAIL);\n</code></pre>\n\n<p>Is there any way how I can shape the input into the $buffer so as to escape from sendmail ? The buffer input length is arbitrary. Input is totally under my control. Thanks a lot for any ideas !</p>\n"}, {"tags": ["perl", "sorting", "substring"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490357575, "post_id": 42998543, "comment_id": 73088085, "body": "<i>&quot;without outer splits&quot;</i> What do you mean by that?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490357671, "post_id": 42998543, "comment_id": 73088146, "body": "<i>&quot;sort this array by second column after \\t&quot;</i> Do you mean the third column?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490361662, "post_id": 42998543, "comment_id": 73090685, "body": "What have you tried? What problems are you having?"}], "answers": [{"tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": true, "score": 2, "last_activity_date": 1490356425, "creation_date": 1490356425, "answer_id": 42998849, "question_id": 42998543, "link": "https://stackoverflow.com/questions/42998543/how-to-sort-an-array-by-substring-perl/42998849#42998849", "title": "How to sort an array by substring, perl", "body": "<p>May be a more elegant way but this will work :</p>\n\n<pre><code>my @arr = ( \"blabla\\t23\\t55\", \"jkdcbx\\t55\\t89\", \"jdxjcl\\t88\\t69\");\nfor (sort {(split(/\\t/,$a))[2] &lt;=&gt; (split(/\\t/,$b))[2]} @arr) {\n    print \"$_\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490357780, "last_edit_date": 1490357780, "creation_date": 1490357477, "answer_id": 42999186, "question_id": 42998543, "link": "https://stackoverflow.com/questions/42998543/how-to-sort-an-array-by-substring-perl/42999186#42999186", "title": "How to sort an array by substring, perl", "body": "<h3>Update</h3>\n\n<p>I've just realised that your question may mean that you want to sort by the <em>third</em> column instead of the second</p>\n\n<p>That would be done by using</p>\n\n<pre><code>my ($aa, $bb) = map { (split /\\t/)[2] } $a, $b;\n</code></pre>\n\n<p>instead</p>\n\n<h3>output</h3>\n\n<pre><code>blabla  23  55\njdxjcl  88  69\njkdcbx  55  89\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p>I always prefer to use <code>map</code> to convert the values from the original data into the function that they should be sorted by</p>\n\n<p>This program demonstrates</p>\n\n<p>I assume you want the values sorted numerically? Unfortunately your example data is already sorted as you describe</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy @arr = (\n    \"blabla\\t23\\t55\",\n    \"jkdcbx\\t55\\t89\",\n    \"jdxjcl\\t88\\t69\",\n);\n\n\nmy @sorted = sort {\n    my ($aa, $bb) = map { (split /\\t/)[1] } $a, $b;\n    $aa &lt;=&gt; $bb;\n} @arr;\n\nsay for @sorted;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>blabla  23  55\njkdcbx  55  89\njdxjcl  88  69\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 1, "last_activity_date": 1490359143, "last_edit_date": 1490359143, "creation_date": 1490358559, "answer_id": 42999529, "question_id": 42998543, "link": "https://stackoverflow.com/questions/42998543/how-to-sort-an-array-by-substring-perl/42999529#42999529", "title": "How to sort an array by substring, perl", "body": "<p>Try this</p>\n\n<pre><code>use warnings;\nuse strict;\nno warnings \"numeric\";\n\nmy @arr = (\n\"blabla\\t23\\t55\",\n\"jkdcbx\\t85\\t89\",\n\"jdxjcl\\t83\\t69\",\n);\n\nmy @result = sort {$a=~s/^[^\\t]*\\t//r &lt;=&gt; $b=~s/^[^\\t]*\\t//r } @arr;\n\n$, = \"\\n\";\n\nprint @result,\"\\n\";\n</code></pre>\n\n<p>I have used following technique with sort for to do it</p>\n\n<p><a href=\"http://perldoc.perl.org/perlrecharclass.html#Negation\" rel=\"nofollow noreferrer\">Negation character class</a></p>\n\n<blockquote>\n  <p>Non-destructive modifier(-r) -  perform non-destructive substitution and return the new value</p>\n</blockquote>\n\n<p>And tured of the warning for numeric</p>\n"}], "owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 42998849, "answer_count": 3, "score": 0, "last_activity_date": 1490359143, "creation_date": 1490355440, "question_id": 42998543, "link": "https://stackoverflow.com/questions/42998543/how-to-sort-an-array-by-substring-perl", "title": "How to sort an array by substring, perl", "body": "<p>So, for example i have array like that:</p>\n\n<pre><code>my @arr = (\n\"blabla\\t23\\t55\",\n\"jkdcbx\\t55\\t89\",\n\"jdxjcl\\t88\\t69\",\n......)\n</code></pre>\n\n<p>And i need to sort this array by second column after \\t, without outer splits. Is it possible to do? </p>\n"}, {"tags": ["perl", "nginx", "web", "mojolicious"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490354968, "post_id": 42996986, "comment_id": 73086363, "body": "What have you tried? What problems are you having?"}, {"owner": {"reputation": 151, "user_id": 1145355, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98f45fcc0c319071fac5ff3d18ce4076?s=128&d=identicon&r=PG", "display_name": "manashb", "link": "https://stackoverflow.com/users/1145355/manashb"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1490356519, "post_id": 42996986, "comment_id": 73087382, "body": "I am new to nginx and Mojolicious. I have done the following - Install nginx and install Mojolicious. Environment - Ubuntu 14.04. Now how can i configure Mojolicious with nginx"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1490365125, "post_id": 42996986, "comment_id": 73093025, "body": "I imagine that <a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Nginx\" rel=\"nofollow noreferrer\">reading the documentation</a> would be a good next step."}], "answers": [{"tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": 4, "last_activity_date": 1490352526, "creation_date": 1490352526, "answer_id": 42997529, "question_id": 42996986, "link": "https://stackoverflow.com/questions/42996986/how-to-setup-mojolicious-with-nginx/42997529#42997529", "title": "How to setup Mojolicious with nginx?", "body": "<p>From the <a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Nginx\" rel=\"nofollow noreferrer\">Mojolicious Nginx</a> documentation:</p>\n\n<p>One of the most popular setups these days is Hypnotoad behind an Nginx reverse proxy, which even supports WebSockets in newer versions.</p>\n\n<pre><code>upstream myapp {\n  server 127.0.0.1:8080;\n}\nserver {\n  listen 80;\n  server_name localhost;\n  location / {\n    proxy_pass http://myapp;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_set_header Host $host;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto $scheme;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 1145355, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98f45fcc0c319071fac5ff3d18ce4076?s=128&d=identicon&r=PG", "display_name": "manashb", "link": "https://stackoverflow.com/users/1145355/manashb"}, "edited": false, "score": 0, "creation_date": 1490357454, "post_id": 42999104, "comment_id": 73088001, "body": "We need to handle http request from browser. Will it be possible without server"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 151, "user_id": 1145355, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98f45fcc0c319071fac5ff3d18ce4076?s=128&d=identicon&r=PG", "display_name": "manashb", "link": "https://stackoverflow.com/users/1145355/manashb"}, "edited": false, "score": 2, "creation_date": 1490357544, "post_id": 42999104, "comment_id": 73088072, "body": "@manashb Please take the time to read the mojolicious documentation, it&#39;s literally the least you could do (well, besides nothing) since you&#39;ve chosen to use the tool"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 151, "user_id": 1145355, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98f45fcc0c319071fac5ff3d18ce4076?s=128&d=identicon&r=PG", "display_name": "manashb", "link": "https://stackoverflow.com/users/1145355/manashb"}, "edited": false, "score": 1, "creation_date": 1490358317, "post_id": 42999104, "comment_id": 73088543, "body": "@manashb - just <b>DO</b> the above. and <b>click</b> the provided  link (yes, click the link in the answer). And you will see, you <i>don&#39;t need the nginx</i>. :)"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 3, "last_activity_date": 1490358431, "last_edit_date": 1490358431, "creation_date": 1490357214, "answer_id": 42999104, "question_id": 42996986, "link": "https://stackoverflow.com/questions/42996986/how-to-setup-mojolicious-with-nginx/42999104#42999104", "title": "How to setup Mojolicious with nginx?", "body": "<p>Ad:</p>\n\n<blockquote>\n  <p>Required to develop a web application using Mojolicious. Therefore\n  required to setup with a web server.</p>\n</blockquote>\n\n<p>isn't true. Just follow the: <a href=\"http://www.mojolicious.org\" rel=\"nofollow noreferrer\">http://www.mojolicious.org</a></p>\n\n<p>put into some file, let say: <code>mojo.pl</code></p>\n\n<pre><code>use Mojolicious::Lite;\nget '/' =&gt; {text =&gt; 'I \u2665 Mojolicious!'};\napp-&gt;start;\n</code></pre>\n\n<p>To run this example with the built-in development web server start it with <code>morbo</code>.</p>\n\n<pre><code>$ morbo mojo.pl\n</code></pre>\n\n<p>it will answer:</p>\n\n<pre><code>Server available at http://127.0.0.1:3000\n</code></pre>\n\n<p>Just <a href=\"http://127.0.0.1:3000\" rel=\"nofollow noreferrer\">CLICK THIS LINK</a> in your browser. You will get</p>\n\n<pre><code>I \u2665 Mojolicious!\n</code></pre>\n\n<p>And could start the development immediatelly. Setting the <code>nginx</code> is enough much-much later - for the deployment.</p>\n"}], "owner": {"reputation": 151, "user_id": 1145355, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98f45fcc0c319071fac5ff3d18ce4076?s=128&d=identicon&r=PG", "display_name": "manashb", "link": "https://stackoverflow.com/users/1145355/manashb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 972, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1490358431, "creation_date": 1490351085, "question_id": 42996986, "link": "https://stackoverflow.com/questions/42996986/how-to-setup-mojolicious-with-nginx", "title": "How to setup Mojolicious with nginx?", "body": "<p>Required to develop a web application using Mojolicious. Therefore required to setup with a web server.</p>\n"}, {"tags": ["perl", "reference"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490352118, "post_id": 42996519, "comment_id": 73084479, "body": "See <a href=\"https://perldoc.perl.org/perldata.html#List-value-constructors\" rel=\"nofollow noreferrer\">perldata</a>:  <code>$foo = (&#39;cc&#39;, &#39;-E&#39;, $bar)</code> assigns the value of variable <code>$bar</code> to the scalar variable <code>$foo</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1490373235, "post_id": 42996519, "comment_id": 73098765, "body": "<code>my $y = [ sort ... ]</code>, OTOH, provides something far more useful."}, {"owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490380514, "post_id": 42996519, "comment_id": 73103085, "body": "@ikegami, as it happens... this is what I wanted in the first place..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490380754, "post_id": 42996519, "comment_id": 73103231, "body": "The people who Answered assumed you knew that (because of the way you phrased your question). I just made sure :)"}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490363518, "post_id": 43000908, "comment_id": 73091986, "body": "@ThisSuitIsBlackNot Isn&#39;t this list context then <code>\\( sort ... )</code> ?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1490363923, "post_id": 43000908, "comment_id": 73092242, "body": "Parentheses don&#39;t change anything. I deleted my comment because I realized <code>\\</code> evaluates its operand in list context: <code>perl -MO=Concise -e&#39;\\sort&#39;</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490364064, "post_id": 43000908, "comment_id": 73092346, "body": "@ThisSuitIsBlackNot Do you know if this behavior of `\\` (backslash) documented anywhere?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490370525, "post_id": 43000908, "comment_id": 73096898, "body": "I can&#39;t find it anywhere."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1490386030, "post_id": 43000908, "comment_id": 73106099, "body": "perlref says &quot;<i>Taking a reference to an enumerated list is not the same as using square brackets--instead it&#39;s the same as creating a list of references!</i>&quot;. By &quot;enumerated list&quot;, it means <code>\\(..., ..., ...)</code>. It mentions special-cases <code>\\(@a)</code> and <code>\\(%h)</code>, but it doesn&#39;t mention that this applies to all operators, not just &quot;enumerated lists&quot;. Patches welcome :)"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 5, "last_activity_date": 1490362456, "creation_date": 1490362456, "answer_id": 43000908, "question_id": 42996519, "link": "https://stackoverflow.com/questions/42996519/how-can-i-use-sort/43000908#43000908", "title": "How can I use `\\sort ...`?", "body": "<p>According to <a href=\"http://perldoc.perl.org/perldata.html#List-value-constructors\" rel=\"noreferrer\">perldata</a> assigning a scalar to a list of values, assigns the last value of the list to the scalar. So</p>\n\n<pre><code>$foo = ('cc', '-E', $bar);\n</code></pre>\n\n<p>assigns the value of variable <code>$bar</code> to the scalar variable <code>$foo</code>.</p>\n\n<p>According to <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"noreferrer\">perlref</a>, \ntaking a reference to an enumerated list is the same as creating a list of references. Hence,</p>\n\n<pre><code>my $y = \\sort qw(one two three four five);\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>my $y = \\(sort qw(one two three four five));\n</code></pre>\n\n<p>which is equivalent to </p>\n\n<pre><code> my $y = \\(sort qw(one two three four five))[-1];\n</code></pre>\n\n<p>which will give a reference to the last value of the sorted list, i.e. the scalar value \"two\".</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1490362566, "creation_date": 1490362566, "answer_id": 43000941, "question_id": 42996519, "link": "https://stackoverflow.com/questions/42996519/how-can-i-use-sort/43000941#43000941", "title": "How can I use `\\sort ...`?", "body": "<p><code>sort</code> returns a list.</p>\n\n<p><code>\\LIST</code> (like <code>\\($x,$y,42)</code>) produces another list containing references to each element of the original list <code>(\\$x,\\$y,\\42)</code>.</p>\n\n<p>So <code>\\sort ...</code> returns references to the elements of a sorted list. </p>\n\n<p>Now in scalar context, <code>$foo = LIST</code> assigns the last element of the list. Putting this altogether,</p>\n\n<pre><code>my $y = \\sort qw(one two three four five);\n</code></pre>\n\n<p>assigns a reference to the last sorted element to <code>$y</code>, or</p>\n\n<pre><code>print $$y;        # \"two\"\n</code></pre>\n\n<p>I can't think of any good use cases for this feature, but that is not very good evidence that one doesn't exist. </p>\n"}], "owner": {"reputation": 35370, "user_id": 180275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4GALY.jpg?s=128&g=1", "display_name": "Ren&#233; Nyffenegger", "link": "https://stackoverflow.com/users/180275/ren%c3%a9-nyffenegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 2, "accepted_answer_id": 43000941, "answer_count": 2, "score": 5, "last_activity_date": 1490362566, "creation_date": 1490349856, "question_id": 42996519, "link": "https://stackoverflow.com/questions/42996519/how-can-i-use-sort", "title": "How can I use `\\sort ...`?", "body": "<p>I am wondering what <code>\\sort ...</code> returns.</p>\n\n<p>After executing the following line</p>\n\n<pre><code>my $y = \\sort qw(one two three four five);\n</code></pre>\n\n<p><code>$y</code> is a reference to a scalar. I actually expected a reference to an array: the array with the sorted elements (five, four, one, three, two). When dereferencing <code>$y</code> (for example <code>print $$y</code>), I get <code>two</code>, the last element of the sorted list.</p>\n\n<p>Is there any useful thing I can to with <code>\\sort(...)</code>?</p>\n"}, {"tags": ["arrays", "perl", "compare"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1490341477, "post_id": 42993980, "comment_id": 73078384, "body": "<a href=\"http://search.cpan.org/dist/Array-Utils/Utils.pm\" rel=\"nofollow noreferrer\">search.cpan.org/dist/Array-Utils/Utils.pm</a>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1490341494, "post_id": 42993980, "comment_id": 73078393, "body": "May be this question as duplicate"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 3, "last_activity_date": 1490341870, "creation_date": 1490341870, "answer_id": 42994117, "question_id": 42993980, "link": "https://stackoverflow.com/questions/42993980/comparison-of-two-arrays-and-finding-the-missing-elements-and-from-which-array-i/42994117#42994117", "title": "comparison of two arrays and finding the missing elements and from which array in perl", "body": "<p>If you put the items of <code>@arr1</code> and <code>@arr2</code> also in hashes, you could do:</p>\n\n<pre><code>my @miss1 = grep { $count{$_} == 1 &amp;&amp; !exists $arr1{$_} } keys %count;\nmy @miss2 = grep { $count{$_} == 1 &amp;&amp; !exists $arr2{$_} } keys %count;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5746602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9571be7208ae102cddb1b8f7e78f8d28?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/5746602/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 42994117, "answer_count": 1, "score": 0, "last_activity_date": 1490346319, "creation_date": 1490341359, "last_edit_date": 1490346319, "question_id": 42993980, "link": "https://stackoverflow.com/questions/42993980/comparison-of-two-arrays-and-finding-the-missing-elements-and-from-which-array-i", "title": "comparison of two arrays and finding the missing elements and from which array in perl", "body": "<p>I have two arrays. I need to find out common element of arrays and what elements are missing and from which array?</p>\n\n<p>I am using the below code to find the common elements in both the arrays and list of missing elements from both arrays.</p>\n\n<p>Can anyone tell me how can I find the list of elements <strong>missing</strong> from each array?</p>\n\n<p>For example:\nIn below code I need to print element <strong>\"ghi\"</strong> missing from <code>@arr2</code> and element <strong>\"mno\"</strong> missing from <code>@arr1</code></p>\n\n<pre><code>my @arr1 = ( \"abc\", \"def\", \"ghi\", \"jkl\" ); \nmy @arr2 = ( \"mno\", \"abc\", \"jkl\", \"def\" );\n\nmy %count = ();\nforeach $element ( @arr1, @arr2 ){\n    $count{$element}++;\n}\nmy @diff = grep { $count{$_} == 1 } keys %count;\nmy @common = grep { $count{$_} == 2 } keys %count;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 10771, "user_id": 2427065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/f0RVn.jpg?s=128&g=1", "display_name": "Sagar V", "link": "https://stackoverflow.com/users/2427065/sagar-v"}, "edited": false, "score": 0, "creation_date": 1490323820, "post_id": 42990582, "comment_id": 73072432, "body": "And what is the issue??"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490323915, "post_id": 42990582, "comment_id": 73072452, "body": "You seem to be missing the <code>s&#47;&#47;&#47;</code> command in your script."}, {"owner": {"reputation": 43, "user_id": 4633061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d646e325b66fbb768b48deda886f66b9?s=128&d=identicon&r=PG", "display_name": "Jessica Paloma", "link": "https://stackoverflow.com/users/4633061/jessica-paloma"}, "edited": false, "score": 0, "creation_date": 1490323947, "post_id": 42990582, "comment_id": 73072464, "body": "not work my code ..."}, {"owner": {"reputation": 43, "user_id": 4633061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d646e325b66fbb768b48deda886f66b9?s=128&d=identicon&r=PG", "display_name": "Jessica Paloma", "link": "https://stackoverflow.com/users/4633061/jessica-paloma"}, "edited": false, "score": 0, "creation_date": 1490323987, "post_id": 42990582, "comment_id": 73072473, "body": "where put s/// ?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490324014, "post_id": 42990582, "comment_id": 73072484, "body": "It should be the whole script. <code>s</code> is for performing replacement of a regular expression."}], "answers": [{"tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1490324083, "creation_date": 1490324083, "answer_id": 42990625, "question_id": 42990582, "link": "https://stackoverflow.com/questions/42990582/perl-regex-match-and-replace/42990625#42990625", "title": "Perl Regex match and replace", "body": "<p>You're missing the <code>s</code> command to perform regexp replacement.</p>\n\n<pre><code>perl -pe 's/&lt;\\/a&gt;/$&amp;\\n /g' teste.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1490324284, "creation_date": 1490324284, "answer_id": 42990650, "question_id": 42990582, "link": "https://stackoverflow.com/questions/42990582/perl-regex-match-and-replace/42990650#42990650", "title": "Perl Regex match and replace", "body": "<p>A plain <code>/xxx/</code> will just perform a match, you need <code>s/xxx/yyy/</code> to perform a single replacement, and a <code>s/xxx/yyy/g</code> to perform multiple replacements.  You may also replace the <code>/</code> with another character such as <code>|</code> so you do not need to escape any characters, which makes it more readable.</p>\n\n<pre><code>perl -pe 's|&lt;/a&gt;|$&amp;\\n|g;' teste.txt\n</code></pre>\n\n<p>Have a look at <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perldoc perlretut</a> for a gentle introduction to perl regular expressions.</p>\n"}], "owner": {"reputation": 43, "user_id": 4633061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d646e325b66fbb768b48deda886f66b9?s=128&d=identicon&r=PG", "display_name": "Jessica Paloma", "link": "https://stackoverflow.com/users/4633061/jessica-paloma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 42990625, "answer_count": 2, "score": -1, "last_activity_date": 1490324284, "creation_date": 1490323767, "question_id": 42990582, "link": "https://stackoverflow.com/questions/42990582/perl-regex-match-and-replace", "title": "Perl Regex match and replace", "body": "<p>I try insert new line after <strong>&lt; /a></strong></p>\n\n<pre><code>I tried this \nperl -pe '/&lt;\\/a&gt; $&amp;\\n /g' teste.txt\n</code></pre>\n\n<p>Example</p>\n\n<pre><code>Source code\n&lt;a href=\"/link/\"&gt;link&lt;/a&gt;&lt;a href=\"/link2/\"&gt;link2&lt;/a&gt;\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>&lt;a href=\"/link/\"&gt;link&lt;/a&gt;\n&lt;a href=\"/link2/\"&gt;link2&lt;/a&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl", "google-bigquery"], "answers": [{"comments": [{"owner": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "edited": false, "score": 1, "creation_date": 1490308027, "post_id": 42987558, "comment_id": 73067878, "body": "That&#39;s an interesting way to add flags.  I tried it (note I am in the Google Big Query environment, and within this environment I&#39;m using Standard SQL, not Legacy SQL).  So I tried it:            REGEXP_CONTAINS(h.page.PagePath, r&#39;(?i)Confirm&#39;)   but I got this message:  Query Failed Error: Syntax error: Parenthesized expression cannot be parsed as an expression, struct constructor, or subquery at [30:22]"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "edited": false, "score": 0, "creation_date": 1490308289, "post_id": 42987558, "comment_id": 73067986, "body": "<a href=\"https://cloud.google.com/bigquery/docs/reference/standard-sql/\" rel=\"nofollow noreferrer\">SQL</a> does not support regex. You may <a href=\"https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions\" rel=\"nofollow noreferrer\">create a UDF</a> though."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "edited": false, "score": 0, "creation_date": 1490309625, "post_id": 42987558, "comment_id": 73068472, "body": "You may always work around the hard-coded cases: <code>&#39;[cC][oO][nN][fF][iI][rR][mM]&#39;</code>"}, {"owner": {"reputation": 10852, "user_id": 4490873, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Lw5RK_vgt0A/AAAAAAAAAAI/AAAAAAAACgg/aW9dKJKqdXc/photo.jpg?sz=128", "display_name": "Mosha Pasumansky", "link": "https://stackoverflow.com/users/4490873/mosha-pasumansky"}, "edited": false, "score": 3, "creation_date": 1490312446, "post_id": 42987558, "comment_id": 73069410, "body": "The (?i) does work fine in BigQuery - here is an example: SELECT REGEXP_CONTAINS(text, r&#39;(?i)confirm&#39;), REGEXP_CONTAINS(text, r&#39;confirm&#39;) FROM (SELECT &#39;I Confirm that it works&#39; text) can you give your actualy query to see where the error is coming from"}, {"owner": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "edited": false, "score": 0, "creation_date": 1490380464, "post_id": 42987558, "comment_id": 73103063, "body": "Update, I had made a typo,  the r&#39;(?i)somestring&#39;  works as intended. This works:                                                                                                                  when REGEXP_CONTAINS(h.page.PagePath, r&#39;(?i)Confirm&#39;) then &#39;XYZZY&#39;"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 20, "last_activity_date": 1490305360, "creation_date": 1490305360, "answer_id": 42987558, "question_id": 42987537, "link": "https://stackoverflow.com/questions/42987537/google-bigquery-possible-to-do-case-insensitive-regexp-match/42987558#42987558", "title": "Google BigQuery possible to do Case-Insensitive REGEXP_Match?", "body": "<p><a href=\"https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators#regexp_contains\" rel=\"noreferrer\"><code>REGEXP_CONTAINS</code></a> uses <a href=\"https://github.com/google/re2/wiki/Syntax\" rel=\"noreferrer\">RE2 library</a>, so you may use inline modifiers like this:</p>\n\n<pre><code>REGEXP_CONTAINS(h.page.PagePath, r'(?i)confirm') \n                                   ^^^^  \n</code></pre>\n\n<p>See RE2 docs:</p>\n\n<blockquote>\n  <p><code>(?flags)</code>&nbsp;&nbsp;&nbsp;&nbsp;set flags within current group; non-capturing\n  ...<br/>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Flags</strong><br/>\n  <code>i</code>&nbsp;&nbsp;case-insensitive (default false)<br/>\n  <code>m</code>&nbsp;&nbsp;multi-line mode: <code>^</code> and <code>$</code> match begin/end line in addition to begin/end text (default false)<br/>\n  <code>s</code>&nbsp;&nbsp;let <code>.</code> match <code>\\n</code> (default false)<br/>\n  <code>U</code>&nbsp;&nbsp;ungreedy: swap meaning of <code>x*</code> and <code>x*?</code>, <code>x+</code> and <code>x+?</code>, etc (default false)<br/><br/>\n  Flag syntax is <code>xyz</code> (set) or <code>-xyz</code> (clear) or <code>xy-z</code> (set <code>xy</code>, clear <code>z</code>).</p>\n</blockquote>\n"}], "owner": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7003, "favorite_count": 1, "accepted_answer_id": 42987558, "answer_count": 1, "score": 6, "last_activity_date": 1490305360, "creation_date": 1490305246, "question_id": 42987537, "link": "https://stackoverflow.com/questions/42987537/google-bigquery-possible-to-do-case-insensitive-regexp-match", "title": "Google BigQuery possible to do Case-Insensitive REGEXP_Match?", "body": "<p>In Google BigQuery I wanted to check for 'confirm' or 'Confirm':</p>\n\n<pre><code>REGEXP_CONTAINS(h.page.PagePath, r'Confirm') or\nREGEXP_CONTAINS(h.page.PagePath, r'confirm'))\n</code></pre>\n\n<p>I am a Perl person and in Perl we do</p>\n\n<pre><code>$foo =~ /confirm/i    # case-insensitive\n</code></pre>\n\n<p>Does Google BigQuery have any flags to modify REGEXP_MATCH?  I did not see any examples in their online docs.</p>\n"}, {"tags": ["perl", "raspberry-pi"], "comments": [{"owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "edited": false, "score": 0, "creation_date": 1490301134, "post_id": 42986315, "comment_id": 73064483, "body": "That&#39;s not an error message, it&#39;s a part of the source code...."}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490301161, "creation_date": 1490301161, "answer_id": 42986426, "question_id": 42986315, "link": "https://stackoverflow.com/questions/42986315/bugzilla-code-on-start/42986426#42986426", "title": "Bugzilla: Code on start", "body": "<p>Assuming that by \"run it\" you mean \"Visited an HTTP URL pointing to your Raspbery Pi on the network in a web browser\" and that by \"this\" you mean \"The source code of the CGI program was rendered in the browser\" then:</p>\n\n<p>You haven't configured Apache to support CGI for whereever you installed Bugzilla.</p>\n\n<p>The <a href=\"https://httpd.apache.org/docs/current/howto/cgi.html\" rel=\"nofollow noreferrer\">Apache manual page</a> covers how to do this in detail. </p>\n\n<p>You'll need to start by loading the module:</p>\n\n<pre><code>LoadModule cgid_module modules/mod_cgid.so\n</code></pre>\n\n<p>and enabling CGI for the location you put Bugzilla:</p>\n\n<pre><code>&lt;Directory \"/path/to/bugzilla/\"&gt;\nOptions +ExecCGI\nAddHandler cgi-script .cgi\n&lt;/Directory&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5996379, "user_type": "registered", "profile_image": "https://graph.facebook.com/947390445316582/picture?type=large", "display_name": "Bhuvanez", "link": "https://stackoverflow.com/users/5996379/bhuvanez"}, "is_accepted": false, "score": -1, "last_activity_date": 1594670454, "creation_date": 1594670454, "answer_id": 62883406, "question_id": 42986315, "link": "https://stackoverflow.com/questions/42986315/bugzilla-code-on-start/62883406#62883406", "title": "Bugzilla: Code on start", "body": "<p>This is helped me</p>\n<pre><code>nano /etc/apache2/sites-available/bugzilla.conf\n</code></pre>\n<p>Paste in the following and save:</p>\n<pre><code>ServerName localhost\n\n&lt;Directory /var/www/html/bugzilla&gt;\n  AddHandler cgi-script .cgi\n  Options +ExecCGI\n  DirectoryIndex index.cgi index.html\n  AllowOverride All\n&lt;/Directory&gt;\n</code></pre>\n<pre><code>$ a2ensite bugzilla\n\n$ a2enmod cgi headers expires\n\n$ service apache2 restart\n</code></pre>\n<p>Referral URL:\n<a href=\"https://bugzilla.readthedocs.io/en/latest/installing/quick-start.html#configure-apache\" rel=\"nofollow noreferrer\">https://bugzilla.readthedocs.io/en/latest/installing/quick-start.html#configure-apache</a></p>\n"}], "owner": {"reputation": 1625, "user_id": 7441341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DteoQ.jpg?s=128&g=1", "display_name": "Feralheart", "link": "https://stackoverflow.com/users/7441341/feralheart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1594670454, "creation_date": 1490300736, "question_id": 42986315, "link": "https://stackoverflow.com/questions/42986315/bugzilla-code-on-start", "title": "Bugzilla: Code on start", "body": "<p>I tried to install Bugzilla on my Raspberry. Everything is greater than the minimum system requirements and I installed perl lib to apache too, but I got this when I wanted to \"run\" it.</p>\n\n<pre><code>#!/usr/bin/perl -T\n# This Source Code Form is subject to the terms of the Mozilla Public\n# License, v. 2.0. If a copy of the MPL was not distributed with this\n# file, You can obtain one at http://mozilla.org/MPL/2.0/.\n#\n# This Source Code Form is \"Incompatible With Secondary Licenses\", as\n# defined by the Mozilla Public License, v. 2.0.\n\nuse 5.10.1;\nuse strict;\nuse warnings;\n\nuse lib qw(. lib);\n\nuse Bugzilla;\nuse Bugzilla::Constants;\nuse Bugzilla::Error;\nuse Bugzilla::Update;\n\n# Check whether or not the user is logged in\nmy $user = Bugzilla-&gt;login(LOGIN_OPTIONAL);\nmy $cgi = Bugzilla-&gt;cgi;\nmy $template = Bugzilla-&gt;template;\nmy $vars = {};\n\n# And log out the user if requested. We do this first so that nothing\n# else accidentally relies on the current login.\nif ($cgi-&gt;param('logout')) {\n    Bugzilla-&gt;logout();\n    $user = Bugzilla-&gt;user;\n    $vars-&gt;{'message'} = \"logged_out\";\n    # Make sure that templates or other code doesn't get confused about this.\n    $cgi-&gt;delete('logout');\n}\n\n# Return the appropriate HTTP response headers.\nprint $cgi-&gt;header();\n\nif ($user-&gt;in_group('admin')) {\n    # If 'urlbase' is not set, display the Welcome page.\n    unless (Bugzilla-&gt;params-&gt;{'urlbase'}) {\n        $template-&gt;process('welcome-admin.html.tmpl')\n          || ThrowTemplateError($template-&gt;error());\n        exit;\n    }\n    # Inform the administrator about new releases, if any.\n    $vars-&gt;{'release'} = Bugzilla::Update::get_notifications();\n}\n\nif ($user-&gt;id) {\n    my $dbh = Bugzilla-&gt;dbh;\n    $vars-&gt;{assignee_count} =\n      $dbh-&gt;selectrow_array(\"SELECT COUNT(*) FROM bugs WHERE assigned_to = ?\n                             AND resolution = ''\", undef, $user-&gt;id);\n    $vars-&gt;{reporter_count} =\n      $dbh-&gt;selectrow_array(\"SELECT COUNT(*) FROM bugs WHERE reporter = ?\n                             AND resolution = ''\", undef, $user-&gt;id);\n    $vars-&gt;{requestee_count} =\n      $dbh-&gt;selectrow_array('SELECT COUNT(DISTINCT bug_id) FROM flags\n                             WHERE requestee_id = ?', undef, $user-&gt;id);\n}\n\n# Generate and return the UI (HTML page) from the appropriate template.\n$template-&gt;process(\"index.html.tmpl\", $vars)\n  || ThrowTemplateError($template-&gt;error());\n</code></pre>\n\n<p>What I missed? Or should I use an another issue tracker? (MantisBT)</p>\n"}, {"tags": ["perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 1223, "user_id": 1525936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d065d45045404c02e464e3dddf1a5cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Paramore", "link": "https://stackoverflow.com/users/1525936/paramore"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1490291449, "post_id": 42983365, "comment_id": 73058908, "body": "I want to sort it as it is in my declaration of the hash variable"}], "answers": [{"comments": [{"owner": {"reputation": 1223, "user_id": 1525936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d065d45045404c02e464e3dddf1a5cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Paramore", "link": "https://stackoverflow.com/users/1525936/paramore"}, "edited": false, "score": 0, "creation_date": 1490291556, "post_id": 42983403, "comment_id": 73058968, "body": "neither by the key  nor by the value. I want to sort it as it is in the declaration of the hash variable"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490291757, "post_id": 42983403, "comment_id": 73059093, "body": "Updated my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1490292572, "last_edit_date": 1490292572, "creation_date": 1490291299, "answer_id": 42983403, "question_id": 42983365, "link": "https://stackoverflow.com/questions/42983365/print-the-contents-of-a-hash-in-insertion-order/42983403#42983403", "title": "Print the contents of a hash in insertion order", "body": "<p>A hash does not record the order in which elements are added to it, so you can't achieve what you want with just a hash.</p>\n\n<p>You could use <a href=\"http://search.cpan.org/perldoc?Tie::IxHash\" rel=\"nofollow noreferrer\">Tie::IxHash</a> to provide something that looks like a hash, but preserves insertion order.</p>\n\n<pre><code>use Tie::IxHash qw( );\n\ntie my %hash, Tie::IxHash =&gt; (\n    ev2 =&gt; 'aaaa',\n    ev1 =&gt; 'bbbb',\n);   \n\nfor my $key ( keys(%hash) ) {\n    my $val = $hash{$key};\n    ...\n}\n</code></pre>\n\n<p>There will be a performance penalty for using Tie::IxHash or similar modules.</p>\n\n<hr>\n\n<p>If you don't need to access arbitrary elements, it would be much faster to simply use an array.</p>\n\n<pre><code>use List::Util qw( pairs );    # 1.29+\n\nmy @pairs = (\n    ev2 =&gt; 'aaaa',\n    ev1 =&gt; 'bbbb',\n);   \n\nfor (pairs(@pairs)) {\n    my ($key, $val) = @$_;\n    ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for (my $i=0; $i&lt;@pairs; ) {\n    my $key = $pairs[$i++];\n    my $val = $pairs[$i++];\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 1, "creation_date": 1490291660, "post_id": 42983420, "comment_id": 73059033, "body": "Since it sounds like this is what OP wants, maybe add some sample code using <code>Hash::Ordered</code>."}, {"owner": {"reputation": 1223, "user_id": 1525936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d065d45045404c02e464e3dddf1a5cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Paramore", "link": "https://stackoverflow.com/users/1525936/paramore"}, "edited": false, "score": 0, "creation_date": 1490291849, "post_id": 42983420, "comment_id": 73059150, "body": "Yes, could you provide some more code please"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 1223, "user_id": 1525936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d065d45045404c02e464e3dddf1a5cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Paramore", "link": "https://stackoverflow.com/users/1525936/paramore"}, "edited": false, "score": 1, "creation_date": 1490292422, "post_id": 42983420, "comment_id": 73059506, "body": "@Paramore Have you taken a look at the documentation for the module? There is an overview in the &quot;SYNOPSIS&quot; section."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1490291341, "creation_date": 1490291341, "answer_id": 42983420, "question_id": 42983365, "link": "https://stackoverflow.com/questions/42983365/print-the-contents-of-a-hash-in-insertion-order/42983420#42983420", "title": "Print the contents of a hash in insertion order", "body": "<p>You can't, exactly. Hashes do not have a \"natural\" order -- the order that elements were assigned is not recorded.</p>\n\n<p>If you really want an ordered hash, use <a href=\"https://metacpan.org/pod/Hash::Ordered\" rel=\"nofollow noreferrer\"><code>Hash::Ordered</code></a>. Or an array.</p>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 3, "last_activity_date": 1490300646, "last_edit_date": 1490300646, "creation_date": 1490292011, "answer_id": 42983618, "question_id": 42983365, "link": "https://stackoverflow.com/questions/42983365/print-the-contents-of-a-hash-in-insertion-order/42983618#42983618", "title": "Print the contents of a hash in insertion order", "body": "<p>The order of the key/value pairs in the list you use to initialize the hash variable is not preserved; by the time the hash variable is populated, that ordering is long gone.</p>\n\n<p>To preserve the order in which the keys were originally added to the hash - which includes the order of any list used to initialize it - you can use the CPAN module <a href=\"https://metacpan.org/pod/Hash::Ordered\" rel=\"nofollow noreferrer\"><code>Hash::Ordered</code></a>.</p>\n\n<p>It has a <code>tie</code> interface, so you can use a <code>Hash::Ordered</code> object as if it were a plain hash. Note that you don't need to quote keys on the left side of <code>=&gt;</code> if they're simple words:</p>\n\n<pre><code>use Hash::Ordered;\n\ntie my %hash, Hash::Ordered =&gt; (\n             ev2 =&gt; 'aaaa',\n             ev1 =&gt; 'bbbb'\n           );\n\nwhile (my ($key, $value) = each %hash) {\n  print \"$key - $value\\n\";\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>ev2 - aaaa\nev1 - bbbb\n</code></pre>\n\n<p>You could also do the loop as in your original code, just without the <code>sort</code>:</p>\n\n<pre><code>for my $key (keys %hash) {\n  print \"$key - $hash{$key}\\n\";\n}\n</code></pre>\n\n<p>But using <code>each</code> saves a hash lookup for each item and returns them in the same order as <code>keys</code>.</p>\n\n<p>@duskwuff suggested <code>Hash::Ordered</code> first; I just supplied some sample code. @ikegami suggested the older module <code>Tie::IxHash</code>. Both work for this purpose, and neither comes standard with Perl; you need to install them from the CPAN (e.g. with the <code>cpan</code> or <code>cpanm</code> commands).</p>\n"}], "owner": {"reputation": 1223, "user_id": 1525936, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d065d45045404c02e464e3dddf1a5cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Paramore", "link": "https://stackoverflow.com/users/1525936/paramore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "closed_date": 1490296806, "accepted_answer_id": 42983403, "answer_count": 3, "score": 0, "last_activity_date": 1490300646, "creation_date": 1490291198, "last_edit_date": 1490292290, "question_id": 42983365, "link": "https://stackoverflow.com/questions/42983365/print-the-contents-of-a-hash-in-insertion-order", "closed_reason": "Duplicate", "title": "Print the contents of a hash in insertion order", "body": "<p>I have the following script</p>\n\n<pre><code>my %hash = (\n             'ev2'  =&gt; 'aaaa',\n             'ev1' =&gt; 'bbbb'\n           );   \n\nfor my $key (sort keys %hash) {\n   print $key , '-' , $hash{$key},  \"\\n\";\n} \n</code></pre>\n\n<p>that prints </p>\n\n<pre><code>ev1 - bbbb\nev2 - aaaa\n</code></pre>\n\n<p>I want to print the elements in the order they were added to the hash.</p>\n\n<pre><code>ev2 - aaaa  \nev1 - bbbb\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490287502, "post_id": 42982095, "comment_id": 73056353, "body": "Is your file supposed to be some kind of config file? Do you need to support other Perl syntax besides string interpolation of environment variables?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1490287548, "post_id": 42982095, "comment_id": 73056385, "body": "What problem are you having? Where&#39;s your code? Are you asking us to write a template processor for you???"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490287606, "post_id": 42982095, "comment_id": 73056424, "body": "@ThisSuitIsBlackNot Yes this is a config file. No that is all I need"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490287646, "post_id": 42982095, "comment_id": 73056457, "body": "@ikegami : No, I am simply asking if there is a way to interpolate the perl strings stored in JSON as strings"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490287779, "post_id": 42982095, "comment_id": 73056537, "body": "What a &quot;Perl string&quot;? You mean a Perl string literal? <code>$ENV{TOOL_BIN_DIR}&#47;some_file_name</code> isn&#39;t valid Perl, string literal or otherwise. If you did have valid Perl, you could execute it, yes. It would be really &quot;unwise&quot; to store Perl code in a config file, though. Instead, you have a custom template language. You will therefore need a custom template parser and processor. You should use an <i>existing</i> template language."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490287907, "post_id": 42982095, "comment_id": 73056642, "body": "Is there a reason you can&#39;t use a separate environment variable for the full path to the binary? e.g. <code>TOOL_BIN</code>"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490288056, "post_id": 42982095, "comment_id": 73056720, "body": "@ThisSuitIsBlackNot : Lets say instead of env variable I am using something like: $bin_dir. All I want is to have perl interpolate the value of this $bin_dir and get the actual value instead of literally &quot;$bin_dir&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490288172, "post_id": 42982095, "comment_id": 73056786, "body": "Re &quot;<i>All I want is ...</i>&quot;, That&#39;s not all. What if you wanted to produce <code>$bin_dir</code>? You also need an escaping mechanism. /// Re &quot;<i>All I want is to have perl interpolate the value of this $bin_dir</i>&quot;, Again, what problem are you having?"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1490288231, "post_id": 42982095, "comment_id": 73056830, "body": "I can not modify the json file, that is my problem. All i can do is read it and have my perl code interpolate it"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490288293, "post_id": 42982095, "comment_id": 73056874, "body": "Not ideal; it means more work for you since you can&#39;t use someone else&#39;s parser. What have done so far? What problem are you having?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490288594, "post_id": 42982095, "comment_id": 73057083, "body": "Why can&#39;t you modify the JSON file? Where does it come from?"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490288727, "post_id": 42982095, "comment_id": 73057162, "body": "@ThisSuitIsBlackNot : its from another tool. I do not have permissions to edit that file.  ikegami : This is not about what is ideal. This is about solution to my problem which i have already written down and other users are already able to understand my problem. Feel free to close the thread if you think this is not correct"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1490288783, "post_id": 42982095, "comment_id": 73057207, "body": "if I do &quot;print $cmd&quot;, perl is not resolving the value of $ENV{TOOL_BIN_DIR}, it is printing with this literal string &quot;$ENV{TOOL_BIN_DIR}&quot; not its value. This is my problem"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490288824, "post_id": 42982095, "comment_id": 73057232, "body": "And the other tool generates arbitrary Perl code and puts it in JSON strings? (I hope this doesn&#39;t feel like an interrogation, I&#39;m really just trying to figure out what your setup is.)"}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490288986, "post_id": 42982095, "comment_id": 73057334, "body": "@ThisSuitIsBlackNot : yes you are correct. someone owns the tool that creates this json file and is largely based on environment variables. Unfortunately the system is rigid and i can not ask for more :("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490295456, "post_id": 42982095, "comment_id": 73061217, "body": "Re &quot;<i>This is my problem</i>&quot;, That&#39;s a specification, not a problem. What problem are you having writing the code to do what you want?"}], "answers": [{"comments": [{"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1490289140, "post_id": 42982680, "comment_id": 73057437, "body": "Thanks I will try this. Better way would be to interpolate the value directly."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "edited": false, "score": 0, "creation_date": 1490289814, "post_id": 42982680, "comment_id": 73057881, "body": "@Deadman This is as direct as it gets. All you have is a string; you need to somehow tell perl to parse the string as Perl code and to execute it, which is exactly what string <code>eval</code> does."}, {"owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490290328, "post_id": 42982680, "comment_id": 73058218, "body": "Thank you, it worked. Thanks a lot @ThisSuitIsBlackNot"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1490295682, "post_id": 42982680, "comment_id": 73061344, "body": "That&#39;s awful! Fails if the string contains <code>&quot;</code>. There&#39;s also this: <code>perl -e&#39;CORE::say eval(q{&quot;} . $ARGV[0] . q{&quot;})&#39; &#39;${ print qq{I just deleted all your files\\n}; \\qq{x} }&#39;</code>. Don&#39;t execute config files!"}, {"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "edited": false, "score": 1, "creation_date": 1490347761, "post_id": 42982680, "comment_id": 73081655, "body": "Just two remarks for people who downvoted me: module String::Interpolate contains calls to eval function and perl interpolation can already be used to delete all your file. I think my warnings were clear enough."}], "tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": -2, "last_activity_date": 1490289103, "creation_date": 1490289103, "answer_id": 42982680, "question_id": 42982095, "link": "https://stackoverflow.com/questions/42982095/perl-interpolate-json-string-values/42982680#42982680", "title": "Perl - interpolate JSON string values", "body": "<p>You can use eval like in:</p>\n\n<pre><code>my $cmd = '$ENV{HOME}/toto';\nprint eval('\"' . $cmd . '\"'), \"\\n\";\n</code></pre>\n\n<p>But remember, this is very unsafe from a security point of view. You should probably avoid having to do this.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1490295114, "post_id": 42983470, "comment_id": 73061046, "body": "Re &quot;<i>uses Perl&#39;s own interpolation engine</i>&quot;, That&#39;s awful! <code>perl -MString::Interpolate=interpolate -e&#39;CORE::say interpolate($ARGV[0])&#39; &#39;${ print &quot;I just deleted all your files\\n&quot;; \\&quot;x&quot; }&#39;</code>. Don&#39;t execute config files!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490299282, "post_id": 42983470, "comment_id": 73063427, "body": "There&#39;s also <code>safe_interpolate</code>, but that still leaves enough opcodes to do a DOS attack, for example. Better not to execute anything at all."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1490294035, "last_edit_date": 1490294035, "creation_date": 1490291483, "answer_id": 42983470, "question_id": 42982095, "link": "https://stackoverflow.com/questions/42982095/perl-interpolate-json-string-values/42983470#42983470", "title": "Perl - interpolate JSON string values", "body": "<p>Using <code>eval</code> opens you to up to malicious or accidental damage: the string you are executing could contain any Perl code that may do anything at all to your system</p>\n\n<p>It is preferable to use <code>interpolate</code> from the <a href=\"https://metacpan.org/pod/String::Interpolate\" rel=\"nofollow noreferrer\"><code>String::Interpolate</code></a> module, which uses Perl's own interpolation engine that expands ordinary double-quoted strings at run time</p>\n\n<p>This program sets up a value for the environment variable <code>TOOL_BIN_DIR</code> and expands all the values in the <code>tool_name</code> hash that contain a dollar <code>$</code> or at <code>@</code> sigil</p>\n\n<p>I've used <code>Data::Dump</code> to display the contents of the data after the interpolation</p>\n\n<p>You may want to write a recursive subroutine that will process the values of all nested hashes and arrays if you don't know which values are likely to contain a value that needs to be expanded</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse JSON 'decode_json';\nuse String::Interpolate 'interpolate';\nuse Data::Dump 'dd';\n\nmy $data = decode_json &lt;&lt;'__END_JSON__';\n{\n    \"tool_name\": {\n        \"command\": \"$ENV{TOOL_BIN_DIR}/some_file_name\",\n        \"args\": \"some args\"\n    }\n}\n__END_JSON__\n\n$ENV{TOOL_BIN_DIR} = 'tool_dir_test';\n\nfor ( values %{ $data-&gt;{tool_name} } ) {\n    $_ = interpolate($_) if /[\\$\\@]/;\n}\n\ndd $data;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{\n  tool_name =&gt; { args =&gt; \"some args\", command =&gt; \"tool_dir_test/some_file_name\" },\n}\n</code></pre>\n"}], "owner": {"reputation": 784, "user_id": 2548443, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7857d55926ffec7c0d703dcd9ee26f4?s=128&d=identicon&r=PG", "display_name": "Kedar Joshi", "link": "https://stackoverflow.com/users/2548443/kedar-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 42983470, "answer_count": 2, "score": 0, "last_activity_date": 1490294035, "creation_date": 1490287352, "last_edit_date": 1490287746, "question_id": 42982095, "link": "https://stackoverflow.com/questions/42982095/perl-interpolate-json-string-values", "title": "Perl - interpolate JSON string values", "body": "<p>I have a json file like this:</p>\n\n<pre><code>\"tool_name\": {\n    \"command\": \"$ENV{TOOL_BIN_DIR}/some_file_name\",\n    \"args\": \"some args\"\n}\n</code></pre>\n\n<p>I am using <code>use:JSON</code> from Perl 5.14. and using <code>decode_json</code> function to read the file and get data into perl hash.</p>\n\n<p>But when I refer to this read data from code like this:</p>\n\n<pre><code>my $cmd = \"$data-&gt;{tool_name}-&gt;{command}\";\nprint $cmd;\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>$ENV{TOOL_BIN_DIR}/some_file_name\n</code></pre>\n\n<p>How can I make perl resolve the value of this variable? </p>\n\n<p>This example uses enviornment variable but in general if I want to use variables from JSON - how can I do that?</p>\n"}, {"tags": ["perl", "quickbase"], "comments": [{"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 1, "creation_date": 1490287526, "post_id": 42982052, "comment_id": 73056369, "body": "it might help if you describe the format you want, vs. the format it&#39;s currently giving you."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1490288262, "post_id": 42982052, "comment_id": 73056857, "body": "There is almost certainly a way to get the output that you want. But as you don&#39;t tell anything about a) the format of the <code>$record</code> hash or b) the output format that you want, it&#39;s hard to see how we can be any help at all."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7758044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d01cfc05a76197d46f6e2b3c7865b3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ray83", "link": "https://stackoverflow.com/users/7758044/ray83"}, "edited": false, "score": 0, "creation_date": 1490457985, "post_id": 42994249, "comment_id": 73125300, "body": "Thank you so much for the answers , I am still infant in perl  that&#39;s why I used some pre written script to get csv | delimited file . I will try to use text ::csv and the code suggested and see what will happen I will let you know"}, {"owner": {"reputation": 1, "user_id": 7758044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d01cfc05a76197d46f6e2b3c7865b3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ray83", "link": "https://stackoverflow.com/users/7758044/ray83"}, "edited": false, "score": 0, "creation_date": 1490458353, "post_id": 42994249, "comment_id": 73125428, "body": "If someone can guide me to good materials for learning perl quickly"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 1, "user_id": 7758044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d01cfc05a76197d46f6e2b3c7865b3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ray83", "link": "https://stackoverflow.com/users/7758044/ray83"}, "edited": false, "score": 0, "creation_date": 1490459145, "post_id": 42994249, "comment_id": 73125746, "body": "@Rakan you can use this online (or download) <a href=\"http://modernperlbooks.com/books/modern_perl_2014/\" rel=\"nofollow noreferrer\">modernperlbooks.com/books/modern_perl_2014</a> but you can buy form Addison Wesley: Learning perl, Intermediate perl and Mastering perl. Also here is many good blogs. Unfortunately, here are still too many <i>OLD</i> sites, which teaches the <i>not very modern perl</i>  :( (for ex: using the very old CGI) Anyway, please read <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/help\">help center</a> - asking for external resources is forbidden on this site."}, {"owner": {"reputation": 1, "user_id": 7758044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d01cfc05a76197d46f6e2b3c7865b3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ray83", "link": "https://stackoverflow.com/users/7758044/ray83"}, "edited": false, "score": 0, "creation_date": 1490581496, "post_id": 42994249, "comment_id": 73159281, "body": "Thanks a lot jm666 for your help , I have tried the below code but i am getting only |||||||   with no data !!   :"}, {"owner": {"reputation": 1, "user_id": 7758044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d01cfc05a76197d46f6e2b3c7865b3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ray83", "link": "https://stackoverflow.com/users/7758044/ray83"}, "edited": false, "score": 0, "creation_date": 1490581719, "post_id": 42994249, "comment_id": 73159328, "body": "@records = $qdb-&gt;doQuery($dbid,&quot;{0.CT.&#39;&#39;}&quot;,&quot;6.7.8.9&quot;);  $record_count = @records; print STDERR &quot;Number of records returned for 01-29-2016 search is $record_count\\n&quot;;  my $csv = Text::CSV-&gt;new ( { sep_char =&gt; &#39;|&#39;, binary =&gt; 1 } ) #if you really want use the &#39;|&#39; instead of the standard comma.                or die &quot;Cannot use CSV: &quot;.Text::CSV-&gt;error_diag (); open $fh, &#39;&gt;&#39;, &#39;C:\\\\Strawberry\\\\Quickbase_Log_files\\\\some.csv&#39;; $csv-&gt;print( $fh, [map { $_-&gt;{field} } keys %$_]) for @$records; close $fh;"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 3, "last_activity_date": 1490342417, "last_edit_date": 1592644375, "creation_date": 1490342417, "answer_id": 42994249, "question_id": 42982052, "link": "https://stackoverflow.com/questions/42982052/export-and-import-data-from-quickbase-to-csv-file-with-perl-script/42994249#42994249", "title": "Export and import Data from Quickbase to csv file with perl script", "body": "<p>Wondering, for what kind of answer type do you looking for? But...</p>\n<blockquote>\nI am try to use Perl language to interact with Quickbase,\n</blockquote>\n<p>That's great. Perl is very powerful and suitable for (nearly) <strong>any</strong> task.</p>\n<blockquote>\nI used the below query to export a data table into a text file\n</blockquote>\n<p>Not very concise code. It is probably a legacy code from an Excel or <a href=\"https://en.wikipedia.org/wiki/BASIC\" rel=\"nofollow noreferrer\">BASIC</a> person. Some comments:</p>\n<ul>\n<li>the code doing the <em>same</em> actions for every field. So, why do you need the <code>if</code> statemenents?</li>\n<li>Also, why need break each <code>print</code> into 3 separate <code>print</code>s?</li>\n<li>why do you need the <code>|</code> at the beginning of the line?</li>\n<li>you probably want to close <code>MYFILE</code> instead of the <code>LOGFILE</code>.</li>\n</ul>\n<p>others</p>\n<ul>\n<li>it is strange to print to every cell the <code>field_name: field_value</code>, instead of create the column header, but YMMV - so maybe you need this.</li>\n<li>it is better to use lexical filehandles, like <code>$myfile</code> instead of the <code>MYFILE</code></li>\n<li>the <code>foreach</code> could be written as <code>for</code> :)</li>\n</ul>\n<blockquote>\nbut I am not getting right format I want, any thoughts?\n</blockquote>\n<p>i'm unable to tell anything about the <strong>your wanted format</strong>, mainly because:</p>\n<ul>\n<li>you didn't said anything about what format do you want to get</li>\n<li>and, unfortunately, my crystal globe is on the scheduled maintenance. :)</li>\n</ul>\n<blockquote>\nOr if there is another language easier to interact with Quickbase?\n</blockquote>\n<p>Probably <strong>not</strong>.</p>\n<ul>\n<li>The quickbase has an <a href=\"https://en.wikipedia.org/wiki/Application_programming_interface\" rel=\"nofollow noreferrer\">API</a> for the access, (you <a href=\"https://help.quickbase.com/api-guide/index.html\" rel=\"nofollow noreferrer\">can learn about it here</a>, and every language (using some libraries) just does the bridge. For the perl it is the <a href=\"https://metacpan.org/pod/HTTP::QuickBase\" rel=\"nofollow noreferrer\">HTTP::QuickBase</a> module. Did you read the doc?</li>\n<li>Perl is extremely powerful, so anyone can write very concise code. Just need learn the language (as any other one). (Unfortunately, I'am also closer to  beginners as experts.)</li>\n</ul>\n<p>The above code is could be reduced to:</p>\n<pre><code>for my $record ($qdb-&gt;doQuery($dbid,&quot;{0.CT.''}&quot;,&quot;6.7.8.9&quot;)) {\n    print MYFILE '|',\n                 join('|', map {\n                           '&quot;' . $_ . ': ' . $_-&gt;{field} . '&quot;'\n                      } keys %$record\n                  ), &quot;\\n&quot;;\n}\n</code></pre>\n<p>And will do exactly as the above.</p>\n<p>But need to tell, it is still wrong solution. For example:</p>\n<ul>\n<li>need cope with the <em>quoting</em> e.g. the <code>&quot;cell content&quot;</code>.</li>\n<li>but also, the cell contents could contain also the <code>&quot;</code> character, so you need espace them. Here are more escaping techniques for the <code>CSV</code> files, one of is doubling the quote character (usually the <code>&quot;</code>). Or prepend them with <code>\\</code>. And much more possible problems, like &quot;new line&quot; characters <code>\\n</code> in the cells and so on.</li>\n</ul>\n<p>To avoid <code>CSV</code> quoting/escaping hell and other possible problems with CSV generation, you should to use the <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> module. It's been developed in the last 20 years, so it is very long time/hard/stress tested module. You could to use it as:</p>\n<pre><code>use Text::CSV;\nuse autodie;\n\nmy $csv = Text::CSV-&gt;new ( { sep_char =&gt; '|', binary =&gt; 1 } ) #if you really want use the '|' instead of the standard comma.\n               or die &quot;Cannot use CSV: &quot;.Text::CSV-&gt;error_diag ();\nopen $fh, '&gt;', 'some.csv';\n$csv-&gt;print( $fh, [map { $_-&gt;{field} } keys %$_]) for @$records;\nclose $fh;\n</code></pre>\n<p>Of course, the code is not tested. So, what next?</p>\n<ul>\n<li>learn about the <a href=\"https://metacpan.org/pod/HTTP::QuickBase\" rel=\"nofollow noreferrer\">quickbase API module</a></li>\n<li>learn about and install the <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> module</li>\n<li>read some tutorials and docs about the Perl language itself.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 7758044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d01cfc05a76197d46f6e2b3c7865b3c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ray83", "link": "https://stackoverflow.com/users/7758044/ray83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1515337596, "creation_date": 1490287208, "last_edit_date": 1515337596, "question_id": 42982052, "link": "https://stackoverflow.com/questions/42982052/export-and-import-data-from-quickbase-to-csv-file-with-perl-script", "title": "Export and import Data from Quickbase to csv file with perl script", "body": "<p>I am try to use Perl language to interact with Quickbase ,I used the below query to export a data table into a text file but I am not getting right format I want, any thoughts? Or if there is another language  easier to interact with Quickbase?</p>\n\n<pre><code>@records = $qdb-&gt;doQuery($dbid,\"{0.CT.''}\",\"6.7.8.9\"); \n$record_count = @records;\n\nforeach $record (@records) {\n\n  print MYFILE \"|\";\n\n  foreach $field (keys %$record){\n    if ($field eq \"ColumnA\") {\n      print MYFILE \"\\\"\";\n      print MYFILE \" $field : $record-&gt;{$field}\";\n      print MYFILE \"\\\"\";   \n    }\n\n    if ($field eq \"ColumnB\") {\n      print MYFILE \"\\\"\";\n      print MYFILE \"$field : $record-&gt;{$field}\";\n      print MYFILE \"\\\"\";\n    }\n\n    if ($field eq \"ColumnC\") {\n      print MYFILE \"\\\"\";\n      print MYFILE \"$field : $record-&gt;{$field}\";\n      print MYFILE \"\\\"\";\n    }\n\n    if ($field eq \"ColumnD\") {\n      print MYFILE \"\\\"\";\n      print MYFILE \"$field : $record-&gt;{$field}\";\n      print MYFILE \"\\\"\";\n    }   \n  }\n\n  print MYFILE \"\\n\";    \n}\n\nclose LOGFILE;\n</code></pre>\n"}, {"tags": ["perl", "firebird", "mod-perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490339188, "post_id": 42981824, "comment_id": 73077318, "body": "<code>warn</code> is just a Perl built-in that sends a message to your STDOUT. It&#39;s used for printing warnings. It has nothing to do with your database, and it cannot do a rollback. Your code looks fine."}, {"owner": {"reputation": 19, "user_id": 7757918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96fdc767b7375fc677698c7ca5cb12d?s=128&d=identicon&r=PG&f=1", "display_name": "Yasuto S", "link": "https://stackoverflow.com/users/7757918/yasuto-s"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490392203, "post_id": 42981824, "comment_id": 73108979, "body": "so,what do you mean? I&#39;m looking for workaround s."}, {"owner": {"reputation": 19, "user_id": 7757918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96fdc767b7375fc677698c7ca5cb12d?s=128&d=identicon&r=PG&f=1", "display_name": "Yasuto S", "link": "https://stackoverflow.com/users/7757918/yasuto-s"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1500363024, "post_id": 42981824, "comment_id": 77288728, "body": "I got an answer of my issue.  $dbh was not broken after raise exceptions and catch them.  An another issue is &#39;cached statements are broken.&#39; I use CGI::Session with Driver::DBI to share connected handle. prepare_cached() in the CGI::Session fails.  I don&#39;t know who accepts and maintain this issue.... Please help."}], "owner": {"reputation": 19, "user_id": 7757918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96fdc767b7375fc677698c7ca5cb12d?s=128&d=identicon&r=PG&f=1", "display_name": "Yasuto S", "link": "https://stackoverflow.com/users/7757918/yasuto-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490347444, "creation_date": 1490286584, "last_edit_date": 1490347444, "question_id": 42981824, "link": "https://stackoverflow.com/questions/42981824/programming-with-apachedbi-and-firebird-get-stucked-httpd-on-exception", "title": "Programming with Apache::DBI and firebird. Get Stucked httpd on exception", "body": "<p>I have an issues on Web application programming with Firebird.</p>\n\n<p>I'm using mod_perl and Apache::DBI with Firebird.\nAnd also using <code>CGI::Session</code> for session handling.\n<code>CGI::Session</code> uses an already connected <code>$dbh</code> with Firebird.</p>\n\n<p>AutoCommit is ON.\nEvery(multiple) sql execution is wrapped by <code>eval {}</code> statement.\nfor example,</p>\n\n<pre><code>$dbh = DBI-&gt;connect(\"dbi:Firebird:db=$DBSERVER:/home/cdbs/xxnet.fdb;\nib_charset=UTF8;ib_dialect=3\",$DBUSER,$DBPASS,{\n    AutoCommit=&gt;1,\n    LongReadLen=&gt;8192,\n    RaiseError=&gt;1\n});\neval { $dbh-&gt;begin_work()\n\n  my $sql = \"SELECT * FROM SAMPLETABLE\"\n  my $st = $dbh-&gt;prepare($sql);\n  $st-&gt;execute();\n  while (my $R = $st-&gt;fetchrow_hashref()) {\n   ...\n  }\n  $st-&gt;finish();\n}; warn $@ if $@;\nif ($@) {\n  $dbh-&gt;rollback();\n}else{\n  $dbh-&gt;commit();\n}\n</code></pre>\n\n<p>When an exception was raised in eval section, execute warn statement and try to rollback transaction.\nError messages are logged in error_log,after that, <code>$dbh</code> is going to get stuck -- CGI::Session returns no data.\nI thought 'warn' statement includes 'rollback', so I tried to comment out <code>$dbh-&gt;rollback()</code> statement. It looks good.</p>\n\n<p>Other ways, I use 'warn' to log debug message -- like <code>print STDERR $@</code>.\nhttpd is going to get stuck like as above.</p>\n\n<p>With Oracle(DBD::Oracle), I didn't see these situation.</p>\n\n<p>Please tell me which part is BAD for using transaction with firebird ?\nwarn ? DBD::Firebird ?</p>\n\n<p>Thanks.</p>\n\n<p>Yasuto,</p>\n"}, {"tags": ["arrays", "perl", "if-statement", "hash"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1490283582, "post_id": 42980602, "comment_id": 73053328, "body": "It&#39;s a bit unclear, because I think you&#39;re taking a MUCH harder approach than you need to. Lots of cuts/sort/unique says to me that you should consider rewriting stuff in pure <code>perl</code>. To that end - some sample input and desired output would be the way to go."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490283595, "post_id": 42980602, "comment_id": 73053346, "body": "<code>sh-3.2#</code> looks like a command line prompt, but from what you say it sounds like you&#39;re using backticks in your Perl program. Which is it?"}, {"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490285065, "post_id": 42980602, "comment_id": 73054582, "body": "Yes, you are right. I am using backtick. but if there is other way I can do so"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490289644, "post_id": 42980956, "comment_id": 73057770, "body": "thank you. it is really helpful. now from here I still need one thing. as I said the number of rows may varies from minimum 0 to max 5.   so when it comes only 3, the missing values should have 0.                                                                       $VAR1 = {           &#39;Soft&#39; =&gt; &#39;87&#39;,           &#39;Unknown&#39; =&gt; &#39;0&#39;,           &#39;Success&#39; =&gt; &#39;144056&#39;,           &#39;Block&#39; =&gt; &#39;310&#39;,           &#39;Hard&#39; =&gt; &#39;0&#39;         };"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490290399, "post_id": 42980956, "comment_id": 73058265, "body": "<code>$report{$_} &#47;&#47;= 0 for keys %keyword_for;</code> But honestly, I&#39;d usually &#39;filter&#39; that as you&#39;re generating your output."}, {"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490300156, "post_id": 42980956, "comment_id": 73063933, "body": "I&#39;ll give sample input data so that I can proceed with your recommendation ."}, {"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490303054, "post_id": 42980956, "comment_id": 73065471, "body": "I don&#39;t know how to format logs in comment box.. please it in my next comment and copy in your notepad"}, {"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490367390, "post_id": 42980956, "comment_id": 73094656, "body": "I added my further requirement and edited my question with a table domain wise. I know this is possible but I am stuck at other domain stats"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490367549, "post_id": 42980956, "comment_id": 73094770, "body": "If you have a new question, then ask a new question."}, {"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490369411, "post_id": 42980956, "comment_id": 73096079, "body": "<a href=\"http://stackoverflow.com/questions/43003466/i-am-working-on-perl-script-and-i-need-to-parse-the-logs-given-below\" title=\"i am working on perl script and i need to parse the logs given below\">stackoverflow.com/questions/43003466/&hellip;</a>"}, {"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490375428, "post_id": 42980956, "comment_id": 73100167, "body": "your latest code is giving - Use of uninitialized value $status in hash element at test2.pl line 28, &lt;&gt; line 11872"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490375712, "post_id": 42980956, "comment_id": 73100318, "body": "Means on line 11872 of your file (which may be the last) there&#39;s no match for the <code>$status</code> regex - e.g. <code>m&#47;^(\\w+)-&#47;</code>, which may mean there&#39;s no comma-sep fields on that line."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1490347417, "last_edit_date": 1490347417, "creation_date": 1490284252, "answer_id": 42980956, "question_id": 42980602, "link": "https://stackoverflow.com/questions/42980602/how-can-i-handle-a-variable-number-of-input-lines-in-perl/42980956#42980956", "title": "How can I handle a variable number of input lines in Perl?", "body": "<p>OK, so - you've started off doing this a really hard way, because ... <code>perl</code> can natively do everything that cut/sort/uniq do anyway.</p>\n\n<p>I can't rewrite that for you without some sample input, but ... I think you should consider that.</p>\n\n<p>You should also not use global vars, and use lexical ones with <code>my</code>. </p>\n\n<p>And - as you've noticed - if you're numbering your variable names, you really should be considering an array. </p>\n\n<p>So something like this:</p>\n\n<pre><code>use Data::Dumper\nmy @stuff = map { [split] } split( \"\\n\", $case8Q1 );\nprint Dumper \\@stuff;\n</code></pre>\n\n<p>Gives you:</p>\n\n<pre><code>$VAR1 = [\n          [\n            '310',\n            'blk'\n          ],\n          [\n            '1279',\n            'hrd'\n          ],\n          [\n            '87',\n            'sft'\n          ],\n          [\n            '144056',\n            'success'\n          ],\n          [\n            '18',\n            'unk'\n          ]\n        ];\n</code></pre>\n\n<p>But you can go one step further, because you don't actually need to parse this into a data structure at all:</p>\n\n<pre><code>   my %data =  reverse $case8Q1 =~ m/(\\d+) (\\w+)/g;\n   print Dumper \\%data;\n</code></pre>\n\n<p>Which then gives you:</p>\n\n<pre><code>$VAR1 = {\n          'hrd' =&gt; '1279',\n          'sft' =&gt; '87',\n          'blk' =&gt; '310',\n          'unk' =&gt; '18',\n          'success' =&gt; '144056'\n        };\n</code></pre>\n\n<p>You can then translate that into your 'report' by using again, a key-value lookup:</p>\n\n<pre><code>my %keyword_for = ( \n    \"blk\" =&gt; \"Block\",\n    \"hrd\" =&gt; \"Hard\",\n    \"sft\" =&gt; \"Soft\",\n    \"success\" =&gt; \"Success\",\n    \"unk\" =&gt; \"Unknown\",\n    );\n\nforeach my $key ( keys %data ) { \n   $report{$keyword_for{$key}} = $data{$key}; \n}\n</code></pre>\n\n<p>And that gives you:</p>\n\n<pre><code>$VAR1 = {\n          'Soft' =&gt; '87',\n          'Unknown' =&gt; '18',\n          'Success' =&gt; '144056',\n          'Block' =&gt; '310',\n          'Hard' =&gt; '1279'\n        };\n</code></pre>\n\n<p>Or take it a step further still and inline the transformation using <code>map</code>:</p>\n\n<pre><code>my %report =   map { m/(\\d+) (\\w+)/ \n                 &amp;&amp; $keyword_for{$2} // $2 =&gt; $1 } split \"\\n\", $case8Q1;\nprint Dumper \\%report;\n</code></pre>\n\n<p>And as you say you want <em>all</em> the values to be populated.... actually I'd suggest not doing that, and handling 'undefined' properly when generating output with something like:</p>\n\n<pre><code>my @field_order = qw ( Block Hard Soft Success Unknown this_field_missing ); \nprint join \"\\t\", @field_order,\"\\n\";\nprint join \"\\t\", ( map { $report{$_} // 0 } @field_order),\"\\n\";\n</code></pre>\n\n<p>This way you get defined-order output, where hashes <em>don't</em> do defined-order. This gives:</p>\n\n<pre><code>Block   Hard    Soft    Success Unknown this_field_missing  \n310     1279    87      144056  18      0   \n</code></pre>\n\n<p>But if you really want to backfill your empty hash with zero values:</p>\n\n<pre><code>$report{$_} //= 0 for values %keyword_for;\n</code></pre>\n\n<p>However, now you've posted some logs to go with your question - the problem's <em>much</em> simpler:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\n#configure it:\nmy %keyword_for = (\n   \"blk\"     =&gt; \"Block\",\n   \"hrd\"     =&gt; \"Hard\",\n   \"sft\"     =&gt; \"Soft\",\n   \"success\" =&gt; \"Success\",\n   \"unk\"     =&gt; \"Unknown\",\n);\n#set output order - last field is for illustration purposes\nmy @field_order = qw ( Block Hard Soft Success Unknown this_field_missing );\n\nmy %count_of;\n#iterate 'STDIN' or files specified to command line.\n#So you can 'thisscript.pl /var/log/pmta/File_name-2017-03-23*'\nwhile (&lt;&gt;) {\n   #split the line on commas\n   my ( $id, $em_addr, $ip, $timestamp, $msg_id, $code, $desc ) = split /,/;\n   #require msg_id contains '@email.domain.com'. \n   next unless $msg_id =~ m/\\@email\\.domain\\.com/;\n   #split the status field on dash, extracting first word. \n   my ($status) = $code =~ m/^(\\w+)-/;\n   #update the count - reference the 'keyword for' hash first, \n   #but insert 'raw' if it's something new. \n   $count_of{ $keyword_for{$status} // $status }++;\n}\n\n#print a header row (tab sep)\nprint join \"\\t\", @field_order, \"\\n\";\n#print the rest of the values. \n#map is so 'missing' fields get zeros, not 'undefined'. \nprint join \"\\t\", ( map { $count_of{$_} // 0 } @field_order ), \"\\n\";\n</code></pre>\n\n<p>And given the small sample you've posted, this outputs:</p>\n\n<pre><code>Block   Hard    Soft    Success Unknown this_field_missing  \n2       2       4       0       1       0   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490300025, "post_id": 42981073, "comment_id": 73063858, "body": "It&#39;s print nothing when I tried it.                                                                print Dumper \\%report; I mean the output is -----   $VAR1 = {};"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "edited": false, "score": 0, "creation_date": 1490353775, "post_id": 42981073, "comment_id": 73085596, "body": "@PankajKumar: That will be because the shell command doesn&#39;t produce anything. I&#39;ve copied it from your question so I can&#39;t tell what&#39;s wrong with it."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490284568, "creation_date": 1490284568, "answer_id": 42981073, "question_id": 42980602, "link": "https://stackoverflow.com/questions/42980602/how-can-i-handle-a-variable-number-of-input-lines-in-perl/42981073#42981073", "title": "How can I handle a variable number of input lines in Perl?", "body": "<p>It's hard to know what result you want, but I would do the backticks in list context so that the lines are already separated, and replace the chain of <code>if</code>/<code>elsif</code> with a simple hash lookup</p>\n\n<p>This sample code builds a hash <code>%report</code> the same as yours, and returns a reference to it. I've had to assume that you're using backticks as it seems the most likely. <strong>Sobrique</strong> is correct that your shell code should also be done in Perl</p>\n\n<pre><code>my %map = (\n    blk     =&gt; 'Block',\n    hrd     =&gt; 'Soft',\n    sft     =&gt; 'Block',\n    success =&gt; 'Success',\n    unk     =&gt; 'Unknown',\n);\n\nmy $cmd = q{cat /var/log/pmta/File_name-2017-03-23*|egrep 'email.domain.com'|cut -d, -f6|cut -d- -f1|sort|uniq -c};\n\nsub get_stats {\n\n    my %report;\n\n    for ( `$cmd` ) {\n\n        my ($val, $type) = split;\n\n        $report{$map{$type}} = $val;\n    }\n\n    \\%report;\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 4933923, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/815283951882645/picture?type=large", "display_name": "Pankaj Kumar", "link": "https://stackoverflow.com/users/4933923/pankaj-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 42980956, "answer_count": 2, "score": 2, "last_activity_date": 1490367050, "creation_date": 1490283320, "last_edit_date": 1490367050, "question_id": 42980602, "link": "https://stackoverflow.com/questions/42980602/how-can-i-handle-a-variable-number-of-input-lines-in-perl", "title": "How can I handle a variable number of input lines in Perl?", "body": "<p>I am working with a Perl script where I need to work with MTA's logs. Below is the query which I want to work with.</p>\n\n<blockquote>\n<pre><code>sh-3.2# cat /var/log/pmta/File_name-2017-03-23*|egrep 'email.domain.com'|cut -d, -f6|cut -d- -f1|sort|uniq -c\n</code></pre>\n</blockquote>\n\n<p>The output of this query is stored in <code>$case8Q1</code>.</p>\n\n<pre><code>   310 blk\n  1279 hrd\n    87 sft\n144056 success\n    18 unk\n</code></pre>\n\n<p>As you can see above query gives 5 values but this is not always the case. It can also give like this. So the number of rows may vary each time (2 or 3 or 4 or max 5)</p>\n\n<pre><code>   310 blk\n144056 success\n    18 unk\n</code></pre>\n\n<p>below is the sample code which gives the wrong result</p>\n\n<pre><code>sub get_stats {\n\n    $case8Q1 =~ s/^\\s+//;\n\n    @case8Q1_split = split( '\\n', $case8Q1 );\n\n    @first_part    = split( ' ',  $case8Q1_split[0] );\n    @second_part   = split( ' ',  $case8Q1_split[1] );\n    @third_part    = split( ' ',  $case8Q1_split[2] );\n    @fourth_part   = split( ' ',  $case8Q1_split[3] );\n    @fifth_part    = split( ' ',  $case8Q1_split[4] );\n\n    if ( $first_part[1] eq 'blk' ) {\n        $report{Block} = $first_part[0];\n    }\n    elsif ( $first_part[1] eq 'hrd' ) {\n        $report{Hard} = $first_part[0];\n    }\n    elsif ( $first_part[1] eq 'sft' ) {\n        $report{Soft} = $first_part[0];\n    }\n    elsif ( $first_part[1] eq 'success' ) {\n        $report{Success} = $first_part[0];\n    }\n    elsif ( $first_part[1] eq 'unk' ) {\n        $report{Unknown} = $first_part[0];\n    }\n\n    # rest ifelse blocks so on........!\n}\n</code></pre>\n\n<p>where report is hash <code>%report</code>.</p>\n\n<p>Can someone please help me how can operate it from here. </p>\n\n<p>I have all the values but if I go with normal <code>if</code>-<code>else</code> like above it will take at least 25 `blocks.</p>\n\n<p>Let me know please if this is not clear.</p>\n\n<p>Source log sample:</p>\n\n<pre><code>b,email@aol.com,206.1.1.8,2017-03-23 00:01:11-0700,&lt;14901.eb201.TCR2.338351.18567117907MSOSI1.152\u200c\u200bOSIMS@email.domain.c\u200c\u200bom&gt;,sft-routing-erro\u200c\u200brs,4.4.4 (unable to route: dns lookup failure),\nb,email@gmail.com,206.9.1.8,2017-03-23 00:02:13-0700,&lt;149019.eb201.TCR2.338351.18567119237MSOSI1.15\u200c\u200b2OSIMS@email.domain.\u200c\u200bcom&gt;,sft-no-answer-f\u200c\u200brom-host,4.4.1 (no answer from host), \nb,email@gmail.com,206.1.1.5,2017-03-23 03:43:36-0700,&lt;149020.eb201.TCR2.338656.18570260933MSOSI1.15\u200c\u200b2OSIMS@email.domain.\u200c\u200bcom&gt;,sft-server-rela\u200c\u200bted,4.3.2 (system not accepting network messages),smtp;421 Too many concurrent SMTP connections \nb,email@yahoo.com,,2017-03-23 03:54:44-0700,&lt;149019.eb201.TCR2.338351.18567013352MSOSI1.15\u200c\u200b2OSIMS@email.domain.\u200c\u200bcom&gt;,sft-message-exp\u200c\u200bired,4.4.7 (delivery time expired), \nb,email@msn.com,206.1.1.1,2017-03-23 05:04:20-0700,&lt;14902666.eb201.TCR2.3831.2620484MSOSI6374125.\u200c\u200b102OSIMS@email.domai\u200c\u200bn.com&gt;,hrd-invalid-m\u200c\u200bailbox,5.0.0 (undefined status),smtp;550 Requested action not taken: mailbox unavailable \nb,email@msn.com,206.1.1.1,2017-03-23 05:04:20-0700,&lt;14902666.eb201.TCR2.3831.2620484MSOSI6374125.\u200c\u200b102OSIMS@email.domai\u200c\u200bn.com&gt;,hrd-invalid-d\u200c\u200bomain,5.0.0 (undefined status),smtp;550 Requested action not taken: mailbox unavailable \nb,email@aol.com.com,66.1.1.1,2017-03-23 05:08:44-0700,&lt;149021.eb201.KCR2.021089.566131285MSOSI1.89OS\u200c\u200bIMS@email.domain.com\u200c\u200b&gt;,unk-other,4.0.0 (undefined status),smtp;451 Your domain is not configured to use this MX host.\nb,email@gmail.com,206.1.1.1,2017-03-23 05:13:22-0700,&lt;1490206.eb201.KCR2.6637.56206428MSOSI1.102OSI\u200c\u200bMS@email.domain.com&gt;\u200c\u200b,blk-bad-connection,\u200c\u200b4.4.2 (bad connection), \nb,email@qq.com.com,206.1.1.1,2017-03-23 05:13:22-0700,&lt;1490206.eb201.KCR2.6637.56206428MSOSI1.102OSI\u200c\u200bMS@email.domain.com&gt;\u200c\u200b,blk-spam-related,4.\u200c\u200b4.2 (bad connection), \n</code></pre>\n\n<p>Here the requirment goes further. I need domain count as will example - </p>\n\n<pre><code>Date          Domain       Success Block Soft Hard Unknown\n2017-03-23    gmail         1       1   1   1   1    1\n2017-03-23    yahoo         1       1   1   1   1    1\n2017-03-23    msn           1       1   1   1   1    1\n2017-03-23    aol           1       1   1   1   1    1\n2017-03-23    other domain  1       1   1   1   1    1\n</code></pre>\n\n<p>my problem is with other domain which contains all the domain except gmail, yahoo, msn, hotmail and aol.\ncount 1 is just example it can be 0.</p>\n"}, {"tags": ["linux", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1490282799, "post_id": 42980331, "comment_id": 73052712, "body": "This sounds an awful lot like an XY Problem. Can you backtrack a bit, and give some examples of what you&#39;re trying to do (input and outputs)?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490283565, "post_id": 42980331, "comment_id": 73053316, "body": "So <code>$a</code> is here a line number in <code>test.txt</code>?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1490284232, "post_id": 42980331, "comment_id": 73053874, "body": "<code>perl -i -pe &#39;s&#47;$&#47; $.&#47;&#39; file</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490284507, "post_id": 42980331, "comment_id": 73054107, "body": "You could try: <code>perl -pi -E &#39;BEGIN {$q = shift; $a = shift} s&#47;$&#47;$q&#47; if $. == $a&#39; &quot;$q&quot; &quot;$a&quot; test.txt</code>"}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490284816, "post_id": 42980331, "comment_id": 73054360, "body": "@Hakon, you are right $a contains the line number in test.txt"}, {"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1490302064, "post_id": 42980331, "comment_id": 73064994, "body": "@H&#229;kon H&#230;gland, great great suggestion!, it worked brilliantly, perl is king no doubt. Would you be so kind to post this as an answer with explanation for me to also learn :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1490304520, "post_id": 42980331, "comment_id": 73066289, "body": "@DineshKumar Added answer"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1490291764, "post_id": 42981911, "comment_id": 73059094, "body": "Hi William, thanks for the suggestion, but I really want to handle this operation in memory. This line of code is inside a For loop that will be executed more than 10,000 times"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "edited": false, "score": 0, "creation_date": 1490298201, "post_id": 42981911, "comment_id": 73062785, "body": "@DineshKumar Just IMHO - calling <code>sed</code> 10k times (and even more, as you said in the question) doesn&#39;t sound for me as an <i>efficient</i> solution. but - ok - ymmv..."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1490298222, "post_id": 42981911, "comment_id": 73062797, "body": "Write the tempfile outside of the loop.  Chances are very good that it will never hit disk, as the OS will keep it in memory."}], "tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 0, "last_activity_date": 1490287473, "last_edit_date": 1490287473, "creation_date": 1490286840, "answer_id": 42981911, "question_id": 42980331, "link": "https://stackoverflow.com/questions/42980331/linux-append-variable-to-end-of-line-using-line-number-as-variable/42981911#42981911", "title": "Linux: Append variable to end of line using line number as variable", "body": "<p>Do not bother trying to sanitize the string.  Just put it in a file, and use sed's <code>r</code> command to read it in:</p>\n\n<pre><code>echo \"$q\" &gt; tmpfile\nsed -i -e ${a}rtmpfile test.txt\n</code></pre>\n\n<p>Ah, but that creates an extra newline that you don't want.  You can remove it with:</p>\n\n<pre><code>sed -e ${a}rtmpfile test.txt | awk 'NR=='$a'{printf $0; next}1' &gt; output\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1490304497, "creation_date": 1490304497, "answer_id": 42987349, "question_id": 42980331, "link": "https://stackoverflow.com/questions/42980331/linux-append-variable-to-end-of-line-using-line-number-as-variable/42987349#42987349", "title": "Linux: Append variable to end of line using line number as variable", "body": "<p>The difficulty here is to quote (escape) the substitution separator characters <code>@</code> in the sed command:</p>\n\n<pre><code>sed -i ''$a's@$@'\"$q\"'@' test.txt\n</code></pre>\n\n<p>For example, if <code>q</code> contains <code>@</code> it will not work. The <code>@</code> will terminate the replacement pattern prematurely. Example: <code>q='a@b'</code>, <code>a=2</code>, and the command expands to </p>\n\n<pre><code>sed -i 2s@$@a@b@ test.txt\n</code></pre>\n\n<p>which will not append <code>a@b</code> to the end of line 2, but rather <code>a@</code>.</p>\n\n<p>This can be solved by escaping the <code>@</code> characters in <code>q</code>:</p>\n\n<pre><code>sed -i 2s@$@a\\@b@ test.txt\n</code></pre>\n\n<p>However, this escaping could be cumbersome to do in shell.\nAnother approach is to use another level of indirection. Here is an example of using a Perl one-liner. First <code>q</code> is passed to the script in quoted form. Then, within the script the variable assigned to a new internal variable <code>$q</code>. Using this approach there is no need to escape the substitution separator characters:</p>\n\n<pre><code>perl -pi -E 'BEGIN {$q = shift; $a = shift} s/$/$q/ if $. == $a' \"$q\" \"$a\" test.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "is_accepted": false, "score": 0, "last_activity_date": 1490383844, "last_edit_date": 1490383844, "creation_date": 1490311730, "answer_id": 42988810, "question_id": 42980331, "link": "https://stackoverflow.com/questions/42980331/linux-append-variable-to-end-of-line-using-line-number-as-variable/42988810#42988810", "title": "Linux: Append variable to end of line using line number as variable", "body": "<p>Another approach is to use the patch utility if present in your system.</p>\n\n<pre><code>patch test.txt &lt;&lt;-EOF\n${a}c\n$(sed \"${a}q;d\" test.txt)$q\n.\nEOF\n</code></pre>\n\n<p><code>${a}c</code> will be replaced with the line number followed by <code>c</code> which means the operation is a change in line <code>${a}</code>.</p>\n\n<p>The second line is the replacement of the change. This is the concatenated value of the original text and the added text.</p>\n\n<p>The sole <code>.</code> means execute the commands.</p>\n"}], "owner": {"reputation": 95, "user_id": 7048786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1164923513555162/picture?type=large", "display_name": "Dinesh Kumar", "link": "https://stackoverflow.com/users/7048786/dinesh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 42987349, "answer_count": 3, "score": 0, "last_activity_date": 1490383844, "creation_date": 1490282652, "last_edit_date": 1490286444, "question_id": 42980331, "link": "https://stackoverflow.com/questions/42980331/linux-append-variable-to-end-of-line-using-line-number-as-variable", "title": "Linux: Append variable to end of line using line number as variable", "body": "<p>I am new to shell scripting. I am using ksh.</p>\n\n<p>I have this particular line in my script which I use to append text in a variable <code>q</code> to the end of a particular line given by the variable <code>a</code>\n containing the line number .</p>\n\n<pre><code>sed -i ''$a's@$@'\"$q\"'@' test.txt\n</code></pre>\n\n<p>Now the variable <code>q</code> can contain a large amount of text, with all sorts of special characters, such as !@#$%^&amp;*()_+:\"&lt;>.,/;'[]= etc etc, no exceptions. <br/> For now, I use a couple of sed commands in my script to remove any ' and \" in this text (<code>sed \"s/'/ /g\" | sed 's/\"/ /g'</code>), but still when I execute the above command I get the following error <br/></p>\n\n<pre><code>sed: -e expression #1, char 168: unterminated `s' command\n</code></pre>\n\n<p>Any sed, awk, perl, suggestions are very much appreciated</p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1490297738, "post_id": 42977287, "comment_id": 73062516, "body": "Use <code>exec</code> instead of <code>shell</code>. Do not disable <code>blocking</code> mode."}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1490336980, "post_id": 42977287, "comment_id": 73076367, "body": "@Salva : I found a way to resolve this issue. Instead of &#39;top -n 1&#39;, we can use &#39;top -b -n 1&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "is_accepted": true, "score": -1, "last_activity_date": 1490337049, "creation_date": 1490337049, "answer_id": 42992868, "question_id": 42977287, "link": "https://stackoverflow.com/questions/42977287/retrieve-output-of-top-command-using-netssh2/42992868#42992868", "title": "Retrieve output of top command using Net::SSH2", "body": "<p>Instead of 'top -n 1' or 'top', Use 'top -b -n 1'</p>\n"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 42992868, "answer_count": 1, "score": 2, "last_activity_date": 1490337049, "creation_date": 1490275247, "question_id": 42977287, "link": "https://stackoverflow.com/questions/42977287/retrieve-output-of-top-command-using-netssh2", "title": "Retrieve output of top command using Net::SSH2", "body": "<p>I am trying to retrieve the output of top command using Net::SSH2 Perl module, But I am getting null output each time.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>use Net::SSH2;\nuse strict;\n\nmy $ssh = Net::SSH2-&gt;new();\n\n$ssh-&gt;connect('xx.xx.xx.xx');\n\n$ssh-&gt;auth(username =&gt; 'xxxxxx', password =&gt; 'xxxxx');\n\nmy  $channel = $ssh-&gt;channel() or do { print\" [LOG ERROR]: Failed to create channel. Exiting ...\\n\"};\n\n$channel-&gt;blocking(0);\n\n$channel-&gt;shell() ;\n\nsleep(5);\n\nmy $cmd='top -n 1';\n\nprint $channel \"$cmd\\n\";        \n\nsleep(5);      \n\nwhile(&lt;$channel&gt;)\n  {\n     print $_;\n  }\n\n\n$channel-&gt;close(); \n\n$ssh-&gt;disconnect();\n</code></pre>\n\n<p>Can somebody please help.</p>\n"}, {"tags": ["postgresql", "perl", "dbix-class"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490274869, "post_id": 42976981, "comment_id": 73046128, "body": "You could just grab the <code>$dbh</code> from DBIC and run a quick SQL query."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490275175, "post_id": 42976981, "comment_id": 73046384, "body": "yes, that&#39;s an option. I was wondering if there was a &quot;standard&quot; way of doing this"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490275266, "post_id": 42976981, "comment_id": 73046454, "body": "I don&#39;t think so. I&#39;ve written up an answer about using SQL, for completeness&#39; sake."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490275330, "post_id": 42976981, "comment_id": 73046524, "body": "Oh hang on, you could include the <code>CURRENT_TIMESTAMP</code> as a literal piece of SQL in the column list when you build up the resultset."}, {"owner": {"reputation": 28971, "user_id": 1499698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad28bf1565b1191c0591bf90d46299a7?s=128&d=identicon&r=PG", "display_name": "pozs", "link": "https://stackoverflow.com/users/1499698/pozs"}, "edited": false, "score": 0, "creation_date": 1490275456, "post_id": 42976981, "comment_id": 73046620, "body": "<code>DateTime-&gt;now()</code> should support time zones. If you declared <code>update_time</code> as <code>timestamptz</code> or <code>timestamp with time zone</code>, than no offset subtraction should occur. <code>CURRENT_TIMESTAMP</code> also returns <code>timestamp with time zone</code>."}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1490275629, "post_id": 42976981, "comment_id": 73046771, "body": "I have tried setting the timezone in DateTime-&gt;now(), but it doesn&#39;t change the underlying value in seconds, so it did not help."}], "answers": [{"comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1490277970, "post_id": 42977282, "comment_id": 73048648, "body": "nope! It would seem to make sense, but I still get the problem, the 2 times look the same, but their epoch is different: <code>now: [2017-03-23T14:53:18] updated: [2017-03-23T14:53:18] now-&gt;epoch: [1490277198] updated-&gt;epoch: [1490280798] now - updated (in s): -3600</code>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1490275231, "creation_date": 1490275231, "answer_id": 42977282, "question_id": 42976981, "link": "https://stackoverflow.com/questions/42976981/perl-dbixclass-getting-the-current-time-from-the-database/42977282#42977282", "title": "Perl DBIx::Class: getting the current time from the Database", "body": "<p>You can use <a href=\"https://metacpan.org/pod/DBIx::Class::Storage::DBI#dbh_do\" rel=\"nofollow noreferrer\"><code>dbh_do</code> from your DBIx::Class::Storage</a> to run arbitrary queries. With that, just <code>SELECT</code> the <code>CURRENT_TIMESTAMP</code>.</p>\n\n<pre><code>my ( $timestamp ) = $schema-&gt;storage-&gt;dbh_do(\n  sub {\n    my ($storage, $dbh) = @_;\n\n    $dbh-&gt;selectrow_array(\"SELECT CURRENT_TIMESTAMP\");\n  },\n);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 0, "creation_date": 1490353571, "post_id": 42982701, "comment_id": 73085449, "body": "ah the old debate between &quot;do everything in the DB&quot; vs &quot;do everything in the code&quot;. The current design keeps only the last update timestamp in the field. So even if it&#39;s defined as not nullable, after it&#39;s been filled once, then there is no mechanism that ensures that it is properly updated. So I&#39;d rather keep the update at the DB level. And I agree there&#39;s something screwed up somewhere in the config of either the DB or my Perl. But what?"}], "tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": false, "score": 1, "last_activity_date": 1490289159, "creation_date": 1490289159, "answer_id": 42982701, "question_id": 42976981, "link": "https://stackoverflow.com/questions/42976981/perl-dbixclass-getting-the-current-time-from-the-database/42982701#42982701", "title": "Perl DBIx::Class: getting the current time from the Database", "body": "<p>I always recommend to do all date/time related things on the app server and not rely on the database server(s). Essentially that means to not use a trigger but pass the datetime on insert/update and make it mandatory (NOT NULL).\nBesides that you should store datetimes in UTC and convert to your local or other required timezone in your code.\nYour issue likely happens because of an incorrect or missing timezone configuartion in which case DateTime defaults to its floating timezone.</p>\n"}], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1490289159, "creation_date": 1490274498, "question_id": 42976981, "link": "https://stackoverflow.com/questions/42976981/perl-dbixclass-getting-the-current-time-from-the-database", "title": "Perl DBIx::Class: getting the current time from the Database", "body": "<p>Here is my problem:</p>\n\n<p>I want to calculate how long ago a record was updated in a DB.</p>\n\n<p>The DB is in PostgreSQL, the update_time field is populated by a trigger that uses <code>CURRENT_TIMESTAMP(2)</code>. The field is inflated to a <code>DateTime</code> object by DBIx::Class. I get the current time in my code using <code>DateTime-&gt;now()</code></p>\n\n<p>My problem is that when I retrieve the field value, it's off by 1 h (ie it's 1h ahead of <code>DateTime-&gt;now()</code>). I am in the CET time zone, so 1h ahead of UTC currently.</p>\n\n<p>The right way to solve the problem is likely at the DB level. I have tried to replace <code>CURRENT_TIMESTAMP</code> with <code>LOCALTIMESTAMP</code>, to no avail.</p>\n\n<p>I think actually a more robust solution (ie one that doesn't rely on getting the DB right) would be to get the current time stamp from the DB itself. I really just need the epoch, since that's what I use to compute the difference.</p>\n\n<p>So the question is: is there a simple way to do this: get the current time from the DB using DBIx::Class?</p>\n\n<p>A different way to get the DB and DateTime to agree on what the current time is would also be OK!</p>\n"}, {"tags": ["perl", "sorting", "hash", "key"], "comments": [{"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1490274747, "post_id": 42976932, "comment_id": 73046039, "body": "Oh sorry, this was a typo - updated."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "edited": false, "score": 0, "creation_date": 1490275334, "post_id": 42977162, "comment_id": 73046529, "body": "Thank you this was exactly what I was looking for. I think I understand my mistake now. I was trying to access the hash values with <code>$hash{$a}</code> and thereby it tried to sort by the values which did not contain &quot;Test&quot;. Is this correct?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "edited": false, "score": 1, "creation_date": 1490275592, "post_id": 42977162, "comment_id": 73046738, "body": "You were trying to sort by the &#39;values&#39; of your hash, yes."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1490276549, "last_edit_date": 1490276549, "creation_date": 1490274954, "answer_id": 42977162, "question_id": 42976932, "link": "https://stackoverflow.com/questions/42976932/sorting-mixed-array-in-perl/42977162#42977162", "title": "Sorting mixed array in perl", "body": "<p>The thing with <code>sort</code> is you can sort by anything you like, you just need to ensure you return the right values based on inserted comparison. </p>\n\n<p>So in your case - it appears you're sorting on 'the bit which isn't test' and comparing numerically first, and alphabetically second. </p>\n\n<p>What you're doing though, is looking up your hash keys with:</p>\n\n<pre><code>my @temp_a = split(\"Test\",$hash{$a});\n</code></pre>\n\n<p>And that ... doesn't actually work, because in <em>none</em> of your examples does <code>$hash{$a}</code> include the word 'test'. </p>\n\n<p>So I think you're misunderstanding something profound.</p>\n\n<p>I <em>think</em> you want:</p>\n\n<pre><code>sub my_sort {\n   my ($a1) = $a =~ m/Test(\\w+)/;\n   my ($b1) = $b =~ m/Test(\\w+)/;\n\n   if ( $a1 =~ /\\d/ and $b1 =~ /\\d/ ) {\n      return $a1 &lt;=&gt; $b1;\n   }\n   else {\n      return $a1 cmp $b1;\n   }\n}\n</code></pre>\n\n<p>However, you may find it simpler still to use <a href=\"http://search.cpan.org/~bingos/Sort-Naturally-1.03/lib/Sort/Naturally.pm\" rel=\"nofollow noreferrer\"><code>Sort::Naturally</code></a> </p>\n\n<pre><code>foreach my $keys ( nsort keys %hash ) {\n   print \"$keys\\n\";\n}\n</code></pre>\n\n<p>(Although that does sort TestA above Test1).</p>\n\n<p>You could do some magic using <code>dualvar</code> but that's a bit of a can of worms. For the sake of curiosity though:</p>\n\n<pre><code>use Scalar::Util qw ( dualvar ); \nsub my_sort {\n   $_ = dualvar ( s/\\D+//r || 999999, $_ ) for $a, $b; \n   return ( $a &lt;=&gt; $b \n         || $a cmp $b );\n}\n</code></pre>\n\n<p>This sorts the way you asked (provided the numbers don't exceed 999999) by overloading the numeric conversion of your 'text only' strings. </p>\n\n<p>So Test1 becomes a dualvar containing ( 1, \"Test1\" ) which sorts the way you'd expect, but <code>TestA</code> becomes dualvar ( 999999, \"TestA\" ) - and that sorts behind anything with a 'normal' numeric range, but the comparison 'falls through' when there's two, and they compare based on string equivalence. </p>\n\n<p>If you do the same with <code>0</code> (e.g. <code>$_ = dualvar ( s/\\D+//r || 0, $_ ) for $a, $b;</code> then <code>TestA</code> and <code>TestB</code> again sort to the top. </p>\n"}], "owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "accepted_answer_id": 42977162, "answer_count": 1, "score": 0, "last_activity_date": 1490276549, "creation_date": 1490274378, "last_edit_date": 1490274763, "question_id": 42976932, "link": "https://stackoverflow.com/questions/42976932/sorting-mixed-array-in-perl", "title": "Sorting mixed array in perl", "body": "<p>I have a few keys of a hash which look like the following:</p>\n\n<pre><code>Test21\nTest1\nTest4\nTest2\nTest13\nTestA\nTestB\n</code></pre>\n\n<p>I tried several approaches to sort them using either the inbuilt sort function or extra subroutines but I just do not seem to get it right.</p>\n\n<p>My desired output would be:</p>\n\n<pre><code>Test1\nTest2\nTest4\nTest13\nTest21\nTestA\nTestB\n</code></pre>\n\n<p>One of my approaches looked like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper qw(Dumper);\n\n\nmy % hash = (Test1 =&gt; \"Hello\",Test21 =&gt; \"Somedata\", Test4 =&gt; \"SomeMoreData\",Test2 =&gt; \"EvenMore\",Test13 =&gt; \"AlotMore\",TestA =&gt; \"Nope\", TestB =&gt; \"EvenMoreNope\");\n\nforeach my $keys(sort byNumberandAlpha keys %hash){\n    print \"$keys\\n\";\n}\n\n\nsub byNumberandAlpha{\n\n    my @temp_a = split(\"Test\",$hash{$a});\n    my $element_a = $temp_a[1];\n\n    my @temp_b = split(\"Test\",$hash{$b});\n    my $element_b = $temp_b[1];\n\n    if ( $element_a  =~ /[0-9]/ &amp;&amp; $element_b =~ /[0-9]/ ) {\n\n        $a &lt;=&gt; $b;\n\n    }else{\n\n        $a cmp $b;\n    }\n}\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>Use of uninitialized value $element_a in pattern match (m//) at ExpirimentalSorting.pl line 23.\nTest1\nTest13\nTest2\nTest21\nTest4\nTestA\nTestB\n</code></pre>\n\n<p>Any help on getting this figured out is much very much appreciated.</p>\n"}, {"tags": ["perl", "button"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1490272677, "post_id": 42976082, "comment_id": 73044391, "body": "Please indent your code &amp; Include your error, This just contains the code!"}, {"owner": {"reputation": 1618, "user_id": 7281091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeIC6.jpg?s=128&g=1", "display_name": "sameera lakshitha", "link": "https://stackoverflow.com/users/7281091/sameera-lakshitha"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1490272966, "post_id": 42976082, "comment_id": 73044630, "body": "error                                                                                                                 variable is not of type Wx::Point at 05_button_with_event_and_message_box.pl line 37."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1490290091, "creation_date": 1490290091, "answer_id": 42982991, "question_id": 42976082, "link": "https://stackoverflow.com/questions/42976082/get-error-in-create-button-with-event-and-message-box-using-perl-language/42982991#42982991", "title": "Get Error in Create button with event and message box using perl language", "body": "<p>Seems like you forgot to provide the window title argument in the call to\n<code>Wx::Frame-&gt;new()</code>:</p>\n\n<p>Try this:</p>\n\n<pre><code>my $self = $class-&gt;SUPER::new(\n    undef, -1, \"My title\",\n    wxDefaultPosition, wxDefaultSize, );\n</code></pre>\n\n<p><strong>Note</strong>:</p>\n\n<p>I have not use <code>wxWidgets</code> before. I was able to install the <code>wxPerl</code>\nnow on Ubuntu 16.10 using the following commands:</p>\n\n<pre><code>sudo apt-get install libssl-dev\nsudo apt-get install gtk2.0\nsudo apt-get install build-essential libgtk2.0-dev\nsudo apt-get install libwx-scintilla-perl\ncpanm Wx::App  \n</code></pre>\n"}], "owner": {"reputation": 1618, "user_id": 7281091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeIC6.jpg?s=128&g=1", "display_name": "sameera lakshitha", "link": "https://stackoverflow.com/users/7281091/sameera-lakshitha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 42982991, "answer_count": 1, "score": -1, "last_activity_date": 1508995889, "creation_date": 1490272121, "last_edit_date": 1508995889, "question_id": 42976082, "link": "https://stackoverflow.com/questions/42976082/get-error-in-create-button-with-event-and-message-box-using-perl-language", "title": "Get Error in Create button with event and message box using perl language", "body": "<p>I am new to perl programming. I am trying to build <b>create a button with event and message box</B> using Perl language. This button call event and camming message box. I use the <b>Padre Perl IDE</b> for doing this task.\nAfter it ran, came error. </p>\n\n<p><strong>Error:</strong></p>\n\n<blockquote>\n  <p>error variable is not of type Wx::Point at 05_button_with_event_and_message_box.pl line 37.</p>\n</blockquote>\n\n<p>Can you help me to solve this problem?</p>\n\n<p><b>my Perl code</b></p>\n\n<pre><code>#!/usr/bin/perl\n\npackage main;\nuse 5.008;\nuse strict;\nuse warnings;\n\n$| = 1;\n\nmy $app = Demo::App-&gt;new;\n$app-&gt;MainLoop;\npackage Demo::App;\nuse strict;\nuse warnings;\nuse base 'Wx::App';\nour $frame;\nsub OnInit {\n    $frame = Demo::App::Frame-&gt;new;\n    $frame-&gt;Show(1);\n}\npackage Demo::App::Frame;\nuse strict;\nuse warnings;\nuse Wx qw(:everything);\nuse base 'Wx::Frame';\n\nsub new {\n    my ($class) = @_;\n    my $self = $class-&gt;SUPER::new(\n        undef, -1,\n        wxDefaultPosition, wxDefaultSize, );\n    my $button = Wx::Button-&gt;new( $self, -1, \"What is this smell?\" );\n    Wx::Event::EVT_BUTTON(\n        $self, $button,\n        sub {\n            my ( $self, $event ) = @_;\n            print \"printing to STDOUT\\n\";\n            print STDERR \"printing to STDERR\\n\";\n            Wx::MessageBox( \"This is the smell of an Onion\", \"Title\", wxOK | wxCENTRE, $self );\n    }\n    );\n    $self-&gt;SetSize( $button-&gt;GetSizeWH );\n    Wx::Event::EVT_CLOSE(\n        $self,\n        sub {\n            my ( $self, $event ) = @_;\n            $event-&gt;Skip;\n        }\n    );\n    return $self;\n}\n</code></pre>\n\n<p>Can you help me to solve this problem?\nThanks any audience.</p>\n"}, {"tags": ["perl", "subroutine", "error-reporting", "die"], "comments": [{"owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 2, "creation_date": 1490269944, "post_id": 42975191, "comment_id": 73042373, "body": "Did you hear about Carp. I think it is what you need to use. See this link - <a href=\"http://perldoc.perl.org/Carp.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Carp.html</a>"}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "edited": false, "score": 0, "creation_date": 1490270381, "post_id": 42975191, "comment_id": 73042664, "body": "@Mohit oh wow. Yes, I knew about <code>carp</code> but didn&#39;t know it did this automatically. Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490271014, "post_id": 42975191, "comment_id": 73043110, "body": "@terdon: That&#39;s pretty much <i>all</i> it does!"}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490271136, "post_id": 42975191, "comment_id": 73043219, "body": "@Borodin fine, rub it in why don&#39;t&#39;cha :P Indeed, that is pretty much all it does. For some reason, despite having known about it for years, I had never twigged to that very obvious fact."}], "answers": [{"comments": [{"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "edited": false, "score": 0, "creation_date": 1490283876, "post_id": 42975389, "comment_id": 73053602, "body": "Sorry for switching the accept to the other answer but since they provided an actual example, it seems best to have that one come up on the top of the page. Thanks though!"}, {"owner": {"reputation": 348, "user_id": 1741997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2HtyS.jpg?s=128&g=1", "display_name": "cesargastonec", "link": "https://stackoverflow.com/users/1741997/cesargastonec"}, "edited": false, "score": 0, "creation_date": 1525456523, "post_id": 42975389, "comment_id": 87378427, "body": "That&#39;s enough to make a simple log file with code line number"}], "tags": [], "owner": {"reputation": 1763, "user_id": 1016442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97080849fb073d925fee1b8c8b22d85?s=128&d=identicon&r=PG", "display_name": "nlu", "link": "https://stackoverflow.com/users/1016442/nlu"}, "is_accepted": false, "score": 7, "last_activity_date": 1490270310, "creation_date": 1490270310, "answer_id": 42975389, "question_id": 42975191, "link": "https://stackoverflow.com/questions/42975191/how-can-a-perl-subroutine-report-the-line-that-called-it/42975389#42975389", "title": "How can a Perl subroutine report the line that called it?", "body": "<p>There is <code>caller</code> , to do this:\n<a href=\"https://perldoc.perl.org/functions/caller.html\" rel=\"noreferrer\">https://perldoc.perl.org/functions/caller.html</a></p>\n\n<pre><code>my ($package, $filename, $line) = caller;\n</code></pre>\n\n<p>gives you the information you need.</p>\n\n<p>However, as you are talking about debugging generally, you can get a complete backtrace from <code>carp</code>, as mentioned already.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1490279273, "last_edit_date": 1490279273, "creation_date": 1490278938, "answer_id": 42978805, "question_id": 42975191, "link": "https://stackoverflow.com/questions/42975191/how-can-a-perl-subroutine-report-the-line-that-called-it/42978805#42978805", "title": "How can a Perl subroutine report the line that called it?", "body": "<p>That's the point of <a href=\"http://search.cpan.org/perldoc?Carp\" rel=\"nofollow noreferrer\">Carp</a>'s <code>croak</code>.</p>\n\n<p><code>Pkg.pm</code>:</p>\n\n<pre><code>package Pkg;\n\nuse Carp qw( croak );\n\nsub some_func {\n    my ($cmd, $param) = @_;\n\n    $cmd eq 'encode' || $cmd eq 'decode'\n       or croak(\"Invalid command \\\"$cmd\\\"\");\n\n    # ...\n}\n\n1;\n</code></pre>\n\n<p><code>a.pl</code>:</p>\n\n<pre><code>use Pkg;\n\nPkg::some_func('foo', 'bar');\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Invalid command \"foo\" at a.pl line 3.\n</code></pre>\n"}], "owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 42978805, "answer_count": 2, "score": 2, "last_activity_date": 1490279273, "creation_date": 1490269772, "question_id": 42975191, "link": "https://stackoverflow.com/questions/42975191/how-can-a-perl-subroutine-report-the-line-that-called-it", "title": "How can a Perl subroutine report the line that called it?", "body": "<p>I am writing a Perl pipeline, a script that calls various other programs and manages passing data from one to the other. The script (call it <code>pipeline.pl</code>) and the various sub-scripts it manages all share a list of common subroutines defined in <code>subroutines.ph</code> and included via a <code>require subroutines.ph</code> directive. </p>\n\n<p>One of these is a function whose job is to exit printing an error message (the actual subroutine also does some other jobs, but they're not relevant here; no, I am not reinventing <code>die()</code>):</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>## subroutines.ph\nsub errorDie\n{\n    my ($errMsg) = @_;\n    ## various other cleanup tasks here\n    die($errMsg);\n}\n1;\n</code></pre>\n\n<p>And, in <code>pipeline.pl</code>:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl \nrequire 'subroutines.ph';\n\nerrorDie(\"foo\")\n</code></pre>\n\n<p>Running the script above results in:</p>\n\n<pre><code>foo at subroutines.ph line 5.\n</code></pre>\n\n<p>Is it possible to have it instead report something like:</p>\n\n<pre><code>foo at pipelines.pl line 4.\n</code></pre>\n\n<p>So, instead of reporting the line the <code>die()</code> was found on, it should report the line of the original script where the <code>errorDie</code> subroutine was called from. I know I can do this by including the line in the <code>$errMsg</code> variable, but that is fragile and cumbersome. Can this be done automatically? Can a subroutine defined in an external file detect where it was called from?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490258191, "post_id": 42970789, "comment_id": 73034126, "body": "Should CD contain <i>any</i> value of TH for the condition to be true? Even if there are ten keys in each of them, and only one key/value pair is the same?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1490258815, "post_id": 42970789, "comment_id": 73034499, "body": "You should always <code>use strict</code>. It&#39;s good that you have <code>warnings</code>, but please turn on <code>strict</code> as well. Also, your <code>%instancesCD</code> will always be empty. You cannot assign to two list types (hashes or arrays) like that. Perl only passes <i>a list of values</i> and doesn&#39;t know where in <code>@_</code> one list ends and the other starts. Pass references to <code>determine_accuracy</code> instead. All your function names are snake case. Why are your variable names camel case? Decide for one. Snake case is what most people do in Perl."}, {"owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490273847, "post_id": 42970789, "comment_id": 73045341, "body": "hello @simbabque. I did have use strict, but it was creating some errors, telling me to make the hashes global. Then, when I replaced &quot;our&quot; for &quot;my&quot;, errors persisted, so that was the only way I could get it to stop."}, {"owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490274184, "post_id": 42970789, "comment_id": 73045614, "body": "@simbabque, Thanks very much for your help, I appreciate it. So I am trying to go through every key/value pair in TH and see if it exists in CD. The condition should be true for each key/value pair of TH that is found in CD, and false if the key/value pair of TH is not found in CD.There should be many times where this occurs, anywhere from 1-5000, and the tp and fn values should be incremented each time a match is found (or not). Does that make sense?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490274708, "post_id": 42970789, "comment_id": 73046010, "body": "You should definitely get it to work with <code>strict</code>. Looks like you don&#39;t understand yet how scope works in Perl. But first fix the problem with <code>my (%instancesTH, %instancesCD) = (@_);</code> and <a href=\"https://stackoverflow.com/posts/42970789/edit\">edit</a> the question to update the code. Then we can talk about the counting."}, {"owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490279959, "post_id": 42970789, "comment_id": 73050288, "body": "Hi, I&#39;m not sure what you mean by pass references to determine_accuracy. I tried this but it did not work:  my (determine_accuracy(determine_instancesa, determine_instancesb) ) = (@_);"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "edited": false, "score": 0, "creation_date": 1490280765, "post_id": 42970789, "comment_id": 73050981, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/138837/discussion-between-simbabque-and-jelly\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1490293690, "last_edit_date": 1490293690, "creation_date": 1490258522, "answer_id": 42970975, "question_id": 42970789, "link": "https://stackoverflow.com/questions/42970789/how-to-compare-hashes-of-hashes-perl/42970975#42970975", "title": "how to compare hashes of hashes perl", "body": "<p>You need to iterate one of them and check for the existence of each key. Here is a verbose implementation.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %foo = ( a =&gt; 1, b =&gt; 2, c =&gt; 3, x =&gt; 7 );\nmy %bar = ( x =&gt; 7, y =&gt; 8, z =&gt; 9 );\n\nforeach my $key ( keys %bar ) {\n    CORE::say $key if exists $foo{$key} &amp;&amp; $bar{$key} eq $foo{$key};\n}\n</code></pre>\n\n<p>This will print <code>x</code>. If you remove the <code>x =&gt; 7</code> from <code>%foo</code>, it will print nothing.</p>\n\n<hr>\n\n<p>Here is there result of the extended chat session we had. A full program that compares the keys and values, with unit tests.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Test::More;\n\nmy @test_cases = (\n    {\n        'name' =&gt; 'all keys match',\n        'th'   =&gt; {\n            surfacecharge =&gt; {\n                87 =&gt; 'negatively charged',\n            },\n        },\n        'cd' =&gt; {\n            surfacecharge =&gt; {\n                87 =&gt; 'negatively charged',\n            },\n        },\n        'true positives'  =&gt; { surfacecharge =&gt; 1, }, # here \n        'false negatives' =&gt; { surfacecharge =&gt; 0, }, # but this one comes out undef\n    },\n    {\n        'name' =&gt; 'key matches, value does not',\n        'th'   =&gt; {\n            surfacecharge =&gt; {\n                87 =&gt; 'negatively charged',\n            },\n        },\n        'cd' =&gt; {\n            surfacecharge =&gt; {\n                87 =&gt; 'positively charged',\n            },\n        },\n        'true positives'  =&gt; { surfacecharge =&gt; 0, },\n        'false negatives' =&gt; { surfacecharge =&gt; 1, },\n    },\n    {\n        'name' =&gt; 'two matching keys',\n        'th'   =&gt; {\n            surfacecharge =&gt; {\n                87 =&gt; 'negatively charged',\n                88 =&gt; 'chronically tired',\n            },\n        },\n        'cd' =&gt; {\n            surfacecharge =&gt; {\n                87 =&gt; 'negatively charged',\n                88 =&gt; 'chronically tired',\n            },\n        },\n        'true positives'  =&gt; { surfacecharge =&gt; 2, },\n        'false negatives' =&gt; { surfacecharge =&gt; 0, },\n    },\n    {\n        'name' =&gt; 'two/zero, one/one',\n        'th'   =&gt; {\n            surfacecharge =&gt; {\n                87 =&gt; 'negatively charged',\n                88 =&gt; 'chronically tired',\n            },\n            areasurcharge =&gt; {\n                1 =&gt; 'stuff',\n                2 =&gt; 'goo',\n            },\n        },\n        'cd' =&gt; {\n            surfacecharge =&gt; {\n                87 =&gt; 'negatively charged',\n                88 =&gt; 'chronically tired',\n            },\n            areasurcharge =&gt; {\n                1 =&gt; 'stuff',\n                0 =&gt; 'do not want',\n            },\n        },\n        'true positives'  =&gt; { surfacecharge =&gt; 2, areasurcharge =&gt; 1, },\n        'false negatives' =&gt; { surfacecharge =&gt; 0, areasurcharge =&gt; 1, },\n    },\n);\n\nforeach my $test (@test_cases) {\n    my ( $true_positives, $false_negatives ) = determine_accuracy( $test-&gt;{th}, $test-&gt;{cd} );\n    is_deeply $true_positives,  $test-&gt;{'true positives'},  \"$test-&gt;{name}: true positives\";\n    is_deeply $false_negatives, $test-&gt;{'false negatives'}, \"$test-&gt;{name}: false negatives\";\n}\ndone_testing;\n\nsub determine_accuracy {\n    my ( $instancesTH, $instancesCD ) = @_;\n\n    my $tp;\n    my $fn;\n\n    foreach my $file ( keys %{$instancesTH} ) {\n        $tp-&gt;{$file} = 0;\n        $fn-&gt;{$file} = 0;\n        foreach my $pos ( keys %{ $instancesTH-&gt;{$file} } ) {\n            if ( exists $instancesCD-&gt;{$file}-&gt;{$pos}\n                &amp;&amp; $instancesCD-&gt;{$file}-&gt;{$pos} eq $instancesTH-&gt;{$file}-&gt;{$pos} )\n            {\n                $tp-&gt;{$file}++;\n            }\n            else {\n                $fn-&gt;{$file}++;\n            }\n        }\n    }\n    return $tp, $fn;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7706734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82fc74c3ecd825259dfd199136792?s=128&d=identicon&r=PG&f=1", "display_name": "jelly", "link": "https://stackoverflow.com/users/7706734/jelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 42970975, "answer_count": 1, "score": 2, "last_activity_date": 1490293690, "creation_date": 1490257962, "last_edit_date": 1490280980, "question_id": 42970789, "link": "https://stackoverflow.com/questions/42970789/how-to-compare-hashes-of-hashes-perl", "title": "how to compare hashes of hashes perl", "body": "<p>I want to search <code>%instancesCD</code> for the contents of <code>%instancesTH</code>; specifically, a match between the <code>$file</code> and <code>$position</code> keys and the associated value. If <code>%instancesCD</code> contains a key/value from <code>%instancesTH</code>, then <code>$fp</code> is incremented. If <code>%instancesCD</code> does not contain a key/value from <code>%instancesTH</code>, then <code>$fn</code> is incremented. Also, I apologize if the way I am referring to the hashes is incorrect; this is my first time using hashes.</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nprint_accuracy(determine_accuracy(determine_instancesTH(), determine_instancesCD()));\n\nsub determine_accuracy {\nmy (%instancesTH, %instancesCD) = (@_);\n    foreach my $file (keys %instancesTH) {\n        foreach my $pos (keys %{$instancesTH{$file} } ) {\n                if {\n                # ... \n                    my $fp++;\n                }\n                else {\n                    my $fn++;\n                }\n         }\n     }\n    return $tp, $fn;\n}\n\nsub print_accuracy {\n    my ($tp, $fn) = (@_);\n    print \"True Positives: $tp\\n\";\n    print \"False Negatives: $fn\\n\\n\";\n}\n\nsub determine_instancesA {\n    # ... \n    return %instancesA;\n}\n\nsub determine_instancesB {\n    # ... \n    return %instancesB;\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 4, "creation_date": 1490258411, "post_id": 42969932, "comment_id": 73034259, "body": "A relevant structure you might want to lookup to solve this is a <i>Dispatch Table</i> (any search engine should give you plenty of results)"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 23, "user_id": 4352707, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000698631712/picture?type=large", "display_name": "Subbaiya Arasu", "link": "https://stackoverflow.com/users/4352707/subbaiya-arasu"}, "edited": false, "score": 0, "creation_date": 1490257562, "post_id": 42970030, "comment_id": 73033775, "body": "There is a reason this stuff exists. I don&#39;t see any problems with making things a bit more dynamic, if that kind of thing is called for. I&#39;d appreciate an explanation of the downvote."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 3, "creation_date": 1490258735, "post_id": 42970030, "comment_id": 73034449, "body": "I&#39;m the downvoter, and my answer is the explanation. I don&#39;t believe the OP should be encouraged to use indirect references when the same thing can be achieved just as easily in a <code>strict</code>-compliant fashion, particularly when they&#39;re already using Perl4 conventions (prefixing sub calls with <code>&amp;</code>), which suggests that a) they&#39;re still learning the language and b) they&#39;re learning from sources which do not follow current best practices."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 2, "creation_date": 1490259034, "post_id": 42970030, "comment_id": 73034621, "body": "@Dave I thought so. I did want to point out that the ampersand is bad, but I forgot. I agree that your solution is viable. Maybe include a link to an explanation of a <i>dispatch table</i>, which I believe is relevant. Depending on the actual situation of the OP, using a hash with code refs and dispatching instead of iterating might be the best solution. In any case, I think it&#39;s useful to have an answer that explains how this is possible. I&#39;ll add bit of warning to it."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1490260186, "post_id": 42970030, "comment_id": 73035425, "body": "Yes, agreed that dispatch tables are a more generally useful tool than arrays of coderefs.  I&#39;ll add an example to my answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1490267400, "post_id": 42970030, "comment_id": 73040741, "body": "@DaveSherohman: What do you think a <i>dispatch table</i> has that isn&#39;t provided by an <i>array of coderefs</i>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490267821, "post_id": 42970030, "comment_id": 73041036, "body": "Funny how the two answers are developing."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490277772, "post_id": 42970030, "comment_id": 73048498, "body": "@Borodin: Dispatch tables are &quot;very useful in cases where you might not want to call every sub every time, and always in the same order&quot;. But I suspect you&#39;re trying to prompt me to add something more detailed. Any specific pointers to what you think is missing?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1490279711, "post_id": 42970030, "comment_id": 73050056, "body": "@DaveSherohman: Not at all. I&#39;m wondering why you think an array of subroutine references isn&#39;t a dispatch table, and how a dispatch table is &quot;more useful&quot;."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1490280553, "post_id": 42970030, "comment_id": 73050814, "body": "@Borodin: OK, frame shift for me, then. I associate the term &quot;dispatch table&quot; specifically with hashes (or hash-like structures in non-Perl contexts) and have never considered that an array might also qualify, but you&#39;re right that it&#39;s not really all that different. But your asking about &quot;more useful&quot; had me fighting to resist the urge to expand my (hash-based) dispatch table example into a minimalist plugin framework..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 1, "creation_date": 1490281878, "post_id": 42970030, "comment_id": 73051916, "body": "@DaveSherohman: <a href=\"https://en.m.wikipedia.org/wiki/Dispatch_table\" rel=\"nofollow noreferrer\"><i>Wikipedia</i></a> says that <i>&quot;In computer science, a dispatch table is a table of pointers to functions or methods&quot;</i>. So basically it&#39;s an array of subroutine references. It&#39;s irrelevant whether the table is indexed by an integer or a string. This reminds me of the frustrating misuse of  <i>associative array</i> to mean a hash table, when an ordinary integer-indexed array is &quot;associative&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490282348, "post_id": 42970030, "comment_id": 73052290, "body": "Arrays aren&#39;t <a href=\"https://en.wikipedia.org/wiki/Associative_array\" rel=\"nofollow noreferrer\">associative arrays</a> because you can&#39;t add/remove key-&gt;val mappings to/from an array."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 0, "last_activity_date": 1490259353, "last_edit_date": 1495542347, "creation_date": 1490255208, "answer_id": 42970030, "question_id": 42969932, "link": "https://stackoverflow.com/questions/42969932/how-to-call-dynamic-subroutine-in-a-loop/42970030#42970030", "title": "How to call dynamic subroutine in a loop", "body": "<p>You need to build the function name into a variable first, and then turn off <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\"><code>use strict 'refs'</code></a>. After that, you can call it using the ampersand <code>&amp;</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub case1Validate { return $_[0] }\nsub case2Validate { return $_[0] }\nsub case3Validate { return $_[0] }\n\nfor my $i ( 1 .. 3 ) {\n    no strict 'refs';\n    my $sub_name = 'case' . $i . 'Validate';\n    CORE::say &amp;{$sub_name}( $i );\n}\n</code></pre>\n\n<p>This program will output</p>\n\n<pre><code>1\n2\n3\n</code></pre>\n\n<p>Make sure to disable <code>strict 'refs'</code> in the smallest possible scope. If you do not turn it off, you will get the error</p>\n\n<blockquote>\n  <p>Can't use string (\"case1Validate\") as a subroutine ref while \"strict refs\" in use</p>\n</blockquote>\n\n<p>Note that this is just one of several solutions, and in most cases it should not be the preferred one. It's better to create a <a href=\"https://en.wikipedia.org/wiki/Dispatch_table\" rel=\"nofollow noreferrer\">dispatch table</a> (or a list of code refs, <a href=\"https://stackoverflow.com/a/42970438/1331451\">like Dave explains in his excellent answer</a>) because that way you have better control over what happens inside your program. </p>\n\n<p>Since you're iterating a list of functions now you can use <a href=\"http://perldoc.perl.org/functions/exists.html\" rel=\"nofollow noreferrer\"><code>exists</code></a> to check if they exist before calling them.</p>\n\n<pre><code>&amp;{ $sub_name }( $i) if exists &amp;$sub_name; # both &amp;{} and &amp; are fine\n</code></pre>\n\n<p>The same should be done with a dispatch table where you create the keys on the fly.</p>\n"}, {"comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1490277917, "post_id": 42970438, "comment_id": 73048602, "body": "I was looking at your answer earlier this morning, but objected with the first solution, where the validators were still &quot;hardcoded&quot;, the OP asked for a dynamic solution. The second example at least has <code>$validators{&quot;case$i&quot;}-&gt;(&#39;foo&#39;)</code> which indicates some shape of dynamicness (did I just come up with that word ?) through <code>$i</code>"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 9, "last_activity_date": 1490260671, "last_edit_date": 1490260671, "creation_date": 1490256656, "answer_id": 42970438, "question_id": 42969932, "link": "https://stackoverflow.com/questions/42969932/how-to-call-dynamic-subroutine-in-a-loop/42970438#42970438", "title": "How to call dynamic subroutine in a loop", "body": "<p><code>strict 'refs'</code> complains about indirect references (\"using a variable as a variable name\") for a reason.  Several reasons, in fact, most of them having to do with indirect references reducing your ability to debug and maintain your code.</p>\n\n<p>The better way to do this is to create an array of code references and iterate over that, calling each in turn:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nsub case1Validate { return 'Case 1: ' . $_[0] }\nsub case2Validate { return 'Case 2: ' . $_[0] }\nsub case3Validate { return 'Case 3: ' . $_[0] }\n\nmy @validators = (\\&amp;case1Validate, \\&amp;case2Validate, \\&amp;case3Validate);\n\nfor my $sub (@validators) {\n  say $sub-&gt;('foo');\n}\n</code></pre>\n\n<p>Another technique, which is very useful in cases where you might not want to call every sub every time, and always in the same order, is to use a hash as a <em>dispatch table</em>:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\nsub case1Validate { return 'Case 1: ' . $_[0] }\nsub case2Validate { return 'Case 2: ' . $_[0] }\n\nmy %validators = (\n  case1 =&gt; \\&amp;case1Validate, \n  case2 =&gt; \\&amp;case2Validate, \n  # If the sub is small and you're not using it separately, you can even define\n  # it in-line!\n  case5 =&gt; sub { return 'Case 5: ' . $_[0] }\n);\n\nfor my $i (1 .. 5) {\n  # Because of \"exists\", will only attempt to print for cases 1, 2, and 5,\n  # since cases 3 and 4 don't exist\n  say $validators{\"case$i\"}-&gt;('foo') if exists $validators{\"case$i\"};\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4352707, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000698631712/picture?type=large", "display_name": "Subbaiya Arasu", "link": "https://stackoverflow.com/users/4352707/subbaiya-arasu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 2, "accepted_answer_id": 42970030, "answer_count": 2, "score": 2, "last_activity_date": 1490260671, "creation_date": 1490254893, "last_edit_date": 1490255426, "question_id": 42969932, "link": "https://stackoverflow.com/questions/42969932/how-to-call-dynamic-subroutine-in-a-loop", "title": "How to call dynamic subroutine in a loop", "body": "<p>Can any one help to find easy way to call subroutines in a loop?\nNow, I called them as below manually. How do I do that programmatically?</p>\n\n<pre><code>&amp;case1Validate($fTxt);\n&amp;case2Validate($fTxt);\n&amp;case3Validate($fTxt);\n&amp;case4Validate($fTxt);\n&amp;case5Validate($fTxt);\n&amp;case6Validate($fTxt);\n&amp;case7Validate($fTxt);\n&amp;case8Validate($fTxt);\n&amp;case9Validate($fTxt);\n&amp;case10Validate($fTxt);\n</code></pre>\n"}, {"tags": ["c#", "perl", "web-services", "wcf", "soap"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490256434, "post_id": 42969890, "comment_id": 73033202, "body": "Please <a href=\"https://stackoverflow.com/posts/42969890/edit\">edit</a> your question and include your Perl code. We can&#39;t tell you what is going wrong if we don&#39;t know what you are doing."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2310654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ba119fea8fe3bc5d74694e29fd86e?s=128&d=identicon&r=PG", "display_name": "user2310654", "link": "https://stackoverflow.com/users/2310654/user2310654"}, "edited": false, "score": 0, "creation_date": 1490593877, "post_id": 43002930, "comment_id": 73162488, "body": "Unfortunally no :( As You see in Saop Envelope the data for Object Serverdata is filled. Some strings are empty but this is normal behaviour."}], "tags": [], "owner": {"reputation": 41, "user_id": 5435872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a6106925371c3e549175e6e99a5436?s=128&d=identicon&r=PG&f=1", "display_name": "rahed h", "link": "https://stackoverflow.com/users/5435872/rahed-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1490368004, "creation_date": 1490368004, "answer_id": 43002930, "question_id": 42969890, "link": "https://stackoverflow.com/questions/42969890/wcf-webservice-does-not-fill-komplex-type-send-by-soap-lite/43002930#43002930", "title": "WCF Webservice does not fill komplex Type send by Soap Lite", "body": "<p>Your perl code serverinfos values are empty. If filled, the server answer is ok. </p>\n"}], "owner": {"reputation": 11, "user_id": 2310654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ba119fea8fe3bc5d74694e29fd86e?s=128&d=identicon&r=PG", "display_name": "user2310654", "link": "https://stackoverflow.com/users/2310654/user2310654"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490368004, "creation_date": 1490254728, "last_edit_date": 1490257464, "question_id": 42969890, "link": "https://stackoverflow.com/questions/42969890/wcf-webservice-does-not-fill-komplex-type-send-by-soap-lite", "title": "WCF Webservice does not fill komplex Type send by Soap Lite", "body": "<p>I try to send a complex Datatype from Perl to .NET WCF.\nSimple Types work fine.</p>\n\n<p>WCF Interface:</p>\n\n<pre><code>[ServiceContract]\n\npublic interface IWebservice\n{\n    [WebInvoke(RequestFormat = WebMessageFormat.Xml,\n        ResponseFormat = WebMessageFormat.Xml,\n        BodyStyle = WebMessageBodyStyle.Wrapped)] \n    [OperationContract]\n    void PutColledtedData(ServerInfoCollection Serverdata);\n}\n</code></pre>\n\n<p>Class For DataType</p>\n\n<pre><code>[DataContract (Name=\"ServerInfoCollection\")]\npublic class ServerInfoCollection\n{\n\n    [DataMember]\n    public string OperatingSystem { get; set; }\n    [DataMember]\n    public string OS_Version { get; set; }\n    [DataMember]\n    public string OS_Architecture { get; set; }\n    [DataMember]\n    public string OS_ServicePack { get; set; }\n\n    private long pysicalMem = 0;\n    [DataMember]\n    public long PysicalMemory\n    {\n        get { return pysicalMem; }\n        set { pysicalMem = value; }\n    }\n    [DataMember]\n    public List&lt;FileSystem&gt; Filesystems { get; set; }\n    [DataMember]\n    public string Manufacturer { get; set; }\n    [DataMember]\n    public List&lt;Interface&gt; Interfaces { get; set; }\n    [DataMember]\n    public string Model { get; set; }\n    public ServerInfoCollection()\n    {\n        Filesystems = new List&lt;FileSystem&gt;();\n        Interfaces = new List&lt;Interface&gt;();\n    }\n    [DataMember]\n    public string Hostname { get; set; }\n    [DataMember]\n    public string Alias { get; set; }\n    [DataMember]\n    public string WindowsDomain { get; set; }\n    [DataMember]\n    public string WindowsDomainRole { get; set; }\n    [DataMember]\n    public DateTime InstallDate { get; set; }\n    [DataMember]\n    public int LogicalProcessors { get; set; }\n    [DataMember]\n    public int PhysicalProcessors { get; set; }\n    [DataMember]\n    public IPAddress MonitoringIP { get; set; }\n}\n</code></pre>\n\n<p>Soap Envenlove Send to Server</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;soap:Envelope\nsoap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"\nxmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"\nxmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"\nxmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n&lt;soap:Body&gt;\n&lt;PutColledtedData xmlns=\"http://tempuri.org/\"&gt;\n  &lt;Serverdata&gt;\n    &lt;OperatingSystem /&gt;\n\n    &lt;OS_Version&gt;13.1 (Bottle)&lt;/OS_Version&gt;\n\n    &lt;OS_Architecture&gt;x86_64&lt;/OS_Architecture&gt;\n\n    &lt;OS_ServicePack&gt;13.1&lt;/OS_ServicePack&gt;\n\n    &lt;PysicalMemory&gt;6272438272&lt;/PysicalMemory&gt;\n\n    &lt;Manufacturer&gt;VMWare&lt;/Manufacturer&gt;\n\n    &lt;Model /&gt;\n\n    &lt;Hostname&gt;myServerName&lt;/Hostname&gt;\n\n    &lt;Alias&gt;myServerName&lt;/Alias&gt;\n\n    &lt;WindowsDomain /&gt;\n\n    &lt;WindowsDomainRole /&gt;\n\n    &lt;InstallDate&gt;Thu Nov 27 12:21:33 2014&lt;/InstallDate&gt;\n\n    &lt;LogicalProcessors&gt;4&lt;/LogicalProcessors&gt;\n\n    &lt;PhysicalProcessors&gt;4&lt;/PhysicalProcessors&gt;\n  &lt;/Serverdata&gt;\n&lt;/PutColledtedData&gt;\n&lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>Perl Code:</p>\n\n<pre><code>use strict;\nuse SOAP::Lite trace =&gt;  'debug', maptype =&gt; {};\nuse Sys::Hostname;\n\nmy $serverinfos={\nOperatingSystem=&gt;'',\nOS_Version=&gt;'',\nOS_Architecture=&gt;'',\nOS_ServicePack=&gt;'',\nPysicalMemory=&gt;'',\nManufacturer=&gt;'',\nModel=&gt;'',\nHostname=&gt;'',\nAlias=&gt;'',\nWindowsDomain=&gt;'',\nWindowsDomainRole=&gt;'',\nInstallDate=&gt;'',\nLogicalProcessors=&gt;'',\nPhysicalProcessors=&gt;'',\nInterfaces=&gt;'',\nFilesystems=&gt;'',\n\n};\n$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}=0;\n$SOAP::Constants::DO_NOT_USE_CHARSET = 1;\n\n\nmy $uri=\"http://tempuri.org/\";\nmy $url ='https://myserver.her.de:1986/Webservice/Webservice.svc';\nmy $xmlns = 'http://schemas.datacontract.org/2004/07/com.aii.observer';\n\nmy $soap = SOAP::Lite\n  -&gt; uri($uri)\n  -&gt; on_action(sub { sprintf '%sIObserverWebservice/%s', @_ })\n  -&gt; proxy($url, ssl_opts =&gt; [ SSL_verify_mode =&gt; 0 ] )\n  -&gt;autotype(0)\n  -&gt;readable('false');\n\n # some stuff to initialize the serverinfos Hash truncated\n\n\n  my $param=SOAP::Data-&gt;name( \"Serverdata\"=&gt;\\SOAP::Data-&gt;value(\nSOAP::Data-&gt;name(OperatingSystem=&gt;''),\nSOAP::Data-&gt;name(OS_Version=&gt;$serverinfos-&gt;{OS_Version}),\nSOAP::Data-&gt;name(OS_Architecture=&gt;$serverinfos-&gt;{OS_Architecture}),\nSOAP::Data-&gt;name(OS_ServicePack=&gt;$serverinfos-&gt;{OS_ServicePack}),\nSOAP::Data-&gt;name(PysicalMemory=&gt;$serverinfos-&gt;{PysicalMemory}),\nSOAP::Data-&gt;name(Manufacturer=&gt;$serverinfos-&gt;{Manufacturer}),\nSOAP::Data-&gt;name(Model=&gt;''),\nSOAP::Data-&gt;name(Hostname=&gt;$serverinfos-&gt;{Hostname}),\nSOAP::Data-&gt;name(\"Alias\")-&gt;value($serverinfos-&gt;{Alias}),\nSOAP::Data-&gt;name(WindowsDomain=&gt;''),\nSOAP::Data-&gt;name(WindowsDomainRole=&gt;''),\nSOAP::Data-&gt;name(InstallDate=&gt;$serverinfos-&gt;{InstallDate}),\nSOAP::Data-&gt;name(LogicalProcessors=&gt;$serverinfos-&gt;{LogicalProcessors}),\nSOAP::Data-&gt;name(PhysicalProcessors=&gt;$serverinfos-&gt;{PhysicalProcessors})\n\n)\n);\nmy $res=$soap-&gt;call('PutColledtedData',$param);\n</code></pre>\n\n<p>in Webservice I get the Obekct for ServerInfoCollection but all Properties are null.</p>\n\n<p>Where is my missunderstanding??</p>\n\n<p>EDIT: \nAdded Perl Code,\nAdded Webinvoke to ServiceInterface</p>\n"}, {"tags": ["xml", "perl", "xsd", "perl-module"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490255096, "post_id": 42968455, "comment_id": 73032529, "body": "@simbabque I think he&#39;s trying to report all errors in an XML document instead of just the first one. I imagine some tools stop at the first error, which forces you into a fix-validate-repeat cycle when you have multiple errors in your XML."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490255511, "post_id": 42968455, "comment_id": 73032729, "body": "@ThisSuitIsBlackNot yeah that makes sense. But if the document is broken, you cannot really continue parsing. An HTML linter like the W3 validator can do that because HTML is a more forgiving spec, but I don&#39;t see any proper XML parser continue parsing after for example not finding the end of the root node. Oh but then again, we don&#39;t want to parse. We want to validate. Still, apparently they tried one, so my comment is valid. We need to see which one, and how, or the question is off-topic."}, {"owner": {"reputation": 63, "user_id": 5746602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9571be7208ae102cddb1b8f7e78f8d28?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/5746602/kumar"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1490256048, "post_id": 42968455, "comment_id": 73032982, "body": "@ThisSuitIsBlackNot you got my question this is exactly i wanted to ask probably i should i phrased my question in a better way."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1490256359, "post_id": 42968455, "comment_id": 73033156, "body": "Great. That&#39;s much better. Can you maybe also include an example XML and XSD file? I&#39;d like to try something, but I don&#39;t want to go look for examples or roll my own. My XSD skills are a bit rusty. ;)"}], "owner": {"reputation": 63, "user_id": 5746602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9571be7208ae102cddb1b8f7e78f8d28?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/5746602/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1490265866, "creation_date": 1490249354, "last_edit_date": 1495535411, "question_id": 42968455, "link": "https://stackoverflow.com/questions/42968455/validate-an-xml-based-on-an-xsd-and-throw-all-errors-at-once-in-perl", "title": "validate an XML based on an XSD and throw all errors at once in perl", "body": "<p>I am trying to validate an XML based on a XSD. Below is the part of the code where i am validating the xml against xsd:</p>\n\n<pre><code>my $schema = XML::LibXML::Schema-&gt;new(location =&gt; $xsd);\nmy $parser = XML::LibXML-&gt;new;\n\nmy $doc = $parser-&gt;parse_file($xml);\neval { $schema-&gt;validate( $doc ) };\n\nif ( my $ex = $@ ) {\n    return $ex;\n}\n</code></pre>\n\n<p>The code works fine but if the xml is not validated it gives me an error once i fix the issue in the xml and rerun the code i get different set of errors i just want to know if there is any way i can print all the validation errors at once?</p>\n\n<p>I have even tried the solution given by @Paulo SantAnna  in the below link:\n<a href=\"https://stackoverflow.com/questions/3206672/perl-xmllibxmlschema-will-stop-validation-on-first-error\">Perl XML::LibXML::Schema will stop validation on first error</a> \nbut even this didn't work.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1490239902, "post_id": 42966005, "comment_id": 73027209, "body": "Always use <code>use strict; use warnings qw( all );</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1490236086, "post_id": 42966074, "comment_id": 73026243, "body": "Thanks @wumpus-q-wumbley"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 7, "last_activity_date": 1490235456, "creation_date": 1490235456, "answer_id": 42966074, "question_id": 42966005, "link": "https://stackoverflow.com/questions/42966005/nonblocking-waitpid-in-perl/42966074#42966074", "title": "nonblocking waitpid() in perl", "body": "<p>Mistake number 1: you didn't enable warnings.</p>\n\n<p>Mistake number 2: you didn't declare WNOHANG. So it's a bareword, which becomes the string <code>'WNOHANG'</code>. The string then becomes 0 with no warning when interpreted as a number, because it doesn't look like a number. So you called <code>waitpid</code> with flags=0, instead of the WNOHANG flag you intended.</p>\n\n<pre><code>use warnings;\nuse POSIX 'WNOHANG';\n</code></pre>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 42966074, "answer_count": 1, "score": 1, "last_activity_date": 1490235456, "creation_date": 1490235030, "question_id": 42966005, "link": "https://stackoverflow.com/questions/42966005/nonblocking-waitpid-in-perl", "title": "nonblocking waitpid() in perl", "body": "<p>I am trying to do non-blocking waitpid, according to <a href=\"http://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow noreferrer\">perl man page</a>, <code>waitpid($pid,  WNOHANG);</code> will do. But the following seems to be blocking. The result of the printf will take 2 seconds to show up.</p>\n\n<pre><code>$pid = fork;\nif (!$pid) {\n    exec(\"sleep 2\");\n}\nwaitpid($pid,  WNOHANG);\n$retCode = $?;\nprintf \"%04x\\n\", $retCode;\n</code></pre>\n"}]