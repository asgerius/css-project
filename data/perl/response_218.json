[{"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1552517574, "post_id": 55152061, "comment_id": 97045107, "body": "The answer depends a lot on <i>how</i> you installed another version of perl."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1552604918, "last_edit_date": 1552604918, "creation_date": 1552517729, "answer_id": 55152370, "question_id": 55152061, "link": "https://stackoverflow.com/questions/55152061/double-version-of-perl/55152370#55152370", "title": "Double version of perl", "body": "<p>You can have multiple versions of Perl installed without problem, as long as they're installed in separate directories.</p>\n\n<p>If you installed the new one in the same directory as the old one, you got a mess on your hand, and uninstalling the newer version won't magically bring back the older version.</p>\n\n<p>If you installed the new one in the different directory than the old one, you can use either one, and uninstalling the new one won't affect the old one.</p>\n\n<p>You may want to adjust your path and/or your file associations, but that's it.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1552537417, "creation_date": 1552537417, "answer_id": 55154926, "question_id": 55152061, "link": "https://stackoverflow.com/questions/55152061/double-version-of-perl/55154926#55154926", "title": "Double version of perl", "body": "<p>Perl versions with an odd number in the second position (e.g. 13) are development versions. The stable ones have an even number there (e.g. 14). You'll probably want to keep 5.16 (although we're up to 5.28 now, so you are quite behind).</p>\n\n<p>Compiled libraries aren't guaranteed to be binary-compatible between these versions. If you compiled something against 5.13, that result may not work with 5.16. That's not a huge problem though; re-install the module for the new perl.</p>\n"}], "owner": {"reputation": 9, "user_id": 8520896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a61226ff2a6d758d3815d8aabea652c?s=128&d=identicon&r=PG&f=1", "display_name": "sarah18", "link": "https://stackoverflow.com/users/8520896/sarah18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1552604918, "creation_date": 1552515799, "question_id": 55152061, "link": "https://stackoverflow.com/questions/55152061/double-version-of-perl", "title": "Double version of perl", "body": "<p>I had 5.13 perl version in my post .By mistake, I installed an other version (5.16).</p>\n\n<p>If I uninstall the 5.16 version and keep just the old version, Is there any impact would be appeared in the old version's dll or packages ?</p>\n"}, {"tags": ["perl", "csv", "sorting", "unix", "unique"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1552489578, "post_id": 55144600, "comment_id": 97030749, "body": "Welcome to stackoverflow. Can you add what you have tried so far.?"}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 1, "creation_date": 1552492698, "post_id": 55144600, "comment_id": 97032970, "body": "... along with some sample data and related expected output. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 1025, "user_id": 1483318, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e97a593f6a8447dffcaa64da35898c24?s=128&d=identicon&r=PG", "display_name": "mszmurlo", "link": "https://stackoverflow.com/users/1483318/mszmurlo"}, "is_accepted": true, "score": 0, "last_activity_date": 1552494452, "creation_date": 1552494452, "answer_id": 55146785, "question_id": 55144600, "link": "https://stackoverflow.com/questions/55144600/remove-duplicates-from-csv-ie-remove-original-and-the-duplicate/55146785#55146785", "title": "Remove duplicates from csv (ie remove original and the duplicate)", "body": "<p>As you are talking about <code>sort</code>, I believe a solution based on command line is OK.</p>\n\n<p>This is quite heavy solution: I believe there is something better but for the moment I have no better idea. </p>\n\n<p>You need to lines that doesn't match some other lines (or remove those that do match). <code>grep -v</code> does that very well and if added <code>-i</code> option, it doesn't care about the case. As you may have many duplicate lines to remove <code>-f</code> will be your friend as it allows to specify many patterns in a file. As many *nix commands and file options specifying <code>-</code> (a single dash) as a filename makes the command read the data from the standard input rather than from a file on a storage. To summarize : <code>grep -i -f - -v ~/tmp/file</code> will read the file <code>/tmp/file</code> and the patterns from the standard input. It will keep all lines that doesn't match the patterns and the match will be done regardless of characters case.</p>\n\n<p>Now you need to build the pattern list which is the list of duplicate lines. <code>uniq</code> identifies duplicate <strong>adjacent</strong> lines, <code>-d</code> makes it print duplicates once and <code>-i</code> makes it ignore the case. to make line adjacent, you can use <code>sort</code> which with option <code>-f</code> also ignores the case. So <code>sort -f ~/tmp/file | uniq -d -i</code> get a file prints duplicates once. </p>\n\n<p>Putting both parts together results in the following command : <code>sort -f ~/tmp/file | uniq -d -i | grep -i -f - -v ~/tmp/file</code>. <code>sort</code> groups same lines together so that <code>uniq</code> can keep those that are duplicated which are used as patterns to select lines that will be removed.</p>\n\n<p>Let's take an example. The file below has one letter per line (<code>dup</code> simply identifies lines that are duplicated):</p>\n\n<pre><code>  a              dup\n  b\n  c              dup\n  a              dup\n  d\n  C              dup\n  e\n  f\n  c              dup\n  A              dup\n</code></pre>\n\n<p>The application of our pipe of filters results in:</p>\n\n<pre><code>sort -f ~/tmp/file   |   uniq -d -i   |   grep -i -f - -v ~/tmp/file\n         a\n         a\n         A                                         b\n         b                    a                    d\n         c        -----&gt;      b     ----&gt;          e\n         c                                         f\n         C\n         d\n         e\n         f\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11197769, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fhAfx1UbcyY/AAAAAAAAAAI/AAAAAAAAACg/zWZhBEedEKc/photo.jpg?sz=128", "display_name": "pheh", "link": "https://stackoverflow.com/users/11197769/pheh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 55146785, "answer_count": 1, "score": -1, "last_activity_date": 1552494452, "creation_date": 1552488126, "question_id": 55144600, "link": "https://stackoverflow.com/questions/55144600/remove-duplicates-from-csv-ie-remove-original-and-the-duplicate", "title": "Remove duplicates from csv (ie remove original and the duplicate)", "body": "<p>Scenario: I have two csv files. One CSV is a trusted address file (trusted.csv), the other csv is testing address file (testing.csv) that will have duplicates addresses from the first file.</p>\n\n<p>The problem: trusted.csv has already been used to print labels. I need to use testing.csv to generate more labels but I can't have any duplicates. I tried merging the two csv files, but I cant figure out how to remove both the duplicate entry and the offending originating entry. Another problem is that I need to ignore case. sort -uf works like it should, but of course that means it leave the original value.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1552487697, "post_id": 55144132, "comment_id": 97029338, "body": "@toolic you probably don&#39;t have the same Perl version as OP. At some point it became possible to use <code>keys</code> on references, and then it was removed (I can&#39;t tell by memory in which versions those changes were made)."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1552487730, "post_id": 55144132, "comment_id": 97029370, "body": "Does using <code>keys %{$hash{$_}</code> instead of <code>keys $hash{$_}</code> solve your problem?"}, {"owner": {"reputation": 263, "user_id": 1895112, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O1L2A.jpg?s=128&g=1", "display_name": "Gabelins", "link": "https://stackoverflow.com/users/1895112/gabelins"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1552487947, "post_id": 55144132, "comment_id": 97029540, "body": "@Dada it worked! Thanks a lot!"}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1552488648, "post_id": 55144496, "comment_id": 97030044, "body": "Not experimental anymore: <code>keys HASHREF</code> was removed in Perl 5.24."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1552488929, "post_id": 55144496, "comment_id": 97030247, "body": "Thanks Dada, added."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552498335, "post_id": 55144496, "comment_id": 97036416, "body": "Though it was <a href=\"https://perldoc.pl/perl5140delta#Array-and-hash-container-functions-accept-references\" rel=\"nofollow noreferrer\">always considered experimental</a>, it only had experimental warnings since 5.18 when this process was formalized (it shares this honor with smartmatch and lexical <code>$_</code>)."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1552488923, "last_edit_date": 1552488923, "creation_date": 1552487894, "answer_id": 55144496, "question_id": 55144132, "link": "https://stackoverflow.com/questions/55144132/how-to-fix-perl-error-type-of-arg-1-to-each-must-be-hash-not-hash-element/55144496#55144496", "title": "how to fix perl error: Type of arg 1 to each must be hash (not hash element)", "body": "<p>In versions of perl older than v5.14 (<strong>edit</strong>: and newer than v5.22), the argument to <code>keys</code> must be a hash, not a hash reference. You must dereference your hash reference to make it a valid argument to <code>keys</code>.</p>\n\n<pre><code>%hash = (abc =&gt; 123);\n$hashref = { def =&gt; 456 };\n\n@k = keys %hash;       # ok\n@k = keys $hashref;    # error in perl &lt;v5.14\n@k = keys %{$hashref}; # ok\n</code></pre>\n\n<p>Even in versions 5.14 through 5.22, <code>keys HASHREF</code> was considered \"experimental\" and subject to change in future versions.</p>\n"}], "owner": {"reputation": 263, "user_id": 1895112, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O1L2A.jpg?s=128&g=1", "display_name": "Gabelins", "link": "https://stackoverflow.com/users/1895112/gabelins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 55144496, "answer_count": 1, "score": 0, "last_activity_date": 1552488923, "creation_date": 1552486863, "question_id": 55144132, "link": "https://stackoverflow.com/questions/55144132/how-to-fix-perl-error-type-of-arg-1-to-each-must-be-hash-not-hash-element", "title": "how to fix perl error: Type of arg 1 to each must be hash (not hash element)", "body": "<p>I have a code that I wrote sometime ago.\nI tried to use it and I get this error <code>Type of arg 1 to keys must be hash or array (not hash element) at line 18, near \"} :\"</code> that I cannot figure out how to fix.\nThe code is this</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.12.0;\n\nmy $file = \"test.txt\";\nopen DATA, '&lt;', $file or die \"$!\";\n\nmy %hash;\nwhile(&lt;DATA&gt;){\n    next if /^\\s*$/m; # In case if you have empty lines.\n    my ($key1,$key2,$val) = /^(\\w)\\|(\\w) ([0-9.-]+)/;\n    $val = int($val*10)/10; \n    $hash{$val}{$key1}++;\n    $hash{$val}{$key2}++;\n}\nfor (-9..9){\n    $_ = $_/10;\n    say \"$_\\t\",ref $hash{$_} ? scalar keys $hash{$_} : '';\n}\n</code></pre>\n\n<p>And my <code>test.txt</code> is </p>\n\n<pre><code>PBANLA_7 PBANLA_9 -0.976\nPBANLA_2 PD39238 0.8\nPD3_1 PD3_12 -0.76\nPBANLA_13 PBANLA31 2563.654\nPD3_91 PD3_342 0.1\nPD3_23 PD3_84 1.5968E-05\nPBANLA_3 PBANLA_2 108\nPFC10_API0060 MAL13.1006 -1\nPRA0005w MAL13.100 -0.17\nPRA0005w MAL13.102 -0.17\nPTA0005w MAL13.103 -0.17\nPRA0005w MAL13.105 -0.175968E-06\nPTA0005w MAL13.106 -0.17564\nPRA0005w MAL13.107 -0.17\nPRA0005w MAL13.108 30\n</code></pre>\n\n<p>The output I want is a count of the IDs (first and second column) that are in each bin.\nSuggestions are welcome!\nThanks in advance,\ngabelins</p>\n"}, {"tags": ["perl", "sockets", "debugging"], "answers": [{"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1552490735, "post_id": 55144659, "comment_id": 97031586, "body": "So the bug is the error message text, it seems: &quot;<b>List context expects just one parameter</b>&quot; would be a better error message in that case (Showing the usage for one parameter, when two parameters are given and allowed, seems odd). I&#39;m having trouble with Perl&#39;s inverted logic: The expected return type influences the number of parameters expected instead of the usual way (the number of parameters affects the return type). None of those is really pretty, but still I would prefer the argument-driven return type."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1552490919, "post_id": 55144659, "comment_id": 97031729, "body": "The dual use of <code>sockaddr_in</code> was confusing. The current docs for the <code>Socket</code> module recommend that you use <code>pack_sockaddr_in</code> and <code>unpack_sockaddr_in</code> to be explicit about which operation you want to apply."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552501036, "post_id": 55144659, "comment_id": 97037822, "body": "Re &quot;<i>The expected return type influences the number of parameters expected</i>&quot;, No. How it was called affects its function, just like basing the function on the number of parameters."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1552488810, "last_edit_date": 1552488810, "creation_date": 1552488298, "answer_id": 55144659, "question_id": 55143398, "link": "https://stackoverflow.com/questions/55143398/what-is-the-reason-for-this-usage-error-using-sockaddr-in-in-perl/55144659#55144659", "title": "What is the reason for this usage error using sockaddr_in() in Perl?", "body": "<p>It is not an issue with the debugger, it is a warning emitted by <code>sockaddr_in</code> when it is used with two arguments in list context.</p>\n\n<pre><code>$ perl -MSocket -wE 'say length(sockaddr_in(123,inet_aton(\"localhost\")))'\n16\n\n$ perl -MSocket -wE 'say sockaddr_in(123,inet_aton(\"localhost\"))'\nusage:   (port,iaddr) = sockaddr_in(sin_sv) at -e line 1.\n</code></pre>\n\n<p><code>sockaddr_in</code> has two calling syntaxes. It can convert an unpacked port and address into a packed socket address (converting a list of two elements to a scalar), or it can convert a packed socket address into a port and address (converting a scalar into a list of two elements).</p>\n\n<pre><code>$sockaddr = sockaddr_in($port,$ip_address);\n($port,$ip_address) = sockaddr_in($sockaddr);\n</code></pre>\n\n<p>It can tell which operation is requested by the number of arguments passed to the function and by the context of the function call, and warns when the two are inconsistent.</p>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 55144659, "answer_count": 1, "score": 1, "last_activity_date": 1552488810, "creation_date": 1552484746, "question_id": 55143398, "link": "https://stackoverflow.com/questions/55143398/what-is-the-reason-for-this-usage-error-using-sockaddr-in-in-perl", "title": "What is the reason for this usage error using sockaddr_in() in Perl?", "body": "<p>This problem almost drove me crazy (running in Perl debugger):</p>\n\n<pre><code>  DB&lt;3&gt; x sockaddr_in(123, inet_aton('localhost'))\nusage:   (port,iaddr) = sockaddr_in(sin_sv) at (eval 7)[/usr/lib/perl5/5.18.2/perl5db.pl:732] line 2.\n</code></pre>\n\n<p>However:</p>\n\n<pre><code>  DB&lt;10&gt; x $a = sockaddr_in(123, inet_aton('localhost'))\n0  \"\\cB\\c@\\c@{\\c?\\c@\\c@\\cA\\c@\\c@\\c@\\c@\\c@\\c@\\c@\\c@\"\n</code></pre>\n\n<p>This is the only example I know where I cannot print the result of a function call in the Perl debugger directly (but only after having it assigned to a variable).</p>\n\n<p>Also this is the only function I know that outputs a usage error when being called with correct parameters.</p>\n\n<p>Who can explain?</p>\n"}, {"tags": ["regex", "perl", "regex-group"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1552474363, "post_id": 55140125, "comment_id": 97020389, "body": "Add <code>g</code> modifier"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1552474493, "post_id": 55140125, "comment_id": 97020475, "body": "As was suggested, use the <code>g</code> modifier which means &quot;globally&quot;. Otherwise, the regex replaces the first time it matches and then stops. With <code>g</code>, it continues to find and replace as many matches as it can."}, {"owner": {"reputation": 71, "user_id": 11196591, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k1wjsjQSnQ0/AAAAAAAAAAI/AAAAAAAAADA/lnQtup2_-mc/photo.jpg?sz=128", "display_name": "Piyum Rangana", "link": "https://stackoverflow.com/users/11196591/piyum-rangana"}, "edited": false, "score": 0, "creation_date": 1552474813, "post_id": 55140125, "comment_id": 97020662, "body": "Thanks lot Wiktor, it worked."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552515709, "post_id": 55147964, "comment_id": 97044512, "body": "It&#39;s simpler and less weird as two &lt;strike&gt;regexes&lt;/strike&gt;substitutions, but it&#39;s faster as one."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552515754, "post_id": 55147964, "comment_id": 97044532, "body": "Also, <code>do{}</code> not needed if you use comma instead of semi-colon."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552519263, "post_id": 55147964, "comment_id": 97045584, "body": "Most people dislike the scalar/void context comma so I opted to show the do variant - as for efficiency, the two substitutions is far more efficient than the alternation in tests I&#39;ve seen, especially on longer strings, but as always benchmarking is appropriate if it matters."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552520999, "post_id": 55147964, "comment_id": 97046020, "body": "You need to search the string either way, so its length is irrelevant. The single substitution is faster because it saves one op and saves a regex engine startup (which takes relatively long)."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1552498159, "creation_date": 1552498159, "answer_id": 55147964, "question_id": 55140125, "link": "https://stackoverflow.com/questions/55140125/how-to-remove-single-quotation-mark-from-a-string-using-regex/55147964#55147964", "title": "How to remove single quotation mark from a String using REGEX", "body": "<p>As commented by @WiktorStribi\u017cew and @lurker, without the <code>/g</code> modifier, the <code>s///</code> operator will only operate on the first (left-to-right) occurrence that it matches. See <a href=\"https://perldoc.pl/perlretut#Global-matching\" rel=\"nofollow noreferrer\">perlretut</a> for more info.</p>\n\n<p>As an alternative it may be simpler to run it as two regexes (this is commonly done for <code>trim</code> implementations):</p>\n\n<pre><code>do { s/^'//; s/'$// } for $val;\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 11196591, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k1wjsjQSnQ0/AAAAAAAAAAI/AAAAAAAAADA/lnQtup2_-mc/photo.jpg?sz=128", "display_name": "Piyum Rangana", "link": "https://stackoverflow.com/users/11196591/piyum-rangana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552498159, "creation_date": 1552474329, "last_edit_date": 1552474514, "question_id": 55140125, "link": "https://stackoverflow.com/questions/55140125/how-to-remove-single-quotation-mark-from-a-string-using-regex", "title": "How to remove single quotation mark from a String using REGEX", "body": "<p>I used this below expression</p>\n\n<pre><code>s/^'|'$//\n</code></pre>\n\n<p>Just I am expecting the below result</p>\n\n<p><code>'value'</code> --> <code>value</code> (Without single quotation marks)</p>\n\n<p>but in my expression the result is given as <code>value'</code>\nit only removes the first occurrence only.\nHow can I fix that ?</p>\n"}, {"tags": ["perl", "rt"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11195832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa622ab1e093929504d321959452539?s=128&d=identicon&r=PG&f=1", "display_name": "real_sm", "link": "https://stackoverflow.com/users/11195832/real-sm"}, "edited": false, "score": 0, "creation_date": 1552468229, "post_id": 55137547, "comment_id": 97016433, "body": "-1 is not an error, it&#39;s -1.  But maybe you are right concerning that END must be greater than START, but how do we know for sure?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552469049, "post_id": 55137547, "comment_id": 97016957, "body": "They&#39;re numbers, so use numerical comparison operators. <code>my $now = time(); return ... if $now &gt;= $due; my $bseconds = $bhours-&gt;between( $now, $due ); ...</code>"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1552469429, "post_id": 55137547, "comment_id": 97017180, "body": "The quoted text doesn&#39;t really explain why it&#39;s not working. Your last sentence does. More precisely, Business::Hours uses Set::IntSpan to compute the period duration, and Set::IntSpan wants Start to be greater than End (see in the <a href=\"https://metacpan.org/release/Set-IntSpan/source/IntSpan.pm#L329\" rel=\"nofollow noreferrer\">source</a> of Set::IntSpan, which was <a href=\"https://metacpan.org/release/Business-Hours/source/lib/Business/Hours.pm#L270\" rel=\"nofollow noreferrer\">called</a> at some point by Business::Hours)."}, {"owner": {"reputation": 15, "user_id": 11195832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa622ab1e093929504d321959452539?s=128&d=identicon&r=PG&f=1", "display_name": "real_sm", "link": "https://stackoverflow.com/users/11195832/real-sm"}, "edited": false, "score": 0, "creation_date": 1552513458, "post_id": 55137547, "comment_id": 97043703, "body": "OK, thanks everyone, replaced $due and time(), because besides the error the script didn&#39;t work as needed."}], "tags": [], "owner": {"reputation": 869, "user_id": 4648809, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d2806509752d99c8d412f3c8d151a63e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4648809/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1552466547, "creation_date": 1552466547, "answer_id": 55137547, "question_id": 55137466, "link": "https://stackoverflow.com/questions/55137466/how-to-fix-perl-businesshours-bad-order-2-critical-error/55137547#55137547", "title": "How to fix Perl Business::Hours Bad order 2 critical error?", "body": "<p>According to documentation Business::Hours:</p>\n\n<blockquote>\n  <p>between START, END</p>\n  \n  <p>Returns the number of business seconds between START and END Both\n  START and END should be specified in seconds since the epoch.</p>\n  \n  <p>Returns -1 if START or END are outside the calculated business hours.</p>\n</blockquote>\n\n<p>So probably END must be greater than START</p>\n"}], "owner": {"reputation": 15, "user_id": 11195832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa622ab1e093929504d321959452539?s=128&d=identicon&r=PG&f=1", "display_name": "real_sm", "link": "https://stackoverflow.com/users/11195832/real-sm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55137547, "answer_count": 1, "score": 0, "last_activity_date": 1552466547, "creation_date": 1552466241, "question_id": 55137466, "link": "https://stackoverflow.com/questions/55137466/how-to-fix-perl-businesshours-bad-order-2-critical-error", "title": "How to fix Perl Business::Hours Bad order 2 critical error?", "body": "<p>We have <a href=\"https://bestpractical.com\" rel=\"nofollow noreferrer\">Request Tracker</a> 4.4.3. There we have an automated script that uses <a href=\"https://metacpan.org/pod/Business::Hours\" rel=\"nofollow noreferrer\">Business::Hours</a> distribution. Here's the essential part:</p>\n\n<pre><code>sub IsApplicable {\n    my $self = shift;\n    my $bhours = $self-&gt;BusinessHours;\n    my $ticket = $self-&gt;TicketObj;\n    my $due = $ticket-&gt;DueObj-&gt;Unix;\n    my $bseconds = $bhours-&gt;between( time(), $due );\n}\n</code></pre>\n\n<p>Sometimes we get an error to stderr:</p>\n\n<pre><code>[23406] [Wed Mar 13 07:40:09 2019] [critical]: Set::IntSpan::_copy_run_list: Bad order 2: 1552462809-1552462694\n at /usr/local/share/perl5/Business/Hours.pm line 269. (/opt/rt4/bin/../lib/RT.pm:408)\nSet::IntSpan::_copy_run_list: Bad order 2: 1552462809-1552462694\n at /usr/local/share/perl5/Business/Hours.pm line 269.\n</code></pre>\n\n<p>It doesn't seem to make sense, 1552462809-1552462694 pretty much evaluates to 115.</p>\n\n<p>How to analyze/fix this error?</p>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1552464807, "post_id": 55137061, "comment_id": 97014552, "body": "What exactly is your question?"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 1, "creation_date": 1552469052, "post_id": 55137061, "comment_id": 97016959, "body": "have you tried the <code>children</code> method ? Or the <code>first_child</code> one? This tutorial on xmltwig.org could be useful to you: <a href=\"https://xmltwig.org/xmltwig/tutorial/index.html\" rel=\"nofollow noreferrer\">xmltwig.org/xmltwig/tutorial/index.html</a>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1552471590, "post_id": 55137061, "comment_id": 97018623, "body": "FYI: your XML looked broken/incomplete. I edited it slightly."}, {"owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "edited": false, "score": 0, "creation_date": 1552484471, "post_id": 55137061, "comment_id": 97026907, "body": "Hi Stefan, this looks very promising. Sorry for giving you an incomplete xml file, my bad. I will try to add it to my script and hopefully I will get the same results. I may have some more questions but let me try to get this into my script first and I will get back to you. Thank you so much! Angelo"}, {"owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "edited": false, "score": 0, "creation_date": 1552884700, "post_id": 55137061, "comment_id": 97164820, "body": "Hi Stefan, This code is AWESOME!!!. It does exactly what I need. Thank you so much for taking the time to respond to my question. My script may be getting a bit more complicated so I may need more help from the group. I&#39;ll open a new thread if I do.   Thanks Again! Angelo   P.S. I selected your response as my answer. Let me know if you need me to do anything else."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "edited": false, "score": 0, "creation_date": 1553307838, "post_id": 55140189, "comment_id": 97347747, "body": "Hi, I have a continuation question. I don&#39;t know if I should open a new thread or continue with this one. Please advise. I&#39;m new to stack overflow. I will post my question anyway:  I&#39;m now able to access info under the &quot;Selection/Contents/Message&quot; nodes thanks to Stefan&#39;s code but I can&#39;t extract the CDATA in the Message/Content field (one level down). For example, &quot;&lt;![CDATA[&lt;p&gt;ada&lt;/p&gt;]]&gt;&quot; in the above XML. If someone can show me how to use TWIG to get to that piece of data that would be great. I could have multiple Content nodes and would need to get CDATA from each one of them.  - Angelo"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "edited": false, "score": 0, "creation_date": 1553364498, "post_id": 55140189, "comment_id": 97360615, "body": "I gave the solution how to extract <code>CDATA</code> content in my answer to your second question."}, {"owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "edited": false, "score": 0, "creation_date": 1553475582, "post_id": 55140189, "comment_id": 97385782, "body": "Thank You! I replied. It was almost perfect and I was only able to fix it after studying your code.  Regards, Angelo"}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1552474525, "creation_date": 1552474525, "answer_id": 55140189, "question_id": 55137061, "link": "https://stackoverflow.com/questions/55137061/navigating-xml-file-using-xmltwig/55140189#55140189", "title": "Navigating XML file using XML::Twig", "body": "<p>Use <code>findnodes()</code> with a relative XPath in the handler for <code>Selection</code> to find the <code>Contents/Message</code> child nodes:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::Twig;\n\nmy %selections;\n\nmy $twig = XML::Twig-&gt;new(\n    twig_handlers =&gt; {\n        Selection =&gt; sub {\n            #$_-&gt;print();\n            print \"selection id: \", $_-&gt;att('id'), \"\\n\";\n\n            my @messages;\n            foreach my $message ($_-&gt;findnodes('./Contents/Message')) {\n                #$message-&gt;print();\n                print \"message refid: \", $message-&gt;att('refid'), \"\\n\";\n\n                # store \"refid\" attribute in messages list\n                push(@messages, $message-&gt;att('refid'));\n            }\n\n            # store collected Message nodes under selection ID\n            $selections{ $_-&gt;att('id') } = \\@messages;\n        },\n    }\n);\n\n$twig-&gt;parse(\\*DATA);\n\nwhile (my($id, $messages) = each %selections) {\n    print \"Selection '${id}' messages: @{ $messages }\\n\";\n}\n\nexit 0;\n\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Root&gt;\n  &lt;Selection id=\"54008473\"&gt;\n    &lt;Name&gt;Master&lt;/Name&gt;\n    &lt;Contents&gt;\n      &lt;Message refid=\"125796458\" suppress=\"true\" status=\"Unchanged\"/&gt;\n      &lt;Message refid=\"123991123\" suppress=\"true\" status=\"Unchanged\"/&gt;\n      &lt;Message refid=\"128054778\" custom=\"true\" status=\"New\"&gt;\n        &lt;Content language=\"en\"&gt;&lt;![CDATA[&lt;p&gt;ada&lt;/p&gt;]]&gt;&lt;/Content&gt;\n      &lt;/Message&gt;\n    &lt;/Contents&gt;\n    &lt;Messages/&gt;\n    &lt;MessagePriority&gt;\n      &lt;Zone name=\"Insured Letter Intro\"&gt;\n        &lt;MessageInstance id=\"125796375\" name=\"LD Letter Introduction\" status=\"Active\" delivery=\"Mandatory\" priority=\"1\" suppressed=\"false\" selected=\"true\"/&gt;\n      &lt;/Zone&gt;\n      &lt;Zone name=\"Insured Letter Logo\"&gt;\n        &lt;MessageInstance id=\"125794623\" name=\"Insured Letter Logo\" status=\"Active\" delivery=\"Mandatory\" priority=\"1\" suppressed=\"false\" selected=\"true\"/&gt;\n      &lt;/Zone&gt;\n    &lt;/MessagePriority&gt;\n  &lt;/Selection&gt;\n  &lt;Selection id=\"54008475\" datavaluerefid=\"54008479\"&gt;\n    &lt;Name&gt;RMBC&lt;/Name&gt;\n    &lt;Contents&gt;\n      &lt;Message refid=\"125796458\" sameasparent=\"true\" parentrefid=\"54008473\" status=\"Unchanged\"/&gt;\n      &lt;Message refid=\"123991123\" sameasparent=\"true\" parentrefid=\"54008473\" status=\"Unchanged\"/&gt;\n      &lt;Message refid=\"128054778\" custom=\"true\" status=\"New\"&gt;\n        &lt;Content language=\"en\"&gt;&lt;![CDATA[&lt;p&gt;ada&lt;/p&gt;]]&gt;&lt;/Content&gt;\n      &lt;/Message&gt;\n    &lt;/Contents&gt;\n    &lt;Messages/&gt;\n    &lt;MessagePriority&gt;\n      ...\n    &lt;/MessagePriority&gt;\n  &lt;/Selection&gt;\n&lt;/Root&gt;\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nselection id: 54008473\nmessage refid: 125796458\nmessage refid: 123991123\nmessage refid: 128054778\nselection id: 54008475\nmessage refid: 125796458\nmessage refid: 123991123\nmessage refid: 128054778\nSelection '54008473' messages: 125796458 123991123 128054778\nSelection '54008475' messages: 125796458 123991123 128054778\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11195588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0dbc17fc876cf987c4dc310466af8c?s=128&d=identicon&r=PG&f=1", "display_name": "Angelo", "link": "https://stackoverflow.com/users/11195588/angelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 55140189, "answer_count": 1, "score": 0, "last_activity_date": 1552488195, "creation_date": 1552464601, "last_edit_date": 1552488195, "question_id": 55137061, "link": "https://stackoverflow.com/questions/55137061/navigating-xml-file-using-xmltwig", "title": "Navigating XML file using XML::Twig", "body": "<p>I must say that I am a newbie at Perl and XML:Twig but I am a quick learner. Any help you can provide would be greatly appreciated. </p>\n\n<p>Basically, I am having trouble navigating to certain nodes in an XML file so that I can extract information.</p>\n\n<p>I am using a TwigHandler to get me access to a certain node in the XML, specifically the \"Selection\" node. The TwigHandler is working fine for me in the sense that I am able to extract some of the information I need at this level. However, there are additional nodes under \"Selection\" that I need to inspect and I do not know how to get to them.</p>\n\n<p>I have copied a snippet of my XML below so that you can see what it looks like. In it you can see the Selection node. I am able to access the attribute \"id\" and the field \"Name\" with no problems using my Twig Handler, but I need to loop through all of those \"Message\" nodes under the Selection node in order to extract all of the attributes from each one of them. I have tried to get \"get_xpath\" to work but to no avail. </p>\n\n<p>Please keep in mind that there are Message nodes under every Selection node in my XML. You only see 2 Selection nodes in the example below but in reality I could have hundreds of the \"Selection\" nodes with each one having \"Message\" nodes as children. I need to extract information from the \"Message\" nodes under the current \"Selection\" node that I am working with, i.e., I don't care about the other \"Message\" nodes that may be under different \"Selection\" Nodes.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Selection id=\"54008473\"&gt;\n  &lt;Name&gt;Master&lt;/Name&gt;\n  &lt;Contents&gt;\n    &lt;Message refid=\"125796458\" suppress=\"true\" status=\"Unchanged\"/&gt;\n    &lt;Message refid=\"123991123\" suppress=\"true\" status=\"Unchanged\"/&gt;\n    &lt;Message refid=\"128054778\" custom=\"true\" status=\"New\"&gt;\n      &lt;Content language=\"en\"&gt;&lt;![CDATA[&lt;p&gt;ada&lt;/p&gt;]]&gt;&lt;/Content&gt;\n    &lt;/Message&gt;\n  &lt;/Contents&gt;\n  &lt;Messages/&gt;\n  &lt;MessagePriority&gt;\n    &lt;Zone name=\"Insured Letter Intro\"&gt;\n      &lt;MessageInstance id=\"125796375\" name=\"LD Letter Introduction\" status=\"Active\" delivery=\"Mandatory\" priority=\"1\" suppressed=\"false\" selected=\"true\"/&gt;\n    &lt;/Zone&gt;\n    &lt;Zone name=\"Insured Letter Logo\"&gt;\n      &lt;MessageInstance id=\"125794623\" name=\"Insured Letter Logo\" status=\"Active\" delivery=\"Mandatory\" priority=\"1\" suppressed=\"false\" selected=\"true\"/&gt;\n     &lt;/Zone&gt;\n  &lt;/MessagePriority&gt;\n&lt;/Selection&gt;\n&lt;Selection id=\"54008475\" datavaluerefid=\"54008479\"&gt;\n  &lt;Name&gt;RMBC&lt;/Name&gt;\n  &lt;Contents&gt;\n    &lt;Message refid=\"125796458\" sameasparent=\"true\" parentrefid=\"54008473\" status=\"Unchanged\"/&gt;\n    &lt;Message refid=\"123991123\" sameasparent=\"true\" parentrefid=\"54008473\" status=\"Unchanged\"/&gt;\n    &lt;Message refid=\"128054778\" custom=\"true\" status=\"New\"&gt;\n      &lt;Content language=\"en\"&gt;&lt;![CDATA[&lt;p&gt;ada&lt;/p&gt;]]&gt;&lt;/Content&gt;\n    &lt;/Message&gt;\n  &lt;/Contents&gt;\n  &lt;Messages/&gt;\n  &lt;MessagePriority&gt;\n     ...\n  &lt;/MessagePriority&gt;\n&lt;/Selection&gt;\n</code></pre>\n"}, {"tags": ["windows", "perl", "command-prompt", "windows-server-2016", "strawberry-perl"], "comments": [{"owner": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "edited": false, "score": 0, "creation_date": 1552766544, "post_id": 55135371, "comment_id": 97139078, "body": "<b>1.</b> <a href=\"https://ss64.com/nt/ftype.html\" rel=\"nofollow noreferrer\">The FileType should always be created before making a File Association</a>. <b>2.</b> <a href=\"https://devblogs.microsoft.com/oldnewthing/?p=99985\" rel=\"nofollow noreferrer\">Why does Windows ask me to pick a program with which to open a file, even when I already specified which program I want to use to open the file?</a>."}, {"owner": {"reputation": 91, "user_id": 4257544, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3249f4384c9f6a8a6deefe045a58ab41?s=128&d=identicon&r=PG&f=1", "display_name": "chen", "link": "https://stackoverflow.com/users/4257544/chen"}, "reply_to_user": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "edited": false, "score": 0, "creation_date": 1580292297, "post_id": 55135371, "comment_id": 106046338, "body": "@Jose Hi! Same problem here only with Active Perl, after installation I can see in assoc and ftype that its already associated but still get this window. Did you manage to get this automated?"}], "owner": {"reputation": 999, "user_id": 3376736, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/35ff743c521019126e11855b1eb7b7f9?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/3376736/jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 741, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1552518755, "creation_date": 1552456858, "last_edit_date": 1552518755, "question_id": 55135371, "link": "https://stackoverflow.com/questions/55135371/perl-file-association-from-command-prompt-not-working", "title": "perl file association from command prompt not working", "body": "<p>I want to execute perl scripts from command prompt without using \"perl\" before the script name nor do I want to use \"Open with\", \"Select program\" and \"Always use this program\". I've tried the following methods from various answers in Stack overflow but still haven't been successful in executing the script. \nI'm running these on <strong>\"Windows Server 2016 OS\"</strong></p>\n\n<p>I've installed Strawberry perl at \"C:\\Strawberry\\perl\\bin\\perl.exe\" and I've tried associating the .pl files as follows. (I'm using an admin command prompt window)</p>\n\n<pre><code>assoc .pl=PerlScript\nftype PerlScript=\"C:\\Strawberry\\perl\\bin\\perl.exe\" \"%1\" %*\n</code></pre>\n\n<p>I've changed the registry key as follows.</p>\n\n<pre><code>reg ADD HKCR\\Applications\\perl.exe\\shell\\open\\command /t REG_SZ /d \"\\\"C:\\Strawberry\\perl\\bin\\perl.exe\\\" \\\"%1\\\" %*\" /f\nThe operation completed successfully.\n</code></pre>\n\n<p>Even after these changes when I execute the perl script as follows, I get a file association popup rather than the perl script starting to execute, I do notice strawberry perl as an option (Perl Interpreter) which can be associated with the .pl file in the popup but why isn't the association already in effect and why is the popup still coming up?</p>\n\n<pre><code>test.pl\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cYfAN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cYfAN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can someone please help me with any kind of pointer as to what am I doing wrong or why this is happening please:( \nI want to execute the perl scripts using another automated script hence trying to get the association working without any manual intervention at runtime. Also I want this working the first time after the installation of the Strawberry perl on a brand new machine)</p>\n"}, {"tags": ["css", "regex", "perl", "find-replace"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1552455897, "post_id": 55135126, "comment_id": 97010881, "body": "Hint: what is 25 times 16?"}, {"owner": {"reputation": 825, "user_id": 9764412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wK67e.jpg?s=128&g=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/9764412/damon"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1552456319, "post_id": 55135126, "comment_id": 97011001, "body": "Oh crap! It only converted the decimal part?"}, {"owner": {"reputation": 825, "user_id": 9764412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wK67e.jpg?s=128&g=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/9764412/damon"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1552456410, "post_id": 55135126, "comment_id": 97011032, "body": "Can you help me with this regular expression man? Can&#39;t get it to work."}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 825, "user_id": 9764412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wK67e.jpg?s=128&g=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/9764412/damon"}, "edited": false, "score": 0, "creation_date": 1552457189, "post_id": 55135392, "comment_id": 97011332, "body": "I improved the answer to make the fractional part optional. Glad I could help."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1552457167, "last_edit_date": 1552457167, "creation_date": 1552457009, "answer_id": 55135392, "question_id": 55135126, "link": "https://stackoverflow.com/questions/55135126/how-to-convert-em-rem-to-px/55135392#55135392", "title": "How to convert em/rem to px?", "body": "<p>You are not matching the fractional part:</p>\n\n<ul>\n<li>match the integer part (one or more digits `\\d+)</li>\n<li>match optionally a fractional part\n\n<ul>\n<li>match the dot (<code>\\.</code>)</li>\n<li>match the fractional part (one or more digits <code>\\d+</code>)</li>\n</ul></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$ echo '2.25em 2em' | perl -pe 's/(\\d+(?:\\.\\d+)?)em/($1*16).px/ge'\n36px 32px\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11169554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94f078f4096d8831a0617e700c95397?s=128&d=identicon&r=PG", "display_name": "binsh", "link": "https://stackoverflow.com/users/11169554/binsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1552457519, "creation_date": 1552457519, "answer_id": 55135487, "question_id": 55135126, "link": "https://stackoverflow.com/questions/55135126/how-to-convert-em-rem-to-px/55135487#55135487", "title": "How to convert em/rem to px?", "body": "<p>You may use a character group instead [   ]</p>\n\n<pre><code>perl -p -i -e 's/(\\d[\\d\\.]*)px/($1\\/16).em/ge'\n</code></pre>\n\n<pre><code>perl -p -i -e 's/(\\d[\\d\\.]*)em/($1*16).px/ge'\n</code></pre>\n"}], "owner": {"reputation": 825, "user_id": 9764412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wK67e.jpg?s=128&g=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/9764412/damon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 55135392, "answer_count": 2, "score": 0, "last_activity_date": 1552463874, "creation_date": 1552455754, "question_id": 55135126, "link": "https://stackoverflow.com/questions/55135126/how-to-convert-em-rem-to-px", "title": "How to convert em/rem to px?", "body": "<p>I have a following script which converts px to em:</p>\n\n<pre><code>perl -p -i -e 's/(\\d+)px/($1\\/16).em/ge' stylesheet.css\n</code></pre>\n\n<p>However, when I tweak it to convert em to px then it doesn't work well:</p>\n\n<pre><code>perl -p -i -e 's/(\\d+)em/($1*16).px/ge' stylesheet.css\n</code></pre>\n\n<p>It converts <code>2.25em</code> to <code>2.400px</code>. Please help me on this.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552464298, "post_id": 55134425, "comment_id": 97014323, "body": "See <a href=\"https://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">perldoc perlref</a> for more information about the syntax"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1552558918, "post_id": 55134425, "comment_id": 97059136, "body": "<code>_bar</code> is almost certainly not a variable. It&#39;s just a string."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1552452775, "last_edit_date": 1552452775, "creation_date": 1552451855, "answer_id": 55134492, "question_id": 55134425, "link": "https://stackoverflow.com/questions/55134425/what-does-x-foo-bar-in-perl-mean/55134492#55134492", "title": "What does $x -&gt; {_foo} -&gt; {_bar} in Perl mean?", "body": "<p>The value of <code>$x</code> is expected to be a reference to a hash.</p>\n\n<p><code>$x-&gt;{_foo}</code> is the value of the element with key <code>_foo</code> of the hash referenced by <code>$x</code>.</p>\n\n<p>That value is expected to be a reference to a hash.</p>\n\n<p><code>$x-&gt;{_foo}-&gt;{_bar}</code> is the value of the element with key <code>_bar</code> of the hash referenced by <code>$x-&gt;{_foo}</code>.</p>\n\n<p>For example, it would return <code>123</code> for the following:</p>\n\n<pre><code>my $x = {\n   _foo =&gt; {\n      _bar =&gt; 123,\n   }\n};\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10460506, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4BL9s_BGVWY/AAAAAAAAAAI/AAAAAAAAAQk/Aw5rgooMbDo/photo.jpg?sz=128", "display_name": "Nur Sakinah Burhanuddin", "link": "https://stackoverflow.com/users/10460506/nur-sakinah-burhanuddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552463421, "creation_date": 1552451343, "last_edit_date": 1552463421, "question_id": 55134425, "link": "https://stackoverflow.com/questions/55134425/what-does-x-foo-bar-in-perl-mean", "title": "What does $x -&gt; {_foo} -&gt; {_bar} in Perl mean?", "body": "<p>I'm trying to understand a Perl script and I dont understand one declaration line which is:</p>\n\n<pre><code>$pin =  $x -&gt; {_foo} -&gt; {_bar}\n</code></pre>\n\n<p>whereas <strong>_bar</strong> is an undef variable declared in another sub.</p>\n"}, {"tags": ["regex", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1552453003, "post_id": 55134273, "comment_id": 97010079, "body": "It is always recommended to post your efforts in your post which you have put in order to solve your problem."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1552558808, "post_id": 55134273, "comment_id": 97059048, "body": "What have you tried? What problems are you having? Please show us your code."}], "answers": [{"comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1552610761, "post_id": 55134316, "comment_id": 97086974, "body": "@Danny Luk, Could you please do let me know if this helps you?"}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 0, "last_activity_date": 1552458833, "last_edit_date": 1552458833, "creation_date": 1552450686, "answer_id": 55134316, "question_id": 55134273, "link": "https://stackoverflow.com/questions/55134273/how-to-squeeze-the-new-format-list-from-a-old-format-list/55134316#55134316", "title": "How to squeeze the new format list from a old format list", "body": "<p>Could you please try following.</p>\n\n<pre><code>awk 'BEGIN{FS=OFS=\",\"} {file=$NF\"_\"$1 $2\"_list\";print &gt;&gt; file;close(file)}' Input_file\n</code></pre>\n\n<p><strong><em>Explanation:</em></strong> Adding explanation for above code now.</p>\n\n<pre><code>awk '                          ##Starting awk program here.\nBEGIN{                         ##Starting BEGIN section for awk program here.\n  FS=OFS=\",\"                   ##Setting FS and OFS as comma here.\n}                              ##Closing BLOCK for BEGIN section here.\n{                              ##Starting BLOCK for main Input_file reading here.\n  file=$NF\"_\"$1 $2\"_list\"      ##Creating variable file whose value is $NF(last field)_first field space 2nd field then _list as per OP given format.\n  print &gt;&gt; file                ##Printing current line to output file whose name is created previous line.\n  close(file)                  ##Using close function of OOTB function of awk to close this output file in backend to avoid \"TOO many files opened\".\n}                              ##Closing main BLOCK here.\n'  Input_file                  ##Mentioning Input_file name here.\n</code></pre>\n\n<hr>\n\n<hr>\n\n<p>OR in case your Input_file's <code>$NF</code> is sorted with last field and having continous values in last field then we need not to close output file each line we can close it whenever an entry is different from current $NF.</p>\n\n<pre><code>awk 'BEGIN{FS=OFS=\",\"} prev!=$NF{close(file);prev=$NF} {file=$NF\"_\"$1 $2\"_list\";print &gt; file}' Input_file\n</code></pre>\n\n<p><strong><em>Explanation:</em></strong> Adding explanation for above code now.</p>\n\n<pre><code>awk '                              ##Starting awk program here.\nBEGIN{                             ##Starting BEGIN section here for this code.\n  FS=OFS=\",\"                       ##Setting FS and OFS as comma here.\n}                                  ##Closing BLOCK for BEGIN section here.\nprev!=$NF{                         ##Checking condition if variable prev is NOT equal to $NF then do following.\n  close(file)                      ##Using close to close file, which is passed in form of file variable to this function, to avoid \"TOO many files opened.\"\n  prev=$NF                         ##Setting prev to $NF here.\n}                                  ##Closing BLOCK for condition for prev!=$NF condition here.\n{                                  ##Starting main BLOCK here.\n  file=$NF\"_\"$1 $2\"_list\"          ##Creating variable named file whose value is $NF(last field)_first field space 2nd field then _list as per OP given format.\n  print &gt; file                     ##Printing current line value to output file.\n}                                  ##Closing main BLOCK here.\n'  Input_file                      ##Mentioning Input_file name here.\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4944038, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153272953705502/picture?type=large", "display_name": "Danny Luk", "link": "https://stackoverflow.com/users/4944038/danny-luk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1552458833, "creation_date": 1552450358, "last_edit_date": 1552451127, "question_id": 55134273, "link": "https://stackoverflow.com/questions/55134273/how-to-squeeze-the-new-format-list-from-a-old-format-list", "title": "How to squeeze the new format list from a old format list", "body": "<p>I am trying to generate the new format lists from a old format list.</p>\n\n<p>A original format list file as below.</p>\n\n<pre><code>#cat hub_dev_list\n\ncategory,region,ip,host,os\nhub,central,10.10.10.10,NWTTHC-1-01,CiscoIOS\nhub,central,172.11.11.11,NWTCOT-1-LRE01,CiscoIOS\nhub,central,10.19.19.19,NWTCOT-1-02,Juniper\nhub,chai-wan,10.1.1.1,CNCSFC-1-01,HuaweiVRP\nhub,chai-wan,10.3.3.3,CNCMIA-1-LRE02,CiscoIOS\nhub,chai-wan,10.4.4.4,CNCSFC-1-HWV201,Juniper\nhub,idc,192.9.9.9,SWiDC10-J3-28,CiscoIOS\nhub,idc,192.5.5.5,SwiDC-J325-06,Juniper\nhub,idc,10.9.9.9,SWiDC19-J3-16,Juniper\n</code></pre>\n\n<p>Can this be done with any utility in Linux??<p>\nClassify the region &amp; OS.</p>\n\n<p>Desired output format as below:</p>\n\n<p>Save to cisco_hubcentral__list</p>\n\n<pre><code>#cat cisco_hubcentral__list\nNWTTHC-1-01,10.10.10.10\nNWTCOT-1-LRE01,172.11.11.11\n</code></pre>\n\n<p>Save to juniper_hubcentral__list</p>\n\n<pre><code>#cat juniper_hubcentral__list\nNWTCOT-1-02,10.19.19.19\n</code></pre>\n\n<p>Save to huawei_hubchaiwan_list</p>\n\n<pre><code>#cat huawei_hubchaiwan_list\nCNCSFC-1-01,10.1.1.1\n</code></pre>\n\n<p>Save to cisco_hubchaiwan_list</p>\n\n<pre><code>#cat cisco_hubchaiwan_list\nCNCMIA-1-LRE02,10.3.3.3\n</code></pre>\n\n<p>Save to juniper_hubchaiwan_list</p>\n\n<pre><code>#cat juniper_hubchaiwan_list\nCNCSFC-1-HWV201,10.4.4.4\n</code></pre>\n\n<p>Save to cisco_hub_idc_list</p>\n\n<pre><code>#cat cisco_hubidc_list\nSWiDC10-J3-28,192.9.9.9\n</code></pre>\n\n<p>Save to juniper_hub_idc_list</p>\n\n<pre><code>#cat juniper_hubidc_list\nSwiDC-J325-06,192.5.5.5\nSWiDC19-J3-16,10.9.9.9\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 5, "creation_date": 1552449728, "post_id": 55134180, "comment_id": 97009229, "body": "<a href=\"https://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Logical-Defined-Or</a>"}, {"owner": {"reputation": 25, "user_id": 10024557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1uHUBRuk5dc/AAAAAAAAAAI/AAAAAAAAC34/AXfwmx2cj7c/photo.jpg?sz=128", "display_name": "Siddaramu KS", "link": "https://stackoverflow.com/users/10024557/siddaramu-ks"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1552450232, "post_id": 55134180, "comment_id": 97009356, "body": "Got perfect answer. Thanks @ysth"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1552450669, "last_edit_date": 1552450669, "creation_date": 1552450364, "answer_id": 55134274, "question_id": 55134180, "link": "https://stackoverflow.com/questions/55134180/what-does-the-operator-do-in-perl/55134274#55134274", "title": "What does the operator // do in perl?", "body": "<pre><code>EXPR1 // EXPR2\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>defined(EXPR1) ? EXPR1 : EXPR2\n</code></pre>\n\n<p>except <code>EXPR1</code> is only evaluated once.</p>\n\n<hr>\n\n<pre><code>my $var = $values[1] // $values[2];\n$var = 0 if $var eq '-';\n</code></pre>\n\n<p>is probably clearer than</p>\n\n<pre><code>my $var = ($values[0] // $values[1]) eq '-' ? 0 : ($values[0] // $values[1]);\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10024557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1uHUBRuk5dc/AAAAAAAAAAI/AAAAAAAAC34/AXfwmx2cj7c/photo.jpg?sz=128", "display_name": "Siddaramu KS", "link": "https://stackoverflow.com/users/10024557/siddaramu-ks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55134274, "answer_count": 1, "score": -1, "last_activity_date": 1552450669, "creation_date": 1552449599, "question_id": 55134180, "link": "https://stackoverflow.com/questions/55134180/what-does-the-operator-do-in-perl", "title": "What does the operator // do in perl?", "body": "<p>I have come up with a code of below kind :\n$avr =  ($values[0] // $values[1]) eq '-' ? 0 : ($values[0] // $values[1]);</p>\n\n<p>Does '//' mean something here?</p>\n"}, {"tags": ["perl", "html-entities", "mojolicious", "movabletype"], "comments": [{"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1552450351, "post_id": 55130871, "comment_id": 97009388, "body": "@Grinnz @Robert is it OK to use <code>utf8::decode($phrase) if !utf8::is_utf8($phrase);</code> inside of the <code>for my $phrase ()</code> loop above? I would think that this would do nearly the same thing as I was trying to do with <code>Mojo::Util::decode(&#39;UTF-8&#39;, $page-&gt;text)</code> inside of the <code>Mojo::DOM-&gt;new() statement</code>, except that the test would only be run on the phrases that were identified in <code>$dom-&gt;find(&#39;h1, h2, h2 b, h3, p, p strong, span, a, caption, th, li, li a&#39;)</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1552495195, "post_id": 55130871, "comment_id": 97034545, "body": "No. is_utf8 does not tell you anything useful about whether your data is encoded, it is an internal Perl flag. Your data will always be encoded or decoded, you need to know which."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552495394, "post_id": 55130871, "comment_id": 97034686, "body": "The issue is that I&#39;m getting HTML from the Movable Type API. I have no control over what that HTML content is. What we&#39;ve seen up to now is that some of the HTML is in the form of UTF-8 encoded strings, and some is apparently considered Perl strings. Sorry if I am repeating myself, to some extent."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1552508699, "post_id": 55130871, "comment_id": 97041586, "body": "You may not have control over the input data, but the API you are using should, otherwise it is a bug. I think it is simpler than you are describing, but you&#39;ll have to be more specific about what you&#39;re doing (and that would be probably off topic for this question)."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552515164, "post_id": 55130871, "comment_id": 97044345, "body": "@Grinnz I will look at the Movable Type API and see if I see a way to ensure that everything comes out of the wire UTF-8 encoded. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 3, "creation_date": 1552432105, "post_id": 55131737, "comment_id": 97005509, "body": "To be more specific, the <code>text</code> method returns the text as it would be displayed by a browser, the <code>content</code> method returns the raw HTML encoded node content (including any nested tags, etc)."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552433362, "post_id": 55131737, "comment_id": 97005843, "body": "@Grinnz, yes, I just tried this.  One issue is that I need to strip those nested tags, so that I&#39;m down to the innerText, at least in effect.  The other issue is that it looks like the line <code>$dom-&gt;find(&#39;h1, h2, h2 b, h3, p, p strong, span, a, caption, th, li, li a&#39;)-&gt;map(&#39;content&#39;)-&gt;each</code> results in entities being converted from <code>&amp;quote;</code> to <code>&amp;#39;</code>."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 1, "creation_date": 1552434692, "post_id": 55131737, "comment_id": 97006180, "body": "@DaveAiello I&#39;ve added code to handle nested tags. Basically the same, you just need to add a recursive sub to walk the tree."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552435258, "post_id": 55131737, "comment_id": 97006305, "body": "You can use descendant_nodes instead of recursion, for example: <code>$dom-&gt;find(&#39;p&#39;)-&gt;map(&#39;descendant_nodes&#39;)-&gt;grep(sub { $_-&gt;type eq &#39;text&#39; })-&gt;map(&#39;content&#39;)-&gt;each</code>"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552436361, "post_id": 55131737, "comment_id": 97006585, "body": "@Grinnz Maybe... but not like you posted --- Can&#39;t locate object method &quot;type&quot; via package &quot;Mojo::Collection&quot;"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1552450635, "post_id": 55131737, "comment_id": 97009451, "body": "Right, to put the descendant nodes from multiple tags into one collection you could put in <code>-&gt;map(&#39;each&#39;)</code> before the <code>grep</code>"}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1552527952, "post_id": 55131737, "comment_id": 97047755, "body": "I&#39;m inclined to answer my own question-- because the code that I end up using is going to be an amalgamation of what was discussed in several comments, and the code looks more like what I originally stated than what @Robert proposed as a solution."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552534914, "post_id": 55131737, "comment_id": 97049240, "body": "@Grinnz use of the <code>map(&#39;descendant_nodes&#39;)-&gt;map(&#39;each&#39;)...</code> logic you proposed is working pretty well. The biggest problem is that <code>decendant_nodes</code> used in conjunction with multiple selectors <code>(&#39;h1, h2, h2 b, h3, p, p strong, span, a, caption, th, li, li a&#39;)</code> gives me duplicate phrases.  In some cases the repetition occurs 3 or more times. Ideally, we would only get one copy of each unique phrase per document.  There probably needs to be a <code>reduce</code> in there somewhere. Do you agree? If so, where?  Working by trial and error at the moment."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552538472, "post_id": 55131737, "comment_id": 97049984, "body": "@Grinnz looks like I misspoke. I just looked at Mojo::Collection, and it appears we need a <code>uniq</code> in the right place. Maybe something like <code>for my $phrase ( $dom-&gt;find(&#39;h1, h2, h2 b, h3, p, p strong, span, a, caption, th, li, li a&#39;)-&gt;map(&#39;descendant_nodes&#39;)-&gt;map(&#39;each&#39;)-&gt;grep(sub { $_-&gt;type eq &#39;text&#39; })-&gt;map(&#39;content&#39;)-&gt;uniq-&gt;each ) {...}</code>?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 1, "creation_date": 1552542991, "post_id": 55131737, "comment_id": 97051224, "body": "@DaveAiello It is because you are matching some tags that are contained in other tags you matched."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552580137, "post_id": 55131737, "comment_id": 97074028, "body": "@Grinnz no doubt. I needed to go with <code>uniq</code> because I couldn&#39;t guarantee that selectors like <code>span</code> were always inside of <code>p</code>. So I felt like I needed to keep all of the selectors in <code>$dom-&gt;find()</code> that were already there."}], "tags": [], "owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "is_accepted": false, "score": 3, "last_activity_date": 1552434652, "last_edit_date": 1552434652, "creation_date": 1552430687, "answer_id": 55131737, "question_id": 55130871, "link": "https://stackoverflow.com/questions/55130871/how-do-i-most-reliably-preserve-html-entities-when-processing-html-documents-wit/55131737#55131737", "title": "How do I most reliably preserve HTML Entities when processing HTML documents with Mojo::DOM?", "body": "<p>Looks like when you map to text you get XML entities replaced, but when you instead work with the nodes and use their content, the entities are preserved. This minimal example: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Mojo::DOM;\n\nmy $dom = Mojo::DOM-&gt;new('&lt;p&gt;this &amp;amp; &amp;quot;that&amp;quot;&lt;/p&gt;');\nfor my $phrase ($dom-&gt;find('p')-&gt;each) {\n    print $phrase-&gt;content(), \"\\n\";\n}\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>this &amp;amp; &amp;quot;that&amp;quot;\n</code></pre>\n\n<p>If you want to keep your loop and map, replace <code>map('text')</code> with <code>map('content')</code> like this:</p>\n\n<pre><code>for my $phrase ($dom-&gt;find('p')-&gt;map('content')-&gt;each) {\n</code></pre>\n\n<p>If you have nested tags and want to find only the texts (but not print those nested tag names, only their contents), you'll need to scan the DOM tree:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Mojo::DOM;\n\nmy $dom = Mojo::DOM-&gt;new('&lt;p&gt;&lt;i&gt;this &amp;amp; &lt;b&gt;&amp;quot;&lt;/b&gt;&lt;b&gt;that&lt;/b&gt;&lt;b&gt;&amp;quot;&lt;/b&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;done&lt;/p&gt;');\n\nfor my $node (@{$dom-&gt;find('p')-&gt;to_array}) {\n    print_content($node);\n}\n\nsub print_content {\n    my ($node) = @_;\n    if ($node-&gt;type eq \"text\") {\n        print $node-&gt;content(), \"\\n\";\n    }\n    if ($node-&gt;type eq \"tag\") {    \n        for my $child ($node-&gt;child_nodes-&gt;each) {\n            print_content($child);\n        }\n    }\n}\n</code></pre>\n\n<p>which prints:\n</p>\n\n<pre><code>this &amp; \n\"\nthat\n\"\ndone\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 783, "user_id": 185259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ae44f2b7c98a3768d35d3eb8d5a73d8?s=128&d=identicon&r=PG", "display_name": "genio", "link": "https://stackoverflow.com/users/185259/genio"}, "edited": false, "score": 0, "creation_date": 1596376936, "post_id": 55604005, "comment_id": 111786336, "body": "Please stop using bareword file handles. FILE is not ok. open(my $fh, &#39;&lt;&#39;, &#39;/path/to/file&#39;).  Never open FILE, &#39;&lt;/path/to/file&#39;;"}, {"owner": {"reputation": 190, "user_id": 9053226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z1XNt.jpg?s=128&g=1", "display_name": "A Gold Man", "link": "https://stackoverflow.com/users/9053226/a-gold-man"}, "edited": false, "score": 0, "creation_date": 1596384820, "post_id": 55604005, "comment_id": 111788844, "body": "I feel like this is missing the actual problem here. Maybe you should change the other parts of your code to look for the characters you want to process rather than the html entities?"}], "tags": [], "owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "is_accepted": true, "score": 0, "last_activity_date": 1554865157, "last_edit_date": 1554865157, "creation_date": 1554864363, "answer_id": 55604005, "question_id": 55130871, "link": "https://stackoverflow.com/questions/55130871/how-do-i-most-reliably-preserve-html-entities-when-processing-html-documents-wit/55604005#55604005", "title": "How do I most reliably preserve HTML Entities when processing HTML documents with Mojo::DOM?", "body": "<p>Through testing, my colleagues and I were able to determine that <code>Mojo::DOM-&gt;new()</code> was decoding ampersand characters (<code>&amp;</code>) automatically, rendering the preservation of HTML Entities as written impossible. To get around this, we added the following subroutine to double encode ampersand:</p>\n\n<pre><code>sub encode_amp {\n    my ($text) = @_;\n\n    ##########\n    #\n    # We discovered that we need to encode ampersand\n    # characters being passed into Mojo::DOM-&gt;new() to avoid HTML entities being decoded\n    # automatically by Mojo::DOM::Util::html_unescape().\n    #\n    # What we're doing is calling $dom = Mojo::DOM-&gt;new(encode_amp($string)) which double encodes\n    # any incoming ampersand or &amp;amp; characters.\n    #\n    #\n    ##########   \n\n    $text .= '';           # Suppress uninitialized value warnings\n    $text =~ s!&amp;!&amp;amp;!g;  # HTML encode ampersand characters\n    return $text;\n}\n</code></pre>\n\n<p>Later in the script we pass <code>$page-&gt;text</code> through <code>encode_amp()</code> as we instantiate a new <code>Mojo::DOM</code> object.</p>\n\n<pre><code>    $dom = Mojo::DOM-&gt;new(encode_amp($page-&gt;text));\n\n##########\n#\n# Break down the Body into phrases. This is done by listing the tags and tag combinations that\n# surround each block of text that we're looking to capture.\n#\n# Note that \"h2 b\" is an important tag combination for capturing major headings on pages\n# in this theme. The tags \"span\" and \"a\" are also.\n#\n# We added caption and th to support tables.\n#\n# We added li and li a to support ol (ordered lists) and ul (unordered lists).\n#\n# We got the complicated map('descendant_nodes') logic from @Grinnz on StackOverflow, see:\n# https://stackoverflow.com/questions/55130871/how-do-i-most-reliably-preserve-html-entities-when-processing-html-documents-wit#comment97006305_55131737\n#\n#\n# Original set of selectors in $dom-&gt;find() below is as follows:\n#   'h1, h2, h2 b, h3, p, p strong, span, a, caption, th, li, li a'\n#\n##########\n\n    print FILE \"\\n\\t### Body\\n\\n\";        \n\n    for my $phrase ( $dom-&gt;find('h1, h2, h2 b, h3, p, p strong, span, a, caption, th, li, li a')-&gt;\n        map('descendant_nodes')-&gt;map('each')-&gt;grep(sub { $_-&gt;type eq 'text' })-&gt;map('content')-&gt;uniq-&gt;each ) {           \n\n        print_phrase($phrase);\n\n    }\n</code></pre>\n\n<p>The code block above incorporates previous suggestions from @Grinnz as seen in the comments in this question. Thanks also to @Robert for his answer, which had a good observation about how <code>Mojo::DOM</code> works.</p>\n\n<p>This code definitely works for my application.</p>\n"}], "owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 1, "accepted_answer_id": 55604005, "answer_count": 2, "score": 6, "last_activity_date": 1554865157, "creation_date": 1552425920, "question_id": 55130871, "link": "https://stackoverflow.com/questions/55130871/how-do-i-most-reliably-preserve-html-entities-when-processing-html-documents-wit", "title": "How do I most reliably preserve HTML Entities when processing HTML documents with Mojo::DOM?", "body": "<p>I'm using <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"noreferrer\">Mojo::DOM</a> to identify and print out phrases (meaning strings of text between selected HTML tags) in hundreds of HTML documents that I'm extracting from existing content in the Movable Type content management system.</p>\n\n<p>I'm writing those phrases out to a file, so they can be translated into other languages as follows:</p>\n\n<pre><code>        $dom = Mojo::DOM-&gt;new(Mojo::Util::decode('UTF-8', $page-&gt;text));\n\n    ##########\n    #\n    # Break down the Body into phrases. This is done by listing the tags and tag combinations that\n    # surround each block of text that we're looking to capture.\n    #\n    ##########\n\n        print FILE \"\\n\\t### Body\\n\\n\";        \n\n        for my $phrase ( $dom-&gt;find('h1, h2, h2 b, h3, p, p strong, span, a, caption, th, li, li a')-&gt;map('text')-&gt;each ) {\n\n            print_phrase($phrase); # utility function to write out the phrase to a file\n\n        }\n</code></pre>\n\n<p>When Mojo::DOM encountered embedded HTML entities (such as <code>&amp;trade;</code> and <code>&amp;nbsp;</code>) it converted those entities into encoded characters, rather than passing along as written. I wanted the entities to be passed through as written.</p>\n\n<p>I recognized that I could use Mojo::Util::decode to pass these HTML entities through to the file I'm writing. The problem is \"<a href=\"https://github.com/mojolicious/mojo/issues/1332#issuecomment-472010600\" rel=\"noreferrer\">You can only call decode 'UTF-8' on a string that contains valid UTF-8.</a> If it doesn't, for example because it is already converted to Perl characters, it will return undef.\"</p>\n\n<p>If this is the case, I have to either try to figure out how to test the encoding of the current HTML page before calling <code>Mojo::Util::decode('UTF-8', $page-&gt;text)</code>, or I must use some other technique to preserve the encoded HTML entities.</p>\n\n<p>How do I most reliably preserve encoded HTML Entities when processing HTML documents with Mojo::DOM?</p>\n"}, {"tags": ["perl", "schema", "dbi", "dbix-class", "dbicdump"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1552477415, "post_id": 55129743, "comment_id": 97022186, "body": "What version of DBIC and of the Schema Loader are you using?"}, {"owner": {"reputation": 3160, "user_id": 954777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/heMKU.jpg?s=128&g=1", "display_name": "smonff", "link": "https://stackoverflow.com/users/954777/smonff"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1552484827, "post_id": 55129743, "comment_id": 97027163, "body": "@simbabque edited my question with version <code>0.07049</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1552486788, "post_id": 55129743, "comment_id": 97028606, "body": "There&#39;s no <code>30</code> in the source at all. Must be something else. I sent your question to the maintainer of DCSL but he doesn&#39;t use SO. He said to look at what the DBI <code>column_info</code> method returns."}, {"owner": {"reputation": 3160, "user_id": 954777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/heMKU.jpg?s=128&g=1", "display_name": "smonff", "link": "https://stackoverflow.com/users/954777/smonff"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1552489188, "post_id": 55129743, "comment_id": 97030436, "body": "Thanks @simbabque , I will try this."}], "owner": {"reputation": 3160, "user_id": 954777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/heMKU.jpg?s=128&g=1", "display_name": "smonff", "link": "https://stackoverflow.com/users/954777/smonff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552556154, "creation_date": 1552420669, "last_edit_date": 1552556154, "question_id": 55129743, "link": "https://stackoverflow.com/questions/55129743/why-dbicdump-shorten-table-column-name-in-resultsource-when-it-reach-30-chars", "title": "Why dbicdump shorten table column name in ResultSource when it reach 30 chars?", "body": "<p>I dumped a MSSQL database schema using <code>dbicdump</code>:</p>\n\n<pre><code>dbicdump \\\n    -o dump_directory=./lib \\\n    -o components='[\"InflateColumn::DateTime\"]' \\\n    -o constraint='qr/(V_A_Table_With_A_Very_Long_Name)/i' \\\n    -o preserve-case=1 \\\n    My::Package dbi:ODBC:dsn=ODBC_Conf my_username 'secret'\n</code></pre>\n\n<p>The schema got generated properly, there were no error nor warning. Though, one of the column name is called <code>Code_Tranche_Unite_Urbaine_XXXY</code> in the database, but what I got in the corresponding ResultSource is <code>Code_Tranche_Unite_Urbaine_XXX</code> (without the <em>Y</em> in the end) :</p>\n\n<pre><code>package My::Schema::Result::VATableWithAVeryLongName;\n#...\n__PACKAGE__-&gt;table(\"V_A_Table_With_A_Very_Long_Name\");\n#...\n__PACKAGE__-&gt;add_columns(\n  #...\n  # Should be 'Code_Tranche_Unite_Urbaine_XXXY'\n  \"Code_Tranche_Unite_Urbaine_XXX\",\n  {\n    accessor    =&gt; \"code_tranche_unite_urbaine_XXX\", # No 'Y' here\n    data_type   =&gt; \"integer\",\n    is_nullable =&gt; 1,\n  },\n  #...\n);\n</code></pre>\n\n<p>I kept the generated ResultSource as is, didn't edited it. It looks like <code>DBIx::Class::Schema::Loader</code> shorten the column name at 30 chars. This is a supposition because i didn't manage to find any documentation about it.</p>\n\n<p>If it could make any difference, <code>V_A_Table_With_A_Very_Long_Name</code> is a MSSQL view, accessed through ODBC.</p>\n\n<p>I am a bit curious of the reasons why <code>dbicdump</code> would behave this way: I could say that it is because 30 chars is <em>really too long</em>, but the thing is that you don't always have the possibility to change the table schema. </p>\n\n<p>Is it the behavior that is expected and if so why is it like this? Could it be a bug? Is there a way to control this?</p>\n\n<p>Versions: <code>DBIx::Class::Schema::Loader</code> and <code>dbicdump</code> comes from the same <code>DBIx::Class::Schema::Loader</code> installation, <code>0.07049</code></p>\n"}, {"tags": ["perl", "jenkins", "parameters", "csh"], "answers": [{"comments": [{"owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "edited": false, "score": 0, "creation_date": 1552418800, "post_id": 55129263, "comment_id": 97000139, "body": "I know <a href=\"https://www-uxsup.csx.cam.ac.uk/misc/csh.html\" rel=\"nofollow noreferrer\">csh sucks</a> believe me I have asked this at work as to why we won&#39;t use bash as the default.  But I don&#39;t have an option in this case since the company default is cshell."}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": true, "score": 1, "last_activity_date": 1552418645, "creation_date": 1552418645, "answer_id": 55129263, "question_id": 55128963, "link": "https://stackoverflow.com/questions/55128963/how-do-i-input-paramters-into-a-jenkins-perl-script-from-command-line/55129263#55129263", "title": "How do I input paramters into a Jenkins perl script from command line?", "body": "<p>If you can't modify the Perl script so it reads command-line parameters (which would improve its general usability to boot), maybe create a simple wrapper script:</p>\n\n<pre><code>#/bin/sh\nenv PARAM1=\"$1\" PARAM2=\"$2\" perl ScriptA.pl\n</code></pre>\n\n<p>(Yes, <code>sh</code>. Nobody should use <code>csh</code> for anything in 2019.)</p>\n"}], "owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 55129263, "answer_count": 1, "score": -1, "last_activity_date": 1552418645, "creation_date": 1552417436, "question_id": 55128963, "link": "https://stackoverflow.com/questions/55128963/how-do-i-input-paramters-into-a-jenkins-perl-script-from-command-line", "title": "How do I input paramters into a Jenkins perl script from command line?", "body": "<h1>Background</h1>\n\n<p>I am running a Jenkns Job, called Job A, that feeds its build parameters into a perl script, called ScriptA.pl, in the following format below:</p>\n\n<pre><code>#Check the input params\nmy $PARAM1 = $ENV{ \"PARAM1\" };\nmy $PARAM2 = $ENV{ \"PARAM2\" };\n.....more params fed in the same way\nif ( $PARAM1 eq \"\" ) {\n    print \"PARAM1 is a required parameter.\\n\";\n    exit 1;\n}\nif ( $PARAM2 eq \"\" ) {\n    print \"PARAM2 is a required parameter.\\n\";\n    exit 1;\n}\n.....more param checks done in the same way\n###Script then runs a bunch of execution statements####\n</code></pre>\n\n<h1>Problem</h1>\n\n<p>I am trying to run this script from Linux command line in cshell in the following way to test that the execution component works:</p>\n\n<pre><code>/% ScriptA.pl jetFuel steelBeams\n</code></pre>\n\n<p>And it thinks that no parameters have been entered, since this error is returned</p>\n\n<pre><code>PARAM1 is a required parameter.\n</code></pre>\n\n<h1>Question</h1>\n\n<p>How do I properly input Jenkins parameters into a Jenkins script from command line?</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1552412475, "post_id": 55127551, "comment_id": 96996880, "body": "You want a hash ref slice."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1552412717, "post_id": 55127551, "comment_id": 96997027, "body": "If you&#39;ve just picked up Perl to do this, your code is really very good, and you&#39;ve done your homework. Nice to see a question like that. :)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1552421236, "post_id": 55127551, "comment_id": 97001327, "body": "see <a href=\"http://perlmonks.org/?node=References+quick+reference\" rel=\"nofollow noreferrer\">perlmonks.org/?node=References+quick+reference</a>"}], "answers": [{"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 2, "last_activity_date": 1552421202, "creation_date": 1552421202, "answer_id": 55129883, "question_id": 55127551, "link": "https://stackoverflow.com/questions/55127551/subset-of-hash-keys-in-perl/55129883#55129883", "title": "Subset of hash keys in Perl", "body": "<p>In general, you can use a reference (or expression that produces a reference) in any syntax by replacing the variable name with the reference in a <code>{}</code> block.  So:</p>\n\n<pre><code>@hash{qw(header_one header_two)}\n</code></pre>\n\n<p>would be</p>\n\n<pre><code>@{$row}{qw(header_one header_two)}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@$row{qw(header_one header_two)}\n</code></pre>\n\n<p>(the <code>{}</code> can be omitted if the reference is a simple scalar variable). </p>\n\n<p>But that is just a hash slice returning the two values; if you want a key/value list, use a key/value slice (new in perl 5.20) instead:</p>\n\n<pre><code>my %slice = %$row{qw(header_one header_two)};\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 805259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e06ca16eb005bedf2f13f6e206c700f?s=128&d=identicon&r=PG", "display_name": "rcknr", "link": "https://stackoverflow.com/users/805259/rcknr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 55129883, "answer_count": 1, "score": 4, "last_activity_date": 1552421202, "creation_date": 1552412174, "question_id": 55127551, "link": "https://stackoverflow.com/questions/55127551/subset-of-hash-keys-in-perl", "title": "Subset of hash keys in Perl", "body": "<p>I found myself writing a Perl script as a library for the specific format I'm working with is only available for this language. The script reads a CSV file and saves data into a proprietary format. I only need to save specific columns, not the whole dataset, so I figured a way to access columns by column names using the following code.</p>\n\n<pre><code>my $file = \"test.csv\";\nopen my $fh, \"&lt;\", $file or die \"$file: $!\";\n\nmy $csv = Text::CSV-&gt;new ({\n  binary    =&gt; 1, # Allow special character. Always set this\n  auto_diag =&gt; 1, # Report irregularities immediately\n  });\n$csv-&gt;column_names ($csv-&gt;getline ($fh)); # use header\nwhile (my $row = $csv-&gt;getline_hr ($fh)) {\n  print $row-&gt;{column_name};\n}\n</code></pre>\n\n<p>Inside a while loop, I would like to get a hash which only has columns I need, not the whole record. I figured there's a way to do that with hashes like so:</p>\n\n<pre><code>@hash{qw(header_one header_two)}\n</code></pre>\n\n<p>But in my case <code>$row</code> is not a hash but a reference (am I right about that?), so I can't quite figure out how to achieve what I need. Appreciate some help! Thanks!</p>\n"}, {"tags": ["html", "bash", "perl"], "comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1552405979, "post_id": 55125632, "comment_id": 96992889, "body": "What is a &quot;perl/bash&quot; script? This looks like you are just asking for a Perl script that outputs a particular fragment of HTML given the four arguments."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1552406833, "creation_date": 1552406833, "answer_id": 55125992, "question_id": 55125632, "link": "https://stackoverflow.com/questions/55125632/how-to-use-arguments-passed-from-bash-script-in-html/55125992#55125992", "title": "How to use arguments passed from bash script in html", "body": "<p>It looks like you're trying to use <a href=\"https://metacpan.org/pod/HTML::Template\" rel=\"nofollow noreferrer\">HTML::Template</a>. But I only knew that because I recognised the syntax in your HTML snippet. In the future, you should probably include important information like that in your question.</p>\n\n<p>The documentation for this module (linked above) is pretty good. I've never used the module myself, but after skimming the documentation, I was able to write this simple demonstration program (which is based on your requirements).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse HTML::Template;\n\n@ARGV == 4\n  or die \"Not enough arguments\\n\";\n\nmy ($heading1, $value1, $heading2, $value2) = @ARGV;\n\nmy $template = &lt;&lt;EO_HTML;\n&lt;tr&gt;\n        &lt;td&gt;&lt;b&gt; &lt;TMPL_VAR NAME=heading_1&gt; :&lt;/b&gt; &lt;TMPL_VAR NAME=Value1&gt; &lt;/td&gt;\n\n&lt;/tr&gt;\n&lt;tr&gt;\n        &lt;td&gt;&lt;b&gt; &lt;TMPL_VAR NAME=heading_2&gt; :&lt;/b&gt; &lt;TMPL_VAR NAME=value2&gt; &lt;/td&gt;\n\n&lt;/tr&gt;\nEO_HTML\n\nmy $ht = HTML::Template-&gt;new(scalarref =&gt; \\$template);\n\n$ht-&gt;param(\n  heading_1 =&gt; $heading1,\n  Value1    =&gt; $value1,\n  heading_2 =&gt; $heading2,\n  Value2    =&gt; $value2,\n);\n\nprint $ht-&gt;output;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11192101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25d229087e067a6609cdd883afb2a28?s=128&d=identicon&r=PG&f=1", "display_name": "Jack15", "link": "https://stackoverflow.com/users/11192101/jack15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1552459162, "accepted_answer_id": 55125992, "answer_count": 1, "score": -4, "last_activity_date": 1552406833, "creation_date": 1552405743, "last_edit_date": 1552405930, "question_id": 55125632, "link": "https://stackoverflow.com/questions/55125632/how-to-use-arguments-passed-from-bash-script-in-html", "closed_reason": "Not suitable for this site", "title": "How to use arguments passed from bash script in html", "body": "<p>I am passing the values from perl/bash script to below html code, to get it print like below.</p>\n\n<pre><code>Top_Heading 1 : One\nMiddle_Heading 2 : two\n</code></pre>\n\n<p>where value of $heading_1 is Top_Heading 1  and  $Value1 is One and similar to heading 2</p>\n\n<p>Passing the value as below in perl script.</p>\n\n<pre><code>my $heading_1 = $ARGV[0];\nmy $Value1 = $ARGV[1];\nmy $heading_2 = $ARGV[2];\nmy $Value1 = $ARGV[3];\n\n\n\n&lt;tr&gt;\n        &lt;td&gt;&lt;b&gt; &lt;TMPL_VAR NAME= heading_1&gt; :&lt;/b&gt; &lt;TMPL_VAR NAME= Value1&gt; &lt;/td&gt;\n\n&lt;/tr&gt;\n&lt;tr&gt;\n        &lt;td&gt;&lt;b&gt; &lt;TMPL_VAR NAME= heading_2&gt; :&lt;/b&gt; &lt;TMPL_VAR NAME= value2&gt; &lt;/td&gt;\n\n&lt;/tr&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1552399147, "post_id": 55122668, "comment_id": 96987980, "body": "In general it is better to parse JSON using a dedicated parser module, see for example <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\">JSON::XS</a>. Then you can also easily extract your array values from the resulting hash."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1552399451, "post_id": 55122668, "comment_id": 96988196, "body": "If you give us some correct JSON, we can show you how to turn it into a data structure. Regular expressions cannot exhaustively parse JSON in the way you&#39;re trying to. But it&#39;s probably as simple as <code>my $data = JSON -&gt; decode ( $string );</code> and go from there."}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1552400919, "post_id": 55122668, "comment_id": 96989298, "body": "@Sobrique  We don&#39;t have any modules installed, and I doubt I could get any installed for this project since it is so small. I am just trying to make due with what I have."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1552405045, "post_id": 55122668, "comment_id": 96992239, "body": "perl-JSON ships by default with Centos/Redhat. Otherwise what you&#39;re trying to do is re-implement some prior art, with less testing."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 4, "creation_date": 1552411968, "post_id": 55122668, "comment_id": 96996582, "body": "In 2019, there is <a href=\"https://stackoverflow.com/questions/3735836/how-can-i-install-perl-modules-without-root-privileges\">no excuse for</a> <a href=\"https://stackoverflow.com/questions/251705/how-can-i-use-a-new-perl-module-without-install-permissions\">not being able to</a> <a href=\"https://stackoverflow.com/questions/2980297/how-can-i-use-cpan-as-a-non-root-user\">install modules</a>."}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1552412807, "post_id": 55122668, "comment_id": 96997072, "body": "@mob Thanks for the helpful information, this is my first time working with perl, so there is a lot I do not know."}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 0, "creation_date": 1552400575, "post_id": 55123457, "comment_id": 96989010, "body": "the issue is we do not have any modules installed, and i doubt I could get someone to install them. It&#39;s just a weird set of circumstances, I get the string from a table where a json string is stored as a varchar. I&#39;ve added more proper examples to my above question."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 3, "creation_date": 1552410678, "post_id": 55123457, "comment_id": 96995857, "body": "@MuamerBekti\u0107 If you are on Perl 5.14 or newer, <a href=\"https://perldoc.pl/JSON::PP\" rel=\"nofollow noreferrer\">JSON::PP</a> is core (though slow). As an alternative, <a href=\"https://metacpan.org/pod/JSON::Tiny\" rel=\"nofollow noreferrer\">JSON::Tiny</a> can be <a href=\"https://metacpan.org/pod/App::FatPacker\" rel=\"nofollow noreferrer\">fatpacked</a> into any script."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552411483, "post_id": 55123457, "comment_id": 96996303, "body": "@Grinnz I see <a href=\"https://perldoc.perl.org/index-modules-J.html\" rel=\"nofollow noreferrer\">no JSON listed in perldoc</a>.  Is that only about docs? (I seem to recall that it was added to core (v5.14?) ... and later removed ... false memory?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 2, "creation_date": 1552411492, "post_id": 55123457, "comment_id": 96996308, "body": "@MuamerBekti\u0107  I absolutely second the idea to somehow use a module. The <code>JSON::Tiny</code> linked by Grinnz can even merely be copied -- it&#39;s a single file with no dependencies (from what I can see)"}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1552411827, "post_id": 55123457, "comment_id": 96996498, "body": "@zdim I&#39;m probably going to try to incorporate it, the only issue is that the strings are aren&#39;t always json values, sometimes they show up as xml, and I didn&#39;t want to have to use two modules, so i was just planning on using arrays created by regex. My biggest concern is going to be efficiency in the end so if it does improve speed i will do it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "edited": false, "score": 1, "creation_date": 1552412439, "post_id": 55123457, "comment_id": 96996854, "body": "@MuamerBekti\u0107 Hang on ... do you mean to say that you don&#39;t actually have proper JSON? If <i>any</i> of it isn&#39;t correct JSON then modules will choke on it.  What do you mean by &quot;<i>strings aren&#39;t always json values ... but show up as xml</i>&quot; ?  Can you update the question to this fact, and give example(s) of string(s) you have which aren&#39;t valid JSON?"}, {"owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1552412704, "post_id": 55123457, "comment_id": 96997016, "body": "@zdim so basically, i am pulling these values from a table where they are being dumped. The values being dumped are one of three things, XML format, JSON string format, or Empty. I have an if statement set up to differentiate between these three situations, and proceed accordingly. So there&#39;s no way the JSONprocess would happen for an XML string. Sorry if I poorly worded it the first time."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1552412792, "post_id": 55123457, "comment_id": 96997060, "body": "@zdim perldoc.perl.org is unmaintained and has many <a href=\"https://github.com/jonallen/perldoc.perl.org/issues\" rel=\"nofollow noreferrer\">longstanding issues</a> (like the one where it has never listed HTTP::Tiny and JSON::PP that have been core since 5.14), this is why I created perldoc.pl in the first place."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 5, "last_activity_date": 1552399624, "creation_date": 1552399624, "answer_id": 55123457, "question_id": 55122668, "link": "https://stackoverflow.com/questions/55122668/regex-add-more-groups-and-efficiency-perl/55123457#55123457", "title": "Regex Add More Groups and Efficiency Perl", "body": "<p>First, your example data looks like it wants to be a hash, not an array.</p>\n\n<p>Second, parsing JSON with regexes is (as you have already discovered) very fragile and error-prone.  It's <em>much</em> better to use a proper JSON parser, such as the <a href=\"https://metacpan.org/pod/JSON\" rel=\"noreferrer\">JSON</a> module:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse JSON 'from_json';\nuse Data::Dumper;\n\nmy $json = q({\n  \"email\": \"\",\n  \"lastLogon\":null,\n  \"pwdChanged\":\"0\"\n} );\n\nmy $decoded = from_json( $json );\n\nprint Dumper $decoded;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'email' =&gt; '',\n          'pwdChanged' =&gt; '0',\n          'lastLogon' =&gt; undef\n        };\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 6180321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3UtsMtHYyb8/AAAAAAAAAAI/AAAAAAAACB8/s-hmQSxha14/photo.jpg?sz=128", "display_name": "Muamer Bekti\u0107", "link": "https://stackoverflow.com/users/6180321/muamer-bekti%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552405106, "creation_date": 1552397371, "last_edit_date": 1552405106, "question_id": 55122668, "link": "https://stackoverflow.com/questions/55122668/regex-add-more-groups-and-efficiency-perl", "title": "Regex Add More Groups and Efficiency Perl", "body": "<p>So I am going to preface this by saying I came up with this using <a href=\"https://regexr.com/\" rel=\"nofollow noreferrer\">RegExr</a> and just typing in random thing until I got what I needed. </p>\n\n<p>The goal I had in mind was to generate an array from a json string using.  </p>\n\n<pre><code>my @valuesArray=$msgPayload=~/((?=[\"]).+?(?=[\"])\")/g;\n</code></pre>\n\n<p>This works for most cases, however it just selects values from one quote to the next quote. this becomes an issue when there is a value like true, false, or null.</p>\n\n<p>Example String</p>\n\n<pre><code>...\"email\":\"\",\"lastLogon\":null,\"pwdChanged\":\"0\",\"status\":\"A\",\"phoneNumber\":\"\",\"extension\":\"\",\"locale\":\"en_US\",\"boChecked\":false,\"boUserId\":\"\",\"UserId\":\"TWEH\",\"sChecked\":false,...\n</code></pre>\n\n<p>So I am working around this by using multiple replaces before actually splitting up into an array. </p>\n\n<pre><code>$msgPayload =~ s/:true/:\"true\"/g;\n$msgPayload =~ s/:false/:\"false\"/g;\n$msgPayload =~ s/:null/:\"null\"/g;\nmy @valuesArray=$msgPayload=~/((?=[\"]).+?(?=[\"])\")/g;\n</code></pre>\n\n<p>Now I was wondering if there was a way to combine all of this into a single regex expresion where it can also select the true false and null values without first having to do the replace. And if it is possible I feel like it would be more efficient doing it that way, but if I wrong, I would love to know more.</p>\n\n<p>Thanks!  </p>\n\n<p><strong>Edit:</strong>\nWe don't have any modules installed, and I doubt I could get any installed for this project since it is so small. I am just trying to make due with what I have. </p>\n\n<p>The data is stored in a varchar column in a table. One full example would be received like so.</p>\n\n<pre><code>[ {  &amp;quot;signonId&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;userId&amp;quot; : &amp;quot;USERNAME&amp;quot;,  &amp;quot;groupID&amp;quot; : &amp;quot;Master&amp;quot;,  &amp;quot;userName&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;phoneNumber&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;extension&amp;quot; : &amp;quot;4444&amp;quot;,  &amp;quot;emailAddress&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;password&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;locale&amp;quot; : &amp;quot;&amp;quot;}, {  &amp;quot;signonId&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;userId&amp;quot; : &amp;quot;USERNAME&amp;quot;,  &amp;quot;groupID&amp;quot; : &amp;quot;Master&amp;quot;,  &amp;quot;userName&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;phoneNumber&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;extension&amp;quot; : &amp;quot;5555&amp;quot;,  &amp;quot;emailAddress&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;password&amp;quot; : &amp;quot;&amp;quot;,  &amp;quot;locale&amp;quot; : &amp;quot;&amp;quot;} ]\n</code></pre>\n\n<p>Which then when you replace the &quot; with \" and format it, it becomes...</p>\n\n<pre><code>[\n   {\n      \"signonId\":\"\",\n      \"userId\":\"USERNAME\",\n      \"groupID\":\"Master\",\n      \"userName\":\"\",\n      \"phoneNumber\":\"\",\n      \"extension\":\"4444\",\n      \"emailAddress\":\"\",\n      \"password\":\"\",\n      \"locale\":\"\"\n   },\n   {\n      \"signonId\":\"\",\n      \"userId\":\"USERNAME\",\n      \"groupID\":\"Master\",\n      \"userName\":\"\",\n      \"phoneNumber\":\"\",\n      \"extension\":\"5555\",\n      \"emailAddress\":\"\",\n      \"password\":\"\",\n      \"locale\":\"\"\n   }\n]\n</code></pre>\n"}, {"tags": ["perl", "moose"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1552376447, "post_id": 55113986, "comment_id": 96974176, "body": "With <code>%{$opt}</code> you&#39;re directly inspecting the internals of a Moose object. I&#39;m pretty sure that&#39;s not correct."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1552376514, "post_id": 55113986, "comment_id": 96974205, "body": "What do you mean by &quot;<i>Are the options intended to be their own object?</i>&quot;?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1552377358, "post_id": 55113986, "comment_id": 96974600, "body": "Oh! <code>AppOpt</code> is not supposed to be an &quot;options class&quot;, it&#39;s the application class. You might want to give it a <code>main</code> method and use it as <code>AppOpt-&gt;new_with_options-&gt;main();</code>. All <code>MooseX::Getopt</code> gives you is a constructor that can initialize attributes not from its constructor arguments, but from command line arguments. Is that what you mean? (If you don&#39;t have an &quot;application class&quot; or don&#39;t know why you&#39;d use one, you probably don&#39;t need MooseX::Getopt.)"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1552377917, "post_id": 55113986, "comment_id": 96974870, "body": "@melpomene Yes, that was what I was trying to ask.  I don&#39;t have an &quot;application class&quot;, but I do need to deal with options.  While I&#39;ve only been moosing for about a week, I like it.  I just wanted to make sure I was using this module correctly, and it sound like, &quot;no, not really&quot;.  Right?"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1552378109, "post_id": 55113986, "comment_id": 96974944, "body": "I know plundering the <code>%{$opt}</code> object is in bad form.  I just needed to quickly check the guts to make sure it was doing what I thought it was.  It seems weird to use this for an application class without traits.  Wouldn&#39;t that expose all of the application guts to the command line otherwise?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1552378112, "post_id": 55113986, "comment_id": 96974951, "body": "@ErikBennett There is no &quot;using this module&quot;; you can just add that &quot;role&quot; to a class, and -- bingo, now there are command-line options for the program that uses that class.  That&#39;s the intent of it.  (There are a few methods/accessors to query the state of the command-line options, as well.)  Of course, it&#39;s probably a good idea to use it thoughtfully, to bundle desired command-line options for the program."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1552378732, "post_id": 55113986, "comment_id": 96975270, "body": "Thanks.  I didn&#39;t mean <code>use</code>, but rather me employing it...  In any case, I think I understand.  My usage of it above is not the way the author intended for it to be deployed.  This is important news!  Thanks, again."}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1563502243, "post_id": 55116578, "comment_id": 100729976, "body": "The way I was using it was slightly... off-color.  I&#39;ve incorporated the <code>MooseX::Getopt</code> into a more general <code>Configuration.pm</code> module, which gets information from defaults, an init file, and the command line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1563515424, "post_id": 55116578, "comment_id": 100732582, "body": "@ErikBennett OK, thanks for clarification. That doesn&#39;t sound bad or off-handed to me, either.  The role provides for atttribute initialization via command-line, and i don&#39;t think that there&#39;s a very specific intent about it; whichever way you find that useful. (Packaging that capability in a config-type module sounds about right? Apart from the very basic use, to just stick it in the main/application class. Perhaps that&#39;d be the &quot;main intent,&quot; merely since it&#39;s easiest.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1552414524, "last_edit_date": 1552414524, "creation_date": 1552377445, "answer_id": 55116578, "question_id": 55113986, "link": "https://stackoverflow.com/questions/55113986/is-this-a-correct-intended-usage-of-moosexgetopt/55116578#55116578", "title": "Is this a correct (intended) usage of MooseX::Getopt?", "body": "<p>The role <a href=\"https://metacpan.org/pod/MooseX::Getopt\" rel=\"nofollow noreferrer\">MooseX::Getopt</a> sets up command line options for attributes (except for those starting with <code>_</code>) of the class it is used with (consumed by). It is not intended to be \"used\" on its own. </p>\n\n<p>So you write a class <code>AppOpt</code>, with attribute <code>report</code>, and when you include <code>MooseX::Getopt</code> role you can call the program with <code>--report...</code>, where option details are set by inferring as much as possible about the attribute from its class.  That's it.  You get command-line options.</p>\n\n<p>A few accessors are provided, that one can use to inspect what happened on the command line, listed in your regex. But use them as accessors (methods), not by directly poking at the object. </p>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 55116578, "answer_count": 1, "score": 2, "last_activity_date": 1609432537, "creation_date": 1552363531, "last_edit_date": 1609432537, "question_id": 55113986, "link": "https://stackoverflow.com/questions/55113986/is-this-a-correct-intended-usage-of-moosexgetopt", "title": "Is this a correct (intended) usage of MooseX::Getopt?", "body": "<p>Is this a correct (intended) use of <a href=\"https://metacpan.org/pod/MooseX::Getopt\" rel=\"nofollow noreferrer\">MooseX::Getopt</a>?  The documentation doesn't have a lot of examples.  The code works, but I don't know if this was the intended usage model.</p>\n\n<pre><code>package AppOpt {\n    use Moose;\n    use Moose::Util::TypeConstraints;\n    use namespace::autoclean;\n\n    with 'MooseX::Getopt';\n\n    enum 'ReportType', [qw( activityByEvent activityByDate final )];\n    enum 'FormatType', [qw( text pretty html )];\n\n    has report =&gt; ( is =&gt; 'ro', isa =&gt; 'Str', required =&gt; 1 );\n\n    has verbose =&gt; ( is =&gt; 'ro', isa =&gt; 'Bool', default =&gt; 0 );\n\n    has format =&gt; ( is =&gt; 'ro', isa =&gt; 'Str', default =&gt; \"text\" );\n\n    __PACKAGE__-&gt;meta-&gt;make_immutable;\n}\n\npackage main;\nuse strict;\nuse warnings;\n\nmy $opt = AppOpt-&gt;new_with_options();\n\nprintf(\"original \\@ARGV = [%s]\\n\\n\", join(' ', @ARGV));\n\n# Please ignore this tasteless inspection of the object guts. -E\nfor my $k (keys(%{$opt})) {\n    unless($k =~ /(usage|ARGV|extra_argv)/) {\n    printf(\"%s =&gt; %s\\n\", $k, $$opt{$k});\n    }\n}\nexit(0);\n</code></pre>\n\n<p>Specifically: Are the options intended to be their own Class?  I can't be sure from the docs.</p>\n\n<p>Also, would it be appropriate to use <code>BUILD</code> to further validate the options?</p>\n\n<p>This may sound like more than one question, but I don't mean it to be.  I've run with other modules before only to find that I misunderstood how they were intended to be used.</p>\n"}, {"tags": ["perl", "mojolicious", "cpanm"], "comments": [{"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1552338931, "post_id": 55110481, "comment_id": 96963852, "body": "When I run cpanm Mojo::Util, I get the following response: &quot;Mojo::Util is up to date. (undef)&quot;. Is it safe to assume that my system has Mojolicious-8.12 installed because that&#39;s the most recent version shown in MetaCPAN, <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojo::DOM</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 1, "creation_date": 1552339520, "post_id": 55110497, "comment_id": 96964070, "body": "@DaveAiello In general, if $VERSION is not defined, that module has no version. Either the distribution relies on the version of the main module for updating (like Mojolicious), or the distribution is not correctly set up for CPAN."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1552339591, "post_id": 55110497, "comment_id": 96964105, "body": "I didn&#39;t explicitly install Mojolicious, which is why I didn&#39;t think to do what you suggested. This is also why I didn&#39;t completely understand the Mojolicious Github repository,"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 1, "creation_date": 1552339784, "post_id": 55110497, "comment_id": 96964169, "body": "@DaveAiello If it helps, you can find the distribution a module is associated with on <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow noreferrer\">its metacpan page</a> (top left), or <a href=\"https://cpanmeta.grinnz.com/packages#=Mojo::DOM\" rel=\"nofollow noreferrer\">the packages index directly</a>."}, {"owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 0, "creation_date": 1552339960, "post_id": 55110497, "comment_id": 96964241, "body": "Thanks! I added a comment to my question where I asked if I should infer the Mojolicious version from MetaCPAN before I saw your answer."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "edited": false, "score": 1, "creation_date": 1552340401, "post_id": 55110497, "comment_id": 96964383, "body": "@DaveAiello I would classify distributions into four groups: 1. all modules have their own versions, and they vary; 2. all modules have their own versions, and they match; 3. only the main module has a version; 4. no modules have versions properly declared. So the process would be to check the module you want to depend on for a version, and then the main module (module with name matching the distribution name). Also note that the distribution &quot;version&quot; doesn&#39;t technically have to be related to any of this, it just generally matches the main module version to avoid confusion."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 6, "last_activity_date": 1552341532, "last_edit_date": 1552341532, "creation_date": 1552338878, "answer_id": 55110497, "question_id": 55110481, "link": "https://stackoverflow.com/questions/55110481/how-do-i-determine-the-version-of-an-installed-perl-module-where-version-is-not/55110497#55110497", "title": "How do I determine the version of an installed Perl module where $VERSION is not defined?", "body": "<p>They do not have a version. The version of all modules in the Mojolicious distribution is considered to be equal to the version of Mojolicious (it is a somewhat non-standard distribution). So you would check the version of Mojolicious, depend on a certain version of the Mojolicious module, and pass Mojolicious to cpanm to update the distribution.</p>\n\n<pre><code>perl -MMojolicious\\ 9999\n</code></pre>\n\n<p>Note that Mojolicious also includes a version command:</p>\n\n<pre><code>mojo version\n</code></pre>\n\n<p>In general, if a module you are using or depending on does not have a version, check or depend instead on the version of the main module of the distribution, which is the module sharing the name of the distribution (with some legacy exceptions like libwww-perl). The distribution of a module can be found on its <a href=\"https://metacpan.org\" rel=\"nofollow noreferrer\">metacpan</a> page or in the <a href=\"https://cpanmeta.grinnz.com/packages\" rel=\"nofollow noreferrer\">packages index</a>.</p>\n"}], "owner": {"reputation": 490, "user_id": 347220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aac9f9a71c397a1c93c4b0d60e9833?s=128&d=identicon&r=PG", "display_name": "Dave Aiello", "link": "https://stackoverflow.com/users/347220/dave-aiello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 55110497, "answer_count": 1, "score": 3, "last_activity_date": 1552342535, "creation_date": 1552338782, "last_edit_date": 1552342535, "question_id": 55110481, "link": "https://stackoverflow.com/questions/55110481/how-do-i-determine-the-version-of-an-installed-perl-module-where-version-is-not", "title": "How do I determine the version of an installed Perl module where $VERSION is not defined?", "body": "<p>I need to find the version of <code>Mojo:::Util</code> that's installed on one of my servers, so I can submit an issue on the <a href=\"https://github.com/mojolicious/mojo/\" rel=\"nofollow noreferrer\">Mojolicious Github repository</a>. I followed the recommendations on <a href=\"https://stackoverflow.com/questions/135755/how-can-i-find-the-version-of-an-installed-perl-module\">How can I find the version of an installed Perl module?</a> mainly:</p>\n\n<pre><code>perl -MMojo::Util\\ 9999\n</code></pre>\n\n<p>The response I got when I ran that was:</p>\n\n<pre><code>Mojo::Util does not define $Mojo::Util::VERSION--version check failed.\nBEGIN failed--compilation aborted.\n</code></pre>\n\n<p>I originally installed <code>Mojo::DOM</code> using CPANM and got <code>Mojo::Util</code> because <code>Mojo::DOM</code> depends on it.</p>\n\n<p>How do I determine the version of an installed Perl module where <code>$VERSION</code> is not defined?</p>\n"}, {"tags": ["mysql", "macos", "perl"], "comments": [{"owner": {"reputation": 29517, "user_id": 6436191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecxRK.png?s=128&g=1", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/6436191/the-impaler"}, "edited": false, "score": 1, "creation_date": 1552337448, "post_id": 55110122, "comment_id": 96963200, "body": "Some packages need something on the standard input. Try adding <code>&lt; &#47;dev&#47;null</code> to set the standard input to nothing."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 29517, "user_id": 6436191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecxRK.png?s=128&g=1", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/6436191/the-impaler"}, "edited": false, "score": 0, "creation_date": 1552337567, "post_id": 55110122, "comment_id": 96963251, "body": "Like this? <code>system &quot;mysql.server start 2&gt;&amp;1 &lt; &#47;dev&#47;null&quot;;</code> I tried it, no effect."}, {"owner": {"reputation": 29517, "user_id": 6436191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecxRK.png?s=128&g=1", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/6436191/the-impaler"}, "edited": false, "score": 1, "creation_date": 1552337611, "post_id": 55110122, "comment_id": 96963275, "body": "I usually set the standard input before the standard output and error. I don&#39;t recall if it makes any difference. Something like: <code>system &quot;mysql.server start  &lt; &#47;dev&#47;null 2&gt;&amp;1</code>."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 29517, "user_id": 6436191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecxRK.png?s=128&g=1", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/6436191/the-impaler"}, "edited": false, "score": 0, "creation_date": 1552337678, "post_id": 55110122, "comment_id": 96963306, "body": "I tried <code>system &quot;mysql.server start  &lt; &#47;dev&#47;null  2&gt;&amp;1&quot;</code> and a few other iterations, no luck, though."}, {"owner": {"reputation": 29517, "user_id": 6436191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecxRK.png?s=128&g=1", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/6436191/the-impaler"}, "edited": false, "score": 1, "creation_date": 1552337989, "post_id": 55110122, "comment_id": 96963428, "body": "If you are running linux/unix, you&#39;ll need to enclose it in <code>nohup</code> and <code>&amp;</code> to be truly running in the background. If this is your case you could try: <code>system &quot;nohup mysql.server start 2&gt;&amp;1  &lt;&#47;dev&#47;null &gt;log.file &amp;&quot;</code>."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 29517, "user_id": 6436191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecxRK.png?s=128&g=1", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/6436191/the-impaler"}, "edited": false, "score": 0, "creation_date": 1552338060, "post_id": 55110122, "comment_id": 96963454, "body": "I got it. I had to change from <code>&lt; &#47;dev&#47;null</code> to <code>&gt; &#47;dev&#47;null</code>. No idea why. Redirection commands are a weak spot for me."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 29517, "user_id": 6436191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecxRK.png?s=128&g=1", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/6436191/the-impaler"}, "edited": false, "score": 0, "creation_date": 1552338110, "post_id": 55110122, "comment_id": 96963470, "body": "So command that works is: <code>system &quot;mysql.server start &gt;&#47;dev&#47;null 2&gt;&amp;1&quot;;</code>"}, {"owner": {"reputation": 29517, "user_id": 6436191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecxRK.png?s=128&g=1", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/6436191/the-impaler"}, "edited": false, "score": 0, "creation_date": 1552338116, "post_id": 55110122, "comment_id": 96963471, "body": "Yeah, I was thinking the standard output was not set. You may consider the <code>nohup</code> / <code>&amp;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": false, "score": 0, "last_activity_date": 1552338392, "creation_date": 1552338392, "answer_id": 55110411, "question_id": 55110122, "link": "https://stackoverflow.com/questions/55110122/command-in-test-causing-test-to-not-to-fully-exit/55110411#55110411", "title": "Command in test causing test to not to fully exit", "body": "<p>OK, this is what fixed it, but I'm still not clear why, however:</p>\n\n<pre><code>`mysql.server start &gt;/dev/null 2&gt;&amp;1`;\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552339295, "creation_date": 1552337018, "question_id": 55110122, "link": "https://stackoverflow.com/questions/55110122/command-in-test-causing-test-to-not-to-fully-exit", "title": "Command in test causing test to not to fully exit", "body": "<p>I have a weird issue with the following perl test script on a mac with mysql and apache installed:</p>\n\n<pre><code># stop all servers\n`mysql.server stop 2&gt;&amp;1`;\n`apachectl -k graceful-stop 2&gt;&amp;1`;\n\nis apache_is_running(), 0, 'determines if apache is not running';\n`apachectl -k start 2&gt;&amp;1`;\n\nis apache_is_running(), 1, 'determines apache is running';\nis mysql_is_running(), 0, 'determines mysql is not running';\n\nsystem \"mysql.server start 2&gt;&amp;1\";\n\nis mysql_is_running(), 1, 'determines mysql is running';\nprint \"hi\\n\";\nexit;\n</code></pre>\n\n<p>When I run the test with <code>prove -l --verbose</code>, I get the following output:</p>\n\n<pre><code>1..4\n# Running my tests\nok 1 - determines if apache is not running\nok 2 - determines apache is running\nok 3 - determines mysql is not running\nStarting MySQL\n. SUCCESS!\nok 4 - determines mysql is running\nhi\n</code></pre>\n\n<p>Then the test just hangs and never fully exits. It's something about the last command that causes this: <code>system \"mysql.server start 2&gt;&amp;1\";</code> I've tried with backticks instead of <code>system</code> but that didn't help. If I take out this last command, it exits fine as expected.</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 1, "creation_date": 1552330396, "post_id": 55108477, "comment_id": 96960000, "body": "You can improve your chances for a good answer if you provide a short, but complete example (including any input data). You might also provide the expected output."}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1552330765, "post_id": 55108477, "comment_id": 96960159, "body": "In output 2.html file will move to another folder because that file is not linked with the another files."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552330909, "post_id": 55108477, "comment_id": 96960231, "body": "Note that <code>push</code> returns the number of elements in the array, not the list of filenames. For example, <code>readImageFile</code> will not return a list of filenames"}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552343441, "post_id": 55108477, "comment_id": 96965438, "body": "@H&#229;konH&#230;gland It is return the file names but it will return 2.html file also. I want only the name of file is I.html and 1.html and 1 directory."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552344683, "post_id": 55108477, "comment_id": 96965791, "body": "@Jack What is the purpose of the <code>-l</code> test for <code>$fileNames</code>? You are redirecting output of the backticks to <code>$fileNames</code> but at the same time collecting the STDOUT of the backticks in the same variable. But the STDOUT will be empty since you are redirecting it to a file."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552345111, "post_id": 55108477, "comment_id": 96965897, "body": "Also note that <code>my $fileNames = `find [...] &gt; $fileNames` </code> will give a compile time error, since <code>$fileNames</code> inside the backticks is not declared yet."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552347225, "post_id": 55111786, "comment_id": 96966396, "body": "i run your program but it will not going after 10th line <code>die &quot;Usage: $0 dir-name source-file-name\\n&quot; if not $dir or not $source_file;</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552347346, "post_id": 55111786, "comment_id": 96966418, "body": "@Jack That means you need to run it as: <code>program directory html-file</code>.  The <code>directory</code> there is a name of the directory under which all this is happening (you can use <code>.</code> for that, if it&#39;s the current directory), and <code>html-file</code> is the name of the html file in which you want to check for unusued files."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552347503, "post_id": 55111786, "comment_id": 96966458, "body": "@Jack In the example you give in the question, it seems that this would be <code>program . I.html</code> (if all this is in the current directory)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552347907, "post_id": 55111786, "comment_id": 96966568, "body": "@Jack  Added to the answer a statement of how the program is used"}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552348229, "post_id": 55111786, "comment_id": 96966651, "body": "now I got error in  this line <code>my $tree = HTML::TreeBuilder-&gt;new_from_file($source_file);</code>. Error is <code>unable to parse file: No such file or directory at new.pl line 17.</code> the file is already there."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552370715, "post_id": 55111786, "comment_id": 96971858, "body": "@Jack I don&#39;t know your files, only what you explain in the question.  Here is what I test with -- I made an HTML file which has an anchor with <code>href=&quot;...&quot;</code>, with a name of another html file, which is in the same folder; and, it has an <code>img</code> with <code>src=&quot;...&quot;</code> which has the name of yet another file, also there.  Both of these files are found to be used. And, for other files that are lying around it&#39;s reported that they are <i>not used</i>. (There are a few more tags in my html file, with some similar attributes, etc, for testing)"}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552385678, "post_id": 55111786, "comment_id": 96979429, "body": "In my file 1.html and 2.html both has only img with src= &quot;...&quot; and links with the img folder. In I.html has only href=&quot;..&quot; which linked with 1.html."}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552385901, "post_id": 55111786, "comment_id": 96979591, "body": "Now you can see my files which I just added in question."}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552498477, "post_id": 55111786, "comment_id": 97036495, "body": "I try to run your programme but i got this error <code>unable to parse file: No such file or directory at new.pl line 17.</code> I run the programme <code>perl new.pl www&#47; I.html</code> then i got that erorr. I have multiple files in that folder."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552501793, "post_id": 55111786, "comment_id": 97038244, "body": "@Jack Ah, right; that is because a file is used in another HTML file with a path relative to that HTML file. Fixed, so it should now work for that.  Note that the program was meant as an example, for one HTML file.  It needs either a driver (that would invoke it for multiple files/directories),  or adjustments to work for &quot;any&quot; files.  I&#39;ll try to find time to edit it for that but can&#39;t do that right now. I hope that you can use it as is to at least clean up in relation to single HTML files."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1552503112, "post_id": 55111786, "comment_id": 97038964, "body": "hello friend.. how are you doing ..is <code>File::Find::Rule</code> a core module?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1552503691, "post_id": 55111786, "comment_id": 97039253, "body": "@stack0114106 hello :)   No, it&#39;s not.  It essentially provides a friendlier interface for the good old core <code>File::Find</code>.  (But <code>File::Find</code>&#39;s performance is better in some use cases. There is nothing terribly wrong with its interface.) This also adds a few conveniences."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552504160, "post_id": 55111786, "comment_id": 97039477, "body": "@Jack Hang on, I&#39;m rethinking what you asked.  So, is this what you have:  This script  is in a directory where <code>I.html</code> is, and where <code>www&#47;</code> (directory) is; the file <code>I.html</code> uses files from <code>www&#47;</code> folder, for example as <code>href=&quot;www&#47;file.html&quot;</code> (etc).  If that is the case this program should work.  If it&#39;s something else please explain.  (For now I am rolling back my change, until we clarify this or I get to make more comprehensive changes.)"}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552509217, "post_id": 55111786, "comment_id": 97041812, "body": "@zdim yes you are in right track. But unfortunately I got error. Which I mansion in previous comment.  Or you can also provide how you run your programme in your system.. In, previous comment I told you about how I run my programme."}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552509542, "post_id": 55111786, "comment_id": 97041954, "body": "<code>www&#47;</code> (directory) is in <code>my desktop&#47;perl&#47;www&#47;</code> and I put file in perl (directory). then I will run the programme like `perl new.pl(file name) www/(directory location) I.html(file name). If I did not put space between directory and file name that I got error in line 8. If did put space between directory and file name that I got error in line 17."}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552509704, "post_id": 55111786, "comment_id": 97042026, "body": "@zdim all the .html and image folder is located in the <code>www&#47; </code> (directory)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552516610, "post_id": 55111786, "comment_id": 97044829, "body": "@Jack Added a full example usage"}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552561659, "post_id": 55111786, "comment_id": 97060885, "body": "@zdim Hi, Thank you providing your example. But i got same error again."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552591308, "post_id": 55111786, "comment_id": 97080184, "body": "@Jack I don&#39;t know what that means -- how are your files and their locations different from the example (I mean what is the difference that matters for this purpose) ?"}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552646323, "post_id": 55111786, "comment_id": 97099220, "body": "@zdim I try to run programme with your example and also I put only I.html file in <code>www</code> (folder).  But I got same error <code>Processing www&#47;I.html... unable to parse file: No such file or directory at script.pl line 17</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552672201, "post_id": 55111786, "comment_id": 97114434, "body": "@Jack  Please remember one limitation here: Any files used in <code>I.html</code> are referenced with relative paths and the whole script has to respect that -- if <code>I.html</code> uses <code>www&#47;images&#47;used.jpg</code> then the file list that the script first finds must have that (and not, for example, <code>images&#47;used&#47;jpg</code>).  But if <code>I.html</code> is itself in <code>www</code> then it will have <code>src=&quot;images&#47;used.jpg&quot;</code> so the script again must find <i>that</i>.  That means that the script should be started from the directory in which <code>I.html</code> is."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552672293, "post_id": 55111786, "comment_id": 97114480, "body": "@Jack So if <code>I.html</code> is inside <code>www</code> then go inside that directory (<code>cd www</code>) and now call the script as <code>script.pl . I.html</code>.  Of course, feel free to change how command line is processed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1552672493, "post_id": 55111786, "comment_id": 97114580, "body": "@Jack  One way to overcome this, and also to make this more comprehensive, is by writing a &quot;driver&quot; for this script -- another (short) program which calls it repeatedly (perhaps <code>chdir</code>-ing as suitable), feeding it filenames and directories so to scan your whole structure.  But it should work as it stands as well (it does for me)."}, {"owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "edited": false, "score": 0, "creation_date": 1553637566, "post_id": 55111786, "comment_id": 97457199, "body": "@zdim Hi, If I get that output then how can i move that file in different folder? for example ` Bin/www/used.html ` like this type of output."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1561684872, "last_edit_date": 1561684872, "creation_date": 1552346229, "answer_id": 55111786, "question_id": 55108477, "link": "https://stackoverflow.com/questions/55108477/how-to-remove-a-file-if-it-is-not-used-by-another-file/55111786#55111786", "title": "How to remove a file if it is not used by another file", "body": "<p>The overall approach you show is reasonable, but there is a lot to say about the code itself. The place to do that would be <a href=\"https://codereview.stackexchange.com/\">code review</a> and I encourage you to submit your code there as well.</p>\n\n<p>One overall comment I'd make is that there is no reason to reach so often for external tools; your program uses external <code>grep</code> and <code>find</code> and <code>sort</code> and <code>pwd</code>. We can practically always do the whole job with an abundance of tools that Perl provides.  </p>\n\n<p>Here is a simple example for what you need, where most of work is done using modules.  </p>\n\n<p>The list of files to search for in our HTML is assembled using <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\">File::Find::Rule</a>, recursively under <code>$dir</code>. Another option is the core <a href=\"https://perldoc.perl.org/File/Find.html\" rel=\"nofollow noreferrer\">File::Find</a> module. </p>\n\n<p>Even as HTML parsing appears simple in this case, it is much better to use a module for that as well, instead of a regex. The <a href=\"https://metacpan.org/pod/HTML::TreeBuilder\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a> is a bit of a standard for what you need here.  That module itself uses others, the workhorse being <a href=\"https://metacpan.org/pod/HTML::Element\" rel=\"nofollow noreferrer\">HTML::Element</a></p>\n\n<p>The following program works with one HTML file (<code>$source_file</code>), for which we need to find files under a given directory (<code>$dir</code>) which are not used in either an <code>href</code> attribute or a <code>src</code> attribute in <code>img</code> tag. These files need be deleted (that line is commented out).</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse File::Find::Rule;\nuse HTML::TreeBuilder;\n\nmy ($dir, $source_file) = @ARGV;    \ndie \"Usage: $0 dir-name file-name\\n\" if not $dir or not $source_file;\n\nmy @files = File::Find::Rule-&gt;file-&gt;in($dir);\n#say for @files;\n\nforeach my $file (@files) {\n    next if $file eq $source_file;  # not the file itself!\n    say \"Processing $file...\";\n    my $tree = HTML::TreeBuilder-&gt;new_from_file($source_file);\n\n    my $esc_file = quotemeta $file;    \n    my @in_href    = $tree-&gt;look_down(                'href', qr/$esc_file/ );\n    my @in_img_src = $tree-&gt;look_down( _tag =&gt; 'img', 'src',  qr/$esc_file/ );\n\n    if (@in_href == 0 and @in_img_src == 0) {\n        say \"\\tthis file is not used in 'href' or 'img-src' in $source_file\";\n        # To delete it uncomment the next line -- after all is fully tested\n        #unlink $file or warn \"Can't unlink $file: $!\";\n    }\n}\n</code></pre>\n\n<p>The statement that actually removes files, using <code>unlink</code>, is of course commented out. Enable that only once you have thoroughly checked the final version of the script, and have made backups.</p>\n\n<p>Notes</p>\n\n<ul>\n<li><p>Refine what files you are looking for by adding \"rules\" with <code>File::Find::Rule</code></p></li>\n<li><p>I use <a href=\"https://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> on filenames, which escapes all special characters in them; otherwise something may sneak in that would throw off the regex used by <code>look_down</code></p></li>\n<li><p>The code above simply parses twice through each file, assembling the lists of elements found for <code>href</code> attribute and then for <code>src</code> attribute (in <code>img</code> tag).  This can be done in one pass, by using <code>sub { }</code> specification for criteria in <code>look_down</code></p></li>\n<li><p>The script must be invoked with the directory name and the main HTML file name. Please change that for proper command line parsing, and more sophisticated use, with <a href=\"https://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">Getopt::Long</a></p></li>\n</ul>\n\n<p>A whole lot more can be fine tuned here, both with searching for files and in parsing HTML; there is a lot of information in modules' documentation, and yet more in many posts around this site.</p>\n\n<p>The code is tested for simple cases; please adjust to your realistic needs.</p>\n\n<hr>\n\n<p>Here is a full example of usage.</p>\n\n<p>I place this script (<code>script.pl</code>) in a directory with a file <code>I.html</code> and a directory <code>www</code>.</p>\n\n<p>The <code>I.html</code> file:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt; &lt;head&gt; &lt;title&gt;Test handling of unused files&lt;/title&gt; &lt;/head&gt;\n&lt;body&gt;\n&lt;a href=\"www/used.html\"&gt;Used file from www&lt;/a&gt;\n&lt;img src=\"www/images/used.jpg\" alt=\"no_image_really\"&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The directory <code>www</code> has files <code>used.html</code> and <code>another.html</code>, and a subdirectory <code>images</code> with files <code>used.jpg</code> and <code>another.jpg</code> in it, so altogether we have</p>\n\n<pre>\n.\n\u251c\u2500\u2500 script.pl\n\u251c\u2500\u2500 I.html\n\u2514\u2500\u2500 www\n    \u251c\u2500\u2500 used.html\n    \u251c\u2500\u2500 another.html\n    \u2514\u2500\u2500 images\n        \u251c\u2500\u2500 used.jpg\n        \u2514\u2500\u2500 another.jpg\n</pre>\n\n<p></p>\n\n<p>There is no need for any content in any of files in <code>www</code> for this test. This is only a minimal setup; I've added more files and directories, and tags to <code>I.html</code>, to test.</p>\n\n<p>Then I run <code>script.pl www I.html</code> and get the expected output.</p>\n"}], "owner": {"reputation": 11, "user_id": 11186946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c128c5fd0fb4d47b1c6f7e50f25bf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/11186946/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561684872, "creation_date": 1552330166, "last_edit_date": 1552385848, "question_id": 55108477, "link": "https://stackoverflow.com/questions/55108477/how-to-remove-a-file-if-it-is-not-used-by-another-file", "title": "How to remove a file if it is not used by another file", "body": "<p>I have to clean the directory and its subdirectories by removing all unused files. (A file is considered unused if it is not linked to in any\nof the HTML files or if it is not specified explicitly that this file is in use). A file can be linked in an HTML file by either <code>href</code> or <code>img src</code>. </p>\n\n<p>For example, I have an <code>I.html</code>,<code>1.html</code>,<code>2.html</code> and <code>1</code> folder. In <code>I.html</code> file, an <code>href</code> uses <code>1.html</code> and <code>1</code> directory, but <code>2.html</code> is not used by any other files. So, how can I remove the unused <code>2.html</code> file?</p>\n\n<pre><code>use strict;\nuse warnings;\nmy($path,$regexExpression) = @ARGV;\nmy $fileNames = \"data.txt\";\nmy @abc= ();\nif(not defined $path){\n  die \"File directory not given, please  try again \\n\"\n}\nprint \"added file \";  \nif (not defined $regexExpression) {  \n  $regexExpression=\"*\";\n  print \"--Taking default Regular Expression. \\n\"\n}\nif (defined $regexExpression) {\n  print \"The regular Expression : $regexExpression \\n\";\n  my $directorypathx= `pwd`;\n  my ($listofFileNames) = findFilesinDir($path); \n  my ($listofLinks) = readallHrefInaFile();\n  my ($listofImage) = readImageFile();\n  print $listofLinks; \n }\nsub findFilesinDir{\n  print \"inside subroutines \", $path,\"\\n\";\n  my($pathName) = @_;\n  my $fileNames =`find '$pathName' -name '$regexExpression' | sort -h -r &gt; $fileNames ` ;\n  if (-l $fileNames){\n    return $fileNames;\n  } \n }\nsub readallHrefInaFile{\n  my $getAllLinks = ` grep -Eo \"&lt;a .*href=.*&gt;\" $path*.html | uniq ` ;\n  push (@abc,$getAllLinks);\n}\n\nsub readImageFile{\n  print \"image files \\n\";\n  my $getAllImage = ` grep -Eo \"&lt;img .*src=.*&gt;\" $path*.html | uniq `;\n  push (@abc,$getAllImage);\n}\nprint @abc;\n</code></pre>\n\n<p>I.html</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Index&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;Index&lt;/h1&gt;\n\n    &lt;a href=\"1.html\"&gt;1&lt;/a&gt;\n\n    &lt;h1&gt;Downloads&lt;/h1&gt;\n\n    &lt;a href=\"downloads/s.zip\"&gt;Compressed craters&lt;/a&gt;\n\n    &lt;hr&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>1.html </p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;1&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;1&lt;/h1&gt;\n\n    &lt;img src=\"images/1-1.gif\" /&gt;\n    &lt;img src=\"images/1-2.gif\" /&gt;\n\n\n    &lt;hr&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["perl", "dns"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1553801039, "post_id": 55104183, "comment_id": 97531423, "body": "(unrelated comment: use <code>Class-&gt;new()</code> construct, and not <code>new Class()</code>, for reasons explained here: <a href=\"https://perldoc.perl.org/perlobj.html#Indirect-Object-Syntax\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlobj.html#Indirect-Object-Syntax</a>)"}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1553802247, "post_id": 55104183, "comment_id": 97532022, "body": "Thanks for the comment. I&#39;ll look into the link you provided. Actually, I just have copied that example from <code>Net::DNS</code>&#39;s documentation ..."}, {"owner": {"reputation": 1, "user_id": 2889554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/919c4b114340693789abd5572b00cba2?s=128&d=identicon&r=PG&f=1", "display_name": "user2889554", "link": "https://stackoverflow.com/users/2889554/user2889554"}, "edited": false, "score": 0, "creation_date": 1584480093, "post_id": 55104183, "comment_id": 107448819, "body": "did you manage to solve the problem? I think the example in the Net::DNS::Update documentation is wrong. I have filled an issue at CPAN here: <a href=\"https://rt.cpan.org/Ticket/Display.html?id=132170\" rel=\"nofollow noreferrer\">rt.cpan.org/Ticket/Display.html?id=132170</a>"}, {"owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "edited": false, "score": 0, "creation_date": 1584521078, "post_id": 55104183, "comment_id": 107458433, "body": "<i>did you manage to solve the problem?</i> Not really. I took the approach outlined at the end of my question (using improved code, but the idea is the same): I am explicitly reading the key from the key file and use it to construct the proper Tsig and Update objects."}], "owner": {"reputation": 2997, "user_id": 3239842, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/43fb8ed63990c7b890667c0a6c5e4674?s=128&d=identicon&r=PG&f=1", "display_name": "Binarus", "link": "https://stackoverflow.com/users/3239842/binarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1584520610, "creation_date": 1552314736, "last_edit_date": 1584520610, "question_id": 55104183, "link": "https://stackoverflow.com/questions/55104183/how-to-use-netdnsrrtsig-with-key-files-generated-by-ddns-confgen", "title": "How to use Net::DNS::RR:TSIG with key files generated by ddns-confgen?", "body": "<p>I have been using <code>nsupdate</code> for a long time in various scripts dealing with dynamic DNS zone updates without any issue. I have always used TSIG to authenticate the requests against the DNS server, where the keys have been generated by <code>ddns-confgen</code>. That means that I didn't use key <em>pairs</em> like those generated by <code>dnssec-keygen</code>; rather, the keys file format is like the following:</p>\n\n<pre><code>key \"ddns-key.my.domain.example\" {\n        algorithm hmac-sha512;\n        secret \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefijklmnopqrstuvwxyzabcdefghij==\";\n};\n</code></pre>\n\n<p>The respective zone configuration then contains:</p>\n\n<pre><code>update-policy {\n        grant ddns-key.my.domain.example name host.my.domain.example ANY;\n};\n</code></pre>\n\n<p>Now I have a more complicated task and try to solve it by a <code>Perl</code> script. I have studied the documentation of <code>Perl::DNS::Update</code>, <code>Perl::DNS</code> and <code>Perl::DNS:RR:TSIG</code> and have studied a lot of examples which should make the usage of those modules clear.</p>\n\n<p>However, each example I saw, when coming to signing a request via <code>TSIG</code>, used key files in the format <code>dnssec-keygen</code> produces, and not key files in the format I have. And indeed, something like</p>\n\n<pre><code>$o_Resolver = new Net::DNS::Resolver(nameservers =&gt; ['127.0.0.1']);\n$o_Update = new Net::DNS::Update('my.domain.example', 'IN');\n\n$o_Update -&gt; push(update =&gt; rr_del('host A'));\n$o_Update -&gt; push(update =&gt; rr_add('host 1800 IN A 192.0.2.1'));\n$o_Update -&gt; sign_tsig('/etc/bind/ddns-key.my.domain.example.key');\n\n$o_Reply = ($o_Resolver -&gt; send($o_Update));\n</code></pre>\n\n<p>does not work, producing the following message:</p>\n\n<pre><code>TSIG: unable to sign packet at /path/to/script.pl line 240.\nunknown type \"ddns-key.my.domain.example\" at /usr/local/share/perl/5.20.2/Net/DNS/RR.pm line 669.\n  file /etc/bind/ddns-key.my.domain.example.key line 1\n  at /usr/local/share/perl/5.20.2/Net/DNS/RR/TSIG.pm line 403.\n\nTSIG: unable to sign packet at /path/to/script.pl line 240.\n</code></pre>\n\n<p>I suppose I now have two options: Either use keys in the format <code>dnssec-keygen</code> produces, which seem to be directly usable with <code>Net::DNS</code> and its friends, or construct the TSIG key manually as shown in the docs:</p>\n\n<pre><code>my $key_name = 'tsig-key';\nmy $key      = 'awwLOtRfpGE+rRKF2+DEiw==';\n\nmy $tsig = new Net::DNS::RR(\"$key_name TSIG $key\");\n$tsig-&gt;fudge(60);\n\nmy $update = new Net::DNS::Update('example.com');\n$update-&gt;push( update     =&gt; rr_add('foo.example.com A 10.1.2.3') );\n$update-&gt;push( additional =&gt; $tsig );\n</code></pre>\n\n<p>[Of course, I wouldn't hard-code the key in my <code>Perl</code> script, but read it from the key file instead.]</p>\n\n<p>Switching to another key file format would mean changing the DNS server configuration, which is not an elegant solution. \"Manually\" reading the key files and then \"manually\" constructing the keys is not very satisfying either, hence the question:</p>\n\n<p>Did I understand correctly that it is not possible to use key files in the <code>ddns-confgen</code> format directly with <code>Net::DNS</code> and its sub-modules to <code>TSIG</code>-sign DNS update requests?</p>\n"}, {"tags": ["perl", "bioperl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1552306507, "post_id": 55101595, "comment_id": 96946025, "body": "What does the mentioned log contain?"}, {"owner": {"reputation": 803, "user_id": 7972789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ea6f880c5591a28bcf798395799e7d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy Almighty", "link": "https://stackoverflow.com/users/7972789/cindy-almighty"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1552308660, "post_id": 55101595, "comment_id": 96947205, "body": "The error message I posted is from the log. The installation itself is not verbose."}], "answers": [{"comments": [{"owner": {"reputation": 803, "user_id": 7972789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ea6f880c5591a28bcf798395799e7d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy Almighty", "link": "https://stackoverflow.com/users/7972789/cindy-almighty"}, "edited": false, "score": 1, "creation_date": 1552399487, "post_id": 55108639, "comment_id": 96988220, "body": "Works perfectly. Can you teach me to fish - how did you find which line causes error?"}], "tags": [], "owner": {"reputation": 2450, "user_id": 1186729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec301bbe6bfd4c849a29d715f6094745?s=128&d=identicon&r=PG", "display_name": "Denis Ibaev", "link": "https://stackoverflow.com/users/1186729/denis-ibaev"}, "is_accepted": true, "score": 2, "last_activity_date": 1552334448, "last_edit_date": 1552334448, "creation_date": 1552330871, "answer_id": 55108639, "question_id": 55101595, "link": "https://stackoverflow.com/questions/55101595/eponine-t-failure-as-a-test-for-biotoolsrunalignmentmuscle/55108639#55108639", "title": "Eponine.t failure as a test for Bio::Tools::Run::Alignment::Muscle", "body": "<p>You need to install Java for a successful <a href=\"https://fastapi.metacpan.org/source/CJFIELDS/BioPerl-Run-1.007003/t/Eponine.t\" rel=\"nofollow noreferrer\"><code>t/Eponine.t</code></a> test.</p>\n\n<p>There is an error in line:</p>\n\n<pre><code>open(my $PIPE,\"java -version 2&gt;&amp;1 |\") || exit;\n</code></pre>\n\n<p>If Java not installed the test just exits and the test plan fails.</p>\n"}], "owner": {"reputation": 803, "user_id": 7972789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ea6f880c5591a28bcf798395799e7d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy Almighty", "link": "https://stackoverflow.com/users/7972789/cindy-almighty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55108639, "answer_count": 1, "score": 1, "last_activity_date": 1552334448, "creation_date": 1552306265, "question_id": 55101595, "link": "https://stackoverflow.com/questions/55101595/eponine-t-failure-as-a-test-for-biotoolsrunalignmentmuscle", "title": "Eponine.t failure as a test for Bio::Tools::Run::Alignment::Muscle", "body": "<p>I am trying to install a Perl Module Bio::Tools::Run::Alignment::Muscle. I am using this docker image:</p>\n\n<pre><code>FROM ubuntu:16.04\n\nRUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections\nRUN apt-get update &amp;&amp; apt-get install -y software-properties-common\nRUN apt-add-repository multiverse\nRUN add-apt-repository restricted\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    wget \\\n    unzip \\\n    sudo \\\n    make \\\n    gcc \\\n    libdb-dev \\\n    libgd-dev \\\n    zlib1g-dev \\\n    libxml2-dev \\\n    libexpat1-dev \\\n    pkg-config \\\n    graphviz \\\n    libssl-dev \\\n    cpanminus\n\n# Dependencies\nRUN cpanm File::Sort Config::Any Bio::FeatureIO Bio::Cluster::SequenceFamily\n\n# Install problematic ::Muscle\nRUN cpanm Net::SSLeay LWP::Protocol::https Bio::Tools::Eponine\nRUN cpanm Bio::DB::EUtilities # Ensembl requirement\n</code></pre>\n\n<p>When I try to install with cpanm by entering the container and typing \"cpanm Bio::Tools::Run::Alignment::Muscle\", I get the following error:</p>\n\n<pre><code>    Test Summary Report\n    -------------------\n    t/Eponine.t                 (Wstat: 65280 Tests: 2 Failed: 0)\n      Non-zero exit status: 255\n      Parse errors: Bad plan.  You planned 7 tests but ran 2.\n    Files=70, Tests=2068, 15 wallclock secs ( 0.32 usr  0.09 sys + 12.22 cusr  1.33 csys = 13.96 CPU)\n    Result: FAIL\n    Failed 1/70 test programs. 0/2068 subtests failed.\n-&gt; FAIL Installing Bio::Tools::Run::Alignment::Muscle failed. See /root/.cpanm/work/1552304305.41131/build.log for details. Retry with --force to force install it.\n</code></pre>\n\n<p>Is there a way to debug this, and check if this is safe to ignore?</p>\n"}, {"tags": ["arrays", "perl", "csv"], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 0, "creation_date": 1552315111, "post_id": 55101342, "comment_id": 96951360, "body": "Thank you very much for your response.The second array when I am printing using scalar is giving count as 3. It should give 5 (including NULL and non_NULL values) Why It is giving count as 3. Do you have some idea??-@Dave Cross"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 1, "creation_date": 1552317804, "post_id": 55101342, "comment_id": 96953104, "body": "@rikki: Yes, I have an idea. If you read the <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">documentation for <code>split()</code></a>, you&#39;ll see that it actually takes three arguments and the third one (the limit) is optional and, in fact, rarely used. If the limit is omitted then trailing empty fields are dropped from the list returned by the function. You could explicitly give it a limit of 5, but a more flexible solution would be to use -1 (as then <code>split()</code> splits into the maximum number of fields and doesn&#39;t drop empty ones)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "edited": false, "score": 1, "creation_date": 1552317857, "post_id": 55101342, "comment_id": 96953149, "body": "@rikki: There&#39;s a lot of very good documentation available for Perl. But it&#39;s all a bit of a waste if people don&#39;t read it :-)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1552324265, "last_edit_date": 1552324265, "creation_date": 1552305382, "answer_id": 55101342, "question_id": 55100935, "link": "https://stackoverflow.com/questions/55100935/not-able-to-divide-each-row-of-a-csv-file-in-the-form-of-array-using-perl/55101342#55101342", "title": "Not able to divide each row of a csv file in the form of array using perl", "body": "<p>Have a look at <a href=\"https://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\">perldoc length</a>. It says this:</p>\n\n<blockquote>\n  <p><strong>length EXPR</strong></p>\n  \n  <p><strong>length</strong></p>\n  \n  <p>Returns the length in <em>characters</em> of the value of\n  EXPR. If EXPR is omitted, returns the length of <code>$_</code>. If EXPR is\n  undefined, returns <code>undef</code>.</p>\n  \n  <p>This function cannot be used on an entire array or hash to find out\n  how many elements these have. For that, use <code>scalar @array</code> and <code>scalar\n  keys %hash</code>, respectively.</p>\n  \n  <p>Like all Perl character operations, length normally deals in logical\n  characters, not physical bytes. For how many bytes a string encoded as\n  UTF-8 would take up, use <code>length(Encode::encode('UTF-8', EXPR))</code> (you'll\n  have to <code>use Encode</code> first). See Encode and perlunicode.</p>\n</blockquote>\n\n<p>In particular, the bit that says \"This function cannot be used on an entire array or hash to find out how many elements these have. For that, use <code>scalar @array</code> and <code>scalar keys %hash</code>, respectively\".</p>\n\n<p>So you're using the wrong approach here. Instead of <code>say length(@array)</code>, you need <code>say scalar(@array)</code>.</p>\n\n<p>To explain the results you're getting. <code>length()</code> expects to be given a scalar value (a string) to measure. So it treats your array as a scalar (effectively adding an invisible call to <code>scalar()</code>) and gets back the number of elements in the array (which is \"5\") and <code>length()</code> then tells you the number of elements in that string - which is 1.</p>\n\n<p>It's also worth pointing out that you don't need to keep track of your own <code>$row_no</code> variable. Perl has a built-in variable called <code>$.</code> which contains the current record number.</p>\n\n<p>Using that knowledge (and adding little whitespace) gives us something like this:</p>\n\n<pre><code>while (my $row = &lt;$fi&gt;) {\n  chomp($row);\n\n  $row =~ s/\\A\\s+//g;\n  $row =~s/\\R//g;\n\n  #say $row;\n\n  if ($. == 0) {\n    #say $row;\n    my @name_initial = split(/,/, $row);\n    say scalar(@name_initial);\n    say @name_initial;\n  } elsif ($. == 1) {\n    #say $row;\n    @data_type_initial = split(/,/, $row);\n    say scalar(@data_type_initial);\n    say @data_type_initial;\n  }\n}\n</code></pre>\n\n<p><strong>Update:</strong> You sneaked a couple of extra questions in at the end of this one. I'd suggest that you raise those separately.</p>\n"}], "owner": {"reputation": 401, "user_id": 10004688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lURyY.jpg?s=128&g=1", "display_name": "rikki", "link": "https://stackoverflow.com/users/10004688/rikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552324265, "creation_date": 1552303963, "question_id": 55100935, "link": "https://stackoverflow.com/questions/55100935/not-able-to-divide-each-row-of-a-csv-file-in-the-form-of-array-using-perl", "title": "Not able to divide each row of a csv file in the form of array using perl", "body": "<p>I am stucked in a problem wherein I am parsing a csv file. The CSV file looks like-</p>\n\n<pre><code>CPU Name,DISABLE,Memory,Encoding,Extra Encoding\n,b,d,,\nString1,YES,1TB,Enabled,Enabled\nString2,NO,1TB,Enabled,Enabled\nString3,YES,1TB,Enabled,Enabled\n</code></pre>\n\n<p>I want to capture the first two rows in two different arrays. The code that I am using to do it is-</p>\n\n<pre><code>my $row_no =0;\nwhile(my $row=&lt;$fi&gt;){\nchomp($row);\n$row=~ s/\\A\\s+//g;\n$row=~s/\\R//g;\n#say $row;\nif($row_no==0)\n{\n    #say $row;\n    my @name_initial = split(',',$row);\n    say length(@name_initial);\n    say @name_initial;\n}\nelsif($row_no==1)\n{\n    #say $row;\n    @data_type_initial =split(',',$row);\n    say length(@data_type_initial);\n    say @data_type_initial;\n}\n$row_no++;\n}\n</code></pre>\n\n<p>Now I formed two arrays from topmost two lines in file (@name_initial and @data_type_initial respectively).When I am printing these array I can see all the 5 values but when I am printing the length of array it is showing length of each array as 1. When I am printing the element using index of arrays I find each element in place then why it is showing length as 1. Also second array which is formed from second line of csv file is printed as \"bd\". All the null values are gone and although it is containing two values 'b' and 'd'. Its length is printed as 1. </p>\n\n<p>I want to convert the row of csv file in array with all the null and non_NULL values so that I can iterate on the array elements and can give conditions based on null and non null values.How can I do that???</p>\n"}, {"tags": ["perl", "utf-8", "cgi"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4156823, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BEEC1kJ9Al4/AAAAAAAAAAI/AAAAAAAAACk/SX94i2b8gWs/photo.jpg?sz=128", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4156823/vijay"}, "edited": false, "score": 0, "creation_date": 1552250246, "post_id": 55091973, "comment_id": 96928885, "body": "Thanks @amon the display part works like you said.  But when I try to find the file in the local system with UTF-8 filename of \u03a3\u03c5\u03c3\u03c4\u03b7\u0301\u03bc\u03b1\u03c4\u03b1_\u0391\u03bd\u03b9\u0301\u03c7\u03bd\u03b5\u03c5\u03c3\u03b7\u03c2_\u0395\u03b9\u03c3.pdf (which is Intrusion Detection System document in Greek) - it seems like the byte string from decode_entities does not match the filename!  It says file does not exist either for &quot;-f&quot; condition or for using &quot;open&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87, "user_id": 4156823, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BEEC1kJ9Al4/AAAAAAAAAAI/AAAAAAAAACk/SX94i2b8gWs/photo.jpg?sz=128", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4156823/vijay"}, "edited": false, "score": 2, "creation_date": 1552254252, "post_id": 55091973, "comment_id": 96929892, "body": "@Vijay, Comments are not the place to ask new questions. Don&#39;t forget to include the specific contents of the variable passed to <code>open</code>, and the specific file name as returned by <code>readdir</code>. You can use <code>sprintf &quot;%vX&quot;, $var</code> for that."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1552249029, "creation_date": 1552249029, "answer_id": 55091973, "question_id": 55091457, "link": "https://stackoverflow.com/questions/55091457/perl-utf8-in-cgi-problems/55091973#55091973", "title": "Perl UTF8 in CGI problems", "body": "<p>When interpreting a HTML document, the browser needs to know the encoding. The default encoding as per the HTML standard is not UTF-8. Since the browser is assuming the wrong encoding, it reads garbage.</p>\n\n<p>Instead, you should specify the encoding explicitly, such as by printing a meta tag</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;meta charset=\"utf-8\"&gt;\n</code></pre>\n\n<p>or by including the encoding in the content type:</p>\n\n<pre><code>Content-type: text/html; charset=utf-8\n</code></pre>\n\n<p>Here, using the content type would seem most appropriate.</p>\n"}], "owner": {"reputation": 87, "user_id": 4156823, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BEEC1kJ9Al4/AAAAAAAAAAI/AAAAAAAAACk/SX94i2b8gWs/photo.jpg?sz=128", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4156823/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 55091973, "answer_count": 1, "score": 0, "last_activity_date": 1552249029, "creation_date": 1552245764, "question_id": 55091457, "link": "https://stackoverflow.com/questions/55091457/perl-utf8-in-cgi-problems", "title": "Perl UTF8 in CGI problems", "body": "<p>I have a very simple Perl script which works right on the terminal but when run as a CGI script it produces garbage.  The script basically take a HTML entities encoded data and converts it to print it. I have tried all the different setup like using \"Encode\" to change the output and set the STDOUT to utf8 mode and it does not help. I have also tried to change the environment of CGI to see if things will work like the terminal environment.  Still no luck. </p>\n\n<p>Here is the script</p>\n\n<pre><code>#!/usr/bin/perl \nuse HTML::Entities qw(encode_entities_numeric decode_entities);\nuse Encode qw/encode decode/;\nbinmode(STDOUT, \":utf8\");\n#$ENV{'PERL_UNICODE'} = 'D';\n#$ENV{'LANG'} = 'en_US.UTF-8';\n#$ENV{'TERM'} = 'vt100';\n#$ENV{'SHELL'} = '/bin/bash';\n#binmode(STDOUT, \":utf8\");\nprint \"Content-type: text/html\\n\\n\";\nmy $y = decode_entities(\"&amp;#x3A3;&amp;#x3C5;&amp;#x3C3;&amp;#x3C4;&amp;#x3B7;&amp;#x301;&amp;#x3BC;&amp;#x3B1;&amp;#x3C4;&amp;#x3B1;_&amp;#x\n391;&amp;#x3BD;&amp;#x3B9;&amp;#x301;&amp;#x3C7;&amp;#x3BD;&amp;#x3B5;&amp;#x3C5;&amp;#x3C3;&amp;#x3B7;&amp;#x3C2;_&amp;#x395;&amp;#x3B9;&amp;#x3C3;.pd\nf\");\n#print encode(\"UTF8\",$y);\nprint $y;\n</code></pre>\n\n<p>The output on terminal it is clean like\nperl test.pl\nContent-type: text/html</p>\n\n<p>\u03a3\u03c5\u03c3\u03c4\u03b7\u0301\u03bc\u03b1\u03c4\u03b1_\u0391\u03bd\u03b9\u0301\u03c7\u03bd\u03b5\u03c5\u03c3\u03b7\u03c2_\u0395\u03b9\u03c3.pdf </p>\n\n<p>But on the CGI print it is garbled\n\u00ce\u00a3\u00cf\u2026\u00cf\u0192\u00cf\u201e\u00ce\u00b7\u00cc\u00ce\u00bc\u00ce\u00b1\u00cf\u201e\u00ce\u00b1_\u00ce\u2018\u00ce\u00bd\u00ce\u00b9\u00cc\u00cf\u2021\u00ce\u00bd\u00ce\u00b5\u00cf\u2026\u00cf\u0192\u00ce\u00b7\u00cf\u201a_\u00ce\u2022\u00ce\u00b9\u00cf\u0192.pdf</p>\n\n<p>I am sort of stuck as I cannot find any simple way to solve this.  Tried  \"encode_utf8\" and utf8::upgrade of the variable but still no luck.  Anyone's experience here will help a lot!</p>\n\n<p>Thanks\nVijay</p>\n"}, {"tags": ["perl", "https"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552208890, "post_id": 55085951, "comment_id": 96917298, "body": "Net::Curl::Multi would be so much faster (but you lose the familiar LWP interface and portability to Windows)"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1552222060, "post_id": 55085951, "comment_id": 96920519, "body": "<i>&quot;The system is up to date.&quot;</i> - whatever this exactly means regarding the versions of the software you are using. Please include the versions of LWP, LWP::Protocol::https, IO::Socket::SSL, Net::SSLeay and openssl you are using into the question - see <a href=\"https://pastebin.com/Y5MD2auR\" rel=\"nofollow noreferrer\">here</a> for a script to do this. Also please run your code with <code>perl -MIO::Socket::SSL=debug9 program.pl</code> and add the output to your question. And please try it also with a simple LWP::UserAgent instead of LWP::Parallel::UserAgent."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552242845, "post_id": 55085951, "comment_id": 96926639, "body": "My suggestion would be to use a user agent designed for parallelism to begin with, such as <a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\">Mojo::UserAgent</a> or <a href=\"https://metacpan.org/pod/Net::Async::HTTP\" rel=\"nofollow noreferrer\">Net::Async::HTTP</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552253909, "post_id": 55085951, "comment_id": 96929802, "body": "Re &quot;<i>The system is up to date.</i>&quot;, That&#39;s not true. The call to <code>get_cipher</code> isn&#39;t on line 119 of the latest version of LWP::Protocol::https"}, {"owner": {"reputation": 113, "user_id": 3817605, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1404750692/picture?type=large", "display_name": "user3817605", "link": "https://stackoverflow.com/users/3817605/user3817605"}, "edited": false, "score": 0, "creation_date": 1552294865, "post_id": 55085951, "comment_id": 96939636, "body": "I installed all modules using cpan on an up to date Ubuntu. I don&#39;t know if cpan installs not updated modules or so on. These are the installed versions:  LWP 6.36 LWP::Protocol::https 6.07 IO::Socket::SSL 2.056 Net::SSLeay 1.84"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 3817605, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1404750692/picture?type=large", "display_name": "user3817605", "link": "https://stackoverflow.com/users/3817605/user3817605"}, "edited": false, "score": 0, "creation_date": 1552294678, "post_id": 55091396, "comment_id": 96939533, "body": "Hello Steffen, by removing the non-blocking support the code still not works. I receive always the error Sysread Error: Resource temporarily unavailable  I will try to use a different approach"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 113, "user_id": 3817605, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1404750692/picture?type=large", "display_name": "user3817605", "link": "https://stackoverflow.com/users/3817605/user3817605"}, "edited": false, "score": 0, "creation_date": 1552297047, "post_id": 55091396, "comment_id": 96940782, "body": "@user3817605: I would say that the module is broken regarding HTTPS. It likely assumes that non-blocking SSL works like non-blocking TCP - which it doesn&#39;t."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1552245413, "creation_date": 1552245413, "answer_id": 55091396, "question_id": 55085951, "link": "https://stackoverflow.com/questions/55085951/perl-unable-to-use-lwpparalleluseragent-for-https-websites/55091396#55091396", "title": "Perl: unable to use LWP::Parallel::UserAgent for HTTPS websites", "body": "<p>From your code:    </p>\n\n<pre><code>$pua-&gt;nonblock('true');\n</code></pre>\n\n<p>When looking at the code of LWP::Parallel::UserAgent it looks like non-blocking support for HTTPS is totally broken: <code>https</code> support is implement in LWP::Parallel::Protocol::https which derives from LWP::Parallel::Protocol::http for <a href=\"https://metacpan.org/source/MSOUTH/ParallelUserAgent-2.62/lib/LWP/Parallel/Protocol/https.pm#L31\" rel=\"nofollow noreferrer\">doing the actual connection</a>. The relevant code in <a href=\"https://metacpan.org/source/MSOUTH/ParallelUserAgent-2.62/lib/LWP/Parallel/Protocol/http.pm#L100\" rel=\"nofollow noreferrer\">sub _connect</a>:</p>\n\n<pre><code>103     unless ($nonblock) {\n104       # perform good ol' blocking behavior\n105       #\n106       # this method inherited from LWP::Protocol::http\n107       $socket = $self-&gt;_new_socket($host, $port, $timeout);\n108       # currently empty function in LWP::Protocol::http\n109       # $self-&gt;_check_sock($request, $socket);\n110     } else {\n111       # new non-blocking behavior\n...\n116       $socket =\n117         IO::Socket::INET-&gt;new(Proto =&gt; 'tcp', # Timeout =&gt; $timeout,\n118                               $self-&gt;_extra_sock_opts ($host, $port));\n</code></pre>\n\n<p>One can see that for the (default) blocking case the code uses the functionality of <code>LWP::Protocol::http</code>, but for the non-blocking case it directly uses <code>IO::Socket::INET</code> - and not <code>IO::Socket::SSL</code> for HTTPS. But LWP::Protocol::http (which is used later) actually expects a SSL socket and tries to call <code>get_cipher</code> on it. This results in the error you see:</p>\n\n<blockquote>\n  <p>Can't locate object method \"get_cipher\" via package \"IO::Socket::INET\" at /usr/share/perl5/LWP/Protocol/https.pm line 119</p>\n</blockquote>\n\n<p>When not using non-blocking support the code seems to work instead. </p>\n\n<p>As for HTTPS in general in this module see <a href=\"https://metacpan.org/source/MSOUTH/ParallelUserAgent-2.62/README.SSL\" rel=\"nofollow noreferrer\">README.SSL</a>:</p>\n\n<pre><code> ** DISCLAIMER: https support is pretty buggy as of now. i haven't **\n ** had time to test much of it, so feel free to see if it works   **\n ** for you, but don't expect it to :-)  \n</code></pre>\n\n<p>In other words: you should probably use a different module to get reliable support for HTTPS.</p>\n"}], "owner": {"reputation": 113, "user_id": 3817605, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1404750692/picture?type=large", "display_name": "user3817605", "link": "https://stackoverflow.com/users/3817605/user3817605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552245413, "creation_date": 1552207526, "question_id": 55085951, "link": "https://stackoverflow.com/questions/55085951/perl-unable-to-use-lwpparalleluseragent-for-https-websites", "title": "Perl: unable to use LWP::Parallel::UserAgent for HTTPS websites", "body": "<p>I'm unable to use perl module LWP::Parallel::UserAgent for https websites. The following is the code I use:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse LWP::Parallel::UserAgent qw(:CALLBACK);\nuse HTTP::Request; \n\nmy $BrowserName = \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.85 Safari/537.36\";\n\nmy $pua = LWP::Parallel::UserAgent-&gt;new();\n$pua-&gt;agent( $BrowserName );\n$pua-&gt;nonblock('true');\n$pua-&gt;in_order  (1);\n$pua-&gt;duplicates(0);\n$pua-&gt;timeout   (10);\n$pua-&gt;redirect  (2);\n$pua-&gt;remember_failures ( 1 );\n\n$url = \"https://www.squeezemind.it\";\n\nmy $res = $pua-&gt;register( HTTP::Request-&gt;new('GET', $url), \\&amp;gestione_risposta, 4096 );\n\nmy $entries = $pua-&gt;wait();\n\n# Leggo le risposte\nforeach (keys %$entries) {\n  my $res = $entries-&gt;{$_}-&gt;response;\n  print \"\\n\\nAnswer for '\",$res-&gt;request-&gt;url, \"' was \", $res-&gt;code,\": \", $res-&gt;message;  \n}\n\n\nsub gestione_risposta {\n\n  my($html_content, $response, $protocol, $entry) = @_;\n\n  if( !$response-&gt;is_success || $response-&gt;code != 200 ) { return C_ENDCON; }  \n\n  if( length($html_content) ) {    \n    # Bla Bla\n  }\n\n  return undef; \n\n}\n</code></pre>\n\n<p>It <strong>works well for http</strong> but if you try to change $url with a https website it fails.</p>\n\n<p>For <a href=\"https://www.squeezemind.it\" rel=\"nofollow noreferrer\">https://www.squeezemind.it</a>:</p>\n\n<p>Error code: 500\nMessage: <strong>Can't locate object method \"get_cipher\" via package \"IO::Socket::INET\" at /usr/share/perl5/LWP/Protocol/https.pm line 119</strong></p>\n\n<p>For <a href=\"https://www.stackoverflow.com\">https://www.stackoverflow.com</a>:</p>\n\n<p>Error code: 402\nMessage: <strong>Unexpected EOF while reading response</strong></p>\n\n<p>The system is up to date. Suggestions?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "perl-module", "moose"], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1552214208, "post_id": 55085857, "comment_id": 96918558, "body": "Yeah.  I was porting some other code to &quot;Moose-ify&quot; it.  I restructured the code while I was porting it, so it turns out that the fix was really pretty quick.  Thanks."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1552206723, "creation_date": 1552206723, "answer_id": 55085857, "question_id": 55085627, "link": "https://stackoverflow.com/questions/55085627/moose-variable-names-may-not-contain-at/55085857#55085857", "title": "Moose Variable names may not contain :: at", "body": "<p><code>override</code>'s first argument must be the (unqualified) method name of an inherited method.</p>\n\n<p><code>emitEvent::ENOTE::Final</code> is not an acceptable Perl method name because Perl would take that to mean the method named <code>Final</code> in package <code>emitEvent::ENOTE</code>. If you fooled something in creating a method called that, you should fix that.</p>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 55085857, "answer_count": 1, "score": 0, "last_activity_date": 1552206723, "creation_date": 1552204373, "question_id": 55085627, "link": "https://stackoverflow.com/questions/55085627/moose-variable-names-may-not-contain-at", "title": "Moose Variable names may not contain :: at", "body": "<p>So I hit this weird error.</p>\n\n<blockquote>\n  <p>Variable names may not contain :: at\n  .../perl5/lib/perl5/x86_64-cygwin-threads-multi/Class/MOP/Package.pm</p>\n</blockquote>\n\n<p>The code that triggers it is:</p>\n\n<pre><code>override 'emitEvent::ENOTE::Final' =&gt; sub {\nmy ($self, $e) = @_;\nmy ($rval);\n\n$rval = super();\n\n\nreturn($rval);\n};\n</code></pre>\n\n<p>I found this link regarding a bug: <a href=\"http://codeverge.com/perl.perl5.porters/a-very-old-bug-in-safe.pm/2018166\" rel=\"nofollow noreferrer\">http://codeverge.com/perl.perl5.porters/a-very-old-bug-in-safe.pm/2018166</a></p>\n\n<p>Is this related?</p>\n\n<p>If I take the '::' out, it goes away, but really messes with the way I've been naming things, so if there's a workaround, I'd appreciate it.</p>\n\n<p>-E</p>\n"}, {"tags": ["javascript", "perl"], "answers": [{"tags": [], "owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "is_accepted": true, "score": 1, "last_activity_date": 1552191197, "last_edit_date": 1552191197, "creation_date": 1552190810, "answer_id": 55084338, "question_id": 55084270, "link": "https://stackoverflow.com/questions/55084270/convert-this-code-snippet-from-perl-to-javascript/55084338#55084338", "title": "Convert this code snippet from Perl to Javascript", "body": "<p>Basically the code you posted is trying to match the given string string against <code>different regexes</code> and if it match 3 or more regex we have in <code>reg variable</code> it should give us <code>success</code> as output else it should give use <code>failure</code> as result.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let regs = [/[A-Z]+/g,/[a-z]+/g,/\\d+/g,/[^A-Za-z0-9]+/g]\r\nlet mincount = 3;\r\n\r\nlet findSuccess = (regs,str) =&gt; {\r\n  let count = 0;\r\n  regs.forEach(e =&gt; count+= e.test(str) ? 1 : 0)\r\n\r\n  count &gt;= mincount ? console.log('successful')\r\n                    : console.log('unsuccessful')\r\n}\r\n\r\nfindSuccess(regs,'hello 123 @ Hello')\r\nfindSuccess(regs,'Hello')</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 3895, "user_id": 1382828, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TnrmQ.jpg?s=128&g=1", "display_name": "CXJ", "link": "https://stackoverflow.com/users/1382828/cxj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 55084338, "answer_count": 1, "score": 0, "last_activity_date": 1552191197, "creation_date": 1552189924, "question_id": 55084270, "link": "https://stackoverflow.com/questions/55084270/convert-this-code-snippet-from-perl-to-javascript", "title": "Convert this code snippet from Perl to Javascript", "body": "<p>I know many programming languages, but one I don't know is Perl.  How would I implement the following Perl snippet in Javascript?</p>\n\n<pre><code>my $minGroups = 3;\nmy %rexGroups = (\n        upper =&gt; qr/[A-Z]/,\n        lower =&gt; qr/[a-z]/,\n        digit =&gt; qr/[0-9]/,\n        other =&gt; qr/^[A-Za-z0-9]/,\n);\nmy $nGroups = 0;\nfor my $re (keys %rexGroups) {\n        ++$nGroups if ( $pass =~ m/$rexGroups{$re}/ );\n}\nif ( $nGroups &lt; $minGroups ) {\n        # indicate error\n}\n# indicate success\n</code></pre>\n"}, {"tags": ["database", "perl", "text"], "comments": [{"owner": {"reputation": 6928, "user_id": 1015385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc84a03227c566697c4a16b2e9f8782?s=128&d=identicon&r=PG", "display_name": "JRFerguson", "link": "https://stackoverflow.com/users/1015385/jrferguson"}, "edited": false, "score": 2, "creation_date": 1552134734, "post_id": 55076803, "comment_id": 96901176, "body": "The error is self-explanatory!"}, {"owner": {"reputation": 1, "user_id": 11176524, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/53f15f309d5537aab7ff97d3728f119e?s=128&d=identicon&r=PG", "display_name": "LoopBack", "link": "https://stackoverflow.com/users/11176524/loopback"}, "edited": false, "score": 0, "creation_date": 1552152215, "post_id": 55076803, "comment_id": 96907067, "body": "It might be, that you have a hidden fail in usuage. Sometimes the things are much more simple. Are you owner of file? Will it created? What results from giving a absolute or relative path like / or ./ ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552158805, "post_id": 55076803, "comment_id": 96907840, "body": "you are missing a comma after <code>PASSWORD</code> in this statement: <code>open PASSWORD &quot;&gt;$name.pswrd&quot;;</code>. See <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>perldoc open</code></a> for more information"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10937775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b542e3a2940ed0cf3b657dacaf8a977?s=128&d=identicon&r=PG&f=1", "display_name": "Xedrian", "link": "https://stackoverflow.com/users/10937775/xedrian"}, "edited": false, "score": 0, "creation_date": 1552142919, "post_id": 55077890, "comment_id": 96903325, "body": "I also have in error at line 30 open(my $pswrd , $filename) or die &quot;Could not open file &#39;$filename&#39; $!&quot;; and that is Could not open file &#39;&#39; No such file or directory at database-txt.pl line 30. Can you help me with it please . I am new to perl"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1552152411, "post_id": 55077890, "comment_id": 96906055, "body": "OP forgot a comma. (And it&#39;s poor practice to use bareword file handles and the two argument form of <code>open</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552169165, "post_id": 55077890, "comment_id": 96910555, "body": "No. The parenthesis are not required."}], "tags": [], "owner": {"reputation": 1, "user_id": 11175708, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/53f15f309d5537aab7ff97d3728f119e?s=128&d=identicon&r=PG", "display_name": "LoopBack", "link": "https://stackoverflow.com/users/11175708/loopback"}, "is_accepted": false, "score": -3, "last_activity_date": 1552138589, "creation_date": 1552138589, "answer_id": 55077890, "question_id": 55076803, "link": "https://stackoverflow.com/questions/55076803/i-got-an-error-in-perl-missing-comma-after-first-argument-to-open-function/55077890#55077890", "title": "I got an error in Perl Missing comma after first argument to open function", "body": "<p>You forgot the ( )</p>\n\n<p>open ( NAME, \">$name.pswrd\" );</p>\n\n<p>close ( NAME );</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1552180642, "creation_date": 1552180642, "answer_id": 55083590, "question_id": 55076803, "link": "https://stackoverflow.com/questions/55076803/i-got-an-error-in-perl-missing-comma-after-first-argument-to-open-function/55083590#55083590", "title": "I got an error in Perl Missing comma after first argument to open function", "body": "<pre><code>open NAME \"$a.nme\";\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>open NAME, \"$a.nme\";\n</code></pre>\n\n<p>As an aside, I strongly recommend that you have your code <a href=\"https://codereview.stackexchange.com/\">reviewed</a>. There are numerous improvements that can be made.</p>\n"}], "owner": {"reputation": 11, "user_id": 10937775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b542e3a2940ed0cf3b657dacaf8a977?s=128&d=identicon&r=PG&f=1", "display_name": "Xedrian", "link": "https://stackoverflow.com/users/10937775/xedrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 55083590, "answer_count": 2, "score": -1, "last_activity_date": 1552180642, "creation_date": 1552130431, "last_edit_date": 1552158509, "question_id": 55076803, "link": "https://stackoverflow.com/questions/55076803/i-got-an-error-in-perl-missing-comma-after-first-argument-to-open-function", "title": "I got an error in Perl Missing comma after first argument to open function", "body": "<p>I am trying to make a database perl program . But i get this errors :</p>\n\n<pre><code>Missing comma after first argument to open function at database-txt.pl line 15, near \"\"&gt;$name.pswrd\";\"\nMissing comma after first argument to open function at database-txt.pl line 25, near \"\"$a.nme\";\"\nMissing comma after first argument to open function at database-txt.pl line 30, near \"\"$a.pswrd\";\"\n</code></pre>\n\n<p>Thanks!</p>\n\n<pre><code>sub change {\n    my($a) = @_;\n    chdir \"$a\" or die \"ERROR: $!\";\n}\nprint \"Do you want to register or log-in? \"; chomp($a=&lt;STDIN&gt;);\nif($a =~ /register/i) {\n      print \"What is your name: \"; chomp($name=&lt;STDIN&gt;);\n      print \"What is your password: \"; chomp($password=&lt;STDIN&gt;);\n      change \"name\";\n      open NAME, \"&gt;$name.nme\";\n      print NAME \"$name\";\n      close NAME;\n      change \"..\";\n      change \"password\";\n      open PASSWORD \"&gt;$name.pswrd\";\n      print PASSWORD \"$password\";\n      close PASSWORD;\n      change \"..\";\n      print \"Complete.\\n\";\n}\nelse {\n      print \"Name: \"; chomp($a=&lt;STDIN&gt;);\n      print \"Password: \"; chomp($b=&lt;STDIN&gt;);\n      change \"name\";\n      open NAME \"$a.nme\";\n      $c=&lt;NAME&gt;;\n      close NAME;\n      change \"..\";\n      change \"password\";\n      open PASSWORD \"$a.pswrd\";\n      $d=&lt;PASSWORD&gt;;\n      PASSWORD;\n      \"..\";\n}\nif($a =~ /$c/ and $b =~ /$d/) {\n      print \"Log-in successful!\\n\";\n      sleep(2);\n      print  \"Hello, $a!\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "ssl", "lwp"], "comments": [{"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1552136606, "post_id": 55074946, "comment_id": 96901647, "body": "The problem doesn&#39;t have a relation with the module, I think it may be related to your OS that is windows, most of this type of errors are generated when using Windows (mostly when using threads)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552162746, "post_id": 55074946, "comment_id": 96908871, "body": "That message indicates a bug in an XS module such Net::SSLeay. Specifically, it&#39;s a bug related to thread support (or lack thereof). Contrary to what the previous comment said, there&#39;s no reason to believe it&#39;s Windows-specific at this point."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552162854, "post_id": 55074946, "comment_id": 96908910, "body": "See <a href=\"https://metacpan.org/pod/Net::SSLeay#Using-Net::SSLeay-in-multi-threaded-applications\" rel=\"nofollow noreferrer\">Using Net::SSLeay in multi-threaded applications</a>."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1552518695, "post_id": 55074946, "comment_id": 97045423, "body": "Please provide the versions of IO::Socket::SSL, Net::SSLeay and openssl used by this build of Perl - see <a href=\"https://pastebin.com/Y5MD2auR\" rel=\"nofollow noreferrer\">pastebin.com/Y5MD2auR</a> for a script to help you with this."}, {"owner": {"reputation": 11, "user_id": 11174544, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qwzW5ADc3V4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rckWcwyHGPwrIc1bkRbOJPUPnGa3Q/mo/photo.jpg?sz=128", "display_name": "Sam Nodes", "link": "https://stackoverflow.com/users/11174544/sam-nodes"}, "edited": false, "score": 0, "creation_date": 1552547746, "post_id": 55074946, "comment_id": 97052928, "body": "Thanks. I ran your script which gave LWP 6.08 LWP::Protocol::https 6.06 IO::Socket::SSL 1.997. I have reported the bug to ActiveState. I am running Windows 10 with all updates installed."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1552548678, "post_id": 55074946, "comment_id": 97053371, "body": "@SamNodes: The script should have reported the versions for Net::SSLeay and openssl too, but you did not include these in your comment. Anyway, these looks like pretty old software versions too me. For example IO::Socket::SSL 1.997 was released nearly 5 years ago and there were lots of bug fixes and improvements since then. Maybe you should switch to Strawberry Perl which has way newer software versions."}, {"owner": {"reputation": 11, "user_id": 11174544, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qwzW5ADc3V4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rckWcwyHGPwrIc1bkRbOJPUPnGa3Q/mo/photo.jpg?sz=128", "display_name": "Sam Nodes", "link": "https://stackoverflow.com/users/11174544/sam-nodes"}, "edited": false, "score": 0, "creation_date": 1552564850, "post_id": 55074946, "comment_id": 97062922, "body": "Apologies - I didn&#39;t cut/paste enough. Net::SSLeay 1.84 openssl 1010008f - OpenSSL 1.1.0h  27 Mar 2018. I&#39;ll certainly look into Strawberry Perl."}, {"owner": {"reputation": 11, "user_id": 11174544, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qwzW5ADc3V4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rckWcwyHGPwrIc1bkRbOJPUPnGa3Q/mo/photo.jpg?sz=128", "display_name": "Sam Nodes", "link": "https://stackoverflow.com/users/11174544/sam-nodes"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1552579393, "post_id": 55074946, "comment_id": 97073482, "body": "I&#39;ve installed Strawberry perl which has newer versions of all the packages in @SteffenUllrich&#39;s list and my script works! I had to restart Apache web server before cgi-bin scripts using get() would work properly but otherwise all is good. Thanks."}], "owner": {"reputation": 11, "user_id": 11174544, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qwzW5ADc3V4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rckWcwyHGPwrIc1bkRbOJPUPnGa3Q/mo/photo.jpg?sz=128", "display_name": "Sam Nodes", "link": "https://stackoverflow.com/users/11174544/sam-nodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1171, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552115517, "creation_date": 1552115517, "question_id": 55074946, "link": "https://stackoverflow.com/questions/55074946/issue-with-lwpsimple-and-https-when-upgrading-to-activeperl-v5-26-3", "title": "Issue with LWP::Simple and https when upgrading to ActivePerl v5.26.3", "body": "<p>I have recently upgraded from ActivePerl v5.20.2 to v5.26.3.</p>\n\n<p>There is now a SSL problem with LWP::Simple::get with some sites</p>\n\n<p>e.g.</p>\n\n<pre><code>#!c:/Perl64/bin/Perl.exe\n# test perl scripts\nuse LWP::Simple;\n#\n$url = \"https://www.bbc.co.uk/sport/rugby-union\";\n$content = get($url);\nprint \"get succesful - \", length($content), \" bytes read\\n\";\n$url = \"https://www.theguardian.com/cartoons/archive\";\n$content = get($url);\nprint \"get succesful - \", length($content), \" bytes read\\n\";\n</code></pre>\n\n<p>works fine with the old version but with the new gives</p>\n\n<p>get succesful - 214904 bytes read</p>\n\n<p>Free to wrong pool 977970 not 890014001a5d9a5e at C:/Perl64/lib/IO/Socket/SSL.pm line 2739.</p>\n\n<p>Line 2739 of SSL.pm is</p>\n\n<pre><code>my $certid = eval { Net::SSLeay::OCSP_cert2ids($ssl,$cert) };\n</code></pre>\n\n<p>so it's something to do with certificate handling.</p>\n"}, {"tags": ["regex", "perl", "ubuntu"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1552111412, "post_id": 55074413, "comment_id": 96896291, "body": "The error refers to <code>m&#47;{{</code> but none of the expressions uses <code>m&#47;&#47;</code>; they&#39;re all <code>s&#47;&#47;&#47;</code>.  And the message mentions line 34.  Please create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) and show the error for the MCVE (with the correct line number)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1552111501, "post_id": 55074413, "comment_id": 96896302, "body": "If it referred to the third line, then you need to use <code>s&#47;\\{\\{[^}]*\\}\\}&#47;&#47;g;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 5097158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a721daa89e19f45f1ac3936f383c3053?s=128&d=identicon&r=PG&f=1", "display_name": "MRUDUL DOSHIT", "link": "https://stackoverflow.com/users/5097158/mrudul-doshit"}, "is_accepted": false, "score": 0, "last_activity_date": 1552299761, "creation_date": 1552299761, "answer_id": 55099676, "question_id": 55074413, "link": "https://stackoverflow.com/questions/55074413/what-is-wrong-in-these-perl-statements/55099676#55099676", "title": "What is wrong in these Perl statements", "body": "<p>As Jonathan correctly pointed out, the issue is in your third line.\nHere, regex would consider your brackets as operators, hence you need to 'escape' them (using '\\') if they are actually part of your string.</p>\n"}], "owner": {"reputation": 1, "user_id": 9568037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aneesh Mullapudi", "link": "https://stackoverflow.com/users/9568037/aneesh-mullapudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552299761, "creation_date": 1552110624, "last_edit_date": 1552111105, "question_id": 55074413, "link": "https://stackoverflow.com/questions/55074413/what-is-wrong-in-these-perl-statements", "title": "What is wrong in these Perl statements", "body": "<pre><code>s/\\[\\[[a-z\\-]*:[^\\]]*\\]\\]//g;   \ns/\\[\\[[^\\|\\]]*\\|/[[/g;  # remove {{icons}} and {tables} from xml script    \ns/{{[^}]*}}//g;\n</code></pre>\n\n<p>Error at second line is </p>\n\n<pre><code>Unescaped left brace in regex is deprecated, passed through in regex; marked by \n&lt;-- HERE in m/{{ &lt;-- HERE [^}]*}}/ at clean.pl line 34.\n</code></pre>\n"}, {"tags": ["perl", "moose", "filehandle"], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1552115037, "post_id": 55073779, "comment_id": 96896863, "body": "Works like a champ.  Thanks."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1552115332, "post_id": 55073779, "comment_id": 96896916, "body": "Using <code>{openhandle(\\*STDOUT)}</code> works, too.  Though I don&#39;t know why I&#39;d need it, now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1552115687, "post_id": 55073779, "comment_id": 96896982, "body": "@ErikBennett Welcome :) Note: We normally don&#39;t have to use the proper typeglob <i>reference</i>, <code>\\*STDOUT</code> (even when it&#39;s strictly speaking needed),  and can use simply <code>*STDOUT</code> (or even <code>STDOUT</code>); however, Moose won&#39;t allow it here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1552115832, "post_id": 55073779, "comment_id": 96896998, "body": "@ErikBennett Yeah ... I am not certain why they mention <code>openhandle</code> in docs.  I suppose it&#39;s because it checks whether the thing can be a filehandle. But then, this is not passed in dynamically and hopefully one knows what they are doing with defaults so I don&#39;t see much value in that check.  Also, for the default I may want a filehandle which specifically <i>isn&#39;t</i> open, like <code>default =&gt; sub { FileHandle-&gt;new }</code>; the <code>openhandle</code> will return <code>undef</code> if the thing isn&#39;t open."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1552119535, "post_id": 55073779, "comment_id": 96897709, "body": "@ErikBennett Altogether, <code>openhandle(\\*STDOUT)</code> checks your stream. Why not; <code>STDOUT</code> <i>could</i> get unavailable."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1552103280, "last_edit_date": 1552103280, "creation_date": 1552103037, "answer_id": 55073779, "question_id": 55073223, "link": "https://stackoverflow.com/questions/55073223/how-do-i-set-a-default-filehandle-attribute-with-moose/55073779#55073779", "title": "How do I set a default FileHandle attribute with moose", "body": "<p>I don't know what else you may need there, but this works for starters</p>\n\n<p>The <strong>WithFH.pm</strong></p>\n\n<pre><code>package WithFH;\n\nuse feature 'say';\nuse Moose;\n\nhas 'fh' =&gt; (is =&gt; 'ro', isa =&gt; 'FileHandle', default =&gt; sub { \\*STDOUT } );\n\nsub say {\n    my $self = shift;\n    say { $self-&gt;{fh} } \"@_\";\n}\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;    \n1;\n</code></pre>\n\n<p>and the main</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse WithFH;\n\nmy $wfh = WithFH-&gt;new;\n\n$wfh-&gt;say(\"hi\"); \n</code></pre>\n\n<p>That prints <code>hi</code> to <code>STDOUT</code>.</p>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 55073779, "answer_count": 1, "score": 2, "last_activity_date": 1585031795, "creation_date": 1552096126, "last_edit_date": 1585031795, "question_id": 55073223, "link": "https://stackoverflow.com/questions/55073223/how-do-i-set-a-default-filehandle-attribute-with-moose", "title": "How do I set a default FileHandle attribute with moose", "body": "<p>You may infer from the question that this is my first Moose class.</p>\n\n<p>How do I set an attribute <code>FileHandle</code> to <code>*STDOUT</code>?</p>\n\n<p>This doesn't work.</p>\n\n<pre><code>has 'output' =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; 'FileHandle',\n    default =&gt; sub { openhandle(*STDOUT) }\n);\n</code></pre>\n\n<p>The output when run is:</p>\n\n<pre>\nAttribute (output) does not pass the type constraint because: Validation failed for 'FileHandle' with value *main::STDOUT\n</pre>\n\n<p>The documentation claims:</p>\n\n<blockquote>\n  <p>FileHandle accepts either an IO::Handle object or a builtin perl\n  filehandle (see \"openhandle\" in Scalar::Util).</p>\n</blockquote>\n\n<p>What am I missing?</p>\n\n<p>Thanks.</p>\n\n<p>-E</p>\n"}, {"tags": ["regex", "perl", "multilinestring"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552082449, "post_id": 55071252, "comment_id": 96890842, "body": "If <code>$cur_line</code> is a single line, you should not use mulitline regexp. Try instead to match the three fields in a single regexp without the <code>g</code> and <code>m</code> modifier"}, {"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 2, "creation_date": 1552091821, "post_id": 55071252, "comment_id": 96893309, "body": "Use a Verilog parser: <a href=\"https://metacpan.org/pod/Verilog-Perl\" rel=\"nofollow noreferrer\">metacpan.org/pod/Verilog-Perl</a>"}, {"owner": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552334644, "post_id": 55071252, "comment_id": 96961934, "body": "@H&#229;kon H&#230;gland   it is actually multiple lines in a file.  The multi line data is terminated by  ;"}, {"owner": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1552334657, "post_id": 55071252, "comment_id": 96961945, "body": "@toolic   I had no idea that there was a verilog parser. Thanks for pointing that out.   I&#39;ll see if the synthesized netlist can be pulled in.  I might use that or just steal the code from the module.  Just want a simple test script. No need to pull the whole design into memory"}, {"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1552334750, "post_id": 55071252, "comment_id": 96961994, "body": "The <code>vhier</code> helper script might be a good place to start."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1552341043, "post_id": 55071252, "comment_id": 96964612, "body": "@togaclad So to clarify the format: <code>$cur_line</code> is equal to 5 lines in your example, or is it equal to the top two lines (since there is a <code>;</code> after the second line)?"}, {"owner": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1552921218, "post_id": 55071252, "comment_id": 97183375, "body": "@toolic.  There is lots of good examples in those modules. The one thing that it does not do, and I really needed, was elaboration.  Basically that is what I am after but with the example from the those modules and the great comments from everyone I think I have enough to get this done."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "edited": false, "score": 0, "creation_date": 1552921045, "post_id": 55149914, "comment_id": 97183263, "body": "Oh I see it now. I was using a while to read in  my $cur_line = &lt;FILE&gt;   and then using the same  $cur_line to regex as i detailed.  I did not realize I needed to pull the global multi string match into a variable and then use a while to walk through it."}, {"owner": {"reputation": 1028, "user_id": 731339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d1ca6a73cadeccaeeadcd255265cfa?s=128&d=identicon&r=PG", "display_name": "Ossip", "link": "https://stackoverflow.com/users/731339/ossip"}, "reply_to_user": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "edited": false, "score": 0, "creation_date": 1553016996, "post_id": 55149914, "comment_id": 97226651, "body": "Ah I see - it would have been easier if you posted your full code ;) no problem, you can continue doing that (is a good idea). above code will also work if you use it with individual lines. (of course then you can use <code>if</code> and kick out the <code>gm</code> )"}, {"owner": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "edited": false, "score": 0, "creation_date": 1553105255, "post_id": 55149914, "comment_id": 97266165, "body": "hmmm no still fighting with it. Seemed to be working at first but is not matching past the first line."}, {"owner": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "edited": false, "score": 0, "creation_date": 1553107332, "post_id": 55149914, "comment_id": 97267209, "body": "Wait it works.  Okay I had to use the gms modifier on  the first while.           <code>my $data = read_file(&quot;maca&quot;); while ($data =~ m&#47;([A-Z]\\w+)\\s+(\\w+)\\s+\\((.+?)\\)\\s*;&#47;mgs) {   my $port_net_pairs = $3;   while ($port_net_pairs =~ m&#47;\\.(\\w+)\\s+\\(\\s+(\\w+)\\s+\\)&#47;g) {     my $port = $1;     my $net = $2;     print &quot;      $port : $net\\n&quot;;   } }</code>   Now the only challenge I see is some ports are not just word chars but have square brackets.  ex     .B ( TX_cnt[0] )"}, {"owner": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "edited": false, "score": 0, "creation_date": 1553107640, "post_id": 55149914, "comment_id": 97267373, "body": "woohoo solved that with  <code>while ($port_net_pairs =~ m&#47;\\.(\\w+)\\s+\\(\\s+([\\w|\\[|\\]]+)\\s+\\)&#47;g) {</code>"}, {"owner": {"reputation": 1028, "user_id": 731339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d1ca6a73cadeccaeeadcd255265cfa?s=128&d=identicon&r=PG", "display_name": "Ossip", "link": "https://stackoverflow.com/users/731339/ossip"}, "reply_to_user": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "edited": false, "score": 0, "creation_date": 1553197272, "post_id": 55149914, "comment_id": 97305751, "body": "great! in fact you don&#39;t even need the <code>|</code> in the pattern <code>[\\w|\\[|\\]]+</code> so you can use <code>[\\w\\[\\]]+</code> . if this answered the question please hit accept, thanks!"}], "tags": [], "owner": {"reputation": 1028, "user_id": 731339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d1ca6a73cadeccaeeadcd255265cfa?s=128&d=identicon&r=PG", "display_name": "Ossip", "link": "https://stackoverflow.com/users/731339/ossip"}, "is_accepted": false, "score": 0, "last_activity_date": 1552505579, "creation_date": 1552505579, "answer_id": 55149914, "question_id": 55071252, "link": "https://stackoverflow.com/questions/55071252/perl-multiple-regex-match-over-multiple-lines/55149914#55149914", "title": "perl multiple regex match over multiple lines", "body": "<p>If I understand you correctly you're looking for something like this:</p>\n\n<pre><code>while ($data =~ /(\\w+)\\s*\\((.+?)\\)\\s*;/gm) {\n  my $line = $1;\n  my $vals = $2;\n  while ($vals =~ /\\.(\\w+)\\s*\\(\\s*(\\w+)\\s*\\)/g) {\n    print \"$line .. $1: $2.\\n\"\n  }\n}\n</code></pre>\n\n<p>I called the variable <code>$data</code> as it has all lines - correct?\nI first split the lines, capturing the string between the <code>( .. )</code> , then pull out the key - value pairs. Looks like all names are alpha-numeric + \"_\" which is nicely captured per <code>\\w</code>.</p>\n\n<p>Hope this helps?</p>\n"}], "owner": {"reputation": 21, "user_id": 5228264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d33127f37881a27b7774ab1036f591a?s=128&d=identicon&r=PG&f=1", "display_name": "togaclad", "link": "https://stackoverflow.com/users/5228264/togaclad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553106220, "creation_date": 1552080549, "last_edit_date": 1553106220, "question_id": 55071252, "link": "https://stackoverflow.com/questions/55071252/perl-multiple-regex-match-over-multiple-lines", "title": "perl multiple regex match over multiple lines", "body": "<p>I'm struggling with trying to capture multiple matches within  a group of lines in a text file.</p>\n\n<p>The data takes on a bunch of forms like</p>\n\n<blockquote>\n  <p>AO22_X1N_A9PP96CTS_C24 SYN_INC_187 ( .A0 ( test_so6 ) , .A1 ( n2218 )\n  , \n      .B0 ( U_PAUSEdata_ff_int_28_ ) , .B1 ( n2 ) , .Y ( n2597 ) ) ;</p>\n  \n  <p>NAND3_X1R_A9PP96CTUL_C16 SYN_INC_154 ( .A ( n1563 ) , \n      .B ( U_PAUSEwcnt ) , .C ( n1640 ) , .Y ( n1467 ) ) ;</p>\n</blockquote>\n\n<p>The first piece is a name. Might want tat later but for now I am interested in the ports ex  .A ( net )\nIdeally I want to capture all the input net  names (those with A,B,C,D etc)  and the single output .Y ( net)</p>\n\n<p>Eventually I want to store them into a hash where the output net is the key and the data is a ref to the array of inputs but for now I'm just trying to get all the input nets to be captured.</p>\n\n<p>This is what I'm currently working with</p>\n\n<pre><code>open (FILE, \"&lt;maca\") or die(\"Can not open $file\");\n  while (defined(my $cur_line = &lt;FILE&gt;)) {\n\n    if ($cur_line =~ m/[A-Z].*?\\.[A-C]\\d* \\( (.*?) \\).*?;/mg) { \n      print \"THIS gate $cur_line $1 $2 $3\\n\";  \n      }\n  }\n</code></pre>\n\n<p>I'm trying for this display</p>\n\n<blockquote>\n  <p>THIS gate     NAND3_X1R_A9PP96CTUL_C16 SYN_INC_154 ( .A ( n1563 ) , \n      .B ( U_PAUSEwcnt ) , .C ( n1640 ) , .Y ( n1467 ) ) ;</p>\n  \n  <p>n1563 U_PAUSEwcnt n1640</p>\n</blockquote>\n\n<p>But I get this.  Actually I don't care about the first line just the 2nd. The first is for debugging.  I thought the m would search multiple lines and the g would globally match the multi line string.  What am I missing</p>\n\n<blockquote>\n  <p>THIS gate     .B ( U_PAUSEwcnt ) , .C ( n1640 ) , .Y ( n1467 ) ) ;</p>\n  \n  <p>n1640</p>\n</blockquote>\n"}, {"tags": ["arrays", "database", "perl", "mariadb"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1552084718, "post_id": 55071792, "comment_id": 96891634, "body": "Yeah, there&#39;s no way I could understand what you&#39;ve done :-( I will try and figure it out."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1552084841, "post_id": 55071792, "comment_id": 96891672, "body": "@AlexRegan  Oh, sorry ... Your own code isn&#39;t far off, so I thought this would be clear with some thought. I can add explanations -- which part is opaque?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552112851, "post_id": 55071792, "comment_id": 96896535, "body": "This is a slow approach (O(N*M) [basically O(N^2)]) compared to the faster one available (O(N+M) [basically, O(N)])."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552118159, "post_id": 55071792, "comment_id": 96897429, "body": "@ikegami Yeah. I considered (briefly, was going to return to this), and went for something related to their <code>grep</code> efforts. Also, using hashes (for a working example) didn&#39;t seem so clean as the whole hashref need be accounted for somehow.  We don&#39;t even know whether any keys may be considered unique (except for duplicate hashrefs).  I&#39;ve added a bullet on this.  Thank you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552119402, "post_id": 55071792, "comment_id": 96897675, "body": "Re &quot;<i>We don&#39;t even know whether any keys may be considered unique</i>&quot;, The OP actually mentions they only want to report missing <code>id</code> values, but the hash approach can still be used with multi-field keys by using something like <code>sub key {  pack &#39;(J&#47;a*)*&#39;, @{ $_[0] }{ @key_fields } }</code> to generate the hash key."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552120008, "post_id": 55071792, "comment_id": 96897823, "body": "@ikegami  &quot;<i>only want to report missing <code>id</code> values</i>&quot;  -- yes, you&#39;re right; I somehow ignored that (I guess expecting a more complex real problem?).  But yes, that packin&#39; is a kind of a thing I had in mind :)  Thanks, going to study that some :))"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552120388, "post_id": 55071792, "comment_id": 96897906, "body": "<code>J&#47;a*</code> creates a length-prefixed string (<code>J</code> = unsigned integer of the size used by Perl). <code>(J&#47;a*)*</code> creates one for each other argument. These length-prefixed strings are concatenated. So, <code>pack(&#39;(J&#47;a*)*&#39;, &#39;abc&#39;, &#39;def&#39;)</code> could create <code>03 00 00 00 00 00 00 00 61 62 63 03 00 00 00 00 00 00 00 64 65 66</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "edited": false, "score": 0, "creation_date": 1560921827, "post_id": 55071792, "comment_id": 99890106, "body": "@AlexRegan  &quot;<i>no way I could understand what you&#39;ve done</i>&quot;  --- I had added detailed explanations (in case you haven&#39;t noticed).  If they aren&#39;t good enough you can let me know"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1560930511, "last_edit_date": 1560930511, "creation_date": 1552083612, "answer_id": 55071792, "question_id": 55071234, "link": "https://stackoverflow.com/questions/55071234/identifying-elements-in-one-array-of-hashes-that-are-not-in-another-array-of-has/55071792#55071792", "title": "Identifying elements in one array of hashes that are not in another array of hashes (perl)", "body": "<p>There are a number of libraries that compare arrays. However, your comparison involves complex data structures (the arrays have hashrefs as elements) and this at least complicates use of all modules that I am aware of. </p>\n\n<p>So here is a way to do it by hand. I use the shown array and its copy with one value changed.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse List::Util qw(none);   # in List::MoreUtils with older Perls\nuse Data::Dump qw(dd pp);\n\nsub hr_eq {\n    my ($e1, $e2) = @_; \n    return 0 if scalar keys %$e1 != scalar keys %$e2;\n    foreach my $k1 (keys %$e1) {\n       return 0 if !exists($e2-&gt;{$k1}) or $e1-&gt;{$k1} ne $e2-&gt;{$k1};            \n    }   \n    return 1\n}\n\nmy @a1 = ( \n    { 'title' =&gt; 'Legal Notice', 'created' =&gt; '2004-10-07 00:17:45', 'id' =&gt; 14 },\n    { 'created' =&gt; '2004-11-15 16:04:06', 'id' =&gt; 86096, 'title' =&gt; 'IRC' },  \n    { 'id' =&gt; 16, 'created' =&gt; '2004-10-07 16:15:29', 'title' =&gt; 'About' }\n);        \nmy @a2 = ( \n    { 'title' =&gt; 'Legal Notice', 'created' =&gt; '2004-10-07 00:17:45', 'id' =&gt; 14 },\n    { 'created' =&gt; '2004-11-15 16:xxx:06', 'id' =&gt; 86096, 'title' =&gt; 'IRC' },  \n    { 'id' =&gt; 16, 'created' =&gt; '2004-10-07 16:15:29', 'title' =&gt; 'About' }\n);\n\nmy @only_in_two = grep { \n    my $e2 = $_; \n    none { hr_eq($e2, $_) } @a1;\n} @a2;\n\ndd \\@only_in_two;\n</code></pre>\n\n<p>This correctly identifies the element in <code>@a2</code> that doesn't exist in <code>@a1</code> (with <code>xxx</code> in timestamp).</p>\n\n<p>Notes</p>\n\n<ul>\n<li><p>This finds what elements of one array are not in another, not the full difference between arrays. It is what the question specifically asks for.</p></li>\n<li><p>The comparison relies on details of your data structure (hashref); there's no escaping that, unless you want to reach for more comprehensive libraries (like <code>Test::More</code>).</p></li>\n<li><p>This uses string comparison, <code>ne</code>, even for numbers and timestamps.  See whether it makes sense for your real data to use more appropriate comparisons for particular elements.</p></li>\n<li><p>Searching through a whole list for each element of a list is an <em>O(N*M)</em> algorithm. Solutions of such (quadratic) complexity are usable as long as data isn't too big; however, once data gets big enough so that size increases have clear effects they break down rapidly (slow down to the point of being useless). Time it to get a feel for this in your case.  </p>\n\n<p>An <em>O(N+M)</em> approach exists here, utilizing hashes, shown in ikegami answer.  This is much better algorithmically, once the data is large enough for it to show. However, as your array carries complex data structure (hashrefs) a bit of work is needed to come up with a working program, specially as we don't know data.  But if your data is sizable then you surely want to implement this.</p></li>\n</ul>\n\n<hr>\n\n<p>Some comments on filtering.  </p>\n\n<p>The question correctly observes that for each element of an array, as it's processed in <code>grep</code>, the whole other array need be checked. </p>\n\n<p>This is done in the body of <code>grep</code> using <code>none</code> from <a href=\"https://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a>. It returns true if the code in its block evaluates false for all elements of the list; thus, if \"none\" of the elements satisfy that code. This is the heart of the requirement: an element must not be found in the other array.</p>\n\n<p>Care is needed with the default <a href=\"https://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\"><code>$_</code> variable</a>, since it is used by both <code>grep</code> and <code>none</code>. </p>\n\n<p>In <code>grep</code>'s block <code>$_</code> aliases the currently processed element of the list, as <code>grep</code> goes through them one by one; we save it into a named variable (<code>$e2</code>). Then <code>none</code> comes along and in its block \"takes possession\" of <code>$_</code>, assigning elements of <code>@a1</code> to it as it processes them. The current element of <code>@a2</code> is also available since we have copied it into <code>$e2</code>.</p>\n\n<p>The test performed in <code>none</code> is pulled into a a subroutine, which I call <code>hr_eq</code> to emphasize that it is specifically for equality comparison of (elements in) hashrefs. </p>\n\n<p>It is in this sub where the details can be tweaked.  Firstly, instead of bluntly using <code>ne</code> for values for each key, you can add custom comparisons for particular keys (numbers must use <code>==</code>, etc).  Then, if your data structures change this is where you'd adjust specifics. </p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1552113879, "last_edit_date": 1552113879, "creation_date": 1552104394, "answer_id": 55073879, "question_id": 55071234, "link": "https://stackoverflow.com/questions/55071234/identifying-elements-in-one-array-of-hashes-that-are-not-in-another-array-of-has/55073879#55073879", "title": "Identifying elements in one array of hashes that are not in another array of hashes (perl)", "body": "<p>You could use <code>grep</code>.</p>\n\n<pre><code>for my $new_row (@new_rows) {\n   say \"$new_row-&gt;{id} not in old\"\n      if !grep { $_-&gt;{id} == $new_row-&gt;{id} } @old_rows;\n}\n\nfor my $old_row (@old_rows) {\n   say \"$old_row-&gt;{id} not in new\"\n      if !grep { $_-&gt;{id} == $old_row-&gt;{id} } @new_rows;\n}\n</code></pre>\n\n<p>But that's an O(N*M) solution, while there exists an O(N+M) solution that would be far faster.</p>\n\n<pre><code>my %old_keys;  ++$old_keys{ $_-&gt;{id} } for @old_rows;\nmy %new_keys;  ++$new_keys{ $_-&gt;{id} } for @new_rows;\n\nfor my $new_row (@new_rows) {\n   say \"$new_row-&gt;{id} not in old\"\n      if !$old_keys{$new_row-&gt;{id}};\n}\n\nfor my $old_row (@old_rows) {\n   say \"$old_row-&gt;{id} not in new\"\n      if !$new_keys{$old_row-&gt;{id}};\n}\n</code></pre>\n\n<p>If both of your database connections are to the same database, this can be done far more efficiently within the database itself.</p>\n\n<ol>\n<li>Create a temporary table with three fields, <code>id</code>, <code>old_count</code> (<code>DEFAULT 0</code>) and <code>new_count</code> (<code>DEFAULT 0</code>).</li>\n<li><code>INSERT OR UPDATE</code> from the old table into the temporary table, incrementing <code>old_count</code> in the process.</li>\n<li><code>INSERT OR UPDATE</code> from the new table into the temporary table, incrementing <code>new_count</code> in the process.</li>\n<li><code>SELECT</code> the rows of the temporary table which have <code>0</code> for <code>old_count</code> or <code>0</code> for <code>new_count</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 105046, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 1, "last_activity_date": 1552764203, "creation_date": 1552764203, "answer_id": 55200650, "question_id": 55071234, "link": "https://stackoverflow.com/questions/55071234/identifying-elements-in-one-array-of-hashes-that-are-not-in-another-array-of-has/55200650#55200650", "title": "Identifying elements in one array of hashes that are not in another array of hashes (perl)", "body": "<pre><code>select id,title,created from mos_content\n     LEFT JOIN xugc_content USING(id)\n     WHERE xugc_content.id IS NULL;\n</code></pre>\n\n<p>Gives you the rows that are in <code>mos_content</code> but not in <code>xugc_content</code>.</p>\n\n<p>That's even shorter than the Perl code.</p>\n"}], "owner": {"reputation": 349, "user_id": 1834498, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/82c4a126c67bc0d736a42980c96f5ad0?s=128&d=identicon&r=PG", "display_name": "Alex Regan", "link": "https://stackoverflow.com/users/1834498/alex-regan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 55071792, "answer_count": 3, "score": 2, "last_activity_date": 1560930511, "creation_date": 1552080437, "last_edit_date": 1552083373, "question_id": 55071234, "link": "https://stackoverflow.com/questions/55071234/identifying-elements-in-one-array-of-hashes-that-are-not-in-another-array-of-has", "title": "Identifying elements in one array of hashes that are not in another array of hashes (perl)", "body": "<p>I'm a novice perl programmer trying to identify which elements are in one array of hashes but not in another. I'm trying to search through the \"new\" array, identifying the id, title, and created elements that don't exist from the \"old\" array.</p>\n\n<p>I believe I have it working with a set of basic for() loops, but I'd like to do it more efficiently. This only came after having tried to use grep() and failed.</p>\n\n<p>These arrays are built from a database as such:</p>\n\n<pre><code>use DBI;\nuse strict;\nuse Data::Dumper;\nuse Array::Utils qw(:all);\nsub db_connect_new();\nsub db_disconnect_new($);\nsub db_connect_old();\nsub db_disconnect_old($);\n\nmy $dbh_old   = db_connect_old();\nmy $dbh_new   = db_connect_new();\n\n# get complete list of articles on each host first (Joomla! system)\nmy $sql_old   = \"select id,title,created from mos_content;\"; \nmy $sql_new   = \"select id,title,created from xugc_content;\";\n\nmy $sth_old   = $dbh_old-&gt;prepare($sql_old);\nmy $sth_new   = $dbh_new-&gt;prepare($sql_new);\n\n$sth_old-&gt;execute();\n$sth_new-&gt;execute();\n\nmy $ref_old;\nmy $ref_new;\n\nwhile ($ref_old = $sth_old-&gt;fetchrow_hashref()) {\n  push @rv_old, $ref_old;\n}\n\nwhile ($ref_new = $sth_new-&gt;fetchrow_hashref()) {\n  push @rv_new, $ref_new;\n}\n\nmy @seen = ();\nmy @notseen = ();\nforeach my $i (@rv_old) {\n   my $id = $i-&gt;{id};\n   my $title = $i-&gt;{title};\n   my $created = $i-&gt;{created};\n   my $seen = 0;\n   foreach my $j (@rv_new) {\n      if ($i-&gt;{id} == $j-&gt;{id}) {\n         push @seen, $i;\n         $seen = 1;\n      }\n   }\n   if ($seen == 0) {\n       print \"$i-&gt;{id},$i-&gt;{title},$i-&gt;{state},$i-&gt;{catid},$i-&gt;{created}\\n\";\n      push @notseen, $i;\n   }\n}\n</code></pre>\n\n<p>The arrays look like this when using Dumper(@rv_old) to print them:</p>\n\n<pre><code>$VAR1 = {\n          'title' =&gt; 'Legal Notice',\n          'created' =&gt; '2004-10-07 00:17:45',\n          'id' =&gt; 14\n        };\n$VAR2 = {\n          'created' =&gt; '2004-11-15 16:04:06',\n          'id' =&gt; 86096,\n          'title' =&gt; 'IRC'\n        };\n$VAR3 = {\n          'id' =&gt; 16,\n          'created' =&gt; '2004-10-07 16:15:29',\n          'title' =&gt; 'About'\n        };\n</code></pre>\n\n<p>I tried to use grep() using array references, but I don't think I understand arrays, hashes, and references well enough to do it properly. My failed grep() attempts are below. I'd appreciate any ideas of how to do this properly.</p>\n\n<p>I believe the problem with this is that I don't know how to reference the id field in the second array of hashes. Most of the examples using grep() that I've seen are to just look through an entire array, like you would with regular grep(1). I need to iterate through one array, checking each of the values from the id field with the id field from another array.</p>\n\n<pre><code>  my $rv_old_ref        = \\@rv_old;\n  my $rv_new_ref        = \\@rv_new;\n\n  for my $i ( 0 .. $#rv_old) {\n    my $match = grep { $rv_new_ref-&gt;$_ == $rv_old_ref-&gt;$_ } @rv_new;\n    push @notseen, $match if !$match;\n  }\n</code></pre>\n\n<p>I also tried variations on the grep() above:</p>\n\n<pre><code>1) if (($p) = grep ($hash_ref-&gt;{id}, @rv_old)) {\n2) if ($hash_ref-&gt;{id} ~~ @rv_old) {\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1552068615, "post_id": 55068712, "comment_id": 96884940, "body": "<code>qw</code> is not intended to be dynamic. Maybe you want to split on spaces? Just use <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 4, "last_activity_date": 1552162357, "last_edit_date": 1552162357, "creation_date": 1552069026, "answer_id": 55068844, "question_id": 55068712, "link": "https://stackoverflow.com/questions/55068712/getting-unexpcted-results-in-perl-dynamic-qw-array/55068844#55068844", "title": "Getting unexpcted results in perl dynamic qw array", "body": "<p><code>qw</code> doesn't interpolate. And I don't know why you're adding spaces to <code>$fname</code> by using <code>$fname .= ' '</code> instead of <code>$fname . ' '</code>.</p>\n\n<pre><code>while ($sth-&gt;fetch)\n{\n    $f_name_string .= $fname . ' ';\n}\n</code></pre>\n\n<p>makes more sense, but even more sense is to not create a string in the first place:</p>\n\n<pre><code>my @FNAME_ORDER; # why all uppercase anyway?\nwhile ($sth-&gt;fetch)\n{\n    push @FNAME_ORDER, $fname;\n}\n$sth-&gt;finish();\n</code></pre>\n\n<p>This makes more sense. If you want to print it out or later create a string separated by spaces, it's easy to do, easier than separating on spaces (in case any <code>$fname</code> could have a space in it).</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1552077053, "creation_date": 1552077053, "answer_id": 55070578, "question_id": 55068712, "link": "https://stackoverflow.com/questions/55068712/getting-unexpcted-results-in-perl-dynamic-qw-array/55070578#55070578", "title": "Getting unexpcted results in perl dynamic qw array", "body": "<pre><code>qw( foo bar )\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>split ' ', q( foo bar )    # q() = Single quotes, doesn't interpolate.\n</code></pre>\n\n<p>so you could use</p>\n\n<pre><code>my @fname_order = split ' ', $f_name_string;\n</code></pre>\n\n<p>but it would make more sense to just populate the array directly.</p>\n\n<pre><code>my @fname_order;\nwhile($sth-&gt;fetch) {\n    push @fname_order, $fname;\n}\n</code></pre>\n"}], "owner": {"reputation": 1215, "user_id": 3525290, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/303246ebe05535ca2f4e437eb6cfb7f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3525290", "link": "https://stackoverflow.com/users/3525290/user3525290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 55068844, "answer_count": 2, "score": 0, "last_activity_date": 1552162357, "creation_date": 1552068482, "question_id": 55068712, "link": "https://stackoverflow.com/questions/55068712/getting-unexpcted-results-in-perl-dynamic-qw-array", "title": "Getting unexpcted results in perl dynamic qw array", "body": "<p>I am looping over a query and I am trying to create a dynamic qw array.</p>\n\n<pre><code>my $f_name_string = '';\nwhile($sth-&gt;fetch)\n{\n    $f_name_string.=$fname.=\" \"\n}\n$sth-&gt;finish();\nmy @FNAME_ORDER = (qw('$f_name_string'));\n</code></pre>\n\n<p><code>print(\"@SENSOR_ORDER\");</code> prints <code>'$f_name_string'</code></p>\n"}, {"tags": ["perl", "variables"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552068642, "post_id": 55068694, "comment_id": 96884953, "body": "It is a warning, not an error. Also, it&#39;s poorly worded; it means they are undefined (value is undef), which is also true before anything is assigned to them but in this case means that <code>-s</code> and <code>stat</code> returned undef. You need to check for errors."}, {"owner": {"reputation": 360, "user_id": 9696928, "user_type": "registered", "profile_image": "https://graph.facebook.com/565264017190206/picture?type=large", "display_name": "Mobrine Hayde", "link": "https://stackoverflow.com/users/9696928/mobrine-hayde"}, "edited": false, "score": 0, "creation_date": 1552073263, "post_id": 55068694, "comment_id": 96887084, "body": "it simply means that the variable is undefined (declared but does not contain any value), this is not an error, its a warning and you better stick to <code>use strict; use warnings;</code>, if you don&#39;t want to keep your script working on undefined variables"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8268057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d444d5263ee1bffff880278c3b5f43?s=128&d=identicon&r=PG&f=1", "display_name": "hanktank45", "link": "https://stackoverflow.com/users/8268057/hanktank45"}, "edited": false, "score": 0, "creation_date": 1552231854, "post_id": 55070794, "comment_id": 96923217, "body": "So when i try this I am getting &quot;Bad symbol for dirhandle&quot; at the line: while (my $fn = readdir($dir_qfn)) if I change $dir_qfn to $dh i get the warning for Can&#39;t stat... again it will print all of the file names but obviously not getting any of the stats"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 19, "user_id": 8268057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d444d5263ee1bffff880278c3b5f43?s=128&d=identicon&r=PG&f=1", "display_name": "hanktank45", "link": "https://stackoverflow.com/users/8268057/hanktank45"}, "edited": false, "score": 0, "creation_date": 1552236792, "post_id": 55070794, "comment_id": 96924796, "body": "Yes, it should be <code>$dh</code>. Fixed. The rest stands. You need to pass the path to the file (<code>$qfn</code>) and not just its name (<code>$fn</code>)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1552236835, "last_edit_date": 1552236835, "creation_date": 1552078158, "answer_id": 55070794, "question_id": 55068694, "link": "https://stackoverflow.com/questions/55068694/getting-uninitialized-error-when-running-my-perl-script/55070794#55070794", "title": "Getting uninitialized error when running my perl script", "body": "<p>Uninitialized can also mean initialized to <code>undef</code>.</p>\n\n<p><code>stat</code> and <code>-X</code> operators return <code>undef</code> and set <code>$!</code> on error. Let's add this error checking. At the same time, I'll also reduce the number of <code>stat</code> system calls from 2 + 2 per file to 1 per file.</p>\n\n<pre><code>if ($ARGV[0] eq \"-d\") {\n    die(\"Usage\\n\") if @ARGV &lt; 2;\n\n    my $dir_qfn = $ARGV[1];\n    opendir(my $dh, $dir_qfn)\n        or die(\"Can't open dir \\\"$dir_qfn\\\": $!\\n\");\n\n    my @rows;\n    while (my $fn = readdir($dh)) {\n        next if substr($fn, 0, 1) eq '.';\n\n        my ($size, $gid, $group);\n        if (my @stats = stat($fn)) {\n            $size  = $stats[7];\n            $gid   = $stats[5];\n            $group = getgrgid($gid);\n        } else {\n            warn(\"Can't stat \\\"$fn\\\": $!\\n\");\n            $size  = '???';\n            $gid   = '???';\n            $group = '???';\n        }\n\n        push @rows, [ $fn, $size, $gid, $group ];\n    }\n\n    # Print rows here.\n    # By having all the data in an array,\n    # you can figure out how wide to make the columns.\n}\n</code></pre>\n\n<p>That's just a cleaned up version of your code. I haven't actually fixed the error yet. But since it has error checking now, we can see what the problem is. Running the program gives us <code>No such file or directory</code> for each and every file name! That's because you are looking for the file name in the current work directory instead of the directory to which is belongs.</p>\n\n<p>To fix this, simple replace</p>\n\n<pre><code>if (my @stats = stat($fn)) {\n...\n    warn(\"Can't stat \\\"$fn\\\": $!\\n\");\n</code></pre>\n\n<p>with</p>\n\n<pre><code> my $qfn = $dir_qfn . '/' . $fn;\n if (my @stats = stat($qfn)) {\n...\n    warn(\"Can't stat \\\"$qfn\\\": $!\\n\");\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8268057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d444d5263ee1bffff880278c3b5f43?s=128&d=identicon&r=PG&f=1", "display_name": "hanktank45", "link": "https://stackoverflow.com/users/8268057/hanktank45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55070794, "answer_count": 1, "score": -1, "last_activity_date": 1552236835, "creation_date": 1552068388, "last_edit_date": 1552072943, "question_id": 55068694, "link": "https://stackoverflow.com/questions/55068694/getting-uninitialized-error-when-running-my-perl-script", "title": "Getting uninitialized error when running my perl script", "body": "<p>I am entering the first argument as \"-d\" and the second argument is a directory as long as it is a valid directory name.</p>\n\n<p>Below is a snip of my code:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ($ARGV[0] eq \"-d\" &amp;&amp; -d $ARGV[1]){\n        print \"File Names       Size    Owner   Group\\n\";\n        if (-d $ARGV[1]){\n            my $newdir = ARGV[1];\n            opendir(DIR, $newdir) or die $!;\n        while (my  $file = readdir(DIR)){\n                my $filename = \"$file\";\n                my $size = -s $filename;\n                my $gid = (stat(\"$file\"))[5];\n                my $group = getgrgid($gid);\n                next if ($file =~ m/^\\./);\n                print \"$file    $size   $gid    $group\\n\";\n        }\n        closedir(DIR);\n    }\n}\n</code></pre>\n\n<p>I am trying to return a list of all the file names, the file size, the file owner, and the group owner. When I execute the script it returns the file names, but i get errors for the size and owners. The specific error is </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Use of uninitialized value $gid in getgrgid at ./tester.pl line 73.\nUse of uninitialized value $size in concatenation (.) or string at ./tester.pl line 75.\nUse of uninitialized value $gid in concatenation (.) or string at ./tester.pl line 75.\n</code></pre>\n\n<p>I am not sure why it is stating the <code>$gid</code> and <code>$size</code> variables are not initialized</p>\n"}, {"tags": ["windows", "powershell", "perl", "exit", "exit-code"], "comments": [{"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 1, "creation_date": 1552065261, "post_id": 55066850, "comment_id": 96883316, "body": "Pro-tip: it is excessively rare to find a valid use-case for <code>Invoke-Expression</code>.  Avoid it whenever possible.  What you want is the <i>call operator</i> (<code>&amp;</code>)"}, {"owner": {"reputation": 53, "user_id": 5097158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a721daa89e19f45f1ac3936f383c3053?s=128&d=identicon&r=PG&f=1", "display_name": "MRUDUL DOSHIT", "link": "https://stackoverflow.com/users/5097158/mrudul-doshit"}, "reply_to_user": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 0, "creation_date": 1552102486, "post_id": 55066850, "comment_id": 96894922, "body": "Using &amp; sets the $? correctly, so I will know whether the command succeeded or failed. BUT, it won&#39;t set the $LASTEXITCODE to the command&#39;s return value."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5097158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a721daa89e19f45f1ac3936f383c3053?s=128&d=identicon&r=PG&f=1", "display_name": "MRUDUL DOSHIT", "link": "https://stackoverflow.com/users/5097158/mrudul-doshit"}, "edited": false, "score": 0, "creation_date": 1552102677, "post_id": 55067330, "comment_id": 96894946, "body": "In my scenario I will always get the command as a parameter string, so I will need someone to execute it. Lets say the command is: $command = &quot;mkdir aaa:bbbccc&quot;, which is sent as a script parameter. This command will obviously fail! But, after the statement: $output = Invoke-Expression $command, the $LASTEXITCODE is 0 (probably because the invoke-expression successfully fired mkdir, even though mkdir failed) and $? is also $True."}, {"owner": {"reputation": 439, "user_id": 380233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dac1754209d4d5c0a187b027b70be5?s=128&d=identicon&r=PG", "display_name": "camilohe", "link": "https://stackoverflow.com/users/380233/camilohe"}, "reply_to_user": {"reputation": 53, "user_id": 5097158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a721daa89e19f45f1ac3936f383c3053?s=128&d=identicon&r=PG&f=1", "display_name": "MRUDUL DOSHIT", "link": "https://stackoverflow.com/users/5097158/mrudul-doshit"}, "edited": false, "score": 0, "creation_date": 1553194266, "post_id": 55067330, "comment_id": 97304412, "body": "In this scenario you are running PowerShell&#39;s built-in <b>mkdir</b> command so <b>$LASTEXITCODE</b> is not set but you could use the call (<b>&amp;</b>) command and trap the exception to handle the error. On the other hand, if you need to run the <b>mkdir</b> command from <b>cmd.exe</b> you&#39;ll need code like this: <code>$cmd=&quot;cmd.exe&quot;; $params=&quot;&#47;c mkdir dir1\\dir2&quot;; &amp;$cmd $params; $LASTEXITCODE</code>. Run it twice, it should succeed (and print 0) the first time and fail (and print 1) the second one as the folder will already exist.This way <b>$LASTEXITCODE</b> is populated as we are running an external program."}], "tags": [], "owner": {"reputation": 439, "user_id": 380233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dac1754209d4d5c0a187b027b70be5?s=128&d=identicon&r=PG", "display_name": "camilohe", "link": "https://stackoverflow.com/users/380233/camilohe"}, "is_accepted": false, "score": 2, "last_activity_date": 1552064890, "last_edit_date": 1552064890, "creation_date": 1552062957, "answer_id": 55067330, "question_id": 55066850, "link": "https://stackoverflow.com/questions/55066850/powershell-equivalent-of-perls-child-error/55067330#55067330", "title": "Powershell equivalent of Perl&#39;s $CHILD_ERROR", "body": "<p>You can use <strong>$LASTEXITCODE</strong> to get the exit code from an external program or the Boolean <strong>$?</strong> to check if the last operation succeeded or failed. Run <strong>Get-Help about_Automatic_Variables -ShowWindow</strong> from a PowerShell console to see more details.</p>\n\n<p>You may want to check out the <strong>&amp;</strong> (call) command as an alternative to <strong>Invoke-Expression</strong> when running external programs. Run <strong>Get-Help about_Automatic_Variables -ShowWindow</strong> from a PowerShell console for details.</p>\n\n<p>Also remember you may be able to just call the external program without using one of the commands above. See the example below:</p>\n\n<pre><code>param($Hostname=\"127.0.0.1\", $Tries=1, $Wait=1000)\n$output = ping.exe $Hostname -n $Tries -w $Wait # captures anything written to stdout\n$output|? {$_ -match 'Request timed out'}|Write-Warning\n$LASTEXITCODE # returns the exit code from ping.exe\n</code></pre>\n\n<p>You can copy it to a test.ps1 file and run it from a PowerShell console window  (.\\test.ps1 8.8.8.8 for instance) to see how it works.</p>\n"}], "owner": {"reputation": 53, "user_id": 5097158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a721daa89e19f45f1ac3936f383c3053?s=128&d=identicon&r=PG&f=1", "display_name": "MRUDUL DOSHIT", "link": "https://stackoverflow.com/users/5097158/mrudul-doshit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1552064890, "creation_date": 1552061016, "last_edit_date": 1552061686, "question_id": 55066850, "link": "https://stackoverflow.com/questions/55066850/powershell-equivalent-of-perls-child-error", "title": "Powershell equivalent of Perl&#39;s $CHILD_ERROR", "body": "<p>I essentially require a functionality in Powershell that executes the given string (it can be a CMD/Powershell command, a perl/python/powershell with arguments or an exe with arguments, etc) captures its exit value.\nIn perl I would pass the string to 'system()' and use the '$CHILD_ERROR' perlval and shift it to access the exit code.</p>\n\n<p>In powershell I am clueless.</p>\n\n<p>I tried using Invoke-Expression, but even if the expression passed to Invoke-Expression fails, the Invoke-Expression call itself will have succeeded.</p>\n"}, {"tags": ["perl", "character-encoding"], "comments": [{"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 1, "creation_date": 1552059915, "post_id": 55065319, "comment_id": 96880751, "body": "I thought you were supposed to feed Encode::Guess the entire data set (file) to get the most accurate results? To me it seems you&#39;re trying to guess the encoding for each line separately. Even for a UTF-8 file, some lines may not have byte combinations that make it look like UTF-8, so for those lines, the guessing will also consider ASCII or ISO-8859-15."}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 1, "creation_date": 1552060286, "post_id": 55065319, "comment_id": 96880911, "body": "I also think you&#39;re supposed to use <code>&lt;:raw</code> in the <code>open()</code>."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1552062077, "post_id": 55065319, "comment_id": 96881771, "body": "From the known knowns perspective, ISO-8859-1=Yes. No byte value or sequence of values is incompatible with ISO-8859-1."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552079131, "post_id": 55065319, "comment_id": 96889539, "body": "Wait, in one place you says <code>ISO-8859-1</code>, but the rest you say <code>-15</code>. Is <code>-1</code> a typo?"}, {"owner": {"reputation": 28195, "user_id": 130352, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/24ce5adbac6315ba48ea54474a6083b8?s=128&d=identicon&r=PG", "display_name": "Chris J", "link": "https://stackoverflow.com/users/130352/chris-j"}, "edited": false, "score": 0, "creation_date": 1552306465, "post_id": 55065319, "comment_id": 96946007, "body": "Hi all, thanks for comments - changes made to slurp the whole file and give guess_encoding()  that. However the central problem remains: when ran interactively, <code>$decoder</code> ends up being a reference type, when ran via the SVN hooks non-interatively, <code>$decoder</code> ends up being a scalar. I want to understand why that should be different?"}, {"owner": {"reputation": 28195, "user_id": 130352, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/24ce5adbac6315ba48ea54474a6083b8?s=128&d=identicon&r=PG", "display_name": "Chris J", "link": "https://stackoverflow.com/users/130352/chris-j"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1552306922, "post_id": 55065319, "comment_id": 96946239, "body": "@Silvar - added :raw, but that doesn&#39;t change things either: I still have different behaviours in interactive vs. non-interactive."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552080045, "post_id": 55070924, "comment_id": 96889890, "body": "Added to answer."}, {"owner": {"reputation": 28195, "user_id": 130352, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/24ce5adbac6315ba48ea54474a6083b8?s=128&d=identicon&r=PG", "display_name": "Chris J", "link": "https://stackoverflow.com/users/130352/chris-j"}, "edited": false, "score": 0, "creation_date": 1552306647, "post_id": 55070924, "comment_id": 96946096, "body": "Hiya, ultimately I&#39;m not looking to do a <code>decode</code>, but if that&#39;s going to be the most reliable way to detect encoding I&#39;ll run with it (the intended behaviour is to throw an error on an encoding that&#39;s not acceptable, not convert between encodings). My primary concern is the different behaviour in guess_encoding in different contexts (i.e., interactive vs. non-interactive)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1552079919, "last_edit_date": 1552079919, "creation_date": 1552078767, "answer_id": 55070924, "question_id": 55065319, "link": "https://stackoverflow.com/questions/55065319/encodeguessguess-encoding-gives-different-results-in-different-contexts/55070924#55070924", "title": "Encode::Guess:guess_encoding gives different results in different contexts", "body": "<p>No need to guess. For the specific options of UTF-8, ISO-8859-1 and US-ASCII, you can use <a href=\"http://search.cpan.org/perldoc?Encoding::FixLatin\" rel=\"nofollow noreferrer\">Encoding::FixLatin</a>'s <code>fix_latin</code>. It's <a href=\"https://stackoverflow.com/a/28681865/589924\">virtually guaranteed to succeed</a>.</p>\n\n<p>That said, I think the use of ISO-8859-1 in the OP is a typo for ISO-8859-15.</p>\n\n<p>The method used by <code>fix_latin</code> would work just as well for ISO-8859-15 as it does for ISO-8859-1. It's simply a question of replacing <code>_init_byte_map</code> with the following:</p>\n\n<pre><code>sub _init_byte_map {\n    foreach my $i (0x80..0xFF) {\n        my $byte = chr($i);\n        my $utf8 = Encode::from_to($byte, 'iso-8859-15', 'UTF-8');\n        $byte_map-&gt;{$byte} = $utf8;\n    }\n}\n</code></pre>\n\n<p>Alternatively, if you're willing to assume the data is all of one encoding or another (rather than a mix), you could also use the following approach:</p>\n\n<pre><code>my $text;\nif (!eval {\n   $text = decode(\"UTF-8\", $bytes, Encode::FB_CROAK|Encode::LEAVE_SRC);\n   1  # No exception\n}) {\n   $text = decode(\"ISO-8859-15\", $bytes);\n}\n</code></pre>\n\n<p>Keep in mind that US-ASCII is a proper subset of both UTF-8 and ISO-8859-15, so it doesn't need to be handled specially.</p>\n"}], "owner": {"reputation": 28195, "user_id": 130352, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/24ce5adbac6315ba48ea54474a6083b8?s=128&d=identicon&r=PG", "display_name": "Chris J", "link": "https://stackoverflow.com/users/130352/chris-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552306853, "creation_date": 1552055525, "last_edit_date": 1552306853, "question_id": 55065319, "link": "https://stackoverflow.com/questions/55065319/encodeguessguess-encoding-gives-different-results-in-different-contexts", "title": "Encode::Guess:guess_encoding gives different results in different contexts", "body": "<p>I have the following sub that opens a text file and attempts to ensure its encoding is one of either UTF-8, ISO-8859-15 or ASCII.</p>\n\n<p>The problem I have with it is different behaviours in interactive vs. non-interactive use.</p>\n\n<ul>\n<li><p>when I run interactively with a file that contains a UTF-8 line, <code>$decoder</code> is, as expected, a reference object whose <code>name</code> returns utf8 for that line. </p></li>\n<li><p>non-interactively (as it runs as part of a subversion commit hook) <code>guess_encoding</code> returns a scalar string of value <code>utf8 or iso-8859-15</code> for the <code>utf8</code> check line, and <code>iso-8859-15 or utf8</code> for the other two lines.</p></li>\n</ul>\n\n<p>I can't for the life of me, work out where the difference in behaviour is coming from. If I force the encoding of the <code>open</code> to say <code>&lt;:encoding(utf8)</code>, it accepts every line as UTF-8 without question.</p>\n\n<p>The problem is I can't assume that every file it receives will be UTF-8, so I don't want to force the encoding as a work-around. Another potential workaround is to parse the scalar text, but that just seems messy, especially when it seems to work correctly in an interactive context.</p>\n\n<p>From the shell, I've tried overriding <code>$LANG</code> (as non-interactively that isn't set, nor are any of the <code>LC_</code> variables), however the interactive version still runs correctly.</p>\n\n<p>The commented out line that reports <code>$Encode::Guess::NoUTFAutoGuess</code> returns 0 in both interactive and non-interactive use when commented in.</p>\n\n<p>Ultimately, the one thing we're trying to prevent is having UTF-16 or other wide-char encodings in our repository (as some of our tooling doesn't play well with it): I thought that looking for a white-list of encodings is an easier job than looking for a black-list of encodings.</p>\n\n<pre><code>sub checkEncoding\n{\n    my ($file) = @_;\n\n    my ($b1, $b2, $b3);\n    my $encoding = \"\";\n    my $retval = 1;\n    my $line = 0;\n\n    say(\"Checking encoding of $file\");\n    #say($Encode::Guess::NoUTFAutoGuess);\n    open (GREPFILE, \"&lt;\", $file);\n    while (&lt;GREPFILE&gt;) {\n            chomp($_);\n            $line++;\n\n            my $decoder = Encode::Guess::guess_encoding($_, 'utf8');\n            say(\"A: $decoder\");\n            $decoder = Encode::Guess::guess_encoding($_, 'iso-8859-15') unless ref $decoder;\n            say(\"B: $decoder\");\n            $decoder = Encode::Guess::guess_encoding($_, 'ascii') unless ref $decoder;\n            say(\"C: $decoder\");\n\n            if (ref $decoder) {\n                    $encoding = $decoder-&gt;name;\n            } else {\n                    say \"Mis-identified encoding '$decoder' on line $line: [$_]\";\n                    my $z = unpack('H*', $_);\n                    say $z;\n                    $encoding = $decoder;\n                    $retval = 0;\n            }\n\n            last if ($retval == 0);\n    }\n    close GREPFILE;\n\n    return $retval;\n}\n</code></pre>\n"}, {"tags": ["sqlite", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1552053311, "post_id": 55064603, "comment_id": 96877193, "body": "<code>unlink &quot;*.db3&quot;</code> is wrong (unless there is a file literally named <code>*.db3</code>). Use <code>unlink glob(&quot;*.db3&quot;)</code> instead."}, {"owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1552053686, "post_id": 55064603, "comment_id": 96877404, "body": "@mob . Thanks, fixed"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1552054118, "post_id": 55064603, "comment_id": 96877632, "body": "Line 21 is the DETACH line, which you don&#39;t need because the very next thing you do is close the database. Remove that and it works."}, {"owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1552055652, "post_id": 55064603, "comment_id": 96878417, "body": "@Shawn Actually, it is just a sample code to show that detach or commit fails. My actual code is more complicated that. The attach / detach statements are inside a loop, which a detach is needed otherwise there will be many databases attached."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552067119, "post_id": 55065389, "comment_id": 96884256, "body": "Also consider something like <a href=\"https://metacpan.org/pod/DBIx::Connector\" rel=\"nofollow noreferrer\">DBIx::Connector</a>, <a href=\"https://metacpan.org/pod/DBIx::TransactionManager\" rel=\"nofollow noreferrer\">DBIx::TransactionManager</a>, or <a href=\"https://metacpan.org/pod/Mojo::SQLite\" rel=\"nofollow noreferrer\">Mojo::SQLite</a> which all have features to make transactions nicer to use with AutoCommit enabled."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1552056137, "last_edit_date": 1592644375, "creation_date": 1552055789, "answer_id": 55065389, "question_id": 55064603, "link": "https://stackoverflow.com/questions/55064603/perl-dbi-sqlite-commit-or-detach-fails-when-autocommit-is-set-to-false/55065389#55065389", "title": "perl DBI SQLite commit or detach fails when AutoCommit is set to false", "body": "<p>According to the <a href=\"https://metacpan.org/pod/DBD::SQLite\" rel=\"nofollow noreferrer\">documentation</a>, when <code>AutoCommit</code> mode is turned off:</p>\n<blockquote>\n<p>The default transaction behavior of SQLite is deferred, that means, locks are not acquired until the first read or write operation, and thus it is possible that another thread or process could create a separate transaction and write to the database after the BEGIN on the current thread has executed, and eventually cause a &quot;deadlock&quot;. To avoid this, DBD::SQLite internally issues a BEGIN IMMEDIATE if you begin a transaction by calling begin_work or by turning off AutoCommit (since 1.38_01).</p>\n<p>If you really need to turn off this feature for some reasons, set sqlite_use_immediate_transaction database handle attribute to false, and the default deferred transaction will be used.</p>\n</blockquote>\n<p>(This seems like undesirable behavior, and maybe it's because I'm tired but I don't see how you can get deadlocks; just errors when trying to lock a database that's already locked by another connection to it)</p>\n<p>But anyways:</p>\n<pre><code>$ sqlite3 second.db3\nsqlite&gt; attach database 'first.db3' as chunk_db;\nsqlite&gt; begin immediate;\nsqlite&gt; detach database chunk_db;\nError: database chunk_db is locked\n</code></pre>\n<p>That looks familiar...</p>\n<p>The default behavior when <code>AutoCommit</code> is off means you're <em>always</em> in a transaction with an acquired <a href=\"https://www.sqlite.org/lockingv3.html#reserved_lock\" rel=\"nofollow noreferrer\">RESERVED lock</a>. This has some unusual side-effects as you're seeing.</p>\n<p>So, solutions in my order of preference:</p>\n<ul>\n<li>Turn on <code>AutoCommit</code> mode and manually begin transactions (With <code>$dbh-&gt;begin_work</code>).</li>\n<li>Skip the <code>DETACH</code> since you're closing the database connection anyways.</li>\n<li>Leave <code>AutoCommit</code> disabled and set the <code>sqlite_use_immediate_transaction</code> option to 0 when connecting to the database file.</li>\n</ul>\n"}], "owner": {"reputation": 375, "user_id": 10704286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-of8xlFarfwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i8d962iFCs6D-HXxGc6_MAps5gIQ/mo/photo.jpg?sz=128", "display_name": "Demeter P. Chen", "link": "https://stackoverflow.com/users/10704286/demeter-p-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 55065389, "answer_count": 1, "score": 1, "last_activity_date": 1552056137, "creation_date": 1552052994, "last_edit_date": 1552053563, "question_id": 55064603, "link": "https://stackoverflow.com/questions/55064603/perl-dbi-sqlite-commit-or-detach-fails-when-autocommit-is-set-to-false", "title": "perl DBI SQLite commit or detach fails when AutoCommit is set to false", "body": "<p>The following code fails on my Windows 10 machine running Strawberry Perl 5.24:</p>\n\n<pre><code>use DBI;\n\nunlink glob(\"*.db3\");\nmy $source = DBI-&gt;connect(\"dbi:SQLite:dbname=first.db3\",q(),q(),{AutoCommit =&gt; 0, RaiseError =&gt;1});\n\n# populate source DB\n$source-&gt;do(\"CREATE TABLE test(x integer)\");\n$source-&gt;do(\"INSERT INTO test(x) values (1)\");\n$source-&gt;commit();\n$source-&gt;disconnect();\n\n# copy source to dest\nmy $dest = DBI-&gt;connect(\"dbi:SQLite:dbname=second.db3\",q(),q(),{AutoCommit =&gt; 0, RaiseError =&gt;1});\n\n$dest-&gt;do(\"CREATE TABLE test(x integer)\");\n$dest-&gt;do(\"ATTACH DATABASE 'first.db3' AS chunk_db\");\n$dest-&gt;do(\"INSERT INTO test(x) SELECT x FROM chunk_db.test\");\n\n# this statement will fail when AutoCommit =&gt; 0\n$dest-&gt;commit;\n$dest-&gt;do(\"DETACH DATABASE chunk_db\");\n$dest-&gt;disconnect();\n</code></pre>\n\n<p>To make it work, I have to connect with <code>AutoCommit =&gt; 1</code> when creating the <code>$dest</code> object. Otherwise I'll get the following error message: </p>\n\n<pre><code>   DBD::SQLite::db do failed: database chunk_db is locked at test.pl line 21.\n</code></pre>\n\n<p>Is this a bug in DBI or am I doing something wrong?</p>\n"}, {"tags": ["python", "perl", "browser", "webkit"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 11170929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a6ffff33e782211efb233095aec3b5?s=128&d=identicon&r=PG&f=1", "display_name": "UEForce", "link": "https://stackoverflow.com/users/11170929/ueforce"}, "edited": false, "score": 0, "creation_date": 1552061992, "post_id": 55065047, "comment_id": 96881723, "body": "thanks,I have been running powershell as an administrator.I tried to compile WebKit two months ago, but I have the same problem as now,so I switched to cygwin for compilation, but after compiling, I couldn&#39;t run Minibrowser. The system prompts that I can&#39;t find a dll file that exists in the directory. I have the same problem when compiling again."}], "tags": [], "owner": {"reputation": 11, "user_id": 11171257, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/23cc5796d22c925165fef21aa4a21ee6?s=128&d=identicon&r=PG", "display_name": "Bleechit", "link": "https://stackoverflow.com/users/11171257/bleechit"}, "is_accepted": false, "score": 1, "last_activity_date": 1552054555, "creation_date": 1552054555, "answer_id": 55065047, "question_id": 55064034, "link": "https://stackoverflow.com/questions/55064034/i-always-fails-when-compiling-webkit-os-windows10-1809-x64/55065047#55065047", "title": "I always fails when compiling WebKit , OS : Windows10 1809 x64", "body": "<p>You can start powershell as user or as administrator. I'll suggest, you retry executing as administrator. If you are a regular user or logged on as admin, it's not the same than the right mousebutton to find the right way.</p>\n\n<p>Be sure, that you have all scripts. Maybe, that your archive is buggy. </p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 11170929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a6ffff33e782211efb233095aec3b5?s=128&d=identicon&r=PG&f=1", "display_name": "UEForce", "link": "https://stackoverflow.com/users/11170929/ueforce"}, "edited": false, "score": 0, "creation_date": 1552395707, "post_id": 55113005, "comment_id": 96985608, "body": "thanks, the problem has been solved. and my webkit release has been compiled successfully. I added the option &quot;--skip-library-update&quot; when i ran build-webkit :)"}], "tags": [], "owner": {"reputation": 11, "user_id": 11188368, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/4055c9c613e33eb8509d0b3e2fe0ac43?s=128&d=identicon&r=PG", "display_name": "Bleechit", "link": "https://stackoverflow.com/users/11188368/bleechit"}, "is_accepted": false, "score": 1, "last_activity_date": 1552356112, "creation_date": 1552356112, "answer_id": 55113005, "question_id": 55064034, "link": "https://stackoverflow.com/questions/55064034/i-always-fails-when-compiling-webkit-os-windows10-1809-x64/55113005#55113005", "title": "I always fails when compiling WebKit , OS : Windows10 1809 x64", "body": "<p>Sometimes its useful, to place the dll into the system32 directory. I think, that in your case, the mistake is in assiciation. You have both on Win10x64, the x86 and x64 dll's. </p>\n\n<p>I'll suggest, that you try to build on a win7 x86 win32 first. Second step should a contact to the mozilla webkit team.</p>\n\n<p>My experience of Cygwin was a very short one. It's like a toy without battery. </p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 11170929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a6ffff33e782211efb233095aec3b5?s=128&d=identicon&r=PG&f=1", "display_name": "UEForce", "link": "https://stackoverflow.com/users/11170929/ueforce"}, "edited": false, "score": 0, "creation_date": 1552396137, "post_id": 55122233, "comment_id": 96985875, "body": "--------By questioner"}], "tags": [], "owner": {"reputation": 51, "user_id": 11170929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a6ffff33e782211efb233095aec3b5?s=128&d=identicon&r=PG&f=1", "display_name": "UEForce", "link": "https://stackoverflow.com/users/11170929/ueforce"}, "is_accepted": true, "score": 0, "last_activity_date": 1552396545, "last_edit_date": 1552396545, "creation_date": 1552396097, "answer_id": 55122233, "question_id": 55064034, "link": "https://stackoverflow.com/questions/55064034/i-always-fails-when-compiling-webkit-os-windows10-1809-x64/55122233#55122233", "title": "I always fails when compiling WebKit , OS : Windows10 1809 x64", "body": "<p>The problem has been solved by running the command \"perl build-webkit -- skip-library-update\" in PowerShell.\nIt's better to download and extract WebKitAuxiliaryLibrary.zip and WebKitSupportLibrary.zip to the right location first, and then build-webkit.</p>\n"}], "owner": {"reputation": 51, "user_id": 11170929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a6ffff33e782211efb233095aec3b5?s=128&d=identicon&r=PG&f=1", "display_name": "UEForce", "link": "https://stackoverflow.com/users/11170929/ueforce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 1, "accepted_answer_id": 55122233, "answer_count": 3, "score": 0, "last_activity_date": 1552396545, "creation_date": 1552051012, "question_id": 55064034, "link": "https://stackoverflow.com/questions/55064034/i-always-fails-when-compiling-webkit-os-windows10-1809-x64", "title": "I always fails when compiling WebKit , OS : Windows10 1809 x64", "body": "<p>1).Before compiling WebKit, I reinstalled Windows 10. The terminal I used when \n   compiling it was PowerShell.</p>\n\n<p>2).The guide I use is here: <a href=\"https://webkit.org/webkit-on-windows/,I\" rel=\"nofollow noreferrer\">https://webkit.org/webkit-on-windows/,I</a> did not \n   install cygwin.\n   In addition, I set up two environment variables in accordance with another\n   guide: WEBKIT_LIBRARIES &amp; WEBKIT_OUTPUTDIR. This guide is here: \n   <a href=\"https://webkit.org/building-webkit-on-windows\" rel=\"nofollow noreferrer\">https://webkit.org/building-webkit-on-windows</a></p>\n\n<p>3).The main problem is that when I run \"perl build-webkit\" in powershell, \n   it will report an error:\n   \"Free to wrong pool 1b8e80 not 9504a10099d76a14 at\n    C:/Perl64/lib/IO/Socket/SSL.pm line 2739.\n    Can't spawn \"perl Tools/Scripts/update-webkit-support-libs\": No such file\n    or directory at build-webkit line 257.\n    Died at build-webkit line 257.\"</p>\n\n<p>and every time I run this command, I will receive almost the same error, for \n   example, I just ran it again.Then the error is as follows:\n   \"Free to wrong pool e38e80 not 95054c000387c36b at\n    C:/Perl64/lib/IO/Socket/SSL.pm line 2739.\n    Can't spawn \"perl Tools/Scripts/update-webkit-support-libs\": No such\n    file or directory at build-webkit line 257.\n    Died at build-webkit line 257.\"</p>\n\n<p>4). I tried to solve my problem through Google search, but I didn't find any \n    useful content, so give me some help please, thanks.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1552050489, "post_id": 55063862, "comment_id": 96875629, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1552050615, "post_id": 55063862, "comment_id": 96875705, "body": "It looks like you&#39;re trying to find strings that consist of - whitespace followed by one or more uppercase letters or numbers followed by whitespace. I&#39;d start by trying to translate that into a regex."}, {"owner": {"reputation": 13, "user_id": 11170945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1725db1284b330ea605984f52ed0a962?s=128&d=identicon&r=PG&f=1", "display_name": "krrish", "link": "https://stackoverflow.com/users/11170945/krrish"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1552052385, "post_id": 55063862, "comment_id": 96876696, "body": "@Dave Cross I have two issues..First i have to grep only the lines which having Uppercase words at the beginning with a whitespace and in that line &#39;(&#39; has to be present.I want to match these types of line.Uppercase words"}, {"owner": {"reputation": 13, "user_id": 11170945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1725db1284b330ea605984f52ed0a962?s=128&d=identicon&r=PG&f=1", "display_name": "krrish", "link": "https://stackoverflow.com/users/11170945/krrish"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1552052504, "post_id": 55063862, "comment_id": 96876769, "body": "@Dave Cross Second,In that matched line i need to get only the first uppercase  words without any whitespaces..How to achieve the solution?"}, {"owner": {"reputation": 13, "user_id": 11170945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1725db1284b330ea605984f52ed0a962?s=128&d=identicon&r=PG&f=1", "display_name": "krrish", "link": "https://stackoverflow.com/users/11170945/krrish"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1552052596, "post_id": 55063862, "comment_id": 96876819, "body": "@DaveCross I have tried with regular expressions like /[A-Z]\\s+/..But,it is not working properly..So,I need a proper solution for the two constraints."}, {"owner": {"reputation": 3800, "user_id": 1807452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PfAC9.jpg?s=128&g=1", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/1807452/rahul-sharma"}, "edited": false, "score": 0, "creation_date": 1552052757, "post_id": 55063862, "comment_id": 96876899, "body": "Try this regex: <code>^[A-Z0-9]+</code> Working example: <a href=\"https://regex101.com/r/KsUnzM/1/\" rel=\"nofollow noreferrer\">regex101.com/r/KsUnzM/1</a>"}, {"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "reply_to_user": {"reputation": 3800, "user_id": 1807452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PfAC9.jpg?s=128&g=1", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/1807452/rahul-sharma"}, "edited": false, "score": 0, "creation_date": 1552053520, "post_id": 55063862, "comment_id": 96877314, "body": "@RahulSharma &quot;Expected output :- [Match First uppercase words only]&quot;, so if the input starts with anything else than a number or uppercase letter, this regex won&#39;t fulfill krrish&#39;s requirement"}, {"owner": {"reputation": 3800, "user_id": 1807452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PfAC9.jpg?s=128&g=1", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/1807452/rahul-sharma"}, "reply_to_user": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1552054588, "post_id": 55063862, "comment_id": 96877879, "body": "@Chris, you mean white space or any other special character? For white space, you can do this <code>^[\\sA-Z0-9]+</code>. You can add more character classes as per your requirement."}, {"owner": {"reputation": 13, "user_id": 11170945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1725db1284b330ea605984f52ed0a962?s=128&d=identicon&r=PG&f=1", "display_name": "krrish", "link": "https://stackoverflow.com/users/11170945/krrish"}, "reply_to_user": {"reputation": 3800, "user_id": 1807452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PfAC9.jpg?s=128&g=1", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/1807452/rahul-sharma"}, "edited": false, "score": 0, "creation_date": 1552059396, "post_id": 55063862, "comment_id": 96880478, "body": "@RahulSharma Do you have any idea about  my first constraint?.. Match the line which having Uppercase word with a whitespace and in that same line should have &#39;(&#39; anywhere in that line.."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1552059430, "post_id": 55063862, "comment_id": 96880498, "body": "@krrish: My point was really that we&#39;re not here to give you answers when you can&#39;t show much effort yourself. If this is coursework, then you should go back to your lecturer to ask for more instruction. If it is for work then you should ask your colleagues for help."}, {"owner": {"reputation": 13, "user_id": 11170945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1725db1284b330ea605984f52ed0a962?s=128&d=identicon&r=PG&f=1", "display_name": "krrish", "link": "https://stackoverflow.com/users/11170945/krrish"}, "edited": false, "score": 0, "creation_date": 1552059491, "post_id": 55063862, "comment_id": 96880532, "body": "Example : AFSAS245F gdsgasdg (agadsg, [correct output]..because having uppercase words at beginning and having &#39;(&#39; character in that line.."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1552059505, "post_id": 55063862, "comment_id": 96880546, "body": "@krrish: <i>and in that line &#39;(&#39; has to be present</i> You haven&#39;t mentioned this requirement in your question at all. Programming is about precision and accuracy. Unless you share all of the requirements, no-one will give you a complete answer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1552060127, "post_id": 55063862, "comment_id": 96880839, "body": "@krrish: If you want help, your best bet is to <a href=\"https://stackoverflow.com/posts/55063862/edit\">edit your question</a> to add a complete runnable example, with input data and showing us the expected output. And explain <b>all</b> of the rules that you are following to create the output. And do it soon. Your question is in danger of being closed."}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1552061080, "creation_date": 1552061080, "answer_id": 55066865, "question_id": 55063862, "link": "https://stackoverflow.com/questions/55063862/matching-uppercase-words/55066865#55066865", "title": "Matching Uppercase words", "body": "<p><em>This isn't an answer to your question (so I'm fine with it being deleted if people think that's appropriate), but I thought it would be useful to show you how this question should have been asked.</em></p>\n\n<p>I'm trying to filter data out of the input below. I'm trying to extract the first whitespace-delimited word that consists solely of uppercase letters and digits. In addition, I need to ignore lines that don't contain <code>(</code>.</p>\n\n<p>Here's a test program.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nwhile (&lt;DATA&gt;) {\n  # This is where I need help. This regex obviously doesn't work\n  print if /[A-Z]\\s+/;\n}\n\n__DATA__\nAFSAS245F gdsgasdg (agadsg,asdgasdg, .ASFH(gasdgsadg) )\nASG23XLG hasdg (dagad, SgAdsga, .FG(haha))\n</code></pre>\n\n<p>The output I'm expecting from this is:</p>\n\n<pre><code>AFSAS245F\nASG23XLG\n</code></pre>\n\n<p><em>(It's also worth pointing out that this isn't particularly good test data. You should include a line that doesn't have <code>(</code> in it - as that tests an important part of the requirements.)</em></p>\n"}, {"tags": [], "owner": {"reputation": 386, "user_id": 8519830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5uN6E.jpg?s=128&g=1", "display_name": "monok", "link": "https://stackoverflow.com/users/8519830/monok"}, "is_accepted": true, "score": 0, "last_activity_date": 1552062051, "creation_date": 1552062051, "answer_id": 55067116, "question_id": 55063862, "link": "https://stackoverflow.com/questions/55063862/matching-uppercase-words/55067116#55067116", "title": "Matching Uppercase words", "body": "<pre><code>  print \"$1\\n\" if /^([A-Z0-9]+)\\s+.*\\(/;\n</code></pre>\n\n<p>this prints only the first word (followed by a newline char) if the line starts with that word followed by space(s) and a ( somewhere after. </p>\n"}], "owner": {"reputation": 13, "user_id": 11170945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1725db1284b330ea605984f52ed0a962?s=128&d=identicon&r=PG&f=1", "display_name": "krrish", "link": "https://stackoverflow.com/users/11170945/krrish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 55067116, "answer_count": 2, "score": -1, "last_activity_date": 1552062051, "creation_date": 1552050424, "question_id": 55063862, "link": "https://stackoverflow.com/questions/55063862/matching-uppercase-words", "title": "Matching Uppercase words", "body": "<p>How to match following words easily using regular expression in Perl ?</p>\n\n<p><strong>Example</strong></p>\n\n<p>AFSAS245F gdsgasdg (agadsg,asdgasdg, .ASFH(gasdgsadg) )</p>\n\n<p>ASG23XLG  hasdg (dagad, SgAdsga, .FG(haha))</p>\n\n<p><strong>Expected output</strong> :-\n[Match First uppercase words only]</p>\n\n<p>AFSAS245F</p>\n\n<p>ASG23XLG</p>\n"}, {"tags": ["perl", "csv", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1552041619, "post_id": 55061379, "comment_id": 96870947, "body": "yes right, so do you mean i just can pass a physical file location? so i HAVE TO take the content of $newCsv, save it on my system and then load it as parameter? is there no other solution?"}, {"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1552042852, "post_id": 55061379, "comment_id": 96871578, "body": "unfortunate not: <a href=\"https://mojolicious.org/perldoc/Mojolicious/Controller#param\" rel=\"nofollow noreferrer\">mojolicious.org/perldoc/Mojolicious/Controller#param</a> if there&#39;s no other way, i have to take the content of $newCsv and save it as a .csv file, but i really would like to avoid this. btw thanks for your answer"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552068227, "post_id": 55061379, "comment_id": 96884762, "body": "The upload object (<a href=\"https://metacpan.org/pod/Mojo::Upload\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojo::Upload</a>) may or may not save the asset to a file depending on size. You can obtain a file via the following: <code>my $temp = $upload-&gt;asset-&gt;to_file; my $filename = $temp-&gt;path;</code> (note: <code>$temp</code> may delete the temporary file once it goes out of scope) or you can write it to a specific non-temporary filename with <code>$upload-&gt;move_to($path)</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1552041398, "creation_date": 1552041398, "answer_id": 55061379, "question_id": 55061187, "link": "https://stackoverflow.com/questions/55061187/textcsv-xs-no-such-file-or-directory-at/55061379#55061379", "title": "Text::CSV_XS No such file or directory at", "body": "<p>You are sending the contents of the CSV file as an argument to the _loadCsv, which expects the <em>file location</em> to be the argument.</p>\n"}], "owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 55061379, "answer_count": 1, "score": 1, "last_activity_date": 1552041398, "creation_date": 1552040748, "question_id": 55061187, "link": "https://stackoverflow.com/questions/55061187/textcsv-xs-no-such-file-or-directory-at", "title": "Text::CSV_XS No such file or directory at", "body": "<p>on my webapp (with Mojolicious), a user can upload a csv file, but i am unable to \"save\" it in a state variable, error: </p>\n\n<pre><code>[2019-03-08 11:06:07.40615] [2095] [error] \u00ef\u00bb\u00bftest1 ;test2;test 3;Test4;\"TES;T5\"\n10;20;30;40;\"asd;asd,asd\"\n11;12;13;14;15\n100;95;90;85;80\n: No such file or directory at /media/sf_projects/my_app/script/../lib/MyApp/Plugin/Csv.pm line 15.\n</code></pre>\n\n<p>so as we can see, the error also shows the content of my csv...</p>\n\n<p>Bizarrely it works, when i load a csv file from my hdd (w/o the webapp).</p>\n\n<p>code of the sub that's called by the post method:</p>\n\n<pre><code>  return $self-&gt;redirect_to('/') unless my $newCsv = $self-&gt;req-&gt;upload('fileToUpload')-&gt;slurp;\n  $self-&gt;csv_load($newCsv);\n</code></pre>\n\n<p>\"csv_load\" is in a mojo plugin (the plugin of the error message Plugin/Csv.pm) which calls the following sub:</p>\n\n<pre><code>sub _loadCsv {\n    my $controller = shift;\n    my $fileLocation = shift;\n    my $file = csv( in =&gt; $fileLocation, #this is line 15 of the error\n                    headers =&gt; 'auto',\n                    sep =&gt; ';');\n    $controller-&gt;csvModel-&gt;set_array($file);\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious", "morbo"], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": true, "score": 1, "last_activity_date": 1552033851, "creation_date": 1552033851, "answer_id": 55059351, "question_id": 55059064, "link": "https://stackoverflow.com/questions/55059064/problem-with-mojoioloop-timer-before-redirect/55059351#55059351", "title": "Problem with Mojo::IOLoop timer before redirect", "body": "<p><code>upload</code> returns after <code>Mojo::IOLoop-&gt;timer</code> and nothing waits for the timer. You can try using <a href=\"https://mojolicious.org/perldoc/Mojo/IOLoop#delay\" rel=\"nofollow noreferrer\">Mojo::IOLoop->delay</a> and <code>$delay-&gt;wait</code> instead. But I am not sure how it works. So it might be equivalent to just <code>sleep</code>.</p>\n\n<p>Do you really need to redirect from perl code? You can render some js with <code>setTimeout</code> for the same effect.</p>\n\n<p>In fact I would recommend moving all text and redirecting to js and render only json with some status information inside <code>upload</code>. So you can implement better UI with error handling.</p>\n"}, {"comments": [{"owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 0, "creation_date": 1552077182, "post_id": 55068484, "comment_id": 96888782, "body": "thanks for your answer. I have chosen the 3rd solution :) : i implemented a JS-script with a timeout in my .html. do you think this solution is practicable too, or it&#39;s not &quot;the best&quot; solution?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "edited": false, "score": 1, "creation_date": 1552077379, "post_id": 55068484, "comment_id": 96888865, "body": "@Chris I think it&#39;s fine for what you want to accomplish, the only benefit of the meta-refresh approach is that it doesn&#39;t require the user to enable javascript."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1552067522, "creation_date": 1552067522, "answer_id": 55068484, "question_id": 55059064, "link": "https://stackoverflow.com/questions/55059064/problem-with-mojoioloop-timer-before-redirect/55068484#55068484", "title": "Problem with Mojo::IOLoop timer before redirect", "body": "<p><code>redirect_to</code> is effectively a <code>render</code> that renders a HTTP 302 response to redirect. You cannot render twice, so even if you keep the transaction around until the <code>redirect_to</code> call, it would have already rendered the page. So there are two actual options for what you are trying to do; render a page with javascript that will perform the redirect after a timeout, or render an HTML page with a meta refresh tag which will cause the page to redirect after a delay. This <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections#Alternative_way_of_specifying_redirections\" rel=\"nofollow noreferrer\">MDN page</a> discusses both approaches.</p>\n"}], "owner": {"reputation": 624, "user_id": 10023107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GLme.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/10023107/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 55059351, "answer_count": 2, "score": 1, "last_activity_date": 1552068019, "creation_date": 1552032658, "last_edit_date": 1552068019, "question_id": 55059064, "link": "https://stackoverflow.com/questions/55059064/problem-with-mojoioloop-timer-before-redirect", "title": "Problem with Mojo::IOLoop timer before redirect", "body": "<p>i have a sub in my Mojolicious Controller which is called when a csv file is uploaded through a http post.\nAfter the file is uploaded, a message gets rendered that say \"you will be redirected in x seconds\".\nso i want to implement Mojo::IOLoop::Delay and as callback i use the redirect statement. But i get the following error by Morbo:</p>\n\n<pre><code>Mojo::Reactor::EV: Timer failed: Transaction already destroyed at /usr/local/share/perl/5.22.1/Mojolicious/Plugin/DefaultHelpers.pm line 168.\n</code></pre>\n\n<p>controller code:</p>\n\n<pre><code>sub upload {\n    my $self = shift;\n      # Check file size\n      return $self-&gt;render(text =&gt; 'File is too big.', status =&gt; 200)\n      if $self-&gt;req-&gt;is_limit_exceeded;\n\n  # Process uploaded file\n  return $self-&gt;redirect_to('/') unless my $newCsv = $self-&gt;param('fileToUpload');\n  my $size = $newCsv-&gt;size;\n  my $name = $newCsv-&gt;filename;\n  my $delay = 2;\n  $self-&gt;render(text =&gt; \"Thanks for uploading $size byte file $name.&lt;br&gt;\n    You will be redirected in $delay seconds\");\n  Mojo::IOLoop-&gt;timer($delay =&gt; sub {\n    $self-&gt;redirect_to('/');\n    });\n}\n</code></pre>\n\n<p>relevant routes:</p>\n\n<pre><code>$r-&gt;get('/')-&gt;to(controller =&gt; 'main', action =&gt; 'index');\n$r-&gt;post('/uploadCsv')-&gt;to(controller =&gt; 'main', action =&gt; 'upload')-&gt;name('uploadCsv');\n</code></pre>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["perl", "perlbrew"], "comments": [{"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 2, "creation_date": 1551996608, "post_id": 55053455, "comment_id": 96856861, "body": "Can you <code>curl</code> the file and get it? If not, there&#39;s a networking issue rather than a <code>perlbrew</code> one."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 1, "creation_date": 1551996757, "post_id": 55053455, "comment_id": 96856919, "body": "If <code>curl</code> works as per @JoeMcMahon&#39;s comment for <code>5.28.1</code> (which would indicate the network is ok), try installing a different version of perl with <code>perlbrew</code>."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1551998184, "post_id": 55053455, "comment_id": 96857362, "body": "yep, curl worked, maybe an issue with Perlbrew, I don&#39;t know"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552004039, "post_id": 55053455, "comment_id": 96859142, "body": "Are you using the latest version of perlbrew (0.86)?"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552027573, "creation_date": 1551995918, "last_edit_date": 1552027573, "question_id": 55053455, "link": "https://stackoverflow.com/questions/55053455/perlbrew-cannot-download-latest-tarball", "title": "Perlbrew cannot download latest tarball", "body": "<p>I've installed perlbrew on my Ubuntu 18.04 VM, but I cannot download the latest version,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>con@con-VirtualBox:~/20190305_concordance$ perlbrew install 5.28.1\n</code></pre>\n\n<p>gives error</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Fetching perl 5.28.1 as /home/con/perl5/perlbrew/dists/perl-5.28.1.tar.gz\nDownload http://www.cpan.org/authors/id/S/SH/SHAY/perl-5.28.1.tar.gz to /home/con/perl5/perlbrew/dists/perl-5.28.1.tar.gz\nERROR: Failed to download http://www.cpan.org/authors/id/S/SH/SHAY/perl-5.28.1.tar.gz\n</code></pre>\n\n<p>Why is this happening? How can I get perlbrew to install the latest version?</p>\n"}, {"tags": ["perl", "sql-injection", "dbi"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1551988138, "post_id": 55051704, "comment_id": 96853329, "body": "You want the second one, except without the single quotes around the question mark. They make it a string, not a parameter (and use <code>$sth-&gt;execute($user);</code> of course). The first and third are equivalent and have the same injection vulnerability."}, {"owner": {"reputation": 153, "user_id": 3744915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d31044df4b6652456b42e8c39b20f770?s=128&d=identicon&r=PG&f=1", "display_name": "eins6180", "link": "https://stackoverflow.com/users/3744915/eins6180"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1551994474, "post_id": 55051704, "comment_id": 96856018, "body": "@Shawn: Thanks for the explanation!"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 3744915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d31044df4b6652456b42e8c39b20f770?s=128&d=identicon&r=PG&f=1", "display_name": "eins6180", "link": "https://stackoverflow.com/users/3744915/eins6180"}, "edited": false, "score": 0, "creation_date": 1551994523, "post_id": 55052274, "comment_id": 96856046, "body": "Thanks for this nice answer and all the extra information!"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552004147, "post_id": 55052274, "comment_id": 96859170, "body": "I would add to this excellent answer that prepare isn&#39;t even necessary to use bound parameters safely. The second example is equivalent to <code>$dbh-&gt;do(&#39;SELECT * FROM Users WHERE user=?&#39;, undef, $user);</code>, which depending on the DBI driver may optimize out the statement prepare step."}], "tags": [], "owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "is_accepted": true, "score": 6, "last_activity_date": 1551994483, "last_edit_date": 1551994483, "creation_date": 1551990417, "answer_id": 55052274, "question_id": 55051704, "link": "https://stackoverflow.com/questions/55051704/avoiding-sql-injections-with-prepare-and-execute/55052274#55052274", "title": "Avoiding SQL injections with prepare and execute", "body": "<pre><code>my $sth = $dbh-&gt;prepare(\"SELECT * FROM Users WHERE user='?'\");\n</code></pre>\n\n<p>This won't work because it's searching for a literal <code>'?'</code> character \u2014 not a parameter. If you try to send a value for the parameter, MySQL will be like, \"what do you want me to do with this?\" because the query has no parameter placeholder.</p>\n\n<p>If you want to use a parameter, you must NOT put the parameter placeholder inside string delimiters in the SQL query, even if the parameter will take string or datetime value:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"SELECT * FROM Users WHERE user=?\");\n</code></pre>\n\n<p>The next example:</p>\n\n<pre><code>$sql_query = \"SELECT * FROM Users WHERE user='\" . $user . \"'\";\n$dbh-&gt;prepare($sql_query);\n$dbh-&gt;execute();\n</code></pre>\n\n<p>That will run the query, but it's NOT safe. You can prepare any query even if it has no parameters. </p>\n\n<p>Using <code>prepare()</code> is not what makes queries safe from SQL injection. What makes it safer is using parameters to combine dynamic values instead of doing string-concatenation like you're doing in this example.</p>\n\n<p>But using parameters does require the use of <code>prepare()</code>.</p>\n\n<p>PS: You don't need to put <code>;</code> at the end of your SQL queries when you run them one at a time programmatically. The separator is only needed if you run multiple queries, like in an SQL script, or in a stored procedure. In your examples, the <code>;</code> is harmless but MySQL doesn't require it, and it will just ignore it.</p>\n"}], "owner": {"reputation": 153, "user_id": 3744915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d31044df4b6652456b42e8c39b20f770?s=128&d=identicon&r=PG&f=1", "display_name": "eins6180", "link": "https://stackoverflow.com/users/3744915/eins6180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 55052274, "answer_count": 1, "score": 3, "last_activity_date": 1551994483, "creation_date": 1551987883, "question_id": 55051704, "link": "https://stackoverflow.com/questions/55051704/avoiding-sql-injections-with-prepare-and-execute", "title": "Avoiding SQL injections with prepare and execute", "body": "<p>A line of code like</p>\n\n<pre><code>my $sql_query = \"SELECT * FROM Users WHERE user='$user';\";\n</code></pre>\n\n<p>might introduce an SQL injection vulnerability into your program. To avoid this one could use something like</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare(\"SELECT * FROM Users WHERE user='?';\");\n$dbh-&gt;execute($user);\n</code></pre>\n\n<p>However, in the code I am currently working on the following is used</p>\n\n<pre><code>$sql_query = \"SELECT * FROM Users WHERE user='\" . $user . \"';\";\n$dbh-&gt;prepare($sql_query);\n$dbh-&gt;execute();\n</code></pre>\n\n<p>Does this actually work? If yes, are there any differences to what I would have done? What are the advantages and disadvantages?</p>\n"}, {"tags": ["css", "perl", "gtk3"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "edited": false, "score": 1, "creation_date": 1552031337, "post_id": 55053604, "comment_id": 96866024, "body": "Thanks H&#229;kon, you&#39;re the best!"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1551996568, "creation_date": 1551996568, "answer_id": 55053604, "question_id": 55050152, "link": "https://stackoverflow.com/questions/55050152/perl-gtk3-add-a-background-image-to-a-window/55053604#55053604", "title": "Perl/Gtk3, add a background image to a window", "body": "<blockquote>\n  <p>I'm trying to add a background image to a window. Using CSS styles,\n  it's simple enough, but I only want to add the image to a single\n  window, not all of them.</p>\n</blockquote>\n\n<p>Just remove the screen provider (and keep the window provider). So comment out the line:</p>\n\n<pre><code>Gtk3::StyleContext::add_provider_for_screen($screen, $provider, 600);\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 6920800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aad840893bf8dddaa9bae758c57b78?s=128&d=identicon&r=PG&f=1", "display_name": "lesrol", "link": "https://stackoverflow.com/users/6920800/lesrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 2, "accepted_answer_id": 55053604, "answer_count": 1, "score": 1, "last_activity_date": 1551996568, "creation_date": 1551981663, "question_id": 55050152, "link": "https://stackoverflow.com/questions/55050152/perl-gtk3-add-a-background-image-to-a-window", "title": "Perl/Gtk3, add a background image to a window", "body": "<p>I'm trying to add a background image to a window. Using CSS styles, it's simple enough, but I only want to add the image to a single window, not all of them.</p>\n\n<p>The script below creates two Gtk windows, one with CSS, the other without. It doesn't work because the CSS style is added to both windows.</p>\n\n<p>I would be happy to add a background image to a Gtk3::Frame, or a Gtk3::Box, or even to avoid CSS altogether, but I can't get any of these methods to work.</p>\n\n<p>I think the code is <em>almost</em> right, because it <em>does</em> work for adding a background image to just one Gtk3::TextView (but not both of them).</p>\n\n<pre><code>#!/usr/bin/perl\npackage bgtest;\n\nuse strict;\nuse diagnostics;\nuse warnings;\n\nuse Gtk3 '-init';\nuse Glib qw(TRUE FALSE);\nuse Cairo;\n\n&amp;drawWin(FALSE);\n&amp;drawWin(TRUE);\n\nGtk3-&gt;main();\n\nsub drawWin {\n\n    my ($cssFlag) = @_;\n\n    my $window = Gtk3::Window-&gt;new('toplevel');\n    $window-&gt;set_position('center');\n    $window-&gt;set_default_size(400, 300);\n    $window-&gt;signal_connect('delete-event' =&gt; sub {\n\n        Gtk3-&gt;main_quit();\n        exit;\n    });\n\n    if ($cssFlag) {\n\n        # Set up the window's background image using a CSS style\n        $window-&gt;set_title('CSS ON');\n\n        my $imagePath = \"/home/YOURNAME/bg.png\";\n\n        my $provider = Gtk3::CssProvider-&gt;new();\n        my $display = Gtk3::Gdk::Display::get_default();\n        my $screen = Gtk3::Gdk::Display::get_default_screen($display);\n        Gtk3::StyleContext::add_provider_for_screen($screen, $provider, 600);\n\n        my $theming = \"#my_win_id, window.background {\\n\";\n        $theming .= \"   background-image: url(\\\"$imagePath\\\");\\n\";\n        $theming .= \"   background-repeat: repeat;\\n\";\n        $theming .= \"   background-position: top left;\\n\";\n        $theming .= \"}\";\n\n        $provider-&gt;load_from_data ([map ord, split //, $theming]);\n\n        my $context = $window-&gt;get_style_context();\n        $context-&gt;add_provider($provider, 600);\n\n    } else {\n\n        # Don't use a background image\n        $window-&gt;set_title('CSS OFF');\n    }\n\n    $window-&gt;show_all();\n\n    return $window;\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11131173, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yZkMG0izOcs/AAAAAAAAAAI/AAAAAAAABSY/TYzDpKUJcnw/photo.jpg?sz=128", "display_name": "Michael Patlovich", "link": "https://stackoverflow.com/users/11131173/michael-patlovich"}, "edited": false, "score": 0, "creation_date": 1552935342, "post_id": 55051145, "comment_id": 97191090, "body": "In trying that I still got a ton of information from the Cisco switch but the Dell still returns &quot;show interface status&quot; as the return."}], "tags": [], "owner": {"reputation": 1, "user_id": 11167322, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/53f15f309d5537aab7ff97d3728f119e?s=128&d=identicon&r=PG", "display_name": "TRSi", "link": "https://stackoverflow.com/users/11167322/trsi"}, "is_accepted": false, "score": 0, "last_activity_date": 1551985688, "creation_date": 1551985688, "answer_id": 55051145, "question_id": 55049185, "link": "https://stackoverflow.com/questions/55049185/perl-nettelnetcisco-cmd-not-returning-response-for-dell-servers/55051145#55051145", "title": "Perl Net::Telnet::Cisco cmd not returning response for Dell servers", "body": "<p>A frozen shaking me overcomes still. You may fail, because a missing chomp() to dispatch from the false linebreak in a double.</p>\n\n<p>I'll not expect, that sidepass coders understand, what i said. It's a shame, that through these years, just sometimes leaved qualified code.</p>\n\n<p>And when i see, what kind of understatements arounds, there is no hope for pricipal riders.</p>\n"}], "owner": {"reputation": 11, "user_id": 11131173, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yZkMG0izOcs/AAAAAAAAAAI/AAAAAAAABSY/TYzDpKUJcnw/photo.jpg?sz=128", "display_name": "Michael Patlovich", "link": "https://stackoverflow.com/users/11131173/michael-patlovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551985688, "creation_date": 1551977966, "question_id": 55049185, "link": "https://stackoverflow.com/questions/55049185/perl-nettelnetcisco-cmd-not-returning-response-for-dell-servers", "title": "Perl Net::Telnet::Cisco cmd not returning response for Dell servers", "body": "<p>I post a question a week ago but I really did not get anywhere with is so I have changed modules that I am using and I believe I am getting further. The following code is basically trying to get information from Cisco and Dell servers.</p>\n\n<pre><code>$swConn = Net::SSH2::Cisco-&gt;new(Host =&gt; \"$switchname.something\", Prompt =&gt;  \n\n'/' . $switch .'#/') or push(@skipFailedSwitches, $switch);\n\n##############################################################################\n# Changes for Cisco Nexus 5020 Switch start here\n#\n# Included the code for varying the password depending on switch\n##############################################################################\n\n\n    $password = #mypassword;\n\n\n  print \"logging into $switchname.something  with username $username and password $password \\n\"; #SBW\n\n  if (not $swConn-&gt;login($username, $password)){\n    push(@skipFailedSwitches, $switch);\n    next;\n  }\n  #$swConn-&gt;login(Password =&gt; #mypassword);\n#$fh = $swConn-&gt;input_log();\n\n$swConn-&gt;cmd('terminal length 0') or push(@skipFailedSwitches, $switch);\nprint my @statusOut = $swConn-&gt;cmd('show interface status') or push(@skipFailedSwitches, $switch);\n</code></pre>\n\n<p>My issue is that with Cisco, the print statement at the end returns what the server console returns, while the Dell just returns what I sent it (i.e. \"some information that I need\" versus \"show interface status\"). Any ideas?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 19796, "user_id": 468327, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147?s=128&d=identicon&r=PG", "display_name": "Joel Berger", "link": "https://stackoverflow.com/users/468327/joel-berger"}, "is_accepted": true, "score": 7, "last_activity_date": 1551973419, "last_edit_date": 1551973419, "creation_date": 1551973090, "answer_id": 55047573, "question_id": 55047234, "link": "https://stackoverflow.com/questions/55047234/moo-object-extends-order/55047573#55047573", "title": "Moo object extends order", "body": "<p>Since you mutate the array in question, you don't want a reference to the array that you use as the default <code>\\@list</code>, you want to take a shallow copy <code>[@list]</code>.</p>\n\n<pre><code>package t;\n\nuse Moo;\nuse Types::Standard qw(ArrayRef);\n\nmy @list = qw/foo bar baz/;\n\nhas list =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; ArrayRef,\n        builder =&gt;\n    default =&gt; sub { [@list] }\n);\n\npackage u;\n\nuse Moo;\nuse Types::Standard qw(ArrayRef);\nextends 't';\n\nsub BUILD {\n    my ($self) = @_;\n\n    push @{$self-&gt;list()}, qw/apple banana/;\n    return $self;\n}\n\npackage main;\n\nuse Data::Printer;\n\nmy $u = u-&gt;new();\np $u-&gt;list();\n\nmy $t = t-&gt;new();\np $t-&gt;list();\n</code></pre>\n\n<hr>\n\n<p>While I'm at it, using BUILD to modify an attribute is possible but not necessarily the best. You can use something like a lazy attribute with a builder method, then overload that method in the subclass, ala</p>\n\n<pre><code>package t;\n\nuse Moo;\nuse Types::Standard qw(ArrayRef);\n\nmy @list = qw/foo bar baz/;\n\nhas list =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; ArrayRef,\n    builder =&gt; '_build_list',\n    lazy =&gt; 1,\n);\n\nsub _build_list {\n  my $self = shift;\n  return [@list];\n}\n\npackage u;\n\nuse Moo;\nextends 't';\n\nsub _build_list {\n  my $self = shift;\n  my $list = $self-&gt;SUPER::_build_list();\n  push @$list, qw/apple banana/;\n  return $list;\n}\n\npackage main;\n\nuse Data::Printer;\n\nmy $u = u-&gt;new();\np $u-&gt;list();\n\nmy $t = t-&gt;new();\np $t-&gt;list();\n</code></pre>\n"}], "owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 55047573, "answer_count": 1, "score": 4, "last_activity_date": 1551973419, "creation_date": 1551972065, "question_id": 55047234, "link": "https://stackoverflow.com/questions/55047234/moo-object-extends-order", "title": "Moo object extends order", "body": "<p>Give the below code, it appears that the order you instatiate the objects matter. The below code will print the same list for both objects when i would expect a different list for each because list is an instance attribute that is created at BUILD time.</p>\n\n<pre><code>package t;\n\nuse Moo;\nuse Types::Standard qw(ArrayRef);\n\nmy @list = qw/foo bar baz/;\n\nhas list =&gt; (\n    is =&gt; 'rw',\n    isa =&gt; ArrayRef,\n    default =&gt; sub {\\@list}\n);\n\n1;\n---\npackage u;\n\nuse Moo;\nuse Types::Standard qw(ArrayRef);\nextends 't';\n\nsub BUILD {\n    my ($self) = @_;\n\n    push @{$self-&gt;list()}, qw/apple banana/;\n    return $self;\n}\n1;\n---\n#!perl\n\nuse Data::Printer;\nuse t;\nuse u;\n\nmy $u = u-&gt;new();\np $u-&gt;list();\n\nmy $t = t-&gt;new();\np $t-&gt;list();\n</code></pre>\n\n<p>Current Output:</p>\n\n<pre><code>\\ [\n    [0] \"foo\",\n    [1] \"bar\",\n    [2] \"baz\",\n    [3] \"apple\",\n    [4] \"banana\"\n]\n\\ [\n    [0] \"foo\",\n    [1] \"bar\",\n    [2] \"baz\",\n    [3] \"apple\",\n    [4] \"banana\"\n]\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>\\ [\n    [0] \"foo\",\n    [1] \"bar\",\n    [2] \"baz\",\n    [3] \"apple\",\n    [4] \"banana\"\n]\n\\ [\n    [0] \"foo\",\n    [1] \"bar\",\n    [2] \"baz\"\n]\n</code></pre>\n"}, {"tags": ["perl", "import", "module", "reference", "constants"], "comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551988061, "post_id": 55046430, "comment_id": 96853290, "body": "@zdim: It&#39;s exactly the code presented in <code>man perlmod(1)</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551988756, "post_id": 55046430, "comment_id": 96853624, "body": "ugh, you are right ... somebody should edit that, to not confuse people.  It&#39;s a discussion with a point, no question, and that had been of practical relevance (20 years ago?), but that&#39;s not how we set up a module.  See <a href=\"https://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">Exporter</a> for a much simpler and clearer info (boilerplate) for that.  And many SO posts of course, starting with ikegami&#39;s answer here"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1552005577, "post_id": 55046430, "comment_id": 96859490, "body": "@zdim I&#39;ve opened a perlbug with a patch: <a href=\"https://rt.perl.org/Ticket/Display.html?id=133909\" rel=\"nofollow noreferrer\">rt.perl.org/Ticket/Display.html?id=133909</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552017169, "post_id": 55046430, "comment_id": 96861935, "body": "@Grinnz Great, thank you. I looked over that part again, and it is indeed offered as a simple and practical overview of a module (so to speak). It should really be fixed."}], "answers": [{"comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1551971604, "post_id": 55046824, "comment_id": 96844423, "body": "That doesn&#39;t work in Perl 5.20 I get a <code>Undefined subroutine &amp;main::AR</code> error message when using the AR() method you suggest"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1551974998, "post_id": 55046824, "comment_id": 96846566, "body": "Odd, I&#39;m on Perl 5.20.2 and it defiantly fails, which is why I added my answer. I guess someone fixed a bug between our two versions"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551984450, "post_id": 55046824, "comment_id": 96851521, "body": "All three solutions work fine in 5.20. In fact, they work fine in all versions from 5.6 to present (5.28) if you remove <code>require 5.018_000;</code>."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551988640, "post_id": 55046824, "comment_id": 96853574, "body": "@ikegami: Want to comment on <code>require 5.018_000</code>? I thought it enables language feature up to Perl 5.18 (which is the version I had been using)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551988753, "post_id": 55046824, "comment_id": 96853623, "body": "It just ensures the interpreter version is 5.18+. Totally unneeded for your program"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552006000, "post_id": 55046824, "comment_id": 96859581, "body": "Another &quot;runtime workaround&quot; would be <code>Test::AR-&gt;[1]</code>"}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552229925, "post_id": 55046824, "comment_id": 96922651, "body": "@Grinnz: Wouldn&#39;t that work even without any import?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1552242673, "post_id": 55046824, "comment_id": 96926586, "body": "@U.Windl Yes, thus it does not rely on whether the import happens at compile time"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1551970761, "creation_date": 1551970761, "answer_id": 55046824, "question_id": 55046430, "link": "https://stackoverflow.com/questions/55046430/how-to-import-a-constant-with-use-strict-avoiding-cant-use-bareword-as/55046824#55046824", "title": "How to import a constant with &quot;use strict&quot;, avoiding &quot;Can&#39;t use bareword ... as an ARRAY ref&quot;", "body": "<p>The <code>print AR-&gt;[1]</code> statement is parsed during compile time but the constant <code>AR</code> isn't imported into the <code>main</code> namespace until runtime.</p>\n\n<p>The fix is to make sure that <code>AR</code> gets imported into <code>main</code> at compile-time</p>\n\n<pre><code>BEGIN { Test-&gt;import( qw(AR) ) }\n</code></pre>\n\n<p>There are also run-time workarounds</p>\n\n<pre><code>print &amp;AR-&gt;[1], \"\\n\";\nprint AR()-&gt;[1], \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1551983811, "post_id": 55047423, "comment_id": 96851238, "body": "This change doesn&#39;t help at all."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 1, "last_activity_date": 1551972630, "creation_date": 1551972630, "answer_id": 55047423, "question_id": 55046430, "link": "https://stackoverflow.com/questions/55046430/how-to-import-a-constant-with-use-strict-avoiding-cant-use-bareword-as/55047423#55047423", "title": "How to import a constant with &quot;use strict&quot;, avoiding &quot;Can&#39;t use bareword ... as an ARRAY ref&quot;", "body": "<p>I changed </p>\n\n<pre><code>BEGIN {\n    require Exporter;\n    our $VERSION = 1.00;                # for version checking\n    # Inherit from Exporter to export functions and variables\n    our @ISA = qw(Exporter);\n    our @EXPORT = qw();                 # exported by default\n    our @EXPORT_OK = qw(AR);            # can be optionally exported\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code># Inherit from Exporter to export functions and variables\nuse parent 'Exporter';\nour $VERSION = 1.00;                # for version checking\nour @EXPORT = qw();                 # exported by default\nour @EXPORT_OK = qw(AR);            # can be optionally exported\n</code></pre>\n\n<p>and your code now works</p>\n\n<p>I suspect that there is some code in Exporter that has to be run before you set up your <code>@EXPORT_OK</code> variable</p>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1551988437, "post_id": 55050482, "comment_id": 96853477, "body": "So the real trick is <code>$INC{&quot;Test.pm&quot;} = 1</code> and using a normal <code>use Test</code>? May I ask what does not work with my code? Also, it it possible to make <code>&quot;test.pm&quot;</code> independent of the actual file name being used?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1551988977, "post_id": 55050482, "comment_id": 96853741, "body": "No, I clearly listed two steps to &quot;the trick&quot;, and that&#39;s only one of them. /// The name of the key in <code>%INC</code> in based on the package&#39;s name (i.e. based on the name the module world have), not the script&#39;s name."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1552004532, "post_id": 55050482, "comment_id": 96859254, "body": "@U.Windl The reason your code did not work as you expect is specifically because you are defining the module in the same file as you are using it, and at compile time (when you want to import the symbols to use for later) the module has thus not been run yet, and neither has your <code>import</code> call. If you keep modules in separate files, everything will work normally because the module will be compiled, run, and imported from in your script&#39;s compile phase by the <code>use</code> statement - your manual <code>import</code> on the other hand happens at runtime."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552292477, "post_id": 55050482, "comment_id": 96938530, "body": "@Grinnz: I still have a problem with understanding: I thought that <code>use constant ...</code> is evaluated at compile time. I understand that the exporter stuff and the <code>$INC{&quot;Test.pm&quot;} = 1</code> has to be inside a <code>BEGIN</code> block, but why all the rest?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552293038, "post_id": 55050482, "comment_id": 96938763, "body": "It&#39;s just a lot shorter, simpler and cleaner to just wrap the whole module in a BEGIN block. It&#39;s also closer to the normal way of loading a module. Yes, you could use a normal block instead of a BEGIN block, and use multiple BEGIN blocks within (as shown <a href=\"https://pastebin.com/7YR1xC9g\" rel=\"nofollow noreferrer\">here</a>), but that&#39;s longer, and far more complicated, error-prone and messy. It also requires more indenting and more typing. There&#39;s simply no reason to do it that way."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1552294157, "post_id": 55050482, "comment_id": 96939267, "body": "I just made a small improvement to your answer, but actually I felt like reducing the answer to it&#39;s essence: &quot;Fake module load using <code>$INC{__MODULE__ . &#39;.pm&#39;} = 1</code>; then you can use the module the normal way.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552294664, "post_id": 55050482, "comment_id": 96939525, "body": "I believe you mean <code>$INC{__PACKAGE__ . &#39;.pm&#39;} = 1;</code>. But that doesn&#39;t work (in general). You actually need <code>( my $mod_path = __PACKAGE__ ) =~ s{::}{&#47;}g; $mod_path .= &quot;.pm&quot;; $INC{$mod_path} = 1;</code>. Given the complexity, the little bit of redundancy is rather paletable."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552323475, "post_id": 55050482, "comment_id": 96956656, "body": "You could use <code>module_notional_filename(__PACKAGE__)</code> from <a href=\"https://metacpan.org/pod/Module::Runtime#module_notional_filename(NAME)\" rel=\"nofollow noreferrer\">Module::Runtime</a> to make it a little cleaner."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1552323720, "post_id": 55050482, "comment_id": 96956809, "body": "@U.Windl It&#39;s also not just that certain parts of the module have to be in a BEGIN block; the <code>import</code> of the module also has to happen at compile time. <code>use</code> accomplishes this, thus tricking <code>use</code> into thinking the module is already loaded is a clean solution; alternatively, you can call the import method in a BEGIN block."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1552296286, "last_edit_date": 1552296286, "creation_date": 1551983068, "answer_id": 55050482, "question_id": 55046430, "link": "https://stackoverflow.com/questions/55046430/how-to-import-a-constant-with-use-strict-avoiding-cant-use-bareword-as/55050482#55050482", "title": "How to import a constant with &quot;use strict&quot;, avoiding &quot;Can&#39;t use bareword ... as an ARRAY ref&quot;", "body": "<p>You need to execute the <code>import</code> before a reference to the constant is compiled. </p>\n\n<p>You could use yet another <code>BEGIN</code> block to do that, but that means we have now two hacks. Rather than frankensteining both the module's user and the module itself, I suggest the following approach. It keeps the inlined package looking as much as a real module as possible.</p>\n\n<p>The approach consists of the following:</p>\n\n<ol>\n<li>Place the entire module as-is in a <code>BEGIN</code> block at the start of the script.</li>\n<li>Replace the trailing <code>1;</code> with <code>$INC{\"Foo/Bar.pm\"} = 1;</code> (for <code>Foo::Bar</code>).</li>\n</ol>\n\n<p>That's it. This allows you to <code>use</code> the module as normal.</p>\n\n<p>So if your module is the following:</p>\n\n<pre><code>package Test;\n\nuse strict;\nuse warnings;\n\nuse Exporter qw( import );\n\nour $VERSION = 1.00;\nour @EXPORT_OK = qw(AR);\n\nuse constant AR =&gt; [1,2,3];\n\n1;\n</code></pre>\n\n<p>And if your script is the following:</p>\n\n<pre><code>#!/usr/bin/perl\nuse 5.018;\nuse warnings;\n\nuse Test qw( AR );\n\nsay AR-&gt;[1];\n</code></pre>\n\n<p>You can use the following:</p>\n\n<pre><code>#!/usr/bin/perl\n\nBEGIN {\n    package Test;\n\n    use strict;\n    use warnings;\n\n    use Exporter qw( import );\n\n    our $VERSION = 1.00;\n    our @EXPORT_OK = qw(AR);\n\n    use constant AR =&gt; [1,2,3];\n\n    $INC{__PACKAGE__ .'.pm'} = 1;  # Tell Perl the module is already loaded.\n}\n\nuse 5.018;\nuse warnings;\n\nuse Test qw( AR );\n\nsay AR-&gt;[1];\n</code></pre>\n\n<hr>\n\n<p>As you can see, I've made some cleanups. Specifically,</p>\n\n<ul>\n<li>If you're going to requires 5.18, might as well enable the language features it provides. This was done by replacing <code>required 5.018;</code> with <code>use 5.018;</code>\n\n<ul>\n<li>We don't need to use <code>use strict;</code> explicitly because <code>use 5.012;</code> and higher enable strictures.</li>\n<li>We can use <code>say</code> because <code>use 5.010;</code> enables it.</li>\n</ul></li>\n<li>A Test is not an Exporter, so it shouldn't inherit from Exporter. For the last 15-20 years, Exporter has been providing a better interface than the one you used.</li>\n<li>No need to create or initialize <code>@EXPORT</code> if you don't need it.</li>\n<li>No need for a <code>BEGIN</code> block around the initialization of <code>@ISA</code> and <code>@EXPORT_OK</code>.</li>\n</ul>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 2, "accepted_answer_id": 55050482, "answer_count": 3, "score": 4, "last_activity_date": 1552296286, "creation_date": 1551969670, "question_id": 55046430, "link": "https://stackoverflow.com/questions/55046430/how-to-import-a-constant-with-use-strict-avoiding-cant-use-bareword-as", "title": "How to import a constant with &quot;use strict&quot;, avoiding &quot;Can&#39;t use bareword ... as an ARRAY ref&quot;", "body": "<p>I have a module in a file that exports a constant that is an array reference. I can use that constant inside its defining module, but I cannot use it after importing it.  The error message says <code>Can't use bareword (\"AR\") as an ARRAY ref while \"strict refs\" in use at mod.pl line 28.</code>.</p>\n\n<p>Consider this demo code:</p>\n\n<pre><code>#!/usr/bin/perl\nrequire 5.018_000;\n\nuse warnings;\nuse strict;\n\npackage Test;\n\nuse warnings;\nuse strict;\n\nBEGIN {\n    require Exporter;\n    our $VERSION = 1.00;                # for version checking\n    # Inherit from Exporter to export functions and variables\n    our @ISA = qw(Exporter);\n    our @EXPORT = qw();                 # exported by default\n    our @EXPORT_OK = qw(AR);            # can be optionally exported\n}\n\nuse constant AR =&gt; [1,2,3];\n\nprint AR-&gt;[1], \"\\n\";\n1;\n\npackage main;\nTest-&gt;import(qw(AR));\nprint AR-&gt;[1], \"\\n\";\n#Can't use bareword (\"AR\") as an ARRAY ref while \"strict refs\" in use at mod.pl line 28.\n</code></pre>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["perl", "methods", "reference"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551969592, "post_id": 55046150, "comment_id": 96843095, "body": "Is &quot;ENOTE:Final&quot; a blessed reference?"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551971340, "post_id": 55046150, "comment_id": 96844239, "body": "No, it&#39;s just a hash key with a coderef as a value.  The quotes are there about of an abundance of caution because of the &#39;:&#39; character.  It may work without the quotes;  I didn&#39;t try."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1551971672, "post_id": 55046150, "comment_id": 96844472, "body": "Ok, so if it is a coderef. Then, the reference itself will not be passed as a first argument as it would if it was a blessed reference.  What part of the syntax is weird?"}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551972786, "post_id": 55046150, "comment_id": 96845139, "body": "I was just wondering what the &quot;best practice&quot; notation might be."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1551981337, "post_id": 55046150, "comment_id": 96850092, "body": "I wouldn&#39;t call a chained call weird -- except for not understanding what the methods are here and why you need a chain like that.  For which reason I&#39;d recommend to actually break it up for clarity, like in mob&#39;s answer."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1552021925, "post_id": 55046150, "comment_id": 96862906, "body": "It&#39;s not a chained call.  @mob&#39;s syntax is more clear as to what I was doing.  In some other post, someone suggested that the <code>{}-&gt;{}</code> notation was more clear than <code>{}{}</code>.  I see now that it is not because it looks like chained methods.  The code is just not that fancy."}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1551971194, "post_id": 55046359, "comment_id": 96844143, "body": "Yeah, that one works, too.  I was hoping to fit it on one line, which is what led me to that weird notation above.  Your answer was what the original code looked like."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 1, "creation_date": 1552006144, "post_id": 55046359, "comment_id": 96859617, "body": "@ErikBennett The reason it looks weird is because $self is both the invocant you want to use and the structure that contains the coderef. So you need to refer to it in both those contexts."}, {"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 0, "creation_date": 1552021604, "post_id": 55046359, "comment_id": 96862838, "body": "Yes, I see that now as the source of my question.  @mob&#39;s answer illustrates that well... after taking the time to examine the role of <code>$self-&gt;</code> in each of the two lines.  Thanks, guys."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1551969452, "creation_date": 1551969452, "answer_id": 55046359, "question_id": 55046150, "link": "https://stackoverflow.com/questions/55046150/another-hash-of-ref-functions-inside-perl-module/55046359#55046359", "title": "Another Hash of ref functions inside Perl module", "body": "<p>If you're looking for more object-oriented syntax, there is</p>\n\n<pre><code>my $method = $self-&gt;{Formatter}{\"ENOTE:Final\"};\nmy $c2 = $self-&gt;$method($e);\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55046359, "answer_count": 1, "score": 1, "last_activity_date": 1551969452, "creation_date": 1551968825, "question_id": 55046150, "link": "https://stackoverflow.com/questions/55046150/another-hash-of-ref-functions-inside-perl-module", "title": "Another Hash of ref functions inside Perl module", "body": "<p>I've got a perl object which contains a hash of hashes of coderefs (methods).</p>\n\n<p>The following code <strong>works</strong> to call the method:</p>\n\n<pre><code>my $c2 = $self-&gt;{Formatter}-&gt;{\"ENOTE:Final\"}($self, $e);\n</code></pre>\n\n<p>It seems weird to me that I have to call it this way.  Is there another, better syntax for this?  I won't bore you with what won't work.</p>\n\n<p>Thanks.</p>\n\n<p>-E</p>\n"}, {"tags": ["perl", "hash", "reference"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1551952408, "post_id": 55040640, "comment_id": 96832511, "body": "A &quot;list with two-sided references&quot; is actually called a <a href=\"https://en.wikipedia.org/wiki/Doubly_linked_list\" rel=\"nofollow noreferrer\">doubly linked list</a> (this should help you find information by yourself)"}, {"owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1551952767, "post_id": 55040640, "comment_id": 96832731, "body": "Thank you so much!!"}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1551955808, "post_id": 55041718, "comment_id": 96834750, "body": "It&#39;s really nice that you didn&#39;t post the whole code to let OP work it out by themselves :)"}, {"owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "edited": false, "score": 0, "creation_date": 1552158923, "post_id": 55041718, "comment_id": 96907871, "body": "Thank you, your comment did help quite a lot. There&#39;s one thing - is there any way to do this without the tail? You suggest inserting the nodes before the tail, but in this assignment I must put the nodes after the head node."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552158977, "post_id": 55041718, "comment_id": 96907893, "body": "When the list is empty, that&#39;s the same thing"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1552159181, "post_id": 55041718, "comment_id": 96907950, "body": "And it&#39;s actually before cursor. If you want to keep inserting after head, keep cursor pointing to the node after head. You don&#39;t actually want to do that to get the desired output, though. To get the desired output, you don&#39;t change cursor on insert, only on + and -"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1551956831, "last_edit_date": 1551956831, "creation_date": 1551955034, "answer_id": 55041718, "question_id": 55040640, "link": "https://stackoverflow.com/questions/55040640/two-sided-references-in-a-list/55041718#55041718", "title": "Two-sided references in a list", "body": "<p>First of all, what you are building is called a <a href=\"https://en.wikipedia.org/wiki/Doubly_linked_list\" rel=\"nofollow noreferrer\">doubly linked list</a>.</p>\n\n<p>Let me tell you the biggest trick for working with linked lists: Create a dummy \"head\" node and a dummy \"tail\" node. You won't print their values, but having them will greatly reduce the number of special cases in your code, making it so much simpler! </p>\n\n<p>At the core, you will have three \"pointers\" (references).</p>\n\n<ul>\n<li><code>$head</code> points to the first node of the list.</li>\n<li><code>$tail</code> points to the last node of the list.</li>\n<li><code>$cursor</code> initially points to the node in <code>$tail</code>. New nodes will be inserted before this node.</li>\n</ul>\n\n<p>When processing <code>+</code>, two different situations you need to handle:</p>\n\n<ul>\n<li><code>$cursor == $tail</code>: Error! Cursor moved beyond end of list.</li>\n<li><code>$cursor != $tail</code>: Point <code>$cursor</code> to the node following the one it references.</li>\n</ul>\n\n<p>When processing <code>-</code>, there are two different situations you need to handle:</p>\n\n<ul>\n<li><code>$cursor-&gt;{prev} == $head</code>: Error! Cursor moved beyond start of list.</li>\n<li><code>$cursor-&gt;{prev} != $head</code>: Point <code>$cursor</code> to the node preceding the one it references.</li>\n</ul>\n\n<p>When processing inserting nodes, no checks need to be performed because of the dummy nodes!</p>\n"}], "owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 55041718, "answer_count": 1, "score": 2, "last_activity_date": 1551956831, "creation_date": 1551951988, "last_edit_date": 1592644375, "question_id": 55040640, "link": "https://stackoverflow.com/questions/55040640/two-sided-references-in-a-list", "title": "Two-sided references in a list", "body": "<p>I'm just starting to learn Perl and I have to do an exercise containing references.</p>\n<p>I have to create a program, that constructs a list with two sided references, that are are received as command line arguments. At the beginning of the program, there is only one element in the list - 0. To go through the list, reference is being used, that references to the only element of the list at the moment - 0. The arguments of the command line are being read one by one and added right behind the element, that is being referenced to. When one argument is added, the reference slides one element to the right(it references to the newly added element). There are also two special elements - + and -. + allows the reference to move one element to the right, and - one element to the left. Also, it is important that the reference would not go beyond the list limit.</p>\n<p>The output is all the arguments in the correct order of the list.</p>\n<p>Additional requirements are that the list must be created by using hashes, that contain links to neighbouring elements. Also, I cannot use arrays to store the whole list.</p>\n<p>There are a few examples to make it easier to grasp the concept, this is the most useful one:</p>\n<blockquote>\n<p>./3.pl A D - B C + E</p>\n<p>0 A B C D E</p>\n</blockquote>\n<p>All I've got now is just the start of the program, it is nowhere near done and doesn't compile, but I can't figure out where to go from there. I've tried looking for some information about two-sided references(I'm not sure if I'm translating it correctly), but I can't seem to find anything. Any information about two-sided references or any tips how to start writing this program properly would be very appreciated.</p>\n<p>My code:</p>\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\nmy $A= {\n  value=&gt;'0',\n  prev=&gt;'undef',\n  next=&gt;'$B'\n};\n\nmy $B= {\n  value=&gt;'0',\n  prev=&gt;'$A',\n  next=&gt;'$C'\n};\n\nmy $C= {\n  value=&gt;'0',\n  prev=&gt;'$B',\n  next=&gt;'undef'\n};\n\nfor my $smbl(0..#$ARGV) {\n  $A-&gt; {value} = $ARGV[$smbl];\n  $\u0391-&gt; {next} = $ARGV[$smbl+1];\n}\n</code></pre>\n"}, {"tags": ["perl", "type-conversion", "hex", "bin"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1551947715, "post_id": 55038958, "comment_id": 96829576, "body": "Try adding quotes around the hex constant: <code>my $hex =&#39;0xFA1F&#39;</code>. If not it will be converted to the number 64031. Later, when you do <code>hex(64031)</code>, 64031 is interpreted as the hexadecimal string <code>0x64031</code>"}, {"owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1551948141, "post_id": 55038958, "comment_id": 96829809, "body": "Thanks ! very simple indeed... it works for me"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1551949490, "post_id": 55039453, "comment_id": 96830645, "body": "Re &quot;<i>Perl converts them all to decimal</i>&quot;, No. Perl converts them to a format the computer understands (2&#39;s complement). Conversion to decimal (a text representation of a number) is done by <code>print</code>."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551949915, "post_id": 55039453, "comment_id": 96830901, "body": "@ikegami See technical note at the bottom of the answer, I didn&#39;t want to confuse the questioner."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1551950072, "post_id": 55039453, "comment_id": 96830991, "body": "I&#39;d say a completely wrong explanation is more likely to confuse than anything else."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 2, "last_activity_date": 1551948728, "last_edit_date": 1551948728, "creation_date": 1551948286, "answer_id": 55039453, "question_id": 55038958, "link": "https://stackoverflow.com/questions/55038958/perl-convert-hexadecimal-to-binary-and-use-it-as-string/55039453#55039453", "title": "Perl - convert hexadecimal to binary and use it as string", "body": "<p>lets take each bit of confusion in order</p>\n\n<pre><code>my $hex = 0xFA1F;\n</code></pre>\n\n<p>This stores a hex constant in <code>$hex</code>, but Perl doesn't have a hex data type so although you can write hex constants, and binary and octal constants for that matter, Perl converts them all to decimal. Note that there is a big difference between </p>\n\n<pre><code>my $hex = 0xFA1F;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>my $hex = '0xFA1F';\n</code></pre>\n\n<p>The first stores a number into $hex, which when you print it out you get a decimal number, the second stores a string which when printed out will give <code>0xFAF1</code> but can be passed to the <code>hex()</code> function to be converted to decimal.</p>\n\n<pre><code>$hex = hex($hex);\n</code></pre>\n\n<p>The hex function converts a <em>string</em> as if it was a hex number and returns the decimal value and, as up to this point, <code>$hex</code> has only ever been used as a number Perl will first stringify <code>$hex</code> then pass the string to the <code>hex()</code> function to convert that value from hex to decimal.</p>\n\n<p>So to the solution. You are almost there with <code>printf()</code>,there is a function called <code>sprintf()</code> which takes the same parameters as <code>printf()</code> but instead of printing the formatted value returns it as a string. So what you need is.</p>\n\n<pre><code>my $hex = 0xFA1F;\nmy $bin = sprintf(\"%b\", $hex);\nprint $bin;\n</code></pre>\n\n<p>Technical note:\nYes I know that Perl stores all its numbers internally as binary, but lets not go there for this answer, OK?</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551951162, "post_id": 55039980, "comment_id": 96831671, "body": "As a side note, Perl can deal with the decimal representation of a number as if it was a number. If a string is about to be used in a numerical operation, Perl will first convert the string from decimal to a number. This isn&#39;t relevant to the question."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1551952995, "last_edit_date": 1551952995, "creation_date": 1551949971, "answer_id": 55039980, "question_id": 55038958, "link": "https://stackoverflow.com/questions/55038958/perl-convert-hexadecimal-to-binary-and-use-it-as-string/55039980#55039980", "title": "Perl - convert hexadecimal to binary and use it as string", "body": "<p>Decimal, binary, and hexadecimal are all <em>text representations</em> of a number (i.e. ways of <em>writing</em> a number). Computers can't deal with these as numbers.</p>\n\n<p><code>my $num = 0xFA1F;</code> stores the specified number (sixty-four thousand and thirty-one) into <code>$num</code>. It's stored in a format the hardware understands, but that's not very important. What's important is that it's stored as a number, not text.</p>\n\n<p>When <code>print</code> is asked to print a number, it prints it out in decimal (or scientific notation if large/small enough). It has no idea how the number of created (from a hex constant? from addition? etc), so it can't determine how to output the number based on that.</p>\n\n<p>To print an number as hex, you can use</p>\n\n<pre><code>my $hex = 'FA1F';   # $hex contains the hex representation of the number.\nprint $hex;         # Prints the hex representation of the number.\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $num = 0xFA1F;   # $num contains the number.\nprintf \"%X\", $num;  # Prints the hex representation of the number.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 3, "last_activity_date": 1551964656, "creation_date": 1551964656, "answer_id": 55044767, "question_id": 55038958, "link": "https://stackoverflow.com/questions/55038958/perl-convert-hexadecimal-to-binary-and-use-it-as-string/55044767#55044767", "title": "Perl - convert hexadecimal to binary and use it as string", "body": "<p>You are assigning a integer value using hexadecimal format. <code>print</code> by default prints numbers in decimal format, so you are getting 64031. </p>\n\n<p>You can verify this using the printf() by giving different formats. </p>\n\n<pre><code>$ perl -e ' my $num = 0xFA1F; printf(\"%d %X %b\\n\", ($num) x 3 ) '\n64031 FA1F 1111101000011111\n\n$ perl -e ' my $num = 64031; printf(\"%d %X %b\\n\", ($num) x 3 ) '\n64031 FA1F 1111101000011111\n\n$ perl -e ' my $num = 0b1111101000011111; printf(\"%d %X %b\\n\", ($num) x 3 ) '\n64031 FA1F 1111101000011111\n\n$\n</code></pre>\n\n<p>To get the binary format of 0xFA1F in string, you can use sprintf()</p>\n\n<pre><code>$ perl -e ' my $hex = 0xFA1F; my $bin=sprintf(\"%b\",$hex) ; print \"$bin\\n\" '\n1111101000011111\n\n$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "edited": false, "score": 0, "creation_date": 1551974456, "post_id": 55047835, "comment_id": 96846205, "body": "this seams great, unforntunately I won&#39;t be able to download the library on my computer. Thank you for the answer though"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "edited": false, "score": 1, "creation_date": 1551982208, "post_id": 55047835, "comment_id": 96850481, "body": "@SLP  But you can download it!  The link &quot;Pure Perl&quot; version is a single file, which seems to have no dependencies (doesn&#39;t itself use any special libraries), and which can directly be <code>use</code>d in a Perl program.  So you can literally download that file and put it wherever you keep your own modules. And that&#39;s that, use it.  You can also see the <a href=\"https://metacpan.org/release/Bit-Manip-PP/source/lib/Bit/Manip/PP.pm\" rel=\"nofollow noreferrer\">module code</a> (less than 200 lines!), and use that as you see it fit!  I&#39;m certain that the author won&#39;t mind :)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1551983972, "post_id": 55047835, "comment_id": 96851313, "body": "@zdim Nope, I certainly don&#39;t mind at all! It&#39;s the reason I publish all my code with the Perl license :)"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1551997322, "last_edit_date": 1551997322, "creation_date": 1551973879, "answer_id": 55047835, "question_id": 55038958, "link": "https://stackoverflow.com/questions/55038958/perl-convert-hexadecimal-to-binary-and-use-it-as-string/55047835#55047835", "title": "Perl - convert hexadecimal to binary and use it as string", "body": "<p>If you're ok with using a distribution, I wrote <a href=\"https://metacpan.org/pod/Bit::Manip\" rel=\"nofollow noreferrer\">Bit::Manip</a> to make my prototyping a bit easier when dealing with registers (There's also a <a href=\"https://metacpan.org/pod/Bit::Manip::PP\" rel=\"nofollow noreferrer\">Pure Perl</a> version available if you have problems compiling the XS code). </p>\n\n<p>Not only can it fetch out bits from a number, it can toggle, clear, set etc:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Bit::Manip qw(:all);\n\nmy $register = 0xFA1F;\n\n# fetch the bits from register using msb, lsb\n\nmy $msbyte = bit_get($register, 15, 8);\n\nprint \"value: $msbyte\\n\";\n\nprint \"bin: \" . bit_bin($msbyte) . \"\\n\";\n\n# or simply:\n# printf \"bin: %b\\n\", $msbyte;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>value: 250\nbin: 11111010\n</code></pre>\n\n<p>Here's a <a href=\"http://blogs.perl.org/users/steve_bertrand/2017/01/bit-string-manipulation-made-easy-with-bitmanip.html\" rel=\"nofollow noreferrer\">blog post</a> I wrote that shows how to use some of the software's functionality with an example datasheet register.</p>\n"}], "owner": {"reputation": 197, "user_id": 9965855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fe94a03fb6a97722213a1f40110657?s=128&d=identicon&r=PG&f=1", "display_name": "SLP", "link": "https://stackoverflow.com/users/9965855/slp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1851, "favorite_count": 1, "answer_count": 4, "score": 5, "last_activity_date": 1551997322, "creation_date": 1551946412, "question_id": 55038958, "link": "https://stackoverflow.com/questions/55038958/perl-convert-hexadecimal-to-binary-and-use-it-as-string", "title": "Perl - convert hexadecimal to binary and use it as string", "body": "<p>I am new to Perl and I have difficulties using the different types.</p>\n\n<p>I am trying to get an hexadecimal register, transform it to binary, use it a string and get substrings from the binary string.</p>\n\n<p>I have done a few searches and what I tried is :</p>\n\n<pre><code>my $hex = 0xFA1F;\nprint \"$hex\\n\";\n</code></pre>\n\n<p>result was \"64031\" . First surprise : can't I print the hex value in Perl and not just the decimal value ?</p>\n\n<pre><code>$hex = hex($hex);\nprint \"$hex\\n\";\n</code></pre>\n\n<p>Result was 409649. Second surprise : I would expect the result to be also 64031 since \"hex\" converts hexadecimal to decimal.</p>\n\n<pre><code>my $bin = printf(\"%b\", $hex);\n</code></pre>\n\n<p>It prints the binary value. Is there a way to transform the hex to bin without printing it ?</p>\n\n<p>Thanks,\nSLP</p>\n"}, {"tags": ["perl", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1551939730, "post_id": 55037219, "comment_id": 96826113, "body": "Kindly do mention what you have tried to solve your own problem in your post and let us know then."}, {"owner": {"reputation": 19, "user_id": 10267937, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "santhosh v", "link": "https://stackoverflow.com/users/10267937/santhosh-v"}, "reply_to_user": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1551940158, "post_id": 55037219, "comment_id": 96826266, "body": "Actually, my table consists of 20 columns along with 1500 data. My problem here is those column names have space in between them. I need to replace those spaces with an underscore."}, {"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1551941055, "post_id": 55037219, "comment_id": 96826568, "body": "Show your own efforts first. Also what&#39;s the file separated with?  How do we avoid the underscore been added like this <code>name_age</code>?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1551946249, "post_id": 55037219, "comment_id": 96828913, "body": "Are you sure your input is CSV? There&#39;s no commas in the sample you posted..."}, {"owner": {"reputation": 9362, "user_id": 2885763, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/l4VVG.jpg?s=128&g=1", "display_name": "NeronLeVelu", "link": "https://stackoverflow.com/users/2885763/neronlevelu"}, "edited": false, "score": 0, "creation_date": 1551947026, "post_id": 55037219, "comment_id": 96829249, "body": "using awk, look to use printf and format (like &quot;%9s&quot;)  with field ( like $9).  Put some try, we will help based on this"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10267937, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "santhosh v", "link": "https://stackoverflow.com/users/10267937/santhosh-v"}, "edited": false, "score": 0, "creation_date": 1551953141, "post_id": 55040293, "comment_id": 96832954, "body": "my csv file is comma separater"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 19, "user_id": 10267937, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "santhosh v", "link": "https://stackoverflow.com/users/10267937/santhosh-v"}, "edited": false, "score": 0, "creation_date": 1551953352, "post_id": 55040293, "comment_id": 96833085, "body": "Your example is not though. Your sample data in your question is tab separated. Either way though - you can swap the <code>\\t</code> for <code>,</code> and it&#39;ll work much the same."}, {"owner": {"reputation": 19, "user_id": 10267937, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "santhosh v", "link": "https://stackoverflow.com/users/10267937/santhosh-v"}, "edited": false, "score": 0, "creation_date": 1551953468, "post_id": 55040293, "comment_id": 96833166, "body": "this is another way.  head -1 npidata.csv | perl -pe &quot;s/ /_/g&quot; &gt;npidata1.csv"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 19, "user_id": 10267937, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "santhosh v", "link": "https://stackoverflow.com/users/10267937/santhosh-v"}, "edited": false, "score": 0, "creation_date": 1551954075, "post_id": 55040293, "comment_id": 96833599, "body": "Well, you could just do <code>sed -i &#39;s&#47; &#47;_&#47;g&#39; npidata.csv&#39;</code>. But <code>sed</code> in that scenario is blind to the delimiters, and isn&#39;t handling it as csv but rather plain text."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1551950965, "creation_date": 1551950965, "answer_id": 55040293, "question_id": 55037219, "link": "https://stackoverflow.com/questions/55037219/i-am-having-csv-file-can-i-know-how-to-replace-spaces-in-column-heading-with-und/55040293#55040293", "title": "I am having csv file can I know how to replace spaces in column heading with underscore in linux", "body": "<p>OK, so assuming your CSV is tab delimited, I'd suggest what you want is <code>split</code>.</p>\n\n<pre><code>while ( &lt;&gt; ) {\n   print join \"\\t\", map { s/\\s+/_/gr } split /\\t/; \n}\n</code></pre>\n\n<p>This will split on tabs, transform each 'entry' by replacing one or more spaces with underscores, and print the resultant line. </p>\n"}], "owner": {"reputation": 19, "user_id": 10267937, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "santhosh v", "link": "https://stackoverflow.com/users/10267937/santhosh-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 55040293, "answer_count": 1, "score": -1, "last_activity_date": 1551950965, "creation_date": 1551939502, "last_edit_date": 1551940982, "question_id": 55037219, "link": "https://stackoverflow.com/questions/55037219/i-am-having-csv-file-can-i-know-how-to-replace-spaces-in-column-heading-with-und", "title": "I am having csv file can I know how to replace spaces in column heading with underscore in linux", "body": "<p>My actual input will be like this, in column heading I need linux command to replace spaces with underscores  </p>\n\n<p><strong>INPUT:</strong></p>\n\n<pre><code>patient name age number of days\n santhosh    24      20\n saravanan    23     25\n</code></pre>\n\n<p><strong>EXPECTED OUTPUT:</strong></p>\n\n<pre><code> patient_name age number_of_days\n   santhosh    24      20\n   saravanan   23      25\n</code></pre>\n"}, {"tags": ["regex", "perl", "unix"], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1551940354, "last_edit_date": 1551940354, "creation_date": 1551939624, "answer_id": 55037250, "question_id": 55037185, "link": "https://stackoverflow.com/questions/55037185/perl-alternative-for-sed-to-split-multiple/55037250#55037250", "title": "perl alternative for sed to split multiple |", "body": "<p>Correct Perl syntax would be:</p>\n\n<pre><code>echo \"a|123|##||||\" | perl -pe 's/([^\\s\\w])\\|/$1 | /g'\n</code></pre>\n\n<ul>\n<li>Pipe character must be escaped</li>\n<li>$1 is used for 1st group match</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1551984145, "last_edit_date": 1551984145, "creation_date": 1551940141, "answer_id": 55037378, "question_id": 55037185, "link": "https://stackoverflow.com/questions/55037185/perl-alternative-for-sed-to-split-multiple/55037378#55037378", "title": "perl alternative for sed to split multiple |", "body": "<p>To add space only between those <code>|</code> that come next to each other</p>\n\n<pre><code>echo \"a|123|##||||\" | perl -pe's/\\|(?=\\|)/\\| /g'\n</code></pre>\n\n<p>I use a lookahead in order to be able to detect consecutive (and overlapping!) pairs, with more than two <code>|</code> strung together: Only the first one in a match is consumed so the second one stays there for the next match, in case there is yet another after it (again asserted with the lookahead).</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 2, "last_activity_date": 1555614411, "last_edit_date": 1555614411, "creation_date": 1552017938, "answer_id": 55056565, "question_id": 55037185, "link": "https://stackoverflow.com/questions/55037185/perl-alternative-for-sed-to-split-multiple/55056565#55056565", "title": "perl alternative for sed to split multiple |", "body": "<p>Another way using both lookahead and lookbehind.</p>\n\n<pre><code>$ echo \"a|123|##||||\" | perl -pe's/(?&lt;=\\|)(?=\\|)/ /g '\na|123|##| | | |\n\n$\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 9608032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83f96ae40583236c888f6144b9d74dc0?s=128&d=identicon&r=PG&f=1", "display_name": "shavi", "link": "https://stackoverflow.com/users/9608032/shavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 55037378, "answer_count": 3, "score": 1, "last_activity_date": 1555614411, "creation_date": 1551939342, "last_edit_date": 1552024973, "question_id": 55037185, "link": "https://stackoverflow.com/questions/55037185/perl-alternative-for-sed-to-split-multiple", "title": "perl alternative for sed to split multiple |", "body": "<p>I was able to accomplish this in sed command, but could not get it working in perl. Would like to add spaces between pipe characters that are close together without any spaces or alphanumerics.</p>\n\n<pre>\ninput           ==>  a|123|##||||\nexpected output ==>  a|123|##| | | |\n</pre>\n\n<p>This <code>sed</code> command works fine:</p>\n\n<pre><code>echo \"a|123|##||||\" | sed 's/\\([^[:blank:][:alnum:]]\\)|/\\1 | /g'\n</code></pre>\n\n<p>output for above command ==> <code>a|123|## | | | |</code></p>\n\n<p>In perl, I could not get it working</p>\n\n<pre><code>echo \"a|123|##||||\" | perl -pe 's/\\([^[:blank:][:alnum:]]\\)|/\\1 | /g'\n</code></pre>\n\n<p>with output for above command</p>\n\n<pre>\n| a | | | 1 | 2 | 3 | | | # | # | | | | | | | | | \n</pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551938748, "post_id": 55036459, "comment_id": 96825806, "body": "<code>m&#47;^([^\\s:]+)&#47;</code> - if you meant <i>before the first <b>colon</i></b>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1551938774, "post_id": 55036459, "comment_id": 96825815, "body": "Can ypu please edit your question? Your example does not contain a semicolon <code>;</code>. Did you mean colon <code>:</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1551942294, "post_id": 55036459, "comment_id": 96827051, "body": "Shouldn&#39;t the desired result be <code>asfmqwdbd&#47;ilcp</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1551939099, "creation_date": 1551939099, "answer_id": 55037146, "question_id": 55036459, "link": "https://stackoverflow.com/questions/55036459/how-do-extract-the-string-before-the-colon/55037146#55037146", "title": "How do extract the string before the colon?", "body": "<p>Assuming that semicolon (<code>;</code>) was a typo in the question and you actually meant colon (<code>:</code>) this would be the correct regex:</p>\n\n<ul>\n<li>anchor at beginning of line (<code>^</code>)</li>\n<li>capture one-or-more non-colon characters (<code>([^:]+)</code>)</li>\n<li>match must end on a colon (<code>:</code>)</li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nwhile (&lt;DATA&gt;) {\n    print \"$1\\n\" if /^([^:]+):/;\n}\n\nexit 0;\n\n__DATA__\nasfmqwdbd/ilcp\nasfmqwdbd/ilcp:dftqclk_repasfmq\nasfmqwdbd/ilcp;dftqclk_repasfmq\n</code></pre>\n\n<p>Test run:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl dummy.pl\nasfmqwdbd/ilcp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 11078078, "user_type": "registered", "profile_image": "https://graph.facebook.com/1660244350719663/picture?type=large", "display_name": "Huban Ahmed", "link": "https://stackoverflow.com/users/11078078/huban-ahmed"}, "is_accepted": false, "score": 0, "last_activity_date": 1551954487, "creation_date": 1551954487, "answer_id": 55041515, "question_id": 55036459, "link": "https://stackoverflow.com/questions/55036459/how-do-extract-the-string-before-the-colon/55041515#55041515", "title": "How do extract the string before the colon?", "body": "<p>Assuming from your question you want the output like this\n\"asfmqwdbd/ilcp\"\nfor this you can use \"^([\\S]+):\" and then use $1.</p>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1551978891, "creation_date": 1551978891, "answer_id": 55049453, "question_id": 55036459, "link": "https://stackoverflow.com/questions/55036459/how-do-extract-the-string-before-the-colon/55049453#55049453", "title": "How do extract the string before the colon?", "body": "<p>I think you are looking for </p>\n\n<pre><code>$ echo \"asfmqwdbd/ilcp:dftqclk_repasfmq\" | perl -pe 's/(\\S+):.*/$1/ '\nasfmqwdbd/ilcp\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ perl -le ' $x=\"asfmqwdbd/ilcp:dftqclk_repasfmq\"; $x=~s/(\\S+):.*/$1/; print $x '\nasfmqwdbd/ilcp\n\n$\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10855858, "user_type": "registered", "profile_image": "https://graph.facebook.com/385204595566268/picture?type=large", "display_name": "Thibhika Ravichandran", "link": "https://stackoverflow.com/users/10855858/thibhika-ravichandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1552376878, "creation_date": 1551935244, "last_edit_date": 1552376878, "question_id": 55036459, "link": "https://stackoverflow.com/questions/55036459/how-do-extract-the-string-before-the-colon", "title": "How do extract the string before the colon?", "body": "<p>How do extract the string before the colon. I don't want the string after the colon.</p>\n\n<p>Sample input:</p>\n\n<pre><code>asfmqwdbd/ilcp:dftqclk_rep\n</code></pre>\n\n<p>Desired result:</p>\n\n<pre><code>asfmqwdbd/ilcp\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>if (m/^(\\S+))\n  $inst_name = $1;\n</code></pre>\n"}, {"tags": ["shell", "perl", "text-files"], "comments": [{"owner": {"reputation": 57, "user_id": 10342673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uO17I.jpg?s=128&g=1", "display_name": "Jafari MM", "link": "https://stackoverflow.com/users/10342673/jafari-mm"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1551928905, "post_id": 55035458, "comment_id": 96823287, "body": "@JosephSible edited it."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1551938384, "post_id": 55035458, "comment_id": 96825675, "body": "Sharing your research helps everyone. Tell us what you&#39;ve tried and why it didn\u2019t meet your needs. This demonstrates that you\u2019ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! See also: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. F.ex. your question doesn&#39;t explain how you derive what needs to be inserted, i.e. why does <code>item1</code> need to be inserted?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1551952785, "last_edit_date": 1551952785, "creation_date": 1551952045, "answer_id": 55040657, "question_id": 55035458, "link": "https://stackoverflow.com/questions/55035458/add-modify-text-between-parentheses/55040657#55040657", "title": "Add/modify text between parentheses", "body": "<blockquote>\n  <p><em>I have no idea to turn text above to below one</em></p>\n</blockquote>\n\n<p>The general approach:</p>\n\n<ol>\n<li><p>Parse the text.</p>\n\n<p>You appear to have lists of space-separated lists and atoms. If so, the result could look like the following:</p>\n\n<pre><code>{\n   type =&gt; 'list',\n   value =&gt; [\n      {\n         type =&gt; 'atom',\n         value =&gt; 'class1',\n      },\n      {\n         type =&gt; 'list',\n         value =&gt; [\n            {\n               type =&gt; 'atom',\n               value =&gt; 'subclass1',\n            },\n         ]\n      },\n      {\n         type =&gt; 'list',\n         value =&gt; [\n            {\n               type =&gt; 'atom',\n               value =&gt; 'subclass2',\n            },\n            {\n               type =&gt; 'atom',\n               value =&gt; 'item1',\n            },\n            {\n               type =&gt; 'atom',\n               value =&gt; 'item2',\n            },\n         ],\n      }\n   ],\n}\n</code></pre>\n\n<p>It's possible that something far simpler could be generated, but you were light on details about the format. </p></li>\n<li><p>Extract the necessary information from the tree.</p>\n\n<p>You were light on details about the data format, but it could be as simple as the following if the above data structure was created by the parser:</p>\n\n<pre><code>my $item = $tree-&gt;{value}[2]{value}[1]{value};\n</code></pre></li>\n<li><p>Perform the required modifications.</p>\n\n<p>You were light on details about the data format, but it could be as simple as the following if the above data structure was created by the parser:</p>\n\n<pre><code>my $new_atom = { type =&gt; 'atom', value =&gt; $item };\npush @{ $tree-&gt;{value}[1]{value} }, $new_atom;\n</code></pre></li>\n<li><p>Serialize the data structure.</p>\n\n<p>For the above data structure, you could use the following:</p>\n\n<pre><code>sub serialize {\n   my ($node) = @_;\n   return $node-&gt;{type} eq 'list'\n      ? \"(\".join(\" \", map { serialize($_) } @{ $node-&gt;{value} }).\")\"\n      : $node-&gt;{value};\n}\n</code></pre></li>\n</ol>\n\n<p>Other approaches could be available depending on the specifics.</p>\n"}], "owner": {"reputation": 57, "user_id": 10342673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uO17I.jpg?s=128&g=1", "display_name": "Jafari MM", "link": "https://stackoverflow.com/users/10342673/jafari-mm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 55040657, "answer_count": 1, "score": -2, "last_activity_date": 1551952785, "creation_date": 1551928156, "last_edit_date": 1551938490, "question_id": 55035458, "link": "https://stackoverflow.com/questions/55035458/add-modify-text-between-parentheses", "title": "Add/modify text between parentheses", "body": "<p>I'm trying to make a classified text, and I'm having problem turning</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(class1 (subclass1) (subclass2 item1 item2))\n</code></pre>\n\n<p>To</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(class1 (subclass1 item1) (subclass2 item1 item2))\n</code></pre>\n\n<p>I have no idea to turn text above to below one, without caching <code>subclass1</code> in memory. I'm using Perl on Linux, so any solution using shell script or Perl is welcome.</p>\n\n<p><strong>Edit:</strong> I've tried using grep, saving whole <code>subclass1</code> in a variable, then modify and exporting it to the list; but the list may get larger and that way will use a lot of memory.</p>\n"}, {"tags": ["arrays", "perl", "shuffle"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1551928829, "post_id": 55034744, "comment_id": 96823268, "body": "I think you are seeing a form of the birthday paradox   <a href=\"https://en.m.wikipedia.org/wiki/Birthday_problem\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Birthday_problem</a>  and it is just true that picking 20 out of 800 results in two adjacent picks much more often than you would expect"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1552006579, "post_id": 55034744, "comment_id": 96859714, "body": "Though it&#39;s not actually your problem in this case, if you want a better source of randomness than Perl&#39;s default PRNG, <a href=\"https://metacpan.org/pod/Math::Random::Secure\" rel=\"nofollow noreferrer\">Math::Random::Secure</a> can be useful. Getting List::Util::shuffle to use it may be tricky."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7949834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2468b79b16c21983694822c31db2cd49?s=128&d=identicon&r=PG&f=1", "display_name": "blacklight", "link": "https://stackoverflow.com/users/7949834/blacklight"}, "edited": false, "score": 0, "creation_date": 1551963032, "post_id": 55039081, "comment_id": 96839053, "body": "Thanks for a thorough and intelligent answer. Your test code is elegant and succinct; exactly why I love Perl."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1551946882, "creation_date": 1551946882, "answer_id": 55039081, "question_id": 55034744, "link": "https://stackoverflow.com/questions/55034744/why-am-i-getting-a-bad-random-distribution-with-perls-listutilshuffle/55039081#55039081", "title": "Why am I getting a bad random distribution with Perl&#39;s List::Util::shuffle?", "body": "<p>There are C(800, 20) = 3.73 \u00d7 10<sup>39</sup> ways of choosing 20 titles from 800.</p>\n\n<p>There are C(781, 20) = 2.29 \u00d7 10<sup>39</sup> ways of choosing 20 titles from 800 where no two are adjacent.<sup>[1]</sup></p>\n\n<p>There is therefore a (2.29 \u00d7 10<sup>39</sup>) / (3.73 \u00d7 10<sup>39</sup>) = 61.4% chance of picking a set that contains no adjacent titles.</p>\n\n<p>There is therefore a 1 - 61.4% = 38.6% chance of picking a set that contains adjacent titles.</p>\n\n<p>Now that we know what to expect, let's put <code>shuffle</code> to the test.</p>\n\n<p>Test:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse List::Util qw( shuffle );\n\nmy $num_tests = 100_000;\nmy $N = 800;\nmy @titles = 0..($N-1);\nmy $has_adjacent_titles = 0;\nfor (1..$num_tests) {\n   my @shuffled_selection = ( shuffle(@titles) )[0..19];\n   my @ordered = sort { $a &lt;=&gt; $b } @shuffled_selection;\n   ++$has_adjacent_titles if grep { $ordered[$_-1]+1 == $ordered[$_] } 1..$#ordered;\n}\n\nprintf \"%.1f%%\\n\", $has_adjacent_titles / $num_tests * 100;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&gt;a.pl\n38.6%\n\n&gt;a.pl\n38.8%\n\n&gt;a.pl\n38.5%\n</code></pre>\n\n<p>Seems like <code>shuffle</code> is working quite well.</p>\n\n<hr>\n\n<ol>\n<li>See <a href=\"https://math.stackexchange.com/q/288617/447320\">Combinatorial restriction on choosing adjacent objects</a>, </li>\n</ol>\n"}], "owner": {"reputation": 33, "user_id": 7949834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2468b79b16c21983694822c31db2cd49?s=128&d=identicon&r=PG&f=1", "display_name": "blacklight", "link": "https://stackoverflow.com/users/7949834/blacklight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 55039081, "answer_count": 1, "score": 0, "last_activity_date": 1551946882, "creation_date": 1551922622, "question_id": 55034744, "link": "https://stackoverflow.com/questions/55034744/why-am-i-getting-a-bad-random-distribution-with-perls-listutilshuffle", "title": "Why am I getting a bad random distribution with Perl&#39;s List::Util::shuffle?", "body": "<p>I have a collection of several hundred vinyl records, organised alphanumerically by a catalog ID string. I wrote a script that selects 20 records for me at random from my collection by sampling a shuffled array of catalog IDs. However, I'm finding that often the distribution of records it selects for me is not good. Very often it will select 2 records with sequential catalog IDs, and/or several records grouped close to each other. When selecting 20 records from 800, this should very rarely happen.</p>\n\n<p>I store a list of catalog ids in the <code>@selection</code> array, and to take a random sample of 20 items from this array, I assign the first 20 items from the shuffled array:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>@selection = (shuffle @selection)[0 .. 19];\n</code></pre>\n\n<p>In desperation, I tried this ugly technique to try to force better randomness, but it did not seem to make any difference:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>@selection = shuffle @selection; sleep 1;\n@selection = reverse @selection; sleep 1;\n@selection = (shuffle @selection)[0 .. 19];\n</code></pre>\n"}]