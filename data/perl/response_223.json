[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1555527652, "post_id": 55734211, "comment_id": 98147107, "body": "<a href=\"https://perldoc.pl/perlre#(??%7B-code-%7D)\" rel=\"nofollow noreferrer\">perldoc.pl/perlre#(??%7B-code-%7D)</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1555528210, "post_id": 55734211, "comment_id": 98147319, "body": "and that&#39;s a rather tricky feature, btw.  Why not <code>if ( (&#47;^([0-9]+)\\s*%&#47;)[0] &gt; 80 )</code> ..."}, {"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555531075, "post_id": 55734211, "comment_id": 98148536, "body": "@zdim nice one. Can&#39;t remember why I used embedded code. I will try your solution also."}], "answers": [{"comments": [{"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1555530486, "post_id": 55734926, "comment_id": 98148279, "body": "fantastic, thank you very much. If you will ever write a book about programming, sign me in. I will pre-order :)"}], "tags": [], "owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 7, "last_activity_date": 1555530199, "creation_date": 1555530199, "answer_id": 55734926, "question_id": 55734211, "link": "https://stackoverflow.com/questions/55734211/perl-regex-meaning-of/55734926#55734926", "title": "Perl RegEx: meaning of &quot;??&quot;", "body": "<p><code>$(??{code})</code> executes the <code>code</code>, and then substitutes the result into the regular expression. Within this, <code>$^N</code> is replaced with whatever matched the most recent capture group, in this case <code>(\\d+)</code>. The regexp with this substitution is then matched again.</p>\n\n<p>So if the string begins with a number followed by <code>%</code>, <code>^(\\d+)%</code> matches that. It then executes <code>$^N &gt;= 80 ? '' : '^'</code>, replacing <code>$^N</code> with the number. If the number is at least <code>80</code>, the regexp becomes <code>^(\\d+)%</code>, and the whole match succeeds. But if the number is less than <code>80</code>, it becomes <code>^(\\d+)%^</code>. Since the second <code>^</code> can't match in the middle of the string, the regular expression no longer matches.</p>\n\n<p>So this regular expression matches strings that begin with a percentage at least 80.</p>\n"}, {"comments": [{"owner": {"reputation": 15286, "user_id": 747355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Xdh8.jpg?s=128&g=1", "display_name": "Rob Raisch", "link": "https://stackoverflow.com/users/747355/rob-raisch"}, "edited": false, "score": 3, "creation_date": 1555532298, "post_id": 55735311, "comment_id": 98149019, "body": "Oh and it should be noted that the capture group will match values greater than 100%, which is probably not what is intended. Change the capture group to <code>100|\\d{1,2}</code> to match values from 0 to 100."}, {"owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 0, "creation_date": 1555533487, "post_id": 55735311, "comment_id": 98149453, "body": "very good point. However in this case value can&#39;t be greater than 100%, as we are talking about DISK USAGE"}, {"owner": {"reputation": 15286, "user_id": 747355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Xdh8.jpg?s=128&g=1", "display_name": "Rob Raisch", "link": "https://stackoverflow.com/users/747355/rob-raisch"}, "reply_to_user": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "edited": false, "score": 1, "creation_date": 1555533617, "post_id": 55735311, "comment_id": 98149505, "body": "Sure, but the regex you want to understand <b>will</b> allow values greater than 100."}], "tags": [], "owner": {"reputation": 15286, "user_id": 747355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Xdh8.jpg?s=128&g=1", "display_name": "Rob Raisch", "link": "https://stackoverflow.com/users/747355/rob-raisch"}, "is_accepted": false, "score": 9, "last_activity_date": 1555586019, "last_edit_date": 1555586019, "creation_date": 1555531976, "answer_id": 55735311, "question_id": 55734211, "link": "https://stackoverflow.com/questions/55734211/perl-regex-meaning-of/55735311#55735311", "title": "Perl RegEx: meaning of &quot;??&quot;", "body": "<p>Before I answer, I'd like to point out that use of the embedded perl code form <code>(??...)</code> can be fraught with errors if you do not fully understand its implications. I've written perl regexen for more than twenty years and my natural tendency is to always code a \"use case\" like this as a filter to the result of the regex rather than embed perl code directly into the regex. <em>You have been warned.</em></p>\n\n<p>Ok, let's pick this regex apart:</p>\n\n<pre><code>^           # start of text\n\n(           # begin capture group\n  \\d+         # one or more digits 0-9\n)           # end of capture group\n\n%           # literal percent sign character\n\n$           # end of text\n\n(??{        # start embedded perl code\n\n  $^N &gt;= 80   # if last closed match group($^N) is greater than or equal to 80\n    ? ''        # then return empty pattern ('') \n    : '^'       # else return start of text (^) pattern\n\n})          # end embedded perl code\n</code></pre>\n\n<p>where <code>$^N</code> references the value of the most recent closed match pair and the <code>(??{ ... })</code> zero-width clause will execute the perl code it wraps, converting the value it returns into a new regex that will be added to the original pattern.</p>\n\n<p>So, in this example, we match one or more digits followed immediately by a percent sign character. Then, if the captured value is greater than or equal to 80, evaluate an empty pattern against the text (effectively allowing the overall pattern to match, returning the captured value), or if not, evaluate the <code>^</code> (start of text) pattern which cannot match at the end of the string, effectively returning nothing.</p>\n\n<p><em>(<strong>Note</strong> that by added the /x modifier to your Perl regex, you can embed comments directly into the pattern which will also ignore embedded whitespace. I've found this to be a great way to document complicated regexen.)</em></p>\n"}], "owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 1, "accepted_answer_id": 55734926, "answer_count": 2, "score": 5, "last_activity_date": 1555586019, "creation_date": 1555527061, "last_edit_date": 1555570481, "question_id": 55734211, "link": "https://stackoverflow.com/questions/55734211/perl-regex-meaning-of", "title": "Perl RegEx: meaning of &quot;??&quot;", "body": "<p>I have a regular expression in my script which I wrote years ago. </p>\n\n<p>I know what this regex does (looking for percentages higher than 80%), but I don't remember its meaning/principles. I see the ternary operator is used, and also last closed parenthesis match, but what I don't know for example is the meaning of <code>??</code>:</p>\n\n<pre><code>qr/^(\\d+)%$(??{$^N&gt;= 80 ? '':'^'})/\n</code></pre>\n\n<p>Can anybody explain this regex for me?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555571025, "post_id": 55734077, "comment_id": 98158576, "body": "From where is <code>(job#).print.afp</code> available? <code>$1</code>? Some other var? STDIN?"}, {"owner": {"reputation": 21, "user_id": 9357374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482e7b9b8bc1c3ec3852ded3bb787421?s=128&d=identicon&r=PG&f=1", "display_name": "acdii", "link": "https://stackoverflow.com/users/9357374/acdii"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1557437431, "post_id": 55734077, "comment_id": 98775409, "body": "After more digging, I found out the main program is Java, the workflow calls for the filename with the getAbsoluteFileName, with the specified parameters (print,afp,read)  So the absolute filename is the job number.print.afp."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1557491095, "creation_date": 1557491095, "answer_id": 56077690, "question_id": 55734077, "link": "https://stackoverflow.com/questions/55734077/writing-a-script-to-rename-a-job-file-in-process/56077690#56077690", "title": "Writing a script to rename a job file in process", "body": "<p>Arguments passed to a Perl script are provided in <code>@ARGV</code>.</p>\n\n<pre><code>use File::Basename qw( basename dirname );\nuse POSIX          qw( strftime );\n\nmy ($old_qfn) = @ARGV;\nmy $dir_qfn = dirname($old_qfn);\nmy $old_fn = basename($old_fqn);\nmy ($job_num) = $old_fn =~ /^(\\d+)\\.print\\.afp\\z/\n   or die(\"Invalid input \\\"$old_qfn\\\": Doesn't match expected format\\n\");\n\nmy $new_fn = sprintf('ACIF_OUTPUT_%s_%s.afp',\n   strftime(\"%Y-%m-%dT%H:%M:%SZ\", gmtime(time)),\n   $job_num,\n);\nmy $new_qfn = $dir_qfn . '/' . $new_fn;\nrename($old_qfn, $new_qfn)\n   or die(\"Can't rename \\\"$old_qfn\\\" to \\\"$new_qfn\\\": $!\\n\");\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9357374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482e7b9b8bc1c3ec3852ded3bb787421?s=128&d=identicon&r=PG&f=1", "display_name": "acdii", "link": "https://stackoverflow.com/users/9357374/acdii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1557491095, "creation_date": 1555526484, "last_edit_date": 1555617523, "question_id": 55734077, "link": "https://stackoverflow.com/questions/55734077/writing-a-script-to-rename-a-job-file-in-process", "title": "Writing a script to rename a job file in process", "body": "<p>I have a print program that converts a print job into afp to be sent to a third party. The issue is they look for a filename that is completely different than what the print program creates.  I have a portion of the workflow where it can run an external program to create the filename after it has been processed and then save it to a directory on the file server, or SFTP it to another server. The problem I have is writing a script to make the actual change. </p>\n\n<p>the filename created is (job#).print.afp</p>\n\n<p>The file name format we are looking for is ACIF_OUTPUT_(date)<em>(timestamp)</em>(job#).afp</p>\n\n<p>I started creating a bash to do it, but missing the part where it gets the file name to pull the job# from to insert it in the appropriate place.</p>\n\n<pre><code>#! /bin/bash\ndate_time=$(date +\u201c%Y-%m-%d at %H,%M.%S)\nJob=$(\nfile=\u201d/usr/Transfers/ACIF_OUTPUT_${date_time}_{Job}.afp\u201d\necho \u201cStarting backup to $file\u2026\u201d\n</code></pre>\n\n<p>It can be perl or some other language as long as I can link to it to run. </p>\n\n<p>This is for Ricoh Process Director if that matters. It will be triggered by StepTemplate RunExternalProgram.   </p>\n\n<p>Still working on figuring out the template.</p>\n\n<p>If it is of any help, I found the perl that does the copy. If it can be done in here, that would be perfect. </p>\n\n<pre><code>my $old_file = shift;\nmy $new_file = shift;\nuse File::Copy qw(copy);\nuse File::Basename;\n\nmy $directory = dirname( $new_file );\n\nif ($directory eq \"/\" ) {\n     print \"Cannot copy file to \" .  $new_file .\n+\" as it does not exist.\\n\"  ;\n    exit (1);\n  }\n\nif (-d $directory ) {\n    copy( $old_file,$new_file) or die \"Copy failed: Directory or file does not exist: $new_file\";\n    exit ($? &gt;&gt; 8);\n  }\n  else {\n     print \"Cannot copy file to \" .  $new_file .\n+\" as it does not exist.\\n\"  ;\n    exit (1);\n  }\n</code></pre>\n\n<p>This is the command that runs it</p>\n\n<p>copy_files.pl ${getAbsoluteFileName(print,afp,read)}</p>\n"}, {"tags": ["file", "perl", "directory", "file-handling"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1555520284, "post_id": 55732335, "comment_id": 98143836, "body": "Concatenate the directory path an a path separator left to the file name. And/or add an <code>else</code> branch to the <code>if</code> and <code>die($!);</code> in it and see if you get an error."}, {"owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1555520610, "post_id": 55732335, "comment_id": 98143994, "body": "Thank you! Concatenating directory path helped."}], "owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1555522586, "creation_date": 1555519002, "question_id": 55732335, "link": "https://stackoverflow.com/questions/55732335/problem-opening-multiple-files-in-a-directory", "title": "Problem opening multiple files in a directory", "body": "<p>I need to open all files with extension <code>.tab</code> in directory <code>gor/</code> and later use those files for further calculations. The problem is, my code successfully opens the directory and finds these files, but for some reason it doesn't open them. What might be the problem?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $dirname = \"gor\";\nopendir(DIR, $dirname) || die \"Error in opening dir $dirname\\n\";\nmy @files = grep {/tab/} readdir (DIR);\nforeach my $file(@files){\n    print $file, \"\\n\";\n    if(open(my $fh, $file)){\n        my @arr;\n        while(&lt;$fh&gt;){\n            chomp;\n            push @arr, $_;\n        }\n        close $fh;\n        print @arr;\n    }\n\n}\nclosedir DIR;\n</code></pre>\n\n<p>From this code I would expect to get the name of the file and after that the whole content of it(and it continues for all files), instead all I get is just the names of the files. Moving the <code>foreach</code> loop after <code>closedir</code> gets me the same result.</p>\n"}, {"tags": ["arrays", "perl", "foreach"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555518119, "post_id": 55731893, "comment_id": 98142789, "body": "Why use <code>split</code> or arrays? <code>substr</code> in a loop is your friend."}, {"owner": {"reputation": 2476, "user_id": 1092785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3463f1ed04180b8e766f35772096b16?s=128&d=identicon&r=PG", "display_name": "rplantiko", "link": "https://stackoverflow.com/users/1092785/rplantiko"}, "edited": false, "score": 0, "creation_date": 1555518175, "post_id": 55731893, "comment_id": 98142818, "body": "Or try with an accumulating variable <code>my $a =&#39;&#39; ;</code> which is 1) augmented (concatenated) by <code>$words[$i]</code> and then 2) printed in each loop iteration"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1555519267, "post_id": 55731893, "comment_id": 98143333, "body": "What is really your input? A string or an array? Here you have both <code>$str</code> and <code>@words</code>, and it&#39;s unclear if <code>@words</code> comes from your attempt at solving your problem, or it&#39;s actually your input."}, {"owner": {"reputation": 31, "user_id": 4608389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a054d1d7b77d30d24c8321d906874921?s=128&d=identicon&r=PG&f=1", "display_name": "audioboxer", "link": "https://stackoverflow.com/users/4608389/audioboxer"}, "edited": false, "score": 0, "creation_date": 1555520933, "post_id": 55731893, "comment_id": 98144137, "body": "my input will be reading lines from a CSV file and which will contain strings in the format of &quot;a&gt;b&gt;d&gt;e&quot;.  I am trying to output a value of &quot;a&gt;ab&gt;abc&gt;abcd&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4608389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a054d1d7b77d30d24c8321d906874921?s=128&d=identicon&r=PG&f=1", "display_name": "audioboxer", "link": "https://stackoverflow.com/users/4608389/audioboxer"}, "edited": false, "score": 0, "creation_date": 1555526535, "post_id": 55732420, "comment_id": 98146643, "body": "Thank you, This appends a &quot;&gt;&quot; to the end, is there anyway to remove that?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 3, "last_activity_date": 1555541725, "last_edit_date": 1555541725, "creation_date": 1555519349, "answer_id": 55732420, "question_id": 55731893, "link": "https://stackoverflow.com/questions/55731893/perl-output-successive-string-from-array/55732420#55732420", "title": "Perl output successive string from array", "body": "<p>one liner:</p>\n\n<pre><code>perl -e '@a=qw(a b c d); for(@a) {$s.=($h.=$_).\"&gt;\"} $s=substr($s,0,-1);print $s'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1555563818, "post_id": 55734941, "comment_id": 98156055, "body": "If this is clearest for you then I suggest to work to understand the solution by @mwp, as most similar but far simpler.  (Note, all should be either <code>@new</code> or <code>@newtax</code>)"}], "tags": [], "owner": {"reputation": 31, "user_id": 4608389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a054d1d7b77d30d24c8321d906874921?s=128&d=identicon&r=PG&f=1", "display_name": "audioboxer", "link": "https://stackoverflow.com/users/4608389/audioboxer"}, "is_accepted": false, "score": 1, "last_activity_date": 1555583384, "last_edit_date": 1555583384, "creation_date": 1555530291, "answer_id": 55734941, "question_id": 55731893, "link": "https://stackoverflow.com/questions/55731893/perl-output-successive-string-from-array/55734941#55734941", "title": "Perl output successive string from array", "body": "<p>This is what I ended up with, It's the only way I could understand and get the output I was looking for. </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = \"a&gt;b&gt;c&gt;d&gt;e&gt;f&gt;g\";\nmy @words = split /&gt;/, $str;\n\nmy $j = $#words;\nmy $i = 0;\nmy @newtax; \nwhile($i &lt;= $#words){\n        foreach my $i (0 .. $#words - $j){\n            push (@new, $words[$i]);\n    }\n\n    if($i &lt; $#words){\n        push(@new, \"&gt;\");\n    }\n    $j--;\n    $i++;\n}\n\nprint @new;\n</code></pre>\n\n<p>This output \"a>ab>abc>abcd>abcde>abcdef>abcdefg\"</p>\n"}, {"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 4, "last_activity_date": 1555549699, "creation_date": 1555549699, "answer_id": 55737847, "question_id": 55731893, "link": "https://stackoverflow.com/questions/55731893/perl-output-successive-string-from-array/55737847#55737847", "title": "Perl output successive string from array", "body": "<p>You had the right idea, but instead of printing the word at position i, you want to print all the words between positions 0 and i (inclusive). Also, your input can contain multiple strings, so loop over them. </p>\n\n<pre><code>use warnings;\n\nwhile (my $str = &lt;&gt;) {              # read lines from stdin or named files\n  chomp($str);                      # remove any trailing line separator\n\n  my @words = split /&gt;/, $str;      # break string into array of words\n  foreach my $i (0 .. $#words) {\n    print join '', @words[0 .. $i]; # build the term from the first n words\n    print '&gt;' if $i &lt; $#words;      # print separator between terms (but not at end)\n  }\n\n  print \"\\n\";\n}\n</code></pre>\n\n<p>There are many other ways to write it, but hopefully this way helps you understand what's happening and why. Good luck! </p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1555572477, "creation_date": 1555572477, "answer_id": 55741106, "question_id": 55731893, "link": "https://stackoverflow.com/questions/55731893/perl-output-successive-string-from-array/55741106#55741106", "title": "Perl output successive string from array", "body": "<p>I would do it like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $str = \"a&gt;b&gt;c&gt;d&gt;e&gt;f&gt;g\";\nmy @words = split /&gt;/, $str;\n\n$\" = '';\nmy @new_words;\n\npush @new_words, \"@words[0 .. $_]\" for 0 .. $#words;\n\nprint join '&gt;', @new_words;\n</code></pre>\n\n<p>A few things to explain.</p>\n\n<p>Perl will expand array variables in a double-quoted string. So something like this:</p>\n\n<pre><code>@array = ('x', 'y', 'z');\nprint \"@array\";\n</code></pre>\n\n<p>will print <code>x y z</code>. Notice there are spaces between the elements. The string that is inserted between the elements is controlled by the <code>$\"</code> variable. So by setting  that variable to an empty string we can remove the spaces, so:</p>\n\n<pre><code>$\" = '';\n@array = ('x', 'y', 'z');\nprint \"@array\";\n</code></pre>\n\n<p>will print <code>xyz</code>.</p>\n\n<p>The most complex line is:</p>\n\n<pre><code>push @new_words, \"@words[0 .. $_]\" for 0 .. $#words;\n</code></pre>\n\n<p>That's just a compact way to write:</p>\n\n<pre><code>for (0 .. $#words) {\n  my $new_word = \"@words[0 .. $_]\";\n  push @new_words, $new_word;\n}\n</code></pre>\n\n<p>We iterate across the integers from zero to the last index in <code>@words</code>. Each time around the loop, we use an array slice to get a list of elements from the array, convert that to a string (by putting it in double-quotes) and then push that string onto <code>@new_words</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 4608389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a054d1d7b77d30d24c8321d906874921?s=128&d=identicon&r=PG&f=1", "display_name": "audioboxer", "link": "https://stackoverflow.com/users/4608389/audioboxer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1555583384, "creation_date": 1555517327, "question_id": 55731893, "link": "https://stackoverflow.com/questions/55731893/perl-output-successive-string-from-array", "title": "Perl output successive string from array", "body": "<p>I have an array I can print out as \"abcd\" however I am trying to print it as \"a>ab>abc>abcd\".  I can't figure out the nested loop I need within the foreach loop I have. What loop do I need within it to print it this way? </p>\n\n<pre><code>my $str = \"a&gt;b&gt;c&gt;d\";\nmy @words = split /&gt;/, $str;\n\nforeach my $i (0 .. $#words) {\nprint $words[$i], \"\\n\";\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl", "newline"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555517187, "post_id": 55731584, "comment_id": 98142291, "body": "From <a href=\"https://perldoc.perl.org/PerlIO.html\" rel=\"nofollow noreferrer\">perlio documentation</a>: <i>If you want UNIX line endings on a platform that normally does CRLF translation, but still want UTF-8 or encoding defaults, the appropriate thing to do is to add :perlio to the PERLIO environment variable.</i> Probably worth investigating that approach."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555517773, "post_id": 55731584, "comment_id": 98142605, "body": "You should also be using <code>:encoding(UTF-8)</code>, not <code>:utf8</code>, btw"}, {"owner": {"reputation": 18185, "user_id": 165071, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/EWdkL.jpg?s=128&g=1", "display_name": "Alexander Farber", "link": "https://stackoverflow.com/users/165071/alexander-farber"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555527813, "post_id": 55731584, "comment_id": 98147158, "body": "Unfortunately, your both suggestions have not helped: <code>@SET PERLIO=&#39;perlio&#39;</code> and <code>binmode(STDOUT, &quot;:encoding(UTF-8)&quot;);</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555546241, "post_id": 55731584, "comment_id": 98152790, "body": "It says to use <code>:perlio</code> not <code>perlio</code>. Colons are important. (I don&#39;t have access to a Windows computer at the moment for my own testing)."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555546381, "post_id": 55731584, "comment_id": 98152812, "body": "And the documentation I linked explains why <code>:encoding(UTF-8)</code> is preferable (though most of the examples don&#39;t use it, sigh)."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1555519189, "creation_date": 1555519189, "answer_id": 55732391, "question_id": 55731584, "link": "https://stackoverflow.com/questions/55731584/binmodestdout-utf8-and-unix-line-endings-in-strawberry-perl/55732391#55732391", "title": "binmode(STDOUT, &quot;:utf8&quot;); and Unix line endings in Strawberry perl", "body": "<p>There is probably a better way, but you could make <code>STDOUT</code> a <code>:raw</code> file handle and then encode the output there yourself.</p>\n\n<pre><code>binmode STDOUT;    # or  binmode STDOUT, \":raw\";\n...\nprint (length($expl) &gt; 3 ? encode_utf8(\"|$expl\\n\") : \"\\n\");   # $exp1 is already decoded\n...\nprint md5_hex(encode_utf8('my secret' . $word)) . \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 18185, "user_id": 165071, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/EWdkL.jpg?s=128&g=1", "display_name": "Alexander Farber", "link": "https://stackoverflow.com/users/165071/alexander-farber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 55732391, "answer_count": 1, "score": 0, "last_activity_date": 1555519189, "creation_date": 1555516335, "question_id": 55731584, "link": "https://stackoverflow.com/questions/55731584/binmodestdout-utf8-and-unix-line-endings-in-strawberry-perl", "title": "binmode(STDOUT, &quot;:utf8&quot;); and Unix line endings in Strawberry perl", "body": "<p>With Strawberry perl v5.28.1 on Windows 10 I am trying to achieve the same result as on Linux - namely get a UTF8 encoded file <strong>with Unix line endings</strong>.</p>\n\n<p>Here is my Perl script:</p>\n\n<pre><code>#!perl -w\n\nuse strict;\nuse utf8;\nuse Encode qw(encode_utf8);\nuse Digest::MD5 qw(md5_hex);\n\nbinmode(STDIN, \":utf8\");\nbinmode(STDOUT, \":utf8\");\n\nmy %words;\n\nwhile(&lt;&gt;) {\n        # change yo to ye\n        tr/\u0451\u0401/\u0435\u0415/;\n\n        # extract russian word and its optional explanation\n        next unless /^([\u0410-\u042f]{2,})\\|?([\u0410-\u042f ,-]*)/i;\n        my ($word, $expl) = (uc $1, $2);\n\n        if (length($word) &lt;= 3) {\n                print $word;\n                # if explanation is missing, omit the pipe\n                print (length($expl) &gt; 3 ? \"|$expl\\x0A\" : \"\\x0A\");\n        } else {\n                # print the md5 hash and omit the pipe and explanation\n                print md5_hex(encode_utf8('my secret' . $word)) . \"\\x0A\";\n        }\n}\n</code></pre>\n\n<p>Here is my input file:</p>\n\n<pre><code>\u0410\u0410\u041a|\u041f\u043b\u043e\u0441\u043a\u043e\u0434\u043e\u043d\u043d\u043e\u0435 \u0440\u0435\u0447\u043d\u043e\u0435 \u0441\u0443\u0434\u043d\u043e\n\u0410\u0410\u0420\u041e\u041d\u041e\u0412\u0415\u0426|\n\u0410\u0410\u0420\u041e\u041d\u041e\u0412\u0429\u0418\u041d\u0410|\n\u0410\u0410\u0422|\u0414\u0440\u0430\u0433\u043e\u0446\u0435\u043d\u043d\u044b\u0439 \u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043a\u0430\u043c\u0435\u043d\u044c \u0432 \u042f\u043f\u043e\u043d\u0438\u0438\n\u0410\u0411\u0410|\u0422\u043e\u043b\u0441\u0442\u043e\u0435 \u0438 \u0440\u0435\u0434\u043a\u043e\u0435 \u0431\u0435\u043b\u043e\u0435 \u0441\u0443\u043a\u043d\u043e\n\u0410\u0411\u0410\u0416\u0423\u0420|\n\u0410\u0411\u0410\u0416\u0423\u0420\u041e\u0414\u0415\u0420\u0416\u0410\u0422\u0415\u041b\u042c|\n\u0410\u0411\u0410\u0417|\u0413\u0440\u0443\u0437\u0438\u043d\u0441\u043a\u0430\u044f \u0441\u0435\u0440\u0435\u0431\u0440\u044f\u043d\u0430\u044f \u043c\u043e\u043d\u0435\u0442\u0430\n\u0410\u0411\u0410\u0417\u0410|\n</code></pre>\n\n<p>Here is how I run it (I use <code>type</code> instead of <code>&lt;</code> because I have numerous input files in my real use case):</p>\n\n<pre><code>type input.txt | perl encode-words-ru.pl &gt; output.txt\n</code></pre>\n\n<p>Regardless of what I try in the above Perl source code, the lines in output.txt are terminated by \\x0D\\x0A</p>\n\n<p>Please help me to stop perl from \"helping\" me!</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1555515372, "post_id": 55731001, "comment_id": 98141299, "body": "Some interesting coding choices here. Why <code>use warnings</code> but not <code>use strict</code>? Why declare <code>%langs</code> with <code>my</code>, but no other variables? Why switch between <code>for</code> and <code>foreach</code>? Why pass several arguments to <code>print()</code> instead of interpolating the variables into a single string? Why use <code>print()</code>, not <code>say()</code>?"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 2, "creation_date": 1555516125, "post_id": 55731001, "comment_id": 98141759, "body": "And if this is the &quot;correct&quot; answer, which it very well could be, then hashes aren&#39;t really giving you anything. If you can&#39;t extract a key for O(1) lookup, then there&#39;s little point in the hash (at least as far as this goes), and you may as well use an array."}, {"owner": {"reputation": 3787, "user_id": 393436, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/db944a31ba8a5c51c43b8670b9dc737a?s=128&d=identicon&r=PG", "display_name": "Raghuram", "link": "https://stackoverflow.com/users/393436/raghuram"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1555571144, "post_id": 55731001, "comment_id": 98158639, "body": "@DaveCross. Its been 8 years i have worked in Perl and so i searched for examples and created my example. So there will be some issues :)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1555572693, "post_id": 55731001, "comment_id": 98159401, "body": "@Raghuram: That&#39;s the problem with pulling together code from different sources. You can end up with wildly differing styles in the same example and that can easily confuse a beginner. Put yourself in the place of a beginner reading your code. I&#39;d be thinking &quot;so you use <code>for</code> to loop over a hash and <code>foreach</code> to loop over an array&quot; - and that&#39;s just wrong."}], "tags": [], "owner": {"reputation": 3787, "user_id": 393436, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/db944a31ba8a5c51c43b8670b9dc737a?s=128&d=identicon&r=PG", "display_name": "Raghuram", "link": "https://stackoverflow.com/users/393436/raghuram"}, "is_accepted": true, "score": 1, "last_activity_date": 1555514304, "creation_date": 1555514304, "answer_id": 55731001, "question_id": 55730552, "link": "https://stackoverflow.com/questions/55730552/check-if-part-of-a-string-is-present-in-keys-of-hash-table/55731001#55731001", "title": "Check if part of a string is present in keys of hash table", "body": "<p>I added the inputs given by you in small perl code and i am able to check whether there is a match in keys</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\n\nmy %langs = ( \"pre1-pre2\" =&gt; 'pre1-pre2',\n \"pre3\" =&gt; 'pre3',\n \"pre4-pre5-pre6\" =&gt; 'pre4-pre5-pre6');\n\n@pats=(\"pre1-pre2-text1-text2\", \"pre3-text3\", \"pre4-pre5-pre6-text4\");\n\nfor(keys %langs){\n  foreach $ss (@pats){\n    if (index($ss,$_) != -1){\n      print(\"Key contains:\",$_, \"|\", $ss,\"\\n\");\n    }\n    else{\n      print(\"NOT FOUND:\",$_, \"|\", $ss,\"\\n\");\n    }\n  }\n}\n</code></pre>\n\n<p>NOTE: If i have understood your requirement rightly then this will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 1, "last_activity_date": 1555518044, "last_edit_date": 1555518044, "creation_date": 1555517720, "answer_id": 55732006, "question_id": 55730552, "link": "https://stackoverflow.com/questions/55730552/check-if-part-of-a-string-is-present-in-keys-of-hash-table/55732006#55732006", "title": "Check if part of a string is present in keys of hash table", "body": "<p>This answer supposes that <code>pre</code> cannot occure in the middle of the string (ie, you won't have a string like <code>pre1-pre2-text1-pre5</code> where your prefix would only be <code>pre1-pre2</code>). If this assumption isn't valid, then use <code>/^((?:pre\\d+)(?:-pre\\d+)*)/</code> instead of <code>/^(.*pre\\d+)/</code> (I prefer the latter because it's more readable, but the former is more precise).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy %pre = map { $_ =&gt; 1 } qw(pre1-pre2 pre3 pre4-pre5-pre6);\n\nwhile (&lt;DATA&gt;) {\n    my ($prefix) = /^(.*pre\\d+)/;\n    if ($prefix &amp;&amp; exists $pre{$prefix}) {\n        say \"Prefix exists: $prefix\";\n    } else {\n        say \"Prefix doesn't exist: $prefix\";\n    }\n}\n\n__DATA__\npre1-pre2-text1-text2\npre3-text3\npre4-pre5-pre6-text4\npre7-pre8-text5\n</code></pre>\n\n<p>If you could have a line <code>pre1-pre2-text1</code> where the prefix should be just <code>pre1</code>, then this solution won't work. In that case, you'll have no other choice than to iterate over all the keys of the hash and check if they match the beginning of the string:</p>\n\n<pre><code>while (&lt;DATA&gt;) {\n    for my $prefix (keys %pre) {\n        if (/^\\Q$prefix/) {\n            say \"Found prefix: $prefix\";\n            last;\n        }\n    }\n}\n</code></pre>\n\n<p>However, this is far less efficient, since you need to iterate over all of the hash keys for each line.<br>\nRegarding <code>\\Q</code>: it ensures that this solution works even if your prefixes contain special regex characters (like <code>+</code> or <code>.</code>). If you prefixes are always just like <code>pre1-pre2</code>, then you can omit <code>\\Q</code>.</p>\n\n<hr>\n\n<p>If you have trouble understanding <code>my %pre = map { $_ =&gt; 1 } qw(pre1-pre2 pre3 pre4-pre5-pre6);</code>: it's a concise version of</p>\n\n<pre><code>my %prev = (\n    'pre1-pre2'      =&gt; 1,\n    'pre3'           =&gt; 1,\n    'pre4-pre5-pre6' =&gt; 1\n);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "edited": false, "score": 0, "creation_date": 1556008838, "post_id": 55739751, "comment_id": 98282242, "body": "Thanks. The if condition evaluates to true, so that seems correct. However how can I now print the match and access the value associated with that match in my original %h?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "edited": false, "score": 0, "creation_date": 1556009131, "post_id": 55739751, "comment_id": 98282390, "body": "@user1987607 Welcome.  For that you want to <i>capture</i> the match.  That&#39;s a good point, it should be in the post -- added a note."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1556088057, "last_edit_date": 1556088057, "creation_date": 1555566107, "answer_id": 55739751, "question_id": 55730552, "link": "https://stackoverflow.com/questions/55730552/check-if-part-of-a-string-is-present-in-keys-of-hash-table/55739751#55739751", "title": "Check if part of a string is present in keys of hash table", "body": "<p>One way: form a pattern using alternation of keys, and test strings against it</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy @strings = qw(pre-not pre1-pre2-text1-text2 pre3-text3 pre4-pre5-pre6-text4);\n\nmy %h = ( 'pre1-pre2' =&gt; 1, 'pre3' =&gt; 1, 'pre4-pre5-pre6' =&gt; 1 );\n\nmy $keys_re = join '|', map { quotemeta } keys %h; \n\nforeach my $str (@strings) { \n    say $str  if $str =~ /$keys_re/;\n}\n</code></pre>\n\n<p>This has quadratic complexity, but alternation won't go through all keys and it's C (regex itself).</p>\n\n<p>A possible improvement (or a necessity!) may be to suitably sort keys. For example, shortest first</p>\n\n<pre><code>my $keys_re = join '|', map { quotemeta } sort { length $a &lt;=&gt; length $b } keys %h; \n</code></pre>\n\n<p>This may help if there are keys with common parts, but note that it may be a non-trivial adjustment which can affect correctness -- and which <em>may be needed</em>; consider carefully.</p>\n\n<p>To also get the key itself add the capturing parenthesis around the pattern</p>\n\n<pre><code>foreach my $str (@strings) { \n    say \"$str matched by key: $1\"  if $str =~ /($keys_re)/;\n}\n</code></pre>\n\n<p>where <code>$1</code> contains the alternation that matched and was captured, which is the key.</p>\n"}], "owner": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 55731001, "answer_count": 3, "score": 1, "last_activity_date": 1556088057, "creation_date": 1555512963, "last_edit_date": 1556043409, "question_id": 55730552, "link": "https://stackoverflow.com/questions/55730552/check-if-part-of-a-string-is-present-in-keys-of-hash-table", "title": "Check if part of a string is present in keys of hash table", "body": "<p>I'm dealing with a hash table in perl.</p>\n\n<p>I have a multiple strings, with multiple lenghts and multiple <code>-</code>:</p>\n\n<pre><code>pre1-pre2-text1-text2\npre3-text3\npre4-pre5-pre6-text4\n</code></pre>\n\n<p>I have a <code>%hash</code> with the following keys:</p>\n\n<pre><code>pre1-pre2\npre3\npre4-pre5-pre6\n</code></pre>\n\n<p>So the keys <code>%hash</code> only contain the <code>pre</code> part of the strings.</p>\n\n<p>How can I check if there is a match between let's say the first string <code>pre1-pre2-text1-text2</code> and the keys of <code>%hash</code>?</p>\n"}, {"tags": ["perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1555510812, "creation_date": 1555510812, "answer_id": 55729746, "question_id": 55729528, "link": "https://stackoverflow.com/questions/55729528/perl-grep-matching-key-from-hash-table/55729746#55729746", "title": "perl grep matching key from hash table", "body": "<p>You can extract all the matching keys right in the condition:</p>\n\n<pre><code>if (my @matches = grep /.*$var1*/, keys %my_hash) {\n    my @values = @my_hash{@matches};\n}\n</code></pre>\n\n<p>Also, <code>/.*$var1*/</code> is weird. Do you want to apply the final asterisk to whatever comes last in the variable? Also, using <code>.*</code> at the beginning does nothing if there's no <code>/g</code>: <code>/$var1*/</code> would work the same (and maybe faster).</p>\n"}, {"comments": [{"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "edited": false, "score": 1, "creation_date": 1555524072, "post_id": 55731659, "comment_id": 98145568, "body": "I&#39;d refine that a bit to the first argument being a block of code that&#39;s evaluated, with <code>$_</code> set to the value of the current entry in the list that&#39;s the second argument. If the block evaluates to a true value, then the current value of <code>$_</code> is added to the list of items &quot;matched&quot;; if it&#39;s false, we continue to the next item in the second argument. <code>map</code> is similar, but it returns <i>every</i> value of <code>$_</code> after the block executes."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555524469, "last_edit_date": 1555524469, "creation_date": 1555516631, "answer_id": 55731659, "question_id": 55729528, "link": "https://stackoverflow.com/questions/55729528/perl-grep-matching-key-from-hash-table/55731659#55731659", "title": "perl grep matching key from hash table", "body": "<pre><code>if (@captarr= grep {/.*$var1*/} keys %my_hash ) {\n}\n</code></pre>\n\n<p><code>@captarr = grep (/.*$var1*/, keys %my_hash)</code> is a 2 argument function;<br>\n1st is regex, 2nd is array upon which the regex applied,<br>\nreturning array of matched as if the 2nd arg. array is one string made of the array, searched for in global, and it'll\nreturn nul if none is matched.\nit's similar to <code>@captarr = $my_str ~= /.*$var1*/</code> with swapped argument position of LHS ~= RHS </p>\n"}], "owner": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 55729746, "answer_count": 2, "score": 0, "last_activity_date": 1555524469, "creation_date": 1555510163, "question_id": 55729528, "link": "https://stackoverflow.com/questions/55729528/perl-grep-matching-key-from-hash-table", "title": "perl grep matching key from hash table", "body": "<p>I'm dealing with a hash in Perl.</p>\n\n<p>I use the following statement to check if a variable matches a key in my hash table. The statement already evaluates to true. So the grep works. But how can I now retrieve the hash key &amp; value where there is a match?</p>\n\n<pre><code>if ( grep {/.*$var1*/} keys %my_hash ) {\n  #print the key and value that results from the grep?\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "authentication", "keycloak"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 4, "creation_date": 1555609116, "post_id": 55728688, "comment_id": 98178967, "body": "See <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  (You can vote on answers, by clicking on arrows next to them, and accept one, by clicking the check-mark)"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "edited": false, "score": 0, "creation_date": 1555522689, "post_id": 55731121, "comment_id": 98144924, "body": "Thanks for the response... I will try it out.Actually my bigges concern is about the first requirement about the dictionary words"}], "tags": [], "owner": {"reputation": 477, "user_id": 6394921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50de9344dafa1cffe8585a3dfa22e577?s=128&d=identicon&r=PG&f=1", "display_name": "Jager567", "link": "https://stackoverflow.com/users/6394921/jager567"}, "is_accepted": false, "score": 0, "last_activity_date": 1555514739, "creation_date": 1555514739, "answer_id": 55731121, "question_id": 55728688, "link": "https://stackoverflow.com/questions/55728688/perl-regular-expression-how-to-exclude-words-from-a-file/55731121#55731121", "title": "Perl Regular expression | how to exclude words from a file", "body": "<p>I hope someone else will come with a better solution, but this seems to do what you want:</p>\n\n<pre><code>\\b                          Match word boundary\n  (?:                       Start capture group\n    (?:([a-z0-9])(?!\\1))*   Match all characters until it encounters a double\n    (?:([a-z0-9])\\2)+       Match all repeated characters until a different one is reached\n  ){0,2}                    Match capture group 0 or 2 times\n  (?:([a-z0-9])(?!\\3))+     Match all characters until it encounters a double\n\\b                          Match end of word\n</code></pre>\n\n<p>I changed the <code>[a-z]</code> to also match numbers, since the examples you gave seem to also include numbers. Perl regex also has the <code>\\w</code> shorthand, which is equivalent to <code>[A-Za-z0-9_]</code>, which could be handy if you want to match any character in a word.</p>\n"}, {"tags": [], "owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 2, "last_activity_date": 1555828758, "last_edit_date": 1555828758, "creation_date": 1555522698, "answer_id": 55733207, "question_id": 55728688, "link": "https://stackoverflow.com/questions/55728688/perl-regular-expression-how-to-exclude-words-from-a-file/55733207#55733207", "title": "Perl Regular expression | how to exclude words from a file", "body": "<p>To not match a word from a file you might check <a href=\"https://stackoverflow.com/questions/7283274/check-whether-a-string-contains-a-substring\">whether a string contains a substring</a> or use a negative lookahead and an alternation:</p>\n\n<pre><code>^(?!.*(?:tree|car|ship)).*$\n</code></pre>\n\n<ul>\n<li><code>^</code> Assert start of string</li>\n<li><code>(?!</code> negative lookahead, assert what is on the right is not\n\n<ul>\n<li><code>.*(?:tree|car|ship)</code> Match 0+ times any char except a newline and match either tree car or ship</li>\n</ul></li>\n<li><code>)</code> Close negative lookahead </li>\n<li><code>.*</code> Match any char except a newline</li>\n<li><code>$</code> Assert end of string</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/NcwKjQ/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n\n<p>To not allow a string to have over 3 times a char repeat you could use:</p>\n\n<pre><code>\\b(?!(?:\\w*(\\w)\\1){3})\\w+\\b\n</code></pre>\n\n<ul>\n<li><code>\\b</code> Word boundary</li>\n<li><code>(?!</code> Negative lookahead, assert what is on the right is not\n\n<ul>\n<li><code>(?:</code> NOn capturing group</li>\n<li><code>\\w*(\\w)\\1</code> Match 0+ times a word character followed by capturing a word char in a group followed by a backreference using <code>\\1</code> to that group</li>\n<li><code>){3}</code> Close non capturing group and repeat 3 times</li>\n</ul></li>\n<li><code>)</code> close negative lookahead</li>\n<li><code>\\w+</code> Match 1+ word characters</li>\n<li><code>\\b</code> word boundary</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/k12wRI/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n\n<p><strong>Update</strong></p>\n\n<p>According to <a href=\"https://stackoverflow.com/a/55757527/5424988\">this posted answer</a> (which you might add to the question instead) you have 2 patterns that you want to combine but it does not work:</p>\n\n<pre><code>(?=^(?!(?:\\w*(.)\\1){3}).+$)(?=^(?:(.)(?!(?:.*?\\1){4}))*$)\n</code></pre>\n\n<p>In those 2 patterns you use 2 capturing groups, so the second pattern has to point to the second capturing group <code>\\2</code>. </p>\n\n<pre><code>(?=^(?!(?:\\w*(.)\\1){3}).+$)(?=^(?:(.)(?!(?:.*?\\2){4}))*$)\n                                               ^  \n</code></pre>\n\n<p><a href=\"https://regex101.com/r/jkbmZK/1\" rel=\"nofollow noreferrer\">Pattern demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "edited": false, "score": 0, "creation_date": 1556159878, "post_id": 55734041, "comment_id": 98345275, "body": "Adding to zdim&#39;s answer to the first part of your question, use caution when assembling the regex of <code>@words</code>. The order of the words joined with &#39;|&#39; can affect the matching."}, {"owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "edited": false, "score": 0, "creation_date": 1556160345, "post_id": 55734041, "comment_id": 98345351, "body": "The order of the words joined with &#39;|&#39; can affect the matching. For example, you&#39;d want TRUSTEES before TRUSTEE before TRUST so the join result would have those words like this:  &#39;TRUSTEES|TRUSTEE|TRUST&#39;. I have a little subroutine to order a list of patterns/words, which I&#39;ll post as an answer."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "edited": false, "score": 0, "creation_date": 1556173968, "post_id": 55734041, "comment_id": 98348733, "body": "@BruceVanAllen That&#39;s the &quot;<i>This may be possible to tweak and improve, depending on your use cases.</i>&quot; statement in the answer.  And in fact, given what precisely they ask for (only finding a match for any one of the words) you&#39;d actually want to order it the other way round, shorter first -- then any of the words that share that stem are found quicker.  But we don&#39;t really know the actual use case so I only left a mention."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1588130333, "last_edit_date": 1588130333, "creation_date": 1555526323, "answer_id": 55734041, "question_id": 55728688, "link": "https://stackoverflow.com/questions/55728688/perl-regular-expression-how-to-exclude-words-from-a-file/55734041#55734041", "title": "Perl Regular expression | how to exclude words from a file", "body": "<p>One way to exclude strings that contain words from a given list is to form a pattern with an alternation of the words and use that in a regex, and exclude strings for which it matches.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature qw(say);\n\nuse Path::Tiny;\n\nmy $file = shift // die \"Usage: $0 file\\n\";  #/\n\nmy @words = split ' ', path($file)-&gt;slurp;\n\nmy $exclude = join '|', map { quotemeta } @words;\n\nforeach my $string (qw(a1testtre orangesh1 apleship3)) \n{ \n    if ($string !~ /$exclude/) { \n        say \"OK: $string\"; \n    }\n}\n</code></pre>\n\n<p>I use <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> to read the file into a a string (\"slurp\"), which is then <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> by whitespace into words to use for exclusion. The <a href=\"https://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a> escapes non-\"word\" characters, should any happen in your words, which are then joined by <code>|</code> to form a string with a regex pattern. (With complex patterns use <a href=\"https://perldoc.perl.org/functions/qr.html\" rel=\"nofollow noreferrer\">qr</a>.) </p>\n\n<p>This may be possible to tweak and improve, depending on your use cases, for one in regards to the order of of patterns with common parts in alternation.<sup>&dagger;</sup></p>\n\n<p>The check that successive duplicate characters do not occur more than three times</p>\n\n<pre><code>foreach my $string (qw(adminnisstrator21 kkeeykloakk stack22ooverflow))\n{\n    my @chars_that_repeat = $string =~ /(.)\\1+/g;\n\n    if (@chars_that_repeat &lt; 3) { \n        say \"OK: $string\";\n    }\n}\n</code></pre>\n\n<p>A long string of repeated chars (<code>aaaa</code>) counts as one instance, due to the <code>+</code> quantifier in  regex; if you'd rather count all pairs remove the <code>+</code> and four <code>a</code>s will count as two pairs. The same char repeated at various places in the string counts every time, so <code>aaXaa</code> counts as two pairs.</p>\n\n<p>This snippet can be just added to the above program, which is invoked with the name of the file with words to use for exclusion.  They both print what is expected from provided samples.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp; Consider an example with exclusion-words: <code>so</code>, <code>sole</code>, and <code>solely</code>. If you only need to check whether any one of these matches then you'd want shorter ones first in the alternation</p>\n\n<pre><code>my $exclude = join '|', map { quotemeta } sort { length $a &lt;=&gt; length $b } @words;\n#==&gt;  so|sole|solely\n</code></pre>\n\n<p>for a quicker match (<code>so</code> matches all three).  This, by all means, appears to be the case here.</p>\n\n<p>But, if you wanted to correctly identify which word matched then you <em>must</em> have longer words first, </p>\n\n<pre><code>solely|sole|so\n</code></pre>\n\n<p>so that a string <code>solely</code> is correctly matched by its word before it can be \"stolen\" by <code>so</code>. Then in this case you'd want it the other way round,\n<code>sort { length $b &lt;=&gt; length $a }</code></p>\n"}, {"comments": [{"owner": {"reputation": 91433, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 0, "creation_date": 1555828820, "post_id": 55757527, "comment_id": 98232160, "body": "You should point to the second capturing group instead for the second pattern. I have added an update to my answer."}], "tags": [], "owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "is_accepted": false, "score": 0, "last_activity_date": 1555655271, "creation_date": 1555655271, "answer_id": 55757527, "question_id": 55728688, "link": "https://stackoverflow.com/questions/55728688/perl-regular-expression-how-to-exclude-words-from-a-file/55757527#55757527", "title": "Perl Regular expression | how to exclude words from a file", "body": "<p>My problem is that i have 2 regex that working:</p>\n\n<p>Not allow over 3 pairs of chars: </p>\n\n<pre><code>          (?=^(?!(?:\\w*(.)\\1){3}).+$)\n</code></pre>\n\n<p>Not allow over 4 times a char to repeat:</p>\n\n<pre><code>        (?=^(?:(.)(?!(?:.*?\\1){4}))*$)\n</code></pre>\n\n<p>Now i want to combine them into one row like:</p>\n\n<pre><code>      (?=^(?!(?:\\w*(.)\\1){3}).+$)(?=^(?:(.)(?!(?:.*?\\1){4}))*$)\n</code></pre>\n\n<p>but its working only the regex that is first and not both of them</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "is_accepted": false, "score": 0, "last_activity_date": 1556160785, "creation_date": 1556160785, "answer_id": 55841128, "question_id": 55728688, "link": "https://stackoverflow.com/questions/55728688/perl-regular-expression-how-to-exclude-words-from-a-file/55841128#55841128", "title": "Perl Regular expression | how to exclude words from a file", "body": "<p>As mentioned in comment to @zdim's answer, take it a bit further by making sure that the order in which your words are assembled into the match pattern doesn't trip you. If the words in the file are not very carefully ordered to start, I use a subroutine like this when building the match string:</p>\n\n<pre><code># Returns a list of alternative match patterns in tight matching order.\n# E.g., TRUSTEES before TRUSTEE before TRUST   \n# TRUSTEES|TRUSTEE|TRUST\n\nsub tight_match_order {\n    return @_ unless @_ &gt; 1;\n    my (@alts, @ordered_alts, %alts_seen);\n    @alts   = map { $alts_seen{$_}++ ? () : $_ } @_;\n    TEST: {\n        my $alt = shift @alts;\n        if (grep m#$alt#, @alts) {\n            push @alts =&gt; $alt;\n        } else {\n            push @ordered_alts =&gt; $alt;\n        }\n        redo TEST if @alts;\n    }\n    @ordered_alts\n}\n\n</code></pre>\n\n<p>So following @zdim's answer:</p>\n\n<pre><code>...\nmy @words = split ' ', path($file)-&gt;slurp;\n\n@words = tight_match_order(@words); # add this line\n\nmy $exclude = join '|', map { quotemeta } @words;\n...\n</code></pre>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1588130333, "creation_date": 1555507717, "last_edit_date": 1555842687, "question_id": 55728688, "link": "https://stackoverflow.com/questions/55728688/perl-regular-expression-how-to-exclude-words-from-a-file", "title": "Perl Regular expression | how to exclude words from a file", "body": "<p>i searching to find some Perl Regular Expression Syntax about some requirements i have in a project.\nFirst i want to exclude strings from a txt file (dictionary).</p>\n\n<p>For example if my file have this strings:</p>\n\n<pre><code>path.../Document.txt |\n  tree\n  car\n  ship\n</code></pre>\n\n<p>i using Regular Expression</p>\n\n<pre>\na1testtre  --  match\norangesh1  --  match\napleship3  --  not match  [contains word from file ]\n</pre>\n\n<p>Also i have one more requirement that i couldnt solve. I have to create a Regex that not allow a String to have over 3 times a char repeat (two chars).</p>\n\n<p>For example :</p>\n\n<pre>\nadminnisstrator21     -- match  (have 2 times a repetition of chars)\nkkeeykloakk           -- not match have over 3 times repetition\nstack22ooverflow      -- match  (have 2 times a repetition of chars)\n</pre>\n\n<p>for this i have try   </p>\n\n<pre><code>\\b(?:([a-z])(?!\\1))+\\b\n</code></pre>\n\n<p>but it works only for the first char-reppeat\nAny idea how to solve these two?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 4, "creation_date": 1555497451, "post_id": 55725601, "comment_id": 98129973, "body": "Being a new SO user, I&#39;ll suggest you to please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a> and specifically <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> so it helps others and in turn they can help you back."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1555499991, "post_id": 55725601, "comment_id": 98131407, "body": "See also <a href=\"https://stackoverflow.com/q/25008883/2173773\">Excluding certain directories with Find::File::Rule</a> and <a href=\"https://stackoverflow.com/q/21431191/2173773\">Perl File::Find::Rule excluding directories from an array</a> and <a href=\"https://stackoverflow.com/q/25895751/2173773\">File::Find::Rule to exclude a single dir only for the top level</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11373242, "user_type": "registered", "profile_image": "https://graph.facebook.com/1258100401017102/picture?type=large", "display_name": "Angel Peehuu", "link": "https://stackoverflow.com/users/11373242/angel-peehuu"}, "edited": false, "score": 0, "creation_date": 1555673249, "post_id": 55749493, "comment_id": 98196884, "body": "It worked exactly the way I wanted. Thanks a ton :)"}, {"owner": {"reputation": 11, "user_id": 11373242, "user_type": "registered", "profile_image": "https://graph.facebook.com/1258100401017102/picture?type=large", "display_name": "Angel Peehuu", "link": "https://stackoverflow.com/users/11373242/angel-peehuu"}, "edited": false, "score": 0, "creation_date": 1555674012, "post_id": 55749493, "comment_id": 98197142, "body": "The output contains the directories too.   /opt/IBM/tivoli/netcool/AWS/DB2/sql_scripts /opt/IBM/tivoli/netcool/AWS/DB2/sql_scripts/v2_version /opt/IBM/tivoli/netcool/AWS/DB2/sql_scripts/v2_version/Rollb&zwnj;&#8203;ack.sql /opt/IBM/tivoli/netcool/AWS/DB2/sql_scripts/v2_version/Updat&zwnj;&#8203;eSchemaVersionHistor&zwnj;&#8203;y.sql /opt/IBM/tivoli/netcool/AWS/DB2/sql_scripts/v1_version /opt/IBM/tivoli/netcool/AWS/DB2/sql_scripts/v1_version/Rollb&zwnj;&#8203;ack.sql /opt/IBM/tivoli/netcool/AWS/DB2/sql_scripts/v1_version/Updat&zwnj;&#8203;eSchemaVersionHistor&zwnj;&#8203;y.sql     How Can I get only file names?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1555674968, "last_edit_date": 1555674968, "creation_date": 1555602003, "answer_id": 55749493, "question_id": 55725601, "link": "https://stackoverflow.com/questions/55725601/exclude-specific-directory-in-perl/55749493#55749493", "title": "Exclude specific directory in perl", "body": "<p>Using <code>find</code>:</p>\n\n<pre><code>quotemeta() { printf '%s' \"$1\" | perl -0777ne'print quotemeta($_)'; }\n\npath=constellation/netcool/aws_netcool_db2/trunk/src\n\nfind \"$path\" \\\n   -path \"$( quotemeta \"$path/base\" )\" \\\n   -prune \\\n-o \\\n   \\! -type d \\\n   -print\n</code></pre>\n\n<p>Note that this doesn't work for paths starting with <code>-</code>. Prepend <code>./</code> to those.</p>\n\n<hr>\n\n<p>Using Perl:</p>\n\n<pre><code>use File::Find::Rule qw( );\n\nmy $path = \"constellation/netcool/aws_netcool_db2/trunk/src\";\n\nmy $FFR = File::Find::Rule::;\nmy @files =\n   $FFR-&gt;or(\n      $FFR\n         -&gt;exec(sub{ $_[2] eq \"$path/base\" })\n         -&gt;prune\n         -&gt;discard,\n      $FFR\n         -&gt;not( $FFR-&gt;directory ),\n   )\n      -&gt;in($path);\n</code></pre>\n\n<p>Note that this doesn't work for all paths (e.g. <code>.</code>, those that end with <code>/</code>, etc) because F::F::R cleans up the paths. You would need to apply those same undocumented cleanups to the value against which <code>$_[2]</code> is compared if you wish to support arbitrary paths.</p>\n"}], "owner": {"reputation": 11, "user_id": 11373242, "user_type": "registered", "profile_image": "https://graph.facebook.com/1258100401017102/picture?type=large", "display_name": "Angel Peehuu", "link": "https://stackoverflow.com/users/11373242/angel-peehuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1555677330, "creation_date": 1555497362, "last_edit_date": 1555677330, "question_id": 55725601, "link": "https://stackoverflow.com/questions/55725601/exclude-specific-directory-in-perl", "title": "Exclude specific directory in perl", "body": "<p>I want to write code to read all the files present in a directory  except a specific directory.</p>\n\n<p>Directory path: </p>\n\n<pre><code>constellation/netcool/aws_netcool_db2/trunk/src\n</code></pre>\n\n<p>Under <code>src</code>, there are 3 directories (<code>base</code> , <code>v1_version</code>, <code>v2_version</code>, <code>v3_version</code>). I want to read all directory except <code>base</code> directory. </p>\n\n<p>How do I solve this problem?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555496701, "post_id": 55725408, "comment_id": 98129523, "body": "Indeed it works. I was missing <i>branch reset group</i> alternations, I think. Thank you very much."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 1, "creation_date": 1555496734, "post_id": 55725408, "comment_id": 98129541, "body": "@IliaRostovtsev I found a simpler way without a branch reset. I will add that one, too, if you wish"}, {"owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "edited": false, "score": 0, "creation_date": 1555496953, "post_id": 55725408, "comment_id": 98129672, "body": "This is great. Thank you! \ud83d\ude0a"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1555496966, "last_edit_date": 1555496966, "creation_date": 1555496647, "answer_id": 55725408, "question_id": 55725268, "link": "https://stackoverflow.com/questions/55725268/perl-regex-matching-alternative-file-names/55725408#55725408", "title": "Perl regex matching alternative file names", "body": "<p>You may use</p>\n\n<pre><code>/^(.*?)\\.(tar\\.gz|[^.]*)$/\n</code></pre>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>^</code> - start of a line</li>\n<li><code>(.*?)</code> - Group 1: any 0+ chars other than line break chars, as few as possible</li>\n<li><code>\\.</code> - a dot</li>\n<li><code>(tar\\.gz|[^.]*)</code> - Group 2: <code>tar.gz</code> or any 0+ chars other than a dot</li>\n<li><code>$</code> - end of line.</li>\n</ul>\n\n<p>See the <a href=\"https://regex101.com/r/DotO8R/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p>Alternatively, you might also use your original pattern but wrap it with a <a href=\"https://www.regular-expressions.info/branchreset.html\" rel=\"nofollow noreferrer\">branch reset group</a>:</p>\n\n<pre><code>/(?|(.*)\\.(tar\\.gz)|(.*)\\.(.*))$/\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/DotO8R/2\" rel=\"nofollow noreferrer\">this regex demo</a>. It will assign the same IDs to the corresponding capturing groups inside the branch reset group. Since <code>(.*)\\.(tar\\.gz)</code> will be tried first, if there is a string ending with <code>.tar.gz</code>, the first alternation part (<code>(.*)\\.(tar\\.gz)</code>) will match, else, the second one (<code>(.*)\\.(.*)</code>) will consume the string.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555513454, "creation_date": 1555513454, "answer_id": 55730715, "question_id": 55725268, "link": "https://stackoverflow.com/questions/55725268/perl-regex-matching-alternative-file-names/55730715#55730715", "title": "Perl regex matching alternative file names", "body": "<pre><code>perl -e '$name= \"file.zip\";($fname,$fext)=$name =~ /(.*)\\.(tar\\.gz|zip)$/ ;print \"$fname.$fext\"'\nfile.zip\n</code></pre>\n\n<p>the number of captured group, ie. 4, is greater than that of assigned variable <code>($fname,$fext)=</code> , ie. 2 \nonly the first 2 group is assigned</p>\n"}], "owner": {"reputation": 12043, "user_id": 1455661, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9276faba7b29d03d1e8b8ed43ee24b51?s=128&d=identicon&r=PG", "display_name": "Ilia Rostovtsev", "link": "https://stackoverflow.com/users/1455661/ilia-rostovtsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 55725408, "answer_count": 2, "score": 2, "last_activity_date": 1555513454, "creation_date": 1555496235, "question_id": 55725268, "link": "https://stackoverflow.com/questions/55725268/perl-regex-matching-alternative-file-names", "title": "Perl regex matching alternative file names", "body": "<h3>Example:</h3>\n\n<p>I used to use regex to get extension from the file name:</p>\n\n<pre><code>my $name = \"file.zip\";\nmy ($fname, $fext) = $name =~ /(.*)\\.(.*)/;\n\n# file\n# zip\n</code></pre>\n\n<p>Now, I need to make sure that it also properly catches <code>.tar.gz</code> files, in case name includes it, otherwise falls back to example above. I did the following:</p>\n\n<pre><code>my $name = \"file.tar.gz\";\nmy ($fname, $fext) = $name =~ /(.*)\\.(tar\\.gz$)|(.*)\\.(.*)/;\n\n# file\n# tar.gz\n</code></pre>\n\n<h3>Problem:</h3>\n\n<p>The problem is that now it only works for <code>file.tar.gz</code> and doesn't fall back to catching regular files, like <code>file.zip</code>, and returns empty, in the second case.</p>\n\n<p>How do I do this in one regex, so it successfully works for <code>file.tar.gz</code> and <code>file.zip</code>. What do I miss?</p>\n"}, {"tags": ["linux", "perl", "command"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1555483471, "last_edit_date": 1555483471, "creation_date": 1555481116, "answer_id": 55720913, "question_id": 55720814, "link": "https://stackoverflow.com/questions/55720814/perl-command-not-executing-because-of-too-many-arguments-how-can-i-fix-it-to-al/55720913#55720913", "title": "Perl command not executing because of too many arguments, how can I fix it to allow more arguments?", "body": "<p>GNU:</p>\n\n<pre><code>find {folder_name} -maxdepth 1 -name '*.txt' -exec perl -i -pe's/\\r//' {} +\n</code></pre>\n\n<p>More portable:</p>\n\n<pre><code>find {folder_name} -maxdepth 1 -name '*.txt' -print | xargs perl -i -pe's/\\r//'\n\necho {folder_name}/*.txt | xargs perl -i -pe's/\\r//'\n\nfind {folder_name} -maxdepth 1 -name '*.txt' -exec perl -i -pe's/\\r//' {} \\;\n</code></pre>\n\n<p>Notes</p>\n\n<ul>\n<li><p>None of the solutions support a <code>{folder_name}</code> that start with <code>-</code>.</p></li>\n<li><p>The first two portable solutions don't support file names with some special characters in them. (But it's unlikely that you'll find those characters in file names in the first place.)</p></li>\n<li><p>The GNU solution and the first two portable solutions pass as many file names to <code>perl</code> as possible (minimizing the number of times <code>perl</code> is launched), while the third portable solution launches a <code>perl</code> process for every parameter.</p></li>\n<li><p><code>echo</code> is a shell builtin, so it's not subject to the system's limit on the number of parameters passed to utilities.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 114, "user_id": 11366465, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yr-LZOr4OU4/AAAAAAAAAAI/AAAAAAAAAcc/oMSKFb_T9io/photo.jpg?sz=128", "display_name": "gaurav wadhone", "link": "https://stackoverflow.com/users/11366465/gaurav-wadhone"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555482532, "post_id": 55720990, "comment_id": 98121928, "body": "echo is shell builtin command and don&#39;t pass the arguments  to other process so with echo it will work but not with ls,"}], "tags": [], "owner": {"reputation": 114, "user_id": 11366465, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yr-LZOr4OU4/AAAAAAAAAAI/AAAAAAAAAcc/oMSKFb_T9io/photo.jpg?sz=128", "display_name": "gaurav wadhone", "link": "https://stackoverflow.com/users/11366465/gaurav-wadhone"}, "is_accepted": false, "score": 4, "last_activity_date": 1555483803, "last_edit_date": 1555483803, "creation_date": 1555481490, "answer_id": 55720990, "question_id": 55720814, "link": "https://stackoverflow.com/questions/55720814/perl-command-not-executing-because-of-too-many-arguments-how-can-i-fix-it-to-al/55720990#55720990", "title": "Perl command not executing because of too many arguments, how can I fix it to allow more arguments?", "body": "<p>There is limit on input argument on shell.\nThis can be find by running below command.</p>\n\n<pre><code>getconf ARG_MAX\n</code></pre>\n\n<p>If argument number are more then you can use other methods like pipe or for loop.</p>\n\n<p>as example </p>\n\n<pre><code>for txt in ./{folderName}/*.txt ; do perl -i -p -e \"s/\\r//\" \"$txt\"; done\n</code></pre>\n\n<p>or using pipe</p>\n\n<pre><code>echo ./{folderName}/*.txt | xargs perl -i -p -e \"s/\\r//\" \n</code></pre>\n\n<p>explanation for echo as @ikegami raised why echo won't give \"too many argument\" </p>\n\n<p>reason is echo is builtin command and don't pass arguments to new process.</p>\n"}], "owner": {"reputation": 75, "user_id": 10543194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1c15fda2374ba182078c62aa8b49fd?s=128&d=identicon&r=PG&f=1", "display_name": "jake", "link": "https://stackoverflow.com/users/10543194/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 55720913, "answer_count": 2, "score": 2, "last_activity_date": 1555483803, "creation_date": 1555480660, "last_edit_date": 1555481111, "question_id": 55720814, "link": "https://stackoverflow.com/questions/55720814/perl-command-not-executing-because-of-too-many-arguments-how-can-i-fix-it-to-al", "title": "Perl command not executing because of too many arguments, how can I fix it to allow more arguments?", "body": "<p>I am trying to use this command:</p>\n\n<pre><code>perl -i -p -e \"s/\\r//\" ./{folderName}/*.txt\n</code></pre>\n\n<p>The problem is I have a lot of .txt files within this folder and I guess the command cannot handle it... Is there something else I can try or do to fix this?</p>\n\n<p>The error I get is: \"Argument list too long\"</p>\n\n<p>I've used this command successfully with smaller folder sizes (less .txt files) and it works fine.</p>\n"}, {"tags": ["file", "perl", "command-line"], "comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 2, "creation_date": 1555465902, "post_id": 55718525, "comment_id": 98117720, "body": "It&#39;s not clear what you are asking. <code>&lt;&gt;</code> can already read from stdin (btw, you should be using <code>&lt;&lt;&gt;&gt;</code>). What do you mean when you say &quot;I have a function&quot; ?"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 2, "creation_date": 1555474207, "post_id": 55718525, "comment_id": 98119346, "body": "If you provide a filename of &#39;-&#39; then perl will interpret that as &quot;read from STDIN&quot;, however that&#39;s also the default behaviour if you don&#39;t supply a filename at all. In the <code>bash</code> shell you can do something like this: <code>test.pl &lt;&lt;&lt;&quot;some content here which bash will supply on STDIN&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "edited": false, "score": 0, "creation_date": 1555526531, "post_id": 55721092, "comment_id": 98146641, "body": "Thank you that worked. However this solution does not work when there are multiple arguments to the script. Is it possible to pass the data to STDIN for only the last param?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "edited": false, "score": 1, "creation_date": 1555546091, "post_id": 55721092, "comment_id": 98152759, "body": "As the answer mentions, the last one does."}, {"owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "edited": false, "score": 0, "creation_date": 1555546404, "post_id": 55721092, "comment_id": 98152816, "body": "I apologize so for the final example if I want to use multiple args I would just do <code>test.pl ARG1 &lt;( printf &#39;foo\\nbar\\n&#39; )</code> where &lt;( printf &#39;foo\\nbar\\n&#39; ) is ARG2?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "edited": false, "score": 1, "creation_date": 1555550091, "post_id": 55721092, "comment_id": 98153444, "body": "Yes. For the others solutions, you can only do that if the other args are options (<code>test.pl --foo=bar &lt;&lt;&lt;&#39;foo bar&#39;</code> is ok, but <code>test.pl&#39; file.txt file2.txt &lt;&lt;&lt;&#39;foo bar&#39;</code> is not ok)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1555482904, "last_edit_date": 1555482904, "creation_date": 1555481976, "answer_id": 55721092, "question_id": 55718525, "link": "https://stackoverflow.com/questions/55718525/perl-how-to-read-command-line-argument-as-if-its-file-content/55721092#55721092", "title": "perl How to read command line argument as if it&#39;s file content", "body": "<p>This is a shell question, but you didn't specify which shell.</p>\n\n<p><strong>sh</strong></p>\n\n<p>It's simplest to simply pass the data to STDIN instead.</p>\n\n<pre><code>printf 'foo bar' | test.pl\n\nprintf 'foo\\nbar\\n' | test.pl\n\ntest.pl &lt;&lt;'.'\nfoo\nbar\n.\n</code></pre>\n\n<p><strong>bash</strong></p>\n\n<p>In addition to the solutions for <code>sh</code>, you can also use the following:</p>\n\n<pre><code>test.pl &lt;&lt;&lt;'foo bar'\n\ntest.pl &lt;&lt;&lt;$'foo\\nbar\\n'\n\ntest.pl &lt;( printf 'foo\\nbar\\n' )\n</code></pre>\n\n<p>The last one avoids using STDIN. This is (internally) more complicated than the other solutions, but it allows you to pass multiple \"virtual files\".</p>\n"}], "owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 55721092, "answer_count": 1, "score": 0, "last_activity_date": 1555482904, "creation_date": 1555463256, "question_id": 55718525, "link": "https://stackoverflow.com/questions/55718525/perl-how-to-read-command-line-argument-as-if-its-file-content", "title": "perl How to read command line argument as if it&#39;s file content", "body": "<p>I have a function that takes in filename and prints the content of the file</p>\n\n<pre><code>#test.pl\nwhile (&lt;&gt;) {\n    print $_;\n}\nexit(0);\n</code></pre>\n\n<p>I want to run this on the command line except instead of a filename I want to use the actual content as parameter without changing the script, similarly to an anonymous FIFO (e.g. \"&lt;(...)\" operator in shell) to substitute a filename string with it's content?</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1555441198, "post_id": 55714531, "comment_id": 98110462, "body": "is the missing space before https deliberate?"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 2, "creation_date": 1555451140, "post_id": 55714531, "comment_id": 98114550, "body": "The fact that your code uses both <code>system</code> and backticks is a little odd. The <code>system</code> function will run a command, the backtick quotes will also run a command, capture the output and return it. Usually you&#39;d use one or the other. Maybe you want <code>system &quot;xdg-open https:&#47;&#47;site &#47;Users&#47;...&#47;File2.html&quot;</code> for the browser one."}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "reply_to_user": {"reputation": 4969, "user_id": 10971581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPQr1.png?s=128&g=1", "display_name": "jhnc", "link": "https://stackoverflow.com/users/10971581/jhnc"}, "edited": false, "score": 0, "creation_date": 1555529286, "post_id": 55714531, "comment_id": 98147811, "body": "@jhnc No, I typed instead of copied and mis-typed it. I&#39;ve fixed the error now. Thanks."}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "edited": false, "score": 0, "creation_date": 1555529549, "post_id": 55714531, "comment_id": 98147926, "body": "@Abigail, thanks for responding. Those are the only lines of the Perl script that access the system."}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "edited": false, "score": 0, "creation_date": 1555533861, "post_id": 55714531, "comment_id": 98149608, "body": "Thank you, @Abigail. I&#39;ve edited to add code."}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1555533892, "post_id": 55714531, "comment_id": 98149624, "body": "Thank you, @GrantMcLean. I&#39;ve edited the OP to deal with your suggestion."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1555533927, "post_id": 55714531, "comment_id": 98149637, "body": "You&#39;re still using both backticks and <code>system</code>. Why?"}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1555597895, "post_id": 55714531, "comment_id": 98173364, "body": "@melpomene, my ignorance, I guess. The OSX version works as is, so I never questioned it. Once I can get a Linux shell script that opens the programs and doesn&#39;t hang the system, I&#39;ll put the relevant commands into a <code>system</code> command in the Perl script and use quote marks. Thanks for the reminder :-) ."}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "edited": false, "score": 0, "creation_date": 1555688204, "post_id": 55714531, "comment_id": 98203019, "body": "@Abigail, you&#39;re absolutely right. How can I repeatedly feed small bits of error data generated by my heuristic Perl script (which works in Linux) into a shell or Perl command to find the files that contain data needed to correct the errors, and display them in a text editor and browser? Opening each file or site individually is time consuming. The Perl script that finds the needed files works fine in Linux. But I can&#39;t find a way to open them using a shell (or a system call from Perl) that doesn&#39;t hang the system. What is the Linux equivalent (or workaround) of the OSX procedure? Thanks!"}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "edited": false, "score": 0, "creation_date": 1555955656, "post_id": 55714531, "comment_id": 98266546, "body": "@Abigail, thanks for sticking with this. Only changing backticks to quotes: <code>system &quot;firefox https:&#47;&#47;site1 &amp;&quot;; system &quot;firefox https:&#47;&#47;site2 https:&#47;&#47;site3 &amp;&quot;; system &quot;komodo file1 file2 &amp;&quot;; system &quot;komodo file3 &amp;&quot;;</code> The second instance of Firefox yields an error &quot;Firefox is already open&quot; and doesn&#39;t open the file. I&#39;m assuming running the script with different data that would lead me to file4, file5, site4, site5, etc., would hang the system. (Putting <code>disown</code> after <code>&amp;</code> hung so thoroughly I needed to turn the machine off.)"}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "edited": false, "score": 0, "creation_date": 1556040682, "post_id": 55714531, "comment_id": 98299752, "body": "@Abigail, thanks for all your help. I&#39;m not sure whether I don&#39;t have the Linux background needed to implement your solution or if I&#39;m trying to do the impossible. I&#39;ll try getting in line for the in-house guru, and if he gives me a solution I&#39;ll get back to you (probably after a few days) to let you know what he came up with. Again, I appreciate your efforts."}, {"owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "edited": false, "score": 0, "creation_date": 1556303333, "post_id": 55714531, "comment_id": 98406206, "body": "@Abigail thanks again for your help. I got some live help and I think I&#39;m set now."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "is_accepted": false, "score": 0, "last_activity_date": 1556303234, "creation_date": 1556303234, "answer_id": 55873152, "question_id": 55714531, "link": "https://stackoverflow.com/questions/55714531/how-can-i-call-programs-that-are-already-running-to-open-new-files-from-perl-or/55873152#55873152", "title": "How can I call programs that are already running to open new files from Perl or a bash script?", "body": "<p>The solution was a variation of what @grantmclean suggested. His solution didn't work when I tried it because I was trying to <code>xdg-open</code> more than one file or site at a time. Opening one at a time works:</p>\n\n<pre><code>if ($^O eq \"linux\") {\n    system \"xdg-open https://site1 &amp;\";\n    system \"xdg-open https://site2 &amp;\";\n    my @tWs = split / /,$tW_files;\n    foreach (@tWs) {\n        system \"xdg-open $_ &amp;\" # opens a series of local files\n    }\n    system \"xdg-open file_y &amp;\";\n    system \"xdg-open file_z &amp;\";\n}\n</code></pre>\n\n<p>My thanks to you all!</p>\n"}], "owner": {"reputation": 1, "user_id": 11369914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e70036757ffca675cd6d85c1e957d5?s=128&d=identicon&r=PG&f=1", "display_name": "hmw3", "link": "https://stackoverflow.com/users/11369914/hmw3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556303234, "creation_date": 1555439393, "last_edit_date": 1555533749, "question_id": 55714531, "link": "https://stackoverflow.com/questions/55714531/how-can-i-call-programs-that-are-already-running-to-open-new-files-from-perl-or", "title": "How can I call programs that are already running to open new files from Perl or a bash script?", "body": "<p>I am using a Perl script to find data needed to deal with errors from another process. In OSX, these lines in the Perl script open the needed sites and files in my browser and text editor. Here's the code that works in OSX:</p>\n\n<pre><code> if ($^O eq \"darwin\") {\n      system `open -a /Applications/Firefox.app https://site`;\n      system `open -a /Apopen -a /Applications/Komodo.appplications/Komodo.app file1.md file2.md`;\n      system `open -a /Applications/Komodo.app file3.md`;}\n</code></pre>\n\n<p>I can run this script repeatedly and the apps will add tabs with the new open files.</p>\n\n<p>However, I will need to run the same tool on Linux, and I haven't found any way to do it. Here's how I've tried to adapt it to Linux.</p>\n\n<pre><code> if ($^O eq \"linux\") {\n      system `firefox local_file.html &amp; disown`;\n      system `firefox https://site1 https://sitex &amp; disown`;\n      system `komodo  file1 file2 filex &amp; disown`;\n      }\n</code></pre>\n\n<p>I have since adjusted the Perl script so that it outputs a shell that I can run from the command line (latest version as per suggestion by @Grant McLean):</p>\n\n<pre><code>xdg-open https://www.site1 &amp; disown\nxdg-open https://www.site2 &amp; disown\nxdg-open /home/.../file1.html &amp; disown\nxdg-open /home/.../file2.md &amp; disown\nxdg-open /home/.../file3.md &amp; disown\n</code></pre>\n\n<p>I gather from @Grant McLean's suggestion that if I were to integrate it into the Perl script the lines would be, e.g.,</p>\n\n<pre><code>system \"xdg-open { file | site } &amp; disown\";\n</code></pre>\n\n<p>But since the shell hangs the system, I'm assuming that passing the commands to the system from the Perl script would also hang the system.</p>\n\n<p>I want to be able to have the browser and the text editor open files from a shell and not have to open files individually in each app. Any ideas?</p>\n"}, {"tags": ["perl", "md5"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555436610, "post_id": 55713627, "comment_id": 98108273, "body": "Maybe use <a href=\"https://perldoc.perl.org/IO/Uncompress/Gunzip.html\" rel=\"nofollow noreferrer\">IO::Uncompress::Gunzip</a> to read the file a block at a time and compute the length of the data and its digest as you go, instead of relying on an external program?"}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 2, "last_activity_date": 1555435913, "creation_date": 1555435913, "answer_id": 55713682, "question_id": 55713627, "link": "https://stackoverflow.com/questions/55713627/perl-how-do-i-get-bytes-read-from-md5digest-addfile/55713682#55713682", "title": "Perl: How do I get &quot;bytes read&quot; from md5::digest addfile()?", "body": "<p>You could read the contents yourself, and feed it in to <code>$ctx-&gt;add($data)</code>, and keep a running count of how much data you've passed through. Whether you add all the data in a single call, or across multiple calls, doesn't make any difference to the underlying algorithm. The docs include:</p>\n\n<blockquote>\n<pre><code>    All these lines will have the same effect on the state of the $md5 object:\n\n        $md5-&gt;add(\"a\"); $md5-&gt;add(\"b\"); $md5-&gt;add(\"c\");\n        $md5-&gt;add(\"a\")-&gt;add(\"b\")-&gt;add(\"c\");\n        $md5-&gt;add(\"a\", \"b\", \"c\");\n        $md5-&gt;add(\"abc\");\n</code></pre>\n</blockquote>\n\n<p>which indicates that you can just do this a piece at a time.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 9473773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603f708b9447e48f58ca937a89128158?s=128&d=identicon&r=PG&f=1", "display_name": "Harper - Reinstate Monica", "link": "https://stackoverflow.com/users/9473773/harper-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1555438786, "post_id": 55714273, "comment_id": 98109263, "body": "Interesting.  Part of my problem is I can&#39;t rely on the file being gzip&#39;d.  As it is now, the code is written to read plain files, and I have a simple shim:  `if /gz$/ { $filename = &quot;gunzip -c $filename |&quot; } stuck before the open."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 103, "user_id": 9473773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603f708b9447e48f58ca937a89128158?s=128&d=identicon&r=PG&f=1", "display_name": "Harper - Reinstate Monica", "link": "https://stackoverflow.com/users/9473773/harper-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1555439037, "post_id": 55714273, "comment_id": 98109402, "body": "@Harper The default behavior of the module is to, if the file isn&#39;t in gzip format, just pass it through unchanged (This can be explicitly set with the <code>Transparent</code> option to the constructor; let me update the code to show that.)"}, {"owner": {"reputation": 103, "user_id": 9473773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603f708b9447e48f58ca937a89128158?s=128&d=identicon&r=PG&f=1", "display_name": "Harper - Reinstate Monica", "link": "https://stackoverflow.com/users/9473773/harper-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1555439161, "post_id": 55714273, "comment_id": 98109455, "body": "@Shawn That&#39;s really slick. <i>Hmm, wait</i>.  What does the module do with a file that <i>was supposed</i> to be a gzip file, but has file damage? I have some of those."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 103, "user_id": 9473773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603f708b9447e48f58ca937a89128158?s=128&d=identicon&r=PG&f=1", "display_name": "Harper - Reinstate Monica", "link": "https://stackoverflow.com/users/9473773/harper-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1555439401, "post_id": 55714273, "comment_id": 98109596, "body": "@Harper Also added some error reporting for if it encounters a problem while decompressing the file."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1555440985, "last_edit_date": 1555440985, "creation_date": 1555438387, "answer_id": 55714273, "question_id": 55713627, "link": "https://stackoverflow.com/questions/55713627/perl-how-do-i-get-bytes-read-from-md5digest-addfile/55714273#55714273", "title": "Perl: How do I get &quot;bytes read&quot; from md5::digest addfile()?", "body": "<p>I'd do it all in perl, without relying on an external program for the decompression:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse IO::Uncompress::Gunzip qw/$GunzipError/;\nuse Digest::MD5;\n\nmy $filename = shift or die \"Missing gzip filename!\\n\";\n\nmy $md5 = Digest::MD5-&gt;new;\n# Allow for reading both gzip format files and uncompressed files.\n# This is the default behavior, but might as well be explicit about it.\nmy $z = IO::Uncompress::Gunzip-&gt;new($filename, Transparent =&gt; 1)\n  or die \"Unable to open $filename: $GunzipError\\n\";\nmy $len = 0;\n\nwhile ((my $blen = $z-&gt;read(my $block)) &gt; 0) {\n  $len += $blen;\n  $md5-&gt;add($block);\n}\ndie \"There was an error reading the file: $GunzipError\\n\" unless $z-&gt;eof;\n\nsay \"Total uncompressed length: $len\";\nsay \"MD5: \", $md5-&gt;hexdigest;\n</code></pre>\n\n<hr>\n\n<p>If you want to use <code>gunzip</code> instead of the core <code>IO::Uncompress::Gunzip</code> module, you can do something similar, though, using <code>read</code> to get a chunk of data at a time:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse autodie; # So we don't have to explicitly check for i/o related errors\nuse feature qw/say/;\nuse Digest::MD5;\n\nmy $filename = shift or die \"Missing gzip filename!\\n\";\n\nmy $md5 = Digest::MD5-&gt;new;\n# Note use of lexical file handle and safer version of opening a pipe\n# from a process that eliminates shell shenanigans. Also uses the :raw\n# perlio layer instead of calling binmode on the handle (which has the\n# same effect)\nopen my $z, \"-|:raw\", \"gunzip\", \"-c\", $filename;\n# Non-compressed version\n# open my $z, \"&lt;:raw\", $filename;\nmy $len = 0;\n\nwhile ((my $blen = read($z, my $block, 4096)) &gt; 0) {\n  $len += $blen;\n  $md5-&gt;add($block);\n}\n\nsay \"Total uncompressed length: $len\";\nsay \"MD5: \", $md5-&gt;hexdigest;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9473773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603f708b9447e48f58ca937a89128158?s=128&d=identicon&r=PG&f=1", "display_name": "Harper - Reinstate Monica", "link": "https://stackoverflow.com/users/9473773/harper-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1555440985, "creation_date": 1555435681, "last_edit_date": 1555439055, "question_id": 55713627, "link": "https://stackoverflow.com/questions/55713627/perl-how-do-i-get-bytes-read-from-md5digest-addfile", "title": "Perl: How do I get &quot;bytes read&quot; from md5::digest addfile()?", "body": "<p>I am using Digest::MD5 to compute MD5 of a data stream; namely a GZIPped file (or to be precise, 3000) that are much too large to fit in RAM. So I'm doing this: </p>\n\n<pre><code> use Digest::MD5 qw(md5_base64);\n\n my ($filename) = @_;                # this is in a sub\n my $ctx = Digest::MD5 -&gt; new;\n\n $openme = $filename;        # Usually, it's a plain file\n $openme = \"gunzip -c '$filename' |\" if ($filename =~ /\\.gz$/); # is gz\n\n open (FILE, $openme); # gunzip to STDOUT\n binmode(FILE);\n $ctx -&gt; addfile(*FILE);   # passing filehandle\n close(FILE);\n</code></pre>\n\n<p>This is a success.  <code>addfile</code> neatly slurps in the output of gunzip and gives a correct MD5. </p>\n\n<p><strong>However, I would really, really like to know the size of the slurped data</strong> (gunzipped \"file\" in this case).   </p>\n\n<p>I could add an additional </p>\n\n<pre><code>  $size = 0 + `gunzip -c very/big-file.gz | wc -c`;\n</code></pre>\n\n<p>but that would involve reading the file twice.  </p>\n\n<p>Is there any way to extract the number of bytes slurped from Digest::MD5? I tried capturing the result: <code>$result = $ctx -&gt; addfile(*FILE);</code> and doing Data::Dumper on both $result and $ctx, but nothing interesting emerged.</p>\n\n<p>Edit: The files are often not gzipped.  Added code to show what I really do.</p>\n"}, {"tags": ["regex", "string", "perl", "replace"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1555431694, "creation_date": 1555431694, "answer_id": 55712641, "question_id": 55712553, "link": "https://stackoverflow.com/questions/55712553/how-to-replace-consecutive-and-identical-characters-in-perl/55712641#55712641", "title": "How to replace consecutive and identical characters in Perl?", "body": "<p>Use a \"look-ahead\":</p>\n\n<pre><code>$s =~ s/Y(?=Y+)/A/g;\n</code></pre>\n\n<p><code>(?=Y+)</code> means \"followed by one or more <code>Y</code> characters\", so any <code>Y</code> character that is followed by another <code>Y</code> character will be replaced with an <code>A</code>.</p>\n\n<p><a href=\"https://metacpan.org/pod/distribution/perl/pod/perlretut.pod#Looking-ahead-and-looking-behind\" rel=\"noreferrer\">More info from <code>perlretut</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1555433178, "post_id": 55712712, "comment_id": 98106640, "body": "That&#39;s not really the same - you moved the + to outside the capture, so the length is always 1, and your replacement will omit the ending Y(s), and it means more text is being matched and thus replaced. Yes, it can be made to work without the look-ahead, but I&#39;d prefer it with."}, {"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1555433306, "post_id": 55712712, "comment_id": 98106709, "body": "my bad, yeah <code>(Y+)Y</code> than you can replace with length of captured group as <code>A</code> and one extra <code>Y</code>"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1555433592, "post_id": 55712712, "comment_id": 98106864, "body": "Regexes: usually don&#39;t work on the first attempt. :) This is why I had to try three times to get the answer above to work :)"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 4, "last_activity_date": 1555431955, "creation_date": 1555431955, "answer_id": 55712712, "question_id": 55712553, "link": "https://stackoverflow.com/questions/55712553/how-to-replace-consecutive-and-identical-characters-in-perl/55712712#55712712", "title": "How to replace consecutive and identical characters in Perl?", "body": "<p>There's always more than one way to do it. My suggestion is to grab all the Ys except the last one, and then use that to create a string of As of the same length. The <code>e</code> modifier tells perl to execute the code in the replacement side instead of using it directly, and the <code>r</code> modifier tells <code>=~</code> to return the result of the substitution instead of modifying the input text directly (useful for these one-liner tests, among other places).</p>\n\n<pre><code>$ perl -E 'say shift =~ s/(Y+)(?=Y)/\"A\"x length$1/gre' XXXXYYYYZZZYYZZZYYYY\nXXXXAAAYZZZAYZZZAAAY\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555467573, "creation_date": 1555467573, "answer_id": 55718993, "question_id": 55712553, "link": "https://stackoverflow.com/questions/55712553/how-to-replace-consecutive-and-identical-characters-in-perl/55718993#55718993", "title": "How to replace consecutive and identical characters in Perl?", "body": "<p><code>$s =~ s/Y{2}+/AY/g</code><br>\nRHS Pattern is ambiguously obscure pattern: <code>Y{2}+</code>, that's very rarely used regex pattern except if <code>{}+</code> very rarely is available in few advanced regex engine, including perl maybe, as a regex feature called 'atomic grouping'.<br>\nYou might have meant <code>(Y{2})+ which is (YY)+</code> or <code>Y{2,}</code> which is <code>YY+</code><br>\nin perl it's no brainer simple and easy as it supports <code>lookaround</code> feature</p>\n\n<pre><code>perl -e '$s=XXXXYYYYZZZYYZZZYYYY ;$s =~ s/Y(?=Y)/A/g;print $s'\n</code></pre>\n\n<p>actually lower regex engine such sed still can do it albeit in cumbersome, uneasy way</p>\n\n<pre><code>echo XXXXYYYYZZZYYZZZYYYY |sed -E 's/YY+/&amp;\\n/g;s/Y/A/g;s/A\\n/Y/g'\n</code></pre>\n"}], "owner": {"reputation": 2375, "user_id": 1586201, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/1d988ac481cd735f944f4670152e5c09?s=128&d=identicon&r=PG", "display_name": "Tony Xu", "link": "https://stackoverflow.com/users/1586201/tony-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 55712641, "answer_count": 3, "score": 3, "last_activity_date": 1555467573, "creation_date": 1555431389, "last_edit_date": 1555431570, "question_id": 55712553, "link": "https://stackoverflow.com/questions/55712553/how-to-replace-consecutive-and-identical-characters-in-perl", "title": "How to replace consecutive and identical characters in Perl?", "body": "<p>I have a string like\n<code>XXXXYYYYZZZYYZZZYYYY</code> which needs to be converted to\n<code>XXXXAAAYZZZAYZZZAAAY</code></p>\n\n<p><code>$s =~ s/Y{2}+/AY/g;</code></p>\n\n<p>this has 2 problems, <code>{2}+</code> will get YYYY to AYAY; and AY is not the same length as <code>YYYY</code> (expecting <code>AAAY</code>)</p>\n\n<p>How to get this done in perl?</p>\n"}, {"tags": ["javascript", "html", "perl", "web"], "comments": [{"owner": {"reputation": 3420, "user_id": 675723, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f525203adb5093c5954b43a5b6420c2?s=128&d=identicon&r=PG", "display_name": "BadZen", "link": "https://stackoverflow.com/users/675723/badzen"}, "edited": false, "score": 0, "creation_date": 1555415164, "post_id": 55707362, "comment_id": 98095598, "body": "You&#39;re going to need to add a link to the web page or the text of its source.   The error means that the script can&#39;t find a form element with the name &quot;userName&quot;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1555415296, "post_id": 55707362, "comment_id": 98095682, "body": "The jQuery you have shown uses tag names, not form <code>name</code> attributes or IDs. <code>$(&quot;userName&quot;)</code> is similar to <code>$(&quot;body&quot;)</code>, which will get all <code>&lt;body&gt;</code> tags. So yours will get <code>&lt;userName&gt;</code> tags, which makes sense for XML, but not really HTML. We&#39;ll need a lot more information."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1555415888, "post_id": 55707362, "comment_id": 98096034, "body": "<a href=\"https://www.perlmonks.org/?node_id=1232628\" rel=\"nofollow noreferrer\">Crossposted</a> to PerlMonks."}, {"owner": {"reputation": 3, "user_id": 9215414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9a27d38395c567be23cafb8f22802e?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/9215414/angel"}, "edited": false, "score": 0, "creation_date": 1555416252, "post_id": 55707362, "comment_id": 98096235, "body": "Added the part of the HTML that contains the form"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1555421752, "post_id": 55707362, "comment_id": 98099695, "body": "<code>$</code> not necessarily means jQuery. Considering where this application is running, it&#39;s much more likely that&#39;s just a shortcut for <code>document.getElementById</code>. \u2013 Edit: I&#39;m convinced it is so, the naked <code>value</code> property fits type <code>HTMLInputElement</code>, but not type <code>jQuery</code>."}], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1555423191, "post_id": 55709769, "comment_id": 98100668, "body": "This question is about WWW::Scripter."}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1555423526, "post_id": 55709769, "comment_id": 98100920, "body": "<code>WWW::Scripter</code> is a subclass of <code>WWW::Mechanize</code>. <code>field</code> method is inherited from Mechanize."}], "tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": false, "score": 0, "last_activity_date": 1555422476, "creation_date": 1555422476, "answer_id": 55709769, "question_id": 55707362, "link": "https://stackoverflow.com/questions/55707362/how-to-automate-login-and-backing-up-with-perl/55709769#55709769", "title": "How to automate login and backing up with Perl", "body": "<p>I'm pretty sure WWW::Mechanize wouldn't work for this:</p>\n\n<ol>\n<li>There's no form (no <code>&lt;form&gt;</code> tag in HTML);</li>\n<li>The input field doesn't have a name and <code>$agent-&gt;field</code> takes field name as a parameter, rather than ID.</li>\n</ol>\n\n<p>JavaScript probably issues an Ajax request. I suggest that you find the Ajax request in your browser development console and replay it (you don't need <code>WWW::Mechanize</code> for that, <code>LWP::UserAgent</code> should do). HTH.</p>\n"}, {"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": -1, "last_activity_date": 1555423161, "creation_date": 1555423161, "answer_id": 55710007, "question_id": 55707362, "link": "https://stackoverflow.com/questions/55707362/how-to-automate-login-and-backing-up-with-perl/55710007#55710007", "title": "How to automate login and backing up with Perl", "body": "<p>Try the DOM and submitting via callback:</p>\n\n<pre><code>$agent-&gt;document-&gt;getElementById('userName')-&gt;value($username);\n$agent-&gt;document-&gt;getElementById('pcPassword')-&gt;value($pass);\n$agent-&gt;eval('PCSubWin()');\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9215414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9a27d38395c567be23cafb8f22802e?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/9215414/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 55710007, "answer_count": 2, "score": 0, "last_activity_date": 1555423161, "creation_date": 1555414982, "last_edit_date": 1555416116, "question_id": 55707362, "link": "https://stackoverflow.com/questions/55707362/how-to-automate-login-and-backing-up-with-perl", "title": "How to automate login and backing up with Perl", "body": "<p>I'm trying to login into the web configuration panel of a device (for the test  I'm using my router) and create backup. The module is WWW::Scripter. The page is using JavaScript. I think that I'm not passing the parameters properly because it returns error : </p>\n\n<pre><code>No such field 'userName' at /home/angel/perl5/lib/perl5/WWW/Mechanize.pm line 750.\n</code></pre>\n\n<p>JS function on the web page:</p>\n\n<pre><code>function CheckUserPswInvalid()\n{\nvar userName = $(\"userName\");\nvar pcPassword = $(\"pcPassword\");   \nif(!CheckUserPswChars(userName.value))\n{\n    userName.select();\n    userName.focus();\n    return false;   \n}\n\nif(!CheckUserPswChars(pcPassword.value))\n{\n    pcPassword.select();\n    pcPassword.focus();\n    return false;   \n}\n\nreturn true;\n}\n</code></pre>\n\n<p>My code: </p>\n\n<pre><code>use WWW::Scripter;\nuse HTTP::Cookies;\nmy $url  = 'http://192.168.0.1/';\nmy $username = 'username';\nmy $pass = 'password';\nmy $agent = new WWW::Scripter;\n\n$agent-&gt;use_plugin('JavaScript');\n$agent-&gt;get('http://192.168.0.1/');\n$agent-&gt;cookie_jar(HTTP::Cookies-&gt;new);\n$agent-&gt;form_name(\"loginForm\");\n$agent-&gt;field('userName' =&gt; $username);\n$agent-&gt;field(\"pcPassword\" =&gt; $pass);\n$agent-&gt;submit();\n</code></pre>\n\n<p>EDIT: Adding part of the HTML:</p>\n\n<pre><code>` &lt;div class=\"loginBox\"&gt;    \n    &lt;div class=\"noteDiv\"&gt;\n        &lt;span id=\"note\"&gt;&lt;/span&gt;\n        &lt;span id=\"tip\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    &lt;div class=\"panelThre\" align=\"center\"&gt;\n        &lt;div align=\"center\" class=\"picDiv\" align=\"center\"&gt;\n            &lt;ul&gt;\n                &lt;li id=\"unLi\" class=\"unLi\"&gt;&lt;input class=\"text\" id=\"userName\" type=\"text\" maxlength=\"15\" /&gt;&lt;/li&gt;\n                &lt;li class=\"blank\"&gt;&lt;/li&gt;\n                &lt;li id=\"pwLi\" class=\"pwLi\"&gt;&lt;input class=\"text\" id=\"pcPassword\" type=\"password\" maxlength=\"15\"/&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n            &lt;label id=\"loginBtn\" class=\"loginBtn\" onclick=\"PCSubWin()\"/&gt;&lt;/label&gt;\n            &lt;div&gt;\n            &lt;label id=\"copyright\"&gt;Copyright &amp;copy; 2016 TP-LINK Technologies Co., Ltd. All rights reserved. &lt;/label&gt;            \n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;form action=\"/userRpm/LoginRpm.htm\" method=\"get\" id=\"loginForm\" enctype=\"multipart/form-data\"&gt;\n    &lt;input type=\"hidden\" value=\"Save\" name=\"Save\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>\n`</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1555388393, "post_id": 55699730, "comment_id": 98082513, "body": "Job security for writing a new script in CGI? I kid! I kid!"}, {"owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "edited": false, "score": 0, "creation_date": 1555393470, "post_id": 55699730, "comment_id": 98083886, "body": "Strip/Escape HTML from input param <i>name</i>"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 6, "creation_date": 1555405795, "post_id": 55699730, "comment_id": 98089962, "body": "I&#39;m voting to close this question as off-topic because it is asking for a code review (and this thus too broad / opinion based). It could probably be adjusted to be on topic for <a href=\"http://codereview.stackexchange.com/help/on-topic\">the code review stackexchange</a>."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1555424870, "last_edit_date": 1555424870, "creation_date": 1555405657, "answer_id": 55704488, "question_id": 55699730, "link": "https://stackoverflow.com/questions/55699730/will-there-be-any-string-injections-with-the-following-code/55704488#55704488", "title": "Will there be any string injections with the following code", "body": "<p>You are <a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"nofollow noreferrer\">injecting</a> arbitrary text (<code>$name</code>) into HTML without first converting it to HTML.</p>\n\n<p>Replace</p>\n\n<pre><code>print \"Hello ${name}!\";\n</code></pre>\n\n<p>with </p>\n\n<pre><code>print escapeHTML(\"Hello ${name}!\");\n</code></pre>\n\n<hr>\n\n<p>Whenever you concatenate strings (which you are implicitly doing through multiple uses of <code>print</code>), consider what you are concatenation together.</p>\n\n<p>If you inject text into HTML, convert it to HTML text first.<br>\nIf you inject text into SQL, convert it to a SQL literal first.<br>\nIf you inject text into a shell command, convert it to a shell literal first.<br>\n...</p>\n"}], "owner": {"reputation": 121, "user_id": 8258261, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/751d8569e653565c90f47b579806b2b1?s=128&d=identicon&r=PG&f=1", "display_name": "SBN AB", "link": "https://stackoverflow.com/users/8258261/sbn-ab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1555426688, "accepted_answer_id": 55704488, "answer_count": 1, "score": 0, "last_activity_date": 1555428722, "creation_date": 1555381862, "last_edit_date": 1555428722, "question_id": 55699730, "link": "https://stackoverflow.com/questions/55699730/will-there-be-any-string-injections-with-the-following-code", "closed_reason": "Not suitable for this site", "title": "Will there be any string injections with the following code", "body": "<p>I have a page which displays name if present in the params, else displays the form to input a name. </p>\n\n<pre><code>\nmy $name = $q-&gt;param('name');\n\nprint $q-&gt;header('text/html');\nprint '&lt;!DOCTYPE html&gt;';\nprint '&lt;html lang=\"en\"&gt;';\nprint '&lt;head&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;/head&gt;';\nprint '&lt;body&gt;';\n\nif (defined $name) {\n    print \"Hello ${name}!\";\n} else {\n    print '&lt;form method=\"post\"&gt;';\n    print 'Please enter your name:&lt;br&gt;';\n    print '&lt;input type=\"text\" name=\"name\"&gt;&lt;br&gt;';\n    print '&lt;input type=\"submit\" value=\"Submit\"&gt;';\n    print '&lt;/form&gt;';\n}\n</code></pre>\n"}, {"tags": ["c#", "php", "regex", "perl", "pcre"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10051234"}, "edited": false, "score": 0, "creation_date": 1555379012, "post_id": 55699393, "comment_id": 98080627, "body": "want to know the performance difference between 2 pieces of code, benchmark them"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10051234"}, "edited": false, "score": 1, "creation_date": 1555379184, "post_id": 55699393, "comment_id": 98080654, "body": "start timer, loops 10k times, stop timer, compare for each, run each test X number of cycles. <a href=\"https://www.php.net/manual/en/function.microtime.php\" rel=\"nofollow noreferrer\">php.net/manual/en/function.microtime.php</a> examples show how to set up the timming"}, {"owner": {"reputation": 22598, "user_id": 2910943, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/YaPew.jpg?s=128&g=1", "display_name": "Backs", "link": "https://stackoverflow.com/users/2910943/backs"}, "edited": false, "score": 2, "creation_date": 1555379553, "post_id": 55699393, "comment_id": 98080728, "body": "Take BenchmarkDotNet library <a href=\"https://github.com/dotnet/BenchmarkDotNet\" rel=\"nofollow noreferrer\">github.com/dotnet/BenchmarkDotNet</a>, write tests and compare <a href=\"https://aakinshin.net/posts/stephen-toub-benchmarks-part1/\" rel=\"nofollow noreferrer\">aakinshin.net/posts/stephen-toub-benchmarks-part1</a>"}, {"owner": {"reputation": 22598, "user_id": 2910943, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/YaPew.jpg?s=128&g=1", "display_name": "Backs", "link": "https://stackoverflow.com/users/2910943/backs"}, "edited": false, "score": 2, "creation_date": 1555379651, "post_id": 55699393, "comment_id": 98080752, "body": "@tim do not use timer (stopwatch) for perfomance tests"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10051234"}, "reply_to_user": {"reputation": 22598, "user_id": 2910943, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/YaPew.jpg?s=128&g=1", "display_name": "Backs", "link": "https://stackoverflow.com/users/2910943/backs"}, "edited": false, "score": 0, "creation_date": 1555379921, "post_id": 55699393, "comment_id": 98080794, "body": "@Backs what do you suggest in php?"}, {"owner": {"reputation": 22598, "user_id": 2910943, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/YaPew.jpg?s=128&g=1", "display_name": "Backs", "link": "https://stackoverflow.com/users/2910943/backs"}, "edited": false, "score": 1, "creation_date": 1555380082, "post_id": 55699393, "comment_id": 98080826, "body": "@tim <a href=\"https://github.com/phpbench/phpbench\" rel=\"nofollow noreferrer\">github.com/phpbench/phpbench</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10051234"}, "edited": false, "score": 0, "creation_date": 1555380615, "post_id": 55699393, "comment_id": 98080946, "body": "it uses microtime, as i suggested above, so dont see your objection to it"}, {"owner": {"reputation": 1974, "user_id": 1155329, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/104256712e7a6d2f76fab1712157c98c?s=128&d=identicon&r=PG", "display_name": "MineR", "link": "https://stackoverflow.com/users/1155329/miner"}, "edited": false, "score": 0, "creation_date": 1555393759, "post_id": 55699393, "comment_id": 98083997, "body": "If your question is about how to test the performance of X, then ask that."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555398986, "post_id": 55701002, "comment_id": 98086201, "body": "Re &quot;<i><code>\\w</code> as far as I assume, should be depended on locale environment setup</i>&quot;, It is not (unless <code>&#47;l</code> is used) in Perl"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 1, "last_activity_date": 1555392757, "last_edit_date": 1555392757, "creation_date": 1555391775, "answer_id": 55701002, "question_id": 55699393, "link": "https://stackoverflow.com/questions/55699393/regex-word-performance-w-vs-a-za-z0-9/55701002#55701002", "title": "RegEx word performance: \\w vs [a-zA-Z0-9_]", "body": "<p><code>\\w</code> as far as I assume, should be depended on locale environment setup such;<br>\n<code>LANG=</code><br>\n<code>LC_CTYPE=</code><br>\n<code>LC_ALL=</code><br>\nif mine so true then <code>\\w</code> should be not just [A-Za-z_] as so many other UCS characters out there,<br>\nif it's set to <code>LANG=en_US</code> Imho is  just [A-Za-z_],\nsee  <a href=\"https://stackoverflow.com/questions/30479607/explain-the-effects-of-export-lang-lc-ctype-lc-all\">Explain the effects of export LANG, LC_CTYPE, LC_ALL</a></p>\n\n<p><code>\\d</code> could be as it is or it's <code>[0-9]</code> depends on regex engine, of course,<br>\n<code>sed's \\d</code> can't be <code>[0-9]</code> even by its <code>-E</code> option, only better regex engine will be so, instead <code>[0-9]</code> represented by <code>gnu</code> sed with <code>[[:digit:]]</code><br>\nImho all regex shorthands preset for class set is faster then it's normal <code>[]</code> class set<br>\n<code>\\w, \\d</code> is faster then <code>[A-Za-z_], [0-9]</code> respectively<br>\n<code>\\W</code> faster than [^A-Za-z_] and so on.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555404303, "post_id": 55701933, "comment_id": 98089031, "body": "This is a rather poor benchmark. It only tests one kind of data, it only checks positive matches, and it doesn&#39;t really check the differences between the two things being benchmarked because they&#39;re lost in the noise of the time needed to call a sub and start the regex engine ."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555411747, "post_id": 55701933, "comment_id": 98093597, "body": "Re &quot;<i>[The difference is] lost in the noise of the time needed to call a sub and start the regex engine</i>&quot;, I suppose this is meaningful. It speaks to how little does optimizing this matter."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555435238, "post_id": 55701933, "comment_id": 98107673, "body": "@ikegami Re &quot;<i>rather poor</i>&quot; -- I absolutely disagree.  It wasn&#39;t meant to be exhaustive but rather a reasonable rough take; it&#39;s fully documented -- I state <i>exactly</i> what/how is tested. The finding (&quot;it doesn&#39;t matter&quot;) <i>is</i> reasonable.  (2) &quot;<i>only tests one kind of data</i>&quot; -- I tried w/ non-ascii data and it made no difference; elaborating on that would&#39;ve been against its &quot;<i>rought take</i>&quot; nature (3) &quot;<i>only checks positive matches</i>&quot; -- it checks through a string of nearly 10K mixed up ascii; there&#39;s plenty of misses. Again, it&#39;s a rough take.  (4) &quot;<i>lost in the noise</i>&quot; -- so it doesn&#39;t matter"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555436483, "post_id": 55701933, "comment_id": 98108224, "body": "@ikegami For the record: I appreciate your detailed answer (great as always), and <i>absolutely appreciate</i> your feedback/criticism on this one.  I just disagree with the &quot;poor&quot; qualification; I think it&#39;s useful as it stands."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555436710, "post_id": 55701933, "comment_id": 98108317, "body": "@ikegami One thing I don&#39;t understand though, with &quot;<i>lost in the noise of the time needed to call a sub and start the regex engine</i>&quot;  (1) it&#39;s got to run them to benchmark (?) ... do you mean that benchmark with expression (rather than sub) is that much quicker?  (2) It runs through all chars in the string with <code>&#47;g</code> -- that doesn&#39;t restart the engine?  And isn&#39;t that a reasonable way to test more than one match?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555438472, "post_id": 55701933, "comment_id": 98109115, "body": "Re &quot;<i>It wasn&#39;t meant to be exhaustive</i>&quot;, For all you know, it&#39;s a million times slower at failing to matching. You gotta test both. This isn&#39;t about being exhaustive; it&#39;s about you having no idea what kind of data the OP has, and not documenting your massive assumptions. By your logic (only testing matches), Perl is an extremely slow regex engine. While in fact, it performs quite well because many of the optimization speed up <i>failed</i> matches. That&#39;s why it&#39;s important to test."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555438559, "post_id": 55701933, "comment_id": 98109156, "body": "Re &quot;<i>- it checks through a string of nearly 10K mixed up ascii;</i>&quot;, uh, not it doesn&#39;t. Every single character in the string matches."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555438642, "post_id": 55701933, "comment_id": 98109188, "body": "By your logic (only testing matches), Perl is an extremely slow regex engine. While in fact, it performs quite well because many of the optimization speed up <i>failed</i> matches"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555438797, "post_id": 55701933, "comment_id": 98109271, "body": "Re &quot;<i>I just disagree with the &quot;poor&quot; qualification</i>&quot;, Well, your code doesn&#39;t even show that one is actually 10% faster than the other... Benchmarks are trivially easy to do wrong."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555439337, "post_id": 55701933, "comment_id": 98109546, "body": "@ikegami  &quot;<i>code doesn&#39;t even show that one is actually 10% faster than the other</i>&quot;  --- um, well ... it isn&#39;t ?  Both <code>\\w</code> and <code>[...]</code> match through a long string with same rates; why do you say that one is &quot;actually 10% faster&quot;?  [ I did complete the negative test, and they aren&#39;t the same ... the <code>\\w</code> is 23% faster ?? Checking...]"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555439475, "post_id": 55701933, "comment_id": 98109631, "body": "Like I said,  your code compares calling a sub + starting the regex engine + matching one char using one method vs sub + calling a starting the regex engine + matching one char using the other method. There&#39;s so much overhead that you bury the difference in noise."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555439491, "post_id": 55701933, "comment_id": 98109638, "body": "@ikegami &quot;<i>uh, not it doesn&#39;t. Every single character in the string matches.</i> (a few comments above)  --- well, it matches but it has to <i>find</i> the match for a character in hand, in whatever it considers for that pattern (so it&#39;d be many more possibilities for <code>\\w</code> etc).  It&#39;s a way to check. (Sure, a failing mathc is much surer way.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555439682, "post_id": 55701933, "comment_id": 98109724, "body": "@ikegami &quot;<i>Like I said,...</i>&quot; -- OK, but why do you say &quot;<i>matching one char</i>&quot; --- it goes through the whole string with <code>&#47;g</code>, in that one sub call, and if I&#39;m not mistaken it doesn&#39;t restart the engine for each match either."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555439886, "post_id": 55701933, "comment_id": 98109824, "body": "@ikegami &quot;<i>Benchmarks are trivially easy to do wrong</i>&quot; -- yeah, been dealing with them for decades now ... that&#39;s why I keep discussing this, since I think that this one is reasonable (as in not flawed/wrong/...) and if not I&#39;d like to know why.   Speaking of which -- a negative (failing) test being faster for <code>\\w</code> just tells me that there&#39;s too much &quot;magic&quot; (optimizations) going on behind the scenes."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1556428552, "last_edit_date": 1556428552, "creation_date": 1555396453, "answer_id": 55701933, "question_id": 55699393, "link": "https://stackoverflow.com/questions/55699393/regex-word-performance-w-vs-a-za-z0-9/55701933#55701933", "title": "RegEx word performance: \\w vs [a-zA-Z0-9_]", "body": "<p>This answer is based on Perl but all tagged tools should be very similar in the following.</p>\n\n<p>The <code>\\w</code> character class (for a \"word\" character) follows Unicode specs for <em>character properties</em> of a \"word.\" This includes so much stuff and complexity that it is a challenge to specify the categories of included properties.  See \"<em>Word characters</em>\" in <a href=\"https://perldoc.perl.org/perlrecharclass.html\" rel=\"nofollow noreferrer\">perlrecharclass</a>, and <a href=\"https://stackoverflow.com/a/5557632/4653379\">this post</a> for instance.  See <a href=\"https://perldoc.perl.org/perlunicode.html\" rel=\"nofollow noreferrer\">perlunicode</a> and <a href=\"https://perldoc.perl.org/perluniprops.html\" rel=\"nofollow noreferrer\">perluniprops</a> for background.</p>\n\n<p>In short, it's way beyond the 63 ascii chars, unless <code>/a</code> (or <code>/aa</code>) <a href=\"https://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">modifier</a> or locales are used.</p>\n\n<p>However, the question is specifically about performance.  At this point different tools should be expected to diverge in behavior, and possibly a lot, since this depends on regex implementation.  The rest of this post is specific for Perl.</p>\n\n<p>One may expect that a smaller set may be faster to check for, or one may expect that constructs like <code>\\w</code> come with optimizations. Instead of guessing let us measure.  The following is a crude benchmark aiming for reasonable findings, leaving out a few nuances.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse List::Util qw(shuffle);\nuse Benchmark qw(cmpthese);\n\nmy $run_for = shift // 3;  # seconds to run benchmark for\n\nmy $str = join '', (shuffle 'a'..'z', 'A'..'Z', 0..9, '_') x 100;\n\nsub word_class {\n    my $str = shift;\n    my @m_1 = $str =~ /\\w/g;\n    return \\@m_1;\n}\n\nsub char_class {\n    my $str = shift;\n    my @m_2 = $str =~ /[a-zA-Z0-9_]/g;\n    return \\@m_2;\n}\n\n\ncmpthese(-$run_for, {\n    word =&gt; sub { my $res = word_class ($str) },\n    char =&gt; sub { my $res = char_class ($str) },\n});\n</code></pre>\n\n<p>A string is assembled using <code>[a-zA-Z0-9_]</code> which are shuffled and then repeated 100 times. That whole string is matched, character by character under <code>/g</code>, by <code>\\w</code> and by <code>[a-zA-Z0-9_]</code>. So it's a single regex in each case and these are benchmarked.</p>\n\n<p>The result</p>\n\n<pre>\n      Rate char word\nchar 583/s   --  -1%\nword 587/s   1%   --\n</pre>\n\n<p>The numbers above go up to 2% either way in various runs in my tests.  So no difference.</p>\n\n<p>Note: I have tried with non-ascii characters added to the test string, with no discernable difference. </p>\n\n<p>Note: The regex with <code>/g</code> accumulates matches (6300) char after char, but in a single engine run. The other option is to check for a single match repeatedly. These are not the same but regardless both will expose a difference in performance between <code>\\w</code> and <code>[a-zA-Z0-9_]</code> if it is considerable.</p>\n\n<p>Please time it for yourself, with string and patterns better suited for your circumstances.</p>\n\n<hr>\n\n<p>The above benchmark was meant to be a basic, rough measure. However, notably missing are negative (failing) matches, whereby the engine is expected to go through <em>all</em> possibilities for tested patterns.</p>\n\n<p>I test for that by invoking the benchmarked routines above on the target string changed to</p>\n\n<pre><code>$str = join '', qw(! / \\ { } ^ % @) x 1_000;\n</code></pre>\n\n<p>which will fail to match under both <code>\\w</code> and <code>[a-zA-Z0-9_]</code>.  The result</p>\n\n<pre>\n        Rate char word\nchar 72820/s   -- -19%\nword 89863/s  23%   --\n</pre>\n\n<p>This is a surprise to me, to say the least.  The <code>\\w</code> set is so much greater (see ikegami answer) that this must imply the there are heavy (or \"magical\") optimizations going on. </p>\n\n<p>This enforces my overall conclusion: Performance of these is close enough in general, so simply use what is more suitable coding wise; Or, time it in your <em>specific</em> use case.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1555430301, "post_id": 55703974, "comment_id": 98105133, "body": "I don&#39;t think it will make a difference, but <code>&#47;a</code> is sufficient to make <code>\\w</code> exactly equivalent to <code>[a-zA-Z0-9_]</code> as long as you&#39;re not using <code>&#47;i</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1555431291, "post_id": 55703974, "comment_id": 98105689, "body": "@Grinnz, I kept it simple. I said that &quot;using <code>\\w</code> with <code>&#47;aa</code> ensures that <code>\\w</code> only matches <code>[a-zA-Z0-9_]</code>&quot;, a claim that can&#39;t be made for <code>&#47;a</code> without going off-topic."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1555405265, "last_edit_date": 1555405265, "creation_date": 1555404133, "answer_id": 55703974, "question_id": 55699393, "link": "https://stackoverflow.com/questions/55699393/regex-word-performance-w-vs-a-za-z0-9/55703974#55703974", "title": "RegEx word performance: \\w vs [a-zA-Z0-9_]", "body": "<p>[ <em>This answer is Perl-specific. The information within may not apply to PCRE or the engine used by the other languages tagged.</em> ] </p>\n\n<p><code>/\\w/aa</code> (the actual equivalent of <code>/[a-zA-Z0-9_]/</code>) is usually faster, but not always. That said, the difference is so minimal (less than 1 nanosecond per check) that it shouldn't be a concern. To put it in to context, it takes far, far longer to call a sub or start the regex engine.</p>\n\n<p>What follows covers this in detail.</p>\n\n<hr>\n\n<p>First of all, <code>\\w</code> isn't the same as <code>[a-zA-Z0-9_]</code> by default. <code>\\w</code> matches every \nalphabetic, numeric, mark and connector punctuation Unicode Code Point. There are 119,821 of these!<sup>[1]</sup> Determining which is the fastest of non-equivalent code makes no sense.</p>\n\n<p>However, using <code>\\w</code> with <code>/aa</code> ensures that <code>\\w</code> only matches <code>[a-zA-Z0-9_]</code>. So that's what we're going to be using for our benchmarks. (Actually, we'll use both.)</p>\n\n<p>(Note that each test performs 10 million checks, so a rate of 10.0/s actually means 10.0 million checks per second.)</p>\n\n<hr>\n\n<pre class=\"lang-none prettyprint-override\"><code>ASCII-only positive match\n               Rate [a-zA-Z0-9_]      (?u:\\w)     (?aa:\\w)\n[a-zA-Z0-9_] 39.1/s           --         -26%         -36%\n(?u:\\w)      52.9/s          35%           --         -13%\n(?aa:\\w)     60.9/s          56%          15%           --\n</code></pre>\n\n<p>When finding a match in ASCII characters, ASCII-only <code>\\w</code> and Unicode <code>\\w</code> both beat the explicit class.</p>\n\n<p><code>/\\w/aa</code> is ( 1/39.1 - 1/60.9 ) / 10,000,000 = 0.000,000,000,916 s faster on my machine </p>\n\n<hr>\n\n<pre class=\"lang-none prettyprint-override\"><code>ASCII-only negative match\n               Rate      (?u:\\w)     (?aa:\\w) [a-zA-Z0-9_]\n(?u:\\w)      27.2/s           --          -0%         -12%\n(?aa:\\w)     27.2/s           0%           --         -12%\n[a-zA-Z0-9_] 31.1/s          14%          14%           --\n</code></pre>\n\n<p>When failing to find a match in ASCII characters, the explicit class beats ASCII-only <code>\\w</code>.</p>\n\n<p><code>/[a-zA-Z0-9_]/</code> is ( 1/27.2 - 1/31.1 ) / 10,000,000 = 0.000,000,000,461 s faster on my machine </p>\n\n<hr>\n\n<pre class=\"lang-none prettyprint-override\"><code>Non-ASCII positive match\n               Rate      (?u:\\w) [a-zA-Z0-9_]     (?aa:\\w)\n(?u:\\w)      2.97/s           --        -100%        -100%\n[a-zA-Z0-9_] 3349/s      112641%           --          -9%\n(?aa:\\w)     3664/s      123268%           9%           --\n</code></pre>\n\n<p>Whoa. This tests appears to be running into some optimization. That said, running the test multiple times yields extremely consistent results. (Same goes for the other tests.)</p>\n\n<p>When finding a match in non-ASCII characters, ASCII-only <code>\\w</code> beats the explicit class.</p>\n\n<p><code>/\\w/aa</code> is ( 1/3349 - 1/3664 ) / 10,000,000 = 0.000,000,000,002,57 s faster on my machine </p>\n\n<hr>\n\n<pre class=\"lang-none prettyprint-override\"><code>Non-ASCII negative match\n               Rate      (?u:\\w) [a-zA-Z0-9_]     (?aa:\\w)\n(?u:\\w)      2.66/s           --          -9%         -71%\n[a-zA-Z0-9_] 2.91/s          10%           --         -68%\n(?aa:\\w)     9.09/s         242%         212%           --\n</code></pre>\n\n<p>When failing to find a match in non-ASCII characters, ASCII-only <code>\\w</code> beats the explicit class.</p>\n\n<p><code>/[a-zA-Z0-9_]/</code> is ( 1/2.91 - 1/9.09 ) / 10,000,000 = 0.000,000,002,34 s faster on my machine </p>\n\n<hr>\n\n<p><strong>Conclusions</strong></p>\n\n<ul>\n<li>I'm surprised there's any difference between <code>/\\w/aa</code> and <code>/[a-zA-Z0-9_]/</code>.</li>\n<li>In some situation, <code>/\\w/aa</code> is faster; in others, <code>/[a-zA-Z0-9_]/</code>.</li>\n<li>The difference between <code>/\\w/aa</code> and <code>/[a-zA-Z0-9_]/</code> is very minimal (less than 1 nanosecond).</li>\n<li>The difference is so minimal that you shouldn't be concerned about it.</li>\n<li>Even the difference between <code>/\\w/aa</code> and <code>/\\w/u</code> is quite small despite the latter matching 4 orders of magnitude more characters than the former.</li>\n</ul>\n\n<hr>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse Benchmarks qw( cmpthese );\n\nmy %pos_tests = (\n   '(?u:\\\\w)'     =&gt; '/^\\\\w*\\\\z/u',\n   '(?aa:\\\\w)'    =&gt; '/^\\\\w*\\\\z/aa',\n   '[a-zA-Z0-9_]' =&gt; '/^[a-zA-Z0-9_]*\\\\z/',\n);\n\nmy %neg_tests = (\n   '(?u:\\\\w)'     =&gt; '/\\\\w/u',\n   '(?aa:\\\\w)'    =&gt; '/\\\\w/aa',\n   '[a-zA-Z0-9_]' =&gt; '/[a-zA-Z0-9_]/',\n);\n\n$_ = sprintf( 'use strict; use warnings; our $s; for (1..1000) { $s =~ %s }', $_)\n   for\n      values(%pos_tests),\n      values(%neg_tests);\n\nlocal our $s;\n\nsay \"ASCII-only positive match\";\n$s = \"J\" x 10_000;\ncmpthese(-3, \\%pos_tests);\n\nsay \"\";\n\nsay \"ASCII-only negative match\";\n$s = \"!\" x 10_000;\ncmpthese(-3, \\%neg_tests);\n\nsay \"\";\n\nsay \"Non-ASCII positive match\";\n$s = \"\\N{U+0100}\" x 10_000;\ncmpthese(-3, \\%pos_tests);\n\nsay \"\";\n\nsay \"Non-ASCII negative match\";\n$s = \"\\N{U+2660}\" x 10_000;\ncmpthese(-3, \\%neg_tests);\n</code></pre>\n\n<hr>\n\n<ol>\n<li>Unicode version 11.</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "accepted_answer_id": 55703974, "answer_count": 3, "score": 3, "last_activity_date": 1556428552, "creation_date": 1555378800, "question_id": 55699393, "link": "https://stackoverflow.com/questions/55699393/regex-word-performance-w-vs-a-za-z0-9", "title": "RegEx word performance: \\w vs [a-zA-Z0-9_]", "body": "<p>I'd like to know the list of chars that <code>\\w</code> passes, is it just <a href=\"https://stackoverflow.com/a/11874899/6553328\"><code>[a-zA-Z0-9_]</code></a> or are there more chars that it might cover? </p>\n\n<p>I'm asking this question, because based on <a href=\"https://stackoverflow.com/a/891741/6553328\">this</a>, <code>\\d</code> is different with <code>[0-9]</code> and is <a href=\"https://stackoverflow.com/questions/16621738/d-is-less-efficient-than-0-9\">less efficient</a>. </p>\n\n<blockquote>\n  <p><code>\\w</code> vs <code>[a-zA-Z0-9_]</code>: which one might be faster in large scale? </p>\n</blockquote>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1555370509, "post_id": 55698029, "comment_id": 98079017, "body": "Side note: <a href=\"https://perldoc.pl/variables/%24a\" rel=\"nofollow noreferrer\">avoid using $a and $b specifically</a> even as examples, as they are special globals for the sort function - it either bypasses the typo-checking benefits of strict &#39;vars&#39;, or if you declare them lexically, breaks sort calls in that scope. I suggest <code>$x</code>/<code>$y</code>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1555370694, "post_id": 55698029, "comment_id": 98079057, "body": "The reason why your attempts are not valid ways to create a reference are because you cannot reference a slice of an array, you must reference a full array. Thus you must create a new array reference, with copies of the sliced elements, as shown in the answers."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1555371805, "post_id": 55698029, "comment_id": 98079252, "body": "Also, if you want to modify the array in place rather than create a new one, the <a href=\"https://perldoc.pl/functions/splice\" rel=\"nofollow noreferrer\">splice</a> function may be useful (it also works on dereferenced arrayrefs). Just take care that this is really what you want."}], "answers": [{"tags": [], "owner": {"reputation": 108, "user_id": 4378185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZW0ogzp9T8A/AAAAAAAAAAI/AAAAAAAAQR0/YyddjS4U9iY/photo.jpg?sz=128", "display_name": "Michael Quaranta", "link": "https://stackoverflow.com/users/4378185/michael-quaranta"}, "is_accepted": true, "score": 4, "last_activity_date": 1555405997, "last_edit_date": 1555405997, "creation_date": 1555369243, "answer_id": 55698325, "question_id": 55698029, "link": "https://stackoverflow.com/questions/55698029/how-to-slice-am-array-ref-and-return-an-array-ref-in-one-line/55698325#55698325", "title": "how to slice am array ref and return an array ref in one line?", "body": "<p>you can say</p>\n\n<pre><code>$b = [ @{$a}[1 .. @{$a} - 1] ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1555430024, "post_id": 55698685, "comment_id": 98104958, "body": "<code>splice @{$b = [@$a]}, 0, 1</code> would create only one copy, as the other solutions do."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1555372205, "creation_date": 1555372205, "answer_id": 55698685, "question_id": 55698029, "link": "https://stackoverflow.com/questions/55698029/how-to-slice-am-array-ref-and-return-an-array-ref-in-one-line/55698685#55698685", "title": "how to slice am array ref and return an array ref in one line?", "body": "<p>Inspired by <a href=\"https://stackoverflow.com/questions/39022108/is-there-a-less-clumsy-alternative-for-copying-up-to-n-array-elements/39022313#39022313\">this question</a>, there is also</p>\n\n<pre><code>$b = [ splice @{[@$a]},1 ]\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 4705722, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b0292cef8a0a90ed57d525ed015438eb?s=128&d=identicon&r=PG&f=1", "display_name": "sail0r", "link": "https://stackoverflow.com/users/4705722/sail0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 55698325, "answer_count": 2, "score": 1, "last_activity_date": 1555405997, "creation_date": 1555367155, "question_id": 55698029, "link": "https://stackoverflow.com/questions/55698029/how-to-slice-am-array-ref-and-return-an-array-ref-in-one-line", "title": "how to slice am array ref and return an array ref in one line?", "body": "<p>Consider the following lines of code. I want to slice the array ref $a and return the result as an array ref assigned to $b. I can do that in two lines as shown. I am stumped in my attempts to do this in one line! How can this be done?</p>\n\n<pre><code>$a = [1,2,3,4,5];\n###the desired result###########################\n@b = @{$a}[1 .. @{$a} - 1];\n$b = \\@b; # $b is [2,3,4,5]\n################################################\n###trying to get the desired result in one line##\n$b = \\@{$a}[1 .. @{$a} - 1]; # $b is \\5;\n$b = \\{@{$a}[1 .. @{$a} - 1]}; # $b is \\{ 2 =&gt; 3, 4 =&gt; 5 }\n$b = $a-&gt;[1 .. @{$a} - 1]; # $b is 1\n$b = $a-&gt;@[1 .. @{$a} - 1]; # $b is 5\n</code></pre>\n"}, {"tags": ["regex", "perl", "if-statement"], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 1, "last_activity_date": 1555366300, "creation_date": 1555366300, "answer_id": 55697896, "question_id": 55697850, "link": "https://stackoverflow.com/questions/55697850/perl-replace-a-string-which-matches-the-pattern/55697896#55697896", "title": "Perl : Replace a string which matches the pattern", "body": "<p>You should make the pattern match the entire string if you want the entire string to be replaced:</p>\n\n<pre><code>$foo =~ s/.*I have a.*/CHECKED/;\n</code></pre>\n\n<p>Alternatively, simply assign the string with a new value if it matches the pattern:</p>\n\n<pre><code>$foo = 'CHECKED' if $foo =~ /I have a/;\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 3, "last_activity_date": 1555371345, "last_edit_date": 1555371345, "creation_date": 1555370657, "answer_id": 55698517, "question_id": 55697850, "link": "https://stackoverflow.com/questions/55697850/perl-replace-a-string-which-matches-the-pattern/55698517#55698517", "title": "Perl : Replace a string which matches the pattern", "body": "<pre><code>$foo = \"I have a dog - cat\"\n\n$foo =~ s/I have a.*/CHECKED/\n</code></pre>\n\n<p>perl command\n<code>tr///</code> or <code>y///</code> for transliteration letter to letter<br>\ngo <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlop.html#Quote-Like-Operators</a></p>\n"}], "owner": {"reputation": 115, "user_id": 10781549, "user_type": "registered", "profile_image": "https://graph.facebook.com/1991393544231190/picture?type=large", "display_name": "Jigar Vaidya", "link": "https://stackoverflow.com/users/10781549/jigar-vaidya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1555489380, "creation_date": 1555366004, "last_edit_date": 1555489380, "question_id": 55697850, "link": "https://stackoverflow.com/questions/55697850/perl-replace-a-string-which-matches-the-pattern", "title": "Perl : Replace a string which matches the pattern", "body": "<p>I want to replace the whole string if matches the pattern at the starting of the line. My string is <code>$foo = \"I have a dog - cat\"</code>. \nNow if regex matches with \"I have a\" then string is replaced by \"CHECKED\"  </p>\n\n<p>I tried </p>\n\n<pre><code>$foo =~ tr /I have a/CHECKED/\n</code></pre>\n\n<p>The output is <code>CHECKED dog -cat</code> nad I don't want to add the full sentence in the regex. Like <code>$foo =~ /I</code> have a <code>Dog -cat/CHECKED</code>;</p>\n"}, {"tags": ["perl", "installation"], "comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1555360486, "post_id": 55696862, "comment_id": 98076020, "body": "<code>&#47;user</code> or <code>&#47;usr</code> ?"}, {"owner": {"reputation": 2637, "user_id": 5874981, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/98c6958b1b71ba6caddef718af8d8a97?s=128&d=identicon&r=PG&f=1", "display_name": "Serge", "link": "https://stackoverflow.com/users/5874981/serge"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1555360585, "post_id": 55696862, "comment_id": 98076059, "body": "/usr thanks for correcting"}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1555360702, "post_id": 55696862, "comment_id": 98076115, "body": "Have you tried a (sym) link?"}, {"owner": {"reputation": 2637, "user_id": 5874981, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/98c6958b1b71ba6caddef718af8d8a97?s=128&d=identicon&r=PG&f=1", "display_name": "Serge", "link": "https://stackoverflow.com/users/5874981/serge"}, "edited": false, "score": 0, "creation_date": 1555367343, "post_id": 55696862, "comment_id": 98078298, "body": "Some scripts work"}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 4, "last_activity_date": 1555360710, "creation_date": 1555360710, "answer_id": 55696911, "question_id": 55696862, "link": "https://stackoverflow.com/questions/55696862/how-to-install-perl-to-usr-local-bin/55696911#55696911", "title": "How to install perl to /usr/local/bin", "body": "<p>The simplest solution that is likely to work for most cases is just to create a symlink in <code>/usr/local/bin</code> pointing to <code>../../bin/perl</code>. Another alternative is to use perl (or awk or sed) to change the first line of your files to point at the right place. A bit more work, but not really hard.</p>\n\n<p>If you need a private perl for some reason, and this isn't really very abnormal for perl shops, much like Java shops will have multiple JVMs floating around, or C# shops will have multiple levels of .NET / .NETCore floating around, then installing your own copy from source doesn't take a whole lot of work, though, even here, I'd suggest installing to somewhere else, and then creating the symlink you require so as to make it easier to upgrade and downgrade as required.</p>\n"}], "owner": {"reputation": 2637, "user_id": 5874981, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/98c6958b1b71ba6caddef718af8d8a97?s=128&d=identicon&r=PG&f=1", "display_name": "Serge", "link": "https://stackoverflow.com/users/5874981/serge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1555406382, "creation_date": 1555360453, "last_edit_date": 1555361636, "question_id": 55696862, "link": "https://stackoverflow.com/questions/55696862/how-to-install-perl-to-usr-local-bin", "title": "How to install perl to /usr/local/bin", "body": "<p>I have a CD with a bunch of perl scripts, using  /usr/local/bin/perl shebang. Yet on my machine perl is on /usr/bin .</p>\n\n<p>Can I just copy perl file or should have some more sophisticated install, like compiling from the source?</p>\n\n<p>Perl 5.22, Ubuntu 16.04</p>\n"}, {"tags": ["perl", "html-email"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555354359, "post_id": 55695413, "comment_id": 98073586, "body": "Your DailyInflow function should probably return something..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11364818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5a99ca126af2b4282a6191d1f7e6ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/11364818/brandon"}, "edited": false, "score": 0, "creation_date": 1555440586, "post_id": 55703135, "comment_id": 98110145, "body": "Hey @Dave, how would I take this data and place it into and HTML table? I&#39;m stuck figuring out how to join my table headers with the data in the foreach loop."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 11364818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5a99ca126af2b4282a6191d1f7e6ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/11364818/brandon"}, "edited": false, "score": 0, "creation_date": 1555489833, "post_id": 55703135, "comment_id": 98125552, "body": "@Brandon: Your original question had no mention of HTML. If you have a new requirement, then it&#39;s probably best to add a completely new question. I&#39;m not sure where your <code>SendEmail()</code> function comes from. But I&#39;d strongly recommend looking at a modern CPAN module like <a href=\"https://metacpan.org/pod/Email::Sender\" rel=\"nofollow noreferrer\">Email::Sender</a> or (even easier) <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1555401044, "creation_date": 1555401044, "answer_id": 55703135, "question_id": 55695413, "link": "https://stackoverflow.com/questions/55695413/perl-how-do-i-print-the-result-of-an-array-of-hashes-onto-the-body-of-an-e-mail/55703135#55703135", "title": "Perl: How do I print the result of an Array of Hashes onto the body of an e-mail", "body": "<p>Your <code>DailyInflow()</code> subroutine should look like this:</p>\n\n<pre><code>sub DailyInflow {\n    my @inflow = SQLTableHash(\"select count(FOO), count(BAR), BAZ from table1 where days in (0,1) group by BAZ\", $reportdbh);\n\n    my $string;\n    foreach my $inflow (@inflow) {\n        $string .= $inflow-&gt;{\"BAZ\"} . \": \" . $inflow-&gt;{\"COUNT(FOO)\"}.\"\\n\";\n        $string .= print \"Total: \" . $inflow-&gt;{\"COUNT(BAR)\"} . \"\\n\";\n    }\n\n    return $string;\n}\n</code></pre>\n\n<p>But you can simplify it by interpolating variables within double-quoted strings.</p>\n\n<pre><code>sub DailyInflow {\n    my @inflow = SQLTableHash(\"select count(FOO), count(BAR), BAZ from table1 where days in (0,1) group by BAZ\", $reportdbh);\n\n    my $string;\n    foreach my $inflow (@inflow) {\n        $string .= \"$inflow-&gt;{'BAZ}: $inflow-&gt;{'COUNT(FOO)'}\\n\";\n        $string .= \"Total: $inflow-&gt;{'COUNT(BAR)'}\\n\";\n    }\n\n    return $string;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11364818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5a99ca126af2b4282a6191d1f7e6ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/11364818/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555401044, "creation_date": 1555353587, "question_id": 55695413, "link": "https://stackoverflow.com/questions/55695413/perl-how-do-i-print-the-result-of-an-array-of-hashes-onto-the-body-of-an-e-mail", "title": "Perl: How do I print the result of an Array of Hashes onto the body of an e-mail", "body": "<p>I have some data stored in an array of hashes, and I am trying to print the results onto the body of the email being sent. Results will print on the command line when the script is ran, however the body of the email will remain blank.</p>\n\n<pre><code>sub DailyInflow {\n    my @inflow = SQLTableHash(\"select count(FOO), count(BAR), BAZ from table1 where days in (0,1) group by BAZ\", $reportdbh);\n\n    foreach my $inflow (@inflow) {\n     print $inflow-&gt;{\"BAZ\"} . \": \" . $inflow-&gt;{\"COUNT(FOO)\"}.\"\\n\";\n        print \"Total: \" . $inflow-&gt;{\"COUNT(BAR)\"} . \"\\n\";\n    }\n}\n\n</code></pre>\n\n<pre><code>################### Send E-mail with CSV Attachment ##################\n\nprint \"Sending Email ... \\n\" if $ENV{DEBUG};\n\n\nmy $subject = \"Snapshot $reportdate\"; \n\nSendEmail({\n    FROM =&gt; 'user@email.com',\n    TO =&gt; $args{EMAIL},\n    SUBJECT =&gt; $subject,\n    BODY =&gt;DailyInflow()\n        ATTACHFILES =&gt; [{\n        Type =&gt; 'BINARY',\n        Path =&gt; \"$fullzipname\",\n        Disposition =&gt; 'attachment',\n        Filename =&gt; \"$zipname\",\n    }],\n});\n</code></pre>\n"}, {"tags": ["html", "apache", "perl", "cgi", "content-type"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1555350401, "post_id": 55694611, "comment_id": 98071975, "body": "Is there any other output in <code>&#47;&#47; other code ...</code>, or is <code>print header(&quot;text&#47;html&quot;)</code> the first print statement encountered in the script? Can you run the script from the command line?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1555358763, "post_id": 55694611, "comment_id": 98075338, "body": "&quot;When I check Elements tab on Chrome&#39;s Developer&#39;s tools, for some reason the entire HTML is wrapped inside a <code>&lt;pre&gt;</code> tag which is in turn inside another HTML document.&quot; \u2014 You&#39;re inspecting the HTML document that Chrome generated to display something it was told was plain text."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1555358825, "post_id": 55694611, "comment_id": 98075362, "body": "<a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"nofollow noreferrer\">Don&#39;t use the CGI module</a> and <b>especially</b> don&#39;t use its <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">html generating functions</a>."}, {"owner": {"reputation": 478, "user_id": 3906773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/779488056/picture?type=large", "display_name": "Anish Sana", "link": "https://stackoverflow.com/users/3906773/anish-sana"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1555364580, "post_id": 55694611, "comment_id": 98077534, "body": "@mob There are a couple of <code>print redirect()</code> statements before <code>print header(&quot;text&#47;html&quot;)</code> that are inside of <code>if</code> statements but otherwise, it&#39;s the first <code>print</code> statement. There is a <code>sprintf</code> function before it that format the date and stores it in a variable."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9771050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f943ec3797516e386b44ddd270929f?s=128&d=identicon&r=PG&f=1", "display_name": "benimautner", "link": "https://stackoverflow.com/users/9771050/benimautner"}, "is_accepted": false, "score": -2, "last_activity_date": 1555353521, "creation_date": 1555353521, "answer_id": 55695398, "question_id": 55694611, "link": "https://stackoverflow.com/questions/55694611/perl-cgi-script-outputs-raw-html-even-after-explicitly-configuring-content-type/55695398#55695398", "title": "Perl CGI script outputs raw HTML even after explicitly configuring Content-Type", "body": "<p>Try this:</p>\n\n<p><code>print(header(-type =&gt; 'text/html'));</code></p>\n\n<p>at least that worked for me.</p>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 3906773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/779488056/picture?type=large", "display_name": "Anish Sana", "link": "https://stackoverflow.com/users/3906773/anish-sana"}, "edited": false, "score": 0, "creation_date": 1555364076, "post_id": 55696407, "comment_id": 98077385, "body": "Apologies. I&#39;m used to developing in languages that use <code>&#47;&#47;</code> for comments so I used them here by habit; I&#39;ve edited them in the question to reflect that. The actual code does not have any comments. I&#39;ve only added them here for clarification. So the output is still as mentioned in the question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 478, "user_id": 3906773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/779488056/picture?type=large", "display_name": "Anish Sana", "link": "https://stackoverflow.com/users/3906773/anish-sana"}, "edited": false, "score": 0, "creation_date": 1555396238, "post_id": 55696407, "comment_id": 98084989, "body": "Yet I&#39;ve demonstrated that what you posted has nothing to do with your problem. Nothing else we can do"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1555358281, "creation_date": 1555358281, "answer_id": 55696407, "question_id": 55694611, "link": "https://stackoverflow.com/questions/55694611/perl-cgi-script-outputs-raw-html-even-after-explicitly-configuring-content-type/55696407#55696407", "title": "Perl CGI script outputs raw HTML even after explicitly configuring Content-Type", "body": "<blockquote>\n  <p><em>Is there anything wrong with the following code? -</em></p>\n</blockquote>\n\n<p>Yes. It doesn't even compile, for starters.</p>\n\n<pre><code>$ perl &lt;&lt;'__EOS__'\nuse CGI qw(:standard);\n\n// other code\n\nprint header(\"text/html\"); // also tried just print header;\nmy $banner = \"Some text\";\nprint start_html($banner);\nprint h3($banner);\n\nprint start_form(-method=&gt;\"POST\");\n// HTML form specific code\nprint end_form;\n\nprint end_html;\n__EOS__\nBareword found where operator expected at - line 3, near \"// other\"\n        (Missing operator before other?)\nBareword found where operator expected at - line 3, near \"other code\"\n        (Do you need to predeclare other?)\nBareword found where operator expected at - line 5, near \"// also\"\n        (Missing operator before also?)\nBareword found where operator expected at - line 11, near \"// HTML\"\n        (Missing operator before HTML?)\nBareword found where operator expected at - line 11, near \"specific code\"\n        (Do you need to predeclare specific?)\nsyntax error at - line 3, near \"// other \"\nsyntax error at - line 5, near \"// also tried \"\nsyntax error at - line 11, near \"// HTML form \"\nExecution of - aborted due to compilation errors.\n</code></pre>\n\n<p>But after changing all <code>//</code> to <code>#</code>, we get a perfectly fine program that doesn't output any PRE elements.</p>\n\n<pre><code>$ perl &lt;&lt;'__EOS__'\nuse CGI qw(:standard);\n\n# other code\n\nprint header(\"text/html\"); # also tried just print header;\nmy $banner = \"Some text\";\nprint start_html($banner);\nprint h3($banner);\n\nprint start_form(-method=&gt;\"POST\");\n# HTML form specific code\nprint end_form;\n\nprint end_html;\n__EOS__\nContent-Type: text/html; charset=ISO-8859-1\n\n&lt;!DOCTYPE html\n        PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n         \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;\n&lt;head&gt;\n&lt;title&gt;Some text&lt;/title&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3&gt;Some text&lt;/h3&gt;&lt;form method=\"post\" action=\"http://localhost\" enctype=\"multipart/form-data\"&gt;&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 3906773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/779488056/picture?type=large", "display_name": "Anish Sana", "link": "https://stackoverflow.com/users/3906773/anish-sana"}, "edited": false, "score": 0, "creation_date": 1556053525, "post_id": 55702956, "comment_id": 98305229, "body": "You&#39;re right. There was a custom module import that was throwing an error. Disabling it caused the HTML to be rendered."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1555400355, "creation_date": 1555400355, "answer_id": 55702956, "question_id": 55694611, "link": "https://stackoverflow.com/questions/55694611/perl-cgi-script-outputs-raw-html-even-after-explicitly-configuring-content-type/55702956#55702956", "title": "Perl CGI script outputs raw HTML even after explicitly configuring Content-Type", "body": "<p>When I run your program, I get the following output:</p>\n\n<pre><code>Content-Type: text/html; charset=ISO-8859-1\n\n&lt;!DOCTYPE html\n    PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n     \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&gt;\n&lt;head&gt;\n&lt;title&gt;Some text&lt;/title&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3&gt;Some text&lt;/h3&gt;&lt;form method=\"post\" action=\"http://localhost\" enctype=\"multipart/form-data\"&gt;&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Which is exactly what I'd expect to see and nothing like what you are seeing. I can see two possibilities to explain this discrepancy:</p>\n\n<ol>\n<li>There is something in the <code># other code</code> section of your program which is outputting a set of CGI headers (and, perhaps, the <code>&lt;pre&gt;</code> tags as well).</li>\n<li>You're not actually running the code in a CGI environment and there is some unusual web configuration that takes the output from your program and embeds it in another web page.</li>\n</ol>\n\n<p>An easy way to differentiate between these two cases would be to run your program from the command line and see what output you get. If you get your output, then the problem is somewhere in the <code># other code</code>, if you get my output, then the problem is in the web server configuration.</p>\n\n<p>As an aside, I'd highly recommend that you read the section entitled <a href=\"https://metacpan.org/pod/CGI#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">HTML Generation functions should no longer be used</a> in a recent version of the <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">CGI module documentation</a> and the <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a> page to see some suggestions for better approaches.</p>\n"}], "owner": {"reputation": 478, "user_id": 3906773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/779488056/picture?type=large", "display_name": "Anish Sana", "link": "https://stackoverflow.com/users/3906773/anish-sana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 55702956, "answer_count": 3, "score": -1, "last_activity_date": 1555400355, "creation_date": 1555350031, "last_edit_date": 1555363388, "question_id": 55694611, "link": "https://stackoverflow.com/questions/55694611/perl-cgi-script-outputs-raw-html-even-after-explicitly-configuring-content-type", "title": "Perl CGI script outputs raw HTML even after explicitly configuring Content-Type", "body": "<p>I'm having a lot of trouble getting my Perl CGI script to render HTML. It keeps outputting HTML as plain text. I even tried explicitly setting the <em>Content-Type</em> with <code>print header(\"text/html\");</code></p>\n\n<p>Is there anything wrong with the following code? -</p>\n\n<pre><code>use CGI qw(:standard);\n\n# other code\n\nprint header(\"text/html\"); \n# also tried just print header;\n\nmy $banner = \"Some text\";\nprint start_html($banner);\nprint h3($banner);\n\nprint start_form(-method=&gt;\"POST\");\n# HTML form specific code\nprint end_form;\n\nprint end_html;\n</code></pre>\n\n<p>When I check <em>Elements</em> tab on Chrome's Developer's tools, for some reason the entire HTML is wrapped inside a <code>&lt;pre&gt;</code> tag which is in turn inside another HTML document. So the HTML is malformed but I'm unable to understand why -</p>\n\n<pre><code>    &lt;html&gt;\n\n    &lt;head&gt;&lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;pre style=\"word-wrap: break-word; white-space: pre-wrap;\"&gt;&amp;lt;!DOCTYPE html\n        PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n         \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&amp;gt;\n    &amp;lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\"&amp;gt;\n    &amp;lt;head&amp;gt;\n    &amp;lt;title&amp;gt;Some text&amp;lt;/title&amp;gt;\n    &amp;lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\" /&amp;gt;\n    &amp;lt;/head&amp;gt;\n    &amp;lt;body&amp;gt;\n    &amp;lt;h3&amp;gt;Some text&amp;lt;/h3&amp;gt;&amp;lt;form method=\"post\" action=\"/path/script.pl?param1=val1&amp;param2=val2\" enctype=\"multipart/form-data\"&amp;gt;\n\n    //form specific code\n\n&amp;lt;/form&amp;gt;\n    &amp;lt;/body&amp;gt;\n    &amp;lt;/html&amp;gt;&lt;/pre&gt;\n    &lt;/body&gt;\n\n    &lt;/html&gt;\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["file", "perl"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1555349540, "post_id": 55694471, "comment_id": 98071583, "body": "Are they symlinks? An <code>ls -alR</code> for reference here would help illustrate."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1555357520, "post_id": 55694471, "comment_id": 98074890, "body": "You are right. I added $fn at the very beginning of &amp;found."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1555353413, "post_id": 55694595, "comment_id": 98073164, "body": "It&#39;s very unlikely that <code>.&#47;bb&#47;Whatever.mp3</code> is anything but a plain file."}], "tags": [], "owner": {"reputation": 149, "user_id": 5956768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3PUQ.png?s=128&g=1", "display_name": "strupo", "link": "https://stackoverflow.com/users/5956768/strupo"}, "is_accepted": false, "score": 2, "last_activity_date": 1555349951, "creation_date": 1555349951, "answer_id": 55694595, "question_id": 55694471, "link": "https://stackoverflow.com/questions/55694471/perl-check-for-files-f-vs-d/55694595#55694595", "title": "Perl: check for files (-f vs. ! -d)", "body": "<p>There are more types of files than regular files and directories, for example, device files (in the /dev/* hierarchy).</p>\n\n<pre><code>foreach (qw(/tmp/somefile /tmp/somedir /dev/sda)) {\n    print \"$_: \";\n    print q(-f: true ) if -f;\n    print q(-d: true ) if -d;\n}\ncontinue {\n    print \"\\n\";\n}\n</code></pre>\n\n<p>If you run the code above, you'll notice that for <code>/dev/sda</code>, we have both <code>! -d</code>, and <code>! -f</code>, therefore <code>-f</code> is not equivalent to <code>! -d</code>.</p>\n\n<p>See also: <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">perlfunc#-X</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1555371045, "post_id": 55694858, "comment_id": 98079112, "body": "Another option to avoid the initial issue is to pass <code>Cwd::cwd()</code> instead of <code>&#39;.&#39;</code> so that <code>$File::Find::name</code> will be an absolute path. Though <code>no_chdir</code> is a good option to pass in either case."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1555398374, "post_id": 55694858, "comment_id": 98085879, "body": "@Grinnz, No, the alternative to using <code>no_chdir</code> is using <code>$_</code> (path rel to CWD) instead of <code>$File::Find::name</code> (path relative to original CWD). In fact, one should always be using <code>$_</code> here. Updated my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1555398327, "last_edit_date": 1555398327, "creation_date": 1555351079, "answer_id": 55694858, "question_id": 55694471, "link": "https://stackoverflow.com/questions/55694471/perl-check-for-files-f-vs-d/55694858#55694858", "title": "Perl: check for files (-f vs. ! -d)", "body": "<p>By default, <code>find</code> changes to the directory that contains the file before calling the callback.</p>\n\n<p>This means that you are passing <code>./bb/Whatever.mp3</code> when you should be passing <code>Whatever.mp3</code>. As a result, both <code>-f</code> and <code>-d</code> are returning <code>undef</code> to signal an error occurred.</p>\n\n<p><code>$File::Find::name</code> contains the path to the file relative to the original CWD. On the other hand, <code>$_</code> contains the path to the file relative to the CWD. This is what you should be using.</p>\n\n<pre><code>use File::Find;\n\nfind({ wanted =&gt; \\&amp;found, no_chdir =&gt; 1 }, \".\");\n\nsub found {\n   if (!stat($_)) {\n      warn(\"Can't stat \\\"$_\\\": $!\\n\");\n      return;\n   }\n\n   if (-d _)  {\n      print \"0 $_\\n;   # A directory\n   } else {\n      print \"1 $_\\n\";  # Some other kind of file\n   }\n}\n</code></pre>\n\n<p>I've included two other changes.</p>\n\n<p><strong>Check for errors</strong></p>\n\n<p>We could use</p>\n\n<pre><code>my $rv = -d $_;\nif (!defined($rv)) {\n   warn(\"Can't stat \\\"$_\\\": $!\\n\");\n   return;\n}\n\nif ($rv)  {\n   ...\n}\n</code></pre>\n\n<p>But since the <em><code>-X</code></em> functions are simply wrappers for the <code>stat</code> system call, I find it a bit cleaner to use <code>stat</code> up front to check for errors, and use the special handle <code>_</code> thereon to avoid doing additional calls to <code>stat</code>. The special handle <code>_</code> tells <code>-d</code> to use the results of the previous call to <code>stat</code>/<em><code>-X</code></em>.</p>\n\n<p><strong>Avoid needless calls to <code>chdir</code></strong></p>\n\n<p>Now that you're not using <code>$File::Find::name</code>, there's no point in having <code>find</code> call <code>chdir</code> all those times. This is what the <code>no_chdir =&gt; 1</code> does.</p>\n\n<hr>\n\n<p>To answer the question you actually asked, there are two situations where <code>-f</code> isn't equal to <code>!-d</code>.</p>\n\n<p><strong>Possibility 1</strong>: You are unable to <code>stat</code> the file.</p>\n\n<p><code>-f</code> and <code>-d</code> return one of three different values:</p>\n\n<ul>\n<li>undefined: An error occurred.</li>\n<li>defined and false: It's not a plain file (<code>-f</code>) or directory (<code>-d</code>)</li>\n<li>defined and true: It's a plain file (<code>-f</code>) or directory (<code>-d</code>)</li>\n</ul>\n\n<p>If the provided path doesn't exist, if you don't have permission to read the directory in which the file resides, or if some other error occurs, both <code>-f</code> and <code>!-d</code> will <code>undef</code> (and <code>$!</code> will contain the error code/message).</p>\n\n<p><strong>Possibility 2</strong>: The file is neither a plain file nor a directory.</p>\n\n<p>Plain files (<code>-f</code>) and directories (<code>-d</code>) are just two of the seven types of files. The following are the others:</p>\n\n<ul>\n<li>Symbolic links (<code>-l</code>)</li>\n<li>Named pipes aka \"fifos\" (<code>-p</code>)</li>\n<li>Sockets (<code>-S</code>)</li>\n<li>Block devices (<code>-b</code>)</li>\n<li>Character devices (<code>-c</code>)</li>\n</ul>\n\n<p>One and only one of these seven will be true.</p>\n\n<hr>\n\n<p>Full file type check example:</p>\n\n<pre><code>stat($qfn)\n   or die(\"Can't stat \\\"$qfn\\\": $!\\n\");\n\nif    (-f _) { say \"\\\"$qfn\\\" is a plain file.\"; }\nelsif (-d _) { say \"\\\"$qfn\\\" is a directory.\"; }\nelsif (-l _) { say \"\\\"$qfn\\\" is a symbolic link.\"; }\nelsif (-p _) { say \"\\\"$qfn\\\" is a named pipe.\"; }\nelsif (-S _) { say \"\\\"$qfn\\\" is a socket.\"; }\nelsif (-b _) { say \"\\\"$qfn\\\" is a block device.\"; }\nelsif (-c _) { say \"\\\"$qfn\\\" is a character device.\"; }\nelse         { say \"\\\"$qfn\\\" is of unknown type.\"; }  # Shouldn't happen on unix systems.\n</code></pre>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 55694858, "answer_count": 2, "score": 2, "last_activity_date": 1555398327, "creation_date": 1555349368, "last_edit_date": 1555357672, "question_id": 55694471, "link": "https://stackoverflow.com/questions/55694471/perl-check-for-files-f-vs-d", "title": "Perl: check for files (-f vs. ! -d)", "body": "<p>I am a bit confused. I would expect -f to be equal to ! -d.</p>\n\n<p>But it seems that is not the case. I try to check if a file is a directory or not.</p>\n\n<pre><code>use File::Find;\nfind (\\&amp;found, \".\");\n\nsub found ()\n{\n  my $fn = $File::Find::name;\n  if( ! -d $fn)\n  {\n    print \"\\n1 \" . $fn;         # a file\n  }\n  else\n  {\n    print \"\\n0 \" . $fn;         # a directory\n  }\n}\n</code></pre>\n\n<p>Results for <strong>! -d</strong>\nis what I would expect regarding my test-directory.</p>\n\n<pre><code>0 .\n1 ./Whatever.mp3\n1 ./x.pl\n0 ./bb\n1 ./bb/Whatever.mp3\n0 ./aa\n1 ./aa/Whatever.mp3\n</code></pre>\n\n<p>Results for <strong>-f</strong> are unexpected.</p>\n\n<pre><code>0 .\n1 ./Whatever.mp3\n1 ./x.pl\n0 ./bb\n0 ./bb/Whatever.mp3            # ???\n0 ./aa\n0 ./aa/Whatever.mp3            # ???\n</code></pre>\n"}, {"tags": ["macos", "perl", "homebrew", "cpanm"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555347941, "post_id": 55694022, "comment_id": 98070863, "body": "1) There&#39;s no point to using local::lib if you&#39;re using a locally-installed build of Perl. I wouldn&#39;t add any of the lines you added to your login script to my login script."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555347967, "post_id": 55694022, "comment_id": 98070870, "body": "2) I don&#39;t know about <code>brew</code>, but <code>perlbrew</code> requires that I add something to my login script. I don&#39;t see that here?"}, {"owner": {"reputation": 4854, "user_id": 284698, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4eb4117fcbeb521f175b5fabc7918d97?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/284698/eric"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555347979, "post_id": 55694022, "comment_id": 98070875, "body": "Ok. Should I cut all those lines from my .bashrc? - I really don&#39;t know what they all do."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555348004, "post_id": 55694022, "comment_id": 98070890, "body": "3) You need to use the a <code>cpanm</code> that was installed using the <code>perl</code> you wish to use."}, {"owner": {"reputation": 4854, "user_id": 284698, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4eb4117fcbeb521f175b5fabc7918d97?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/284698/eric"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555348036, "post_id": 55694022, "comment_id": 98070910, "body": "Aha - using a cpanm that was installed with the perl in my home folder - how do I do that? Just find it in there?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555348105, "post_id": 55694022, "comment_id": 98070938, "body": "Those lines do the same thing three times, and that thing is telling Perl to install modules in a non-default directory (and telling Perl to look there for modules). It should be perfectly fine and simpler to install in the default directory when using a locally-installed Perl."}, {"owner": {"reputation": 4854, "user_id": 284698, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4eb4117fcbeb521f175b5fabc7918d97?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/284698/eric"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555348186, "post_id": 55694022, "comment_id": 98070980, "body": "It looks like I am using the cpanm with that install: <code>which cpanm</code> gives me <code>&#47;Users&#47;ericmueller&#47;perl5&#47;bin&#47;cpanm</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555348209, "post_id": 55694022, "comment_id": 98070987, "body": "See comment (2). There should be something that places your <code>perl</code>&#39;s <code>bin</code> first in the PATH. Once you install <code>cpanm</code> using your <code>perl</code>, it should be found."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555348243, "post_id": 55694022, "comment_id": 98071000, "body": "That&#39;s good. Double check <code>head -n 1 &quot;$( which cpanm )&quot;</code>. Should be your <code>perl</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555348322, "post_id": 55694022, "comment_id": 98071028, "body": "4) The message you posted don&#39;t indicate that &quot;it&#39;s still trying to put the DBI library (or one of its dependencies) in /usr/bin/&quot;, but it does indicate the system Perl is being used to install them, and that&#39;s no good."}, {"owner": {"reputation": 4854, "user_id": 284698, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4eb4117fcbeb521f175b5fabc7918d97?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/284698/eric"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555348342, "post_id": 55694022, "comment_id": 98071036, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/191861/discussion-between-eric-and-ikegami\">continue this discussion in chat</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555414863, "post_id": 55694022, "comment_id": 98095404, "body": "Small correction to what I said earlier: <code>source ~&#47;perl5&#47;perlbrew&#47;etc&#47;bashrceval &quot;$(perl -I$HOME&#47;perl5&#47;lib&#47;perl5 -Mlocal::lib=$HOME&#47;perl5)&quot;</code> should be <code>source ~&#47;perl5&#47;perlbrew&#47;etc&#47;bashrceval</code> (because the scripts takes no arguments), and you need to keep that to keep <code>perlbrew</code> working."}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1555907777, "post_id": 55696115, "comment_id": 98248231, "body": "&quot;Best practice&quot; is equivocal. plenv is a highly rated alternative"}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": false, "score": -1, "last_activity_date": 1556021000, "last_edit_date": 1556021000, "creation_date": 1555356769, "answer_id": 55696115, "question_id": 55694022, "link": "https://stackoverflow.com/questions/55694022/how-do-i-get-cpanm-to-use-my-local-perl5/55696115#55696115", "title": "How do I get cpanm to use my local perl5?", "body": "<p>yep ... MacOS Perl is something you should rather not touch.</p>\n\n<p>yes ... You can do it.</p>\n\n<p>but ... Common practice, <a href=\"https://perlbrew.pl\" rel=\"nofollow noreferrer\">https://perlbrew.pl</a></p>\n\n<p>and ... Install some shinny perl</p>\n\n<p>and ... follow the instructions on the website about <code>cpanm</code></p>\n"}], "owner": {"reputation": 4854, "user_id": 284698, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4eb4117fcbeb521f175b5fabc7918d97?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/284698/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 682, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1556021000, "creation_date": 1555347454, "last_edit_date": 1555348320, "question_id": 55694022, "link": "https://stackoverflow.com/questions/55694022/how-do-i-get-cpanm-to-use-my-local-perl5", "title": "How do I get cpanm to use my local perl5?", "body": "<p>I am on a Mac so of course I'm running into this <a href=\"https://stackoverflow.com/a/52997962/284698\">huge problem with perl on the Mac</a> where the OS is trying to protect me and it's a nightmare to install . The solution seems to be \"make your own perl instead of using the one with the OS\" so I've done that. I ran brew install perl and now I have this in my .bashrc</p>\n\n<pre><code>PATH=\"/Users/ericmueller/perl5/bin${PATH:+:${PATH}}\"; export PATH;\nPERL5LIB=\"/Users/ericmueller/perl5/lib/perl5${PERL5LIB:+:${PERL5LIB}}\"; export PERL5LIB;\nPERL_LOCAL_LIB_ROOT=\"/Users/ericmueller/perl5${PERL_LOCAL_LIB_ROOT:+:${PERL_LOCAL_LIB_ROOT}}\"; export PERL_LOCAL_LIB_ROOT;\nPERL_MB_OPT=\"--install_base \\\"/Users/ericmueller/perl5\\\"\"; export PERL_MB_OPT;\nPERL_MM_OPT=\"INSTALL_BASE=/Users/ericmueller/perl5\"; export PERL_MM_OPT;\neval \"$(perl -I$HOME/perl5/lib/perl5 -Mlocal::lib=$HOME/perl5)\"\nsource ~/perl5/perlbrew/etc/bashrceval \"$(perl -I$HOME/perl5/lib/perl5 -Mlocal::lib=$HOME/perl5)\"\n</code></pre>\n\n<p>Honestly, I have no idea what most of this is ;-) but it looks like I have my own perl in my folder and I see that I can run simple perl scripts so I guess all is good.</p>\n\n<p>So now I want to install cpanminus and DBI.</p>\n\n<p>I installed cpanminus (<code>brew install cpanminus</code>), without errors. But then when I run <code>cpanm DBI</code> it fails, and when I look at the log where it failed, I see this:</p>\n\n<pre><code>\"/usr/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- DBI.bs blib/arch/auto/DBI/DBI.bs 644\n\"/usr/bin/perl\" -p -e \"s/~DRIVER~/Perl/g\" ./Driver.xst &gt; Perl.xsi\n\"/usr/bin/perl\" \"/System/Library/Perl/5.18/ExtUtils/xsubpp\"  -typemap '/System/Library/Perl/5.18/ExtUtils/typemap' -typemap '/Users/ericmueller/.cpanm/work/1555346710.17160/DBI-1.642/typemap'  Perl.xs &gt; Perl.xsc\nmv Perl.xsc Perl.c\ncc -c   -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -Os   -DVERSION=\\\"1.642\\\" -DXS_VERSION=\\\"1.642\\\"  \"-I/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE\"  -W -Wall -Wpointer-arith -Wbad-function-cast -Wno-comment -Wno-sign-compare -Wno-cast-qual -Wmissing-noreturn -Wno-unused-parameter Perl.c\nIn file included from Perl.xs:7:\n./DBIXS.h:22:10: fatal error: 'EXTERN.h' file not found\n#include &lt;EXTERN.h&gt;\n         ^~~~~~~~~~\n1 error generated.\nmake: *** [Perl.o] Error 1\n</code></pre>\n\n<p>This is totally the stupid Mac perl problem, and the issue <em>appears</em> to be that it's still trying to put the DBI library (or one of its dependencies) in /usr/bin/ which is a big no-no. Or maybe it's trying to use the system perl to do the installation, so that's also failing. I have my own perl5 installation in my home folder. That's where it should be putting things and working with them.</p>\n\n<p>So if that is the issue (and I am really shitty at both perl and this kind of sysadmin stuff, so I'm not 100% sure!), how do I get <code>cpanm</code> to work with my perl in my home folder, instead of in /usr/bin/? I don't want ANYTHING to happen in /usr/bin/ since that is a non-starter!</p>\n\n<p>** EDIT I removed everything but the PATH command from my bashrc, and now I get this when I run <code>cpanm DBI</code></p>\n\n<pre><code>!\n! Can't write to /Library/Perl/5.18 and /usr/local/bin: Installing modules to /Users/ericmueller/perl5\n! To turn off this warning, you have to do one of the following:\n!   - run me as a root or with --sudo option (to install to /Library/Perl/5.18 and /usr/local/bin)\n!   - Configure local::lib in your existing shell to set PERL_MM_OPT etc.\n!   - Install local::lib by running the following commands\n!\n!         cpanm --local-lib=~/perl5 local::lib &amp;&amp; eval $(perl -I ~/perl5/lib/perl5/ -Mlocal::lib)\n!\n--&gt; Working on DBI\nFetching http://www.cpan.org/authors/id/T/TI/TIMB/DBI-1.642.tar.gz ... OK\nConfiguring DBI-1.642 ... OK\nBuilding and testing DBI-1.642 ... FAIL\n! Installing DBI failed. See /Users/ericmueller/.cpanm/work/1555348167.22814/build.log for details. Retry with --force to force install it.\n</code></pre>\n\n<p>So the good news is that I am definitely using the cpanm that comes with my custom perl5 in my /Users folder. The bad news is, I'm still getting the exact same stupid problem.</p>\n"}, {"tags": ["loops", "perl", "file-handling"], "comments": [{"owner": {"reputation": 53, "user_id": 11363621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abab8e08f2681a6a2b58f51668be0164?s=128&d=identicon&r=PG&f=1", "display_name": "gmezos", "link": "https://stackoverflow.com/users/11363621/gmezos"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1555337314, "post_id": 55690800, "comment_id": 98064927, "body": "Corrected, + added file contents"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 11363621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abab8e08f2681a6a2b58f51668be0164?s=128&d=identicon&r=PG&f=1", "display_name": "gmezos", "link": "https://stackoverflow.com/users/11363621/gmezos"}, "edited": false, "score": 0, "creation_date": 1555337558, "post_id": 55691047, "comment_id": 98065075, "body": "That was my workaround too. The other is to slurp the file into an array with @lines = &lt;$fh&gt;. Thanks."}], "tags": [], "owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "is_accepted": false, "score": 4, "last_activity_date": 1555337585, "last_edit_date": 1555337585, "creation_date": 1555337331, "answer_id": 55691047, "question_id": 55690800, "link": "https://stackoverflow.com/questions/55690800/array-elements-gets-deleted-when-looping-files/55691047#55691047", "title": "array elements gets deleted when looping files", "body": "<p>You're using <code>$_</code> in two different ways inside of the loop (as the current filename and as the current line) and they're clobbering each other. Don't do this. Name your variables, e.g.:</p>\n\n<pre><code>for my $file (@files) {\n    ...\n    while(my $line = &lt;$fh&gt;) {\n        ...\n    }\n}\n</code></pre>\n\n<p>You can imagine that your current code does this after reading each file:</p>\n\n<pre><code>for (@files) {\n   undef $_;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 11363621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abab8e08f2681a6a2b58f51668be0164?s=128&d=identicon&r=PG&f=1", "display_name": "gmezos", "link": "https://stackoverflow.com/users/11363621/gmezos"}, "edited": false, "score": 0, "creation_date": 1555338302, "post_id": 55691152, "comment_id": 98065516, "body": "I also found that solution here: <a href=\"https://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#I%2fO-Operators</a> Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1555337681, "creation_date": 1555337681, "answer_id": 55691152, "question_id": 55690800, "link": "https://stackoverflow.com/questions/55690800/array-elements-gets-deleted-when-looping-files/55691152#55691152", "title": "array elements gets deleted when looping files", "body": "<pre><code>while (&lt;$fh&gt;)\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>while ($_ = &lt;$fh&gt;)\n</code></pre>\n\n<p>so you are clobbering <code>$_</code> which is aliased to an element of <code>@files</code>. You need to protect <code>$_</code> as follows:</p>\n\n<pre><code>while (local $_ = &lt;$fh&gt;)\n</code></pre>\n\n<p>Better yet, use a different variable name.</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;)\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11363621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abab8e08f2681a6a2b58f51668be0164?s=128&d=identicon&r=PG&f=1", "display_name": "gmezos", "link": "https://stackoverflow.com/users/11363621/gmezos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55691152, "answer_count": 2, "score": 5, "last_activity_date": 1555337681, "creation_date": 1555336606, "last_edit_date": 1555337208, "question_id": 55690800, "link": "https://stackoverflow.com/questions/55690800/array-elements-gets-deleted-when-looping-files", "title": "array elements gets deleted when looping files", "body": "<p>I have a problem with looping through file names, my input array elements gets deleted.</p>\n\n<p>CODE:</p>\n\n<pre><code>use Data::Dumper;\nuse warnings;\nuse strict;\n\n\nmy @files = (\"file1\", \"file2\", \"file3\");\n\nprint Dumper(\\@files);\n\nfor (@files) {\n        my $filename = $_ . '.txt';\n        open(my $fh, '&lt;:encoding(UTF-8)', $filename)\n          or die \"Could not open file '$filename' $!\";\n        while(&lt;$fh&gt;) {\n                print \"$filename read line \\n\";\n        }\n}\nprint Dumper(\\@files);\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>$VAR1 = [\n          'file1',\n          'file2',\n          'file3'\n        ];\nfile1.txt read line\nfile2.txt read line\nfile3.txt read line\n$VAR1 = [\n          undef,\n          undef,\n          undef\n        ];\n</code></pre>\n\n<p>FILE CONTENTS:</p>\n\n<pre><code> cat file1.txt\nasdfsdfs\n cat file2.txt\niasdfasdsf\n cat file3.txt\nsadflkjasdlfj\n</code></pre>\n\n<p>Why does the array contents get deleted?\n(I have 2 different workarounds for the problem, but I would like to understand what's the problem with this code.)</p>\n"}, {"tags": ["regex", "perl", "regex-group"], "comments": [{"owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 0, "creation_date": 1555270279, "post_id": 55679233, "comment_id": 98043099, "body": "On a little further testing it appears that a ? character appearing anywhere inside a case block, even in a # comment, causes compilation to fail. Ie. this script too:  #!/usr/local/bin/perl  use Switch;  # Edited for demo switch($format) {     case /^(?:april|snow)$/i     {       # ? causes compilation to fail.       $x = 1;     }      # Format B     case /^(?:umberto|petro)$/i     {         # This comment isn&#39;t a problem.         $y = 1;     } }"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1555270965, "post_id": 55679233, "comment_id": 98043294, "body": "<a href=\"http://p3rl.org/Switch\" rel=\"nofollow noreferrer\">Switch</a> uses a source filter, which is not recommended for any serious work. Don&#39;t use it."}, {"owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1555272126, "post_id": 55679233, "comment_id": 98043640, "body": "It fails with given/when instead of switch/case the same way."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1555272800, "post_id": 55679233, "comment_id": 98043814, "body": "<code>when</code> requires the regex in parentheses when it&#39;s not used as a statement modifier."}, {"owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1555273142, "post_id": 55679233, "comment_id": 98043890, "body": "How do I parenthesize the regex in the <code>when</code> block? I tried <code>when (&#47;^(?:april|snow)$&#47;i)</code> but that failed with a syntax error."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1555273268, "post_id": 55679233, "comment_id": 98043925, "body": "Did you <code>use feature &#39;switch&#39;</code> or <code>use v5.10</code>+ ? You need one of those to use <code>given</code> which was introduced in Perl v5.10."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1555273396, "post_id": 55679233, "comment_id": 98043957, "body": "With <code>when (&#47;...&#47;)</code> it works for me."}, {"owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 0, "creation_date": 1555273534, "post_id": 55679233, "comment_id": 98043995, "body": "I replaced <code>use Switch;</code> with <code>use feature &#39;switch&#39;;</code> but compilation failed with <code>given is experimental</code> and <code>when is experimental</code>, as it did with <code>use feature &#39;:5.10&#39;;</code> and with <code>use v5.10;</code> instead."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1555273672, "post_id": 55679233, "comment_id": 98044023, "body": "<code>given is experimental</code>/<code>when is experimental</code> are just warnings, not errors. If you&#39;d want to silence them, <code>no warnings &#39;experimental::smartmatch&#39;</code> (but really, consider my answer before using <code>switch</code> or <code>given</code>)."}, {"owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 0, "creation_date": 1555274049, "post_id": 55679233, "comment_id": 98044106, "body": "I rewrote the <code>switch&#47;case</code> to use <code>for&#47;if&#47;elsif&#47;else</code> as per Dada&#39;s answer below. It&#39;s astounding that in its 4th decade of development Perl still doesn&#39;t implement a straightforward switch/case statement block. The design is too ambitious at the expense of basic functionality."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1555274686, "post_id": 55679233, "comment_id": 98044269, "body": "I completely agree with your last statement @Matthew. I guess <code>given&#47;when</code> was an attempt to remediate to that, but unfortunately ended up failing because of smartmatch, leaving us without a simple builtin <code>switch&#47;case</code>.."}], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 0, "creation_date": 1555274159, "post_id": 55679631, "comment_id": 98044136, "body": "A <code>for&#47;if&#47;elsif&#47;else</code> block worked. It&#39;s not too weird. Though <code>for($format)</code> simply populating <code>$_</code> seems weird, no looping. Wouldn&#39;t just <code>$_ = $format</code> (or otherwise assigning $_, perhaps implicitly with some other function) before the <code>if&#47;elsif&#47;else</code> blocks work the same?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 0, "creation_date": 1555274546, "post_id": 55679631, "comment_id": 98044235, "body": "<code>for</code> does a bit more, as within the for, <code>$_</code> is an alias for <code>$format</code>:  <code>perl -E &#39;$x=5;for($x){$_=2};say $x&#39;</code> prints <code>2</code> whereas <code>perl -E &#39;$x=5;{$_=$x;$_=2};say $x&#39;</code> prints <code>2</code>. In that case though, it doesn&#39;t change anything. I tend to dislike statements like <code>$_ = $format</code>, but I&#39;m not really sure why."}, {"owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 1, "creation_date": 1555274784, "post_id": 55679631, "comment_id": 98044293, "body": "Thank you for all of the clarity. FWIW I&#39;d bet that if all the programmer-years spent complaining were instead spent implementing a more basic <code>switch&#47;case</code> then we&#39;d have one :)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 0, "creation_date": 1555349120, "post_id": 55679631, "comment_id": 98071368, "body": "@Matthew See <a href=\"https://metacpan.org/pod/Switch::Plain\" rel=\"nofollow noreferrer\">Switch::Plain</a> for one way a more basic switch/case might look."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 0, "creation_date": 1555349206, "post_id": 55679631, "comment_id": 98071409, "body": "@Matthew I agree the situation is unfortunate, but the reality is that everyone has different ideas for what &quot;basic&quot; means in a language without strict typing, and what functionality they want, and that&#39;s how we got into the smartmatch mess to begin with."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": true, "score": 4, "last_activity_date": 1555273485, "last_edit_date": 1555273485, "creation_date": 1555272883, "answer_id": 55679631, "question_id": 55679233, "link": "https://stackoverflow.com/questions/55679233/perl-switch-case-fails-on-literal-regex-string-containing-non-capturing-group/55679631#55679631", "title": "Perl switch/case Fails on Literal Regex String Containing Non-Capturing Group &#39;?&#39;", "body": "<p>Don't use <code>Switch</code>. As mentionned by @choroba in the comments, <code>Switch</code> uses a source filter, which leads to mysterious and hard to debug errors, as you constated.</p>\n\n<p>The module's documentation itself says:</p>\n\n<blockquote>\n  <p>In general, use given/when instead. It were introduced in perl 5.10.0. Perl 5.10.0 was released in 2007.</p>\n</blockquote>\n\n<p>However, <code>given/when</code> is not necessarily a good option as it is experimental and likely to change in the future (it seems that this feature was <a href=\"https://www.effectiveperlprogramming.com/2017/12/beware-of-the-removal-of-when-in-perl-v5-28/\" rel=\"nofollow noreferrer\">almost removed</a> from Perl v5.28; so you definitely don't want to start using it now if you can avoid it). A good alternative is to use <code>for</code>:</p>\n\n<pre><code>for ($format) {\n    if (/^(?:april|snow)$/i) {\n       ...\n    } \n    elsif (/^(?:umberto|petro)$/i) {\n       ...\n    }\n}\n</code></pre>\n\n<p>It might look weird a first, but once you get used to it, it's actually reasonable in my opinion. Or, of course, you can use none of this options and just do:</p>\n\n<pre><code>sub pattern_from_format {\n    my $format = shift;\n\n    if ($format =~ /^(?:april|snow)$/i) {\n       return qr/^\\s*(\\S+)\\s+(?:[0-9|\\)| ]+)+\\s+\\D?(\\S+)\\s+\\$/;\n    } \n    elsif ($format =~ /^(?:umberto|petro)$/i) {\n        return qr/^(\\S+)\\s+.*Think 1\\s+(\\S+)\\s+/;\n    }\n    # Some error handling here maybe\n }\n</code></pre>\n\n<hr>\n\n<p>If, for some reason, you still want to use <code>Switch</code>: use <code>m/.../</code> instead of <code>/.../</code>.</p>\n\n<p>I have no idea why this bug is happening, however, the <a href=\"https://metacpan.org/pod/Switch#LIMITATIONS\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n\n<blockquote>\n  <p>Also, the presence of regexes specified with raw ?...? delimiters may cause mysterious errors. The workaround is to use m?...? instead.</p>\n</blockquote>\n\n<p>Which I misread at first, and therefore tried to use <code>m/../</code> instead of <code>/../</code>, which fixed the issue.</p>\n"}, {"comments": [{"owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "edited": false, "score": 0, "creation_date": 1555428532, "post_id": 55684616, "comment_id": 98104140, "body": "Well, actually for each format the code must do more than just assign a regex to <code>$pat</code> , but I redacted that for posting this Question. I could take your suggestion and set <code>%switch</code> values to the <code>sub</code>s to call against a <code>$format</code> match, the Command Pattern."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 1, "last_activity_date": 1555314511, "creation_date": 1555314511, "answer_id": 55684616, "question_id": 55679233, "link": "https://stackoverflow.com/questions/55679233/perl-switch-case-fails-on-literal-regex-string-containing-non-capturing-group/55684616#55684616", "title": "Perl switch/case Fails on Literal Regex String Containing Non-Capturing Group &#39;?&#39;", "body": "<p>Another option instead of an <code>if</code>/<code>elsif</code> chain would be to loop over a hash which maps your regular expressions to the values which should be assigned to <code>$pat</code>:</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nmy %switch = (\n  '^(?:april|snow)$'    =&gt; '^\\s*(\\S+)\\s+(?:[0-9|\\)| ]+)+\\s+\\D?(\\S+)\\s+\\$',\n  '^(?:umberto|petro)$' =&gt; '^(\\S+)\\s+.*Think 1\\s+(\\S+)\\s+',\n);\n\nfor my $re (keys %switch) {\n  if ($format =~ /$re/i) {\n    $pat = $switch{$re};\n    last;\n  }\n}\n</code></pre>\n\n<p>For a more general case (i.e., if you're doing more than just assigning a string to a scalar) you could use the same general technique, but use coderefs as the values of your hash, thus allowing it to execute an arbitrary <code>sub</code> based on the match.</p>\n\n<p>This approach can cover a pretty wide range of the functionality usually associated with <code>switch</code>/<code>case</code> constructs, but note that, because the conditions are pulled from the keys of a hash, they'll be evaluated in a random order.  If you have data which could match more than one condition, you'll need to take extra precautions to handle that, such as having a parallel array with the conditions in the proper order or using <a href=\"https://metacpan.org/pod/Tie::IxHash\" rel=\"nofollow noreferrer\">Tie::IxHash</a> instead of a regular hash.</p>\n"}], "owner": {"reputation": 628, "user_id": 3097931, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/153b2ca2ad96fc55ed29cc40de2deb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3097931/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 55679631, "answer_count": 2, "score": 4, "last_activity_date": 1555314511, "creation_date": 1555270196, "question_id": 55679233, "link": "https://stackoverflow.com/questions/55679233/perl-switch-case-fails-on-literal-regex-string-containing-non-capturing-group", "title": "Perl switch/case Fails on Literal Regex String Containing Non-Capturing Group &#39;?&#39;", "body": "<p>I have text files containing lines like:</p>\n\n<pre><code>2/17/2018 400000098627 =2,000.0 $2.0994 $4,387.75\n3/7/2018 1)0000006043 2,000.0 $2.0731 $4,332.78\n3/26/2018 4 )0000034242 2,000.0 $2.1729 $4,541.36\n4/17/2018 2)0000008516 2,000.0 $2.219 $4,637.71\n</code></pre>\n\n<p>I am matching them with <code>/^\\s*(\\S+)\\s+(?:[0-9|\\)| ]+)+\\s+([0-9|.|,]+)\\s+\\$/</code> But I also have some files with lines in a completely different format, which I match with a different regex. When I open a file I determine which format and assign <code>$pat = '&lt;regex-string&gt;';</code> in a switch/case block:</p>\n\n<pre><code>$pat = '/^\\s*(\\S+)\\s+(?:[0-9|\\)| ]+)+\\s+([0-9|.|,]+)\\s+\\$/'\n</code></pre>\n\n<p>But the <code>?</code> character that introduces the non-capturing group I use to match repeats after the date and before the first currency amount causes the Perl interpreter to fail to compile the script, reporting on abort:</p>\n\n<pre><code>syntax error at ./report-dates-amounts line 28, near \"}continue \"\n</code></pre>\n\n<p>If I delete the <code>?</code> character, or replace <code>?</code> with <code>\\?</code> escaped character, or first assign <code>$q = '?'</code> then replace <code>?</code> with <code>$q</code> inside a <code>\"</code> string assignment (ie. <code>$pat = \"/^\\s*(\\S+)\\s+($q:[0-9|\\)| ]+)+\\s+([0-9|.|,]+)\\s+\\$/\";</code> ) the script compiles and runs. If I assign the regex string outside the <code>switch/case</code> block that also works OK. Perl v5.26.1 .</p>\n\n<p>My code also doesn't have any <code>}continue</code> in it, which as reported in the compilation failure is probably some kind of transformation of the <code>switch/case</code> code by <code>Switch.pm</code> into something native the compiler chokes on. Is this some kind of bug in Switch.pm? It fails even when I use <code>given/when</code> in exactly the same way.</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse Switch;\n\n# Edited for demo\nswitch($format)\n{\n    # Format A eg:\n    #     2/17/2018 400000098627 =2,000.0 $2.0994 $4,387.75\n    #     3/7/2018 1)0000006043 2,000.0 $2.0731 $4,332.78\n    #     3/26/2018 4 )0000034242 2,000.0 $2.1729 $4,541.36\n    #     4/17/2018 2)0000008516 2,000.0 $2.219 $4,637.71\n    #\n    case /^(?:april|snow)$/i\n    { # This is where the ? character breaks compilation:\n        $pat = '^\\s*(\\S+)\\s+(?:[0-9|\\)| ]+)+\\s+\\D?(\\S+)\\s+\\$';\n\n      # WORKS:\n      # $pat = '^\\s*(\\S+)\\s+(' .$q. ':[0-9|\\)| ]+)+\\s+\\D' .$q. '(\\S+)\\s+\\$';\n    }\n\n    # Format B\n    case /^(?:umberto|petro)$/i\n    {\n        $pat = '^(\\S+)\\s+.*Think 1\\s+(\\S+)\\s+';\n    }\n}\n</code></pre>\n"}, {"tags": ["sqlite", "perl", "dbi"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1555265525, "post_id": 55678423, "comment_id": 98041808, "body": "Why do you copy each column to <code>$tmp</code> instead of directly pushing <code>$row</code>?"}, {"owner": {"reputation": 86, "user_id": 10004827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9adadad2b6c65204b61d8d441192fb?s=128&d=identicon&r=PG&f=1", "display_name": "Loris", "link": "https://stackoverflow.com/users/10004827/loris"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1555267521, "post_id": 55678423, "comment_id": 98042345, "body": "I thought it could help to understand what I wanted to achieve"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555269784, "post_id": 55678423, "comment_id": 98042969, "body": "<code>push @array, $row;</code> isn&#39;t clear enough?"}, {"owner": {"reputation": 86, "user_id": 10004827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9adadad2b6c65204b61d8d441192fb?s=128&d=identicon&r=PG&f=1", "display_name": "Loris", "link": "https://stackoverflow.com/users/10004827/loris"}, "edited": false, "score": 0, "creation_date": 1555270209, "post_id": 55678423, "comment_id": 98043076, "body": "Maybe you are right, but maybe not everyone knows what fetchrow_hashref returns..."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555270557, "post_id": 55678423, "comment_id": 98043169, "body": "<a href=\"https://metacpan.org/pod/DBI#fetchrow_hashref\" rel=\"nofollow noreferrer\">Documentation</a> exists for a reason..."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555270735, "post_id": 55678423, "comment_id": 98043216, "body": "You&#39;re making an unnecessary copy of a hash in likely the slowest possible way. Get rid of that and see if it still runs too slow."}, {"owner": {"reputation": 86, "user_id": 10004827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9adadad2b6c65204b61d8d441192fb?s=128&d=identicon&r=PG&f=1", "display_name": "Loris", "link": "https://stackoverflow.com/users/10004827/loris"}, "edited": false, "score": 0, "creation_date": 1555271461, "post_id": 55678423, "comment_id": 98043450, "body": "That&#39;s not the point...i don&#39;t understand why you are focusing about this. If the query returns 100k rows like that i&#39;ve to recreate 100k items in my array. I&#39;m pretty sure this isn&#39;t the way to do what i wanted."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1555277308, "post_id": 55678423, "comment_id": 98044837, "body": "@Loris, there are a few things going on here, in your code and in the comments. The people here pretty much know what they are talking about. I understand your concern about the &#39;what if&#39; and 100k records. There are ways to avoid what you think is wasteful recreation. But pushing out 100k records in an array of hashreferences is not an issue. If that is what you are worried about, then you should nor loop with a <code>while</code> over a <code>fetch row_hashref</code> \u2013 using yet another loop to build the hashref \u2013 to build the huge list and then loop with a <code>foreach</code> to print the entire list."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1555277908, "post_id": 55678423, "comment_id": 98044982, "body": "Either use after the <code>execute</code> <code>return fetchall_arrayref({})</code> ... that will produce the entire list as nice hashrefs, exactly as you have now, but let smart DBI do all the annoying work for you"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 1, "creation_date": 1555278313, "post_id": 55678423, "comment_id": 98045079, "body": "Or if you are so much concerned about recreation and speed: change the entire structure. do a <code>prepare</code>, <code>execute</code>, <code>bind_columns(\\$user_id, \\$first_name, \\$username, \\$type)</code> and then straight do <code>while ($sth-&gt;fetch) { print &quot;$user_id $username\\n }</code> forget about the entire subroutine that did create the entire list first"}], "answers": [{"comments": [{"owner": {"reputation": 86, "user_id": 10004827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9adadad2b6c65204b61d8d441192fb?s=128&d=identicon&r=PG&f=1", "display_name": "Loris", "link": "https://stackoverflow.com/users/10004827/loris"}, "edited": false, "score": 0, "creation_date": 1555315101, "post_id": 55680482, "comment_id": 98053203, "body": "First thank you for your replies. I had already saw this way, but as i had already said i was searching for something like [{},{}, ...] if possible. Anyway, from the messages you wrote before, i understand this one is the best option. Thank you for your time. I take this as &quot;accepted answer&quot;."}], "tags": [], "owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "is_accepted": true, "score": 2, "last_activity_date": 1555279919, "creation_date": 1555279919, "answer_id": 55680482, "question_id": 55678423, "link": "https://stackoverflow.com/questions/55678423/perl-make-a-select-query-and-return-array-of-objects/55680482#55680482", "title": "Perl make a SELECT query and return array of objects", "body": "<pre class=\"lang-perl prettyprint-override\"><code>my ($user_id, $first_name, $username, $type);\n\nmy $sql = q{\nSELECT user_id, first_name, username, type\n  FROM users\n WHERE user_id IN (1,2)\n};\n\nmy $sth = $db-&gt;prepare($sql);\n$sth-&gt;execute or die $DBI::errstr;\n$sth-&gt;bind_columns(\\$user_id, \\$first_name, \\$username, \\$type);\n\nwhile ($sth-&gt;fetch) {\n    print \"$user_id, $username\\n\";\n}\n</code></pre>\n\n<p>read the documentation <a href=\"https://metacpan.org/pod/DBI#bind_columns\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBI#bind_columns</a></p>\n"}], "owner": {"reputation": 86, "user_id": 10004827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9adadad2b6c65204b61d8d441192fb?s=128&d=identicon&r=PG&f=1", "display_name": "Loris", "link": "https://stackoverflow.com/users/10004827/loris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 55680482, "answer_count": 1, "score": 0, "last_activity_date": 1555279919, "creation_date": 1555265119, "question_id": 55678423, "link": "https://stackoverflow.com/questions/55678423/perl-make-a-select-query-and-return-array-of-objects", "title": "Perl make a SELECT query and return array of objects", "body": "<p>I want to make a query to a sqlite database and return an array of objects.</p>\n\n<p>I'm creating a telegram bot and i have to store the date of last message per user_id, because telegram API returns messages i've already read. So i've created a sqlite db with two tables: users and messages; users contains all the user_id and username; messages contains the last message_id i've read.</p>\n\n<p>I've done this function, it works but it isn't performing very well because it has to recreate the entire array of objects (fetchrow_hashref).</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub sqlLiteSelect {\n    my ($db,$table,$columnsRef,$where,$others) = @_;\n    my $columns = join(', ', @{ $columnsRef });\n    $others ||= '';\n    my $query = \"select ${columns} from ${table} ${where}${others}\";\n    my $obj = $db-&gt;prepare($query);\n    my $ret = $obj-&gt;execute() or die $DBI::errstr;\n    my @array = ();\n    while(my $row = $obj-&gt;fetchrow_hashref) {\n        my $tmp = {};\n        foreach my $column (@{ $columnsRef }) {\n            $tmp-&gt;{$column} = $row-&gt;{$column};\n        }\n        push @array, $tmp;\n    }\n    return @array;\n}\n\nmy @columns  = ('user_id','first_name','username','type');\nmy $where = ' where user_id in (1,2)';\nmy @result = sqlLiteSelect($db,'users',\\@columns,$where,'');\nforeach my $row (@result) {\n    print \"user_id=$row-&gt;{user_id}, username=$row-&gt;{username}\\n\";\n}\n</code></pre>\n\n<p>I expect my select to return an array of object without recreate it everytime.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1555256795, "post_id": 55677099, "comment_id": 98039173, "body": "Could you please properly format your post? (see <a href=\"https://stackoverflow.com/editing-help\">Markdown Editing Help</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 6655369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566bc12343e7a7b22649a7d70ce19e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Reinaldo Gomes", "link": "https://stackoverflow.com/users/6655369/reinaldo-gomes"}, "is_accepted": true, "score": 0, "last_activity_date": 1555266406, "creation_date": 1555266406, "answer_id": 55678604, "question_id": 55677099, "link": "https://stackoverflow.com/questions/55677099/replace-multiple-occurance-of-the-word-in-the-line-of-the-file-using-perl/55678604#55678604", "title": "Replace multiple occurance of the word in the line of the file using perl", "body": "<p>Your question seems a bit confusing. The requirements are not very clear, despite the fact that you provided \"actual string\" and \"expected result\".</p>\n\n<p>This code should provide something very close to what you want:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen FILE, \"&lt;\", \"test.html\" or die $!;\n\nwhile (my $fileline = &lt;FILE&gt;) {\n    while ($fileline =~ m/test_example_start(.*?)text_example_end(.*?)((?=test_example_start)|($))/gi) {\n        print \"first_part$1middle_part$1last_part$2\";\n    }\n    print \"\\n\";\n}\n\nclose FILE;\n</code></pre>\n\n<p>Assuming that the contents of the file <code>test.html</code> are the following:</p>\n\n<blockquote>\n  <p>test_example_start this is lesson-1 text_example_end where everyone attended the class test_example_start this is lesson-2 text_example_end where two members attended the class test_example_start this is lesson-3 text_example_end where five members attended the class</p>\n</blockquote>\n\n<p>then, the above script's output will be:</p>\n\n<blockquote>\n  <p>first_part this is lesson-1 middle_part this is lesson-1 last_part where everyone attended the class first_part this is lesson-2 middle_part this is lesson-2 last_partwhere two members attended the class first_part this is lesson-3 middle_part this is lesson-3 last_part where five members attended the class</p>\n</blockquote>\n\n<p>I'm not sure if this is what you want, because I don't know what exactly you want to be inserted in the newly created <code>middle_part</code></p>\n\n<p>Aside from a correction in your regex, and the code cleanup, the key point here is that, if you want all of a line's ocurrences to be replaced, then you should put the line test inside a <code>while</code> block, not an <code>if</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 10652681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6b225723f842d30d6a23769cc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "Virender", "link": "https://stackoverflow.com/users/10652681/virender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 55678604, "answer_count": 1, "score": -3, "last_activity_date": 1555266406, "creation_date": 1555256513, "last_edit_date": 1555257294, "question_id": 55677099, "link": "https://stackoverflow.com/questions/55677099/replace-multiple-occurance-of-the-word-in-the-line-of-the-file-using-perl", "title": "Replace multiple occurance of the word in the line of the file using perl", "body": "<p>Need to replace multiple occurrence of the words in the lines of the text file</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nuse warnings;\n\nuse Tie::File;\n\nmy $string2 = 'first_part';\n\nmy $string3 = 'middle_part';\n\nmy $string4 = 'last_part';\n\nmy @contents=();\n\ntie @contents, 'Tie::File','test.html' or die \"Not able to Tie test.html\\n\";\n\nmy $count=1;\n\nforeach (@contents)\n\n{\n\nmy $string = $_;\n\nmy $quoted_substring = quotemeta($string);\n\nmy $before = 'test_example_start';\n\nmy $after  = 'text_example_end';\n\nif ($string =~ /\\Q$before\\E(.*?)\\Q$after\\E/) {\n\nmy $finalstr = \"$string2$1$string3$1$string4\"; \n\ns/$quoted_substring/$finalstr/g;\n\n\n print $finalstr;  \n\n} \n        $count++;\n\n    my $finalstr ='';\n\n}\n\nuntie @contents;\n</code></pre>\n\n<p>Actual string:</p>\n\n<pre><code>test_example_start this is lesson-1 text_example_end where everyone attended the class test_example_start this is lesson-2 text_example_end where two members attended the class test_example_start this is lesson-3 text_example_end where five members attended the class\n</code></pre>\n\n<hr>\n\n<p>expected result:</p>\n\n<pre><code>first_part this is lesson-1 middle_part this is lesson-1 last_part where everyone attended the class first_part this is lesson-2 middle_part this is lesson-1 last_part where two members attended the class first_part this is lesson-1 middle_part this is lesson-3 last_part where five members attended the class\n</code></pre>\n\n<hr>\n\n<p>current result:\nwhole paragraph is replaced with only one line. as below</p>\n\n<pre><code>first_part this is lesson-1 middle_part this is lesson-1 last_part\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555227730, "post_id": 55672938, "comment_id": 98031666, "body": "With a file association (which I believe the SP installer creates for you), all you need to do <code>itunes_backup2hashcat.pl</code> or <code>c:\\path\\to\\itunes_backup2hashcat.pl</code> if it&#39;s not in the current dir."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555227767, "post_id": 55672938, "comment_id": 98031672, "body": "Without a file association, you can use <code>perl itunes_backup2hashcat.pl</code> or <code>perl c:\\path\\to\\itunes_backup2hashcat.pl</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555227828, "post_id": 55672938, "comment_id": 98031681, "body": "Of course, the script probably needs arguments. You&#39;ll need to provide them, whatever they are."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555380036, "creation_date": 1555380036, "answer_id": 55699534, "question_id": 55672938, "link": "https://stackoverflow.com/questions/55672938/how-to-run-pl-on-windows/55699534#55699534", "title": "How to run pl on windows", "body": "<p>get it by installing msys2; <a href=\"https://sourceforge.net/projects/msys2/files/latest/download\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/msys2/files/latest/download</a></p>\n\n<p>about ~ 191 Mb then </p>\n\n<pre><code>pacman -S perl\n</code></pre>\n\n<p>~51 Mb and get CPAN from there ~ 273 Mb</p>\n"}], "owner": {"reputation": 1, "user_id": 11358237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cedd52594f03ae683506927b05823b7?s=128&d=identicon&r=PG&f=1", "display_name": "theedon323", "link": "https://stackoverflow.com/users/11358237/theedon323"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1555380036, "creation_date": 1555226685, "last_edit_date": 1555228287, "question_id": 55672938, "link": "https://stackoverflow.com/questions/55672938/how-to-run-pl-on-windows", "title": "How to run pl on windows", "body": "<p>I installed Perl (Strawberry) on Windows 10. I am trying to run <code>itunes_backup2hashcat.pl</code> to get the hashes needed for hashcat. </p>\n\n<p>How to run my <code>manifest.plist</code> file to get:</p>\n\n<pre><code>$itunes_backup$*&lt;ver&gt;*&lt;WPKY&gt;*&lt;ITER&gt;*&lt;SALT&gt;*&lt;DPIC&gt;*&lt;DPSL&gt;`\n</code></pre>\n\n<p>I open the program and open command line (<code>C:\\Users\\Gaming\\Documents&gt;</code>). I am stuck here.</p>\n"}, {"tags": ["xml", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555206880, "post_id": 55671263, "comment_id": 98028872, "body": "That&#39;s because <code>SetData</code> is from <code>XML::LibXML::Text</code> and works only on particular types of nodes; See <a href=\"https://stackoverflow.com/a/41051651/4653379\">this post</a> and <a href=\"https://stackoverflow.com/a/40325142/4653379\">this post</a> for example of <code>SetData</code> usage."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555207091, "post_id": 55671325, "comment_id": 98028890, "body": "Or you can use <code>SetData</code> on <code>Text</code>-type nodes. See <a href=\"https://stackoverflow.com/a/41051651/4653379\">this post</a> and <a href=\"https://stackoverflow.com/a/40325142/4653379\">this post</a>"}, {"owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555207682, "post_id": 55671325, "comment_id": 98028965, "body": "@zdim thank you for the links. I will check them out"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555209843, "post_id": 55671325, "comment_id": 98029225, "body": "Re &quot;<i>Trick was setValue</i>&quot;, No, the actual fix to the error in the OP was using <code>my ($last_mod_date)</code> instead of <code>my $last_mod_date</code> to call <code>find</code>/<code>findnodes</code> in list context. In list context, these returned the individial nodes. In scalar context, they return a ::NodeList object instead. Using <code>setValue</code> (a method of ::Attr objects) instead of <code>setData</code> (which isn&#39;t) fixes a second, different problem."}], "tags": [], "owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "is_accepted": true, "score": 3, "last_activity_date": 1555206462, "creation_date": 1555206462, "answer_id": 55671325, "question_id": 55671263, "link": "https://stackoverflow.com/questions/55671263/cant-locate-object-method-setdata-save-value-in-xml-file/55671325#55671325", "title": "Can&#39;t locate object method setData - save value in XML file", "body": "<p>For anyone who run's into this in future this is how I got it working. Trick was setValue</p>\n\n<pre><code>foreach my $xmlNode ($dom-&gt;findnodes('//Dataset')) \n{\n    my ($last_mod_date) = $xmlNode-&gt;findnodes('./@last_mod_date');\n\n    print \"last_mod_date: $last_mod_date ... \\n\";\n\n    #change dates\n    $last_mod_date-&gt;setValue('2019-04-11');\n\n}\n\n\n    #save xml file at the very end\n    $dom-&gt;toFile('test100.xml');\n</code></pre>\n"}], "owner": {"reputation": 25477, "user_id": 1058419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/b5acg.jpg?s=128&g=1", "display_name": "Sam B", "link": "https://stackoverflow.com/users/1058419/sam-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 55671325, "answer_count": 1, "score": 2, "last_activity_date": 1555357539, "creation_date": 1555205491, "last_edit_date": 1555357539, "question_id": 55671263, "link": "https://stackoverflow.com/questions/55671263/cant-locate-object-method-setdata-save-value-in-xml-file", "title": "Can&#39;t locate object method setData - save value in XML file", "body": "<p>I have simple XML like this.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\" ?&gt;\n&lt;TCXML format=\"low_level\" authKey=\"12345\"&gt;\n\n  &lt;Dataset acl_bits=\"0\" creation_date=\"2019-04-03T13:42:47Z\" dataset_type=\"#id6\" island_id=\"4\" elemId=\"id2478\" last_mod_date=\"2019-04-03T13:49:31Z\" /&gt;\n  &lt;Dataset acl_bits=\"0\" creation_date=\"2019-04-03T13:42:47Z\" dataset_type=\"#id61\" island_id=\"41\" elemId=\"id2479\" format_used=\"ASCII\" last_mod_date=\"2019-04-03T13:49:31Z\" /&gt;\n\n&lt;/TCXML&gt;\n</code></pre>\n\n<p>I am using Perl to change the last_mod_date and resave the xml file. </p>\n\n<p>When I try this Perl code I get the following error.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dump qw(dump);\nuse XML::LibXML;\nuse XML::LibXML::NodeList;\nuse XML::Simple;\nuse Data::Dumper;\n\nprint \"Perl Starting ... \\n\\n\"; \n\nopen my $xmlfilename, '&lt;', 'test100.xml' or die \"No input Filename Found ... \\n\";\n\n\nmy $dom = XML::LibXML-&gt;load_xml(IO =&gt; $xmlfilename);\n\nprint \"Looping Dataset ... \\n\\n\"; \nforeach my $xmlNode ($dom-&gt;findnodes('//Dataset')) \n{\n    my $last_mod_date = $xmlNode-&gt;find('./@last_mod_date');\n\n    print \"last_mod_date: $last_mod_date ... \\n\";\n\n    #change dates\n    $last_mod_date-&gt;setData(\"2019-04-11\");\n\n    #save xml file - can this be done at the very end?\n    $dom-&gt;toFile('test100.xml');\n}\n\nprint \"\\nPerl End ... \\n\\n\"; \n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Perl Starting ...\n\nLooping Dataset ...\n\nlast_mod_date: 2019-04-03T13:49:31Z ...\nCan't locate object method \"setData\" via package \"XML::LibXML::NodeList\" at test100.pl line 26.\n</code></pre>\n\n<p>I have searched Stack Overflow and Google. I carefully read <a href=\"https://stackoverflow.com/questions/45858850/change-few-characters-only-in-a-node-value-in-xml-using-perl-script\">this post</a> but I am still stuck. What am I doing wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1555195221, "post_id": 55670465, "comment_id": 98027256, "body": "Are the modules installed into the path mentioned in @INC?"}, {"owner": {"reputation": 3, "user_id": 11357290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f36462cce95d93712b7a14a3e08b122?s=128&d=identicon&r=PG&f=1", "display_name": "caisman", "link": "https://stackoverflow.com/users/11357290/caisman"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1555196208, "post_id": 55670465, "comment_id": 98027421, "body": "Like this Date::Locale is in the paths of @INC, but I receive messages that the dependencies are not."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555198010, "post_id": 55670465, "comment_id": 98027693, "body": "Please provide the output of the <code>perl -le&#39;print $^X; print for @INC; print &quot;$_: $ENV{$_}&quot; for sort grep &#47;^PERL&#47;, keys %ENV;&#39;; type cpan; head -n 1 &quot;$( which cpan )&quot;; echo &#39;o conf&#39; | cpan 2&gt;&amp;1 | perl -ne&#39;print if &#47;^\\s*(make|mbuild)&#47;&#39;; perl -MURI::Encode -e1; cpan URI::Encode; perl -MURI::Encode -e1</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555198426, "post_id": 55670465, "comment_id": 98027773, "body": "Use <code>@ikegami</code> in a comment when you do. (If you replace any words in the output for privacy, make sure each word you replace is replaced with a different word, and make sure that each word you replace is always replaced with the same word e.g. all aaa =&gt; xxx, all bbb =&gt; yyy, etc)"}, {"owner": {"reputation": 3, "user_id": 11357290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f36462cce95d93712b7a14a3e08b122?s=128&d=identicon&r=PG&f=1", "display_name": "caisman", "link": "https://stackoverflow.com/users/11357290/caisman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555388013, "post_id": 55670465, "comment_id": 98082425, "body": "@ikegami, I&#39;m editing the main question with the output."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1555348924, "post_id": 55678856, "comment_id": 98071274, "body": "I&#39;d also add that using a local::lib in root&#39;s homedir is not normal, and you can resolve this by either not using <code>sudo cpan</code> (and thus using a local::lib in your user&#39;s homedir), or by removing the <code>perl-homedir</code> yum package."}, {"owner": {"reputation": 3, "user_id": 11357290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f36462cce95d93712b7a14a3e08b122?s=128&d=identicon&r=PG&f=1", "display_name": "caisman", "link": "https://stackoverflow.com/users/11357290/caisman"}, "edited": false, "score": 0, "creation_date": 1555387672, "post_id": 55678856, "comment_id": 98082338, "body": "Thanks, @Reinaldo Gomes. That was very useful. I&#39;m still running into some issues with the dependencies reporting outdated versions, and whenever I make a correction I found another problem. I was more looking for a definitive method of installing Perl modules on CentOS7 without having to troubleshoot from the beginning."}, {"owner": {"reputation": 3, "user_id": 11357290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f36462cce95d93712b7a14a3e08b122?s=128&d=identicon&r=PG&f=1", "display_name": "caisman", "link": "https://stackoverflow.com/users/11357290/caisman"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1555387743, "post_id": 55678856, "comment_id": 98082360, "body": "Thanks @Grinnz . I will try your recommendations and see if I have improvements."}, {"owner": {"reputation": 83, "user_id": 6655369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566bc12343e7a7b22649a7d70ce19e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Reinaldo Gomes", "link": "https://stackoverflow.com/users/6655369/reinaldo-gomes"}, "edited": false, "score": 0, "creation_date": 1555533056, "post_id": 55678856, "comment_id": 98149296, "body": "The &quot;safest&quot; way of installing perl&#39;s modules on CentOS is by using YUM. The downside is that you are subject to module&#39;s outdated versions. You could check &quot;software collections&quot; repo to try and circumvent that restriction, though."}], "tags": [], "owner": {"reputation": 83, "user_id": 6655369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566bc12343e7a7b22649a7d70ce19e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Reinaldo Gomes", "link": "https://stackoverflow.com/users/6655369/reinaldo-gomes"}, "is_accepted": true, "score": 0, "last_activity_date": 1555267891, "creation_date": 1555267891, "answer_id": 55678856, "question_id": 55670465, "link": "https://stackoverflow.com/questions/55670465/issues-to-install-perl-modules-on-centos-7/55678856#55678856", "title": "Issues to install Perl Modules on CentOS 7", "body": "<p>When installing modules through CPAN on Centos7, the modules' path is usually set to <code>use lib '/root/perl5/lib/perl5'</code> by CPAN's autoconfigure.</p>\n\n<p>Look for one of the modules you've installed via CPAN (<code>find / -name module_name</code>) and look at its path. If it's outside of the default dir, you can add this path in your script.</p>\n"}], "owner": {"reputation": 3, "user_id": 11357290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f36462cce95d93712b7a14a3e08b122?s=128&d=identicon&r=PG&f=1", "display_name": "caisman", "link": "https://stackoverflow.com/users/11357290/caisman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 55678856, "answer_count": 1, "score": -1, "last_activity_date": 1555388302, "creation_date": 1555195132, "last_edit_date": 1555388302, "question_id": 55670465, "link": "https://stackoverflow.com/questions/55670465/issues-to-install-perl-modules-on-centos-7", "title": "Issues to install Perl Modules on CentOS 7", "body": "<p>I\u2019ve been trying to install some Perl modules on CentOS 7 and facing issues with a bunch of them. I tried with yum, cpan and cpanm (from scratch whenever I tried a different method), and they seem to be built correctly as per installation logs, but when I run my script with \u201cuse Module_Name;\u201d it returns issues with dependencies having outdated versions. One of the modules is Date::Locale. Another one is URI::Encode. Is there a correct way to install Perl modules on CentOS 7, without tweaks or manual intervention?</p>\n\n<p>Output requested by ikegami on comments below:</p>\n\n<pre><code>/usr/bin/perl\n/root/perl5/lib/perl5/5.16.3/x86_64-linux-thread-multi\n/root/perl5/lib/perl5/5.16.3\n/root/perl5/lib/perl5/x86_64-linux-thread-multi\n/root/perl5/lib/perl5\n/usr/local/lib64/perl5\n/usr/local/share/perl5\n/usr/lib64/perl5/vendor_perl\n/usr/share/perl5/vendor_perl\n/usr/lib64/perl5\n/usr/share/perl5\n\nPERL5LIB: /root/perl5/lib/perl5\nPERL_LOCAL_LIB_ROOT: /root/perl5\nPERL_MB_OPT: --install_base \"/root/perl5\"\nPERL_MM_OPT: INSTALL_BASE=/root/perl5\ncpan is /root/perl5/bin/cpan\n#!/usr/bin/perl\n    make               [/usr/bin/make]\n    make_arg           []\n    make_install_arg   []\n    make_install_make_command [/usr/bin/make]\n    makepl_arg         []\n    mbuild_arg         []\n    mbuild_install_arg []\n    mbuild_install_build_command [./Build]\n    mbuildpl_arg       []\nLoading internal logger. Log::Log4perl recommended for better logging\nReading '/root/.cpan/Metadata'\n  Database was generated on Fri, 12 Apr 2019 17:29:03 GMT\nFetching with LWP:\nhttp://CPAN.mirror.rafal.ca/authors/01mailrc.txt.gz\nReading '/root/.cpan/sources/authors/01mailrc.txt.gz'\n............................................................................DONE\nFetching with LWP:\nhttp://CPAN.mirror.rafal.ca/modules/02packages.details.txt.gz\nReading '/root/.cpan/sources/modules/02packages.details.txt.gz'\n  Database was generated on Tue, 16 Apr 2019 03:17:02 GMT\n............................................................................DONE\nFetching with LWP:\nhttp://CPAN.mirror.rafal.ca/modules/03modlist.data.gz\nReading '/root/.cpan/sources/modules/03modlist.data.gz'\nDONE\nWriting /root/.cpan/Metadata\nURI::Encode is up to date (1.1.1).\n</code></pre>\n"}, {"tags": ["r", "regex", "perl", "regex-lookarounds", "regex-greedy"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1555183613, "post_id": 55669066, "comment_id": 98024464, "body": "Maybe <code>\\B(?&lt;![A-Z][a-z])(?=[A-Z][a-z])</code>"}, {"owner": {"reputation": 4740, "user_id": 454773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/abbd9f90565ce9ae4d065d93a81d8c03?s=128&d=identicon&r=PG", "display_name": "psychemedia", "link": "https://stackoverflow.com/users/454773/psychemedia"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1555185425, "post_id": 55669066, "comment_id": 98024894, "body": "Via @graemefowler on twitter:  ` s/^(.+[A-Z][a-zA-Z]+)([A-Z]\\w+ [A-Z]+ \\/.+)/$1 :: $2/;`"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 1, "last_activity_date": 1555185419, "last_edit_date": 1555185419, "creation_date": 1555184612, "answer_id": 55669227, "question_id": 55669066, "link": "https://stackoverflow.com/questions/55669066/how-to-split-strings-that-mix-upper-and-lowercase/55669227#55669227", "title": "How to split strings that mix upper and lowercase?", "body": "<p><a href=\"https://regex101.com/r/ytBofK/2\" rel=\"nofollow noreferrer\">This RegEx</a> might help you to get one target group <kbd>space</kbd>+<kbd>SMITH</kbd>+<kbd>space</kbd>:</p>\n\n<pre><code> \\s[A-Z]+\\s\\/\n</code></pre>\n\n<h3>Output</h3>\n\n<p><a href=\"https://i.stack.imgur.com/SF3KH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SF3KH.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://regex101.com/r/mtdgfh/2\" rel=\"nofollow noreferrer\">This RegEx</a> might help you to get two target groups and you can use a string replace to place an <kbd>space</kbd> before group 1 and a <kbd>space</kbd>+<kbd>::</kbd> prior to group two:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MCm9C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MCm9C.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 4740, "user_id": 454773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/abbd9f90565ce9ae4d065d93a81d8c03?s=128&d=identicon&r=PG", "display_name": "psychemedia", "link": "https://stackoverflow.com/users/454773/psychemedia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559083316, "creation_date": 1555183345, "last_edit_date": 1559083316, "question_id": 55669066, "link": "https://stackoverflow.com/questions/55669066/how-to-split-strings-that-mix-upper-and-lowercase", "title": "How to split strings that mix upper and lowercase?", "body": "<p>I have a set of strings of the form:</p>\n\n<pre><code>Team XYZJohn SMITH / Jane SMITH\nTEAM RacersJim SMITH / Jane SMITH\nJohn McMahon RacingBob SMITH / Jane SMITH\n</code></pre>\n\n<p>and want to split on the joined names to give strings like:</p>\n\n<pre><code>Team XYZ :: John SMITH / Jane SMITH\nTEAM Racers :: Jim SMITH / Jane SMITH\nJohn McMahon Racing :: Bob SMITH / Jane SMITH\n</code></pre>\n\n<p>I'm in R, using Perl, but it's the regex I'm after.</p>\n\n<p>Via <a href=\"https://stackoverflow.com/a/43706490/454773\">https://stackoverflow.com/a/43706490/454773</a>, this works for <code>TEAM RacersJohn SMITH / Jane SMITH</code>:</p>\n\n<pre><code>paste(strsplit('TEAM RacersJohn SMITH / Jane SMITH', \"(?&lt;=[a-z])(?=[A-Z])\", perl = TRUE)[[1]], collapse=' :: ')\n\n</code></pre>\n\n<p>but obviously gives an unwanted split in <code>McMahon</code> and misses the split in <code>Team XYZJohn</code>.</p>\n\n<p>For things like <code>McMahon</code>, I was thinking a heuristic of <em>don't split on <code>[A-Z][a-z]{1,2}[A-Z]</code></em> which would also cope with eg <code>MacDonald</code>.</p>\n\n<p>Test on:</p>\n\n<pre><code>#Team XYZ :: John SMITH / Jane SMITH\n#TEAM Racers :: John SMITH / Jane SMITH\n#John McMahon Racing :: John SMITH / Jane SMITH\nregex=\"(?&lt;![A-Z][a-z])(?=[A-Z][a-z])\"\nprint(paste(strsplit('Team XYZJohn SMITH / Jane SMITH', regex, perl = TRUE)[[1]], collapse=' :: '))\nprint(paste(strsplit('TEAM RacerJim SMITH / Jane SMITH', regex, perl = TRUE)[[1]], collapse=' :: '))\nprint(paste(strsplit('John McMahon RacingBob SMITH / Jane SMITH', regex, perl = TRUE)[[1]], collapse=' :: '))\n\n</code></pre>\n\n<p>Via @graemefowler on Twitter, we have:  <code>s/^(.+[A-Z][a-zA-Z]+)([A-Z]\\w+ [A-Z]+ \\/.+)/$1 :: $2/;</code></p>\n\n<pre><code>print(gsub(\"^(.+[A-Z][a-zA-Z]+)([A-Z]\\\\w+ [A-Z]+ \\\\/.+)\", \"\\\\1 :: \\\\2\", \"TEAM RacersJohn SMITH / Jane SMITH\", perl=TRUE))\nprint(gsub(\"^(.+[A-Z][a-zA-Z]+)([A-Z]\\\\w+ [A-Z]+ \\\\/.+)\", \"\\\\1 :: \\\\2\", \"Team XYZJohn SMITH / Jane SMITH\", perl=TRUE))\nprint(gsub(\"^(.+[A-Z][a-zA-Z]+)([A-Z]\\\\w+ [A-Z]+ \\\\/.+)\", \"\\\\1 :: \\\\2\", \"John McMahon RacingJohn SMITH / Jane SMITH\", perl=TRUE))\n\n\n[1] \"TEAM Racers :: John SMITH / Jane SMITH\"\n[1] \"Team XYZ :: John SMITH / Jane SMITH\"\n[1] \"John McMahon Racing :: John SMITH / Jane SMITH\"\n</code></pre>\n"}, {"tags": ["perl", "data-structures", "hash", "cgi", "perl-hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1555175368, "post_id": 55667929, "comment_id": 98022245, "body": "Try declare it first: <code>my %cob; %cob = ( ... </code>"}, {"owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1555175509, "post_id": 55667929, "comment_id": 98022290, "body": "Thanks. It was so simple."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 3, "creation_date": 1555178528, "post_id": 55667929, "comment_id": 98023112, "body": "Side note: don&#39;t use <code>$a</code> and <code>$b</code> as variable names (because they are <a href=\"https://stackoverflow.com/questions/26127617/what-exactly-are-a-and-b-in-perls-sort-function\">a bit special</a>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1555197531, "post_id": 55667929, "comment_id": 98027630, "body": "An object with accessors for <code>a</code> and <code>b</code> and a method named <code>z</code> sounds far more appropriate."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1555197351, "post_id": 55669598, "comment_id": 98027599, "body": "It&#39;s important to note that your solution creates a memory leak. <code>%cob</code> will never be freed unless you take steps to explicitly do so. This is particularly bad if <code>%cob</code> contains objects with destructors as they may or may not be call during global destruction."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555230176, "post_id": 55669598, "comment_id": 98032127, "body": "@ikegami Thanks for the information. I will look into this and come back when I understand more. I guess one would need to use <code>Scalar::Util::weaken</code> somehow?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1555242366, "post_id": 55669598, "comment_id": 98034986, "body": "I don&#39;t see how. The first reference to the hash is owned by the <code>%cob</code> in the scope that contains the snippet, and the second reference to the hash is owned by the <code>%cob</code> in the sub. Neither of those are Perl references (the type of value), so there&#39;s nothing to weaken."}, {"owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1555571316, "post_id": 55669598, "comment_id": 98158740, "body": "@ikegami; Well I thought that the hash object will get destroyed automatically. thanks for the input. Thats why my machine OS applications showed abnormal behavior."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1555571652, "post_id": 55669598, "comment_id": 98158925, "body": "It normally would, except a circular reference is created just if you had done <code>my %h;  $h{x} = \\%h;</code>, and that prevents it from getting destroyed before the program ends."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1555187360, "creation_date": 1555187360, "answer_id": 55669598, "question_id": 55667929, "link": "https://stackoverflow.com/questions/55667929/can-the-perl-hash-name-at-the-time-of-declaration-be-used-inside-same-hash/55669598#55669598", "title": "Can the Perl hash name (at the time of declaration) be used inside same hash?", "body": "<blockquote>\n<pre><code>my ($a, $b) = ($cob{'a'}, $cob{'b'});\n</code></pre>\n</blockquote>\n\n<p>In order for Perl to <em>compile</em> this statement, <code>%cob</code> must be declared somewhere prior to the statement, but <code>%cob</code> has not yet been declared (as it is part of the statement). The solution is to declare <code>%cob</code> before the statement:</p>\n\n<pre><code>my %cob;   # declare the variable first\n%cob = (\n        'a' =&gt; 0,\n        'b' =&gt; 0,\n        'z' =&gt; sub {\n                    my ($a, $b) = ($cob{'a'}, $cob{'b'});  # now %cob is known to be a hash\n                    return ($a+$b+1);\n                }                                       \n    );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "edited": false, "score": 0, "creation_date": 1555589889, "post_id": 55671052, "comment_id": 98168479, "body": "Thanks for the input. The class really transformed the code. But I was somewhat anxious to use this feature of Perl that the function can be called inside a hash key  value. Actually I liked this so much and kind of biased :). As suggested above. it has memory leaks so your class definition is an approach what one should ad.opt"}, {"owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "reply_to_user": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "edited": false, "score": 0, "creation_date": 1555617209, "post_id": 55671052, "comment_id": 98182272, "body": "@BabarKamran You&#39;re welcome! I&#39;m glad the suggestion helped."}], "tags": [], "owner": {"reputation": 120535, "user_id": 123109, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/157c96de3d125abc1c363ff25c20dfaf?s=128&d=identicon&r=PG", "display_name": "Greg Bacon", "link": "https://stackoverflow.com/users/123109/greg-bacon"}, "is_accepted": false, "score": 4, "last_activity_date": 1555203542, "last_edit_date": 1555203542, "creation_date": 1555202060, "answer_id": 55671052, "question_id": 55667929, "link": "https://stackoverflow.com/questions/55667929/can-the-perl-hash-name-at-the-time-of-declaration-be-used-inside-same-hash/55671052#55671052", "title": "Can the Perl hash name (at the time of declaration) be used inside same hash?", "body": "<p>Consider creating shared <code>$aa</code> and <code>$bb</code> variables inside a <a href=\"https://perldoc.perl.org/perlsub.html#Persistent-variables-with-closures\" rel=\"nofollow noreferrer\">lexical closure</a> to generate new cob hashes.</p>\n\n<pre><code>sub make_cob {\n  my($aa,$bb) = (0, 0);\n  { a =&gt; \\$aa,\n    b =&gt; \\$bb,\n    z =&gt; sub { $aa + $bb + 1 },\n  };\n}\n</code></pre>\n\n<p>The variable names <code>$aa</code> and <code>$bb</code> avoid a warning in the <a href=\"https://perldoc.perl.org/perlvar.html#%24a\" rel=\"nofollow noreferrer\">perlvar documentation on <code>$a</code> and <code>$b</code></a> in case you ever need to perform any sorting in <code>make_cob</code>:</p>\n\n<blockquote>\n  <ul>\n  <li><strong><code>$a</code></strong>  </li>\n  <li><strong><code>$b</code></strong><br>\n  Special package variables when using <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a>. Because of this specialness <code>$a</code> and <code>$b</code> don\u2019t need to be declared (using <a href=\"https://perldoc.perl.org/vars.html\" rel=\"nofollow noreferrer\"><code>use vars</code></a>, or <a href=\"https://perldoc.perl.org/functions/our.html\" rel=\"nofollow noreferrer\"><code>our</code></a>) even when using the <a href=\"https://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\"><code>strict 'vars'</code> pragma</a>. Don\u2019t lexicalize them with <code>my $a</code> or <code>my $b</code> if you want to be able to use them in the <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> comparison block or function.</li>\n  </ul>\n</blockquote>\n\n<p>Using one as a plain hash <code>%cob</code> looks like</p>\n\n<pre><code>my %cob = %{ make_cob() };\n${$cob{a}} = 10;\n${$cob{b}} = 20;\nprint \"z: \", $cob{z}(), \"\\n\";\n</code></pre>\n\n<p>As a hash reference <code>$cob</code>, the code is</p>\n\n<pre><code>my $cob = make_cob;\n${$cob-&gt;{a}} = 30;\n${$cob-&gt;{b}} = 40;\nprint \"z: \", $cob-&gt;{z}(), \"\\n\";\n</code></pre>\n\n<p>You might wrap them all in anonymous subs, as in</p>\n\n<pre><code>sub make_cob {\n  my($aa,$bb) = (0, 0);\n  { a =&gt; sub { if (@_) { $aa = shift } else { $aa } },\n    b =&gt; sub { if (@_) { $bb = shift } else { $bb } },\n    z =&gt; sub { $aa + $bb + 1 },\n  };\n}\n\nmy $cob = make_cob;\n$cob-&gt;{a}(40);\n$cob-&gt;{b}(50);\nprint \"a: \", $cob-&gt;{a}(), \"\\n\",\n      \"b: \", $cob-&gt;{b}(), \"\\n\",\n      \"z: \", $cob-&gt;{z}(), \"\\n\";\n</code></pre>\n\n<p>But if you are going to all that trouble, make your cobs instances of a Cob class.</p>\n\n<pre><code>package Cob;\n\nuse strict;\nuse warnings;\n\nsub new {\n  my($class,$aa,$bb) = @_;\n  $_ = defined $_ ? $_ : 0 for $aa, $bb;\n  bless { a =&gt; $aa, b =&gt; $bb } =&gt; $class;\n}\n\nsub a { $_[0]-&gt;{a} }\nsub b { $_[0]-&gt;{b} }\nsub z { $_[0]-&gt;a + $_[0]-&gt;b + 1 }\n\n1;\n</code></pre>\n\n<p>Exercise this class with</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Cob;\n\nmy $cob = Cob-&gt;new(1,2);\nprint \"a: \", $cob-&gt;a, \"\\n\",\n      \"b: \", $cob-&gt;b, \"\\n\",\n      \"z: \", $cob-&gt;z, \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre>a: 1\nb: 2\nz: 4</pre>\n"}], "owner": {"reputation": 139, "user_id": 1056018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62c1c32446af16d5ff2e56d87e00dba?s=128&d=identicon&r=PG", "display_name": "programmingzeal", "link": "https://stackoverflow.com/users/1056018/programmingzeal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1555203542, "creation_date": 1555175255, "question_id": 55667929, "link": "https://stackoverflow.com/questions/55667929/can-the-perl-hash-name-at-the-time-of-declaration-be-used-inside-same-hash", "title": "Can the Perl hash name (at the time of declaration) be used inside same hash?", "body": "<p>I am declaring a hash and at the time of its declaration I am using it inside for one of its element as input to other element. You may grasp easily by following code which is not compiling as Strict pragma is ON:</p>\n\n<pre><code>my %cob = (\n        'a' =&gt; 0,\n        'b' =&gt; 0,\n        'z' =&gt; sub {\n                    my ($a, $b) = ($cob{'a'}, $cob{'b'});\n                    return ($a+$b+1);\n                }                                       \n    );\n</code></pre>\n\n<p>And its producing compile time error.</p>\n\n<p>So my question is how can I reuse the same hash elements as input to other elements of same hash at the time of declaration? Here element 'a' and 'b' are inputs to 'z' element function.</p>\n\n<p>Logically if the hash has not been declared then it cant be used so so how to use one element as input to other element of same hash at the time of declaration? Hopefully I am clear...</p>\n"}, {"tags": ["perl", "perldoc"], "comments": [{"owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 2, "creation_date": 1555165556, "post_id": 55666500, "comment_id": 98019555, "body": "perldoc needs to load one of the mentioned modules in order to produce formatted output, and none can be found. What OS environment are you using? It sound more like an OS package management question than a Perl question."}, {"owner": {"reputation": 33, "user_id": 6091850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65612b190e05e5a003d4b95681e14d43?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6091850/daniel"}, "reply_to_user": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "edited": false, "score": 0, "creation_date": 1555166410, "post_id": 55666500, "comment_id": 98019792, "body": "Thanks for the reply! I am using ubuntu 14.04. Any suggestion on how this can be resolved?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1555166897, "post_id": 55666500, "comment_id": 98019927, "body": "Your Perl installation is broken. Does Ubuntu have packages called <code>perl</code> and/or <code>perl-doc</code>? I&#39;d try to reinstall those."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 4092051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GFkAN.jpg?s=128&g=1", "display_name": "chipfall", "link": "https://stackoverflow.com/users/4092051/chipfall"}, "is_accepted": false, "score": 0, "last_activity_date": 1600112771, "creation_date": 1600112771, "answer_id": 63890933, "question_id": 55666500, "link": "https://stackoverflow.com/questions/55666500/perldoc-shows-cant-find-any-loadable-formatter-class-in-pod-error/63890933#63890933", "title": "perldoc shows &quot;Can&#39;t find any loadable formatter class in Pod&quot; error?", "body": "<p>perldoc drops privileges to nobody or equivalent when run as root. If the current directory  is not readable as that user, you will get this error, tested on v5.30.3.</p>\n"}], "owner": {"reputation": 33, "user_id": 6091850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65612b190e05e5a003d4b95681e14d43?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6091850/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1600112771, "creation_date": 1555165281, "last_edit_date": 1555165808, "question_id": 55666500, "link": "https://stackoverflow.com/questions/55666500/perldoc-shows-cant-find-any-loadable-formatter-class-in-pod-error", "title": "perldoc shows &quot;Can&#39;t find any loadable formatter class in Pod&quot; error?", "body": "<p>I am running this:</p>\n\n<pre><code>$ perldoc Bio::EnsEMBL::Slice\n\nCan't find any loadable formatter class in Pod::Perldoc::Toman Pod::Perldoc::Toman Pod::Perldoc::ToMan Pod::Perldoc::ToMAN Pod::Simple::man Pod::Simple::man Pod::Simple::Man Pod::Simple::MAN Pod::man Pod::man Pod::Man Pod::MAN Pod::Perldoc::Totext Pod::Perldoc::Totext Pod::Perldoc::ToText Pod::Perldoc::ToTEXT Pod::Simple::text Pod::Simple::text Pod::Simple::Text Pod::Simple::TEXT Pod::text Pod::text Pod::Text Pod::TEXT Pod::Perldoc::ToPod?!\nAborting\n at /usr/bin/perldoc line 10.\n</code></pre>\n\n<p>and get this above error. I have installed the ensembl properly but perldoc is showing error. Can you give your suggestions in resolving this issue? Thanks!</p>\n"}, {"tags": ["c", "macos", "perl"], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "edited": false, "score": 0, "creation_date": 1555166759, "post_id": 55665825, "comment_id": 98019899, "body": "When compiling I get the following error: run.c:9:10: error: use of undeclared identifier &#39;mi&#39;     free(mi);          ^ 1 error generated."}, {"owner": {"reputation": 158, "user_id": 11004853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lyz1P.jpg?s=128&g=1", "display_name": "dzuda11", "link": "https://stackoverflow.com/users/11004853/dzuda11"}, "reply_to_user": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "edited": false, "score": 0, "creation_date": 1555166905, "post_id": 55665825, "comment_id": 98019929, "body": "Ok, just put dir instead mi. I just copy paste code"}, {"owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "edited": false, "score": 0, "creation_date": 1555167482, "post_id": 55665825, "comment_id": 98020094, "body": "It compiles. Thank you. One last question, having never worked with C before. How can I modify the path in result = system(&quot;pwd&quot;) so that I can call an executable which is one level up from the current path and is called myApp. I would really appreciate it."}, {"owner": {"reputation": 158, "user_id": 11004853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lyz1P.jpg?s=128&g=1", "display_name": "dzuda11", "link": "https://stackoverflow.com/users/11004853/dzuda11"}, "reply_to_user": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "edited": false, "score": 0, "creation_date": 1555168235, "post_id": 55665825, "comment_id": 98020284, "body": "Tell me how do you run the app from Terminal? <code>system(&quot;command&quot;)</code> will run command just like in Terminal. So try <code>..&#47;.&#47;myApp</code>"}, {"owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "edited": false, "score": 0, "creation_date": 1555168724, "post_id": 55665825, "comment_id": 98020395, "body": "No, I need to run the C code inside .app as the default executable by double clicking the .app . The C code should then run the proper program which is in a different folder inside the .app structure. My first C code calls correctly MyApp which is in a different directory. I run my C code in Terminal just with ./launcher (being launcher my C code), and it works. However, inside an .app structure this does not work because the .app changes the current directory. I need to force the current directory to the correct one in my C code to call the executable MyApp properly. I hope this clarifies."}], "tags": [], "owner": {"reputation": 158, "user_id": 11004853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lyz1P.jpg?s=128&g=1", "display_name": "dzuda11", "link": "https://stackoverflow.com/users/11004853/dzuda11"}, "is_accepted": true, "score": 1, "last_activity_date": 1555166925, "last_edit_date": 1555166925, "creation_date": 1555161057, "answer_id": 55665825, "question_id": 55664762, "link": "https://stackoverflow.com/questions/55664762/how-to-find-current-directory-in-c-inside-an-application-bundle-macos/55665825#55665825", "title": "How to find current directory in C inside an application bundle [macOS]", "body": "<p>I'm not quite sure what do you want to do but <code>pwd</code> is something that you looking for. In first block of code you will receive full path of the working directory and in second with <code>int result</code> you can know is operation done sucessfully (if result = 0 than is OK)</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char* dir= malloc (50);\n    dir = getenv(\"pwd\");\n    printf(\"Workdir: %s\\n\", dir);\n    free(dir);\n\n    int result;\n    result = system(\"pwd\");\n    printf(\"%d\", result);\n    return 0;\n}\n</code></pre>\n\n<p>then you can edit the full path and create relative.</p>\n"}], "owner": {"reputation": 381, "user_id": 2532496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e909f97d766493ba4541bd917b9cf075?s=128&d=identicon&r=PG", "display_name": "Kelly o&#39;Brian", "link": "https://stackoverflow.com/users/2532496/kelly-obrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 55665825, "answer_count": 1, "score": 0, "last_activity_date": 1555166925, "creation_date": 1555153529, "last_edit_date": 1555155306, "question_id": 55664762, "link": "https://stackoverflow.com/questions/55664762/how-to-find-current-directory-in-c-inside-an-application-bundle-macos", "title": "How to find current directory in C inside an application bundle [macOS]", "body": "<p>We have an application bundle whose main executable has been written in Perl and packaged with pp. Unfortunately, this executable prevents us to codesign the .app. Apparently executables created with pp cannot be codesigned. To allow codesigning we want to move the main executable from its default folder \"MacOS\" to the \"Resources\" folder, as this folder seems to be okay to host the executable for codesigning and create a launcher that will run this executable. We do not know if this will work, but we want to give it a try.</p>\n\n<p>We need to create a launcher to put in the \"MacOS\" folder that will launch our main executable. I have worked out a small C program that launches an executable in another folder. It works fine in Finder, however it fails if in the .app structure. Apparently it has to do with the relative path being different inside a .app. My hope is to add to the following C program a way to get the current directory of the .app and construct the relative path to the executable to be opened. Being the first time I write something in C, I need your help to make this adaptation. </p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n\nint main( void ){\n\nint result ;\nresult=system(\"../Resources/MyApp\");\nprintf(\"%d\", result);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1555111135, "post_id": 55660440, "comment_id": 98009289, "body": "Introduce an extra variable. Check if the currently read week is different form the one in that variable. If it is push empty cells in the array and set the variable to the currently read week."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1555146583, "post_id": 55660440, "comment_id": 98014889, "body": "Please, post actual runnable Perl code. Comments start with <code>#</code> in Perl, not <code>&#47;&#47;</code>. Quotes are missing around <code>area&#47;${week}&#47;test.html</code>. Regarding some mistakes you made: <code>$week != &quot;Week&quot;</code> should use <code>ne</code> instead of <code>!=</code> (this test works for now, but not for the reason you think it does). Finally, you are writing Perl, not C, so you should do <code>while (my $line = &lt;FH&gt;)</code> rather than your <code>!eof(FH)</code> stuff (and use a lexical file handle <code>$FH</code> rather than a global <code>FH</code>)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1555147156, "post_id": 55660440, "comment_id": 98015029, "body": "@FranceMadrid A suggestion, which is important: add <code>use warnings;</code> and <code>use strict</code> at the beginning, and follow messages to fix things until you get your code to work with them. Then never leave them out (I <i>always</i> have them)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555180703, "post_id": 55660440, "comment_id": 98023750, "body": "@FranceMadrid: &quot;<i>This code successfuly ...</i>&quot;  --- how? It doesn&#39;t even run, on multiple accounts."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1555111186, "creation_date": 1555111186, "answer_id": 55660556, "question_id": 55660440, "link": "https://stackoverflow.com/questions/55660440/how-to-read-csv-and-track-where-certain-value-changes/55660556#55660556", "title": "How to read CSV and track where certain value changes", "body": "<p>Just remember the last week encountered in a variable with a wider scope. Use <a href=\"http://p3rl.org/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> to process CSV files.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Text::CSV_XS;\n\nmy $week = 'Week';\nmy $csv = 'Text::CSV_XS'-&gt;new({binary =&gt; 1, auto_diag =&gt; 1});\nopen my $fh, \"&lt;\", shift or die $!;\nwhile (my $row = $csv-&gt;getline($fh)) {\n    print \"\\n\" if $week ne $row-&gt;[1];\n    $week = $row-&gt;[1];\n    $csv-&gt;say(*STDOUT, $row);\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 10317001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68552265c320a1694760abb3811dcbb?s=128&d=identicon&r=PG&f=1", "display_name": "FranceMadrid", "link": "https://stackoverflow.com/users/10317001/francemadrid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1555111186, "creation_date": 1555110166, "question_id": 55660440, "link": "https://stackoverflow.com/questions/55660440/how-to-read-csv-and-track-where-certain-value-changes", "title": "How to read CSV and track where certain value changes", "body": "<p>I have a CSV file:</p>\n\n<pre><code>Name,Week,Planned,Passed\nAST,01,5,8\nKST,01,9,14\nRST,01,76,23\nAST,02,12,45\nKST,02,5,4\nRST,02,13,65\nGST,02,76,12\nLST,03,12,43\nAST,04,54,34\n\n</code></pre>\n\n<p>I am reading from this file and populating an HTML file with Perl, based on the information in the CSV:</p>\n\n<pre><code>while (!eof(FH)) { //while csv file is opened\n\n\nmy $line = &lt;FH&gt;;\n\nchomp $line;\n\nmy($name,$week,$planned,$passed) = split(\",\", $line);\n\n$currentHash{$name}{\"week\"} = $week;\n$currentHash{$name}{\"week\"} = $planned;\n$currentHash{$name}{\"week\"} = $passed;\n\n$datafile = area/${week}/test.html\n\nopen my $fh, \"&gt;\", $datafile;\n\nif ($week != \"Week\") {\n\npush @weekArray, qq( &lt;td aligh=center bgcolor=#FFFFF font size='2'&gt;$name&lt;/td&gt;\\n);\n\npush @weekArray, qq( &lt;td aligh=center bgcolor=#FFFFF font size='2'&gt;$week&lt;/td&gt;\\n);\n\npush @weekArray, qq( &lt;td aligh=center bgcolor=#FFFFF font size='2'&gt;$planned&lt;/td&gt;\\n);\n\npush @weekArray, qq( &lt;td aligh=center bgcolor=#FFFFF font size='2'&gt;$passed&lt;/td&gt;\\n);\n\n\n} //end of if\n\nprint $fh @weekArray;\nclose $fh\n\n} //end of while\n\n</code></pre>\n\n<p>This code successfuly creates the table with the CSV file information. However, it does not create a table that creates a newline character after a new <code>week</code>. </p>\n\n<p>I am having a hard time figuring out how to detect when a new week starts because it is all inside of a loop.</p>\n\n<p>When I read the file, I want to place a newline character every time the week number changes. I also need to do this without hardcoding for a specific week, because the week number is arbitrary.</p>\n\n<p>How I want the table to look like:</p>\n\n<pre><code>Name,Week,Planned,Passed\nAST,01,5,8\nKST,01,9,14\nRST,01,76,23\n\nAST,02,12,45\nKST,02,5,4\nRST,02,13,65\nGST,02,76,12\n\nLST,03,12,43\n\nAST,04,54,34\n\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 3, "creation_date": 1555075814, "post_id": 55652617, "comment_id": 97994084, "body": "A good starting point would be to learn Perl. And then, have a look at <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>. If I misunderstood and you already tried to solve your problem but didn&#39;t manage to, then show us your code and explain what&#39;s not working."}, {"owner": {"reputation": 13, "user_id": 10652681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6b225723f842d30d6a23769cc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "Virender", "link": "https://stackoverflow.com/users/10652681/virender"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1555077563, "post_id": 55652617, "comment_id": 97995326, "body": "here is what i tried:#!/usr/bin/perl use warnings; use strict;  my $string = &#39;pre-wrap&quot;&gt;test-for??maths/camp&#39;; my $quoted_substring = quotemeta($string); my ($quoted_substring1) = split(&#39;/camp*&#39;, $quoted_substring);  print $string, &quot;\\n&quot;; print $quoted_substring1, &quot;\\n&quot;;"}, {"owner": {"reputation": 2476, "user_id": 1092785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3463f1ed04180b8e766f35772096b16?s=128&d=identicon&r=PG", "display_name": "rplantiko", "link": "https://stackoverflow.com/users/1092785/rplantiko"}, "edited": false, "score": 0, "creation_date": 1555079597, "post_id": 55652617, "comment_id": 97996658, "body": "The <code>` is coming because you call </code>quotemeta` on the string which you want to scan. This is not what you want."}, {"owner": {"reputation": 13, "user_id": 10652681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6b225723f842d30d6a23769cc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "Virender", "link": "https://stackoverflow.com/users/10652681/virender"}, "edited": false, "score": 0, "creation_date": 1555079728, "post_id": 55652617, "comment_id": 97996750, "body": "Thanks it is working now"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555084689, "post_id": 55652617, "comment_id": 97999689, "body": "<code>or may be starting with: test</code> what does that mean?  show an example where that would make a difference from just <code>after: pre-wrap&quot;&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10652681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6b225723f842d30d6a23769cc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "Virender", "link": "https://stackoverflow.com/users/10652681/virender"}, "edited": false, "score": 1, "creation_date": 1555087141, "post_id": 55654066, "comment_id": 98000970, "body": "Thanks it works. this is exactly what i was looking for."}], "tags": [], "owner": {"reputation": 2476, "user_id": 1092785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3463f1ed04180b8e766f35772096b16?s=128&d=identicon&r=PG", "display_name": "rplantiko", "link": "https://stackoverflow.com/users/1092785/rplantiko"}, "is_accepted": true, "score": 1, "last_activity_date": 1555079850, "creation_date": 1555079850, "answer_id": 55654066, "question_id": 55652617, "link": "https://stackoverflow.com/questions/55652617/how-to-extract-the-subset-from-a-special-character-string-using-perl/55654066#55654066", "title": "how to extract the subset from a special character string using perl", "body": "<p>The following code extracts the part between <code>$before</code> and <code>$after</code> (which may contain regex metacharacters, they are treated as pure characters inside the <code>\\Q...\\E</code> expressions):</p>\n\n<pre><code>my $string = 'pre-wrap\"&gt;test-for??maths/camp';\n\nmy $before = 'pre-wrap\"&gt;';\nmy $after  = '/camp';\n\nif ($string =~ /\\Q$before\\E(.*?)\\Q$after\\E/) {\n  print $1;  # prints 'test-for??maths'\n} \n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555111585, "creation_date": 1555111585, "answer_id": 55660602, "question_id": 55652617, "link": "https://stackoverflow.com/questions/55652617/how-to-extract-the-subset-from-a-special-character-string-using-perl/55660602#55660602", "title": "how to extract the subset from a special character string using perl", "body": "<p><code>pre-wrap\"&gt;test-for??maths/camp</code> is in 'd',</p>\n\n<pre><code>perl -ne '/((?&lt;=pre-wrap\"&gt;)|(?&lt;=&gt;)(?=test))\\S+(?=\\/camp)/  ; print $&amp;' d\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10652681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6b225723f842d30d6a23769cc542d4?s=128&d=identicon&r=PG&f=1", "display_name": "Virender", "link": "https://stackoverflow.com/users/10652681/virender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 55654066, "answer_count": 2, "score": -1, "last_activity_date": 1555118287, "creation_date": 1555075331, "last_edit_date": 1555118287, "question_id": 55652617, "link": "https://stackoverflow.com/questions/55652617/how-to-extract-the-subset-from-a-special-character-string-using-perl", "title": "how to extract the subset from a special character string using perl", "body": "<p>I need to get the subset of a string starting from a specific start word and end before the specified word. Store in the string variable.</p>\n\n<p>Example: <code>pre-wrap\"&gt;test-for??maths/camp</code></p>\n\n<p>I need to fetch the subset.</p>\n\n<p>Expected output:  <code>test-for??maths</code></p>\n\n<p>After: <code>pre-wrap\"&gt;</code> or may be starting with: <code>test</code></p>\n\n<p>and before: <code>/camp</code></p>\n\n<p>I have no clue how to achieve this in Perl.</p>\n\n<p>Here is the code I tried. The output is not coming as expected:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nmy $string = 'pre-wrap\"&gt;test-for??maths/camp';\nmy $quoted_substring = quotemeta($string);\nmy ($quoted_substring1) = split('/camp*', $quoted_substring);\nmy (undef, $substring2) = split('&gt;\\s*', $quoted_substring1);\n\nprint $string, \"\\n\";\nprint $substring2, \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ perl test.pl\npre-wrap\"&gt;test-for??maths/camp\ntest\\-for\\?\\?maths\\         # but why this \\ is coming\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 961, "user_id": 341930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2819a0020e657078218ed37f96b97b7?s=128&d=identicon&r=PG", "display_name": "TFBW", "link": "https://stackoverflow.com/users/341930/tfbw"}, "is_accepted": false, "score": 1, "last_activity_date": 1555066792, "creation_date": 1555066792, "answer_id": 55650152, "question_id": 55649737, "link": "https://stackoverflow.com/questions/55649737/cannot-get-row-range-in-perl-script/55650152#55650152", "title": "Cannot get row_range in perl script", "body": "<p>What version of Spreadsheet::ParseExcel::Worksheet is it? Those methods used to be named RowRange() ColRange() and Cell() in the past. See <a href=\"https://metacpan.org/changes/distribution/Spreadsheet-ParseExcel\" rel=\"nofollow noreferrer\">https://metacpan.org/changes/distribution/Spreadsheet-ParseExcel</a></p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1555071209, "creation_date": 1555071209, "answer_id": 55651381, "question_id": 55649737, "link": "https://stackoverflow.com/questions/55649737/cannot-get-row-range-in-perl-script/55651381#55651381", "title": "Cannot get row_range in perl script", "body": "<p>To expand slightly on <a href=\"https://stackoverflow.com/a/55650152/7231\">the answer from TFBW</a>...</p>\n\n<p>The <a href=\"https://metacpan.org/changes/distribution/Spreadsheet-ParseExcel\" rel=\"nofollow noreferrer\">Changes</a> file for this module includes the following entry:</p>\n\n<pre><code>0.43 January 7 2009\n\n    + Restructured and rewrote the main documentation. This is the start of\n      a general refactoring. If you would like to keep up to date with it\n      keep an eye on the Spreadsheet::ParseExcel Google Group.\n      http://groups.google.com/group/spreadsheet-parseexcel\n\n    + Added worksheets() Workbook method to iterate over the Worksheet objects.\n\n    + Added unformatted() method to get a Cell's unformatted value.\n\n    + Renamed public methods RowRange(), ColRange() and Cell() to row_range(),\n      col_range() and get_cell(). Old methods are still available.\n\n    ! Turned on compatibility_mode() by default in SaveParser to avoid SP3\n      problems.\n\n    ! Fixed minor SaveParser bug with font rotation.\n      http://rt.cpan.org/Public/Bug/Display.html?id=41626\n</code></pre>\n\n<p>So if you have a version of the module that is older than version 0.43, then the method you want is called <code>RowRange()</code>. You can find the version of the module that you have installed by typing this at a command line prompt:</p>\n\n<pre><code>perl -MSpreadsheet::ParseExcel -le'print $Spreadsheet::ParseExcel::VERSION'\n</code></pre>\n\n<p>If you do have a version of the module that is over ten years old, then I strongly recommend updating it.</p>\n"}], "owner": {"reputation": 197, "user_id": 10549531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40683992799fac6c9e09f03c2697e1b8?s=128&d=identicon&r=PG&f=1", "display_name": "daffodil", "link": "https://stackoverflow.com/users/10549531/daffodil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 55651381, "answer_count": 2, "score": 0, "last_activity_date": 1555071209, "creation_date": 1555065356, "last_edit_date": 1555065898, "question_id": 55649737, "link": "https://stackoverflow.com/questions/55649737/cannot-get-row-range-in-perl-script", "title": "Cannot get row_range in perl script", "body": "<p>My code doesn't seem to get row_range(). It shows an error which is:</p>\n\n<blockquote>\n  <p>Can't locate object method \"row_range\" via package\n  \"Spreadsheet::ParseExcel::Worksheet\" at clamp_init_value.pl line 41.</p>\n</blockquote>\n\n<pre><code> #!/usr/bin/perl\n\n use strict;\n use warnings;\n use Spreadsheet::ParseExcel;\n\n my $filename = '../../doc/Book1.xls';\n my $parser   = Spreadsheet::ParseExcel-&gt;new();\n my $workbook = $parser -&gt; Parse( $filename);\n\n if ( !defined $workbook ) {\n    die \"-E-: cannot parse &lt;$filename&gt;.\\n\";\n }\n\n for my $worksheet ( $workbook-&gt; Worksheet( 'family pin list' ) ) {\n\n    # Find out the worksheet ranges\n    my ( $row_min, $row_max ) = $worksheet-&gt;row_range();\n    my ( $col_min, $col_max ) = $worksheet-&gt;col_range();\n\n    for my $row ( $row_min .. $row_max ) {\n        for my $col ( $col_min .. $col_max ) {\n\n            # Return the cell object at $row and $col\n            my $cell = $worksheet-&gt;get_cell( $row, $col );\n            next unless $cell;\n\n            print \"Row, Col    = ($row, $col)\\n\";\n            print \"Value       = \", $cell-&gt;value(),       \"\\n\";\n\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "awk"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555032335, "post_id": 55643180, "comment_id": 97976450, "body": "Tab separated data doesn&#39;t play well with SO. Where are the columns separated in that example?"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1555032835, "post_id": 55643180, "comment_id": 97976522, "body": "Will add them on the first line so you can see."}], "answers": [{"comments": [{"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1555033728, "post_id": 55643267, "comment_id": 97976685, "body": "@bihsing This works! Would you be so kind as to break down the <code>regex</code> for me? I see the capture groups indicated by the parens and I get the <code>.*?</code> syntax, but what about the <code>?:</code>?"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 1, "creation_date": 1555034781, "post_id": 55643267, "comment_id": 97976864, "body": "Glad to be of help. <code>(?:...)</code> is a non-capturing group. Since we only want to capture the numbers, all the other groups should be made non-capturing. The non-capturing groups here are used to group the entire verbiage of <code>xx hr.</code> or <code>yy min.</code> together so that we can use the <code>?</code> quantifier to make both of them optional."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1555038671, "post_id": 55643267, "comment_id": 97977551, "body": "OP pointed out elsewhere that this version doesn&#39;t print a number of lines of the sample data that it should, btw."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 2, "last_activity_date": 1555032869, "creation_date": 1555032869, "answer_id": 55643267, "question_id": 55643180, "link": "https://stackoverflow.com/questions/55643180/perl-or-awk-match-movie-run-times-greater-than-5-hours/55643267#55643267", "title": "Perl or Awk: Match Movie run times greater than 5 hours", "body": "<p>You can use regex with capture groups with perl:</p>\n\n<pre><code>&gt; perl -ne'/\\(.*?(?:(\\d+) hr\\.)?.*?(?:(\\d+) min\\.)?.*?\\)/&amp;&amp;($1&gt;5||$2&gt;300)&amp;&amp;print' catalog\n628328  180001  7th heaven. NVIDEO  DVD 5 videodiscs (15 hr., 57 min.) :\n773429  291072  Veronica Mars.  NVIDEO  DVD 6 videodiscs (842 min.) :\n1154016 264851  Columbo.    NVIDEO  DVD 5 videodiscs (725 min.) :\n1227803 280535  Seattle Seahawks    NVIDEO  DVD 3 videodiscs (500 min.) :\n1227804 280535  Seattle Seahawks    NVIDEO  DVD 3 videodiscs (500 min.) :\n1287497 293511  Seattle Seahawks :  NVIDEO  DVD 3 videodiscs (400 min.) :\n1287499 293511  Seattle Seahawks :  NVIDEO  DVD 3 videodiscs (400 min.) :\n1367994 228775  Spongebob Squarepants.  NVIDEO  JDVD    4 videodiscs (469 min.) :\n1368002 257248  SpongeBob SquarePants.  NVIDEO  JDVD    4 videodiscs (589 min.) :\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1555037180, "post_id": 55643490, "comment_id": 97977287, "body": "This version seems to be more accurate, though I couldn&#39;t say why. The other answer produces less results. I wonder if the expression is getting tripped up on false positives somehow."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 1, "creation_date": 1555038414, "post_id": 55643490, "comment_id": 97977498, "body": "@Bubnoff Yeah, that other perl answer doesn&#39;t properly capture the numbers from a lot of strings. In the Moonlighting line, for example, everything between the parenthesis ended up matching the very last <code>.*?</code> in the RE with everything else before it matching 0-length substrings."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 4, "last_activity_date": 1555034803, "creation_date": 1555034803, "answer_id": 55643490, "question_id": 55643180, "link": "https://stackoverflow.com/questions/55643180/perl-or-awk-match-movie-run-times-greater-than-5-hours/55643490#55643490", "title": "Perl or Awk: Match Movie run times greater than 5 hours", "body": "<p>Instead of trying to do it all with one monster regular expression, I think splitting it up into a couple of different ones is more readable and easier to understand when you come back to it later. No need to feed the stereotype of perl looking like line noise...</p>\n\n<pre><code>$ perl -F\\\\t -ane 'print if ($F[5] =~ /(\\d+) hr\\./ &amp;&amp; $1 &gt; 5) || ($F[5] =~ /(\\d+) min\\./ &amp;&amp; $1 &gt; 300)' input.tsv\n</code></pre>\n\n<p>This extracts the numbers before <code>hr.</code> or <code>min.</code> in the sixth column (And only that one in case a matching string also appears in the name column) and compares them to see if they're greater than 5 or 300 respectively, and only prints those matching lines.</p>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1555037308, "creation_date": 1555037308, "answer_id": 55643780, "question_id": 55643180, "link": "https://stackoverflow.com/questions/55643180/perl-or-awk-match-movie-run-times-greater-than-5-hours/55643780#55643780", "title": "Perl or Awk: Match Movie run times greater than 5 hours", "body": "<p>You can also use <code>awk</code>:</p>\n\n<pre><code>&gt; awk -F'[^0-9]+' '/min\\./&amp;&amp;$(NF-1)&gt;300||/hr\\./&amp;&amp;$(NF-/min\\./-1)&gt;5' catalog\n239835  92075   Moonlighting, seasons one and two   NVIDEO  DVD 6 videodiscs (approximately 1200 min.) :\n628328  180001  7th heaven. NVIDEO  DVD 5 videodiscs (15 hr., 57 min.) :\n773429  291072  Veronica Mars.  NVIDEO  DVD 6 videodiscs (842 min.) :\n856287  208624  The Munsters.   NVIDEO  DVD 12 videodiscs (approximately 33 hr.) :\n1154016 264851  Columbo.    NVIDEO  DVD 5 videodiscs (725 min.) :\n1217001 113980  CSI, crime scene investigation. NVIDEO  DVD 5 videodiscs (approximately 732 min.) :\n1227803 280535  Seattle Seahawks    NVIDEO  DVD 3 videodiscs (500 min.) :\n1227804 280535  Seattle Seahawks    NVIDEO  DVD 3 videodiscs (500 min.) :\n1287497 293511  Seattle Seahawks :  NVIDEO  DVD 3 videodiscs (400 min.) :\n1287499 293511  Seattle Seahawks :  NVIDEO  DVD 3 videodiscs (400 min.) :\n1367994 228775  Spongebob Squarepants.  NVIDEO  JDVD    4 videodiscs (469 min.) :\n1368002 257248  SpongeBob SquarePants.  NVIDEO  JDVD    4 videodiscs (589 min.) :\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1555101908, "post_id": 55644654, "comment_id": 98006908, "body": "How would you write this with modern GAWK? I was not able to get capture groups working with <code>match($6, &#47;REGEX&#47; , a)</code> ..etc. it was ignoring <code>{3,}</code> type operators."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1555126093, "post_id": 55644654, "comment_id": 98011367, "body": "If I was writing it for gawk only the only change I&#39;d make would be to turn <code>hrs  = ( match($6,&#47;[0-9]+ hr&#47;)  ? substr($6,RSTART)+0 : 0 )</code> into <code>match($6,&#47;[0-9]+ hr&#47;,a); hrs=a[0]+0</code> and similar for mins. I don&#39;t know where you&#39;re thinking a <code>{3,}</code> would come in."}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1555436527, "post_id": 55644654, "comment_id": 98108246, "body": "You&#39;re right, in this particular example <code>{3,}</code> would not be useful. In my tests, [ with mistaken assumptions, as you point out ], it did not work and my question is more general. This is a generic REGEX construct and didn&#39;t work as expected in the GAWK <code>match($6,&#47;[0-9]{3,} hr&#47;,a)</code> construct. I agree that it was unnecessary but am wondering why it didn&#39;t work. Thanks!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1555436903, "post_id": 55644654, "comment_id": 98108422, "body": "In what way did it &quot;not work&quot;? Your input doesn&#39;t contain any strings of 3-or-more digits in the 6th field - did you think it does and are surprised when gawk can&#39;t find it? Or did you have some different input you&#39;re running that against? Or did you think <code>[0-9]{3,}</code> meant something other than <code>3 or more digits</code>?"}, {"owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 0, "creation_date": 1555543012, "post_id": 55644654, "comment_id": 98152217, "body": "In some of the runtime strings, you&#39;d get a string like this: <code>1250 min</code>. Your solution demonstrates that using a construct such as <code>{3,}</code> is unnecessary, however, when used <i>without</i> the <code>match</code> construct the <code>{3,}</code> works as expected -- within the <code>match</code> construct it only pulls records with <code>1</code> digit followed by min. I was just curious as to whether I needed escapes ...etc. It&#39;s not a big deal and don&#39;t want to take up your time. Thanks!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "edited": false, "score": 1, "creation_date": 1555543829, "post_id": 55644654, "comment_id": 98152373, "body": "You&#39;re welcome and it&#39;s no trouble. No you don&#39;t need escapes. I can&#39;t imagine what the issue is given when you&#39;ve told me so far since to any tool than handles regexps either <code>{3,}</code> means <code>a repetition of 3 or more</code> or it means literally <code>the string &quot;{3,}&quot;</code> and neither of those would match <code>1 min</code> or similar as you&#39;re saying you see when you run whatever code you&#39;re running against whatever input you&#39;re running it against. So I&#39;d need to see a concrete example. Please feel free to post a new question with it&#39;s own <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of sample input, expected output and code if you&#39;d like help with that."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 2, "last_activity_date": 1555047014, "last_edit_date": 1555047014, "creation_date": 1555044388, "answer_id": 55644654, "question_id": 55643180, "link": "https://stackoverflow.com/questions/55643180/perl-or-awk-match-movie-run-times-greater-than-5-hours/55644654#55644654", "title": "Perl or Awk: Match Movie run times greater than 5 hours", "body": "<p>Since 5 hours is 300 mins you don't need to treat them separately just convert any hours and/or mins specification into mins. Using any awk:</p>\n\n<pre><code>awk -F'\\t' '\n    {\n        hrs  = ( match($6,/[0-9]+ hr/)  ? substr($6,RSTART)+0 : 0 )\n        mins = ( match($6,/[0-9]+ min/) ? substr($6,RSTART)+0 : 0 )\n    }\n    (hrs*60 + mins) &gt; 300\n' file\n</code></pre>\n\n<p>but you could write it as 2 separate tests if you prefer:</p>\n\n<pre><code>awk -F'\\t' '\n    {\n        hrs  = ( match($6,/[0-9]+ hr/)  ? substr($6,RSTART)+0 : 0 )\n        mins = ( match($6,/[0-9]+ min/) ? substr($6,RSTART)+0 : 0 )\n    }\n    (hrs &gt; 5) || (mins &gt; 300)\n' file\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1555053530, "last_edit_date": 1555053530, "creation_date": 1555053109, "answer_id": 55646319, "question_id": 55643180, "link": "https://stackoverflow.com/questions/55643180/perl-or-awk-match-movie-run-times-greater-than-5-hours/55646319#55646319", "title": "Perl or Awk: Match Movie run times greater than 5 hours", "body": "<p>let your data in 'd' file,</p>\n\n<pre><code>perl -F\"\\(|\\)\" -ane '$t=@F[$#F-1]; $t =~ s/.*?(\\d+\\s*(?:min|hr.)).*/\\1/; if($t =~ /min/ &amp;&amp; $t&gt;300 or $t =~ /hr./ &amp;&amp; $t&gt;5) {print \"@F\\n\"}' d\n</code></pre>\n"}], "owner": {"reputation": 3409, "user_id": 424747, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c186b6b71d44c1c7f36878c9e60f71e0?s=128&d=identicon&r=PG", "display_name": "Bubnoff", "link": "https://stackoverflow.com/users/424747/bubnoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 55643490, "answer_count": 5, "score": 2, "last_activity_date": 1555053530, "creation_date": 1555031972, "last_edit_date": 1555032879, "question_id": 55643180, "link": "https://stackoverflow.com/questions/55643180/perl-or-awk-match-movie-run-times-greater-than-5-hours", "title": "Perl or Awk: Match Movie run times greater than 5 hours", "body": "<p>I need to re-catalog all movies with runtimes greater than 5 hours.</p>\n\n<p>Sample data:</p>\n\n<pre><code>239835&lt;TAB&gt; 92075&lt;TAB&gt;Moonlighting, seasons one and two&lt;TAB&gt;NVIDEO&lt;TAB&gt;DVD&lt;TAB&gt;6 videodiscs (approximately 1200 min.) :\n628328  180001  7th heaven. NVIDEO  DVD 5 videodiscs (15 hr., 57 min.) :\n773429  291072  Veronica Mars.  NVIDEO  DVD 6 videodiscs (842 min.) :\n789908  379843  Castle in the Sky   NVIDEO  JDVD    2 videodiscs (approximately 125 min.) :\n856287  208624  The Munsters.   NVIDEO  DVD 12 videodiscs (approximately 33 hr.) :\n1076125 254085  From up on Poppy Hill (Rated PG)    NVIDEO  JDVD    2 videodiscs (91 min.) :\n1154016 264851  Columbo.    NVIDEO  DVD 5 videodiscs (725 min.) :\n1217001 113980  CSI, crime scene investigation. NVIDEO  DVD 5 videodiscs (approximately 732 min.) :\n1227803 280535  Seattle Seahawks    NVIDEO  DVD 3 videodiscs (500 min.) :\n1227804 280535  Seattle Seahawks    NVIDEO  DVD 3 videodiscs (500 min.) :\n1287497 293511  Seattle Seahawks :  NVIDEO  DVD 3 videodiscs (400 min.) :\n1287499 293511  Seattle Seahawks :  NVIDEO  DVD 3 videodiscs (400 min.) :\n1367994 228775  Spongebob Squarepants.  NVIDEO  JDVD    4 videodiscs (469 min.) :\n1368002 257248  SpongeBob SquarePants.  NVIDEO  JDVD    4 videodiscs (589 min.) :\n</code></pre>\n\n<p>Is there a quick perl or awk snippet or one-liner that would:\n* Print the whole line if\n* # of \"min\" is greater than 300 or\n* # of \"hr(s)\" is greater than 5</p>\n\n<p>Something like:</p>\n\n<pre><code>perl -F\\\\t -ane 'print if $F[6] &lt;substring or capture group representing minutes&gt; &gt; 300' file.csv\n</code></pre>\n\n<p>Getter closer with <code>awk</code>:</p>\n\n<pre><code>awk -F'\\t' '$6 ~ /^.*\\(.*[3-9][[:digit:]]{2}[[:space:]]+min.*\\)/ {print}' minutes.csv\n</code></pre>\n\n<p>REGEX patterns:\nMinutes greater than 300:\n<code>/^.*\\(.*[[:space:]][3-9][[:digit:]]{2}[[:space:]]+min.*\\)/</code></p>\n\n<p>Minutes greater than 1000:\n<code>/^.*\\(.*[[:digit:]]{4,}[[:space:]]+min.*\\)/</code></p>\n\n<p>Hours greater than 5:\n<code>/^.*\\(.*[[:space:]][5-9]{1}[[:space:]]+hr.*\\)/</code></p>\n\n<p>Hours greater than 10:\n<code>/^.*\\(.*[[:space:]][[:digit:]]{4}[[:space:]]+hr.*\\)/</code></p>\n\n<p>Is there a simpler more concise way?</p>\n"}, {"tags": ["perl", "yaml"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1555016190, "post_id": 55640774, "comment_id": 97972586, "body": "See <a href=\"https://yaml.org/\" rel=\"nofollow noreferrer\">yaml.org</a>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 10234754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d9de59ed998c599384782083c7936e?s=128&d=identicon&r=PG&f=1", "display_name": "PaulM", "link": "https://stackoverflow.com/users/10234754/paulm"}, "edited": false, "score": 0, "creation_date": 1555015946, "post_id": 55640839, "comment_id": 97972509, "body": "I think I am getting confused on the PERL load into variable and access say first element. I actually had above but thought it was wrong."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 169, "user_id": 10234754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d9de59ed998c599384782083c7936e?s=128&d=identicon&r=PG&f=1", "display_name": "PaulM", "link": "https://stackoverflow.com/users/10234754/paulm"}, "edited": false, "score": 1, "creation_date": 1555015988, "post_id": 55640839, "comment_id": 97972521, "body": "The leading whitespace in front of the list elements is important."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1555071377, "post_id": 55640839, "comment_id": 97991354, "body": "@mob no, the leading spaces before the dashes are not important. Practically all YAML libraries can parse it without leading spaces. The dashes are counting as indentation."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1555015317, "creation_date": 1555015317, "answer_id": 55640839, "question_id": 55640774, "link": "https://stackoverflow.com/questions/55640774/how-do-i-declare-a-list-in-yaml-and-read-using-perl-yamlxs/55640839#55640839", "title": "How do I declare a list in YAML and read using PERL YAML::XS", "body": "<p>Dump out a list and see what it looks like:</p>\n\n<pre><code>$ perl -MYAML -E 'say YAML::Dump( { MYARRAY =&gt; [\"str1\",\"str2\",\"str3\"] })'\n---\nMYARRAY:\n  - str1\n  - str2\n  - str3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": false, "score": 3, "last_activity_date": 1555019455, "creation_date": 1555019455, "answer_id": 55641677, "question_id": 55640774, "link": "https://stackoverflow.com/questions/55640774/how-do-i-declare-a-list-in-yaml-and-read-using-perl-yamlxs/55641677#55641677", "title": "How do I declare a list in YAML and read using PERL YAML::XS", "body": "<p>This:</p>\n\n<pre><code>MYARRAY: str1,str2,str3\n</code></pre>\n\n<p>is a YAML mapping, the same way as your</p>\n\n<pre><code>MYVAL: 1\n</code></pre>\n\n<p>is a YAML mapping. The difference is that the value for the key <code>MYARRAY</code> is a plain (i.e. non quoted) scalar string <code>str1,str2,str3</code> and for the value <code>MYVAL</code> is the scalar integer <code>1</code> </p>\n\n<p>If you want a sequence of three strings as value on a single line, you would need to do:</p>\n\n<pre><code>MYARRAY: [str1,str2,str3]\n</code></pre>\n\n<p>(optionally with whitespace before and/or after the commas). That is a flow style sequence of three plain scalars: <code>str1</code>, <code>str2</code> and <code>str3</code>.</p>\n\n<p>An alternative is to use block style:</p>\n\n<pre><code>MYARRAY: \n- str1\n- str2\n- str3\n</code></pre>\n\n<p>which is semantically equivalent to the flow style example above.</p>\n"}], "owner": {"reputation": 169, "user_id": 10234754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d9de59ed998c599384782083c7936e?s=128&d=identicon&r=PG&f=1", "display_name": "PaulM", "link": "https://stackoverflow.com/users/10234754/paulm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1555019455, "creation_date": 1555015035, "question_id": 55640774, "link": "https://stackoverflow.com/questions/55640774/how-do-i-declare-a-list-in-yaml-and-read-using-perl-yamlxs", "title": "How do I declare a list in YAML and read using PERL YAML::XS", "body": "<p>I can create a value in YAML as such:</p>\n\n<pre><code>MYVAL: 1\n</code></pre>\n\n<p>I can load this in my PERL as follows:</p>\n\n<pre><code>my $settings = YAML::XS::LoadFile...\nmy $number_mine = $settings-&gt;{'MYVAL'};\n</code></pre>\n\n<p>I would want to create now an array of strings in YAML. \nI tried using - and --- but not seeing it</p>\n\n<p>YAML?</p>\n\n<pre><code>MYARRAY: str1,str2,str3\n</code></pre>\n\n<p>PERL:</p>\n\n<pre><code>my @array_mine = $settings-&gt;{'MYARRAY'};\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555002568, "post_id": 55636872, "comment_id": 97966821, "body": "use strict and warnings?  initialize level to 0?  anchor the flipflop left operand regex?"}, {"owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555006947, "post_id": 55636872, "comment_id": 97968787, "body": "@ysth: Sorry, I fixed these issues now and made my question clearer."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1555011012, "post_id": 55639244, "comment_id": 97970507, "body": "flipflop&#39;s string return value ends &#39;E0&#39; when the flop condition was met; see <a href=\"https://www.perlmonks.org/?node_id=525406\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=525406</a> (but I&#39;m not sure how that plays into OP&#39;s solution)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1555011881, "post_id": 55639244, "comment_id": 97970881, "body": "note that just a new anonymous function is not enough; it has to be a closure (refer to at least one external lexical) to get its own flipflop state data (at least that&#39;s my recollection)"}, {"owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "edited": false, "score": 0, "creation_date": 1555013021, "post_id": 55639244, "comment_id": 97971335, "body": "Thanks for the answer! I&#39;m still reading through it and first let me say that I used the <code>s&#47;.*E&#47;&#47;r</code>, because I figured that&#39;s the easiest way to make the end value return false (&quot;0&quot;) and thereby exclude it, as I want the inner conditions in the while loop to only match while the lines are still indented."}, {"owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "edited": false, "score": 0, "creation_date": 1555015927, "post_id": 55639244, "comment_id": 97972503, "body": "That works, really cool! In your last code paragraph it still has to be three dots, so <code>sub { &#47;^$expr1&#47; ... !&#47;^$expr2&#47; }</code>, and then it directly works."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1555016058, "post_id": 55639244, "comment_id": 97972550, "body": "Ok, I&#39;ll change back to <code>...</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1555016072, "last_edit_date": 1555016072, "creation_date": 1555008218, "answer_id": 55639244, "question_id": 55636872, "link": "https://stackoverflow.com/questions/55636872/keep-track-of-indentation-based-state-with-flip-flop-operator/55639244#55639244", "title": "Keep track of indentation-based state with flip-flop operator", "body": "<p>Flip-flop operators with dynamic operands are tricky to use and may not do what you expect. Perl maintains a single \"state\" for each flip-flop operator that appears in the code, not a separate state for each expression supplied as operands to the flip-flop operator.</p>\n\n<p>Consider this code:</p>\n\n<pre><code>sub foo { m[&lt;foo&gt;] .. m[&lt;/foo&gt;] }\nsub bar { m[&lt;bar&gt;] .. m[&lt;/bar&gt;] }\n\nwhile (&lt;DATA&gt;) {    \n    print \"FOO:$_\" if foo();\n    print \"BAR:$_\" if bar();\n}    \n__DATA__\n&lt;foo&gt;\n   &lt;bar&gt;\n      123\n   &lt;/bar&gt;\n   &lt;baz&gt;\n       456\n   &lt;/baz&gt;\n&lt;/foo&gt;\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>FOO:&lt;foo&gt;\nFOO:   &lt;bar&gt;\nBAR:   &lt;bar&gt;\nFOO:      123\nBAR:      123\nFOO:   &lt;/bar&gt;\nBAR:   &lt;/bar&gt;\nFOO:   &lt;baz&gt;\nFOO:       456\nFOO:   &lt;/baz&gt;\nFOO:&lt;/foo&gt;\n</code></pre>\n\n<p>So far, so good, right? This approach won't scale well when there are 100 different tags to track instead of two, so let's try this code:</p>\n\n<pre><code>sub ff { my $tag = shift; m[&lt;$tag&gt;] .. m[&lt;/$tag&gt;] }\nwhile (&lt;DATA&gt;) {\n    print \"FOO:$_\" if ff(\"foo\");\n    print \"BAR:$_\" if ff(\"bar\");\n}\n__DATA__\n&lt;foo&gt;\n   &lt;bar&gt;\n      123\n   &lt;/bar&gt;\n   &lt;baz&gt;\n       456\n   &lt;/baz&gt;\n&lt;/foo&gt;\n</code></pre>\n\n<p>Now the output is</p>\n\n<pre><code>FOO:&lt;foo&gt;\nBAR:&lt;foo&gt;\nFOO:   &lt;bar&gt;\nBAR:   &lt;bar&gt;\nFOO:      123\nBAR:      123\nFOO:   &lt;/bar&gt;\nBAR:   &lt;/bar&gt;\n</code></pre>\n\n<p>What happened? <code>BAR</code> is always printed with the same lines as <code>FOO</code>, and the last line of output is the <code>&lt;/bar&gt;</code> line, even though there is more data still enclosed in <code>&lt;foo&gt;&lt;/foo&gt;</code> tags.</p>\n\n<p>What happened is that the code contains a single flip-flop operator, defined in the <code>ff</code> subroutine, and this operator maintains a single state. The state changes to \"true\" when <code>ff(\"foo\")</code> is called with the first line of input, and it remains \"true\" until it encounters input and an operand that satisfies the second expression in the flip-flop operator, which happens with the 4th line when <code>ff(\"bar\")</code> is called. It is not maintaining separate state for <code>foo</code> tags and <code>bar</code> tags as the first example did.</p>\n\n<p>Passing different input to the <code>indenting_flipflop</code> function and expecting the flip-flop operator in that function to just operate on that kind of input will not work.</p>\n\n<hr>\n\n<p><strong>Update</strong>: so this approach, defining a single new function for each tag, works:</p>\n\n<pre><code>sub fff { my $tag = shift; sub { m[&lt;$tag&gt;] .. m[&lt;/$tag&gt;] } }\nmy $foo = fff(\"foo\");\nmy $bar = fff(\"bar\");\nwhile (&lt;DATA&gt;) {\n    print \"FOO:$_\" if $foo-&gt;();\n    print \"BAR:$_\" if $bar-&gt;();\n}\n__DATA__\n...\n</code></pre>\n\n<p>but this one (defining new functions with every line of input) does not:</p>\n\n<pre><code>sub fff { my $tag = shift; sub { m[&lt;$tag&gt;] .. m[&lt;/$tag&gt;] } }\nwhile (&lt;DATA&gt;) {\n    print \"FOO:$_\" if fff(\"foo\")-&gt;();\n    print \"BAR:$_\" if fff(\"bar\")-&gt;();\n}\n__DATA__\n...\n</code></pre>\n\n<p>On the other other hand a memoized version of it would work:</p>\n\n<pre><code>my %FF;\nsub fff { my $tag = shift; $FF{$tag} //= sub { m[&lt;$tag&gt;] .. m[&lt;/$tag&gt;] } }\nwhile (&lt;DATA&gt;) {\n    print \"FOO:$_\" if fff(\"foo\")-&gt;();\n    print \"BAR:$_\" if fff(\"bar\")-&gt;();\n}\n__DATA__\n...\n</code></pre>\n\n<p>I'm still not convinced that flip-flop operators would add any value to this problem, but to find out you would have to use memoized flip-flop operator generating functions. Replace</p>\n\n<pre><code>...\nreturn ((/^$indent$block_rx/) ... (!/^$inner_indent/)) =~ s/.*E//r;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my %FF;\nsub flipflopfunc {\n    my ($expr1,$expr2) = @_;\n    return $FF{$expr1}{$expr2} //= \n        sub { /^$expr1/ ... !/^$expr2/ };\n}\n...\nreturn flipflopfunc(\"$indent$block_rx\",$inner_indent)-&gt;() =~ s/.*E//r;\n</code></pre>\n\n<p>(not sure what the <code>s/.*E//r</code> is for)</p>\n"}], "owner": {"reputation": 1973, "user_id": 1716999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06a58106c9a1013f1ca791c46579d664?s=128&d=identicon&r=PG", "display_name": "rubystallion", "link": "https://stackoverflow.com/users/1716999/rubystallion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 55639244, "answer_count": 1, "score": 3, "last_activity_date": 1555016164, "creation_date": 1554998812, "last_edit_date": 1555016164, "question_id": 55636872, "link": "https://stackoverflow.com/questions/55636872/keep-track-of-indentation-based-state-with-flip-flop-operator", "title": "Keep track of indentation-based state with flip-flop operator", "body": "<p>I am trying to get familiar with the flip-flop operator, so I can have it as an additional abstraction in my head when doing stateful looping, even though a textbook-style state machine works perfectly well (and verbose and variable-rich) in such a case. I want to keep track of indentation and it seems like I'd still need to manually adjust indentation at the start of every if block in whose condition I call my indenting flip-flop, right?\nHere's what I came up with:</p>\n\n<p><strong>Program</strong>:</p>\n\n<pre><code>use v5.20;\nuse strict;\nuse warnings;\n\nmy $shiftwidth = 3;\n\n# block_rx: start of indented block marker, without leading spaces\n# Keeps state of indentation, which is increased on encountering block marker\n# and decreased on matching outdent.\n# Function should always get indentation level from context it was called in.\n# Returns: true if in indented block, ^ff^, else false\n\nsub indenting_flipflop {\n    my $block_rx = $_[0];\n    $_ = $_[1];\n    my $level = $_[2];\n    my $indent = indent($level);\n    my $inner_indent = indent($level + 1);\n    return ((/^$indent$block_rx/) ... (!/^$inner_indent/)) =~ s/.*E//r;\n}\n\nsub indent {\n    return ' ' x ($shiftwidth * $_[0]);\n}\n\nwhile (&lt;DATA&gt;) {\n    my $level = 0;\n    if (indenting_flipflop('books', $_, $level)) {\n        $level++;\n        if (indenting_flipflop('book', $_, $level)) {\n            $level++;\n            if (/author: (.*)/) {\n              say $1;\n            }\n        }\n    }\n}\n\n__DATA__\nbooks:\n   book:\n      author: Mark Twain\n      price: 10.99\n   game:\n      author: Klaus Teuber\n      price: 15.99\n   book:\n      author: Jane Austen\n      price: 12.00\n\nbooks:\n   book:\n      author: Mark Twain\n      price: 10.99\n   game:\n      author: Klaus Teuber\n      price: 15.99\n   book:\n      author: Jane Austen\n      price: 12.00\n</code></pre>\n\n<p><strong>Expected output</strong>:</p>\n\n<pre><code>Mark Twain\nJane Austen\nMark Twain\nJane Austen\n</code></pre>\n\n<p><strong>Actual output</strong>:</p>\n\n<pre><code>Mark Twain\nKlaus Teuber\nJane Austen\nMark Twain\nKlaus Teuber\nJane Austen\n</code></pre>\n\n<p>It would also be nice, if I wouldn't have to adjust <code>$level</code> manually in the loop.</p>\n"}, {"tags": ["regex", "perl", "optional"], "comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1554998592, "post_id": 55636146, "comment_id": 97964769, "body": "Why are you printing out <code>$4</code> if you&#39;re only capturing 3 groups?"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1554998875, "post_id": 55636146, "comment_id": 97964924, "body": "And why the <code>|.*</code> in the optional non-capturing group?"}, {"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1555050458, "post_id": 55636146, "comment_id": 97980782, "body": "@Tanktalus, $4 was left due to quick edit; <code>|.*</code> - actually the group does not have <code>?</code> after <code>)</code> so I think it&#39;s not optional, why do you write it is?"}], "answers": [{"comments": [{"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "edited": false, "score": 0, "creation_date": 1554998516, "post_id": 55636347, "comment_id": 97964725, "body": "thank you for suggestion, useful technique, I edited the question at the end. Still optionality is not solved. either from <code>|</code> it chooses second part or nested group from not kept one is not kept."}, {"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "edited": false, "score": 0, "creation_date": 1555000924, "post_id": 55636347, "comment_id": 97966008, "body": "interestingly moving <code>.*?</code> inside optional group make it work, I yet have not grasped why."}, {"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "edited": false, "score": 0, "creation_date": 1562683552, "post_id": 55636347, "comment_id": 100448685, "body": "Can I mix named and numbered? If yes, are named change number of subsequent numbered? I have numbered and want to add capturing optional one - I guess the only maybe possible way is to use named one. Thanx."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "edited": false, "score": 1, "creation_date": 1562685225, "post_id": 55636347, "comment_id": 100449787, "body": "Using names doesn&#39;t change the numbering. That is, even if you use named captures, they are still available with the same number as if names weren&#39;t used. So if you add a named capture before some of your numbered captures, you&#39;ll end up with the numbers changing. Which is why I suggest using named for anything more than one or two captures in the first place."}, {"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "edited": false, "score": 0, "creation_date": 1562770367, "post_id": 55636347, "comment_id": 100482996, "body": "if in match I have certain part 1, then arbitrary optional part 2 then fixed optional part 3 then again certain part 4 and I write 2 optional groups 2st with .*? lazy and 3nd fixed optional, will both be captured accordinly if present (that is would be something after 1st and then fixed 3rd text) or 2st capture will include 3nd fixed - is it determined or maybe implementation dependent? thanx"}, {"owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "edited": false, "score": 0, "creation_date": 1562774025, "post_id": 55636347, "comment_id": 100485112, "body": "I tried to do thing in comment above and it captured both groups as I wanted. At least in my environment it works."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 4, "last_activity_date": 1554998924, "last_edit_date": 1554998924, "creation_date": 1554997243, "answer_id": 55636347, "question_id": 55636146, "link": "https://stackoverflow.com/questions/55636146/perl-optional-group-in-arbitrary-place/55636347#55636347", "title": "Perl optional group in arbitrary place", "body": "<p>You're looking for <code>(?:...)</code> - the <code>?:</code> prefix inside the capture group makes it into simply a group, not captured. I recommend using this every time there is a group that is not captured to make your intent clearer.  It says, \"I'm grouping this, but not keeping it.\" It may even make the runtime faster, but that's not the main benefit.</p>\n\n<p>Example:</p>\n\n<pre><code>perl -0777nE 'say qq[$1;$2;$3] if /Code\\&gt;(.*?)\\&lt;Code.*?(?:Prod\\&gt;(.*?)\\&lt;Prod.*?)?Type\\&gt;(.*?)\\&lt;Type/s' &lt; t\n</code></pre>\n\n<p>This prints out <code>1;2;3</code></p>\n\n<p>However, I would also suggest looking at the <code>(?&lt;name&gt;...)</code> syntax where you can name your groups and use <code>%+</code> (e.g., <code>$+{name}</code>) to extract fields by name rather than position. In my experience, this makes both the regex and the code relying on it more readable.</p>\n"}], "owner": {"reputation": 2231, "user_id": 5499118, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5a208904f0bcb017ca7ac854070f4b55?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei Martianov", "link": "https://stackoverflow.com/users/5499118/alexei-martianov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 2, "accepted_answer_id": 55636347, "answer_count": 1, "score": 3, "last_activity_date": 1554998924, "creation_date": 1554996580, "last_edit_date": 1554998728, "question_id": 55636146, "link": "https://stackoverflow.com/questions/55636146/perl-optional-group-in-arbitrary-place", "title": "Perl optional group in arbitrary place", "body": "<p>I need to capture sereral groups and some of them are optional. I've read about optional in <a href=\"https://www.regular-expressions.info/optional.html\" rel=\"nofollow noreferrer\">https://www.regular-expressions.info/optional.html</a> but <code>?</code> does not work for me. Example file:</p>\n\n<pre><code>Code&gt;1&lt;Code\nfoo\nProd&gt;2&lt;Prod\nfoo\nType&gt;3&lt;Type\n</code></pre>\n\n<p><code>perl -0777ne 'print qq($1;$2;$3) if /Code&gt;(.*?)&lt;Code.*?Prod&gt;(.*?)&lt;Prod.*?Type&gt;(.*?)&lt;Type/s' &lt; tst.txt</code> gives <code>1;2;3</code> as expected.  </p>\n\n<p>Now I want to add optionality to second group like <code>perl -0777ne 'print qq($1;$2;$3) if /Code&gt;(.*?)&lt;Code.*?(Prod&gt;(.*?)&lt;Prod)?.*?Type&gt;(.*?)&lt;Type/s' &lt; tst.txt</code>, but it stops to print second group, giving <code>1;;</code> (due to nested 3rd empty same as the 2nd, $4 prints <code>3</code>).  </p>\n\n<p>Per <a href=\"https://stackoverflow.com/questions/30472600/optional-group-expression\">Optional Group Expression</a> I've tried <code>perl -0777ne 'print qq($1;$2;$3;$4) if /Code&gt;(.*?)&lt;Code.*?(Prod&gt;(.*?)&lt;Prod|.*?).*?Type&gt;(.*?)&lt;Type/s' &lt; tst.txt</code> but again have <code>1;;;3</code>.</p>\n\n<p>Is it possible to extract optionally in any place as I can have other stuff between groups and how?</p>\n\n<p>EDIT:\nremoving one <code>?</code> <code>perl -0777ne 'print qq($1;$2;$3;$4) if /Code&gt;(.*?)&lt;Code.*?(Prod&gt;(.*?)&lt;Prod|.*).*?Type&gt;(.*?)&lt;Type/s' &lt; tst.txt</code> gives<br>\n<code>1;\nfoo\nProd&gt;2&lt;Prod\nfoo\n;;3</code>\nso captures everything between 1st and 3rd (looks like 2nd option is extracted, not one before <code>|</code>), not only 2nd. </p>\n\n<p>EDIT:\nimplemented <code>?:</code> suggestion, now <code>perl -0777ne 'print qq($1;$2;$3;$4) if /Code&gt;(.*?)&lt;Code.*?(?:Prod&gt;(.*?)&lt;Prod|.*).*?Type&gt;(.*?)&lt;Type/s' &lt; tst.txt</code> gives <code>1;;3;</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1554991413, "post_id": 55634238, "comment_id": 97960007, "body": "Why do you want to create those empty variables? Using those categories as keys to a hash sounds more reasonable; any reason to not do that?"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1554995902, "last_edit_date": 1554995902, "creation_date": 1554991509, "answer_id": 55634447, "question_id": 55634238, "link": "https://stackoverflow.com/questions/55634238/perl-push-unique-elements-into-array-and-create-variables-from-the-unique-elem/55634447#55634447", "title": "perl - push unique elements into array and create variables from the unique elements", "body": "<p>Having variables with dynamically created names is dangerous, see <a href=\"https://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">Why it's stupid to `use a variable as a variable name'</a> and <a href=\"https://perl.plover.com/varvarname2.html\" rel=\"nofollow noreferrer\">A More Direct Explanation of the Problem</a>.</p>\n\n<p>In Perl, you can use a hash to both keep the unique values, and also instead of the variables of unknown names. It's also much faster then iterating the whole array every time.</p>\n\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $fh, '&lt;', 'file.txt' or \"Could not open file $!\";\nmy %categories;\n\nwhile (my $line = &lt;$fh&gt;) {\n    chomp $line;\n    my @elements = split /\\t/, $line;\n    ++$categories{ $elements[0] };\n}\nmy @categories = keys %categories;\n</code></pre>\n\n<p>Right now, the values of the <code>%categories</code> hash is simply the number of times that category is present. For example, <code>$categories{cat1}</code> is 3. If you decide you want the values for each category instead, it's simply a question of replacing </p>\n\n<pre><code>++$categories{ $elements[0] };\n</code></pre>\n\n<p>with</p>\n\n<pre><code>push @{ $categories{ $elements[0] } }, $elements[1];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1554991947, "post_id": 55634478, "comment_id": 97960378, "body": "Aside from the major problem of endorsing dynamically created variables, there are a number of small issues:"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1554992011, "post_id": 55634478, "comment_id": 97960433, "body": "1) Assigning empty lists to empty arrays and empty hashes is useless. 2) Start with <code>$_</code> and switching to <code>$line</code> later makes no sense. Stick to one or the other. 3) Unless it&#39;s <code>&#39; &#39;</code>, the first argument to split is a regex pattern, so don&#39;t pretend it&#39;s not. 4) Don&#39;t declare variables far earlier than they are needed. The point of declaring variables is to limit their scope. 5) This is the first time I&#39;ve ever seen <code>undef()</code> used instead of <code>undef</code>. It&#39;s just weird. 6) <code>_unique</code> doesn&#39;t really add anything to those var names."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": -1, "last_activity_date": 1554991581, "creation_date": 1554991581, "answer_id": 55634478, "question_id": 55634238, "link": "https://stackoverflow.com/questions/55634238/perl-push-unique-elements-into-array-and-create-variables-from-the-unique-elem/55634478#55634478", "title": "perl - push unique elements into array and create variables from the unique elements", "body": "<p>Not a bad first attempt. here's what you need</p>\n\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\n\nopen(my $file,'&lt;',\"file.txt\") || die (\"Could not open file $!\"); #input file\n\nmy %categories_unique = ();\nmy @categories_unique = ();\n\nwhile(&lt;$file&gt;){\n    chomp;\n    my $line = $_;\n    my @elements = split (\"\\t\", $line);\n    $categories = $elements[0]; #everything seems fine until here\n    $categories_unique{$categories} = 1; # Use the fact that keys in a hash are unique\n}\n\n@categories_unique = keys %categories_unique;\n{\n    no strict 'refs'; # allows access to symbol table\n    *{$_} = undef() foreach @categories_unique; create a symbol table entry \n}\n</code></pre>\n"}], "owner": {"reputation": 1773, "user_id": 1987607, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e317b170bca0054580ef85f7a6469de6?s=128&d=identicon&r=PG&f=1", "display_name": "user1987607", "link": "https://stackoverflow.com/users/1987607/user1987607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 55634447, "answer_count": 2, "score": 0, "last_activity_date": 1554995902, "creation_date": 1554990937, "question_id": 55634238, "link": "https://stackoverflow.com/questions/55634238/perl-push-unique-elements-into-array-and-create-variables-from-the-unique-elem", "title": "perl - push unique elements into array and create variables from the unique elements", "body": "<p>I'm working in Perl.</p>\n\n<p>I start from a tab-delimited txt file with two columns.</p>\n\n<pre><code>cat1    val1\ncat1    val2\ncat2    val3 \ncat3    val4\ncat1    val5\ncat4    val6\n</code></pre>\n\n<p>I want to push the unique categories from column 1 into an array &amp; create empty variables that have the same name as these unique categories</p>\n\n<p>so at the end I would have:</p>\n\n<pre><code>@unique_categories = (\"cat1\", \"cat2\", \"cat3\", \"cat4\");\n\n$cat1 = '';\n$cat2 = '';\n$cat3 = '';\n$cat4 = '';\n</code></pre>\n\n<p>This is what I've tried:</p>\n\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\n\nopen(my $file,'&lt;',\"file.txt\") || die (\"Could not open file $!\"); #input file\n\nmy $categories = '';\nmy @categories_unique = '';\n\nwhile(&lt;$file&gt;){\n    chomp;\n    my $line = $_;\n    my @elements = split (\"\\t\", $line);\n    $categories = $elements[0]; #everything seems fine until here\n    push(@categories_unique, $categories) unless grep{$_ eq $categories} @categories_unique; #with this line I want to store the unique values in an array\n    #here I want to create the empty variables, but don't know how to\n}\n</code></pre>\n"}, {"tags": ["perl", "excel-writer-xlsx"], "comments": [{"owner": {"reputation": 3, "user_id": 10962755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qgYs.jpg?s=128&g=1", "display_name": "melkun", "link": "https://stackoverflow.com/users/10962755/melkun"}, "edited": false, "score": 0, "creation_date": 1557990022, "post_id": 55631432, "comment_id": 98952623, "body": "It also turned out that some excel readers do not treat this way of hiding columns the same: some might not get hidden."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10962755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qgYs.jpg?s=128&g=1", "display_name": "melkun", "link": "https://stackoverflow.com/users/10962755/melkun"}, "edited": false, "score": 0, "creation_date": 1557990453, "post_id": 55950697, "comment_id": 98952819, "body": "Thank you! Setting with numeric range is indeed better"}, {"owner": {"reputation": 3, "user_id": 10962755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qgYs.jpg?s=128&g=1", "display_name": "melkun", "link": "https://stackoverflow.com/users/10962755/melkun"}, "edited": false, "score": 0, "creation_date": 1557990613, "post_id": 55950697, "comment_id": 98952903, "body": "It also turned out that different excel readers treat this hiding differently, e.g. some columns at the border of the range might not get hidden. For an unclear reason, giving the original width of a column instead of <code>undef</code>, as follows  $worksheet-&gt;set_column( &#39;K:M&#39;, 60, undef, 1);  That would hide columns for all readers I managed to had access to, but also doesn&#39;t make much sense to me - at least, if that is important to keep the original width then why it is not mentioned in docs where using <code>undef</code> is suggested instead"}], "tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": true, "score": 1, "last_activity_date": 1556793843, "creation_date": 1556793843, "answer_id": 55950697, "question_id": 55631432, "link": "https://stackoverflow.com/questions/55631432/columns-can-be-hidden-only-in-groups-they-were-created/55950697#55950697", "title": "Columns can be hidden only in groups they were created", "body": "<p>The reason for the strange behaviour is that <code>set_column()</code> doesn't handle the ranges like sets. For example if you set a column range for <code>A:F</code> and then another for <code>C:D</code> then you don't automagically set 3 ranges (<code>A:B</code>, <code>C:D</code>, <code>E:F</code>). So you need to do that split manually.</p>\n\n<p>In your case it would be better to use the numeric range to <code>set_column()</code> like:</p>\n\n<pre><code>$worksheet-&gt;set_column( 8, 8, 40 );\n\n# Instead of:\n$worksheet-&gt;set_column( 'I:I', 40 );\n</code></pre>\n\n<p>I'd suggest setting up an initial array of arrays (or hashes) with the column widths you will use for each column and then overwriting for the ones you want to hide, and finally looping over array and calling <code>set_column()</code> for each column.</p>\n"}], "owner": {"reputation": 3, "user_id": 10962755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qgYs.jpg?s=128&g=1", "display_name": "melkun", "link": "https://stackoverflow.com/users/10962755/melkun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 55950697, "answer_count": 1, "score": 0, "last_activity_date": 1556793843, "creation_date": 1554982067, "question_id": 55631432, "link": "https://stackoverflow.com/questions/55631432/columns-can-be-hidden-only-in-groups-they-were-created", "title": "Columns can be hidden only in groups they were created", "body": "<p>I am working on automatization of exporting some data to xlsx-files with Perl, particularly with the module Excel::Writer::XLSX. In case some already created columns are empty or irrelevant, I want them to be hidden. While in some cases that was easily done with common command:</p>\n\n<pre><code>$worksheet-&gt;set_column( 'I:J', undef, undef, 1);\n</code></pre>\n\n<p>in some particular case they would not disappear as supposed to. After a lot of attempts, it turned out that the problem can be solved by changing the way they are originally set. </p>\n\n<p>For example, if I've created them like this:</p>\n\n<pre><code>$worksheet-&gt;set_column( 'I:I', 40 );\n$worksheet-&gt;set_column( 'J:M', 60 );\n$worksheet-&gt;set_column( 'N:N', 40 );\n</code></pre>\n\n<p>Then command </p>\n\n<pre><code>$worksheet-&gt;set_column( 'K:N', undef, undef, 1);\n</code></pre>\n\n<p>will only hide column 'N'.</p>\n\n<p>The solution was to create them like that</p>\n\n<pre><code>$worksheet-&gt;set_column( 'J:J', 60 );\n$worksheet-&gt;set_column( 'K:M', 60 );\n$worksheet-&gt;set_column( 'N:N', 40 );\n</code></pre>\n\n<p>So it works, but the code looks stupid and the whole situation just makes no sense to me. Does anybody know why it happens, and if yes, then is there any other solution to the problem?</p>\n"}, {"tags": ["regex", "perl", "replace"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1554976990, "post_id": 55629656, "comment_id": 97951051, "body": "What have you tried? What problems are you having? Please show us your code."}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "edited": false, "score": 0, "creation_date": 1554977325, "post_id": 55629656, "comment_id": 97951247, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3286925/regex-replacing-the-1st-occurrence-of-a-character-in-a-string\">regex: replacing the 1st occurrence of a character in a string</a>"}, {"owner": {"reputation": 41, "user_id": 8647538, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-00CXVNGkAXg/AAAAAAAAAAI/AAAAAAAAA4w/CHpcDPIGYz8/photo.jpg?sz=128", "display_name": "Subhash Tiwari", "link": "https://stackoverflow.com/users/8647538/subhash-tiwari"}, "edited": false, "score": 0, "creation_date": 1554978906, "post_id": 55629656, "comment_id": 97952132, "body": "I tried with following perl inline command:   perl -pi -e &#39;s/.*_PDB1/TENANT1_PDB1/&#39; filename.txt   This problem doesn&#39;t seems related to below as in my problem random string (i.e ZOWG628UT7PQCWQ) also has to be replaced.   <a href=\"https://stackoverflow.com/questions/3286925/regex-replacing-the-1st-occurrence-of-a-character-in-a-string\" title=\"regex replacing the 1st occurrence of a character in a string\">stackoverflow.com/questions/3286925/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 1, "last_activity_date": 1554980988, "creation_date": 1554980988, "answer_id": 55631100, "question_id": 55629656, "link": "https://stackoverflow.com/questions/55629656/replacing-first-occurrence-of-a-wildcard-string-in-text-file/55631100#55631100", "title": "Replacing first occurrence of a wildcard string in text file", "body": "<p>Regex quantifiers like <code>*</code> and <code>+</code> are greedy, meaning if they can match more, they will. To make them \"non-greedy\", add a <code>?</code> after the quantifier.</p>\n\n<p>In your case, changing the pattern to <code>.*?_PDB1</code> should only change the first occurrence (if there is one) in each line. </p>\n"}, {"tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": false, "score": 1, "last_activity_date": 1554981160, "creation_date": 1554981160, "answer_id": 55631158, "question_id": 55629656, "link": "https://stackoverflow.com/questions/55629656/replacing-first-occurrence-of-a-wildcard-string-in-text-file/55631158#55631158", "title": "Replacing first occurrence of a wildcard string in text file", "body": "<p>Your regex has some problem, when you say <code>.*_PDB1</code>, it goes for greedy match and replaces everything till last match.\nYou can go for: <code>perl -p -i.bak -e 's/.*_PDB1 /TENANT1_PDB1/' filename.txt</code>. Please notice, I have added one space after <code>_PDB1</code>.<br><br> Or you can also go for lazy matching <code>perl -p -i.bak -e 's/.*?_PDB1/TENANT1_PDB1/' filename.txt</code></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1554987554, "creation_date": 1554987554, "answer_id": 55633104, "question_id": 55629656, "link": "https://stackoverflow.com/questions/55629656/replacing-first-occurrence-of-a-wildcard-string-in-text-file/55633104#55633104", "title": "Replacing first occurrence of a wildcard string in text file", "body": "<p>must be more restrict the match search by some regex anchor or class set</p>\n\n<pre><code>perl -pi -e 's/^\\w+(_PDB1)/TENANT1$1/'\n</code></pre>\n\n<p>or <code>s/\\b\\w+(_PDB1)/TENANT1$1/</code> or whatever you think better see <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlre.html</a></p>\n"}], "owner": {"reputation": 41, "user_id": 8647538, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-00CXVNGkAXg/AAAAAAAAAAI/AAAAAAAAA4w/CHpcDPIGYz8/photo.jpg?sz=128", "display_name": "Subhash Tiwari", "link": "https://stackoverflow.com/users/8647538/subhash-tiwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1554987554, "creation_date": 1554976455, "last_edit_date": 1554980344, "question_id": 55629656, "link": "https://stackoverflow.com/questions/55629656/replacing-first-occurrence-of-a-wildcard-string-in-text-file", "title": "Replacing first occurrence of a wildcard string in text file", "body": "<p>I am trying to replace first occurrence of <code>ZOWG628UT7PQCWQ_PDB1</code> with <code>TENANT1_PDB1</code> in below pattern which is there in a file.</p>\n\n<p><code>ZOWG628UT7PQCWQ_PDB1 = (description= (address=(host=slc12ebg)) (connect_data=(service_name=ZOWG628UT7PQCWQ_PDB1_low.xyz.com)) (security=(ssl_server_cert_dn=\"CN=adwc-dev.uscom-east-1.xyz.com,OU=Testing Domain,O=End Point)) )</code></p>\n\n<p>Please note that <code>ZOWG628UT7PQCWQ</code> is a variable in string and will keep changing and ZOWG628UT7PQCWQ_PDB1 has to be replaced with TENANT1_PDB1.</p>\n\n<p>I tried <code>perl -pi -e 's/.*_PDB1/TENANT1_PDB1/' filename.txt</code> but this is replacing till second occurrence of <code>ZOWG628UT7PQCWQ_PDB</code> and giving output as follows which is not required:</p>\n\n<p><code>TENANT1_PDB1_low.xyz.com)) (security=(ssl_server_cert_dn=\"CN=adwc-dev.uscom-east-1.xyz.com,OU=Testing Domain,O=End Point)) )</code></p>\n\n<p>I need output like:</p>\n\n<p><code>TENANT1_PDB1 = (description= (address=(host=slc12ebg)) (connect_data=(service_name=ZOWG628UT7PQCWQ_PDB1_low.xyz.com)) (security=(ssl_server_cert_dn=\"CN=adwc-dev.uscom-east-1.xyz.com,OU=Testing Domain,O=End Point)) )</code></p>\n"}, {"tags": ["regex", "perl", "genetic-algorithm", "genetics"], "comments": [{"owner": {"reputation": 503, "user_id": 10367546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b939590245b2d75a807ed02e8367170?s=128&d=identicon&r=PG&f=1", "display_name": "AleksW", "link": "https://stackoverflow.com/users/10367546/aleksw"}, "edited": false, "score": 2, "creation_date": 1554975574, "post_id": 55629162, "comment_id": 97950137, "body": "Just a small tip first, instead of {3,3} you can use just {3}, and inead of {0,} you can use *, And you say it matching All of the sequence is a problem, what exactly do you want it to match?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1554977638, "post_id": 55629162, "comment_id": 97951437, "body": "You will have to give us example data. Most people here are software developers, not biologists. The meaning of your data likely makes no sense to us, and doesn&#39;t matter to solve your issue. Please <a href=\"https://stackoverflow.com/posts/55629162/edit\">edit</a> your question and include some gene sequences, and show which bits you want to match. Thanks."}, {"owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1554978714, "post_id": 55629162, "comment_id": 97952046, "body": "@simbabque I edited my question, hope it makes it clearer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1554986109, "post_id": 55629162, "comment_id": 97956304, "body": "According to the pattern you gave, you could have overlapping matches. Do you want to find all matches?"}], "answers": [{"tags": [], "owner": {"reputation": 821, "user_id": 8767753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b33c292d3b4b70d1d64bc4b89a670e?s=128&d=identicon&r=PG&f=1", "display_name": "PJProudhon", "link": "https://stackoverflow.com/users/8767753/pjproudhon"}, "is_accepted": true, "score": 1, "last_activity_date": 1554980301, "creation_date": 1554980301, "answer_id": 55630885, "question_id": 55629162, "link": "https://stackoverflow.com/questions/55629162/regex-for-matching-a-specific-pattern-only-if-it-doesnt-match-other-pattern/55630885#55630885", "title": "Regex for matching a specific pattern only if it doesn&#39;t match other pattern", "body": "<p>Problem here comes from the default usage of greedy quantifiers.</p>\n\n<p>When using <code>(AGGAGG)([ACGT]{4,12})(ATG)([ACTG]{3})*(TAA|TAG|TGA)</code>, 4th group <code>([ACTG]{3})*</code> will match as many as possible, then only 5th group is considered (backtracking if needed).<br>\nIn your sequence you get <code>TAGTAG</code>. Greedy quantifier will lead to first <code>TAG</code> being captured in group 4, and second one captured as ending group.</p>\n\n<p>You may use lazy quantifier instead: <code>(AGGAGG)([ACGT]{4,12})(ATG)([ACTG]{3})*?(TAA|TAG|TGA)</code> (note the added question mark, making the quantifier lazy).<br>\nThat way, first <code>TAG</code> encountered will be treated as the ending group.</p>\n\n<p><a href=\"https://regex101.com/r/LCFPAz/2/\" rel=\"nofollow noreferrer\">Demo</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1554986549, "creation_date": 1554986549, "answer_id": 55632804, "question_id": 55629162, "link": "https://stackoverflow.com/questions/55629162/regex-for-matching-a-specific-pattern-only-if-it-doesnt-match-other-pattern/55632804#55632804", "title": "Regex for matching a specific pattern only if it doesn&#39;t match other pattern", "body": "<p>According to the pattern you gave, you could have overlapping matches. The following will find all matches, including overlapping matches:</p>\n\n<pre><code>local our @matches;\n$seq =~ /\n   (\n   ( AGGAGG )\n   ( [ACGT]{4,12} )\n   ( ATG )\n   ( (?: (?! TAA|TAG|TGA ) [ACTG]{3} )* )\n   ( TAA|TAG|TGA )\n   )\n   (?{ push @matches, [ $-[1], $1, $2, $3, $4, $5, $6 ] })\n   (?!)\n/xg;\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7712945"}, "is_accepted": false, "score": 0, "last_activity_date": 1556185950, "creation_date": 1556185950, "answer_id": 55846480, "question_id": 55629162, "link": "https://stackoverflow.com/questions/55629162/regex-for-matching-a-specific-pattern-only-if-it-doesnt-match-other-pattern/55846480#55846480", "title": "Regex for matching a specific pattern only if it doesn&#39;t match other pattern", "body": "<p>Perl essential regex feature, as opposed to plain regex like grep, is the lazy quantifier: ? following the * or + quantifier. it matches zero (one) or more occurrence of the character preceding * (+) token as the shortest glob match as possible</p>\n\n<pre><code>$seq =~ /((AGGAGG)([ACGT]{4,12})(ATG)([ACGT]{3})*?(TAA|TAG|TGA))/igx\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 10675821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4097be1d7de1201ca93069000faa8783?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil\u0117 Vaini\u016bt\u0117", "link": "https://stackoverflow.com/users/10675821/kamil%c4%97-vaini%c5%abt%c4%97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 55630885, "answer_count": 3, "score": 0, "last_activity_date": 1556185950, "creation_date": 1554975010, "last_edit_date": 1554983471, "question_id": 55629162, "link": "https://stackoverflow.com/questions/55629162/regex-for-matching-a-specific-pattern-only-if-it-doesnt-match-other-pattern", "title": "Regex for matching a specific pattern only if it doesn&#39;t match other pattern", "body": "<p>I need to create a matching regex to find genetic sequences and I got stuck behind one specific problem - after first, start codon <code>ATG</code>, follows other codons from three nucleotides as well and the regex ends with three possible codons <code>TAA</code>, <code>TAG</code> and <code>TGA</code>. What if the stop(end) codon goes after the start(<code>ATG</code>) codon? My current regex works when there are intermediate codons between start and stop codon, but if there are none, the regex matches ALL of the sequence after start codon. I know why it does that, but I have no idea how to change it to work the way I want it to.</p>\n\n<p>My regex should look for <code>AGGAGG</code> (exactly this pattern), then <code>A</code>, <code>C</code>, <code>G</code> or <code>T</code> (from 4 to 12 times) then <code>ATG</code> (exactly this pattern), then <code>A</code>, <code>C</code>, <code>G</code> or <code>T</code> (in triples (for example, <code>ACG</code>, <code>TGC</code> and etc.), doesn't matter how long) UNTIL it matches <code>TAA</code>, <code>TAG</code> or <code>TGA</code>. The search should end after that and start again after that.</p>\n\n<p>Example of a good match:</p>\n\n<pre><code>XXXXXXXXXXXXXXXXXXXXXXXXX   XXXXXXXXXXXXXXXX\nAGGAGGTATGATGCGTACGGGCTAGTAGAGGAGGTATGATGTAGTAGCATGCT\n</code></pre>\n\n<p>There are two matches in the sequence - from 0 to 25 and from 28 to 44.</p>\n\n<p>My current regex(don't mind the first two brackets):</p>\n\n<pre><code>$seq =~ /(AGGAGG)([ACGT]{4,12})(ATG)([ACTG]{3,3}){0,}(TAA|TAG|TGA)/ig\n</code></pre>\n"}, {"tags": ["javascript", "ajax", "perl"], "comments": [{"owner": {"reputation": 65, "user_id": 10582377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/367efaa6ca1b350b146252193b6237ac?s=128&d=identicon&r=PG&f=1", "display_name": "mich kent", "link": "https://stackoverflow.com/users/10582377/mich-kent"}, "edited": false, "score": 0, "creation_date": 1554975435, "post_id": 55628893, "comment_id": 97950053, "body": "@Abigail upload.pl is the filename of the script, thats what i tried. so i just need help in both either JavaScript and perl code so wen i click send the progressbar starts and ends when send done"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 10582377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/367efaa6ca1b350b146252193b6237ac?s=128&d=identicon&r=PG&f=1", "display_name": "mich kent", "link": "https://stackoverflow.com/users/10582377/mich-kent"}, "edited": false, "score": 0, "creation_date": 1554994033, "post_id": 55629671, "comment_id": 97961858, "body": "(so there is nothing for your progress bar to report on. The progress is 0% before the call is made and 100% once it has returned.) . yes but i want the progressbar to function. tho the help i wanted is how i can fix the ajax with the perl code to move progress from 0% to 100% if sent"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1554976514, "creation_date": 1554976514, "answer_id": 55629671, "question_id": 55628893, "link": "https://stackoverflow.com/questions/55628893/progessbar-in-cgi-using-perl/55629671#55629671", "title": "progessbar in cgi using perl", "body": "<p>It looks like you misunderstand how Ajax works. It sounds like your Ajax call is re-requesting your main CGI program and that's probably not going to work. The Ajax call should be to a simpler program which returns a (usually) JSON response which contains the data that the main page requires.</p>\n\n<p>But also, the <a href=\"https://stackoverflow.com/a/54734102/7231\">fundamental problems that I mentioned to you in February</a> still exist. Your email is sent using a single call to <code>MIME::Lite::send()</code>, so there is nothing for your progress bar to report on. The progress is 0% before the call is made and 100% once it has returned.</p>\n"}], "owner": {"reputation": 65, "user_id": 10582377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/367efaa6ca1b350b146252193b6237ac?s=128&d=identicon&r=PG&f=1", "display_name": "mich kent", "link": "https://stackoverflow.com/users/10582377/mich-kent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554976514, "creation_date": 1554974240, "question_id": 55628893, "link": "https://stackoverflow.com/questions/55628893/progessbar-in-cgi-using-perl", "title": "progessbar in cgi using perl", "body": "<p>so far everything is working. but the prolem is with the progressar to start wen sending mails. </p>\n\n<p>i have found it hard for me to implement all examples of progressbar in cgi. </p>\n\n<p>the documentations are not so clear to me how progressbar is done in cgi. </p>\n\n<p>maybe someone can help me with my above code. so can practice and get idea how the progrssbar works with cgi. so can implement it on my future projects</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse lib '.';\nuse strict;\nuse warnings;\nuse DBI;\nuse CGI;\nuse MIME::Lite;\nuse CGI::Carp qw(fatalsToBrowser);\n\nmy $q = new CGI();\n\nmy $host =   \"localhost\";\nmy $usr =    \"root\";\nmy $pwd =    \"\";\nmy $dbname = \"tbl_users\";\n\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:$dbname:$host\", $usr, $pwd, {\n                                  AutoCommit =&gt; 0,\n                                  RaiseError =&gt; 1, \n                                  }) or die $DBI::errstr;\n\nmy $sub = $q-&gt;param(\"sub\");\nmy $msg = $q-&gt;param(\"msg\");\nmy $success;\n\nif ($sub) {\nmy $getemails = $dbh-&gt;prepare(\"SELECT DISTINCT EMAIL FROM USERS\");\n$getemails-&gt;execute();\nmy $dbemails = $getemails-&gt;fetchall_arrayref;\nmy $emails = join ',',map{$_-&gt;[0]}@$dbemails;\n\nmy $to = '';\nmy $from = 'noreplay@site.com';\nmy $subject = $sub;\nmy $message = \"\n\n$msg \n\n\";\n\nmy $MSG = MIME::Lite-&gt;new(\n                 From     =&gt; $from,\n                 To       =&gt; $to,\n                 Bcc      =&gt; $emails,\n                 Subject  =&gt; $subject,\n                 Data     =&gt; $message\n                 );\n\n$MSG-&gt;send; \n$success = \"mail was sent successfully\";\n\n}\n\n$dbh-&gt;disconnect || die \"$DBI::errstr\\n\";\n\nprint \"Content-type: text/html\\n\\n\";\nprint &lt;&lt;START_HTML;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Mail Send&lt;/title&gt;\n&lt;style type=\"text/css\"&gt;\n    body {\n        background-color: white;\n        font-family: Verdana;\n        font-size: small;\n        color: black\n    }\n    #trough {\n        background-color: silver;\n        border: 1px solid black;\n        height: 24px\n    }\n    #bar {\n        background-color: #669900;\n        height: 24px;\n        width: 1%\n    }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h1&gt;Mail My DB Customers&lt;/h1&gt;\n\n&lt;div id=\"form\" style=\"display: block; margin: auto; width: 350px\"&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;Send Mail&lt;/legend&gt;\n\n        &lt;form name=\"mail\"  method=\"post\" onSubmit=\"return sendMail(this)\"&gt;\n\n\n        Subject: &lt;input type=\"text\" name=\"sub\" size=\"20\"&gt;&lt;br&gt;\n        Message: &lt;input type=\"text\" name=\"msg\" size=\"20\"&gt;&lt;br&gt;\n\n        &lt;input type=\"submit\" value=\"Send Mail\"&gt;\n        &lt;/form&gt;\n    &lt;/fieldset&gt;\n&lt;/div&gt;\n\n&lt;div id=\"progress\" style=\"margin: auto; width: 350px\"&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;Sending...&lt;/legend&gt;\n\n        &lt;div id=\"trough\"&gt;&lt;div id=\"bar\"&gt;&lt;/div&gt;&lt;/div&gt;\n\n        Percent: &lt;span id=\"percent\"&gt;0&lt;/span&gt;%\n    &lt;/fieldset&gt;\n&lt;/div&gt;\n\n&lt;span&gt;$success&lt;/span&gt;\n\n&lt;div id=\"debug\"&gt;&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    // When the form is submitted.\n    function sendMail(frm) {\n\n        // Show the progress indicator.\n        document.getElementById(\"progress\").style.display = \"block\";\n\n        // Wait a bit and make ajax requests.\n        setTimeout(\"getProgress()\", 1000);\n\n        return true;\n    }\n\n    // Poll for our progress.\n    function getProgress() {\n        var ajax = new XMLHttpRequest();\n\n        ajax.onreadystatechange = function() {\n            if (ajax.readyState == 4) {\n                gotProgress(ajax.responseText);\n            }\n        };\n\n        ajax.open(\"GET\", \"upload.pl\" + Math.floor(Math.random()*99999), true);\n        ajax.send(null);\n    }\n\n    // Got an update\n    function gotProgress(txt) {\n\n\n        // Get vars outta it.\n        var percent = 0;\n\n        // Was it an error?\n        if (stat[0] == \"error\") {\n            document.getElementById(\"debug\").innerHTML += \"error: \" + stat[1];\n            setTimeout(\"getProgress()\", 1000);\n            return false;\n        }\n\n        // Separate the vars.\n        var parts = stat[1].split(\"&amp;\");\n\n        for (var i = 0; i &lt; parts.length; i++) {\n            var halves = parts[i].split(\"=\");\n\n\n            if (halves[0] == \"percent\") {\n                percent = halves[1];\n            }\n\n        }\n\n        document.getElementById(\"debug\").innerHTML += \"percent:\" + percent + \"&lt;br&gt;\\n\";\n\n        // Update the display.\n        document.getElementById(\"bar\").style.width = parseInt(percent) + \"%\";\n        document.getElementById(\"percent\").innerHTML = percent;\n\n        // Set another update.\n        setTimeout(\"getProgress()\", 1000);\n        return true;\n    }\n&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n\n\nSTART_HTML\n</code></pre>\n"}]