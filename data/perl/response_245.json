[{"tags": ["linux", "performance", "perl"], "comments": [{"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1568838125, "post_id": 58000168, "comment_id": 102406278, "body": "Have you done a brief comparison of the hardware involved in the two servers, the disk systems that are in use and how everything is configured? Days for a script to run sounds like hardware problems of some, or multiple sorts. Good luck."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 2, "creation_date": 1568844738, "post_id": 58000168, "comment_id": 102408357, "body": "Don&#39;t guess: Run the script using Devel::NYTProf and discover where time is being spent.  Since days of runtime is completely unacceptable, particularly for testing purposes, be sure to run against smaller data sets."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1568864288, "creation_date": 1568864288, "answer_id": 58003391, "question_id": 58000168, "link": "https://stackoverflow.com/questions/58000168/how-to-troubleshoot-very-slow-perl-script-that-runs-faster-on-one-server-but-slo/58003391#58003391", "title": "How to troubleshoot very slow perl script that runs faster on one server but slow on another", "body": "<p>One can't tell without knowing a lot more about the problem, in the first place about the size of data structures and of the file that's processed.</p>\n\n<p>Here is a generic comment on what would in principle be most time consuming operations in what the code seems to be doing, in a (probably) decreasing order of importance and/or likelihood </p>\n\n<ul>\n<li><p>How big is the file?  That's disk access and that can take <em>any</em> time</p></li>\n<li><p>Sorting in a loop -- how big is data that is getting sorted?  A <code>sort</code> is time consuming</p></li>\n<li><p>There's that \"tap dance\" around <code>@sorted</code>, which results in data copy -- how much data? </p></li>\n<li><p>In general, there is lots of data copying -- how large is <code>@targets</code> passed into the routine?</p></li>\n</ul>\n\n<p>As you can see, each factor comes with the question of how large the data is.  Disk access is of course costly, but a lot of data copying between various data structures in the program is just as important.</p>\n\n<p>So if you can provide some detail that'll help us give you a more detailed analysis/guess.</p>\n"}], "owner": {"reputation": 21, "user_id": 12087024, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD3wqs9Q-UjiwV6BdxvAf-cOCF0o0huDXsE1tCK=k-s128", "display_name": "nia", "link": "https://stackoverflow.com/users/12087024/nia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1568864288, "creation_date": 1568837803, "question_id": 58000168, "link": "https://stackoverflow.com/questions/58000168/how-to-troubleshoot-very-slow-perl-script-that-runs-faster-on-one-server-but-slo", "title": "How to troubleshoot very slow perl script that runs faster on one server but slow on another", "body": "<p>I received a perl script that is supposed to filter probes for Hi-C data, but it runs sooooooooo slow (several days). The one who gave me the script told me it only took a few hours on her previous lab's server, so I am wondering what would cause such a difference in run time, and how would I go about making it run faster? My knowledge of perl is very limited, but my google search so far suggests I may need to change some perl configuration files? Below is the main function in the whole script that takes the longest, the input file contains chromosome targets and locations. Any help would be greatly appreciated!</p>\n\n<p>I have tried running with perl 5.16 and 5.26 to see if maybe the version was too old, but it took just as long.</p>\n\n<pre><code>sub get_restriction_fragments_for_targets {\n\n    my @targets = @_;\n\n    # Split by chromsome and sort\n    my %targets;\n\n    foreach my $target (@targets) {\n            push @{$targets{$target-&gt;{chr}}},$target;\n    }\n\n    foreach my $chr (keys %targets) {\n            my @sorted = sort {$a -&gt; {start} &lt;=&gt; $b -&gt; {start}} @{$targets{$chr}};\n\n            # We also need to merge overlapping capture regions\n\n            my @merged;\n\n            my $last_region;\n\n            foreach my $region (@sorted) {\n                    unless ($last_region) {\n                            $last_region = $region;\n                            next;\n                    }\n\n                    if ($region-&gt;{start} &lt; $last_region -&gt; {end}) {\n                            # Merge\n                            if ($region -&gt;{end} &gt; $last_region-&gt;{end}) {\n                                    $last_region-&gt;{end} = $region-&gt;{end};\n                            }\n                            next;\n                    }\n\n                    push @merged,$last_region;\n                    $last_region = $region;\n            }\n\n            push @merged,$last_region;\n\n            $targets{$chr} = \\@merged;\n    }\n\n    my @target_fragments;\n\n    open (IN,'all_restriction_fragments.txt') or die $!;\n\n    my $last_chr = \"\";\n    my $last_index = 0;\n\n    while (&lt;IN&gt;) {\n            chomp;\n            my $line = $_;\n\n            my ($chr,$start,$end) = split(/\\t/);\n\n            if ($chr ne $last_chr) {\n                    warn \"Moving to $chr\\n\";\n                    $last_chr = $chr;\n                    $last_index = 0;\n            }\n\n            next unless (exists $targets{$chr});\n\n            my @local_targets = @{$targets{$chr}};\n\n            foreach my $index ($last_index .. $#local_targets) {\n                    my $target = $local_targets[$index];\n\n                    if ($target -&gt; {end} &lt; $start) {\n                            $last_index = $index;\n                            next;\n                    }\n\n                    if ($target -&gt; {start} &gt; $end) {\n                            last;\n                    }\n\n                    push @target_fragments,{\n                            id =&gt; $target-&gt;{id},\n                            chr =&gt; $chr,\n                            start =&gt; $start,\n                            end =&gt; $end,\n                    };\n                    last;\n            }\n    }\n\n    return @target_fragments;\n}\n</code></pre>\n"}, {"tags": ["linux", "bash", "perl"], "comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 6, "creation_date": 1568833345, "post_id": 57999182, "comment_id": 102404432, "body": "<code>read</code> doesn&#39;t do any buffering; it can only consume <i>exactly</i> the data it will assign to any variables, so that a subsequent <code>read</code> doesn&#39;t miss any data. As a result, it only consumes its input one character at a time. If you are concerned about performance, <code>bash</code> is the wrong language to use."}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1568835219, "post_id": 57999182, "comment_id": 102405172, "body": "I second the last line of that comment."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1568835856, "post_id": 57999182, "comment_id": 102405419, "body": "Can you explain the rule that applies to the last line of output, where you end up with <code>CAR*GM*YUKON**~</code> rather than <code>CAR*GM*YUKON*(random part)*~</code>? Also please clarify if the input file looks like <code>data~\\ndata</code> (as example input.txt indicates) or <code>data~data</code> as your sample code and description seem to indicate."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1568835985, "post_id": 57999182, "comment_id": 102405473, "body": "Why do you need an extra &quot;line delimiter&quot;? They&#39;re already separate lines."}, {"owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1568836514, "post_id": 57999182, "comment_id": 102405681, "body": "@DavidO @melpomene : Thank You for looking into the question. In the code i am checking if the data length in position 3 is greater than 0 then only update the element ```  ${#data[$position]} -gt 0 ``` .  no carriage return and line feed (CRLR) after delimiter ~.   example: data~data~  .  for understanding purposes i have posted like that in original question."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1568838495, "post_id": 57999182, "comment_id": 102406425, "body": "Also, you <b>never</b> want to put a command substitution in an inner loop. <code>$(...)</code> anything is bad. <code>$(shuf ...)</code> is worse, because not only is it a command substitution, but it&#39;s one running an external command. For the same reason, in a loop where you care about performance, creating a subshell to scope your <code>IFS</code> change isn&#39;t worth it."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1568838581, "post_id": 57999182, "comment_id": 102406450, "body": "...*also*, don&#39;t run <code>&gt;&gt; &#47;tgt&#47;output.txt</code> inside a loop -- that&#39;s re-opening the output file every iteration. Move the redirection to apply to the whole loop: <code>done &lt;&#47;src&#47;input.txt &gt;&#47;tgt&#47;output.txt</code>."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1568838628, "post_id": 57999182, "comment_id": 102406470, "body": "That said, big-picture, real-world? Bash is the wrong tool for the job. Personally, given a performance-sensitive text-processing task, I tend to reach for awk (if it&#39;s not an interesting enough problem to justify using <a href=\"https://julialang.org/benchmarks/\" rel=\"nofollow noreferrer\">Julia</a>)."}, {"owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568840840, "post_id": 57999182, "comment_id": 102407237, "body": "Thank you @CharlesDuffy .  I will research on replacing $(...) this. As DavidO suggested to keep the parts.txt file in buffer and read the values from buffer. I will try this out. Also i tried to redirect the output at the end of while loop &lt;/src/input.txt &gt;/tgt/output.txt. But still no performance improvement as i originally posted.  So that is the reason i asked if i can achieve this in perl script.    thanks again."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1568841411, "post_id": 57999182, "comment_id": 102407449, "body": "Note that &quot;please rewrite my script in-language-X/to-be-faster/whatever&quot; is generally a question that&#39;s broad enough to be outside our guidelines for permissible scope."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568844720, "post_id": 57999182, "comment_id": 102408354, "body": "...going back to the <code>shuf</code>, thing: On the outside of your loop, you can add a redirection (after the <code>done</code>) like <code>5&lt; &lt;(shuf &#47;tmp&#47;parts.txt)</code>, and then you read <code>read line &lt;&amp;5</code> inside the loop when you want to read a line from that ongoing stream without all the performance overhead of starting up a new copy of <code>shuf</code>. (<code>5</code> as a file descriptor number is arbitrary; it just has to be more than 2 so it doesn&#39;t interfere with stdin/stdout/stderr, and it&#39;s a good habit when possible to use a value less than 10 for historical/legacy/portability reasons)"}], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568841148, "post_id": 58000289, "comment_id": 102407341, "body": "Thank You David. I will try the scrip given by you. Can i just add perl scrip given by you inside the bash script ? like perl -e &quot;$(script)&quot;"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "reply_to_user": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568844289, "post_id": 58000289, "comment_id": 102408255, "body": "I provided a Perl script because the original question was tagged with &#39;perl&#39;.  Anyway, you wouldn&#39;t invoke it as <code>perl -e &quot;$(script)&quot;</code>, you would make it executable and invoke it as any other command: <code>&#47;path&#47;to&#47;script</code> or alternatively <code>perl &#47;path&#47;to&#47;script</code>. You would also want to work around the fact that I hard-coded filenames as relative paths.  You&#39;ll want to modify it to be more robust in how it deals with filenames. But again, the question was tagged &#39;perl&#39; for a reason, I assume."}], "tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": true, "score": 2, "last_activity_date": 1568908810, "last_edit_date": 1568908810, "creation_date": 1568838381, "answer_id": 58000289, "question_id": 57999182, "link": "https://stackoverflow.com/questions/57999182/while-loop-performance-extremely-slow/58000289#58000289", "title": "While Loop Performance : Extremely slow", "body": "<p>When working toward optimization the first step is to time how long it takes just to read the input file, and do nothing with it.  On my system that takes only a few hundredths of a second for a 10MB file.  </p>\n\n<p>So now we know the least amount of time it's going to take, we need to look at optimization strategies.  In your example code you are opening <code>parts.txt</code> and reading that file from the filesystem for every record in your input file.  So you're expanding the amount of work needed considerably. It would be nicer if you could keep the parts file in memory and just grab a random element from it for each record from your input file.</p>\n\n<p>The next optimization you can make is to avoid shuffling the list of parts each time you need a part. Better to grab a random element, than to shuffle the elements.</p>\n\n<p>You can also skip any processing for any records that don't begin with CAR, but that seems to be a lesser advantage.</p>\n\n<p>Anyway, the following accomplishes those objectives:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Getopt::Long;\nuse Time::HiRes qw(time);\n\nmy ($parts_file, $input_file, $output_file) = ('parts.txt', 'input.txt', 'output.txt');\n\nGetOptions(\n    \"parts=s\",  \\$parts_file,\n    \"input=s\",  \\$input_file,\n    \"output=s\", \\$output_file,\n);\n\nmy $t0 = time;\nchomp(\n    my @parts = do {\n        open my $fh, '&lt;', $parts_file or die \"Cannot open $parts_file: $!\\n\";\n        &lt;$fh&gt;;\n    }\n);\n\nopen my $input_fh, '&lt;', $input_file or die \"Cannot open $input_file for input: $!\\n\";\nlocal $/ = '~';\n\nopen my $out_fh,   '&gt;', $output_file or die \"Cannot open $output_file for output: $!\\n\";\n\nmy $rec_count = 0;\nwhile (my $rec = &lt;$input_fh&gt;) {\n    chomp $rec;\n    $rec =~ s{^\n        (CAR\\*(?:[^*]+\\*){2})\n        [^*]+\n    }{\n        $1 . $parts[int(rand(@parts))]\n    }xe;\n    ++$rec_count;\n    print $out_fh \"$rec$/\";\n}\n\nclose $out_fh or die \"Cannot close output file $output_file: $!\\n\";\nprintf \"Elapsed time: %-.03f\\nRecords: %d\\n\", time-$t0, $rec_count;\n</code></pre>\n\n<p>On my system a file consisting of 488321 records (approximately 10MB in size) takes 0.588 seconds to process.</p>\n\n<p>For your own needs you will want to take this Perl script and modify it to have more robust handling of filenames and filesystem paths. That's not part of the question that was asked, though.  The primary objective of this code is to demonstrate where optimizations can be taken; moving work out of the loop, for example; we only open the parts file once, we read it once, and we never shuffle; we just grab a random item from our in-memory list of parts.</p>\n\n<p>Since command-line \"one-liners\" are so convenient, we should see if this can be boiled down to one. Mostly equivalent functionality can be achieved in a Perl \"one-liner\" by using the <code>-l</code>, <code>-a</code>, <code>-p</code>, <code>-F</code>, and <code>-e</code> switches(I'm taking the liberty of letting it flow to multiple lines, though):</p>\n\n<pre><code>perl -l0176  -apF'\\*' -e '\n    BEGIN{\n        local $/ = \"\\n\";\n        chomp(@parts = do {open $fh, \"&lt;\", shift(@ARGV); &lt;$fh&gt;})\n    }\n    $F[0] =~ m/^CAR/ &amp;&amp; $F[3] =~ s/^\\w+$/$parts[int(rand(@parts))]/e;\n    $_ = join(\"*\", @F);\n' parts.txt input.txt &gt;output.txt\n</code></pre>\n\n<p>Here's how it works:</p>\n\n<p>The <code>-p</code> switch tells Perl to iterate over every line in the file specified on the command line, or if none is specified, over STDIN.  For each line, place the line's value into <code>$_</code>, and before moving on to the next line, print the contents of <code>$_</code> to STDOUT. This gives us the opportunity to modify <code>$_</code> such that changes get written to STDOUT. But we use the <code>-l</code> switch which lets us specify an octal value representing a different record separator. In this case we use the octal value for the <code>~</code> character.  This causes <code>-p</code> to iterate over records separated by <code>~</code> instead of <code>\\n</code>.  Also the <code>-l</code> switch strips record separators on input, and replaces them on output.</p>\n\n<p>However, we also use the <code>-a</code> and <code>-F</code> switches.  <code>-a</code> tells Perl to auto-split the input into the <code>@F</code> array, and <code>-F</code> lets us specify that we want to autosplit on the <code>*</code> character. Because <code>-F</code> accepts a PCRE pattern, and <code>*</code> is considered a quantifier in PCRE, we escape it with a backslash.</p>\n\n<p>Next the <code>-e</code> switch says to evaluate the following string as code.  Finally we can discuss the string of code. First there is a <code>BEGIN{...}</code> block which shifts one value off of <code>@ARGV</code> and uses it as a name of a file to open to read the parts list from.  Once that filename has been shifted off, it won't be considered for reading by the <code>-p</code> switch later in the script (the BEGIN block happens before the implicit <code>-p</code> loop).  So just consider that the code in the <code>BEGIN{...}</code> block temporarily sets the record separator back to newlines, reads the parts file into an array, and then relinquishes the record separator back to being <code>~</code> again.</p>\n\n<p>Now we can move on past the begin block.  <code>@F</code> has become the container holding the fields within a given record. The 4th field (offset 3) is the one you wish to swap. Check if the first field (offset 0) starts with <code>CAR</code>. If it does, set the contents of the 4th field to a random element from our parts array, but only if that field consists of one or more characters.</p>\n\n<p>Then we join back together the fields, delimited with an asterisk and assign that result back to <code>$_</code>. Our work is done. Thanks to the <code>-p</code> switch, Perl writes the contents of <code>$_</code> to STDOUT and then appends the record separator, <code>~</code>.</p>\n\n<p>Finally on the command line we first specify the path to the parts file, then the path to the input file, and then redirect STDOUT to our output file.</p>\n"}, {"tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 2, "last_activity_date": 1568842054, "last_edit_date": 1568842054, "creation_date": 1568841377, "answer_id": 58000829, "question_id": 57999182, "link": "https://stackoverflow.com/questions/57999182/while-loop-performance-extremely-slow/58000829#58000829", "title": "While Loop Performance : Extremely slow", "body": "<p><code>awk</code> is your answer here I think:</p>\n\n<pre><code>awk 'BEGIN{while(getline&lt;\"parts.txt\")r[++i]=$0;\n           FS=OFS=\"*\";\n           RS=ORS=\"~\";\n           srand()}\n     $1==\"CAR\"&amp;&amp;$4{$4=r[1+int(i*rand())]}\n     1' input.txt &gt;output.txt\n</code></pre>\n\n<p>Explanation:</p>\n\n<p><code>r[]</code> is an array that just holds all of the lines of <code>parts.txt</code>.</p>\n\n<p>Input and output field and record separators are set to match the format of your <code>input.txt</code> file.</p>\n\n<p><code>srand()</code> seeds the <code>rand()</code> function (with time of day) so you don't get the same sequence of random elements each time.</p>\n\n<p>If the conditions for changing the 4th field are met, the 4th field is changed to a random element of <code>r</code>.</p>\n\n<p>The final <code>1</code> just causes the line to be printed, whether changed or unchanged.</p>\n"}, {"comments": [{"owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568848977, "post_id": 58001362, "comment_id": 102409266, "body": "wow, you have written the logic in 1 line. Before posting this question i researched and learned about sed.  It seems sed has a limit of line size and there is no limit if we use GNU version of sed.  so all my options are out with bash and asked for perl.  I believe you are using GNU version of sed. Your answers takes back to me to use Linux code and different ways in achieving the desired output.   Just curious where did you mention the 3rd element position in sed command ? would you mind explaining <code>sed -E &#39;s&#47;^([^*]+)([*]CAR([*][^*]+){2}[*])[^*]+&#47;\\1\\2\\1&#47;&#39;</code> ?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568850316, "post_id": 58001362, "comment_id": 102409556, "body": "@skv: count the stars :-) A field is a <code>*</code> followed by any number of characters which are not <code>*</code>: (regex: <code>[*][^*]*</code>). The fourth field uses <code>[^*]+</code> in order to guarantee thee is at least one character. There&#39;s no problem with line length here because I&#39;ve turned all the <code>~</code> into newlines before passing it through sed."}, {"owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568855069, "post_id": 58001362, "comment_id": 102410351, "body": "thank you for the explanation. I am very new to sed using the regex.  Still not understanding.  where in sed you are counting and how you are using that count to find the position 3 ?   the reason i am asking is i am trying to keep the position value as input variable, so that i can use variable $position in sed command."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568866342, "post_id": 58001362, "comment_id": 102412238, "body": "@skv: I think this is not really the place for a regex tutorial; there are many. But the count is encoded in the repetition operator (<code>{2}</code>); the field pattern is repeated twice for position=3 because the first field has already been matched with <code>CAR</code>. I made a version which lets you specify segment and position as script arguments."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568866736, "post_id": 58001362, "comment_id": 102412302, "body": "<code>$(($2-1))</code> means &quot;the second parameter minus one&quot;; arithmetic expressions written with <code>$((...))</code> are not required by Posix, but are implemented by most shells, including bash."}, {"owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568901535, "post_id": 58001362, "comment_id": 102429610, "body": "thank you. I am trying this code now. Will update the post regarding performance"}, {"owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568910486, "post_id": 58001362, "comment_id": 102434522, "body": "i just tried the script and compared with old while loop. Just wow. Huge improvement. sed with regex completed in seconds and while loop taking more than 15 minutes.  Can we add audit to the script given by you as i did in my while loop ?  example: in my while loop i added variables a and b.  $a gives total segments with CAR and $b variable gives total elements that got replaced"}, {"owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 0, "creation_date": 1568911386, "post_id": 58001362, "comment_id": 102434921, "body": "also in while loop i have capability of further filtering the input.  example; <code>SUV*FORD*EXPLORER*GLASS*SAFE~ </code>  , data[0]=SUV &amp;&amp; data[1]=FORD then look for GLASS field in the line if found then update the value next to GLASS if not empty with parts file.     to filter the line with SUV and FORD i can simply add second variable for FORD like <code>sedcmd=&#39;s&#47;^([^*]*)([*]&#39;$1&#39;[*]&#39;$2&#39;[*]([^*]*[*]){&#39;$(($2-1))&#39;})&zwnj;&#8203;([^*]+)&#47;\\1\\2\\1&#47;&#39;</code> , but not sure how i can then search for GLASS and position value next to GLASS"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "edited": false, "score": 1, "creation_date": 1568922944, "post_id": 58001362, "comment_id": 102439843, "body": "Yeah, if your requirements are more complicated, you really should look at doing it with AWK."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1568866594, "last_edit_date": 1568866594, "creation_date": 1568844728, "answer_id": 58001362, "question_id": 57999182, "link": "https://stackoverflow.com/questions/57999182/while-loop-performance-extremely-slow/58001362#58001362", "title": "While Loop Performance : Extremely slow", "body": "<p>I absolutely agree that there are languages other than bash which will be both easier and faster.</p>\n\n<p>Still, some days I can't resist a challenge. The key to making shell scripts run fast is to do as little as possible in the shell; try to find a way to use external utilities to work in bulk instead of line by line.</p>\n\n<p>The following shell script is a crude example. It does several things in order to avoid looping in shell:</p>\n\n<ul>\n<li><p>The Gnu version of <code>shuf</code> provides the <code>-r</code> flag to generate a (potentially infinite) sequence of random lines taken from its input, instead of shuffling the input.</p></li>\n<li><p>The <code>paste</code> command does line-by-line concatenation of two input streams. (Unfortunately, it does not have a way of stopping when the shortest stream finishes, so you can't use it with an infinite stream. That forces an awkward extra scan of the input text in order to count the number of lines.)</p></li>\n<li><p>It's possible to encode the criteria \"the first field is <code>CAR</code> and the fourth field is not empty\" as a single regular expression. That lets us do all the selection and substitution with a single invocation of <code>sed</code>.</p></li>\n<li><p>The input file uses <code>~</code> instead of newline to delimit records, which is awkward for most Linux text file tools. We can use <code>tr '~' '\\n'</code> to turn the tildes into newlines and <code>tr '\\n' '~'</code> to turn newlines back into tildes at the end.</p></li>\n</ul>\n\n<p>So here's the script:</p>\n\n<pre><code># Count the number of \"lines\" in the input:\ncount=$(tr '~' '\\n' &lt;input.txt | wc -l)\n# (paste) Paste together a column of random parts with the original input;\n# (sed)   then substitute  what is now the fifth column with the new first column\n#         if the criteria are met.\n# (cut)   Finally strip out the column of random parts and\n# (tr)    restore the record terminator ~ to return to the original format:\npaste -d '*' &lt;(shuf -rn$count parts.txt) \\\n             &lt;(tr '~' '\\n' &lt;input.txt) |\nsed -E 's/^([^*]+)([*]CAR([*][^*]+){2}[*])[^*]+/\\1\\2\\1/' |\ncut -f2- -d'*' |\ntr '\\n' '~'\n</code></pre>\n\n<p>And here's a sample run:</p>\n\n<pre><code># The input is 500,000 lines -- about 10MB -- created at random\n# from the short input data in the question\n$ tr '~' '\\n' &lt; input.txt | wc\n500000  500000 10498615\n$ tr '~' '\\n' &lt; input.txt | head\nCAR*BMW*X5*SEAT\nSUV*FORD*EXPLORER*GLASS*SAFE\nCAR*GM*YUKON**\nCAR*BMW*X1*BUMBER*PLATE\nSUV*FORD*EXPLORER*GLASS*SAFE\nSUV*FORD*EXPLORER*GLASS*SAFE\nCAR*AUDI*A5*HOOD\nCAR*AUDI*A5*HOOD\nCAR*AUDI*A5*HOOD\nCAR*FORD*FUSION*QNX\n\n# The script takes a couple of seconds\n$ time ./xform.sh &gt; output.txt\n\nreal    0m1.517s\nuser    0m1.690s\nsys     0m0.121s\n\n# It seems to do the right thing:\n$ tr '~' '\\n' &lt; output.txt | head\nCAR*BMW*X5*NXP\nSUV*FORD*EXPLORER*GLASS*SAFE\nCAR*GM*YUKON**\nCAR*BMW*X1*GOOGLE*PLATE\nSUV*FORD*EXPLORER*GLASS*SAFE\nSUV*FORD*EXPLORER*GLASS*SAFE\nCAR*AUDI*A5*GOOGLE\nCAR*AUDI*A5*BLACKBERRY\nCAR*AUDI*A5*BLACKBERRY\nCAR*FORD*FUSION*NXP\n</code></pre>\n\n<hr>\n\n<p>Here's a version of the above script which requires you to specify the value of field 0 (\"<code>$segment</code>\") and the field number to substitute (\"<code>$position</code>\") as script parameters. It completely lacks checks on the validity of arguments, and it doesn't provide default values either. A robust script would do better. But it hopefully gives some idea as to how to parameterise the script. (That's done by building the <code>sed</code> regex using the supplied parameters).</p>\n\n<pre><code>#!/bin/bash\n# $1 is the string to match in field 0. It must not contain / nor any regex\n# metacharacter.\n# $2 is the number of the field to substitute. It must be &gt; 0.\n# Make the sed command:\nsedcmd='s/^([^*]*)([*]'$1'[*]([^*]*[*]){'$(($2-1))'})([^*]+)/\\1\\2\\1/'\n# Count the number of \"lines\" in the input:\ncount=$(tr '~' '\\n' &lt;input.txt | wc -l)\n# (paste) Paste together a column of random parts with the original input;\n# (sed)   then substitute  what is now the (position+1) column with the new first column\n#         if the criteria are met.\n# (cut)   Finally strip out the column of random parts and\n# (tr)    restore the record terminator ~ to return to the original format:\npaste -d '*' &lt;(shuf -rn$count parts.txt) \\\n             &lt;(tr '~' '\\n' &lt;input.txt) |\nsed -E \"$sedcmd\" |\ncut -f2- -d'*' |\ntr '\\n' '~'\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>$ time ./xform.sh CAR 3 &gt; output.txt\n\nreal    0m1.519s\nuser    0m1.712s\nsys     0m0.120s\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 11842751, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-74fCOXTy4Us/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rejVW6wK6Q8ne8krYcM-SZxTx4ilg/photo.jpg?sz=128", "display_name": "skv", "link": "https://stackoverflow.com/users/11842751/skv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 58000289, "answer_count": 3, "score": 0, "last_activity_date": 1568908810, "creation_date": 1568832836, "last_edit_date": 1568835694, "question_id": 57999182, "link": "https://stackoverflow.com/questions/57999182/while-loop-performance-extremely-slow", "title": "While Loop Performance : Extremely slow", "body": "<p>I have input.txt and parts.txt file as below: </p>\n\n<pre><code>input.txt\nCAR*BMW*X1*BUMBER*PLATE~\nCAR*AUDI*A5*HOOD~\nCAR*MAZDA*CX3*QNX*DIGITAL~\nCAR*BMW*X5*SEAT~\nSUV*FORD*EXPLORER*GLASS*SAFE~\nCAR*FORD*FUSION*QNX~\nCAR*GM*YUKON**~\n</code></pre>\n\n<pre><code>parts.txt\nBLACKBERRY\nGOOGLE\nNXP\n</code></pre>\n\n<p>Below bash code written in red hat Linux server and it is taking long time. Example i have input file that is 10MB in size and it took 3 hours to complete the process. </p>\n\n<pre><code>#!/bin/bash\nsegment=CAR\nposition=3\na=0\nb=0\nwhile IFS='*' read -r -d'~' -a data; do\n    if [ \"${data[0]}\" = \"$segment\" ]; then\n        if [ ${#data[$position]} -gt 0 ]; then\n           data[$position]=$(shuf -n1 \"/tmp/parts.txt\")\n        b=$((b+1))\n        fi\n    a=$((a+1))\n    fi\n    # and output the data\n     (IFS=*; printf \"%s~\" \"${data[*]}\";)  &gt;&gt; /tgt/output.txt\ndone &lt; /src/input.txt \n</code></pre>\n\n<pre><code>output.txt\nCAR*BMW*X1*BLACKBERRY*PLATE~\nCAR*AUDI*A5*NXP~\nCAR*MAZDA*CX3*NXP*DIGITAL~\nCAR*BMW*X5*GOOGLE~\nSUV*FORD*EXPLORER*GLASS*SAFE~\nCAR*FORD*FUSION*BLACKBERRY~\nCAR*GM*YUKON**~\n</code></pre>\n\n<p>Explanation of code: \nfor all the \"CAR\" segments in input.txt file i am trying to update the 3rd position in that line with random data from parts.txt file using shuf command. \neach field in line (input.txt) is separated by * and line delimiter is ~. </p>\n\n<p>question: Can we improve the performance of above while statement ?\nI tried below code to write the output.txt in one shot instead writing multiple times in while loop, but still this is taking time for 10MB input.txt file</p>\n\n<pre><code> (IFS=*; printf \"%s~\" \"${data[*]}\";)\ndone &lt; input.txt &gt; output.txt \n</code></pre>\n\n<p>I searched online and everyone is telling pearl works good for these kinds of scenarios. Can we write this while loop using pearl commands and how?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": true, "score": 2, "last_activity_date": 1568828550, "creation_date": 1568828550, "answer_id": 57998195, "question_id": 57998009, "link": "https://stackoverflow.com/questions/57998009/add-dipeptide-frequency-in-this-perl-script-based-on-sequence-length/57998195#57998195", "title": "Add dipeptide frequency in this perl script based on sequence length", "body": "<p>This is pretty ugly code (should be rewritten entirely), but I think you want:</p>\n\n<pre><code>my $length = @dipeps;\nmap{exists $di_count{$_}?print \" \",$di_count{$_}/$length:print \" \",0}sort @comb;\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 4495740, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/02383bff4bd71b7dc86d32b9b4742fe1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4495740/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "accepted_answer_id": 57998195, "answer_count": 1, "score": 0, "last_activity_date": 1568828550, "creation_date": 1568827711, "question_id": 57998009, "link": "https://stackoverflow.com/questions/57998009/add-dipeptide-frequency-in-this-perl-script-based-on-sequence-length", "title": "Add dipeptide frequency in this perl script based on sequence length", "body": "<p>I have a perl script to get the di-peptide counts (there are 400 combinations, for example- AA, AC, AD, AE...) from sequences (fasta format). But I would like to add the frequency based on the sequence lengths. I have a input with multiple sequences (myfile.fasta).</p>\n\n<p>I tried to do it, but I got the wrong results. Im am not very familiar with perl. </p>\n\n<p>My script:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Bio::SeqIO;\n\nmy @amino=qw/A C D E F G H I K L M N P Q R S T V W Y/;\nmy @comb=();\n\nforeach my $a (@amino){\n    foreach my $b (@amino){\n                push (@comb,$a.$b)\n        }\n}\nmy $in  = Bio::SeqIO-&gt;new(-file =&gt; \"myfile.fasta\" , '-format' =&gt; 'Fasta');\nwhile ( my $seq= $in-&gt;next_seq ) {\nmy @dipeps=($seq-&gt;seq()=~/(?=(.{2}))/g);\nmy %di_count=();\n$di_count{$_}++ for @dipeps;\nprint $seq-&gt;id();\nmap{exists $di_count{$_}?print \" \",$di_count{$_}:print \" \",0}sort @comb;\nprint \"\\n\";\n}\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>map{exists $di_count{$_}?print \" \",$di_count{$_}:print \" \",0}sort @comb/length;\n\nmap{exists $di_count{$_}?print \" \",$di_count{$_}:print \" \",0/length}sort @comb;\n</code></pre>\n\n<p>I also tried to define the length, such as:</p>\n\n<pre><code>my $seq_len = length($seq);\n</code></pre>\n\n<p>Also, I do not want to define the input file in the script, I would like to define like \"perl script.pl input.fasta > result.txt\". For that I should use:</p>\n\n<pre><code>open (S, \"$ARGV[0]\") || die \"cannot open FASTA file to read: $!\"; \n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1568809199, "post_id": 57991933, "comment_id": 102392128, "body": "Because my answer was downvoted, I give you a solution in comment, instead of the 3 lines, use only this one: <code>$sdn =~  s&#47;(,)|[=&quot;]&#47;$1?&#39;.&#39;:&#39;&#39;&#47;eg;</code> that does exactly the same"}, {"owner": {"reputation": 13, "user_id": 9085392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yw1_mDxP3kI/AAAAAAAAAAI/AAAAAAAAAWc/RriKe9Jj1IQ/photo.jpg?sz=128", "display_name": "David Gonz&#225;lez Arias", "link": "https://stackoverflow.com/users/9085392/david-gonz%c3%a1lez-arias"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1568810526, "post_id": 57991933, "comment_id": 102392882, "body": "@Toto Just what I needed, thank you!!!"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568812995, "post_id": 57991933, "comment_id": 102394324, "body": "Look, there is a post on exactly what you are asking for - <a href=\"https://stackoverflow.com/questions/43616380/conditional-in-perl-regex-replacement\">Conditional in perl regex replacement</a>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9085392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yw1_mDxP3kI/AAAAAAAAAAI/AAAAAAAAAWc/RriKe9Jj1IQ/photo.jpg?sz=128", "display_name": "David Gonz&#225;lez Arias", "link": "https://stackoverflow.com/users/9085392/david-gonz%c3%a1lez-arias"}, "edited": false, "score": 0, "creation_date": 1568885619, "post_id": 58007784, "comment_id": 102420343, "body": "I used Toto solution: <code>$sdn =~ s&#47;(,)|[=&quot;]&#47;$1?&#39;.&#39;:&#39;&#39;&#47;eg;</code> <a href=\"https://stackoverflow.com/questions/3638205/whats-the-difference-between-tr-and-s-when-using-regex-in-perl\">TR vs S perl</a> TR is faster than S for substitutions so I will change my solution to your code, Thanks!!"}, {"owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "reply_to_user": {"reputation": 13, "user_id": 9085392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yw1_mDxP3kI/AAAAAAAAAAI/AAAAAAAAAWc/RriKe9Jj1IQ/photo.jpg?sz=128", "display_name": "David Gonz&#225;lez Arias", "link": "https://stackoverflow.com/users/9085392/david-gonz%c3%a1lez-arias"}, "edited": false, "score": 0, "creation_date": 1568886284, "post_id": 58007784, "comment_id": 102420714, "body": "@DavidGonz&#225;lezArias: Toto&#39;s solution works well, but translation is faster than substitution. Also, in case, if you need to add other chars also, you can add in translation without worrying about to add any condition in substitution."}], "tags": [], "owner": {"reputation": 1652, "user_id": 4414367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-l6uq-uiBGvg/AAAAAAAAAAI/AAAAAAAAAVA/F0AWblrmSTM/photo.jpg?sz=128", "display_name": "Kamal Nayan", "link": "https://stackoverflow.com/users/4414367/kamal-nayan"}, "is_accepted": true, "score": 1, "last_activity_date": 1568885037, "creation_date": 1568885037, "answer_id": 58007784, "question_id": 57991933, "link": "https://stackoverflow.com/questions/57991933/perl-simple-regex-from-3-lines-to-1-change-characters-and-delete-characters/58007784#58007784", "title": "PERL | Simple Regex from 3 lines to 1. Change characters and delete characters", "body": "<p>Why don't you go by inbuilt translation <code>tr</code>? First part of my answer contains your solution, and next part is mine with translation.</p>\n\n<pre><code>my $sdn = '\"OMC=1,IONU=1,RACK=3,SR=6,SLOT=8,LPRU=1\"';  # Format: Remove \"=\". Replace \",\" by \".\"\n$sdn =~ s/[,]/./g; #tr[,][.];\n$sdn =~ s/[=]//g;\n$sdn =~ s/[\"]//g;\nprint $sdn;            # OMC1.IONU1.RACK3.SR6.SLOT8.LPRU1\n\n# re-assigned the same thing and used translation\n$sdn = '\"OMC=1,IONU=1,RACK=3,SR=6,SLOT=8,LPRU=1\"';  # Format: Remove \"=\". Replace \",\" by \".\"\n$sdn =~ tr/,=\"/./d;    # OMC1.IONU1.RACK3.SR6.SLOT8.LPRU1\nprint $sdn;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9085392, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yw1_mDxP3kI/AAAAAAAAAAI/AAAAAAAAAWc/RriKe9Jj1IQ/photo.jpg?sz=128", "display_name": "David Gonz&#225;lez Arias", "link": "https://stackoverflow.com/users/9085392/david-gonz%c3%a1lez-arias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 58007784, "answer_count": 1, "score": -2, "last_activity_date": 1568885037, "creation_date": 1568806818, "question_id": 57991933, "link": "https://stackoverflow.com/questions/57991933/perl-simple-regex-from-3-lines-to-1-change-characters-and-delete-characters", "title": "PERL | Simple Regex from 3 lines to 1. Change characters and delete characters", "body": "<p>Im trying to get this code in 1 line using PERL.</p>\n\n<p>Is that possible?</p>\n\n<pre><code>$sdn = '\"OMC=1,IONU=1,RACK=3,SR=6,SLOT=8,LPRU=1\"';  # Format: Remove \"=\". Replace \",\" by \".\"\n$sdn =~ s/[,]/./g; #tr[,][.];\n$sdn =~ s/[=]//g;\n$sdn =~ s/[\"]//g;\nprint $sdn;\n</code></pre>\n\n<p>Online perl editor: <a href=\"https://www.tutorialspoint.com/execute_perl_online.php\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/execute_perl_online.php</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1568811223, "post_id": 57989765, "comment_id": 102393268, "body": "The code simply dies when evaluating arguments before the non-existing function <code>try</code> is called."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1568811969, "post_id": 57989765, "comment_id": 102393695, "body": "@nwellnhof So, as argument call for <code>try</code> (<code>call_a</code>) runs before call to <code>try</code> itself and dies during it, <code>try</code> is never tried. I tried <code>anything</code> instead of <code>try</code>, with same result. Your analysis seems correct. Submit it as an answer, please."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1568812461, "post_id": 57989765, "comment_id": 102393975, "body": "@nwellnhof Still, I made another version, when <code>call_a</code> randomly dies. And if it does die, <code>catch</code> block runs too. If <code>catch</code> dies too, then is still no errors. If <code>catch</code> does not <code>die</code>, we got error: <code>Can&#39;t locate object method &quot;catch&quot;</code>. It does not disprove your analysis, of course. It just illustrates, how you can cut yourself with this."}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1568813563, "post_id": 57989765, "comment_id": 102394638, "body": "correction: &#39;And if it does not die&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568846309, "post_id": 57997918, "comment_id": 102408743, "body": "You mention <code>METHODNAME PKGNAME LIST</code>, but the code uses <code>METHODNAME BLOCK LIST</code>. You might want the clarify that the latter is equivalent to <code>(do BLOCK)-&gt;METHODNAME(LIST)</code>. You see this for <code>catch</code> in the Deparse, but Deprase continued to use the indirect notation for <code>try</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568847120, "post_id": 57997918, "comment_id": 102408938, "body": "In fact, because Deparse still uses an indirect method call, I&#39;d avoid using it in the answer at all. <a href=\"https://pastebin.com/bRGZ8ymn\" rel=\"nofollow noreferrer\">Suggested edit</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568876758, "post_id": 57997918, "comment_id": 102415761, "body": "@ikegami Edited, thank you.  Probably (way) too long/wordy but at least should be clear now"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1568881744, "post_id": 57997918, "comment_id": 102418254, "body": "@zdim Thank you for such thorough explanation!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1568909703, "post_id": 57997918, "comment_id": 102434164, "body": "@w.k  You are welcome and thanks for saying that :)  Let me know if more/better is needed"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 11, "last_activity_date": 1570171872, "last_edit_date": 1570171872, "creation_date": 1568827254, "answer_id": 57997918, "question_id": 57989765, "link": "https://stackoverflow.com/questions/57989765/why-does-try-not-cause-an-undefined-subroutine-error/57997918#57997918", "title": "Why does &quot;try&quot; not cause an undefined subroutine error?", "body": "<p>This is due to the indirect-object syntax, and is a more elaborate variation on <a href=\"https://stackoverflow.com/a/11695310/4653379\">this example</a>.  </p>\n\n<p>The <a href=\"https://perldoc.perl.org/perlobj.html#Invoking-Class-Methods\" rel=\"nofollow noreferrer\">\"indirect object notation\"</a> allows code</p>\n\n<pre><code>PackageName-&gt;method(@args);\n</code></pre>\n\n<p>to be written as</p>\n\n<pre><code>method PackageName @args;\n</code></pre>\n\n<p>So the \"try\" and \"catch\" words don't matter.  The interesting bit here is the more involved and extended syntax, with two parts, each in this indirect object notation.</p>\n\n<p>The code in question in fact has <code>method BLOCK LIST</code> form, but that also goes by indirect object syntax into <code>(do BLOCK)-&gt;method(LIST)</code>, where <code>do BLOCK</code> needs to produce a name of a package or a blessed (object) reference for a meaningful method call.  This is seen below in <code>Deparse</code> output.</p>\n\n<p>Using <a href=\"https://perldoc.perl.org/B/Deparse.html\" rel=\"nofollow noreferrer\">B::Deparse</a> compiler backend (via <a href=\"https://perldoc.perl.org/O.html\" rel=\"nofollow noreferrer\">O</a> module) on this code</p>\n\n<pre><code>use strict; \nuse warnings;\nuse feature 'say';\n\ntry   { call_a( 'x' ) } \ncatch { \n    die \"ACTUALLY die\";\n    #say \"NO DONT die\";\n};\n\nsub call_a { \n    die \"Yes it dies\";\n    #say \"no die\";\n}\n</code></pre>\n\n<p>as <code>perl -MO=Deparse script.pl</code> should show a very close approximation of what runs:</p>\n\n<pre>\nuse warnings;\nuse strict;\nuse feature 'say';\ntry {\n    call_a('x')\n} do {\n    die 'ACTUALLY die'\n}->catch;\nsub call_a {\n    use warnings;\n    use strict;\n    use feature 'say';\n    die 'Yes it dies';\n}\nundef_sub.pl syntax OK\n</pre>\n\n<p>The nested indirect object syntax is apparently too much for <code>Deparse</code> which still leaves <code>method BLOCK LIST</code> form in the output. The equivalent code can be spelled out as</p>\n\n<pre><code>(do { call_a('x') })-&gt;try( (do { die(\"ACTUALLY die\") })-&gt;catch() );\n</code></pre>\n\n<p>what in this case is more simply</p>\n\n<pre><code>call_a('x')-&gt;try( die(\"ACTUALLY die\")-&gt;catch() );\n</code></pre>\n\n<p>Thus the original code is interpreted as valid syntax (!) and it is the <em>contents of the block after <code>try</code> (<code>call_a('x')</code>) that runs first</em> --- so the program dies and never gets to go for the \"method\" <code>try</code>.</p>\n\n<p>It gets more interesting if we change the example to </p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\n\ntry   { call_a( 'x' ) }\ncatch {\n    #die \"ACTUALLY die\"; \n    say \"NO DONT die\";\n};\n\nsub call_a {\n    #die \"Yes it dies\";\n    say \"no die\";\n}\n</code></pre>\n\n<p>with no <code>die</code>-ing  anywhere. Run it with <code>-MO=Deparse</code> to see</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\ntry {\n    call_a('x')\n} (catch {\n    say 'NO DONT die'\n} );\nsub call_a {\n    use warnings;\n    use strict;\n    use feature 'say';\n    say 'no die';\n}\nundef_sub.pl syntax OK\n</code></pre>\n\n<p>which is now in a straight-up <code>method {} args</code> syntax (with <code>args</code> itself shown by <code>Deparse</code> in an indirect object notation as well). \nThe equivalent code is</p>\n\n<pre><code>call_a('x')-&gt;try( say(\"NO DONT die\")-&gt;catch() );\n</code></pre>\n\n<p>where first the <code>call_a()</code> goes and, after it returns, then the code for the argument list in the <code>try</code> method call runs next. We aren't running into a <code>die</code> and an actual run goes as</p>\n\n<pre>\nno die\nNO DONT die\nCan't call method \"catch\" without a package or object reference at ...\n</pre>\n\n<p>So now a problem with the <em>method \"catch\"</em> does come up.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for comments </p>\n\n<hr>\n\n<p>If the block above <em>were to</em> return a name of a package (or object reference) which does have a method <code>catch</code> then the <code>try</code> would finally be attempted as well</p>\n\n<pre><code>use strict; \nuse warnings;\nuse feature 'say';\n\nBEGIN {\n    package Catch;\n    sub catch { say \"In \", (caller(0))[3] };\n    $INC{\"Catch.pm\"} = 1;\n};\n\nuse Catch;\n\ntry   { call_a( 'x' ) } \ncatch { \n    say \"NO DONT die\";\n    \"Catch\";\n};\n\nsub call_a { say \"no die\" }\n</code></pre>\n\n<p>Now we have the equivalent</p>\n\n<pre><code>call_a('x')-&gt;try( do { say(\"NO DONT die\"); 'Catch' }-&gt;catch() );\n</code></pre>\n\n<p>with the output </p>\n\n<pre>\nno die\nNO DONT die\nIn Catch::catch\nCan't call method \"try\" without a package or object reference at undef_sub.pl line 14.\n</pre>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 2, "accepted_answer_id": 57997918, "answer_count": 1, "score": 16, "last_activity_date": 1570171872, "creation_date": 1568799867, "last_edit_date": 1568809664, "question_id": 57989765, "link": "https://stackoverflow.com/questions/57989765/why-does-try-not-cause-an-undefined-subroutine-error", "title": "Why does &quot;try&quot; not cause an undefined subroutine error?", "body": "<p>A couple of times I've ran into the situation where I've forgotten to load the <code>Try::Tiny</code> module in my script and I've still used its <code>try-catch</code> block, like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict; \nuse warnings;\n\ntry {\n  call_a( 'x' );\n} catch {\n  die \"ACTUALLY die $_\";\n};\n\n\nsub call_a {\n  die \"Yes, I will\";\n}\n</code></pre>\n\n<p>For some reason, the script works fine without giving any hints that there is no <code>try</code>. No <code>Undefined subroutine</code> errors. This makes me wonder why my raised exceptions are not caught.</p>\n\n<p>Why does this work silently, without an error?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I looked into symbol table as well:</p>\n\n<pre><code>say \"$_: %main::{ $_ }\" for keys %main::; \n</code></pre>\n\n<p>and found there no <code>try</code>. Also I tried to call it as <code>main::try</code> in the script above, and it caused also no errors.</p>\n"}, {"tags": ["arrays", "perl", "split"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568910479, "post_id": 57989708, "comment_id": 102434519, "body": "(1) The <code>glob</code> you show evaluates to <i>one</i> item, that <code>c:&#47;temp.txt</code> string. Perhaps you do it for simplicity but why not something more realistic, like <code>c:&#47;*.txt</code> (2) When an <code>open</code> fails one normally looks at <code>$!</code> variable. If that <code>$OS_ERROR</code> is involved in some cooky overloading or such (and it incorporates <code>$!</code>) then so be it, but otherwise you should print <code>$!</code> as well"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568910554, "post_id": 57990012, "comment_id": 102434556, "body": "And if they want to keep info about individual lines put references of <code>@array</code> on another array, <code>my @lines; for(...) { ... my @ary = split ...; push @lines, \\@ary }</code>"}], "tags": [], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1568800626, "creation_date": 1568800626, "answer_id": 57990012, "question_id": 57989708, "link": "https://stackoverflow.com/questions/57989708/perl-scoping-array-variable-for-loop/57990012#57990012", "title": "Perl Scoping Array variable - for loop", "body": "<p>You need to declare your array in the scope, where you need to use it. So, if you need it outside of the loop, declare it before the loop and it is available in the loop also. Like:</p>\n\n<pre><code>my @array;\n\nforeach my $fp (glob(\"c/temp.txt\"))\n{\n...\n   @array= split /[,\\(\\)]/, $line; \n...\n }\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 11022116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10bee290113b45f98bfe6116789d4a4b?s=128&d=identicon&r=PG&f=1", "display_name": "CodeKhaleesi", "link": "https://stackoverflow.com/users/11022116/codekhaleesi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57990012, "answer_count": 1, "score": 1, "last_activity_date": 1568800626, "creation_date": 1568799649, "question_id": 57989708, "link": "https://stackoverflow.com/questions/57989708/perl-scoping-array-variable-for-loop", "title": "Perl Scoping Array variable - for loop", "body": "<p>Im a newbie to Perl. My ask is to fill a array inside for loop and use the variable outside the loop.</p>\n\n<pre><code>foreach my $fp (glob(\"c/temp.txt\"))\n{\n  open my $fh, \"&lt;\", $fp or die \"can't read open '$fp': $OS_ERROR\";\n  while (my $line = &lt;$fh&gt;)\n  {\n    chomp($line);\n   my @array= split /[,\\(\\)]/, $line; \n  }\n  close $fh or die \"can't read close '$fp': $OS_ERROR\";\n }\n</code></pre>\n\n<p>I need to use the values <code>@array</code> outside the foreach loop. Please suggest a way.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1857, "user_id": 9565139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t0SKo.png?s=128&g=1", "display_name": "vqf", "link": "https://stackoverflow.com/users/9565139/vqf"}, "edited": false, "score": 0, "creation_date": 1568800229, "post_id": 57989533, "comment_id": 102387146, "body": "You are almost there. The problem is that you are concatenating to the <code>$currentOutput</code> variable, not to the <code>$output</code> variable. In every line where you have <code>$currentOutput = $output . $currentOutput;</code> you need to have <code>$output = $output . $currentOutput;</code> or <code>$output .= $currentOutput</code>. Also, you should always <code>use strict;</code>"}, {"owner": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "reply_to_user": {"reputation": 1857, "user_id": 9565139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t0SKo.png?s=128&g=1", "display_name": "vqf", "link": "https://stackoverflow.com/users/9565139/vqf"}, "edited": false, "score": 0, "creation_date": 1568800851, "post_id": 57989533, "comment_id": 102387512, "body": "@vqf thanks! But even with that edit I&#39;m having trouble getting the input (ex. 34 90 32 43) to come out as F A F F... I was trying to make logical sense of where I&#39;m placing everything but my current output in the cmd line is just F"}, {"owner": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "reply_to_user": {"reputation": 1857, "user_id": 9565139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t0SKo.png?s=128&g=1", "display_name": "vqf", "link": "https://stackoverflow.com/users/9565139/vqf"}, "edited": false, "score": 0, "creation_date": 1568801062, "post_id": 57989533, "comment_id": 102387628, "body": "@vqf I moved the placement of the return line and now I got a output of F F, but why just two outputs is what I&#39;m trying to solve now. Thanks for the community support."}, {"owner": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "reply_to_user": {"reputation": 1857, "user_id": 9565139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t0SKo.png?s=128&g=1", "display_name": "vqf", "link": "https://stackoverflow.com/users/9565139/vqf"}, "edited": false, "score": 0, "creation_date": 1568801164, "post_id": 57989533, "comment_id": 102387674, "body": "@vqf Good news, I&#39;ve solved it. I just had to take out the my $currentOutput = shift(@_); line and now it works properly. Once again, thank you for the support."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1568882337, "post_id": 57989533, "comment_id": 102418562, "body": "Please don&#39;t call subroutine using <code>&amp;</code>. It can have unexpected side effects (well, unexpected if you haven&#39;t read the documentation carefully). See <a href=\"https://perlhacks.com/2015/04/subroutines-and-ampersands/\" rel=\"nofollow noreferrer\">Subroutines and Ampersands</a> for details."}], "answers": [{"tags": [], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1568800430, "creation_date": 1568800430, "answer_id": 57989955, "question_id": 57989533, "link": "https://stackoverflow.com/questions/57989533/can-you-output-data-from-a-foreach-loop-using-an-array-inside-to-a-variable/57989955#57989955", "title": "Can you output data from a foreach loop (using an array inside) to a variable?", "body": "<p>With lines:</p>\n\n<pre><code>      $currentOutput = \"A \";\n      $currentOutput = $output . $currentOutput\n</code></pre>\n\n<p>you say 2 things: </p>\n\n<ul>\n<li>please assign \"A \" to variable <code>$currentOutput</code>;</li>\n<li>please assign concatenated variables <code>$output</code> and <code>$currentOutput</code> to variable <code>$currentOutput</code>;</li>\n</ul>\n\n<p>In your task you say something different: you need to concatenate \"A \" into <code>$output</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "is_accepted": false, "score": 0, "last_activity_date": 1568801220, "creation_date": 1568801220, "answer_id": 57990215, "question_id": 57989533, "link": "https://stackoverflow.com/questions/57989533/can-you-output-data-from-a-foreach-loop-using-an-array-inside-to-a-variable/57990215#57990215", "title": "Can you output data from a foreach loop (using an array inside) to a variable?", "body": "<pre><code>use strict;\nuse warnings;\n\n# This script will use a subroutine to translate all the numbers\n# entered on the command line to a corresponding grade.\n\n# If program does not have at least one arg the script will end\ndie \"Please enter at least one program argument to run this program\" if (@ARGV &lt; 1);\n# Graderator subroutine arg will be saved in variable $output\nmy $output = &amp;graderator(@ARGV);\n# Print line will print the output as letter grades\nprint \"Your grades are: $output\\n\";\n# Initialize the subroutine graderator\nsub graderator {\n\n  my $output = \"\";\n  # my $currentOutput = shift(@_);\n  # This foreach loop compares program arg to score, and outputs a letter grade\n  foreach my $currentOutput (@_) {\n    # If score is higher than 90, student has an A\n    if ($currentOutput &gt;= 90) {\n      $currentOutput = \"A \";\n      $output .= $currentOutput\n    }\n    # If score is higher than 80, student has a B\n    elsif ($currentOutput &gt;= 80) {\n      $currentOutput = \"B \";\n      $output .= $currentOutput\n    }\n    # If score is higher than 70, student has a C\n    elsif ($currentOutput &gt;= 70) {\n      $currentOutput = \"C \";\n      $output .= $currentOutput\n    }\n    # If score is higher than 60, student has a D\n    elsif ($currentOutput &gt;= 60) {\n      $currentOutput = \"D \";\n      $output .= $currentOutput\n    }\n    # If score is less than 60, student has a F\n    else {\n      $currentOutput = \"F \";\n      $output .= $currentOutput\n    }\n    #my $currentOutput = shift(@_);\n  }\n  return $output;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1568883443, "creation_date": 1568883443, "answer_id": 58007315, "question_id": 57989533, "link": "https://stackoverflow.com/questions/57989533/can-you-output-data-from-a-foreach-loop-using-an-array-inside-to-a-variable/58007315#58007315", "title": "Can you output data from a foreach loop (using an array inside) to a variable?", "body": "<p>I like to take a data-driven approach to problems like this. If we put the score to grade mapping in a hash, then it becomes much easier to change it in the future.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\ndie \"Usage: $0 [list of numeric grades]\\n\" unless @ARGV;\n\nmy @grades = graderator(@ARGV);\n\nsay join ', ', @grades;\n\nsub graderator {\n  # Map scores to grades\n  my %grades = (\n    90 =&gt; 'A',\n    80 =&gt; 'B',\n    70 =&gt; 'C',\n    60 =&gt; 'D',\n     0 =&gt; 'F',\n  );\n\n  my @grade_letters;\n\n  for (@_) {\n    # Get a reverse-sorted list of the keys in the %grades hash.\n    for my $score (reverse sort { $a &lt;=&gt; $b } keys %grades) {\n      # If our score (in $_) is greater than the score in the hash\n      # then the student has scored that grade.\n      if ($_ &gt;= $score) {\n        # Add the grade to the return array.\n        push @grade_letters, $grades{$score};\n        # Stop looking for the grade for this score.\n        last;\n      }\n    }\n  }\n\n return @grade_letters;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12084159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB02gu0RRhQ3lOSmwepL2bArk2fTmOX1PNRAxjjzg=k-s128", "display_name": "Nicholas Furusho", "link": "https://stackoverflow.com/users/12084159/nicholas-furusho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1568883443, "creation_date": 1568799132, "last_edit_date": 1568800961, "question_id": 57989533, "link": "https://stackoverflow.com/questions/57989533/can-you-output-data-from-a-foreach-loop-using-an-array-inside-to-a-variable", "title": "Can you output data from a foreach loop (using an array inside) to a variable?", "body": "<p>I created a grade calculator that will take program arguments (ex. 90 84 39) and turn them into letter grades. For my assignment we had to use foreach loops and subroutines, calling the arguments from the @_ array and concatenate the answers into a variable called $output</p>\n\n<p>I've tried to play around with a lot of the code using what I know, but am still very new to this and can't quite figure out how to get my output to concatenate into the variable.</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# This script will use a subroutine to translate all the numbers\n# entered on the command line to a corresponding grade.\n\n#if program does not have at least one arg the script will end\ndie \"Please enter at least one program argument to run this program\" if (@ARGV &lt; 1);\n#graderator subroutine arg will be saved in variable $output\nmy $output = &amp;graderator(@ARGV);\n#print line will print the output as letter grades\nprint \"Your grades are: $output\\n\";\n#initialize the subroutine graderator\nsub graderator {\n\n  my $output = \"\";\n  # my $currentOutput = shift(@_);\n  # This foreach loop compares program arg to score, and outputs a letter grade\n  foreach my $currentOutput (@_) {\n    # If score is higher than 90, student has an A\n    if ($currentOutput &gt;= 90) {\n      $currentOutput = \"A \";\n      $output .= $currentOutput\n    }\n    # If score is higher than 80, student has a B\n    elsif ($currentOutput &gt;= 80) {\n      $currentOutput = \"B \";\n      $output .= $currentOutput\n    }\n    # If score is higher than 70, student has a C\n    elsif ($currentOutput &gt;= 70) {\n      $currentOutput = \"C \";\n      $output .= $currentOutput\n    }\n    # If score is higher than 60, student has a D\n    elsif ($currentOutput &gt;= 60) {\n      $currentOutput = \"D \";\n      $output .= $currentOutput\n    }\n    # If score is less than 60, student has a F\n    else {\n      $currentOutput = \"F \";\n      $output .= $currentOutput\n    }\n    my $currentOutput = shift(@_);\n  }\n  return $output;\n````}\n\nRight now I don't get any output when printing my $output variable.\n</code></pre>\n"}, {"tags": ["perl", "intellij-idea"], "comments": [{"owner": {"reputation": 9828, "user_id": 2000323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a95484b8877a108fc979ce4ee1c9d8?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/2000323/andrey"}, "edited": false, "score": 0, "creation_date": 1568795087, "post_id": 57986919, "comment_id": 102384128, "body": "Have you check these steps <a href=\"https://github.com/Camelcade/Perl5-IDEA/wiki/Getting-started\" rel=\"nofollow noreferrer\">github.com/Camelcade/Perl5-IDEA/wiki/Getting-started</a> ?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5962414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc609bbfc6717617a46200fc18e79518?s=128&d=identicon&r=PG", "display_name": "Sachindra", "link": "https://stackoverflow.com/users/5962414/sachindra"}, "is_accepted": false, "score": 2, "last_activity_date": 1570543002, "last_edit_date": 1570543002, "creation_date": 1570536184, "answer_id": 58285979, "question_id": 57986919, "link": "https://stackoverflow.com/questions/57986919/interllij-idea-perl5-sdk-is-not-configured/58285979#58285979", "title": "Interllij IDEA PERL5 sdk is not configured", "body": "<p>In front of the Perl Interpreter dropdown menu, you can see an options menu(Three dots vertically) from that you can add the Perl interpreter from your local machine.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fIbVl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fIbVl.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2949, "user_id": 1348691, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ol1l0.png?s=128&g=1", "display_name": "Tiina", "link": "https://stackoverflow.com/users/1348691/tiina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1466, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570543002, "creation_date": 1568790437, "question_id": 57986919, "link": "https://stackoverflow.com/questions/57986919/interllij-idea-perl5-sdk-is-not-configured", "title": "Interllij IDEA PERL5 sdk is not configured", "body": "<p>I have perl plugin installed in IDEA, and I have MinGW64 installed in Windows 7. In MinGW64 I can see <code>perl -V</code>:</p>\n\n<pre><code>Summary of my perl5 (revision 5 version 22 subversion 1) configuration\n...\n\n  @INC:\n    /usr/lib/perl5/site_perl\n    /usr/share/perl5/site_perl\n    /usr/lib/perl5/vendor_perl\n    /usr/share/perl5/vendor_perl\n    /usr/lib/perl5/core_perl\n    /usr/share/perl5/core_perl\n    .\n</code></pre>\n\n<p>But in Intellij IDEA <code>Perl5 interpreter: Diable Perl5 support</code> is the only option. I thought it should be a 2nd option for the plugin. Now I can only add it manually, but I am freshman in perl, I don't know which one is perl interpreter. I have expanded many folders(core, vendor, lib...), and still cannot find the one that IDEA thinks it is an interpreter.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1568884637, "post_id": 57984872, "comment_id": 102419807, "body": "Can you include the parts of the code where it&#39;s running the regex too please?"}, {"owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1569267726, "post_id": 57984872, "comment_id": 102534030, "body": "Added the code."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "edited": false, "score": 0, "creation_date": 1569560359, "post_id": 58123319, "comment_id": 102643513, "body": "Thank you, that will be very helpful. Marked my question as answered."}], "tags": [], "owner": {"reputation": 428, "user_id": 1626653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36RNP.jpg?s=128&g=1", "display_name": "khw", "link": "https://stackoverflow.com/users/1626653/khw"}, "is_accepted": true, "score": 4, "last_activity_date": 1569525100, "creation_date": 1569525100, "answer_id": 58123319, "question_id": 57984872, "link": "https://stackoverflow.com/questions/57984872/perl-trying-to-understand-regex-debug-output/58123319#58123319", "title": "Perl trying to understand regex debug output", "body": "<p>Yes, it avoided compiling a second time.  As a result of your question, Perl 5.32 will have an extra line of debug output to indicate that the compilation was not actually done. </p>\n"}], "owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 58123319, "answer_count": 1, "score": 5, "last_activity_date": 1569525100, "creation_date": 1568778923, "last_edit_date": 1569267701, "question_id": 57984872, "link": "https://stackoverflow.com/questions/57984872/perl-trying-to-understand-regex-debug-output", "title": "Perl trying to understand regex debug output", "body": "<p>I am trying to match some text in a loop against a regex held in a variable.</p>\n\n<p>On adding <code>use re 'debug';</code></p>\n\n<p>I see this on 1st attempt</p>\n\n<pre><code>Compiling REx \"^(dev|demo|stg[12])$\"\nFinal program:\n   1: SBOL /^/ (2)\n   2: OPEN1 (4)\n   4:   TRIE-EXACT[ds] (24)\n        &lt;dev&gt; (24)\n        &lt;demo&gt; (24)\n        &lt;stg&gt; (13)\n  13:     ANYOF[12] (24)\n  24: CLOSE1 (26)\n  26: SEOL (27)\n  27: END (0)\nfloating \"\"$ at 3..4 (checking floating) anchored(SBOL) minlen 3 \nMatching REx \"^(dev|demo|stg[12])$\" against \"stg1\"\n</code></pre>\n\n<p>and this on the 2nd attempt. The regex value in the variable hasn't changed in this loop iteration.</p>\n\n<pre><code>Compiling REx \"^(dev|demo|stg[12])$\"\nMatching REx \"^(dev|demo|stg[12])$\" against \"stg1\"\n</code></pre>\n\n<p>Does this mean it compiling it again the 2nd time or not? Or is it saying that it would have compiled the 2nd time but didn't and is reusing the already compiled one?</p>\n\n<p>thanks</p>\n\n<p>After posting this question, I found this one <a href=\"https://stackoverflow.com/questions/49227638/does-perl-cache-regex-generation\">Does perl cache regex generation?</a></p>\n\n<p>So looks like, the above 2nd attempt is a cache hit (i.e. it is not recompiling it). Is my understanding correct?</p>\n\n<p>Adding the code sample as well, it is a simple match being done in a for loop</p>\n\n<pre><code>  for my $dbrow (@dbrows)\n  {\n    if ($dbrow-&gt;[$DB_ENV] =~ /$policy-&gt;[$PC_ENV]/\n</code></pre>\n\n<p><code>$policy-&gt;[$PC_ENV]</code> is a regex\n<code>$policy-&gt;[$PC_ENV]</code> value is not changing in this loop.\n<code>$dbrow-&gt;[$DB_ENV]</code> value is changing</p>\n\n<p>At first, I thought perl was re compiling <code>$policy-&gt;[$PC_ENV]</code> on every iteration because I saw that <code>Compiling</code> line for each iteration (not what I had expected as its value wasn't changing) but then I noticed that it only says <code>Compiling</code> but then might be finding it in its cache as it doesn't say <code>Final program:</code> etc</p>\n"}, {"tags": ["regex", "perl", "grep"], "comments": [{"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 2, "creation_date": 1568776501, "post_id": 57983744, "comment_id": 102377699, "body": "Maybe <code>s&#47;how_to_repeat .*&#47;how_to_repeat= Run testing data  &#47;</code>, if I understand the question correctly?"}, {"owner": {"reputation": 3135, "user_id": 3597746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/35dd4b015d9f5c53ebb7d1a31a0d1f08?s=128&d=identicon&r=PG&f=1", "display_name": "Ammad", "link": "https://stackoverflow.com/users/3597746/ammad"}, "reply_to_user": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1568836966, "post_id": 57983744, "comment_id": 102405850, "body": "Please add to the answer section."}, {"owner": {"reputation": 3135, "user_id": 3597746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/35dd4b015d9f5c53ebb7d1a31a0d1f08?s=128&d=identicon&r=PG&f=1", "display_name": "Ammad", "link": "https://stackoverflow.com/users/3597746/ammad"}, "reply_to_user": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1568837011, "post_id": 57983744, "comment_id": 102405869, "body": "perl -p -i -e &#39;s/how_to_repeat.*/how_to_repeat= Run Testing data /&#39;   <code>find .&#47; -name *.txt</code> fix the issue."}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1568839846, "post_id": 57983744, "comment_id": 102406905, "body": "Done. I wasn&#39;t sure I had interpreted the question right, so thanks for confirming that the solution works."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1569342621, "last_edit_date": 1592644375, "creation_date": 1568790737, "answer_id": 57987011, "question_id": 57983744, "link": "https://stackoverflow.com/questions/57983744/how-to-update-contents-of-a-txt-file-in-multiple-sub-directories/57987011#57987011", "title": "How to update contents of a &quot;*.txt&quot; file in multiple sub directories", "body": "<p>Given that <code>find</code> is very basic here you really only need <code>grep</code>, and a simple line of Perl</p>\n<pre><code>grep --include=\\*.txt -rlH . -e 'how_to_repeat' | xargs \n    perl -i.bak -wpe's/how_to_repeat\\K.*/= Run testing data/'\n</code></pre>\n<p>The <code>-r</code> (or <code>-R</code>) searches the  path (<code>.</code>) recursively, while <code>-l</code> (<code>--files-with-matches</code>) returns only file names, as needed here. Apart from <code>--include</code> there are more options in <code>grep</code> that allow one to tailor more precisely what files/directories to search or not.</p>\n<p>Then <code>xargs</code> feeds those returned filenames to the Perl program.</p>\n<p>If you had more complex criteria for what files to look at then <code>find</code> could help, of course.</p>\n<p>Comments</p>\n<ul>\n<li><p>That <code>\\K</code> drops all matches before it so we need not replace those; see &quot;<em>Lookaround Assertions</em>&quot; <a href=\"https://perldoc.perl.org/perlre.html#Extended-Patterns\" rel=\"nofollow noreferrer\">in Extended Patterns in perlre</a>. The rest of the line is then matched by <code>.*</code> and thus replaced</p>\n</li>\n<li><p>The <code>-i</code> changes the file <em>in-place</em> but <code>.bak</code> makes it keep a backup</p>\n</li>\n<li><p>It may be possible to build the filelist with a shell glob alone, and then you can pass it directly to the Perl one-liner since the program will not change files in which the pattern isn't found.</p>\n<p>Filtering the file list with <code>grep</code> first should be faster but you'll only notice that with <em>many</em> files, in particular if not many of them have the phrase (so not many are processed twice)</p>\n</li>\n</ul>\n<p>The regex in the question isn't working because the rest of the line is never matched, so it indeed doesn't get replaced; it'll work with <code>.*</code> added to the end of your pattern, like above.</p>\n"}, {"tags": [], "owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "is_accepted": true, "score": 2, "last_activity_date": 1568839783, "creation_date": 1568839783, "answer_id": 58000563, "question_id": 57983744, "link": "https://stackoverflow.com/questions/57983744/how-to-update-contents-of-a-txt-file-in-multiple-sub-directories/58000563#58000563", "title": "How to update contents of a &quot;*.txt&quot; file in multiple sub directories", "body": "<p>To match until the end of the line, you just need to add <code>.*</code> at the end of the matching expression:</p>\n\n<pre><code>s/how_to_repeat .*/how_to_repeat= Run testing data /\n</code></pre>\n\n<p>So the whole command, as you confirmed in the comments, becomes:</p>\n\n<pre><code>perl -p -i -e 's/how_to_repeat .*/how_to_repeat= Run testing data  /'   `find ./ -name *.txt`\n</code></pre>\n"}], "owner": {"reputation": 3135, "user_id": 3597746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/35dd4b015d9f5c53ebb7d1a31a0d1f08?s=128&d=identicon&r=PG&f=1", "display_name": "Ammad", "link": "https://stackoverflow.com/users/3597746/ammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 58000563, "answer_count": 2, "score": 1, "last_activity_date": 1569342621, "creation_date": 1568769059, "last_edit_date": 1568775318, "question_id": 57983744, "link": "https://stackoverflow.com/questions/57983744/how-to-update-contents-of-a-txt-file-in-multiple-sub-directories", "title": "How to update contents of a &quot;*.txt&quot; file in multiple sub directories", "body": "<p>I have a directory name \"technology\" that have multiple sub directories in it and each sub directory have at least one *.txt file.</p>\n\n<p>Every \"*.txt\" file have one line that starts with word \"how_to_repeat\" and after that it could have any other string value but it contents will only be at one line. </p>\n\n<p>I am using find to find out files that have \"how_to_repeat\" values in it as shown below. </p>\n\n<pre><code>find . -name '*.txt' -exec grep -H 'how_to_repeat' {} \\; |wc -l\n127\n</code></pre>\n\n<p>Now,\nMy question is how can i update the contents of every \"*.txt\" file such that it replaces the complete line that starts with \"how_to_repeat\" word with constant string i.e. \"how_to_repeat= Run testing data\".</p>\n\n<p>Perl script is working but not for the the full line</p>\n\n<pre><code>perl -p -i -e 's/how_to_repeat /how_to_repeat= Run testing data  /'   `find ./ -name *.txt`\n</code></pre>\n\n<p>Wondering how it can replace the full line. </p>\n"}, {"tags": ["perl", "email", "unix", "postfix-mta", "sysadmin"], "comments": [{"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 3, "creation_date": 1568757682, "post_id": 57982392, "comment_id": 102374243, "body": "Are you absolutely sure that the email showing in the logs is the email generated by the perl script, and not an email generated by the system (e.g. a shutdown alert message? Note that the two &quot;size&quot;s are completely different. It&#39;s quite possible that your perl script is failing to generate an email during shutdown because postfix has already shut down"}, {"owner": {"reputation": 11, "user_id": 12081808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIlx31a0_JI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJcj7WlSdZ-t-ngniCOcw8el-f2g/photo.jpg?sz=128", "display_name": "Venkat", "link": "https://stackoverflow.com/users/12081808/venkat"}, "reply_to_user": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1568827752, "post_id": 57982392, "comment_id": 102402162, "body": "Dave, I added &quot;service postfix status&quot; in my script before and after sending the mail command to ensure that postfix is active/running."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1568916219, "post_id": 57982392, "comment_id": 102436976, "body": "That still doesn&#39;t answer the question of whether that log is displaying your email or another."}, {"owner": {"reputation": 11, "user_id": 12081808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIlx31a0_JI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJcj7WlSdZ-t-ngniCOcw8el-f2g/photo.jpg?sz=128", "display_name": "Venkat", "link": "https://stackoverflow.com/users/12081808/venkat"}, "reply_to_user": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1568936957, "post_id": 57982392, "comment_id": 102443531, "body": "In the case of killing process from terminal (working case), logs show the correct email address. In the case of shutting down, logs show root@&lt;HOSTNAME&gt;.net which is not correct. Infact that is my question why the system does this. Also checked to ensure that postfix is active around that time."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1569099888, "post_id": 57982392, "comment_id": 102488451, "body": "You are still making the assumption that the email appearing in the logs is the email generated by your script. You have no proof of this. Try modifying your script so it skips sending the email, shut the system down, and see if you still get a logged email."}, {"owner": {"reputation": 11, "user_id": 12081808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIlx31a0_JI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJcj7WlSdZ-t-ngniCOcw8el-f2g/photo.jpg?sz=128", "display_name": "Venkat", "link": "https://stackoverflow.com/users/12081808/venkat"}, "reply_to_user": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1569260747, "post_id": 57982392, "comment_id": 102531194, "body": "You are right, I modified the script to skip the email, but the mail log still shows mail activity with root@HOSTNAME.net which implies it is system generated."}, {"owner": {"reputation": 11, "user_id": 12081808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIlx31a0_JI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJcj7WlSdZ-t-ngniCOcw8el-f2g/photo.jpg?sz=128", "display_name": "Venkat", "link": "https://stackoverflow.com/users/12081808/venkat"}, "reply_to_user": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1569260790, "post_id": 57982392, "comment_id": 102531210, "body": "But during shutdown, I also print the postfix status in our logs which shows that it is active/running"}, {"owner": {"reputation": 11, "user_id": 12081808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIlx31a0_JI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJcj7WlSdZ-t-ngniCOcw8el-f2g/photo.jpg?sz=128", "display_name": "Venkat", "link": "https://stackoverflow.com/users/12081808/venkat"}, "reply_to_user": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1569865144, "post_id": 57982392, "comment_id": 102726323, "body": "@DaveMitchell Do you have any suggestion here?"}], "answers": [{"tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1569958054, "creation_date": 1569958054, "answer_id": 58191134, "question_id": 57982392, "link": "https://stackoverflow.com/questions/57982392/unable-to-send-unix-mail-during-shutdown-reboot/58191134#58191134", "title": "Unable to send unix mail during shutdown/reboot", "body": "<p>the postfix system is probably being shut down earlier in the shutdown process than your script. Have you confirmed within your script that the mail system is still up <em>after</em> your script has tried to send an email?</p>\n"}], "owner": {"reputation": 11, "user_id": 12081808, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIlx31a0_JI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJcj7WlSdZ-t-ngniCOcw8el-f2g/photo.jpg?sz=128", "display_name": "Venkat", "link": "https://stackoverflow.com/users/12081808/venkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569958054, "creation_date": 1568756247, "last_edit_date": 1568763726, "question_id": 57982392, "link": "https://stackoverflow.com/questions/57982392/unable-to-send-unix-mail-during-shutdown-reboot", "title": "Unable to send unix mail during shutdown/reboot", "body": "<p>We have a perl script which tries to send an email notification when the system is about to shut down. To do this, we catch the SIGTERM and call Unix mail command to send email in the signal handler. SIGTERM is caught but the unix mail log shows that the FROM and TO address are changed from user@companyname.com to user@hostname during shutdown. Any idea why the system does this and how to prevent it? (Please note: The same email works fine when we run the script and kill the process from terminal)</p>\n\n<p><strong>Here is the perl code snippet:</strong></p>\n\n<pre><code>$SIG{TERM} = \\&amp;signal_handler;\n\nsleep(3600);\n\nsub signal_handler { \n\nmy $email_address = 'user@companyname.com';\n\nsystem(\"echo \\\"TestBody\\\" | mail -s \\\"TestEmailSubject\\\" -c \\\"$email_address\\\" -r \\\"$email_address\\\" \\\"$email_address\\\"\");\n\n}\n</code></pre>\n\n<p><strong>Here is what is printed in /var/log/mail/mail during shutdown:</strong></p>\n\n<pre><code>Sep 17 21:17:04 postfix/postfix-script[7009]: starting the Postfix mail system\n\nSep 17 21:17:10 postfix/master[7011]: daemon started -- version 2.10.1, configuration /etc/postfix\n\nSep 17 21:17:10 postfix/pickup[10349]: 35F801809C9: uid=0 from=root\n\nSep 17 21:17:10 postfix/cleanup[10356]: 35F801809C9: message-id=&lt;20190917211710.35F801809C9@HOSTNAME.net&gt;\n\nSep 17 21:17:10 postfix/qmgr[10350]: 35F801809C9: from=root@HOSTNAME.net, size=1618, nrcpt=1 (queue active)\n\nSep 17 21:17:10 postfix/local[10372]: 35F801809C9: to=root@HOSTNAME.net, orig_to=&lt;root&gt;, relay=local, delay=13, delays=13/0.01/0/0, dsn=2.0.0, status=sent (delivered to file: /dev/null)\n</code></pre>\n\n<p><strong>Here is the working case when we kill the process from terminal:</strong></p>\n\n<pre><code>Sep 17 21:20:41 postfix/pickup[10349]: E5328180968: uid=14936 from=user@COMPANYNAME.com\n\nSep 17 21:20:41 postfix/cleanup[22690]: E5328180968: message-id=&lt;5d814e29.qZd+wgg47afpUdbd%user@COMPANYNAME.com&gt;\n\nSep 17 21:20:41 postfix/qmgr[10350]: E5328180968: from=user@COMPANYNAME.com, size=544, nrcpt=1 (queue active)\n\nSep 17 21:20:41 postfix/smtp[22692]: E5328180968: to=user@COMPANYNAME.com, delay=0.06, delays=0.01/0/0/0.05, dsn=2.0.0, status=sent (250 2.0.0 OK 4E/77-59832-92E418D5)\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 2669, "user_id": 2193235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e9927de2a623831360a8b6ea20811?s=128&d=identicon&r=PG", "display_name": "msb", "link": "https://stackoverflow.com/users/2193235/msb"}, "edited": false, "score": 1, "creation_date": 1568755821, "post_id": 57982262, "comment_id": 102373694, "body": "your code doesn&#39;t output <code>this</code> for me... it outputs a blank line. Are you sure that&#39;s what you&#39;re running?"}, {"owner": {"reputation": 93, "user_id": 5227747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5c9509e5d1964959a449a902738e34?s=128&d=identicon&r=PG&f=1", "display_name": "user121392", "link": "https://stackoverflow.com/users/5227747/user121392"}, "reply_to_user": {"reputation": 2669, "user_id": 2193235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e9927de2a623831360a8b6ea20811?s=128&d=identicon&r=PG", "display_name": "msb", "link": "https://stackoverflow.com/users/2193235/msb"}, "edited": false, "score": 0, "creation_date": 1568755973, "post_id": 57982262, "comment_id": 102373742, "body": "@msb sorry, I was missing the parentheses for the first match. edited."}, {"owner": {"reputation": 2669, "user_id": 2193235, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e9927de2a623831360a8b6ea20811?s=128&d=identicon&r=PG", "display_name": "msb", "link": "https://stackoverflow.com/users/2193235/msb"}, "edited": false, "score": 0, "creation_date": 1568756096, "post_id": 57982262, "comment_id": 102373767, "body": "Oh ok. Now it makes sense. :)"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5227747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5c9509e5d1964959a449a902738e34?s=128&d=identicon&r=PG&f=1", "display_name": "user121392", "link": "https://stackoverflow.com/users/5227747/user121392"}, "edited": false, "score": 0, "creation_date": 1568756403, "post_id": 57982312, "comment_id": 102373857, "body": "Thank you. How would you suggest I rewrite the regex? I&#39;m can&#39;t seem to remove the parts in between &#39;this&#39; and &#39;test&#39;."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 93, "user_id": 5227747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5c9509e5d1964959a449a902738e34?s=128&d=identicon&r=PG&f=1", "display_name": "user121392", "link": "https://stackoverflow.com/users/5227747/user121392"}, "edited": false, "score": 0, "creation_date": 1568756568, "post_id": 57982312, "comment_id": 102373912, "body": "@user121392 It really depends on what your specific inputs are and what you&#39;re trying to do. The options I presented in the answer are as much as I could suggest generically."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1568757060, "post_id": 57982312, "comment_id": 102374041, "body": "the generic way to match any (non-newline) character up to but not including an optional &quot;test&quot; would be <code>(?:(?!test).)*</code> (so in full, <code>&#47;(this)(?:(?!test).)*(test)?&#47;</code>)"}, {"owner": {"reputation": 93, "user_id": 5227747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5c9509e5d1964959a449a902738e34?s=128&d=identicon&r=PG&f=1", "display_name": "user121392", "link": "https://stackoverflow.com/users/5227747/user121392"}, "edited": false, "score": 0, "creation_date": 1568757108, "post_id": 57982312, "comment_id": 102374059, "body": "It is a string with an optional match in the middle (&#39;test&#39;), so anchoring to the end would not work. I am looking to extract specific parts of a string which have optional matches in the middle."}, {"owner": {"reputation": 93, "user_id": 5227747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5c9509e5d1964959a449a902738e34?s=128&d=identicon&r=PG&f=1", "display_name": "user121392", "link": "https://stackoverflow.com/users/5227747/user121392"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1568757368, "post_id": 57982312, "comment_id": 102374140, "body": "@ysth I think your final regex is missing an opening parentheses. I can&#39;t get it to work."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1568757399, "post_id": 57982312, "comment_id": 102374148, "body": "it was missing one briefly, I added it; try again?"}, {"owner": {"reputation": 93, "user_id": 5227747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5c9509e5d1964959a449a902738e34?s=128&d=identicon&r=PG&f=1", "display_name": "user121392", "link": "https://stackoverflow.com/users/5227747/user121392"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1568758118, "post_id": 57982312, "comment_id": 102374372, "body": "@ysth Thank you. It worked. While I am reading up on non-capturing groups, why did you add (?!test) instead of (!test) and the . behind (?!test) ?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 93, "user_id": 5227747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5c9509e5d1964959a449a902738e34?s=128&d=identicon&r=PG&f=1", "display_name": "user121392", "link": "https://stackoverflow.com/users/5227747/user121392"}, "edited": false, "score": 0, "creation_date": 1568758835, "post_id": 57982312, "comment_id": 102374547, "body": "@user121392 <code>(?!</code> is a negative lookahead, which means that group is equivlaent to <code>.*</code> but in addition it fails if the four characters after that point are <code>test</code>. Basically this just makes <code>.*</code> only match the characters up until that happens, after which it backtracks and the following <code>(test)?</code> can match."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1568759007, "post_id": 57982312, "comment_id": 102374592, "body": "see <a href=\"https://stackoverflow.com/questions/23403494/perl-matching-string-not-containing-pattern\" title=\"perl matching string not containing pattern\">stackoverflow.com/questions/23403494/&hellip;</a>"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1568756410, "last_edit_date": 1568756410, "creation_date": 1568755856, "answer_id": 57982312, "question_id": 57982262, "link": "https://stackoverflow.com/questions/57982262/matched-expression-does-not-print-in-perl/57982312#57982312", "title": "? matched expression does not print in Perl", "body": "<p>Regexes (the feature within the first section of the <code>s///</code> operator) match against the provided text sequentially, greedily. This means that it will first find <code>this</code> (easy enough), then <code>.*</code> will match the entire rest of the string. <code>(test)?</code> is matched against the remaining string, which is nothing, and since it's optional, it succeeds.</p>\n\n<p>One way to prevent <code>.*</code> from matching the rest of the string before the next part can try is to make it non-greedy, this is done by attaching the <code>?</code> <a href=\"https://perldoc.pl/perlre#Quantifiers\" rel=\"noreferrer\">quantifier modifier</a> (not to be confused with the <code>?</code> quantifier which means zero-or-one). But this doesn't help here, because then it will just match the empty string (as the shortest string it can match), and <code>(test)?</code> will also still match the empty string afterward since it's not immediately followed by <code>test</code>.</p>\n\n<p>Depending what you are trying to do, there are a couple possible solutions. First would be to make the <code>(test)</code> group non-optional by removing the <code>?</code>, which will cause the match to try smaller and smaller matches for <code>.*</code> until the following text successfully matches <code>(test)</code> (a regex feature known as <a href=\"https://perldoc.pl/perlre#Backtracking\" rel=\"noreferrer\">backtracking</a>). Another option is anchoring the match to the end of the string with <code>$</code> after a non-greedy <code>.*?</code> so that it will always look for <code>(test)</code> at the end of the string before falling back to matching the empty string (via sort of reverse backtracking).</p>\n\n<pre><code>/(this).*(test)/\n/(this).*?(test)?$/\n</code></pre>\n\n<p>As a side note, your replacement variables should be <code>$1</code> and <code>$2</code>, not <code>\\1</code> and <code>\\2</code>; backslash variables are for use within the regex itself, and using them in the replacement is only supported as it's a feature of sed.</p>\n"}, {"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1568797650, "post_id": 57982755, "comment_id": 102385591, "body": "&gt; anchors are a crutch \u2013\u2013\u2013 Please explain what you mean with that."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1568759643, "last_edit_date": 1568759643, "creation_date": 1568759012, "answer_id": 57982755, "question_id": 57982262, "link": "https://stackoverflow.com/questions/57982262/matched-expression-does-not-print-in-perl/57982755#57982755", "title": "? matched expression does not print in Perl", "body": "<p>Since you're using Perl, this is a good way to do it.  </p>\n\n<p>Use this if you don't want to use any anchors.<br>\nMaybe you are not in a multi-line environment.<br>\n<em>Btw, anchors are a crutch avoid using them if possible,<br>\nit will expand your mind.</em>   </p>\n\n<p><code>(this)(?|.*(test)|.*())</code>  </p>\n\n<p><a href=\"https://regex101.com/r/1p4FVK/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/1p4FVK/1</a></p>\n\n<pre><code> ( this )                      # (1)\n (?|                           # Branch reset, reuse grp 2\n      .* \n      ( test )                      # (2)\n   |  \n      .*  \n      ( )                           # (2)\n )\n</code></pre>\n\n<p>Without the branch reset it's <code>(this)(?:.*(test)|.*())</code><br>\nReplace with <code>$1 $2$3</code>  </p>\n"}], "owner": {"reputation": 93, "user_id": 5227747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee5c9509e5d1964959a449a902738e34?s=128&d=identicon&r=PG&f=1", "display_name": "user121392", "link": "https://stackoverflow.com/users/5227747/user121392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57982312, "answer_count": 2, "score": 1, "last_activity_date": 1568760357, "creation_date": 1568755581, "last_edit_date": 1568756826, "question_id": 57982262, "link": "https://stackoverflow.com/questions/57982262/matched-expression-does-not-print-in-perl", "title": "? matched expression does not print in Perl", "body": "<p>I rarely write Perl and don't know how to phrase the question. I am using Perl as a \"filter\" to go through files.</p>\n\n<pre><code>echo \"this is a test\" | perl -pe 's/(this).*(test)?/\\1 \\2/'\n</code></pre>\n\n<p>returns only </p>\n\n<pre><code>this\n</code></pre>\n\n<p>I am looking for </p>\n\n<pre><code>this test\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 3, "last_activity_date": 1568748423, "creation_date": 1568748423, "answer_id": 57980837, "question_id": 57979285, "link": "https://stackoverflow.com/questions/57979285/how-can-i-internally-redirect-with-mojo/57980837#57980837", "title": "How can I internally redirect with Mojo?", "body": "<p>Discussed on IRC, but: Mojolicious does not support the dynamic routing of internal redirects as Catalyst does. The common suggestion is to abstract out your code to avoid duplication while not directly calling another route. So instead of route A calling route B, both of them would call a helper or method to complete the common functionality using their current controller object.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 57980837, "answer_count": 1, "score": 2, "last_activity_date": 1568748445, "creation_date": 1568741283, "last_edit_date": 1568748445, "question_id": 57979285, "link": "https://stackoverflow.com/questions/57979285/how-can-i-internally-redirect-with-mojo", "title": "How can I internally redirect with Mojo?", "body": "<p>Catalyst supported redirects internal to the framework (<a href=\"https://metacpan.org/pod/Catalyst#$c-%3Eforward(-$action-[,-@arguments-]-)\" rel=\"nofollow noreferrer\"><code>forward</code></a> and <a href=\"https://metacpan.org/pod/Catalyst#$c-%3Edetach(-$action-[,-@arguments-]-)\" rel=\"nofollow noreferrer\"><code>detach</code></a>), and external (HTTP) redirects (<code>res-&gt;redirect)</code>. Internal redirects essentially just redispatched to a new path,</p>\n\n<p>Lets say I set up two paths,</p>\n\n<pre><code>sub register ( $self, $app, $conf ) {\n    my $r = $app-&gt;routes;\n    $r-&gt;any( 'foo',  =&gt; \\&amp;foo_baz );\n    $r-&gt;any( 'bar',  =&gt; \\&amp;bar_baz );\n}\n</code></pre>\n\n<p>How would I tell <code>foo</code> after it does some stuff, to internally redirect to <code>bar</code>?</p>\n\n<pre><code>sub foo_baz ($c) {\n  ; stuff\n  bar_baz($c)\n}\n</code></pre>\n\n<p>Is there a better way than calling <code>bar_baz($c)</code> directly? These routes are declared in a Mojo Plugin.</p>\n"}, {"tags": ["perl", "datetime", "timezone", "iso8601"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568748640, "post_id": 57978931, "comment_id": 102370947, "body": "Note that the time zone can also be an offset (e.g. <code>-0500</code>) if you know the offset but not the political time zone. Note that doing any arithmetic on a dt created this way may invalidate the time zone. For example, <code>-0500</code> might be valid in Toronto in the winter, but Toronto uses <code>-0400</code> in the summer. Using <code>America&#47;Toronto</code> will work year round."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568749349, "post_id": 57978931, "comment_id": 102371261, "body": "Another complication is that short names are simply not unique. There are three different time zones that may use the abbreviation BST, with vastly different offsets, for example. The only solution is to keep a mapping of the time zones you care about."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568750016, "post_id": 57978931, "comment_id": 102371557, "body": "@Grinnz Well, yes, I discuss that in this answer. And I suggest that the user provides a mapping (&quot;<i>local lookup</i>&quot; to &quot;<i>translate</i>&quot;)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1569818669, "post_id": 57978931, "comment_id": 102705131, "body": "To the reader: No idea what the -1 is for, after additional reviewing."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1570000857, "last_edit_date": 1570000857, "creation_date": 1568739684, "answer_id": 57978931, "question_id": 57978339, "link": "https://stackoverflow.com/questions/57978339/normalize-iso-8601-datetime-to-any-time-zone-with-support-of-non-standard-time-z/57978931#57978931", "title": "Normalize ISO 8601 datetime to any time zone with support of non-standard time zone abbreviations", "body": "<p><strong>Note</strong>&nbsp; The question and the title were changed, after this was posted and edited, to insist on requesting \"<em>support of non-standard</em>\" abbreviations.</p>\n\n<p>However, use of short names is generally advised against, as the second part of this answer discussed at length already. More so, in the context of this question it is clearly a no-go as no program can know arbitrary abbreviations (and there aren't any \"standards\" for that, either).</p>\n\n<p>Once a mapping to accepted names is provided then this becomes a non-issue and that had also been accounted for in the answer.  So I am leaving this answer as it is, with minor edits. </p>\n\n<hr>\n\n<p>Use <a href=\"https://metacpan.org/pod/DateTime::Format::ISO8601\" rel=\"nofollow noreferrer\">DateTime::Format::ISO8601</a> to build a <code>DateTime</code> object from your string, or in general <code>DateTime::Format::Strptime</code>.  Then use <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> as needed to work with it</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse DateTime::Format::ISO8601;\nuse DateTime;\n\nmy $dt_string = shift or die \"Usage: $0 datetime-ISO8601\\n\";\n\nmy $fmt = DateTime::Format::ISO8601-&gt;new(); \nmy $dt = $fmt-&gt;parse_datetime($dt_string); \nsay $dt-&gt;time_zone-&gt;name; \n\n$dt-&gt;set_time_zone(\"America/Chicago\"); \nsay $dt-&gt;time_zone-&gt;name;\n</code></pre>\n\n<p>This uses <code>DateTime::set_time_zone</code> to convert (change) the timezone on the object.</p>\n\n<hr>\n\n<p>The question requests that the timezone abbreviated name be used for conversions.  There is a problem with that though: abbreviated names aren't in any standard, may simply be local conventions, don't validate/work with methods from parsers ... and can even be ambiguous. </p>\n\n<p>This is discussed in many places. A short summary in <a href=\"https://metacpan.org/pod/DateTime::TimeZone\" rel=\"nofollow noreferrer\">DateTime::TimeZone</a>, under the method <code>short_name_for_datetime</code>, says for \"short names\" (abbreviations such as those requested)</p>\n\n<blockquote>\n  <p>It is <strong>strongly</strong> recommended that you do not rely on these names for anything other than display. These names are not official, and many of them are simply the invention of the Olson database maintainers. Moreover, these names are not unique. For example, there is an \"EST\" at both -0500 and +1000/+1100.</p>\n</blockquote>\n\n<p>(original emphasis)</p>\n\n<p>One way to still try to deal with abbreviations that are sprung on the user is with <code>all_names</code> from <code>DateTime::TimeZone</code>, and to <code>grep</code>  its output for the abbreviation of interest. For example,</p>\n\n<pre><code>grep { /P(?:S|D)?T/ } DateTime::TimeZone-&gt;all_names\n</code></pre>\n\n<p>returns (a list with) a sole string <code>PST8PDT</code>. This string seems valid under all methods I tried, and works correctly for setting the timezone on a <code>DateTime</code> object.  However, correct as it is, for <code>/E(?:S|D)?T/</code> this returns the list <code>CET EET EST EST5EDT MET WET</code>; not easy to use.</p>\n\n<p>Clearly, this isn't systemic or reliable -- just as abbreviations aren't, to start with.  </p>\n\n<p>The best would be to build a local lookup of some sort, which would translate your short name to the proper name so that you'd know it's correct in your work.  Then, a stub that was added to OP (and later changed) can be filled to</p>\n\n<pre><code>use DateTime;\nuse DateTime::Format::ISO8601;\n\nsub convert_time_zone_for_ISO8601\n{\n  my ($iso, $tz) = @_;\n  # Provide a lookup/mapping that knows locally used abbreviations\n  #my $tz_name = convert_local_short_name($tz); \n  my $tz_name = 'America/New_York';             # for a working example\n\n  # Returns a DateTime object (or generate a string in a desired format) \n  return DateTime::Format::ISO8601-&gt;new\n      -&gt; parse_datetime($iso)\n      -&gt; set_time_zone($tz_name);\n}\n\nmy $dt = convert_time_zone_for_ISO8601('2019-09-17T16:15:20Z', 'ET');\n\n# Sole stringification doesn't include timezone but there are other methods\nsay $dt-&gt;time_zone_short_name;\nsay $dt-&gt;time_zone_long_name;\nsay $dt-&gt;strftime(\"%F %T %{time_zone_short_name}\");\nsay $dt-&gt;strftime(\"%a, %d %b %Y %H:%M:%S %z\");       # RFC822-conformant\n</code></pre>\n\n<p>(See documentation notes on various printing methods.)</p>\n\n<p>The chained methods building the object that is returned provide the parsing and timezone change, using an accepted timezone name.</p>\n\n<p>In order for it to work with abbreviations the code clearly needs a conversion (mapping) of locally used abbreviations of interest to proper timezone names, provided by the user. </p>\n\n<p>In the above snippet there's a placeholder subroutine for it, that can for example use a hash in a module with mapping spelled-out right in it, or better from a JSON file that can thus be managed by other software as well; or by querying a database table or perhaps a local service or some sort.</p>\n"}, {"tags": [], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "is_accepted": true, "score": -1, "last_activity_date": 1568837586, "last_edit_date": 1568837586, "creation_date": 1568747459, "answer_id": 57980642, "question_id": 57978339, "link": "https://stackoverflow.com/questions/57978339/normalize-iso-8601-datetime-to-any-time-zone-with-support-of-non-standard-time-z/57980642#57980642", "title": "Normalize ISO 8601 datetime to any time zone with support of non-standard time zone abbreviations", "body": "<p>We can use <code>DateTime</code> based libraries</p>\n\n<pre><code>use DateTime::TimeZone;\nuse DateTime::Format::ISO8601;\nuse DateTime::TimeZone::Alias;\n</code></pre>\n\n<p>and set desired non-standard abbreviations as aliases, </p>\n\n<pre><code>DateTime::TimeZone::Alias-&gt;set('ET' =&gt; 'America/New_York');\nDateTime::TimeZone::Alias-&gt;set('CT' =&gt; 'America/Chicago');\nDateTime::TimeZone::Alias-&gt;set('PT' =&gt; 'America/Los_Angeles');\n</code></pre>\n\n<hr>\n\n<pre><code>sub normalizeDateTime\n{\n  my $dt = DateTime::Format::ISO8601\n             -&gt;new()\n             -&gt;parse_datetime($_[0])\n             -&gt;set_time_zone($_ = DateTime::TimeZone-&gt;new(name =&gt; $_[1]));\n\n  $dt . DateTime::TimeZone::offset_as_string($_-&gt;offset_for_datetime($dt))\n          =~ s/^[+-]00:?00$/Z/r\n          =~ s/^([+-]\\d{2})(\\d{2})$/$1:$2/r;\n}\n</code></pre>\n\n<p>so then we can use such time zone names directly as valid time zones:</p>\n\n<pre><code>print normalizeDateTime('2019-09-17T16:15:20Z', 'ET');\n</code></pre>\n\n<blockquote>\n  <p>2019-09-17T12:15:20-04:00</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1568749963, "last_edit_date": 1568749963, "creation_date": 1568749626, "answer_id": 57981118, "question_id": 57978339, "link": "https://stackoverflow.com/questions/57978339/normalize-iso-8601-datetime-to-any-time-zone-with-support-of-non-standard-time-z/57981118#57981118", "title": "Normalize ISO 8601 datetime to any time zone with support of non-standard time zone abbreviations", "body": "<p><a href=\"https://metacpan.org/pod/Time::Moment\" rel=\"nofollow noreferrer\">Time::Moment</a> is great at the parsing part, but needs a little help to convert to arbitrary time zones, which I provide with a <a href=\"https://metacpan.org/pod/Time::Moment::Role::TimeZone\" rel=\"nofollow noreferrer\">role</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::Moment;\nuse Role::Tiny ();\nuse DateTime::TimeZone::Olson 'olson_tz';\n\nmy $class = Role::Tiny-&gt;create_class_with_roles('Time::Moment', 'Time::Moment::Role::TimeZone');\nmy $mt = $class-&gt;from_string('2019-09-17T16:15:20Z');\nmy $tz = olson_tz 'America/New_York';\nmy $in_eastern = $mt-&gt;with_time_zone_offset_same_instant($tz);\n</code></pre>\n\n<p><code>DateTime::TimeZone::Olson</code> is just an alternative to <code>DateTime::TimeZone</code> that tends to be faster for named zones; <code>DateTime::TimeZone</code> objects would also work. Determining what actual time zone to use based on your abbreviations has been covered by other answers.</p>\n"}], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 1, "accepted_answer_id": 57980642, "answer_count": 3, "score": 1, "last_activity_date": 1570000857, "creation_date": 1568737290, "last_edit_date": 1568835220, "question_id": 57978339, "link": "https://stackoverflow.com/questions/57978339/normalize-iso-8601-datetime-to-any-time-zone-with-support-of-non-standard-time-z", "title": "Normalize ISO 8601 datetime to any time zone with support of non-standard time zone abbreviations", "body": "<p>Having time in <strong>ISO 8601</strong> format <em>(e.g.</em> <code>2019-09-17T16:15:20Z</code><em>)</em>, how can I convert/normalize this time from one time zone to another time zone <em>(such as</em> <code>ET</code> <em>= US Eastern Time,</em> <code>CT</code> <em>= US Central Time,</em> <code>PT</code> <em>= US Pacific Time)</em> ? </p>\n\n<p>Desired solution should accept any <a href=\"https://www.timeanddate.com/time/zones/\" rel=\"nofollow noreferrer\">time zone abbreviation</a>, standard and non-standard abbreviations.</p>\n\n<hr>\n\n<p><em>Perl subroutine</em></p>\n\n<pre><code>sub normalizeDateTime\n{\n  ... # ???\n}\n\nprint normalizeDateTime('2019-09-17T16:15:20Z', 'ET');\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1568737965, "post_id": 57978233, "comment_id": 102366475, "body": "You should also use <code>&lt;</code>, since the <code>lt</code> operator performs stringwise comparison. For instance, <code>13 lt 7</code> is true because <code>1</code> comes before <code>7</code>."}], "answers": [{"tags": [], "owner": {"reputation": 51677, "user_id": 1821, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2fcdc79d20203f12b3bdd7723de5a6f1?s=128&d=identicon&r=PG", "display_name": "Graeme Perrow", "link": "https://stackoverflow.com/users/1821/graeme-perrow"}, "is_accepted": true, "score": 1, "last_activity_date": 1568737605, "creation_date": 1568737605, "answer_id": 57978412, "question_id": 57978233, "link": "https://stackoverflow.com/questions/57978233/perl-how-to-fix-error-use-of-uninitialized-value-in-numeric-lt-in-if-sta/57978412#57978412", "title": "Perl - How to fix error &quot;Use of uninitialized value in numeric lt (&lt;)&quot; in if statement", "body": "<p>In your inner loop, <code>$j</code> loops up to <code>$length-1</code>. At that point, <code>$nums[$j]</code> is the last element of the array. Then you compare it with <code>$nums[$j+1]</code> which doesn't exist.</p>\n"}], "owner": {"reputation": 33, "user_id": 11048646, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Nz43NW3BXZk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM2a-0wbjhnec3TsB_Qjcd5lgWRUA/mo/photo.jpg?sz=128", "display_name": "Jared Harmon", "link": "https://stackoverflow.com/users/11048646/jared-harmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 57978412, "answer_count": 1, "score": 1, "last_activity_date": 1568738040, "creation_date": 1568736916, "last_edit_date": 1568738040, "question_id": 57978233, "link": "https://stackoverflow.com/questions/57978233/perl-how-to-fix-error-use-of-uninitialized-value-in-numeric-lt-in-if-sta", "title": "Perl - How to fix error &quot;Use of uninitialized value in numeric lt (&lt;)&quot; in if statement", "body": "<p>I am creating a basic bubble sort and I don't understand why i am getting this error Use of uninitialized value in numeric lt (&lt;) at line 10.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nmy @nums = (7,3,5,8,5,2,3,5,7,3,5);\nmy $length = @nums;\n\nfor(my $i = 0; $i &lt; $length; $i++){\n        for(my $j = 0; $j &lt; $length; $j++){\n                if($nums[$j] lt $nums[$j+1]){\n                        my $temp = $nums[$j];\n                        $nums[$j] = $nums[$j+1];\n                        $nums[$j+1] = $temp;\n                }\n        }\n}\n</code></pre>\n\n<p>It seems to be having issues in the if comparison. I made sure that my array was properly initialized with these values and they are. If i print the values before the for loops they print fine and are initialized. </p>\n\n<p>I assume I am just missing something very simple but I'm honestly lost. </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 3, "last_activity_date": 1568769334, "last_edit_date": 1568769334, "creation_date": 1568732195, "answer_id": 57977010, "question_id": 57976823, "link": "https://stackoverflow.com/questions/57976823/form-multiple-combination-of-string-according-to-square-bracket/57977010#57977010", "title": "Form Multiple Combination Of String According To Square Bracket", "body": "<p>A different approach uses <a href=\"https://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\">glob</a>.  First, format your string to make it compatible with <code>glob</code> by transliterating square brackets to curly braces, and pipes to commas.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $str = 'lib/abc/[max|min][_total]/_def[_adj|_adj2|_adj3].[lib|lab]';\n$str =~ tr/[]|/{},/;\nmy @paths = glob $str;\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 7772730, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-gEpPMi26bPk/AAAAAAAAAAI/AAAAAAAAOwI/l9THo88VIcA/photo.jpg?sz=128", "display_name": "Tan Yih Wei", "link": "https://stackoverflow.com/users/7772730/tan-yih-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 57977010, "answer_count": 1, "score": 1, "last_activity_date": 1568769334, "creation_date": 1568731584, "last_edit_date": 1568735119, "question_id": 57976823, "link": "https://stackoverflow.com/questions/57976823/form-multiple-combination-of-string-according-to-square-bracket", "title": "Form Multiple Combination Of String According To Square Bracket", "body": "<p>I have a string (path) which have multiple square brackets and in every single square bracket, I can split them to multiple values. Now I am able to get the number of square brackets that exist in the string, split the value from the square brackets. I am facing issue whereby I don't really know how to form all possible combinations. Wish to have advice from members here. Thank you.</p>\n\n<p>Example: <code>lib/abc/[max|min][_total]/_def[_adj|_adj2|_adj3].[lib|lab]</code></p>\n\n<p>Possible Combination:</p>\n\n<pre><code>lib/abc/max_total/_def_adj.lib\nlib/abc/max_total/_def_adj2.lib\nlib/abc/max_total/_def_adj3.lib\nlib/abc/max_total/_def_adj.lab\nlib/abc/max_total/_def_adj2.lab\nlib/abc/max_total/_def_adj3.lab\n</code></pre>\n\n<p>and the same go to min as well.</p>\n\n<p>I have try following code but it is only able to get the last value in the array. @number is the array to get the number of square brackets in the path. @number also add on backlash to support the regex substitution. @number_2 is the array to store of content in every square brackets. @number_3 is the array to store all value in square brackets.</p>\n\n<pre><code>    my @number = ($release_structure_split =~ /\\[(.*?)\\]/g);\n    my $number_size = @number;\n    my @number_2 = @number;\n    my $number_2_size = @number_2;\n    foreach my $number (@number){\n        $number = '\\['.$number.'\\]';\n        $number =~ s/\\|/\\\\|/g;\n    }\n    for (my $m = 0; $m &lt; $number_size; $m++){\n        my $release_structure_split_temp = $release_structure_split;\n        my @number_3 = split ('\\|', $number_2[$m]);\n        my $number_3_size = @number_3;\n        if ($number_3_size == 1){\n            push (@number_3, undef);\n        }\n        $number_3_size = @number_3;\n        for (my $o = 0; $o &lt; $number_3_size; $o++){\n            if ($release_structure_split =~ $number[0] ){\n                $release_structure_split =~ s/$number[0]/$number_3[0]/g;\n                push (@release_structure_full_3, [$release_structure_full_2_unique[$l][0], $release_structure_split]);\n            }\n            elsif ($release_structure_split =~ $number_3[0]){\n                $release_structure_split =~ s/$number_3[0]/$number_3[1]/g;\n                push (@release_structure_full_3, [$release_structure_full_2_unique[$l][0], $release_structure_split]);\n            }\n            else{\n                my $oo = $o - 1;\n                $release_structure_split =~ s/$number_3[$oo]/$number_3[$o]/g;\n                push (@release_structure_full_3, [$release_structure_full_2_unique[$l][0], $release_structure_split]);\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1568731136, "post_id": 57975823, "comment_id": 102362981, "body": "Get rid of <code>n</code> switch for starters"}], "answers": [{"comments": [{"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1568730157, "post_id": 57976031, "comment_id": 102362395, "body": "Thanks @choroba I&#39;m wondering what if I need to get some data ready first from the whole document before any real data processing, like substitution, etc."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1568731640, "post_id": 57976031, "comment_id": 102363252, "body": "@jonah_w: Then don&#39;t use the <code>-n</code> and iterate the files manually as many times as you need."}, {"owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 0, "creation_date": 1568732472, "post_id": 57976031, "comment_id": 102363748, "body": "I tried putting <code>while(&#47;&lt;mark&gt;(.*?)&lt;\\&#47;mark&gt;&#47;g)</code> in the <code>END</code> block, it gives the same warning. Only this time $ARGV has a value when in <code>END</code>."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "edited": false, "score": 2, "creation_date": 1568735387, "post_id": 57976031, "comment_id": 102365321, "body": "Yes, but ARGV is at EOF in the END block when <code>-n</code> or <code>-p</code> is present."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1568729090, "creation_date": 1568729090, "answer_id": 57976031, "question_id": 57975823, "link": "https://stackoverflow.com/questions/57975823/begin-and-end-in-perl/57976031#57976031", "title": "BEGIN and END in Perl", "body": "<p>When the BEGIN block runs (i.e. when compiling the source code), the file handle is not yet opened. You can verify it with</p>\n\n<pre><code>perl -nE 'BEGIN { say $ARGV }'\n</code></pre>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57976031, "answer_count": 1, "score": 1, "last_activity_date": 1568729090, "creation_date": 1568728508, "question_id": 57975823, "link": "https://stackoverflow.com/questions/57975823/begin-and-end-in-perl", "title": "BEGIN and END in Perl", "body": "<p>I'm trying to obtain some data of specific pattern from a text file in <code>BEGIN</code> block and print them in the <code>END</code> block, as follows:</p>\n\n\n\n<pre><code>perl -0777wnE'\nBEGIN{\n    while(/&lt;mark&gt;(.*?)&lt;\\/mark&gt;/g){\n        $hw=$1; \n        $seen{$hw}++;\n    }\n} \nEND{\n    for $key (keys %seen){\n        say \"$key\";\n    }\n}\n' \"demo.txt\" &gt; \"demo2.txt\"\n</code></pre>\n\n<p>But it doesn't print anything into the demo2.txt file, and it gives the following warning:</p>\n\n<blockquote>\n  <p>Use of uninitialized value $_ in pattern match (m//) at -e line 3.</p>\n</blockquote>\n\n<p>But if I put the <code>while</code> block outside of <code>BEGIN</code> block , like this:\n</p>\n\n<pre><code>perl -0777wnE'\nwhile(/&lt;mark&gt;(.*?)&lt;\\/mark&gt;/g){\n    $hw=$1; \n    $seen{$hw}++;\n}\nEND{\n    for $key (keys %seen){\n        say \"$key\";\n    }\n}\n' \"demo.txt\" &gt; \"demo2.txt\"\n</code></pre>\n\n<p>Then it gets the expected results.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568728119, "post_id": 57975558, "comment_id": 102361109, "body": "I tried that but still no change.  Again, no error, but the message is still not updating."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1568729463, "post_id": 57975558, "comment_id": 102361948, "body": "How about a minimal, complete example of what you are doing?"}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568731063, "post_id": 57975558, "comment_id": 102362935, "body": "I am posting a message to a website that will contain the weekly high scorers in our fantasy football league.  I did the edit manually in the 1st week and you can see above that the value for that week is embedded in the returned dumped forms.  So all I&#39;m doing is trying to automate the posting of the high scorer each week, in this case, week 2 winner, but after the post is done it is still just showing week 1.  So the value contained in the variable $msg will be Weekly High Scorers:                Week 1  =&gt; Team 12           Week 2 =&gt; Team X"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568732261, "post_id": 57975558, "comment_id": 102363624, "body": "@JamesFinnegan: You should also remove the <code>$mech-&gt;form_name(&#39;form::message&#39;)</code> line. Your page doesn&#39;t have a form called &quot;form::message&quot; so it&#39;s certainly not doing anything useful and may be doing some harm."}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568733173, "post_id": 57975558, "comment_id": 102364154, "body": "@DaveCross, I  did Dave.  I used your exact example you posted but still nothing."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568733925, "post_id": 57975558, "comment_id": 102364563, "body": "@JamesFinnegan: Then, as brian says, without a complete, runnable example, there&#39;s not a lot more we can do, I&#39;m afraid."}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568735324, "post_id": 57975558, "comment_id": 102365291, "body": "Hey Dave, I added what I&#39;m doing at the end of the post above.  I&#39;m not sure if you can duplicate it as you have to authenticate to gain acccess.  But the forms are displayed above from the mech dump."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568736458, "post_id": 57975558, "comment_id": 102365833, "body": "@JamesFinnegan Seeing the HTML of that form page would be useful. Perhaps you could use a <a href=\"https://pastebin.com/\" rel=\"nofollow noreferrer\">pastebin</a> to share it."}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1568740121, "post_id": 57975558, "comment_id": 102367406, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/199585/discussion-between-james-finnegan-and-dave-cross\">continue this discussion in chat</a>."}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568740204, "post_id": 57975558, "comment_id": 102367430, "body": "I don&#39;t have pastebin and my company isn&#39;t allowing access to it.  I&#39;ve not done attachments here so not sure where to go on this."}, {"owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "edited": false, "score": 0, "creation_date": 1568817108, "post_id": 57975558, "comment_id": 102396853, "body": "@DaveCross, I put an image of the html in the original question.  Not sure if this works for you.  Appreciate the time."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1568727617, "creation_date": 1568727617, "answer_id": 57975558, "question_id": 57975010, "link": "https://stackoverflow.com/questions/57975010/post-message-with-wwwmechanize-for-application-x-www-form-urlencoded/57975558#57975558", "title": "Post message with WWW::Mechanize for application/x-www-form-urlencoded", "body": "<p>The first parameter to the <code>field()</code> method is the name of the field you're setting. None of the fields in your form has the name \"value\". I think the name that you want is \"form::message\".</p>\n\n<pre><code>$mech-&gt;field('form::message', $msg);\n$mech-&gt;submit();\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 10157177, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cifsisoxCms/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qgl7bNfO7PoxgxvnAkalc7y4NiXw/mo/photo.jpg?sz=128", "display_name": "James Finnegan", "link": "https://stackoverflow.com/users/10157177/james-finnegan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568817060, "creation_date": 1568725894, "last_edit_date": 1568817060, "question_id": 57975010, "link": "https://stackoverflow.com/questions/57975010/post-message-with-wwwmechanize-for-application-x-www-form-urlencoded", "title": "Post message with WWW::Mechanize for application/x-www-form-urlencoded", "body": "<p>I'm trying to post a message to a webpage but I can't figure out what the name of the form is?  I am trying www::mechanize but I would use another module if its a better method.  I am able to pull the authenticated page and see the current message posted.  I dumped the forms on the page so here is the output:</p>\n\n<pre><code>$VAR2 = bless( {\n                 'default_charset' =&gt; 'UTF-8',\n                 'enctype' =&gt; 'application/x-www-form-urlencoded',\n                 'accept_charset' =&gt; 'UNKNOWN',\n                 'action' =&gt; bless( do{\\(my $o = 'http://myffleague.football.cbssports.com/setup/commish-tools/messaging/edit-league-message')}, 'URI::http' ),\n                 'method' =&gt; 'POST',\n                 'attr' =&gt; {\n                             'style' =&gt; 'display:inline',\n                             'method' =&gt; 'post'\n                           },\n                 'inputs' =&gt; [\n                               bless( {\n                                        'readonly' =&gt; 1,\n                                        'value_name' =&gt; '',\n                                        'value' =&gt; '1',\n                                        'name' =&gt; 'dummy::form',\n                                        'id' =&gt; 'dummy::form',\n                                        'type' =&gt; 'hidden'\n                                      }, 'HTML::Form::TextInput' ),\n                               bless( {\n                                        'readonly' =&gt; 1,\n                                        'value_name' =&gt; '',\n                                        'value' =&gt; 'form',\n                                        'name' =&gt; 'form::form',\n                                        'id' =&gt; 'form::form',\n                                        'type' =&gt; 'hidden'\n                                      }, 'HTML::Form::TextInput' ),\n                               bless( {\n                                        'readonly' =&gt; 1,\n                                        'value_name' =&gt; '',\n                                        'value' =&gt; 'U2FsdGVkX1_UaI-cThHnk4dukS_AYpTgYLwzWpW7wsoYNpHOMGPSzno0W5zhDRSt',\n                                        'name' =&gt; 'form::_eid_',\n                                        'id' =&gt; 'form::_eid_',\n                                        'type' =&gt; 'hidden'\n                                      }, 'HTML::Form::TextInput' ),\n                               bless( {\n                                        'value' =&gt; '&lt;b&gt;Weekly High Scorers:\n                                                    Week 1  =&gt; Team 12\n                                                   ',\n                                        'name' =&gt; 'form::message',\n                                        'class' =&gt; 'formText',\n                                        'id' =&gt; 'message',\n                                        'type' =&gt; 'textarea',\n                                        'rows' =&gt; '10',\n                                        'cols' =&gt; '60'\n                                      }, 'HTML::Form::TextInput' ),\n                               bless( {\n                                        'readonly' =&gt; 1,\n                                        'value_name' =&gt; '',\n                                        'value' =&gt; '/setup',\n                                        'name' =&gt; 'form::xurl',\n                                        'id' =&gt; 'xurl',\n                                        'type' =&gt; 'hidden'\n                                      }, 'HTML::Form::TextInput' ),\n                               bless( {\n                                        'value_name' =&gt; '',\n                                        'value' =&gt; '   OK   ',\n                                        'name' =&gt; '_submit',\n                                        'class' =&gt; 'formButtonLg custombutton',\n                                        'type' =&gt; 'submit'\n                                      }, 'HTML::Form::SubmitInput' )\n                             ]\n               }, 'HTML::Form' );\n\n\n\n</code></pre>\n\n<p>The value I'm trying to post is the high scorer of the week.  So here is the post I'm attempting.  I don't get an error, but the message doesn't change.  For this example its contained in '$msg'</p>\n\n<pre><code>$mech-&gt;form_name('form::message');\nprint Dumper($mech-&gt;forms());\n$mech-&gt;field(\"value\", $msg);\n$mech-&gt;submit();\n</code></pre>\n\n<p>I'm adding this section after users requested more information from me.  this is the url i'm pulling, by supplying my userid and password I get the authenticated page back.  At that point I then use the same 'mech' object to post a message to the league.</p>\n\n<pre><code>my $url = \"http://myffleague.football.cbssports.com/setup/commish-tools/messaging/edit-league-message?xurl=/setup\";\nmy $username = \"username\";\nmy $password = \"password\";\nmy $mech = WWW::Mechanize-&gt;new();\n$mech-&gt;cookie_jar(HTTP::Cookies-&gt;new());\n$mech-&gt;get($url);\n$mech-&gt;form_id('login_form');\n$mech-&gt;field(\"userid\", $username);\n$mech-&gt;field(\"password\", $password);\n$mech-&gt;click;\n\nmy $msg = \"Weekly High Scorers:\\nWeek 1  =&gt; Team 12\\nWeek 2  =&gt; Team 10\";\n$mech-&gt;field('form::message', $msg);\n$mech-&gt;submit();\nprint \"\\n\\nAll Good\\n\\n\" if ($mech-&gt;success);\n</code></pre>\n\n<p>And here is the requested html from the site.  Its not the entire page, but the section where I need to post.  I used screenshot to create the image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RSrfs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RSrfs.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 3946, "user_id": 65706, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6e0652a12b8a5b2577f91f0e192ea3f9?s=128&d=identicon&r=PG", "display_name": "Yordan Georgiev", "link": "https://stackoverflow.com/users/65706/yordan-georgiev"}, "edited": false, "score": 1, "creation_date": 1583906183, "post_id": 58009983, "comment_id": 107265537, "body": "you could simply accept your own answer, if it really solved the problem defined in your question ..."}], "tags": [], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "is_accepted": true, "score": 4, "last_activity_date": 1568892464, "creation_date": 1568892464, "answer_id": 58009983, "question_id": 57972890, "link": "https://stackoverflow.com/questions/57972890/mojolicious-how-to-intercept-the-incoming-request-before-controller-method-han/58009983#58009983", "title": "Mojolicious - how to intercept the incoming request before controller method handles and renders", "body": "<p>I asked in <a href=\"https://groups.google.com/forum/#!topic/mojolicious/6PMIsTspHxI\" rel=\"nofollow noreferrer\">mojolicious mailing list</a> and got the reply from the creator of the Mojolicious, Sebastian Riedel. Thanks.</p>\n\n<p>For everybody's benifit. <code>$c-&gt;match-&gt;stack</code> in <code>around_action</code> hook has the info I was looking for.</p>\n\n<h1>Here is how:</h1>\n\n<p>In your application <code>startup</code> method:</p>\n\n<pre><code>sub startup {\n    my $self = shift;\n    ...\n        $self-&gt;hook(\n            around_action =&gt; sub {\n                my ($next, $c, $action, $last) = @_;\n                use DDP;\n                p $c-&gt;match; \n                # prints all the info about the controller and the method/action\n                # it is going to call\n                ...\n            }\n        );\n    ...\n}\n</code></pre>\n\n<h3>DDP - Output</h3>\n\n<pre><code>Mojolicious::Routes::Match  {\n    Parents       Mojo::Base\n    public methods (7) : endpoint, find, has, path_for, position, root, stack\n    private methods (1) : _match\n    internals: {\n        endpoint   Mojolicious::Routes::Route,\n        position   0,\n        root       Mojolicious::Routes,\n        stack      [\n            [0] {\n                action               \"controller_method_name\",\n                controller           \"ControllerClassName\",\n                handler              \"openapi\",\n                id                   3336,\n                openapi.object       Mojolicious::Plugin::OpenAPI,\n                openapi.op_path      [\n                    [0] \"paths\",\n                    [1] \"/api/endpoint/path/{id}/status\",\n                    [2] \"get\"\n                ],\n                openapi.parameters   [\n                    [0] {\n                        description   \"job id\",\n                        in            \"path\",\n                        name          \"id\",\n                        required      JSON::PP::Boolean,\n                        type          \"number\"\n                    }\n                ]\n            }\n        ]\n    }\n}\n</code></pre>\n\n<h3>Here is the info I am looking for in <code>$c-&gt;match-&gt;stack</code>:</h3>\n\n<pre><code>               action               \"controller_method_name\",\n               controller           \"ControllerClassName\",\n</code></pre>\n"}], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 1, "accepted_answer_id": 58009983, "answer_count": 1, "score": 6, "last_activity_date": 1568892464, "creation_date": 1568718125, "question_id": 57972890, "link": "https://stackoverflow.com/questions/57972890/mojolicious-how-to-intercept-the-incoming-request-before-controller-method-han", "title": "Mojolicious - how to intercept the incoming request before controller method handles and renders", "body": "<p>In Mojolicious app, I need to figure out which controller method will be handling the incoming request so that I can log details of the remote client and add some logic. I want to do it at only one place and not in every controller methods. I have tried some of the <a href=\"https://mojolicious.org/perldoc/Mojolicious#HOOKS\" rel=\"noreferrer\">HOOKS</a> but could not figure out. Much appreciate any help on this.</p>\n\n<p>Routes are generated/created from several <a href=\"https://metacpan.org/pod/Mojolicious::Plugin::OpenAPI\" rel=\"noreferrer\">OpenApi Plugin</a> files and also use <a href=\"https://metacpan.org/pod/Net::OAuth2::AuthorizationServer\" rel=\"noreferrer\">Oauth2 Plugin</a> for OAuth.</p>\n\n<ul>\n<li>Mojolicious detail:</li>\n</ul>\n\n<pre><code>CORE\n  Perl        (v5.16.3, linux)\n  Mojolicious (8.22, Supervillain)\n\nOPTIONAL\n  Cpanel::JSON::XS 4.04+  (n/a)\n  EV 4.0+                 (4.22)\n  IO::Socket::Socks 0.64+ (n/a)\n  IO::Socket::SSL 2.009+  (2.060)\n  Net::DNS::Native 0.15+  (n/a)\n  Role::Tiny 2.000001+    (2.000005)\n\n</code></pre>\n"}, {"tags": ["shell", "perl"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 6, "creation_date": 1568716992, "post_id": 57972442, "comment_id": 102354961, "body": "What have you tried? What problems are you having? Please show us your code."}], "answers": [{"tags": [], "owner": {"reputation": 8433, "user_id": 2667536, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UfmAF.png?s=128&g=1", "display_name": "Derlin", "link": "https://stackoverflow.com/users/2667536/derlin"}, "is_accepted": false, "score": -1, "last_activity_date": 1568717168, "creation_date": 1568717168, "answer_id": 57972619, "question_id": 57972442, "link": "https://stackoverflow.com/questions/57972442/convert-my-code-from-perl-to-shell-script/57972619#57972619", "title": "Convert my code from perl to shell script", "body": "<p>Completely untested and really a line-by-line translation (no optimisation here, even though some things might be better written):</p>\n\n<pre><code>for n in {1..7000}; do\n    curl=\"$(curl -X GET http://localhost:9333/dir/assign?collection=chetan)\"\n    sub_string1=\"${curl:8:23}\"\n    t=\"curl -X PUT -F file=@/home/user/test.txt http://172.17.0.4:8080/$sub_string1\";\n    echo $t\n    curl=\"$($t)\"\ndone\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6898000, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lPdZszefyrc/AAAAAAAAAAI/AAAAAAAAAE8/UlnN1GTwkao/photo.jpg?sz=128", "display_name": "chetan gehlot", "link": "https://stackoverflow.com/users/6898000/chetan-gehlot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -8, "last_activity_date": 1568717168, "creation_date": 1568716471, "question_id": 57972442, "link": "https://stackoverflow.com/questions/57972442/convert-my-code-from-perl-to-shell-script", "title": "Convert my code from perl to shell script", "body": "<p>Please help me out with this. I have code in Perl which is converted in a shell script.</p>\n\n<pre><code>#!perl\nmy @a = (1..7000);\nfor(@a){\n    my $curl=`curl -X GET http://localhost:9333/dir/assign?collection=chetan`;\n\n    print $curl;\n    $sub_string1 = substr($curl, 8,15); \n    print $sub_string1;\n    $t='curl -X PUT -F file=@/home/user/test.txt http://172.17.0.4:8080/'.$sub_string1;\n    print $t;\n    my $curl=`$t`;\n    #sleep(3)\n    # print $curl\n}\n</code></pre>\n"}, {"tags": ["perl", "http", "http-headers", "www-mechanize"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1568710200, "post_id": 57967947, "comment_id": 102351372, "body": "I would pick a single device that is already a couple of years old and enjoyed a large market share. How do you like that idea?"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1568713974, "post_id": 57967947, "comment_id": 102353475, "body": "I would like something better <b>but</b> it seems to be a pretty good fallback solution."}], "answers": [{"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": true, "score": 1, "last_activity_date": 1568715446, "last_edit_date": 1592644375, "creation_date": 1568715446, "answer_id": 57972126, "question_id": 57967947, "link": "https://stackoverflow.com/questions/57967947/most-generic-mobile-user-agent-header-string/57972126#57972126", "title": "Most generic mobile User-Agent header string", "body": "<p>In my specific case <code>Mozilla/5.0 (Mobile)</code> delivers wanted results.<br />\nIMHO it is worth to try in other cases.</p>\n<pre><code>$ua-&gt;agent('Mozilla/5.0 (Mobile)');\n</code></pre>\n<p>I have tried it based on suggestion in<br />\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent</a></p>\n<blockquote>\n<p>Firefox UA string</p>\n<p>[\u2026] The UA string of Firefox itself is broken down into four components:</p>\n<p>Mozilla/5.0 (platform; rv:geckoversion) Gecko/geckotrail Firefox/firefoxversion</p>\n<ul>\n<li><strong>Mozilla/5.0</strong> is the general token that says the browser is Mozilla compatible, and is common to almost every browser today.</li>\n<li><strong>platform</strong> describes the native platform the browser is running on (e.g. Windows, Mac, Linux or Android), and whether or not it's a mobile phone. Firefox OS phones simply say &quot;Mobile&quot;; the web is the platform.<br />\n[\u2026]</li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 57972126, "answer_count": 1, "score": 1, "last_activity_date": 1568715446, "creation_date": 1568698891, "question_id": 57967947, "link": "https://stackoverflow.com/questions/57967947/most-generic-mobile-user-agent-header-string", "title": "Most generic mobile User-Agent header string", "body": "<p>I use <code>LWP::UserAgent</code> to access the web site. The site offers <strong>almost</strong> the same info in auto-selected layouts for pc (default?) and mobile.  Some informations are easier to get in non default layout.</p>\n\n<p>Which User-Agent <strong>most generic</strong> strings are recommended to identify web client as mobile or pc device?<br>\n LWP::UserAgent : <code>$ua-&gt;agent('\u2026');</code></p>\n\n<p>P.S. So far for tests I use full string of randomly selected mobile device.  It works but I would like to set proper \"style-guide\" - set and forget <strong>for LONG</strong>.  I would like to avoid requirement for fixes every few years.</p>\n"}, {"tags": ["perl", "pdf", "cpan"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568707243, "post_id": 57967465, "comment_id": 102349840, "body": "It works fine here: Ubuntu 19.04, perl version 5.28.1, pdf-viewer: evince. What OS are you on?"}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568713022, "post_id": 57967465, "comment_id": 102352958, "body": "Remote shared server I honestly don&#39;t know.  I&#39;m wondering if it&#39;s a headers problem."}, {"owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568713589, "post_id": 57967465, "comment_id": 102353267, "body": "Got it nm I had an un-necessary &#39;use binmode utf-8 STDOUT&#39; at the top of page... duh"}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "is_accepted": false, "score": 1, "last_activity_date": 1568715021, "last_edit_date": 1568715021, "creation_date": 1568713730, "answer_id": 57971662, "question_id": 57967465, "link": "https://stackoverflow.com/questions/57967465/pdffromhtml-corrupt-file-and-no-output/57971662#57971662", "title": "PDF::FromHTML - Corrupt file and no output", "body": "<p>My error was elsewhere in the script thanks for looking/commenting (note do not :</p>\n\n<p>binmode STDOUT, ':encoding(UTF-8)';</p>\n\n<p>if you want to use this module obvs).</p>\n\n<p>Of course the Anchors don't work/appear now for some unknown reason :-(</p>\n"}], "owner": {"reputation": 311, "user_id": 1006832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65033a25e4aeaea36e8dbecf7131df?s=128&d=identicon&r=PG", "display_name": "Beeblbrox", "link": "https://stackoverflow.com/users/1006832/beeblbrox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1568715021, "creation_date": 1568695320, "question_id": 57967465, "link": "https://stackoverflow.com/questions/57967465/pdffromhtml-corrupt-file-and-no-output", "title": "PDF::FromHTML - Corrupt file and no output", "body": "<p>Similar to this post <a href=\"https://stackoverflow.com/questions/21546082/pdffromhtml-creates-empty-pdf\">PDF::FromHTML creates empty PDF</a></p>\n\n<p>I have the following code</p>\n\n<pre><code>    $textblob='&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;HelloWorld&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;';\n\n    my $output;\n    if(defined($query-&gt;param('PDF'))){\n        my $pdf = PDF::FromHTML-&gt;new( encoding =&gt; 'utf-8' );\n        $pdf-&gt;load_file(\\$textblob);\n        $pdf-&gt;convert(\n            # With PDF::API2, font names such as 'traditional' also works\n             Font        =&gt; 'Arial',\n             LineHeight  =&gt; 10,\n             Landscape   =&gt; 1,\n        );\n        $pdf-&gt;write_file(\\$output);\n        print $output;\n    }\n</code></pre>\n\n<p>In Firefox this simply gives me an empty PDF page, when I save the page and view it in Acrobat it reports the file is corrupt/damaged and cannot be repaired.  TIA.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568680180, "post_id": 57965835, "comment_id": 102342505, "body": "Remove everything on each line after the first or last such character?"}, {"owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568680389, "post_id": 57965835, "comment_id": 102342551, "body": "The first slash."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568698244, "post_id": 57965835, "comment_id": 102345974, "body": "Use of <code>$&#47;</code> won&#39;t do what you need. That variable sets what is considered to be end-of-record, a &quot;newline&quot; so to speak. Whatever it&#39;s set to is used by operators such as <code>readline</code> (aka <code>&lt;&gt;</code>) and <code>chomp</code> as the marker for end of &quot;line.&quot;  So <code>&lt;&gt;</code> reads up to the first such character and returns that as &quot;line&quot; (in scalar context), then again ... you end up not removing <i>anything</i> other than just those characters themselves (<code>&#47;</code> here).   When you say &quot;<i>remove everything after the slash on each line</i>&quot; you mean line in the &quot;normal&quot; (usual) sense; then you don&#39;t want to redefine what a &quot;line&quot; is."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568698733, "post_id": 57965835, "comment_id": 102346103, "body": "Consider a file containing characters <code>abX\\nX12X</code>.  Open it, set <code>$&#47; = &#39;X&#39;;</code>, and read with <code>while (&lt;$fh&gt;)</code>.  The <code>readline</code> (<code>&lt;&gt;</code>) will read three &quot;lines&quot; (<code>abX</code>, <code>\\nX</code>, <code>12X</code>), and if you also use <code>chomp</code> on each those <code>X</code> will be removed."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "edited": false, "score": 0, "creation_date": 1568680058, "post_id": 57965862, "comment_id": 102342482, "body": "This didn&#39;t work.  It produced the same result as before."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "edited": false, "score": 0, "creation_date": 1568683691, "post_id": 57965862, "comment_id": 102343157, "body": "@Blue-ManedHawk did you get rid of the <code>$&#47;</code> stuff?"}, {"owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "edited": false, "score": 0, "creation_date": 1568684223, "post_id": 57965862, "comment_id": 102343270, "body": "Yay, it worked!  Thank you!  So why did I need to remove that stuff?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1568686779, "post_id": 57965862, "comment_id": 102343765, "body": "because that was making it consider <code>&#47;</code> to be the end of a line instead of a newline character, so whatever came after was the start of the next line and not affected by the substitution"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 3, "last_activity_date": 1568700290, "last_edit_date": 1568700290, "creation_date": 1568680006, "answer_id": 57965862, "question_id": 57965835, "link": "https://stackoverflow.com/questions/57965835/how-do-i-chomp-off-everything-after-a-character/57965862#57965862", "title": "How do I chomp off everything after a character?", "body": "<p>As far as concerns, the input record separator (<code>$/</code>) does not allow regexes.</p>\n\n<p>You could proceed as follows:</p>\n\n<pre><code>print ( \"Enter file name: \" ) ;\nmy $filename = &lt;&gt; ;\nchomp $filename ;\n\nopen ( my $file, \"&lt; :encoding(UTF-8)\", $filename ) \n    or die \"could not open file $filename: $!\";\nwhile ( my $line = &lt;$file&gt; ) {\n    $line =~ s{/.*}{}s;\n    print \"$line\\n\";\n}\n</code></pre>\n\n<p>Regexp <code>s{/.*}{}s</code> matches on the first slash and everything afterwards, and suppresses it (along with the trailing new line).</p>\n\n<p>Note: always check for errors when using <code>open()</code>, as noted in <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>When opening a file, it's seldom a good idea to continue if the request failed, so <code>open</code> is frequently used with <code>die</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1568689678, "creation_date": 1568689678, "answer_id": 57966827, "question_id": 57965835, "link": "https://stackoverflow.com/questions/57965835/how-do-i-chomp-off-everything-after-a-character/57966827#57966827", "title": "How do I chomp off everything after a character?", "body": "<pre><code>$line =~ s{/.*}{}s;                       # In-place (destructive)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my ($extracted) = $line =~ m{([^/]*)};    # Returns (non-destructive)\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 10902967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QuFnwmt5b1Q/AAAAAAAAAAI/AAAAAAAAADA/6vpTCfPYN_M/photo.jpg?sz=128", "display_name": "Blue-Maned Hawk", "link": "https://stackoverflow.com/users/10902967/blue-maned-hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 2, "accepted_answer_id": 57965862, "answer_count": 2, "score": 1, "last_activity_date": 1568700290, "creation_date": 1568679643, "question_id": 57965835, "link": "https://stackoverflow.com/questions/57965835/how-do-i-chomp-off-everything-after-a-character", "title": "How do I chomp off everything after a character?", "body": "<p>I want to create a Perl program to take in a file, and for each line, chomp off everything after a certain character (let's say a /).  For example, consider this example file:</p>\n\n<pre><code>foo1/thing 1.1.1 bar\nfoo2/item 2.3.2 bar\nfoo3/thing 3.4.5 bar\n</code></pre>\n\n<p>I want to remove everything after the slash on each line and print it out, so that that file becomes:</p>\n\n<pre><code>foo1\nfoo2\nfoo3\n</code></pre>\n\n<p>I tried to use this program, with <code>readline</code> in a <code>foreach</code> loop, but the output was not what I expected:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>print ( \"Enter file name: \" ) ;\nmy $filename = &lt;&gt; ;\n$/ = ''\nchomp $filename ;\n\nmy $file = undef ;\nopen ( $file, \"&lt; :encoding(UTF-8)\", $filename\n$/ = '/' ;\nforeach ( &lt;$file&gt; ) {\n    chomp ;\n    print ;\n}\n</code></pre>\n\n<p>But all this does is remove the slashes from each line.</p>\n\n<pre><code>foo1thing 1.1.1 bar\nfoo2item 2.3.2 bar\nfoo3thing 3.4.5 bar\n</code></pre>\n\n<p>How can I alter this to produce the output I need?</p>\n"}, {"tags": ["perl", "roles", "universal"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568644927, "post_id": 57959140, "comment_id": 102330276, "body": "See for example <a href=\"https://metacpan.org/source/HAARG/Role-Tiny-2.000008/lib/Role/Tiny.pm#L443\" rel=\"nofollow noreferrer\">Role::Tiny line 443</a>"}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568645035, "post_id": 57959140, "comment_id": 102330333, "body": "@choroba that&#39;s installing a custom <code>DOES</code>, which is what Moose does too. I&#39;m asking about <code>UNIVERSAL::DOES</code> the non-custom one, and what the definition of a <code>ROLE</code> is in that context."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568645626, "post_id": 57959140, "comment_id": 102330693, "body": "There&#39;s none. Each role implementation has to install its DOES to work."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568645929, "post_id": 57959140, "comment_id": 102330869, "body": "@choroba so then what exactly does the code here do <code>UNIVERSAL-&gt;can(&quot;DOES&quot;)</code> do?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568646093, "post_id": 57959140, "comment_id": 102330956, "body": "See also <a href=\"https://www.youtube.com/watch?v=w5U7eoeuO90\" rel=\"nofollow noreferrer\">Moxie</a>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568646207, "post_id": 57959140, "comment_id": 102331012, "body": "It checks whether the package UNIVERSAL implements the subroutine DOES, and if it does, it returns the coderef."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568646460, "post_id": 57959140, "comment_id": 102331162, "body": "@choroba and what does that coderef do? re: <i>&quot;There&#39;s none.&quot;</i> Now we are on the same page, there is a default implementation -- what does it do? How does the default implementation work?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568646558, "post_id": 57959140, "comment_id": 102331212, "body": "<a href=\"https://metacpan.org/source/XSAWYERX/perl-5.30.0/universal.c#L187\" rel=\"nofollow noreferrer\">UTSL</a>. But it&#39;s getting too complex for me."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568646625, "post_id": 57959140, "comment_id": 102331252, "body": "@choroba yep, saw that. I also saw the code in Universal.pm using that, but it&#39;s also too complex for me. I&#39;m trying to grok it, but I wanted to ask the question first -- maybe someone has the fast and easy."}, {"owner": {"reputation": 201, "user_id": 829550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d171edb8b959fe8a4564c636bdd2d9e8?s=128&d=identicon&r=PG", "display_name": "haarg", "link": "https://stackoverflow.com/users/829550/haarg"}, "edited": false, "score": 0, "creation_date": 1568650538, "post_id": 57959140, "comment_id": 102333192, "body": "It isn&#39;t really correct to say that all modules inherit from <code>UNIVERSAL.pm</code>.  All packages inherit from the package <code>UNIVERSAL</code>, but the <code>UNIVERSAL.pm</code> module will only be loaded if someone specifically requests it with <code>use UNIVERSAL;</code> or similar.  While in the past, it was possible to import some functions from it, on modern versions of perl it is a no-op so there is no reason to ever load it."}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 829550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d171edb8b959fe8a4564c636bdd2d9e8?s=128&d=identicon&r=PG", "display_name": "haarg", "link": "https://stackoverflow.com/users/829550/haarg"}, "is_accepted": true, "score": 6, "last_activity_date": 1568713388, "last_edit_date": 1568713388, "creation_date": 1568649427, "answer_id": 57960534, "question_id": 57959140, "link": "https://stackoverflow.com/questions/57959140/what-is-the-definition-of-role-in-universal-and-how-do-perl-roles-work/57960534#57960534", "title": "What is the definition of &quot;ROLE&quot; in UNIVERSAL and how do Perl Roles work?", "body": "<p>The <code>UNIVERSAL::DOES</code> is equivalent to:</p>\n\n<pre><code>sub DOES {\n   croak \"Usage: invocant-&gt;DOES(kind)\"\n       if @_ != 2;\n   $_[0]-&gt;isa($_[1]);\n}\n</code></pre>\n\n<p>Internally, <code>sv_does_sv</code> calls the <code>isa</code> method on the first SV it is passed.  perl itself doesn't provide an implementation of roles, so it is left to the role modules to provide a <code>DOES</code> that accounts for them.</p>\n\n<p>The convention in Moose, Moo, Role::Tiny, Mouse, etc, is that the <code>DOES</code> method is true for class and its parent classes, and the roles that the class and its parent classes compose.  These libraries also provide the <code>does</code> method, which is only true for the composed roles of the class and its parent classes, but not class or its parent classes.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 1, "accepted_answer_id": 57960534, "answer_count": 1, "score": 6, "last_activity_date": 1568713388, "creation_date": 1568644632, "last_edit_date": 1568659138, "question_id": 57959140, "link": "https://stackoverflow.com/questions/57959140/what-is-the-definition-of-role-in-universal-and-how-do-perl-roles-work", "title": "What is the definition of &quot;ROLE&quot; in UNIVERSAL and how do Perl Roles work?", "body": "<p>Perl has an internal psuedo-module called <code>UNIVERSAL</code> which all modules inherit from. It has a method called <code>DOES</code>, from <a href=\"https://perldoc.perl.org/UNIVERSAL.html\" rel=\"nofollow noreferrer\">the docs on <code>UNIVERSAL</code></a>.</p>\n\n<blockquote>\n  <p><code>$obj-&gt;DOES( ROLE )</code></p>\n  \n  <p><code>CLASS-&gt;DOES( ROLE )</code></p>\n  \n  <p><code>DOES</code> checks if the object or class performs the role <code>ROLE</code>. A role is a named group of specific behavior (often methods of particular names and signatures), similar to a class, but not necessarily a complete class by itself. For example, logging or serialization may be roles.</p>\n  \n  <p><code>DOES</code> and <code>isa</code> are similar, in that if either is true, you know that the object or class on which you call the method can perform specific behavior. However, <code>DOES</code> is different from <code>isa</code> in that it does not care how the invocand performs the operations, merely that it does. (<code>isa</code> of course mandates an inheritance relationship. Other relationships include aggregation, delegation, and mocking.)</p>\n  \n  <p>There is a relationship between roles and classes, as each class implies the existence of a role of the same name. There is also a relationship between inheritance and roles, in that a subclass that inherits from an ancestor class implicitly performs any roles its parent performs. Thus you can use <code>DOES</code> in place of <code>isa</code> safely, as it will return true in all places where <code>isa</code> will return true (provided that any overridden <code>DOES</code> and <code>isa</code> methods behave appropriately).</p>\n</blockquote>\n\n<p><strong>I know Moose et al provide a <code>DOES</code>, and I understand how this is used.</strong> But in the sense of <code>UNIVERSAL::DOES</code> what is a <code>ROLE</code>? How are they tracked? How are they created <strong>aside from Moose</strong> to satisfy <code>DOES</code>? I tried looking in the source, but <a href=\"https://metacpan.org/source/XSAWYERX/perl-5.30.0/lib/UNIVERSAL.pm\" rel=\"nofollow noreferrer\">the implementation of <code>DOES</code> was not provided</a>. Is this notion of a <code>ROLE</code> something in <code>CORE</code> perl? This seems to be related to the <a href=\"https://perldoc.perl.org/perlapi.html\" rel=\"nofollow noreferrer\"><code>perldoc perlapi</code>'s mention of <code>sv_does_sv</code> (also <code>sv_does</code>/<code>sv_does_pv</code>)</a></p>\n\n<blockquote>\n  <p><code>sv_does_sv</code> Returns a <code>boolean</code> indicating whether the <code>SV</code> performs a specific, named role. The <code>SV</code> can be a Perl object or the name of a Perl class.</p>\n  \n  <p><code>bool   sv_does_sv(SV* sv, SV* namesv, U32 flags)</code></p>\n</blockquote>\n\n<p>I can see a call to <code>sv_does_sv</code> in the <a href=\"https://github.com/Perl/perl5/blob/0a4d1779402e8824dd675302ad6a1914ea6ccf23/universal.c#L408\" rel=\"nofollow noreferrer\">implementation of <code>universal.c</code></a>. What's the definition of a SV role? Where can I find more information about this?</p>\n\n<p>From the user-level, what does the code here do, (this is a subref)</p>\n\n<pre><code>UNIVERSAL-&gt;can('DOES')\n</code></pre>\n\n<p>The address returned is different from <code>UNIVERSAL-&gt;can('isa')</code> in the same invocation so it's doing something different, and I can see that muck in the above linked <code>universal.c</code>.</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568638150, "post_id": 57957085, "comment_id": 102326225, "body": "Use a separate connection for each request."}, {"owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1568639705, "post_id": 57957085, "comment_id": 102327152, "body": "Using a second connection, connect function called twice (same user, same everything) does not seems to solve the problem."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1568639820, "post_id": 57957085, "comment_id": 102327226, "body": "Which DBD module are you using here? What does your <code>$connStr</code> variable contain?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1568639917, "post_id": 57957085, "comment_id": 102327292, "body": "I think some confusion has been caused by you not using standard names for DBI-related variables. Your <code>$conn</code> variable is more usually called <code>$dbh</code> (and is created with <code>my $dbh = DBI-&gt;connect(...)</code> not the <code>new DBI(...)</code> which you use here)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1568640029, "post_id": 57957085, "comment_id": 102327360, "body": "Your <code>$req1</code> and <code>$req2</code> variables are statement handles and would more commonly be called <code>$sth_foo</code> and <code>$sth_bar</code> (where &quot;foo&quot; and &quot;bar&quot; would be replaced by short descriptions of the statements in question)."}, {"owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "edited": false, "score": 0, "creation_date": 1568640030, "post_id": 57957085, "comment_id": 102327361, "body": "dbi version is 1.609."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1568640258, "post_id": 57957085, "comment_id": 102327499, "body": "But most confusing to me are your <code>$ans1</code> and <code>$ans2</code> variables. They are both created from the return values from a call to <code>execute()</code>. But <code>execute()</code> returns a scalar value (either a true/false flag or the number of rows updated). It never returns an object, but you&#39;re trying to call methods on those variables as though they are statement handles. I have no idea how <code>$ans1-&gt;fecthrow_hashref()</code> could ever work (but the typo in the method name makes me suspicious of all of your code!)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1568640348, "post_id": 57957085, "comment_id": 102327543, "body": "Version 1.609 was released ten years ago. Why are you using such old software?"}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1568641496, "post_id": 57957085, "comment_id": 102328204, "body": "Note that $! does NOT contain the DBI error, so you may be seeing spurious error messages. You need to use $DBI::errstr instead."}, {"owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "edited": false, "score": 0, "creation_date": 1568644250, "post_id": 57957085, "comment_id": 102329877, "body": "<code>$connStr</code> has been detailled."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1568645712, "post_id": 57957085, "comment_id": 102330742, "body": "@MUYBelgium: <code>$connStr</code> should start &quot;dbi:XXXX&quot;, where &quot;XXXX&quot; is the name of the database driver module you are using."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568674713, "post_id": 57957085, "comment_id": 102341524, "body": "<code>DBI-&gt;connect</code> doesn&#39;t set <code>$!</code> (and the same goes for <code>$sth-&gt;execute</code>). That&#39;s set by system calls. <code>DBI-&gt;connect</code> sets <code>DBI-&gt;errstr</code>. /// By the way, instead of checking for errors throughout your code, you can use use <code>DBI-&gt;connect($dsn, $user, $passwd, { RaiseError=&gt;1, PrintError=&gt;0 })</code> to get an exception on error."}], "answers": [{"tags": [], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "is_accepted": false, "score": 2, "last_activity_date": 1568647037, "last_edit_date": 1568647037, "creation_date": 1568646619, "answer_id": 57959739, "question_id": 57957085, "link": "https://stackoverflow.com/questions/57957085/perl-dbi-ressource-temporarily-unavailable/57959739#57959739", "title": "perl DBI : ressource temporarily unavailable", "body": "<p>Last time I worked with Interystem Cache, they provide 'Intersys::PERLBIND' library which you have to build on your local machine.</p>\n\n<p><a href=\"https://cedocs.intersystems.com/latest/csp/docbook/DocBook.UI.Page.cls?KEY=GBPL_intro\" rel=\"nofollow noreferrer\">https://cedocs.intersystems.com/latest/csp/docbook/DocBook.UI.Page.cls?KEY=GBPL_intro</a></p>\n\n<p>How to use -\n<a href=\"https://cedocs.intersystems.com/latest/csp/docbook/DocBook.UI.Page.cls?KEY=GBPL_using_basics\" rel=\"nofollow noreferrer\">https://cedocs.intersystems.com/latest/csp/docbook/DocBook.UI.Page.cls?KEY=GBPL_using_basics</a></p>\n\n<p>Check with your organization, they should have this module or since your organization is using Intersyscache you can touch base with there DB support, that how I get this thing working.</p>\n\n<p>P.s. Cach\u00e9DB is a proprietary database I cannot understand why my company bother to use. The boss said : it is quick, it is object oriented  --> I feel you, same argument everywhere</p>\n"}], "owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568647037, "creation_date": 1568637549, "last_edit_date": 1568644183, "question_id": 57957085, "link": "https://stackoverflow.com/questions/57957085/perl-dbi-ressource-temporarily-unavailable", "title": "perl DBI : ressource temporarily unavailable", "body": "<p>I would like to parse a DB using a first request to retrieve a problem list, then retrieve all the fields in my database foreach item included in the problem.</p>\n\n<p>Cach\u00e9DB is a proprietary database I cannot understand why my company bother to use.  The boss said : it is quick, it is object oriented. We have to use it.</p>\n\n<pre><code> #! /usr/bin/perl\n use DBI;\n # my DB is a cache DBI \n (...)\n $connStr = sprintf(join(';','DRIVER=libcacheodbc.so;SERVER=%s;PORT=%s'\n                            ,'DATABASE=%s;PROTOCOL=TCP;UID=%s;PWD=%s'\n                            ,'STATIC CURSORS=0;'\n                        )\n                   ,'127.0.0.1', ... , $usr, $pass\n                   );\n my $dbh  = DBI-&gt;connect( $connStr , $user , $pass) or die $! ; \n my $req1 = $dbh-&gt;prepare(\"Select ip, max(date) as maxdate \n                            from dbtable \n                            group by ip having count(*) &gt; 1\");\n # TODO: Purge not requested records from the DB.\n my $req2 = $dbh-&gt;prepare(\"select * \n                            from dbtable \n                            where ip = ? and date &lt; ?\");\n my $ans1 = $req1-&gt;execute() or die $! ;\n while(defined (my $problem_ip = $ans1-&gt;fecthrow_hashref())) {\n      my  $ans2 = $req2-&gt;execute( $problem_ip-&gt;{'ip'}\n                                , $problem_ip-&gt;{'maxdate'}\n                                );\n      # $ans2 eq '0E0'\n      # $! eq 'Ressource temporarily unavailable'\n\n      use Data::Dumper; \n      print Dumper $ans2-&gt;fetchall_hashref() ;\n      # will fails : Not a reference.\n\n      ... \n      # use stuff\n }\n</code></pre>\n\n<p>Requests (<code>$req1</code> &amp;&amp; <code>$req2</code>) seem to works separately (when process has stopped).  </p>\n\n<p>How can I handle  cacheDB to simultaneously retrieve datas from several requests?</p>\n"}, {"tags": ["perl", "docker"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568587150, "post_id": 57948342, "comment_id": 102310253, "body": "I don&#39;t know what a &quot;<i>docker container</i>&quot; does but you are using symbolic references, what you shouldn&#39;t ever do (and have no reason for!).  The problem is with passing a string <code>&quot;words&quot;</code> and making a variable name out of it -- with <code>use strict;</code> that won&#39;t even compile.  Instead, pass a hash reference, like you would in any other language, and work with that (or build the hash in the sub and return it, or its reference). There&#39;s a good chance that the error will go away.  (I don&#39;t understand the rest of the question...)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568591939, "post_id": 57948342, "comment_id": 102310903, "body": "One difference: <code>$words{$wordKey}</code> performs a string comparison, but <code>$key == $wordKey</code> is a numerical comparison. You may need to normalize the values e.g. using <code>$words{0+$wordKey}</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568622787, "post_id": 57948342, "comment_id": 102318258, "body": "&quot;<i>I know the hash data does exist in the docker container</i>&quot; --- How do you know? Recall that once you ask for a key it will be created, <i>autovivified</i>; so after <code>if ($h{k})</code> that key <code>k</code> <i>does exist</i>, even if it didn&#39;t exist before. If the code you show at the end has a <code>$value</code> for <code>$wordKey</code> then I don&#39;t see how that first <code>if</code> could fail. But the key itself could&#39;ve been autovivified when you checked even if not created in the sub.  As for why-not-created ... I don&#39;t see any clue here, except for symbolic references (and apparent use of globals and no <code>use strict;</code> but those aren&#39;t errors)."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1568636007, "post_id": 57948342, "comment_id": 102325067, "body": "I&#39;m pretty sure that the Docker container has nothing to do with this problem. I suspect that the problem is down to your strange use of symbolic references."}, {"owner": {"reputation": 147, "user_id": 11376625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610bd90d065a524293fab0a6daee57c4?s=128&d=identicon&r=PG&f=1", "display_name": "adhoc", "link": "https://stackoverflow.com/users/11376625/adhoc"}, "edited": false, "score": 1, "creation_date": 1568648957, "post_id": 57948342, "comment_id": 102332516, "body": "I replaced the code as suggested by zdim passing in a reference to a global hash I created. It still only works on my local machine and not in the container. I know the hash does exist because I can loop through the hash and print up every value of each key. I just can&#39;t get the value of the key directly no matter how I dereference it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568653169, "post_id": 57948342, "comment_id": 102334261, "body": "&quot;<i>reference to a global hash</i>&quot; -- Let&#39;s then try one more thing: make that hash lexical (<code>my %hash</code> at the place where the hash need be declared), instead of global.  These may well be scoping problems? (If so, having no globals will force to clean that up.) Passing around a reference to a global may have strange effects, depending on what&#39;s done with it (as it is also seen everywhere without being passed!). It&#39;s difficult to say without seeing the code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568653420, "post_id": 57948342, "comment_id": 102334371, "body": "&quot;<i>print up every value of each key. I just can&#39;t get the value of the key directly</i>&quot;  -- let&#39;s try another thing: wherever you &quot;<i>print up every value of each key</i>&quot; make sure to also &quot;<i>print directly</i>&quot; (so right next to each other), and vice versa -- where you try and can&#39;t &quot;<i>print directly</i>&quot; add the print of every key+value.  (Because I don&#39;t know how it can be that you can print key+value but can&#39;t dereference a key, other than by having in fact something else going on.)  Another note: print your hash using <code>Dumper</code> module or such (I like <code>Data::Dump</code> with its <code>dd</code> and <code>pp</code> which isn&#39;t core)"}, {"owner": {"reputation": 147, "user_id": 11376625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610bd90d065a524293fab0a6daee57c4?s=128&d=identicon&r=PG&f=1", "display_name": "adhoc", "link": "https://stackoverflow.com/users/11376625/adhoc"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568673574, "post_id": 57948342, "comment_id": 102341283, "body": "@zdim I refactored my code and edited my original post with 2 cases and outputs for them both. There seems like a scoping issue as shown in case 2. Thanks for all the help so far."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568675050, "post_id": 57948342, "comment_id": 102341600, "body": "Ah, great!  Will look at it a little later, need to run now ... one thing: you have <code>%localhash</code> but write with <code>$localhash-&gt;{...}</code> what makes   <code>$localhash</code> a hash-reference, a scalar!  (With <code>use strict;</code> it won&#39;t allow undeclared variables and will complain about <code>$localhash</code>. Without it, it just makes it right there, and as a global.)  You want <code>$localhash{$line}=1;</code> instead.   (This is on a quick glance...)"}, {"owner": {"reputation": 147, "user_id": 11376625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610bd90d065a524293fab0a6daee57c4?s=128&d=identicon&r=PG&f=1", "display_name": "adhoc", "link": "https://stackoverflow.com/users/11376625/adhoc"}, "edited": false, "score": 0, "creation_date": 1568675664, "post_id": 57948342, "comment_id": 102341705, "body": "Hey thanks for looking when you have a moment. I updated the code as you said, but the same output still occurs. There is definitely a scoping issue but I have no idea how to address it due to my limited knowledge of Perl."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 6, "last_activity_date": 1570173219, "last_edit_date": 1570173219, "creation_date": 1568587984, "answer_id": 57948754, "question_id": 57948342, "link": "https://stackoverflow.com/questions/57948342/dereference-hash-in-perl-doesnt-work-in-docker-container/57948754#57948754", "title": "Dereference hash in Perl doesn&#39;t work in Docker Container", "body": "<p>I don't know what a \"<em>docker container</em>\" does but you are using <em>symbolic references</em> (to make a variable name out of a string) and you should never do that so lightly ... if ever; see about it <a href=\"https://learn.perl.org/faq/perlfaq7.html#How-can-I-use-a-variable-as-a-variable-name\" rel=\"nofollow noreferrer\">in perlfaq7</a>, and in <a href=\"https://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">this article series</a> and <a href=\"https://stackoverflow.com/q/1298035/4653379\">this post</a> (for starters). </p>\n\n<p>Besides, there isn't even a hint of a reason for it here -- instead of using a string literal (<code>\"words\"</code>) to make a hash name just pass a hash reference.  Or build a hash in the sub and return it  or its reference</p>\n\n<pre><code>sub load_map {\n    my ($file) = @_;\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\n    my %assoc;    \n    while (my $line = &lt;$fh&gt;) {\n        chomp $line;\n        $assoc{$line} = 1;\n    }\n    return \\%assoc;\n}\n</code></pre>\n\n<p>and get it in the caller for example as</p>\n\n<pre><code>my %words = %{ load_map('filename') };\n</code></pre>\n\n<p>If there is a reason for the hash to exist in the caller before this then pass its reference to the sub</p>\n\n<pre><code>my %words;\n...\nload_map('filename', \\%words);\n</code></pre>\n\n<p>and in the sub work with the hash using that</p>\n\n<pre><code>sub load_map { \n    my ($file, $assoc) = @_;\n    ...\n    while (my $line = &lt;$fh&gt;) { \n        chomp $line;\n        $assoc-&gt;{$line} = 1\n    }\n    return 1;\n}\n</code></pre>\n\n<p>Note that, once you've opened the file to <code>$fh</code>, you can populate your hash simply by</p>\n\n<pre><code>my %assoc = map { chomp; $_ =&gt; 1 } &lt;$fh&gt;;\n</code></pre>\n\n<p>since the <code>readline</code> (aka <code>&lt;&gt;</code>) in list context, imposed here by <code>map</code>, returns all lines from the file.</p>\n\n<p>However, the explicit line-by-line code above allows you to check as you go, etc.</p>\n\n<p>I don't understand the rest of the question (appears as an explanation?), but what I addressed here is clearly off and looking for trouble (the \"<em>docker</em>\" problem may be due to that?); it need be corrected.</p>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 11376625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610bd90d065a524293fab0a6daee57c4?s=128&d=identicon&r=PG&f=1", "display_name": "adhoc", "link": "https://stackoverflow.com/users/11376625/adhoc"}, "is_accepted": true, "score": 2, "last_activity_date": 1568778096, "creation_date": 1568778096, "answer_id": 57984762, "question_id": 57948342, "link": "https://stackoverflow.com/questions/57948342/dereference-hash-in-perl-doesnt-work-in-docker-container/57984762#57984762", "title": "Dereference hash in Perl doesn&#39;t work in Docker Container", "body": "<p>I ended up printing the hash key using <code>Data::Dump</code> as zdim suggested and it showed that when building the hashkey from a file, it was storing it as <code>someword\\r</code>.</p>\n\n<p>Chomp had removed only the <code>\\n</code> from the end leaving the <code>\\r</code> as part of the key which ultimately caused all dereference of the key or comparison to never succeed.</p>\n\n<p>I will keep the suggested code changes you all suggested but wanted to inform anyone interested about the underlying reason for the bug.</p>\n\n<p>Thanks again for all of your help and suggestions!</p>\n"}], "owner": {"reputation": 147, "user_id": 11376625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610bd90d065a524293fab0a6daee57c4?s=128&d=identicon&r=PG&f=1", "display_name": "adhoc", "link": "https://stackoverflow.com/users/11376625/adhoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 57984762, "answer_count": 2, "score": 1, "last_activity_date": 1570173219, "creation_date": 1568583369, "last_edit_date": 1568675718, "question_id": 57948342, "link": "https://stackoverflow.com/questions/57948342/dereference-hash-in-perl-doesnt-work-in-docker-container", "title": "Dereference hash in Perl doesn&#39;t work in Docker Container", "body": "<p>I have a Perl script that loads each line of a text file into a hash.</p>\n\n<pre><code>&amp;load_map($word_file,\"words\");\n\nsub load_map {\n    my ($file_path,$assoc) = @_;\n    open FILE, $file_path or die \"Cannot open file $file_path\";\n\n    while ($line = &lt;FILE&gt;) {\n    chomp $line;\n        $$assoc{$line}=1;\n    }\n    close FILE;\n}\n</code></pre>\n\n<p>Later on in the script, I look in the hash to see if a word is there before I do something:</p>\n\n<pre><code>    if($words{$wordKey}) {\n        do something...\n    }\n</code></pre>\n\n<p>This works fine when I am running the script in my local environment. When I am running this script in a docker container, <code>$words{$wordKey}</code> has no value or isn't found so my code that I need to run never executes. </p>\n\n<p><code>print $words{$wordKey}</code> is empty in a docker container. It is 1 in my local environment.</p>\n\n<p>The strange thing is, I know the hash data does exist in the docker container because if I loop through the entire hash and look at the keys 1 by 1, I can see each key and eventually get to the key I'm looking for, but this defeats the entire purpose of a hash. I shouldn't have to loop through the entire hash from beginning until I find my key.</p>\n\n<pre><code>    while( my( $key, $value ) = each %words ){\n        if($key == $wordKey) {\n            Do something\n        }\n    }\n</code></pre>\n\n<p>Has anyone ever come across this problem and understand what I may or may not be doing that is causing this issue? It's driving me crazy.</p>\n\n<p>===============================================================</p>\n\n<p>New code and output</p>\n\n<p>CASE 1:</p>\n\n<pre><code>&amp;preload_words($word_file);\n\nsub preload_words {\n    my %localhash;\n    my ($file) = @_;\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\n    my $avalue;\n    while (my $line = &lt;$fh&gt;) {\n        chomp $line;\n        $localhash{$line}=1;\n\n        print \"word: $line, local value: $localhash{$line} \\n\";\n        $avalue = $line;\n    }\n    close $fh;\n\n    print \"a word: $avalue, a value: $localhash{$avalue} \\n\";\n\n    my $bvalue = $localhash{'written'};\n    print \"b word: written, b value: $bvalue \\n\";\n}\n\n\noutputs:\n\n...\nword: worn, local value: 1\nword: win, local value: 1\nword: won, local value: 1\nword: write, local value: 1\nword: wrote, local value: 1\nword: written, local value: 1 &lt;-- last print from loop\na word: written, a value: 1 &lt;-- avalue last dynamically set from loop\nb word: written, b value: 1 &lt;-- hardcoded last word of loop print\n</code></pre>\n\n<p>CASE 2:</p>\n\n<pre><code>&amp;preload_words($word_file);\n\nsub preload_words {\n    my %localhash;\n    my ($file) = @_;\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\n    my $avalue;\n    while (my $line = &lt;$fh&gt;) {\n        chomp $line;\n        $localhash{$line}=1;\n\n        print \"word: $line, local value: $localhash{$line} \\n\";\n        $avalue = $line;\n    }\n    close $fh;\n\n    print \"a word: $avalue, a value: $localhash{$avalue} \\n\";\n\n    my $bvalue = $localhash{'wrote'};\n    print \"b word: wrote, b value: $bvalue \\n\";\n}\n\n...\nword: worn, local value: 1\nword: win, local value: 1\nword: won, local value: 1\nword: write, local value: 1\nword: wrote, local value: 1 &lt;-- prints value in loop but nothing outside of loop scope.\nword: written, local value: 1 &lt;-- last print from loop\na word: written, a value: 1 &lt;-- avalue last dynamically set from loop\nb word: wrote, b value:  &lt;-- hardcoded 2nd to last word of loop print returns no value\n</code></pre>\n\n<p>It appears to be some sort of scoping issue in the container even within the same function. Once I'm out of the while loop, I can only dereference the very last index directly. Thoughts?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1568552647, "post_id": 57944327, "comment_id": 102302551, "body": "Your regex looks fine to capture the given string from your sample data. Please show us how you use the regex."}, {"owner": {"reputation": 178, "user_id": 6655075, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7f5b06fd686452df07fdeb5af5b40b2?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6655075/jeremy"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1568553162, "post_id": 57944327, "comment_id": 102302670, "body": "Hi, I am using diggernaut and using a the same format as they have, using the  filter: ... bit and I put my regex there - <a href=\"https://www.diggernaut.com/dev/meta-language-methods-working-with-register-parse.html\" rel=\"nofollow noreferrer\">diggernaut.com/dev/&hellip;</a>"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1568553386, "post_id": 57944327, "comment_id": 102302716, "body": "Mmm, so how is this related to the <code>perl</code> development language, that you tagged your question with?"}, {"owner": {"reputation": 178, "user_id": 6655075, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7f5b06fd686452df07fdeb5af5b40b2?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6655075/jeremy"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1568553574, "post_id": 57944327, "comment_id": 102302760, "body": "Because they use perl? - if I force an error message it says &quot;error parsing regexp: invalid or unsupported Perl syntax: `...&quot;"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 1, "creation_date": 1568554730, "post_id": 57944327, "comment_id": 102303014, "body": "Your regex looks fine to me. In plain perl, you could use an expression like <code>my ($match) = ($str =~  &#47;([A-Z0-9_.\\&#47;-]{6,})&#47;);</code> to capture the first match (given your input string as <code>$str</code>, this would return <code>MK6174</code>). I don&#39;t know how diggernaut does it though. Since there is no diggernaut tag her on SO, I have added the name in the title of your question. Hopefully someone who know about diggernaut will pick this up."}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1568559919, "post_id": 57944327, "comment_id": 102304303, "body": "<a href=\"https://stackoverflow.com/a/4234491/372239\">Parsing HTML with regex is a hard job</a> HTML and regex are not good friends. Use a parser, it is simpler, faster and much more maintainable."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1568631545, "post_id": 57944327, "comment_id": 102322787, "body": "After a bit of digging (pun intended) I am pretty sure Diggernaut is written in Perl. There is a chance the person running the business might come across this here. However, my best bet given you are probably paying for the service is to ask within their community, or to raise a ticket through their website. Since this is a commercial, closed-source product we cannot look into its code to see how it works. Therefore we can only guess unfortunately."}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1568632933, "creation_date": 1568632933, "answer_id": 57955771, "question_id": 57944327, "link": "https://stackoverflow.com/questions/57944327/perl-regex-only-match-first-occurence-in-diggernaut/57955771#57955771", "title": "Perl regex only match first occurence in Diggernaut", "body": "<p>Using CSS to select the <code>td</code> adjacent to the Model number <code>th</code>:</p>\n\n<pre><code>use Web::Query::LibXML 'wq';\nmy $html = '&lt;tr&gt;&lt;th class=\"a-span5 a-size-base\"&gt;Model number&lt;/th&gt;&lt;td class=\"a-span7 a-size-base\"&gt;MK6174&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=\"a-span5 a-size-base\"&gt;Part Number&lt;/th&gt;&lt;td class=\"a-span7 a-size-base\"&gt;MK6174&lt;/td&gt;&lt;/tr&gt;';\nprint wq($html)-&gt;find('th:contains(\"Model number\") + td')-&gt;text;\n__END__\nMK6174\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 6655075, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7f5b06fd686452df07fdeb5af5b40b2?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6655075/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568632933, "creation_date": 1568552273, "last_edit_date": 1568553927, "question_id": 57944327, "link": "https://stackoverflow.com/questions/57944327/perl-regex-only-match-first-occurence-in-diggernaut", "title": "Perl regex only match first occurence in Diggernaut", "body": "<p>I have not used perl regex before and am struggling to only extract the first occurrence from some html.\nThe html concerned is as follows:</p>\n\n<pre><code>&lt;tr&gt;&lt;th class=\"a-span5 a-size-base\"&gt;Model number&lt;/th&gt;&lt;td class=\"a-span7 a-size-base\"&gt;MK6174&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=\"a-span5 a-size-base\"&gt;Part Number&lt;/th&gt;&lt;td class=\"a-span7 a-size-base\"&gt;MK6174&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n\n<p>I am trying to extract only the first match of MK6174.</p>\n\n<p>The current regex I have come up with is </p>\n\n<pre><code>([A-Z0-9_.\\/-]{6,})\n</code></pre>\n\n<p>(I have many other model numbers ranging from 6+ characters long, all being alphanumeric. (a few contain the special characters above)</p>\n\n<p>From my research I understand I need to somehow use .*? or .+? to make it non-greedy, but I cannot find the correct place to put this?</p>\n\n<p>I find if I put it at the end then it makes no difference, and anywhere inbetween it ends with 0 results.</p>\n\n<p>I have also tried adding /g onto the end to see if that works and that yields zero results.</p>\n\n<p>Also, I need to make it so this works all in one regex, as the program I am using to do this doesn't work when I enter one regex to filter out the model number html code (up to the closing td tag), then the above regex to pull the MK6174 out.</p>\n\n<p>What could I do to fix this?</p>\n\n<p>Edit: I forgot to mention that with my current regex, my output result is 'MK6174MK6174'</p>\n"}, {"tags": ["arrays", "perl", "for-loop"], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": true, "score": 2, "last_activity_date": 1568539580, "last_edit_date": 1568539580, "creation_date": 1568538873, "answer_id": 57942712, "question_id": 57942571, "link": "https://stackoverflow.com/questions/57942571/how-to-loop-through-an-array-for-subset-of-elements-in-reverse-order-in-perl/57942712#57942712", "title": "How to loop through an array for subset of elements (in reverse order) in perl", "body": "<p>The problem with your code is that expression <code>(5 .. 0)</code> does not return anything, since it means the starting number is greater than the end.</p>\n\n<p>You can run the following code snippet to see the issue (nothing prints out):</p>\n\n<pre><code>print for (5 .. 0);\n</code></pre>\n\n<p>For this to do what you want, you would need to use <a href=\"https://perldoc.perl.org/functions/reverse.html\" rel=\"nofollow noreferrer\">list operator <code>reverse</code></a>:</p>\n\n<pre><code>print for (reverse 0 .. 5);\n</code></pre>\n\n<p>Another thing to consider: in Perl, the first element of an array has index <code>0</code>. So the list you are looking for is <code>(0 ..4)</code> instead of <code>(0 .. 5)</code>.</p>\n\n<p>Here is your updated code:</p>\n\n<pre><code>my @array = (1 .. 10);\nfor my $k (reverse 0 .. 4) {\n    print \"$array[$k]\\n\";\n}\n</code></pre>\n\n<p>Side note: <a href=\"https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings\">always <code>use strict</code> and <code>use warnings</code></a>. Under these pragmas, your code would fail Variable <code>$k</code> is not declared in the code: it should be <code>for my $k ...</code> instead of <code>for $k ...</code>.</p>\n\n<p>This can also be expressed in this shorter form:</p>\n\n<pre><code>my @array = (1 .. 10);\nprint \"$array[$_]\\n\" for (reverse 0 .. 4);\n</code></pre>\n\n<p>Side note #2: it is possible to modify the code so it dynamically computes which items should be printed depending on the length of the array. For this, you can use expression <code>$#array</code>, which returns the value of the highest index in the array.</p>\n\n<p>Consider:</p>\n\n<pre><code>print \"$array[$_]\\n\" for (reverse 0 .. $#array/2);\n</code></pre>\n\n<p>If your array is <code>(1 .. 11)</code> (ie has an uneven nombre of elements), this prints: </p>\n\n<pre><code>6\n5\n4\n3\n2\n1\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 2619753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec0a71debda43b1b3bfe6622df618af?s=128&d=identicon&r=PG", "display_name": "Thilina", "link": "https://stackoverflow.com/users/2619753/thilina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 57942712, "answer_count": 1, "score": 2, "last_activity_date": 1568539580, "creation_date": 1568537667, "last_edit_date": 1568539283, "question_id": 57942571, "link": "https://stackoverflow.com/questions/57942571/how-to-loop-through-an-array-for-subset-of-elements-in-reverse-order-in-perl", "title": "How to loop through an array for subset of elements (in reverse order) in perl", "body": "<p>I have an array as below. Need to print the middle elements (element index 5 to element index 0) in reverse order.</p>\n\n<pre><code>my @array  = ( 1 .. 10 );\n</code></pre>\n\n<p><strong>my required output:</strong></p>\n\n<pre><code>5\n4\n3\n2\n1\n</code></pre>\n\n<p>I tried below code. But it does not print anything.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nmy @array = (1 .. 10);\n\nfor $k (5 .. 0){\n    print \"$array[$k]\\n\";\n}\n\n</code></pre>\n"}, {"tags": ["arrays", "list", "perl", "hash", "scalar"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1568536297, "post_id": 57942313, "comment_id": 102299363, "body": "That can&#39;t be your Dumper output because hash keys are unique. That for loop doesn&#39;t look right either. You should include your actual code, copy and pasted if needed, not some random kind of but not quite what you&#39;re actually doing thing. But the keys and values are all plain scalars. <code>ref</code> returns an empty string because they&#39;re not references."}, {"owner": {"reputation": 429, "user_id": 11940163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fd03e0a47aa014dfd25c7063607192?s=128&d=identicon&r=PG&f=1", "display_name": "bigdataolddriver", "link": "https://stackoverflow.com/users/11940163/bigdataolddriver"}, "edited": false, "score": 1, "creation_date": 1568542197, "post_id": 57942313, "comment_id": 102300479, "body": "please try to produce a minmum example with actual code without your original private data .  the for looo doesn&#39;t look right but i cant confirm with your  dummy code pieces"}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "edited": false, "score": 0, "creation_date": 1568557781, "post_id": 57942313, "comment_id": 102303757, "body": "No that wasn&#39;t dumper code. The keys were unique. I have edited the code. The loop works right as far as i can say from the output of my dumper. I have 2 equal sized arrays with different kind of datas. I need to find the association. Hence the hash. Now I want to identify keys whose values are &lt;50. But I can&#39;t reach the values. they are NOT ARRAYS. NOT REFERENCE. Therefore they are scalars. but the &quot;looks_like_number()&quot; function fails. Which means they are values warped inside some other data structure. I thought value inside string. Then why ref() eq &#39;ARRAY&#39; fails?"}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "edited": false, "score": 0, "creation_date": 1568557822, "post_id": 57942313, "comment_id": 102303771, "body": "I have edited the code. the code is exactly the same with original data."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1568564029, "post_id": 57942313, "comment_id": 102305202, "body": "Please show an example of the content of <code>@array1</code> and <code>@array2</code>. From the the dumper output, it seems like the values are wrapped inside double quotes. It is difficult to tell why that happend without you showing more code"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1568578665, "post_id": 57942313, "comment_id": 102308759, "body": "Again, as @Shawn said, that code can&#39;t compile -- it&#39;s <code>$hash{ $v1 = $v2 ; }</code> -- see that semicolon? That&#39;s not allowed and would exit with <code>syntax error</code>. Can you please show realistic code? /// What you show doesn&#39;t assign a value to a key but assigns one variable to another inside of a key, like my example above. So (w/o that illegal semicolon) you&#39;d have no keys, or, if there was more code, perhaps all keys would be the value of the assignment (returned in Perl), and without a value. You want <code>$hash{$array1[$ele]} = $array2[$ele];</code> ... but then there are better ways"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568578690, "post_id": 57942313, "comment_id": 102308765, "body": "<code>my %h; for my $i (2..$#ary) { $h{$ary1[$i]} = $ary2[$i] }</code> or in one statement (if there&#39;s no error checking etc) <code>my %h = map { $ary1[$_], $ary2[$_] } 2..$#ary;</code>"}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "edited": false, "score": 0, "creation_date": 1568579776, "post_id": 57942313, "comment_id": 102308971, "body": "I did exactly this. I just typed it wrong here. My bad. corrected. It&#39;s a simple C style array. and from the Dumper output, i can see the hash is created correctly."}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "edited": false, "score": 0, "creation_date": 1568579886, "post_id": 57942313, "comment_id": 102308990, "body": "Dumper output of array1 is similar to : $VAR1=&#39;abc&#39;; $VAR2=&#39;ghy&#39;;$VAR3=&#39;njkio&#39;;"}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568580355, "post_id": 57942313, "comment_id": 102309082, "body": "@H&#229;konH&#230;gland, EXACTLY! i have put the similar output of array 1 and array2 in the original question."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1568581545, "post_id": 57942313, "comment_id": 102309285, "body": "Can you please edit your question to include some code that I can copy, paste, and test to see the same output you are seeing?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568582363, "post_id": 57942313, "comment_id": 102309425, "body": "@GreenRoad-Dhaka The question is why did <code>@array2</code> get values wrapped in double quotes? How did you create <code>@array2</code>?"}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "edited": false, "score": 0, "creation_date": 1568583486, "post_id": 57942313, "comment_id": 102309613, "body": "array1 array2 was created from a text file. text was created from a excel.I read the file row by row and created an array for each row. first row is array1. All the rest of the rows has values &quot;0&quot;/&quot;&quot;/&quot;34.890&quot; in this format (inside double quote). which when i assign to arrays becomes &#39; &quot;0&quot; &#39;/&#39; &quot; &quot; &#39; /&#39; &quot;34.678&quot; &#39; like this."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1568586931, "post_id": 57942313, "comment_id": 102310220, "body": "@GreenRoad-Dhaka Ok then a simple solution is to remove the quotes before inserting them into the array?"}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "edited": false, "score": 0, "creation_date": 1568588452, "post_id": 57942313, "comment_id": 102310440, "body": "was thinking about that. :)"}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568588690, "post_id": 57942313, "comment_id": 102310476, "body": "@H&#229;konH&#230;gland is there any simple way of doing that automatically? too much data to do it by hand. also prone to errors"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1568615590, "post_id": 57942313, "comment_id": 102315174, "body": "@GreenRoad-Dhaka Yes of course you have to do it automatically :) For example if <code>$s = &#39;&quot;abc&quot;&#39;</code> then remove quotes by <code>$s =~ s&#47;^&quot;|&quot;$&#47;&#47;g</code>"}, {"owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "edited": false, "score": 0, "creation_date": 1568653899, "post_id": 57942313, "comment_id": 102334560, "body": "Modified the array content. Problem solved! :)"}], "answers": [{"tags": [], "owner": {"reputation": 370, "user_id": 12094283, "user_type": "registered", "profile_image": "https://graph.facebook.com/498607340934860/picture?type=large", "display_name": "Bernhard Beatus", "link": "https://stackoverflow.com/users/12094283/bernhard-beatus"}, "is_accepted": false, "score": 1, "last_activity_date": 1568966649, "creation_date": 1568966649, "answer_id": 58024302, "question_id": 57942313, "link": "https://stackoverflow.com/questions/57942313/confused-about-the-variable-type-of-a-hash-variable-in-perl/58024302#58024302", "title": "Confused about the variable type of a hash variable in perl", "body": "<p>I don't know if I understand you right.\nTry this:</p>\n\n<pre><code>my %Austin = (\n    \"key1\"    =&gt; '\"\"',\n    \"key2\"    =&gt; '\"0\"',\n    \"key3\"    =&gt; '\"47.55789\"',\n    \"key4\"    =&gt; '\"\"',\n    \"key5\"    =&gt; '\"78.5463\"',\n    \"key6\"    =&gt; '\"0\"',\n    \"key7\"    =&gt; '\"\"'\n);\n\nforeach my $grp(keys %Austin){\n    print $grp, \"\\n\";\n    foreach my $val ($Austin{$grp}){\n        print $val, \"\\n\";\n        if($val =~ m/\\d/){\n            print \"String is a NUMBER\\n\";\n        } else { \n            print \"string is Not a number\\n\";\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5221408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5663adcd1def5c0e762f57a84c65e21c?s=128&d=identicon&r=PG&f=1", "display_name": "GreenRoad-Dk", "link": "https://stackoverflow.com/users/5221408/greenroad-dk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568966649, "creation_date": 1568535422, "last_edit_date": 1568581345, "question_id": 57942313, "link": "https://stackoverflow.com/questions/57942313/confused-about-the-variable-type-of-a-hash-variable-in-perl", "title": "Confused about the variable type of a hash variable in perl", "body": "<p>I have created a hash from 2 arrays of same size. One arrays element is used as index and another's as value.\n<code>for (my $ele=2;$ele&lt;=$#array1;ele++) {$hash{$array1[$ele]}=$array2[$ele];}</code>\n  when I print it with Dumper, it shows similar to following:</p>\n\n<pre><code>$VAR1={'key1'=&gt;'\"\"',\n       'key2'=&gt;'\"0\"',\n       'key3'=&gt;'\"47.55789\"',\n       'key4'=&gt; '\"\"',\n       'key5'=&gt;'\"78.5463\"',\n       'key6'=&gt;'\"0\"',\n       'key7'=&gt;'\"\"'  };\n</code></pre>\n\n<p>I need to compare the values to identify some keys. And I am failing to understand what kind of value my hash keys are pointing to. I tried, <code>foreach(@array2){ print ref($_);}</code> and it returns nothing 859 times (there are 861 elements in both arrays. I didn't want the first 2 elements). <code>looks_like_number($hash{$key})</code> fails. And <code>if ref($hash{$key}) eq 'ARRAY'</code> is not array.\nI am new to perl. At the beginning I thought, the values are array of strings OR list of strings which are itself list? may be? I tried to loop over all kind of possibilities but failing. It prints the values perfectly but I need to compare them but I can't reach to the exact value. <code>empty string/0/&gt;50/&lt;50</code>. \nAny help will be highly appreciated.  </p>\n\n<p>Dumper output of array1 is similar to : \n<code>$VAR1='abc'; \n $VAR2='ghy';\n $VAR3='njkio';\n $VAR4='mkol';</code>\nDumper output of array2:</p>\n\n<pre><code>$VAR1='\"\"';\n$VAR2='\"0\"';\n$VAR3='\"47.55789\"';\n$VAR4='\"\"';\n$VAR5='\"78.5463\"';\n$VAR6='\"0\"';\n$VAR7='\"\"';  \n\nforeach my $grp(keys %Austin){\n  foreach my $val ($Austin{$grp}){\n     if(looks_like_number($val)){print \"String is a NUMBER\\n\";}\n     else {print \"string is Not a number\\n\";}\n  }\n}\n</code></pre>\n\n<p>the printout for this loop is string is not a number each time. I tried to understand the '\"76.90\"' value.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568534278, "post_id": 57940256, "comment_id": 102298994, "body": "Are you asking what <code>check.pl</code> is doing, which telling us anything about <code>check.pl</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1568534394, "post_id": 57940256, "comment_id": 102299016, "body": "I don&#39;t see what question asked in the title of the post has to do with the body of the post."}, {"owner": {"reputation": 27, "user_id": 8684368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6f621eb69118195e11a996d1671e48?s=128&d=identicon&r=PG&f=1", "display_name": "Haroon Ahmad", "link": "https://stackoverflow.com/users/8684368/haroon-ahmad"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568576000, "post_id": 57940256, "comment_id": 102308209, "body": "Yes exactly, what check.pl is doing. How check.pl is performing all checks and what it can&#39;t take urls that don&#39;t start from root url, so more information from you and I can dig more into this myself."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568576824, "post_id": 57940256, "comment_id": 102308387, "body": "How should we know? We&#39;ve never seen your file."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568577022, "post_id": 57940256, "comment_id": 102308421, "body": "It&#39;s unclear what&#39;s you mean by &quot;url that starts from root url&quot;."}], "owner": {"reputation": 27, "user_id": 8684368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6f621eb69118195e11a996d1671e48?s=128&d=identicon&r=PG&f=1", "display_name": "Haroon Ahmad", "link": "https://stackoverflow.com/users/8684368/haroon-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568528683, "creation_date": 1568507470, "last_edit_date": 1568528683, "question_id": 57940256, "link": "https://stackoverflow.com/questions/57940256/how-to-post-form-data-without-root-url-in-this-perl-library", "title": "How to post form data without root url in this perl library", "body": "<p>Setup:\n1. To install, do following:\nperl -MCPAN -e shell, then, install HTML::Form::XSS</p>\n\n<ol start=\"2\">\n<li><p>I'm using this library for PERL to audit XSS\n<a href=\"https://metacpan.org/pod/HTML::Form::XSS\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/HTML::Form::XSS</a></p></li>\n<li><p>Perl File will be in HTML-FORM-XSS as check.pl</p></li>\n<li><p>System File Paths: /usr/local/share/perl/5.28.1/HTML/Form/XSS.pm</p></li>\n</ol>\n\n<p>Result 1: perl check.pl <a href=\"https://google.com\" rel=\"nofollow noreferrer\">https://google.com</a></p>\n\n<pre><code>[-]         Login Form Details      [-]\n\nGET https://www.google.com/search [f]\n  ie=ISO-8859-1                  (hidden readonly)\n  hl=en-PK                       (hidden readonly)\n  source=hp                      (hidden readonly)\n  biw=                           (hidden readonly)\n  bih=                           (hidden readonly)\n  q=                             (text)\n  btnG=Google Search             (submit)\n  btnI=I'm Feeling Lucky         (submit)\n  gbv=1                          (hidden readonly)\n\n[-]                         [-]\n\n\n[+] Perform Login Injection (y/n): y\n[+] Auto Auditing Form for Login Injection\n\n[+] Injected Return Status:200 OK\n[+] URL:https://www.google.com/search\"\n</code></pre>\n\n<p>Result 2: perl check.pl <a href=\"https://localhost/service/login.asp\" rel=\"nofollow noreferrer\">https://localhost/service/login.asp</a></p>\n\n<pre><code>[-]         Login Form Details      [-]\n\nPOST https://localhost/ea/ds-wac-iis.dll [login]\n  ontUser=                       (text)\n  ontPassword=                   (password)\n  Submit=Login                   (submit)\n  Help=Help                      (button)\n\n[-]                         [-]\n\n\n[+] Perform Login Injection (y/n): y\n[+] Login Injection\n\n[+] Injected Return Status:302 Object Moved\n[+] URL:https://localhost/ea/ds-wac-iis.dll\n[+] Injected Return Status:302 Object Moved\n[+] URL:https://localhost/ea/ds-wac-iis.dll\"\n</code></pre>\n\n<p>QUESTION:</p>\n\n<p>How do I post request or follow redirect for file extensions, I can't figure out much, what's happening here and how to fix it or how to extract more information regarding error as it works fine in php and root url but not in asp, aspx file extensions, WHY IS THAT.</p>\n"}, {"tags": ["windows", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6395008, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0oniU2FLZNk/AAAAAAAAAAI/AAAAAAAADAk/cMMXJ2ppRoU/photo.jpg?sz=128", "display_name": "Sunny Shinde", "link": "https://stackoverflow.com/users/6395008/sunny-shinde"}, "edited": false, "score": 0, "creation_date": 1568405803, "post_id": 57929416, "comment_id": 102277221, "body": "Thank you it worked. Why the qq?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 1, "user_id": 6395008, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0oniU2FLZNk/AAAAAAAAAAI/AAAAAAAADAk/cMMXJ2ppRoU/photo.jpg?sz=128", "display_name": "Sunny Shinde", "link": "https://stackoverflow.com/users/6395008/sunny-shinde"}, "edited": false, "score": 0, "creation_date": 1568414736, "post_id": 57929416, "comment_id": 102279471, "body": "To avoid the need to escape the nested double quotes."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1568403147, "creation_date": 1568403147, "answer_id": 57929416, "question_id": 57929370, "link": "https://stackoverflow.com/questions/57929370/i-get-the-following-error-when-i-use-perl-interpreter-with-e-option/57929416#57929416", "title": "I get the following error when I use Perl interpreter with -e option", "body": "<p>On MSWin, single quotes behave differently to *nix shells. You need double quotes instead, and for the inside, use the <code>qq</code> operator.</p>\n\n<pre><code>perl -e \"print qq(Hello World\\n)\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6395008, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0oniU2FLZNk/AAAAAAAAAAI/AAAAAAAADAk/cMMXJ2ppRoU/photo.jpg?sz=128", "display_name": "Sunny Shinde", "link": "https://stackoverflow.com/users/6395008/sunny-shinde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1568403127, "answer_count": 1, "score": -1, "last_activity_date": 1568403255, "creation_date": 1568402889, "last_edit_date": 1568403255, "question_id": 57929370, "link": "https://stackoverflow.com/questions/57929370/i-get-the-following-error-when-i-use-perl-interpreter-with-e-option", "closed_reason": "Duplicate", "title": "I get the following error when I use Perl interpreter with -e option", "body": "<pre class=\"lang-none prettyprint-override\"><code>C:\\Windows\\system32&gt;perl -e 'print \"Hello World\\n\"'\nCan't find string terminator \"'\" anywhere before EOF at -e line 1.\n</code></pre>\n"}, {"tags": ["perl", "regex-lookarounds", "substitution"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1568400897, "post_id": 57928956, "comment_id": 102275476, "body": "Is the number of float columns fixed? Can &quot;a bbb c&quot; contain digits?"}, {"owner": {"reputation": 69, "user_id": 3422424, "user_type": "registered", "profile_image": "https://graph.facebook.com/772292978/picture?type=large", "display_name": "user3422424", "link": "https://stackoverflow.com/users/3422424/user3422424"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1568401361, "post_id": 57928956, "comment_id": 102275650, "body": "Yes, it can also contain digits."}, {"owner": {"reputation": 69, "user_id": 3422424, "user_type": "registered", "profile_image": "https://graph.facebook.com/772292978/picture?type=large", "display_name": "user3422424", "link": "https://stackoverflow.com/users/3422424/user3422424"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1568401427, "post_id": 57928956, "comment_id": 102275674, "body": "... and the number of floats can vary, but it will be the same for any file treated."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1568401839, "post_id": 57928956, "comment_id": 102275808, "body": "Are all lines in your files always the same (i.e. a word followed by floats)? Is there a header first row (with columns names) from which you can deduce the number of columns?"}, {"owner": {"reputation": 69, "user_id": 3422424, "user_type": "registered", "profile_image": "https://graph.facebook.com/772292978/picture?type=large", "display_name": "user3422424", "link": "https://stackoverflow.com/users/3422424/user3422424"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1568401929, "post_id": 57928956, "comment_id": 102275841, "body": "Yes, there is such a header. I know the number of floats to expect."}], "answers": [{"tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1568403060, "creation_date": 1568403060, "answer_id": 57929402, "question_id": 57928956, "link": "https://stackoverflow.com/questions/57928956/substituting-spaces-for-underscores-using-lookaheads-in-perl/57929402#57929402", "title": "substituting spaces for underscores using lookaheads in perl", "body": "<p>Would something like this work for you:</p>\n\n<pre><code>s/\\s+/_/g;\ns/_(-?\\d+\\.)/ $1/g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568565449, "post_id": 57929439, "comment_id": 102305581, "body": "@ikegami: note that I already asked in comments if there&#39;s a header line at the start of the files and if each file has the same number of fields for each line. The answers was both positive. About eventual consecutive spaces, it&#39;s really a detail, that doesn&#39;t appear in the example string and that is really easy to solve."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568566843, "post_id": 57929439, "comment_id": 102305939, "body": "@ikegami: About downvotes I suppose that people unable to fully read an answer has tested the command line with the example row without to understand that the header line is needed to make it work."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568583850, "post_id": 57929439, "comment_id": 102309674, "body": "So at worst, it assumes that the header line isn&#39;t well formatted too? In this case, how user3422424 can say <i>&quot;I know the number of floats to expect&quot;</i>? He invents it or he declares it? Whatever it is a better solution than a lookahead since the first field can contain digits."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568584149, "post_id": 57929439, "comment_id": 102309742, "body": "<i>&quot;more than once space&quot;</i>, in other words, consecutive spaces in the first field: you only have to add the <code>+</code> quantifier to solve it."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568584309, "post_id": 57929439, "comment_id": 102309769, "body": "It isn&#39;t the question or in the example string, but why not."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568585267, "post_id": 57929439, "comment_id": 102309942, "body": "No mention of them being consecutive too as you can see in the example string. And in my opinion about common mistakes in csv, not specialy realistic too."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1568585536, "post_id": 57929439, "comment_id": 102309982, "body": "The only problem with this topic is the asker mutism about the different suggested answers."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": -1, "last_activity_date": 1568587556, "last_edit_date": 1568587556, "creation_date": 1568403266, "answer_id": 57929439, "question_id": 57928956, "link": "https://stackoverflow.com/questions/57928956/substituting-spaces-for-underscores-using-lookaheads-in-perl/57929439#57929439", "title": "substituting spaces for underscores using lookaheads in perl", "body": "<p>Assuming from your comments your files look like that:</p>\n\n<pre><code>name float1 float2 float3\na bbb c -0.15636028 -0.2953045 0.29853472\nabbb c -0.15636028 -0.2953045 0.29853472\na bbbc -0.15636028 -0.2953045 0.29853472\nab    bbc -0.15636028 -0.2953045 0.29853472\nabbbc -0.15636028 -0.2953045 0.29853472\n</code></pre>\n\n<p>Since you said in comments that the first field may contain digits, you can't use a lookahead that searches the first float to solve the problem. (you can nevertheless use a lookahead that counts the number of floats until the end of the line but it isn't very handy).</p>\n\n<p>What I suggest is a solution based on fields number defined by the header first line.</p>\n\n<p>You can use the header line to know the number of fields and replace spaces at the begining of other lines until the number of fields is the same.</p>\n\n<p>You can use perl command line as awk like that:</p>\n\n<pre><code>perl -MEnglish -pae'$c=scalar @F if ($NR==1);for($i=0;$i&lt;scalar(@F)-$c;$i++){s/\\s+/_/}' file\n</code></pre>\n\n<p>The for loop counts the difference between the number of fields in the first row (stored in <code>$c</code>) and in the current line (given by <code>scalar(@F)</code> where <code>@F</code> is the fields array), and repeats the substitution.</p>\n\n<p>The <code>a</code> switches the perl command line in autosplit mode and the -MEnglish makes available the <em>number row</em> variable  as <code>$NR</code> (like the NR variable in awk).</p>\n\n<p>It's possible to shorten it like that:</p>\n\n<pre><code>perl -pae'$c=@F if $.&lt;2;$i=@F-$c;s/\\s+/_/ while $i--' file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 3422424, "user_type": "registered", "profile_image": "https://graph.facebook.com/772292978/picture?type=large", "display_name": "user3422424", "link": "https://stackoverflow.com/users/3422424/user3422424"}, "edited": false, "score": 0, "creation_date": 1568454786, "post_id": 57930602, "comment_id": 102285036, "body": "Thanks for a very good answer. Thought I had a decent control of regexp and substitution, made me think again :-). And, needless to say, this actually works ..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 3422424, "user_type": "registered", "profile_image": "https://graph.facebook.com/772292978/picture?type=large", "display_name": "user3422424", "link": "https://stackoverflow.com/users/3422424/user3422424"}, "edited": false, "score": 0, "creation_date": 1568496512, "post_id": 57930602, "comment_id": 102294084, "body": "@user3422424 Great, I&#39;m glad if it helps.  I hope it&#39;s not too much &quot;explanation&quot; then :)   Let me know if there are questions, or if they pop up at any point."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 3422424, "user_type": "registered", "profile_image": "https://graph.facebook.com/772292978/picture?type=large", "display_name": "user3422424", "link": "https://stackoverflow.com/users/3422424/user3422424"}, "edited": false, "score": 2, "creation_date": 1568595368, "post_id": 57930602, "comment_id": 102311348, "body": "Wow, had -1 (no clue why), now it&#39;s -2 ... ?  Seriously?"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1568643407, "post_id": 57930602, "comment_id": 102329353, "body": "Nice answer. I could not figure out how to combine my two regex into one. Now I do. +1"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1568709293, "post_id": 57930602, "comment_id": 102350887, "body": "@Andrey Thank you. Yeah, the <code>s&#47;&#47;&#47;e</code> is a handy way for two-step processing -- capture suitably and then run code on that. (But one should keep in mind not to push that too far! :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1582099286, "post_id": 57930602, "comment_id": 106655588, "body": "So this is <b>now at -3</b> and I&#39;ve read it very carefully yet again and I don&#39;t get it.  Given that each answer on this page has multiple downvotes perhaps it&#39;s not about content?  If anyone sees reasons good enough to downvote please let me know so that I can improve it"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1582099183, "last_edit_date": 1582099183, "creation_date": 1568410527, "answer_id": 57930602, "question_id": 57928956, "link": "https://stackoverflow.com/questions/57928956/substituting-spaces-for-underscores-using-lookaheads-in-perl/57930602#57930602", "title": "substituting spaces for underscores using lookaheads in perl", "body": "<p>Your idea for the lookahead is fine, but the question is how to replace only spaces in the part matched before the lookahead, when they are mixed with other things (the words, that is).</p>\n\n<p>One way is to capture what precedes the first float (given by lookahead), and in the replacement part run another regex on what's been captured, to replace spaces</p>\n\n<pre><code>s{ (.*?) (?=\\s+-?[0-9]+\\.[0-9]) }{ $1 =~ s/\\s+/_/gr }ex\n</code></pre>\n\n<p>Notes</p>\n\n<ul>\n<li><p>Modifier <code>/e</code> makes the replacement part be evaluated as code; any valid Perl code goes</p></li>\n<li><p>With <code>s{}{}</code> delimiters we can use <code>s///</code> ones in the replacement part's regex</p></li>\n<li><p>Regex in the replacement part, that changes spaces to <code>_</code> in the captured text, has <code>/r</code> modifier so to return the modified string and leave the original unchanged. Thus we aren't attempting to change <code>$1</code> (it's read only), and the modified string (being returned) is available as the replacement</p></li>\n<li><p>Modifier <code>/x</code> allows use of spaces in patterns, for readability</p></li>\n<li><p>Some assumptions must be made here. Most critical one is that the text to process is followed by a number in the given format, <code>-?[0-9]+\\.[0-9]+</code>, and that there isn't such a number in the text itself.  This follows the OP's sample and, more decidedly, the attempted solution</p></li>\n<li><p>A couple of details with assumptions.  (1) Leading digits are expected with <code>[0-9]+\\.</code> -- if you can have numbers like <code>.123</code> then use <code>[0-9]*\\.</code> (2) The <code>\\s+</code> in the inner regex collapses multiple consecutive spaces into one <code>_</code>, so <code>a  b c</code> becomes <code>a_b_c</code> (and not <code>a__b_c</code>)</p></li>\n<li><p>In the lookahead I scoop up all spaces preceding the first float with <code>\\s+</code> -- and so they'll stay in front of the first float. This is as wanted with one space but with multiple ones it may be awkward</p>\n\n<p>If they were included in the <code>.*?</code> capture (if the lookahead only has one space, <code>\\s</code>) then we'd get an <code>_</code> trailing the word(s). I thought that'd be <em>more</em> awkward.  The ideal solution is to run another regex and clean that up, if such a case is possible and if it's a bother</p></li>\n</ul>\n\n<p>An example</p>\n\n<pre><code>echo \"a bbb c -0.15636028 -0.2953045\" |\n    perl -wpe's{(.*?)(?=\\s+-?[0-9]+\\.[0-9])}{ $1 =~ s/\\s+/_/gr }e'\n</code></pre>\n\n<p>prints</p>\n\n<pre>\na_bbb_c -0.15636028 -0.2953045\n</pre>\n\n<hr>\n\n<p>Then to process all lines in a file you can do either</p>\n\n<pre><code> perl -wpe'...' file &gt; new_file\n</code></pre>\n\n<p>and get a <code>new_file</code> with changes, or</p>\n\n<pre><code> perl -i.bak -wpe'...' file\n</code></pre>\n\n<p>to change the <code>file</code> <em>in-place</em> (that's <code>-i</code>), where <code>.bak</code> makes it save a backup.</p>\n"}, {"tags": [], "owner": {"reputation": 4610, "user_id": 939457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fe6f9024ad67320a2bdc2f7e60e2cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Sorin", "link": "https://stackoverflow.com/users/939457/sorin"}, "is_accepted": false, "score": 0, "last_activity_date": 1581183150, "last_edit_date": 1581183150, "creation_date": 1568439456, "answer_id": 57932767, "question_id": 57928956, "link": "https://stackoverflow.com/questions/57928956/substituting-spaces-for-underscores-using-lookaheads-in-perl/57932767#57932767", "title": "substituting spaces for underscores using lookaheads in perl", "body": "<p>Use a negative lookahead to replace any spaces not followed by a float:</p>\n\n<pre><code>echo \"a bbb cc  -0.123232 -0.3232\" | perl -wpe 's/ +(?! *-?\\d+\\.)/_/g'\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 3422424, "user_type": "registered", "profile_image": "https://graph.facebook.com/772292978/picture?type=large", "display_name": "user3422424", "link": "https://stackoverflow.com/users/3422424/user3422424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 57930602, "answer_count": 4, "score": 1, "last_activity_date": 1590233902, "creation_date": 1568400778, "last_edit_date": 1590233902, "question_id": 57928956, "link": "https://stackoverflow.com/questions/57928956/substituting-spaces-for-underscores-using-lookaheads-in-perl", "title": "substituting spaces for underscores using lookaheads in perl", "body": "<p>I have files with many lines of the following form:</p>\n\n<pre>\nword -0.15636028 -0.2953045 0.29853472 .... \n</pre>\n\n<p>(one word preceding several hundreds floats delimited by blanks) </p>\n\n<p>Due to some errors out of my control, the word sometimes has spaces in it.</p>\n\n<pre>\na bbb c -0.15636028 -0.2953045 0.29853472  .... (several hundreds floats)\n</pre>\n\n<p>which I wish to substitute by underscores so to get:</p>\n\n<pre>\na_bbb_c -0.15636028 -0.2953045 0.29853472  .... (several hundreds floats)\n</pre>\n\n<p>have tried for each line the following substitution code:</p>\n\n<pre><code>s/\\s(?=(\\s-?\\d\\.\\d+)+)/_/g;\n</code></pre>\n\n<p>So lookarounds is apparently not the solution.\nI'd be grateful for any clues.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 4610, "user_id": 939457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fe6f9024ad67320a2bdc2f7e60e2cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Sorin", "link": "https://stackoverflow.com/users/939457/sorin"}, "is_accepted": false, "score": 1, "last_activity_date": 1569167389, "last_edit_date": 1569167389, "creation_date": 1568397240, "answer_id": 57928304, "question_id": 57927276, "link": "https://stackoverflow.com/questions/57927276/how-to-use-filetemptempfile-with-selected-characters-such-as-digits-only/57928304#57928304", "title": "How to use File::Temp::tempfile with selected characters, such as digits only", "body": "<p>Just for academic fun, you can override the <a href=\"https://metacpan.org/release/File-Temp/source/lib/File/Temp.pm#L615\" rel=\"nofollow noreferrer\"><code>_replace_XX</code></a> function in the <code>File::Temp</code> package:</p>\n\n<pre><code>#!/usr/bin/perl\nuse File::Temp;\nuse strict;\n{   \n    local *File::Temp::_replace_XX = sub { \n        my @CHARS = (qw/0 1 2 3 4 5 6 7 8 9/);\n        # verbatim copy of the original \n        my ($path, $ignore) = @_;\n\n        my $end = ( $] &gt;= 5.006 ? \"\\\\z\" : \"\\\\Z\" );\n\n        if ($ignore) {\n            substr($path, 0, - $ignore) =~ s/X(?=X*$end)/$CHARS[ int( rand( @CHARS ) ) ]/ge;\n        } else {\n            $path =~ s/X(?=X*$end)/$CHARS[ int( rand( @CHARS ) ) ]/ge;\n        }\n        return $path;\n    };\n    print mktemp(\"digitsXXXX\").\"\\n\";\n}\n</code></pre>\n\n<p>You can use the <code>B::Deparse</code> module so you don't have to manually replicate the code (and you don't want any other customization than changing the CHAR value)</p>\n\n<pre><code>#!/usr/bin/perl\nuse File::Temp;\nuse B::Deparse;\nuse strict;\n{   \n    my $deparser = B::Deparse-&gt;new();\n    my $code = $deparser-&gt;coderef2text(\\&amp;File::Temp::_replace_XX);\n\n    local *File::Temp::_replace_XX = sub { \n        my @CHARS = 0..9;\n        eval($code);\n    };\n    print mktemp(\"digitsXXXX\").\"\\n\";\n}\n</code></pre>\n\n<p>Or you can use <code>PadWalker</code> (note this is not a core module) as <a href=\"https://stackoverflow.com/users/5848200/grinnz\">Grinnz</a> suggested:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse File::Temp;\nuse PadWalker 'closed_over';\n\nmy $chars_ref = closed_over(\\&amp;File::Temp::_replace_XX)-&gt;{'@CHARS'};\n@$chars_ref = 0..9;\n\nprint mktemp(\"digitsXXXX\").\"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "reply_to_user": {"reputation": 4610, "user_id": 939457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fe6f9024ad67320a2bdc2f7e60e2cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Sorin", "link": "https://stackoverflow.com/users/939457/sorin"}, "edited": false, "score": 0, "creation_date": 1569414263, "post_id": 57938218, "comment_id": 102588443, "body": "<b>Example:</b> If we exclude spaces, the <a href=\"https://stackoverflow.com/questions/11794144/regular-expression-for-valid-filename\">regex charset for allowed filename characters</a> is <code>[\\w\\-.]</code>. Without the use or regex, this charset can be written as the array <code>(&#39;0&#39;-&#39;9&#39;,&#39;a&#39;-&#39;z&#39;,&#39;A&#39;-&#39;Z&#39;,&#39;_&#39;,&#39;-&#39;,&#39;.&#39;)</code>. Obviously both solutions are correct. It is coder&#39;s personal choice."}], "tags": [], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "is_accepted": true, "score": -1, "last_activity_date": 1568485910, "creation_date": 1568485910, "answer_id": 57938218, "question_id": 57927276, "link": "https://stackoverflow.com/questions/57927276/how-to-use-filetemptempfile-with-selected-characters-such-as-digits-only/57938218#57938218", "title": "How to use File::Temp::tempfile with selected characters, such as digits only", "body": "<p>For those who wants to use <strong>regex</strong> to define allowed characters, such as <code>[0-9]</code> (digits only), the following code does the trick:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse File::Temp;                                       #  regex \u2500\u2510\nuse PadWalker qw /closed_over/;                       #         \u2193\n\n@{closed_over(\\&amp;File::Temp::_replace_XX)-&gt;{'@CHARS'}} = grep /[0-9]/, map{chr $_} 0..255;\n\nprint mktemp(\"digitsXXXX\") . \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 37436, "user_id": 1215106, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/615ff12525dbd5868b7c78d9754aed72?s=128&d=identicon&r=PG", "display_name": "\u2126mega", "link": "https://stackoverflow.com/users/1215106/%e2%84%a6mega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 2, "protected_date": 1568633989, "accepted_answer_id": 57938218, "answer_count": 2, "score": -1, "last_activity_date": 1569167389, "creation_date": 1568392036, "last_edit_date": 1568633407, "question_id": 57927276, "link": "https://stackoverflow.com/questions/57927276/how-to-use-filetemptempfile-with-selected-characters-such-as-digits-only", "title": "How to use File::Temp::tempfile with selected characters, such as digits only", "body": "<p>I am using <code>File::Temp</code> library to create temporary files, like this:</p>\n\n<pre><code>use File::Temp  qw/tempfile/;\nuse Time::HiRes qw/gettimeofday/;\n\n($_, my $tmp) = tempfile(sprintf(\"%d_XXXXXX\", int(gettimeofday * 1000)), \n                  DIR =&gt; $directory, \n                  SUFFIX =&gt; '.pdf', \n                  OPEN =&gt; 1\n                );\n\nchmod(((stat $_)[2] &amp; 0777) | 0644, $_);\nclose $_;\n</code></pre>\n\n<p>Is there an option or some easy way to force the library to use just selected characters, such as digits, for the <code>XXXXXX</code> name part? Is it possible to use <strong>regex</strong> to define such allowed characters?</p>\n"}, {"tags": ["regex", "perl", "multiline"], "comments": [{"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1568358561, "post_id": 57918837, "comment_id": 102255683, "body": "What is the output that you&#39;re expecting?"}, {"owner": {"reputation": 526, "user_id": 3475508, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5237ed5ee5b673a0716ff58c8787841d?s=128&d=identicon&r=PG&f=1", "display_name": "LogicalKip", "link": "https://stackoverflow.com/users/3475508/logicalkip"}, "edited": false, "score": 2, "creation_date": 1568358693, "post_id": 57918837, "comment_id": 102255749, "body": "If you want everything on a single line, can&#39;t you just remove all \\n ?"}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1568358739, "post_id": 57918837, "comment_id": 102255765, "body": "@CinCout The string in the question, but in one single line."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "reply_to_user": {"reputation": 526, "user_id": 3475508, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5237ed5ee5b673a0716ff58c8787841d?s=128&d=identicon&r=PG&f=1", "display_name": "LogicalKip", "link": "https://stackoverflow.com/users/3475508/logicalkip"}, "edited": false, "score": 0, "creation_date": 1568358801, "post_id": 57918837, "comment_id": 102255799, "body": "@LogicalKip Well no, because I have a file with 80.000 lines."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568358877, "post_id": 57918837, "comment_id": 102255827, "body": "@WiktorStribi\u017cew thanks! I\u2019ll try it out."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 1, "creation_date": 1568359120, "post_id": 57918837, "comment_id": 102255927, "body": "@CinCout Thanks! If you make it an answer I\u2019ll accept it!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1568360396, "post_id": 57918837, "comment_id": 102256478, "body": "This appears to be a follow-up to <a href=\"https://stackoverflow.com/q/57892089/4653379\">your previous question</a>, which I answered (and you kindly accepted) but without considering a multiline string.  If this is indeed the case, that answer will work with multiline strings as well -- you only need to add <code>&#47;s</code> modifier to the regex.  (A &quot;modifier&quot; is what you add after, like <code>&#47;...&#47;s</code>.)  I added a comment at the end of my <a href=\"https://stackoverflow.com/a/57893600/4653379\">answer there</a>."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568361031, "post_id": 57918837, "comment_id": 102256740, "body": "@zdim Thanks! I just saw it and commented. I totally forgot it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1568361288, "post_id": 57918837, "comment_id": 102256852, "body": "Yeah, saw that :)   Btw, these strings now are a little different but you can modify the regex in that answer to work with them as well -- add to those character classes (<code>[...]</code>) additional characters to accept, like <code>#</code> (for <code>#62</code> etc) or <code>.</code> (for <code>.F.</code> etc), depending on what you want to capture out of all terms."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568361500, "post_id": 57918837, "comment_id": 102256947, "body": "@zdim Yeah, i already did that yesterday. So theorically it should work now \ud83d\ude01"}], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 1, "creation_date": 1568621926, "post_id": 57919009, "comment_id": 102317835, "body": "How do I add the substitute in Perl?"}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 1, "creation_date": 1568622107, "post_id": 57919009, "comment_id": 102317935, "body": "Because when I add the regex in my perl script it doesn\u2019t add the \u2018;\u2019 to the string. I dont know if the substitutie helps."}], "tags": [], "owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "is_accepted": true, "score": 1, "last_activity_date": 1568359198, "creation_date": 1568359198, "answer_id": 57919009, "question_id": 57918837, "link": "https://stackoverflow.com/questions/57918837/perl-regex-transform-multiline-to-a-single-line/57919009#57919009", "title": "Perl regex transform multiline to a single line", "body": "<p>Do this:</p>\n\n<p><code>([^\\n]*)\\n* /g</code></p>\n\n<p>Just capture everything except the newline character until the newline character is encountered per line.</p>\n\n<p>Then substitute with the captured group <code>$1</code></p>\n\n<p><a href=\"https://regex101.com/r/2b6ZUl/3\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1568625435, "post_id": 57953497, "comment_id": 102319598, "body": "I&#39;m trying to do is delete the newlines. So I can split the string from the #1234 to the semicolon. But my problem is when I delete the newlines it doesn&#39;t add the semicolon at the end of the line."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1568625499, "post_id": 57953497, "comment_id": 102319635, "body": "So now instead of this : &quot;#14 = VERTEX_POINT ( &#39;NONE&#39;, #50707 ) ;&quot; I get this: &quot;#14 = VERTEX_POINT ( &#39;NONE&#39;, #50707 ) &quot;. Without the semicolon."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1568625604, "post_id": 57953497, "comment_id": 102319688, "body": "and the same with the example in my question."}, {"owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1568625993, "post_id": 57953497, "comment_id": 102319895, "body": "I&#39;m using the answer of @CinCout, but in the answer he mentions  &quot;Then substitute with the captured group $1&quot;. I don&#39;t know how to do that in Perl."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "edited": false, "score": 0, "creation_date": 1568628177, "post_id": 57953497, "comment_id": 102321017, "body": "Re &quot;<i>I&#39;m trying to do is delete the newlines.</i>&quot;, &quot;Newline&quot; doesn&#39;t actually mean anything, and that doesn&#39;t say from what. Do you mean you want to delete line feeds from a string? That&#39;s what the code in my answer does. I even said as much. /// I don&#39;t see what any of the other comments have to do with my answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1568624471, "creation_date": 1568624471, "answer_id": 57953497, "question_id": 57918837, "link": "https://stackoverflow.com/questions/57918837/perl-regex-transform-multiline-to-a-single-line/57953497#57953497", "title": "Perl regex transform multiline to a single line", "body": "<p>It's unclear what you are asking. I think you are asking how to remove the line feeds from a string. That can be achieved using the following:</p>\n\n<pre><code>$str =~ s/\\n//g;\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 9368481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBMMe.png?s=128&g=1", "display_name": "mHvNG", "link": "https://stackoverflow.com/users/9368481/mhvng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 57919009, "answer_count": 2, "score": 2, "last_activity_date": 1568625736, "creation_date": 1568358406, "last_edit_date": 1568625736, "question_id": 57918837, "link": "https://stackoverflow.com/questions/57918837/perl-regex-transform-multiline-to-a-single-line", "title": "Perl regex transform multiline to a single line", "body": "<p>I'm having some problem with transforming a multi line string to a single line string.</p>\n\n<p>I have a string like this:</p>\n\n<pre><code>#66 = B_SPLINE_CURVE_WITH_KNOTS ( 'NONE', 3,\n ( #62, #61, #105, #104, #103, #102, #101, #100, #99, #98 ),\n .UNSPECIFIED., .F., .F.,\n ( 4, 3, 3, 4 ),\n ( 7.785145389033986000E-018, 0.0001260065739121398800, 0.0001891785121403045300, 0.0002523514299847038200 ),\n .UNSPECIFIED. ) ;\n</code></pre>\n\n<p>But I need it as one whole line. </p>\n\n<p><strong>This is what I tried:</strong> </p>\n\n<pre><code>/^#[0-9].*;)$/s/\n</code></pre>\n\n<p><strong><em>What I'm trying to do:</em></strong></p>\n\n<pre><code>#[0-9]\n</code></pre>\n\n<p>This points to the <code>#66</code>. The reason for this <code>#[0-9]</code> is it needs to be dynamic.</p>\n\n<pre><code>.*\n</code></pre>\n\n<p>This points to everything between the <code>;</code></p>\n\n<pre><code>;\n</code></pre>\n\n<p>This points to the end of the line. But unfortunately it doesn't work.</p>\n\n<p><strong><em>My regex now:</em></strong></p>\n\n<pre><code>/([^\\n]*)\\n* /g\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1568330783, "post_id": 57915139, "comment_id": 102249741, "body": "This question is off-topic. Please repost to <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568342155, "post_id": 57915139, "comment_id": 102251693, "body": "I&#39;d also encourage you to post for review, as there is a lot of chance for improvement in your good effort.  Still, here is a rough road map for one approach:  (1) extract numbers from names (using regex), and keep the parts <code>@parts = map { &#47;(.*?)([0-9]+)$&#47;; [ $1, $2 ] } @names;</code>  (2) Find longest number, <code>$ml = List::Util::max map { length $_-&gt;[1] } @parts</code> (3) Format numbers to desired length and put it back <code>@new_names = map { $-&gt;[0] . sprintf &quot;%0${ml}d&quot;, $-&gt;[1] } @parts;</code> (4) rename files.  /// This is written quickly with little thought and only a basic check"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1568351569, "post_id": 57915139, "comment_id": 102253403, "body": "A couple of notes on the above.  (1) one can also do <code>map { [ &#47;(.*?)([0-9]+)$&#47; ] }</code>  since regex returns a list (of two) captures and so we get our arrayref  (2) By &quot;<i>Find longest number</i>&quot; I meant &quot;Find the maximal length among those numbers&quot; (as strings)  -- that doesn&#39;t identify what that number is (not needed)  (3) &quot;<i>put it back</i>&quot; meant &quot;put the strings back together&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1568369000, "creation_date": 1568369000, "answer_id": 57921513, "question_id": 57915139, "link": "https://stackoverflow.com/questions/57915139/how-to-rename-all-files-in-a-directory-to-have-an-equal-amount-of-digits/57921513#57921513", "title": "How to rename all files in a directory to have an equal amount of digits?", "body": "<p>Honestly, I don't think I'd change very much. Here's my version.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse diagnostics;\n\nprint \"Give the path to the directory where the pictures are stored:\\n\";\nchomp(my $dir = &lt;STDIN&gt;);\n\nchdir $dir or die \"Couldn't change the directory: $!\\n\";\nmy @files  = &lt;*&gt;;\n#gives a list of all filehandles in the given directory\n\nmy $amount_of_digits = int( log($#files)/log(10) +1);\n#how many digits should the new number have?\n#Example: If there are 400 files -&gt; 3 digits per file: 001, 002 etc\n\nforeach (@files) {\n    next if -d;\n    #skip the . and .. files\n\n    print \"$_\\n\";\n    if (/(\\d+)/) {\n        my $new_number = sprintf \"%0${amount_of_digits}d\", $1;\n        (my $new_name = $_) =~ s/$1/$new_number/;\n        print \"Changing name to: $new_name\\n\"; \n        rename ($_, $new_name) or die \"Couldn't rename the file: $!\";\n    }\n}\n\nprint \"Program completed. Press any key to continue.\\n\";\nmy $einde = &lt;STDIN&gt;;\n</code></pre>\n\n<ol>\n<li>I've combined the <code>chomp()</code> into the line that reads from <code>STDIN</code>.</li>\n<li>I renamed the variable that holds the directory name. It's now called <code>$dir</code>.</li>\n<li>I use <code>$_</code> as the loop variable - because many of the operations inside the loop use <code>$_</code> by default, so it simplifies some of the code.</li>\n<li>Instead of looking for <code>.</code> and <code>..</code> specifically, I just look for directories (with <code>-d</code>).</li>\n<li>I use <code>sprintf()</code> as a simpler(?) way to generate a zero-padded version of the number.</li>\n</ol>\n\n<p>Hope this is useful.</p>\n"}], "owner": {"reputation": 47, "user_id": 10950852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yHnwzwtDIt0/AAAAAAAAAAI/AAAAAAAAAAs/8yZStI5PtW0/photo.jpg?sz=128", "display_name": "Zwarte Kop", "link": "https://stackoverflow.com/users/10950852/zwarte-kop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568369000, "creation_date": 1568326670, "question_id": 57915139, "link": "https://stackoverflow.com/questions/57915139/how-to-rename-all-files-in-a-directory-to-have-an-equal-amount-of-digits", "title": "How to rename all files in a directory to have an equal amount of digits?", "body": "<p>I took a lot of pictures with my camera and I wanted to make a timelapse out of them. The camera saved the pictures as picture1, picture2 ... picture956 etc but the timelapse software I'm using only accepts numbers of equal length like this: picture001, picture002, picture003 etc.</p>\n\n<p>I thought Perl would be a good fit for this kind of problem so I gave it a shot. This is a shorter and translated version of the original code so if anything is unclear I can change it to the longer version.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse diagnostics;\n\nprint \"Give the path to the directory where the pictures are stored:\\n\";\nmy $filename = &lt;STDIN&gt;;\n\nchomp $filename;\nchdir $filename or die \"Couldn't change the directory: $!\\n\";\nmy @files  = &lt;*&gt;;\n#gives a list of all filehandles in the given directory\n\nmy $amount_of_digits = int( log($#files)/log(10) +1);\n#how many digits should the new number have?\n#Example: If there are 400 files -&gt; 3 digits per file: 001, 002 etc\n\nforeach my $file (@files){\n    next if($file =~ /^\\.$/);\n    next if($file =~ /^\\.\\.$/);\n    #skip the . and .. files\n    print \"$file\\n\";\n    if ($file =~ /(\\d+)/){\n        my $amount_of_padded_zeroes = $amount_of_digits - length($1);\n        if($amount_of_padded_zeroes &gt; 0){\n            my $new_number =  '0' x $amount_of_padded_zeroes . $1;     \n            (my $new_name = $file) =~ s/$1/$new_number/;\n            print \"Changing name too: $new_name\\n\"; \n            rename ($file, $new_name) or die \"Couldn't rename the file: $!\";\n        }\n    }\n}\n\nprint \"Program completed. Press any key to continue.\\n\";\nmy $einde = &lt;STDIN&gt;;\n\n</code></pre>\n\n<p>The code works but I wanted to know if there is a better/cleaner/shorter/more Pearlesque way to do this. I'm learning Perl for uni so any feedback is welcome. I suspect this problem is so trivial in Perl that there might be readable one-liners that are able to replace all of this.</p>\n"}, {"tags": ["sql", "perl", "rose-db-object"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1568370353, "last_edit_date": 1568370353, "creation_date": 1568366518, "answer_id": 57920790, "question_id": 57914832, "link": "https://stackoverflow.com/questions/57914832/rosedb-masking-in-query-statements/57920790#57920790", "title": "Rose::DB masking in query statements", "body": "<p>Let's say your SQL server understands the following:</p>\n\n<pre><code>(accounttype &amp; 16) &lt;&gt; 0\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/Rose::DB::Object::QueryBuilder\" rel=\"nofollow noreferrer\">This</a> would then suggest that you could use the following:</p>\n\n<pre><code>[ \\'(accounttype &amp; ?) &lt;&gt; 0' =&gt; ACCOUNT_TYPE_SPECIAL_MASK ]\n</code></pre>\n\n<p>Under the circumstances, you could inline the constant.</p>\n\n<pre><code>\\sprintf('(accounttype &amp; %d) &lt;&gt; 0', ACCOUNT_TYPE_SPECIAL_MASK)\n</code></pre>\n\n<p>I don't know if these two versions result in different SQL, and I don't know which is faster if so.</p>\n"}], "owner": {"reputation": 555, "user_id": 1846256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c24edb80a3e89769c5b2c543624d905?s=128&d=identicon&r=PG", "display_name": "ritter", "link": "https://stackoverflow.com/users/1846256/ritter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568370353, "creation_date": 1568324329, "question_id": 57914832, "link": "https://stackoverflow.com/questions/57914832/rosedb-masking-in-query-statements", "title": "Rose::DB masking in query statements", "body": "<p>I'm seeking some help on my Rose::DB issue as described below.</p>\n\n<p>I have an account object, and this has an integer \"accounttype\" field. In this example I will use the following accounttype constants:</p>\n\n<pre><code>ACCOUNT_TYPE_SPECIAL_MASK   = 0x10;\nACCOUNT_TYPE_SPECIAL_1      = 0x10;\nACCOUNT_TYPE_SPECIAL_2      = 0x11;\nACCOUNT_TYPE_NORMAL_MASK    = 0x20;\nACCOUNT_TYPE_NORMAL_1       = 0x20;\nACCOUNT_TYPE_NORMAL_2       = 0x21;\n</code></pre>\n\n<p>At present, when I want accounts of a given type, I'd list them all and do something like this:</p>\n\n<pre><code>my $iter    = Test::Account::Manager-&gt;get_accounts_iterator(\n    db              =&gt; $db,\n    query           =&gt;\n    [\n        'accounttype'   =&gt; [ ACCOUNT_TYPE_SPECIAL_1, ACCOUNT_TYPE_SPECIAL_2 ],\n    ]\n);\n</code></pre>\n\n<p>However, I'd like to be able to query for the accounts using the appropriate mask, rather than specify all possible types.</p>\n\n<p>I'd like to be able to say:</p>\n\n<pre><code>my $iter    = Test::Account::Manager-&gt;get_accounts_iterator(\n    db              =&gt; $db,\n    query           =&gt;\n    [\n        'accounttype'   =&gt; 'accounttype &amp; ACCOUNT_TYPE_SPECIAL_MASK'\n    ]\n);\n</code></pre>\n\n<p>However, I haven't spotted any way to do this. Any help or recommendations most welcome.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11217975, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3mvlnbugvhM/AAAAAAAAAAI/AAAAAAAAABg/7FdLM1GLD7c/photo.jpg?sz=128", "display_name": "themostanonymousanonymous", "link": "https://stackoverflow.com/users/11217975/themostanonymousanonymous"}, "edited": false, "score": 0, "creation_date": 1568321270, "post_id": 57914211, "comment_id": 102247469, "body": "Thank you very much, but there&#39;s still one thing I don&#39;t get. What is the result of writing two variables into brackets on definition. Does it somehow connect the two variables to each other, or what exaclty does this lead too?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 5, "user_id": 11217975, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3mvlnbugvhM/AAAAAAAAAAI/AAAAAAAAABg/7FdLM1GLD7c/photo.jpg?sz=128", "display_name": "themostanonymousanonymous", "link": "https://stackoverflow.com/users/11217975/themostanonymousanonymous"}, "edited": false, "score": 0, "creation_date": 1568321412, "post_id": 57914211, "comment_id": 102247507, "body": "No, it&#39;s just a convenient way to declare both at once, instead of two separate <code>my</code> statements. The only difference it would make is if something meaningful was assigned to them, as you&#39;d be assigning to that list of variables. (Which isn&#39;t very useful when they are both arrays, because the first array would get all the values and the second would still be empty.)"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1568320763, "creation_date": 1568320763, "answer_id": 57914211, "question_id": 57914113, "link": "https://stackoverflow.com/questions/57914113/perl-variable-definition/57914211#57914211", "title": "Perl variable definition", "body": "<p>The variable definition with <a href=\"https://perldoc.pl/functions/my\" rel=\"nofollow noreferrer\">my</a> declares those variables for the current lexical scope, whereas doing that in a smaller scope, such as within the foreach loop or subroutine, would mean they aren't available outside it, and each iteration would get a new instance of that variable. (A lexical scope is defined what you visibly see in the source code, it's either bounded by a block <code>{}</code> or the file itself.) The <code>= ()</code> here actually does nothing, since arrays start out empty already.</p>\n\n<p>The <a href=\"https://perldoc.pl/perlsyn#Foreach-Loops\" rel=\"nofollow noreferrer\">foreach</a> loop aliases each element of the list to <code>$_</code> since no variable was provided to it. It could also be written <code>foreach my $key (keys %{$anyHashReference})</code> and then you would use <code>$key</code> instead of <code>$_</code>, and this is in fact much safer because it does not rely on a global variable. The documentation for <a href=\"https://perldoc.pl/variables/$_\" rel=\"nofollow noreferrer\">$_</a> lists all of the core functionality that could end up using it.</p>\n\n<p>In either case, these <a href=\"https://perldoc.pl/functions/push\" rel=\"nofollow noreferrer\">push</a> statements are adding the current item to <code>@array1</code>, and then the value from the hash reference at that key.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1568322861, "creation_date": 1568322861, "answer_id": 57914596, "question_id": 57914113, "link": "https://stackoverflow.com/questions/57914113/perl-variable-definition/57914596#57914596", "title": "Perl variable definition", "body": "<p>The following three snippets are equivalent:</p>\n\n<pre><code>my $x;\nmy $y;\n($x, $y) = foo();\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>(my $x, my $y) = foo();\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my ($x, $y) = foo();\n</code></pre>\n\n<p>In every case, the first scalar returned by expression on the right-hand of the assignment is assigned to <code>$x</code>, and the second to <code>$y</code>. (Any extras are ignored.)</p>\n\n<hr>\n\n<p>There's a catch when one of the variables to which values are being assigned is an array (or hash).</p>\n\n<pre><code>my (@a, ...) = foo();\n</code></pre>\n\n<p>Perl doesn't know how many of the scalars returned by the RHS should be assigned to the array, and how many of the scalars should be assigned to the subsequent variables, so it assigns them all to the array.</p>\n\n<p>This means the following are equivalent:</p>\n\n<pre><code>my @a;\nmy @b;\n@a = foo();\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>(my @a, my @b) = foo();\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my (@a, @b) = foo();\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>my @a = foo();\nmy @b;\n</code></pre>\n\n<p>Obviously, the last one is clearest.</p>\n\n<hr>\n\n<p>Finally, let's look at your specific case. You have</p>\n\n<pre><code>my (@array1, @array2) = ();\n</code></pre>\n\n<p>As mentioned above, this is equivalent to</p>\n\n<pre><code>my @array1 = ();\nmy @array2;\n</code></pre>\n\n<p>Since Perl creates arrays empty<sup>[1]</sup>, we could simply write</p>\n\n<pre><code>my @array1;\nmy @array2;\n</code></pre>\n\n<p>By combining these, we can make the code more compact.</p>\n\n<pre><code>my (@array1, @array2);\n</code></pre>\n\n<p>Both of these final options are fine, but I think the one used by the author your code is pretty horrible. It's misleading and unncessarily noisy.</p>\n\n<hr>\n\n<ol>\n<li>Hashes are also created empty, and scalars are created undefined.</li>\n</ol>\n"}], "owner": {"reputation": 5, "user_id": 11217975, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3mvlnbugvhM/AAAAAAAAAAI/AAAAAAAAABg/7FdLM1GLD7c/photo.jpg?sz=128", "display_name": "themostanonymousanonymous", "link": "https://stackoverflow.com/users/11217975/themostanonymousanonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57914211, "answer_count": 2, "score": 0, "last_activity_date": 1568322861, "creation_date": 1568320297, "last_edit_date": 1568320678, "question_id": 57914113, "link": "https://stackoverflow.com/questions/57914113/perl-variable-definition", "title": "Perl variable definition", "body": "<p>So I have nearly no experience with Perl and for work I have to analyze some messy Perl code and find a mistake. I am having serious trouble understanding the code because of the massive usage of $_ which is so confusing. So if you have any advice how to get into Perl quickly please tell me. However that is not my main question.</p>\n\n<p>I've just bumped into a line of code that I dont understand. It is inside of a Perl Module right after the listing of all the librarys. So here is the line:</p>\n\n<pre><code>my (@array1,@array2) = ()\n</code></pre>\n\n<p>Later then one of the arrays is used in the following case inside of the constructor that is called with a hash as argument:</p>\n\n<pre><code>my ($object,$anyHashReference) = @_;\n@array2 = someValue;\nforeach (keys %{$anyHashReference})\n{\n    push(@array1,$_);\n    push(@array1,$anyHashReference-&gt;{$_});\n}\nreturn bless {}, $object;\n</code></pre>\n\n<p>So what I don't understand is what exactly is archieved with the variable declaration for multiple variables and what does the push function do in this case.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl", "eval"], "answers": [{"comments": [{"owner": {"reputation": 295, "user_id": 4805664, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/768db54eefbee605570dde334d6b1674?s=128&d=identicon&r=PG&f=1", "display_name": "shirha", "link": "https://stackoverflow.com/users/4805664/shirha"}, "edited": false, "score": 0, "creation_date": 1568347079, "post_id": 57913151, "comment_id": 102252493, "body": "I was using your suggestion in my code. I guess this means that if a subroutine tries to use a variable outside of it&#39;s scope, even with an eval, it needs to be declared before the sub definition."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 295, "user_id": 4805664, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/768db54eefbee605570dde334d6b1674?s=128&d=identicon&r=PG&f=1", "display_name": "shirha", "link": "https://stackoverflow.com/users/4805664/shirha"}, "edited": false, "score": 0, "creation_date": 1568347219, "post_id": 57913151, "comment_id": 102252517, "body": "A sub can never use a variable outside of its scope (except indirectly e.g. using a reference). Outside of its scope literally means it can&#39;t see it."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1568318652, "last_edit_date": 1568318652, "creation_date": 1568315476, "answer_id": 57913151, "question_id": 57912955, "link": "https://stackoverflow.com/questions/57912955/perl-string-eval-misunderstood/57913151#57913151", "title": "perl string eval misunderstood", "body": "<p>The whole <a href=\"https://stackoverflow.com/a/20890822/589924\">point</a> of using <code>my</code> to is limit the scope (visibility) of variables. <code>my</code> variables are scoped from the statement after which they are created to the end of the innermost block in which they are located, which means they are only visible to that code. (The file itself acts as a block.)</p>\n\n<pre><code># This code can't see $x.\nmy $x;\n# This code can see $x.\n\n{\n   # This code can't see $y.\n   my $y;\n   # This code can see $y.\n}\n# This code can't see $y.\n</code></pre>\n\n<p>To be clear, this is strictly based on where the code is located in the source; it's not based on when code is executed.</p>\n\n<p>As such, <code>my $uid</code> needs to be found before the sub's declaration in order for the sub to see the variable. You can always set its value later, however.</p>\n\n<hr>\n\n<p>That said, what you are doing is horrible! You are intentionally doing the very thing we force ourselves to not do by using <code>use strict;</code> in every program! See <a href=\"https://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">Why it's stupid to `use a variable as a variable name'</a> and <a href=\"https://perl.plover.com/varvarname2.html\" rel=\"nofollow noreferrer\">A More Direct Explanation of the Problem</a>.</p>\n\n<p>Instead, replace</p>\n\n<pre><code> my $uid;\n\n sub href { eval \"\\$$_[0]\" }\n\n $uid = { '199' =&gt; 'Twister', '396' =&gt; 'Khorus', '450' =&gt; 'Ling', '555' =&gt; 'Sage' };\n</code></pre>\n\n<p>with</p>\n\n<pre><code> my %data;\n\n sub href { $data{$_[0]} }\n\n $data{uid} = { '199' =&gt; 'Twister', '396' =&gt; 'Khorus', '450' =&gt; 'Ling', '555' =&gt; 'Sage' };\n</code></pre>\n"}], "owner": {"reputation": 295, "user_id": 4805664, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/768db54eefbee605570dde334d6b1674?s=128&d=identicon&r=PG&f=1", "display_name": "shirha", "link": "https://stackoverflow.com/users/4805664/shirha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57913151, "answer_count": 1, "score": 0, "last_activity_date": 1568318652, "creation_date": 1568314313, "last_edit_date": 1568315632, "question_id": 57912955, "link": "https://stackoverflow.com/questions/57912955/perl-string-eval-misunderstood", "title": "perl string eval misunderstood", "body": "<p>I'm trying to return a reference to a hash from a string value but the results depends on the order of when the hash and sub are defined.</p>\n\n<p>Snippet 1:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $uid = { '199' =&gt; 'Twister', '396' =&gt; 'Khorus', '450' =&gt; 'Ling', '555' =&gt; 'Sage' };\nsub href { eval \"\\$$_[0]\" }\nprint Dumper href('uid');\n</code></pre>\n\n<p>Output of snippet 1:</p>\n\n<pre><code>$VAR1 = {\n          '199' =&gt; 'Twister',\n          '396' =&gt; 'Khorus',\n          '450' =&gt; 'Ling',\n          '555' =&gt; 'Sage'\n        };\n</code></pre>\n\n<p>Snippet 2:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub href { eval \"\\$$_[0]\" }\nmy $uid = { '199' =&gt; 'Twister', '396' =&gt; 'Khorus', '450' =&gt; 'Ling', '555' =&gt; 'Sage' };\nprint Dumper href('uid');\n</code></pre>\n\n<p>Output of snippet 2:</p>\n\n<pre><code>$VAR1 = undef;\n</code></pre>\n\n<p>It shouldn't matter if the sub is defined before or after the hash but it does. What am I missing?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1568311719, "post_id": 57912295, "comment_id": 102243917, "body": "What is <code>\\R(\\w.+\\w)\\R(\\w.+\\w)+</code> supposed to do?"}, {"owner": {"reputation": 18299, "user_id": 2191572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TWbVr.png?s=128&g=1", "display_name": "MonkeyZeus", "link": "https://stackoverflow.com/users/2191572/monkeyzeus"}, "edited": false, "score": 0, "creation_date": 1568313319, "post_id": 57912295, "comment_id": 102244562, "body": "Are you performing two separate matches: one for file name and one for file content?"}, {"owner": {"reputation": 18299, "user_id": 2191572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TWbVr.png?s=128&g=1", "display_name": "MonkeyZeus", "link": "https://stackoverflow.com/users/2191572/monkeyzeus"}, "edited": false, "score": 0, "creation_date": 1568313413, "post_id": 57912295, "comment_id": 102244608, "body": "Are you missing a <code>step start</code> before <code>4108 through 4124</code> or is that what the data looks like?"}, {"owner": {"reputation": 539, "user_id": 7907121, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-dvQzB8VUazY/AAAAAAAAAAI/AAAAAAAAAH0/C_lgYIumVpc/photo.jpg?sz=128", "display_name": "mightymax", "link": "https://stackoverflow.com/users/7907121/mightymax"}, "edited": false, "score": 0, "creation_date": 1568317847, "post_id": 57912295, "comment_id": 102246264, "body": "I can&#39;t get the REGEX to work for the string &quot;Block 1+&quot;. Ideas are appreciated"}], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 7907121, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-dvQzB8VUazY/AAAAAAAAAAI/AAAAAAAAAH0/C_lgYIumVpc/photo.jpg?sz=128", "display_name": "mightymax", "link": "https://stackoverflow.com/users/7907121/mightymax"}, "edited": false, "score": 1, "creation_date": 1568311829, "post_id": 57912353, "comment_id": 102243964, "body": "Thank you that was great!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1568311895, "post_id": 57912353, "comment_id": 102243991, "body": "Doesn&#39;t handle an empty or one-line block correctly."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1568312047, "post_id": 57912353, "comment_id": 102244059, "body": "I don&#39;t mean same line, I mean <code>&quot;step start\\nfoo bar\\nstep end\\n&quot;</code>."}, {"owner": {"reputation": 539, "user_id": 7907121, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-dvQzB8VUazY/AAAAAAAAAAI/AAAAAAAAAH0/C_lgYIumVpc/photo.jpg?sz=128", "display_name": "mightymax", "link": "https://stackoverflow.com/users/7907121/mightymax"}, "edited": false, "score": 0, "creation_date": 1568314337, "post_id": 57912353, "comment_id": 102244999, "body": "@anubhava it&#39;s not working on lines containing 1 Begin 1+."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1568314844, "post_id": 57912353, "comment_id": 102245202, "body": "Sorry I didn&#39;t understand by <code>1 Begin 1+</code>. Can you edit question and provide a sample data for which this regex doesn&#39;t work."}, {"owner": {"reputation": 539, "user_id": 7907121, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-dvQzB8VUazY/AAAAAAAAAAI/AAAAAAAAAH0/C_lgYIumVpc/photo.jpg?sz=128", "display_name": "mightymax", "link": "https://stackoverflow.com/users/7907121/mightymax"}, "edited": false, "score": 1, "creation_date": 1568317925, "post_id": 57912353, "comment_id": 102246287, "body": "@anubhava I&#39;ve edited the test data to reflect Block 1+"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 2, "last_activity_date": 1568319018, "last_edit_date": 1568319018, "creation_date": 1568311726, "answer_id": 57912353, "question_id": 57912295, "link": "https://stackoverflow.com/questions/57912295/regex-to-match-lines-and-save-as-first-line/57912353#57912353", "title": "Regex To match lines and save as first line", "body": "<p>You need to include <code>\\R</code> inside your repeating group and make it <strong>lazy</strong> to avoid matching overlapping start/end blocks:</p>\n\n<pre><code>^step start\\R(\\w.+)\\R(?:\\w.+\\R)*?step end$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/mpqdg3/4\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n\n<p>Non-capturing group <code>(?:\\w.+\\R)*?</code> allows line-break at the end to allow matching multiple lines before matching <code>step end</code></p>\n\n<p>Also it is safe to use <code>$</code> after <code>step end</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1568312456, "last_edit_date": 1568312456, "creation_date": 1568312142, "answer_id": 57912443, "question_id": 57912295, "link": "https://stackoverflow.com/questions/57912295/regex-to-match-lines-and-save-as-first-line/57912443#57912443", "title": "Regex To match lines and save as first line", "body": "<p>I would suggest matching the whole middle block of text first, then extracting the first line. Otherwise your <code>\\w.+\\w</code> pattern might unintentionally match <code>step end</code> and skip into the next block. For example,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>step start\nstep end\nstep start\nfoo\nbar.xml\nstep end\n</code></pre>\n\n<p>would otherwise be parsed as one single block with a filename (first line) of <code>step end</code>.</p>\n\n<pre><code>if ($string =~ /^step start\\n(.*?)^step end$/ms) {\n    my $block = $1;\n    my $first_line;\n    if ($block =~ s/\\A(.*)\\n//) {\n        $first_line = $1;\n    }\n    ...\n}\n</code></pre>\n\n<p>Here the <code>.*?</code> pattern (combined with the <code>s</code> flag) matches \"any text at all, but as little as possible\".</p>\n\n<p>Alternatively you could split the input on <code>\"\\nstep end\\n\"</code> and strip the header from each block:</p>\n\n<pre><code>for my $block (split /^step end\\n/m, $string) {\n    $block =~ s/\\Astep start\\n(.*)\\n//\n        or next;  # malformed block\n    my $first_line = $1;\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 0, "last_activity_date": 1568320749, "creation_date": 1568320749, "answer_id": 57914207, "question_id": 57912295, "link": "https://stackoverflow.com/questions/57912295/regex-to-match-lines-and-save-as-first-line/57914207#57914207", "title": "Regex To match lines and save as first line", "body": "<p>My opinion is that a straight regular expression solution is not robust enough for what you're doing. For one thing, it seems to require that you are slurping the whole file into memory before trying to match, which is not scalable to large inputs. Here is a one-pass solution that doesn't make filenames with spaces (replaces with <code>_</code>):</p>\n\n<pre><code>perl -ne '\n  if($n==1){\n    ($f=$_)=~s/\\s/_/g;\n    chop $f;\n    open F,\"&gt;$f\";\n  }\n  if(/^step start/){\n    $n=1;\n  }\n  elsif(!/^step end/){\n    print F $_;\n    ++$n;\n  }'\n</code></pre>\n"}], "owner": {"reputation": 539, "user_id": 7907121, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-dvQzB8VUazY/AAAAAAAAAAI/AAAAAAAAAH0/C_lgYIumVpc/photo.jpg?sz=128", "display_name": "mightymax", "link": "https://stackoverflow.com/users/7907121/mightymax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 57912353, "answer_count": 3, "score": 2, "last_activity_date": 1568320749, "creation_date": 1568311448, "last_edit_date": 1568317892, "question_id": 57912295, "link": "https://stackoverflow.com/questions/57912295/regex-to-match-lines-and-save-as-first-line", "title": "Regex To match lines and save as first line", "body": "<p>Hi I've been trying to write a REGEX to match text between a beginning \"step start\" and \"step end\" then use the first line after step start to save the file as, but I can't seem to get the REGEX to work. I'm using Perl to do it, but I can also use a JavaScript function.</p>\n\n<p>REGEX</p>\n\n<pre><code>^step start\\R(\\w.+\\w)\\R(\\w.+\\w)+step end\n</code></pre>\n\n<p>SAMPLE DATA</p>\n\n<pre><code>step start\nBlock 1+\nDMC-GAASIB0-00-48-21-02-01AAA-520A-A.xml\nDMC-GAASIB0-00-48-21-02-01AAA-720A-A.xml\nstep end\nstep start\n4026 through 4167 and 4170 through 4207\nDMC-GAASIB0-00-79-11-01-00AAA-941A-A.xml\nstep end\n4108 through 4124 and Block 1+\nDMC-GAASIB0-00-91-28-00-19AAA-051A-A.xml\nstep end\nstep start\n4242 through 4606\nDMC-GAASIB0-03-48-21-02-01AAA-520A-A.xml\nDMC-GAASIB0-03-48-21-02-01AAA-720A-A.xml\nstep end\nstep start\nAircraft 4010 through 4124\nDMC-GAASIB0-00-08-41-01-00AAA-169F-A.xml\nDMC-GAASIB0-00-08-41-03-00AAA-023A-A.xml\nDMC-GAASIB0-00-91-93-7A-12AAA-051A-A.xml\nstep end\n</code></pre>\n\n<p>Thank you for the help.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1568296921, "post_id": 57908316, "comment_id": 102236719, "body": "Try <code>&#47;(?=env(\\(((?:[^()]++|(?1))*)\\)))&#47;g</code>, see <a href=\"https://regex101.com/r/7p13kJ/2\" rel=\"nofollow noreferrer\">demo</a>. The values are in Group 2. Do you mean <code>perl</code> or <code>pcre</code>?"}, {"owner": {"reputation": 13, "user_id": 11022041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YZykc-QIm_4/AAAAAAAAAAI/AAAAAAAAAP4/CyM6usHGhMA/photo.jpg?sz=128", "display_name": "Calin Mihalache", "link": "https://stackoverflow.com/users/11022041/calin-mihalache"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568298694, "post_id": 57908316, "comment_id": 102237796, "body": "@WiktorStribizew that&#39;s for sure what I want to extract, the values from group2. Is there anyway to extract only values from group2? I need without the brackets. But anyway, that&#39;s magic pff..  and for your question, I mean Perl."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568298934, "post_id": 57908316, "comment_id": 102237925, "body": "See <a href=\"https://ideone.com/cxchvm\" rel=\"nofollow noreferrer\">ideone.com/cxchvm</a>"}, {"owner": {"reputation": 13, "user_id": 11022041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YZykc-QIm_4/AAAAAAAAAAI/AAAAAAAAAP4/CyM6usHGhMA/photo.jpg?sz=128", "display_name": "Calin Mihalache", "link": "https://stackoverflow.com/users/11022041/calin-mihalache"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1568300734, "post_id": 57908316, "comment_id": 102239012, "body": "Thank you very much! You are awesome!"}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1568300917, "creation_date": 1568300917, "answer_id": 57909692, "question_id": 57908316, "link": "https://stackoverflow.com/questions/57908316/i-need-to-extract-from-a-string-some-values-situated-between-brackets-using-perl/57909692#57909692", "title": "I need to extract from a string some values situated between brackets using perl", "body": "<p>You may use</p>\n\n<pre><code>/(?=env(\\(((?:[^()]++|(?1))*)\\)))/g\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/7p13kJ/2\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>(?=</code> - start of a positive lookahead to allow overlapping matches\n\n<ul>\n<li><code>env</code> - a literal <code>env</code> text</li>\n<li><code>(\\(((?:[^()]++|(?1))*)\\))</code> - Group 1, necessary to recurse the parenthesized substrings inside <code>env(...)</code>, matching\n\n<ul>\n<li><code>\\(</code> - a <code>(</code> char</li>\n<li><code>((?:[^()]++|(?1))*)</code> - Group 2 (to hold the value to extract): 0 or more sequences (<code>*</code>) of 1+ chars other than <code>(</code> and <code>)</code> (<code>[^()]++</code>) or the whole Group 1 pattern (<code>(?1)</code>)</li>\n<li><code>\\)</code> - a <code>)</code></li>\n</ul></li>\n</ul></li>\n<li><code>)</code> - end of the lookahead</li>\n</ul>\n\n<p>See the <a href=\"https://ideone.com/cxchvm\" rel=\"nofollow noreferrer\">online code demo</a>:</p>\n\n<pre><code>$string = '$env(test_$env(test1_$env(test2))) $env(test3)';\nwhile($string =~ /(?=env(\\(((?:[^()]++|(?1))*)\\)))/g) {\n    print \"$2\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11022041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YZykc-QIm_4/AAAAAAAAAAI/AAAAAAAAAP4/CyM6usHGhMA/photo.jpg?sz=128", "display_name": "Calin Mihalache", "link": "https://stackoverflow.com/users/11022041/calin-mihalache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57909692, "answer_count": 1, "score": 1, "last_activity_date": 1568300917, "creation_date": 1568296551, "last_edit_date": 1568296870, "question_id": 57908316, "link": "https://stackoverflow.com/questions/57908316/i-need-to-extract-from-a-string-some-values-situated-between-brackets-using-perl", "title": "I need to extract from a string some values situated between brackets using perl", "body": "<p>I have this string and I need to extract values after $env and situated between brackets.</p>\n\n<pre><code>$env(test_$env(test1_$env(test2))) $env(test3)\n</code></pre>\n\n<p>I've tried something like this but it doesn't work as I expected:</p>\n\n<pre><code>/\\s*env\\(([^)]+)\\)/g\n</code></pre>\n\n<p>I expect the following output in an array:</p>\n\n<pre><code>test_$env(test1_$env(test2))\ntest1_$env(test2)\ntest2\ntest3\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1568294429, "post_id": 57905671, "comment_id": 102235163, "body": "Where did you define the variables <code>$rsdp</code> and <code>$x2</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568301886, "post_id": 57908141, "comment_id": 102239654, "body": "<code>\\W</code> should probably be <code>\\b</code>. You want to indicate a word character boundary, and not include the following non-word character in the substitution."}, {"owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1568302586, "post_id": 57908141, "comment_id": 102240036, "body": "Yes ! I combined the two anserws and it works perfectly! the \\w eats another carachter, it&#39;s better with \\b  So many thanks to you two !"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1568303399, "post_id": 57908141, "comment_id": 102240457, "body": "@Grinnz: Yeah, you&#39;re right, of course. Not sure where the <code>\\W</code> came from."}, {"owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1569321601, "post_id": 57908141, "comment_id": 102551347, "body": "Hello, It&#39;s all working fine untll I have this cariable to replace vsi_id[3] :        $dc =~ s/\\$vsi_id[3]\\b/$vsi_id[3]/g;  I think I need to replace \\b by something else, but I don&#39;t know what.  Can you also tell How to find and learn these delimiters ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1569328093, "post_id": 57908141, "comment_id": 102554930, "body": "@FaroukH: This sounds like a new question. So you should probably ask it separately."}, {"owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1569328588, "post_id": 57908141, "comment_id": 102555200, "body": "@DaveCross I think it&#39;s a continuation of the previous, since I&#39;m trying to replace a Variables which is an array element. I think it&#39;s related to brackets. But if you insist I will create the topic"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1569329506, "post_id": 57908141, "comment_id": 102555687, "body": "@FaroukH: Your original question made no mention of some of the variables being stored in arrays - so this is a new question. Also, you might consider accepting one of the answers to this question."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "edited": false, "score": 0, "creation_date": 1569330447, "post_id": 57908141, "comment_id": 102556293, "body": "@FaroukH: It might be time for you to read the <a href=\"https://perldoc.pl/perlretut\" rel=\"nofollow noreferrer\">Perl regex tutorial</a> or even the <a href=\"https://perldoc.pl/perlre\" rel=\"nofollow noreferrer\">Perl regex manual</a>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1568303353, "last_edit_date": 1568303353, "creation_date": 1568295983, "answer_id": 57908141, "question_id": 57905671, "link": "https://stackoverflow.com/questions/57905671/cant-modify-the-variables-contained-in-another-var/57908141#57908141", "title": "Can&#39;t modify the variables contained in another var", "body": "<p>So you're reading text strings from your input file. Those text strings contain mentions of Perl variables and you want those variables to be expanded in the string without you doing anything to achieve that.</p>\n\n<p>I'm sorry, but life isn't that easy :-)</p>\n\n<p>The text strings you read from your input file are just dumb text strings. They know nothing about Perl variables. It's up to you to put in the clever work to make this work how you want it to work.</p>\n\n<p>Some people will tell you to use <code>eval</code> to do this. Please ignore them. It's too dangerous. What we will do is look for specific strings in your text (strings that will look like the variable names you are interested in) and substitute them for the current values stored in those variables.</p>\n\n<p>For example:</p>\n\n<pre><code>$dc =~ s/\\$rsdp\\b/$rsdp/g;\n$dc =~ s/\\$x2\\b/$x2/g;\n</code></pre>\n\n<p>Notice that I've:</p>\n\n<ol>\n<li>Escaped the <code>$</code> in the pattern on the left-hand side of the substitution, so it's just a <code>$</code> and not a variable sigil.</li>\n<li>Marked the end of the variable name with <code>\\b</code> which marks a \"word boundary\". This is so we only match our specific variable name and not any other, longer variable name that happens to start with our variable name.</li>\n<li>Using a global replacement (<code>/g</code>) in case the same variable name appears more than once in the input string.</li>\n</ol>\n\n<p>This needs to happen at the start of your <code>while</code> loop - after you have read the text from the file and before you send it as a command.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 5, "last_activity_date": 1568302359, "creation_date": 1568302359, "answer_id": 57910110, "question_id": 57905671, "link": "https://stackoverflow.com/questions/57905671/cant-modify-the-variables-contained-in-another-var/57910110#57910110", "title": "Can&#39;t modify the variables contained in another var", "body": "<p>What you're trying to do here is essentially templating: you specify the structure of the commands in one place, and the values that go in them in another. There are many templating solutions but an easy one for in-line templates like this is <a href=\"https://metacpan.org/pod/Text::Template\" rel=\"noreferrer\">Text::Template</a>, and just needs a minimal change to your input strings.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Text::Template 'fill_in_string';\n\n# presuming this text is from an external source that can't access these variables\nmy $template = '/configure service sdp {$rsdp} mpls description \"to-{$x2}\"';\n\nmy $rsdp = 'foo';\nmy $x2 = 'bar';\n# now these variables are defined\nmy $command = fill_in_string $template, HASH =&gt; {rsdp =&gt; $rsdp, x2 =&gt; $x2};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11896915, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xXKXzldRw6c/AAAAAAAAAAI/AAAAAAAAAV4/8_3eug-B3-A/photo.jpg?sz=128", "display_name": "Farouk H", "link": "https://stackoverflow.com/users/11896915/farouk-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568303353, "creation_date": 1568287488, "last_edit_date": 1568293314, "question_id": 57905671, "link": "https://stackoverflow.com/questions/57905671/cant-modify-the-variables-contained-in-another-var", "title": "Can&#39;t modify the variables contained in another var", "body": "<p>I have a file <code>command_file</code> containig a large number of commands destined to configure a router. Those lines depend on variables ($rsdp  and $x2 for this example) that I collecte in my code. Here's the two first lines as an example:</p>\n\n<p><code>/configure service sdp $rsdp mpls create</code></p>\n\n<p><code>/configure service sdp $rsdp mpls description \"to-$x2\"</code></p>\n\n<p>but when I lunch the perl script reading the file and sending the lines as commands to the router using <code>Net::SSH::Expect</code>, the variables don't change and get the wanted value. I tried using qq but same result. So the commands sent don't get changed. </p>\n\n<p>Thanks in advance for you time</p>\n\n<pre><code>my $k;\nmy $acdc = 'command_file';\nopen (my $ac, \"$acdc\") or die ;\nwhile (my $dc = &lt;$ac&gt;){\n    $ssh-&gt;send($dc);\n    $k = $ssh-&gt;read_line();\n    print \"$k\\n\";\n    }\n</code></pre>\n\n<pre><code>B:router# /configure service sdp $rsdp mpls create\nError: Invalid parameter.\n\nB:router# /configure service sdp $rsdp mpls description \"to-$x2\"                  \nError: Invalid parameter.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1568270144, "post_id": 57900941, "comment_id": 102222409, "body": "Call it like <code>perl test1.pl file1 file2 &gt; textfile.txt</code>. This is to provoke clarification whether it should just end up in a textfile or should be programmed into the script. Please also state whether you want selectable output file name, e.g. by a third parameter."}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1568270395, "post_id": 57900941, "comment_id": 102222497, "body": "yes.. it solved my issue.. thanks"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1568270529, "post_id": 57900941, "comment_id": 102222541, "body": "Should also be <code>print</code>, not <code>printf</code>. Don&#39;t use <code>printf</code> without a formatting pattern!"}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1568274909, "post_id": 57900941, "comment_id": 102224549, "body": "when i tried this script with the real data(large data), why there are some line of data missing? about more than half"}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1568274965, "post_id": 57900941, "comment_id": 102224588, "body": "the missing line started with ^@ --&gt; asr/rt_main/,^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^&zwnj;&#8203;@"}, {"owner": {"reputation": 2077, "user_id": 630535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dead23c2ab3ad4cd3b418fc6d33ec233?s=128&d=identicon&r=PG", "display_name": "nabuchodonossor", "link": "https://stackoverflow.com/users/630535/nabuchodonossor"}, "edited": false, "score": 0, "creation_date": 1568280129, "post_id": 57900941, "comment_id": 102227188, "body": "@sitinadhirahZainurin: why &quot;basic&quot; in the tags? No Basic related question!"}, {"owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "edited": false, "score": 0, "creation_date": 1568447511, "post_id": 57900941, "comment_id": 102283668, "body": "Also, for a better code- please &#39;close&#39; the file-handle after doing all the work. <a href=\"https://perldoc.perl.org/functions/close.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/close.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1568302934, "post_id": 57905681, "comment_id": 102240231, "body": "Hmmm, that seems familiar. If I only knew where I have read that before."}], "tags": [], "owner": {"reputation": 1115, "user_id": 10856970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q3mai-ypFws/AAAAAAAAAAI/AAAAAAAAAIg/GUzS4DSGL-o/photo.jpg?sz=128", "display_name": "Shivendra Pratap Kushwaha", "link": "https://stackoverflow.com/users/10856970/shivendra-pratap-kushwaha"}, "is_accepted": false, "score": 1, "last_activity_date": 1568287515, "creation_date": 1568287515, "answer_id": 57905681, "question_id": 57900941, "link": "https://stackoverflow.com/questions/57900941/how-to-write-output-into-txt-file/57905681#57905681", "title": "how to write output into txt file?", "body": "<p>Redirct the output of script in .txt file.</p>\n\n<pre><code>perl test1.pl file1 file2 &gt; output.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 1338382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vs6If.jpg?s=128&g=1", "display_name": "rprakash", "link": "https://stackoverflow.com/users/1338382/rprakash"}, "is_accepted": false, "score": 0, "last_activity_date": 1568473580, "creation_date": 1568473580, "answer_id": 57936731, "question_id": 57900941, "link": "https://stackoverflow.com/questions/57900941/how-to-write-output-into-txt-file/57936731#57936731", "title": "how to write output into txt file?", "body": "<p>If you want to write the text file programmatically in the script then you can use following script.</p>\n\n<p>This script takes the text file name also as a command line argument, last command line argument would used as the file name in which the content will be written.</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nmy $outfile = $ARGV[$#ARGV];\nmy @files = @ARGV[0..$#ARGV-1];\n\nopen my $outf, \"&gt;\", $outfile or\n    die \"Unable to open the file: $!\";\n\nmy $i = 0;\nforeach my $file (@files) {\n    open my $f, \"&lt;\", $file;\n    while (&lt;$f&gt;) {\n        next if ($.== 1 &amp;&amp; $i&gt;0);\n        print $outf $_;\n    }\n    close $f;\n    $i++;\n}\n\nclose $outf;\n</code></pre>\n\n<p>Command to execute the script :</p>\n\n<pre><code>perl test1.pl file1 file2 file3.txt\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1568473580, "creation_date": 1568269962, "last_edit_date": 1568287631, "question_id": 57900941, "link": "https://stackoverflow.com/questions/57900941/how-to-write-output-into-txt-file", "title": "how to write output into txt file?", "body": "<p>I want to merge two files and print into one txt file.</p>\n\n<p>I already successful merge two data but unable to print it into txt file. by now, the output just printed in xterm.</p>\n\n<p>input 1:</p>\n\n<pre><code>a123\nb\nc\nd\ne\nf\ng\n</code></pre>\n\n<p>input 2:</p>\n\n<pre><code>a123\nx\ny\nx\nc\nv\n</code></pre>\n\n<p>current output was displayed in xterm not in txt file.</p>\n\n<pre><code>a123\nb\nc\nd \ne\nf\ng\nx\ny\nx\nc\nv\n</code></pre>\n\n<p>run my script:</p>\n\n<pre><code>perl test1.pl file1 file2\n</code></pre>\n\n\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\nmy $files = $#ARGV; # get number of files - 1\nwhile (my $file = shift @ARGV) {\n   open my $fh, \"&lt;\", $file;\n   &lt;$fh&gt; unless $files == @ARGV;  #discard header unless first file\n   printf while &lt;$fh&gt;;\n}\n</code></pre>\n\n<p>save inside one txt file</p>\n"}, {"tags": ["windows", "perl"], "answers": [{"comments": [{"owner": {"reputation": 2668, "user_id": 926841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35db8f136bf1a8d79065de6e65ffe500?s=128&d=identicon&r=PG", "display_name": "Miroslav Popov", "link": "https://stackoverflow.com/users/926841/miroslav-popov"}, "edited": false, "score": 1, "creation_date": 1568264196, "post_id": 57899761, "comment_id": 102220541, "body": "Much better. I always write the code in a <code>positive tone</code>. It means I check for the success instead of for the failure, whenever it is possible, of course."}, {"owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "edited": false, "score": 1, "creation_date": 1568320115, "post_id": 57899761, "comment_id": 102247093, "body": "thanks for the answer but it still says the folder exists"}, {"owner": {"reputation": 159, "user_id": 7785383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13bbc5ecbca01b2a264ba5296fd84bb9?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Goodall AU", "link": "https://stackoverflow.com/users/7785383/taylor-goodall-au"}, "edited": false, "score": 0, "creation_date": 1568332395, "post_id": 57899761, "comment_id": 102250027, "body": "I think this is to do with the file system/perl, it&#39;s most likely ignoring the special characters or stripping them off. Try it with a directory that you know 100% does not exist."}, {"owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "edited": false, "score": 0, "creation_date": 1568339246, "post_id": 57899761, "comment_id": 102251212, "body": "-d works fine if lets say c:\\tempAB did not exist. But my use case is that I want to catch c:\\temp&lt;&gt; as invalid even if c:\\temp exists. Wondering if this is a bug in perl (on windows)?"}], "tags": [], "owner": {"reputation": 159, "user_id": 7785383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13bbc5ecbca01b2a264ba5296fd84bb9?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Goodall AU", "link": "https://stackoverflow.com/users/7785383/taylor-goodall-au"}, "is_accepted": false, "score": 0, "last_activity_date": 1568262640, "creation_date": 1568262640, "answer_id": 57899761, "question_id": 57898989, "link": "https://stackoverflow.com/questions/57898989/perl-windows-check-existence-of-a-directory/57899761#57899761", "title": "Perl windows check existence of a directory", "body": "<p>try this</p>\n\n<pre><code>if (-d $logsDir) {\n    print \"$logsDir exists\";\n} else {\n    print \"$logsDir does not exist!\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "edited": false, "score": 0, "creation_date": 1568608605, "post_id": 57933783, "comment_id": 102313302, "body": "thanks, the real question is who/what is converting it? and why? Must be related to that these are not valid characters for a folder name"}], "tags": [], "owner": {"reputation": 472, "user_id": 2001559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1bvT.png?s=128&g=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/2001559/maverick"}, "is_accepted": false, "score": 0, "last_activity_date": 1568471183, "last_edit_date": 1568471183, "creation_date": 1568449670, "answer_id": 57933783, "question_id": 57898989, "link": "https://stackoverflow.com/questions/57898989/perl-windows-check-existence-of-a-directory/57933783#57933783", "title": "Perl windows check existence of a directory", "body": "<p>In windows, if you try to rename(or add) a folder with '&lt;' or '>' character you will get error -</p>\n\n<pre><code>A filename cannot contain any of the following characters: \\ / : * ? \" &lt; &gt; |\n</code></pre>\n\n<p>So a file or folder is not supposed to contain these characters.\nI tried to do multiple runs on my machine similar the program mentioned by you-</p>\n\n<pre><code>1. .\\directoryexist.pl c:\\Perl64              &lt;--    Exist\n2. .\\directoryexist.pl c:\\Perl64&lt;&gt;            &lt;--    Exist\n3. .\\directoryexist.pl c:\\Perl64^&lt;&gt;^          &lt;--    Exist\n</code></pre>\n\n<p>Now the same thing with double quotes-</p>\n\n<pre><code>4. .\\directoryexist.pl \"c:\\Perl64\"            &lt;--    Exist\n4. .\\directoryexist.pl \"c:\\Perl64&lt;&gt;\"          &lt;--    Exist\n5. .\\directoryexist.pl \"c:\\Perl64^&lt;^&gt;\"        &lt;--    Not Exist\n</code></pre>\n\n<p>Now I looked at the answer here - <a href=\"https://stackoverflow.com/questions/43349134/how-can-i-add-greater-than-and-less-than-into-a-batch-file-variable\">How can I add greater than and less than into a batch file variable</a> which contains the great explanation of this behavior.</p>\n\n<p>Basically the gist is-</p>\n\n<blockquote>\n  <p>Adding '^' before '&lt;' sets the value of \"c:\\Perl64^&lt;^>\" to\n  \"c:\\Perl64&lt;>\" without any affect. When we used double quotes around\n  our input it is taken as it is conataing '^' hence giving the output  'not exist'.</p>\n  \n  <p>Now, As I mentioned before you cannot have certain character in names.\n  So, when you are checking the existence of \"c:\\Perk64&lt;>\" it is\n  converted to (I hope, but right now I do not have any proof for\n  support) \"c:\\Perl64\" which exist.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "edited": false, "score": 0, "creation_date": 1568608787, "post_id": 57934255, "comment_id": 102313328, "body": "Thank you for digging into this.Taking a clue from you, I tried this, please see my updated question"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1568454041, "creation_date": 1568454041, "answer_id": 57934255, "question_id": 57898989, "link": "https://stackoverflow.com/questions/57898989/perl-windows-check-existence-of-a-directory/57934255#57934255", "title": "Perl windows check existence of a directory", "body": "<p>The problem lies deeper than Perl. I wrote the following C code to compare:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\nint main(int argc, char **argv) {\n    if (argc != 2) {\n        fprintf(stderr, \"Usage: %s NAME\\n\", argv[0]);\n        return EXIT_FAILURE;\n    }\n\n    const char *name = argv[1];\n    struct stat st;\n    if (stat(name, &amp;st) == 0) {\n        printf(\"stat(%s): success\\n\", name);\n        switch (st.st_mode &amp; S_IFMT) {\n            case S_IFBLK:  printf(\"block device\\n\");            break;\n            case S_IFCHR:  printf(\"character device\\n\");        break;\n            case S_IFDIR:  printf(\"directory\\n\");               break;\n            case S_IFIFO:  printf(\"FIFO/pipe\\n\");               break;\n            case S_IFREG:  printf(\"regular file\\n\");            break;\n            default:       printf(\"unknown?\\n\");                break;\n        }\n        return EXIT_SUCCESS;\n    }\n    printf(\"stat(%s): error: %s\\n\", name, strerror(errno));\n    return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>(Perl's <code>-d</code> operator is just sugar around a <code>stat</code> call.)</p>\n\n<p>I compiled it using the (MinGW) gcc that comes with Strawberry Perl:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcc -Wall -Wextra -pedantic prog.c -o prog\n</code></pre>\n\n<p>It gives the same results:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\***&gt;.\\prog \"C:\\temp&lt;&gt;\"\nstat(C:\\temp&lt;&gt;): success\ndirectory\n</code></pre>\n\n<p>Thinking that it might be a quirk with the MinGW libraries, I tried the built-in <code>dir</code> command:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>dir \"C:\\temp&lt;&gt;\"\n</code></pre>\n\n<p>Curiously it doesn't fail, but it lists <code>C:\\</code> (not <code>C:\\temp&lt;&gt;</code>) and shows only the <code>Temp</code> entry, not the rest of <code>C:\\</code>.</p>\n\n<p>I'm not sure what's going on here.</p>\n"}], "owner": {"reputation": 123, "user_id": 11690214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db211c870921bd0248928a0dfffe3e36?s=128&d=identicon&r=PG&f=1", "display_name": "allmail", "link": "https://stackoverflow.com/users/11690214/allmail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1568609181, "creation_date": 1568255615, "last_edit_date": 1568609181, "question_id": 57898989, "link": "https://stackoverflow.com/questions/57898989/perl-windows-check-existence-of-a-directory", "title": "Perl windows check existence of a directory", "body": "<pre class=\"lang-perl prettyprint-override\"><code>if (!-d $logsDir) {\n    print \"LOGSDIR: [$logsDir] does not exist\\n\";\n}\nelse {\n    print \"LOGSDIR: [$logsDir] exists\\n\";\n}\n</code></pre>\n\n<p>I am passing the following value to <code>$logsDir</code> from command line and getting the following output</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>LOGSDIR: [c:\\temp&gt;&lt;] exists\n</code></pre>\n\n<p>I do have <code>C:\\temp</code>. I know <code>temp&gt;&lt;</code> is not a valid folder name on windows. But shouldn't <code>-d</code> give me the correct answer saying that this directory does not exist?</p>\n\n<p>thanks</p>\n\n<p>Thanks for the edit and the answer. Here is the modified code and output, it still doesn't work.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $logsDir = $ARGV[0];\n\nif (-d $logsDir) {\n    print \"$logsDir exists\";\n} else {\n    print \"$logsDir does not exist!\";\n}\n\n__END__\n\nResults \n&gt;perl test60.pl c:\\temp\nc:\\temp exists\n\n&gt;perl test60.pl c:\\temp^&lt;^&gt;\nc:\\temp&lt;&gt; exists\n</code></pre>\n\n<p>Thanks to melporne, I also tried this</p>\n\n<pre><code>C:\\Users\\XXXX&gt;dir C:\\temp\n Volume in drive C is System\n Volume Serial Number is XXXX\n\n Directory of C:\\temp\n\n09/16/2019  12:07 AM    &lt;DIR&gt;          .\n09/16/2019  12:07 AM    &lt;DIR&gt;          ..\n07/03/2019  11:50 PM               765 abcd.txt\n07/04/2019  12:24 AM               765 efgh.txt\n07/04/2019  12:41 AM               765 efgh.txt\n</code></pre>\n\n<p>and so on</p>\n\n<pre><code>C:\\Users\\XXXX&gt;dir C:\\temp^&lt;^&gt;\n Volume in drive C is System\n Volume Serial Number is XXXX\n\n Directory of C:\\\n\n09/16/2019  12:07 AM    &lt;DIR&gt;          Temp\n09/15/2019  05:33 PM    &lt;DIR&gt;          temp1\n11/19/2018  06:06 PM    &lt;DIR&gt;          Temp;\n09/15/2019  12:31 AM    &lt;DIR&gt;          temparchive\n               0 File(s)              0 bytes\n               4 Dir(s)  yyyyyyyyyyy bytes free\n</code></pre>\n\n<p>I do have the above folders, so it looks like it is treating it as temp*. The above result is exactly similar to this</p>\n\n<pre><code>C:\\Users\\XXXX&gt;dir C:\\temp*\n Volume in drive C is System\n Volume Serial Number is XXXX\n\n Directory of C:\\\n\n09/16/2019  12:07 AM    &lt;DIR&gt;          Temp\n09/15/2019  05:33 PM    &lt;DIR&gt;          temp1\n11/19/2018  06:06 PM    &lt;DIR&gt;          Temp;\n09/15/2019  12:31 AM    &lt;DIR&gt;          temparchive\n               0 File(s)              0 bytes\n               4 Dir(s)  yyyyyyyyyyy  bytes free\n</code></pre>\n"}]